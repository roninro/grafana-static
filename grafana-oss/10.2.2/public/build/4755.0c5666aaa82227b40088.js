(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4755],{34397:(ge,te,m)=>{"use strict";m.d(te,{K:()=>U});var V=m(41407),L=m(39953),w=m(82803);const U=({children:I})=>{const F=(0,w.wW)(W);return L.createElement("div",{className:F.root},I)},W=I=>({root:(0,V.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:I.spacing(3),minHeight:I.spacing(4)})})},13579:(ge,te,m)=>{"use strict";m.d(te,{B:()=>L});var V=m(39953);const L=({grow:w,shrink:U})=>V.createElement("div",{style:{display:"block",flexGrow:w,flexShrink:U}})},56504:(ge,te,m)=>{"use strict";m.d(te,{X:()=>K});var V=m(41407),L=m(39953),w=m(82803),U=m(9558),W=m(28987),I=Object.defineProperty,F=Object.defineProperties,j=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,Y=(C,Ue,Oe)=>Ue in C?I(C,Ue,{enumerable:!0,configurable:!0,writable:!0,value:Oe}):C[Ue]=Oe,x=(C,Ue)=>{for(var Oe in Ue||(Ue={}))O.call(Ue,Oe)&&Y(C,Oe,Ue[Oe]);if(b)for(var Oe of b(Ue))M.call(Ue,Oe)&&Y(C,Oe,Ue[Oe]);return C},B=(C,Ue)=>F(C,j(Ue)),$=(C,Ue)=>{var Oe={};for(var N in C)O.call(C,N)&&Ue.indexOf(N)<0&&(Oe[N]=C[N]);if(C!=null&&b)for(var N of b(C))Ue.indexOf(N)<0&&M.call(C,N)&&(Oe[N]=C[N]);return Oe};function K(C){var Ue=C,{label:Oe}=Ue,N=$(Ue,["label"]);const ye=(0,w.wW)(ar),[be]=(0,L.useState)(()=>Math.random().toString(16).slice(2)),We={SelectContainer:Re,ValueContainer:Ce,SingleValue:Ce};return L.createElement("div",{className:ye.root},Oe&&L.createElement("label",{className:ye.label,htmlFor:be},Oe,":","\xA0"),L.createElement(U.Ph,B(x({openMenuOnFocus:!0,inputId:be},N),{components:We})))}const Re=C=>{const{children:Ue}=C,Oe=(0,w.wW)(ar);return L.createElement(W.e,B(x({},C),{className:(0,V.cx)(C.className,Oe.container)}),Ue)},Ce=C=>{const{className:Ue,children:Oe}=C,N=(0,w.wW)(ar);return L.createElement("div",{className:(0,V.cx)(Ue,N.valueContainer)},Oe)},ar=C=>({root:(0,V.css)({display:"flex",fontSize:12,alignItems:"center"}),label:(0,V.css)({color:C.colors.text.secondary,whiteSpace:"nowrap"}),container:(0,V.css)({background:"none",borderColor:"transparent"}),valueContainer:(0,V.css)({display:"flex",alignItems:"center",flex:"initial",color:C.colors.text.secondary,fontSize:12})})},68250:(ge,te,m)=>{"use strict";m.r(te),m.d(te,{AND:()=>x,AS:()=>M,ASC:()=>j,BY:()=>I,COMPARISON_OPERATORS:()=>Ce,DESC:()=>F,EQUALS:()=>K,FROM:()=>L,GROUP:()=>U,LIMIT:()=>b,LOGICAL_OPERATORS:()=>$,NOT_EQUALS:()=>Re,OR:()=>B,ORDER:()=>W,SCHEMA:()=>Y,SELECT:()=>V,STD_OPERATORS:()=>ar,WHERE:()=>w,WITH:()=>O,conf:()=>C,language:()=>Ue});const V="select",L="from",w="where",U="group",W="order",I="by",F="desc",j="asc",b="limit",O="with",M="as",Y="schema",x="AND",B="OR",$=[x,B],K="=",Re="!=",Ce=[K,Re],ar=[...Ce],C={comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},Ue={defaultToken:"",tokenPostfix:".sql",ignoreCase:!0,brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["ABORT","ABSOLUTE","ACTION","ADA","ADD","AFTER","ALL","ALLOCATE","ALTER","ALWAYS","ANALYZE","AND","ANY","ARE","AS","ASC","ASSERTION","AT","ATTACH","AUTHORIZATION","AUTOINCREMENT","AVG","BACKUP","BEFORE","BEGIN","BETWEEN","BIT","BIT_LENGTH","BOTH","BREAK","BROWSE","BULK","BY","CASCADE","CASCADED","CASE","CAST","CATALOG","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CHECKPOINT","CLOSE","CLUSTERED","COALESCE","COLLATE","COLLATION","COLUMN","COMMIT","COMPUTE","CONFLICT","CONNECT","CONNECTION","CONSTRAINT","CONSTRAINTS","CONTAINS","CONTAINSTABLE","CONTINUE","CONVERT","CORRESPONDING","COUNT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATE","DAY","DBCC","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DENY","DESC","DESCRIBE","DESCRIPTOR","DETACH","DIAGNOSTICS","DISCONNECT","DISK","DISTINCT","DISTRIBUTED","DO","DOMAIN","DOUBLE","DROP","DUMP","EACH","ELSE","END","END-EXEC","ERRLVL","ESCAPE","EXCEPT","EXCEPTION","EXCLUDE","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXPLAIN","EXTERNAL","EXTRACT","FAIL","FALSE","FETCH","FILE","FILLFACTOR","FILTER","FIRST","FLOAT","FOLLOWING","FOR","FOREIGN","FORTRAN","FOUND","FREETEXT","FREETEXTTABLE","FROM","FULL","FUNCTION","GENERATED","GET","GLOB","GLOBAL","GO","GOTO","GRANT","GROUP","GROUPS","HAVING","HOLDLOCK","HOUR","IDENTITY","IDENTITYCOL","IDENTITY_INSERT","IF","IGNORE","IMMEDIATE","IN","INCLUDE","INDEX","INDEXED","INDICATOR","INITIALLY","INNER","INPUT","INSENSITIVE","INSERT","INSTEAD","INT","INTEGER","INTERSECT","INTERVAL","INTO","IS","ISNULL","ISOLATION","JOIN","KEY","KILL","LANGUAGE","LAST","LEADING","LEFT","LEVEL","LIKE","LIMIT","LINENO","LOAD","LOCAL","LOWER","MATCH","MATERIALIZED","MAX","MERGE","MIN","MINUTE","MODULE","MONTH","NAMES","NATIONAL","NATURAL","NCHAR","NEXT","NO","NOCHECK","NONCLUSTERED","NONE","NOT","NOTHING","NOTNULL","NULL","NULLIF","NULLS","NUMERIC","OCTET_LENGTH","OF","OFF","OFFSET","OFFSETS","ON","ONLY","OPEN","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","OPTION","OR","ORDER","OTHERS","OUTER","OUTPUT","OVER","OVERLAPS","PAD","PARTIAL","PARTITION","PASCAL","PERCENT","PIVOT","PLAN","POSITION","PRAGMA","PRECEDING","PRECISION","PREPARE","PRESERVE","PRIMARY","PRINT","PRIOR","PRIVILEGES","PROC","PROCEDURE","PUBLIC","QUERY","RAISE","RAISERROR","RANGE","READ","READTEXT","REAL","RECONFIGURE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELATIVE","RELEASE","RENAME","REPLACE","REPLICATION","RESTORE","RESTRICT","RETURN","RETURNING","REVERT","REVOKE","RIGHT","ROLLBACK","ROW","ROWCOUNT","ROWGUIDCOL","ROWS","RULE","SAVE","SAVEPOINT","SCHEMA","SCROLL","SECOND","SECTION","SECURITYAUDIT","SELECT","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","SESSION","SESSION_USER","SET","SETUSER","SHUTDOWN","SIZE","SMALLINT","SOME","SPACE","SQL","SQLCA","SQLCODE","SQLERROR","SQLSTATE","SQLWARNING","STATISTICS","SUBSTRING","SUM","SYSTEM_USER","TABLE","TABLESAMPLE","TEMP","TEMPORARY","TEXTSIZE","THEN","TIES","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TOP","TRAILING","TRAN","TRANSACTION","TRANSLATE","TRANSLATION","TRIGGER","TRIM","TRUE","TRUNCATE","TRY_CONVERT","TSEQUAL","UNBOUNDED","UNION","UNIQUE","UNKNOWN","UNPIVOT","UPDATE","UPDATETEXT","UPPER","USAGE","USE","USER","USING","VACUUM","VALUE","VALUES","VARCHAR","VARYING","VIEW","VIRTUAL","WAITFOR","WHEN","WHENEVER","WHERE","WHILE","WINDOW","WITH","WITHIN GROUP","WITHOUT","WORK","WRITE","WRITETEXT","YEAR","ZONE"],operators:["EXCEPT","INTERSECT","UNION","APPLY","CROSS","FULL","INNER","JOIN","LEFT","OUTER","RIGHT","CONTAINS","FREETEXT","IS","NULL","PIVOT","UNPIVOT","MATCHED"],logicalOperators:["ALL","AND","ANY","BETWEEN","EXISTS","IN","LIKE","NOT","OR","SOME"],comparisonOperators:["<>",">","<",">=","<=","=","!=","&","~","^","%"],builtinFunctions:["AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","SUM","STDEV","STDEVP","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","COLLATE","COLLATIONPROPERTY","TERTIARY_WEIGHTS","FEDERATION_FILTERING_VALUE","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","CURRENT_TIMESTAMP","DATEADD","DATEDIFF","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","CHOOSE","COALESCE","IIF","NULLIF","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASE_PRINCIPAL_ID","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHAR","CHARINDEX","CONCAT","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","NCHAR","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STUFF","SUBSTRING","UNICODE","UPPER","BINARY_CHECKSUM","CHECKSUM","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","ERROR_LINE","ERROR_NUMBER","ERROR_MESSAGE","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GETANSINULL","GET_FILESTREAM_TRANSACTION_CONTEXT","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","XACT_STATE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","CHANGETABLE","CHANGE_TRACKING_CONTEXT","CHANGE_TRACKING_CURRENT_VERSION","CHANGE_TRACKING_IS_COLUMN_IN_MASK","CHANGE_TRACKING_MIN_VALID_VERSION","CONTAINSTABLE","FREETEXTTABLE","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","FILETABLEROOTPATH","GETFILENAMESPACEPATH","GETPATHLOCATOR","PATHNAME","GET_TRANSMISSION_STATUS"],builtinVariables:["@@DATEFIRST","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","@@CURSOR_ROWS","@@FETCH_STATUS","@@DATEFIRST","@@PROCID","@@ERROR","@@IDENTITY","@@ROWCOUNT","@@TRANCOUNT","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACKET_ERRORS","@@PACK_RECEIVED","@@PACK_SENT","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE"],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@templateVariables"},{include:"@macros"},{include:"@comments"},{include:"@whitespace"},{include:"@pseudoColumns"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},{include:"@scopes"},{include:"@schemaTable"},[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$|<|>|=|!|%|&|+|\|-|*|/|~|^]+/,{cases:{"@operators":"operator","@comparisonOperators":"operator","@logicalOperators":"operator","@builtinVariables":"predefined","@builtinFunctions":"predefined","@keywords":"keyword","@default":"identifier"}}]],templateVariables:[[/\$[a-zA-Z0-9]+/,"variable"]],macros:[[/\$__[a-zA-Z0-9-_]+/,"type"]],schemaTable:[[/(\w+)\./,"identifier"],[/(\w+\.\w+)/,"identifier"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],pseudoColumns:[[/[$][A-Za-z_][\w@#$]*/,{cases:{"@pseudoColumns":"predefined","@default":"identifier"}}]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[[/BEGIN\s+(DISTRIBUTED\s+)?TRAN(SACTION)?\b/i,"keyword"],[/BEGIN\s+TRY\b/i,{token:"keyword.try"}],[/END\s+TRY\b/i,{token:"keyword.try"}],[/BEGIN\s+CATCH\b/i,{token:"keyword.catch"}],[/END\s+CATCH\b/i,{token:"keyword.catch"}],[/(BEGIN|CASE)\b/i,{token:"keyword.block"}],[/END\b/i,{token:"keyword.block"}],[/WHEN\b/i,{token:"keyword.choice"}],[/THEN\b/i,{token:"keyword.choice"}]]}}},81779:(ge,te,m)=>{"use strict";m.d(te,{h:()=>W});var V=m(78597);const L="column",w="'5m'",U=[{id:"$__timeFilter(dateColumn)",name:"$__timeFilter(dateColumn)",text:"$__timeFilter",args:[L],type:V.mB.Filter,description:"Will be replaced by a time range filter using the specified column name. For example, dateColumn BETWEEN FROM_UNIXTIME(1494410783) AND FROM_UNIXTIME(1494410983)"},{id:"$__timeFrom()",name:"$__timeFrom()",text:"$__timeFrom",args:[],type:V.mB.Filter,description:"Will be replaced by the start of the currently active time selection. For example, FROM_UNIXTIME(1494410783)"},{id:"$__timeTo()",name:"$__timeTo()",text:"$__timeTo",args:[],type:V.mB.Filter,description:"Will be replaced by the end of the currently active time selection. For example, FROM_UNIXTIME(1494410983)"},{id:"$__timeGroup(dateColumn, '5m')",name:"$__timeGroup(dateColumn, '5m')",text:"$__timeGroup",args:[L,w],type:V.mB.Value,description:"Will be replaced by an expression usable in GROUP BY clause. For example, *cast(cast(UNIX_TIMESTAMP(dateColumn)/(300) as signed)*300 as signed),*"},{id:"$__table",name:"$__table",text:"$__table",args:[],type:V.mB.Table,description:"Will be replaced by the query table."},{id:"$__column",name:"$__column",text:"$__column",args:[],type:V.mB.Column,description:"Will be replaced by the query column."}];function W(I,F){var j,b,O;const M={triggerCharacters:["."," ","$",",","(","'"]};F&&Array.isArray(F.builtinFunctions)&&(M.supportedFunctions=()=>F.builtinFunctions.map(x=>({id:x,name:x})));const Y=[];return(j=F?.comparisonOperators)!=null&&j.length&&Y.push(...F.comparisonOperators.map(x=>({id:x.toLocaleLowerCase(),operator:x,type:V.$M.Comparison}))),F.logicalOperators=(b=F.logicalOperators)!=null?b:F.operators,(O=F?.logicalOperators)!=null&&O.length&&Y.push(...F.logicalOperators.map(x=>({id:x.toLocaleLowerCase(),operator:x,type:V.$M.Logical}))),M.supportedOperators=()=>Y,M.supportedMacros=()=>U,M}},78597:(ge,te,m)=>{"use strict";m.d(te,{$M:()=>V,G8:()=>I,a7:()=>j,cm:()=>F,fC:()=>U,is:()=>W,iv:()=>w,je:()=>b,mB:()=>L});var V=(O=>(O[O.Comparison=0]="Comparison",O[O.Logical=1]="Logical",O))(V||{}),L=(O=>(O[O.Value=0]="Value",O[O.Filter=1]="Filter",O[O.Group=2]="Group",O[O.Column=3]="Column",O[O.Table=4]="Table",O))(L||{}),w=(O=>(O.Parenthesis="delimiter.parenthesis.sql",O.Whitespace="white.sql",O.Keyword="keyword.sql",O.Delimiter="delimiter.sql",O.Operator="operator.sql",O.Identifier="identifier.sql",O.IdentifierQuote="identifier.quote.sql",O.Type="type.sql",O.Function="predefined.sql",O.Number="number.sql",O.String="string.sql",O.Variable="variable.sql",O))(w||{}),U=(O=>(O.Unknown="unknown",O.SelectKeyword="selectKeyword",O.WithKeyword="withKeyword",O.AfterSelectKeyword="afterSelectKeyword",O.AfterSelectArguments="afterSelectArguments",O.AfterSelectFuncFirstArgument="afterSelectFuncFirstArgument",O.SelectAlias="selectAlias",O.AfterFromKeyword="afterFromKeyword",O.AfterTable="afterTable",O.SchemaFuncFirstArgument="schemaFuncFirstArgument",O.SchemaFuncExtraArgument="schemaFuncExtraArgument",O.FromKeyword="fromKeyword",O.AfterFrom="afterFrom",O.WhereKeyword="whereKeyword",O.WhereComparisonOperator="whereComparisonOperator",O.WhereValue="whereValue",O.AfterWhereFunctionArgument="afterWhereFunctionArgument",O.AfterGroupByFunctionArgument="afterGroupByFunctionArgument",O.AfterWhereValue="afterWhereValue",O.AfterGroupByKeywords="afterGroupByKeywords",O.AfterGroupBy="afterGroupBy",O.AfterOrderByKeywords="afterOrderByKeywords",O.AfterOrderByFunction="afterOrderByFunction",O.AfterOrderByDirection="afterOrderByDirection",O.AfterIsOperator="afterIsOperator",O.AfterIsNotOperator="afterIsNotOperator",O.AfterSchema="afterSchema",O))(U||{}),W=(O=>(O.Schemas="schemas",O.Tables="tables",O.Columns="columns",O.SelectKeyword="selectKeyword",O.WithKeyword="withKeyword",O.FunctionsWithArguments="functionsWithArguments",O.FromKeyword="fromKeyword",O.WhereKeyword="whereKeyword",O.GroupByKeywords="groupByKeywords",O.OrderByKeywords="orderByKeywords",O.FunctionsWithoutArguments="functionsWithoutArguments",O.LimitKeyword="limitKeyword",O.SortOrderDirectionKeyword="sortOrderDirectionKeyword",O.ComparisonOperators="comparisonOperators",O.LogicalOperators="logicalOperators",O.SelectMacro="selectMacro",O.TableMacro="tableMacro",O.FilterMacro="filterMacro",O.GroupMacro="groupMacro",O.BoolValues="boolValues",O.NullValue="nullValue",O.NotKeyword="notKeyword",O.TemplateVariables="templateVariables",O.StarWildCard="starWildCard",O))(W||{}),I=(O=>(O.High="a",O.MediumHigh="d",O.Medium="g",O.MediumLow="k",O.Low="q",O))(I||{}),F=(O=>(O[O.Method=0]="Method",O[O.Function=1]="Function",O[O.Constructor=2]="Constructor",O[O.Field=3]="Field",O[O.Variable=4]="Variable",O[O.Class=5]="Class",O[O.Struct=6]="Struct",O[O.Interface=7]="Interface",O[O.Module=8]="Module",O[O.Property=9]="Property",O[O.Event=10]="Event",O[O.Operator=11]="Operator",O[O.Unit=12]="Unit",O[O.Value=13]="Value",O[O.Constant=14]="Constant",O[O.Enum=15]="Enum",O[O.EnumMember=16]="EnumMember",O[O.Keyword=17]="Keyword",O[O.Text=18]="Text",O[O.Color=19]="Color",O[O.File=20]="File",O[O.Reference=21]="Reference",O[O.Customcolor=22]="Customcolor",O[O.Folder=23]="Folder",O[O.TypeParameter=24]="TypeParameter",O[O.User=25]="User",O[O.Issue=26]="Issue",O[O.Snippet=27]="Snippet",O))(F||{}),j=(O=>(O[O.KeepWhitespace=1]="KeepWhitespace",O[O.InsertAsSnippet=4]="InsertAsSnippet",O))(j||{}),b=(O=>(O.Builder="builder",O.Code="code",O))(b||{})},18213:(ge,te,m)=>{"use strict";m.d(te,{M:()=>bE});var V={};m.r(V),m.d(V,{applyToJS:()=>Pi,cleanJSX:()=>Pa,deepEqual:()=>wa,deepFreeze:()=>ii,defaultValue:()=>nt,escapeRegExp:()=>Yr,getFirstDefined:()=>Vi,getLogger:()=>Da,isDirtyJSX:()=>_a,isImmutable:()=>Hn,isJSX:()=>bt,isJsonCompatible:()=>Qt,isJsonLogic:()=>Et,logger:()=>tn,mergeArraysSmart:()=>Di,opDefKeysToOmit:()=>Fn,shallowEqual:()=>mt,sleep:()=>_i,toImmutableList:()=>ut,uuid:()=>Tr,widgetDefKeysToOmit:()=>Lt});var L={};m.r(L),m.d(L,{getItemInListValues:()=>sa,getListValue:()=>R,getTitleInListValues:()=>Ro,getValueInListValues:()=>l,listValuesToArray:()=>To,makeCustomListValue:()=>Ui,mapListValues:()=>p,searchListValue:()=>y,toListValue:()=>nn});var w={};m.r(w),m.d(w,{expandTreePath:()=>T,expandTreeSubpath:()=>G,fixEmptyGroupsInTree:()=>fe,fixPathsInTree:()=>ue,getFlatTree:()=>ve,getItemByPath:()=>z,getLightTree:()=>cr,getSwitchValues:()=>zr,getTotalReordableNodesCountInTree:()=>Ve,getTotalRulesCountInTree:()=>ke,getTreeBadFields:()=>ir,hasChildren:()=>qt,immutableToJs:()=>Pi,isEmptyTree:()=>Wt,isImmutable:()=>Hn,jsToImmutable:()=>Gi,removeIsLockedInTree:()=>ne,toImmutableList:()=>ut});var U={};m.r(U),m.d(U,{SqlString:()=>la,mongoEmptyValue:()=>ps,spelEscape:()=>ui,spelFixList:()=>vs,spelFormatConcat:()=>Id,spelImportConcat:()=>Nd,sqlEmptyValue:()=>ds,stringifyForDisplay:()=>gs});var W={};m.r(W),m.d(W,{_loadFromJsonLogic:()=>us,_loadFromSpel:()=>Ps,checkTree:()=>cd,getTree:()=>oi,isImmutableTree:()=>rs,isJsonLogic:()=>Et,isTree:()=>ts,isValidTree:()=>fd,jsToImmutable:()=>Gi,loadFromJsonLogic:()=>vd,loadFromSpel:()=>Ud,loadTree:()=>Qo});var I={};m.r(I),m.d(I,{createListFromArray:()=>rp,defaultConjunction:()=>bn,defaultGroupConjunction:()=>Ao,defaultGroupProperties:()=>ca,defaultItemProperties:()=>Us,defaultOperatorOptions:()=>Wi,defaultRoot:()=>ep,defaultRule:()=>Gs,defaultRuleProperties:()=>Nn,emptyProperies:()=>tp,getDefaultField:()=>ks,getDefaultFieldSrc:()=>uu,getDefaultOperator:()=>su,getDefaultSubField:()=>xs});var F={};m.r(F),m.d(F,{completeFuncValue:()=>Ws,getCompatibleArgsOnFuncChange:()=>Hs,setArgValue:()=>vp,setArgValueSrc:()=>gp,setFunc:()=>pp});var j={};m.r(j),m.d(j,{completeValue:()=>Ua,filterValueSourcesForField:()=>xa,formatFieldName:()=>$n,getFieldPartsConfigs:()=>Ys,getFieldPathLabels:()=>Zi,getFirstField:()=>$s,getFirstOperator:()=>fu,getFuncPathLabels:()=>hp,getNewValueForFieldOp:()=>ka,getOperatorsForField:()=>No,getOperatorsForType:()=>Ks,getValueLabel:()=>mp,getValueSourcesForFieldOp:()=>zs,getWidgetForFieldOp:()=>Qr,getWidgetsForFieldOp:()=>yp,isCompletedValue:()=>Hi,isEmptyGroupChildren:()=>vu,isEmptyItem:()=>pu,isEmptyRuleGroupExtPropertiesAndChildren:()=>qs,isEmptyRuleProperties:()=>gu,selectTypes:()=>Io});var b={};m.r(b),m.d(b,{_widgetDefKeysToOmit:()=>Wp,applyJsonLogic:()=>Cp,cleanJSX:()=>Pa,compileConfig:()=>ll,compressConfig:()=>ul,configKeys:()=>bo,decompressConfig:()=>sl,extendConfig:()=>Kn,getFieldConfig:()=>$e,getFieldParts:()=>at,getFieldPath:()=>Ru,getFieldPathParts:()=>Bp,getFieldRawConfig:()=>pn,getFieldSrc:()=>yl,getFieldWidgetConfig:()=>Ut,getFuncArgConfig:()=>Tu,getFuncConfig:()=>Ft,getFuncSignature:()=>Su,getOperatorConfig:()=>Ur,isDirtyJSX:()=>_a,isFieldDescendantOfField:()=>ml,isJSX:()=>bt,iterateFields:()=>hl,iterateFuncs:()=>fi,normalizeField:()=>Po});var O={};m.r(O),m.d(O,{ES_6_SYNTAX:()=>ec,ES_7_SYNTAX:()=>Jl,_mongodbFormat:()=>Dl,_spelFormat:()=>Os,_sqlFormat:()=>xl,compareToSign:()=>ru,elasticSearchFormat:()=>rc,jsonLogicFormat:()=>Yp,mongodbFormat:()=>ev,queryBuilderFormat:()=>Zp,queryString:()=>dv,spelFormat:()=>Pd,sqlFormat:()=>ov});var M={};m.r(M),m.d(M,{fixListValuesGroupOrder:()=>Dv,getListValue:()=>R,listValueToOption:()=>_v,mergeListValues:()=>bv,optionToListValue:()=>wv,optionsToListValues:()=>Pv,simulateAsyncFetch:()=>Nv});var Y={};m.r(Y),m.d(Y,{Autocomplete:()=>M,ConfigUtils:()=>b,DefaultUtils:()=>I,ExportUtils:()=>U,FuncUtils:()=>F,ListUtils:()=>L,OtherUtils:()=>V,RuleUtils:()=>j,TreeUtils:()=>w,clone:()=>an(),compressConfig:()=>ul,decompressConfig:()=>sl,getSwitchValues:()=>zr,moment:()=>dn(),uuid:()=>Tr,validateAndFixTree:()=>ip,validateTree:()=>lu});var x={};m.r(x),m.d(x,{LINEAR_REGRESSION:()=>xv,LOWER:()=>jv,NOW:()=>Vv,RELATIVE_DATETIME:()=>Mv,UPPER:()=>kv});var B={};m.r(B),m.d(B,{addCaseGroup:()=>Fg,addDefaultCaseGroup:()=>Lg,addGroup:()=>Ig,addRule:()=>Cg,moveItem:()=>bg,removeGroup:()=>Ng,removeRule:()=>Ag,setTree:()=>Rg});var $={};m.r($),m.d($,{setConjunction:()=>wg,setLock:()=>_g,setNot:()=>Pg});var K={};m.r(K),m.d(K,{setField:()=>Dg,setFieldSrc:()=>Vg,setOperator:()=>Mg,setOperatorOption:()=>xg,setValue:()=>jg,setValueSrc:()=>kg});var Re={};m.r(Re),m.d(Re,{bindActionCreators:()=>xc,isUsingLegacyReactDomRender:()=>kc,liteShouldComponentUpdate:()=>ju,pureShouldComponentUpdate:()=>vi,useOnPropsChanged:()=>Pt});var Ce={};m.r(Ce),m.d(Ce,{FuncWidget:()=>$u,ValueFieldWidget:()=>qf,VanillaBooleanWidget:()=>_y,VanillaButton:()=>Ky,VanillaButtonGroup:()=>Yy,VanillaConjs:()=>$y,VanillaDateTimeWidget:()=>ky,VanillaDateWidget:()=>My,VanillaFieldSelect:()=>Hy,VanillaMultiSelectWidget:()=>Uy,VanillaNumberWidget:()=>Wy,VanillaProvider:()=>Qy,VanillaSelectWidget:()=>By,VanillaSliderWidget:()=>Zy,VanillaSwitch:()=>qy,VanillaTextAreaWidget:()=>Vy,VanillaTextWidget:()=>Dy,VanillaTimeWidget:()=>jy,VanillaValueSources:()=>zy,vanillaConfirm:()=>Xy});var ar={};m.r(ar),m.d(ar,{ProximityOperator:()=>Xu});var C=m(39953),Ue=m(20653),Oe=m(30623),N=m(78597),ye=m(57642),be=m(86654),We=m(69537),Pe=m(34032),xe=m(34397),dr=m(56504),Wr=m(13579),Zr=m(87355),Mr=m(46101),vr=m(72639),wr=m(26286),Te=m(4919),he=m(69865),Ee=m(20454),Le=m(246),_e=m(73075),ce=m(12190);function Ze({isOpen:a,onCancel:e,onDiscard:r,onCopy:n}){const t=(0,C.useRef)(null);return(0,C.useEffect)(()=>{a&&t.current?.focus()},[a]),C.createElement(_e.u,{title:C.createElement("div",{className:"modal-header-title"},C.createElement(ce.J,{name:"exclamation-triangle",size:"lg"}),C.createElement("span",{className:"p-l-1"},"Warning")),onDismiss:e,isOpen:a},C.createElement("p",null,"Builder mode does not display changes made in code. The query builder will display the last changes you made in builder mode."),C.createElement("p",null,"Do you want to copy your code to the clipboard?"),C.createElement(_e.u.ButtonRow,null,C.createElement(Te.zx,{type:"button",variant:"secondary",onClick:e,fill:"outline"},"Cancel"),C.createElement(Te.zx,{variant:"destructive",type:"button",onClick:r,ref:t},"Discard code and switch"),C.createElement(Te.zx,{variant:"primary",onClick:n},"Copy code and switch")))}var De=m(9558),ur=m(7391);const Dt=({dataset:a,db:e,isPostgresInstance:r,onChange:n,preconfiguredDataset:t})=>{const i=!!t||r,u=(0,Ue.Z)(async()=>(0,ur.F)()&&i?(n((0,Le.Er)(t)),[(0,Le.Er)(t)]):(a&&n((0,Le.Er)(a)),(await e.datasets()).map(Le.Er)),[]);return(0,C.useEffect)(()=>{(0,ur.F)()||(a?u.value&&u.value.find(o=>o.value===a)===void 0&&u.value.length>0&&n(u.value[0]):u.value&&u.value[0]&&n(u.value[0]))},[u.value,n,a]),C.createElement(De.Ph,{"aria-label":"Dataset selector",value:a,options:u.value,onChange:n,disabled:u.loading,isLoading:u.loading,menuShouldPortal:!0})};var Hr=m(99456);const lr=({db:a,dataset:e,table:r,className:n,onChange:t})=>{const i=(0,Ue.Z)(async()=>e?(await a.tables(e)).map(Hr.E):[],[e]);return C.createElement(De.Ph,{className:n,disabled:i.loading,"aria-label":"Table selector",value:r,options:i.value,onChange:t,isLoading:i.loading,menuShouldPortal:!0,placeholder:i.loading?"Loading tables":"Select table"})},Tt=[{label:"Builder",value:N.je.Builder},{label:"Code",value:N.je.Code}];function Sr({db:a,isPostgresInstance:e,isQueryRunnable:r,onChange:n,onQueryRowChange:t,onRunQuery:i,preconfiguredDataset:u,query:o,queryRowFilter:s}){const{editorMode:c}=o,[f,d]=(0,We.Z)(),[v,g]=(0,C.useState)(!1),h=a.toRawSql,E=(0,C.useCallback)(P=>{if(P===N.je.Code&&(0,vr.ff)("grafana_sql_editor_mode_changed",{datasource:o.datasource?.type,selectedEditorMode:N.je.Code}),c===N.je.Code){g(!0);return}n({...o,editorMode:P})},[c,n,o]),S=P=>{const k={...o,format:P.value!==void 0?P.value:Le.ws.Table};(0,vr.ff)("grafana_sql_format_changed",{datasource:o.datasource?.type,selectedFormat:k.format}),n(k)},A=P=>{if(P.value===o.dataset)return;const k={...o,dataset:P.value,table:void 0,sql:void 0,rawSql:""};n(k)},_=P=>{if(P.value===o.table)return;const k={...o,table:P.value,sql:void 0,rawSql:""};n(k)},D=()=>!(!(0,ur.F)()&&e);return C.createElement(C.Fragment,null,C.createElement(xe.K,null,C.createElement(dr.X,{label:"Format",value:o.format,placeholder:"Select format",menuShouldPortal:!0,onChange:S,options:Le.x7}),c===N.je.Builder&&C.createElement(C.Fragment,null,C.createElement(wr.x,{id:`sql-filter-${(0,Pe.Z)()}}`,label:"Filter",transparent:!0,showLabel:!0,value:s.filter,onChange:P=>{P.target instanceof HTMLInputElement&&((0,vr.ff)("grafana_sql_filter_toggled",{datasource:o.datasource?.type,displayed:P.target.checked}),t({...s,filter:P.target.checked}))}}),C.createElement(wr.x,{id:`sql-group-${(0,Pe.Z)()}}`,label:"Group",transparent:!0,showLabel:!0,value:s.group,onChange:P=>{P.target instanceof HTMLInputElement&&((0,vr.ff)("grafana_sql_group_toggled",{datasource:o.datasource?.type,displayed:P.target.checked}),t({...s,group:P.target.checked}))}}),C.createElement(wr.x,{id:`sql-order-${(0,Pe.Z)()}}`,label:"Order",transparent:!0,showLabel:!0,value:s.order,onChange:P=>{P.target instanceof HTMLInputElement&&((0,vr.ff)("grafana_sql_order_toggled",{datasource:o.datasource?.type,displayed:P.target.checked}),t({...s,order:P.target.checked}))}}),C.createElement(wr.x,{id:`sql-preview-${(0,Pe.Z)()}}`,label:"Preview",transparent:!0,showLabel:!0,value:s.preview,onChange:P=>{P.target instanceof HTMLInputElement&&((0,vr.ff)("grafana_sql_preview_toggled",{datasource:o.datasource?.type,displayed:P.target.checked}),t({...s,preview:P.target.checked}))}})),C.createElement(Wr.B,{grow:1}),r?C.createElement(Te.zx,{icon:"play",variant:"primary",size:"sm",onClick:()=>i()},"Run query"):C.createElement(he.u,{theme:"error",content:C.createElement(C.Fragment,null,"Your query is invalid. Check below for details. ",C.createElement("br",null),"However, you can still run this query."),placement:"top"},C.createElement(Te.zx,{icon:"exclamation-triangle",variant:"secondary",size:"sm",onClick:()=>i()},"Run query")),C.createElement(Ee.S,{options:Tt,size:"sm",value:c,onChange:E}),C.createElement(Ze,{isOpen:v,onCopy:()=>{(0,vr.ff)("grafana_sql_editor_mode_changed",{datasource:o.datasource?.type,selectedEditorMode:N.je.Builder,type:"copy"}),g(!1),d(o.rawSql),n({...o,rawSql:h(o),editorMode:N.je.Builder})},onDiscard:()=>{(0,vr.ff)("grafana_sql_editor_mode_changed",{datasource:o.datasource?.type,selectedEditorMode:N.je.Builder,type:"discard"}),g(!1),n({...o,rawSql:h(o),editorMode:N.je.Builder})},onCancel:()=>{(0,vr.ff)("grafana_sql_editor_mode_changed",{datasource:o.datasource?.type,selectedEditorMode:N.je.Builder,type:"cancel"}),g(!1)}})),c===N.je.Builder&&C.createElement(C.Fragment,null,C.createElement(Oe.T,{v:.5}),C.createElement(Zr.p,null,D()&&C.createElement(Mr.S,{label:"Dataset",width:25},C.createElement(Dt,{db:a,dataset:o.dataset,isPostgresInstance:e,preconfiguredDataset:u,onChange:A})),C.createElement(Mr.S,{label:"Table",width:25},C.createElement(lr,{db:a,dataset:o.dataset||u,table:o.table,onChange:_})))))}var jr=m(41407),Mn=m(13479),Rt=m(19977),it=m(82803),en=m(84541);function Gt(a,e){var r;const n=a?.getPreviousNonWhiteSpaceToken(),t=a?.getPreviousKeyword(),i=(r=a?.getPreviousNonWhiteSpaceToken())==null?void 0:r.is(N.iv.Operator,"/"),u=e.list(),o=[];for(const s of u)s.resolve(a,t??null,n??null,!!i)&&o.push(s.id);return o.length===0?[N.fC.Unknown]:o}var ma=Object.defineProperty,ya=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,Ea=Object.prototype.propertyIsEnumerable,jn=(a,e,r)=>e in a?ma(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r,za=(a,e)=>{for(var r in e||(e={}))tt.call(e,r)&&jn(a,r,e[r]);if(ya)for(var r of ya(e))Ea.call(e,r)&&jn(a,r,e[r]);return a};const Oa=(a,e,r={})=>za({label:a,insertText:a,kind:N.cm.Field,sortText:N.G8.Medium,range:e},r);var Sa=Object.defineProperty,Ta=Object.defineProperties,On=Object.getOwnPropertyDescriptors,ea=Object.getOwnPropertySymbols,Ra=Object.prototype.hasOwnProperty,qa=Object.prototype.propertyIsEnumerable,Xr=(a,e,r)=>e in a?Sa(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r,kn=(a,e)=>{for(var r in e||(e={}))Ra.call(e,r)&&Xr(a,r,e[r]);if(ea)for(var r of ea(e))qa.call(e,r)&&Xr(a,r,e[r]);return a},ot=(a,e)=>Ta(a,On(e));const Ca=async(a,e,r,n,t)=>{let i=[];const o=e?.isWhiteSpace()||e?.isParenthesis()||e?.isIdentifier()&&e.value.endsWith(".")||!e?.range?a.Range.fromPositions(n.position):e?.range;for(const s of[...new Set(r)]){const c=t.getIfExists(s);if(c){const f=await c.suggestions(ot(kn({},n),{range:o}),a);i=[...i,...f.map(d=>Oa(d.label,o,kn({kind:d.kind},d)))]}}return Promise.resolve(i)},xn=()=>[{id:N.fC.SelectKeyword,name:N.fC.SelectKeyword,kind:[N.is.SelectKeyword]},{id:N.fC.WithKeyword,name:N.fC.WithKeyword,kind:[N.is.WithKeyword]},{id:N.fC.AfterSelectKeyword,name:N.fC.AfterSelectKeyword,kind:[N.is.StarWildCard,N.is.FunctionsWithArguments,N.is.Columns,N.is.SelectMacro]},{id:N.fC.AfterSelectFuncFirstArgument,name:N.fC.AfterSelectFuncFirstArgument,kind:[N.is.Columns]},{id:N.fC.AfterGroupByFunctionArgument,name:N.fC.AfterGroupByFunctionArgument,kind:[N.is.Columns]},{id:N.fC.AfterWhereFunctionArgument,name:N.fC.AfterWhereFunctionArgument,kind:[N.is.Columns]},{id:N.fC.AfterSelectArguments,name:N.fC.AfterSelectArguments,kind:[N.is.Columns]},{id:N.fC.AfterFromKeyword,name:N.fC.AfterFromKeyword,kind:[N.is.Schemas,N.is.Tables,N.is.TableMacro]},{id:N.fC.AfterSchema,name:N.fC.AfterSchema,kind:[N.is.Tables,N.is.TableMacro]},{id:N.fC.SelectAlias,name:N.fC.SelectAlias,kind:[N.is.Columns,N.is.FunctionsWithArguments]},{id:N.fC.FromKeyword,name:N.fC.FromKeyword,kind:[N.is.FromKeyword]},{id:N.fC.AfterFrom,name:N.fC.AfterFrom,kind:[N.is.WhereKeyword,N.is.GroupByKeywords,N.is.OrderByKeywords,N.is.LimitKeyword]},{id:N.fC.AfterTable,name:N.fC.AfterTable,kind:[N.is.WhereKeyword,N.is.GroupByKeywords,N.is.OrderByKeywords,N.is.LimitKeyword]},{id:N.fC.WhereKeyword,name:N.fC.WhereKeyword,kind:[N.is.Columns,N.is.FilterMacro,N.is.TemplateVariables]},{id:N.fC.WhereComparisonOperator,name:N.fC.WhereComparisonOperator,kind:[N.is.ComparisonOperators]},{id:N.fC.WhereValue,name:N.fC.WhereValue,kind:[N.is.FilterMacro,N.is.TemplateVariables]},{id:N.fC.AfterWhereValue,name:N.fC.AfterWhereValue,kind:[N.is.LogicalOperators,N.is.GroupByKeywords,N.is.OrderByKeywords,N.is.LimitKeyword,N.is.Columns,N.is.TemplateVariables]},{id:N.fC.AfterGroupByKeywords,name:N.fC.AfterGroupByKeywords,kind:[N.is.GroupMacro,N.is.Columns]},{id:N.fC.AfterGroupBy,name:N.fC.AfterGroupBy,kind:[N.is.OrderByKeywords,N.is.LimitKeyword]},{id:N.fC.AfterOrderByKeywords,name:N.fC.AfterOrderByKeywords,kind:[N.is.Columns]},{id:N.fC.AfterOrderByFunction,name:N.fC.AfterOrderByFunction,kind:[N.is.SortOrderDirectionKeyword,N.is.LimitKeyword]},{id:N.fC.AfterOrderByDirection,name:N.fC.AfterOrderByDirection,kind:[N.is.LimitKeyword]},{id:N.fC.AfterIsOperator,name:N.fC.AfterOrderByDirection,kind:[N.is.NotKeyword,N.is.NullValue,N.is.BoolValues]},{id:N.fC.AfterIsNotOperator,name:N.fC.AfterOrderByDirection,kind:[N.is.NullValue,N.is.BoolValues]}];function ct(a,e){let r=[];for(let n=0;n<a.length;n++){const t=e.getIfExists(a[n]);t&&(r=r.concat(t.kind))}return r}class Aa{constructor(e,r,n,t,i){this.type=e,this.value=r,this.range=n,this.previous=t,this.next=i}isKeyword(){return this.type===N.iv.Keyword}isWhiteSpace(){return this.type===N.iv.Whitespace}isParenthesis(){return this.type===N.iv.Parenthesis}isIdentifier(){return this.type===N.iv.Identifier}isString(){return this.type===N.iv.String}isNumber(){return this.type===N.iv.Number}isDoubleQuotedString(){return this.type===N.iv.Type}isVariable(){return this.type===N.iv.Variable}isFunction(){return this.type===N.iv.Function}isOperator(){return this.type===N.iv.Operator}isTemplateVariable(){return this.type===N.iv.Variable}is(e,r){const n=this.type===e;return r!==void 0?n&&Vt(e,this,r):n}getPreviousNonWhiteSpaceToken(){let e=this.previous;for(;e!=null;){if(!e.isWhiteSpace())return e;e=e.previous}return null}getPreviousOfType(e,r){let n=this.previous;for(;n!=null;){const t=n.type===e;if(r!==void 0?t&&Vt(e,n,r):t)return n;n=n.previous}return null}getPreviousUntil(e,r,n){let t=[],i=this.previous;for(;i!=null;){if(r.some(o=>o===i?.type)){i=i.previous;continue}const u=i.type===e;if(n!==void 0?u&&Vt(e,i,n):u)return t;i.isWhiteSpace()||t.push(i),i=i.previous}return t}getNextUntil(e,r,n){let t=[],i=this.next;for(;i!=null;){if(r.some(o=>o===i?.type)){i=i.next;continue}const u=i.type===e;if(n!==void 0?u&&Vt(e,i,n):u)return t;i.isWhiteSpace()||t.push(i),i=i.next}return t}getPreviousKeyword(){let e=this.previous;for(;e!=null;){if(e.isKeyword())return e;e=e.previous}return null}getNextNonWhiteSpaceToken(){let e=this.next;for(;e!=null;){if(!e.isWhiteSpace())return e;e=e.next}return null}getNextOfType(e,r){let n=this.next;for(;n!=null;){const t=n.type===e;if(r!==void 0?t&&Vt(e,n,r):t)return n;n=n.next}return null}}function Vt(a,e,r){return a===N.iv.Keyword||a===N.iv.Operator?e.value.toLowerCase()===r.toString().toLowerCase():e.value===r}function Un(a,e,r,n="sql"){var t;let i=null,u=null;const o=a.editor.tokenize((t=e.getValue())!=null?t:"",n);for(let s=0;s<o.length;s++){const c=o[s];if(!c.length&&u){const f={offset:0,type:N.iv.Whitespace,language:n,_tokenBrand:void 0};c.push(f)}for(let f=0;f<c.length;f++){const d=c[f];let v=c.length>f+1?c[f+1].offset+1:e.getLineLength(s+1)+1;const g={startLineNumber:s+1,startColumn:d.offset===0?0:d.offset+1,endLineNumber:s+1,endColumn:v},h=e.getValueInRange(g),E=new Aa(d.type,h,g,u,null);a.Range.containsPosition(g,r)&&(i=E),u&&(u.next=E),u=E}}return i}var rr=m(68250);const Gn=a=>{var e;return(e=a?.getPreviousOfType(N.iv.Keyword,rr.SELECT))!=null?e:null},Sn=a=>{const e=Gn(a);return e?.getNextOfType(N.iv.Keyword,rr.FROM)},Bn=a=>{var e;const r=Sn(a),n=r?.getNextNonWhiteSpaceToken();return n?.isVariable()||n?.isKeyword()&&((e=n.next)!=null&&e.is(N.iv.Parenthesis,"("))?null:n},gt=a=>{const e=a?.value.split(".");return e?.length===1?{table:e[0]}:e?.length===2?{schema:e[0],table:e[1]}:null},Er={id:"editor.action.triggerSuggest",title:""};var Tn,Xa=new Uint8Array(16);function Qa(){if(!Tn&&(Tn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Tn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tn(Xa)}const Pr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Yt(a){return typeof a=="string"&&Pr.test(a)}const La=Yt;for(var Jr=[],Wn=0;Wn<256;++Wn)Jr.push((Wn+256).toString(16).substr(1));function Dr(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Jr[a[e+0]]+Jr[a[e+1]]+Jr[a[e+2]]+Jr[a[e+3]]+"-"+Jr[a[e+4]]+Jr[a[e+5]]+"-"+Jr[a[e+6]]+Jr[a[e+7]]+"-"+Jr[a[e+8]]+Jr[a[e+9]]+"-"+Jr[a[e+10]]+Jr[a[e+11]]+Jr[a[e+12]]+Jr[a[e+13]]+Jr[a[e+14]]+Jr[a[e+15]]).toLowerCase();if(!La(r))throw TypeError("Stringified UUID is invalid");return r}const et=Dr;function Mt(a,e,r){a=a||{};var n=a.random||(a.rng||Qa)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var t=0;t<16;++t)e[r+t]=n[t];return e}return et(n)}const rn=Mt;var jt=m(77663),Ct=m(79059);const sr=(a,e,r)=>()=>[{id:N.is.SelectKeyword,name:N.is.SelectKeyword,suggestions:(n,t)=>Promise.resolve([{label:"SELECT <column>",insertText:"SELECT $0",insertTextRules:N.a7.InsertAsSnippet,kind:N.cm.Snippet,command:Er,sortText:N.G8.Medium},{label:"SELECT <column> FROM <table>",insertText:"SELECT $2 FROM $1",insertTextRules:N.a7.InsertAsSnippet,kind:N.cm.Snippet,command:Er,sortText:N.G8.Medium}])},{id:N.is.TemplateVariables,name:N.is.TemplateVariables,suggestions:(n,t)=>{const i=(0,Ct.J)();return i?Promise.resolve(i.getVariables().map(u=>{const o=`$${u.name}`,s=i.replace(o);return{label:o,detail:`(Template Variable) ${s}`,kind:N.cm.Snippet,documentation:`(Template Variable) ${s}`,insertText:`\\$${u.name} `,insertTextRules:N.a7.InsertAsSnippet,command:Er,sortText:N.G8.Low}})):Promise.resolve([])}},{id:N.is.SelectMacro,name:N.is.SelectMacro,suggestions:(n,t)=>Promise.resolve([...r.list().filter(i=>i.type===N.mB.Value||i.type===N.mB.Column).map(yr)])},{id:N.is.TableMacro,name:N.is.TableMacro,suggestions:(n,t)=>Promise.resolve([...r.list().filter(i=>i.type===N.mB.Table).map(yr)])},{id:N.is.GroupMacro,name:N.is.GroupMacro,suggestions:(n,t)=>Promise.resolve([...r.list().filter(i=>i.type===N.mB.Group).map(yr)])},{id:N.is.FilterMacro,name:N.is.FilterMacro,suggestions:(n,t)=>Promise.resolve([...r.list().filter(i=>i.type===N.mB.Filter).map(yr)])},{id:N.is.WithKeyword,name:N.is.WithKeyword,suggestions:(n,t)=>Promise.resolve([{label:"WITH <alias> AS ( ... )",insertText:"WITH $1  AS ( $2 )",insertTextRules:N.a7.InsertAsSnippet,kind:N.cm.Snippet,command:Er,sortText:N.G8.Medium}])},{id:N.is.StarWildCard,name:N.is.StarWildCard,suggestions:(n,t)=>Promise.resolve([{label:"*",insertText:"* $0",insertTextRules:N.a7.InsertAsSnippet,kind:N.cm.Field,command:Er,sortText:N.G8.High}])},{id:N.is.FunctionsWithArguments,name:N.is.FunctionsWithArguments,suggestions:(n,t)=>Promise.resolve([...a.list().map(i=>({label:i.name,insertText:`${i.name}($0)`,documentation:i.description,insertTextRules:N.a7.InsertAsSnippet,kind:N.cm.Function,command:Er,sortText:N.G8.MediumLow}))])},{id:N.is.FunctionsWithoutArguments,name:N.is.FunctionsWithoutArguments,suggestions:(n,t)=>Promise.resolve([...a.list().map(i=>({label:i.name,insertText:`${i.name}()`,documentation:i.description,insertTextRules:N.a7.InsertAsSnippet,kind:N.cm.Function,command:Er,sortText:N.G8.MediumHigh}))])},{id:N.is.FromKeyword,name:N.is.FromKeyword,suggestions:(n,t)=>Promise.resolve([{label:"FROM",insertText:"FROM $0",command:Er,insertTextRules:N.a7.InsertAsSnippet,kind:N.cm.Keyword}])},{id:N.is.Schemas,name:N.is.Schemas,suggestions:(n,t)=>Promise.resolve([])},{id:N.is.Tables,name:N.is.Tables,suggestions:(n,t)=>Promise.resolve([])},{id:N.is.Columns,name:N.is.Columns,suggestions:(n,t)=>Promise.resolve([])},{id:N.is.LogicalOperators,name:N.is.LogicalOperators,suggestions:(n,t)=>Promise.resolve(e.list().filter(i=>i.type===N.$M.Logical).map(i=>({label:i.operator,insertText:`${i.operator} `,documentation:i.description,command:Er,sortText:N.G8.MediumHigh,kind:N.cm.Operator})))},{id:N.is.WhereKeyword,name:N.is.WhereKeyword,suggestions:(n,t)=>Promise.resolve([{label:"WHERE",insertText:"WHERE ",command:Er,sortText:N.G8.MediumHigh,kind:N.cm.Keyword}])},{id:N.is.ComparisonOperators,name:N.is.ComparisonOperators,suggestions:(n,t)=>Promise.resolve([...e.list().filter(i=>i.type===N.$M.Comparison).map(i=>({label:i.operator,insertText:`${i.operator} `,documentation:i.description,command:Er,sortText:N.G8.MediumHigh,kind:N.cm.Operator})),{label:"IN (...)",insertText:"IN ( $0 )",command:Er,sortText:N.G8.Medium,kind:N.cm.Operator,insertTextRules:N.a7.InsertAsSnippet},{label:"NOT IN (...)",insertText:"NOT IN ( $0 )",command:Er,sortText:N.G8.Medium,kind:N.cm.Operator,insertTextRules:N.a7.InsertAsSnippet},{label:"IS",insertText:"IS",command:Er,sortText:N.G8.Medium,kind:N.cm.Operator},{label:"IS NOT",insertText:"IS NOT",command:Er,sortText:N.G8.Medium,kind:N.cm.Operator}])},{id:N.is.GroupByKeywords,name:N.is.GroupByKeywords,suggestions:(n,t)=>Promise.resolve([{label:"GROUP BY",insertText:"GROUP BY ",command:Er,sortText:N.G8.MediumHigh,kind:N.cm.Keyword}])},{id:N.is.OrderByKeywords,name:N.is.OrderByKeywords,suggestions:(n,t)=>Promise.resolve([{label:"ORDER BY",insertText:"ORDER BY ",command:Er,sortText:N.G8.Medium,kind:N.cm.Keyword},{label:"ORDER BY(ascending)",insertText:"ORDER BY $1 ASC ",command:Er,sortText:N.G8.MediumLow,kind:N.cm.Snippet,insertTextRules:N.a7.InsertAsSnippet},{label:"ORDER BY(descending)",insertText:"ORDER BY $1 DESC",command:Er,sortText:N.G8.MediumLow,kind:N.cm.Snippet,insertTextRules:N.a7.InsertAsSnippet}])},{id:N.is.LimitKeyword,name:N.is.LimitKeyword,suggestions:(n,t)=>Promise.resolve([{label:"LIMIT",insertText:"LIMIT ",command:Er,sortText:N.G8.MediumLow,kind:N.cm.Keyword}])},{id:N.is.SortOrderDirectionKeyword,name:N.is.SortOrderDirectionKeyword,suggestions:(n,t)=>Promise.resolve([rr.ASC,rr.DESC].map(i=>({label:i,insertText:`${i} `,command:Er,kind:N.cm.Keyword})))},{id:N.is.NotKeyword,name:N.is.NotKeyword,suggestions:()=>Promise.resolve([{label:"NOT",insertText:"NOT",command:Er,kind:N.cm.Keyword,sortText:N.G8.High}])},{id:N.is.BoolValues,name:N.is.BoolValues,suggestions:()=>Promise.resolve(["TRUE","FALSE"].map(n=>({label:n,insertText:`${n}`,command:Er,kind:N.cm.Keyword,sortText:N.G8.Medium})))},{id:N.is.NullValue,name:N.is.NullValue,suggestions:()=>Promise.resolve(["NULL"].map(n=>({label:n,insertText:`${n}`,command:Er,kind:N.cm.Keyword,sortText:N.G8.Low})))}];function yr(a){return{label:a.name,insertText:`${"\\"+a.text}${kr(a.args)} `,insertTextRules:N.a7.InsertAsSnippet,kind:N.cm.Snippet,documentation:a.description,command:Er}}function kr(a){return a?"(".concat(a.map((e,r)=>`\${${r}:${e}}`).join(", ")).concat(")"):"()"}function er(){return[{id:N.fC.SelectKeyword,name:N.fC.SelectKeyword,resolve:(a,e,r,n)=>!!(a===null||a.isWhiteSpace()&&a.previous===null||a.is(N.iv.Keyword,rr.SELECT)||a.is(N.iv.Keyword,rr.SELECT)&&a.previous===null||n||a.isIdentifier()&&(n||a?.previous===null)||a.isIdentifier()&&rr.SELECT.startsWith(a.value.toLowerCase()))},{id:N.fC.WithKeyword,name:N.fC.WithKeyword,resolve:(a,e,r,n)=>!!(a===null||a.isWhiteSpace()&&a.previous===null||a.is(N.iv.Keyword,rr.WITH)&&a.previous===null||a.isIdentifier()&&rr.WITH.toLowerCase().startsWith(a.value.toLowerCase()))},{id:N.fC.AfterSelectKeyword,name:N.fC.AfterSelectKeyword,resolve:(a,e,r,n)=>r?.value.toLowerCase()===rr.SELECT},{id:N.fC.AfterSelectArguments,name:N.fC.AfterSelectArguments,resolve:(a,e,r,n)=>e?.value.toLowerCase()===rr.SELECT&&r?.value===","},{id:N.fC.AfterSelectFuncFirstArgument,name:N.fC.AfterSelectFuncFirstArgument,resolve:(a,e,r,n)=>!!((e?.value.toLowerCase()===rr.SELECT||e?.value.toLowerCase()===rr.AS)&&(r?.is(N.iv.Parenthesis,"(")||a?.is(N.iv.Parenthesis,"()")))},{id:N.fC.AfterWhereFunctionArgument,name:N.fC.AfterWhereFunctionArgument,resolve:(a,e,r,n)=>!!(e?.is(N.iv.Keyword,rr.WHERE)&&(r?.is(N.iv.Parenthesis,"(")||a?.is(N.iv.Parenthesis,"()")))},{id:N.fC.AfterGroupBy,name:N.fC.AfterGroupBy,resolve:(a,e,r,n)=>{var t;return!!(e?.is(N.iv.Keyword,rr.BY)&&((t=e?.getPreviousKeyword())!=null&&t.is(N.iv.Keyword,rr.GROUP))&&(r?.isIdentifier()||r?.isDoubleQuotedString()||r?.is(N.iv.Parenthesis,")")||r?.is(N.iv.Parenthesis,"()")))}},{id:N.fC.SelectAlias,name:N.fC.SelectAlias,resolve:(a,e,r,n)=>r?.value===","&&e?.value.toLowerCase()===rr.AS},{id:N.fC.FromKeyword,name:N.fC.FromKeyword,resolve:(a,e,r,n)=>!!(e?.value.toLowerCase()===rr.SELECT&&r?.value!==","||(a?.isKeyword()||a?.isIdentifier())&&rr.FROM.toLowerCase().startsWith(a.value.toLowerCase()))},{id:N.fC.AfterFromKeyword,name:N.fC.AfterFromKeyword,resolve:(a,e,r,n)=>!a?.value.includes(".")&&r?.value.toLowerCase()===rr.FROM},{id:N.fC.AfterSchema,name:N.fC.AfterSchema,resolve:(a,e,r,n)=>(a?.isWhiteSpace()&&a?.next&&(a=a?.previous,r=a.getPreviousNonWhiteSpaceToken()),!!(a?.isIdentifier()&&a?.value.endsWith(".")&&r?.value.toLowerCase()===rr.FROM))},{id:N.fC.AfterFrom,name:N.fC.AfterFrom,resolve:(a,e,r,n)=>!!(e?.value.toLowerCase()===rr.FROM&&r?.isDoubleQuotedString()||e?.value.toLowerCase()===rr.FROM&&r?.isIdentifier()||e?.value.toLowerCase()===rr.FROM&&r?.isVariable())},{id:N.fC.AfterTable,name:N.fC.AfterTable,resolve:(a,e,r,n)=>!!(e?.value.toLowerCase()===rr.FROM&&(r?.isVariable()||r?.value!==""&&r?.value.toLowerCase()!==rr.FROM))},{id:N.fC.WhereKeyword,name:N.fC.WhereKeyword,resolve:(a,e,r,n)=>!!(e?.value.toLowerCase()===rr.WHERE&&(r?.isKeyword()||r?.is(N.iv.Parenthesis,"(")||r?.is(N.iv.Operator,rr.AND)))},{id:N.fC.WhereComparisonOperator,name:N.fC.WhereComparisonOperator,resolve:(a,e,r,n)=>{var t;return!!(e?.value.toLowerCase()===rr.WHERE&&!((t=r?.getPreviousNonWhiteSpaceToken())!=null&&t.isOperator())&&!a?.is(N.iv.Delimiter,".")&&!a?.isParenthesis()&&(r?.isIdentifier()||r?.isDoubleQuotedString()))}},{id:N.fC.WhereValue,name:N.fC.WhereValue,resolve:(a,e,r,n)=>!!(e?.value.toLowerCase()===rr.WHERE&&r?.isOperator())},{id:N.fC.AfterWhereValue,name:N.fC.AfterWhereValue,resolve:(a,e,r,n)=>{var t,i,u;return!!(e?.value.toLowerCase()===rr.WHERE&&(r?.is(N.iv.Operator,"and")||r?.is(N.iv.Operator,"or")||r?.isString()||r?.isNumber()||r?.is(N.iv.Parenthesis,")")||r?.is(N.iv.Parenthesis,"()")||r?.isTemplateVariable()||r?.is(N.iv.IdentifierQuote)&&((t=r.getPreviousNonWhiteSpaceToken())!=null&&t.is(N.iv.Identifier))&&((u=(i=r?.getPreviousNonWhiteSpaceToken())==null?void 0:i.getPreviousNonWhiteSpaceToken())!=null&&u.is(N.iv.IdentifierQuote))))}},{id:N.fC.AfterGroupByKeywords,name:N.fC.AfterGroupByKeywords,resolve:(a,e,r,n)=>{var t;return!!(e?.is(N.iv.Keyword,rr.BY)&&((t=e?.getPreviousKeyword())!=null&&t.is(N.iv.Keyword,rr.GROUP))&&(r?.is(N.iv.Keyword,rr.BY)||r?.is(N.iv.Delimiter,",")))}},{id:N.fC.AfterGroupByFunctionArgument,name:N.fC.AfterGroupByFunctionArgument,resolve:(a,e,r,n)=>{var t;return!!(e?.is(N.iv.Keyword,rr.BY)&&((t=e?.getPreviousKeyword())!=null&&t.is(N.iv.Keyword,rr.GROUP))&&(r?.is(N.iv.Parenthesis,"(")||a?.is(N.iv.Parenthesis,"()")))}},{id:N.fC.AfterOrderByKeywords,name:N.fC.AfterOrderByKeywords,resolve:(a,e,r,n)=>{var t;return!!(r?.is(N.iv.Keyword,rr.BY)&&((t=r?.getPreviousKeyword())!=null&&t.is(N.iv.Keyword,rr.ORDER)))}},{id:N.fC.AfterOrderByFunction,name:N.fC.AfterOrderByFunction,resolve:(a,e,r,n)=>{var t,i;return!!(e?.is(N.iv.Keyword,rr.BY)&&((t=e?.getPreviousKeyword())!=null&&t.is(N.iv.Keyword,rr.ORDER))&&r?.is(N.iv.Parenthesis)&&((i=r?.getPreviousNonWhiteSpaceToken())!=null&&i.is(N.iv.Function)))}},{id:N.fC.AfterOrderByDirection,name:N.fC.AfterOrderByDirection,resolve:(a,e,r,n)=>!!(e?.is(N.iv.Keyword,rr.DESC)||e?.is(N.iv.Keyword,rr.ASC))},{id:N.fC.AfterIsOperator,name:N.fC.AfterIsOperator,resolve:(a,e,r,n)=>!!r?.is(N.iv.Operator,"IS")},{id:N.fC.AfterIsNotOperator,name:N.fC.AfterIsNotOperator,resolve:(a,e,r,n)=>{var t;return!!(r?.is(N.iv.Operator,"NOT")&&((t=r.getPreviousNonWhiteSpaceToken())!=null&&t.is(N.iv.Operator,"IS")))}}]}var Rn=m(66841),zt=m(42851);let fn={logger:()=>{}},kt=()=>{};Rn.x&&zt.h&&(fn=(0,zt.h)("SQLEditor"),kt=fn.logger,(0,Rn.x)("sqleditor",void 0,fn));var He=m(81779);const At={id:"standardSql",extensions:[".sql"],aliases:["sql"],mimetypes:[],loader:()=>Promise.resolve().then(m.bind(m,68250)),completionProvider:He.h};var Q=Object.defineProperty,oe=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,nr=Object.getOwnPropertySymbols,$r=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable,Ja=(a,e,r)=>e in a?Q(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r,Xt=(a,e)=>{for(var r in e||(e={}))$r.call(e,r)&&Ja(a,r,e[r]);if(nr)for(var r of nr(e))ht.call(e,r)&&Ja(a,r,e[r]);return a},ra=(a,e)=>oe(a,Ie(e));const eo="sql",ta=new Map,na=new Map,ei=({children:a,onBlur:e,onChange:r,query:n,language:t={id:eo},width:i,height:u})=>{const o=(0,C.useRef)(null),s=(0,C.useRef)(),c=(0,C.useMemo)(()=>{const d=rn(),v=`${t.id}-${d}`;return s.current=v,v},[t.id]);(0,C.useEffect)(()=>()=>{s.current&&na.delete(s.current),kt(`Removing instance cache ${s.current}`,!1,na)},[]);const f=(0,C.useCallback)(()=>{o.current&&o.current.getAction("editor.action.formatDocument").run()},[]);return C.createElement("div",{style:{width:i}},C.createElement(en.p,{height:u||"240px",width:i?`${i-2}px`:void 0,language:c,value:n,onBlur:d=>{r&&r(d,!1),e&&e()},showMiniMap:!1,showLineNumbers:!0,onEditorDidMount:(d,v)=>{o.current=d,d.onDidChangeModelContent(g=>{const h=d.getValue();r&&r(h,!1)}),d.addCommand(v.KeyMod.CtrlCmd|v.KeyCode.Enter,()=>{const g=d.getValue();r&&r(g,!0)}),d.onKeyUp(g=>{g.keyCode===84&&d.trigger(Er.id,Er.id,{})}),to(v,t,c)}}),a&&a({formatQuery:f}))},ro=(a,e)=>{if(e?.id!==eo&&!e.loader){kt(`Loading language '${e?.id}' from Monaco registry`,!1);const n=a.languages.getLanguages().find(({id:t})=>t===e?.id);if(!n)throw Error(`Unknown Monaco language ${e?.id}`);return Xt(Xt({completionProvider:He.h},n),e)}return Xt(Xt({},At),e)},to=async(a,e,r)=>{const n=ro(a,e);if(!n.loader)return;const{language:t,conf:i}=await n.loader(a);if(a.languages.register({id:r}),a.languages.setMonarchTokensProvider(r,Xt({},t)),a.languages.setLanguageConfiguration(r,Xt({},i)),n.formatter&&a.languages.registerDocumentFormattingEditProvider(r,{provideDocumentFormattingEdits:u=>{var o;const s=(o=e.formatter)==null?void 0:o.call(e,u.getValue());return[{range:u.getFullModelRange(),text:s||""}]}}),n.completionProvider){const u=n.completionProvider(a,t);no(e.id,r,u);const o=ta.get(e.id),s=na.get(r),c=async(f,d,v,g)=>{const h=Un(a,f,d,r),E=Gt(h,o.positionResolvers),S=ct(E,o.suggestionKinds);kt("Statement position",!1,E),kt("Suggestion kinds",!1,S);const A={position:d,currentToken:h,statementPosition:E,kind:S,range:a.Range.fromPositions(d)};return{suggestions:await Ca(a,h,S,A,s)}};a.languages.registerCompletionItemProvider(r,ra(Xt({},u),{provideCompletionItems:c}))}};function no(a,e,r){var n;ta.has(a)||ao(a);const t=ta.get(a);na.has(e)||na.set(e,new jt.B(sr(t.functions,t.operators,t.macros)));const i=na.get(e);if(r.supportedFunctions)for(const u of r.supportedFunctions())t.functions.getIfExists(u.id)||t.functions.register(u);if(r.supportedOperators)for(const u of r.supportedOperators())t.operators.getIfExists(u.id)||t.operators.register(ra(Xt({},u),{name:u.id}));if(r.supportedMacros)for(const u of r.supportedMacros())t.macros.getIfExists(u.id)||t.macros.register(ra(Xt({},u),{name:u.id}));if(r.customStatementPlacement)for(const u of r.customStatementPlacement()){const o=t.positionResolvers.getIfExists(u.id);if(!o)t.positionResolvers.register(ra(Xt({},u),{id:u.id,name:u.id})),t.suggestionKinds.register({id:u.id,name:u.id,kind:[]});else{const s=o.resolve;o.resolve=(...c)=>{const f=u.resolve(...c);return u.overrideDefault?f:s(...c)||f}}}if(r.customSuggestionKinds)for(const u of r.customSuggestionKinds()){if((n=u.applyTo)==null||n.forEach(o=>{const s=t.suggestionKinds.getIfExists(o);s&&s.kind.indexOf(u.id)===-1&&s.kind.push(u.id)}),u.overrideDefault){const o=i.get(u.id);if(o!==void 0){o.suggestions=u.suggestionsResolver;continue}}i.register({id:u.id,name:u.id,suggestions:u.suggestionsResolver})}if(r.schemas){const u=i.get(N.is.Schemas),o=u.suggestions;u.suggestions=async(s,c)=>{const f=await o(s,c);if(!r.schemas)return[...f];const v=(await r.schemas.resolve()).map(g=>{var h;return{label:g.name,insertText:`${(h=g.completion)!=null?h:g.name}.`,command:Er,kind:N.cm.Module,sortText:N.G8.High}});return[...f,...v]}}if(r.tables){const u=i.get(N.is.Tables),o=u.suggestions;u.suggestions=async(s,c)=>{var f,d,v,g,h;const E=await o(s,c),S=Bn(s.currentToken),_=((d=(f=r.tables)==null?void 0:f.parseName)!=null?d:gt)(S),D=((h=await((g=(v=r.tables)==null?void 0:v.resolve)==null?void 0:g.call(v,_)))!=null?h:[]).map(P=>{var k;return{label:P.name,insertText:`${(k=P.completion)!=null?k:P.name}${P.completion===P.name?" $0":""}`,insertTextRules:N.a7.InsertAsSnippet,command:Er,kind:N.cm.Field,sortText:N.G8.MediumHigh}});return[...E,...D]}}if(r.columns){const u=i.get(N.is.Columns),o=u.suggestions;u.suggestions=async(s,c)=>{var f,d,v;const g=await o(s,c),h=Bn(s.currentToken);let E;const S=(d=(f=r.tables)==null?void 0:f.parseName)!=null?d:gt;h&&h.value&&(E=S(h));let A=[];if(E){const _=await((v=r.columns)==null?void 0:v.resolve(E));A=_?_.map(D=>{var P;return{label:D.name,insertText:(P=D.completion)!=null?P:D.name,kind:N.cm.Field,sortText:N.G8.High,detail:D.type,documentation:D.description}}):[]}return[...g,...A]}}}function ao(a){return ta.has(a)||ta.set(a,{functions:new jt.B,operators:new jt.B,suggestionKinds:new jt.B(xn),positionResolvers:new jt.B(er),macros:new jt.B}),ta.get(a)}function io({children:a,onChange:e,query:r,width:n,height:t,editorLanguageDefinition:i}){const u=(0,C.useRef)(r);(0,C.useEffect)(()=>{u.current=r},[r]);const o=(0,C.useCallback)((s,c)=>{const f={...u.current,rawQuery:!0,rawSql:s};e(f,c)},[e]);return C.createElement(ei,{width:n,height:t,query:r.rawSql,onChange:o,language:i},a)}var oo=m(12223),Ci=m(68497),Ko=m(65489),Yo=m(87231),uo=m(83502),zo=m(28409);function Kr({db:a,query:e,onValidate:r,range:n}){const[t,i]=(0,C.useState)(),u=(0,it.l4)(),o=(0,C.useMemo)(()=>(0,uo.Cf)("bytes"),[]),s=(0,C.useMemo)(()=>({error:(0,jr.css)`
        color: ${u.colors.error.text};
        font-size: ${u.typography.bodySmall.fontSize};
        font-family: ${u.typography.fontFamilyMonospace};
      `,valid:(0,jr.css)`
        color: ${u.colors.success.text};
      `,info:(0,jr.css)`
        color: ${u.colors.text.secondary};
      `}),[u]),[c,f]=(0,Ko.Z)(async v=>v.rawSql?.trim()===""?null:await a.validateQuery(v,n),[a]),[,]=(0,Yo.Z)(async()=>{const v=await f(e);return v&&i(v),null},1e3,[e,f]);if((0,C.useEffect)(()=>{t?.isError&&r(!1),t?.isValid&&r(!0)},[t,r]),!c.value&&!c.loading)return null;const d=c.value?.error?so(c.value.error):"";return C.createElement(C.Fragment,null,c.loading&&C.createElement("div",{className:s.info},C.createElement(zo.$,{inline:!0,size:12})," Validating query..."),!c.loading&&c.value&&C.createElement(C.Fragment,null,C.createElement(C.Fragment,null,c.value.isValid&&c.value.statistics&&C.createElement("div",{className:s.valid},C.createElement(ce.J,{name:"check"})," This query will process"," ",C.createElement("strong",null,(0,uo.zc)(o(c.value.statistics.TotalBytesProcessed)))," ","when run.")),C.createElement(C.Fragment,null,c.value.isError&&C.createElement("div",{className:s.error},d))))}function so(a){const e=a.split(":");return e.length>2?e.slice(2).join(":"):a}function Ai({showTools:a,onFormatCode:e,onExpand:r,isExpanded:n,...t}){const i=(0,it.l4)(),[u,o]=(0,C.useState)(),s=(0,C.useMemo)(()=>({container:(0,jr.css)`
        border: 1px solid ${i.colors.border.medium};
        border-top: none;
        padding: ${i.spacing(.5,.5,.5,.5)};
        display: flex;
        flex-grow: 1;
        justify-content: space-between;
        font-size: ${i.typography.bodySmall.fontSize};
      `,error:(0,jr.css)`
        color: ${i.colors.error.text};
        font-size: ${i.typography.bodySmall.fontSize};
        font-family: ${i.typography.fontFamilyMonospace};
      `,valid:(0,jr.css)`
        color: ${i.colors.success.text};
      `,info:(0,jr.css)`
        color: ${i.colors.text.secondary};
      `,hint:(0,jr.css)`
        color: ${i.colors.text.disabled};
        white-space: nowrap;
        cursor: help;
      `}),[i]);let c={};return!a&&u===void 0&&(c={height:0,padding:0,visibility:"hidden"}),C.createElement("div",{className:s.container,style:c},C.createElement("div",null,t.onValidate&&C.createElement(Kr,{...t,onValidate:f=>{o(f),t.onValidate(f)}})),a&&C.createElement("div",null,C.createElement(oo.Lh,{spacing:"sm"},e&&C.createElement(Ci.h,{onClick:()=>{(0,vr.ff)("grafana_sql_query_formatted",{datasource:t.query.datasource?.type}),e()},name:"brackets-curly",size:"xs",tooltip:"Format query"}),r&&C.createElement(Ci.h,{onClick:()=>{(0,vr.ff)("grafana_sql_editor_expand",{datasource:t.query.datasource?.type,expanded:!n}),r(!n)},name:n?"angle-up":"angle-down",size:"xs",tooltip:n?"Collapse editor":"Expand editor"}),C.createElement(he.u,{content:"Hit CTRL/CMD+Return to run query"},C.createElement(ce.J,{className:s.hint,name:"keyboard"})))))}function Nt({db:a,query:e,onChange:r,onRunQuery:n,onValidate:t,queryToValidate:i,range:u}){const o=(0,it.l4)(),s=(0,it.wW)(Cn),[c,f]=(0,C.useState)(!1),[d,v]=(0,Mn.Z)(),[g,h]=(0,Mn.Z)(),E=(0,C.useMemo)(()=>a.getEditorLanguageDefinition(),[a]),S=(D,P)=>C.createElement(io,{editorLanguageDefinition:E,query:e,width:D,height:P?P-v.height:void 0,onChange:r},({formatQuery:k})=>C.createElement("div",{ref:d},C.createElement(Ai,{db:a,query:i,onValidate:t,onFormatCode:k,showTools:!0,range:u,onExpand:f,isExpanded:c}))),A=(D=!1)=>D?C.createElement(Rt.Z,null,({width:P,height:k})=>S(P,k)):C.createElement("div",{ref:g},S()),_=()=>C.createElement("div",{style:{width:h.width,height:h.height,background:o.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"center"}},"Editing in expanded code editor");return C.createElement(C.Fragment,null,c?_():A(),c&&C.createElement(_e.u,{title:`Query ${e.refId}`,closeOnBackdropClick:!1,closeOnEscape:!1,className:s.modal,contentClassName:s.modalContent,isOpen:c,onDismiss:()=>{(0,vr.ff)("grafana_sql_editor_expand",{datasource:e.datasource?.type,expanded:!1}),f(!1)}},A(!0)))}function Cn(a){return{modal:(0,jr.css)`
      width: 95vw;
      height: 95vh;
    `,modalContent:(0,jr.css)`
      height: 100%;
      padding-top: 0;
    `}}var Fa=m(91386),lo=m(96227),Ia=m(55232);function co({rawSql:a,datasourceType:e}){const[r,n]=(0,We.Z)(),t=(0,it.wW)(Li),i=o=>{n(o),(0,vr.ff)("grafana_sql_preview_copied",{datasource:e})},u=C.createElement("div",{className:t.labelWrapper},C.createElement("span",{className:t.label},"Preview"),C.createElement(Ci.h,{tooltip:"Copy to clipboard",onClick:()=>i(a),name:"copy"}));return C.createElement(lo.g,{label:u,className:t.grow},C.createElement(en.p,{language:"sql",height:80,value:(0,Ia._)(a),monacoOptions:{scrollbar:{vertical:"hidden"},scrollBeyondLastLine:!1},readOnly:!0,showMiniMap:!1}))}function Li(a){return{grow:(0,jr.css)({flexGrow:1}),label:(0,jr.css)({fontSize:12,fontWeight:a.typography.fontWeightMedium}),labelWrapper:(0,jr.css)({display:"flex",justifyContent:"space-between",paddingBottom:a.spacing(.5)})}}function ri({query:a,onQueryChange:e,db:r}){return{onSqlChange:(0,C.useCallback)(t=>{const i=r.toRawSql,u=i({sql:t,dataset:a.dataset,table:a.table,refId:a.refId}),o={...a,sql:t,rawSql:u};e(o)},[r,e,a])}}var Fi=m(46298),Zn=m(34964),fo=m(81803);function An({sql:a,columns:e,onSqlChange:r}){const n=(0,C.useCallback)(t=>{const i=t.map(o=>(0,be.U2)(o.property?.name)),u={...a,groupBy:i};r(u)},[r,a]);return C.createElement(Fi.k,{items:a.groupBy,onChange:n,renderItem:ti({options:e})})}function ti({options:a}){return function(r,n,t){return C.createElement(Zn.B,null,C.createElement(De.Ph,{value:r.property?.name?(0,Hr.E)(r.property.name):null,"aria-label":"Group by",options:a,menuShouldPortal:!0,onChange:({value:i})=>i&&n((0,be.U2)(i))}),C.createElement(fo._,{"aria-label":"Remove group by column",icon:"times",variant:"secondary",onClick:t}))}}function Na({fields:a,query:e,onQueryChange:r,db:n}){const{onSqlChange:t}=ri({query:e,onQueryChange:r,db:n});return C.createElement(An,{columns:a,sql:e.sql,onSqlChange:t})}var xr=m(86832),ba=m(38637);const Ii=[{description:"Sort by ascending",value:"ASC",icon:"sort-amount-up"},{description:"Sort by descending",value:"DESC",icon:"sort-amount-down"}];function po({sql:a,onSqlChange:e,columns:r,showOffset:n}){const t=(0,C.useCallback)(s=>{const c={...a,orderByDirection:s};e(c)},[e,a]),i=(0,C.useCallback)(s=>{const c={...a,limit:Number.parseInt(s.currentTarget.value,10)};e(c)},[e,a]),u=(0,C.useCallback)(s=>{const c={...a,offset:Number.parseInt(s.currentTarget.value,10)};e(c)},[e,a]),o=(0,C.useCallback)(s=>{const c={...a,orderBy:(0,be.ax)(s?.value)};s===null&&(c.orderByDirection=void 0),e(c)},[e,a]);return C.createElement(C.Fragment,null,C.createElement(Mr.S,{label:"Order by",width:25},C.createElement(Zn.B,null,C.createElement(De.Ph,{"aria-label":"Order by",options:r,value:a.orderBy?.property.name?(0,Hr.E)(a.orderBy.property.name):null,isClearable:!0,menuShouldPortal:!0,onChange:o}),C.createElement(Oe.T,{h:1.5}),C.createElement(Ee.S,{options:Ii,disabled:!a?.orderBy?.property.name,value:a.orderByDirection,onChange:t}))),C.createElement(Mr.S,{label:"Limit",optional:!0,width:25},C.createElement(ba.I,{type:"number",min:0,id:(0,xr.uniqueId)("limit-"),value:a.limit||"",onChange:i})),n&&C.createElement(Mr.S,{label:"Offset",optional:!0,width:25},C.createElement(ba.I,{type:"number",id:(0,xr.uniqueId)("offset-"),value:a.offset||"",onChange:u})))}function ni({fields:a,query:e,onQueryChange:r,db:n}){const{onSqlChange:t}=ri({query:e,onQueryChange:r,db:n});let i=[];return a&&(i=[{value:"",label:"Selected columns",options:e.sql?.columns?.map((o,s)=>{const c=o.name?`${o.name}(${o.parameters?.map(f=>f.name)})`:o.parameters?.map(f=>f.name);return{value:c,label:`${s+1} - ${c}`}}),expanded:!0},...a]),C.createElement(po,{sql:e.sql,onSqlChange:t,columns:i})}var vo=m(18996),Bt=m(27366),Ln=m(76813);const aa={label:"*",value:"*"};function ia({sql:a,format:e,columns:r,onSqlChange:n,functions:t}){const i=(0,it.wW)(go),u=[aa,...r||[]],o=[];e===Le.ws.Timeseries&&(o.push({label:"time",value:"time"}),o.push({label:"value",value:"value"}));const s=(0,C.useCallback)((g,h)=>E=>{let S={...g};g.parameters?.length?S.parameters=g.parameters.map(_=>_.type===Ln.a.FunctionParameter?{..._,name:E.value}:_):S.parameters=[{type:Ln.a.FunctionParameter,name:E.value}];const A={...a,columns:a.columns?.map((_,D)=>D===h?S:_)};n(A)},[n,a]),c=(0,C.useCallback)((g,h)=>E=>{const S={...g,name:E?.value},A={...a,columns:a.columns?.map((_,D)=>D===h?S:_)};n(A)},[n,a]),f=(0,C.useCallback)((g,h)=>E=>{let S={...g};E!==null?S={...g,alias:`"${E?.value?.trim()}"`}:delete S.alias;const A={...a,columns:a.columns?.map((_,D)=>D===h?S:_)};n(A)},[n,a]),d=(0,C.useCallback)(g=>()=>{const h=[...a.columns];h.splice(g,1);const E={...a,columns:h};n(E)},[n,a]),v=(0,C.useCallback)(()=>{const g={...a,columns:[...a.columns,(0,be.Wf)()]};n(g)},[n,a]);return C.createElement(Bt.K,{gap:2,wrap:!0,direction:"column"},a.columns?.map((g,h)=>C.createElement("div",{key:h},C.createElement(Bt.K,{gap:2,alignItems:"end"},C.createElement(Mr.S,{label:"Column",width:25},C.createElement(De.Ph,{value:ho(g),options:u,inputId:`select-column-${h}-${(0,xr.uniqueId)()}`,menuShouldPortal:!0,allowCustomValue:!0,onChange:s(g,h)})),C.createElement(Mr.S,{label:"Aggregation",optional:!0,width:25},C.createElement(De.Ph,{value:g.name?(0,Hr.E)(g.name):null,inputId:`select-aggregation-${h}-${(0,xr.uniqueId)()}`,isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0,options:t,onChange:c(g,h)})),C.createElement(Mr.S,{label:"Alias",optional:!0,width:15},C.createElement(De.Ph,{value:g.alias?(0,Hr.E)(g.alias):null,inputId:`select-alias-${h}-${(0,xr.uniqueId)()}`,options:o,onChange:f(g,h),isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0})),C.createElement(Te.zx,{"aria-label":"Remove",type:"button",icon:"trash-alt",variant:"secondary",size:"md",onClick:d(h)})))),C.createElement(Te.zx,{type:"button",onClick:v,variant:"secondary",size:"md",icon:"plus","aria-label":"Add",className:i.addButton}))}const go=()=>({addButton:(0,jr.css)({alignSelf:"flex-start"})});function ho({parameters:a}){const e=a?.find(r=>r.type===Ln.a.FunctionParameter);return e?.name?(0,Hr.E)(e.name):null}function Ni({fields:a,query:e,onQueryChange:r,db:n}){const{onSqlChange:t}=ri({query:e,onQueryChange:r,db:n}),i=[...vo.W,...n.functions?.()||[]].map(Hr.E);return C.createElement(ia,{columns:a,sql:e.sql,format:e.format,functions:i,onSqlChange:t})}var mo=m(99292),Cr=m(29350),Ar=m(20918),Lr=m(2857),Fr=m(5197),Ir=m(78156),Ge=m(17334),Ae=m(48427),we=m(53497),qe=m(23376),gr=m(21337),Nr=m(7134),ze=m.n(Nr),bi=m(96406),Xe=m.n(bi),yo=0;const Tr=function(){var a=(new Date().getTime().toString(16)+"FF").substr(0,11),e="ssssssss-xxxx-4xxx-yxxx-x".replace(/[xys]/g,function(r){var n=r==="s"?Math.floor(Math.random()*16):yo++&15,t=r==="x"?n:n&3|8;return t.toString(16)});return e+a};var wi=function(e){return(0,gr.Z)(e)=="object"&&e!==null&&!Array.isArray(e)},Lt=["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue","spelImportFuncs","spelImportValue"],Fn=["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"],nt=function(e,r){return typeof e>"u"?r:e},wa=function(e,r){return e===r?!0:Nr.Map.isMap(e)?e.equals(r):JSON.stringify(e)==JSON.stringify(r)},mt=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e===r?!0:Array.isArray(e)?yt(e,r,n):Nr.Map.isMap(e)?e.equals(r):(0,gr.Z)(e)=="object"?ai(e,r,n):e===r};function yt(a,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a===e)return!0;if(!a||!e)return!1;var n=a.length;if(e.length!==n)return!1;for(var t=0;t<n;t++){var i=r?mt(a[t],e[t],r):a[t]===e[t];if(!i)return!1}return!0}function ai(a,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a===e)return!0;if(!a||!e)return!1;var n=Object.keys(a),t=Object.keys(e),i=n.length;if(t.length!==i)return!1;for(var u=0;u<i;u++){var o=n[u],s=r?mt(a[o],e[o],r):a[o]===e[o];if(!s)return!1}return!0}var Hn=function(e){return(0,gr.Z)(e)==="object"&&e!==null&&typeof e.toJS=="function"};function ut(a){return Hn(a)?a:new(ze()).List(a)}function Pi(a){return Hn(a)?a.toJS():a}var Yr=function(e){return e.replace(/[.*+?^${}()|[\]\\/]/g,"\\$&")},Pa=function a(e){var r=["$$typeof","_owner","_store","ref","key"],n=function(o){return typeof o=="string"?o:typeof o=="function"?o.name:o};if(e instanceof Array)return e.map(function(u,o){return a(u)});if((0,gr.Z)(e)==="object"&&e!==null&&_a(e)){var t,i=Xe()(e,r);return i.type&&(i.type=n(i.type)),i!=null&&(t=i.props)!==null&&t!==void 0&&t.children&&(i.props.children=a(i.props.children)),i}return e},_a=function(e){return(0,gr.Z)(e)==="object"&&e!==null&&!Array.isArray(e)&&Object.keys(e).includes("type")&&Object.keys(e).includes("props")&&Object.keys(e).includes("key")&&Object.keys(e).includes("ref")&&Object.keys(e).includes("$$typeof")},bt=function(e){return(0,gr.Z)(e)==="object"&&e!==null&&!Array.isArray(e)&&typeof e.type=="string"&&Object.keys(e).includes("props")},Et=function(e){var r=(0,gr.Z)(e)==="object"&&e!==null&&!Array.isArray(e)&&Object.keys(e).length===1;return r};function _i(a){return new Promise(function(e){setTimeout(e,a)})}function Di(a,e){return a||(a=[]),e||(e=[]),e.map(function(r){return[r,a.indexOf(r)]}).map(function(r,n,t){var i=(0,qe.Z)(r,2),u=i[0],o=i[1];if(o==-1){var s=t.slice(n+1),c=t.slice(0,n),f=c.reverse().find(function(v){var g=(0,qe.Z)(v,2),h=g[0],E=g[1];return E!=-1}),d=s.find(function(v){var g=(0,qe.Z)(v,2),h=g[0],E=g[1];return E!=-1});return d?[u,"before",d[0]]:f?[u,"after",f[0]]:[u,"append",null]}else return null}).filter(function(r){return r!==null}).reduce(function(r,n){var t=(0,qe.Z)(n,3),i=t[0],u=t[1],o=t[2],s=r.indexOf(o);return r.indexOf(i)==-1&&(s>-1?r.splice(s+(u=="after"?1:0),0,i):r.splice(u=="append"?1/0:0,0,i)),r},a.slice())}var ii=function a(e){(0,gr.Z)(e)==="object"&&e!==null&&(Object.keys(e).forEach(function(r){a(e[r])}),Object.freeze(e))},Qt=function a(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(wi(e)){if(e.var)return n[e.var]=r,!0;if(!wi(r))return!1;for(var i in e){var u=e[i],o=r[i];if(!a(u,o,n,[].concat((0,we.Z)(t),[i])))return!1}return!0}else if(Array.isArray(e)){if(!Array.isArray(r))return!1;for(var s=0;s<e.length;s++){var c=e[s],f=r[s];if(!a(c,f,n,[].concat((0,we.Z)(t),[s])))return!1}return!0}else return e===r},Eo=function(){return typeof process<"u"&&process.env&&!1},Da=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=e??Eo();return r?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}},Vi=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r,n=0;n<e.length;n++){var t=e[n];if(t!==void 0){r=t;break}}return r},tn=Da(),Mi=m(80341),_r=m.n(Mi),Oo=m(82564),oa=m.n(Oo),ua=m(48289),xt=m.n(ua),So=m(44362),Va=m.n(So),Jt={formatField:function(e,r,n,t,i,u){return u?n:e},fieldSources:["field"],keepInputOnChangeFieldSrc:!0,fieldItemKeysForSearch:["label","path","altLabel","grouplabel"],listKeysForSearch:["title","value"],valueSourcesInfo:{value:{}},fieldSeparator:".",fieldSeparatorDisplay:".",canReorder:!0,canRegroup:!0,canDeleteLocked:!1,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,canShortMongoQuery:!0,removeEmptyGroupsOnLoad:!0,removeIncompleteRulesOnLoad:!0,removeInvalidMultiSelectValuesOnLoad:!0,setOpOnChangeField:["keep","default"],groupOperators:["some","all","none"],defaultGroupConjunction:"AND",locale:{moment:"en"},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:null,addGroupLabel:"Add group",addCaseLabel:"Add condition",addDefaultCaseLabel:"Add default condition",defaultCaseLabel:"Default:",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",delGroupLabel:"",notLabel:"Not",fieldSourcesPopupTitle:"Select source",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:null,removeGroupConfirmOptions:null},wt=m(52291),dn=m.n(wt);function qo(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Xo(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function Xo(a,e){if(a){if(typeof a=="string")return Ma(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ma(a,e)}}function Ma(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}function ji(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function ki(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ji(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):ji(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var xi=function(e){return(0,gr.Z)(e)=="object"&&e!==null&&!Array.isArray(e)},nn=function(e,r){if(!(e==null||e==""))return xi(e)?e:{value:e,title:r!==void 0?r:""+e}},Ui=function(e){var r=nn(e);return xi(r)?ki(ki({},nn(e)),{},{isCustom:!0}):r},To=function(e){if(Array.isArray(e))return e.map(function(i){return nn(i)});if(!xi(e))return e;var r=[];for(var n in e){var t=e[n];r.push(nn(n,t))}return r},sa=function(e,r){if(Array.isArray(e)){var n=e.map(function(t){return nn(t)});return n.find(function(t){return""+t.value==""+r})}else return e[r]!==void 0?nn(r,e[r]):void 0},Ro=function(e,r){if(e==null)return r;var n=sa(e,r);return n!==void 0?n.title:r},l=function(e,r){if(e==null)return r;var n=sa(e,r);return n!==void 0?n.value:r},p=function(e,r){var n=[];if(Array.isArray(e)){var t=qo(e),i;try{for(t.s();!(i=t.n()).done;){var u=i.value,o=r(nn(u));o!=null&&n.push(o)}}catch(f){t.e(f)}finally{t.f()}}else for(var s in e){var c=r(nn(s,e[s]));c!=null&&n.push(c)}return n},y=function(e,r){return p(r,function(n){return"".concat(n.value).indexOf(e)!=-1||n.title.indexOf(e)!=-1?n:null}).filter(function(n){return n!==null}).shift()},R=function(e,r){return p(r,function(n){return""+n.value==""+e?n:null}).filter(function(n){return n!==null}).shift()},T=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];return e.interpose("children1").withMutations(function(i){return i.skip(1),i.push.apply(i,n),i})},G=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];return e.interpose("children1").withMutations(function(i){return i.push.apply(i,n),i})},z=function(e,r){var n=new(ze()).OrderedMap((0,Ae.Z)({},e.get("id"),e)),t=e;return r.forEach(function(i){t=n.get(i),n=t.get("children1")}),t},ne=function(e){var r=e;function n(t,i){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=i.push(t.get("id")),s=t.getIn(["properties","isLocked"]);u&&s&&(r=r.deleteIn(T(o,"properties","isLocked")));var c=t.get("children1");c&&c.map(function(f,d){n(f,o,s||u)})}return n(e,new(ze()).List),r},ue=function(e){var r=e;function n(t,i,u,o){if(t){var s=t.get("path"),c=t.get("id"),f=c||o,d=i.push(f);(!s||!s.equals(d))&&(r=r.setIn(T(d,"path"),d)),c||(r=r.setIn(T(d,"id"),f));var v=t.get("children1");v&&(v.constructor.name=="Map"&&(r=r.setIn(T(d,"children1"),new(ze()).OrderedMap(v))),v.map(function(g,h){n(g,d,u+1,h)}))}}return n(e,new(ze()).List,0),r},fe=function(e){var r=e;function n(t,i,u,o){if(!t)return!1;var s=t.get("id")||o,c=i.push(s),f=t.get("children1");if(f){var d=f.map(function(v,g){return n(v,c,u+1,g)}).reduce(function(v,g){return v&&g},!0);if((f.size==0||d)&&u>0)return r=r.deleteIn(T(c)),!0}return!1}return n(e,new(ze()).List,0),r},ve=function(e){var r=[],n={},t=0;function i(f,d,v,g,h,E,S,A,_){var D=f.get("type"),P=f.get("collapsed"),k=f.get("id"),Z=f.get("children1"),q=f.getIn(["properties","isLocked"]),re=Z?Z.map(function(Se,Ne){return Ne}).toArray():null,J=D=="rule_group",X=!h&&(!Z||J),ae=re?.length>0,le=r.length,ee=t;r.push(k),v||(t+=1),S.height=(S.height||0)+1,n[k]={type:D,parent:d.length?d[d.length-1]:null,parentType:A,caseId:D=="case_group"?k:_,isDefaultCase:D=="case_group"&&!Z,path:d.concat(k),lev:E,leaf:!Z,index:le,id:k,children:re,leafsCount:0,_top:le,top:v?null:ee,collapsed:P,node:f,isLocked:q||g};var ie;if(Z){var se={};Z.map(function(Se,Ne){i(Se,d.concat(k),v||P,g||q,h||J,E+1,se,D,D=="case_group"?k:_)}),P||(S.height=(S.height||0)+(se.height||0),ae&&!J&&(ie=(se.depth||0)+1))}_&&X&&n[_].leafsCount++;var de=r.length,pe=t,me=S.height;Object.assign(n[k],{_height:de-le,height:me,bottom:(v?null:ee)+me}),ie!=null&&(Object.assign(n[k],{depth:ie}),S.depth=Math.max(S.depth||0,ie))}i(e,[],!1,!1,!1,0,{},null,null);for(var u=0;u<r.length;u++){var o=u>0?r[u-1]:null,s=u<r.length-1?r[u+1]:null,c=n[r[u]];c.prev=o,c.next=s}return{flat:r,items:n}},Ve=function(e){if(!e)return-1;var r=0;function n(t,i,u){var o,s,c;typeof t.get=="function"?(o=t.get("id"),s=t.get("children1"),c=t.get("type")):(o=t.id,s=t.children1,c=t.type);var f=c=="rule_group";r++,s&&!f&&s.map(function(d,v){n(d,i.concat(o),u+1)})}return n(e,[],0),r-1},ke=function(e){if(!e)return-1;var r=0;function n(t,i,u){var o,s,c;typeof t.get=="function"?(o=t.get("id"),s=t.get("children1"),c=t.get("type")):(o=t.id,s=t.children1,c=t.type),c=="rule"||c=="rule_group"?r++:s&&s.map(function(f,d){n(f,i.concat(o),u+1)})}return n(e,[],0),r},ir=function(e){var r=[];function n(t,i,u){var o=t.get("id"),s=t.get("children1"),c=t.getIn(["properties","valueError"]),f=t.getIn(["properties","field"]);c&&c.size>0&&c.filter(function(d){return d!=null}).size>0&&r.push(f),s&&s.map(function(d,v){n(d,i.concat(o),u+1)})}return e&&n(e,[],0),Array.from(new Set(r))},cr=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=e;function t(i,u){i.path&&delete i.path,!r&&u&&delete i.id;var o=i.properties;o&&o.operatorOptions==null&&delete o.operatorOptions;var s=i.children1;if(s){for(var c in s)t(s[c],c);r&&(i.children1=Object.values(s))}}return t(e,null),n},zr=function(e){var r=[],n=e.get("children1");return n&&n.map(function(t){var i=t.getIn(["properties","value"]),u;i&&i.size==1?(u=i.get(0),Array.isArray(u)&&u.length==0&&(u=null)):u=null,r=[].concat((0,we.Z)(r),[u])}),r},Wt=function(e){return!e.get("children1")||e.get("children1").size==0},qt=function(e,r){return e.getIn(T(r,"children1")).size>0},oi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e){var t=e;return t=t.toJS(),r&&(t=cr(t,n)),t}},Qo=function(e){if(rs(e))return e;if(ts(e))return Gi(e);if(typeof e=="string"&&e.startsWith('["~#iM"'))throw"You are trying to load query in obsolete serialization format (Immutable string) which is not supported in versions starting from 2.1.17";if(typeof e=="string")return Gi(JSON.parse(e));throw"Can't load tree!"},cd=function(e,r){if(e){var n=Kn(r,void 0,!0);return lu(e,null,n,n)}},fd=function(e){return ir(e).length==0},rs=function(e){return Nr.Map.isMap(e)},ts=function(e){return(0,gr.Z)(e)=="object"&&(e.type=="group"||e.type=="switch_group")};function Gi(a){var e=(0,Nr.fromJS)(a,function(r,n){var t;if(r=="properties"){t=n.toOrderedMap();for(var i=0;i<2;i++){var u;((u=t.get("value"))===null||u===void 0?void 0:u.get(i))===null&&(t=t.setIn(["value",i],void 0))}}else r=="value"&&ze().Iterable.isIndexed(n)?t=n.map(function(o){var s,c=o==null||(s=o.toJS)===null||s===void 0?void 0:s.call(o);return c!=null&&c.func?o.toOrderedMap():o!=null&&o.toJS?c:o}).toList():r=="asyncListValues"?t=n.toJS():r=="children1"&&ze().Iterable.isIndexed(n)?t=new(ze()).OrderedMap(n.map(function(o){return[o.get("id"),o]})):t=ze().Iterable.isIndexed(n)?n.toList():n.toOrderedMap();return t});return e}var ns=m(35694);function as(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=dd(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function dd(a,e){if(a){if(typeof a=="string")return is(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return is(a,e)}}function is(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}function os(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function ja(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?os(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):os(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var pd=function(e){return Array.from(new Set(e))},PE=function(e){return e.reduce(function(r,n){var t=_slicedToArray(n,2),i=t[0],u=t[1];return ja(ja({},r),{},_defineProperty({},i,u))},{})},Jo=function(){return{errors:[]}},vd=function(e,r){return us(e,r,!1)},us=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t=Jo(),i=Kn(r,void 0,!1),u=gd(i),o=e?Co(e,u,i,"rule",t):void 0;o&&o.type!="group"&&(o=eu(o,i));var s=o?Qo(o):void 0;return n?[s,t.errors]:(t.errors.length&&console.warn("Errors while importing from JsonLogic:",t.errors),s)},gd=function(e){var r={};for(var n in e.operators){var t=e.operators[n];if(typeof t.jsonLogic=="string"){var i=(t._jsonLogicIsRevArgs?"#":"")+t.jsonLogic+"/"+nt(t.cardinality,1);r[i]||(r[i]=[]),r[i].push(n)}else if(typeof t.jsonLogic2=="string"){var u=t.jsonLogic2+"/"+nt(t.cardinality,1);r[u]||(r[u]=[]),r[u].push(n)}}var o={};for(var s in e.conjunctions){var c=e.conjunctions[s],f=c.jsonLogicConj||s.toLowerCase();o[f]=s}var d={},v=as(fi(e)),g;try{for(v.s();!(g=v.n()).done;){var h=(0,qe.Z)(g.value,2),E=h[0],S=h[1],A=void 0;S.jsonLogicIsMethod?A="#"+S.jsonLogic:typeof S.jsonLogic=="string"&&(A=S.jsonLogic),A&&(d[A]||(d[A]=[]),d[A].push(E))}}catch(k){v.e(k)}finally{v.f()}var _=e.settings.jsonLogic,D=_.groupVarKey,P=_.altVarKey;return{operators:r,conjunctions:o,funcs:d,varKeys:["var",D,P]}},Co=function a(e,r,n,t,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,d,v;Et(e)&&(d=Object.keys(e)[0],v=e[d],Array.isArray(v)||(v=[v]));var g,h=i.errors.length,E=n.settings.jsonLogic.lockedOp,S=d=="!"&&v.length==1&&v[0]&&Et(v[0])&&r.varKeys.includes(Object.keys(v[0])[0]),A=d=="!"&&!S,_=E&&d==E;_?g=a(v[0],r,n,t,i,u,o,s,c,!0):A?g=a(v[0],r,n,t,i,!u,o,s,c):t=="val"?g=ss(d,v,r,n,u,i,c)||ls(d,v,r,n,u,o,i,c)||hd(e,o,s,n,i):t=="rule"&&(g=cs(d,v,r,n,u,i,c,!1)||Td(d,v,r,n,u,i,c));var D=i.errors.length;return d!="!"&&g===void 0&&D==h&&i.errors.push("Can't parse logic ".concat(JSON.stringify(e))),_&&(g.properties.isLocked=!0),g},hd=function(e,r,n,t,i){var u;if(e===void 0&&(e=r?.defaultValue),e!==void 0){var o=t.widgets[n||r?.mainWidget],s=r?.type;if(!o){i.errors.push("No widget for type ".concat(s));return}if(Et(e)){i.errors.push("Unexpected logic in value: ".concat(JSON.stringify(e)));return}if(s=="time"&&typeof e=="number"){var c=Math.floor(e/60/60)%24,f=Math.floor(e/60)%60,d=e%60,v=o.valueFormat;if(v){var g=new Date(e);g.setMilliseconds(0),g.setHours(c),g.setMinutes(f),g.setSeconds(d),e=dn()(g).format(v)}else e="".concat(c,":").concat(f,":").concat(d)}if(["date","datetime"].includes(s)&&e&&!(e instanceof Date))try{var h=new Date(e);h instanceof Date&&h.toISOString()===e&&(e=h)}catch{i.errors.push("Can't convert value ".concat(e," as Date")),e=void 0}if(e instanceof Date&&r){var E=o.valueFormat;E&&(e=dn()(e).format(E))}var S;if(e&&r!==null&&r!==void 0&&(u=r.fieldSettings)!==null&&u!==void 0&&u.asyncFetch){var A=Array.isArray(e)?e:[e];S=A}return{valueSrc:"value",value:e,valueType:o.type,asyncListValues:S}}},ss=function(e,r,n,t,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(n.varKeys.includes(e)&&typeof r[0]=="string"){var s=Po(t,r[0],o),c=$e(t,s);if(!c){u.errors.push("No config for field ".concat(s));return}return{valueSrc:"field",value:s,valueType:c.type}}},md=function(e,r,n,t,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,s=arguments.length>7?arguments[7]:void 0,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,f=Object.keys(r)[0],d=Object.values(r)[0],v=function(de,pe){return yd(de,pe,t,i,u,s,c)||Ed(de,pe,t,i,u,o,s,c)},g=s.errors.length,h,E,S,A,_=v(f,d);if(_&&(h=_.field,E=_.fieldSrc),e&&(A=!0,S=n[0],n=[]),f=="reduce"&&Array.isArray(d)&&d.length==3){var D=d,P=(0,qe.Z)(D,3),k=P[0],Z=P[1],q=P[2];if(Et(k)&&q==0&&Et(Z)&&Array.isArray(Z["+"])&&Z["+"][0]==1&&Et(Z["+"][1])&&Z["+"][1].var=="accumulator")if(f=Object.keys(k)[0],d=Object.values(k)[0],f=="filter"){var re=d,J=(0,qe.Z)(re,2),X=J[0],ae=J[1];if(Et(X)){f=Object.keys(X)[0],d=Object.values(X)[0];var le=v(f,d);le&&(h=le.field,E=le.fieldSrc,S=ae,A=!0)}}else{var ee=v(f,d);ee&&(h=ee.field,E=ee.fieldSrc,A=!0)}}var ie=s.errors.length;if(!h&&ie==g&&s.errors.push("Unknown LHS ".concat(JSON.stringify(r))),!!h)return{field:h,fieldSrc:E,having:S,isGroup:A,args:n}},yd=function(e,r,n,t,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;Array.isArray(r)||(r=[r]);var s=ss(e,r,n,t,i,u,o);if(s)return{fieldSrc:"field",field:s.value}},Ed=function(e,r,n,t,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=ls(e,r,n,t,i,u,o,s);if(c)return{fieldSrc:"func",field:c.value}},ls=function(e,r,n,t,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null;if(e){var c,f,d,v=e=="method";if(v){var g,h,E=(0,ns.Z)(r);g=E[0],c=E[1],h=E.slice(2),f=[g].concat((0,we.Z)(h))}else c=e,f=r;var S=(v?"#":"")+c,A=u?.type||u?.returnType,_=(n.funcs[S]||[]).filter(function(pe){return u?Ft(t,pe).returnType==A:!0});if(_.length)d=_[0];else{var D=(0,Ae.Z)({},e,r),P=as(fi(t)),k;try{for(P.s();!(k=P.n()).done;){var Z=(0,qe.Z)(k.value,2),q=Z[0],re=Z[1];if(re.jsonLogicImport&&(!A||re.returnType==A)){var J=void 0;try{J=re.jsonLogicImport(D)}catch{}J&&(d=q,f=J)}}}catch(pe){P.e(pe)}finally{P.f()}}if(d&&d){var X=Ft(t,d),ae=Object.keys(X.args||{}),le=f.reduce(function(pe,me,Se){var Ne=ae[Se],je=X.args[Ne],Me;return je&&(Me=Co(me,n,t,"val",o,!1,je,null,s)),Me!==void 0?ja(ja({},pe),{},(0,Ae.Z)({},Ne,Me)):pe},{});for(var ee in X.args){var ie=X.args[ee],se=le[ee];if(se===void 0){if(se=ie?.defaultValue,se!==void 0){var de;se={value:se,valueSrc:(de=se)!==null&&de!==void 0&&de.func?"func":"value",valueType:ie.type}}if(se===void 0){if(!(ie!=null&&ie.isOptional)){o.errors.push("No value for arg ".concat(ee," of func ").concat(d));return}}else le[ee]=se}}return{valueSrc:"func",value:{func:d,args:le},valueType:X.returnType}}}},cs=function(e,r,n,t,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,c=n.conjunctions[e],f=t.settings.fieldSeparator;if(c){var d="group",v=r.map(function(D){return Co(D,n,t,"rule",u,!1,null,null,o)}).filter(function(D){return D!==void 0}).reduce(function(D,P){return ja(ja({},D),{},(0,Ae.Z)({},P.id,P))},{}),g=Object.values(v).map(function(D){var P,k;return(D==null||(P=D.properties)===null||P===void 0?void 0:P.fieldSrc)=="field"&&(D==null||(k=D.properties)===null||k===void 0?void 0:k.field)}).filter(function(D){var P;return D==null||(P=D.includes)===null||P===void 0?void 0:P.call(D,f)}),h=Object.fromEntries(pd(g).map(function(D){var P=D.split(f),k=Object.fromEntries(P.slice(0,-1).map(function(Z,q,re){return[].concat((0,we.Z)(re.slice(0,q)),[Z])}).map(function(Z){return[Z.join(f),$e(t,Z)]}).filter(function(Z){var q=(0,qe.Z)(Z,2),re=q[0],J=q[1];return J?.type=="!group"}));return[D,Object.keys(k)]})),E={conjunction:c,not:i},S=Tr(),A={},_={};return Object.entries(v).map(function(D){var P=(0,qe.Z)(D,2),k=P[0],Z=P[1];if(Z?.type=="group"||Z?.type=="rule_group")A[k]=Z;else{var q,re=Z==null||(q=Z.properties)===null||q===void 0?void 0:q.field,J=h[re]||[],X=J[J.length-1];if(!X)Z&&(A[k]=Z);else{var ae=A,le=at(o,t),ee=at(X,t),ie=mt(le,ee.slice(0,le.length));ie||(le=[]);var se=X.split(f).slice(le.length).map(function(de,pe,me){return[].concat((0,we.Z)(le),(0,we.Z)(me.slice(0,pe)),[de]).join(f)}).map(function(de){return{f:de,fc:$e(t,de)||{}}}).filter(function(de){var pe=de.fc;return pe.type!="!struct"});se.map(function(de,pe){var me=de.f,Se=de.fc,Ne=_[me];Ne||(Ne=Tr(),_[me]=Ne,ae[Ne]={type:"rule_group",id:Ne,children1:{},properties:{conjunction:c,not:!1,field:me,fieldSrc:"field",mode:Se.mode}}),ae=ae[Ne].children1}),ae[k]=Z}}}),{type:d,id:S,children1:A,properties:E}}},Od=function(e,r,n,t,i){if(e)return{type:"rule_group",id:Tr(),children1:(0,Ae.Z)({},e.id,e),properties:{conjunction:i||Ao(t,n),not:!1,field:r}}},eu=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:Tr(),children1:(0,Ae.Z)({},e.id,e),properties:{conjunction:bn(r),not:n}}},Sd=function(e,r,n,t,i,u,o){var s=Jo(),c=fs(e,r,n,t,i,u,!1,s);if(c||(c=fs(e,r,n,t,i,u,!0,Jo())),!c){o.errors.push(s.errors.join("; ")||"Unknown op ".concat(e,"/").concat(r));return}return c},fs=function(e,r,n,t,i,u,o,s){var c=(e=="all"||e=="some")&&Et(n[1])&&Object.keys(n[1])[0]=="in",f=!c&&u.settings.groupOperators.includes(e),d=["==","!="],v=f?0:r-1;f?v=0:d.includes(e)&&v==1&&n[1]===null&&(r=1,v=0,n=[n[0]]);var g=e+"/"+v,h=i.operators[(o?"#":"")+g];if(h){var E,S=[],A=["<","<=",">",">="];if(A.includes(e)&&r==3)E=n[1],S=[n[0],n[2]];else if(o)E=n[1],S=[n[0]];else{var _=n,D=(0,ns.Z)(_);E=D[0],S=D.slice(1)}if(!Et(E)){s.errors.push("Incorrect operands for ".concat(e,": ").concat(JSON.stringify(n)));return}var P=md(f,E,S,i,u,null,null,s,t);if(P){var k=P.field,Z=P.fieldSrc,q=P.having,re=P.isGroup,J=P.args,X=$e(u,k);if(!X){s.errors.push("No config for LHS ".concat(k));return}var ae=h[0];if(h.length>1&&X&&X.operators){if(h=h.filter(function(le){return X.operators.includes(le)}),h.length==0){s.errors.push("No corresponding ops for LHS ".concat(k));return}ae=h[0]}return{field:k,fieldSrc:Z,fieldConfig:X,opKey:ae,args:J,having:q}}}},Td=function a(e,r,n,t,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(e){var s=r.length;if((e=="all"||e=="some")&&Et(r[1])){var c=Object.keys(r[1])[0];c=="in"&&(r=[r[0],r[1][c][1]],e=e+"-"+c)}var f=Sd(e,s,r,o,n,t,u);if(f){var d=f.field,v=f.fieldSrc,g=f.fieldConfig,h=f.opKey,E=f.args,S=f.having,A=t.operators[h],_=g.showNot!==void 0?g.showNot:t.settings.showNot,D=!0,P,k,Z=!1;if(g.type=="!group"&&S){P=Object.keys(S)[0],k=S[P],Array.isArray(k)||(k=[k]);var q=P=="!"&&k.length==1&&k[0]&&Et(k[0])&&n.varKeys.includes(Object.keys(k[0])[0]);P=="!"&&!q&&(Z=!0,S=S["!"],P=Object.keys(S)[0],k=S[P],Array.isArray(k)||(k=[k]))}i&&D&&A.reversedOp&&(i=!1,h=A.reversedOp,A=t.operators[h]);var re=Qr(t,d,h,null),J=E.map(function(se){return Co(se,n,t,"val",u,!1,g,re,o)});if(!J.filter(function(se){return se===void 0}).length){var X,ae=g.type;if((ae==="!group"||ae==="!struct")&&(ae=null),g.type=="!group"&&S){if(n.conjunctions[P]!==void 0)X=cs(P,k,n,t,Z,u,d,!0),Z=!1;else{var le=a(P,k,n,t,Z,u,d);Z=!1,X=Od(le,d,g,t,n.conjunctions.and)}if(!X)return;X.type="rule_group",Object.assign(X.properties,{field:d,mode:g.mode,operator:h}),g.mode=="array"&&Object.assign(X.properties,{value:J.map(function(se){return se.value}),valueSrc:J.map(function(se){return se.valueSrc}),valueType:J.map(function(se){return se.valueType})}),i&&(X=eu(X,t,i))}else if(g.type=="!group"&&!S)X={type:"rule_group",id:Tr(),children1:{},properties:{conjunction:Ao(t,g),not:i,mode:g.mode,field:d,operator:h}},g.mode=="array"&&Object.assign(X.properties,{value:J.map(function(se){return se.value}),valueSrc:J.map(function(se){return se.valueSrc}),valueType:J.map(function(se){return se.valueType})});else{var ee=J.map(function(se){return se.asyncListValues}).filter(function(se){return se!=null}),ie=ee.length?ee[0]:void 0;X={type:"rule",id:Tr(),properties:ja({field:d,fieldSrc:v,operator:h,value:J.map(function(se){return se.value}),valueSrc:J.map(function(se){return se.valueSrc}),valueType:J.map(function(se){return se.valueType})},ie?{asyncListValues:ie}:{})},i&&(X=eu(X,t,i))}return X}}}},Rd=m(55825),Cd=m(6804),Ad=m.n(Cd),la=Ad();la.trim=function(a){return a.charAt(0)=="'"?a.substring(1,a.length-1):a},la.escapeLike=function(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=la.escape(a);return n=la.trim(n),n=n.replace(/[%_]/g,"\\$&"),n=(e?"%":"")+n+(r?"%":""),n="'"+n+"'",n};var ds=function(e){var r="''",n=e?.type;return n=="date"?r="'0000-00-00'":n=="datetime"?r="'0000-00-00 00:00'":n=="time"?r="'00:00'":n=="number"&&(r="0"),r},ps=function(e){var r="",n=e?.type;return n=="number"&&(r=0),r},Ld=function(e){return"'"+e.replace(/'/g,"''")+"'"},Fd=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n,t,i=["int","float"];e.map(function(s){if(s!=null){if(typeof s=="string")t="String";else if(typeof s=="number")t=Number.isInteger(s)?"int":"float";else throw new Error("spelEscape: Can't use value ".concat(s," in array"));if(!n)n=t;else if(n!=t)if(i.includes(n)&&i.includes(t))n="float";else throw new Error("spelEscape: Can't use different types in array: found ".concat(n," and ").concat(t))}}),n||(n="String");var u;n=="float"?u=e.map(function(s){return ui(s,!0)}):u=e.map(function(s){return ui(s)});var o;return r?o="new ".concat(n,"[]{").concat(u.join(", "),"}"):o="{".concat(u.join(", "),"}"),o},vs=function(e){return"".concat(e,".?[true]")},ui=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e==null)return"null";switch((0,gr.Z)(e)){case"boolean":return e?"true":"false";case"number":return!Number.isFinite(e)||isNaN(e)?void 0:e+(!Number.isInteger(e)||r?"f":"");case"object":if(Array.isArray(e))return Fd(e,n);throw new Error("spelEscape: Object is not supported");default:return Ld(e)}},Id=function(e){return e&&Array.isArray(e)&&e.length?e.map(function(r){if(r.type=="const")return ui(r.value);if(r.type=="property")return""+r.value;if(r.type=="variable")return"#"+r.value}).filter(function(r){return r!=null}).join(" + "):"null"},Nd=function(e){if(e==null)return[void 0,[]];var r=[],n=e.valueType=="case_value"?e.value:[e],t=n.map(function(i){if(i.valueSrc=="value")return i.value===null?void 0:{type:"const",value:i.value};if(i.valueSrc=="field")return{type:i.isVariable?"variable":"property",value:i.value};r.push("Unsupported valueSrc ".concat(i.valueSrc," in concatenation"))}).filter(function(i){return i!=null});return[t,r]},gs=function(e){return e==null?"NULL":e.toString()};function hs(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=bd(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function bd(a,e){if(a){if(typeof a=="string")return ms(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ms(a,e)}}function ms(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}function ys(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Es(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ys(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):ys(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var ru="${0}.compareTo(${1})",wd={datetime:!0,time:!0,date:!0},Pd=function(e,r){return Os(e,r,!1)},Os=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t={errors:[]},i=Kn(r,void 0,!1),u=Ss(e,i,t,null);return n?[u,t.errors]:(t.errors.length&&console.warn("Errors while exporting to SpEL:",t.errors),u)},Ss=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(e){var i=e.get("type");if(i==="group"||i==="rule_group")return Rs(e,r,n,t);if(i==="rule")return Vd(e,r,n,t);if(i=="switch_group")return _d(e,r,n,t);if(i=="case_group")return Ts(e,r,n,t)}},Ts=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=e.get("type");if(i!="case_group"){n.errors.push("Unexpected child of type ".concat(i," inside switch"));return}var u=e.get("properties")||new Nr.Map,o=tu(r,u,n,null,t,"!case_value"),s=(0,qe.Z)(o,3),c=s[0],f=s[1],d=s[2],v=Rs(e,r,n,t);return[v,c]},_d=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=e.get("properties")||new Nr.Map,u=e.get("children1");if(u){var o=u.map(function(S){return Ts(S,r,n,null)}).filter(function(S){return typeof S<"u"}).toArray();if(o.length){if(o.length==1&&!o[0][0])return o[0][1];for(var s=[],c=0;c<o.length;c++)c!=o.length-1&&!o[c][0]?n.errors.push("No condition for case ".concat(c)):(s.push(o[c]),c==o.length-1&&o[c][0]&&s.push([void 0,null]));for(var f="",d="",v=0;v<s.length;v++){var g=(0,qe.Z)(s[v],2),h=g[0],E=g[1];E==null&&(E="null"),h==null&&(h="true"),v!=s.length-1?(f+="(".concat(h," ? ").concat(E," : "),d+=")"):f+="".concat(E)}return f+d}}},Rs=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=e.get("type"),u=e.get("properties")||new Nr.Map,o=u.get("mode"),s=e.get("children1")||new Nr.List,c=u.get("field"),f=u.get("conjunction");f||(f=bn(r));var d=r.conjunctions[f],v=u.get("not"),g=i==="rule_group",h=g&&o!="struct",E=h?c:t,S=$e(r,E)||{},A=S.isSpelArray,_=r.settings.fieldSeparator,D=u.get("operator");!D&&(!o||o=="some")&&(D="some");var P=As(r,D,c),k=P!=D,Z=D&&Ur(r,P,c)||null,q=g&&(!P||Z.cardinality==0),re=tu(r,u,n,P,t,null),J=(0,qe.Z)(re,3),X=J[0],ae=J[1],le=J[2],ee=s.map(function(Fe){return Ss(Fe,r,n,E)}).filter(function(Fe){return typeof Fe<"u"});if(h&&!q){if(X==null)return}else if(!ee.size)return;var ie=g,se=ee.size?d.spelFormatConj(ee,f,v,ie):null,de;if(h){var pe=au(n,r,c,t),me=_||".",Se=me+(A?"length":"size()"),Ne="".concat(pe).concat(Se),je=se?"".concat(pe,".?[").concat(se,"]").concat(Se):Ne,Me=q?Ne:X;de=Cs(n,r,u,je,Me,P,ae,le,k)}else de=se;return de},Dd=function(e,r,n){var t=r.spelOp;if(t){var i=t.includes("${0}"),u=wd[n],o=t,s,c=nt(r.cardinality,1);return u?s=function(d,v,g,h,E,S,A,_){var D=ru.replace(/\${(\w+)}/g,function(P,k){return k==0?d:c>1?g[k-1]:g});return"".concat(D," ").concat(o," 0")}:i?s=function(d,v,g,h,E,S,A,_){return t.replace(/\${(\w+)}/g,function(D,P){return P==0?d:c>1?g[P-1]:g})}:c==0?s=function(d,v,g,h,E,S,A,_){return"".concat(d," ").concat(o)}:c==1&&(s=function(d,v,g,h,E,S,A,_){return"".concat(d," ").concat(o," ").concat(g)}),s}},Cs=function(e,r,n,t,i,u,o,s){var c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,f=n.get("field"),d=Ur(r,u,f)||{},v=$e(r,f)||{},g=n.get("operatorOptions"),h=d.spelFormatOp||Dd(u,d,s);if(!h){e.errors.push("Operator ".concat(u," is not supported"));return}var E=[t,u,i,o,s,Xe()(d,Fn),g,v],S;return S=h.call.apply(h,[r.ctx].concat(E)),c&&(S=r.settings.spelFormatReverse(S)),S===void 0&&e.errors.push("Operator ".concat(u," is not supported for value source ").concat(o)),S},As=function(e,r,n){if(r){var t=Ur(e,r,n)||{},i=t.reversedOp,u=Ur(e,i,n)||{},o=!1,s=t.spelOp||t.spelFormatOp,c=u.spelOp||u.spelFormatOp;if(!(!s&&!c)){if(!s&&c){o=!0;var f=[i,r];r=f[0],i=f[1];var d=[u,t];t=d[0],u=d[1]}return r}}},Vd=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=e.get("properties")||new Nr.Map,u=i.get("field"),o=i.get("fieldSrc"),s=i.get("operator");if(!(u==null||s==null)){var c=As(r,s,u);if(!c){n.errors.push("Operator ".concat(s," is not supported"));return}var f=c!=s,d=tu(r,i,n,c,t,null),v=(0,qe.Z)(d,3),g=v[0],h=v[1],E=v[2];if(g!==void 0){var S=Md(n,r,u,o,t);if(S!==void 0){var A=Cs(n,r,i,S,g,c,h,E,f);return A}}}},Md=function(e,r,n,t){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;return t==="func"?Ls(e,r,n,i):au(e,r,n,i)},tu=function(e,r,n,t,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=r.get("field"),s=r.get("valueSrc"),c=r.get("valueType");(u=="!case_value"||c&&c.get(0)=="case_value")&&(o="!case_value");var f=$e(e,o)||{},d=Ur(e,t,o)||{},v=nt(d.cardinality,1),g=r.get("value"),h=r.get("asyncListValues"),E=[],S=[],A;if(g!=null){var _=g.map(function(P,k){var Z=s?s.get(k):null,q=c?c.get(k):null,re=Ua(P,Z,e),J=Qr(e,o,t,Z),X=Xe()(Ut(e,o,t,J,Z),["factory"]),ae=nu(n,e,re,Z,q,X,f,t,d,i,h);return ae!==void 0&&(E.push(Z),S.push(q)),ae}),D=_.filter(function(P){return P===void 0}).size>0;_.size<v||D||(A=v>1?_.toArray():v==1?_.first():null)}return[A,E.length>1?E:E[0],S.length>1?S:S[0]]},nu=function(e,r,n,t,i,u,o,s,c){var f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,d=arguments.length>10?arguments[10]:void 0;if(n!==void 0){var v;if(t=="field")v=au(e,r,n,f);else if(t=="func")v=Ls(e,r,n,f);else if(typeof u.spelFormatValue=="function"){var g=u.spelFormatValue,h=[n,Es(Es({},xt()(o,["fieldSettings","listValues"])),{},{asyncListValues:d}),Xe()(u,Lt)];if(s&&(h.push(s),h.push(c)),t=="field"){var E=$e(r,n)||{};h.push(E)}v=g.call.apply(g,[r.ctx].concat(h))}else v=ui(n);return v}},au=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(n){var i=r.settings.fieldSeparator,u=$e(r,n)||{},o=at(n,r),s=Ys(n,r,t),c=r.settings.formatSpelField,f=$n(n,r,e,t),d=s.map(function(g){var h=(0,qe.Z)(g,3),E=h[0],S=h[1],A=h[2],_;A&&(A.type=="!struct"||A.type=="!group"&&A.mode=="struct"?_=S.isSpelMap?"map":"class":A.type=="!group"?_=S.isSpelItemMap?"[map]":"[class]":_="class");var D=S?.isSpelVariable;return{key:E,parent:_,isSpelVariable:D,fieldSeparator:i}}),v=c.call(r.ctx,f,t,o,d,u,r);return v}},Ls=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=n.get("func"),u=n.get("args"),o=Ft(r,i);if(!o){e.errors.push("Func ".concat(i," is not defined in config"));return}var s={},c=[],f=[];for(var d in o.args){var v,g=o.args[d],h=$e(r,g),E=g.defaultValue,S=g.isOptional,A=E!=null&&E.func?"func":"value",_=u?u.get(d):void 0,D=_?_.get("value"):void 0,P=_?_.get("valueSrc"):void 0,k=_?_.get("asyncListValues"):void 0,Z=(v=g.spelEscapeForFormat)!==null&&v!==void 0?v:!0,q=null,re=Qr(r,g,q,P),J=Xe()(Ut(r,g,q,re,P),["factory"]),X=nu(e,r,D,P,g.type,J,h,null,null,t,k);if(D!=null&&X===void 0){P!="func"&&e.errors.push("Can't format value of arg ".concat(d," for func ").concat(i));return}var ae=void 0;if(X===void 0&&!S&&E!=null){var le=Qr(r,g,q,A),ee=Xe()(Ut(r,g,q,le,A),["factory"]);if(ae=nu(e,r,E,A,g.type,ee,h,null,null,t,k),ae===void 0){A!="func"&&e.errors.push("Can't format default value of arg ".concat(d," for func ").concat(i));return}}var ie=X??ae;if(ie!==void 0){if(c.length){var se=hs(c),de;try{for(se.s();!(de=se.n()).done;){var pe=de.value;s[pe]=void 0}}catch(Qe){se.e(Qe)}finally{se.f()}c=[]}s[d]=Z?ie:D??E}else S||f.push(d),c.push(d)}if(!f.length){var me;if(typeof o.spelFormatFunc=="function"){var Se=o.spelFormatFunc,Ne=[s];me=Se.call.apply(Se,[r.ctx].concat(Ne))}else if(o.spelFunc){me=o.spelFunc.replace(/\${(\w+)}/g,function(Qe,Be){var tr;return(tr=s[Be])!==null&&tr!==void 0?tr:Qe});var je=Object.keys(o.args||{}).reverse().filter(function(Qe){return!!o.args[Qe].isOptional}),Me=hs(je),Fe;try{for(Me.s();!(Fe=Me.n()).done;){var Ke=Fe.value;if(s[Ke]!=null)break;me=me.replace(new RegExp("(, )?\\${"+Ke+"}","g"),"")}}catch(Qe){Me.e(Qe)}finally{Me.f()}me=me.replace(/\${(\w+)}/g,"null")}else e.errors.push("Func ".concat(i," is not supported"));return me}};function In(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=jd(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function jd(a,e){if(a){if(typeof a=="string")return Fs(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fs(a,e)}}function Fs(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}function Is(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function mr(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Is(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Is(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var Ns={number:"number",string:"text",boolean:"boolean",null:"null"},bs={String:"text"},kd="multiselect",xd=function(e){return["length"].includes(e)},ws=function(e){return(0,gr.Z)(e)=="object"&&e!==null&&!Array.isArray(e)},Ud=function(e,r){return Ps(e,r,!0)},Ps=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t={errors:[]},i=Kn(r,void 0,!1),u=Wd(i),o,s,c=void 0;try{var f=Rd.SpelExpressionEvaluator.compile(e);o=f._compiledExpression}catch(v){t.errors.push(v)}o&&(s=Gd(o,t),tn.debug("convertedObj:",s,t),c=iu(s,u,i,t),c&&c.type!="group"&&c.type!="switch_group"&&(c=Bi(c,i,s.not)),tn.debug("jsTree:",c));var d=c?Qo(c):void 0;return n?[d,t.errors]:(t.errors.length&&console.warn("Errors while importing from SpEL:",t.errors),d)},Gd=function a(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,t=e.getType(),i=e.getChildren().map(function(ee){return a(ee,r,e)});if((t=="op-or"||t=="op-and")&&(i=i.reduce(function(ee,ie){var se=ie.type==t&&!ie.not,de=se?ie.children:[ie];return[].concat((0,we.Z)(ee),(0,we.Z)(de))},[])),t=="op-not")return i.length!=1&&r.errors.push("Operator NOT should have 1 child, but got ".concat(i.length,"}")),mr(mr({},i[0]),{},{not:!i[0].not});if(t=="compound"){i=i.filter(function(ee){var ie=ee.type=="selection"&&ee.children.length==1&&ee.children[0].type=="boolean"&&ee.children[0].val==!0;return!ie});var u=i.find(function(ee){return ee.type=="selection"});u&&u.children.length!=1&&r.errors.push("Selection should have 1 child, but got ".concat(u.children.length));var o=u?u.children[0]:null,s=i[i.length-1],c=s.type=="method"&&s.val.methodName=="size"||s.type=="!func"&&s.methodName=="size",f=s.type=="property"&&s.val=="length",d=i.filter(function(ee){return ee!==u&&ee!==s}),v={type:"compound",children:d},g=(c||f)&&_s(d)!=null;if(g)return{type:"!aggr",filter:o,source:v};if(i=i.filter(function(ee){var ie=ee.type=="variable"&&ee.val=="this",se=ee.type=="variable"&&ee.val=="root";return!(ie||se)}),i=i.map(function(ee){return ee.type=="indexer"&&ee.children.length==1?{type:"indexer",val:ee.children[0].val,itype:ee.children[0].type}:ee}),s.type=="!func"){var h={},E=h;do{var S,A;Object.assign(E,s),i=i.filter(function(ee){return ee!==s}),s=i[i.length-1],((A=s)===null||A===void 0?void 0:A.type)=="!func"?(E.obj={},E=E.obj):i.length>1?E.obj={type:"compound",children:i}:E.obj=s}while(((S=s)===null||S===void 0?void 0:S.type)=="!func");return h}}var _;try{e.getRaw?_=e.getRaw():e.getValue.length==0&&(_=e.getValue())}catch(ee){tn.error("[spel2js] Error in getValue()",ee)}if(t=="ternary"&&(_=Bd(i)),(0,gr.Z)(_)==="object"&&_!==null&&(_.methodName||_.functionName)&&(_.args=_.args.map(function(ee){return a(ee,r,e)})),t=="list"&&(_=_.map(function(ee){return a(ee,r,e)}),!n&&_.length==1))return _[0];if(t=="constructorref"){var D=i.find(function(ee){return ee.type=="qualifiedidentifier"}),P=D?.val;if(!P){r.errors.push("Can't find qualifiedidentifier in constructorref children: ".concat(JSON.stringify(i)));return}var k=i.filter(function(ee){return ee.type!="qualifiedidentifier"});return{type:"!new",cls:P,args:k}}if(t=="typeref"){var Z=i.find(function(ee){return ee.type=="qualifiedidentifier"}),q=Z?.val;if(!q){r.errors.push("Can't find qualifiedidentifier in typeref children: ".concat(JSON.stringify(i)));return}var re=i.filter(function(ee){return ee.type!="qualifiedidentifier"});return{type:"!type",cls:q}}if(t=="function"||t=="method"){var J=_,X=J.functionName,ae=J.methodName,le=J.args;return{type:"!func",methodName:X||ae,isVar:t=="function",args:le}}return{type:t,children:i,val:_}},Bd=function(e){var r=[];function n(t){var i=(0,qe.Z)(t,3),u=i[0],o=i[1],s=i[2];r.push([u,o]),s?.type=="ternary"?n(s.children):r.push([void 0,s])}return n(e),r},Wd=function(e){var r={},n=function(se){var de=e.operators[se];if(de.spelOps)de.spelOps.forEach(function(me){var Se=me;r[Se]||(r[Se]=[]),r[Se].push(se)});else if(de.spelOp){var pe=de.spelOp;r[pe]||(r[pe]=[]),r[pe].push(se)}else tn.log("[spel] No spelOp for operator ".concat(se))};for(var t in e.operators)n(t);var i={};for(var u in e.conjunctions){var o=e.conjunctions[u],s=o.spelConj||u.toLowerCase();i[s]=u}var c={},f=In(fi(e)),d;try{var v=function(){var se=(0,qe.Z)(d.value,2),de=se[0],pe=se[1],me=[],Se=pe.spelFunc;if(typeof Se=="string"){var Ne=Object.keys(pe.args||{}).reverse().filter(function(Be){return!!pe.args[Be].isOptional||pe.args[Be].defaultValue!=null}),je=Se.replace(/\${(\w+)}/g,function(Be,tr){return"?"}),Me=Ne.reduce(function(Be,tr){return[].concat((0,we.Z)(Be),[[tr].concat((0,we.Z)(Be[Be.length-1]||[]))])},[]).map(function(Be){return Se.replace(/(?:, )?\${(\w+)}/g,function(tr,Ye){return Be.includes(Ye)?"":tr}).replace(/\${(\w+)}/g,function(tr,Ye){return"?"})});me=[je].concat((0,we.Z)(Me))}var Fe=In(me),Ke;try{for(Fe.s();!(Ke=Fe.n()).done;){var Qe=Ke.value;c[Qe]||(c[Qe]=[]),c[Qe].push(de)}}catch(Be){Fe.e(Be)}finally{Fe.f()}};for(f.s();!(d=f.n()).done;)v()}catch(ie){f.e(ie)}finally{f.f()}var g={};for(var h in e.widgets){var E=e.widgets[h],S=E.spelImportFuncs,A=E.type;if(S){var _=In(S),D;try{for(_.s();!(D=_.n()).done;){var P=D.value;if(typeof P=="string"){var k=P.replace(/\${(\w+)}/g,function(ie,se){return"?"}),Z=(0,we.Z)(P.matchAll(/\${(\w+)}/g)).map(function(ie){var se=(0,qe.Z)(ie,2),de=se[0],pe=se[1];return pe});g[k]||(g[k]=[]),g[k].push({w:h,argsOrder:Z})}}}catch(ie){_.e(ie)}finally{_.f()}}}var q={};for(var re in e.operators){var J=e.operators[re],X=J.spelOp;if(X!=null&&X.includes("${0}")){var ae=X.replace(/\${(\w+)}/g,function(ie,se){return"?"}),le=(0,we.Z)(X.matchAll(/\${(\w+)}/g)).map(function(ie){var se=(0,qe.Z)(ie,2),de=se[0],pe=se[1];return pe});q[ae]||(q[ae]=[]),q[ae].push({op:re,argsOrder:le})}}var ee=ru.replace(/\${(\w+)}/g,function(ie,se){return"?"});return q[ee]=[{op:"!compare",argsOrder:["0","1"]}],{operators:r,conjunctions:i,funcs:c,valueFuncs:g,opFuncs:q}},iu=function a(e,r,n,t){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(e){var u,o=!0;if(e.type.indexOf("op-")===0||e.type==="matches")u=Zd(e,r,n,t,i);else if(e.type=="!aggr"){var s,c=a(e.source,r,n,t,mr(mr({},e),{},{_groupField:i?._groupField})),f=a(e.filter,r,n,t,mr(mr({},e),{},{_groupField:c?.value}));((s=f)===null||s===void 0?void 0:s.type)=="rule"&&(f=Bi(f,n,e.filter.not)),u={groupFilter:f,groupFieldValue:c},i||(u=void 0,t.errors.push("Unexpected !aggr in root"),o=!1)}else if(e.type=="ternary"){var d={};e.val.forEach(function(g){var h=(0,qe.Z)(g,2),E=h[0],S=h[1],A=Vs(E,S,r,n,t,e);A&&(d[A.id]=A)}),u={type:"switch_group",id:Tr(),children1:d,properties:{}}}if(!u&&o&&(u=si(e,r,n,t,i)),u&&!u.type&&!i){var v=Ds(e,r,n,t);v?u=v:(u=void 0,t.errors.push("Can't convert rule of type ".concat(e.type,", it looks like var/literal")))}return u}},Zd=function a(e,r,n,t){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u,o=e.type.startsWith("op-")?e.type.slice(3):e.type,s=(o=="minus"||o=="plus")&&e.children.length==1;if(s)return e.isUnary=!0,a(e.children[0],r,n,t,e);var c=o=="and"&&e.children.length==2&&e.children[0].type=="op-ge"&&e.children[1].type=="op-le",f=o=="or"&&e.children.length==2&&e.children[0].type=="op-lt"&&e.children[1].type=="op-gt",d=c||f;if(d){var v=(0,qe.Z)(e.children[0].children,2),g=v[0],h=v[1],E=(0,qe.Z)(e.children[1].children,2),S=E[0],A=E[1],_=Xd(g,S,e,r,n,t,i);if(_){var D=h.val,P=A.val,k={type:"op-between",children:[g,h,A]};return a(k,r,n,t,i)}}var Z=r.operators[o];o=="eq"&&e.children[1].type=="null"?Z=["is_null"]:o=="ne"&&e.children[1].type=="null"?Z=["is_not_null"]:o=="le"&&e.children[1].type=="string"&&e.children[1].val==""?Z=["is_empty"]:o=="gt"&&e.children[1].type=="string"&&e.children[1].val==""?Z=["is_not_empty"]:o=="between"&&(Z=["between"]);var q=function(){var Or,br=e.children.map(function(dt){return iu(dt,r,n,t,mr(mr({},e),{},{_groupField:i?._groupField}))});return br.length>=2&&((Or=br)===null||Or===void 0||(Or=Or[0])===null||Or===void 0?void 0:Or.type)=="!compare"&&(br=br[0].children),br};if(o=="and"||o=="or"){var re={},J=q();J.forEach(function(Ye){if(Ye){var Or=Tr();Ye.id=Or,Ye.type!=null?re[Or]=Ye:t.errors.push("Bad item in AND/OR: ".concat(JSON.stringify(Ye)))}}),u={type:"group",id:Tr(),children1:re,properties:{conjunction:r.conjunctions[o],not:e.not}}}else if(Z){var X,ae,le=q(),ee=le[0],ie=le.slice(1),se=ee==null||(X=ee.groupFieldValue)===null||X===void 0?void 0:X.value,de=(ae=ie)===null||ae===void 0?void 0:ae[0],pe=Z[0];if(Z.length>1){var me,Se,Ne=((me=le[0])===null||me===void 0?void 0:me.valueType)||((Se=le[1])===null||Se===void 0?void 0:Se.valueType),je=ee?.value,Me=Z.map(function(Ye){return{op:Ye,widget:Qr(n,je,Ye)}});if(tn.warn("[spel] Spel operator ".concat(o," can be mapped to ").concat(Z,"."),"widgets:",Me,"vals:",le,"valueType=",Ne),o=="eq"||o=="ne"){var Fe=Me.find(function(Ye){var Or=Ye.op,br=Ye.widget;return br&&br!="field"});Fe&&(pe=Fe.op)}}ee!=null&&ee.groupFieldValue&&(de&&de.groupFieldValue&&de.groupFieldValue.valueSrc=="field"&&de.groupFieldValue.value==se?(pe="all",ie=[]):pe=="equal"&&de.valueSrc=="value"&&de.valueType=="number"&&de.value==0?(pe="none",ie=[]):pe=="greater"&&de.valueSrc=="value"&&de.valueType=="number"&&de.value==0&&(pe="some",ie=[]));var Ke=!0,Qe=!1;if(e.not&&Ke){var Be=n.operators[pe];Be.reversedOp?(pe=Be.reversedOp,e.not=!1):Qe=!0}if(ee)if(ee.groupFieldValue)ee.groupFieldValue.valueSrc!="field"&&t.errors.push("Expected group field ".concat(JSON.stringify(ee))),u=qd(ee,pe,ie,n,t);else{ee.valueSrc!="field"&&ee.valueSrc!="func"&&t.errors.push("Expected field/func at LHS, but got ".concat(JSON.stringify(ee)));var tr=ee.value;u=ou(n,t,tr,pe,ie)}Qe&&(u.type!=="group"?u=Bi(u,n,e.not):u.properties.not=!u.properties.not)}else i||(u=Ds(e,r,n,t));return u},_s=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t=!1,i=e.map(function(u){if(u.type=="variable"||u.type=="property"||u.type=="indexer"&&u.itype=="string")return u.val;var o,s;t=!0,n&&(r==null||(o=r.errors)===null||o===void 0||(s=o.push)===null||s===void 0||s.call(o,"Unexpected item in field path compound: ".concat(JSON.stringify(u))))});return t?void 0:i},si=function a(e,r,n,t,i){if(e!=null){var u=n.settings.fieldSeparator;if(e.type=="variable"||e.type=="property"){var o=Po(n,e.val,i?._groupField),s=$e(n,o),c=e.type=="variable";return{valueSrc:"field",valueType:s?.type,isVariable:c,value:o}}else if(e.type=="compound"){var f=_s(e.children,t);if(f){var d,v=Po(n,f.join(u),i?._groupField),g=$e(n,v),h=((d=e.children)===null||d===void 0||(d=d[0])===null||d===void 0?void 0:d.type)=="variable";return{valueSrc:"field",valueType:g?.type,isVariable:h,value:v}}}else if(Ns[e.type]){var E=e.val,S=Ns[e.type];return i!=null&&i.isUnary&&(E=-E),{valueSrc:"value",valueType:S,value:E}}else if(e.type=="!new"&&bs[e.cls.at(-1)]){var A=e.args.map(function(X){return a(X,r,n,t,e)}),_=A?.[0],D=bs[e.cls.at(-1)];return mr(mr({},_),{},{valueType:D})}else if(e.type=="list"){var P,k=e.val.map(function(X){return a(X,r,n,t,e)}),Z=k.length?(P=k[0])===null||P===void 0?void 0:P.valueType:null,q=k.map(function(X){return X?.value}),re=kd;return{valueSrc:"value",valueType:re,value:q}}else if(e.type=="op-plus"&&i?.type=="ternary")return Ms(e,r,n,t);var J=Kd(e,r,n,t,i);if(J!==void 0)return J;t.errors.push("Can't convert arg of type ".concat(e.type))}},Hd=function(e){var r=[{s:"",params:[],objs:[]}];return $d(e,r),r.map(function(n){var t=n.s,i=n.params;return{s:t,params:i}}).reverse().filter(function(n){var t=n.s;return t!==""&&t!=="?"})},$d=function a(e,r){var n=[],t="",i=e.type,u=e.methodName,o=e.val,s=e.obj,c=e.args,f=e.isVar,d=e.cls,v=e.children,g=v?.[v.length-1],h=r[r.length-1];if(i==="!func"){for(var E=s;E;){var S,A=a(mr(mr({},E),{},{obj:null}),[{}]),_=(0,qe.Z)(A,2),D=_[0],P=_[1];if(D!=="?"){var k={s:h.s,params:(0,we.Z)(h.params),objs:(0,we.Z)(h.objs)};h.objs.unshift("?"),h.params.unshift(E),r.push(k),h=r[r.length-1]}h.objs.unshift(D),(S=h.params).unshift.apply(S,(0,we.Z)(P)),E=E.type==="!func"?E.obj:null}var Z=In(r),q;try{for(Z.s();!(q=Z.n()).done;){var re,J=q.value;n=[].concat((0,we.Z)(J?.params||[]),(0,we.Z)(c||[])),t="",J!=null&&(re=J.objs)!==null&&re!==void 0&&re.length&&(t+=J.objs.join(".")+"."),t+=(f?"#":"")+u,t+="("+(c||[]).map(function(X){return"?"}).join(", ")+")",J.s=t,J.params=n}}catch(X){Z.e(X)}finally{Z.f()}}else i==="!new"?(n=c||[],t="new ".concat(d.join("."),"(").concat(n.map(function(X){return"?"}).join(", "),")")):i==="!type"?t="T(".concat(d.join("."),")"):i==="compound"&&g.type==="property"&&xd(g.val)?t=v.map(function(X){var ae;if(X===g)return X.val;var le=a(mr(mr({},X),{},{obj:null}),[{}]),ee=(0,qe.Z)(le,2),ie=ee[0],se=ee[1];return(ae=n).push.apply(ae,(0,we.Z)(se)),ie}).join("."):(n=[e],t="?");return h&&(h.s=t,h.params=n),[t,n]},Kd=function(e,r,n,t,i){var u,o=function(pe){return si(pe,r,n,t,mr(mr({},e),{},{_groupField:i?._groupField}))},s=Hd(e),c=s==null||(u=s[0])===null||u===void 0?void 0:u.s;s.length&&tn.debug("Signatures for ",e,":",c,s);var f=Yd(e,r,n,t,i,s,o);if(f!==void 0)return f;var d=zd(e,r,n,t,i,s,o);if(d!==void 0)return d;var v,g,h,E=In(s),S;try{var A=function(){var pe=S.value,me=pe.s,Se=pe.params,Ne=r.funcs[me];if(Ne){v=Ne[0],g=Ft(n,v);var je=g,Me=je.spelFunc,Fe=Se.map(o),Ke=(0,we.Z)(Me.matchAll(/\${(\w+)}/g)).map(function(Qe){var Be=(0,qe.Z)(Qe,2),tr=Be[0],Ye=Be[1];return Ye});return h=Object.fromEntries(Ke.map(function(Qe,Be){return[Qe,Fe[Be]]})),"break"}};for(E.s();!(S=E.n()).done;){var _=A();if(_==="break")break}}catch(de){E.e(de)}finally{E.f()}if(!v){var D=In(fi(n)),P;try{for(D.s();!(P=D.n()).done;){var k=(0,qe.Z)(P.value,2),Z=k[0],q=k[1];if(q.spelImport){var re=void 0;try{re=q.spelImport(e)}catch{}if(re){v=Z,g=Ft(n,v),h={};for(var J in re)h[J]=o(re[J])}}}}catch(de){D.e(de)}finally{D.f()}}if(v){var X={};for(var ae in g.args){var le=g.args[ae],ee=h[ae];if(ee===void 0)if(ee=le?.defaultValue,ee===void 0){if(!(le!=null&&le.isOptional)){t.errors.push("No value for arg ".concat(ae," of func ").concat(v));return}}else{var ie;ee={value:ee,valueSrc:(ie=ee)!==null&&ie!==void 0&&ie.func?"func":"value",valueType:le.type}}ee&&(X[ae]=ee)}return{valueSrc:"func",value:{func:v,args:X},valueType:g.returnType}}var se=e.methodName;se&&t.errors.push("Signature ".concat(c," - failed to convert"))},Yd=function(e,r,n,t,i,u,o){var s,c,f,d=[];for(var v in n.widgets){var g=n.widgets[v],h=g.spelImportFuncs;if(h)for(var E=0;E<h.length;E++){var S=h[E];if(ws(S)){var A={};if(Qt(S,e,A)){for(var _ in A)A[_]=o(A[_]);d.push({s:"widgets.".concat(v,".spelImportFuncs[").concat(E,"]"),w:v,argsObj:A})}}}}var D=In(u),P;try{for(D.s();!(P=D.n()).done;){var k=P.value,Z=k.s,q=k.params,re=r.valueFuncs[Z]||[],J=In(re),X;try{var ae=function(){var Be=X.value,tr=Be.w,Ye=Be.argsOrder,Or=q.map(o),br=Object.fromEntries(Ye.map(function(dt,Zt){return[dt,Or[Zt]]}));d.push({s:Z,w:tr,argsObj:br})};for(J.s();!(X=J.n()).done;)ae()}catch(Qe){J.e(Qe)}finally{J.f()}}}catch(Qe){D.e(Qe)}finally{D.f()}for(var le=0,ee=d;le<ee.length;le++){var ie=ee[le],se=ie.s,de=ie.w,pe=ie.argsObj,me=n.widgets[de],Se=me.spelImportValue,Ne=me.type;f=de,c=se,s=[];for(var je in pe)["value"].includes(pe[je].valueSrc)||s.push("".concat(je," has unsupported value src ").concat(pe[je].valueSrc));var Me=pe.v.value;if(Se&&!s.length){var Fe=Se.call(n.ctx,pe.v,me,pe),Ke=(0,qe.Z)(Fe,2);Me=Ke[0],s=Ke[1],s&&!Array.isArray(s)&&(s=[s])}if(!s.length)return{valueSrc:"value",valueType:Ne,value:Me}}f&&s.length&&t.errors.push("Signature ".concat(c," - looks like convertable to ").concat(f,", but: ").concat(s.join("; ")))},zd=function(e,r,n,t,i,u,o){var s,c,f,d=In(u),v;try{for(d.s();!(v=d.n()).done;){var g=v.value,h=g.s,E=g.params,S=r.opFuncs[h]||[],A=In(S),_;try{var D=function(){var Z,q=_.value,re=q.op,J=q.argsOrder,X=E.map(o);if(c=re,re==="!compare"){if(i.type.startsWith("op-")&&i.children.length==2&&i.children[1].type=="number"&&i.children[1].val===0)return{v:{type:"!compare",children:X}};s.push("Result of compareTo() should be compared to 0")}f=h,s=[];var ae=n.operators[c],le=ae.spelOp,ee=ae.valueTypes,ie=Object.fromEntries(J.map(function(me,Se){return[me,X[Se]]})),se=ie[0],de=Object.keys(ie).filter(function(me){return parseInt(me)>0}).map(function(me){return ie[me]}),pe=(Z=X.filter(function(me){return!!me}).find(function(me){var Se=me.valueSrc;return Se==="value"}))===null||Z===void 0?void 0:Z.valueType;if(ee&&pe&&!ee.includes(pe)&&s.push("Op supports types ".concat(ee,", but got ").concat(pe)),!s.length)return{v:ou(n,t,se,c,de,e)}};for(A.s();!(_=A.n()).done;){var P=D();if((0,gr.Z)(P)==="object")return P.v}}catch(k){A.e(k)}finally{A.f()}}}catch(k){d.e(k)}finally{d.f()}c&&s.length&&t.errors.push("Signature ".concat(f," - looks like convertable to ").concat(c,", but: ").concat(s.join("; ")))},ou=function(e,r,n,t,i,u){var o;if(!i.filter(function(_){return _===void 0}).length){var s=(o=n)!==null&&o!==void 0&&o.func?"func":"field";ws(n)&&n.valueSrc&&(s=n.valueSrc,n=n.value);var c=$e(e,n);if(!c){r.errors.push("No config for field ".concat(n));return}var f=!0,d=!1;if(u!=null&&u.not&&f){var v=e.operators[t];v.reversedOp?(t=v.reversedOp,u.not=!1):d=!0}var g=Qr(e,n,t),h=e.widgets[g||c.mainWidget],E=i.map(function(_){return _.asyncListValues}).filter(function(_){return _!=null}),S=E.length?E[0]:void 0,A={type:"rule",id:Tr(),properties:mr({field:n,fieldSrc:s,operator:t,value:i.map(function(_){return _.value}),valueSrc:i.map(function(_){return _.valueSrc}),valueType:i.map(function(_){return _.valueSrc=="value"&&(h?.type||c?.type)||_.valueType})},S?{asyncListValues:S}:{})};return d&&(A=Bi(A,e,u?.not),u!=null&&u.not&&(u.not=!1)),A}},qd=function(e,r,n,t,i){var u=e.groupFilter,o=e.groupFieldValue;if(o.valueSrc!="field")throw"Bad groupFieldValue: ".concat(JSON.stringify(o));var s=o.value,c=ou(t,i,s,r,n);if(c){var f=$e(t,s),d=f?.mode,v;return u?.type==="group"?v=mr(mr({},u||{}),{},{type:"rule_group",properties:mr(mr(mr({},c.properties),u?.properties||{}),{},{mode:d})}):u?v=mr(mr({},c||{}),{},{type:"rule_group",children1:[u],properties:mr(mr({},c.properties),{},{mode:d})}):v=mr(mr({},c||{}),{},{type:"rule_group",properties:mr(mr({},c.properties),{},{mode:d})}),v.id||(v.id=Tr()),v}},Xd=function(e,r,n,t,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(e.type==r.type)if(e.type=="!aggr"){var s=[e.source,r.source].map(function(S){return si(S,t,i,u,mr(mr({},n),{},{_groupField:o?._groupField}))}),c=(0,qe.Z)(s,2),f=c[0],d=c[1];return f.value==d.value}else{var v=[e,r].map(function(S){return si(S,t,i,u,mr(mr({},n),{},{_groupField:o?._groupField}))}),g=(0,qe.Z)(v,2),h=g[0],E=g[1];return h.value==E.value}return!1},Ds=function(e,r,n,t){var i={},u=null,o=Vs(u,e,r,n,t);o&&(i[o.id]=o);var s={type:"switch_group",id:Tr(),children1:i,properties:{}};return s},Vs=function(e,r,n,t,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=Qd(t,i,n,r,u),s;return e?(s=iu(e,n,t,i,u),s&&s.type?(s.type!="group"&&(s=Bi(s,t)),s.type="case_group"):(i.errors.push("Unexpected case: ".concat(JSON.stringify(s))),s=void 0)):s={id:Tr(),type:"case_group",properties:{}},s&&(s.properties=mr(mr({},s.properties),o)),s},Ms=function(e,r,n,t){var i=[];function u(o){o.map(function(s){if(s.type=="op-plus")u(s.children);else{var c=si(s,r,n,t,e);c?i.push(c):t.errors.push("Can't convert ".concat(s.type," in concatenation"))}})}return u(e.children),{valueSrc:"value",valueType:"case_value",value:i}},Qd=function(e,r,n,t){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u={},o;t?.type=="op-plus"?o=Ms(t,n,e,r):o=si(t,n,e,r,i);var s=e.widgets.case_value,c=s?.spelImportValue;if(c){var f=c(o),d=(0,qe.Z)(f,2),v=d[0],g=d[1];g.map(function(h){return r.errors.push(h)}),v&&(u={value:[v],valueSrc:["value"],valueType:["case_value"]})}else r.errors.push("No fucntion to import case value");return u},_E=function(e,r,n,t,i){if(e)return{type:"rule_group",id:uuid(),children1:_defineProperty({},e.id,e),properties:{conjunction:i||defaultGroupConjunction(t,n),not:!1,field:r}}},Bi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:Tr(),children1:(0,Ae.Z)({},e.id,e),properties:{conjunction:bn(r),not:n||!1}}};function js(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Jd(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?js(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):js(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var ks=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,t=e.settings.defaultField,i=(n?xs(e,n):t)||r&&$s(e,n)||null;return i!=null&&typeof i!="string"&&!Hn(i)&&(i=Gi(i)),i},xs=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!n)return null;var t=(e==null||(r=e.settings)===null||r===void 0?void 0:r.fieldSeparator)||".",i=$e(e,n),u=i?.defaultField;return u&&(u=[].concat((0,we.Z)(at(n)),[u]).join(t)),u},uu=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n&&((r=e.settings.fieldSources)===null||r===void 0?void 0:r[0])||"field"},su=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t=e.settings.defaultOperator,i=$e(e,r),u=i?.operators||[];t&&!u.includes(t)&&(t=null);var o=i?.defaultOperator;o&&!u.includes(o)&&(o=null),!o&&n&&(o=fu(e,r));var s=i?._origDefaultOperator,c=s&&o||t||o;return c},Wi=function(e,r,n){var t=r?Ur(e,r,n):null;return t&&t.options?new(ze()).Map(t.options&&t.options.defaults||{}):null},Nn=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=null,o=null,s=null,c=e.settings.showErrorMessage;if(n){var f,d,v;s=n==null||(f=n.properties)===null||f===void 0?void 0:f.fieldSrc,u=n==null||(d=n.properties)===null||d===void 0?void 0:d.field,o=n==null||(v=n.properties)===null||v===void 0?void 0:v.operator}else t?(u=ks(e,i,r),u?s=Hn(u)?"func":"field":s=uu(e),o=su(e,u,!0)):s=uu(e);var g=new(ze()).Map({fieldSrc:s,field:u,operator:o,value:new(ze()).List,valueSrc:new(ze()).List,operatorOptions:Wi(e,o,u)});if(c&&(g=g.set("valueError",new(ze()).List)),u&&o){var h=ka(e,e,g,u,o,"operator",!1),E=h.newValue,S=h.newValueSrc,A=h.newValueType,_=h.newValueError;g=g.set("value",E).set("valueSrc",S).set("valueType",A),c&&(g=g.set("valueError",_))}return g},Ao=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;r=$e(e,r);var n=r&&r.conjunctions||Object.keys(e.conjunctions);return n.length==1?n[0]:e.settings.defaultGroupConjunction||e.settings.defaultConjunction||n[0]},bn=function(e){return e.settings.defaultConjunction||Object.keys(e.conjunctions)[0]},ca=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new(ze()).Map({conjunction:Ao(e,r),not:!1})},Us=function(e,r){var n;return r&&r.type=="group"?ca(e,r==null||(n=r.properties)===null||n===void 0?void 0:n.field):Nn(e,null,r)},Gs=function(e,r){return(0,Ae.Z)({},e,new(ze()).Map({type:"rule",id:e,properties:Nn(r)}))},ep=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return new(ze()).Map({type:"group",id:Tr(),children1:new(ze()).OrderedMap(r?Jd({},Gs(Tr(),e)):{}),properties:ca(e)})},rp=function(e){return new(ze()).List(e)},tp=function(){return new(ze()).Map},np=function(e){return(0,gr.Z)(e)=="object"&&e!==null&&Array.isArray(e)?"array":(0,gr.Z)(e)},ap=function(e,r){return np(e)==r||r=="number"&&!isNaN(e)},ip=function(e,r,n,t,i,u){var o=lu(e,r,n,t,i,u);return o=ue(o),o},lu=function(e,r,n,t,i,u){i===void 0&&(i=n.settings.removeEmptyGroupsOnLoad),u===void 0&&(u=n.settings.removeIncompleteRulesOnLoad);var o={config:n,oldConfig:t,removeEmptyGroups:i,removeIncompleteRules:u};return Bs(e,[],null,{},o)};function Bs(a,e,r,n,t){var i=a.get("type"),u=a.get("children1");return(i==="group"||i==="rule_group"||i=="case_group"||i=="switch_group")&&u&&u.size?op(a,e,r,n,t):i==="rule"?up(a,e,r,n,t):a}function op(a,e,r,n,t){var i=t.removeEmptyGroups,u=a.get("id"),o=a.get("children1"),s=o;!u&&r&&(u=r,a=a.set("id",u),n.sanitized=!0);var c={};o=o.map(function(d,v){return Bs(d,e.concat(u),v,c,t)}),i&&(o=o.filter(function(d){return d!=null}));var f=c.sanitized||s.size!=o.size;return!o.size&&i&&e.length&&(f=!0,a=void 0),f&&(n.sanitized=!0),f&&a&&(a=a.set("children1",o)),a}function up(a,e,r,n,t){var i,u,o,s,c=t.removeIncompleteRules,f=t.config,d=t.oldConfig,v=f.settings.showErrorMessage,g=a.get("id"),h=a.get("properties"),E=h.get("field")||null,S=h.get("fieldSrc")||null,A=h.get("operator")||null,_=h.get("operatorOptions"),D=h.get("valueSrc"),P=h.get("value"),k=h.get("valueError"),Z={field:((i=E)===null||i===void 0||(u=i.toJS)===null||u===void 0?void 0:u.call(i))||E,fieldSrc:S,operator:A,operatorOptions:_?_.toJS():{},valueSrc:D?D.toJS():null,value:P?P.toJS():null,valueError:k?k.toJS():null},q=E&&A&&P&&!P.includes(void 0);!g&&r&&(g=r,a=a.set("id",g),n.sanitized=!0);var re=E?$e(f,E):null;E&&!re&&(tn.warn("No config for field ".concat(E)),E=null),E==null&&(h=["operator","operatorOptions","valueSrc","value","valueError"].reduce(function(tr,Ye){return tr.delete(Ye)},h),A=null),S||(S=yl(E),h=h.set("fieldSrc",S)),(A=="range_between"||A=="range_not_between")&&(A=A=="range_between"?"between":"not_between",console.info("Fixed operator ".concat(h.get("operator")," to ").concat(A)),h=h.set("operator",A));var J=A?Ur(f,A,E):null;A&&!J&&(console.warn("No config for operator ".concat(A)),A=null);var X=E?No(f,E):[];E&&(X!=null&&X.length?A&&X.indexOf(A)==-1&&(A=="is_empty"||A=="is_not_empty"?(A=A=="is_empty"?"is_null":"is_not_null",console.info("Fixed operator ".concat(h.get("operator")," to ").concat(A," for ").concat(E)),h=h.set("operator",A)):(console.warn("Operator ".concat(A," is not supported for field ").concat(E)),A=null)):(console.warn("Type of field ".concat(E," is not supported")),A=null)),A==null&&(h=h.delete("operatorOptions"),h=h.delete("valueSrc"),h=h.delete("value"),h=h.delete("valueError")),_=h.get("operatorOptions");var ae=A?nt(J.cardinality,1):null;!A||_&&!J.options?(_=null,h=h.delete("operatorOptions")):A&&!_&&J.options&&(_=Wi(f,A,E),h=h.set("operatorOptions",_)),D=h.get("valueSrc"),P=h.get("value");var le=!v,ee=!0,ie=ka(f,d,h,E,A,null,le,ee),se=ie.newValue,de=ie.newValueSrc,pe=ie.newValueError;P=se,D=de,k=pe,h=h.set("value",P),h=h.set("valueSrc",D),v?h=h.set("valueError",k):h=h.delete("valueError");var me={field:((o=E)===null||o===void 0||(s=o.toJS)===null||s===void 0?void 0:s.call(o))||E,fieldSrc:S,operator:A,operatorOptions:_?_.toJS():{},valueSrc:D?D.toJS():null,value:P?P.toJS():null,valueError:k?k.toJS():null},Se=!wa(Z,me),Ne=P&&P.filter(function(tr,Ye){return!Hi(tr,D.get(Ye),f)}).size==0,je=Hi(E,S,f),Me=je&&A&&Ne;if(Se&&(n.sanitized=!0),!Me&&c){var Fe="Uncomplete rule";if(!je)Fe="Uncomplete LHS";else{var Ke,Qe,Be;Fe="Uncomplete RHS",(Ke=me.valueSrc)!==null&&Ke!==void 0&&Ke[0]&&((Qe=me.valueSrc)===null||Qe===void 0?void 0:Qe[0])!=((Be=Z.valueSrc)===null||Be===void 0?void 0:Be[0])&&(Fe="Bad value src ".concat(me.valueSrc))}console.warn("[RAQB validate]","Removing rule: ",Z,"Reason: ".concat(Fe)),a=void 0}else Se&&(a=a.set("properties",h));return a}var Lo=function(e,r,n,t,i,u,o,s){var c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,d=arguments.length>10&&arguments[10]!==void 0?arguments[10]:!0,v=null,g=i;if(i!=null){if(o=="field"){var h=cp(r,n,i,o,u,s,e,t,f,c),E=(0,qe.Z)(h,2);v=E[0],g=E[1]}else if(o=="func"){var S=fp(r,n,i,o,u,s,e,t,f,c),A=(0,qe.Z)(S,2);v=A[0],g=A[1]}else if(o=="value"||!o){var _=lp(r,n,i,o,u,s,e,t,f,c),D=(0,qe.Z)(_,2);v=D[0],g=D[1]}if(!v){var P=$e(e,n),k=Qr(e,n,t,o),Z=t?Ur(e,t,n):null,q=Xe()(Ut(e,n,t,k,o),["factory"]),re=o=="field"?$e(e,i):null,J=q,X=q.validateValue;if(typeof X=="function"){var ae=[g,J,t,Z];o=="field"&&ae.push(re);var le=X.call.apply(X,[e.ctx].concat(ae));typeof le=="boolean"?le==!1&&(v="Invalid value"):v=le}}}return d&&v&&console.warn("[RAQB validate]","Field ".concat(n,": ").concat(v)),[v,g]},sp=function(e,r,n,t,i){var u=Nr.List.isList(e)?e.toJS():e instanceof Array?(0,we.Z)(e):void 0;if(u){var o=u.reduce(function(h,E){var S=(0,qe.Z)(h,2),A=S[0],_=S[1],D=sa(r,E);return D==null?[A,[].concat((0,we.Z)(_),[E])]:[[].concat((0,we.Z)(A),[D.value]),_]},[[],[]]),s=(0,qe.Z)(o,2),c=s[0],f=s[1],d=f.length>1,v=f.length?"".concat(d?"Values":"Value"," ").concat(f.join(", ")," ").concat(d?"are":"is"," not in list of values"):null;return i!==void 0?n=i:n=n||t,[v,n?c:e]}else{var g=sa(r,e);return g==null?["Value ".concat(e," is not in list of values"),e]:(e=g.value,[null,e])}},lp=function(e,r,n,t,i,u,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1;if(r){var d=$e(o,r),v=Qr(o,r,s,t),g=o.widgets[v],h=g?.type,E=g?.jsType,S=d.fieldSettings,A=S?.treeValues||S?.listValues,_=!!(S!=null&&S.asyncFetch),D=A||_;if(i&&h&&i!=h)return["Value should have type ".concat(h,", but got value of type ").concat(i),n];if(E&&!ap(n,E)&&!D)return["Value should have JS type ".concat(E,", but got value of type ").concat((0,gr.Z)(n)),n];if(S){var P=u||A;if(P&&!S.allowCustomValues)return sp(n,P,f,c,o.settings.removeInvalidMultiSelectValuesOnLoad);if(S.min!=null&&n<S.min)return["Value ".concat(n," < min ").concat(S.min),f?S.min:n];if(S.max!=null&&n>S.max)return["Value ".concat(n," > max ").concat(S.max),f?S.max:n]}}return[null,n]},cp=function(e,r,n,t,i,u,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,d=o.settings.fieldSeparator,v=(0,gr.Z)(r)=="object"&&r?._isFuncArg,g=Array.isArray(e)?e.join(d):e,h=Array.isArray(n)?n.join(d):n,E=$e(o,n);return E?h==g&&!v?["Can't compare field ".concat(e," with itself"),n]:i&&i!=E.type?["Field ".concat(n," is of type ").concat(E.type,", but expected ").concat(i),n]:[null,n]:["Unknown field ".concat(n),n]},fp=function(e,r,n,t,i,u,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,d=n;if(n){var v=n.get("func");if(v){var g=Ft(o,v);if(g){if(i&&g.returnType!=i)return["Function ".concat(v," should return value of type ").concat(g.returnType,", but got ").concat(i),n];for(var h in g.args){var E=g.args[h],S=d.get("args"),A=S?S.get(h):void 0,_=$e(o,E),D=A?A.get("value"):void 0,P=A?A.get("valueSrc"):void 0;if(D!==void 0){var k=Lo(o,e,_,s,D,E.type,P,u,f,c,!1),Z=(0,qe.Z)(k,2),q=Z[0],re=Z[1];if(q!==null)if(f)d=d.deleteIn(["args",h]),E.defaultValue!==void 0&&(d=d.setIn(["args",h,"value"],E.defaultValue),d=d.setIn(["args",h,"valueSrc"],"value"));else return["Invalid value of arg ".concat(h," for func ").concat(v,": ").concat(q),n];else re!==D&&(d=d.setIn(["args",h,"value"],re))}else if(c&&E.defaultValue===void 0&&!f&&!E.isOptional)return["Value of arg ".concat(h," for func ").concat(v," is required"),n]}}else return["Unknown function ".concat(v),n]}}return[null,d]},dp=m(57312),Fo=m.n(dp),cu=function(e){return(0,gr.Z)(e)=="object"&&e!==null&&!Array.isArray(e)},Ws=function(e,r){if(e){var n=e.get("func"),t=n&&Ft(r,n);if(t){var i=e,u=!1;for(var o in t.args){var s=t.args[o],c=s.valueSources,f=s.isOptional,d=s.defaultValue,v=xa(r,c,s),g=i.get("args"),h=v.length==1?v[0]:void 0,E=g?g.get(o):void 0,S=E?E.get("value"):void 0,A=(E?E.get("valueSrc"):void 0)||h;if(S!==void 0){var _=Ua(S,A,r);if(_===void 0||(_!==S&&(i=i.setIn(["args",o,"value"],_)),u))return}else if(d!==void 0&&!cu(d))i=i.setIn(["args",o,"value"],Zs(s)),i=i.setIn(["args",o,"valueSrc"],"value");else if(f)u=!0;else return}return i}}},pp=function(e,r,n){var t=n.settings.fieldSeparator;e=e||new(ze()).Map,Array.isArray(r)&&(r=r.join(t));var i=e.get("func"),u=e.get("args");e=e.set("func",r);var o=r&&Ft(n,r),s=r&&Su(n,r),c=i&&Su(n,i),f=Hs(c,s,u,n);if(f.length){var d=Object.keys(s.args),v=d.filter(function(Z){return!f.includes(Z)});e=v.reduce(function(Z,q){return Z.deleteIn(["args",q])},e)}else e=e.set("args",new(ze()).Map);if(o)for(var g in o.args){var h=o.args[g],E=h.valueSources,S=h.defaultValue,A=xa(n,E,h),_=A.length?A[0]:void 0,D=S?cu(S)&&S.func?"func":"value":void 0,P=D||_,k=e.getIn(["args",g]);k||(S!==void 0&&(e=e.setIn(["args",g,"value"],Zs(h))),P&&(e=e.setIn(["args",g,"valueSrc"],P)))}return e},Zs=function(e){var r=e.defaultValue;return cu(r)&&!ze().Map.isMap(r)&&r.func?ze().fromJS(r,function(n,t){return ze().Iterable.isIndexed(t)?t.toList():t.toOrderedMap()}):r},vp=function(e,r,n,t,i){if(e&&e.get("func")){e=e.setIn(["args",r,"value"],n);var u=e.getIn(["args",r,"valueSrc"]),o=t.valueSources,s=xa(i,o,t),c=s.length==1?s[0]:void 0;!c&&s.includes("value")&&(c="value"),!u&&c&&(e=e.setIn(["args",r,"valueSrc"],c))}return e},gp=function(e,r,n,t,i){return e&&e.get("func")&&(e=e.setIn(["args",r],new(ze()).Map({valueSrc:n}))),e},Hs=function(e,r,n,t){if(e?.returnType!=r?.returnType)return[];var i=!1,u=Object.keys(r.args),o=u.filter(function(s,c){var f=r.args[s],d=e.args[s],v=Object.keys(e.args).indexOf(s);if(!d&&(f.defaultValue!==void 0||f.isOptional))return!0;if(i&&c!==v||d?.type!=f.type||Io.includes(f.type)&&(!d.listValuesType||d.listValuesType!==f.listValuesType))return!1;if(n){var g=n.get(s),h=g?.get("value"),E=g?.get("valueSrc");if(f.valueSources&&!f.valueSources.includes(E))return!1;var S=null,A=null,_=f,D=null,P=!1,k=!0,Z=Lo(t,S,_,A,h,_.type,E,D,P,k,!1),q=(0,qe.Z)(Z,2),re=q[0],J=q[1];if(re)return!1}return!0});return o},Io=["select","multiselect","treeselect","treemultiselect"],ka=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;r||(r=e);var c=e.settings.keepInputOnChangeFieldSrc,f=n.get("field"),d=n.get("fieldType"),v=n.get("operator"),g=n.get("value"),h=n.get("valueSrc",new(ze()).List),E=n.get("valueType",new(ze()).List),S=n.get("asyncListValues"),A=e.settings,_=A.convertableWidgets,D=A.clearValueOnChangeField,P=A.clearValueOnChangeOp,k=A.showErrorMessage,Z=Ur(e,i,t),q=i?nt(Z.cardinality,1):null,re=$e(r,f),J=$e(e,t),X=!f&&d&&c,ae=re?.type||d,le=J?.type||!t&&X&&ae,ee=(f||X)&&v&&i&&g!=null;if(ee=ee&&(!u||u=="field"&&!D||u=="operator"&&!P),ee=ee&&ae&&le&&ae==le,ee&&Io.includes(le)&&u=="field"){var ie=J?.listValuesType,se=re?.listValuesType;ie&&ie===se||(ee=!1)}for(var de=0;de<q;de++){var pe=h.get(de)||null,me=Qr(r,f,v,pe),Se=Qr(e,t,i,pe),Ne=pe=="value"?me:Qr(r,f,v,"value"),je=pe=="value"?Se:Qr(e,t,i,"value"),Me=je==Ne||(_[Ne]||[]).includes(je)||!Ne&&X;Me||(ee=!1)}v!=i&&[v,i].includes("proximity")&&(ee=!1);var Fe=Ut(e,t,i,null,h.first()),Ke=zs(e,t,i,null);!t&&X&&(Ke=Object.keys(e.settings.valueSourcesInfo));var Qe={},Be=Array.from({length:q},function(){return null});if(ee)for(var tr=function(){var st=g.get(Ye),Gr=E.get(Ye)||null,lt=h.get(Ye)||null,Yn=Ke.find(function(Ji){return Ji==lt})!=null;!Yn&&Ye>0&&lt==null&&(Yn=!0);var Ha=S,pa=Lo(e,t,t,i,st,Gr,lt,Ha,o,s,!0),zn=(0,qe.Z)(pa,2),gn=zn[0],va=zn[1],$a=!gn,hn=va!==st,mn=!Yn||!$a&&(u=="field"||!k&&!hn),Qi=!!gn&&k&&!mn&&!hn;if(Qi&&(Be[Ye]=gn),hn&&(Qe[Ye]=va),mn)return ee=!1,"break"},Ye=0;Ye<q;Ye++){var Or=tr();if(Or==="break")break}var br=null,dt=null,Zt=null,Ot=null;if(br=new(ze()).List(Array.from({length:q},function($t,st){var Gr=void 0;if(ee)st<g.size&&(Gr=g.get(st),Qe[st]!==void 0&&(Gr=Qe[st]));else if(q==1){var lt;Gr=Vi([J?.defaultValue,J==null||(lt=J.fieldSettings)===null||lt===void 0?void 0:lt.defaultValue,Fe?.defaultValue])}return Gr})),dt=new(ze()).List(Array.from({length:q},function($t,st){var Gr=null;return ee?st<h.size&&(Gr=h.get(st)):(Ke.length==1||Ke.length>1)&&(Gr=Ke[0]),Gr})),k){if(Z&&Z.validateValues&&dt.toJS().filter(function($t){return $t=="value"||$t==null}).length==q){var Ht=Fe&&Fe.toJS?br.toJS().map(function($t){return Fe.toJS.call(e.ctx,$t,Fe)}):br.toJS(),sn=Z.validateValues(Ht);k&&Be.push(sn)}Ot=new(ze()).List(Be)}return Zt=new(ze()).List(Array.from({length:q},function($t,st){var Gr=null;return ee?st<E.size&&(Gr=E.get(st)):q==1&&Fe&&Fe.type!==void 0?Gr=Fe.type:q==1&&J&&J.type!==void 0&&(Gr=J.type=="!group"?"number":J.type),Gr})),{canReuseValue:ee,newValue:br,newValueSrc:dt,newValueType:Zt,newValueError:Ot,operatorCardinality:q}},$s=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=e.settings.fieldSeparator,t=at(r,e),i=r?pn(e,r):e,u=i,o=null,s=[];do{var c,f=u===e?e.fields:(c=u)===null||c===void 0?void 0:c.subfields;if(!f||!Object.keys(f).length){u=o=null;break}o=Object.keys(f)[0],s.push(o),u=f[o]}while(u.type=="!struct"||u.type=="!group");return(t||[]).concat(s).join(n)},Ks=function(e,r){var n;return((n=e.types[r])===null||n===void 0?void 0:n.operators)||null},No=function(e,r){var n=$e(e,r),t=n?n.operators:[];return t},fu=function(e,r){var n,t=No(e,r);return(n=t?.[0])!==null&&n!==void 0?n:null},hp=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return Zi(e,r,n,"funcs","subfields")},Zi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"fields",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"subfields";if(!e)return null;var u=r.settings.fieldSeparator,o=at(e,r),s=at(n,r),c=o.slice(s.length).map(function(f,d,v){return v.slice(0,d+1)}).map(function(f){return[].concat((0,we.Z)(s),(0,we.Z)(f)).join(u)}).map(function(f){var d=pn(r,f,t,i);return d&&d.label||Fo()(f.split(u))}).filter(function(f){return f!=null});return c},Ys=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e)return null;var t=n&&pn(r,n)||null,i=r.settings.fieldSeparator,u=at(e,r),o=ml(e,n,r),s=o?at(n,r):[];return u.slice(s.length).map(function(c,f,d){return d.slice(0,f+1)}).map(function(c){return{part:[].concat((0,we.Z)(s),(0,we.Z)(c)).join(i),key:c[c.length-1]}}).map(function(c){var f=c.part,d=c.key,v=pn(r,f);return{key:d,cnf:v}}).map(function(c,f,d){var v=c.key,g=c.cnf,h=f>0?d[f-1].cnf:t;return[v,g,h]})},mp=function(e,r,n,t){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,o=r&&(0,gr.Z)(r)=="object"&&!!r.func&&!!r.arg,s=e.settings.showLabels,c=$e(e,r),f=Ut(e,r,n,null,i)||{},d=Ur(e,n,r)||{},v=u?1:d.cardinality,g=null;if(v>1){var h=f.valueLabels||d.valueLabels;h&&(g=h[t]),g&&(0,gr.Z)(g)!="object"&&(g={label:g,placeholder:g}),g||(g={label:e.settings.valueLabel+" "+(t+1),placeholder:e.settings.valuePlaceholder+" "+(t+1)})}else{var E=f.valueLabel,S=f.valuePlaceholder;o&&(E||(E=c.label||r.arg),!S&&!s&&(S=c.label||r.arg)),g={label:E||e.settings.valueLabel,placeholder:S||e.settings.valuePlaceholder}}return g};function du(a,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,t=[],i=[];if(!e)return{widgets:t,valueSrcs:i};var u=(0,gr.Z)(e)=="object"&&(!!e.func&&!!e.arg||e._isFuncArg),o=$e(a,e),s=r?a.operators[r]:null;if(o!=null&&o.widgets){var c=function(){var h=o.widgets[f];if(!a.widgets[f])return"continue";var E=a.widgets[f].valueSrc||"value",S=!0;if(f=="field"&&(S=S&&xa(a,["field"],o).length>0),f=="func"&&(S=S&&xa(a,["func"],o).length>0),n=="value"&&!h.operators&&!u&&e!="!case_value"&&(S=!1),h.operators&&r&&(S=S&&h.operators.indexOf(r)!=-1),n&&n!=E&&n!="const"&&(S=!1),s&&s.cardinality==0&&E!="value"&&(S=!1),S){var A,_;t.push(f);var D=((A=o.valueSources)===null||A===void 0?void 0:A.indexOf(E))!=-1;(s==null||(_=s.valueSources)===null||_===void 0?void 0:_.indexOf(E))==-1&&(D=!1),D&&!i.find(function(P){return P==E})&&i.push(E)}};for(var f in o.widgets)var d=c()}var v=function(h){var E=0;return o.preferWidgets?o.preferWidgets.includes(h)&&(E+=10-o.preferWidgets.indexOf(h)):h==o.mainWidget&&(E+=100),h=="field"&&(E-=1),h=="func"&&(E-=2),E};return t.sort(function(g,h){return v(h)-v(g)}),{widgets:t,valueSrcs:i}}var yp=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=du(e,r,n,t),u=i.widgets;return u},xa=function(e,r,n){var t;if(!n)return r;var i=(t=n.type)!==null&&t!==void 0?t:n.returnType;return r||(r=Object.keys(e.settings.valueSourcesInfo)),r.filter(function(u){var o=!0;if(u=="field"&&e.__fieldsCntByType){var s=n._isFuncArg?0:1;o=o&&e.__fieldsCntByType[i]>s}return u=="func"&&(e.__funcsCntByType&&(o=o&&!!e.__funcsCntByType[i]),n.funcs&&(o=o&&n.funcs.length>0)),o})},zs=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=du(e,r,n,null),u=i.valueSrcs,o=xa(e,u,t);return o},Qr=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=du(e,r,n,t),u=i.widgets,o=null;return u.length&&(o=u[0]),o},$n=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if(e){var u=$e(r,e)||{},o=r.settings.fieldSeparator,s=at(e,r),c=Array.isArray(e)?e.join(o):e;if(i!=null&&i.useTableName&&u.tableName){var f=(0,we.Z)(s);f[0]=u.tableName,c=f.join(o)}if(u.fieldName&&(c=u.fieldName),t){var d=$e(r,t)||{},v=t;c.indexOf(v+o)==0?c=c.slice((v+o).length):u.fieldName||n.errors.push("Can't cut group ".concat(v," from field ").concat(c))}return c}},pu=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t=e.get("type"),i=e.getIn(["properties","mode"]);return t=="rule_group"&&i=="array"?Ep(e,r,n):t=="group"||t=="rule_group"?Op(e,r,n):Sp(e,r,n)},Ep=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t=e.get("children1"),i=e.get("properties");return qs(i.toObject(),t,r,n)},qs=function(e,r,n){var t,i,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=e.operator,s=(t=(i=n.operators[o])===null||i===void 0?void 0:i.cardinality)!==null&&t!==void 0?t:1,c=[!gu(e,n,!1),s>0?!0:!vu(r,n,u)],f=c.filter(function(v){return!!v}).length,d=f==2;return!d},Op=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t=e.get("children1");return vu(t,r,n)},vu=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||e.size==0||e.size>0&&e.filter(function(t){return!pu(t,r,n)}).size==0},gu=function(e,r){var n,t,i=e.field,u=e.fieldSrc,o=e.fieldType,s=e.operator,c=e.value,f=e.valueSrc,d=e.valueType,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,g=(n=(t=r.operators[s])===null||t===void 0?void 0:t.cardinality)!==null&&n!==void 0?n:1,h=[v?i!==null||o!=null:Hi(i,u,r,v),!!s,c.filter(function(A,_){var D;return Hi(A,(f==null||(D=f.get)===null||D===void 0?void 0:D.call(f,_))||f?.[_],r,v)}).size>=g],E=h.filter(function(A){return!!A}).length,S=E==3;return!S},Sp=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t=e.get("properties");return gu(t.toObject(),r,n)},Hi=function a(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!t&&r=="func"&&e){var i=e.get("func"),u=Ft(n,i);if(u){var o=e.get("args");for(var s in u.args){var c=u.args[s],f=o?o.get(s):void 0,d=f?f.get("value"):void 0,v=f?f.get("valueSrc"):void 0;if(d==null&&c?.defaultValue===void 0&&!(c!=null&&c.isOptional)||d!=null&&!a(d,v,n,t))return!1}return!0}}return e!=null},Ua=function(e,r,n){return r=="func"?Ws(e,n):e},Tp=m(80189),an=m.n(Tp),Rp=m(17466),hu=m.n(Rp);function Xs(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Qs(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xs(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Xs(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Cp(a,e){return hu().apply(a,e)}function Ap(a,e){return hu().add_operation(a,e)}var Js={CALL:function(e,r){for(var n=arguments.length,t=new Array(n>2?n-2:0),i=2;i<n;i++)t[i-2]=arguments[i];return e.call.apply(e,[r].concat(t))},JSX:function(e,r){return{type:e,props:r}},mergeObjects:function(e,r){return Qs(Qs({},e),r)},fromEntries:function(e){return Object.fromEntries(e)},strlen:function(e){return e?.length||0},regexTest:function(e,r,n){return e?.match(new RegExp(r,n))!=null},now:function(){return new Date},date_add:function(e,r,n){return dn()(e).add(r,n).toDate()},toLowerCase:function(e){return e.toLowerCase()},toUpperCase:function(e){return e.toUpperCase()}};function Lp(){for(var a in Js)Ap(a,Js[a])}function Fp(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Ip(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function Ip(a,e){if(a){if(typeof a=="string")return el(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return el(a,e)}}function el(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}function rl(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function fa(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rl(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):rl(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}Lp();function tl(a,e,r){var n;try{n=hu().apply(a,e)}catch(t){throw t.message="".concat(r.join(".")," :: ").concat(t.message),t}return n}function nl(a,e,r,n){var t;try{t=e.call.apply(e,[a].concat((0,we.Z)(r)))}catch(i){throw i.message="".concat(n.join(".")," :: ").concat(i.message),i}return t}var bo=["conjunctions","fields","types","operators","widgets","settings","funcs","ctx"],al={asyncFetch:{type:"f",args:["search","offset"]},labelYes:{type:"r"},labelNo:{type:"r"},marks:{type:"r",isArr:!0},validateValue:{type:"f",args:["val","fieldSettings","op","opDef","rightFieldDef"]}},mu=fa(fa({},al),{},{factory:{type:"rf"},formatValue:{type:"f",args:["val","fieldDef","wgtDef","isForDisplay","op","opDef","rightFieldDef"]},sqlFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef","rightFieldDef"]},spelFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef","rightFieldDef"]},spelImportValue:{type:"f",args:["val","wgtDef","args"]},mongoFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef"]},elasticSearchFormatValue:{type:"f",args:["queryType","val","op","field","config"]},jsonLogic:{type:"f",args:["val","fieldDef","wgtDef","op","opDef"]},validateValue:{type:"f",args:["val","fieldSettings","op","opDef","rightFieldDef"]},toJS:{type:"f",args:["val"]}}),il={options:{factory:{type:"rf"}},formatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","isForDisplay","fieldDef"]},mongoFormatOp:{type:"f",args:["field","op","vals","useExpr","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},sqlFormatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},spelFormatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},jsonLogic:{type:"f",ignore:"string",args:["field","op","vals","opDef","operatorOptions","fieldDef"]},elasticSearchQueryType:{type:"f",ignore:"string",args:["valueType"]},textSeparators:{type:"r",isArr:!0}},Np={formatConj:{type:"f",args:["children","conj","not","isForDisplay"]},sqlFormatConj:{type:"f",args:["children","conj","not"]},spelFormatConj:{type:"f",args:["children","conj","not","omitBrackets"]}},ol={widgetProps:mu,opProps:il},bp={renderBrackets:{type:"r",isArr:!0},renderSeps:{type:"r",isArr:!0},jsonLogic:{type:"f",ignore:"string",args:["formattedArgs"]},jsonLogicImport:{type:"f",args:["val"]},spelImport:{type:"f",args:["spel"]},formatFunc:{type:"f",args:["formattedArgs","isForDisplay"]},sqlFormatFunc:{type:"f",args:["formattedArgs"]},mongoFormatFunc:{type:"f",args:["formattedArgs"]},spelFormatFunc:{type:"f",args:["formattedArgs"]}},wp={locale:{mui:{type:"f",args:[],invokeWith:[],ignore:"jl"}},canCompareFieldWithField:{type:"f",args:["leftField","leftFieldConfig","rightField","rightFieldConfig","op"]},formatReverse:{type:"f",args:["q","op","reversedOp","operatorDefinition","revOperatorDefinition","isForDisplay"]},sqlFormatReverse:{type:"f",args:["q"]},spelFormatReverse:{type:"f",args:["q"]},formatField:{type:"f",args:["field","parts","label2","fieldDefinition","config","isForDisplay"]},formatSpelField:{type:"f",args:["field","parentField","parts","partsExt","fieldDefinition","config"]},formatAggr:{type:"f",args:["whereStr","aggrField","operator","value","valueSrc","valueType","opDef","operatorOptions","isForDisplay","aggrFieldDef"]},normalizeListValues:{type:"f",args:["listValues","type","fieldSettings"]},renderConfirm:{type:"f",args:["props"]},useConfirm:{type:"f",args:[]},renderField:{type:"rf"},renderOperator:{type:"rf"},renderFunc:{type:"rf"},renderConjs:{type:"rf"},renderButton:{type:"rf"},renderButtonGroup:{type:"rf"},renderValueSources:{type:"rf"},renderFieldSources:{type:"rf"},renderProvider:{type:"rf"},renderSwitch:{type:"rf"},renderSwitchPrefix:{type:"r"},renderItem:{type:"rf"},renderBeforeWidget:{type:"rf"},renderAfterWidget:{type:"rf"},renderBeforeActions:{type:"rf"},renderAfterActions:{type:"rf"},renderRuleError:{type:"rf"}},Pp={fields:{x:{fieldSettings:al,widgets:{x:ol},mainWidgetProps:mu}},widgets:{x:mu},conjunctions:{x:Np},operators:{x:il},types:{x:{widgets:{x:ol}}},funcs:{x:bp},settings:wp},li=function(e){return(0,gr.Z)(e)=="object"&&e!==null&&!Array.isArray(e)},ul=function(e,r){if(e.__fieldNames)throw new Error("Don't apply `compressConfig()` to extended config");var n=xt()(e,bo);delete n.ctx;for(var t=function c(f,d,v,g){if(li(f)){if(_a(f)&&(f=Pa(f)),v[0]==="funcs"&&!d){var h=v[v.length-1];d=pn({funcs:g.BasicFuncs},h,"funcs","subfields")||void 0,d&&(f.$$key=h)}if(d!==void 0&&li(d))for(var E in d)Object.prototype.hasOwnProperty.call(d,E)&&(!Object.keys(f).includes(E)||f[E]===void 0&&d[E]!==void 0?f[E]="$$deleted":(f[E]=c(f[E],d[E],[].concat((0,we.Z)(v),[E]),g),f[E]===void 0&&delete f[E]));for(var S in f)if(Object.prototype.hasOwnProperty.call(f,S)){if(!d||!Object.keys(d).includes(S)){var A;f[S]=c(f[S],(A=d)===null||A===void 0?void 0:A[S],[].concat((0,we.Z)(v),[S]),g)}f[S]===void 0&&delete f[S]}Object.keys(f).length===0&&(f=void 0)}else Array.isArray(f)&&f.forEach(function(_,D){f[D]=c(f[D],void 0,[].concat((0,we.Z)(v),[D]),g)});if(!(d!==void 0&&mt(f,d,!0))){if(typeof f=="function")throw new Error("compressConfig: function at ".concat(v.join(".")," should be converted to JsonLogic"));return f}},i=0,u=bo;i<u.length;i++){var o=u[i];if(o!=="ctx")if(o==="fields")n[o]=an()(n[o]),t(n[o],{},[o]);else if(o==="funcs"){n[o]=an()(n[o]||{});for(var s in n[o])t(n[o][s],null,[o,s],{BasicFuncs:x})}else n[o]=an()(n[o]),t(n[o],r[o],[o])}return n},sl=function(e,r,n){if(!e.settings.useConfigCompress)throw new Error("Please enable `useConfigCompress` in config settings to use decompressConfig()");for(var t={},i=function f(d,v,g){if(li(v)){li(d)||(d={});for(var h in v)Object.prototype.hasOwnProperty.call(v,h)&&(v[h]==="$$deleted"?delete d[h]:d[h]=f(d[h],v[h],[].concat((0,we.Z)(g),[h])))}else Array.isArray(v)?d=an()(v):d=v;return d},u=function f(d,v,g){var h=!1;if(li(d)&&Object.prototype.hasOwnProperty.call(d,"$$key")&&d.$$key){var E=pn({funcs:g.BasicFuncs},d.$$key,"funcs","subfields");if(E)delete d.$$key,d=i(an()(E),d,v),h=!0;else throw new Error("decompressConfig: basic function not found by key ".concat(d.$$key," at ").concat(v.join(".")))}if(!h){if(li(d))for(var S in d)Object.prototype.hasOwnProperty.call(d,S)&&(d[S]=f(d[S],[].concat((0,we.Z)(v),[S]),g));else if(Array.isArray(d)){var A=Fp(d),_;try{for(A.s();!(_=A.n()).done;){var D=_.value;d[D]=f(d[D],[].concat((0,we.Z)(v),[D]),g)}}catch(P){A.e(P)}finally{A.f()}}}return d},o=0,s=bo;o<s.length;o++){var c=s[o];c==="ctx"?t[c]=oa()({},r.ctx||{},n||{}):c==="funcs"?(t[c]=an()(e[c]||{}),u(t[c],[c],{BasicFuncs:x})):c==="fields"?t[c]=an()(e[c]||{}):(t[c]=an()(r[c]||{}),i(t[c],e[c]||{},[c]))}return t},ll=function(e){if(e.__compliled)return e;e=an()(e);var r={ctx:e.ctx},n=[];return wo(e,e,r,Pp,n),Object.defineProperty(e,"__compliled",{enumerable:!1,writable:!1,value:!0}),e};function wo(a,e,r,n,t){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[];if(e){var u=!i.length;for(var o in n){var s=n[o],c=o==="x"?i:[].concat((0,we.Z)(i),[o]);if(s.type==="r"){var f=e,d=f[o];if(s.isArr)for(var v in d){var g=ci(d[v],r,[].concat((0,we.Z)(c),[v]));g!==d[v]&&(t.push("Compiled ".concat(c.join("."),"[").concat(v,"]")),d[v]=g)}else{var h=ci(d,r,c,void 0);h!==d&&(t.push("Compiled R ".concat(c.join("."))),f[o]=h)}}else if(s.type==="rf"){var E=e,S=E[o],A=_p(S,r,c,s.ignore);A!==S&&(t.push("Compiled JL-RF ".concat(c.join("."))),E[o]=A)}else if(s.type==="f"){var _=e,D=_[o],P=Dp(D,r,c,s.args,s.ignore);if(s.invokeWith&&P&&typeof P=="function"){var k;P=(k=P).call.apply(k,[null].concat((0,we.Z)(s.invokeWith)))}P!==D&&(t.push("Compiled JL-F ".concat(c.join("."))),_[o]=P)}else if(o==="x")for(var Z in e){c=[].concat((0,we.Z)(i),[Z]);var q=e[Z];wo(a,q,r,s,t,c),q.subfields&&wo(a,q.subfields,r,n,t,c)}else{var re=e[o];wo(a,re,r,s,t,c)}}}}function _p(a,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;return Et(a)?function(t,i){i=i||e?.ctx;var u={props:t,ctx:i},o=tl(a,u,r);typeof o=="string"&&(o={type:o,props:t});var s=ci(o,{ctx:i},r);return s}:typeof a=="string"?function(t,i){i=i||e?.ctx;var u=a.split(".").reduce(function(c,f){return c?.[f]},i);if(u)return nl(this,u,[t,i],r);var o={type:a,props:t},s=ci(o,{ctx:i},r);return s}:a}function Dp(a,e,r,n){var t=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;return Et(a)&&t!=="jl"?function(){for(var i=arguments.length,u=new Array(i),o=0;o<i;o++)u[o]=arguments[o];var s=this||e?.ctx,c=(n||[]).reduce(function(d,v,g){return fa(fa({},d),{},(0,Ae.Z)({},v,u[g]))},{args:u,ctx:s}),f=tl(a,c,r);return f}.bind(e?.ctx):typeof a=="string"&&t!=="string"?function(){var i=this||e?.ctx,u=a.split(".").reduce(function(f,d){return f?.[d]},i);if(u){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return nl(this,u,s,r)}else throw new Error("".concat(r.join(".")," :: Function ").concat(a," is not found in ctx"))}.bind(e?.ctx):a}function Vp(a,e){var r;return(e==null||(r=e.components)===null||r===void 0?void 0:r[a])||e.W[a]||e.O[a]}function ci(a,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;if(bt(a)){var t,i=a.type,u=a.props;if(typeof i!="string")throw new Error("renderReactElement for ".concat(r.join("."),": type should be string"));var o=Vp(i,e.ctx)||i.toLowerCase(),s;n!==void 0&&(u=fa(fa({},u),{},{key:n})),(t=u)!==null&&t!==void 0&&t.children&&(s=ci(u.children,e,r),u=fa(fa({},u),{},{children:s}));var c=e.ctx.RCE(o,u);return c}else if(a instanceof Array)return a.map(function(f,d){return ci(f,e,r,""+d)});return a}function cl(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function yu(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cl(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):cl(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var Mp=_r().mark(fi),jp=_r().mark(hl);function fl(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=kp(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function kp(a,e){if(a){if(typeof a=="string")return dl(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dl(a,e)}}function dl(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}var Kn=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e.__configId)return e;n&&e.settings.useConfigCompress?e.__compliled?e=an()(e):e=ll(e):e=an()(e),e.settings=Va()({},Jt,e.settings,Eu),e.__fieldsCntByType={},e.__funcsCntByType={},e.__fieldNames={},xp(e.types,e),pl(e.fields,e),vl(e.funcs,e);var t=e.settings.locale.moment;return t&&dn().locale(t),Object.defineProperty(e,"__configId",{enumerable:!1,writable:!1,value:r||Tr()}),ii(e),e};function xp(a,e){for(var r in a){var n=a[r];Up(r,n,e)}}function Up(a,e,r){var n=null,t=null;e.mainWidget=e.mainWidget||Object.keys(e.widgets).filter(function(d){return d!="field"&&d!="func"})[0];for(var i in e.widgets){var u=e.widgets[i];if(u.operators){var o=u.operators;e.excludeOperators&&(o=o.filter(function(d){return!e.excludeOperators.includes(d)})),n=Di(n,o)}u.defaultOperator&&(t=u.defaultOperator),i==e.mainWidget&&(u=oa()({},{widgetProps:e.mainWidgetProps||{}},u)),e.widgets[i]=u}e.valueSources||(e.valueSources=Object.keys(r.settings.valueSourcesInfo));var s=fl(e.valueSources),c;try{for(s.s();!(c=s.n()).done;){var f=c.value;f!="value"&&!e.widgets[f]&&(e.widgets[f]={})}}catch(d){s.e(d)}finally{s.f()}!e.operators&&n&&(e.operators=Array.from(new Set(n))),!e.defaultOperator&&t&&(e.defaultOperator=t)}function pl(a,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];for(var n in a)gl(a[n],e,[].concat((0,we.Z)(r),[n])),a[n].subfields&&pl(a[n].subfields,e,[].concat((0,we.Z)(r),[n]))}function vl(a,e){var r,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(a){var t=(e==null||(r=e.settings)===null||r===void 0?void 0:r.fieldSeparator)||".";for(var i in a){var u=[].concat((0,we.Z)(n),[i]).join(t),o=a[i];o.returnType&&(e.__funcsCntByType[o.returnType]||(e.__funcsCntByType[o.returnType]=0),e.__funcsCntByType[o.returnType]++);for(var s in o.args)gl(o.args[s],e,null,!0);if(o.args){var c=Object.keys(o.args),f=!0,d=fl(c.reverse()),v;try{for(d.s();!(v=d.n()).done;){var g=v.value,h=o.args[g];!f&&h.isOptional&&(tn.info("Arg ".concat(g," for func ").concat(u," can't be optional")),delete h.isOptional),h.isOptional||(f=!1)}}catch(E){d.e(E)}finally{d.f()}}o.subfields&&vl(o.subfields,e,[].concat((0,we.Z)(n),[i]))}}}function gl(a,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,t=null,i=null,u=e.types[a.type],o=a.excludeOperators||[];if(a.type!="!struct"&&a.type!="!group"){var s=["listValues","treeValues","allowCustomValues","validateValue"];a.fieldSettings||(a.fieldSettings={});for(var c=0,f=s;c<f.length;c++){var d=f[c];a[d]&&(a.fieldSettings[d]=a[d],delete a[d])}if(a.fieldSettings.listValues&&e.settings.normalizeListValues&&(a.fieldSettings.listValues=e.settings.normalizeListValues.call(e.ctx,a.fieldSettings.listValues,a.type,a.fieldSettings)),a.fieldSettings.treeValues&&e.settings.normalizeListValues&&(a.fieldSettings.treeValues=e.settings.normalizeListValues.call(e.ctx,a.fieldSettings.treeValues,a.type,a.fieldSettings)),!u){a.disabled=!0;return}n||(e.__fieldsCntByType[a.type]||(e.__fieldsCntByType[a.type]=0),e.__fieldsCntByType[a.type]++),a.widgets||(a.widgets={}),n&&(a._isFuncArg=!0),a.mainWidget=a.mainWidget||u.mainWidget,a.valueSources=a.valueSources||u.valueSources;var v=u.excludeOperators||[],g=function(){var D=a.widgets[h]||{},P=u.widgets[h]||{};if(!n){var k=[].concat((0,we.Z)(o),(0,we.Z)(v)),Z=a.preferWidgets&&(h=="field"||a.preferWidgets.includes(h))||k.length>0;if(D.operators){var q=D.operators.filter(function(J){return!k.includes(J)});t=[].concat((0,we.Z)(t||[]),(0,we.Z)(q))}else if(Z&&P.operators){var re=P.operators.filter(function(J){return!k.includes(J)});t=[].concat((0,we.Z)(t||[]),(0,we.Z)(re))}D.defaultOperator&&(i=D.defaultOperator)}h==a.mainWidget&&(D=oa()({},{widgetProps:a.mainWidgetProps||{}},D)),a.widgets[h]=D};for(var h in u.widgets)g();n||(!a.operators&&t&&(a.operators=Array.from(new Set(t))),a._origDefaultOperator=a.defaultOperator,!a.defaultOperator&&i&&(a.defaultOperator=i))}var E=Gp(e,r),S=E.fieldName,A=E.inGroup;S&&(a.fieldName=S,e.__fieldNames[S]||(e.__fieldNames[S]=[]),e.__fieldNames[S].push({fullPath:r,inGroup:A}))}var Eu=function(e,r,n,t,i,u){if(Array.isArray(e))return r};function fi(a){return _r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(Ou(a,a.funcs||{},[]),"t0",1);case 1:case"end":return r.stop()}},Mp)}function hl(a){return _r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(Ou(a,a.fields||{},[]),"t0",1);case 1:case"end":return r.stop()}},jp)}function Ou(a,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"subfields";return _r().mark(function t(i){var u,o,s;return _r().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:u=(a==null||(i=a.settings)===null||i===void 0?void 0:i.fieldSeparator)||".",f.t0=_r().keys(e);case 2:if((f.t1=f.t0()).done){f.next=13;break}if(o=f.t1.value,s=e[o],!s[n]){f.next=9;break}return f.delegateYield(Ou(a,s[n],[].concat((0,we.Z)(r),[o]),n),"t2",7);case 7:f.next=11;break;case 9:return f.next=11,[[].concat((0,we.Z)(r),[o]).join(u),s];case 11:f.next=2;break;case 13:case"end":return f.stop()}},t)})()}var pn=function(e,r){var n,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"fields",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"subfields";if(!r)return null;if(r=="!case_value")return{type:"case_value",mainWidget:"case_value",widgets:{case_value:e.widgets.case_value}};var u=(e==null||(n=e.settings)===null||n===void 0?void 0:n.fieldSeparator)||".",o=at(r,e),s=e[t];if(!s)return null;for(var c=s,f=null,d=[],v=0;v<o.length;v++){var g=o[v];d.push(g);var h=d.join(u);f=c[h],v<o.length-1&&(f&&f[i]?(c=f[i],d=[]):f=null)}return f},Gp=function(e,r){if(!r)return{};var n=e.settings.fieldSeparator,t=(0,we.Z)(r).reduce(function(s,c,f,d){var v=s.computedPath,g=s.computed,h=s.inGroup,E=[].concat((0,we.Z)(d.slice(0,f)),[c]),S=pn(e,E);return S?.type==="!group"&&f<d.length-1?(h=E.join(n),v=[]):S!=null&&S.fieldName?(g=!0,v=[S.fieldName]):v=[].concat((0,we.Z)(v),[c]),{computedPath:v,computed:g,inGroup:h}},{computedPath:[],computed:!1,inGroup:void 0}),i=t.computedPath,u=t.computed,o=t.inGroup;return u?{fieldName:i.join(n),inGroup:o}:{}},Po=function(e,r){var n,t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=e.settings.fieldSeparator,o=[i].concat((0,we.Z)(r.split(u))).filter(function(f){return f!=null}),s=r,c=(n=e.__fieldNames[s])===null||n===void 0||(t=n.find)===null||t===void 0||(t=t.call(n,function(f){var d=f.inGroup;return d?i?.startsWith(d):!0}))===null||t===void 0?void 0:t.fullPath;return(c||o).join(u)},Su=function(e,r){if(!r)return null;var n=pn(e,r,"funcs","subfields");if(!n)return null;var t=n.returnType,i=n.args,u=Object.fromEntries(Object.entries(i||{}).map(function(s){var c=(0,qe.Z)(s,2),f=c[0],d=c[1],v=xt()(d,["type","valueSources","defaultValue","fieldSettings","isOptional"]);return[f,v]})),o={returnType:t,args:u};return o},Ft=function(e,r){if(!r)return null;var n=pn(e,r,"funcs","subfields");if(!n)return null;var t=e.types[n.returnType]||{};return yu(yu(yu({},t),n),{},{type:n.returnType||n.type})},Tu=function(e,r,n){var t=Ft(e,r);if(!t)return null;var i=t.args&&t.args[n]||null;if(!i)return null;var u=e.types[i.type]||{},o=Va()({},u,i||{},Eu);return o},ml=function(e,r){var n,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!r)return!1;var i=(t==null||(n=t.settings)===null||n===void 0?void 0:n.fieldSeparator)||".",u=Ru(e,t),o=Ru(r,t);return u.startsWith(o+i)},Ru=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string")return e;var t=(n==null||(r=n.settings)===null||r===void 0?void 0:r.fieldSeparator)||".";return at(e,n).join(t)},at=function(e){var r,n,t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!e)return[];if(Array.isArray(e))return e;var u=(i==null||(r=i.settings)===null||r===void 0?void 0:r.fieldSeparator)||".";if(e!=null&&e.func)return Array.isArray(e.func)?e.func:e.func.split(u);if(e!=null&&(n=e.get)!==null&&n!==void 0&&n.call(e,"func")){var o;return e==null||(o=e.get)===null||o===void 0?void 0:o.call(e,"func").split(u)}return(e==null||(t=e.split)===null||t===void 0?void 0:t.call(e,u))||[]},Bp=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!e)return null;var t=r.settings.fieldSeparator,i=at(e,r);return n?i:i.map(function(u,o,s){return s.slice(0,o+1)}).map(function(u){return u.join(t)})},yl=function(e){var r;if(!e)return null;if((0,gr.Z)(e)=="object"){if(!e.func&&e.type)return"field";if(e.func)return e.func&&e.arg?null:"func"}return e!=null&&(r=e.get)!==null&&r!==void 0&&r.call(e,"func")?e!=null&&e.get("arg")?null:"func":"field"},$e=function(e,r){var n;if(!r)return null;if((0,gr.Z)(r)=="object"){if(!r.func&&r.type)return r;if(r.func)return r.func&&r.arg?Tu(e,r.func,r.arg):Ft(e,r.func)}if(r!=null&&(n=r.get)!==null&&n!==void 0&&n.call(r,"func"))return r!=null&&r.get("arg")?Tu(e,r.get("func"),r.get("arg")):Ft(e,r.get("func"));var t=pn(e,r);if(!t)return null;var i=e.types[t.type]||{},u=Va()({},i,t||{},Eu);return u},Ur=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!r)return null;var t=e.operators[r];if(n){var i=$e(e,n),u=Qr(e,n,r,null),o=e.widgets[u]||{},s=(i&&i.widgets?i.widgets[u]:{})||{},c=(o.opProps||{})[r],f=(s.opProps||{})[r],d=oa()({},t,c,f);return d}else return t},Ut=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!r||!(n||t)&&i!="const"&&r!="!case_value")return null;var u=$e(e,r);t||(t=Qr(e,r,n,i));var o=e.widgets[t]||{},s=(u&&u.widgets?u.widgets[t]:{})||{},c=s.widgetProps||{},f=(i=="value"||!i)&&u&&u.fieldSettings||{},d=oa()({},o,c,f);return d},Wp=Lt;function El(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Ol(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?El(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):El(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var Zp=function(e,r){var n={usedFields:[]},t=Sl(e,r,n);if(t)return Ol(Ol({},t),n)},Sl=function(e,r,n){if(e){var t=e.get("type"),i=e.get("children1");if((t==="group"||t==="rule_group")&&i&&i.size)return Hp(e,r,n);if(t==="rule")return $p(e,r,n)}},Hp=function(e,r,n){var t=e.get("properties")||new Nr.Map,i=e.get("children1"),u=e.get("id"),o=i.map(function(d){return Sl(d,r,n)}).filter(function(d){return typeof d<"u"});if(o.size){var s=t.get("conjunction");s||(s=bn(r));var c=t.get("not"),f={id:u,rules:o.toList(),condition:s.toUpperCase(),not:c};return f}},$p=function(e,r,n){var t,i=e.get("properties")||new Nr.Map,u=e.get("id"),o=i.get("operator"),s=i.get("operatorOptions"),c=i.get("field"),f=i.get("value"),d=i.get("valueSrc"),v=i.get("valueType"),g=f.filter(function(X){return X===void 0}).size>0;if(!(c==null||o==null||g)){var h=$e(r,c)||{},E=Ur(r,o,c)||{},S=h.type||"undefined",A=nt(E.cardinality,1),_=r.types[h.type]||{},D=$n(c,r,n);if(!(f.size<A)){n.usedFields.indexOf(c)==-1&&n.usedFields.push(c),f=f.toArray(),d=d.toArray(),v=((t=v)===null||t===void 0?void 0:t.toArray())||[];for(var P=[],k=0;k<f.length;k++){var Z={type:v[k],value:f[k]};if(P.push(Z),d[k]=="field"){var q=f[k];n.usedFields.indexOf(q)==-1&&n.usedFields.push(q)}}var re=s?s.toJS():null;re&&!Object.keys(re).length&&(re=null);var J={id:u,fieldName:D,type:S,input:_.mainWidget,operator:o};return re&&(J.operatorOptions=re),J.values=P,J}}};function Tl(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Rl(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tl(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Tl(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Cl(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Kp(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function Kp(a,e){if(a){if(typeof a=="string")return Al(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Al(a,e)}}function Al(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}var Yp=function(e,r){var n={usedFields:[],errors:[]},t=Kn(r,void 0,!1),i=Ll(e,t,n,!0),u=n.errors,o=n.usedFields,s=t.settings.fieldSeparator,c={},f=Cl(o),d;try{for(f.s();!(d=f.n()).done;)for(var v=d.value,g=at(v,r),h=$e(t,v)||{},E=c,S=0;S<g.length;S++){var A=g[S],_=$e(t,g.slice(0,S+1))||{};S!=g.length-1?_.type=="!group"&&_.mode!="struct"?(E[A]||(E[A]=[{}]),E=E[A][0]):(E[A]||(E[A]={}),E=E[A]):E[A]||(E[A]=null)}}catch(D){f.e(D)}finally{f.f()}return{errors:u,logic:i,data:c}},Ll=function(e,r,n,t){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(e){var u=e.get("type"),o=e.get("properties")||new Nr.Map,s=o.get("isLocked"),c=r.settings.jsonLogic.lockedOp,f;return u==="group"||u==="rule_group"?f=zp(e,r,n,t,i):u==="rule"&&(f=qp(e,r,n,i)),s&&f&&c&&(f=(0,Ae.Z)({},c,f)),f}},zp=function(e,r,n,t){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=e.get("type"),o=e.get("properties")||new Nr.Map,s=o.get("mode"),c=e.get("children1")||new Nr.List,f=o.get("field"),d=o.get("conjunction");d||(d=bn(r));var v=r.conjunctions[d],g=v.jsonLogicConj||d.toLowerCase(),h=o.get("not"),E=u==="rule_group"&&!t,S=E&&s!="struct"?f:i,A=o.get("operator"),_=A&&Ur(r,A,f)||null,D=Fl(r,o,n,A,i),P=E&&(!A||_.cardinality==0),k=c.map(function(ae){return Ll(ae,r,n,!1,S)}).filter(function(ae){return typeof ae<"u"});if(E&&s!="struct"&&!P){if(D==null)return}else if(!k.size)return;var Z={};if(k.size==1&&!t?Z=k.first():Z[g]=k.toList().toJS(),h&&(Z={"!":Z}),E&&s!="struct"){var q=Au(n,r,f,i);if(P){var re=A||"some";Z=(0,Ae.Z)({},re,[q,Z])}else{var J=k.size?{filter:[q,Z]}:q,X={reduce:[J,{"+":[1,{var:"accumulator"}]},0]};Z=Nl(r,o,X,D,A)}}return Z},qp=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=e.get("properties")||new Nr.Map,u=i.get("field"),o=i.get("fieldSrc"),s=i.get("operator"),c=i.get("operatorOptions");if(c=c?c.toJS():null,c&&!Object.keys(c).length&&(c=null),!(u==null||s==null)){var f=$e(r,u)||{},d=Ur(r,s,u)||{},v=d.reversedOp,g=Ur(r,v,u)||{},h=!1;if(!d.jsonLogic&&!g.jsonLogic){n.errors.push("Operator ".concat(s," is not supported"));return}if(!d.jsonLogic&&g.jsonLogic){h=!0;var E=[v,s];s=E[0],v=E[1];var S=[g,d];d=S[0],g=S[1]}var A=Fl(r,i,n,s,t);if(A!==void 0){var _=o==="func"?Il(n,r,u,t):Au(n,r,u,t);if(_!==void 0)return Nl(r,i,_,A,s,c,f,h)}}},Fl=function(e,r,n,t,i){var u=r.get("field"),o=r.get("valueSrc"),s=r.get("valueType"),c=$e(e,u)||{},f=Ur(e,t,u)||{},d=nt(f.cardinality,1),v=r.get("value"),g=r.get("asyncListValues");if(v!=null){var h=[],E=[],S=n.usedFields,A=v.map(function(D,P){var k=o?o.get(P):null,Z=s?s.get(P):null,q=Ua(D,k,e),re=Qr(e,u,t,k),J=Xe()(Ut(e,u,t,re,k),["factory"]),X=Cu(n,e,q,k,Z,J,c,t,f,i,g);return X!==void 0&&(h.push(k),E.push(Z)),X}),_=A.filter(function(D){return D===void 0}).size>0;if(A.size<d||_){n.usedFields=S;return}return d>1?A.toArray():d==1?A.first():null}},Cu=function(e,r,n,t,i,u,o,s,c){var f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,d=arguments.length>10?arguments[10]:void 0;if(n!==void 0){var v;if(t=="field")v=Au(e,r,n,f);else if(t=="func")v=Il(e,r,n,f);else if(typeof u.jsonLogic=="function"){var g=u.jsonLogic,h=[n,Rl(Rl({},xt()(o,["fieldSettings","listValues"])),{},{asyncListValues:d}),Xe()(u,Lt)];s&&(h.push(s),h.push(c)),v=g.call.apply(g,[r.ctx].concat(h))}else v=n;return v}},Il=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=n.get("func"),u=n.get("args"),o=Ft(r,i),s=at(i,r),c=s[s.length-1];if(!o){e.errors.push("Func ".concat(i," is not defined in config"));return}if(!(o!=null&&o.jsonLogic)){e.errors.push("Func ".concat(i," is not supported"));return}var f={},d=[],v=[];for(var g in o.args){var h=o.args[g],E=$e(r,h),S=h.defaultValue,A=h.isOptional,_=S!=null&&S.func?"func":"value",D=u?u.get(g):void 0,P=D?D.get("value"):void 0,k=D?D.get("valueSrc"):void 0,Z=null,q=Qr(r,h,Z,k),re=Xe()(Ut(r,h,Z,q,k),["factory"]),J=Cu(e,r,P,k,h.type,re,E,null,null,t);if(P!=null&&J===void 0){k!="func"&&e.errors.push("Can't format value of arg ".concat(g," for func ").concat(i));return}var X=void 0;if(J===void 0&&!A&&S!=null){var ae=Qr(r,h,Z,_),le=Xe()(Ut(r,h,Z,ae,_),["factory"]);if(X=Cu(e,r,S,_,h.type,le,E,null,null,t),X===void 0){_!="func"&&e.errors.push("Can't format default value of arg ".concat(g," for func ").concat(i));return}}var ee=J??X;if(ee!==void 0){if(d.length){var ie=Cl(d),se;try{for(ie.s();!(se=ie.n()).done;){var de=se.value;f[de]=void 0}}catch(Qe){ie.e(Qe)}finally{ie.f()}d=[]}f[g]=ee}else A||v.push(g),d.push(g)}if(!v.length){var pe=Object.values(f),me;if(typeof o.jsonLogic=="function"){var Se=o.jsonLogic,Ne=[f];me=Se.call.apply(Se,[r.ctx].concat(Ne))}else{var je=o.jsonLogic||c,Me=!!o.jsonLogicIsMethod;if(Me){var Fe=pe[0],Ke=pe.slice(1);Ke.length?me={method:[Fe,je,Ke]}:me={method:[Fe,je]}}else me=(0,Ae.Z)({},je,pe)}return me}},Au=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=r.settings,u=i.fieldSeparator,o=i.jsonLogic,s;if(n){Array.isArray(n)&&(n=n.join(u));var c=$e(r,n)||{},f=$n(n,r,e,t),d=c.jsonLogicVar||(c.type=="!group"?o.groupVarKey:"var");s=(0,Ae.Z)({},d,f),e.usedFields.indexOf(n)==-1&&e.usedFields.push(n)}return s},Xp=function(e,r,n,t){var i=e,u=nt(r.cardinality,1),o=nt(r._jsonLogicIsRevArgs,!1);typeof r.jsonLogic=="string"&&(i=r.jsonLogic);var s=["<","<=",">",">="],c=["==","!="],f=function(v,g,h,E,S){return u==0&&c.includes(i)?(0,Ae.Z)({},i,[n,null]):u==0?(0,Ae.Z)({},i,n):u==1&&o?(0,Ae.Z)({},i,[t,n]):u==1?(0,Ae.Z)({},i,[n,t]):u==2&&s.includes(i)?(0,Ae.Z)({},i,[t[0],n,t[1]]):(0,Ae.Z)({},i,[n].concat((0,we.Z)(t)))};return f},Nl=function(e,r,n,t,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,c=r.get("field"),f=Ur(e,i,c)||{},d=typeof f.jsonLogic=="function"?f.jsonLogic:Xp(i,f,n,t),v=[n,i,t,Xe()(f,Fn),u,o],g=d.call.apply(d,[e.ctx].concat(v));return s&&(g={"!":g}),g};function Qp(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Jp(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function Jp(a,e){if(a){if(typeof a=="string")return bl(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bl(a,e)}}function bl(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}function wl(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Pl(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wl(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):wl(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var _l=function(e){return(0,gr.Z)(e)=="object"&&e!==null&&!Array.isArray(e)},ev=function(e,r){return Dl(e,r,!1)},Dl=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t={errors:[]},i=Kn(r,void 0,!1),u=Lu([],e,i,t);return n?[u,t.errors]:(t.errors.length&&console.warn("Errors while exporting to MongoDb:",t.errors),u)},Lu=function(e,r,n,t){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0;if(r){var c=r.get("type");if(c==="group"||c==="rule_group")return rv(e,r,n,t,i,u,o,s);if(c==="rule")return tv(e,r,n,t,i,u,o,s)}},rv=function(e,r,n,t){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,c=r.get("type"),f=r.get("properties")||new Nr.Map,d=r.get("children1")||new Nr.List,v=n.settings,g=v.canShortMongoQuery,h=v.fieldSeparator,E=h,S=e.filter(function(Se){return Se.get("type")=="rule_group"}).length>0,A=e.filter(function(Se){return Se.get("type")=="rule_group"}).map(function(Se){return Se.get("properties").get("field")}).slice(-1).pop(),_=S&&A,D=c==="rule_group"?f.get("field"):null,P=$n(D,n,t,_),k=$e(n,D)||{},Z=k.mode,q=D&&Z=="array",re=i?!f.get("not"):f.get("not"),J=d.map(function(Se){return Lu([].concat((0,we.Z)(e),[r]),Se,n,t,re,Z!="array",Z=="array"?function(Ne){return"$$el".concat(E).concat(Ne)}:void 0)}).filter(function(Se){return typeof Se<"u"});if(!(!q&&!J.size)){var X=f.get("conjunction");X||(X=bn(n));var ae=n.conjunctions[X],le=ae.reversedConj;re&&le&&(X=le,ae=n.conjunctions[X]);var ee=ae.mongoConj,ie;if(J.size==1)ie=J.first();else if(J.size>1){var se=J.toList().toJS(),de=g&&ee=="$and";de&&(ie=se.reduce(function(Se,Ne){if(Se){for(var je in Ne){if(je[0]=="$"){Se=void 0;break}if(Se[je]==null)Se[je]=Ne[je];else{var Me=Se[je],Fe=Ne[je];_l(Me)||(Me={$eq:Me}),_l(Fe)||(Fe={$eq:Fe});var Ke=Object.keys(Me)[0],Qe=Object.keys(Fe)[0];if(Ke==Qe){Se=void 0;break}Se[je]=Object.assign({},Me,Fe)}}return Se}},{})),ie||(ie=(0,Ae.Z)({},ee,se))}if(D)if(Z=="array"){var pe={$size:{$ifNull:["$"+P,[]]}},me=ie?{$size:{$ifNull:[{$filter:{input:"$"+P,as:"el",cond:ie}},[]]}}:pe;ie=Lu(e,r.set("type","rule"),n,t,!1,!1,function(Se){return me},pe),ie={$expr:ie}}else ie=(0,Ae.Z)({},P,{$elemMatch:ie});return ie}},tv=function(e,r,n,t){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,c=r.get("properties")||new Nr.Map,f=e.filter(function(Be){return Be.get("type")=="rule_group"}).length>0,d=e.filter(function(Be){return Be.get("type")=="rule_group"}).map(function(Be){return Be.get("properties").get("field")}).slice(-1).pop(),v=f&&d,g=c.get("operator"),h=c.get("operatorOptions"),E=c.get("field"),S=c.get("fieldSrc"),A=c.get("value"),_=c.get("valueSrc"),D=c.get("valueType"),P=c.get("asyncListValues");if(!(E==null||g==null||A===void 0)){var k=$e(n,E)||{},Z=Ur(n,g,E)||{},q=Z.reversedOp,re=Ur(n,q,E)||{},J=nt(Z.cardinality,1),X=i;if(X&&q){var ae=[q,g];g=ae[0],q=ae[1];var le=[re,Z];Z=le[0],re=le[1],X=!1}var ee,ie=!1;if(S=="func"){var se=Vl(t,n,E,v),de=(0,qe.Z)(se,2);ee=de[0],ie=de[1]}else ee=$n(E,n,t,v),o&&(ie=!0,ee=o(ee));if(ee!=null){var pe=[],me=[],Se=A.map(function(Be,tr){var Ye=_?_.get(tr):null,Or=D?D.get(tr):null,br=Ua(Be,Ye,n),dt=Qr(n,E,g,Ye),Zt=Xe()(Ut(n,E,g,dt,Ye),["factory"]),Ot=Fu(t,n,br,Ye,Or,Zt,k,v,g,Z,P),Ht=(0,qe.Z)(Ot,2),sn=Ht[0],$t=Ht[1];return sn!==void 0&&(ie=ie||$t,pe.push(Ye),me.push(Or)),sn}),Ne=ie&&u,je=Se.filter(function(Be){return Be===void 0}).size>0;if(!(Se.size<J||je)){var Me=J>1?Se.toArray():J==1?Se.first():null,Fe=Z.mongoFormatOp;if(!Fe){t.errors.push("Operator ".concat(g," is not supported"));return}var Ke=[ee,g,s!==void 0&&Me==null?s:Me,ie,pe.length>1?pe:pe[0],me.length>1?me:me[0],Xe()(Z,Fn),h,k],Qe=Fe.call.apply(Fe,[n.ctx].concat(Ke));return Ne&&(Qe={$expr:Qe}),X&&(Qe={$not:Qe}),Qe}}}},Fu=function(e,r,n,t,i,u,o,s,c,f,d){if(n===void 0)return[void 0,!1];var v,g=!1;if(t=="field"){var h=nv(e,r,n,s),E=(0,qe.Z)(h,2);v=E[0],g=E[1]}else if(t=="func"){var S=Vl(e,r,n,s),A=(0,qe.Z)(S,2);v=A[0],g=A[1]}else if(typeof u.mongoFormatValue=="function"){var _=u.mongoFormatValue,D=[n,Pl(Pl({},xt()(o,["fieldSettings","listValues"])),{},{asyncListValues:d}),Xe()(u,Lt)];c&&(D.push(c),D.push(f)),v=_.call.apply(_,[r.ctx].concat(D))}else v=n;return[v,g]},nv=function(e,r,n,t){var i=r.settings.fieldSeparator,u,o=!0;if(n){var s=$e(r,n)||{},c=at(n,r),f=Zi(n,r),d=f?f.join(i):null,v=r.settings.formatField,g=$n(n,r,e,t),h=v(g,c,d,s,r,!1);u="$"+h}return[u,o]},Vl=function(e,r,n,t){var i=!0,u,o=n.get("func"),s=n.get("args"),c=Ft(r,o);if(!c)return e.errors.push("Func ".concat(o," is not defined in config")),[void 0,!1];var f=at(o,r),d=f[f.length-1],v=c.mongoFunc||d,g=c.mongoArgsAsObject,h={},E=0,S=void 0,A=[],_=[];for(var D in c.args){E++;var P=c.args[D],k=$e(r,P),Z=P.defaultValue,q=P.isOptional,re=Z!=null&&Z.func?"func":"value",J=s?s.get(D):void 0,X=J?J.get("value"):void 0,ae=J?J.get("valueSrc"):void 0,le=J?J.get("asyncListValues"):void 0,ee=null,ie=Qr(r,P,ee,ae),se=Xe()(Ut(r,P,ee,ie,ae),["factory"]),de=Fu(e,r,X,ae,P.type,se,k,t,null,null,le),pe=(0,qe.Z)(de,2),me=pe[0],Se=pe[1];if(X!=null&&me===void 0)return ae!="func"&&e.errors.push("Can't format value of arg ".concat(D," for func ").concat(o)),[void 0,!1];var Ne=void 0;if(me===void 0&&!q&&Z!=null){var je=Qr(r,P,ee,re),Me=Xe()(Ut(r,P,ee,je,re),["factory"]),Fe=void 0,Ke=Fu(e,r,Z,re,P.type,Me,k,t,null,null,le),Qe=(0,qe.Z)(Ke,2);if(Ne=Qe[0],Fe=Qe[1],Ne===void 0)return re!="func"&&e.errors.push("Can't format default value of arg ".concat(D," for func ").concat(o)),[void 0,!1]}var Be=me??Ne;if(Be!==void 0){if(A.length){var tr=Qp(A),Ye;try{for(tr.s();!(Ye=tr.n()).done;){var Or=Ye.value;h[Or]=void 0}}catch(Zt){tr.e(Zt)}finally{tr.f()}A=[]}h[D]=Be,S=Be}else q||_.push(D),A.push(D)}if(_.length)return[void 0,!1];if(typeof c.mongoFormatFunc=="function"){var br=c.mongoFormatFunc,dt=[h];u=br.call.apply(br,[r.ctx].concat(dt))}else{if(c.mongoFormatFunc===null)return e.errors.push("Functon ".concat(v," is not supported")),[void 0,!1];g?u=(0,Ae.Z)({},v,h):E==1&&S!==void 0?u=(0,Ae.Z)({},v,S):u=(0,Ae.Z)({},v,Object.values(h))}return[u,i]};function av(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=iv(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function iv(a,e){if(a){if(typeof a=="string")return Ml(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ml(a,e)}}function Ml(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}function jl(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function kl(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jl(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):jl(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var ov=function(e,r){return xl(e,r,!1)},xl=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t={errors:[]},i=Kn(r,void 0,!1),u=Ul(e,i,t);return n?[u,t.errors]:(t.errors.length&&console.warn("Errors while exporting to SQL:",t.errors),u)},Ul=function(e,r,n){if(e){var t=e.get("type"),i=e.get("children1");if(t==="group"||t==="rule_group")return uv(e,r,n);if(t==="rule")return lv(e,r,n)}},uv=function(e,r,n){var t=e.get("type"),i=e.get("properties")||new Nr.Map,u=e.get("children1")||new Nr.List,o=t==="rule_group",s=o?i.get("field"):null,c=$e(r,s)||{},f=c.mode;f=="array"&&n.errors.push("Aggregation is not supported for ".concat(s));var d=i.get("not"),v=!1,g=u.map(function(S){return Ul(S,r,n)}).filter(function(S){return typeof S<"u"});if(!(!v&&!g.size)){var h=i.get("conjunction");h||(h=bn(r));var E=r.conjunctions[h];return E.sqlFormatConj(g,h,d)}},sv=function(e,r){var n=r.sqlOp||e,t=nt(r.cardinality,1),i;return t==0?i=function(o,s,c,f,d,v,g,h){return"".concat(o," ").concat(n)}:t==1?i=function(o,s,c,f,d,v,g,h){return"".concat(o," ").concat(n," ").concat(c)}:t==2&&(i=function(o,s,c,f,d,v,g,h){var E=c.first(),S=c.get(1);return"".concat(o," ").concat(n," ").concat(E," AND ").concat(S)}),i},lv=function(e,r,n){var t=e.get("properties")||new Nr.Map,i=t.get("field"),u=t.get("fieldSrc"),o=t.get("operator"),s=t.get("operatorOptions"),c=t.get("valueSrc"),f=t.get("valueType"),d=t.get("value"),v=t.get("asyncListValues");if(!(i==null||o==null)){var g=$e(r,i)||{},h=Ur(r,o,i)||{},E=h.reversedOp,S=Ur(r,E,i)||{},A=nt(h.cardinality,1),_=!1,D=h.sqlOp||h.sqlFormatOp,P=S.sqlOp||S.sqlFormatOp;if(!D&&!P){n.errors.push("Operator ".concat(o," is not supported"));return}if(!D&&P){_=!0;var k=[E,o];o=k[0],E=k[1];var Z=[S,h];h=Z[0],S=Z[1]}var q=[],re=[],J=d.map(function(de,pe){var me=c?c.get(pe):null,Se=f?f.get(pe):null,Ne=Ua(de,me,r),je=Qr(r,i,o,me),Me=Xe()(Ut(r,i,o,je,me),["factory"]),Fe=Iu(n,r,Ne,me,Se,Me,g,o,h,v);return Fe!==void 0&&(q.push(me),re.push(Se)),Fe}),X=J.filter(function(de){return de===void 0}).size>0;if(!(X||J.size<A)){var ae=A==1?J.first():J,le=h.sqlFormatOp||sv(o,h);if(!le){n.errors.push("Operator ".concat(o," is not supported"));return}var ee=u=="func"?Bl(n,r,i):Gl(n,r,i);if(ee!=null){var ie=[ee,o,ae,q.length>1?q:q[0],re.length>1?re:re[0],Xe()(h,Fn),s,g],se;if(se=le.call.apply(le,[r.ctx].concat(ie)),_&&(se=r.settings.sqlFormatReverse(se)),se===void 0){n.errors.push("Operator ".concat(o," is not supported for value source ").concat(q.join(", ")));return}return se}}}},Iu=function(e,r,n,t,i,u,o,s,c,f){if(n!==void 0){var d;if(t=="field")d=Gl(e,r,n);else if(t=="func")d=Bl(e,r,n);else if(typeof u.sqlFormatValue=="function"){var v=u.sqlFormatValue,g=[n,kl(kl({},xt()(o,["fieldSettings","listValues"])),{},{asyncListValues:f}),Xe()(u,Lt)];if(s&&(g.push(s),g.push(c)),t=="field"){var h=$e(r,n)||{};g.push(h)}d=v.call.apply(v,[r.ctx].concat(g))}else Array.isArray(n)?d=n.map(function(E){return la.escape(E)}):d=la.escape(n);return d}},Gl=function(e,r,n){if(n){var t=r.settings.fieldSeparator,i=$e(r,n)||{},u=at(n,r),o=Zi(n,r),s=o?o.join(t):null,c=r.settings.formatField,f=$n(n,r,e,null,{useTableName:!0}),d=c(f,u,s,i,r);return d}},Bl=function(e,r,n){var t=n.get("func"),i=n.get("args"),u=Ft(r,t);if(!u){e.errors.push("Func ".concat(t," is not defined in config"));return}var o=at(t,r),s=o[o.length-1],c=u.sqlFunc||s,f={},d=[],v=[];for(var g in u.args){var h=u.args[g],E=$e(r,h),S=h.defaultValue,A=h.isOptional,_=S!=null&&S.func?"func":"value",D=i?i.get(g):void 0,P=D?D.get("value"):void 0,k=D?D.get("valueSrc"):void 0,Z=D?D.get("asyncListValues"):void 0,q=Iu(e,r,P,k,h.type,E,h,null,null,Z);if(P!=null&&q===void 0){k!="func"&&e.errors.push("Can't format value of arg ".concat(g," for func ").concat(t));return}var re=void 0;if(q===void 0&&!A&&S!=null&&(re=Iu(e,r,S,_,h.type,E,h,null,null,Z),re===void 0)){_!="func"&&e.errors.push("Can't format default value of arg ".concat(g," for func ").concat(t));return}var J=q??re;if(J!==void 0){if(d.length){var X=av(g),ae;try{for(X.s();!(ae=X.n()).done;){var le=ae.value;f[le]=void 0}}catch(pe){X.e(pe)}finally{X.f()}d=[]}f[g]=J}else A||v.push(g),d.push(g)}if(!v.length){var ee;if(typeof u.sqlFormatFunc=="function"){var ie=u.sqlFormatFunc,se=[f];ee=ie.call.apply(ie,[r.ctx].concat(se))}else{var de=Object.entries(f).map(function(pe){var me=(0,qe.Z)(pe,2),Se=me[0],Ne=me[1];return Ne}).join(", ");ee="".concat(c,"(").concat(de,")")}return ee}};function cv(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=fv(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function fv(a,e){if(a){if(typeof a=="string")return Wl(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wl(a,e)}}function Wl(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}function Zl(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Hl(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zl(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Zl(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var dv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t={errors:[]},i=Kn(r,void 0,!1),u=$l(e,i,t,n,null);return t.errors.length&&console.warn("Errors while exporting to string:",t.errors),u},$l=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(e){var u=e.get("type"),o=e.get("children1");if(u==="group"||u==="rule_group")return pv(e,r,n,t,i);if(u==="rule")return Kl(e,r,n,t,i)}},pv=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=e.get("type"),o=e.get("properties")||new Nr.Map,s=o.get("mode"),c=e.get("children1")||new Nr.List,f=u==="rule_group",d=f&&s=="array"?o.get("field"):null,v=f&&s=="array",g=o.get("not"),h=c.map(function(q){return $l(q,r,n,t,d)}).filter(function(q){return typeof q<"u"});if(!(!v&&!h.size)){var E=o.get("conjunction");E||(E=bn(r));var S=r.conjunctions[E],A=h.size?S.formatConj(h,E,g,t):null,_;if(d){var D=Kl(e,r,n,t,i,!0);if(D){var P,k=D.pop(),Z=[A].concat((0,we.Z)(D));_=(P=r.settings).formatAggr.apply(P,(0,we.Z)(Z)),k&&(_=r.settings.formatReverse(_,null,null,null,null,t))}}else _=A;return _}},vv=function(e,r,n,t,i,u){var o=r.get("field"),s=r.get("valueSrc"),c=r.get("valueType"),f=$e(e,o)||{},d=t||r.get("operator"),v=Ur(e,d,o)||{},g=nt(v.cardinality,1),h=r.get("value"),E=r.get("asyncListValues"),S=[],A=[],_;if(h!=null){var D=h.map(function(k,Z){var q=s?s.get(Z):null,re=c?c.get(Z):null,J=Ua(k,q,e),X=Qr(e,o,d,q),ae=Xe()(Ut(e,o,d,X,q),["factory"]),le=Nu(e,n,J,q,re,ae,f,d,v,i,u,E);return le!==void 0&&(S.push(q),A.push(re)),le}),P=D.filter(function(k){return k===void 0}).size>0;P||D.size<g||(_=g==1?D.first():D)}return[_,S.length>1?S:S[0],A.length>1?A:A[0]]},gv=function(e,r){var n=r.labelForFormat||e,t=nt(r.cardinality,1),i;return t==0?i=function(o,s,c,f,d,v,g,h){return"".concat(o," ").concat(n)}:t==1?i=function(o,s,c,f,d,v,g,h){return"".concat(o," ").concat(n," ").concat(c)}:t==2&&(i=function(o,s,c,f,d,v,g,h){var E=c.first(),S=c.get(1);return"".concat(o," ").concat(n," ").concat(E," AND ").concat(S)}),i},Kl=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,o=e.get("properties")||new Nr.Map,s=o.get("field"),c=o.get("fieldSrc"),f=o.get("operator"),d=o.get("operatorOptions");if(!(s==null||f==null)){var v=$e(r,s)||{},g=Ur(r,f,s)||{},h=g.reversedOp,E=Ur(r,h,s)||{},S=!1,A=g.formatOp;if(!A&&h&&(A=E.formatOp,A)){S=!0;var _=[h,f];f=_[0],h=_[1];var D=[E,g];g=D[0],E=D[1]}if(A||(A=gv(f,g)),!!A){var P=c==="func"?zl(r,n,s,t,i):Yl(r,n,s,t,i);if(P!=null){var k=vv(r,o,n,f,t,i),Z=(0,qe.Z)(k,3),q=Z[0],re=Z[1],J=Z[2];if(q!==void 0){var X=[P,f,q,re,J,Xe()(g,Fn),d,t,v,S];if(u)return X;var ae,le=(ae=A).call.apply(ae,[r.ctx].concat(X));return S&&(le=r.settings.formatReverse(le,f,h,g,E,t)),le}}}}},Nu=function(e,r,n,t,i,u,o,s,c,f){var d=arguments.length>10&&arguments[10]!==void 0?arguments[10]:null,v=arguments.length>11?arguments[11]:void 0;if(n!==void 0){var g;if(t=="field")g=Yl(e,r,n,f,d);else if(t=="func")g=zl(e,r,n,f,d);else if(typeof u.formatValue=="function"){var h=u.formatValue,E=[n,Hl(Hl({},xt()(o,["fieldSettings","listValues"])),{},{asyncListValues:v}),Xe()(u,Lt),f];if(s&&(E.push(s),E.push(c)),t=="field"){var S=$e(e,n)||{};E.push(S)}g=h.call.apply(h,[e.ctx].concat(E))}else g=n;return g}},Yl=function(e,r,n,t){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=e.settings,s=o.fieldSeparator,c=o.fieldSeparatorDisplay,f=null;if(n){var d=$e(e,n)||{},v=at(n,e),g=Zi(n,e,u?i:null),h=g?g.join(c):null,E=d.label2||h,S=e.settings.formatField,A=$n(n,e,r,u?i:null,{useTableName:!0});f=S(A,v,E,d,e,t)}return f},zl=function(e,r,n,t){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=n.get("func"),o=n.get("args"),s=Ft(e,u);if(!s){r.errors.push("Func ".concat(u," is not defined in config"));return}var c=at(u,e),f=c[c.length-1],d=t&&s.label||f,v={},g=[],h=[],E={};for(var S in s.args){var A=s.args[S],_=$e(e,A),D=A.defaultValue,P=A.isOptional,k=D!=null&&D.func?"func":"value",Z=t&&A.label||S,q=o?o.get(S):void 0,re=q?q.get("value"):void 0,J=q?q.get("valueSrc"):void 0,X=q?q.get("asyncListValues"):void 0,ae=Nu(e,r,re,J,A.type,_,A,null,null,t,i,X);if(re!=null&&ae===void 0){J!="func"&&r.errors.push("Can't format value of arg ".concat(S," for func ").concat(u));return}var le=void 0;if(ae===void 0&&!P&&D!=null&&(le=Nu(e,r,D,k,A.type,_,A,null,null,t,i,X),le===void 0)){k!="func"&&r.errors.push("Can't format default value of arg ".concat(S," for func ").concat(u));return}var ee=ae??le;if(ee!==void 0){if(g.length){var ie=cv(S),se;try{for(ie.s();!(se=ie.n()).done;){var de=(0,qe.Z)(se.value,2),pe=de[0],me=de[1];v[pe]=void 0}}catch(Fe){ie.e(Fe)}finally{ie.f()}g=[]}v[S]=ee,E[Z]=ee}else P||h.push(S),g.push([S,Z])}if(!h.length){var Se=null;if(typeof s.formatFunc=="function"){var Ne=s.formatFunc,je=[v,t];Se=Ne.call.apply(Ne,[e.ctx].concat(je))}else{var Me=Object.entries(t?E:v).map(function(Fe){var Ke=(0,qe.Z)(Fe,2),Qe=Ke[0],Be=Ke[1];return t?"".concat(Qe,": ").concat(Be):"".concat(Be)}).join(", ");Se="".concat(d,"(").concat(Me,")")}return Se}};function ql(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Xl(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ql(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):ql(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function hv(a){if(a==null)return null;var e=a.split(",").map(Number);return{top_left:{lat:e[0],lon:e[1]},bottom_right:{lat:e[2],lon:e[3]}}}function mv(a,e){if(a.length>1)return{gte:"".concat(a[0]),lte:"".concat(a[1])};var r=a[0];switch(e){case"on_date":case"not_on_date":case"equal":case"select_equals":case"not_equal":return{gte:"".concat(r,"||/d"),lte:"".concat(r,"||+1d")};case"less_or_equal":return{lte:"".concat(r)};case"greater_or_equal":return{gte:"".concat(r)};case"less":return{lt:"".concat(r)};case"greater":return{gt:"".concat(r)};default:return}}function yv(a){return{value:"*"+a+"*"}}function Ev(a,e){switch(a){case"AND":return e?"must_not":"must";case"OR":return e?"should_not":"should";case"NOT":return e?"must":"must_not";default:return}}function Ov(a){return{value:a}}function Sv(a,e){return a}function Tv(a,e,r,n,t,i){var u=Sv(n,t);switch(a){case"filter":return{script:t.operators[r].elasticSearchScript(n,e)};case"exists":return{field:n};case"match":return(0,Ae.Z)({},u,e[0]);case"term":return i===Jl?(0,Ae.Z)({},n,{value:e[0]}):(0,Ae.Z)({},n,e[0]);case"geo_bounding_box":return(0,Ae.Z)({},n,hv(e[0]));case"range":return(0,Ae.Z)({},n,mv(e,r));case"wildcard":return(0,Ae.Z)({},n,yv(e[0]));case"regexp":return(0,Ae.Z)({},n,Ov(e[0]));default:return}}function Ql(a,e,r,n,t,i){if(!(!a||!r||e==null)){var u=r,o=n.operators[u];if(o){var s=o,c=s.elasticSearchQueryType,f=!1;if(!c&&o.reversedOp){f=!0,u=o.reversedOp,o=n.operators[u];var d=o;c=d.elasticSearchQueryType}var v=Qr(n,a,u,t),g=n.widgets[v];if(g){var h=g.elasticSearchFormatValue,E;if(typeof c=="function"?E=c(v):E=c,!!E){var S;return typeof h=="function"?S=h(E,e,u,a,n):S=Tv(E,e,u,a,n,i),f?{bool:{must_not:(0,Ae.Z)({},E,Xl({},S))}}:(0,Ae.Z)({},E,Xl({},S))}}}}}function Rv(a,e,r,n,t,i){if(!(!a||!a.size)){var u=a.valueSeq().toArray(),o=Ev(e,r),s=u.map(function(f){return n(f,t,i)}).filter(function(f){return f!==void 0});if(s.length){var c=s.flat(1/0);return{bool:(0,Ae.Z)({},o,c)}}}}var Jl="ES_7_SYNTAX",ec="ES_6_SYNTAX";function rc(a,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ec;if(a){var n=a.get("type"),t=a.get("properties")||new Map;if(n==="rule"&&t.get("field")){var i,u,o=t.get("operator"),s=t.get("field"),c=t.get("fieldSrc"),f=t.get("value").toJS(),d=(i=t.get("valueType"))===null||i===void 0?void 0:i.get(0),v=(u=t.get("valueSrc"))===null||u===void 0?void 0:u.get(0);return v==="func"||c=="func"?void 0:f&&Array.isArray(f[0])?f[0].map(function(S){return Ql(s,[S],o,e,v,r)}):Ql(s,f,o,e,v,r)}if(n==="group"||n==="rule_group"){var g=t.get("not"),h=t.get("conjunction");h||(h=bn(e));var E=a.get("children1");return Rv(E,h,g,rc,e,r)}}}var di=m(42965);function tc(a,e,r,n,t,i,u){try{var o=a[i](u),s=o.value}catch(c){r(c);return}o.done?e(s):Promise.resolve(s).then(n,t)}function Cv(a){return function(){var e=this,r=arguments;return new Promise(function(n,t){var i=a.apply(e,r);function u(s){tc(i,n,t,u,o,"next",s)}function o(s){tc(i,n,t,u,o,"throw",s)}u(void 0)})}}var Av=["title","value","disabled","groupTitle","grouplabel","renderTitle","children","label","isCustom","isHidden"];function Lv(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Fv(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function Fv(a,e){if(a){if(typeof a=="string")return nc(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nc(a,e)}}function nc(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}function ac(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function da(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ac(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):ac(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var Iv=function(e,r){if(e.findLastIndex)return e.findLastIndex(r);var n=(0,we.Z)(e).reverse().findIndex(r);return n==-1?-1:e.length-1-n},Nv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;return function(){var t=Cv(_r().mark(function i(u,o,s){var c,f,d,v,g,h,E,S;return _r().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(c=s?.pageSize!=null?s.pageSize:r,f=To(e).filter(function(D){var P=D.title,k=D.value;return u==null?!0:P.toUpperCase().indexOf(u.toUpperCase())!=-1||"".concat(k).toUpperCase().indexOf(u.toUpperCase())!=-1}),d=c?Math.ceil(f.length/c):0,v=o||0,g=c?Math.ceil(v/c):null,h=c?f.slice(v,v+c):f,E=c?v+h.length:null,S=c?E<f.length:!1,!n){_.next=11;break}return _.next=11,_i(n);case 11:return _.abrupt("return",{values:h,hasMore:S});case 12:case"end":return _.stop()}},i)}));return function(i,u,o){return t.apply(this,arguments)}}()},bv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!r)return e;var i=e||[],u=r.filter(function(s){return i.find(function(c){return""+c.value==""+s.value})==null}).map(function(s){return t?da(da({},s),{},{isHidden:!0}):s}),o=n?[].concat((0,we.Z)(u),(0,we.Z)(i)):[].concat((0,we.Z)(i),(0,we.Z)(u));return o},wv=function(e,r,n){var t,i=e==null||e==""?void 0:(t=e?.value)!==null&&t!==void 0?t:e,u=R(i,r),o=n&&!u?Ui(i):void 0,s=u||o,c=s?[s]:void 0;return[i,c]},Pv=function(e,r,n){var t=e.map(function(u,o){var s,c=u==null||u==""?void 0:(s=u?.value)!==null&&s!==void 0?s:u,f=R(c,r),d=n&&!f?Ui(c):void 0,v=f||d;return v}).filter(function(u){return u!=null}),i=t.map(function(u){var o;return(o=u?.value)!==null&&o!==void 0?o:u});return i.length||(i=void 0),[i,t]},_v=function(e){if(e==null)return null;var r=e.title,n=e.value,t=e.disabled,i=e.groupTitle,u=e.grouplabel,o=e.renderTitle,s=e.children,c=e.label,f=e.isCustom,d=e.isHidden,v=(0,di.Z)(e,Av),g={value:n,title:r||c||s};return t&&(g.disabled=t),f&&(g.isCustom=f),d&&(g.isHidden=d),(i||u)&&(g.groupTitle=i||u),o&&(g.renderTitle=o),g=da(da({},g),v),g},Dv=function(e){var r=[],n=[],t=Lv(e),i;try{var u=function(){var s=i.value,c=Iv(r,function(f){var d,v;return((d=f.groupTitle)!==null&&d!==void 0?d:"")==((v=s.groupTitle)!==null&&v!==void 0?v:"")});s.groupTitle!=null&&!n.includes(s.groupTitle)&&(n.push(s.groupTitle),n.length===1&&(r=r.map(function(f){return da(da({},f),{},{groupTitle:""})}))),s.groupTitle==null&&n.length&&(s=da(da({},s),{},{groupTitle:""})),c!=-1?r.splice(c+1,0,s):r.push(s)};for(t.s();!(i=t.n()).done;)u()}catch(o){t.e(o)}finally{t.f()}return r},Vv={label:"Now",returnType:"datetime",jsonLogic:"now",jsonLogicCustomOps:{now:{}},spelFunc:"T(java.time.LocalDateTime).now()",sqlFormatFunc:function(){return"NOW()"},mongoFormatFunc:function(){return new Date},formatFunc:function(){return"NOW"}},Mv={label:"Relative",returnType:"datetime",renderBrackets:["",""],renderSeps:["","",""],spelFormatFunc:function(e){var r=e.date,n=e.op,t=e.val,i=e.dim,u=i.charAt(0).toUpperCase()+i.slice(1)+"s",o=n+u;return"".concat(r,".").concat(o,"(").concat(t,")")},spelImport:function(e){var r,n,t,i,u,o=(r=e.methodName)===null||r===void 0?void 0:r.match(/^(minus|plus)(\w+)s$/);if(o&&(u=o[2].toLowerCase(),t=o[1],["minus","plus"].includes(t)&&["day","week","month","year"].includes(u)))return t={type:"string",val:t},u={type:"string",val:u},i=e.args[0],n=e.obj,{date:n,op:t,val:i,dim:u}},jsonLogic:function(e){var r=e.date,n=e.op,t=e.val,i=e.dim;return{date_add:[r,t*(n=="minus"?-1:1),i]}},jsonLogicImport:function(e){var r=e.date_add[0],n=Math.abs(e.date_add[1]),t=e.date_add[1]>=0?"plus":"minus",i=e.date_add[2];return[r,t,n,i]},jsonLogicCustomOps:{date_add:{}},sqlFormatFunc:function(e){var r=e.date,n=e.op,t=e.val,i=e.dim;return"DATE_ADD(".concat(r,", INTERVAL ").concat(parseInt(t)*(n=="minus"?-1:1)," ").concat(i.replace(/^'|'$/g,""),")")},mongoFormatFunc:null,formatFunc:function(e){var r=e.date,n=e.op,t=e.val,i=e.dim;return t?"".concat(r," ").concat(n=="minus"?"-":"+"," ").concat(t," ").concat(i):r},args:{date:{label:"Date",type:"datetime",defaultValue:{func:"NOW",args:[]},valueSources:["func","field","value"],spelEscapeForFormat:!0},op:{label:"Op",type:"select",defaultValue:"plus",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{plus:"+",minus:"-"}},spelEscapeForFormat:!1},val:{label:"Value",type:"number",fieldSettings:{min:0},defaultValue:0,valueSources:["value"],spelEscapeForFormat:!1},dim:{label:"Dimension",type:"select",defaultValue:"day",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{day:"day",week:"week",month:"month",year:"year"}},spelEscapeForFormat:!1}}},jv={label:"Lowercase",mongoFunc:"$toLower",jsonLogic:"toLowerCase",spelFunc:"${str}.toLowerCase()",jsonLogicCustomOps:{toLowerCase:{}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field","func"]}}},kv={label:"Uppercase",mongoFunc:"$toUpper",jsonLogic:"toUpperCase",spelFunc:"${str}.toUpperCase()",jsonLogicCustomOps:{toUpperCase:{}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field","func"]}}},xv={label:"Linear regression",returnType:"number",formatFunc:function(e,r){var n=e.coef,t=e.bias,i=e.val;return"(".concat(n," * ").concat(i," + ").concat(t,")")},sqlFormatFunc:function(e){var r=e.coef,n=e.bias,t=e.val;return"(".concat(r," * ").concat(t," + ").concat(n,")")},spelFormatFunc:function(e){var r=e.coef,n=e.bias,t=e.val;return"(".concat(r," * ").concat(t," + ").concat(n,")")},spelImport:function(e){var r,n,t,i;if(e.type==="op-plus"){var u=(0,qe.Z)(e.children,2);if(i=u[0],t=u[1],i.type==="op-multiply"){var o=(0,qe.Z)(i.children,2);return r=o[0],n=o[1],{coef:r,val:n,bias:t}}}},mongoFormatFunc:function(e){var r=e.coef,n=e.bias,t=e.val;return{$sum:[{$multiply:[r,t]},n]}},jsonLogic:function(e){var r=e.coef,n=e.bias,t=e.val;return{"+":[{"*":[r,t]},n]}},jsonLogicImport:function(e){var r=e["+"][0]["*"][0],n=e["+"][0]["*"][1],t=e["+"][1];return[r,n,t]},renderBrackets:["",""],renderSeps:[" * "," + "],args:{coef:{label:"Coef",type:"number",defaultValue:1,valueSources:["value"]},val:{label:"Value",type:"number",valueSources:["value","field"]},bias:{label:"Bias",type:"number",defaultValue:0,valueSources:["value"]}}},Uv=function(e,r,n,t,i,u,o,s,c,f,d,v){var g=typeof t=="string"&&!t.startsWith("$")?"$"+t:t,h=r(u,v);if(h!==void 0)return n?!o&&(!e||e=="$eq")?(0,Ae.Z)({},t,{$ne:h}):o?{$not:(0,Ae.Z)({},e,[g,h])}:(0,Ae.Z)({},t,{$not:(0,Ae.Z)({},e,h)}):!o&&(!e||e=="$eq")?(0,Ae.Z)({},t,h):o?(0,Ae.Z)({},e,[g,h]):(0,Ae.Z)({},t,(0,Ae.Z)({},e,h))},Gv=function(e,r,n,t,i,u,o,s,c,f,d){var v=typeof n=="string"&&!n.startsWith("$")?"$"+n:n;if(r){var g;return u?{$not:{$and:[(0,Ae.Z)({},e[0],[v,i[0]]),(0,Ae.Z)({},e[1],[v,i[1]])]}}:(0,Ae.Z)({},n,{$not:(g={},(0,Ae.Z)(g,e[0],i[0]),(0,Ae.Z)(g,e[1],i[1]),g)})}else{var h;return u?{$and:[(0,Ae.Z)({},e[0],[v,i[0]]),(0,Ae.Z)({},e[1],[v,i[1]])]}:(0,Ae.Z)({},n,(h={},(0,Ae.Z)(h,e[0],i[0]),(0,Ae.Z)(h,e[1],i[1]),h))}},Bv={utils:{SqlString:la,moment:dn(),mongoFormatOp1:Uv,mongoFormatOp2:Gv,mongoEmptyValue:ps,escapeRegExp:Yr,sqlEmptyValue:ds,stringifyForDisplay:gs,getTitleInListValues:Ro,spelEscape:ui,spelFixList:vs}};const Wv=Bv;function Zv(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Hv(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function Hv(a,e){if(a){if(typeof a=="string")return ic(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ic(a,e)}}function ic(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}function oc(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Rr(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oc(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):oc(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var $v={AND:{label:"And",mongoConj:"$and",jsonLogicConj:"and",sqlConj:"AND",spelConj:"and",spelConjs:["and","&&"],reversedConj:"OR",formatConj:function(e,r,n,t){return e.size>1?(n?"NOT ":"")+"("+e.join(" "+(t?"AND":"&&")+" ")+")":(n?"NOT (":"")+e.first()+(n?")":"")},sqlFormatConj:function(e,r,n){return e.size>1?(n?"NOT ":"")+"("+e.join(" AND ")+")":(n?"NOT (":"")+e.first()+(n?")":"")},spelFormatConj:function(e,r,n,t){return n&&(t=!1),e.size>1?(n?"!":"")+(t?"":"(")+e.join(" && ")+(t?"":")"):(n?"!(":"")+e.first()+(n?")":"")}},OR:{label:"Or",mongoConj:"$or",jsonLogicConj:"or",sqlConj:"OR",spelConj:"or",spelConjs:["or","||"],reversedConj:"AND",formatConj:function(e,r,n,t){return e.size>1?(n?"NOT ":"")+"("+e.join(" "+(t?"OR":"||")+" ")+")":(n?"NOT (":"")+e.first()+(n?")":"")},sqlFormatConj:function(e,r,n){return e.size>1?(n?"NOT ":"")+"("+e.join(" OR ")+")":(n?"NOT (":"")+e.first()+(n?")":"")},spelFormatConj:function(e,r,n,t){return n&&(t=!1),e.size>1?(n?"!":"")+(t?"":"(")+e.join(" || ")+(t?"":")"):(n?"!(":"")+e.first()+(n?")":"")}}},Kv={equal:{label:"==",labelForFormat:"==",sqlOp:"=",spelOp:"==",spelOps:["==","eq"],reversedOp:"not_equal",formatOp:function(e,r,n,t,i,u,o,s,c){var f=s?"=":u.label;return i=="boolean"&&s?n=="No"?"NOT ".concat(e):"".concat(e):"".concat(e," ").concat(f," ").concat(n)},mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(i){return i},!1].concat(n))},jsonLogic:"==",elasticSearchQueryType:"term"},not_equal:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",spelOp:"!=",spelOps:["!=","ne"],reversedOp:"equal",formatOp:function(e,r,n,t,i,u,o,s,c){return i=="boolean"&&s?n=="No"?"".concat(e):"NOT ".concat(e):"".concat(e," ").concat(u.label," ").concat(n)},mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(i){return i},!1].concat(n))},jsonLogic:"!="},less:{label:"<",labelForFormat:"<",sqlOp:"<",spelOp:"<",spelOps:["<","lt"],reversedOp:"greater_or_equal",mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$lt",function(i){return i},!1].concat(n))},jsonLogic:"<",elasticSearchQueryType:"range"},less_or_equal:{label:"<=",labelForFormat:"<=",sqlOp:"<=",spelOp:"<=",spelOps:["<=","le"],reversedOp:"greater",mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$lte",function(i){return i},!1].concat(n))},jsonLogic:"<=",elasticSearchQueryType:"range"},greater:{label:">",labelForFormat:">",sqlOp:">",spelOp:">",spelOps:[">","gt"],reversedOp:"less_or_equal",mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$gt",function(i){return i},!1].concat(n))},jsonLogic:">",elasticSearchQueryType:"range"},greater_or_equal:{label:">=",labelForFormat:">=",sqlOp:">=",spelOp:">=",spelOps:[">=","ge"],reversedOp:"less",mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$gte",function(i){return i},!1].concat(n))},jsonLogic:">=",elasticSearchQueryType:"range"},like:{label:"Contains",labelForFormat:"Contains",reversedOp:"not_like",sqlOp:"LIKE",spelOp:"${0}.contains(${1})",valueTypes:["text"],mongoFormatOp:function(){for(var e,r=this,n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(u){return typeof u=="string"?r.utils.escapeRegExp(u):void 0},!1].concat(t))},jsonLogic:"in",_jsonLogicIsRevArgs:!0,valueSources:["value"],elasticSearchQueryType:"regexp"},not_like:{isNotOp:!0,label:"Not contains",reversedOp:"like",labelForFormat:"Not Contains",sqlOp:"NOT LIKE",mongoFormatOp:function(){for(var e,r=this,n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(u){return typeof u=="string"?r.utils.escapeRegExp(u):void 0},!0].concat(t))},valueSources:["value"]},starts_with:{label:"Starts with",labelForFormat:"Starts with",sqlOp:"LIKE",spelOp:"${0}.startsWith(${1})",mongoFormatOp:function(){for(var e,r=this,n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(u){return typeof u=="string"?"^"+r.utils.escapeRegExp(u):void 0},!1].concat(t))},jsonLogic:void 0,valueSources:["value"]},ends_with:{label:"Ends with",labelForFormat:"Ends with",sqlOp:"LIKE",spelOp:"${0}.endsWith(${1})",mongoFormatOp:function(){for(var e,r=this,n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(u){return typeof u=="string"?r.utils.escapeRegExp(u)+"$":void 0},!1].concat(t))},jsonLogic:void 0,valueSources:["value"]},between:{label:"Between",labelForFormat:"BETWEEN",sqlOp:"BETWEEN",cardinality:2,formatOp:function(e,r,n,t,i,u,o,s){var c=n.first(),f=n.get(1);return s?"".concat(e," BETWEEN ").concat(c," AND ").concat(f):"".concat(e," >= ").concat(c," && ").concat(e," <= ").concat(f)},spelFormatOp:function(e,r,n,t,i,u,o,s){var c=n[0],f=n[1];return"".concat(e," >= ").concat(c," && ").concat(e," <= ").concat(f)},mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp2.apply(e,[["$gte","$lte"],!1].concat(n))},valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"not_between",jsonLogic:"<=",validateValues:function(e){return e[0]!=null&&e[1]!=null?e[0]<=e[1]?null:"Invalid range":null},elasticSearchQueryType:function(e){return e==="time"?"filter":"range"}},not_between:{isNotOp:!0,label:"Not between",labelForFormat:"NOT BETWEEN",sqlOp:"NOT BETWEEN",cardinality:2,formatOp:function(e,r,n,t,i,u,o,s){var c=n.first(),f=n.get(1);return s?"".concat(e," NOT BETWEEN ").concat(c," AND ").concat(f):"(".concat(e," < ").concat(c," || ").concat(e," > ").concat(f,")")},spelFormatOp:function(e,r,n,t,i,u,o,s){var c=n[0],f=n[1];return"(".concat(e," < ").concat(c," || ").concat(e," > ").concat(f,")")},mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp2.apply(e,[["$gte","$lte"],!0].concat(n))},valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"between",validateValues:function(e){return e[0]!=null&&e[1]!=null?e[0]<=e[1]?null:"Invalid range":null}},is_empty:{label:"Is empty",labelForFormat:"IS EMPTY",cardinality:0,reversedOp:"is_not_empty",formatOp:function(e,r,n,t,i,u,o,s){return s?"".concat(e," IS EMPTY"):"!".concat(e)},sqlFormatOp:function(e,r,n,t,i,u,o,s){var c=this.utils.sqlEmptyValue(s);return"COALESCE(".concat(e,", ").concat(c,") = ").concat(c)},spelFormatOp:function(e,r,n,t,i,u,o,s){return"".concat(e," <= ''")},mongoFormatOp:function(){for(var e,r=this,n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(u,o){return[r.utils.mongoEmptyValue(o),null]},!1].concat(t))},jsonLogic:"!"},is_not_empty:{isNotOp:!0,label:"Is not empty",labelForFormat:"IS NOT EMPTY",cardinality:0,reversedOp:"is_empty",formatOp:function(e,r,n,t,i,u,o,s){return s?"".concat(e," IS NOT EMPTY"):"!!".concat(e)},sqlFormatOp:function(e,r,n,t,i,u,o,s){var c=this.utils.sqlEmptyValue(s);return"COALESCE(".concat(e,", ").concat(c,") <> ").concat(c)},spelFormatOp:function(e,r,n,t,i,u,o,s){return"".concat(e," > ''")},mongoFormatOp:function(){for(var e,r=this,n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return(e=this.utils).mongoFormatOp1.apply(e,["$nin",function(u,o){return[r.utils.mongoEmptyValue(o),null]},!1].concat(t))},jsonLogic:"!!",elasticSearchQueryType:"exists"},is_null:{label:"Is null",labelForFormat:"IS NULL",sqlOp:"IS NULL",cardinality:0,reversedOp:"is_not_null",formatOp:function(e,r,n,t,i,u,o,s){return s?"".concat(e," IS NULL"):"!".concat(e)},spelFormatOp:function(e,r,n,t,i,u,o,s){return"".concat(e," == null")},mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(i){return null},!1].concat(n))},jsonLogic:"=="},is_not_null:{label:"Is not null",labelForFormat:"IS NOT NULL",sqlOp:"IS NOT NULL",cardinality:0,reversedOp:"is_null",formatOp:function(e,r,n,t,i,u,o,s){return s?"".concat(e," IS NOT NULL"):"!!".concat(e)},spelFormatOp:function(e,r,n,t,i,u,o,s){return"".concat(e," != null")},mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(i){return null},!1].concat(n))},jsonLogic:"!=",elasticSearchQueryType:"exists"},select_equals:{label:"==",labelForFormat:"==",sqlOp:"=",formatOp:function(e,r,n,t,i,u,o,s){var c=s?"=":"==";return"".concat(e," ").concat(c," ").concat(n)},spelOp:"==",spelOps:["==","eq"],mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(i){return i},!1].concat(n))},reversedOp:"select_not_equals",jsonLogic:"==",elasticSearchQueryType:"term"},select_not_equals:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,r,n,t,i,u,o,s){return"".concat(e," != ").concat(n)},spelOp:"!=",spelOps:["!=","ne"],mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(i){return i},!1].concat(n))},reversedOp:"select_equals",jsonLogic:"!="},select_any_in:{label:"Any in",labelForFormat:"IN",sqlOp:"IN",formatOp:function(e,r,n,t,i,u,o,s){return t=="value"?"".concat(e," IN (").concat(n.join(", "),")"):"".concat(e," IN (").concat(n,")")},sqlFormatOp:function(e,r,n,t,i,u,o,s){if(t=="value")return"".concat(e," IN (").concat(n.join(", "),")")},valueTypes:["multiselect"],spelOp:"${1}.contains(${0})",mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(i){return i},!1].concat(n))},reversedOp:"select_not_any_in",jsonLogic:"in",elasticSearchQueryType:"term"},select_not_any_in:{isNotOp:!0,label:"Not in",labelForFormat:"NOT IN",sqlOp:"NOT IN",formatOp:function(e,r,n,t,i,u,o,s){return t=="value"?"".concat(e," NOT IN (").concat(n.join(", "),")"):"".concat(e," NOT IN (").concat(n,")")},sqlFormatOp:function(e,r,n,t,i,u,o,s){if(t=="value")return"".concat(e," NOT IN (").concat(n.join(", "),")")},mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$nin",function(i){return i},!1].concat(n))},reversedOp:"select_any_in"},multiselect_contains:{label:"Contains",labelForFormat:"CONTAINS",formatOp:function(e,r,n,t,i,u,o,s){return t=="value"?"".concat(e," CONTAINS [").concat(n.join(", "),"]"):"".concat(e," CONTAINS ").concat(n)},reversedOp:"multiselect_not_contains",jsonLogic2:"some-in",jsonLogic:function(e,r,n){return{some:[e,{in:[{var:""},n]}]}},spelOp:"T(CollectionUtils).containsAny(${0}, ${1})",elasticSearchQueryType:"term",mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(i){return i},!1].concat(n))}},multiselect_not_contains:{isNotOp:!0,label:"Not contains",labelForFormat:"NOT CONTAINS",formatOp:function(e,r,n,t,i,u,o,s){return t=="value"?"".concat(e," NOT CONTAINS [").concat(n.join(", "),"]"):"".concat(e," NOT CONTAINS ").concat(n)},reversedOp:"multiselect_contains"},multiselect_equals:{label:"Equals",labelForFormat:"==",sqlOp:"=",formatOp:function(e,r,n,t,i,u,o,s){var c=s?"=":"==";return t=="value"?"".concat(e," ").concat(c," [").concat(n.join(", "),"]"):"".concat(e," ").concat(c," ").concat(n)},sqlFormatOp:function(e,r,n,t,i,u,o,s){var c=this;if(t=="value")return"".concat(e," = '").concat(n.map(function(f){return c.utils.SqlString.trim(f)}).join(","),"'")},spelOp:"${0}.equals(${1})",mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(i){return i},!1].concat(n))},reversedOp:"multiselect_not_equals",jsonLogic2:"all-in",jsonLogic:function(e,r,n){return{all:[e,{in:[{var:""},n]}]}},elasticSearchQueryType:"term"},multiselect_not_equals:{isNotOp:!0,label:"Not equals",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,r,n,t,i,u,o,s){return t=="value"?"".concat(e," != [").concat(n.join(", "),"]"):"".concat(e," != ").concat(n)},sqlFormatOp:function(e,r,n,t,i,u,o,s){var c=this;if(t=="value")return"".concat(e," != '").concat(n.map(function(f){return c.utils.SqlString.trim(f)}).join(","),"'")},mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(i){return i},!1].concat(n))},reversedOp:"multiselect_equals"},proximity:{label:"Proximity search",cardinality:2,valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],formatOp:function(e,r,n,t,i,u,o,s){var c=n.first(),f=n.get(1),d=o.get("proximity");return"".concat(e," ").concat(c," NEAR/").concat(d," ").concat(f)},sqlFormatOp:function(e,r,n,t,i,u,o,s){var c=n.first(),f=n.get(1),d=this.utils.SqlString.trim(c),v=this.utils.SqlString.trim(f),g=o.get("proximity");return"CONTAINS(".concat(e,", 'NEAR((").concat(d,", ").concat(v,"), ").concat(g,")')")},mongoFormatOp:void 0,jsonLogic:void 0,options:{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",minProximity:2,maxProximity:10,defaults:{proximity:2}}},some:{label:"Some",labelForFormat:"SOME",cardinality:0,jsonLogic:"some",spelFormatOp:function(e){return"".concat(e," > 0")},mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$gt",function(i){return 0},!1].concat(n))}},all:{label:"All",labelForFormat:"ALL",cardinality:0,jsonLogic:"all",spelFormatOp:function(e,r,n){return"".concat(e," == ").concat(n)},mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(i){return i},!1].concat(n))}},none:{label:"None",labelForFormat:"NONE",cardinality:0,jsonLogic:"none",spelFormatOp:function(e){return"".concat(e," == 0")},mongoFormatOp:function(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(i){return 0},!1].concat(n))}}},Yv={text:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"String",valuePlaceholder:"Enter string",formatValue:function(e,r,n,t){return t?this.utils.stringifyForDisplay(e):JSON.stringify(e)},spelFormatValue:function(e,r,n,t,i){return this.utils.spelEscape(e)},sqlFormatValue:function(e,r,n,t,i){return i.sqlOp=="LIKE"||i.sqlOp=="NOT LIKE"?this.utils.SqlString.escapeLike(e,t!="starts_with",t!="ends_with"):this.utils.SqlString.escape(e)},toJS:function(e,r){return e},mongoFormatValue:function(e,r,n){return e}},textarea:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"Text",valuePlaceholder:"Enter text",formatValue:function(e,r,n,t){return t?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,r,n,t,i){return i.sqlOp=="LIKE"||i.sqlOp=="NOT LIKE"?this.utils.SqlString.escapeLike(e,t!="starts_with",t!="ends_with"):this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,r){return e},mongoFormatValue:function(e,r,n){return e},fullWidth:!0},number:{type:"number",jsType:"number",valueSrc:"value",valueLabel:"Number",valuePlaceholder:"Enter number",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(e,r,n,t){return t?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,r,n,t,i){return this.utils.SqlString.escape(e)},spelFormatValue:function(e,r,n){var t=n.step&&!Number.isInteger(n.step);return this.utils.spelEscape(e,t)},toJS:function(e,r){return e},mongoFormatValue:function(e,r,n){return e}},slider:{type:"number",jsType:"number",valueSrc:"value",valueLabel:"Number",valuePlaceholder:"Enter number or move slider",formatValue:function(e,r,n,t){return t?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,r,n,t,i){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,r){return e},mongoFormatValue:function(e,r,n){return e}},select:{type:"select",jsType:"string",valueSrc:"value",valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(e,r,n,t){var i=this.utils.getTitleInListValues(r.fieldSettings.listValues||r.asyncListValues,e);return t?this.utils.stringifyForDisplay(i):JSON.stringify(e)},sqlFormatValue:function(e,r,n,t,i){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,r){return e},mongoFormatValue:function(e,r,n){return e}},multiselect:{type:"multiselect",jsType:"array",valueSrc:"value",valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(e,r,n,t){var i=this,u=e.map(function(o){return i.utils.getTitleInListValues(r.fieldSettings.listValues||r.asyncListValues,o)});return t?u.map(this.utils.stringifyForDisplay):e.map(JSON.stringify)},sqlFormatValue:function(e,r,n,t,i){var u=this;return e.map(function(o){return u.utils.SqlString.escape(o)})},spelFormatValue:function(e,r,n,t,i){var u=i.spelOp&&i.spelOp.startsWith("${1}"),o=this.utils.spelEscape(e);return u&&(o=this.utils.spelFixList(o)),o},toJS:function(e,r){return e},mongoFormatValue:function(e,r,n){return e}},date:{type:"date",jsType:"string",valueSrc:"value",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD",valueLabel:"Date",valuePlaceholder:"Enter date",valueLabels:[{label:"Date from",placeholder:"Enter date from"},{label:"Date to",placeholder:"Enter date to"}],formatValue:function(e,r,n,t){var i=this.utils.moment(e,n.valueFormat);return t?i.format(n.dateFormat):JSON.stringify(e)},sqlFormatValue:function(e,r,n,t,i){var u=this.utils.moment(e,n.valueFormat);return this.utils.SqlString.escape(u.format("YYYY-MM-DD"))},spelFormatValue:function(e,r,n,t,i){var u=this.utils.moment(e,n.valueFormat),o=u.format("YYYY-MM-DD"),s="yyyy-MM-dd";return"T(java.time.LocalDate).parse('".concat(o,"', T(java.time.format.DateTimeFormatter).ofPattern('").concat(s,"'))")},spelImportFuncs:[{obj:{cls:["java","time","LocalDate"]},methodName:"parse",args:[{var:"v"},{obj:{cls:["java","time","format","DateTimeFormatter"]},methodName:"ofPattern",args:[{var:"fmt"}]}]}],spelImportValue:function(e,r,n){var t,i,u,o;if(!r)return[void 0,"No widget def to get value format"];if(n!=null&&(t=n.fmt)!==null&&t!==void 0&&(t=t.value)!==null&&t!==void 0&&(i=t.includes)!==null&&i!==void 0&&i.call(t," ")||(u=n.fmt)!==null&&u!==void 0&&(u=u.value)!==null&&u!==void 0&&(o=u.toLowerCase)!==null&&o!==void 0&&o.call(u).includes("hh:mm"))return[void 0,"Invalid date format ".concat(JSON.stringify(n.fmt))];var s=this.utils.moment(e.value,this.utils.moment.ISO_8601);return s.isValid()?[s.format(r?.valueFormat),[]]:[void 0,"Invalid date"]},jsonLogic:function(e,r,n){return this.utils.moment(e,n.valueFormat).toDate()},toJS:function(e,r){var n=this.utils.moment(e,r.valueFormat);return n.isValid()?n.toDate():void 0},mongoFormatValue:function(e,r,n){var t=this.utils.moment(e,n.valueFormat);return t.isValid()?t.toDate():void 0}},time:{type:"time",jsType:"string",valueSrc:"value",timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1,valueLabel:"Time",valuePlaceholder:"Enter time",valueLabels:[{label:"Time from",placeholder:"Enter time from"},{label:"Time to",placeholder:"Enter time to"}],formatValue:function(e,r,n,t){var i=this.utils.moment(e,n.valueFormat);return t?i.format(n.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,r,n,t,i){var u=this.utils.moment(e,n.valueFormat);return this.utils.SqlString.escape(u.format("HH:mm:ss"))},spelFormatValue:function(e,r,n,t,i){var u=this.utils.moment(e,n.valueFormat),o="HH:mm:ss",s=u.format("HH:mm:ss");return"T(java.time.LocalTime).parse('".concat(s,"')")},spelImportFuncs:["T(java.time.LocalTime).parse(${v})"],spelImportValue:function(e,r,n){var t,i,u;if(!r)return[void 0,"No widget def to get value format"];if(n!=null&&n.fmt&&(!((t=n.fmt)!==null&&t!==void 0&&(t=t.value)!==null&&t!==void 0&&(i=t.toLowerCase)!==null&&i!==void 0&&i.call(t).includes("hh:mm"))||(u=n.fmt)!==null&&u!==void 0&&(u=u.value)!==null&&u!==void 0&&u.includes(" ")))return[void 0,"Invalid time format ".concat(JSON.stringify(n.fmt))];var o=this.utils.moment(e.value,"HH:mm:ss");return o.isValid()?[o.format(r?.valueFormat),[]]:[void 0,"Invalid date"]},jsonLogic:function(e,r,n){var t=this.utils.moment(e,n.valueFormat);return t.get("hour")*60*60+t.get("minute")*60+t.get("second")},toJS:function(e,r){var n=this.utils.moment(e,r.valueFormat);return n.isValid()?n.get("hour")*60*60+n.get("minute")*60+n.get("second"):void 0},mongoFormatValue:function(e,r,n){var t=this.utils.moment(e,n.valueFormat);return t.get("hour")*60*60+t.get("minute")*60+t.get("second")},elasticSearchFormatValue:function(e,r,n,t){return{script:{script:{source:"doc[".concat(t,"][0].getHour() >== params.min && doc[").concat(t,"][0].getHour() <== params.max"),params:{min:r[0],max:r[1]}}}}}},datetime:{type:"datetime",jsType:"string",valueSrc:"value",timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1,valueLabel:"Datetime",valuePlaceholder:"Enter datetime",valueLabels:[{label:"Datetime from",placeholder:"Enter datetime from"},{label:"Datetime to",placeholder:"Enter datetime to"}],formatValue:function(e,r,n,t){var i=this.utils.moment(e,n.valueFormat);return t?i.format(n.dateFormat+" "+n.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,r,n,t,i){var u=this.utils.moment(e,n.valueFormat);return this.utils.SqlString.escape(u.toDate())},spelFormatValue:function(e,r,n,t,i){var u=this.utils.moment(e,n.valueFormat),o=u.format("YYYY-MM-DD HH:mm:ss"),s="yyyy-MM-dd HH:mm:ss";return"T(java.time.LocalDateTime).parse('".concat(o,"', T(java.time.format.DateTimeFormatter).ofPattern('").concat(s,"'))")},spelImportFuncs:[{obj:{cls:["java","time","LocalDateTime"]},methodName:"parse",args:[{var:"v"},{obj:{cls:["java","time","format","DateTimeFormatter"]},methodName:"ofPattern",args:[{var:"fmt"}]}]}],spelImportValue:function(e,r,n){var t,i;if(!r)return[void 0,"No widget def to get value format"];if(!(n!=null&&(t=n.fmt)!==null&&t!==void 0&&(t=t.value)!==null&&t!==void 0&&(i=t.includes)!==null&&i!==void 0&&i.call(t," ")))return[void 0,"Invalid datetime format ".concat(JSON.stringify(n.fmt))];var u=this.utils.moment(e.value,this.utils.moment.ISO_8601);return u.isValid()?[u.format(r?.valueFormat),[]]:[void 0,"Invalid date"]},jsonLogic:function(e,r,n){return this.utils.moment(e,n.valueFormat).toDate()},toJS:function(e,r){var n=this.utils.moment(e,r.valueFormat);return n.isValid()?n.toDate():void 0},mongoFormatValue:function(e,r,n){var t=this.utils.moment(e,n.valueFormat);return t.isValid()?t.toDate():void 0}},boolean:{type:"boolean",jsType:"boolean",valueSrc:"value",labelYes:"Yes",labelNo:"No",formatValue:function(e,r,n,t){return t?e?"Yes":"No":JSON.stringify(!!e)},sqlFormatValue:function(e,r,n,t,i){return this.utils.SqlString.escape(e)},spelFormatValue:function(e,r,n,t,i){return this.utils.spelEscape(e)},defaultValue:!1,toJS:function(e,r){return e},mongoFormatValue:function(e,r,n){return e}},field:{valueSrc:"field",formatValue:function(e,r,n,t,i,u,o){return t&&o.label||e},sqlFormatValue:function(e,r,n,t,i,u){return e},spelFormatValue:function(e,r,n,t,i){return e},valueLabel:"Field to compare",valuePlaceholder:"Select field to compare"},func:{valueSrc:"func",valueLabel:"Function",valuePlaceholder:"Select function"},case_value:{valueSrc:"value",type:"case_value",spelFormatValue:function(e){return this.utils.spelEscape(e===""?null:e)},spelImportValue:function(e){return[e.value,[]]}}},zv={text:{defaultOperator:"equal",mainWidget:"text",widgets:{text:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","proximity","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},textarea:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},field:{operators:["equal","not_equal","proximity"]}}},number:{defaultOperator:"equal",mainWidget:"number",widgets:{number:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]},slider:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_null","is_not_null"]}}},date:{defaultOperator:"equal",widgets:{date:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},time:{defaultOperator:"equal",widgets:{time:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},datetime:{defaultOperator:"equal",widgets:{datetime:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},select:{mainWidget:"select",defaultOperator:"select_equals",widgets:{select:{operators:["select_equals","select_not_equals","is_null","is_not_null"]},multiselect:{operators:["select_any_in","select_not_any_in","is_null","is_not_null"]}}},multiselect:{defaultOperator:"multiselect_equals",widgets:{multiselect:{operators:["multiselect_contains","multiselect_not_contains","multiselect_equals","multiselect_not_equals","is_null","is_not_null"]}}},boolean:{defaultOperator:"equal",widgets:{boolean:{operators:["equal","not_equal","is_null","is_not_null"],widgetProps:{}},field:{operators:["equal","not_equal"]}}},"!group":{defaultOperator:"some",mainWidget:"number",widgets:{number:{widgetProps:{min:0},operators:["some","all","none","equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between"],opProps:{equal:{label:"Count =="},not_equal:{label:"Count !="},less:{label:"Count <"},less_or_equal:{label:"Count <="},greater:{label:"Count >"},greater_or_equal:{label:"Count >="},between:{label:"Count between"},not_between:{label:"Count not between"}}}}},case_value:{mainWidget:"case_value",widgets:{case_value:{}}}},qv=Rr(Rr({},Jt),{},{convertableWidgets:{number:["slider","rangeslider"],slider:["number","rangeslider"],rangeslider:["number","slider"],text:["textarea"],textarea:["text"]},formatSpelField:function(e,r,n,t,i,u){var o=this,s=t.map(function(c,f){var d=c.key,v=c.parent,g=c.fieldSeparator;return f==0?v=="[map]"?"#this[".concat(o.utils.spelEscape(d),"]"):(v=="[class]",d):v=="map"||v=="[map]"?"[".concat(o.utils.spelEscape(d),"]"):(v=="class"||v=="[class]","".concat(g).concat(d))}).join("");return i.fieldName&&(s=e),i.isSpelVariable&&(s="#"+s),s},sqlFormatReverse:function(e){if(e!=null)return"NOT("+e+")"},spelFormatReverse:function(e){if(e!=null)return"!("+e+")"},formatReverse:function(e,r,n,t,i,u){if(e!=null)return u?"NOT ("+e+")":"!("+e+")"},formatAggr:function(e,r,n,t,i,u,o,s,c,f){var d=o.labelForFormat,v=o.cardinality;if(v==0){var g=e?" HAVE ".concat(e):"";return"".concat(d," OF ").concat(r).concat(g)}else if(v==null||v==1){var h=e?" WHERE ".concat(e):"";return"COUNT OF ".concat(r).concat(h," ").concat(d," ").concat(t)}else if(v==2){var E=e?" WHERE ".concat(e):"",S=t.first(),A=t.get(1);return"COUNT OF ".concat(r).concat(E," ").concat(d," ").concat(S," AND ").concat(A)}},jsonLogic:{groupVarKey:"var",altVarKey:"var",lockedOp:"locked"},canCompareFieldWithField:function(e,r,n,t){return!0},valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}}}),uc=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t={rangeslider:Jv,treeselect:eg,treemultiselect:rg,rangeable__date:Qv("date","date")},i=Zv(r),u;try{for(i.s();!(u=i.n()).done;){var o=u.value,s=t[o];if(s)e=s(e,n);else throw new Error("Can't ".concat(n?"add":"remove"," mixin ").concat(o))}}catch(c){i.e(c)}finally{i.f()}return e},sc=function(e,r){return uc(e,r,!0)},Xv=function(e,r){return uc(e,r,!1)},Qv=function(e,r){return function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=n.types;return i=Rr(Rr({},i),{},(0,Ae.Z)({},e,Rr(Rr({},i[e]),{},{widgets:Rr({},i[e].widgets)}))),t?i[e].widgets[r]=Rr({opProps:{between:{isSpecialRange:!0,textSeparators:[null,null]},not_between:{isSpecialRange:!0,textSeparators:[null,null]}}},i[e].widgets[r]):delete i[e].widgets[r],Rr(Rr({},n),{},{types:i})}},Jv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=e.widgets,t=e.types;return n=Rr({},n),r?n.rangeslider=Rr({type:"number",jsType:"number",valueSrc:"value",valueLabel:"Range",valuePlaceholder:"Select range",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(u,o,s,c){return c?this.utils.stringifyForDisplay(u):JSON.stringify(u)},sqlFormatValue:function(u,o,s,c,f){return this.utils.SqlString.escape(u)},spelFormatValue:function(u){return this.utils.spelEscape(u)},singleWidget:"slider",toJS:function(u,o){return u}},n.rangeslider):delete n.rangeslider,t=Rr(Rr({},t),{},{number:Rr(Rr({},t.number),{},{widgets:Rr({},t.number.widgets)})}),r?t.number.widgets.rangeslider=Rr({opProps:{between:{isSpecialRange:!0},not_between:{isSpecialRange:!0}},operators:["between","not_between","is_null","is_not_null"]},t.number.widgets.rangeslider):delete t.number.widgets.rangeslider,Rr(Rr({},e),{},{widgets:n,types:t})},eg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=e.widgets,t=e.types;return n=Rr({},n),r?n.treeselect=Rr({type:"treeselect",jsType:"string",valueSrc:"value",valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(u,o,s,c){var f=o.fieldSettings.treeValues||o.fieldSettings.listValues||o.asyncListValues,d=this.utils.getTitleInListValues(f,u);return c?this.utils.stringifyForDisplay(d):JSON.stringify(u)},sqlFormatValue:function(u,o,s,c,f){return this.utils.SqlString.escape(u)},spelFormatValue:function(u){return this.utils.spelEscape(u)},toJS:function(u,o){return u}},n.treeselect):delete n.treeselect,t=Rr({},t),r?t.treeselect=Rr({mainWidget:"treeselect",defaultOperator:"select_equals",widgets:{treeselect:{operators:["select_equals","select_not_equals"]},treemultiselect:{operators:["select_any_in","select_not_any_in"]}}},t.treeselect):delete t.treeselect,Rr(Rr({},e),{},{widgets:n,types:t})},rg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=e.widgets,t=e.types;return n=Rr({},n),r?n.treemultiselect=Rr({type:"treemultiselect",jsType:"array",valueSrc:"value",valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(u,o,s,c){var f=this,d=o.fieldSettings.treeValues||o.fieldSettings.listValues||o.asyncListValues,v=u.map(function(g){return f.utils.getTitleInListValues(d,g)});return c?v.map(this.utils.stringifyForDisplay):u.map(JSON.stringify)},sqlFormatValue:function(u,o,s,c,f){var d=this;return u.map(function(v){return d.utils.SqlString.escape(v)})},spelFormatValue:function(u){return this.utils.spelEscape(u)},toJS:function(u,o){return u}},n.treemultiselect):delete n.treemultiselect,t=Rr({},t),r?t.treemultiselect=Rr({defaultOperator:"multiselect_equals",widgets:{treemultiselect:{operators:["multiselect_equals","multiselect_not_equals"]}}},t.treemultiselect):delete t.treemultiselect,Rr(Rr({},e),{},{widgets:n,types:t})},tg={addMixins:sc,removeMixins:Xv},bu={conjunctions:$v,operators:Kv,widgets:Yv,types:zv,settings:qv,ctx:Wv};bu=sc(bu,["rangeslider","treeselect","treemultiselect"]);const rt=bu;var lc="ADD_GROUP",wu="ADD_CASE_GROUP",cc="REMOVE_GROUP",fc="SET_CONJUNCTION",dc="SET_NOT",pc="ADD_RULE",vc="REMOVE_RULE",gc="SET_FIELD",hc="SET_FIELD_SRC",mc="SET_OPERATOR",yc="SET_VALUE",Ec="SET_VALUE_SRC",Oc="SET_OPERATOR_OPTION",Sc="SET_LOCK",Pu="SET_TREE",Tc="MOVE_ITEM",Rc="after",Cc="before",_u="append",Du="prepend",Ac="SET_DRAG_PROGRESS",Lc="SET_DRAG_START",Fc="SET_DRAG_END",ng=m(33973),_o=m.n(ng);function Ic(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=ag(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function ag(a,e){if(a){if(typeof a=="string")return Nc(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nc(a,e)}}function Nc(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}function bc(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function wn(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bc(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):bc(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var wc=function(e,r,n,t,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},c=u.settings.shouldCreateEmptyGroup,f=r.push(t),d=!c,v=!!(s!=null&&s.isDefaultCase),g=e;return e=Ga(e,r,n,t,ca(u).merge(i||{}),u,o),e!==g&&(!o&&!v&&(e=e.setIn(T(f,"children1"),new(ze()).OrderedMap),d&&(e=Ga(e,f,"rule",Tr(),Nn(u),u))),e=ue(e)),e},ig=function(e,r,n){e=Vu(e,r);var t=n.settings.canLeaveEmptyGroup,i=r.slice(0,-1),u=!qt(e,i);if(u&&!t&&(e=fe(e),Wt(e)&&!t)){var o=!1,s=!1;e=Ga(e,new(ze()).List,"rule",Tr(),Nn(n,void 0,void 0,o,s),n)}return e=ue(e),e},og=function(e,r,n){e=Vu(e,r);var t=n.settings.canLeaveEmptyGroup,i=r.pop(),u=e.getIn(T(i)),o=u.getIn(["properties","field"]),s=u.getIn(["properties","operator"]),c=u.getIn(["properties","value",0]),f=o?$e(n,o):null,d=s?Ur(n,s,o):null,v=o&&s&&d.cardinality!=0,g=u.get("type")=="rule_group",h=!qt(e,i),E=g?v&&f.initialEmptyWhere:t;if(h&&!E&&(g&&(e=e.deleteIn(T(i))),e=fe(e),Wt(e)&&!t)){var S=!1,A=!1;e=Ga(e,new(ze()).List,"rule",Tr(),Nn(n,void 0,void 0,S,A),n)}return e=ue(e),e},ug=function(e,r,n){return e.setIn(T(r,"properties","not"),n)},sg=function(e,r,n){return ne(e.setIn(T(r,"properties","isLocked"),n))},lg=function(e,r,n){return e.setIn(T(r,"properties","conjunction"),n)},cg=function a(e,r,n){n&&Array.isArray(n)&&(r.children1=new(ze()).OrderedMap(n.reduce(function(t,i){var u=Tr(),o=wn(wn({},i),{},{properties:Us(e,i).merge(i.properties||{}),id:u});return a(e,o,o.children1),wn(wn({},t),{},(0,Ae.Z)({},u,new(ze()).Map(o)))},{})))},Ga=function(e,r,n,t,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(n=="switch_group")throw new Error("Can't add switch_group programmatically");var s=u.settings,c=s.maxNumberOfCases,f=s.maxNumberOfRules,d=s.maxNesting,v=e.get("type"),g=v=="switch_group",h=e.getIn(T(r)),E=g?e.getIn(T(r.take(2))):null,S=T(r,"children1"),A=e.getIn(S),_=!!A&&A.size,D=_?A.size:null,P,k;n=="case_group"?(P=D,k=c):n=="group"?(P=r.size,k=d):h?.get("type")=="rule_group"||(P=ke(g?E:e),k=f);var Z=k&&P?P<k:!0,q={type:n,id:t,properties:i};cg(u,q,o);var re=n=="case_group"&&_&&A.last().get("children1")==null;if(Z){var J=new(ze()).OrderedMap((0,Ae.Z)({},t,new(ze()).Map(q)));if(!_)e=e.setIn(S,J);else if(re){var X,ae=A.last(),le=new(ze()).OrderedMap((X={},(0,Ae.Z)(X,t,new(ze()).Map(q)),(0,Ae.Z)(X,ae.get("id"),ae),X));e=e.deleteIn(T(S,"children1",ae.get("id"))),e=e.mergeIn(S,le)}else e=e.mergeIn(S,J);e=ue(e)}return e},Vu=function(e,r){return e=e.deleteIn(T(r)),e=ue(e),e},fg=function(e,r,n,t,i){var u=z(e,r),o=r.pop(),s=r.size>1?z(e,o):null,c=s?s.get("children1"):null,f=z(e,n),d=t==_u||t==Du?n:n.pop(),v=t==_u||t==Du?f:n.size>1?z(e,d):null,g=v?v.get("children1"):null;if(!s||!v||!u)return e;var h=s.get("id")==v.get("id"),E=d.size<o.size&&wa(d.toArray(),o.toArray().slice(0,d.size)),S=d.size>o.size&&wa(o.toArray(),d.toArray().slice(0,o.size)),A=null,_=null;E?A=ze().List(o.toArray().slice(d.size)):S&&(_=ze().List(d.toArray().slice(o.size)));var D=g,P=c;return S||(P=P.delete(u.get("id"))),h?D=P:E&&(D=D.updateIn(G(A,"children1"),function(k){return P})),t==Cc||t==Rc?D=ze().OrderedMap().withMutations(function(k){var Z=Ic(D.entries()),q;try{for(Z.s();!(q=Z.n()).done;){var re=(0,qe.Z)(q.value,2),J=re[0],X=re[1];J==f.get("id")&&t==Cc&&k.set(u.get("id"),u),k.set(J,X),J==f.get("id")&&t==Rc&&k.set(u.get("id"),u)}}catch(ae){Z.e(ae)}finally{Z.f()}}):t==_u?D=D.merge((0,Ae.Z)({},u.get("id"),u)):t==Du&&(D=ze().OrderedMap((0,Ae.Z)({},u.get("id"),u)).merge(D)),S&&(P=P.updateIn(G(_,"children1"),function(k){return D}),P=P.delete(u.get("id"))),!h&&!E&&(e=e.updateIn(T(o,"children1"),function(k){return P})),S||(e=e.updateIn(T(d,"children1"),function(k){return D})),e=ue(e),e},dg=function(e,r,n,t){var i=t.settings.keepInputOnChangeFieldSrc,u=e.getIn(T(r)),o=u.get("type"),s=u.get("properties"),c=s.get("field"),f=s.get("fieldType"),d=$e(t,c),v=d?.type||f;(!v||v==="!group"||v==="!struct")&&(v=null);var g=!Io.includes(v),h=i&&!pu(u,t,!0)&&g;return h?(e=e.setIn(T(r,"properties","field"),null),e=e.setIn(T(r,"properties","fieldType"),v)):e=e.setIn(T(r,"properties"),Nn(t,null,null,!1)),e=e.setIn(T(r,"properties","fieldSrc"),n),e},pg=function(e,r,n,t,i,u){var o,s;if(!n)return{tree:Vu(e,r),isInternalValueChange:s};var c=t.settings,f=c.fieldSeparator,d=c.setOpOnChangeField,v=c.showErrorMessage,g=c.keepInputOnChangeFieldSrc;Array.isArray(n)&&(n=n.join(f));var h=e.getIn(T(r,"type")),E=e.getIn(T(r,"properties")),S=h=="rule_group",A=E.get("fieldSrc"),_=$e(t,n);if(!_)return console.warn("No config for LHS ".concat(n)),{tree:e,isInternalValueChange:s};var D=_.type;(D==="!group"||D==="!struct")&&(D=null);var P=E.get("operator"),k=E.get("operatorOptions"),Z=E.get("field"),q=E.get("value"),re=E.get("valueSrc",new(ze()).List),J=E.get("valueType",new(ze()).List),X=_.type=="!group",ae=X&&_.mode=="array",le=S!=X,ee=!Z&&A&&P,ie=_&&((o=_.operators)===null||o===void 0?void 0:o.indexOf(P))!==-1?P:null,se=null,de=A==="func"?Ks(t,D):No(t,n);if(de&&de.length==1)se=de[0];else if(de&&de.length>1){var pe=Ic(d||[]),me;try{for(pe.s();!(me=pe.n()).done;){var Se=me.value;if(Se=="keep"&&!le?se=ie:Se=="default"?se=su(t,n,!1):Se=="first"&&(se=fu(t,n)),se)break}}catch(tr){pe.e(tr)}finally{pe.f()}}if(!X&&!_.operators)return console.warn("Type ".concat(_.type," is not supported")),{tree:e,isInternalValueChange:s};if(S&&!X&&(e=e.setIn(T(r,"type"),"rule"),e=e.deleteIn(T(r,"children1")),e=e.setIn(T(r,"properties"),new(ze()).OrderedMap)),X){e=e.setIn(T(r,"type"),"rule_group");var Ne=ka(t,t,E,n,se,"field",!0),je=Ne.canReuseValue,Me=Ne.newValue,Fe=Ne.newValueSrc,Ke=Ne.newValueType,Qe=Ne.operatorCardinality,Be=ca(t,_).merge({field:n,fieldSrc:"field",mode:_.mode});ae&&(Be=Be.merge({operator:se,value:Me,valueSrc:Fe,valueType:Ke})),e=e.setIn(T(r,"children1"),new(ze()).OrderedMap),e=e.setIn(T(r,"properties"),Be),_.initialEmptyWhere&&Qe==1||(e=Ga(e,r,"rule",Tr(),Nn(t,n),t)),e=ue(e)}else e=e.updateIn(T(r,"properties"),function(tr){return tr.withMutations(function(Ye){var Or=ka(t,t,Ye,n,se,"field",!0),br=Or.canReuseValue,dt=Or.newValue,Zt=Or.newValueSrc,Ot=Or.newValueType,Ht=Or.newValueError;v&&(Ye=Ye.set("valueError",Ht));var sn=br?k:Wi(t,se,n);return s=u,Ye.set("field",n).delete("fieldType").set("fieldSrc",A).set("operator",se).set("operatorOptions",sn).set("value",dt).set("valueSrc",Zt).set("valueType",Ot).delete("asyncListValues")})});return{tree:e,isInternalValueChange:s}},vg=function(e,r,n,t){var i=t.settings.showErrorMessage,u=e.getIn(T(r,"properties")),o=e.getIn(T(r,"children1")),s=u.get("field"),c=u.get("fieldSrc"),f=$e(t,s),d=f?.type=="!group",v=Ur(t,n,s),g=v?nt(v.cardinality,1):null;return e=e.updateIn(T(r,"properties"),function(h){return h.withMutations(function(E){var S=E.get("field"),A=E.get("operatorOptions"),_=E.get("value",new(ze()).List),D=E.get("valueSrc",new(ze()).List),P=E.get("operator"),k=ka(t,t,E,S,n,"operator",!0),Z=k.canReuseValue,q=k.newValue,re=k.newValueSrc,J=k.newValueType,X=k.newValueError;i&&(E=E.set("valueError",X));var ae=Z?A:Wi(t,n,S);return Z||(E=E.delete("asyncListValues")),E.set("operator",n).set("operatorOptions",ae).set("value",q).set("valueSrc",re).set("valueType",J)})}),d&&g==0&&o.size==0&&(e=Ga(e,r,"rule",Tr(),Nn(t,s),t)),e},gg=function(e,r,n,t,i,u,o,s){var c=u.settings,f=c.fieldSeparator,d=c.showErrorMessage,v,g=e.getIn(T(r,"properties","valueSrc",n+""))||null;g==="field"&&Array.isArray(t)&&(t=t.join(f));var h=e.getIn(T(r,"properties","field"))||null,E=e.getIn(T(r,"properties","operator"))||null,S=Ur(u,E,h),A=E?nt(S.cardinality,1):null,_=!1,D=i||Eg(t,g,u),P=!1,k=Lo(u,h,h,E,t,D,g,o,P,_,!0),Z=(0,qe.Z)(k,2),q=Z[0],re=Z[1],J=!q;if(re!==t&&(t=re),d){var X=Qr(u,h,E,g),ae=Ut(u,h,E,X,g),le=Array.from({length:A},function(je,Me){return e.getIn(T(r,"properties","valueSrc",Me+""))||null});if(S&&S.validateValues&&le.filter(function(je){return je=="value"||je==null}).length==A){var ee=Array.from({length:A},function(je,Me){return Me==n?t:e.getIn(T(r,"properties","value",Me+""))||null}),ie=ae&&ae.toJS?ee.map(function(je){return ae.toJS.call(u.ctx,je,ae)}):ee,se=S.validateValues(ie);e=e.setIn(T(r,"properties","valueError",A),se)}}var de=e.getIn(T(r,"properties","value"));de||(e=e.setIn(T(r,"properties","value"),new(ze()).List(new Array(A))).setIn(T(r,"properties","valueType"),new(ze()).List(new Array(A))).setIn(T(r,"properties","valueError"),new(ze()).List(new Array(A))));var pe=e.getIn(T(r,"properties","value",n+"")),me=e.getIn(T(r,"properties","valueError",n)),Se=pe==null,Ne=!!me;return(J||d)&&(e=e.deleteIn(T(r,"properties","asyncListValues")),typeof t>"u"?(e=e.setIn(T(r,"properties","value",n+""),void 0),e=e.setIn(T(r,"properties","valueType",n+""),null)):(o&&(e=e.setIn(T(r,"properties","asyncListValues"),o)),e=e.setIn(T(r,"properties","value",n+""),t),e=e.setIn(T(r,"properties","valueType",n+""),D),v=s&&!Se&&!Ne)),d&&(e=e.setIn(T(r,"properties","valueError",n),q)),s&&(J&&Ne||!J&&!Ne)&&(e=e.setIn(T(r,"properties","valueError",n),q),v=!1),{tree:e,isInternalValueChange:v}},hg=function(e,r,n,t,i){var u=i.settings.showErrorMessage,o=e.getIn(T(r,"properties","field"))||null,s=e.getIn(T(r,"properties","fieldSrc"))||null,c=e.getIn(T(r,"properties","operator"))||null;if(e=e.setIn(T(r,"properties","value",n+""),void 0),e=e.setIn(T(r,"properties","valueType",n+""),null),e=e.deleteIn(T(r,"properties","asyncListValues")),u){e=e.setIn(T(r,"properties","valueError",n),null);var f=Ur(i,c,o),d=c?nt(f.cardinality,1):null;f.validateValues&&(e=e.setIn(T(r,"properties","valueError",d),null))}if(typeof t>"u"?e=e.setIn(T(r,"properties","valueSrc",n+""),null):e=e.setIn(T(r,"properties","valueSrc",n+""),t),t){var v=e.getIn(T(r,"properties")),g=ka(i,i,v,o,c,"valueSrc",!0),h=g.canReuseValue,E=g.newValue,S=g.newValueSrc,A=g.newValueType,_=g.newValueError;!h&&S.get(n)==t&&(e=e.setIn(T(r,"properties","value",n+""),E.get(n)),e=e.setIn(T(r,"properties","valueType",n+""),A.get(n)))}return e},mg=function(e,r,n,t){return e.setIn(T(r,"properties","operatorOptions",n),t)},yg=function(e,r){var n=r.settings.canLeaveEmptyGroup;return n||(e=fe(e)),e},Eg=function(e,r,n){var t=null;if(e){if(r==="field"){var i=$e(n,e);i&&(t=i.type)}else if(r==="func"){var u=e.get("func");if(u){var o=Ft(n,u);o&&(t=o.returnType)}}}return t},Og=function(e,r){var n=e.getIn(T(r,"properties","field"))||null;return n},Pc={dragging:{id:null,x:null,y:null,w:null,h:null},mousePos:{},dragStart:{id:null}},Sg=function(e,r){if(!e||!e.type)return null;var n=["config","asyncListValues","__isInternal"],t=[Pu,Lc,Ac,Fc],i=_o()(Xe()(e,n),Pi),u=e.path&&Og(r.tree,e.path)||e.field;if(u){var o;(o=u)!==null&&o!==void 0&&o.toJS&&(u=u.toJS()),i.affectedField=u}return(t.includes(e.type)||e.type.indexOf("@@redux")==0)&&(i=null),i};const Tg=function(a,e,r,n){var t=e,i=wn({tree:t},Pc);return function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i,o=arguments.length>1?arguments[1]:void 0,s={__isInternalValueChange:void 0,__lastAction:void 0},c={},f=Sg(o,u);switch(o?.type){case Pu:{var d=r(o.config,o.tree);c.tree=d;break}case wu:{c.tree=wc(u.tree,o.path,"case_group",o.id,o.properties,o.config,o.children,o.meta);break}case lc:{c.tree=wc(u.tree,o.path,"group",o.id,o.properties,o.config,o.children,o.meta);break}case cc:{c.tree=ig(u.tree,o.path,o.config);break}case pc:{c.tree=Ga(u.tree,o.path,o.ruleType,o.id,o.properties,o.config,o.children);break}case vc:{c.tree=og(u.tree,o.path,o.config);break}case fc:{c.tree=lg(u.tree,o.path,o.conjunction);break}case dc:{c.tree=ug(u.tree,o.path,o.not);break}case gc:{var v=pg(u.tree,o.path,o.field,o.config,o.asyncListValues,o.__isInternal),g=v.tree,h=v.isInternalValueChange;c.__isInternalValueChange=h,c.tree=g;break}case hc:{c.tree=dg(u.tree,o.path,o.srcKey,o.config);break}case Sc:{c.tree=sg(u.tree,o.path,o.lock);break}case mc:{c.tree=vg(u.tree,o.path,o.operator,o.config);break}case yc:{var E=gg(u.tree,o.path,o.delta,o.value,o.valueType,o.config,o.asyncListValues,o.__isInternal),S=E.tree,A=E.isInternalValueChange;c.__isInternalValueChange=A,c.tree=S;break}case Ec:{c.tree=hg(u.tree,o.path,o.delta,o.srcKey,o.config);break}case Oc:{c.tree=mg(u.tree,o.path,o.name,o.value);break}case Tc:{c.tree=fg(u.tree,o.fromPath,o.toPath,o.placement,o.config);break}case Lc:{c.dragStart=o.dragStart,c.dragging=o.dragging,c.mousePos=o.mousePos;break}case Ac:{c.mousePos=o.mousePos,c.dragging=o.dragging;break}case Fc:{c.tree=yg(u.tree,a),c=wn(wn({},c),Pc);break}default:break}return f&&(c.__lastAction=f),n&&c.tree&&u.tree&&n(u.tree),wn(wn(wn({},u),s),c)}};var Rg=function(e,r){return{type:Pu,tree:r,config:e}},Cg=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"rule",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null;return{type:pc,ruleType:t,children:i,path:ut(r),id:Tr(),properties:Nn(e,u).merge(n||{}),config:e}},Ag=function(e,r){return{type:vc,path:ut(r),config:e}},Lg=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:wu,path:ut(r),children:t,id:Tr(),properties:ca(e).merge(n||{}),config:e,meta:{isDefaultCase:!0}}},Fg=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:wu,path:ut(r),children:t,id:Tr(),properties:ca(e).merge(n||{}),config:e}},Ig=function(e,r,n){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:lc,path:ut(r),children:t,id:Tr(),properties:ca(e).merge(n||{}),config:e}},Ng=function(e,r){return{type:cc,path:ut(r),config:e}},bg=function(e,r,n,t){return{type:Tc,fromPath:ut(r),toPath:ut(n),placement:t,config:e}},wg=function(e,r,n){return{type:fc,path:ut(r),conjunction:n}},Pg=function(e,r,n){return{type:dc,path:ut(r),not:n}},_g=function(e,r,n){return{type:Sc,path:ut(r),lock:n}},Dg=function(e,r,n,t,i){return{type:gc,path:ut(r),field:n,config:e,asyncListValues:t,__isInternal:i}},Vg=function(e,r,n){return{type:hc,path:ut(r),srcKey:n,config:e}},Mg=function(e,r,n){return{type:mc,path:ut(r),operator:n,config:e}},jg=function(e,r,n,t,i,u,o){return{type:yc,path:ut(r),delta:n,value:t,valueType:i,asyncListValues:u,config:e,__isInternal:o}},kg=function(e,r,n,t){return{type:Ec,path:ut(r),delta:n,srcKey:t,config:e}},xg=function(e,r,n,t){return{type:Oc,path:ut(r),name:n,value:t,config:e}};function _c(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Do(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_c(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):_c(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var pr=Do(Do(Do(Do({},Y),O),W),{},{ConfigMixins:tg}),Ug=m(17225),H=m.n(Ug);const Gg=Tg,$i=C.createContext();var Bg=m(44722),Ki=m(91104),DE="ADD_GROUP",VE="ADD_CASE_GROUP",ME="REMOVE_GROUP",jE="SET_CONJUNCTION",kE="SET_NOT",xE="ADD_RULE",UE="REMOVE_RULE",GE="SET_FIELD",BE="SET_FIELD_SRC",WE="SET_OPERATOR",ZE="SET_VALUE",HE="SET_VALUE_SRC",$E="SET_OPERATOR_OPTION",KE="SET_LOCK",YE="SET_TREE",zE="MOVE_ITEM",Vo="after",Mo="before",Ba="append",pi="prepend",Wg="SET_DRAG_PROGRESS",Zg="SET_DRAG_START",Hg="SET_DRAG_END",$g=function(e,r){return{type:Wg,mousePos:e,dragging:r}},Kg=function(e,r,n){return{type:Zg,dragStart:e,dragging:r,mousePos:n}},Yg=function(){return{type:Hg}},Dc=B,zg=$,qg=K;function Mu(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Xg(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function Xg(a,e){if(a){if(typeof a=="string")return Vc(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vc(a,e)}}function Vc(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}var Mc=pr.ConfigUtils,Qg=Mc.extendConfig,jo=Mc.configKeys,Jg=function(e){return xt()(e,jo)},eh=function(){var e=new Map,r=2,n=0,t=function(c){var f=Qg(c,++n);return e.size+1>r&&e.delete(e.keys()[0]),e.set(c,f),f},i=function(c){var f=Mu(e.keys()),d;try{var v=function(){var E=d.value,S=e.get(E),A=jo.map(function(_){return S[_]===c[_]}).filter(function(_){return!_}).length===0;if(A)return{v:E}};for(f.s();!(d=f.n()).done;){var g=v();if((0,gr.Z)(g)==="object")return g.v}}catch(h){f.e(h)}finally{f.f()}return c},u=function(c){var f=Mu(e.keys()),d;try{var v=function(){var D=d.value,P=jo.map(function(k){return D[k]===c[k]}).filter(function(k){return!k}).length===0;if(P)return{v:e.get(D)}};for(f.s();!(d=f.n()).done;){var g=v();if((0,gr.Z)(g)==="object")return g.v}}catch(_){f.e(_)}finally{f.f()}var h=Mu(e.values()),E;try{var S=function(){var D=E.value,P=jo.map(function(k){return D[k]===c[k]}).filter(function(k){return!k}).length===0;if(P)return{v:D}};for(h.s();!(E=h.n()).done;){var A=S();if((0,gr.Z)(A)==="object")return A.v}}catch(_){h.e(_)}finally{h.f()}return null},o=function(c){return u(c)||t(c)};return{getExtended:function(c){return o(Jg(c))},getBasic:i}},rh=function(e,r){return typeof e>"u"?r:e},ko=function(e,r,n){if(!r||e.length<=r)return e;var t=e.substr(0,r-1);return(n?t.substr(0,t.lastIndexOf(" ")):t)+"..."},Wa=function(e,r){return e===r?!0:e.equals(r)},Za=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e===r?!0:Array.isArray(e)?th(e,r,n):e&&typeof e.equals=="function"?e.equals(r):(0,gr.Z)(e)==="object"?nh(e,r,n):e===r};function th(a,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a===e)return!0;if(!a||!e)return!1;var n=a.length;if(e.length!==n)return!1;for(var t=0;t<n;t++){var i=r?Za(a[t],e[t],r):a[t]===e[t];if(!i)return!1}return!0}function nh(a,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a===e)return!0;if(!a||!e)return!1;var n=Object.keys(a),t=Object.keys(e),i=n.length;if(t.length!==i)return!1;for(var u=0;u<i;u++){var o=n[u],s=r?Za(a[o],e[o],r):a[o]===e[o];if(!s)return!1}return!0}var ah=function(){return typeof process<"u"&&process.env&&!1},ih=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=e??ah();return r?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}},oh=ih(),jc=pr.validateAndFixTree,uh=function(){var e,r,n;return function(t,i){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return i?(t.__configId===n&&(Wa(i,e)||Wa(i,r))||(n=t.__configId,e=i,o===!1?r=jc(i,null,t,u||t,!1,!1):r=jc(i,null,t,u||t)),r):null}},sh=function(e){if(e._reactRootContainer)return"root";if(Object.getOwnPropertyNames(e).filter(function(r){return r.startsWith("__reactContainer")}).length>0)return"container"},lh=function a(e){if(e){var r=sh(e);return r!==void 0?r:a(e.parentNode)}},kc=function(e){return lh(e)==="root"},ju=function(e,r){return function(n,t){var i=e.props,u=e.state,o=n!=i||t!=u;if(o&&u==t&&i!=n){var s=[];for(var c in n){var f=n[c]!=i[c];f&&(r[c]=="ignore"?f=!1:r[c]=="shallow_deep"?f=!Za(n[c],i[c],!0):r[c]=="shallow"?f=!Za(n[c],i[c]):typeof r[c]=="function"&&(f=r[c](n[c],i[c],t))),f&&s.push(c)}s.length||(o=!1)}return o}},vi=function(e){return function(r,n){return!Za(e.props,r)||!Za(e.state,n)}},ch=function(){var e=C.version.split(".").map(parseInt.bind(null,10));return e[0]==16&&e[1]<3||e[0]<16},Pt=function(e){if(e.shouldComponentUpdate||(e.shouldComponentUpdate=vi(e)),ch())e.componentWillReceiveProps=function(t){e.onPropsChanged(t)};else{var r=e.shouldComponentUpdate,n=function(i,u){var o=!Za(e.props,i);o&&e.onPropsChanged(i);var s=r.call(e,i,u);return s};e.shouldComponentUpdate=n.bind(e)}},xc=function(e,r,n){return _o()(e,function(t){return function(){for(var i=arguments.length,u=new Array(i),o=0;o<i;o++)u[o]=arguments[o];return n(t.apply(void 0,[r].concat(u)))}})};function Uc(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function ku(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uc(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Uc(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function fh(a){var e=dh();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function dh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Gc=function(a){(0,Fr.Z)(r,a);var e=fh(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),t.shouldComponentUpdate=ju((0,Lr.Z)(t),{tree:function(u){return!(u===t.oldValidatedTree&&t.oldValidatedTree===t.validatedTree)}}),Pt((0,Lr.Z)(t)),t._updateActions(n),t.validatedTree=n.getMemoizedTree(n.config,n.tree,void 0,n.sanitizeTree),t.oldValidatedTree=t.validatedTree,t}return(0,Ar.Z)(r,[{key:"_updateActions",value:function(t){var i=t.config,u=t.dispatch;this.actions=xc(ku(ku(ku({},Dc),zg),qg),i,u)}},{key:"onPropsChanged",value:function(t){var i=t.onChange,u=this.props.config,o=t.tree,s=this.props.tree,c=t.config;this.oldValidatedTree=this.validatedTree,this.validatedTree=o,u!==c&&(this._updateActions(t),this.validatedTree=t.getMemoizedTree(c,o,u));var f=!Wa(this.validatedTree,this.oldValidatedTree);if(f){var d=t.getBasicConfig(c);i&&i(this.validatedTree,d,t.__lastAction)}}},{key:"render",value:function(){var t=this.props,i=t.config,u=t.renderBuilder,o=t.dispatch,s=t.__isInternalValueChange,c={tree:this.validatedTree,actions:this.actions,config:i,dispatch:o,__isInternalValueChange:s};return u(c)}}]),r}(C.Component);Gc.propTypes={config:H().object.isRequired,onChange:H().func,renderBuilder:H().func,tree:H().any};var Bc=(0,Ki.$j)(function(a){return{tree:a.tree,__isInternalValueChange:a.__isInternalValueChange,__lastAction:a.__lastAction}},null,null,{context:$i})(Gc);Bc.displayName="ConnectedQuery";const ph=Bc;function vh(a){var e=gh();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function gh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Wc=pr.DefaultUtils.defaultRoot,Zc=function(a){(0,Fr.Z)(r,a);var e=vh(r);function r(n,t){var i;(0,Cr.Z)(this,r),i=e.call(this,n,t),i.setLastTree=function(_){i.prevTree&&(i.prevprevTree=i.prevTree),i.prevTree=_},i.shouldComponentUpdate=ju((0,Lr.Z)(i),{value:function(D,P,k){return!1}}),Pt((0,Lr.Z)(i));var u=eh(),o=u.getExtended,s=u.getBasic;i.getMemoizedConfig=o,i.getBasicConfig=s,i.getMemoizedTree=uh();var c=i.getMemoizedConfig(n),f=c.settings.shouldCreateEmptyGroup,d=!f,v=Wc(c,d),g=!!n.value,h=n.value||v,E=i.getMemoizedTree(c,h,void 0,g),S=Gg(c,E,i.getMemoizedTree,i.setLastTree),A=(0,Bg.createStore)(S);return i.config=c,i.state={store:A},i.QueryWrapper=function(_){return c.settings.renderProvider(_,c.ctx)},i}return(0,Ar.Z)(r,[{key:"onPropsChanged",value:function(t){var i=this.props,u=this.config,o=this.getMemoizedConfig(t),s=u!==o,c=this.state.store.getState().tree,f=!Wa(t.value,this.props.value)&&!Wa(t.value,c),d=f?t.value||Wc(t):c,v=f&&!Wa(t.value,this.prevTree)&&!Wa(t.value,this.prevprevTree);if(this.sanitizeTree=v||s,s&&(i.settings.renderProvider!==t.settings.renderProvider&&(this.QueryWrapper=function(h){return o.settings.renderProvider(h,o.ctx)}),this.config=o),f||s){var g=this.getMemoizedTree(o,d,u,this.sanitizeTree);this.state.store.dispatch(Dc.setTree(o,g))}}},{key:"render",value:function(){var t=this.props,i=t.renderBuilder,u=t.get_children,o=t.onChange,s=this.state.store,c=this.config,f=this.QueryWrapper;return C.createElement(f,{config:c},C.createElement(Ki.zt,{store:s,context:$i},C.createElement(ph,{config:c,getMemoizedTree:this.getMemoizedTree,getBasicConfig:this.getBasicConfig,sanitizeTree:this.sanitizeTree,onChange:o,renderBuilder:i||u})))}}]),r}(C.Component);Zc.propTypes={conjunctions:H().object.isRequired,fields:H().object.isRequired,types:H().object.isRequired,operators:H().object.isRequired,widgets:H().object.isRequired,settings:H().object.isRequired,ctx:H().object.isRequired,onChange:H().func,renderBuilder:H().func,value:H().any};var qr=m(19349),hh=m(77814),vn=m.n(hh);function mh(a){var e=yh();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function yh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Eh=pr.ConfigUtils.getFieldConfig,Oh=function(e){var r;return r=function(n){(0,Fr.Z)(i,n);var t=mh(i);function i(u){var o;return(0,Cr.Z)(this,i),o=t.call(this,u),o.dummyFn=function(){},o.removeSelf=function(){o.props.actions.removeRule(o.props.path)},o.setLock=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;o.props.actions.setLock(o.props.path,s)},o.setField=function(s,c,f){o.props.actions.setField(o.props.path,s,c,f)},o.setFieldSrc=function(s){o.props.actions.setFieldSrc(o.props.path,s)},o.setOperator=function(s){o.props.actions.setOperator(o.props.path,s)},o.setOperatorOption=function(s,c){o.props.actions.setOperatorOption(o.props.path,s,c)},o.setValue=function(s,c,f,d,v){o.props.actions.setValue(o.props.path,s,c,f,d,v)},o.setValueSrc=function(s,c){o.props.actions.setValueSrc(o.props.path,s,c)},o.pureShouldComponentUpdate=vi((0,Lr.Z)(o)),o.dummyFn.isDummyFn=!0,o}return(0,Ar.Z)(i,[{key:"shouldComponentUpdate",value:function(o,s){var c=this.props,f=this.state,d=this.pureShouldComponentUpdate(o,s);if(d&&f==s&&c!=o){var v=o.dragging.id||c.dragging.id,g=v==o.id,h=[];for(var E in o){var S=o[E]!=c[E];E=="dragging"&&!g&&(S=!1),S&&h.push(E)}h.length||(d=!1)}return d}},{key:"render",value:function(){var o=this.props.dragging.id==this.props.id,s=Eh(this.props.config,this.props.field),c=this.props.fieldType||s?.type||null,f=this.props.config.settings.showErrorMessage,d=s&&s.type=="!struct",v=!o&&this.props.isDraggingTempo,g=this.props.valueError,h=g&&g.toArray().filter(function(S){return!!S}).shift()||null,E=h!=null&&f;return C.createElement("div",{className:vn()("group-or-rule-container","rule-container",E?"rule-with-error":null),"data-id":this.props.id},[o?C.createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,setField:this.dummyFn,setFieldSrc:this.dummyFn,setOperator:this.dummyFn,setOperatorOption:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:c,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueType:this.props.valueType||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,C.createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:o,isDraggingTempo:v,onDragStart:this.props.onDragStart,setLock:v?this.dummyFn:this.setLock,removeSelf:v?this.dummyFn:this.removeSelf,setField:v?this.dummyFn:this.setField,setFieldSrc:v?this.dummyFn:this.setFieldSrc,setOperator:v?this.dummyFn:this.setOperator,setOperatorOption:v?this.dummyFn:this.setOperatorOption,setValue:v?this.dummyFn:this.setValue,setValueSrc:v?this.dummyFn:this.setValueSrc,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:c,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueType:this.props.valueType||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),i}(C.Component),r.propTypes={id:H().string.isRequired,groupId:H().string,config:H().object.isRequired,path:H().any.isRequired,operator:H().string,field:H().any,fieldSrc:H().string,fieldType:H().string,actions:H().object.isRequired,onDragStart:H().func,value:H().any,valueSrc:H().any,asyncListValues:H().array,valueError:H().any,operatorOptions:H().object,reordableNodesCnt:H().number,parentField:H().string,isLocked:H().bool,isTrueLocked:H().bool,dragging:H().object,isDraggingTempo:H().bool},r};const Sh=function(a){var e=(0,Ki.$j)(function(r){return{dragging:r.dragging}},null,null,{context:$i})(Oh(a));return e.displayName="ConnectedRuleContainer",e};function Th(a){var e=Rh();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Rh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Hc=pr.clone,Ch=pr.TreeUtils.getFlatTree,xu=!1,Ah=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return r=function(t){(0,Fr.Z)(u,t);var i=Th(u);function u(o){var s;return(0,Cr.Z)(this,u),s=i.call(this,o),s._getEventTarget=function(c,f){return c&&c.__mocked_window||document.body||window},s.onDragStart=function(c,f,d){var v=f.closest(".query-builder");s._isUsingLegacyReactDomRender===void 0&&(s._isUsingLegacyReactDomRender=kc(v)),document.body.classList.add("qb-dragging"),v.classList.add("qb-dragging");var g=v.closest(".query-builder-container")||v;g=s._getScrollParent(g)||document.body;var h=g.scrollTop,E=s._getDraggableNodeEl(v),S=s._getPlaceholderNodeEl(v),A=v.querySelectorAll(".group--children"),_=A.length?A[0]:null,D;_&&(D=window.getComputedStyle(_,null).getPropertyValue("padding-left"),D=parseInt(D));var P={id:c,x:f.offsetLeft,y:f.offsetTop,w:f.offsetWidth,h:f.offsetHeight,itemInfo:s.tree.items[c],paddingLeft:D},k={id:c,x:f.offsetLeft,y:f.offsetTop,scrollTop:h,clientX:d.clientX,clientY:d.clientY,itemInfo:Hc(s.tree.items[c]),treeEl:v,treeElContainer:g},Z={clientX:d.clientX,clientY:d.clientY},q=s._getEventTarget(d,k);s.eventTarget=q,q.addEventListener("mousemove",s.onDrag),q.addEventListener("mouseup",s.onDragEnd),s.props.setDragStart(k,P,Z)},s.onDrag=function(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,d=Object.assign({},s.props.dragging),v=s.props.dragStart,g=d.paddingLeft,h=v.treeElContainer,E=h.scrollTop;if(d.itemInfo=s.tree.items[d.id],!!d.itemInfo){var S={clientX:c.clientX,clientY:c.clientY},A={clientX:v.clientX,clientY:v.clientY};if(c.__mock_dom){var _=v.treeEl,D=s._getDraggableNodeEl(_),P=s._getPlaceholderNodeEl(_);c.__mock_dom({treeEl:_,dragEl:D,plhEl:P})}if(!v.plX){var k=v.treeEl,Z=s._getPlaceholderNodeEl(k);Z&&(v.plX=Z.getBoundingClientRect().left+window.scrollX,v.plY=Z.getBoundingClientRect().top+window.scrollY)}var q=v.x,re=v.y,J=v.clientX,X=v.clientY,ae=v.scrollTop,le={x:q+(c.clientX-J),y:re+(c.clientY-X)+(E-ae)};d.x=le.x,d.y=le.y,d.paddingLeft=g,d.mousePos=S,d.startMousePos=A,s.props.setDragProgress(S,d);var ee=f?s.handleDrag(d,c,n):!1;ee||c.preventDefault&&c.preventDefault()}},s.onDragEnd=function(){var c=s.props.dragStart.treeEl;s.props.setDragEnd(),c.classList.remove("qb-dragging"),document.body.classList.remove("qb-dragging"),s._cacheEls={};var f=s.eventTarget||s._getEventTarget();f.removeEventListener("mousemove",s.onDrag),f.removeEventListener("mouseup",s.onDragEnd)},s.pureShouldComponentUpdate=vi((0,Lr.Z)(s)),Pt((0,Lr.Z)(s)),s.onPropsChanged(o),s}return(0,Ar.Z)(u,[{key:"onPropsChanged",value:function(s){this.tree=Ch(s.tree)}},{key:"shouldComponentUpdate",value:function(s,c){var f=this.props,d=this.state,v=this.pureShouldComponentUpdate(s,c);if(v&&d==c&&f!=s){var g=[];for(var h in s){var E=s[h]!=f[h];E&&h!="dragging"&&h!="mousePos"&&g.push(h)}g.length||(v=!1)}return v}},{key:"componentDidUpdate",value:function(s,c){var f=this.props.dragging,d=this.props.dragStart;if(xu=!1,d&&d.id&&(f.itemInfo=this.tree.items[f.id],f.itemInfo&&(f.itemInfo.index!=d.itemInfo.index||f.itemInfo.parent!=d.itemInfo.parent))){var v=d.treeEl,g=d.treeElContainer,h=this._getPlaceholderNodeEl(v,!0);if(h){var E=h.getBoundingClientRect().left+window.scrollX,S=h.getBoundingClientRect().top+window.scrollY,A=d.plX,_=d.plY,D=g.scrollTop;d.plX=E,d.plY=S,d.itemInfo=Hc(f.itemInfo),d.y=h.offsetTop,d.x=h.offsetLeft,d.clientY+=S-_,d.clientX+=E-A,g!=document.body&&(d.scrollTop=D),this.onDrag(this.props.mousePos,!1)}}}},{key:"_getNodeElById",value:function(s,c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(c==null)return null;this._cacheEls||(this._cacheEls={});var d=this._cacheEls[c];return d&&document.contains(d)&&!f||(d=s.querySelector('.group-or-rule-container[data-id="'+c+'"]'),this._cacheEls[c]=d),d}},{key:"_getDraggableNodeEl",value:function(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var f=this._cacheEls.draggable;if(f&&document.contains(f)&&!c)return f;var d=s.getElementsByClassName("qb-draggable");return f=d.length?d[0]:null,this._cacheEls.draggable=f,f}},{key:"_getPlaceholderNodeEl",value:function(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var f=this._cacheEls.placeholder;if(f&&document.contains(f)&&!c)return f;var d=s.getElementsByClassName("qb-placeholder");return f=d.length?d[0]:null,this._cacheEls.placeholder=f,f}},{key:"_isScrollable",value:function(s){var c=window.getComputedStyle(s)["overflow-y"];return(c==="scroll"||c==="auto")&&s.scrollHeight>s.offsetHeight}},{key:"_getScrollParent",value:function(s){return s==null?null:s===document.body||this._isScrollable(s)?s:this._getScrollParent(s.parentNode)}},{key:"handleDrag",value:function(s,c,f){var d=this,v=!0,g=s.itemInfo,h=s.paddingLeft,E=null,S=this.props.dragStart.treeEl,A=s.id,_=this._getDraggableNodeEl(S),D=this._getPlaceholderNodeEl(S),P,k,Z,q;if(_&&D){if(P=_.getBoundingClientRect(),k=D.getBoundingClientRect(),!k.width)return;var re={hrz:0,vrt:0};P.top<k.top?re.vrt=-1:P.bottom>k.bottom&&(re.vrt=1),P.left>k.left?re.hrz=1:P.left<k.left&&(re.hrz=-1),q=S.getBoundingClientRect();var J={x:q.left+(q.right-q.left)/2,y:re.vrt>=0?P.bottom:P.top},X;if(c.__mocked_hov_container)X=c.__mocked_hov_container;else{var ae=document.elementFromPoint(J.x,J.y-1);if(X=ae?ae.closest(".group-or-rule-container"):null,!X&&ae&&ae.classList.contains("query-builder-container")){var le,ee=ae==null||(le=ae.firstChild)===null||le===void 0?void 0:le.firstChild;ee&&ee.classList.contains("group-or-rule-container")&&(X=ee)}}if(!X)oh.log("out of tree bounds!");else{var ie=X.classList.contains("group-container"),se=X.getAttribute("data-id"),de=X,pe=!1,me=!1;if(de){Z=de.getBoundingClientRect();var Se=Z.bottom-Z.top,Ne=this.tree.items[se];if(!Ne)throw new Error("There is an issue with rendering. If you use Next.js, please check getServerSideProps() method.");var je=null,Me=null,Fe=null,Ke=null;if(re.vrt==0)Fe=g,Me=D,Me&&(je=Me.getBoundingClientRect());else if(ie){if(re.vrt>0){var Qe=X.getElementsByClassName("group--header"),Be=Qe.length?Qe[0]:null;if(Be){var tr=Be.getBoundingClientRect(),Ye=tr.bottom-tr.top,Or=P.bottom-tr.top>Ye*3/4;Or&&Ne.top>s.itemInfo.top&&(Fe=Ne,je=tr,Me=Be,me=!0)}}else if(re.vrt<0&&Ne.lev>=g.lev){var br=Z.bottom-P.top>=2;br&&Ne.top<s.itemInfo.top&&(Fe=Ne,je=Z,Me=de,pe=!0)}if(!me&&!pe||v){var dt=re.vrt<0?Z.bottom-P.top>Se-5:P.bottom-Z.top>Se-5;dt&&(!me&&!pe&&(Fe=Ne,je=Z,Me=de),v&&(Ke=Ne))}}else{var Zt=re.vrt<0?Z.bottom-P.top>Se/2:P.bottom-Z.top>Se/2;Zt&&(Fe=Ne,je=Z,Me=de)}var Ot=Fe&&Fe.id==A;if(je){var Ht=P.left-q.left,sn=je.left-q.left,$t=sn/h,st=Math.max(0,Math.round(Ht/h)),Gr=[],lt=[];if(!Ot){if(ie&&(pe?Gr.push([Ba,Fe,Fe.lev+1]):me&&Gr.push([pi,Fe,Fe.lev+1]),v&&Ke)){var Yn=Ke.lev==0,Ha=Ke.type=="case_group"&&g.type!="case_group",pa=Ke.prev&&this.tree.items[Ke.prev].caseId,zn=Ke.next&&this.tree.items[Ke.next].caseId;g.caseId==pa&&(pa=null),g.caseId==zn&&(zn=null);var gn=pa&&this.tree.items[pa],va=zn&&this.tree.items[zn];re.vrt>0?Yn?lt.push([Ba,Ke,Ke.lev+1]):Ha&&va?lt.push([pi,va,va.lev+1]):lt.push([Vo,Ke,Ke.lev]):re.vrt<0&&(Yn?lt.push([pi,Ke,Ke.lev+1]):Ha&&gn?lt.push([Ba,gn,gn.lev+1]):lt.push([Mo,Ke,Ke.lev]))}!pe&&!me&&(re.vrt<0?Gr.push([Mo,Fe,Fe.lev]):re.vrt>0&&Gr.push([Vo,Fe,Fe.lev]))}var $a=function(ln){var cn=ln[1],ga=g.caseId?d.tree.items[g.caseId]:null,Xn=cn.caseId?d.tree.items[cn.caseId]:null;return[].concat((0,we.Z)(ln),[ga,Xn])};Gr=Gr.map($a),lt=lt.map($a),Gr=Gr.filter(function(Vr){var ln=Vr[0],cn=Vr[1];if((ln==Mo||ln==Vo)&&cn.parent==null||cn.collapsed&&(ln==Ba||ln==pi))return!1;var ga=cn.id==g.id;if(!ga){for(var Xn=cn;Xn.parent;)if(Xn=d.tree.items[Xn.parent],Xn.id==g.id){ga=!0;break}}return!ga}).map(function(Vr){var ln=Vr[0],cn=Vr[1],ga=Vr[2],Xn=Vr[3],pt=Vr[4],Je=null;return ln==Ba||ln==pi?Je=cn:Je=d.tree.items[cn.parent],Je&&Je.parent==null&&(Je=null),Vr[5]=Je,Vr});var hn=null,mn=Gr.filter(function(Vr){return d.canMove(g,Vr[1],Vr[0],Vr[3],Vr[4],Vr[5],f)});v&&mn.length==0&&lt.length>0&&(mn=lt.filter(function(Vr){return d.canMove(g,Vr[1],Vr[0],Vr[3],Vr[4],Vr[5],f)}));var Qi=mn.map(function(Vr){return Vr[2]}),Ji=g.lev,qn=Qi.concat(Ji),Oi=null;qn.indexOf(st)!=-1?Oi=st:st>Math.max.apply(Math,(0,we.Z)(qn))?Oi=Math.max.apply(Math,(0,we.Z)(qn)):st<Math.min.apply(Math,(0,we.Z)(qn))&&(Oi=Math.min.apply(Math,(0,we.Z)(qn))),hn=mn.find(function(Vr){return Vr[2]==Oi}),!Ot&&!hn&&mn.length&&(hn=mn[0]),E=hn}}}}return E?(this.move(g,E[1],E[0],E[3]),!0):!1}},{key:"canMove",value:function(s,c,f,d,v,g,h){if(!s||!c||s.id===c.id)return!1;var E=this.props.config.settings,S=E.canRegroup,A=E.canRegroupCases,_=E.maxNesting,D=E.maxNumberOfRules,P=E.canLeaveEmptyCase,k=g?g.lev+1:c.lev,Z=k+(s.depth||0),q=f==Mo||f==Vo,re=f==pi||f==Ba,J=q&&c.lev==1||re&&c.lev==0,X=s.parent!=c.parent,ae=re||X,le=s.type=="case_group"&&!J||s.parentType=="rule_group"||c.type=="rule_group"||c.parentType=="rule_group"||s.type!="case_group"&&c.type=="case_group"&&q||s.type!="case_group"&&c.type=="switch_group"||!A&&s.caseId!=c.caseId,ee=c.isLocked||s.isLocked||g&&g.isLocked;if(_&&Z>_||ae&&(!S||le||ee))return!1;if(s.type!="case_group"&&s.caseId!=c.caseId){var ie=d?d._height==2:!1,se=v?v.leafsCount+1:0;if(D&&se>D||ie&&!P)return!1}if(s.type=="case_group"&&(s.isDefaultCase||c.isDefaultCase||c.type=="switch_group"&&f==Ba))return!1;var de=!0;return h&&(de=h(s.node.toJS(),c.node.toJS(),f,g?g.node.toJS():null)),de}},{key:"move",value:function(s,c,f,d){this._isUsingLegacyReactDomRender||(xu=!0),this.props.actions.moveItem(s.path,c.path,f)}},{key:"render",value:function(){return C.createElement(e,(0,qr.Z)({},this.props,{onDragStart:this.onDragStart}))}}]),u}(C.Component),r.propTypes={tree:H().any.isRequired,actions:H().object.isRequired},r};const Lh=function(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=(0,Ki.$j)(function(n){return{dragging:n.dragging,dragStart:n.dragStart,mousePos:n.mousePos}},{setDragStart:Kg,setDragProgress:$g,setDragEnd:Yg},null,{context:$i})(Ah(a,e));return r.displayName="ConnectedSortableContainer",r};var Fh=["isDraggingTempo","isDraggingMe","dragging"];function Ih(a){var e=Nh();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Nh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}const gi=function(a){return function(e){var r;return r=function(n){(0,Fr.Z)(i,n);var t=Ih(i);function i(u){var o;return(0,Cr.Z)(this,i),o=t.call(this,u),o.handleDraggerMouseDown=function(s){var c=o.props.id,f=o.wrapper.current;o.props.onDragStart&&o.props.onDragStart(c,f,s)},o.wrapper=C.createRef(),o}return(0,Ar.Z)(i,[{key:"render",value:function(){var o=this.props,s=o.isDraggingTempo,c=o.isDraggingMe,f=o.dragging,d=(0,di.Z)(o,Fh),v=d.isTrueLocked,g={};c&&s&&(xu||(g={top:f.y,left:f.x,width:f.w}));var h=vn()(a,"group-or-rule",c&&s?"qb-draggable":null,c&&!s?"qb-placeholder":null,v?"locked":null);return C.createElement("div",{className:h,style:g,ref:this.wrapper,"data-id":this.props.id},C.createElement(e,(0,qr.Z)({handleDraggerMouseDown:this.handleDraggerMouseDown,isDraggingMe:c,isDraggingTempo:s},d)))}}]),i}(C.PureComponent),r.propTypes={isDraggingTempo:H().bool,isDraggingMe:H().bool,onDragStart:H().func,dragging:H().object,isLocked:H().bool,isTrueLocked:H().bool},r}};var bh=m(35174),hi=m.n(bh),wh=m(82925),Ph=m.n(wh);function $c(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function _h(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$c(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):$c(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Dh(a){var e=Vh();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Vh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Kc=pr.ConfigUtils,Mh=Kc.getFieldConfig,jh=Kc.getOperatorConfig,Yc=function(a){(0,Fr.Z)(r,a);var e=Dh(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),Pt((0,Lr.Z)(t)),t.onPropsChanged(n),t}return(0,Ar.Z)(r,[{key:"onPropsChanged",value:function(t){var i=this.props,u=["config","selectedField","selectedFieldSrc","selectedFieldType","selectedOperator"],o=!this.meta||u.map(function(s){return t[s]!==i[s]}).filter(function(s){return s}).length>0;o&&(this.meta=this.getMeta(t))}},{key:"getMeta",value:function(t){var i,u=t.config,o=t.selectedField,s=t.selectedFieldType,c=t.selectedOperator,f=Mh(u,o),d=(0,we.Z)(f?.operators||((i=u.types[s])===null||i===void 0?void 0:i.operators)||[]);!o&&!d.includes(c)&&d.push(c);var v=_o()(Ph()(u.operators,function(P,k){return d?.indexOf(k)!==-1}),function(P,k){return jh(u,k,o)}),g=this.buildOptions(u,v,d),h=v[c]||{},E=this.props.config.settings.operatorPlaceholder,S=c,A=S?[S]:null,_=A,D=h.label;return{placeholder:E,items:g,selectedKey:S,selectedKeys:A,selectedPath:_,selectedLabel:D,selectedOpts:h,fieldConfig:f}}},{key:"buildOptions",value:function(t,i,u){return!i||!u?null:hi()(i).sort(function(o,s){return u.indexOf(o)-u.indexOf(s)}).map(function(o){var s=i[o],c=s.label;return{key:o,path:o,label:c}})}},{key:"render",value:function(){var t=this.props,i=t.config,u=t.customProps,o=t.setOperator,s=t.readonly,c=t.id,f=t.groupId,d=i.settings.renderOperator,v=_h({id:c,groupId:f,config:i,customProps:u,readonly:s,setField:o},this.meta);return v.items?d(v,i.ctx):null}}]),r}(C.Component);Yc.propTypes={id:H().string,groupId:H().string,config:H().object.isRequired,selectedField:H().any,selectedFieldType:H().string,selectedFieldSrc:H().string,selectedOperator:H().string,readonly:H().bool,setOperator:H().func.isRequired};var kh=["children"],ft=function(e){var r=e.children,n=(0,di.Z)(e,kh);return C.createElement("div",n,r)},on=function(){},zc=function(){return C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"gray",width:"18px",height:"18px"},C.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),C.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))},mi=function(e){return function(r){var n=r.config.settings.useConfirm,t=n?n.call(r.config.ctx,r.config.ctx):null;return C.createElement(e,(0,qr.Z)({},r,{confirmFn:t}))}};function xh(a){var e=Uh();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Uh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var qc=function(a){(0,Fr.Z)(r,a);var e=xh(r);function r(){return(0,Cr.Z)(this,r),e.apply(this,arguments)}return(0,Ar.Z)(r,[{key:"render",value:function(){var t=this.props,i=t.config,u=t.selectedField,o=t.selectedFieldSrc,s=t.selectedFieldType,c=t.selectedOperator,f=t.setOperator,d=t.selectedFieldParts,v=t.showOperator,g=t.showOperatorLabel,h=t.selectedFieldWidgetConfig,E=t.readonly,S=t.id,A=t.groupId,_=v&&C.createElement(ft,{key:"operators-for-"+(d||[]).join("_"),className:"rule--operator"},i.settings.showLabels&&C.createElement("label",{className:"rule--label"},i.settings.operatorLabel),C.createElement(Yc,{key:"operator",config:i,selectedField:u,selectedFieldSrc:o,selectedFieldType:s,selectedOperator:c,setOperator:f,readonly:E,id:S,groupId:A})),D=g&&C.createElement(ft,{key:"operators-for-"+(d||[]).join("_"),className:"rule--operator"},C.createElement("div",{className:"rule--operator-wrapper"},i.settings.showLabels?C.createElement("label",{className:"rule--label"},"\xA0"):null,C.createElement("div",{className:"rule--operator-text-wrapper"},C.createElement("span",{className:"rule--operator-text"},h.operatorInlineLabel))));return[_,D]}}]),r}(C.PureComponent);function Xc(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Gh(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xc(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Xc(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Bh(a){var e=Wh();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Wh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Qc=pr.RuleUtils.getFieldPathLabels,Uu=pr.ConfigUtils,Jc=Uu.getFieldConfig,ef=Uu.getFieldParts,rf=Uu.getFieldPathParts,tf=function(a){(0,Fr.Z)(r,a);var e=Bh(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),Pt((0,Lr.Z)(t)),t.onPropsChanged(n),t}return(0,Ar.Z)(r,[{key:"onPropsChanged",value:function(t){var i=this.props,u=["selectedField","selectedFieldSrc","selectedFieldType","config","parentField"],o=!this.meta||u.map(function(s){return t[s]!==i[s]}).filter(function(s){return s}).length>0;o&&(this.meta=this.getMeta(t))}},{key:"getMeta",value:function(t){var i=t.selectedField,u=t.selectedFieldType,o=t.config,s=t.parentField,c=i,f=o.settings,d=f.maxLabelsLength,v=f.fieldSeparatorDisplay,g=f.fieldPlaceholder,h=f.fieldSeparator,E=!!i,S=E?null:ko(g,d),A=E?Jc(o,c):null,_=A||{},D=rf(c,o),P=rf(c,o,!0),k=this.getFieldLabel(A,c,o),Z=Qc(c,o),q=Z?Z.join(v):null;(q==k||s)&&(q=null);var re=_.label2,J=ef(s,o),X=s?Jc(o,s):null,ae=s?X&&X.subfields:o.fields,le=!E&&u,ee=this.buildOptions(J,o,ae,le,J),ie=le?"Please select field":null;return{placeholder:S,items:ee,parentField:s,selectedKey:c,selectedKeys:D,selectedPath:P,selectedLabel:k,selectedOpts:_,selectedAltLabel:re,selectedFullLabel:q,errorText:ie}}},{key:"getFieldLabel",value:function(t,i,u){if(!i)return null;var o=u.settings.maxLabelsLength,s=ef(i,u),c=t?.label||Fo()(s);return c=ko(c,o),c}},{key:"buildOptions",value:function(t,i,u){var o=this,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null;if(!u)return null;var d=i.settings,v=d.fieldSeparator,g=d.fieldSeparatorDisplay,h=c!=null&&c.length?c.join(v)+v:"",E=function S(A){return Object.keys(A).reduce(function(_,D){var P=A[D];return P.type==="!struct"?_+S(P.subfields):_+(P.type===s?1:0)},0)};return hi()(u).map(function(S){var A=[].concat((0,we.Z)(c??[]),[S]),_=u[S],D=o.getFieldLabel(_,A,i),P=Qc(A,i),k=P.join(g);(k==D||t!=null&&t.length)&&(k=null);var Z=_.label2,q=_.tooltip,re=_.disabled;if(!_.hideForSelect)if(_.type=="!struct"){var J=o.buildOptions(t,i,_.subfields,s,A,D),X=E(_.subfields)>0;return{disabled:re,key:S,path:h+S,label:D,fullLabel:k,altLabel:Z,tooltip:q,items:J,matchesType:X}}else{var ae=s!==void 0?_.type===s:void 0;return{disabled:re,key:S,path:h+S,label:D,fullLabel:k,altLabel:Z,tooltip:q,grouplabel:f,matchesType:ae}}}).filter(function(S){return!!S})}},{key:"render",value:function(){var t=this.props,i=t.config,u=t.customProps,o=t.setField,s=t.setFieldSrc,c=t.readonly,f=t.id,d=t.groupId,v=i.settings.renderField,g=Gh({id:f,groupId:d,config:i,customProps:u,readonly:c,setField:o,setFieldSrc:s},this.meta);return v(g,i.ctx)}}]),r}(C.Component);tf.propTypes={id:H().string,groupId:H().string,config:H().object.isRequired,selectedField:H().any,selectedFieldSrc:H().string,selectedFieldType:H().string,parentField:H().string,customProps:H().object,readonly:H().bool,setField:H().func.isRequired,setFieldSrc:H().func};function nf(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Zh(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nf(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):nf(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Hh(a){var e=$h();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function $h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Kh=pr.clone,xo=pr.ConfigUtils,af=xo.getFieldConfig,of=xo.getFuncConfig,Yh=xo.getFieldParts,uf=xo.getFieldPathParts,sf=pr.RuleUtils,lf=sf.getFuncPathLabels,zh=sf.getWidgetForFieldOp,cf=function(a){(0,Fr.Z)(r,a);var e=Hh(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),Pt((0,Lr.Z)(t)),t.onPropsChanged(n),t}return(0,Ar.Z)(r,[{key:"onPropsChanged",value:function(t){var i=this.props,u=["config","field","fieldType","fieldSrc","operator","isFuncArg","isLHS"],o=["config","field","fieldType","fieldSrc","value","isLHS"],s=!this.items||u.map(function(f){return t[f]!==i[f]}).filter(function(f){return f}).length>0,c=!this.meta||o.map(function(f){return t[f]!==i[f]}).filter(function(f){return f}).length>0;c&&(this.meta=this.getMeta(t)),s&&(this.items=this.getItems(t,this.meta))}},{key:"getItems",value:function(t,i){var u=t.config,o=t.field,s=t.fieldType,c=t.isLHS,f=t.operator,d=t.parentFuncs,v=t.fieldDefinition,g=t.isFuncArg,h=i.lookingForFieldType,E=u.settings.canUseFuncForField,S=this.filterFuncs(u,u.funcs,o,s,c,f,E,d,g,v),A=this.buildOptions(u,S,h);return A}},{key:"getMeta",value:function(t){var i,u=t.config,o=t.field,s=t.fieldType,c=t.value,f=t.isLHS,d=t.isFuncArg,v=u.settings,g=v.funcPlaceholder,h=v.fieldSeparatorDisplay,E=c,S=!!c,A=af(u,o),_=A==null||(i=A.widgets)===null||i===void 0?void 0:i.field,D=_&&_.widgetProps||{},P=S?null:g,k=S?of(u,E):null,Z=k||{},q=uf(E,u),re=uf(E,u,!0),J=this.getFuncLabel(k,E,u),X=lf(E,u),ae=X?X.join(h):null;ae==J&&(ae=null);var le=f&&!d,ee=le&&!S&&s,ie=ee?"Please select function":null;return{placeholder:P,selectedKey:E,selectedKeys:q,selectedPath:re,selectedLabel:J,selectedOpts:Z,selectedFullLabel:ae,errorText:ie,lookingForFieldType:ee}}},{key:"filterFuncs",value:function(t,i,u,o,s,c,f,d,v,g){i=Kh(i);var h=t.settings.fieldSeparator,E=af(t,u),S=!1,A,_=E,D=zh(t,u,c,"value"),P=D&&t.widgets[D];v?(_=g,A=g?.type):S&&P?A=P.type:E?A=E.type:s||(A=o);function k(Z,q){for(var re in Z){var J=Z[re].subfields,X=(q||[]).concat(re),ae=X.join(h),le=of(t,ae);if(le.type=="!struct")k(J,X)==0&&delete Z[re];else{var ee,ie=!A||le.returnType==A;(ee=_)!==null&&ee!==void 0&&ee.funcs&&(ie=ie&&_.funcs.includes(ae)),f&&(ie=ie&&f(u,E,ae,le,c)),!le.allowSelfNesting&&d&&d.map(function(se){var de=(0,qe.Z)(se,2),pe=de[0],me=de[1];return pe}).includes(ae)&&(ie=!1),ie||delete Z[re]}}return hi()(Z).length}return k(i,[]),i}},{key:"buildOptions",value:function(t,i){var u=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!i)return null;var f=t.settings,d=f.fieldSeparator,v=f.fieldSeparatorDisplay,g=s!=null&&s.length?s.join(d)+d:"",h=function E(S){return Object.keys(S).reduce(function(A,_){var D=S[_];return D.type==="!struct"?A+E(D.subfields):A+(D.type===o?1:0)},0)};return hi()(i).map(function(E){var S=[].concat((0,we.Z)(s??[]),[E]),A=i[E],_=u.getFuncLabel(A,S,t),D=lf(S,t),P=D.join(v);P==_&&(P=null);var k=A.tooltip;if(A.type=="!struct"){var Z=u.buildOptions(t,A.subfields,o,S,_),q=h(A.subfields)>0;return{key:E,path:g+E,label:_,fullLabel:P,tooltip:k,items:Z,matchesType:q}}else{var re=o!==void 0?A.returnType===o:void 0;return{key:E,path:g+E,label:_,fullLabel:P,tooltip:k,grouplabel:c,matchesType:re}}})}},{key:"getFuncLabel",value:function(t,i,u){if(!i)return null;var o=u.settings.fieldSeparator,s=u.settings.maxLabelsLength,c=Yh(i,u),f=t?.label||Fo()(c);return f=ko(f,s),f}},{key:"render",value:function(){var t=this.props,i=t.config,u=t.customProps,o=t.setValue,s=t.readonly,c=t.id,f=t.groupId,d=i.settings.renderFunc,v=Zh({config:i,customProps:u,readonly:s,setField:o,items:this.items,id:c,groupId:f},this.meta);return d(v,i.ctx)}}]),r}(C.Component);cf.propTypes={id:H().string,groupId:H().string,config:H().object.isRequired,field:H().any,fieldType:H().string,fieldSrc:H().string,operator:H().string,customProps:H().object,value:H().string,setValue:H().func.isRequired,readonly:H().bool,parentFuncs:H().array,fieldDefinition:H().object,isFuncArg:H().bool,isLHS:H().bool};var qh=m(94794),Gu=m.n(qh),Xh=["factory"];function ff(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Bu(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ff(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):ff(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var df=pr.ListUtils.getTitleInListValues,Qh=pr.ConfigUtils._widgetDefKeysToOmit;const Jh=function(a){var e=a.delta,r=a.isFuncArg,n=a.valueSrc,t=a.value,i=a.valueError,u=a.asyncListValues,o=a.isSpecialRange,s=a.fieldDefinition,c=a.widget,f=a.widgetDefinition,d=a.widgetValueLabel,v=a.valueLabels,g=a.textSeparators,h=a.setValueHandler,E=a.config,S=a.field,A=a.fieldSrc,_=a.fieldType,D=a.isLHS,P=a.operator,k=a.readonly,Z=a.parentField,q=a.parentFuncs,re=a.id,J=a.groupId,X=f.factory,ae=(0,di.Z)(f,Xh),le=r&&s.valueSources&&s.valueSources.length==1&&s.valueSources[0]=="const",ee=s.defaultValue;if(!X)return"?";var ie=o?[t.get(0),t.get(1)]:t?t.get(e):void 0,se=i&&(o?[i.get(0),i.get(1)]:i.get(e))||null;o&&ie[0]===void 0&&ie[1]===void 0&&(ie=void 0);var de=s||{},pe=de.fieldSettings,me=Xe()(Bu(Bu(Bu({},ae),pe),{},{config:E,field:S,fieldSrc:A,fieldType:_,isLHS:D,parentField:Z,parentFuncs:q,fieldDefinition:s,operator:P,delta:e,isSpecialRange:o,isFuncArg:r,value:ie,valueError:se,label:d.label,placeholder:d.placeholder,placeholders:v?v.placeholder:null,textSeparators:g,setValue:h,readonly:k,asyncListValues:u,id:re,groupId:J}),[].concat((0,we.Z)(Qh),["toJS"]));if(c=="field",le&&ee){var Se=pe?.treeValues||pe?.listValues;return typeof ee=="boolean"?ee?me.labelYes||"YES":me.labelNo||"NO":Se?Array.isArray(ee)?ee.map(function(Ne){return df(Se,Ne)||Ne}).join(", "):df(Se,ee)||ee:""+ee}return X(me,E.ctx)};function em(a){var e=rm();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function rm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Wu=pr.ConfigUtils,tm=Wu.getFieldConfig,nm=Wu.getOperatorConfig,pf=Wu.getFieldWidgetConfig,Zu=pr.RuleUtils,am=Zu.getValueSourcesForFieldOp,vf=Zu.getWidgetForFieldOp,Uo=Zu.getValueLabel,gf=pr.DefaultUtils.createListFromArray,im={cardinality:1},Yi=function(a){(0,Fr.Z)(r,a);var e=em(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),t._setValue=function(i,u,o,s,c,f){if(i&&Array.isArray(s)){var d=[t.props.value.get(0),t.props.value.get(1)];d[0]!=s[0]&&t.props.setValue(0,s[0],o,c,f),d[1]!=s[1]&&t.props.setValue(1,s[1],o,c,f)}else t.props.setValue(u,s,o,c,f)},t._onChangeValueSrc=function(i,u){t.props.setValueSrc(i,u)},t.renderWidget=function(i,u,o){var s=o.config,c=o.isFuncArg,f=o.leftField,d=o.operator,v=o.value,g=o.valueError,h=o.readonly,E=o.parentField,S=o.parentFuncs,A=o.id,_=o.groupId,D=o.fieldSrc,P=o.fieldType,k=o.isLHS,Z=s.settings,q=u.widgets,re=u.iValues,J=u.aField,X=u.valueSources,ae=c?re:v,le=c?f:J,ee=q[i],ie=ee.valueSrc,se=ee.valueLabel,de=X.length>1&&!h,pe=Z.showLabels?C.createElement("label",{className:"rule--label"},se.label):null;return C.createElement("div",{key:"widget-"+le+"-"+i,className:vn()(ie=="func"?"widget--func":"widget--widget",de?"widget--has-valuerscs":"widget--has-no-valuerscs")},ie=="func"?null:pe,C.createElement(Jh,(0,qr.Z)({id:A,groupId:_,valueSrc:ie,delta:i,value:ae,valueError:g,isFuncArg:c,isLHS:k},xt()(u,["isSpecialRange","fieldDefinition","asyncListValues"]),xt()(q[i],["widget","widgetDefinition","widgetValueLabel","valueLabels","textSeparators","setValueHandler"]),{config:s,field:le,fieldSrc:D,fieldType:P,parentField:E,parentFuncs:S,operator:d,readonly:h})))},t.renderValueSources=function(i,u,o){var s=o.config,c=o.isFuncArg,f=o.leftField,d=o.operator,v=o.readonly,g=s.settings,h=u.valueSources,E=u.widgets,S=u.aField,A=c?f:S,_=E[i],D=_.valueSrc,P=_.setValueSrcHandler,k=g.valueSourcesInfo,Z=g.renderValueSources,q=h.map(function(X){return[X,{label:k[X].label}]}),re=function(ae){return Z(ae,s.ctx)},J=g.showLabels?C.createElement("label",{className:"rule--label"},"\xA0"):null;return h.length>1&&!v&&C.createElement("div",{key:"valuesrc-"+A+"-"+i,className:"widget--valuesrc"},J,C.createElement(re,{key:"valuesrc-"+i,delta:i,valueSources:q,valueSrc:D,config:s,field:A,operator:d,setValueSrc:P,readonly:v,title:g.valueSourcesPopupTitle}))},t.renderSep=function(i,u,o){var s=o.config,c=u.widgets,f=s.settings,d=c[i].sepText,v=f.showLabels?C.createElement("label",{className:"rule--label"},"\xA0"):null;return d&&C.createElement("div",{key:"widget-separators-"+i,className:vn()("widget--sep",i==0&&"widget--sep-first")},v,C.createElement("span",null,d))},t.renderWidgetDelta=function(i){var u=t.renderSep(i,t.meta,t.props),o=t.renderValueSources(i,t.meta,t.props),s=t.renderWidget(i,t.meta,t.props);return[u,o,s]},Pt((0,Lr.Z)(t)),t.onPropsChanged(n),t}return(0,Ar.Z)(r,[{key:"onPropsChanged",value:function(t){var i=this.props,u=["config","field","fieldSrc","fieldType","fieldFunc","fieldArg","leftField","operator","valueSrc","isFuncArg","asyncListValues","isLHS"],o=!this.meta||u.map(function(s){return t[s]!==i[s]||s=="isFuncArg"&&t.isFuncArg&&t.value!==i.value}).filter(function(s){return s}).length>0;o&&(this.meta=this.getMeta(t))}},{key:"getMeta",value:function(t){var i=this,u=t.config,o=t.field,s=t.fieldSrc,c=t.fieldType,f=t.fieldFunc,d=t.fieldArg,v=t.operator,g=t.valueSrc,h=t.value,E=t.isForRuleGroup,S=t.isCaseValue,A=t.isFuncArg,_=t.leftField,D=t.asyncListValues,P=A?{func:f,arg:d}:o,k=!o&&c,Z=g,q=h;(A||E||S)&&(Z=gf([g]),q=gf([h]));var re=tm(u,P);!re&&k&&(re=u.types[c]);var J=vf(u,P,v);if(!J&&k){var X;J=(X=u.types[c])===null||X===void 0?void 0:X.mainWidget}var ae=A?im:nm(u,v,P);if((re==null||ae==null)&&!S)return null;var le=ae?.isSpecialRange,ee=le&&(Z.get(0)=="field"||Z.get(1)=="field"),ie=le&&!ee,se=ie?1:rh(ae?.cardinality,1);if(se===0)return null;var de=am(u,P,v,re);P||(de=Object.keys(u.settings.valueSourcesInfo));var pe=Gu()(0,se).map(function(me){var Se,Ne=Z.get(me)||null,je=vf(u,P,v,Ne),Me=pf(u,P,v,je,Ne);ee&&(je=Me.singleWidget,Me=pf(u,P,v,je,Ne)),!Me&&k&&(je=["func","field"].includes(Ne)?Ne:J,Me=u.widgets[je]);var Fe=(Se=Me)===null||Se===void 0?void 0:Se.type,Ke=Uo(u,P,v,me,Ne,ie),Qe=Uo(u,P,v,me,null,ie),Be=ae!=null&&ae.textSeparators?ae?.textSeparators[me]:null,tr=i._onChangeValueSrc.bind(i,me),Ye=null,Or=null;le&&(Ye=[Uo(u,P,v,0),Uo(u,P,v,1)],Ye={placeholder:[Ye[0].placeholder,Ye[1].placeholder],label:[Ye[0].label,Ye[1].label]},Or=ae?.textSeparators);var br=i._setValue.bind(i,le,me,Fe);return{valueSrc:Ne,valueLabel:Ke,widget:je,sepText:Be,setValueSrcHandler:tr,widgetDefinition:Me,widgetValueLabel:Qe,valueLabels:Ye,textSeparators:Or,setValueHandler:br}});return{defaultWidget:J,fieldDefinition:re,operatorDefinition:ae,isSpecialRange:ie,cardinality:se,valueSources:de,widgets:pe,iValues:q,aField:P,asyncListValues:D}}},{key:"render",value:function(){if(!this.meta)return null;var t=this.meta,i=t.defaultWidget,u=t.cardinality;if(!i)return null;var o=i;return C.createElement(ft,{className:"rule--widget rule--widget--".concat(o.toUpperCase()),key:"widget-col-"+o},Gu()(0,u).map(this.renderWidgetDelta))}}]),r}(C.Component);Yi.propTypes={config:H().object.isRequired,value:H().any,valueSrc:H().any,valueError:H().any,field:H().any,fieldSrc:H().string,fieldType:H().string,operator:H().string,readonly:H().bool,asyncListValues:H().array,id:H().string,groupId:H().string,setValue:H().func,setValueSrc:H().func,isFuncArg:H().bool,fieldFunc:H().string,fieldArg:H().string,leftField:H().any,isForRuleGroup:H().bool,parentField:H().string,parentFuncs:H().array,isLHS:H().bool,isCaseValue:H().bool};function hf(a){var e=om();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function om(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var um=pr.ConfigUtils.getFuncConfig,Hu=pr.FuncUtils,sm=Hu.setFunc,lm=Hu.setArgValue,cm=Hu.setArgValueSrc,$u=function(a){(0,Fr.Z)(r,a);var e=hf(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),t.setFunc=function(i){t.props.setValue(sm(t.props.value,i,t.props.config))},t.setArgValue=function(i,u,o,s){var c=t.props.config,f=t.meta.funcDefinition,d=f.args,v=d[i];t.props.setValue(lm(t.props.value,i,u,v,c),o,s)},t.setArgValueSrc=function(i,u){var o=t.props.config,s=t.meta.funcDefinition,c=s.args,f=c[i];t.props.setValue(cm(t.props.value,i,u,f,o))},t.renderFuncSelect=function(){var i=t.props,u=i.config,o=i.field,s=i.fieldType,c=i.fieldSrc,f=i.isLHS,d=i.operator,v=i.customProps,g=i.value,h=i.readonly,E=i.parentFuncs,S=i.id,A=i.groupId,_=i.isFuncArg,D=i.fieldDefinition,P=g?g.get("func"):null,k={value:P,setValue:t.setFunc,config:u,field:o,fieldType:s,fieldSrc:c,isLHS:f,operator:d,customProps:v,readonly:h,parentFuncs:E,isFuncArg:_,fieldDefinition:D,id:S,groupId:A},Z=u.settings,q=Z.showLabels,re=Z.funcLabel,J=q?C.createElement("label",{className:"rule--label"},re):null;return C.createElement(ft,{key:"func",className:"rule--func"},J,C.createElement(cf,k))},t.renderArgLabel=function(i,u){var o=u.valueSources,s=u.type,c=u.showPrefix,f=u.label,d=t.props.config,v=o&&o.length==1&&o[0]=="const",g=!d.settings.showLabels&&(s=="boolean"||v)&&c;return g?C.createElement(ft,{className:"rule--func--arg-label"},f||i):null},t.renderArgLabelSep=function(i,u){var o=u.valueSources,s=u.type,c=u.showPrefix,f=t.props.config,d=o&&o.length==1&&o[0]=="const",v=!f.settings.showLabels&&(s=="boolean"||d)&&c;return v?C.createElement(ft,{className:"rule--func--arg-label-sep"},":"):null},t.renderArgVal=function(i,u,o){var s=t.props,c=s.config,f=s.field,d=s.fieldType,v=s.fieldSrc,g=s.isLHS,h=s.operator,E=s.value,S=s.readonly,A=s.parentFuncs,_=s.id,D=s.groupId,P=E?E.getIn(["args",u]):null,k=P?P.get("value"):void 0,Z=o.valueSources.length==1?o.valueSources[0]:void 0,q=P?P.get("valueSrc")||Z||"value":Z,re={config:c,fieldFunc:i,fieldArg:u,leftField:f,fieldType:d,fieldSrc:v,isLHS:g,operator:null,value:k,valueSrc:q,setValue:t.setArgValue,setValueSrc:t.setArgValueSrc,funcKey:i,argKey:u,argDefinition:o,readonly:S,parentFuncs:A,id:_,groupId:D};return C.createElement(ft,{className:"rule--func--arg-value"},C.createElement(mf,re))},t.renderArgSep=function(i,u,o,s){var c=s.renderSeps;return o?C.createElement(ft,{className:"rule--func--arg-sep"},c?c[o-1]:", "):null},t.renderBracketBefore=function(i){var u=i.renderBrackets;return C.createElement(ft,{key:"before_args",className:"rule--func--bracket-before"},u?u[0]:"(")},t.renderBracketAfter=function(i){var u=i.renderBrackets;return C.createElement(ft,{key:"after_args",className:"rule--func--bracket-after"},u?u[1]:")")},t.renderFuncArgs=function(){var i=t.meta,u=i.funcDefinition,o=i.funcKey;if(!o)return null;var s=u||{},c=s.args;return c?C.createElement(C.Fragment,null,t.renderBracketBefore(u),C.createElement(ft,{key:"args",className:"rule--func--args"},Object.keys(c).map(function(f,d){return C.createElement(ft,{key:"arg-".concat(f,"-").concat(d),className:"rule--func--arg"},t.renderArgSep(f,c[f],d,u),t.renderArgLabel(f,c[f]),t.renderArgLabelSep(f,c[f]),t.renderArgVal(o,f,c[f]))})),t.renderBracketAfter(u)):null},Pt((0,Lr.Z)(t)),t.onPropsChanged(n),t}return(0,Ar.Z)(r,[{key:"onPropsChanged",value:function(t){var i=this.props,u=["config","field","operator","value","fieldSrc","fieldType","isLHS"],o=!this.meta||u.map(function(s){return t[s]!==i[s]}).filter(function(s){return s}).length>0;o&&(this.meta=this.getMeta(t))}},{key:"getMeta",value:function(t){var i=t.config,u=t.field,o=t.operator,s=t.value,c=s?s.get("func"):null,f=c?um(i,c):null;return{funcDefinition:f,funcKey:c}}},{key:"render",value:function(){return C.createElement(ft,{className:"rule--func--wrapper"},this.renderFuncSelect(),this.renderFuncArgs())}}]),r}(C.Component);$u.propTypes={id:H().string,groupId:H().string,config:H().object.isRequired,field:H().any,fieldSrc:H().string,fieldType:H().string,operator:H().string,customProps:H().object,value:H().object,setValue:H().func.isRequired,readonly:H().bool,parentFuncs:H().array,fieldDefinition:H().object,isFuncArg:H().bool,isLHS:H().bool};var mf=function(a){(0,Fr.Z)(r,a);var e=hf(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),t.setValue=function(i,u,o,s,c){var f=t.props,d=f.setValue,v=f.argKey;d(v,u,s,c)},t.setValueSrc=function(i,u,o){var s=t.props,c=s.setValueSrc,f=s.argKey;c(f,u)},Pt((0,Lr.Z)(t)),t.onPropsChanged(n),t}return(0,Ar.Z)(r,[{key:"onPropsChanged",value:function(t){var i=this.props,u=["parentFuncs","funcKey","argKey"],o=!this.meta||u.map(function(s){return t[s]!==i[s]}).filter(function(s){return s}).length>0;o&&(this.meta=this.getMeta(t))}},{key:"getMeta",value:function(t){var i=t.parentFuncs,u=t.funcKey,o=t.argKey,s=[].concat((0,we.Z)(i||[]),[[u,o]]);return{parentFuncs:s}}},{key:"render",value:function(){var t=this.meta.parentFuncs;return C.createElement(Yi,(0,qr.Z)({},this.props,{setValue:this.setValue,setValueSrc:this.setValueSrc,isFuncArg:!0,parentFuncs:t}))}}]),r}(C.Component);mf.propTypes={funcKey:H().string.isRequired,argKey:H().string.isRequired,setValue:H().func.isRequired,setValueSrc:H().func.isRequired,readonly:H().bool,isLHS:H().bool,parentFuncs:H().array,id:H().string,groupId:H().string};function fm(a){var e=dm();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function dm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ku=function(a){(0,Fr.Z)(r,a);var e=fm(r);function r(){var n;(0,Cr.Z)(this,r);for(var t=arguments.length,i=new Array(t),u=0;u<t;u++)i[u]=arguments[u];return n=e.call.apply(e,[this].concat(i)),n.renderField=function(){var o=n.props,s=o.config,c=o.classname,f=o.selectedField,d=o.selectedFieldSrc,v=o.selectedFieldType,g=o.setField,h=o.parentField,E=o.readonly,S=o.id,A=o.groupId,_=["func","field"];if(!_.includes(d))return"?";var D=d==="func"?C.createElement($u,{isLHS:!0,config:s,value:f,fieldSrc:d,fieldType:v,parentField:h,setValue:g,readonly:E,id:S,groupId:A,key:"field-func-"+S}):C.createElement(tf,{config:s,selectedField:f,selectedFieldSrc:d,selectedFieldType:v,parentField:h,setField:g,customProps:s.settings.customFieldSelectProps,readonly:E,id:S,groupId:A,key:"field-"+S}),P=d==="func"?s.settings.funcLabel:s.settings.fieldLabel,k=s.settings.showLabels&&d!=="func"&&C.createElement("label",{className:"rule--label"},P);return C.createElement("div",{key:d,className:c},k,D)},n.renderFieldSources=function(){var o=n.props,s=o.config,c=o.readonly,f=o.selectedFieldSrc,d=o.setFieldSrc,v=o.id,g=s.settings,h=g.fieldSources,E=g.valueSourcesInfo,S=g.renderValueSources,A=h.map(function(P){return[P,{label:E[P].label}]}),_=function(k){return S(k,s.ctx)},D=g.showLabels?C.createElement("label",{className:"rule--label"},"\xA0"):null;return h.length>1&&!c&&C.createElement("div",{key:"fieldsrc",className:"rule--fieldsrc"},D,C.createElement(_,{key:"fieldsrc-"+v,valueSources:A,valueSrc:f,config:s,setValueSrc:d,readonly:c,title:g.fieldSourcesPopupTitle}))},n}return(0,Ar.Z)(r,[{key:"render",value:function(){var t=this.props,i=t.classname,u=t.canSelectFieldSource,o=u&&this.renderFieldSources(),s=this.renderField();return u?C.createElement(ft,{className:"rule--field-wrapper"},o,s):s}}]),r}(C.PureComponent),pm=["factory"];function vm(a){var e=gm();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function gm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var hm=pr.ConfigUtils.getOperatorConfig,yf=function(a){(0,Fr.Z)(r,a);var e=vm(r);function r(){return(0,Cr.Z)(this,r),e.apply(this,arguments)}return(0,Ar.Z)(r,[{key:"render",value:function(){if(!this.props.selectedOperator)return null;var t=hm(this.props.config,this.props.selectedOperator,this.props.selectedField);if(typeof t.options>"u")return null;var i=t.options,u=i.factory,o=(0,di.Z)(i,pm),s=Object.assign({},o,{config:this.props.config,field:this.props.selectedField,fieldSrc:this.props.selectedFieldSrc,operator:this.props.selectedOperator,options:this.props.operatorOptions,setOption:this.props.setOperatorOption,readonly:this.props.readonly}),c=u(s,this.props.config.ctx),f=this.props.selectedOperator;return C.createElement("div",{className:"rule--operator rule--operator--".concat(f.toUpperCase())},c)}}]),r}(C.PureComponent);yf.propTypes={config:H().object.isRequired,operatorOptions:H().any.isRequired,selectedField:H().any,selectedFieldSrc:H().string,selectedOperator:H().string.isRequired,readonly:H().bool,setOperatorOption:H().func.isRequired};function Ef(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Of(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ef(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Ef(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function mm(a){var e=ym();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function ym(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Go=pr.ConfigUtils,Em=Go.getFieldConfig,Om=Go.getOperatorConfig,Sm=Go.getFieldWidgetConfig,Tm=Go.getFieldParts,Rm=pr.RuleUtils.isEmptyRuleProperties,Sf=function(a){(0,Fr.Z)(r,a);var e=mm(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),Pt((0,Lr.Z)(t)),t.removeSelf=t.removeSelf.bind((0,Lr.Z)(t)),t.setLock=t.setLock.bind((0,Lr.Z)(t)),t.onPropsChanged(n),t}return(0,Ar.Z)(r,[{key:"onPropsChanged",value:function(t){var i=this.props,u=["selectedField","selectedFieldSrc","selectedFieldType","selectedOperator","config","reordableNodesCnt","isLocked"],o=!this.meta||u.map(function(s){return t[s]!==i[s]}).filter(function(s){return s}).length>0;o&&(this.meta=this.getMeta(t))}},{key:"getMeta",value:function(t){var i=t.selectedField,u=t.selectedFieldType,o=t.selectedOperator,s=t.config,c=t.reordableNodesCnt,f=t.isLocked,d=s.settings.keepInputOnChangeFieldSrc,v=Tm(i,s),g=Em(s,i),h=g&&g.type=="!struct",E=d&&u,S=!!i||E,A=S&&o,_=Om(s,o,i),D=_&&_.options!=null,P=Sm(s,i,o,null,null)||{},k=P.hideOperator,Z=s.settings.canReorder&&c>1&&!f,q=S&&!k,re=S&&k&&P.operatorInlineLabel,J=A&&!h,X=A&&D;return{selectedFieldParts:v,selectedFieldWidgetConfig:P,showDragIcon:Z,showOperator:q,showOperatorLabel:re,showWidget:J,showOperatorOptions:X}}},{key:"setLock",value:function(t){this.props.setLock(t)}},{key:"removeSelf",value:function(){var t=this,i=this.props,u=i.confirmFn,o=i.config,s=o.settings,c=s.renderConfirm,f=s.removeRuleConfirmOptions,d=function(){t.props.removeSelf()};f&&!this.isEmptyCurrentRule()?c.call(o.ctx,Of(Of({},f),{},{onOk:d,onCancel:null,confirmFn:u}),o.ctx):d()}},{key:"_buildWidgetProps",value:function(t){var i=t.selectedField,u=t.selectedFieldSrc,o=t.selectedFieldType,s=t.selectedOperator,c=t.operatorOptions,f=t.value,d=t.valueType,v=t.valueSrc,g=t.asyncListValues,h=t.valueError,E=t.parentField;return{field:i,fieldSrc:u,fieldType:o,operator:s,operatorOptions:c,value:f,valueType:d,valueSrc:v,asyncListValues:g,valueError:h,parentField:E}}},{key:"isEmptyCurrentRule",value:function(){var t=this.props.config,i=this._buildWidgetProps(this.props);return Rm(i,t)}},{key:"renderField",value:function(){var t=this.props,i=t.config,u=t.isLocked,o=t.parentField,s=t.groupId,c=t.id,f=t.selectedFieldSrc,d=t.selectedField,v=t.selectedFieldType,g=t.setField,h=t.setFieldSrc,E=i.settings.immutableFieldsMode;return C.createElement(Ku,{key:"field",classname:vn()(f=="func"?"rule--field--func":"rule--field"),config:i,canSelectFieldSource:!o,selectedField:d,selectedFieldSrc:f,selectedFieldType:v,setField:E?on:g,setFieldSrc:E?on:h,parentField:o,readonly:E||u,id:c,groupId:s})}},{key:"renderOperator",value:function(){var t=this.props,i=t.config,u=t.isLocked,o=this.meta,s=o.selectedFieldParts,c=o.selectedFieldWidgetConfig,f=o.showOperator,d=o.showOperatorLabel,v=i.settings.immutableOpsMode;return C.createElement(qc,{key:"operator",config:i,selectedField:this.props.selectedField,selectedFieldSrc:this.props.selectedFieldSrc,selectedFieldType:this.props.selectedFieldType,selectedOperator:this.props.selectedOperator,setOperator:v?on:this.props.setOperator,selectedFieldParts:s,showOperator:f,showOperatorLabel:d,selectedFieldWidgetConfig:c,readonly:v||u,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var t=this.props,i=t.config,u=t.isLocked,o=this.meta.showWidget,s=i.settings.immutableValuesMode;if(!o)return null;var c=C.createElement(Yi,(0,qr.Z)({key:"values"},this._buildWidgetProps(this.props),{config:i,setValue:s?on:this.props.setValue,setValueSrc:s?on:this.props.setValueSrc,readonly:s||u,id:this.props.id,groupId:this.props.groupId}));return C.createElement(ft,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},c)}},{key:"renderOperatorOptions",value:function(){var t=this.props.config,i=this.meta.showOperatorOptions,u=t.settings,o=u.immutableOpsMode,s=u.immutableValuesMode;if(!i)return null;var c=C.createElement(yf,{key:"operatorOptions",selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,operatorOptions:this.props.operatorOptions,setOperatorOption:o?on:this.props.setOperatorOption,config:t,readonly:s});return C.createElement(ft,{key:"op-options-for-"+this.props.selectedOperator,className:"rule--operator-options"},c)}},{key:"renderBeforeWidget",value:function(){var t=this.props.config,i=t.settings.renderBeforeWidget;return i&&C.createElement(ft,{key:"before-widget-for-"+this.props.selectedOperator,className:"rule--before-widget"},typeof i=="function"?i(this.props,t.ctx):i)}},{key:"renderAfterWidget",value:function(){var t=this.props.config,i=t.settings.renderAfterWidget;return i&&C.createElement(ft,{key:"after-widget-for-"+this.props.selectedOperator,className:"rule--after-widget"},typeof i=="function"?i(this.props,t.ctx):i)}},{key:"renderError",value:function(){var t=this.props,i=t.config,u=t.valueError,o=i.settings,s=o.renderRuleError,c=o.showErrorMessage,f=u&&u.toArray().filter(function(d){return!!d}).shift()||null;return c&&f&&C.createElement("div",{className:"rule--error"},s?s({error:f},i.ctx):f)}},{key:"renderDrag",value:function(){var t=this.meta.showDragIcon;return t&&C.createElement("span",{key:"rule-drag-icon",className:"qb-drag-handler rule--drag-handler",onMouseDown:this.props.handleDraggerMouseDown},C.createElement(zc,null)," ")}},{key:"renderDel",value:function(){var t=this.props,i=t.config,u=t.isLocked,o=i.settings,s=o.deleteLabel,c=o.immutableGroupsMode,f=o.renderButton,d=o.canDeleteLocked,v=function(h){return f(h,i.ctx)};return!c&&(!u||u&&d)&&C.createElement(v,{type:"delRule",onClick:this.removeSelf,label:s,config:i})}},{key:"renderLock",value:function(){var t=this.props,i=t.config,u=t.isLocked,o=t.isTrueLocked,s=t.id,c=i.settings,f=c.lockLabel,d=c.lockedLabel,v=c.showLock,g=c.renderSwitch,h=function(S){return g(S,i.ctx)};return v&&!(u&&!o)&&C.createElement(h,{type:"lock",id:s,value:u,setValue:this.setLock,label:f,checkedLabel:d,hideLabel:!0,config:i})}},{key:"render",value:function(){var t=this.meta,i=t.showOperatorOptions,u=t.selectedFieldWidgetConfig,o=this.props,s=o.valueSrc,c=o.value,f=o.config,d=s.first()=="value"&&!i&&c.size==1&&u.fullWidth,v=f.settings.renderButtonGroup,g=function(k){return v(k,f.ctx)},h=[this.renderField(),this.renderOperator(),this.renderBeforeWidget(),this.renderWidget(),this.renderAfterWidget(),this.renderOperatorOptions()],E=C.createElement("div",{key:"rule-body",className:vn()("rule--body",d&&"can--shrink--value")},h),S=this.renderError(),A=this.renderDrag(),_=this.renderLock(),D=this.renderDel();return C.createElement(C.Fragment,null,A,C.createElement("div",{className:"rule--body--wrapper"},E,S),C.createElement("div",{className:"rule--header"},C.createElement(g,{config:f},_,D)))}}]),r}(C.Component);Sf.propTypes={id:H().string.isRequired,groupId:H().string,selectedField:H().any,selectedFieldSrc:H().string,selectedFieldType:H().string,selectedOperator:H().string,operatorOptions:H().object,config:H().object.isRequired,value:H().any,valueSrc:H().any,valueType:H().any,asyncListValues:H().array,isDraggingMe:H().bool,isDraggingTempo:H().bool,parentField:H().string,valueError:H().any,isLocked:H().bool,isTrueLocked:H().bool,handleDraggerMouseDown:H().func,setField:H().func,setFieldSrc:H().func,setOperator:H().func,setOperatorOption:H().func,setLock:H().func,removeSelf:H().func,setValue:H().func,setValueSrc:H().func,reordableNodesCnt:H().number,totalRulesCnt:H().number,parentReordableNodesCnt:H().number};const Cm=Sh(gi("rule")(mi(Sf)));var Am=m(33604),Lm=m.n(Am);function Fm(a){var e=Im();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Im(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Nm=pr.DefaultUtils.defaultGroupConjunction,bm=function(e,r){var n;return n=function(t){(0,Fr.Z)(u,t);var i=Fm(u);function u(o){var s;return(0,Cr.Z)(this,u),s=i.call(this,o),s._selectedConjunction=function(c){return c=c||s.props,c.conjunction||Nm(c.config,c.field)},s.setConjunction=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setConjunction(s.props.path,c)},s.setNot=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setNot(s.props.path,c)},s.setLock=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setLock(s.props.path,c)},s.dummyFn=function(){},s.removeSelf=function(){s.props.actions.removeGroup(s.props.path)},s.addGroup=function(){s.props.actions.addGroup(s.props.path)},s.addCaseGroup=function(){s.props.actions.addCaseGroup(s.props.path)},s.addDefaultCaseGroup=function(){s.props.actions.addDefaultCaseGroup(s.props.path)},s.addRule=function(){var c=r=="rule_group"?s.props.field:null;s.props.actions.addRule(s.props.path,void 0,void 0,void 0,c)},s.setField=function(c,f,d){s.props.actions.setField(s.props.path,c,f,d)},s.setOperator=function(c){s.props.actions.setOperator(s.props.path,c)},s.setValue=function(c,f,d){s.props.actions.setValue(s.props.path,c,f,d)},s.pureShouldComponentUpdate=vi((0,Lr.Z)(s)),Pt((0,Lr.Z)(s)),s.selectedConjunction=s._selectedConjunction(o),s.conjunctionOptions=s._getConjunctionOptions(o),s.dummyFn.isDummyFn=!0,s}return(0,Ar.Z)(u,[{key:"shouldComponentUpdate",value:function(s,c){var f=this.props,d=this.state,v=this.pureShouldComponentUpdate(s,c);if(v&&d==c&&f!=s){var g=s.dragging.id||f.dragging.id,h=g==s.id,E=[];for(var S in s){var A=s[S]!=f[S];S=="dragging"&&!h&&(A=!1),A&&E.push(S)}E.length||(v=!1)}return v}},{key:"onPropsChanged",value:function(s){var c=s.config,f=s.id,d=s.conjunction,v=this.props.config,g=this.props.conjunction;(v!=c||g!=d)&&(this.selectedConjunction=this._selectedConjunction(s),this.conjunctionOptions=this._getConjunctionOptions(s))}},{key:"_getConjunctionOptions",value:function(s){var c=this;return _o()(s.config.conjunctions,function(f,d){return{id:"conjunction-".concat(s.id,"-").concat(d),name:"conjunction[".concat(s.id,"]"),key:d,label:f.label,checked:d===c._selectedConjunction(s)}})}},{key:"render",value:function(){var s=this.props.dragging.id==this.props.id,c=this.props.path.size,f=this.props.config.settings.maxNesting,d=!s&&this.props.isDraggingTempo,v=this.props.fieldType||null,g=typeof f>"u"||c<f,h=c==1;return C.createElement("div",{className:"group-or-rule-container group-container","data-id":this.props.id},[s?C.createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,isRoot:h,allowFurtherNesting:g,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:this.dummyFn,setNot:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,addGroup:this.dummyFn,addCaseGroup:this.dummyFn,addDefaultCaseGroup:this.dummyFn,addRule:this.dummyFn,setField:this.dummyFn,setOperator:this.dummyFn,setValue:this.dummyFn,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:v,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,C.createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:s,isDraggingTempo:d,onDragStart:this.props.onDragStart,isRoot:h,allowFurtherNesting:g,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:d?this.dummyFn:this.setConjunction,setNot:d?this.dummyFn:this.setNot,setLock:d?this.dummyFn:this.setLock,removeSelf:d?this.dummyFn:this.removeSelf,addGroup:d?this.dummyFn:this.addGroup,addCaseGroup:d?this.dummyFn:this.addCaseGroup,addDefaultCaseGroup:d?this.dummyFn:this.addDefaultCaseGroup,addRule:d?this.dummyFn:this.addRule,setField:d?this.dummyFn:this.setField,setOperator:d?this.dummyFn:this.setOperator,setValue:d?this.dummyFn:this.setValue,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:v,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),u}(C.Component),n.propTypes={config:H().object.isRequired,actions:H().object.isRequired,path:H().any.isRequired,id:H().string.isRequired,groupId:H().string,not:H().bool,conjunction:H().string,children1:H().any,onDragStart:H().func,reordableNodesCnt:H().number,field:H().any,fieldSrc:H().string,fieldType:H().string,parentField:H().string,isLocked:H().bool,isTrueLocked:H().bool,dragging:H().object,isDraggingTempo:H().bool},n};const zi=function(a,e){var r=(0,Ki.$j)(function(n){return{dragging:n.dragging}},null,null,{context:$i})(bm(a,e));return r.displayName="ConnectedGroupContainer",r};function wm(a){var e=Pm();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Pm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _m={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},Dm="topRight",Tf=function(a){(0,Fr.Z)(r,a);var e=wm(r);function r(){return(0,Cr.Z)(this,r),e.apply(this,arguments)}return(0,Ar.Z)(r,[{key:"render",value:function(){var t=this.props,i=t.config,u=t.addRule,o=t.addGroup,s=t.removeSelf,c=t.setLock,f=t.isLocked,d=t.isTrueLocked,v=t.id,g=t.canAddGroup,h=t.canAddRule,E=t.canDeleteGroup,S=i.settings,A=S.immutableGroupsMode,_=S.addRuleLabel,D=S.addGroupLabel,P=S.delGroupLabel,k=S.groupActionsPosition,Z=S.renderButton,q=S.renderSwitch,re=S.renderButtonGroup,J=S.lockLabel,X=S.lockedLabel,ae=S.showLock,le=S.canDeleteLocked,ee=function(Me){return Z(Me,i.ctx)},ie=function(Me){return q(Me,i.ctx)},se=function(Me){return re(Me,i.ctx)},de=_m[k||Dm],pe=ae&&!(f&&!d)&&C.createElement(ie,{type:"lock",id:v,value:f,setValue:c,label:J,checkedLabel:X,config:i}),me=!A&&h&&!f&&C.createElement(ee,{type:"addRule",onClick:u,label:_,readonly:f,config:i}),Se=!A&&g&&!f&&C.createElement(ee,{type:"addGroup",onClick:o,label:D,readonly:f,config:i}),Ne=!A&&E&&(!f||f&&le)&&C.createElement(ee,{type:"delGroup",onClick:s,label:P,config:i});return C.createElement("div",{className:"group--actions ".concat(de)},C.createElement(se,{config:i},pe,me,Se,Ne))}}]),r}(C.PureComponent);function Rf(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Cf(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rf(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Rf(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Vm(a){var e=Mm();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Mm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jm=pr.RuleUtils.isEmptyGroupChildren,km="topRight",Pn=function(a){(0,Fr.Z)(r,a);var e=Vm(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),t.childrenClassName=function(){return""},t.renderBeforeActions=function(){var i=t.props.config.settings.renderBeforeActions;return i==null?null:typeof i=="function"?i(t.props,t.props.config.ctx):i},t.renderAfterActions=function(){var i=t.props.config.settings.renderAfterActions;return i==null?null:typeof i=="function"?i(t.props,t.props.config.ctx):i},t.removeSelf=t.removeSelf.bind((0,Lr.Z)(t)),t.setLock=t.setLock.bind((0,Lr.Z)(t)),t.renderItem=t.renderItem.bind((0,Lr.Z)(t)),t}return(0,Ar.Z)(r,[{key:"isGroupTopPosition",value:function(){return Lm()(this.props.config.settings.groupActionsPosition||km,"top")}},{key:"setLock",value:function(t){this.props.setLock(t)}},{key:"removeSelf",value:function(){var t=this,i=this.props,u=i.confirmFn,o=i.config,s=o.settings,c=s.renderConfirm,f=s.removeGroupConfirmOptions,d=function(){t.props.removeSelf()};f&&!this.isEmptyCurrentGroup()?c.call(o.ctx,Cf(Cf({},f),{},{onOk:d,onCancel:null,confirmFn:u}),o.ctx):d()}},{key:"isEmptyCurrentGroup",value:function(){var t=this.props,i=t.children1,u=t.config;return jm(i,u)}},{key:"render",value:function(){return C.createElement(C.Fragment,null,this.renderHeaderWrapper(),this.renderChildrenWrapper(),this.renderFooterWrapper())}},{key:"showNot",value:function(){var t=this.props.config;return t.settings.showNot}},{key:"showConjs",value:function(){var t=this.props,i=t.conjunctionOptions,u=t.children1,o=t.config,s=Object.keys(i).length;return s>1||this.showNot()}},{key:"isNoChildren",value:function(){var t=this.props.children1;return t?t.size==0:!0}},{key:"isOneChild",value:function(){var t=this.props.children1;return t?t.size<2:!0}},{key:"renderChildrenWrapper",value:function(){var t=this.props.children1;return t&&C.createElement("div",{key:"group-children",className:vn()("group--children",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isOneChild()?"one--child":"",this.childrenClassName())},this.renderChildren())}},{key:"renderHeaderWrapper",value:function(){var t=this.isGroupTopPosition();return C.createElement("div",{key:"group-header",className:vn()("group--header",this.isOneChild()?"one--child":"",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"")},this.renderHeader(),t&&this.renderBeforeActions(),t&&this.renderActions(),t&&this.renderAfterActions())}},{key:"renderFooterWrapper",value:function(){var t=this.isGroupTopPosition();return!t&&C.createElement("div",{key:"group-footer",className:"group--footer"},this.renderBeforeActions(),this.renderActions(),this.renderAfterActions())}},{key:"renderActions",value:function(){var t=this.props,i=t.config,u=t.addRule,o=t.addGroup,s=t.isLocked,c=t.isTrueLocked,f=t.id;return C.createElement(Tf,{config:i,addRule:u,addGroup:o,canAddGroup:this.canAddGroup(),canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:s,isTrueLocked:c,id:f})}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var t=this.props.config.settings.maxNumberOfRules,i=this.props.totalRulesCnt;return t?i<t:!0}},{key:"canDeleteGroup",value:function(){return!this.props.isRoot}},{key:"renderChildren",value:function(){var t=this.props.children1;return t?t.map(this.renderItem).toList():null}},{key:"renderItem",value:function(t){var i=this.props,u=i.config,o=i.actions,s=i.onDragStart,c=i.isLocked,f=t.get("type")=="group"&&t.getIn(["properties","field"])!=null,d=f?"rule_group":t.get("type");return C.createElement(zu,(0,qr.Z)({},this.extraPropsForItem(t),{key:t.get("id"),id:t.get("id"),groupId:i.id,path:t.get("path"),type:d,properties:t.get("properties"),config:u,actions:o,children1:t.get("children1"),reordableNodesCnt:this.reordableNodesCntForItem(t),totalRulesCnt:this.totalRulesCntForItem(t),parentReordableNodesCnt:this.reordableNodesCnt(),onDragStart:s,isDraggingTempo:this.props.isDraggingTempo,isParentLocked:c}))}},{key:"extraPropsForItem",value:function(t){return{}}},{key:"reordableNodesCnt",value:function(){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(t){return this.props.totalRulesCnt}},{key:"reordableNodesCntForItem",value:function(t){return this.props.isLocked?0:this.reordableNodesCnt()}},{key:"showDragIcon",value:function(){var t=this.props,i=t.config,u=t.isRoot,o=t.isLocked,s=this.reordableNodesCnt();return i.settings.canReorder&&!u&&s>1&&!o}},{key:"renderDrag",value:function(){var t=this.props.handleDraggerMouseDown,i=this.showDragIcon()&&C.createElement("span",{key:"group-drag-icon",className:"qb-drag-handler group--drag-handler",onMouseDown:t},C.createElement(zc,null)," ");return i}},{key:"conjunctionOptions",value:function(){var t=this.props.conjunctionOptions;return t}},{key:"renderConjs",value:function(){var t=this.props,i=t.config,u=t.children1,o=t.id,s=t.selectedConjunction,c=t.setConjunction,f=t.not,d=t.setNot,v=t.isLocked,g=i.settings,h=g.immutableGroupsMode,E=g.renderConjs,S=g.showNot,A=g.notLabel,_=this.conjunctionOptions();if(!this.showConjs()||!u||!u.size)return null;var D={disabled:this.isOneChild(),readonly:h||v,selectedConjunction:s,setConjunction:h?on:c,conjunctionOptions:_,config:i,not:f||!1,id:o,setNot:h?on:d,notLabel:A,showNot:this.showNot(),isLocked:v};return E(D,i.ctx)}},{key:"renderHeader",value:function(){return C.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}}]),r}(C.Component);Pn.propTypes={reordableNodesCnt:H().number,conjunctionOptions:H().object.isRequired,allowFurtherNesting:H().bool.isRequired,isRoot:H().bool.isRequired,not:H().bool,selectedConjunction:H().string,config:H().object.isRequired,id:H().string.isRequired,groupId:H().string,path:H().any,children1:H().any,isDraggingMe:H().bool,isDraggingTempo:H().bool,isLocked:H().bool,isTrueLocked:H().bool,handleDraggerMouseDown:H().func,onDragStart:H().func,addRule:H().func.isRequired,addGroup:H().func.isRequired,removeSelf:H().func.isRequired,setConjunction:H().func.isRequired,setNot:H().func.isRequired,setLock:H().func.isRequired,actions:H().object.isRequired};const xm=zi(gi("group")(mi(Pn)),"group");function Um(a,e){for(;!Object.prototype.hasOwnProperty.call(a,e)&&(a=(0,Ge.Z)(a),a!==null););return a}function _n(){return typeof Reflect<"u"&&Reflect.get?_n=Reflect.get.bind():_n=function(e,r,n){var t=Um(e,r);if(t){var i=Object.getOwnPropertyDescriptor(t,r);return i.get?i.get.call(arguments.length<3?e:n):i.value}},_n.apply(this,arguments)}function Gm(a){var e=Bm();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Bm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Wm=function(a){(0,Fr.Z)(r,a);var e=Gm(r);function r(){return(0,Cr.Z)(this,r),e.apply(this,arguments)}return(0,Ar.Z)(r,[{key:"render",value:function(){var t=this.props,i=t.config,u=t.addRule,o=t.canAddRule,s=t.canDeleteGroup,c=t.removeSelf,f=t.setLock,d=t.isLocked,v=t.isTrueLocked,g=t.id,h=i.settings,E=h.immutableGroupsMode,S=h.addRuleLabel,A=h.delGroupLabel,_=h.renderButton,D=h.renderSwitch,P=h.renderButtonGroup,k=h.lockLabel,Z=h.lockedLabel,q=h.showLock,re=h.canDeleteLocked,J=function(de){return _(de,i.ctx)},X=function(de){return D(de,i.ctx)},ae=function(de){return P(de,i.ctx)},le=q&&!(d&&!v)&&C.createElement(X,{type:"lock",id:g,value:d,setValue:f,label:k,checkedLabel:Z,hideLabel:!0,config:i}),ee=!E&&o&&!d&&C.createElement(J,{type:"addRuleGroup",onClick:u,label:S,readonly:d,config:i}),ie=!E&&s&&(!d||d&&re)&&C.createElement(J,{type:"delRuleGroup",onClick:c,label:A,config:i});return C.createElement("div",{className:"group--actions"},C.createElement(ae,{config:i},le,ee,ie))}}]),r}(C.PureComponent);function Af(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Lf(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Af(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Af(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Zm(a){var e=Hm();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Hm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ff=function(a){(0,Fr.Z)(r,a);var e=Zm(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),t.childrenClassName=function(){return"rule_group--children"},t.renderHeaderWrapper=function(){return null},t.renderFooterWrapper=function(){return null},t.renderConjs=function(){return null},t.canAddGroup=function(){return!1},t.canAddRule=function(){return!0},t.canDeleteGroup=function(){return!1},Pt((0,Lr.Z)(t)),t.onPropsChanged(n),t}return(0,Ar.Z)(r,[{key:"onPropsChanged",value:function(t){}},{key:"reordableNodesCntForItem",value:function(t){if(this.props.isLocked)return 0;var i=this.props.children1;return i?.size||0}},{key:"renderChildrenWrapper",value:function(){return C.createElement(C.Fragment,null,this.renderDrag(),this.renderField(),this.renderActions(),_n((0,Ge.Z)(r.prototype),"renderChildrenWrapper",this).call(this))}},{key:"renderField",value:function(){var t=this.props,i=t.config,u=t.selectedField,o=t.selectedFieldSrc,s=t.selectedFieldType,c=t.setField,f=t.setFieldSrc,d=t.parentField,v=t.id,g=t.groupId,h=t.isLocked,E=i.settings.immutableFieldsMode;return C.createElement(Ku,{key:"field",classname:"group--field",config:i,canSelectFieldSource:!1,selectedField:u,selectedFieldSrc:o,selectedFieldType:s,setField:c,setFieldSrc:f,parentField:d,readonly:E||h,id:v,groupId:g})}},{key:"renderActions",value:function(){var t=this.props,i=t.config,u=t.addRule,o=t.isLocked,s=t.isTrueLocked,c=t.id;return C.createElement(Wm,{config:i,addRule:u,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:s,id:c})}},{key:"extraPropsForItem",value:function(t){return{parentField:this.props.selectedField}}}]),r}(Pn);Ff.propTypes=Lf(Lf({},Pn.propTypes),{},{selectedField:H().any,selectedFieldSrc:H().string,parentField:H().string,setField:H().func,setFieldSrc:H().func});const $m=zi(gi("group rule_group")(mi(Ff)),"rule_group");function Km(a){var e=Ym();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Ym(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var zm=function(a){(0,Fr.Z)(r,a);var e=Km(r);function r(){return(0,Cr.Z)(this,r),e.apply(this,arguments)}return(0,Ar.Z)(r,[{key:"render",value:function(){var t=this.props,i=t.config,u=t.addRule,o=t.canAddRule,s=t.canDeleteGroup,c=t.removeSelf,f=t.setLock,d=t.isLocked,v=t.isTrueLocked,g=t.id,h=i.settings,E=h.immutableGroupsMode,S=h.addSubRuleLabel,A=h.delGroupLabel,_=h.renderButton,D=h.renderSwitch,P=h.renderButtonGroup,k=h.lockLabel,Z=h.lockedLabel,q=h.showLock,re=h.canDeleteLocked,J=function(de){return _(de,i.ctx)},X=function(de){return D(de,i.ctx)},ae=function(de){return P(de,i.ctx)},le=q&&!(d&&!v)&&C.createElement(X,{type:"lock",id:g,value:d,setValue:f,label:k,checkedLabel:Z,config:i}),ee=!E&&o&&!d&&C.createElement(J,{type:"addRuleGroupExt",onClick:u,label:S,readonly:d,config:i}),ie=!E&&s&&(!d||d&&re)&&C.createElement(J,{type:"delRuleGroup",onClick:c,label:A,config:i});return C.createElement("div",{className:"group--actions group--actions--tr"},C.createElement(ae,{config:i},le,ee,ie))}}]),r}(C.PureComponent);function If(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Nf(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?If(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):If(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function qm(a,e){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Xm(a))||e&&a&&typeof a.length=="number"){r&&(a=r);var n=0,t=function(){};return{s:t,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){r=r.call(a)},n:function(){var c=r.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(u)throw o}}}}function Xm(a,e){if(a){if(typeof a=="string")return bf(a,e);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bf(a,e)}}function bf(a,e){(e==null||e>a.length)&&(e=a.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=a[r];return n}function Qm(a){var e=Jm();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Jm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var wf=pr.ConfigUtils,Pf=wf.getFieldConfig,ey=wf.getFieldWidgetConfig,ry=pr.RuleUtils.isEmptyRuleGroupExtPropertiesAndChildren,_f=function(a){(0,Fr.Z)(r,a);var e=Qm(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),t.childrenClassName=function(){return"rule_group_ext--children"},t.renderFooterWrapper=function(){return null},t.canAddGroup=function(){return!1},t.canAddRule=function(){return!0},t.canDeleteGroup=function(){return!0},Pt((0,Lr.Z)(t)),t.onPropsChanged(n),t}return(0,Ar.Z)(r,[{key:"onPropsChanged",value:function(t){}},{key:"renderHeaderWrapper",value:function(){return C.createElement("div",{key:"group-header",className:vn()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderGroupField(),this.renderActions())}},{key:"renderHeader",value:function(){return C.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderGroupField",value:function(){return C.createElement("div",{className:"group--field--count--rule"},this.renderField(),this.renderOperator(),this.renderWidget())}},{key:"showNot",value:function(){var t=this.props,i=t.config,u=t.selectedField,o=t.selectedOperator,s=Pf(i,u)||{};return s.showNot!=null?s.showNot:i.settings.showNot}},{key:"conjunctionOptions",value:function(){var t=this.props,i=t.config,u=t.selectedField,o=t.selectedOperator,s=Pf(i,u)||{},c=_n((0,Ge.Z)(r.prototype),"conjunctionOptions",this).call(this);if(s.conjunctions){var f={},d=qm(s.conjunctions),v;try{for(d.s();!(v=d.n()).done;){var g=v.value;f[g]=c[g]}}catch(h){d.e(h)}finally{d.f()}c=f}return c}},{key:"renderField",value:function(){var t=this.props,i=t.config,u=t.selectedField,o=t.selectedFieldSrc,s=t.selectedFieldType,c=t.setField,f=t.setFieldSrc,d=t.parentField,v=t.id,g=t.groupId,h=t.isLocked,E=i.settings.immutableFieldsMode;return C.createElement(Ku,{key:"field",classname:"rule--field",config:i,canSelectFieldSource:!1,selectedField:u,selectedFieldSrc:o,selectedFieldType:s,setField:c,setFieldSrc:f,parentField:d,readonly:E||h,id:v,groupId:g})}},{key:"renderOperator",value:function(){var t=this.props,i=t.config,u=t.selectedField,o=t.selectedFieldSrc,s=t.selectedOperator,c=t.setField,f=t.setOperator,d=t.isLocked,v=i.settings.immutableFieldsMode,g=ey(i,u,s)||{},h=g.hideOperator,E=u&&h&&g.operatorInlineLabel,S=u&&!h;return C.createElement(qc,{key:"operator",classname:"group--operator",config:i,selectedField:u,selectedFieldSrc:o,selectedOperator:s,setOperator:f,selectedFieldPartsLabels:["group"],showOperator:S,showOperatorLabel:E,selectedFieldWidgetConfig:g,readonly:v||d,id:this.props.id,groupId:this.props.groupId})}},{key:"isEmptyCurrentGroup",value:function(){var t=this.props,i=t.children1,u=t.config,o=this._buildWidgetProps(this.props);return ry(o,i,u)}},{key:"_buildWidgetProps",value:function(t){var i=t.selectedField,u=t.selectedFieldSrc,o=t.selectedFieldType,s=t.selectedOperator,c=t.operatorOptions,f=t.value,d=t.valueType,v=t.valueSrc,g=t.asyncListValues,h=t.valueError,E=t.parentField;return{field:i,fieldSrc:u,fieldType:o,operator:s,operatorOptions:c,value:f,valueType:d,valueSrc:["value"],valueError:null,parentField:E}}},{key:"renderWidget",value:function(){var t=this.props,i=t.config,u=t.selectedField,o=t.selectedOperator,s=t.isLocked,c=i.settings.immutableValuesMode,f=u&&o,d=f;if(!d)return null;var v=C.createElement(Yi,(0,qr.Z)({key:"values",isForRuleGroup:!0},this._buildWidgetProps(this.props),{config:i,setValue:c?on:this.props.setValue,setValueSrc:on,readonly:c||s,id:this.props.id,groupId:this.props.groupId}));return C.createElement(ft,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},v)}},{key:"renderActions",value:function(){var t=this.props,i=t.config,u=t.addRule,o=t.isLocked,s=t.isTrueLocked,c=t.id;return C.createElement(zm,{config:i,addRule:u,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:s,id:c})}},{key:"reordableNodesCntForItem",value:function(t){if(this.props.isLocked)return 0;var i=this.props.children1;return i?.size||0}},{key:"extraPropsForItem",value:function(t){return{parentField:this.props.selectedField}}}]),r}(Pn);_f.propTypes=Nf(Nf({},Pn.propTypes),{},{selectedField:H().any,selectedFieldSrc:H().string,selectedOperator:H().string,value:H().any,parentField:H().string,setField:H().func,setFieldSrc:H().func,setOperator:H().func,setValue:H().func});const ty=zi(gi("group rule_group_ext")(mi(_f)),"rule_group");function ny(a){var e=ay();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function ay(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var iy={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},oy="topRight",uy=function(a){(0,Fr.Z)(r,a);var e=ny(r);function r(){return(0,Cr.Z)(this,r),e.apply(this,arguments)}return(0,Ar.Z)(r,[{key:"render",value:function(){var t=this.props,i=t.config,u=t.addCaseGroup,o=t.addDefaultCaseGroup,s=t.setLock,c=t.isLocked,f=t.isTrueLocked,d=t.id,v=t.canAddGroup,g=t.canAddDefault,h=i.settings,E=h.immutableGroupsMode,S=h.addCaseLabel,A=h.addDefaultCaseLabel,_=h.groupActionsPosition,D=h.renderButton,P=h.renderSwitch,k=h.renderButtonGroup,Z=h.lockLabel,q=h.lockedLabel,re=h.showLock,J=function(pe){return D(pe,i.ctx)},X=function(pe){return P(pe,i.ctx)},ae=function(pe){return k(pe,i.ctx)},le=iy[_||oy],ee=re&&!(c&&!f)&&C.createElement(X,{type:"lock",id:d,value:c,setValue:s,label:Z,checkedLabel:q,config:i}),ie=!E&&v&&!c&&C.createElement(J,{type:"addCaseGroup",onClick:u,label:S,readonly:c,config:i}),se=!E&&g&&!c&&C.createElement(J,{type:"addDefaultCaseGroup",onClick:o,label:A,readonly:c,config:i});return C.createElement("div",{className:"group--actions ".concat(le)},C.createElement(ae,{config:i},ee,ie,se))}}]),r}(C.PureComponent);function Df(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function sy(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Df(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Df(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function ly(a){var e=cy();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function cy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Vf=pr.TreeUtils,fy=Vf.getTotalReordableNodesCountInTree,dy=Vf.getTotalRulesCountInTree,Mf=function(a){(0,Fr.Z)(r,a);var e=ly(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),t.childrenClassName=function(){return"switch_group--children"},t.renderFooterWrapper=function(){return null},t.hasDefaultCase=function(){var i;return((i=t.props.children1)===null||i===void 0?void 0:i.size)&&t.props.children1.filter(function(u){return u.get("children1")==null}).size>0},Pt((0,Lr.Z)(t)),t.onPropsChanged(n),t}return(0,Ar.Z)(r,[{key:"onPropsChanged",value:function(t){}},{key:"canAddGroup",value:function(){var t,i=this.props.config.settings.maxNumberOfCases,u=((t=this.props.children1)===null||t===void 0?void 0:t.size)||0;return i?u<i:!0}},{key:"canAddRule",value:function(){return!1}},{key:"reordableNodesCnt",value:function(){var t,i=((t=this.props.children1)===null||t===void 0?void 0:t.size)||0,u=i;return this.hasDefaultCase()&&u--,u}},{key:"totalRulesCntForItem",value:function(t){return dy(t)}},{key:"reordableNodesCntForItem",value:function(t){var i;if(this.props.isLocked)return 0;var u=this.props.config.settings,o=u.canLeaveEmptyCase,s=u.canRegroupCases,c=((i=this.props.children1)===null||i===void 0?void 0:i.size)||0,f=c;this.hasDefaultCase()&&f--;var d=fy(t),v=d;return v==1&&s&&o&&f>1&&(v=111),v}},{key:"renderHeaderWrapper",value:function(){return C.createElement("div",{key:"group-header",className:vn()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag")},this.renderHeader(),this.renderActions())}},{key:"renderHeader",value:function(){return C.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderConjs",value:function(){var t=this.props.config,i=t.settings.renderSwitchPrefix;return i||null}},{key:"showNot",value:function(){return!1}},{key:"renderActions",value:function(){var t=this.props,i=t.config,u=t.addCaseGroup,o=t.addDefaultCaseGroup,s=t.isLocked,c=t.isTrueLocked,f=t.id;return C.createElement(uy,{config:i,addCaseGroup:u,addDefaultCaseGroup:o,canAddDefault:!this.hasDefaultCase(),canAddGroup:this.canAddGroup(),setLock:this.setLock,isLocked:s,isTrueLocked:c,id:f})}}]),r}(Pn);Mf.propTypes=sy({},Pn.propTypes);const py=zi(gi("group switch_group")(mi(Mf)),"switch_group");function jf(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function kf(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jf(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):jf(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function vy(a){var e=gy();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function gy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var xf=function(a){(0,Fr.Z)(r,a);var e=vy(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),t.childrenClassName=function(){return"case_group--children"},t.renderFooterWrapper=function(){return null},Pt((0,Lr.Z)(t)),t.onPropsChanged(n),t}return(0,Ar.Z)(r,[{key:"onPropsChanged",value:function(t){}},{key:"isDefaultCase",value:function(){return this.props.children1==null}},{key:"reordableNodesCnt",value:function(){return this.props.parentReordableNodesCnt}},{key:"reordableNodesCntForItem",value:function(t){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(t){return this.props.totalRulesCnt}},{key:"showDragIcon",value:function(){return this.isDefaultCase()?!1:_n((0,Ge.Z)(r.prototype),"showDragIcon",this).call(this)}},{key:"renderHeaderWrapper",value:function(){return C.createElement("div",{key:"group-header",className:vn()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeaderLeft(),this.renderHeaderCenter(),this.renderActions())}},{key:"renderChildrenWrapper",value:function(){return this.isDefaultCase()?null:C.createElement("div",{className:"case_group--body"},this.renderCondition(),this.renderValue())}},{key:"renderHeaderLeft",value:function(){if(this.isDefaultCase()){var t=this.props.config.settings.defaultCaseLabel;return t||""}return C.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderCondition",value:function(){return this.isDefaultCase()?null:_n((0,Ge.Z)(r.prototype),"renderChildrenWrapper",this).call(this)}},{key:"renderHeaderCenter",value:function(){return this.isDefaultCase()?this.renderValue():null}},{key:"canAddGroup",value:function(){return this.isDefaultCase()?!1:_n((0,Ge.Z)(r.prototype),"canAddGroup",this).call(this)}},{key:"canAddRule",value:function(){return this.isDefaultCase()?!1:_n((0,Ge.Z)(r.prototype),"canAddRule",this).call(this)}},{key:"renderValue",value:function(){var t=this.props,i=t.config,u=t.isLocked,o=t.value,s=t.setValue,c=t.id,f=i.settings.immutableValuesMode,d=C.createElement(Yi,{key:"values",isCaseValue:!0,field:"!case_value",operator:null,value:o,valueSrc:"value",valueError:null,config:i,setValue:f?on:s,setValueSrc:on,readonly:f||u,id:c,groupId:null});return C.createElement(ft,{className:"case_group--value"},d)}},{key:"renderActions",value:function(){var t=this.props,i=t.config,u=t.addGroup,o=t.addRule,s=t.isLocked,c=t.isTrueLocked,f=t.id;return C.createElement(Tf,{config:i,addGroup:u,addRule:o,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:s,isTrueLocked:c,id:f})}},{key:"isEmptyCurrentGroup",value:function(){var t=this.props.value,i=t&&t.size?t.get(0):null,u=i!=null&&(Array.isArray(i)?i.length>0:!0);return _n((0,Ge.Z)(r.prototype),"isEmptyCurrentGroup",this).call(this)&&!u}}]),r}(Pn);xf.propTypes=kf(kf({},Pn.propTypes),{},{parentReordableNodesCnt:H().number,value:H().any,setValue:H().func});const hy=zi(gi("group case_group")(mi(xf)),"case_group");var my=["type"];function yy(a){var e=Ey();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Ey(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Uf(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Yu(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uf(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Uf(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var Oy=["rule","group","rule_group","switch_group","case_group"],yi=function(e){var r,n=((r=e.properties)===null||r===void 0?void 0:r.toObject())||{},t=Yu({},n);return e.isParentLocked&&(t.isLocked=!0),n.isLocked&&(t.isTrueLocked=!0),t},Sy={rule:function(e){return C.createElement(Cm,(0,qr.Z)({},yi(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,config:e.config,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},group:function(e){return C.createElement(xm,(0,qr.Z)({},yi(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))},rule_group:function(e){return C.createElement($m,(0,qr.Z)({},yi(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},rule_group_ext:function(e){return C.createElement(ty,(0,qr.Z)({},yi(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},switch_group:function(e){return C.createElement(py,(0,qr.Z)({},yi(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))},case_group:function(e){return C.createElement(hy,(0,qr.Z)({},yi(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))}},zu=function(a){(0,Fr.Z)(r,a);var e=yy(r);function r(){return(0,Cr.Z)(this,r),e.apply(this,arguments)}return(0,Ar.Z)(r,[{key:"render",value:function(){var t,i=this.props,u=i.type,o=(0,di.Z)(i,my),s=(t=o.properties)===null||t===void 0?void 0:t.get("mode"),c=s=="array"?"_ext":"",f=o.config.settings.renderItem,d=Sy[u+c];return f?f(Yu(Yu({},o),{},{type:u,itemComponent:d}),o.config.ctx):d?d(o):null}}]),r}(C.PureComponent);zu.propTypes={config:H().object.isRequired,id:H().string.isRequired,groupId:H().string,type:H().oneOf(Oy).isRequired,path:H().any.isRequired,properties:H().any.isRequired,children1:H().any,actions:H().object.isRequired,reordableNodesCnt:H().number,onDragStart:H().func,parentField:H().string,isDraggingTempo:H().bool,isParentLocked:H().bool};function Ty(a){var e=Ry();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function Ry(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Gf=pr.TreeUtils,Cy=Gf.getTotalReordableNodesCountInTree,Ay=Gf.getTotalRulesCountInTree,Bf=pr.DefaultUtils,Ly=Bf.createListFromArray,Wf=Bf.emptyProperies,Zf=function(a){(0,Fr.Z)(r,a);var e=Ty(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),t.pureShouldComponentUpdate=vi((0,Lr.Z)(t)),t._updPath(n),t}return(0,Ar.Z)(r,[{key:"shouldComponentUpdate",value:function(t,i){var u=this.props,o=this.pureShouldComponentUpdate(t,i);if(o){var s=[];for(var c in t){var f=t[c]!==u[c];f&&c!="__isInternalValueChange"&&s.push(c)}s.length||(o=!1),s.length==1&&s[0]=="tree"&&t.__isInternalValueChange&&(o=!1)}return o}},{key:"_updPath",value:function(t){var i=t.tree.get("id");this.path=Ly([i])}},{key:"render",value:function(){var t=this.props.tree,i=t.get("type"),u=i=="switch_group",o=u?null:Cy(t),s=u?null:Ay(t),c=t.get("id");return C.createElement(zu,{key:c,id:c,path:this.path,type:i,properties:t.get("properties")||Wf(),config:this.props.config,actions:this.props.actions,children1:t.get("children1")||Wf(),reordableNodesCnt:o,totalRulesCnt:s,parentReordableNodesCnt:0,onDragStart:this.props.onDragStart})}}]),r}(C.Component);Zf.propTypes={tree:H().any.isRequired,config:H().object.isRequired,actions:H().object.isRequired,onDragStart:H().func};const Fy=Lh(Zf);function Hf(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Iy(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hf(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Hf(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Ny(a){var e=by();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function by(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var wy=pr.clone,qu=pr.ConfigUtils,qi=qu.getFieldConfig,$f=qu.getFieldParts,Kf=qu.getFieldPathParts,Yf=pr.RuleUtils,zf=Yf.getFieldPathLabels,Py=Yf.getWidgetForFieldOp,qf=function(a){(0,Fr.Z)(r,a);var e=Ny(r);function r(n){var t;return(0,Cr.Z)(this,r),t=e.call(this,n),Pt((0,Lr.Z)(t)),t.onPropsChanged(n),t}return(0,Ar.Z)(r,[{key:"onPropsChanged",value:function(t){var i=this.props,u=["config","field","fieldSrc","fieldType","operator","isFuncArg","parentField"],o=["config","field","fieldSrc","fieldType","operator","value","placeholder","isFuncArg","parentField"],s=!this.items||u.map(function(f){return t[f]!==i[f]}).filter(function(f){return f}).length>0,c=!this.meta||o.map(function(f){return t[f]!==i[f]}).filter(function(f){return f}).length>0;s&&(this.items=this.getItems(t)),c&&(this.meta=this.getMeta(t))}},{key:"getItems",value:function(t){var i=t.config,u=t.field,o=t.fieldType,s=t.operator,c=t.parentField,f=t.isFuncArg,d=t.fieldDefinition,v=i.settings.canCompareFieldWithField,g=i.settings.fieldSeparator,h=$f(c,i),E=c?qi(i,c):null,S=c?E?.subfields:i.fields,A=this.filterFields(i,S,u,c,h,s,v,f,d,o),_=this.buildOptions(h,i,A,h);return _}},{key:"getMeta",value:function(t){var i,u=t.config,o=t.field,s=t.fieldType,c=t.operator,f=t.value,d=t.placeholder,v=t.isFuncArg,g=t.parentField,h=u.settings,E=h.fieldPlaceholder,S=h.fieldSeparatorDisplay,A=f,_=!!f,D=o?qi(u,o):{},P=D==null||(i=D.widgets)===null||i===void 0?void 0:i.field,k=P?.widgetProps||{},Z=_?null:v&&d||k.valuePlaceholder||E,q=_?qi(u,A):null,re=q||{},J=Kf(A,u),X=Kf(A,u,!0),ae=this.getFieldLabel(q,A,u),le=zf(A,u),ee=le?le.join(S):null;(ee==ae||g)&&(ee=null);var ie=re.label2;return{placeholder:Z,selectedKey:A,selectedKeys:J,selectedPath:X,selectedLabel:ae,selectedOpts:re,selectedAltLabel:ie,selectedFullLabel:ee}}},{key:"filterFields",value:function(t,i,u,o,s,c,f,d,v,g){i=wy(i);var h=t.settings.fieldSeparator,E=qi(t,u),S=!1,A=Py(t,u,c,"value"),_=t.widgets[A],D;d?D=v?.type:S&&_?D=_.type:E?D=E.type:D=g;function P(k,Z){for(var q in k){var re=k[q].subfields,J=(Z||[]).concat(q),X=J.join(h),ae=qi(t,X);if(!ae)delete k[q];else if(ae.type=="!struct"||ae.type=="!group")P(re,J)==0&&delete k[q];else{var le=(!D||ae.type==D)&&(d?!0:X!=u),ee=f||t.settings.canCompareFieldWithField;ee&&(le=le&&ee(u,E,X,ae,c)),le||delete k[q]}}return hi()(k).length}return P(i,s||[]),i}},{key:"buildOptions",value:function(t,i,u){var o=this,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!u)return null;var f=i.settings,d=f.fieldSeparator,v=f.fieldSeparatorDisplay,g=s!=null&&s.length?s.join(d)+d:"";return hi()(u).map(function(h){var E=[].concat((0,we.Z)(s??[]),[h]),S=u[h],A=o.getFieldLabel(S,E,i),_=zf(E,i),D=_.join(v);(D==A||t)&&(D=null);var P=S.label2,k=S.tooltip;if(!S.hideForCompare)return S.type=="!struct"||S.type=="!group"?{key:h,path:g+h,label:A,fullLabel:D,altLabel:P,tooltip:k,items:o.buildOptions(t,i,S.subfields,E,A)}:{key:h,path:g+h,label:A,fullLabel:D,altLabel:P,tooltip:k,grouplabel:c}}).filter(function(h){return!!h})}},{key:"getFieldLabel",value:function(t,i,u){if(!i)return null;var o=u.settings.maxLabelsLength,s=$f(i,u),c=t?.label||Fo()(s);return c=ko(c,o),c}},{key:"render",value:function(){var t=this.props,i=t.config,u=t.customProps,o=t.setValue,s=t.readonly,c=t.id,f=t.groupId,d=i.settings.renderField,v=Iy({isValueField:!0,config:i,customProps:u,setField:o,readonly:s,items:this.items,id:c,groupId:f},this.meta);return d(v,i.ctx)}}]),r}(C.Component);qf.propTypes={id:H().string,groupId:H().string,setValue:H().func.isRequired,config:H().object.isRequired,field:H().any,fieldSrc:H().string,fieldType:H().string,value:H().string,operator:H().string,customProps:H().object,readonly:H().bool,parentField:H().string,fieldDefinition:H().object,isFuncArg:H().bool};const _y=function(a){var e=a.value,r=a.setValue,n=a.config,t=a.labelYes,i=a.labelNo,u=a.readonly,o=a.customProps,s=o===void 0?{}:o,c=s.radioYes||{},f=s.radioNo||{},d=function(h){return r(h.target.checked)},v=function(h){return r(h.target.value=="true")};return C.createElement(C.Fragment,null,C.createElement("input",(0,qr.Z)({type:"radio",value:!0,checked:!!e,disabled:u,onChange:v},c))," ",t,C.createElement("input",(0,qr.Z)({type:"radio",value:!1,checked:!e,disabled:u,onChange:v},f))," ",i)},Dy=function(a){var e=a.value,r=a.setValue,n=a.config,t=a.readonly,i=a.placeholder,u=a.maxLength,o=a.customProps,s=function(d){var v=d.target.value;v===""&&(v=void 0),r(v)},c=e||"";return C.createElement("input",(0,qr.Z)({type:"text",value:c,placeholder:i,disabled:t,onChange:s,maxLength:u},o))},Vy=function(a){var e=a.value,r=a.setValue,n=a.config,t=a.readonly,i=a.placeholder,u=a.maxLength,o=a.maxRows,s=a.fullWidth,c=a.customProps,f=function(g){var h=g.target.value;h===""&&(h=void 0),r(h)},d=e||"";return C.createElement("textarea",(0,qr.Z)({value:d,placeholder:i,disabled:t,onChange:f,maxLength:u,style:{width:s?"100%":void 0}},c))};var qE=pr.moment;const My=function(a){var e=a.value,r=a.setValue,n=a.config,t=a.valueFormat,i=a.readonly,u=a.customProps,o=function(c){var f=c.target.value;f==""&&(f=void 0),r(f)};return C.createElement("input",(0,qr.Z)({type:"date",value:e||"",disabled:i,onChange:o},u))},jy=function(a){var e=a.value,r=a.setValue,n=a.config,t=a.valueFormat,i=a.use12Hours,u=a.readonly,o=a.customProps,s=function(f){var d=f.target.value;d==""&&(d=void 0),r(d)};return C.createElement("input",(0,qr.Z)({type:"time",value:e||"",disabled:u,onChange:s},o))};var Xf=pr.moment;const ky=function(a){var e=a.value,r=a.setValue,n=a.config,t=a.valueFormat,i=a.use12Hours,u=a.readonly,o=a.customProps,s=function(d){var v=d.target.value;v==""?v=void 0:v=Xf(new Date(v)).format(t),r(v)},c=e;return e?c=Xf(e).format("YYYY-MM-DDTHH:mm"):c="",C.createElement("input",(0,qr.Z)({type:"datetime-local",value:c,disabled:u,onChange:s},o))};var xy=pr.ListUtils.mapListValues;const Uy=function(a){var e=a.listValues,r=a.value,n=a.setValue,t=a.allowCustomValues,i=a.readonly,u=a.customProps,o=function(){return xy(e,function(d){var v=d.title,g=d.value;return C.createElement("option",{key:g,value:g},v)})},s=function(d){for(var v=[],g=d.options,h=0;h<g.length;h++){var E=g[h];E.selected&&v.push(E.value)}return v.length||(v=void 0),v},c=function(d){return n(s(d.target))};return C.createElement("select",(0,qr.Z)({multiple:!0,onChange:c,value:r,disabled:i},Xe()(u,["showSearch","input","showCheckboxes"])),o())};var Gy=pr.ListUtils.mapListValues;const By=function(a){var e=a.listValues,r=a.value,n=a.setValue,t=a.allowCustomValues,i=a.readonly,u=a.customProps,o=function(){return Gy(e,function(d){var v=d.title,g=d.value;return C.createElement("option",{key:g,value:g},v)})},s=function(d){return n(d.target.value)},c=r!=null;return C.createElement("select",(0,qr.Z)({onChange:s,value:c?r:"",disabled:i},Xe()(u,["showSearch","input"])),!c&&C.createElement("option",{disabled:!0,value:""}),o())},Wy=function(a){var e=a.value,r=a.setValue,n=a.config,t=a.readonly,i=a.min,u=a.max,o=a.step,s=a.placeholder,c=a.customProps,f=function(g){var h=g.target.value;h===""||h===null?h=void 0:h=Number(h),r(h)},d=e??"";return C.createElement("input",(0,qr.Z)({type:"number",value:d,placeholder:s,disabled:t,min:i,max:u,step:o,onChange:f},c))},Zy=function(a){var e=a.value,r=a.setValue,n=a.config,t=a.readonly,i=a.min,u=a.max,o=a.step,s=a.placeholder,c=a.customProps,f=c===void 0?{}:c,d=f.input||{},v=f.slider||f,g=function(S){var A=S.target.value;A===""||A===null?A=void 0:A=Number(A),r(A)},h=e??"";return C.createElement("div",{style:{display:"inline-flex"}},C.createElement("input",(0,qr.Z)({key:"number",type:"number",value:h,placeholder:s,disabled:t,min:i,max:u,step:o,onChange:g},d)),C.createElement("input",(0,qr.Z)({key:"range",type:"range",value:h,disabled:t,min:i,max:u,step:o,onChange:g},v)))},Hy=function(a){var e=a.items,r=a.setField,n=a.selectedKey,t=a.readonly,i=a.errorText,u=function c(f){return f.map(function(d){var v=d.items,g=d.path,h=d.label,E=d.disabled,S=d.matchesType;if(v)return C.createElement("optgroup",{disabled:E,key:g,label:h},c(v));var A=S?{fontWeight:"bold"}:{};return C.createElement("option",{disabled:E,key:g,value:g,style:A},h)})},o=function(f){return r(f.target.value)},s=n!=null;return C.createElement("select",{onChange:o,value:s?n:"",disabled:t,style:{color:i?"red":null}},!s&&C.createElement("option",{disabled:!0,value:""}),u(e))},$y=function(a){var e=a.id,r=a.not,n=a.setNot,t=a.conjunctionOptions,i=a.setConjunction,u=a.disabled,o=a.readonly,s=a.config,c=a.showNot,f=a.notLabel,d=Object.keys(t).length,v=u,g=s.settings.forceShowConj,h=g||d>1&&!v,E=function(){return Object.keys(t).map(function(P){var k=t[P],Z=k.id,q=k.name,re=k.label,J=k.checked,X=i.isDummyFn?"__dummy":"";return(o||u)&&!J?null:[C.createElement("input",{key:Z+X,type:"radio",id:Z+X,name:q+X,checked:J,disabled:o||u,value:P,onChange:A}),C.createElement("label",{key:Z+X+"label",htmlFor:Z+X},re)]})},S=function(){var P="not";return[C.createElement("input",{key:e+P,type:"checkbox",id:e+P,checked:r,disabled:o,onChange:_}),C.createElement("label",{key:e+P+"label",htmlFor:e+P},f||"NOT")]},A=function(P){return i(P.target.value)},_=function(P){return n(P.target.checked)};return[c&&S(),h&&E()]},Ky=function(a){var e=a.type,r=a.label,n=a.onClick,t=a.readonly,i=a.config,u={addRuleGroup:"+",addRuleGroupExt:"+",delGroup:"x",delRuleGroup:"x",delRule:"x"},o=r||u[e];return C.createElement("button",{onClick:n,type:"button",disabled:t},o)},Yy=function(a){var e=a.children,r=a.config;return C.createElement(C.Fragment,null,e)},zy=function(a){var e=a.config,r=a.valueSources,n=a.valueSrc,t=a.title,i=a.setValueSrc,u=a.readonly,o=function(f){return f.map(function(d){var v=(0,qe.Z)(d,2),g=v[0],h=v[1];return C.createElement("option",{key:g,value:g},h.label)})},s=function(f){return i(f.target.value)};return C.createElement("select",{onChange:s,value:n||"",disabled:u},o(r))},qy=function(a){var e=a.value,r=a.setValue,n=a.label,t=a.id,i=a.config,u=a.type,o=function(f){return r(f.target.checked)},s=u;return[C.createElement("input",{key:t+s,type:"checkbox",id:t+s,checked:!!e,onChange:o}),C.createElement("label",{key:t+s+"label",htmlFor:t+s},n)]},Xy=function(a){var e=a.onOk,r=a.okText,n=a.cancelText,t=a.title;confirm(t)&&e()};var Qy=function(e){var r=e.config,n=e.children;return n};function Jy(a){var e=eE();return function(){var n=(0,Ge.Z)(a),t;if(e){var i=(0,Ge.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,Ir.Z)(this,t)}}function eE(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Xu=function(a){(0,Fr.Z)(r,a);var e=Jy(r);function r(){var n;(0,Cr.Z)(this,r);for(var t=arguments.length,i=new Array(t),u=0;u<t;u++)i[u]=arguments[u];return n=e.call.apply(e,[this].concat(i)),n.handleChange=function(o){n.props.setOption("proximity",parseInt(o))},n}return(0,Ar.Z)(r,[{key:"render",value:function(){var t=this.props,i=t.defaults,u=t.options,o=t.config,s=t.optionLabel,c=t.optionPlaceholder,f=t.customProps,d=t.minProximity,v=t.maxProximity,g=t.optionTextBefore,h=t.readonly,E=o.settings,S=o.widgets,A=o.ctx,_=i?i.proximity:void 0,D=E.showLabels,P=u.get("proximity",_),k=Gu()(d,v+1).map(function(re){return{title:re,value:re}}),Z=S.select.factory,q=function(J){return Z(J,A)};return C.createElement("div",{className:"operator--PROXIMITY"},C.createElement("div",{className:"operator--options"},D&&C.createElement("label",{className:"rule--label"},s),!D&&g&&C.createElement("div",{className:"operator--options--sep"},C.createElement("span",null,g)),C.createElement(q,(0,qr.Z)({config:o,value:P,listValues:k,setValue:this.handleChange,readonly:h,placeholder:c},f))),C.createElement("div",{className:"operator--widgets"},this.props.children))}}]),r}(C.PureComponent);Xu.propTypes={config:H().object.isRequired,setOption:H().func.isRequired,options:H().any.isRequired,minProximity:H().number,maxProximity:H().number,optionPlaceholder:H().string,optionTextBefore:H().string,optionLabel:H().string,customProps:H().object,readonly:H().bool},Xu.defaultProps={customProps:{},minProximity:2,maxProximity:10,optionPlaceholder:"Select words between",optionLabel:"Words between",optionTextBefore:null};function Qf(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function or(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qf(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Qf(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var rE=or({},rt.conjunctions),tE=or(or({},rt.operators),{},{proximity:or(or({},rt.operators.proximity),{},{options:or(or({},rt.operators.proximity.options),{},{factory:function(e,r){var n=r.RCE,t=r.O.ProximityOperator;return n(t,e)}})})}),nE={text:or(or({},rt.widgets.text),{},{factory:function(e,r){var n=r.RCE,t=r.W.VanillaTextWidget;return n(t,e)}}),textarea:or(or({},rt.widgets.textarea),{},{factory:function(e,r){var n=r.RCE,t=r.W.VanillaTextAreaWidget;return n(t,e)}}),number:or(or({},rt.widgets.number),{},{factory:function(e,r){var n=r.RCE,t=r.W.VanillaNumberWidget;return n(t,e)}}),slider:or(or({},rt.widgets.slider),{},{factory:function(e,r){var n=r.RCE,t=r.W.VanillaSliderWidget;return n(t,e)}}),select:or(or({},rt.widgets.select),{},{factory:function(e,r){var n=r.RCE,t=r.W.VanillaSelectWidget;return n(t,e)}}),multiselect:or(or({},rt.widgets.multiselect),{},{factory:function(e,r){var n=r.RCE,t=r.W.VanillaMultiSelectWidget;return n(t,e)}}),date:or(or({},rt.widgets.date),{},{factory:function(e,r){var n=r.RCE,t=r.W.VanillaDateWidget;return n(t,e)}}),time:or(or({},rt.widgets.time),{},{factory:function(e,r){var n=r.RCE,t=r.W.VanillaTimeWidget;return n(t,e)}}),datetime:or(or({},rt.widgets.datetime),{},{factory:function(e,r){var n=r.RCE,t=r.W.VanillaDateTimeWidget;return n(t,e)}}),boolean:or(or({},rt.widgets.boolean),{},{factory:function(e,r){var n=r.RCE,t=r.W.VanillaBooleanWidget;return n(t,e)}}),field:or(or({},rt.widgets.field),{},{factory:function(e,r){var n=r.RCE,t=r.W.ValueFieldWidget;return n(t,e)},customProps:{showSearch:!0}}),func:or(or({},rt.widgets.func),{},{factory:function(e,r){var n=r.RCE,t=r.W.FuncWidget;return n(t,e)},customProps:{}}),case_value:or(or({},rt.widgets.case_value),{},{factory:function(e,r){var n=r.RCE,t=r.W.VanillaTextWidget;return n(t,e)}})},aE=or(or({},rt.types),{},{select:or(or({},rt.types.select),{},{widgets:or(or({},rt.types.select.widgets),{},{select:or(or({},rt.types.select.widgets.select),{},{widgetProps:{customProps:{showSearch:!0}}})})})}),iE=or(or({},rt.settings),{},{renderField:function(e,r){var n=r.RCE,t=r.W.VanillaFieldSelect;return n(t,e)},renderOperator:function(e,r){var n=r.RCE,t=r.W.VanillaFieldSelect;return n(t,e)},renderFunc:function(e,r){var n=r.RCE,t=r.W.VanillaFieldSelect;return n(t,e)},renderConjs:function(e,r){var n=r.RCE,t=r.W.VanillaConjs;return n(t,e)},renderSwitch:function(e,r){var n=r.RCE,t=r.W.VanillaSwitch;return n(t,e)},renderButton:function(e,r){var n=r.RCE,t=r.W.VanillaButton;return n(t,e)},renderButtonGroup:function(e,r){var n=r.RCE,t=r.W.VanillaButtonGroup;return n(t,e)},renderProvider:function(e,r){var n=r.RCE,t=r.W.VanillaProvider;return n(t,e)},renderValueSources:function(e,r){var n=r.RCE,t=r.W.VanillaValueSources;return n(t,e)},renderFieldSources:function(e,r){var n=r.RCE,t=r.W.VanillaValueSources;return n(t,e)},renderConfirm:function(e,r){var n=r.W.vanillaConfirm;return n(e)},renderSwitchPrefix:"Conditions",customFieldSelectProps:{showSearch:!0},defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5,renderSize:"small",maxLabelsLength:100,showLock:!1,showNot:!0,forceShowConj:!1,groupActionsPosition:"topRight"}),oE=or(or({},rt.ctx),{},{W:or({},Ce),O:or({},ar),RCE:function(e,r){return C.createElement(e,r)}}),Qu={conjunctions:rE,operators:tE,widgets:nE,types:aE,settings:iE,ctx:oE};Qu=pr.ConfigMixins.removeMixins(Qu,["rangeslider","treeselect","treemultiselect"]);const un=Qu;var XE=m(80875);function Jf(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function Bo(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Jf(Object(r),!0).forEach(function(n){_defineProperty(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Jf(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}var Xi=pr.Autocomplete,Wo=Xi.mergeListValues,ed=Xi.listValueToOption,uE=Xi.optionToListValue,sE=Xi.optionsToListValues,lE=Xi.fixListValuesGroupOrder,Ei=pr.ListUtils,cE=Ei.mapListValues,rd=Ei.listValuesToArray,Zo=Ei.getListValue,fE=Ei.makeCustomListValue,dE=Ei.searchListValue,QE=Ei.getItemInListValues;function pE(a){return new Promise(function(e){setTimeout(e,a)})}var JE=function(e,r){var n=e.asyncFetch,t=e.useLoadMore,i=e.useAsyncSearch,u=e.forceAsyncSearch,o=e.asyncListValues,s=e.listValues,c=e.allowCustomValues,f=e.value,d=e.setValue,v=e.placeholder,g=e.config,h=r.debounceTimeout,E=r.multiple,S=r.uif,A=["LOAD_MORE","LOADING_MORE"],_="Load more...",D="Loading more...",P=u?"Type to search":v,k=React.useState(!1),Z=_slicedToArray(k,2),q=Z[0],re=Z[1],J=React.useState(void 0),X=_slicedToArray(J,2),ae=X[0],le=X[1],ee=React.useState(0),ie=_slicedToArray(ee,2),se=ie[0],de=ie[1],pe=React.useState(!1),me=_slicedToArray(pe,2),Se=me[0],Ne=me[1],je=React.useState(""),Me=_slicedToArray(je,2),Fe=Me[0],Ke=Me[1],Qe=React.useState(void 0),Be=_slicedToArray(Qe,2),tr=Be[0],Ye=Be[1],Or=React.useRef(0),br=React.useRef(0),dt=React.useRef(!1),Zt=rd(o),Ot=n?o?Wo(tr,Zt,!0):tr:s,Ht=n?tr:s;c&&Fe&&!dE(Fe,tr)&&(Ht=Wo(Ht,[fE(Fe)],!0)),n&&!tr&&o&&!Fe&&!q&&S==="antd"&&(Ht=Ot),n&&!c&&o&&S==="mui"&&(Ht=Wo(Ht,Zt,!0,!0));var sn=se>0,$t=q&&n&&tr===void 0&&(u?Fe:!0),st=$t&&sn,Gr=!st&&Ot&&Ot.length>0&&ae&&ae.hasMore&&(ae.filter||"")===Fe,lt=!sn&&Gr,Yn=cE(Ht,ed),Ha=f!=null,pa=!E&&Ha?Zo(f,Ot):null,zn=function(){var pt=_asyncToGenerator(_regeneratorRuntime.mark(function Je(){var fr,hr,Br,_t,St,vt,yn,It,Si,Ka,Ya,Ti,Qn,ha,Ri,Jn=arguments;return _regeneratorRuntime.wrap(function(En){for(;;)switch(En.prev=En.next){case 0:return fr=Jn.length>0&&Jn[0]!==void 0?Jn[0]:null,hr=Jn.length>1&&Jn[1]!==void 0?Jn[1]:!1,!hr&&ae&&le(void 0),Br=hr&&tr?tr.length:0,_t=hr&&ae||!t&&{pageSize:0},St=++Or.current,En.next=8,n.call(g?.ctx,fr,Br,_t);case 8:if(vt=En.sent,yn=Or.current!=St,!(yn||!br.current)){En.next=12;break}return En.abrupt("return",null);case 12:return It=vt!=null&&vt.values?vt:{values:vt},Si=It.values,Ka=It.hasMore,Ya=It.meta,Ti=rd(Si),hr?(ha=Wo(tr,Ti,!1),Qn=ha.length>tr.length):(ha=Ti,t&&(Qn=ha.length>0)),Ri=Ka!=null||Ya!=null||Qn!=null?Bo(Bo(Bo(Bo({},Qn!=null?{hasMore:Qn}:{}),Ka!=null?{hasMore:Ka}:{}),Ya??{}),{},{filter:fr}):void 0,Ri&&le(Ri),En.abrupt("return",ha);case 18:case"end":return En.stop()}},Je)}));return function(){return pt.apply(this,arguments)}}(),gn=function(){var pt=_asyncToGenerator(_regeneratorRuntime.mark(function Je(){var fr,hr,Br,_t=arguments;return _regeneratorRuntime.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return fr=_t.length>0&&_t[0]!==void 0?_t[0]:null,hr=_t.length>1&&_t[1]!==void 0?_t[1]:!1,de(function(yn){return yn+1}),Ne(hr),vt.next=6,zn(fr,hr);case 6:if(Br=vt.sent,br.current){vt.next=9;break}return vt.abrupt("return");case 9:Br!=null&&Ye(Br),de(function(yn){return yn-1}),Ne(!1);case 12:case"end":return vt.stop()}},Je)}));return function(){return pt.apply(this,arguments)}}(),va=React.useCallback(debounce(gn,h),[]);React.useEffect(function(){return br.current++,$t&&se==0&&Or.current==0&&_asyncToGenerator(_regeneratorRuntime.mark(function pt(){return _regeneratorRuntime.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return fr.next=2,gn();case 2:case"end":return fr.stop()}},pt)}))(),function(){br.current--}},[$t]);var $a=function(){re(!0)},hn=function(){var pt=_asyncToGenerator(_regeneratorRuntime.mark(function Je(fr){var hr,Br;return _regeneratorRuntime.wrap(function(St){for(;;)switch(St.prev=St.next){case 0:if(hr=dt.current,hr?(dt.current=!1,E&&re(!1)):re(!1),!(S==="mui"&&!hr)){St.next=6;break}return Br="",St.next=6,qn(null,Br,"my-reset");case 6:case"end":return St.stop()}},Je)}));return function(fr){return pt.apply(this,arguments)}}(),mn=function(Je){Je?$a():hn()},Qi=function(Je){var fr=Je?.specialValue||Je?.value;return A.includes(fr)},Ji=function(){var pt=_asyncToGenerator(_regeneratorRuntime.mark(function Je(fr,hr,Br){var _t,St,vt,yn,It,Si,Ka,Ya,Ti,Qn,ha,Ri,Jn,$o,En,ld;return _regeneratorRuntime.wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:if(St=E&&S==="mui"&&Br==="clear",vt=!E&&S==="mui"&&Br==="clear"&&fr?.type==="change",S==="mui"&&(Br=hr,E?hr=Br.map(function(Vn){var es;return(es=Vn?.value)!==null&&es!==void 0?es:Vn}):hr=(yn=(It=Br)===null||It===void 0?void 0:It.value)!==null&&yn!==void 0?yn:Br),Si=E&&Array.isArray(Br)&&Br.map(function(Vn){return Vn?.specialValue}).find(function(Vn){return!!Vn})||((_t=Br)===null||_t===void 0?void 0:_t.specialValue),E&&hr&&!Array.isArray(hr)&&(hr=[].concat(_toConsumableArray(f||[]),[hr]),Br=null),Ka=St&&hr.length===0&&Fe&&q||vt,!Ka){Kt.next=8;break}return Kt.abrupt("return");case 8:if(Ya=E&&hr.length&&hr.length>(f||[]).length&&hr[hr.length-1]==Fe&&!Zo(Fe,tr),Si!="LOAD_MORE"){Kt.next=16;break}return Ke(Fe),dt.current=!0,Kt.next=14,gn(Fe,!0);case 14:Kt.next=32;break;case 16:if(Si!="LOADING_MORE"){Kt.next=20;break}dt.current=!0,Kt.next=32;break;case 20:if(!E){Kt.next=30;break}if(Ti=sE(hr,Ot,c),Qn=_slicedToArray(Ti,2),ha=Qn[0],Ri=Qn[1],d(ha,n?Ri:void 0),!Ya){Kt.next=28;break}return Kt.next=26,pE(0);case 26:return Kt.next=28,qn(null,"","my-reset");case 28:Kt.next=32;break;case 30:Jn=uE(hr,Ot,c),$o=_slicedToArray(Jn,2),En=$o[0],ld=$o[1],d(En,n?ld:void 0);case 32:case"end":return Kt.stop()}},Je)}));return function(fr,hr,Br){return pt.apply(this,arguments)}}(),qn=function(){var pt=_asyncToGenerator(_regeneratorRuntime.mark(function Je(fr,hr,Br){var _t,St,vt;return _regeneratorRuntime.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:if(_t=S==="mui"&&Br==="reset",St=hr,!(St===_||St===D||_t)){It.next=4;break}return It.abrupt("return");case 4:if(hr==Fe){It.next=13;break}if(Ke(St),vt=i&&(u?!!St:!0),!vt){It.next=12;break}return It.next=10,va(St);case 10:It.next=13;break;case 12:i&&u&&Ye([]);case 13:case"end":return It.stop()}},Je)}));return function(fr,hr,Br){return pt.apply(this,arguments)}}(),Oi=function(Je){var fr=_toConsumableArray(Je);return t&&(lt?fr.push({specialValue:"LOAD_MORE",title:_}):Se&&fr.push({specialValue:"LOADING_MORE",title:D,disabled:!0})),fr},Vr=function(Je,fr){if(fr==null)return null;var hr=fr.value!=null?fr.value:fr;return Je.value===hr},ln=function(Je){return Je&&Je.disabled},cn=function(Je){var fr;if(Je!=null&&Je.isCustom)return!0;var hr=(fr=Je?.value)!==null&&fr!==void 0?fr:Je,Br=Zo(hr,Ot);return Br?.isCustom||!1},ga=function(Je){if(Je==null)return null;var fr=Je.value!=null?Je:ed(Zo(Je,Ot));return!fr&&Je.specialValue?Je.title:!fr&&c||!fr?Je:fr.title||fr.label},Xn=S==="mui"?lE(Yn):Yn;return{options:Xn,listValues:Ot,hasValue:Ha,selectedListValue:pa,open:q,onOpen:$a,onClose:hn,onDropdownVisibleChange:mn,onChange:Ji,inputValue:Fe,onInputChange:qn,canShowLoadMore:lt,isInitialLoading:st,isLoading:sn,isLoadingMore:Se,isSpecialValue:Qi,extendOptions:Oi,getOptionSelected:Vr,getOptionDisabled:ln,getOptionIsCustom:cn,getOptionLabel:ga,aPlaceholder:P}};const eO=null;function td(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),r.push.apply(r,n)}return r}function nd(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?td(Object(r),!0).forEach(function(n){(0,Ae.Z)(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):td(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}const Dn=nd(nd({},pr),{},{ReactUtils:Re});var vE=m(92403),gE=m(67823);const Ju={add:"Add",remove:"Remove"},rO={id:Dn.uuid(),type:"group",children1:{[Dn.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},ad={id:Dn.uuid(),type:"group",children1:{[Dn.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},hE={...un.widgets,text:{...un.widgets.text,factory:function(e){return C.createElement(ba.I,{value:e?.value||"",placeholder:e?.placeholder,onChange:r=>e?.setValue(r.currentTarget.value)})}},number:{...un.widgets.number,factory:function(e){return C.createElement(ba.I,{value:e?.value,placeholder:e?.placeholder,type:"number",onChange:r=>e?.setValue(Number.parseInt(r.currentTarget.value,10))})}},datetime:{...un.widgets.datetime,factory:function(e){return C.createElement(gE.x,{onChange:r=>{e?.setValue(r.format(un.widgets.datetime.valueFormat))},date:(0,vE.CQ)(e?.value).utc()})}}},mE={...un.settings,canRegroup:!1,maxNesting:1,canReorder:!1,showNot:!1,addRuleLabel:Ju.add,deleteLabel:Ju.remove,renderConjs:function(e){return C.createElement(De.Ph,{id:e?.id,"aria-label":"Conjunction",menuShouldPortal:!0,options:e?.conjunctionOptions?Object.keys(e?.conjunctionOptions).map(Hr.E):void 0,value:e?.selectedConjunction,onChange:r=>e?.setConjunction(r.value)})},renderField:function(e){const r=e?.config?.fields||{};return C.createElement(De.Ph,{id:e?.id,width:25,"aria-label":"Field",menuShouldPortal:!0,options:e?.items.map(n=>{const t=r[n.key].mainWidgetProps?.customProps?.icon;return{label:n.label,value:n.key,icon:t}}),value:e?.selectedKey,onChange:n=>{e?.setField(n.label)}})},renderButton:function(e){return C.createElement(Te.zx,{type:"button",title:`${e?.label} filter`,onClick:e?.onClick,variant:"secondary",size:"md",icon:e?.label===Ju.add?"plus":"times"})},renderOperator:function(e){return C.createElement(De.Ph,{options:e?.items.map(r=>({label:r.label,value:r.key})),"aria-label":"Operator",menuShouldPortal:!0,value:e?.selectedKey,onChange:r=>{e?.setField(r.value||"")}})}};var yE=(a=>(a.IN="select_any_in",a.NOT_IN="select_not_any_in",a))(yE||{});const EE=CE(un),id=un.types.text.widgets.text,OE=[...id.operators||[],"select_any_in","select_not_any_in"],SE={...id,operators:OE},TE={...un.types,text:{...un.types.text,widgets:{...un.types.text.widgets,text:SE}}},RE={...un,widgets:hE,settings:mE,operators:EE,types:TE},od=()=>"",ud=a=>typeof a=="function";function CE(a){const{...e}=a.operators,r=()=>{const o=e.select_any_in.sqlFormatOp;return ud(o)?o:od},n=(o,s,c,f,d,v,g,h)=>r()(o,s,sd(c),f,d,v,g,h),t=()=>{const o=e.select_not_any_in.sqlFormatOp;return ud(o)?o:od},i=(o,s,c,f,d,v,g,h)=>t()(o,s,sd(c),f,d,v,g,h);return{...e,select_any_in:{...e.select_any_in,sqlFormatOp:n},select_not_any_in:{...e.select_not_any_in,sqlFormatOp:i}}}function sd(a){return(0,xr.isString)(a)?a.split(","):a}function AE({sql:a,config:e,onSqlChange:r}){const[n,t]=(0,C.useState)(),i=(0,C.useMemo)(()=>({...RE,...e}),[e]);(0,C.useEffect)(()=>{if(!n){const o=Dn.checkTree(Dn.loadTree(a.whereJsonTree??ad),i);t(o)}},[i,a.whereJsonTree,n]),(0,C.useEffect)(()=>{a.whereJsonTree||t(Dn.checkTree(Dn.loadTree(ad),i))},[i,a.whereJsonTree]);const u=(0,C.useCallback)((o,s)=>{t(o);const c={...a,whereJsonTree:Dn.getTree(o),whereString:Dn.sqlFormat(o,s)};r(c)},[r,a]);return n?C.createElement(Zc,{...i,value:n,onChange:u,renderBuilder:o=>C.createElement(Fy,{...o})}):null}function Ho(a){return`
    display: flex;
    gap: 8px;
    flex-direction: ${a};`}(0,jr.injectGlobal)`
  .group--header {
    ${Ho("row")}
  }

  .group-or-rule {
    ${Ho("column")}
    .rule {
      flex-direction: row;
    }
  }

  .rule--body {
    ${Ho("row")}
  }

  .group--children {
    ${Ho("column")}
  }

  .group--conjunctions:empty {
    display: none;
  }
`;function LE({query:a,fields:e,onQueryChange:r,db:n}){const t=(0,mo.Z)(async()=>FE(e),[e]),{onSqlChange:i}=ri({query:a,onQueryChange:r,db:n});return C.createElement(AE,{key:JSON.stringify(t.value),config:{fields:t.value||{}},sql:a.sql,onSqlChange:u=>{const o=(0,Ct.J)().getVariables();IE(u,o),i(u)}})}function FE(a){const e={};for(const r of a)e[r.value]={type:r.raqbFieldType||"text",valueSources:["value"],mainWidgetProps:{customProps:{icon:r.icon}}};return e}function IE(a,e){const r=n=>n.multi&&(a.whereString?.includes(`\${${n.name}}`)||a.whereString?.includes(`$${n.name}`));e.some(n=>r(n))&&(a.whereString=a.whereString?.replaceAll("')",")"),a.whereString=a.whereString?.replaceAll("('","("))}const NE=({query:a,db:e,queryRowFilter:r,onChange:n,onValidate:t,range:i})=>{const u=(0,Ue.Z)(async()=>await e.fields(a),[e,a.dataset,a.table]);return C.createElement(C.Fragment,null,C.createElement(Fa._,null,C.createElement(Zr.p,null,C.createElement(Ni,{fields:u.value||[],query:a,onQueryChange:n,db:e})),r.filter&&C.createElement(Zr.p,null,C.createElement(Mr.S,{label:"Filter by column value",optional:!0},C.createElement(LE,{fields:u.value||[],query:a,onQueryChange:n,db:e}))),r.group&&C.createElement(Zr.p,null,C.createElement(Mr.S,{label:"Group by column"},C.createElement(Na,{fields:u.value||[],query:a,onQueryChange:n,db:e}))),r.order&&C.createElement(Zr.p,null,C.createElement(ni,{fields:u.value||[],query:a,onQueryChange:n,db:e})),r.preview&&a.rawSql&&C.createElement(Zr.p,null,C.createElement(co,{rawSql:a.rawSql,datasourceType:a.datasource?.type}))),C.createElement(Ai,{db:e,query:a,onValidate:t,range:i}))};function bE({datasource:a,query:e,onChange:r,onRunQuery:n,range:t,queryHeaderProps:i}){const[u,o]=(0,C.useState)(!0),s=a.getDB(),{preconfiguredDatabase:c}=a,f=!!i?.isPostgresInstance,{loading:d,error:v}=(0,Ue.Z)(async()=>()=>{a.getDB(a.id).init!==void 0&&a.getDB(a.id).init()},[a]),g=(0,ye.Y)(e),[h,E]=(0,C.useState)({filter:!!g.sql?.whereString,group:!!g.sql?.groupBy?.[0]?.property.name,order:!!g.sql?.orderBy?.property.name,preview:!0}),[S,A]=(0,C.useState)(g);(0,C.useEffect)(()=>()=>{a.getDB(a.id).dispose!==void 0&&a.getDB(a.id).dispose()},[a]);const _=(0,C.useCallback)(k=>{wE(k)&&n&&n()},[n]),D=(k,Z=!0)=>{A(k),r(k),(0,be.IC)(k.sql?.columns)&&k.sql?.columns.some(q=>q.name)&&!h.group&&E({...h,group:!0}),Z&&_(k)},P=k=>{A(k),r(k)};return d||v?null:C.createElement(C.Fragment,null,C.createElement(Sr,{db:s,preconfiguredDataset:c,onChange:P,onRunQuery:n,onQueryRowChange:E,queryRowFilter:h,query:g,isQueryRunnable:u,isPostgresInstance:f}),C.createElement(Oe.T,{v:.5}),g.editorMode!==N.je.Code&&C.createElement(NE,{db:s,query:g,onChange:k=>D(k,!1),queryRowFilter:h,onValidate:o,range:t}),g.editorMode===N.je.Code&&C.createElement(Nt,{db:s,query:g,queryToValidate:S,onChange:D,onRunQuery:n,onValidate:o,range:t}))}const wE=a=>!!a.rawSql},7391:(ge,te,m)=>{"use strict";m.d(te,{F:()=>L});var V=m(32688);const L=()=>!!V.config.featureToggles.sqlDatasourceDatabaseSelection},18996:(ge,te,m)=>{"use strict";m.d(te,{W:()=>V,n:()=>L});const V=["AVG","COUNT","MAX","MIN","SUM"],L=["$__time","$__timeEpoch","$__timeFilter","$__timeFrom","$__timeTo","$__timeGroup","$__timeGroupAlias","$__unixEpochFilter","$__unixEpochNanoFilter","$__unixEpochNanoFrom","$__unixEpochNanoTo","$__unixEpochGroup","$__unixEpochGroupAlias"]},64755:(ge,te,m)=>{"use strict";m.d(te,{D:()=>Oe});var V=m(8894),L=m(31312),w=m(71476),U=m(96083),W=m(40729),I=m(54554),F=m(98579),j=m(78597),b=m(92743),O=m(79059),M=m(72639),Y=m(4148),x=m(4649),B=m(86832);class ${transformMetricFindResponse(ye){const be=[],We=ye.fields.find(xe=>xe.name==="__text"),Pe=ye.fields.find(xe=>xe.name==="__value");if(We&&Pe)for(let xe=0;xe<We.values.length;xe++)be.push({text:""+We.values[xe],value:""+Pe.values[xe]});else for(const xe of ye.fields)for(const dr of xe.values)be.push({text:dr});return(0,B.uniqBy)(be,"text")}}var K=m(18213),Re=m(18996),Ce=m(246),ar=m(57642);function C(N){const ye=typeof N.rawQuery=="string"?N.rawQuery:null;if(!ye)return N;const be=(0,ar.Y)({refId:"Annotation",...N.target??{},rawSql:ye});return{...N,rawQuery:void 0,workspace:void 0,subscription:void 0,queryType:void 0,target:be}}var Ue=m(7391);class Oe extends b.CK{constructor(ye,be=(0,O.J)()){super(ye),this.templateSrv=be,this.interpolateVariable=(Pe,xe)=>typeof Pe=="string"?xe.multi||xe.includeAll?this.getQueryModel().quoteLiteral(Pe):String(Pe).replace(/'/g,"''"):typeof Pe=="number"?Pe:Array.isArray(Pe)?Pe.map(Wr=>this.getQueryModel().quoteLiteral(Wr)).join(","):Pe,this.name=ye.name,this.responseParser=new $,this.id=ye.id;const We=ye.jsonData||{};this.interval=We.timeInterval||"1m",this.db=this.getDB(),this.preconfiguredDatabase=We.database??"",this.annotations={prepareAnnotation:C,QueryEditor:K.M}}getResponseParser(){return this.responseParser}interpolateVariablesInQueries(ye,be){let We=ye;return ye&&ye.length>0&&(We=ye.map(Pe=>({...Pe,datasource:this.getRef(),rawSql:this.templateSrv.replace(Pe.rawSql,be,this.interpolateVariable),rawQuery:!0}))),We}filterQuery(ye){return!ye.hide}applyTemplateVariables(ye,be){return{refId:ye.refId,datasource:this.getRef(),rawSql:this.templateSrv.replace(ye.rawSql,be,this.interpolateVariable),format:ye.format}}query(ye){if((0,Ue.F)()){const be=this.checkForDatabaseIssue(ye);if(be){const We=new Error(be);return(0,V._)(()=>We)}}return ye.targets.forEach(be=>{ye.app===U.zj.Dashboard||ye.app===U.zj.PanelViewer||(0,M.ff)("grafana_sql_query_executed",{datasource:be.datasource?.type,editorMode:be.editorMode,format:be.format,app:ye.app})}),super.query(ye)}checkForDatabaseIssue(ye){if(this.type==="postgres"&&!this.preconfiguredDatabase)return`You do not currently have a default database configured for this data source. Postgres requires a default
             database with which to connect. Please configure one through the Data Sources Configuration page, or if you
             are using a provisioning file, update that configuration file with a default database.`;if(ye.app!==U.zj.Explore&&this.preconfiguredDatabase){for(const be of ye.targets)if(be.editorMode===j.je.Builder&&be.dataset!==this.preconfiguredDatabase)return`The configuration for this panel's data source has been modified. The previous database used in this panel's
                   saved query is no longer available. Please update the query to use the new database option.
                   Previous query parameters will be preserved until the query is updated.`}}async metricFindQuery(ye,be){const We=be?.range;if(We==null)return[];let Pe="tempvar";be&&be.variable&&be.variable.name&&(Pe=be.variable.name);const xe={...be?.scopedVars,...(0,W._)({query:ye,wildcardChar:"%",options:be})},dr=this.templateSrv.replace(ye,xe,this.interpolateVariable),Wr={refId:Pe,datasource:this.getRef(),rawSql:dr,format:Ce.ws.Table},Zr=await this.runMetaQuery(Wr,We);return this.getResponseParser().transformMetricFindResponse(Zr)}async runSql(ye,be){const We=(0,I.JK)(),Pe=await this.runMetaQuery({rawSql:ye,format:Ce.ws.Table,refId:be?.refId},We);return new F.U(Pe)}runMetaQuery(ye,be){const We=ye.refId||"meta",Pe=[{...ye,datasource:ye.datasource||this.getRef(),refId:We}];return(0,L.n)((0,Y.i)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:be.from.valueOf().toString(),to:be.to.valueOf().toString(),queries:Pe},requestId:We}).pipe((0,w.U)(xe=>(0,x.z1)(xe,Pe).data[0]??{fields:[]})))}targetContainsTemplate(ye){let be=ye.rawSql;return Re.n.forEach(We=>{be=be?.replace(We,"")||""}),this.templateSrv.containsTemplate(be)}}},57642:(ge,te,m)=>{"use strict";m.d(te,{Y:()=>U});var V=m(78597),L=m(246),w=m(86654);function U(W){let I=W?.editorMode||V.je.Builder;return W?.editorMode===void 0&&W?.rawSql!==void 0&&(I=V.je.Code),{...W,refId:W?.refId||"A",format:W?.format!==void 0?W.format:L.ws.Table,rawSql:W?.rawSql||"",editorMode:I,sql:W?.sql??{columns:[(0,w.Wf)()],groupBy:[(0,w.U2)()],limit:50}}}},76813:(ge,te,m)=>{"use strict";m.d(te,{R:()=>V,a:()=>L});var V=(w=>(w.String="string",w))(V||{}),L=(w=>(w.Property="property",w.Operator="operator",w.Or="or",w.And="and",w.GroupBy="groupBy",w.Function="function",w.FunctionParameter="functionParameter",w))(L||{})},246:(ge,te,m)=>{"use strict";m.d(te,{Er:()=>W,ws:()=>L,x7:()=>w});var V=m(99456),L=(I=>(I.Timeseries="time_series",I.Table="table",I))(L||{});const w=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],U=I=>({label:I,value:I}),W=V.E??U},55232:(ge,te,m)=>{"use strict";m.d(te,{_:()=>L});var V=m(4662);function L(w){return V.ZP.format(w).replace(/(\$ \{ .* \})|(\$ __)|(\$ \w+)/g,U=>U.replace(/\s/g,""))}},86654:(ge,te,m)=>{"use strict";m.d(te,{IC:()=>w,U2:()=>U,Wf:()=>I,ax:()=>W,zE:()=>L});var V=m(76813);function L(F){return`SELECT ${F.map(b=>{let O="";return b.name&&b.alias?O+=`${b.name}(${b.parameters?.map(M=>`${M.name}`)}) AS ${b.alias}`:b.name?O+=`${b.name}(${b.parameters?.map(M=>`${M.name}`)})`:b.alias?O+=`${b.parameters?.map(M=>`${M.name}`)} AS ${b.alias}`:O+=`${b.parameters?.map(M=>`${M.name}`)}`,O}).join(", ")} `}const w=F=>{if(!F)return!1;const j=F.some(O=>O.parameters?.length||O.parameters?.some(M=>M.name)),b=F.some(O=>O.name);return j||b};function U(F){return{type:V.a.GroupBy,property:{type:V.R.String,name:F}}}function W(F){return{type:V.a.Property,property:{type:V.R.String,name:F}}}function I(F){return{type:V.a.Function,name:F,parameters:[]}}},99292:(ge,te,m)=>{"use strict";var V;V={value:!0};var L=m(52732),w=m(39953),U=L.__importDefault(m(95681));function W(I,F){F===void 0&&(F=[]);var j=U.default(I,F,{loading:!0}),b=j[0],O=j[1];return w.useEffect(function(){O()},[O]),b}te.Z=W},80189:(ge,te,m)=>{var V=m(20770).Buffer,L=function(){"use strict";function w(x,B){return B!=null&&x instanceof B}var U;try{U=Map}catch{U=function(){}}var W;try{W=Set}catch{W=function(){}}var I;try{I=Promise}catch{I=function(){}}function F(x,B,$,K,Re){typeof B=="object"&&($=B.depth,K=B.prototype,Re=B.includeNonEnumerable,B=B.circular);var Ce=[],ar=[],C=typeof V<"u";typeof B>"u"&&(B=!0),typeof $>"u"&&($=1/0);function Ue(Oe,N){if(Oe===null)return null;if(N===0)return Oe;var ye,be;if(typeof Oe!="object")return Oe;if(w(Oe,U))ye=new U;else if(w(Oe,W))ye=new W;else if(w(Oe,I))ye=new I(function(wr,Te){Oe.then(function(he){wr(Ue(he,N-1))},function(he){Te(Ue(he,N-1))})});else if(F.__isArray(Oe))ye=[];else if(F.__isRegExp(Oe))ye=new RegExp(Oe.source,Y(Oe)),Oe.lastIndex&&(ye.lastIndex=Oe.lastIndex);else if(F.__isDate(Oe))ye=new Date(Oe.getTime());else{if(C&&V.isBuffer(Oe))return V.allocUnsafe?ye=V.allocUnsafe(Oe.length):ye=new V(Oe.length),Oe.copy(ye),ye;w(Oe,Error)?ye=Object.create(Oe):typeof K>"u"?(be=Object.getPrototypeOf(Oe),ye=Object.create(be)):(ye=Object.create(K),be=K)}if(B){var We=Ce.indexOf(Oe);if(We!=-1)return ar[We];Ce.push(Oe),ar.push(ye)}w(Oe,U)&&Oe.forEach(function(wr,Te){var he=Ue(Te,N-1),Ee=Ue(wr,N-1);ye.set(he,Ee)}),w(Oe,W)&&Oe.forEach(function(wr){var Te=Ue(wr,N-1);ye.add(Te)});for(var Pe in Oe){var xe;be&&(xe=Object.getOwnPropertyDescriptor(be,Pe)),!(xe&&xe.set==null)&&(ye[Pe]=Ue(Oe[Pe],N-1))}if(Object.getOwnPropertySymbols)for(var dr=Object.getOwnPropertySymbols(Oe),Pe=0;Pe<dr.length;Pe++){var Wr=dr[Pe],Zr=Object.getOwnPropertyDescriptor(Oe,Wr);Zr&&!Zr.enumerable&&!Re||(ye[Wr]=Ue(Oe[Wr],N-1),Zr.enumerable||Object.defineProperty(ye,Wr,{enumerable:!1}))}if(Re)for(var Mr=Object.getOwnPropertyNames(Oe),Pe=0;Pe<Mr.length;Pe++){var vr=Mr[Pe],Zr=Object.getOwnPropertyDescriptor(Oe,vr);Zr&&Zr.enumerable||(ye[vr]=Ue(Oe[vr],N-1),Object.defineProperty(ye,vr,{enumerable:!1}))}return ye}return Ue(x,$)}F.clonePrototype=function(B){if(B===null)return null;var $=function(){};return $.prototype=B,new $};function j(x){return Object.prototype.toString.call(x)}F.__objToStr=j;function b(x){return typeof x=="object"&&j(x)==="[object Date]"}F.__isDate=b;function O(x){return typeof x=="object"&&j(x)==="[object Array]"}F.__isArray=O;function M(x){return typeof x=="object"&&j(x)==="[object RegExp]"}F.__isRegExp=M;function Y(x){var B="";return x.global&&(B+="g"),x.ignoreCase&&(B+="i"),x.multiline&&(B+="m"),B}return F.__getRegExpFlags=Y,F}();ge.exports&&(ge.exports=L)},7134:function(ge){(function(te,m){ge.exports=m()})(this,function(){"use strict";var te=Array.prototype.slice;function m(l,p){p&&(l.prototype=Object.create(p.prototype)),l.prototype.constructor=l}function V(l){return W(l)?l:lr(l)}m(L,V);function L(l){return I(l)?l:Tt(l)}m(w,V);function w(l){return F(l)?l:Sr(l)}m(U,V);function U(l){return W(l)&&!j(l)?l:jr(l)}function W(l){return!!(l&&l[O])}function I(l){return!!(l&&l[M])}function F(l){return!!(l&&l[Y])}function j(l){return I(l)||F(l)}function b(l){return!!(l&&l[x])}V.isIterable=W,V.isKeyed=I,V.isIndexed=F,V.isAssociative=j,V.isOrdered=b,V.Keyed=L,V.Indexed=w,V.Set=U;var O="@@__IMMUTABLE_ITERABLE__@@",M="@@__IMMUTABLE_KEYED__@@",Y="@@__IMMUTABLE_INDEXED__@@",x="@@__IMMUTABLE_ORDERED__@@",B="delete",$=5,K=1<<$,Re=K-1,Ce={},ar={value:!1},C={value:!1};function Ue(l){return l.value=!1,l}function Oe(l){l&&(l.value=!0)}function N(){}function ye(l,p){p=p||0;for(var y=Math.max(0,l.length-p),R=new Array(y),T=0;T<y;T++)R[T]=l[T+p];return R}function be(l){return l.size===void 0&&(l.size=l.__iterate(Pe)),l.size}function We(l,p){if(typeof p!="number"){var y=p>>>0;if(""+y!==p||y===4294967295)return NaN;p=y}return p<0?be(l)+p:p}function Pe(){return!0}function xe(l,p,y){return(l===0||y!==void 0&&l<=-y)&&(p===void 0||y!==void 0&&p>=y)}function dr(l,p){return Zr(l,p,0)}function Wr(l,p){return Zr(l,p,p)}function Zr(l,p,y){return l===void 0?y:l<0?Math.max(0,p+l):p===void 0?l:Math.min(p,l)}var Mr=0,vr=1,wr=2,Te=typeof Symbol=="function"&&Symbol.iterator,he="@@iterator",Ee=Te||he;function Le(l){this.next=l}Le.prototype.toString=function(){return"[Iterator]"},Le.KEYS=Mr,Le.VALUES=vr,Le.ENTRIES=wr,Le.prototype.inspect=Le.prototype.toSource=function(){return this.toString()},Le.prototype[Ee]=function(){return this};function _e(l,p,y,R){var T=l===0?p:l===1?y:[p,y];return R?R.value=T:R={value:T,done:!1},R}function ce(){return{value:void 0,done:!0}}function Ze(l){return!!Dt(l)}function De(l){return l&&typeof l.next=="function"}function ur(l){var p=Dt(l);return p&&p.call(l)}function Dt(l){var p=l&&(Te&&l[Te]||l[he]);if(typeof p=="function")return p}function Hr(l){return l&&typeof l.length=="number"}m(lr,V);function lr(l){return l==null?tt():W(l)?l.toSeq():za(l)}lr.of=function(){return lr(arguments)},lr.prototype.toSeq=function(){return this},lr.prototype.toString=function(){return this.__toString("Seq {","}")},lr.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},lr.prototype.__iterate=function(l,p){return Sa(this,l,p,!0)},lr.prototype.__iterator=function(l,p){return Ta(this,l,p,!0)},m(Tt,lr);function Tt(l){return l==null?tt().toKeyedSeq():W(l)?I(l)?l.toSeq():l.fromEntrySeq():Ea(l)}Tt.prototype.toKeyedSeq=function(){return this},m(Sr,lr);function Sr(l){return l==null?tt():W(l)?I(l)?l.entrySeq():l.toIndexedSeq():jn(l)}Sr.of=function(){return Sr(arguments)},Sr.prototype.toIndexedSeq=function(){return this},Sr.prototype.toString=function(){return this.__toString("Seq [","]")},Sr.prototype.__iterate=function(l,p){return Sa(this,l,p,!1)},Sr.prototype.__iterator=function(l,p){return Ta(this,l,p,!1)},m(jr,lr);function jr(l){return(l==null?tt():W(l)?I(l)?l.entrySeq():l:jn(l)).toSetSeq()}jr.of=function(){return jr(arguments)},jr.prototype.toSetSeq=function(){return this},lr.isSeq=ma,lr.Keyed=Tt,lr.Set=jr,lr.Indexed=Sr;var Mn="@@__IMMUTABLE_SEQ__@@";lr.prototype[Mn]=!0,m(Rt,Sr);function Rt(l){this._array=l,this.size=l.length}Rt.prototype.get=function(l,p){return this.has(l)?this._array[We(this,l)]:p},Rt.prototype.__iterate=function(l,p){for(var y=this._array,R=y.length-1,T=0;T<=R;T++)if(l(y[p?R-T:T],T,this)===!1)return T+1;return T},Rt.prototype.__iterator=function(l,p){var y=this._array,R=y.length-1,T=0;return new Le(function(){return T>R?ce():_e(l,T,y[p?R-T++:T++])})},m(it,Tt);function it(l){var p=Object.keys(l);this._object=l,this._keys=p,this.size=p.length}it.prototype.get=function(l,p){return p!==void 0&&!this.has(l)?p:this._object[l]},it.prototype.has=function(l){return this._object.hasOwnProperty(l)},it.prototype.__iterate=function(l,p){for(var y=this._object,R=this._keys,T=R.length-1,G=0;G<=T;G++){var z=R[p?T-G:G];if(l(y[z],z,this)===!1)return G+1}return G},it.prototype.__iterator=function(l,p){var y=this._object,R=this._keys,T=R.length-1,G=0;return new Le(function(){var z=R[p?T-G:G];return G++>T?ce():_e(l,z,y[z])})},it.prototype[x]=!0,m(en,Sr);function en(l){this._iterable=l,this.size=l.length||l.size}en.prototype.__iterateUncached=function(l,p){if(p)return this.cacheResult().__iterate(l,p);var y=this._iterable,R=ur(y),T=0;if(De(R))for(var G;!(G=R.next()).done&&l(G.value,T++,this)!==!1;);return T},en.prototype.__iteratorUncached=function(l,p){if(p)return this.cacheResult().__iterator(l,p);var y=this._iterable,R=ur(y);if(!De(R))return new Le(ce);var T=0;return new Le(function(){var G=R.next();return G.done?G:_e(l,T++,G.value)})},m(Gt,Sr);function Gt(l){this._iterator=l,this._iteratorCache=[]}Gt.prototype.__iterateUncached=function(l,p){if(p)return this.cacheResult().__iterate(l,p);for(var y=this._iterator,R=this._iteratorCache,T=0;T<R.length;)if(l(R[T],T++,this)===!1)return T;for(var G;!(G=y.next()).done;){var z=G.value;if(R[T]=z,l(z,T++,this)===!1)break}return T},Gt.prototype.__iteratorUncached=function(l,p){if(p)return this.cacheResult().__iterator(l,p);var y=this._iterator,R=this._iteratorCache,T=0;return new Le(function(){if(T>=R.length){var G=y.next();if(G.done)return G;R[T]=G.value}return _e(l,T,R[T++])})};function ma(l){return!!(l&&l[Mn])}var ya;function tt(){return ya||(ya=new Rt([]))}function Ea(l){var p=Array.isArray(l)?new Rt(l).fromEntrySeq():De(l)?new Gt(l).fromEntrySeq():Ze(l)?new en(l).fromEntrySeq():typeof l=="object"?new it(l):void 0;if(!p)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+l);return p}function jn(l){var p=Oa(l);if(!p)throw new TypeError("Expected Array or iterable object of values: "+l);return p}function za(l){var p=Oa(l)||typeof l=="object"&&new it(l);if(!p)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+l);return p}function Oa(l){return Hr(l)?new Rt(l):De(l)?new Gt(l):Ze(l)?new en(l):void 0}function Sa(l,p,y,R){var T=l._cache;if(T){for(var G=T.length-1,z=0;z<=G;z++){var ne=T[y?G-z:z];if(p(ne[1],R?ne[0]:z,l)===!1)return z+1}return z}return l.__iterateUncached(p,y)}function Ta(l,p,y,R){var T=l._cache;if(T){var G=T.length-1,z=0;return new Le(function(){var ne=T[y?G-z:z];return z++>G?ce():_e(p,R?ne[0]:z-1,ne[1])})}return l.__iteratorUncached(p,y)}function On(l,p){return p?ea(p,l,"",{"":l}):Ra(l)}function ea(l,p,y,R){return Array.isArray(p)?l.call(R,y,Sr(p).map(function(T,G){return ea(l,T,G,p)})):qa(p)?l.call(R,y,Tt(p).map(function(T,G){return ea(l,T,G,p)})):p}function Ra(l){return Array.isArray(l)?Sr(l).map(Ra).toList():qa(l)?Tt(l).map(Ra).toMap():l}function qa(l){return l&&(l.constructor===Object||l.constructor===void 0)}function Xr(l,p){if(l===p||l!==l&&p!==p)return!0;if(!l||!p)return!1;if(typeof l.valueOf=="function"&&typeof p.valueOf=="function"){if(l=l.valueOf(),p=p.valueOf(),l===p||l!==l&&p!==p)return!0;if(!l||!p)return!1}return!!(typeof l.equals=="function"&&typeof p.equals=="function"&&l.equals(p))}function kn(l,p){if(l===p)return!0;if(!W(p)||l.size!==void 0&&p.size!==void 0&&l.size!==p.size||l.__hash!==void 0&&p.__hash!==void 0&&l.__hash!==p.__hash||I(l)!==I(p)||F(l)!==F(p)||b(l)!==b(p))return!1;if(l.size===0&&p.size===0)return!0;var y=!j(l);if(b(l)){var R=l.entries();return p.every(function(ue,fe){var ve=R.next().value;return ve&&Xr(ve[1],ue)&&(y||Xr(ve[0],fe))})&&R.next().done}var T=!1;if(l.size===void 0)if(p.size===void 0)typeof l.cacheResult=="function"&&l.cacheResult();else{T=!0;var G=l;l=p,p=G}var z=!0,ne=p.__iterate(function(ue,fe){if(y?!l.has(ue):T?!Xr(ue,l.get(fe,Ce)):!Xr(l.get(fe,Ce),ue))return z=!1,!1});return z&&l.size===ne}m(ot,Sr);function ot(l,p){if(!(this instanceof ot))return new ot(l,p);if(this._value=l,this.size=p===void 0?1/0:Math.max(0,p),this.size===0){if(Ca)return Ca;Ca=this}}ot.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},ot.prototype.get=function(l,p){return this.has(l)?this._value:p},ot.prototype.includes=function(l){return Xr(this._value,l)},ot.prototype.slice=function(l,p){var y=this.size;return xe(l,p,y)?this:new ot(this._value,Wr(p,y)-dr(l,y))},ot.prototype.reverse=function(){return this},ot.prototype.indexOf=function(l){return Xr(this._value,l)?0:-1},ot.prototype.lastIndexOf=function(l){return Xr(this._value,l)?this.size:-1},ot.prototype.__iterate=function(l,p){for(var y=0;y<this.size;y++)if(l(this._value,y,this)===!1)return y+1;return y},ot.prototype.__iterator=function(l,p){var y=this,R=0;return new Le(function(){return R<y.size?_e(l,R++,y._value):ce()})},ot.prototype.equals=function(l){return l instanceof ot?Xr(this._value,l._value):kn(l)};var Ca;function xn(l,p){if(!l)throw new Error(p)}m(ct,Sr);function ct(l,p,y){if(!(this instanceof ct))return new ct(l,p,y);if(xn(y!==0,"Cannot step a Range by 0"),l=l||0,p===void 0&&(p=1/0),y=y===void 0?1:Math.abs(y),p<l&&(y=-y),this._start=l,this._end=p,this._step=y,this.size=Math.max(0,Math.ceil((p-l)/y-1)+1),this.size===0){if(Aa)return Aa;Aa=this}}ct.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},ct.prototype.get=function(l,p){return this.has(l)?this._start+We(this,l)*this._step:p},ct.prototype.includes=function(l){var p=(l-this._start)/this._step;return p>=0&&p<this.size&&p===Math.floor(p)},ct.prototype.slice=function(l,p){return xe(l,p,this.size)?this:(l=dr(l,this.size),p=Wr(p,this.size),p<=l?new ct(0,0):new ct(this.get(l,this._end),this.get(p,this._end),this._step))},ct.prototype.indexOf=function(l){var p=l-this._start;if(p%this._step===0){var y=p/this._step;if(y>=0&&y<this.size)return y}return-1},ct.prototype.lastIndexOf=function(l){return this.indexOf(l)},ct.prototype.__iterate=function(l,p){for(var y=this.size-1,R=this._step,T=p?this._start+y*R:this._start,G=0;G<=y;G++){if(l(T,G,this)===!1)return G+1;T+=p?-R:R}return G},ct.prototype.__iterator=function(l,p){var y=this.size-1,R=this._step,T=p?this._start+y*R:this._start,G=0;return new Le(function(){var z=T;return T+=p?-R:R,G>y?ce():_e(l,G++,z)})},ct.prototype.equals=function(l){return l instanceof ct?this._start===l._start&&this._end===l._end&&this._step===l._step:kn(this,l)};var Aa;m(Vt,V);function Vt(){throw TypeError("Abstract")}m(Un,Vt);function Un(){}m(rr,Vt);function rr(){}m(Gn,Vt);function Gn(){}Vt.Keyed=Un,Vt.Indexed=rr,Vt.Set=Gn;var Sn=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(p,y){p=p|0,y=y|0;var R=p&65535,T=y&65535;return R*T+((p>>>16)*T+R*(y>>>16)<<16>>>0)|0};function Bn(l){return l>>>1&1073741824|l&3221225471}function gt(l){if(l===!1||l===null||l===void 0||typeof l.valueOf=="function"&&(l=l.valueOf(),l===!1||l===null||l===void 0))return 0;if(l===!0)return 1;var p=typeof l;if(p==="number"){if(l!==l||l===1/0)return 0;var y=l|0;for(y!==l&&(y^=l*4294967295);l>4294967295;)l/=4294967295,y^=l;return Bn(y)}if(p==="string")return l.length>et?Er(l):Tn(l);if(typeof l.hashCode=="function")return l.hashCode();if(p==="object")return Xa(l);if(typeof l.toString=="function")return Tn(l.toString());throw new Error("Value type "+p+" cannot be hashed.")}function Er(l){var p=jt[l];return p===void 0&&(p=Tn(l),rn===Mt&&(rn=0,jt={}),rn++,jt[l]=p),p}function Tn(l){for(var p=0,y=0;y<l.length;y++)p=31*p+l.charCodeAt(y)|0;return Bn(p)}function Xa(l){var p;if(La&&(p=Jr.get(l),p!==void 0)||(p=l[Dr],p!==void 0)||!Pr&&(p=l.propertyIsEnumerable&&l.propertyIsEnumerable[Dr],p!==void 0||(p=Yt(l),p!==void 0)))return p;if(p=++Wn,Wn&1073741824&&(Wn=0),La)Jr.set(l,p);else{if(Qa!==void 0&&Qa(l)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Pr)Object.defineProperty(l,Dr,{enumerable:!1,configurable:!1,writable:!1,value:p});else if(l.propertyIsEnumerable!==void 0&&l.propertyIsEnumerable===l.constructor.prototype.propertyIsEnumerable)l.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},l.propertyIsEnumerable[Dr]=p;else if(l.nodeType!==void 0)l[Dr]=p;else throw new Error("Unable to set a non-enumerable property on object.")}return p}var Qa=Object.isExtensible,Pr=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Yt(l){if(l&&l.nodeType>0)switch(l.nodeType){case 1:return l.uniqueID;case 9:return l.documentElement&&l.documentElement.uniqueID}}var La=typeof WeakMap=="function",Jr;La&&(Jr=new WeakMap);var Wn=0,Dr="__immutablehash__";typeof Symbol=="function"&&(Dr=Symbol(Dr));var et=16,Mt=255,rn=0,jt={};function Ct(l){xn(l!==1/0,"Cannot perform this action with an infinite size.")}m(sr,Un);function sr(l){return l==null?$r():yr(l)&&!b(l)?l:$r().withMutations(function(p){var y=L(l);Ct(y.size),y.forEach(function(R,T){return p.set(T,R)})})}sr.of=function(){var l=te.call(arguments,0);return $r().withMutations(function(p){for(var y=0;y<l.length;y+=2){if(y+1>=l.length)throw new Error("Missing value for key: "+l[y]);p.set(l[y],l[y+1])}})},sr.prototype.toString=function(){return this.__toString("Map {","}")},sr.prototype.get=function(l,p){return this._root?this._root.get(0,void 0,l,p):p},sr.prototype.set=function(l,p){return ht(this,l,p)},sr.prototype.setIn=function(l,p){return this.updateIn(l,Ce,function(){return p})},sr.prototype.remove=function(l){return ht(this,l,Ce)},sr.prototype.deleteIn=function(l){return this.updateIn(l,function(){return Ce})},sr.prototype.update=function(l,p,y){return arguments.length===1?l(this):this.updateIn([l],p,y)},sr.prototype.updateIn=function(l,p,y){y||(y=p,p=void 0);var R=ao(this,wa(l),p,y);return R===Ce?void 0:R},sr.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):$r()},sr.prototype.merge=function(){return ei(this,void 0,arguments)},sr.prototype.mergeWith=function(l){var p=te.call(arguments,1);return ei(this,l,p)},sr.prototype.mergeIn=function(l){var p=te.call(arguments,1);return this.updateIn(l,$r(),function(y){return typeof y.merge=="function"?y.merge.apply(y,p):p[p.length-1]})},sr.prototype.mergeDeep=function(){return ei(this,ro,arguments)},sr.prototype.mergeDeepWith=function(l){var p=te.call(arguments,1);return ei(this,to(l),p)},sr.prototype.mergeDeepIn=function(l){var p=te.call(arguments,1);return this.updateIn(l,$r(),function(y){return typeof y.mergeDeep=="function"?y.mergeDeep.apply(y,p):p[p.length-1]})},sr.prototype.sort=function(l){return xr(gr(this,l))},sr.prototype.sortBy=function(l,p){return xr(gr(this,p,l))},sr.prototype.withMutations=function(l){var p=this.asMutable();return l(p),p.wasAltered()?p.__ensureOwner(this.__ownerID):this},sr.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new N)},sr.prototype.asImmutable=function(){return this.__ensureOwner()},sr.prototype.wasAltered=function(){return this.__altered},sr.prototype.__iterator=function(l,p){return new At(this,l,p)},sr.prototype.__iterate=function(l,p){var y=this,R=0;return this._root&&this._root.iterate(function(T){return R++,l(T[1],T[0],y)},p),R},sr.prototype.__ensureOwner=function(l){return l===this.__ownerID?this:l?Ie(this.size,this._root,l,this.__hash):(this.__ownerID=l,this.__altered=!1,this)};function yr(l){return!!(l&&l[kr])}sr.isMap=yr;var kr="@@__IMMUTABLE_MAP__@@",er=sr.prototype;er[kr]=!0,er[B]=er.remove,er.removeIn=er.deleteIn;function Rn(l,p){this.ownerID=l,this.entries=p}Rn.prototype.get=function(l,p,y,R){for(var T=this.entries,G=0,z=T.length;G<z;G++)if(Xr(y,T[G][0]))return T[G][1];return R},Rn.prototype.update=function(l,p,y,R,T,G,z){for(var ne=T===Ce,ue=this.entries,fe=0,ve=ue.length;fe<ve&&!Xr(R,ue[fe][0]);fe++);var Ve=fe<ve;if(Ve?ue[fe][1]===T:ne)return this;if(Oe(z),(ne||!Ve)&&Oe(G),!(ne&&ue.length===1)){if(!Ve&&!ne&&ue.length>=Yo)return eo(l,ue,R,T);var ke=l&&l===this.ownerID,ir=ke?ue:ye(ue);return Ve?ne?fe===ve-1?ir.pop():ir[fe]=ir.pop():ir[fe]=[R,T]:ir.push([R,T]),ke?(this.entries=ir,this):new Rn(l,ir)}};function zt(l,p,y){this.ownerID=l,this.bitmap=p,this.nodes=y}zt.prototype.get=function(l,p,y,R){p===void 0&&(p=gt(y));var T=1<<((l===0?p:p>>>l)&Re),G=this.bitmap;return G&T?this.nodes[io(G&T-1)].get(l+$,p,y,R):R},zt.prototype.update=function(l,p,y,R,T,G,z){y===void 0&&(y=gt(R));var ne=(p===0?y:y>>>p)&Re,ue=1<<ne,fe=this.bitmap,ve=(fe&ue)!==0;if(!ve&&T===Ce)return this;var Ve=io(fe&ue-1),ke=this.nodes,ir=ve?ke[Ve]:void 0,cr=Ja(ir,l,p+$,y,R,T,G,z);if(cr===ir)return this;if(!ve&&cr&&ke.length>=uo)return na(l,ke,fe,ne,cr);if(ve&&!cr&&ke.length===2&&Xt(ke[Ve^1]))return ke[Ve^1];if(ve&&cr&&ke.length===1&&Xt(cr))return cr;var zr=l&&l===this.ownerID,Wt=ve?cr?fe:fe^ue:fe|ue,qt=ve?cr?oo(ke,Ve,cr,zr):Ko(ke,Ve,zr):Ci(ke,Ve,cr,zr);return zr?(this.bitmap=Wt,this.nodes=qt,this):new zt(l,Wt,qt)};function fn(l,p,y){this.ownerID=l,this.count=p,this.nodes=y}fn.prototype.get=function(l,p,y,R){p===void 0&&(p=gt(y));var T=(l===0?p:p>>>l)&Re,G=this.nodes[T];return G?G.get(l+$,p,y,R):R},fn.prototype.update=function(l,p,y,R,T,G,z){y===void 0&&(y=gt(R));var ne=(p===0?y:y>>>p)&Re,ue=T===Ce,fe=this.nodes,ve=fe[ne];if(ue&&!ve)return this;var Ve=Ja(ve,l,p+$,y,R,T,G,z);if(Ve===ve)return this;var ke=this.count;if(!ve)ke++;else if(!Ve&&(ke--,ke<zo))return ta(l,fe,ke,ne);var ir=l&&l===this.ownerID,cr=oo(fe,ne,Ve,ir);return ir?(this.count=ke,this.nodes=cr,this):new fn(l,ke,cr)};function kt(l,p,y){this.ownerID=l,this.keyHash=p,this.entries=y}kt.prototype.get=function(l,p,y,R){for(var T=this.entries,G=0,z=T.length;G<z;G++)if(Xr(y,T[G][0]))return T[G][1];return R},kt.prototype.update=function(l,p,y,R,T,G,z){y===void 0&&(y=gt(R));var ne=T===Ce;if(y!==this.keyHash)return ne?this:(Oe(z),Oe(G),ra(this,l,p,y,[R,T]));for(var ue=this.entries,fe=0,ve=ue.length;fe<ve&&!Xr(R,ue[fe][0]);fe++);var Ve=fe<ve;if(Ve?ue[fe][1]===T:ne)return this;if(Oe(z),(ne||!Ve)&&Oe(G),ne&&ve===2)return new He(l,this.keyHash,ue[fe^1]);var ke=l&&l===this.ownerID,ir=ke?ue:ye(ue);return Ve?ne?fe===ve-1?ir.pop():ir[fe]=ir.pop():ir[fe]=[R,T]:ir.push([R,T]),ke?(this.entries=ir,this):new kt(l,this.keyHash,ir)};function He(l,p,y){this.ownerID=l,this.keyHash=p,this.entry=y}He.prototype.get=function(l,p,y,R){return Xr(y,this.entry[0])?this.entry[1]:R},He.prototype.update=function(l,p,y,R,T,G,z){var ne=T===Ce,ue=Xr(R,this.entry[0]);if(ue?T===this.entry[1]:ne)return this;if(Oe(z),ne){Oe(G);return}return ue?l&&l===this.ownerID?(this.entry[1]=T,this):new He(l,this.keyHash,[R,T]):(Oe(G),ra(this,l,p,gt(R),[R,T]))},Rn.prototype.iterate=kt.prototype.iterate=function(l,p){for(var y=this.entries,R=0,T=y.length-1;R<=T;R++)if(l(y[p?T-R:R])===!1)return!1},zt.prototype.iterate=fn.prototype.iterate=function(l,p){for(var y=this.nodes,R=0,T=y.length-1;R<=T;R++){var G=y[p?T-R:R];if(G&&G.iterate(l,p)===!1)return!1}},He.prototype.iterate=function(l,p){return l(this.entry)},m(At,Le);function At(l,p,y){this._type=p,this._reverse=y,this._stack=l._root&&oe(l._root)}At.prototype.next=function(){for(var l=this._type,p=this._stack;p;){var y=p.node,R=p.index++,T;if(y.entry){if(R===0)return Q(l,y.entry)}else if(y.entries){if(T=y.entries.length-1,R<=T)return Q(l,y.entries[this._reverse?T-R:R])}else if(T=y.nodes.length-1,R<=T){var G=y.nodes[this._reverse?T-R:R];if(G){if(G.entry)return Q(l,G.entry);p=this._stack=oe(G,p)}continue}p=this._stack=this._stack.__prev}return ce()};function Q(l,p){return _e(l,p[0],p[1])}function oe(l,p){return{node:l,index:0,__prev:p}}function Ie(l,p,y,R){var T=Object.create(er);return T.size=l,T._root=p,T.__ownerID=y,T.__hash=R,T.__altered=!1,T}var nr;function $r(){return nr||(nr=Ie(0))}function ht(l,p,y){var R,T;if(l._root){var G=Ue(ar),z=Ue(C);if(R=Ja(l._root,l.__ownerID,0,void 0,p,y,G,z),!z.value)return l;T=l.size+(G.value?y===Ce?-1:1:0)}else{if(y===Ce)return l;T=1,R=new Rn(l.__ownerID,[[p,y]])}return l.__ownerID?(l.size=T,l._root=R,l.__hash=void 0,l.__altered=!0,l):R?Ie(T,R):$r()}function Ja(l,p,y,R,T,G,z,ne){return l?l.update(p,y,R,T,G,z,ne):G===Ce?l:(Oe(ne),Oe(z),new He(p,R,[T,G]))}function Xt(l){return l.constructor===He||l.constructor===kt}function ra(l,p,y,R,T){if(l.keyHash===R)return new kt(p,R,[l.entry,T]);var G=(y===0?l.keyHash:l.keyHash>>>y)&Re,z=(y===0?R:R>>>y)&Re,ne,ue=G===z?[ra(l,p,y+$,R,T)]:(ne=new He(p,R,T),G<z?[l,ne]:[ne,l]);return new zt(p,1<<G|1<<z,ue)}function eo(l,p,y,R){l||(l=new N);for(var T=new He(l,gt(y),[y,R]),G=0;G<p.length;G++){var z=p[G];T=T.update(l,0,void 0,z[0],z[1])}return T}function ta(l,p,y,R){for(var T=0,G=0,z=new Array(y),ne=0,ue=1,fe=p.length;ne<fe;ne++,ue<<=1){var ve=p[ne];ve!==void 0&&ne!==R&&(T|=ue,z[G++]=ve)}return new zt(l,T,z)}function na(l,p,y,R,T){for(var G=0,z=new Array(K),ne=0;y!==0;ne++,y>>>=1)z[ne]=y&1?p[G++]:void 0;return z[R]=T,new fn(l,G+1,z)}function ei(l,p,y){for(var R=[],T=0;T<y.length;T++){var G=y[T],z=L(G);W(G)||(z=z.map(function(ne){return On(ne)})),R.push(z)}return no(l,p,R)}function ro(l,p,y){return l&&l.mergeDeep&&W(p)?l.mergeDeep(p):Xr(l,p)?l:p}function to(l){return function(p,y,R){if(p&&p.mergeDeepWith&&W(y))return p.mergeDeepWith(l,y);var T=l(p,y,R);return Xr(p,T)?p:T}}function no(l,p,y){return y=y.filter(function(R){return R.size!==0}),y.length===0?l:l.size===0&&!l.__ownerID&&y.length===1?l.constructor(y[0]):l.withMutations(function(R){for(var T=p?function(z,ne){R.update(ne,Ce,function(ue){return ue===Ce?z:p(ue,z,ne)})}:function(z,ne){R.set(ne,z)},G=0;G<y.length;G++)y[G].forEach(T)})}function ao(l,p,y,R){var T=l===Ce,G=p.next();if(G.done){var z=T?y:l,ne=R(z);return ne===z?l:ne}xn(T||l&&l.set,"invalid keyPath");var ue=G.value,fe=T?Ce:l.get(ue,Ce),ve=ao(fe,p,y,R);return ve===fe?l:ve===Ce?l.remove(ue):(T?$r():l).set(ue,ve)}function io(l){return l=l-(l>>1&1431655765),l=(l&858993459)+(l>>2&858993459),l=l+(l>>4)&252645135,l=l+(l>>8),l=l+(l>>16),l&127}function oo(l,p,y,R){var T=R?l:ye(l);return T[p]=y,T}function Ci(l,p,y,R){var T=l.length+1;if(R&&p+1===T)return l[p]=y,l;for(var G=new Array(T),z=0,ne=0;ne<T;ne++)ne===p?(G[ne]=y,z=-1):G[ne]=l[ne+z];return G}function Ko(l,p,y){var R=l.length-1;if(y&&p===R)return l.pop(),l;for(var T=new Array(R),G=0,z=0;z<R;z++)z===p&&(G=1),T[z]=l[z+G];return T}var Yo=K/4,uo=K/2,zo=K/4;m(Kr,rr);function Kr(l){var p=Li();if(l==null)return p;if(so(l))return l;var y=w(l),R=y.size;return R===0?p:(Ct(R),R>0&&R<K?Ia(0,R,$,null,new Cn(y.toArray())):p.withMutations(function(T){T.setSize(R),y.forEach(function(G,z){return T.set(z,G)})}))}Kr.of=function(){return this(arguments)},Kr.prototype.toString=function(){return this.__toString("List [","]")},Kr.prototype.get=function(l,p){if(l=We(this,l),l>=0&&l<this.size){l+=this._origin;var y=fo(this,l);return y&&y.array[l&Re]}return p},Kr.prototype.set=function(l,p){return ri(this,l,p)},Kr.prototype.remove=function(l){return this.has(l)?l===0?this.shift():l===this.size-1?this.pop():this.splice(l,1):this},Kr.prototype.insert=function(l,p){return this.splice(l,0,p)},Kr.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=$,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Li()},Kr.prototype.push=function(){var l=arguments,p=this.size;return this.withMutations(function(y){An(y,0,p+l.length);for(var R=0;R<l.length;R++)y.set(p+R,l[R])})},Kr.prototype.pop=function(){return An(this,0,-1)},Kr.prototype.unshift=function(){var l=arguments;return this.withMutations(function(p){An(p,-l.length);for(var y=0;y<l.length;y++)p.set(y,l[y])})},Kr.prototype.shift=function(){return An(this,1)},Kr.prototype.merge=function(){return ti(this,void 0,arguments)},Kr.prototype.mergeWith=function(l){var p=te.call(arguments,1);return ti(this,l,p)},Kr.prototype.mergeDeep=function(){return ti(this,ro,arguments)},Kr.prototype.mergeDeepWith=function(l){var p=te.call(arguments,1);return ti(this,to(l),p)},Kr.prototype.setSize=function(l){return An(this,0,l)},Kr.prototype.slice=function(l,p){var y=this.size;return xe(l,p,y)?this:An(this,dr(l,y),Wr(p,y))},Kr.prototype.__iterator=function(l,p){var y=0,R=lo(this,p);return new Le(function(){var T=R();return T===Fa?ce():_e(l,y++,T)})},Kr.prototype.__iterate=function(l,p){for(var y=0,R=lo(this,p),T;(T=R())!==Fa&&l(T,y++,this)!==!1;);return y},Kr.prototype.__ensureOwner=function(l){return l===this.__ownerID?this:l?Ia(this._origin,this._capacity,this._level,this._root,this._tail,l,this.__hash):(this.__ownerID=l,this)};function so(l){return!!(l&&l[Ai])}Kr.isList=so;var Ai="@@__IMMUTABLE_LIST__@@",Nt=Kr.prototype;Nt[Ai]=!0,Nt[B]=Nt.remove,Nt.setIn=er.setIn,Nt.deleteIn=Nt.removeIn=er.removeIn,Nt.update=er.update,Nt.updateIn=er.updateIn,Nt.mergeIn=er.mergeIn,Nt.mergeDeepIn=er.mergeDeepIn,Nt.withMutations=er.withMutations,Nt.asMutable=er.asMutable,Nt.asImmutable=er.asImmutable,Nt.wasAltered=er.wasAltered;function Cn(l,p){this.array=l,this.ownerID=p}Cn.prototype.removeBefore=function(l,p,y){if(y===p?1<<p:this.array.length===0)return this;var R=y>>>p&Re;if(R>=this.array.length)return new Cn([],l);var T=R===0,G;if(p>0){var z=this.array[R];if(G=z&&z.removeBefore(l,p-$,y),G===z&&T)return this}if(T&&!G)return this;var ne=Zn(this,l);if(!T)for(var ue=0;ue<R;ue++)ne.array[ue]=void 0;return G&&(ne.array[R]=G),ne},Cn.prototype.removeAfter=function(l,p,y){if(y===(p?1<<p:0)||this.array.length===0)return this;var R=y-1>>>p&Re;if(R>=this.array.length)return this;var T;if(p>0){var G=this.array[R];if(T=G&&G.removeAfter(l,p-$,y),T===G&&R===this.array.length-1)return this}var z=Zn(this,l);return z.array.splice(R+1),T&&(z.array[R]=T),z};var Fa={};function lo(l,p){var y=l._origin,R=l._capacity,T=Na(R),G=l._tail;return z(l._root,l._level,0);function z(fe,ve,Ve){return ve===0?ne(fe,Ve):ue(fe,ve,Ve)}function ne(fe,ve){var Ve=ve===T?G&&G.array:fe&&fe.array,ke=ve>y?0:y-ve,ir=R-ve;return ir>K&&(ir=K),function(){if(ke===ir)return Fa;var cr=p?--ir:ke++;return Ve&&Ve[cr]}}function ue(fe,ve,Ve){var ke,ir=fe&&fe.array,cr=Ve>y?0:y-Ve>>ve,zr=(R-Ve>>ve)+1;return zr>K&&(zr=K),function(){do{if(ke){var Wt=ke();if(Wt!==Fa)return Wt;ke=null}if(cr===zr)return Fa;var qt=p?--zr:cr++;ke=z(ir&&ir[qt],ve-$,Ve+(qt<<ve))}while(!0)}}}function Ia(l,p,y,R,T,G,z){var ne=Object.create(Nt);return ne.size=p-l,ne._origin=l,ne._capacity=p,ne._level=y,ne._root=R,ne._tail=T,ne.__ownerID=G,ne.__hash=z,ne.__altered=!1,ne}var co;function Li(){return co||(co=Ia(0,0,$))}function ri(l,p,y){if(p=We(l,p),p!==p)return l;if(p>=l.size||p<0)return l.withMutations(function(z){p<0?An(z,p).set(0,y):An(z,0,p+1).set(p,y)});p+=l._origin;var R=l._tail,T=l._root,G=Ue(C);return p>=Na(l._capacity)?R=Fi(R,l.__ownerID,0,p,y,G):T=Fi(T,l.__ownerID,l._level,p,y,G),G.value?l.__ownerID?(l._root=T,l._tail=R,l.__hash=void 0,l.__altered=!0,l):Ia(l._origin,l._capacity,l._level,T,R):l}function Fi(l,p,y,R,T,G){var z=R>>>y&Re,ne=l&&z<l.array.length;if(!ne&&T===void 0)return l;var ue;if(y>0){var fe=l&&l.array[z],ve=Fi(fe,p,y-$,R,T,G);return ve===fe?l:(ue=Zn(l,p),ue.array[z]=ve,ue)}return ne&&l.array[z]===T?l:(Oe(G),ue=Zn(l,p),T===void 0&&z===ue.array.length-1?ue.array.pop():ue.array[z]=T,ue)}function Zn(l,p){return p&&l&&p===l.ownerID?l:new Cn(l?l.array.slice():[],p)}function fo(l,p){if(p>=Na(l._capacity))return l._tail;if(p<1<<l._level+$){for(var y=l._root,R=l._level;y&&R>0;)y=y.array[p>>>R&Re],R-=$;return y}}function An(l,p,y){p!==void 0&&(p=p|0),y!==void 0&&(y=y|0);var R=l.__ownerID||new N,T=l._origin,G=l._capacity,z=T+p,ne=y===void 0?G:y<0?G+y:T+y;if(z===T&&ne===G)return l;if(z>=ne)return l.clear();for(var ue=l._level,fe=l._root,ve=0;z+ve<0;)fe=new Cn(fe&&fe.array.length?[void 0,fe]:[],R),ue+=$,ve+=1<<ue;ve&&(z+=ve,T+=ve,ne+=ve,G+=ve);for(var Ve=Na(G),ke=Na(ne);ke>=1<<ue+$;)fe=new Cn(fe&&fe.array.length?[fe]:[],R),ue+=$;var ir=l._tail,cr=ke<Ve?fo(l,ne-1):ke>Ve?new Cn([],R):ir;if(ir&&ke>Ve&&z<G&&ir.array.length){fe=Zn(fe,R);for(var zr=fe,Wt=ue;Wt>$;Wt-=$){var qt=Ve>>>Wt&Re;zr=zr.array[qt]=Zn(zr.array[qt],R)}zr.array[Ve>>>$&Re]=ir}if(ne<G&&(cr=cr&&cr.removeAfter(R,0,ne)),z>=ke)z-=ke,ne-=ke,ue=$,fe=null,cr=cr&&cr.removeBefore(R,0,z);else if(z>T||ke<Ve){for(ve=0;fe;){var oi=z>>>ue&Re;if(oi!==ke>>>ue&Re)break;oi&&(ve+=(1<<ue)*oi),ue-=$,fe=fe.array[oi]}fe&&z>T&&(fe=fe.removeBefore(R,ue,z-ve)),fe&&ke<Ve&&(fe=fe.removeAfter(R,ue,ke-ve)),ve&&(z-=ve,ne-=ve)}return l.__ownerID?(l.size=ne-z,l._origin=z,l._capacity=ne,l._level=ue,l._root=fe,l._tail=cr,l.__hash=void 0,l.__altered=!0,l):Ia(z,ne,ue,fe,cr)}function ti(l,p,y){for(var R=[],T=0,G=0;G<y.length;G++){var z=y[G],ne=w(z);ne.size>T&&(T=ne.size),W(z)||(ne=ne.map(function(ue){return On(ue)})),R.push(ne)}return T>l.size&&(l=l.setSize(T)),no(l,p,R)}function Na(l){return l<K?0:l-1>>>$<<$}m(xr,sr);function xr(l){return l==null?ni():ba(l)?l:ni().withMutations(function(p){var y=L(l);Ct(y.size),y.forEach(function(R,T){return p.set(T,R)})})}xr.of=function(){return this(arguments)},xr.prototype.toString=function(){return this.__toString("OrderedMap {","}")},xr.prototype.get=function(l,p){var y=this._map.get(l);return y!==void 0?this._list.get(y)[1]:p},xr.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ni()},xr.prototype.set=function(l,p){return vo(this,l,p)},xr.prototype.remove=function(l){return vo(this,l,Ce)},xr.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},xr.prototype.__iterate=function(l,p){var y=this;return this._list.__iterate(function(R){return R&&l(R[1],R[0],y)},p)},xr.prototype.__iterator=function(l,p){return this._list.fromEntrySeq().__iterator(l,p)},xr.prototype.__ensureOwner=function(l){if(l===this.__ownerID)return this;var p=this._map.__ensureOwner(l),y=this._list.__ensureOwner(l);return l?Ii(p,y,l,this.__hash):(this.__ownerID=l,this._map=p,this._list=y,this)};function ba(l){return yr(l)&&b(l)}xr.isOrderedMap=ba,xr.prototype[x]=!0,xr.prototype[B]=xr.prototype.remove;function Ii(l,p,y,R){var T=Object.create(xr.prototype);return T.size=l?l.size:0,T._map=l,T._list=p,T.__ownerID=y,T.__hash=R,T}var po;function ni(){return po||(po=Ii($r(),Li()))}function vo(l,p,y){var R=l._map,T=l._list,G=R.get(p),z=G!==void 0,ne,ue;if(y===Ce){if(!z)return l;T.size>=K&&T.size>=R.size*2?(ue=T.filter(function(fe,ve){return fe!==void 0&&G!==ve}),ne=ue.toKeyedSeq().map(function(fe){return fe[0]}).flip().toMap(),l.__ownerID&&(ne.__ownerID=ue.__ownerID=l.__ownerID)):(ne=R.remove(p),ue=G===T.size-1?T.pop():T.set(G,void 0))}else if(z){if(y===T.get(G)[1])return l;ne=R,ue=T.set(G,[p,y])}else ne=R.set(p,T.size),ue=T.set(T.size,[p,y]);return l.__ownerID?(l.size=ne.size,l._map=ne,l._list=ue,l.__hash=void 0,l):Ii(ne,ue)}m(Bt,Tt);function Bt(l,p){this._iter=l,this._useKeys=p,this.size=l.size}Bt.prototype.get=function(l,p){return this._iter.get(l,p)},Bt.prototype.has=function(l){return this._iter.has(l)},Bt.prototype.valueSeq=function(){return this._iter.valueSeq()},Bt.prototype.reverse=function(){var l=this,p=Ni(this,!0);return this._useKeys||(p.valueSeq=function(){return l._iter.toSeq().reverse()}),p},Bt.prototype.map=function(l,p){var y=this,R=ho(this,l,p);return this._useKeys||(R.valueSeq=function(){return y._iter.toSeq().map(l,p)}),R},Bt.prototype.__iterate=function(l,p){var y=this,R;return this._iter.__iterate(this._useKeys?function(T,G){return l(T,G,y)}:(R=p?Tr(this):0,function(T){return l(T,p?--R:R++,y)}),p)},Bt.prototype.__iterator=function(l,p){if(this._useKeys)return this._iter.__iterator(l,p);var y=this._iter.__iterator(vr,p),R=p?Tr(this):0;return new Le(function(){var T=y.next();return T.done?T:_e(l,p?--R:R++,T.value,T)})},Bt.prototype[x]=!0,m(Ln,Sr);function Ln(l){this._iter=l,this.size=l.size}Ln.prototype.includes=function(l){return this._iter.includes(l)},Ln.prototype.__iterate=function(l,p){var y=this,R=0;return this._iter.__iterate(function(T){return l(T,R++,y)},p)},Ln.prototype.__iterator=function(l,p){var y=this._iter.__iterator(vr,p),R=0;return new Le(function(){var T=y.next();return T.done?T:_e(l,R++,T.value,T)})},m(aa,jr);function aa(l){this._iter=l,this.size=l.size}aa.prototype.has=function(l){return this._iter.includes(l)},aa.prototype.__iterate=function(l,p){var y=this;return this._iter.__iterate(function(R){return l(R,R,y)},p)},aa.prototype.__iterator=function(l,p){var y=this._iter.__iterator(vr,p);return new Le(function(){var R=y.next();return R.done?R:_e(l,R.value,R.value,R)})},m(ia,Tt);function ia(l){this._iter=l,this.size=l.size}ia.prototype.entrySeq=function(){return this._iter.toSeq()},ia.prototype.__iterate=function(l,p){var y=this;return this._iter.__iterate(function(R){if(R){yo(R);var T=W(R);return l(T?R.get(1):R[1],T?R.get(0):R[0],y)}},p)},ia.prototype.__iterator=function(l,p){var y=this._iter.__iterator(vr,p);return new Le(function(){for(;;){var R=y.next();if(R.done)return R;var T=R.value;if(T){yo(T);var G=W(T);return _e(l,G?T.get(0):T[0],G?T.get(1):T[1],R)}}})},Ln.prototype.cacheResult=Bt.prototype.cacheResult=aa.prototype.cacheResult=ia.prototype.cacheResult=Fn;function go(l){var p=Lt(l);return p._iter=l,p.size=l.size,p.flip=function(){return l},p.reverse=function(){var y=l.reverse.apply(this);return y.flip=function(){return l.reverse()},y},p.has=function(y){return l.includes(y)},p.includes=function(y){return l.has(y)},p.cacheResult=Fn,p.__iterateUncached=function(y,R){var T=this;return l.__iterate(function(G,z){return y(z,G,T)!==!1},R)},p.__iteratorUncached=function(y,R){if(y===wr){var T=l.__iterator(y,R);return new Le(function(){var G=T.next();if(!G.done){var z=G.value[0];G.value[0]=G.value[1],G.value[1]=z}return G})}return l.__iterator(y===vr?Mr:vr,R)},p}function ho(l,p,y){var R=Lt(l);return R.size=l.size,R.has=function(T){return l.has(T)},R.get=function(T,G){var z=l.get(T,Ce);return z===Ce?G:p.call(y,z,T,l)},R.__iterateUncached=function(T,G){var z=this;return l.__iterate(function(ne,ue,fe){return T(p.call(y,ne,ue,fe),ue,z)!==!1},G)},R.__iteratorUncached=function(T,G){var z=l.__iterator(wr,G);return new Le(function(){var ne=z.next();if(ne.done)return ne;var ue=ne.value,fe=ue[0];return _e(T,fe,p.call(y,ue[1],fe,l),ne)})},R}function Ni(l,p){var y=Lt(l);return y._iter=l,y.size=l.size,y.reverse=function(){return l},l.flip&&(y.flip=function(){var R=go(l);return R.reverse=function(){return l.flip()},R}),y.get=function(R,T){return l.get(p?R:-1-R,T)},y.has=function(R){return l.has(p?R:-1-R)},y.includes=function(R){return l.includes(R)},y.cacheResult=Fn,y.__iterate=function(R,T){var G=this;return l.__iterate(function(z,ne){return R(z,ne,G)},!T)},y.__iterator=function(R,T){return l.__iterator(R,!T)},y}function mo(l,p,y,R){var T=Lt(l);return R&&(T.has=function(G){var z=l.get(G,Ce);return z!==Ce&&!!p.call(y,z,G,l)},T.get=function(G,z){var ne=l.get(G,Ce);return ne!==Ce&&p.call(y,ne,G,l)?ne:z}),T.__iterateUncached=function(G,z){var ne=this,ue=0;return l.__iterate(function(fe,ve,Ve){if(p.call(y,fe,ve,Ve))return ue++,G(fe,R?ve:ue-1,ne)},z),ue},T.__iteratorUncached=function(G,z){var ne=l.__iterator(wr,z),ue=0;return new Le(function(){for(;;){var fe=ne.next();if(fe.done)return fe;var ve=fe.value,Ve=ve[0],ke=ve[1];if(p.call(y,ke,Ve,l))return _e(G,R?Ve:ue++,ke,fe)}})},T}function Cr(l,p,y){var R=sr().asMutable();return l.__iterate(function(T,G){R.update(p.call(y,T,G,l),0,function(z){return z+1})}),R.asImmutable()}function Ar(l,p,y){var R=I(l),T=(b(l)?xr():sr()).asMutable();l.__iterate(function(z,ne){T.update(p.call(y,z,ne,l),function(ue){return ue=ue||[],ue.push(R?[ne,z]:z),ue})});var G=wi(l);return T.map(function(z){return Xe(l,G(z))})}function Lr(l,p,y,R){var T=l.size;if(p!==void 0&&(p=p|0),y!==void 0&&(y===1/0?y=T:y=y|0),xe(p,y,T))return l;var G=dr(p,T),z=Wr(y,T);if(G!==G||z!==z)return Lr(l.toSeq().cacheResult(),p,y,R);var ne=z-G,ue;ne===ne&&(ue=ne<0?0:ne);var fe=Lt(l);return fe.size=ue===0?ue:l.size&&ue||void 0,!R&&ma(l)&&ue>=0&&(fe.get=function(ve,Ve){return ve=We(this,ve),ve>=0&&ve<ue?l.get(ve+G,Ve):Ve}),fe.__iterateUncached=function(ve,Ve){var ke=this;if(ue===0)return 0;if(Ve)return this.cacheResult().__iterate(ve,Ve);var ir=0,cr=!0,zr=0;return l.__iterate(function(Wt,qt){if(!(cr&&(cr=ir++<G)))return zr++,ve(Wt,R?qt:zr-1,ke)!==!1&&zr!==ue}),zr},fe.__iteratorUncached=function(ve,Ve){if(ue!==0&&Ve)return this.cacheResult().__iterator(ve,Ve);var ke=ue!==0&&l.__iterator(ve,Ve),ir=0,cr=0;return new Le(function(){for(;ir++<G;)ke.next();if(++cr>ue)return ce();var zr=ke.next();return R||ve===vr?zr:ve===Mr?_e(ve,cr-1,void 0,zr):_e(ve,cr-1,zr.value[1],zr)})},fe}function Fr(l,p,y){var R=Lt(l);return R.__iterateUncached=function(T,G){var z=this;if(G)return this.cacheResult().__iterate(T,G);var ne=0;return l.__iterate(function(ue,fe,ve){return p.call(y,ue,fe,ve)&&++ne&&T(ue,fe,z)}),ne},R.__iteratorUncached=function(T,G){var z=this;if(G)return this.cacheResult().__iterator(T,G);var ne=l.__iterator(wr,G),ue=!0;return new Le(function(){if(!ue)return ce();var fe=ne.next();if(fe.done)return fe;var ve=fe.value,Ve=ve[0],ke=ve[1];return p.call(y,ke,Ve,z)?T===wr?fe:_e(T,Ve,ke,fe):(ue=!1,ce())})},R}function Ir(l,p,y,R){var T=Lt(l);return T.__iterateUncached=function(G,z){var ne=this;if(z)return this.cacheResult().__iterate(G,z);var ue=!0,fe=0;return l.__iterate(function(ve,Ve,ke){if(!(ue&&(ue=p.call(y,ve,Ve,ke))))return fe++,G(ve,R?Ve:fe-1,ne)}),fe},T.__iteratorUncached=function(G,z){var ne=this;if(z)return this.cacheResult().__iterator(G,z);var ue=l.__iterator(wr,z),fe=!0,ve=0;return new Le(function(){var Ve,ke,ir;do{if(Ve=ue.next(),Ve.done)return R||G===vr?Ve:G===Mr?_e(G,ve++,void 0,Ve):_e(G,ve++,Ve.value[1],Ve);var cr=Ve.value;ke=cr[0],ir=cr[1],fe&&(fe=p.call(y,ir,ke,ne))}while(fe);return G===wr?Ve:_e(G,ke,ir,Ve)})},T}function Ge(l,p){var y=I(l),R=[l].concat(p).map(function(z){return W(z)?y&&(z=L(z)):z=y?Ea(z):jn(Array.isArray(z)?z:[z]),z}).filter(function(z){return z.size!==0});if(R.length===0)return l;if(R.length===1){var T=R[0];if(T===l||y&&I(T)||F(l)&&F(T))return T}var G=new Rt(R);return y?G=G.toKeyedSeq():F(l)||(G=G.toSetSeq()),G=G.flatten(!0),G.size=R.reduce(function(z,ne){if(z!==void 0){var ue=ne.size;if(ue!==void 0)return z+ue}},0),G}function Ae(l,p,y){var R=Lt(l);return R.__iterateUncached=function(T,G){var z=0,ne=!1;function ue(fe,ve){var Ve=this;fe.__iterate(function(ke,ir){return(!p||ve<p)&&W(ke)?ue(ke,ve+1):T(ke,y?ir:z++,Ve)===!1&&(ne=!0),!ne},G)}return ue(l,0),z},R.__iteratorUncached=function(T,G){var z=l.__iterator(T,G),ne=[],ue=0;return new Le(function(){for(;z;){var fe=z.next();if(fe.done!==!1){z=ne.pop();continue}var ve=fe.value;if(T===wr&&(ve=ve[1]),(!p||ne.length<p)&&W(ve))ne.push(z),z=ve.__iterator(T,G);else return y?fe:_e(T,ue++,ve,fe)}return ce()})},R}function we(l,p,y){var R=wi(l);return l.toSeq().map(function(T,G){return R(p.call(y,T,G,l))}).flatten(!0)}function qe(l,p){var y=Lt(l);return y.size=l.size&&l.size*2-1,y.__iterateUncached=function(R,T){var G=this,z=0;return l.__iterate(function(ne,ue){return(!z||R(p,z++,G)!==!1)&&R(ne,z++,G)!==!1},T),z},y.__iteratorUncached=function(R,T){var G=l.__iterator(vr,T),z=0,ne;return new Le(function(){return(!ne||z%2)&&(ne=G.next(),ne.done)?ne:z%2?_e(R,z++,p):_e(R,z++,ne.value,ne)})},y}function gr(l,p,y){p||(p=nt);var R=I(l),T=0,G=l.toSeq().map(function(z,ne){return[ne,z,T++,y?y(z,ne,l):z]}).toArray();return G.sort(function(z,ne){return p(z[3],ne[3])||z[2]-ne[2]}).forEach(R?function(z,ne){G[ne].length=2}:function(z,ne){G[ne]=z[1]}),R?Tt(G):F(l)?Sr(G):jr(G)}function Nr(l,p,y){if(p||(p=nt),y){var R=l.toSeq().map(function(T,G){return[T,y(T,G,l)]}).reduce(function(T,G){return ze(p,T[1],G[1])?G:T});return R&&R[0]}else return l.reduce(function(T,G){return ze(p,T,G)?G:T})}function ze(l,p,y){var R=l(y,p);return R===0&&y!==p&&(y==null||y!==y)||R>0}function bi(l,p,y){var R=Lt(l);return R.size=new Rt(y).map(function(T){return T.size}).min(),R.__iterate=function(T,G){for(var z=this.__iterator(vr,G),ne,ue=0;!(ne=z.next()).done&&T(ne.value,ue++,this)!==!1;);return ue},R.__iteratorUncached=function(T,G){var z=y.map(function(fe){return fe=V(fe),ur(G?fe.reverse():fe)}),ne=0,ue=!1;return new Le(function(){var fe;return ue||(fe=z.map(function(ve){return ve.next()}),ue=fe.some(function(ve){return ve.done})),ue?ce():_e(T,ne++,p.apply(null,fe.map(function(ve){return ve.value})))})},R}function Xe(l,p){return ma(l)?p:l.constructor(p)}function yo(l){if(l!==Object(l))throw new TypeError("Expected [K, V] tuple: "+l)}function Tr(l){return Ct(l.size),be(l)}function wi(l){return I(l)?L:F(l)?w:U}function Lt(l){return Object.create((I(l)?Tt:F(l)?Sr:jr).prototype)}function Fn(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):lr.prototype.cacheResult.call(this)}function nt(l,p){return l>p?1:l<p?-1:0}function wa(l){var p=ur(l);if(!p){if(!Hr(l))throw new TypeError("Expected iterable or array-like: "+l);p=ur(V(l))}return p}m(mt,Un);function mt(l,p){var y,R=function(z){if(z instanceof R)return z;if(!(this instanceof R))return new R(z);if(!y){y=!0;var ne=Object.keys(l);ut(T,ne),T.size=ne.length,T._name=p,T._keys=ne,T._defaultValues=l}this._map=sr(z)},T=R.prototype=Object.create(yt);return T.constructor=R,R}mt.prototype.toString=function(){return this.__toString(Hn(this)+" {","}")},mt.prototype.has=function(l){return this._defaultValues.hasOwnProperty(l)},mt.prototype.get=function(l,p){if(!this.has(l))return p;var y=this._defaultValues[l];return this._map?this._map.get(l,y):y},mt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var l=this.constructor;return l._empty||(l._empty=ai(this,$r()))},mt.prototype.set=function(l,p){if(!this.has(l))throw new Error('Cannot set unknown key "'+l+'" on '+Hn(this));if(this._map&&!this._map.has(l)){var y=this._defaultValues[l];if(p===y)return this}var R=this._map&&this._map.set(l,p);return this.__ownerID||R===this._map?this:ai(this,R)},mt.prototype.remove=function(l){if(!this.has(l))return this;var p=this._map&&this._map.remove(l);return this.__ownerID||p===this._map?this:ai(this,p)},mt.prototype.wasAltered=function(){return this._map.wasAltered()},mt.prototype.__iterator=function(l,p){var y=this;return L(this._defaultValues).map(function(R,T){return y.get(T)}).__iterator(l,p)},mt.prototype.__iterate=function(l,p){var y=this;return L(this._defaultValues).map(function(R,T){return y.get(T)}).__iterate(l,p)},mt.prototype.__ensureOwner=function(l){if(l===this.__ownerID)return this;var p=this._map&&this._map.__ensureOwner(l);return l?ai(this,p,l):(this.__ownerID=l,this._map=p,this)};var yt=mt.prototype;yt[B]=yt.remove,yt.deleteIn=yt.removeIn=er.removeIn,yt.merge=er.merge,yt.mergeWith=er.mergeWith,yt.mergeIn=er.mergeIn,yt.mergeDeep=er.mergeDeep,yt.mergeDeepWith=er.mergeDeepWith,yt.mergeDeepIn=er.mergeDeepIn,yt.setIn=er.setIn,yt.update=er.update,yt.updateIn=er.updateIn,yt.withMutations=er.withMutations,yt.asMutable=er.asMutable,yt.asImmutable=er.asImmutable;function ai(l,p,y){var R=Object.create(Object.getPrototypeOf(l));return R._map=p,R.__ownerID=y,R}function Hn(l){return l._name||l.constructor.name||"Record"}function ut(l,p){try{p.forEach(Pi.bind(void 0,l))}catch{}}function Pi(l,p){Object.defineProperty(l,p,{get:function(){return this.get(p)},set:function(y){xn(this.__ownerID,"Cannot set on an immutable record."),this.set(p,y)}})}m(Yr,Gn);function Yr(l){return l==null?ii():Pa(l)&&!b(l)?l:ii().withMutations(function(p){var y=U(l);Ct(y.size),y.forEach(function(R){return p.add(R)})})}Yr.of=function(){return this(arguments)},Yr.fromKeys=function(l){return this(L(l).keySeq())},Yr.prototype.toString=function(){return this.__toString("Set {","}")},Yr.prototype.has=function(l){return this._map.has(l)},Yr.prototype.add=function(l){return Et(this,this._map.set(l,!0))},Yr.prototype.remove=function(l){return Et(this,this._map.remove(l))},Yr.prototype.clear=function(){return Et(this,this._map.clear())},Yr.prototype.union=function(){var l=te.call(arguments,0);return l=l.filter(function(p){return p.size!==0}),l.length===0?this:this.size===0&&!this.__ownerID&&l.length===1?this.constructor(l[0]):this.withMutations(function(p){for(var y=0;y<l.length;y++)U(l[y]).forEach(function(R){return p.add(R)})})},Yr.prototype.intersect=function(){var l=te.call(arguments,0);if(l.length===0)return this;l=l.map(function(y){return U(y)});var p=this;return this.withMutations(function(y){p.forEach(function(R){l.every(function(T){return T.includes(R)})||y.remove(R)})})},Yr.prototype.subtract=function(){var l=te.call(arguments,0);if(l.length===0)return this;l=l.map(function(y){return U(y)});var p=this;return this.withMutations(function(y){p.forEach(function(R){l.some(function(T){return T.includes(R)})&&y.remove(R)})})},Yr.prototype.merge=function(){return this.union.apply(this,arguments)},Yr.prototype.mergeWith=function(l){var p=te.call(arguments,1);return this.union.apply(this,p)},Yr.prototype.sort=function(l){return Qt(gr(this,l))},Yr.prototype.sortBy=function(l,p){return Qt(gr(this,p,l))},Yr.prototype.wasAltered=function(){return this._map.wasAltered()},Yr.prototype.__iterate=function(l,p){var y=this;return this._map.__iterate(function(R,T){return l(T,T,y)},p)},Yr.prototype.__iterator=function(l,p){return this._map.map(function(y,R){return R}).__iterator(l,p)},Yr.prototype.__ensureOwner=function(l){if(l===this.__ownerID)return this;var p=this._map.__ensureOwner(l);return l?this.__make(p,l):(this.__ownerID=l,this._map=p,this)};function Pa(l){return!!(l&&l[_a])}Yr.isSet=Pa;var _a="@@__IMMUTABLE_SET__@@",bt=Yr.prototype;bt[_a]=!0,bt[B]=bt.remove,bt.mergeDeep=bt.merge,bt.mergeDeepWith=bt.mergeWith,bt.withMutations=er.withMutations,bt.asMutable=er.asMutable,bt.asImmutable=er.asImmutable,bt.__empty=ii,bt.__make=_i;function Et(l,p){return l.__ownerID?(l.size=p.size,l._map=p,l):p===l._map?l:p.size===0?l.__empty():l.__make(p)}function _i(l,p){var y=Object.create(bt);return y.size=l?l.size:0,y._map=l,y.__ownerID=p,y}var Di;function ii(){return Di||(Di=_i($r()))}m(Qt,Yr);function Qt(l){return l==null?Mi():Eo(l)?l:Mi().withMutations(function(p){var y=U(l);Ct(y.size),y.forEach(function(R){return p.add(R)})})}Qt.of=function(){return this(arguments)},Qt.fromKeys=function(l){return this(L(l).keySeq())},Qt.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function Eo(l){return Pa(l)&&b(l)}Qt.isOrderedSet=Eo;var Da=Qt.prototype;Da[x]=!0,Da.__empty=Mi,Da.__make=Vi;function Vi(l,p){var y=Object.create(Da);return y.size=l?l.size:0,y._map=l,y.__ownerID=p,y}var tn;function Mi(){return tn||(tn=Vi(ni()))}m(_r,rr);function _r(l){return l==null?Va():Oo(l)?l:Va().unshiftAll(l)}_r.of=function(){return this(arguments)},_r.prototype.toString=function(){return this.__toString("Stack [","]")},_r.prototype.get=function(l,p){var y=this._head;for(l=We(this,l);y&&l--;)y=y.next;return y?y.value:p},_r.prototype.peek=function(){return this._head&&this._head.value},_r.prototype.push=function(){if(arguments.length===0)return this;for(var l=this.size+arguments.length,p=this._head,y=arguments.length-1;y>=0;y--)p={value:arguments[y],next:p};return this.__ownerID?(this.size=l,this._head=p,this.__hash=void 0,this.__altered=!0,this):xt(l,p)},_r.prototype.pushAll=function(l){if(l=w(l),l.size===0)return this;Ct(l.size);var p=this.size,y=this._head;return l.reverse().forEach(function(R){p++,y={value:R,next:y}}),this.__ownerID?(this.size=p,this._head=y,this.__hash=void 0,this.__altered=!0,this):xt(p,y)},_r.prototype.pop=function(){return this.slice(1)},_r.prototype.unshift=function(){return this.push.apply(this,arguments)},_r.prototype.unshiftAll=function(l){return this.pushAll(l)},_r.prototype.shift=function(){return this.pop.apply(this,arguments)},_r.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Va()},_r.prototype.slice=function(l,p){if(xe(l,p,this.size))return this;var y=dr(l,this.size),R=Wr(p,this.size);if(R!==this.size)return rr.prototype.slice.call(this,l,p);for(var T=this.size-y,G=this._head;y--;)G=G.next;return this.__ownerID?(this.size=T,this._head=G,this.__hash=void 0,this.__altered=!0,this):xt(T,G)},_r.prototype.__ensureOwner=function(l){return l===this.__ownerID?this:l?xt(this.size,this._head,l,this.__hash):(this.__ownerID=l,this.__altered=!1,this)},_r.prototype.__iterate=function(l,p){if(p)return this.reverse().__iterate(l);for(var y=0,R=this._head;R&&l(R.value,y++,this)!==!1;)R=R.next;return y},_r.prototype.__iterator=function(l,p){if(p)return this.reverse().__iterator(l);var y=0,R=this._head;return new Le(function(){if(R){var T=R.value;return R=R.next,_e(l,y++,T)}return ce()})};function Oo(l){return!!(l&&l[oa])}_r.isStack=Oo;var oa="@@__IMMUTABLE_STACK__@@",ua=_r.prototype;ua[oa]=!0,ua.withMutations=er.withMutations,ua.asMutable=er.asMutable,ua.asImmutable=er.asImmutable,ua.wasAltered=er.wasAltered;function xt(l,p,y,R){var T=Object.create(ua);return T.size=l,T._head=p,T.__ownerID=y,T.__hash=R,T.__altered=!1,T}var So;function Va(){return So||(So=xt(0))}function Jt(l,p){var y=function(R){l.prototype[R]=p[R]};return Object.keys(p).forEach(y),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(p).forEach(y),l}V.Iterator=Le,Jt(V,{toArray:function(){Ct(this.size);var l=new Array(this.size||0);return this.valueSeq().__iterate(function(p,y){l[y]=p}),l},toIndexedSeq:function(){return new Ln(this)},toJS:function(){return this.toSeq().map(function(l){return l&&typeof l.toJS=="function"?l.toJS():l}).__toJS()},toJSON:function(){return this.toSeq().map(function(l){return l&&typeof l.toJSON=="function"?l.toJSON():l}).__toJS()},toKeyedSeq:function(){return new Bt(this,!0)},toMap:function(){return sr(this.toKeyedSeq())},toObject:function(){Ct(this.size);var l={};return this.__iterate(function(p,y){l[y]=p}),l},toOrderedMap:function(){return xr(this.toKeyedSeq())},toOrderedSet:function(){return Qt(I(this)?this.valueSeq():this)},toSet:function(){return Yr(I(this)?this.valueSeq():this)},toSetSeq:function(){return new aa(this)},toSeq:function(){return F(this)?this.toIndexedSeq():I(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return _r(I(this)?this.valueSeq():this)},toList:function(){return Kr(I(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(l,p){return this.size===0?l+p:l+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+p},concat:function(){var l=te.call(arguments,0);return Xe(this,Ge(this,l))},includes:function(l){return this.some(function(p){return Xr(p,l)})},entries:function(){return this.__iterator(wr)},every:function(l,p){Ct(this.size);var y=!0;return this.__iterate(function(R,T,G){if(!l.call(p,R,T,G))return y=!1,!1}),y},filter:function(l,p){return Xe(this,mo(this,l,p,!0))},find:function(l,p,y){var R=this.findEntry(l,p);return R?R[1]:y},forEach:function(l,p){return Ct(this.size),this.__iterate(p?l.bind(p):l)},join:function(l){Ct(this.size),l=l!==void 0?""+l:",";var p="",y=!0;return this.__iterate(function(R){y?y=!1:p+=l,p+=R!=null?R.toString():""}),p},keys:function(){return this.__iterator(Mr)},map:function(l,p){return Xe(this,ho(this,l,p))},reduce:function(l,p,y){Ct(this.size);var R,T;return arguments.length<2?T=!0:R=p,this.__iterate(function(G,z,ne){T?(T=!1,R=G):R=l.call(y,R,G,z,ne)}),R},reduceRight:function(l,p,y){var R=this.toKeyedSeq().reverse();return R.reduce.apply(R,arguments)},reverse:function(){return Xe(this,Ni(this,!0))},slice:function(l,p){return Xe(this,Lr(this,l,p,!0))},some:function(l,p){return!this.every(Ma(l),p)},sort:function(l){return Xe(this,gr(this,l))},values:function(){return this.__iterator(vr)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(l,p){return be(l?this.toSeq().filter(l,p):this)},countBy:function(l,p){return Cr(this,l,p)},equals:function(l){return kn(this,l)},entrySeq:function(){var l=this;if(l._cache)return new Rt(l._cache);var p=l.toSeq().map(Xo).toIndexedSeq();return p.fromEntrySeq=function(){return l.toSeq()},p},filterNot:function(l,p){return this.filter(Ma(l),p)},findEntry:function(l,p,y){var R=y;return this.__iterate(function(T,G,z){if(l.call(p,T,G,z))return R=[G,T],!1}),R},findKey:function(l,p){var y=this.findEntry(l,p);return y&&y[0]},findLast:function(l,p,y){return this.toKeyedSeq().reverse().find(l,p,y)},findLastEntry:function(l,p,y){return this.toKeyedSeq().reverse().findEntry(l,p,y)},findLastKey:function(l,p){return this.toKeyedSeq().reverse().findKey(l,p)},first:function(){return this.find(Pe)},flatMap:function(l,p){return Xe(this,we(this,l,p))},flatten:function(l){return Xe(this,Ae(this,l,!0))},fromEntrySeq:function(){return new ia(this)},get:function(l,p){return this.find(function(y,R){return Xr(R,l)},void 0,p)},getIn:function(l,p){for(var y=this,R=wa(l),T;!(T=R.next()).done;){var G=T.value;if(y=y&&y.get?y.get(G,Ce):Ce,y===Ce)return p}return y},groupBy:function(l,p){return Ar(this,l,p)},has:function(l){return this.get(l,Ce)!==Ce},hasIn:function(l){return this.getIn(l,Ce)!==Ce},isSubset:function(l){return l=typeof l.includes=="function"?l:V(l),this.every(function(p){return l.includes(p)})},isSuperset:function(l){return l=typeof l.isSubset=="function"?l:V(l),l.isSubset(this)},keyOf:function(l){return this.findKey(function(p){return Xr(p,l)})},keySeq:function(){return this.toSeq().map(qo).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(l){return this.toKeyedSeq().reverse().keyOf(l)},max:function(l){return Nr(this,l)},maxBy:function(l,p){return Nr(this,p,l)},min:function(l){return Nr(this,l?ji(l):nn)},minBy:function(l,p){return Nr(this,p?ji(p):nn,l)},rest:function(){return this.slice(1)},skip:function(l){return this.slice(Math.max(0,l))},skipLast:function(l){return Xe(this,this.toSeq().reverse().skip(l).reverse())},skipWhile:function(l,p){return Xe(this,Ir(this,l,p,!0))},skipUntil:function(l,p){return this.skipWhile(Ma(l),p)},sortBy:function(l,p){return Xe(this,gr(this,p,l))},take:function(l){return this.slice(0,Math.max(0,l))},takeLast:function(l){return Xe(this,this.toSeq().reverse().take(l).reverse())},takeWhile:function(l,p){return Xe(this,Fr(this,l,p))},takeUntil:function(l,p){return this.takeWhile(Ma(l),p)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Ui(this))}});var wt=V.prototype;wt[O]=!0,wt[Ee]=wt.values,wt.__toJS=wt.toArray,wt.__toStringMapper=ki,wt.inspect=wt.toSource=function(){return this.toString()},wt.chain=wt.flatMap,wt.contains=wt.includes,Jt(L,{flip:function(){return Xe(this,go(this))},mapEntries:function(l,p){var y=this,R=0;return Xe(this,this.toSeq().map(function(T,G){return l.call(p,[G,T],R++,y)}).fromEntrySeq())},mapKeys:function(l,p){var y=this;return Xe(this,this.toSeq().flip().map(function(R,T){return l.call(p,R,T,y)}).flip())}});var dn=L.prototype;dn[M]=!0,dn[Ee]=wt.entries,dn.__toJS=wt.toObject,dn.__toStringMapper=function(l,p){return JSON.stringify(p)+": "+ki(l)},Jt(w,{toKeyedSeq:function(){return new Bt(this,!1)},filter:function(l,p){return Xe(this,mo(this,l,p,!1))},findIndex:function(l,p){var y=this.findEntry(l,p);return y?y[0]:-1},indexOf:function(l){var p=this.keyOf(l);return p===void 0?-1:p},lastIndexOf:function(l){var p=this.lastKeyOf(l);return p===void 0?-1:p},reverse:function(){return Xe(this,Ni(this,!1))},slice:function(l,p){return Xe(this,Lr(this,l,p,!1))},splice:function(l,p){var y=arguments.length;if(p=Math.max(p|0,0),y===0||y===2&&!p)return this;l=dr(l,l<0?this.count():this.size);var R=this.slice(0,l);return Xe(this,y===1?R:R.concat(ye(arguments,2),this.slice(l+p)))},findLastIndex:function(l,p){var y=this.findLastEntry(l,p);return y?y[0]:-1},first:function(){return this.get(0)},flatten:function(l){return Xe(this,Ae(this,l,!1))},get:function(l,p){return l=We(this,l),l<0||this.size===1/0||this.size!==void 0&&l>this.size?p:this.find(function(y,R){return R===l},void 0,p)},has:function(l){return l=We(this,l),l>=0&&(this.size!==void 0?this.size===1/0||l<this.size:this.indexOf(l)!==-1)},interpose:function(l){return Xe(this,qe(this,l))},interleave:function(){var l=[this].concat(ye(arguments)),p=bi(this.toSeq(),Sr.of,l),y=p.flatten(!0);return p.size&&(y.size=p.size*l.length),Xe(this,y)},keySeq:function(){return ct(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(l,p){return Xe(this,Ir(this,l,p,!1))},zip:function(){var l=[this].concat(ye(arguments));return Xe(this,bi(this,xi,l))},zipWith:function(l){var p=ye(arguments);return p[0]=this,Xe(this,bi(this,l,p))}}),w.prototype[Y]=!0,w.prototype[x]=!0,Jt(U,{get:function(l,p){return this.has(l)?l:p},includes:function(l){return this.has(l)},keySeq:function(){return this.valueSeq()}}),U.prototype.has=wt.includes,U.prototype.contains=U.prototype.includes,Jt(Tt,L.prototype),Jt(Sr,w.prototype),Jt(jr,U.prototype),Jt(Un,L.prototype),Jt(rr,w.prototype),Jt(Gn,U.prototype);function qo(l,p){return p}function Xo(l,p){return[p,l]}function Ma(l){return function(){return!l.apply(this,arguments)}}function ji(l){return function(){return-l.apply(this,arguments)}}function ki(l){return typeof l=="string"?JSON.stringify(l):String(l)}function xi(){return ye(arguments)}function nn(l,p){return l<p?1:l>p?-1:0}function Ui(l){if(l.size===1/0)return 0;var p=b(l),y=I(l),R=p?1:0,T=l.__iterate(y?p?function(G,z){R=31*R+sa(gt(G),gt(z))|0}:function(G,z){R=R+sa(gt(G),gt(z))|0}:p?function(G){R=31*R+gt(G)|0}:function(G){R=R+gt(G)|0});return To(T,R)}function To(l,p){return p=Sn(p,3432918353),p=Sn(p<<15|p>>>-15,461845907),p=Sn(p<<13|p>>>-13,5),p=(p+3864292196|0)^l,p=Sn(p^p>>>16,2246822507),p=Sn(p^p>>>13,3266489909),p=Bn(p^p>>>16),p}function sa(l,p){return l^p+2654435769+(l<<6)+(l>>2)|0}var Ro={Iterable:V,Seq:lr,Collection:Vt,Map:sr,OrderedMap:xr,List:Kr,Stack:_r,Set:Yr,OrderedSet:Qt,Record:mt,Range:ct,Repeat:ot,is:Xr,fromJS:On};return Ro})},17466:function(ge,te,m){var V,L;(function(w,U){V=U,L=typeof V=="function"?V.call(te,m,te,ge):V,L!==void 0&&(ge.exports=L)})(this,function(){"use strict";Array.isArray||(Array.isArray=function(I){return Object.prototype.toString.call(I)==="[object Array]"});function w(I){for(var F=[],j=0,b=I.length;j<b;j++)F.indexOf(I[j])===-1&&F.push(I[j]);return F}var U={},W={"==":function(I,F){return I==F},"===":function(I,F){return I===F},"!=":function(I,F){return I!=F},"!==":function(I,F){return I!==F},">":function(I,F){return I>F},">=":function(I,F){return I>=F},"<":function(I,F,j){return j===void 0?I<F:I<F&&F<j},"<=":function(I,F,j){return j===void 0?I<=F:I<=F&&F<=j},"!!":function(I){return U.truthy(I)},"!":function(I){return!U.truthy(I)},"%":function(I,F){return I%F},log:function(I){return console.log(I),I},in:function(I,F){return!F||typeof F.indexOf>"u"?!1:F.indexOf(I)!==-1},cat:function(){return Array.prototype.join.call(arguments,"")},substr:function(I,F,j){if(j<0){var b=String(I).substr(F);return b.substr(0,b.length+j)}return String(I).substr(F,j)},"+":function(){return Array.prototype.reduce.call(arguments,function(I,F){return parseFloat(I,10)+parseFloat(F,10)},0)},"*":function(){return Array.prototype.reduce.call(arguments,function(I,F){return parseFloat(I,10)*parseFloat(F,10)})},"-":function(I,F){return F===void 0?-I:I-F},"/":function(I,F){return I/F},min:function(){return Math.min.apply(this,arguments)},max:function(){return Math.max.apply(this,arguments)},merge:function(){return Array.prototype.reduce.call(arguments,function(I,F){return I.concat(F)},[])},var:function(I,F){var j=F===void 0?null:F,b=this;if(typeof I>"u"||I===""||I===null)return b;for(var O=String(I).split("."),M=0;M<O.length;M++)if(b==null||(b=b[O[M]],b===void 0))return j;return b},missing:function(){for(var I=[],F=Array.isArray(arguments[0])?arguments[0]:arguments,j=0;j<F.length;j++){var b=F[j],O=U.apply({var:b},this);(O===null||O==="")&&I.push(b)}return I},missing_some:function(I,F){var j=U.apply({missing:F},this);return F.length-j.length>=I?[]:j}};return U.is_logic=function(I){return typeof I=="object"&&I!==null&&!Array.isArray(I)&&Object.keys(I).length===1},U.truthy=function(I){return Array.isArray(I)&&I.length===0?!1:!!I},U.get_operator=function(I){return Object.keys(I)[0]},U.get_values=function(I){return I[U.get_operator(I)]},U.apply=function(I,F){if(Array.isArray(I))return I.map(function(Re){return U.apply(Re,F)});if(!U.is_logic(I))return I;var j=U.get_operator(I),b=I[j],O,M,Y,x,B;if(Array.isArray(b)||(b=[b]),j==="if"||j=="?:"){for(O=0;O<b.length-1;O+=2)if(U.truthy(U.apply(b[O],F)))return U.apply(b[O+1],F);return b.length===O+1?U.apply(b[O],F):null}else if(j==="and"){for(O=0;O<b.length;O+=1)if(M=U.apply(b[O],F),!U.truthy(M))return M;return M}else if(j==="or"){for(O=0;O<b.length;O+=1)if(M=U.apply(b[O],F),U.truthy(M))return M;return M}else{if(j==="filter")return x=U.apply(b[0],F),Y=b[1],Array.isArray(x)?x.filter(function(Re){return U.truthy(U.apply(Y,Re))}):[];if(j==="map")return x=U.apply(b[0],F),Y=b[1],Array.isArray(x)?x.map(function(Re){return U.apply(Y,Re)}):[];if(j==="reduce")return x=U.apply(b[0],F),Y=b[1],B=typeof b[2]<"u"?b[2]:null,Array.isArray(x)?x.reduce(function(Re,Ce){return U.apply(Y,{current:Ce,accumulator:Re})},B):B;if(j==="all"){if(x=U.apply(b[0],F),Y=b[1],!Array.isArray(x)||!x.length)return!1;for(O=0;O<x.length;O+=1)if(!U.truthy(U.apply(Y,x[O])))return!1;return!0}else if(j==="none"){if(x=U.apply(b[0],F),Y=b[1],!Array.isArray(x)||!x.length)return!0;for(O=0;O<x.length;O+=1)if(U.truthy(U.apply(Y,x[O])))return!1;return!0}else if(j==="some"){if(x=U.apply(b[0],F),Y=b[1],!Array.isArray(x)||!x.length)return!1;for(O=0;O<x.length;O+=1)if(U.truthy(U.apply(Y,x[O])))return!0;return!1}}if(b=b.map(function(Re){return U.apply(Re,F)}),W.hasOwnProperty(j)&&typeof W[j]=="function")return W[j].apply(F,b);if(j.indexOf(".")>0){var $=String(j).split("."),K=W;for(O=0;O<$.length;O++){if(!K.hasOwnProperty($[O]))throw new Error("Unrecognized operation "+j+" (failed at "+$.slice(0,O+1).join(".")+")");K=K[$[O]]}return K.apply(F,b)}throw new Error("Unrecognized operation "+j)},U.uses_data=function(I){var F=[];if(U.is_logic(I)){var j=U.get_operator(I),b=I[j];Array.isArray(b)||(b=[b]),j==="var"?F.push(b[0]):b.forEach(function(O){F.push.apply(F,U.uses_data(O))})}return w(F)},U.add_operation=function(I,F){W[I]=F},U.rm_operation=function(I){delete W[I]},U.rule_like=function(I,F){if(F===I||F==="@")return!0;if(F==="number")return typeof I=="number";if(F==="string")return typeof I=="string";if(F==="array")return Array.isArray(I)&&!U.is_logic(I);if(U.is_logic(F)){if(U.is_logic(I)){var j=U.get_operator(F),b=U.get_operator(I);if(j==="@"||j===b)return U.rule_like(U.get_values(I,!1),U.get_values(F,!1))}return!1}if(Array.isArray(F))if(Array.isArray(I)){if(F.length!==I.length)return!1;for(var O=0;O<F.length;O+=1)if(!U.rule_like(I[O],F[O]))return!1;return!0}else return!1;return!1},U})},70370:(ge,te,m)=>{var V=m(24655),L=m(60648);function w(U,W,I){(I!==void 0&&!L(U[W],I)||I===void 0&&!(W in U))&&V(U,W,I)}ge.exports=w},21033:(ge,te,m)=>{var V=m(70253),L=m(70370),w=m(99997),U=m(11368),W=m(52259),I=m(66373),F=m(41788);function j(b,O,M,Y,x){b!==O&&w(O,function(B,$){if(x||(x=new V),W(B))U(b,O,$,M,j,Y,x);else{var K=Y?Y(F(b,$),B,$+"",b,O,x):void 0;K===void 0&&(K=B),L(b,$,K)}},I)}ge.exports=j},11368:(ge,te,m)=>{var V=m(70370),L=m(54562),w=m(74194),U=m(60566),W=m(62587),I=m(11710),F=m(75821),j=m(66260),b=m(3521),O=m(51144),M=m(52259),Y=m(2556),x=m(34403),B=m(41788),$=m(13044);function K(Re,Ce,ar,C,Ue,Oe,N){var ye=B(Re,ar),be=B(Ce,ar),We=N.get(be);if(We){V(Re,ar,We);return}var Pe=Oe?Oe(ye,be,ar+"",Re,Ce,N):void 0,xe=Pe===void 0;if(xe){var dr=F(be),Wr=!dr&&b(be),Zr=!dr&&!Wr&&x(be);Pe=be,dr||Wr||Zr?F(ye)?Pe=ye:j(ye)?Pe=U(ye):Wr?(xe=!1,Pe=L(be,!0)):Zr?(xe=!1,Pe=w(be,!0)):Pe=[]:Y(be)||I(be)?(Pe=ye,I(ye)?Pe=$(ye):(!M(ye)||O(ye))&&(Pe=W(be))):xe=!1}xe&&(N.set(be,Pe),Ue(Pe,be,C,Oe,N),N.delete(be)),V(Re,ar,Pe)}ge.exports=K},45585:ge=>{var te=9007199254740991,m=Math.floor;function V(L,w){var U="";if(!L||w<1||w>te)return U;do w%2&&(U+=L),w=m(w/2),w&&(L+=L);while(w);return U}ge.exports=V},99021:(ge,te,m)=>{var V=m(37174),L=m(69336),w=m(55719);function U(W,I){return w(L(W,I,V),W+"")}ge.exports=U},71398:(ge,te,m)=>{var V=m(26400);function L(w,U){return V(U,function(W){return w[W]})}ge.exports=L},44419:(ge,te,m)=>{var V=m(99021),L=m(20894);function w(U){return V(function(W,I){var F=-1,j=I.length,b=j>1?I[j-1]:void 0,O=j>2?I[2]:void 0;for(b=U.length>3&&typeof b=="function"?(j--,b):void 0,O&&L(I[0],I[1],O)&&(b=j<3?void 0:b,j=1),W=Object(W);++F<j;){var M=I[F];M&&U(W,M,F,b)}return W})}ge.exports=w},41788:ge=>{function te(m,V){if(!(V==="constructor"&&typeof m[V]=="function")&&V!="__proto__")return m[V]}ge.exports=te},85222:(ge,te,m)=>{var V=m(39207),L=/[\\^$.*+?()[\]{}|]/g,w=RegExp(L.source);function U(W){return W=V(W),W&&w.test(W)?W.replace(L,"\\$&"):W}ge.exports=U},421:(ge,te,m)=>{var V=m(22421),L=m(94434),w=m(87600),U=m(63437),W=m(33119),I=Math.max;function F(j,b,O,M){j=L(j)?j:W(j),O=O&&!M?U(O):0;var Y=j.length;return O<0&&(O=I(Y+O,0)),w(j)?O<=Y&&j.indexOf(b,O)>-1:!!Y&&V(j,b,O)>-1}ge.exports=F},66260:(ge,te,m)=>{var V=m(94434),L=m(84007);function w(U){return L(U)&&V(U)}ge.exports=w},94818:(ge,te,m)=>{var V=m(61703),L=m(75217),w=m(11710),U=m(75821),W=m(94434),I=m(3521),F=m(36561),j=m(34403),b="[object Map]",O="[object Set]",M=Object.prototype,Y=M.hasOwnProperty;function x(B){if(B==null)return!0;if(W(B)&&(U(B)||typeof B=="string"||typeof B.splice=="function"||I(B)||j(B)||w(B)))return!B.length;var $=L(B);if($==b||$==O)return!B.size;if(F(B))return!V(B).length;for(var K in B)if(Y.call(B,K))return!1;return!0}ge.exports=x},87600:(ge,te,m)=>{var V=m(20009),L=m(75821),w=m(84007),U="[object String]";function W(I){return typeof I=="string"||!L(I)&&w(I)&&V(I)==U}ge.exports=W},33973:(ge,te,m)=>{var V=m(24655),L=m(4768),w=m(98968);function U(W,I){var F={};return I=w(I,3),L(W,function(j,b,O){V(F,b,I(j,b,O))}),F}ge.exports=U},82564:(ge,te,m)=>{var V=m(21033),L=m(44419),w=L(function(U,W,I){V(U,W,I)});ge.exports=w},44362:(ge,te,m)=>{var V=m(21033),L=m(44419),w=L(function(U,W,I,F){V(U,W,I,F)});ge.exports=w},82925:(ge,te,m)=>{var V=m(26400),L=m(98968),w=m(85874),U=m(41381);function W(I,F){if(I==null)return{};var j=V(U(I),function(b){return[b]});return F=L(F),w(I,j,function(b,O){return F(b,O[0])})}ge.exports=W},52400:(ge,te,m)=>{var V=m(45585),L=m(20894),w=m(63437),U=m(39207);function W(I,F,j){return(j?L(I,F,j):F===void 0)?F=1:F=w(F),V(U(I),F)}ge.exports=W},33604:(ge,te,m)=>{var V=m(93089),L=m(48771),w=m(63437),U=m(39207);function W(I,F,j){return I=U(I),j=j==null?0:V(w(j),0,I.length),F=L(F),I.slice(j,j+F.length)==F}ge.exports=W},63437:(ge,te,m)=>{var V=m(37818);function L(w){var U=V(w),W=U%1;return U===U?W?U-W:U:0}ge.exports=L},13044:(ge,te,m)=>{var V=m(60645),L=m(66373);function w(U){return V(U,L(U))}ge.exports=w},33119:(ge,te,m)=>{var V=m(71398),L=m(35174);function w(U){return U==null?[]:V(U,L(U))}ge.exports=w},55825:function(ge){(function(m,V){ge.exports=V()})(this,function(){return function(te){var m={};function V(L){if(m[L])return m[L].exports;var w=m[L]={i:L,l:!1,exports:{}};return te[L].call(w.exports,w,w.exports,V),w.l=!0,w.exports}return V.m=te,V.c=m,V.d=function(L,w,U){V.o(L,w)||Object.defineProperty(L,w,{configurable:!1,enumerable:!0,get:U})},V.n=function(L){var w=L&&L.__esModule?function(){return L.default}:function(){return L};return V.d(w,"a",w),w},V.o=function(L,w){return Object.prototype.hasOwnProperty.call(L,w)},V.p="",V(V.s=3)}([function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0});function L(U,W){var I={},F=U||"Abstract",j=[],b=null,O;if(I._type=F,I.getType=function(){return F},I.setType=function(B){F=B},I.getChildren=function(){return j},I.addChild=function(B){if(B){if(!B.setParent)throw{name:"Error",message:"Trying to add a child which is not a node: "+JSON.stringify(B)};B.setParent(I),j.push(B)}},I.getParent=function(){return b},I.setParent=function(B){b=B},I.getContext=function(B){return O||B.activeContext.peek()},I.setContext=function(B){O=B},I.getStartPosition=function(){return W>>16},I.getEndPosition=function(){return W&65535},I.getValue=function(){throw{name:"MethodNotImplementedException",message:"SpelNode#getValue() must be overridden."}},I.toString=function(){var B="Kind: "+I.getType();B+=", Children: [";for(var $=0,K=I.getChildren().length;$<K;$+=1)B+="{"+I.getChildren()[$]+"}, ";return B+="]",B},W===0)throw{name:"Error",message:"Position cannot be 0"};for(var M=arguments.length,Y=Array(M>2?M-2:0),x=2;x<M;x++)Y[x-2]=arguments[x];return Y&&Y.forEach(function(B){I.addChild(B)}),I}var w=m.SpelNode={create:L}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Stack=L;function L(w){this.elements=w||[]}L.prototype.push=function(w){return this.elements.push(w),w},L.prototype.pop=function(){return this.elements.pop()},L.prototype.peek=function(){return this.elements[this.elements.length-1]},L.prototype.empty=function(){return this.elements.length>0},L.prototype.search=function(w){return this.elements.length-this.elements.indexOf(w)}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var L={LITERAL_INT:1,LITERAL_LONG:2,LITERAL_HEXINT:3,LITERAL_HEXLONG:4,LITERAL_STRING:5,LITERAL_REAL:6,LITERAL_REAL_FLOAT:7,LPAREN:"(",RPAREN:")",COMMA:",",IDENTIFIER:0,COLON:":",HASH:"#",RSQUARE:"]",LSQUARE:"[",LCURLY:"{",RCURLY:"}",DOT:".",PLUS:"+",STAR:"*",MINUS:"-",SELECT_FIRST:"^[",SELECT_LAST:"$[",QMARK:"?",PROJECT:"![",DIV:"/",GE:">=",GT:">",LE:"<=",LT:"<",EQ:"==",NE:"!=",MOD:"%",NOT:"!",ASSIGN:"=",INSTANCEOF:"instanceof",MATCHES:"matches",BETWEEN:"between",SELECT:"?[",POWER:"^",ELVIS:"?:",SAFE_NAVI:"?.",BEAN_REF:"@",SYMBOLIC_OR:"||",SYMBOLIC_AND:"&&",INC:"++",DEC:"--"};function w(W){this.type=W,this.tokenChars=L[W],this._hasPayload=typeof L[W]!="string",typeof L[W]=="number"&&(this._ordinal=L[W])}for(var U in L)L.hasOwnProperty(U)&&(w[U]=new w(U));w.prototype.toString=function(){return this.type+(this.tokenChars.length!==0?"("+this.tokenChars+")":"")},w.prototype.getLength=function(){return this.tokenChars.length},w.prototype.hasPayload=function(){return this._hasPayload},w.prototype.valueOf=function(W){for(var I in L)if(L.hasOwnProperty(I)&&L[I]===W)return w[I]},w.prototype.ordinal=function(){return this._ordinal},m.TokenKind=w},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.StandardContext=m.SpelExpressionEvaluator=void 0;var L=V(4),w=V(50);m.SpelExpressionEvaluator=L.SpelExpressionEvaluator,m.StandardContext=w.StandardContext},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.SpelExpressionEvaluator=void 0;var L=V(5),w=V(1),U={};function W(I,F,j){var b=new w.Stack,O;return F||(F={}),b.push(F),O={rootContext:F,activeContext:b,locals:j},I.getValue(O)}U.compile=function(I){var F=(0,L.SpelExpressionParser)().parse(I);return{eval:function(b,O){return W(F,b,O)},_compiledExpression:F}},U.eval=function(I,F,j){return U.compile(I).eval(F,j)},m.SpelExpressionEvaluator=U},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.SpelExpressionParser=void 0;var L=V(2),w=V(6),U=V(8),W=V(9),I=V(10),F=V(11),j=V(12),b=V(13),O=V(14),M=V(15),Y=V(16),x=V(17),B=V(18),$=V(19),K=V(20),Re=V(21),Ce=V(22),ar=V(23),C=V(24),Ue=V(25),Oe=V(26),N=V(27),ye=V(28),be=V(29),We=V(30),Pe=V(31),xe=V(32),dr=V(33),Wr=V(34),Zr=V(35),Mr=V(36),vr=V(37),wr=V(38),Te=V(39),he=V(40),Ee=V(41),Le=V(42),_e=V(43),ce=V(44),Ze=V(45),De=V(46),ur=V(47),Dt=V(48),Hr=V(49),lr=m.SpelExpressionParser=function(){var Sr=new RegExp("[\\p{L}\\p{N}_$]+"),jr,Mn=[],Rt,it,en,Gt;function ma(Q){jr=Q}function ya(Q,oe){try{Rt=Q,it=w.Tokenizer.tokenize(Q),en=it.length,Gt=0,Mn=[];var Ie=tt();return sr()&&er(kr().startPos,"MORE_INPUT",yr().toString()),Ie}catch(nr){throw nr.message}}function tt(){var Q=Ea();if(sr()){var oe=kr();if(oe.getKind()===L.TokenKind.ASSIGN){Q===null&&(Q=F.NullLiteral.create(At(oe.startPos-1,oe.endPos-1))),yr();var Ie=Ea();return B.Assign.create(He(oe),Q,Ie)}if(oe.getKind()===L.TokenKind.ELVIS){Q===null&&(Q=F.NullLiteral.create(At(oe.startPos-1,oe.endPos-2))),yr();var nr=tt();return nr===null&&(nr=F.NullLiteral.create(At(oe.startPos+1,oe.endPos+1))),wr.Elvis.create(He(oe),Q,nr)}if(oe.getKind()===L.TokenKind.QMARK){Q===null&&(Q=F.NullLiteral.create(At(oe.startPos-1,oe.endPos-1))),yr();var $r=tt();Dr(L.TokenKind.COLON);var ht=tt();return vr.Ternary.create(He(oe),Q,$r,ht)}}return Q}function Ea(){for(var Q=jn();jt("or")||et(L.TokenKind.SYMBOLIC_OR);){var oe=yr(),Ie=jn();zt(oe,Q,Ie),Q=Zr.OpOr.create(He(oe),Q,Ie)}return Q}function jn(){for(var Q=za();jt("and")||et(L.TokenKind.SYMBOLIC_AND);){var oe=yr(),Ie=za();zt(oe,Q,Ie),Q=Wr.OpAnd.create(He(oe),Q,Ie)}return Q}function za(){var Q=Oa(),oe=Wn();if(oe!==null){var Ie=yr(),nr=Oa();zt(Ie,Q,nr);var $r=oe.kind;if(oe.isNumericRelationalOperator()){var ht=He(Ie);return $r===L.TokenKind.GT?Ce.OpGT.create(ht,Q,nr):$r===L.TokenKind.LT?C.OpLT.create(ht,Q,nr):$r===L.TokenKind.LE?ar.OpLE.create(ht,Q,nr):$r===L.TokenKind.GE?Re.OpGE.create(ht,Q,nr):$r===L.TokenKind.EQ?$.OpEQ.create(ht,Q,nr):K.OpNE.create(ht,Q,nr)}return $r===L.TokenKind.INSTANCEOF?_e.OpInstanceof.create(He(Ie),Q,nr):$r===L.TokenKind.MATCHES?Mr.OpMatches.create(He(Ie),Q,nr):ce.OpBetween.create(He(Ie),Q,nr)}return Q}function Oa(){for(var Q=Sa();rn(L.TokenKind.PLUS,L.TokenKind.MINUS,L.TokenKind.INC);){var oe=yr(),Ie=Sa();kt(oe,Ie),oe.getKind()===L.TokenKind.PLUS?Q=Ue.OpPlus.create(He(oe),Q,Ie):oe.getKind()===L.TokenKind.MINUS&&(Q=Oe.OpMinus.create(He(oe),Q,Ie))}return Q}function Sa(){for(var Q=Ta();rn(L.TokenKind.STAR,L.TokenKind.DIV,L.TokenKind.MOD);){var oe=yr(),Ie=Ta();zt(oe,Q,Ie),oe.getKind()===L.TokenKind.STAR?Q=N.OpMultiply.create(He(oe),Q,Ie):oe.getKind()===L.TokenKind.DIV?Q=ye.OpDivide.create(He(oe),Q,Ie):Q=be.OpModulus.create(He(oe),Q,Ie)}return Q}function Ta(){var Q=On(),oe;if(et(L.TokenKind.POWER)){oe=yr();var Ie=On();return kt(oe,Ie),We.OpPower.create(He(oe),Q,Ie)}return Q!==null&&rn(L.TokenKind.INC,L.TokenKind.DEC)?(oe=yr(),oe.getKind()===L.TokenKind.INC?Pe.OpInc.create(He(oe),!0,Q):xe.OpDec.create(He(oe),!0,Q)):Q}function On(){var Q,oe;return rn(L.TokenKind.PLUS,L.TokenKind.MINUS,L.TokenKind.NOT)?(Q=yr(),oe=On(),Q.getKind()===L.TokenKind.NOT?dr.OpNot.create(He(Q),oe):Q.getKind()===L.TokenKind.PLUS?Ue.OpPlus.create(He(Q),oe):Oe.OpMinus.create(He(Q),oe)):rn(L.TokenKind.INC,L.TokenKind.DEC)?(Q=yr(),oe=On(),Q.getKind()===L.TokenKind.INC?Pe.OpInc.create(He(Q),!1,oe):xe.OpDec.create(He(Q),!1,oe)):ea()}function ea(){var Q=[],oe=Aa();for(Q.push(oe);Ra();)Q.push(Yt());return Q.length===1?Q[0]:Y.CompoundExpression.create(At(oe.getStartPosition(),Q[Q.length-1].getEndPosition()),Q)}function Ra(){var Q=null;return rn(L.TokenKind.DOT,L.TokenKind.SAFE_NAVI)?Q=Xr():Q=qa(),Q===null?!1:(Pr(Q),!0)}function qa(){return et(L.TokenKind.LSQUARE)&&Bn()?Yt():null}function Xr(){var Q=yr(),oe=Q.getKind()===L.TokenKind.SAFE_NAVI;return Xa(oe)||kn()||Gn(oe)||gt(oe)?Yt():(kr()===null?er(Q.startPos,"OOD"):er(Q.startPos,"UNEXPECTED_DATA_AFTER_DOT",Rn(kr())),null)}function kn(){if(!et(L.TokenKind.HASH))return!1;var Q=yr(),oe=Dr(L.TokenKind.IDENTIFIER),Ie=ot();return Ie===null?(Pr(M.VariableReference.create(oe.data,At(Q.startPos,oe.endPos))),!0):(Pr(j.FunctionReference.create(oe.data,At(Q.startPos,oe.endPos),Ie)),!0)}function ot(){if(!et(L.TokenKind.LPAREN))return null;var Q=[];return xn(Q),Dr(L.TokenKind.RPAREN),Q}function Ca(Q){et(L.TokenKind.LPAREN)||er(He(kr()),"MISSING_CONSTRUCTOR_ARGS"),xn(Q),Dr(L.TokenKind.RPAREN)}function xn(Q){var oe=kr().startPos,Ie;do{yr();var nr=kr();nr===null&&er(oe,"RUN_OUT_OF_ARGUMENTS"),nr.getKind()!==L.TokenKind.RPAREN&&Q.push(tt()),Ie=kr()}while(Ie!==null&&Ie.kind===L.TokenKind.COMMA);Ie===null&&er(oe,"RUN_OUT_OF_ARGUMENTS")}function ct(Q){return Q===null?Rt.length:Q.startPos}function Aa(){return La()||Jr()||Un()||rr()||Qa()||Xa(!1)||kn()||Vt()||Gn(!1)||gt(!1)||Bn()||Sn()?Yt():null}function Vt(){if(et(L.TokenKind.BEAN_REF)){var Q=yr(),oe=null,Ie=null;et(L.TokenKind.IDENTIFIER)?(oe=Dr(L.TokenKind.IDENTIFIER),Ie=oe.data):et(L.TokenKind.LITERAL_STRING)?(oe=Dr(L.TokenKind.LITERAL_STRING),Ie=oe.stringValue(),Ie=Ie.substring(1,Ie.length()-1)):er(Q.startPos,"INVALID_BEAN_REFERENCE");var nr=De.BeanReference.create(He(oe),Ie);return Pr(nr),!0}return!1}function Un(){if(et(L.TokenKind.IDENTIFIER)){var Q=kr();if(Q.stringValue()!=="T")return!1;var oe=yr();if(et(L.TokenKind.RSQUARE))return Pr(O.PropertyReference.create(oe.stringValue(),He(oe))),!0;Dr(L.TokenKind.LPAREN);for(var Ie=Er(),nr=0;Mt(L.TokenKind.LSQUARE,!0);)Dr(L.TokenKind.RSQUARE),nr++;return Dr(L.TokenKind.RPAREN),Pr(Ze.TypeReference.create(He(Q),Ie,nr)),!0}return!1}function rr(){if(et(L.TokenKind.IDENTIFIER)){var Q=kr();return Q.stringValue().toLowerCase()!=="null"?!1:(yr(),Pr(F.NullLiteral.create(He(Q))),!0)}return!1}function Gn(Q){var oe=kr();if(!Mt(L.TokenKind.PROJECT,!0))return!1;var Ie=tt();return Dr(L.TokenKind.RSQUARE),Pr(Le.Projection.create(Q,He(oe),Ie)),!0}function Sn(){var Q=kr(),oe=[];if(!Mt(L.TokenKind.LCURLY,!0))return!1;var Ie=null,nr=kr();if(Mt(L.TokenKind.RCURLY,!0))Ie=Te.InlineList.create(At(Q.startPos,nr.endPos));else if(Mt(L.TokenKind.COLON,!0))nr=Dr(L.TokenKind.RCURLY),Ie=he.InlineMap.create(At(Q.startPos,nr.endPos));else{var $r=tt();if(et(L.TokenKind.RCURLY))oe.push($r),nr=Dr(L.TokenKind.RCURLY),Ie=Te.InlineList.create(At(Q.startPos,nr.endPos),oe);else if(Mt(L.TokenKind.COMMA,!0)){oe.push($r);do oe.push(tt());while(Mt(L.TokenKind.COMMA,!0));nr=Dr(L.TokenKind.RCURLY),Ie=Te.InlineList.create(He(Q.startPos,nr.endPos),oe)}else if(Mt(L.TokenKind.COLON,!0)){var ht=[];for(ht.push($r),ht.push(tt());Mt(L.TokenKind.COMMA,!0);)ht.push(tt()),Dr(L.TokenKind.COLON),ht.push(tt());nr=Dr(L.TokenKind.RCURLY),Ie=he.InlineMap.create(At(Q.startPos,nr.endPos),ht)}else er(Q.startPos,"OOD")}return Pr(Ie),!0}function Bn(){var Q=kr();if(!Mt(L.TokenKind.LSQUARE,!0))return!1;var oe=tt();return Dr(L.TokenKind.RSQUARE),Pr(x.Indexer.create(He(Q),oe)),!0}function gt(Q){var oe=kr();if(!Ct())return!1;yr();var Ie=tt();return Ie===null&&er(He(oe),"MISSING_SELECTION_EXPRESSION"),Dr(L.TokenKind.RSQUARE),oe.getKind()===L.TokenKind.SELECT_FIRST?Pr(Ee.Selection.create(Q,Ee.Selection.FIRST,He(oe),Ie)):oe.getKind()===L.TokenKind.SELECT_LAST?Pr(Ee.Selection.create(Q,Ee.Selection.LAST,He(oe),Ie)):Pr(Ee.Selection.create(Q,Ee.Selection.ALL,He(oe),Ie)),!0}function Er(){for(var Q=[],oe=kr();Tn(oe);)yr(),oe.kind!==L.TokenKind.DOT&&Q.push(ur.Identifier.create(oe.stringValue(),He(oe))),oe=kr();Q.length||(oe===null&&er(Rt.length(),"OOD"),er(oe.startPos,"NOT_EXPECTED_TOKEN","qualified ID",oe.getKind().toString().toLowerCase()));var Ie=At(Q[0].getStartPosition(),Q[Q.length-1].getEndPosition());return Dt.QualifiedIdentifier.create(Ie,Q)}function Tn(Q){if(Q===null||Q.kind===L.TokenKind.LITERAL_STRING)return!1;if(Q.kind===L.TokenKind.DOT||Q.kind===L.TokenKind.IDENTIFIER)return!0;var oe=Q.stringValue();return oe&&oe.length&&Sr.test(oe)}function Xa(Q){if(et(L.TokenKind.IDENTIFIER)){var oe=yr(),Ie=ot();return Ie===null?(Pr(O.PropertyReference.create(Q,oe.stringValue(),He(oe))),!0):(Pr(b.MethodReference.create(Q,oe.stringValue(),He(oe),Ie)),!0)}return!1}function Qa(){if(jt("new")){var Q=yr();if(et(L.TokenKind.RSQUARE))return Pr(O.PropertyReference.create(Q.stringValue(),He(Q))),!0;var oe=Er(),Ie=[];if(Ie.push(oe),et(L.TokenKind.LSQUARE)){for(var nr=[];Mt(L.TokenKind.LSQUARE,!0);)et(L.TokenKind.RSQUARE)?nr.push(null):nr.push(tt()),Dr(L.TokenKind.RSQUARE);Sn()&&Ie.push(Yt()),Pr(Hr.ConstructorReference.create(He(Q),nr,Ie))}else Ca(Ie),Pr(Hr.ConstructorReference.create(He(Q),Ie));return!0}return!1}function Pr(Q){Mn.push(Q)}function Yt(){return Mn.pop()}function La(){var Q=kr();if(Q===null)return!1;if(Q.getKind()===L.TokenKind.LITERAL_INT||Q.getKind()===L.TokenKind.LITERAL_LONG)Pr(W.NumberLiteral.create(parseInt(Q.stringValue(),10),He(Q)));else if(Q.getKind()===L.TokenKind.LITERAL_REAL||Q.getKind()===L.TokenKind.LITERAL_REAL_FLOAT)Pr(W.NumberLiteral.create(parseFloat(Q.stringValue()),He(Q)));else if(Q.getKind()===L.TokenKind.LITERAL_HEXINT||Q.getKind()===L.TokenKind.LITERAL_HEXLONG)Pr(W.NumberLiteral.create(parseInt(Q.stringValue(),16),He(Q)));else if(jt("true"))Pr(U.BooleanLiteral.create(!0,He(Q)));else if(jt("false"))Pr(U.BooleanLiteral.create(!1,He(Q)));else if(Q.getKind()===L.TokenKind.LITERAL_STRING)Pr(I.StringLiteral.create(Q.stringValue(),He(Q)));else return!1;return yr(),!0}function Jr(){if(et(L.TokenKind.LPAREN)){yr();var Q=tt();return Dr(L.TokenKind.RPAREN),Pr(Q),!0}else return!1}function Wn(){var Q=kr();if(Q===null)return null;if(Q.isNumericRelationalOperator())return Q;if(Q.isIdentifier()){var oe=Q.stringValue();if(oe.toLowerCase()==="instanceof")return Q.asInstanceOfToken();if(oe.toLowerCase()==="matches")return Q.asMatchesToken();if(oe.toLowerCase()==="between")return Q.asBetweenToken()}return null}function Dr(Q){var oe=yr();return oe===null&&er(Rt.length,"OOD"),oe.getKind()!==Q&&er(oe.startPos,"NOT_EXPECTED_TOKEN",Q.toString().toLowerCase(),oe.getKind().toString().toLowerCase()),oe}function et(Q){return Mt(Q,!1)}function Mt(Q,oe){if(!sr())return!1;var Ie=kr();return Ie.getKind()===Q?(oe&&Gt++,!0):Q===L.TokenKind.IDENTIFIER&&Ie.getKind().ordinal()>=L.TokenKind.DIV.ordinal()&&Ie.getKind().ordinal()<=L.TokenKind.NOT.ordinal()&&Ie.data!==null}function rn(){if(!sr())return!1;for(var Q=kr(),oe=Array.prototype.slice.call(arguments),Ie=0,nr=oe.length;Ie<nr;Ie+=1)if(Q.getKind()===oe[Ie])return!0;return!1}function jt(Q){if(!sr())return!1;var oe=kr();return oe.getKind()===L.TokenKind.IDENTIFIER&&oe.stringValue().toLowerCase()===Q.toLowerCase()}function Ct(){if(!sr())return!1;var Q=kr();return Q.getKind()===L.TokenKind.SELECT||Q.getKind()===L.TokenKind.SELECT_FIRST||Q.getKind()===L.TokenKind.SELECT_LAST}function sr(){return Gt<it.length}function yr(){return Gt>=en?null:it[Gt++]}function kr(){return Gt>=en?null:it[Gt]}function er(Q,oe,Ie,nr){throw Ie&&(oe+=`
Expected: `+Ie),nr&&(oe+=`
Actual: `+nr),{name:"InternalParseException",message:"Error occurred while attempting to parse expression '"+Rt+"' at position "+Q+". Message: "+oe}}function Rn(Q){return Q.getKind().hasPayload()?Q.stringValue():Q.getKind().toString().toLowerCase()}function zt(Q,oe,Ie){fn(Q,oe),kt(Q,Ie)}function fn(Q,oe){oe===null&&er(Q.startPos,"LEFT_OPERAND_PROBLEM")}function kt(Q,oe){oe===null&&er(Q.startPos,"RIGHT_OPERAND_PROBLEM")}function He(Q){return(Q.startPos<<16)+Q.endPos}function At(Q,oe){return(Q<<16)+oe}return{setConfiguration:ma,parse:ya}}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Tokenizer=void 0;var L=V(7),w=V(2),U=["DIV","EQ","GE","GT","LE","LT","MOD","NE","NOT"],W=[],I=1,F=2,j=4;function b(){var Y;for(Y="0".charCodeAt(0);Y<="9".charCodeAt(0);Y+=1)W[Y]|=I|F;for(Y="A".charCodeAt(0);Y<="F".charCodeAt(0);Y+=1)W[Y]|=F;for(Y="a".charCodeAt(0);Y<="f".charCodeAt(0);Y+=1)W[Y]|=F;for(Y="A".charCodeAt(0);Y<="Z".charCodeAt(0);Y+=1)W[Y]|=j;for(Y="a".charCodeAt(0);Y<="z".charCodeAt(0);Y+=1)W[Y]|=j}b();function O(Y){var x=Y,B=Y+"\0",$=B.length,K=0,Re=[];function Ce(){for(var ce;K<$;)if(ce=B[K],Le(ce))Oe();else switch(ce){case"+":Pe(w.TokenKind.INC)?dr(w.TokenKind.INC):xe(w.TokenKind.PLUS);break;case"_":Oe();break;case"-":Pe(w.TokenKind.DEC)?dr(w.TokenKind.DEC):xe(w.TokenKind.MINUS);break;case":":xe(w.TokenKind.COLON);break;case".":xe(w.TokenKind.DOT);break;case",":xe(w.TokenKind.COMMA);break;case"*":xe(w.TokenKind.STAR);break;case"/":xe(w.TokenKind.DIV);break;case"%":xe(w.TokenKind.MOD);break;case"(":xe(w.TokenKind.LPAREN);break;case")":xe(w.TokenKind.RPAREN);break;case"[":xe(w.TokenKind.LSQUARE);break;case"#":xe(w.TokenKind.HASH);break;case"]":xe(w.TokenKind.RSQUARE);break;case"{":xe(w.TokenKind.LCURLY);break;case"}":xe(w.TokenKind.RCURLY);break;case"@":xe(w.TokenKind.BEAN_REF);break;case"^":Pe(w.TokenKind.SELECT_FIRST)?dr(w.TokenKind.SELECT_FIRST):xe(w.TokenKind.POWER);break;case"!":Pe(w.TokenKind.NE)?dr(w.TokenKind.NE):Pe(w.TokenKind.PROJECT)?dr(w.TokenKind.PROJECT):xe(w.TokenKind.NOT);break;case"=":Pe(w.TokenKind.EQ)?dr(w.TokenKind.EQ):xe(w.TokenKind.ASSIGN);break;case"&":if(!Pe(w.TokenKind.SYMBOLIC_AND))throw{name:"SpelParseException",message:"Missing character '&' in expression ("+x+") at position "+K};dr(w.TokenKind.SYMBOLIC_AND);break;case"|":if(!Pe(w.TokenKind.SYMBOLIC_OR))throw{name:"SpelParseException",message:"Missing character '|' in expression ("+x+") at position "+K};dr(w.TokenKind.SYMBOLIC_OR);break;case"?":Pe(w.TokenKind.SELECT)?dr(w.TokenKind.SELECT):Pe(w.TokenKind.ELVIS)?dr(w.TokenKind.ELVIS):Pe(w.TokenKind.SAFE_NAVI)?dr(w.TokenKind.SAFE_NAVI):xe(w.TokenKind.QMARK);break;case"$":Pe(w.TokenKind.SELECT_LAST)?dr(w.TokenKind.SELECT_LAST):Oe();break;case">":Pe(w.TokenKind.GE)?dr(w.TokenKind.GE):xe(w.TokenKind.GT);break;case"<":Pe(w.TokenKind.LE)?dr(w.TokenKind.LE):xe(w.TokenKind.LT);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Ue(ce==="0");break;case" ":case"	":case"\r":case`
`:K+=1;break;case"'":ar();break;case'"':C();break;case"\0":K+=1;break;case"\\":throw{name:"SpelParseException",message:"Unexpected escape character in expression ("+x+") at position "+K};default:throw{name:"SpelParseException",message:"Cannot handle character '"+ce+"' in expression ("+x+") at position "+K}}}function ar(){for(var ce=K,Ze=!1,De;!Ze;)if(K+=1,De=B[K],De==="'"&&(B[K+1]==="'"?K+=1:Ze=!0),De.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating quoted string in expression ("+x+") at position "+K};K+=1,Re.push(new L.Token(w.TokenKind.LITERAL_STRING,We(ce,K),ce,K))}function C(){for(var ce=K,Ze=!1,De;!Ze;)if(K+=1,De=B[K],De==='"'&&(B[K+1]==='"'?K+=1:Ze=!0),De.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating double-quoted string in expression ("+x+") at position "+K};K+=1,Re.push(new L.Token(w.TokenKind.LITERAL_STRING,We(ce,K),ce,K))}function Ue(ce){var Ze=!1,De=K,ur=B[K+1],Dt=ur==="x"||ur==="X",Hr,lr,Tt,Sr;if(ce&&Dt){K=K+1;do K+=1;while(_e(B[K]));Mr("L","l")?(ye(We(De+2,K),!0,De,K),K+=1):ye(We(De+2,K),!1,De,K);return}do K+=1;while(Ee(B[K]));if(ur=B[K],ur==="."){Ze=!0,Hr=K;do K+=1;while(Ee(B[K]));if(K===Hr+1){K=Hr,N(We(De,K),!1,De,K);return}}if(lr=K,Mr("L","l")){if(Ze)throw{name:"SpelParseException",message:"Real cannot be long in expression ("+x+") at position "+K};N(We(De,lr),!0,De,lr),K+=1}else if(vr(B[K])){Ze=!0,K+=1,Tt=B[K],he(Tt)&&(K+=1);do K+=1;while(Ee(B[K]));Sr=!1,wr(B[K])?(Sr=!0,K+=1,lr=K):Te(B[K])&&(K+=1,lr=K),be(We(De,K),Sr,De,K)}else ur=B[K],Sr=!1,wr(ur)?(Ze=!0,Sr=!0,K+=1,lr=K):Te(ur)&&(Ze=!0,K+=1,lr=K),Ze?be(We(De,lr),Sr,De,lr):N(We(De,lr),!1,De,lr)}function Oe(){var ce=K,Ze,De,ur;do K+=1;while(Zr(B[K]));if(Ze=We(ce,K),(K-ce===2||K-ce===3)&&(De=Ze.toUpperCase(),ur=U.indexOf(De),ur>=0)){Wr(w.TokenKind.valueOf(De),ce,Ze);return}Re.push(new L.Token(w.TokenKind.IDENTIFIER,Ze.replace("\0",""),ce,K))}function N(ce,Ze,De,ur){Ze?Re.push(new L.Token(w.TokenKind.LITERAL_LONG,ce,De,ur)):Re.push(new L.Token(w.TokenKind.LITERAL_INT,ce,De,ur))}function ye(ce,Ze,De,ur){if(ce.length===0)throw Ze?{name:"SpelParseException",message:"Not a long in expression ("+x+") at position "+K}:{name:"SpelParseException",message:"Not an int in expression ("+x+") at position "+K};Ze?Re.push(new L.Token(w.TokenKind.LITERAL_HEXLONG,ce,De,ur)):Re.push(new L.Token(w.TokenKind.LITERAL_HEXINT,ce,De,ur))}function be(ce,Ze,De,ur){Ze?Re.push(new L.Token(w.TokenKind.LITERAL_REAL_FLOAT,ce,De,ur)):Re.push(new L.Token(w.TokenKind.LITERAL_REAL,ce,De,ur))}function We(ce,Ze){return B.substring(ce,Ze)}function Pe(ce){return ce.tokenChars.length===2&&B[K]===ce.tokenChars[0]?B[K+1]===ce.tokenChars[1]:!1}function xe(ce){Re.push(new L.Token(ce,null,K,K+1)),K+=1}function dr(ce){Re.push(new L.Token(ce,null,K,K+2)),K+=2}function Wr(ce,Ze,De){Re.push(new L.Token(ce,De,Ze,Ze+ce.getLength()))}function Zr(ce){return Le(ce)||Ee(ce)||ce==="_"||ce==="$"}function Mr(ce,Ze){var De=B[K];return De===ce||De===Ze}function vr(ce){return ce==="e"||ce==="E"}function wr(ce){return ce==="f"||ce==="F"}function Te(ce){return ce==="d"||ce==="D"}function he(ce){return ce==="+"||ce==="-"}function Ee(ce){return ce.charCodeAt(0)>255?!1:(W[ce.charCodeAt(0)]&I)!==0}function Le(ce){return ce.charCodeAt(0)>255?!1:(W[ce.charCodeAt(0)]&j)!==0}function _e(ce){return ce.charCodeAt(0)>255?!1:(W[ce.charCodeAt(0)]&F)!==0}return Ce(),Re}var M=m.Tokenizer={tokenize:O}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Token=void 0;var L=V(2);function w(U,W,I,F){this.kind=U,this.startPos=I,this.endPos=F,W&&(this.data=W)}w.prototype.getKind=function(){return this.kind},w.prototype.toString=function(){var U="[";return U+=this.kind.toString(),this.kind.hasPayload()&&(U+=":"+this.data),U+="]",U+="("+this.startPos+","+this.endPos+")",U},w.prototype.isIdentifier=function(){return this.kind===L.TokenKind.IDENTIFIER},w.prototype.isNumericRelationalOperator=function(){return this.kind===L.TokenKind.GT||this.kind===L.TokenKind.GE||this.kind===L.TokenKind.LT||this.kind===L.TokenKind.LE||this.kind===L.TokenKind.EQ||this.kind===L.TokenKind.NE},w.prototype.stringValue=function(){return this.data},w.prototype.asInstanceOfToken=function(){return new w(L.TokenKind.INSTANCEOF,this.startPos,this.endPos)},w.prototype.asMatchesToken=function(){return new w(L.TokenKind.MATCHES,this.startPos,this.endPos)},w.prototype.asBetweenToken=function(){return new w(L.TokenKind.BETWEEN,this.startPos,this.endPos)},w.prototype.getStartPosition=function(){return this.startPos},w.prototype.getEndPosition=function(){return this.endPos},m.Token=w},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.BooleanLiteral=void 0;var L=V(0);function w(W,I){var F=L.SpelNode.create("boolean",I);return F.getValue=function(){return W},F.setValue=function(j){return W=j},F}var U=m.BooleanLiteral={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.NumberLiteral=void 0;var L=V(0);function w(W,I){var F=L.SpelNode.create("number",I);return F.getValue=function(){return W},F.setValue=function(j){return W=j},F}var U=m.NumberLiteral={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.StringLiteral=void 0;var L=V(0);function w(W,I){var F=L.SpelNode.create("string",I);function j(b){return(b[0]==="'"&&b[b.length-1]==="'"||b[0]==='"'&&b[b.length-1]==='"')&&(b=b.substring(1,b.length-1)),b.replace(/''/g,"'").replace(/""/g,'"')}return W=j(W),F.getValue=function(){return W},F.setValue=function(b){return W=b},F}var U=m.StringLiteral={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.NullLiteral=void 0;var L=V(0);function w(W,I){var F=L.SpelNode.create("null",I);return F.getValue=function(){return null},F}var U=m.NullLiteral={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.FunctionReference=void 0;var L=V(0),w=V(1);function U(I,F,j){var b=L.SpelNode.create("function",F);return b.getRaw=function(){return{functionName:I,args:j}},b.getValue=function(O){var M=O.locals||{},Y=O.rootContext,x=[];if(j.forEach(function(B){var $=O.activeContext;O.activeContext=new w.Stack,O.activeContext.push(O.rootContext),x.push(B.getValue(O)),O.activeContext=$}),M[I])return M[I].apply(Y,x);throw{name:"FunctionDoesNotExistException",message:"Function '"+I+"' does not exist."}},b}var W=m.FunctionReference={create:U}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.MethodReference=void 0;var L=V(0),w=V(1);function U(I,F,j,b){var O=L.SpelNode.create("method",j);return O.getRaw=function(){return{methodName:F,args:b}},O.getValue=function(M){var Y=M.activeContext.peek(),x=[],B;if(!Y)throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+F+"' for an undefined context."};function $(K){if(K==null){if(I)return null;throw{name:"NullPointerException",message:"Method "+F+" does not exist."}}return K}if(b.forEach(function(K){var Re=M.activeContext;M.activeContext=new w.Stack,M.activeContext.push(M.rootContext),x.push(K.getValue(M)),M.activeContext=Re}),F.substr(0,3)==="get"&&!Y[F])return $(Y[F.charAt(3).toLowerCase()+F.substring(4)]);if(F.substr(0,3)==="set"&&!Y[F])return Y[F.charAt(3).toLowerCase()+F.substring(4)]=x[0];if(Array.isArray(Y)){if(F==="size")return Y.length;if(F==="contains")return Y.includes(x[0])}return B=$(Y[F]),B?B.apply(Y,x):null},O}var W=m.MethodReference={create:U}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.PropertyReference=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("property",F);return j.getRaw=function(){return I},j.getValue=function(b){var O=b.activeContext.peek();if(!O){if(W)return null;throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+I+"' for an undefined context."}}if(O[I]===void 0||O[I]===null){if(W)return null;if(I==="size"&&Array.isArray(O))return O.length;throw{name:"NullPointerException",message:"Property '"+I+"' does not exist."}}return O[I]},j.setValue=function(b,O){var M=O.activeContext.peek();if(!M)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+I+"' for an undefined context."};return M[I]=b},j.getName=function(){return I},j}var U=m.PropertyReference={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.VariableReference=void 0;var L=V(0);function w(W,I){var F=L.SpelNode.create("variable",I);return F.getRaw=function(){return W},F.getValue=function(j){var b=j.activeContext.peek(),O=j.locals;if(!b)throw{name:"ContextDoesNotExistException",message:"Attempting to look up variable '"+W+"' for an undefined context."};return W==="this"?b:W==="root"?j.rootContext:O[W]},F.setValue=function(j,b){var O=b.locals;return O[W]=j},F}var U=m.VariableReference={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.CompoundExpression=void 0;var L=V(0);function w(W,I){var F=L.SpelNode.create.apply(null,["compound",W].concat(I));function j(b){var O=F.getChildren().length,M;for(M=0;M<O;M+=1)F.getChildren()[M].getType()==="indexer"?b.activeContext.push(b.activeContext.peek()[F.getChildren()[M].getValue(b)]):b.activeContext.push(F.getChildren()[M].getValue(b));return function(){for(M=0;M<O;M+=1)b.activeContext.pop()}}return F.getValue=function(b){var O=b.activeContext.peek(),M;if(!O)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};var Y=j(b);return M=b.activeContext.peek(),Y(),M},F.setValue=function(b,O){var M=j(O),Y=F.getChildren().length;return O.activeContext.pop(),b=F.getChildren()[Y-1].setValue(b,O),O.activeContext.push(null),M(),b},F}var U=m.CompoundExpression={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Indexer=void 0;var L=V(0),w=V(1);function U(I,F){var j=L.SpelNode.create.apply(null,["indexer",I].concat(F));return j.getValue=function(b){var O=b.activeContext,M,Y=j.getChildren().length,x,B;if(b.activeContext=new w.Stack,b.activeContext.push(b.rootContext),M=b.activeContext.peek(),!M)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};for(x=0;x<Y;x+=1)b.activeContext.push(j.getChildren()[x].getValue(b));for(B=b.activeContext.peek(),x=0;x<Y;x+=1)b.activeContext.pop();return b.activeContext=O,B},j}var W=m.Indexer={create:U}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Assign=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("assign",W,I,F);return j.getValue=function(b){var O=b.activeContext.peek();if(!O)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+I.getValue(b)+"' for an undefined context."};return I.setValue(F.getValue(b),b)},j}var U=m.Assign={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpEQ=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-eq",W,I,F);return j.getValue=function(b){return I.getValue(b)===F.getValue(b)},j}var U=m.OpEQ={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpNE=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-ne",W,I,F);return j.getValue=function(b){return I.getValue(b)!==F.getValue(b)},j}var U=m.OpNE={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpGE=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-ge",W,I,F);return j.getValue=function(b){return I.getValue(b)>=F.getValue(b)},j}var U=m.OpGE={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpGT=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-gt",W,I,F);return j.getValue=function(b){return I.getValue(b)>F.getValue(b)},j}var U=m.OpGT={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpLE=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-le",W,I,F);return j.getValue=function(b){return I.getValue(b)<=F.getValue(b)},j}var U=m.OpLE={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpLT=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-lt",W,I,F);return j.getValue=function(b){return I.getValue(b)<F.getValue(b)},j}var U=m.OpLT={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpPlus=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-plus",W,I,F);return j.getValue=function(b){return F?I.getValue(b)+F.getValue(b):+I.getValue(b)},j}var U=m.OpPlus={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpMinus=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-minus",W,I,F);return j.getValue=function(b){return F?I.getValue(b)-F.getValue(b):-I.getValue(b)},j}var U=m.OpMinus={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpMultiply=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-multiply",W,I,F);return j.getValue=function(b){var O=I.getValue(b),M=F.getValue(b);if(typeof O=="number"&&typeof M=="number")return O*M;if(typeof O=="string"&&typeof M=="number"){for(var Y="",x=0;x<M;x+=1)Y+=O;return Y}return null},j}var U=m.OpMultiply={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpDivide=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-divide",W,I,F);return j.getValue=function(b){return I.getValue(b)/F.getValue(b)},j}var U=m.OpDivide={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpModulus=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-modulus",W,I,F);return j.getValue=function(b){return I.getValue(b)%F.getValue(b)},j}var U=m.OpModulus={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpPower=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-power",W,I,F);return j.getValue=function(b){return Math.pow(I.getValue(b),F.getValue(b))},j}var U=m.OpPower={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpInc=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-inc",W,F);return j.getValue=function(b){var O=F.getValue(b);return F.setValue(O+1,b),I?O:O+1},j}var U=m.OpInc={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpDec=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-dec",W,F);return j.getValue=function(b){var O=F.getValue(b);return F.setValue(O-1,b),I?O:O-1},j}var U=m.OpDec={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpNot=void 0;var L=V(0);function w(W,I){var F=L.SpelNode.create("op-not",W,I);return F.getValue=function(j){return!I.getValue(j)},F}var U=m.OpNot={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpAnd=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-and",W,I,F);return j.getValue=function(b){return!!I.getValue(b)&&!!F.getValue(b)},j}var U=m.OpAnd={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpOr=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("op-or",W,I,F);return j.getValue=function(b){return!!I.getValue(b)||!!F.getValue(b)},j}var U=m.OpOr={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpMatches=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("matches",W,I,F);return j.getValue=function(b){var O=I.getValue(b),M=F.getValue(b);try{var Y=new RegExp(M);return!!Y.exec(O)}catch(x){throw{name:"EvaluationException",message:x.toString()}}},j}var U=m.OpMatches={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Ternary=void 0;var L=V(0);function w(W,I,F,j){var b=L.SpelNode.create("ternary",W,I,F,j);return b.getValue=function(O){return I.getValue(O)?F.getValue(O):j.getValue(O)},b}var U=m.Ternary={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Elvis=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("elvis",W,I,F);return j.getValue=function(b){return I.getValue(b)!==null?I.getValue(b):F.getValue(b)},j}var U=m.Elvis={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.InlineList=void 0;var L=V(0);function w(W,I){var F=L.SpelNode.create("list",W),j=[].concat(I||[]);return F.getRaw=function(){return j},F.getValue=function(b){return j.map(function(O){return O.getValue(b)})},F}var U=m.InlineList={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.InlineMap=void 0;var L=V(0);function w(W,I){var F=L.SpelNode.create("map",W),j=[].concat(I||[]);return F.getValue=function(b){var O=!0,M=null,Y={};return j.forEach(function(x){O?x.getType()==="property"?M=x.getName():M=x.getValue(b):Y[M]=x.getValue(b),O=!O}),Y},F}var U=m.InlineMap={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Selection=void 0;var L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},w=V(0);function U(b,O,M){var Y=!1;return M.activeContext.push(b),Y=O.getValue(M),M.activeContext.pop(),Y}function W(b,O,M,Y){var x=b.filter(function(B){return U(B,M,Y)});switch(O){case"ALL":return x;case"FIRST":return x[0]||null;case"LAST":return x.length?x[x.length-1]:null}}function I(b,O,M,Y){var x={},B,$,K=[],Re={};for($ in b)b.hasOwnProperty($)&&(B={key:$,value:b[$]},U(B,M,Y)&&K.push(B));switch(O){case"ALL":return K.forEach(function(Ce){x[Ce.key]=Ce.value}),x;case"FIRST":return K.length?(Re[K[0].key]=K[0].value,Re):null;case"LAST":return K.length?(Re[K[K.length-1].key]=K[K.length-1].value,Re):null}K.forEach(function(Ce){x[Ce.key]=Ce.value})}function F(b,O,M,Y){var x=w.SpelNode.create("selection",M,Y);return x.getValue=function(B){var $=B.activeContext.peek();if($){if(Array.isArray($))return W($,O,Y,B);if((typeof $>"u"?"undefined":L($))==="object")return I($,O,Y,B)}return null},x}var j=m.Selection={create:F,FIRST:"FIRST",LAST:"LAST",ALL:"ALL"}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Projection=void 0;var L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},w=V(0);function U(F,j,b){return F.map(function(O){var M;return b.activeContext.push(O),M=j.getValue(b),b.activeContext.pop(),M})}function W(F,j,b){var O=w.SpelNode.create("projection",j,b);return O.getValue=function(M){var Y=M.activeContext.peek(),x=[],B;if(Array.isArray(Y))return U(Y,b,M);if((typeof Y>"u"?"undefined":L(Y))==="object"){for(B in Y)Y.hasOwnProperty(B)&&x.push(Y[B]);return U(x,b,M)}return null},O}var I=m.Projection={create:W}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpInstanceof=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("instanceof",W,I,F);return j.getValue=function(b){throw{name:"MethodNotImplementedException",message:"OpInstanceOf: Not implemented"}},j}var U=m.OpInstanceof={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.OpBetween=void 0;var L=V(0);function w(W,I,F){var j=L.SpelNode.create("between",W,I,F);return j.getValue=function(b){throw{name:"MethodNotImplementedException",message:"OpBetween: Not implemented"}},j}var U=m.OpBetween={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.TypeReference=void 0;var L=V(0);function w(W,j,F){var j=L.SpelNode.create("typeref",W,j);return j.getValue=function(b){throw{name:"MethodNotImplementedException",message:"TypeReference: Not implemented"}},j}var U=m.TypeReference={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.BeanReference=void 0;var L=V(0);function w(W,I){var F=L.SpelNode.create("beanref",W);return F.getValue=function(j){throw{name:"MethodNotImplementedException",message:"BeanReference: Not implemented"}},F}var U=m.BeanReference={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Identifier=void 0;var L=V(0);function w(W,I){var F=L.SpelNode.create("identifier",I);return F.getRaw=function(){return W},F.getValue=function(j){throw{name:"MethodNotImplementedException",message:"Identifier: Not implemented"}},F}var U=m.Identifier={create:w}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.QualifiedIdentifier=void 0;var L=V(0);function w(I){if(Array.isArray(I)){for(var F=0,j=Array(I.length);F<I.length;F++)j[F]=I[F];return j}else return Array.from(I)}function U(I,F){var j=L.SpelNode.create.apply(L.SpelNode,["qualifiedidentifier",I].concat(w(F)));return j.getRaw=function(){return F.map(function(b){return b.getRaw()})},j.getValue=function(b){throw{name:"MethodNotImplementedException",message:"QualifiedIdentifier: Not implemented"}},j}var W=m.QualifiedIdentifier={create:U}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.ConstructorReference=void 0;var L=V(0),w=V(1);function U(j){if(Array.isArray(j)){for(var b=0,O=Array(j.length);b<j.length;b++)O[b]=j[b];return O}else return Array.from(j)}function W(j){return Array.isArray(j)?j:Array.from(j)}function I(j,b,O){var M=O!==void 0,Y;M?Y=b.length&&b[0]&&b[0].getType()==="number"?b[0].getValue():null:(O=b,b=void 0);var x=O,B=W(x),$=B[0],K=B.slice(1),Re=L.SpelNode.create.apply(L.SpelNode,["constructorref",j].concat(U(O)));return Re.getRaw=function(){return Y},Re.getValue=function(Ce){if(M&&K.length<=1){var ar=[];return K.forEach(function(C){var Ue=Ce.activeContext;Ce.activeContext=new w.Stack,Ce.activeContext.push(Ce.rootContext),ar.push(C.getValue(Ce)),Ce.activeContext=Ue}),K.length===1?ar[0]:Y?new Array(Y):[]}throw{name:"MethodNotImplementedException",message:"ConstructorReference: Not implemented"}},Re}var F=m.ConstructorReference={create:I}},function(te,m,V){"use strict";Object.defineProperty(m,"__esModule",{value:!0});function L(U,W){var I={};return I.authentication=U||{},I.principal=W||{},I.hasRole=function(F){var j=!1;return!F||!I.authentication&&!Array.isArray(I.authentication.authorities)?!1:(I.authentication.authorities.forEach(function(b){b.authority.toLowerCase()===F.toLowerCase()&&(j=!0)}),j)},I.hasPermission=function(){var F=Array.prototype.slice.call(arguments);if(F.length===1)return I.hasRole(F[0])},I}var w=m.StandardContext={create:L}}])})},75700:(ge,te,m)=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var V=I(m(421)),L=I(m(25767)),w=I(m(48009)),U=I(m(70540)),W=I(m(423));function I(Y){return Y&&Y.__esModule?Y:{default:Y}}function F(Y,x){if(!(Y instanceof x))throw new TypeError("Cannot call a class as a function")}function j(Y,x){for(var B=0;B<x.length;B++){var $=x[B];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(Y,$.key,$)}}function b(Y,x,B){return x&&j(Y.prototype,x),B&&j(Y,B),Y}var O=function(x){return x.replace(/[\t ]+$/,"")},M=function(){function Y(x,B,$){F(this,Y),this.cfg=x||{},this.indentation=new w.default(this.cfg.indent),this.inlineBlock=new U.default,this.params=new W.default(this.cfg.params),this.tokenizer=B,this.tokenOverride=$,this.previousReservedWord={},this.tokens=[],this.index=0}return b(Y,[{key:"format",value:function(B){this.tokens=this.tokenizer.tokenize(B);var $=this.getFormattedQueryFromTokens();return $.trim()}},{key:"getFormattedQueryFromTokens",value:function(){var B=this,$="";return this.tokens.forEach(function(K,Re){B.index=Re,B.tokenOverride&&(K=B.tokenOverride(K,B.previousReservedWord)||K),K.type===L.default.WHITESPACE||(K.type===L.default.LINE_COMMENT?$=B.formatLineComment(K,$):K.type===L.default.BLOCK_COMMENT?$=B.formatBlockComment(K,$):K.type===L.default.RESERVED_TOP_LEVEL?($=B.formatTopLevelReservedWord(K,$),B.previousReservedWord=K):K.type===L.default.RESERVED_TOP_LEVEL_NO_INDENT?($=B.formatTopLevelReservedWordNoIndent(K,$),B.previousReservedWord=K):K.type===L.default.RESERVED_NEWLINE?($=B.formatNewlineReservedWord(K,$),B.previousReservedWord=K):K.type===L.default.RESERVED?($=B.formatWithSpaces(K,$),B.previousReservedWord=K):K.type===L.default.OPEN_PAREN?$=B.formatOpeningParentheses(K,$):K.type===L.default.CLOSE_PAREN?$=B.formatClosingParentheses(K,$):K.type===L.default.PLACEHOLDER?$=B.formatPlaceholder(K,$):K.value===","?$=B.formatComma(K,$):K.value===":"?$=B.formatWithSpaceAfter(K,$):K.value==="."?$=B.formatWithoutSpaces(K,$):K.value===";"?$=B.formatQuerySeparator(K,$):$=B.formatWithSpaces(K,$))}),$}},{key:"formatLineComment",value:function(B,$){return this.addNewline($+B.value)}},{key:"formatBlockComment",value:function(B,$){return this.addNewline(this.addNewline($)+this.indentComment(B.value))}},{key:"indentComment",value:function(B){return B.replace(/\n[\t ]*/g,`
`+this.indentation.getIndent()+" ")}},{key:"formatTopLevelReservedWordNoIndent",value:function(B,$){return this.indentation.decreaseTopLevel(),$=this.addNewline($)+this.equalizeWhitespace(this.formatReservedWord(B.value)),this.addNewline($)}},{key:"formatTopLevelReservedWord",value:function(B,$){return this.indentation.decreaseTopLevel(),$=this.addNewline($),this.indentation.increaseTopLevel(),$+=this.equalizeWhitespace(this.formatReservedWord(B.value)),this.addNewline($)}},{key:"formatNewlineReservedWord",value:function(B,$){return this.addNewline($)+this.equalizeWhitespace(this.formatReservedWord(B.value))+" "}},{key:"equalizeWhitespace",value:function(B){return B.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/g," ")}},{key:"formatOpeningParentheses",value:function(B,$){var K=[L.default.WHITESPACE,L.default.OPEN_PAREN,L.default.LINE_COMMENT];return(0,V.default)(K,this.previousToken().type)||($=O($)),$+=this.cfg.uppercase?B.value.toUpperCase():B.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),$=this.addNewline($)),$}},{key:"formatClosingParentheses",value:function(B,$){return B.value=this.cfg.uppercase?B.value.toUpperCase():B.value,this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(B,$)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(B,this.addNewline($)))}},{key:"formatPlaceholder",value:function(B,$){return $+this.params.get(B)+" "}},{key:"formatComma",value:function(B,$){return $=O($)+B.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?$:this.addNewline($)}},{key:"formatWithSpaceAfter",value:function(B,$){return O($)+B.value+" "}},{key:"formatWithoutSpaces",value:function(B,$){return O($)+B.value}},{key:"formatWithSpaces",value:function(B,$){var K=B.type==="reserved"?this.formatReservedWord(B.value):B.value;return $+K+" "}},{key:"formatReservedWord",value:function(B){return this.cfg.uppercase?B.toUpperCase():B}},{key:"formatQuerySeparator",value:function(B,$){return this.indentation.resetIndentation(),O($)+B.value+`
`.repeat(this.cfg.linesBetweenQueries||1)}},{key:"addNewline",value:function(B){return B=O(B),B.endsWith(`
`)||(B+=`
`),B+this.indentation.getIndent()}},{key:"previousToken",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.tokens[this.index-B]||{}}}]),Y}();te.default=M,ge.exports=te.default},48009:(ge,te,m)=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var V=w(m(52400)),L=w(m(57312));function w(O){return O&&O.__esModule?O:{default:O}}function U(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")}function W(O,M){for(var Y=0;Y<M.length;Y++){var x=M[Y];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(O,x.key,x)}}function I(O,M,Y){return M&&W(O.prototype,M),Y&&W(O,Y),O}var F="top-level",j="block-level",b=function(){function O(M){U(this,O),this.indent=M||"  ",this.indentTypes=[]}return I(O,[{key:"getIndent",value:function(){return(0,V.default)(this.indent,this.indentTypes.length)}},{key:"increaseTopLevel",value:function(){this.indentTypes.push(F)}},{key:"increaseBlockLevel",value:function(){this.indentTypes.push(j)}},{key:"decreaseTopLevel",value:function(){(0,L.default)(this.indentTypes)===F&&this.indentTypes.pop()}},{key:"decreaseBlockLevel",value:function(){for(;this.indentTypes.length>0;){var Y=this.indentTypes.pop();if(Y!==F)break}}},{key:"resetIndentation",value:function(){this.indentTypes=[]}}]),O}();te.default=b,ge.exports=te.default},70540:(ge,te,m)=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var V=L(m(25767));function L(j){return j&&j.__esModule?j:{default:j}}function w(j,b){if(!(j instanceof b))throw new TypeError("Cannot call a class as a function")}function U(j,b){for(var O=0;O<b.length;O++){var M=b[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(j,M.key,M)}}function W(j,b,O){return b&&U(j.prototype,b),O&&U(j,O),j}var I=50,F=function(){function j(){w(this,j),this.level=0}return W(j,[{key:"beginIfPossible",value:function(O,M){this.level===0&&this.isInlineBlock(O,M)?this.level=1:this.level>0?this.level++:this.level=0}},{key:"end",value:function(){this.level--}},{key:"isActive",value:function(){return this.level>0}},{key:"isInlineBlock",value:function(O,M){for(var Y=0,x=0,B=M;B<O.length;B++){var $=O[B];if(Y+=$.value.length,Y>I)return!1;if($.type===V.default.OPEN_PAREN)x++;else if($.type===V.default.CLOSE_PAREN&&(x--,x===0))return!0;if(this.isForbiddenToken($))return!1}return!1}},{key:"isForbiddenToken",value:function(O){var M=O.type,Y=O.value;return M===V.default.RESERVED_TOP_LEVEL||M===V.default.RESERVED_NEWLINE||M===V.default.COMMENT||M===V.default.BLOCK_COMMENT||Y===";"}}]),j}();te.default=F,ge.exports=te.default},423:(ge,te)=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;function m(U,W){if(!(U instanceof W))throw new TypeError("Cannot call a class as a function")}function V(U,W){for(var I=0;I<W.length;I++){var F=W[I];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(U,F.key,F)}}function L(U,W,I){return W&&V(U.prototype,W),I&&V(U,I),U}var w=function(){function U(W){m(this,U),this.params=W,this.index=0}return L(U,[{key:"get",value:function(I){var F=I.key,j=I.value;return this.params?F?this.params[F]:this.params[this.index++]:j}}]),U}();te.default=w,ge.exports=te.default},21723:(ge,te,m)=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var V=U(m(94818)),L=U(m(85222)),w=U(m(25767));function U(b){return b&&b.__esModule?b:{default:b}}function W(b,O){if(!(b instanceof O))throw new TypeError("Cannot call a class as a function")}function I(b,O){for(var M=0;M<O.length;M++){var Y=O[M];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(b,Y.key,Y)}}function F(b,O,M){return O&&I(b.prototype,O),M&&I(b,M),b}var j=function(){function b(O){W(this,b),this.WHITESPACE_REGEX=/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)/,this.NUMBER_REGEX=/^((\x2D[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?[0-9]+(\.[0-9]+)?|0x[0-9A-Fa-f]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|\x2D>>|\x2D>|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|:=|(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/,this.BLOCK_COMMENT_REGEX=/^(\/\*(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(O.lineCommentTypes),this.RESERVED_TOP_LEVEL_REGEX=this.createReservedWordRegex(O.reservedTopLevelWords),this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX=this.createReservedWordRegex(O.reservedTopLevelWordsNoIndent),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(O.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(O.reservedWords),this.WORD_REGEX=this.createWordRegex(O.specialWordChars),this.STRING_REGEX=this.createStringRegex(O.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(O.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(O.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(O.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(O.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(O.namedPlaceholderTypes,this.createStringPattern(O.stringTypes))}return F(b,[{key:"createLineCommentRegex",value:function(M){return new RegExp("^((?:".concat(M.map(function(Y){return(0,L.default)(Y)}).join("|"),`).*?(?:\r
|\r|
|$))`),"u")}},{key:"createReservedWordRegex",value:function(M){var Y=M.join("|").replace(/ /g,"\\s+");return new RegExp("^(".concat(Y,")\\b"),"iu")}},{key:"createWordRegex",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return new RegExp("^([\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}".concat(M.join(""),"]+)"),"u")}},{key:"createStringRegex",value:function(M){return new RegExp("^("+this.createStringPattern(M)+")","u")}},{key:"createStringPattern",value:function(M){var Y={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return M.map(function(x){return Y[x]}).join("|")}},{key:"createParenRegex",value:function(M){var Y=this;return new RegExp("^("+M.map(function(x){return Y.escapeParen(x)}).join("|")+")","iu")}},{key:"escapeParen",value:function(M){return M.length===1?(0,L.default)(M):"\\b"+M+"\\b"}},{key:"createPlaceholderRegex",value:function(M,Y){if((0,V.default)(M))return!1;var x=M.map(L.default).join("|");return new RegExp("^((?:".concat(x,")(?:").concat(Y,"))"),"u")}},{key:"tokenize",value:function(M){if(!M)return[];for(var Y=[],x;M.length;)x=this.getNextToken(M,x),M=M.substring(x.value.length),Y.push(x);return Y}},{key:"getNextToken",value:function(M,Y){return this.getWhitespaceToken(M)||this.getCommentToken(M)||this.getStringToken(M)||this.getOpenParenToken(M)||this.getCloseParenToken(M)||this.getPlaceholderToken(M)||this.getNumberToken(M)||this.getReservedWordToken(M,Y)||this.getWordToken(M)||this.getOperatorToken(M)}},{key:"getWhitespaceToken",value:function(M){return this.getTokenOnFirstMatch({input:M,type:w.default.WHITESPACE,regex:this.WHITESPACE_REGEX})}},{key:"getCommentToken",value:function(M){return this.getLineCommentToken(M)||this.getBlockCommentToken(M)}},{key:"getLineCommentToken",value:function(M){return this.getTokenOnFirstMatch({input:M,type:w.default.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}},{key:"getBlockCommentToken",value:function(M){return this.getTokenOnFirstMatch({input:M,type:w.default.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}},{key:"getStringToken",value:function(M){return this.getTokenOnFirstMatch({input:M,type:w.default.STRING,regex:this.STRING_REGEX})}},{key:"getOpenParenToken",value:function(M){return this.getTokenOnFirstMatch({input:M,type:w.default.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}},{key:"getCloseParenToken",value:function(M){return this.getTokenOnFirstMatch({input:M,type:w.default.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}},{key:"getPlaceholderToken",value:function(M){return this.getIdentNamedPlaceholderToken(M)||this.getStringNamedPlaceholderToken(M)||this.getIndexedPlaceholderToken(M)}},{key:"getIdentNamedPlaceholderToken",value:function(M){return this.getPlaceholderTokenWithKey({input:M,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(x){return x.slice(1)}})}},{key:"getStringNamedPlaceholderToken",value:function(M){var Y=this;return this.getPlaceholderTokenWithKey({input:M,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(B){return Y.getEscapedPlaceholderKey({key:B.slice(2,-1),quoteChar:B.slice(-1)})}})}},{key:"getIndexedPlaceholderToken",value:function(M){return this.getPlaceholderTokenWithKey({input:M,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(x){return x.slice(1)}})}},{key:"getPlaceholderTokenWithKey",value:function(M){var Y=M.input,x=M.regex,B=M.parseKey,$=this.getTokenOnFirstMatch({input:Y,regex:x,type:w.default.PLACEHOLDER});return $&&($.key=B($.value)),$}},{key:"getEscapedPlaceholderKey",value:function(M){var Y=M.key,x=M.quoteChar;return Y.replace(new RegExp((0,L.default)("\\"+x),"gu"),x)}},{key:"getNumberToken",value:function(M){return this.getTokenOnFirstMatch({input:M,type:w.default.NUMBER,regex:this.NUMBER_REGEX})}},{key:"getOperatorToken",value:function(M){return this.getTokenOnFirstMatch({input:M,type:w.default.OPERATOR,regex:this.OPERATOR_REGEX})}},{key:"getReservedWordToken",value:function(M,Y){if(!(Y&&Y.value&&Y.value==="."))return this.getTopLevelReservedToken(M)||this.getNewlineReservedToken(M)||this.getTopLevelReservedTokenNoIndent(M)||this.getPlainReservedToken(M)}},{key:"getTopLevelReservedToken",value:function(M){return this.getTokenOnFirstMatch({input:M,type:w.default.RESERVED_TOP_LEVEL,regex:this.RESERVED_TOP_LEVEL_REGEX})}},{key:"getNewlineReservedToken",value:function(M){return this.getTokenOnFirstMatch({input:M,type:w.default.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}},{key:"getTopLevelReservedTokenNoIndent",value:function(M){return this.getTokenOnFirstMatch({input:M,type:w.default.RESERVED_TOP_LEVEL_NO_INDENT,regex:this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX})}},{key:"getPlainReservedToken",value:function(M){return this.getTokenOnFirstMatch({input:M,type:w.default.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}},{key:"getWordToken",value:function(M){return this.getTokenOnFirstMatch({input:M,type:w.default.WORD,regex:this.WORD_REGEX})}},{key:"getTokenOnFirstMatch",value:function(M){var Y=M.input,x=M.type,B=M.regex,$=Y.match(B);if($)return{type:x,value:$[1]}}}]),b}();te.default=j,ge.exports=te.default},25767:(ge,te)=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var m={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOP_LEVEL:"reserved-top-level",RESERVED_TOP_LEVEL_NO_INDENT:"reserved-top-level-no-indent",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"};te.default=m,ge.exports=te.default},26689:(ge,te,m)=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var V=w(m(75700)),L=w(m(21723));function w(x){return x&&x.__esModule?x:{default:x}}function U(x,B){if(!(x instanceof B))throw new TypeError("Cannot call a class as a function")}function W(x,B){for(var $=0;$<B.length;$++){var K=B[$];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(x,K.key,K)}}function I(x,B,$){return B&&W(x.prototype,B),$&&W(x,$),x}var F=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],j=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],b=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],O=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],M,Y=function(){function x(B){U(this,x),this.cfg=B}return I(x,[{key:"format",value:function($){return M||(M=new L.default({reservedWords:F,reservedTopLevelWords:j,reservedNewlineWords:O,reservedTopLevelWordsNoIndent:b,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),new V.default(this.cfg,M).format($)}}]),x}();te.default=Y,ge.exports=te.default},66259:(ge,te,m)=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var V=w(m(75700)),L=w(m(21723));function w(x){return x&&x.__esModule?x:{default:x}}function U(x,B){if(!(x instanceof B))throw new TypeError("Cannot call a class as a function")}function W(x,B){for(var $=0;$<B.length;$++){var K=B[$];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(x,K.key,K)}}function I(x,B,$){return B&&W(x.prototype,B),$&&W(x,$),x}var F=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],j=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],b=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],O=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],M,Y=function(){function x(B){U(this,x),this.cfg=B}return I(x,[{key:"format",value:function($){return M||(M=new L.default({reservedWords:F,reservedTopLevelWords:j,reservedNewlineWords:O,reservedTopLevelWordsNoIndent:b,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),new V.default(this.cfg,M).format($)}}]),x}();te.default=Y,ge.exports=te.default},82116:(ge,te,m)=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var V=U(m(75700)),L=U(m(21723)),w=U(m(25767));function U($){return $&&$.__esModule?$:{default:$}}function W($,K){if(!($ instanceof K))throw new TypeError("Cannot call a class as a function")}function I($,K){for(var Re=0;Re<K.length;Re++){var Ce=K[Re];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty($,Ce.key,Ce)}}function F($,K,Re){return K&&I($.prototype,K),Re&&I($,Re),$}var j=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BREADTH","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DEPTH","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","END","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SEARCH","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],b=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UPDATE","VALUES","WHERE"],O=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],M=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],Y=function(K,Re){if(K.type===w.default.RESERVED_TOP_LEVEL&&K.value==="SET"&&Re.value==="BY")return K.type=w.default.RESERVED,K},x,B=function(){function $(K){W(this,$),this.cfg=K}return F($,[{key:"format",value:function(Re){return x||(x=new L.default({reservedWords:j,reservedTopLevelWords:b,reservedNewlineWords:M,reservedTopLevelWordsNoIndent:O,stringTypes:['""',"N''","''","``"],openParens:["(","CASE","BEGIN"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new V.default(this.cfg,x,Y).format(Re)}}]),$}();te.default=B,ge.exports=te.default},96914:(ge,te,m)=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var V=w(m(75700)),L=w(m(21723));function w(x){return x&&x.__esModule?x:{default:x}}function U(x,B){if(!(x instanceof B))throw new TypeError("Cannot call a class as a function")}function W(x,B){for(var $=0;$<B.length;$++){var K=B[$];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(x,K.key,K)}}function I(x,B,$){return B&&W(x.prototype,B),$&&W(x,$),x}var F=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],j=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],b=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],O=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],M,Y=function(){function x(B){U(this,x),this.cfg=B}return I(x,[{key:"format",value:function($){return M||(M=new L.default({reservedWords:F,reservedTopLevelWords:j,reservedNewlineWords:O,reservedTopLevelWordsNoIndent:b,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),new V.default(this.cfg,M).format($)}}]),x}();te.default=Y,ge.exports=te.default},4662:(ge,te,m)=>{"use strict";var V;V={value:!0},te.ZP=V=void 0;var L=I(m(26689)),w=I(m(66259)),U=I(m(82116)),W=I(m(96914));function I(b){return b&&b.__esModule?b:{default:b}}var F=function(O){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(M.language){case"db2":return new L.default(M).format(O);case"n1ql":return new w.default(M).format(O);case"pl/sql":return new U.default(M).format(O);case"sql":case void 0:return new W.default(M).format(O);default:throw Error("Unsupported SQL dialect: ".concat(M.language))}};V=F;var j={format:F};te.ZP=j},6804:(ge,te,m)=>{ge.exports=m(88650)},88650:(ge,te,m)=>{var V=m(58228).Buffer,L=te,w=/`/g,U=/\./g,W=/[\0\b\t\n\r\x1a\"\'\\]/g,I={"\0":"\\0","\b":"\\b","	":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};L.escapeId=function(M,Y){if(Array.isArray(M)){for(var x="",B=0;B<M.length;B++)x+=(B===0?"":", ")+L.escapeId(M[B],Y);return x}else return Y?"`"+String(M).replace(w,"``")+"`":"`"+String(M).replace(w,"``").replace(U,"`.`")+"`"},L.escape=function(M,Y,x){if(M==null)return"NULL";switch(typeof M){case"boolean":return M?"true":"false";case"number":return M+"";case"object":return Object.prototype.toString.call(M)==="[object Date]"?L.dateToString(M,x||"local"):Array.isArray(M)?L.arrayToList(M,x):V.isBuffer(M)?L.bufferToString(M):typeof M.toSqlString=="function"?String(M.toSqlString()):Y?F(M.toString()):L.objectToValues(M,x);default:return F(M)}},L.arrayToList=function(M,Y){for(var x="",B=0;B<M.length;B++){var $=M[B];Array.isArray($)?x+=(B===0?"":", ")+"("+L.arrayToList($,Y)+")":x+=(B===0?"":", ")+L.escape($,!0,Y)}return x},L.format=function(M,Y,x,B){if(Y==null)return M;Array.isArray(Y)||(Y=[Y]);for(var $=0,K=/\?+/g,Re="",Ce=0,ar;Ce<Y.length&&(ar=K.exec(M));){var C=ar[0].length;if(!(C>2)){var Ue=C===2?L.escapeId(Y[Ce]):L.escape(Y[Ce],x,B);Re+=M.slice($,ar.index)+Ue,$=K.lastIndex,Ce++}}return $===0?M:$<M.length?Re+M.slice($):Re},L.dateToString=function(M,Y){var x=new Date(M);if(isNaN(x.getTime()))return"NULL";var B,$,K,Re,Ce,ar,C;if(Y==="local")B=x.getFullYear(),$=x.getMonth()+1,K=x.getDate(),Re=x.getHours(),Ce=x.getMinutes(),ar=x.getSeconds(),C=x.getMilliseconds();else{var Ue=b(Y);Ue!==!1&&Ue!==0&&x.setTime(x.getTime()+Ue*6e4),B=x.getUTCFullYear(),$=x.getUTCMonth()+1,K=x.getUTCDate(),Re=x.getUTCHours(),Ce=x.getUTCMinutes(),ar=x.getUTCSeconds(),C=x.getUTCMilliseconds()}var Oe=j(B,4)+"-"+j($,2)+"-"+j(K,2)+" "+j(Re,2)+":"+j(Ce,2)+":"+j(ar,2)+"."+j(C,3);return F(Oe)},L.bufferToString=function(M){return"X"+F(M.toString("hex"))},L.objectToValues=function(M,Y){var x="";for(var B in M){var $=M[B];typeof $!="function"&&(x+=(x.length===0?"":", ")+L.escapeId(B)+" = "+L.escape($,!0,Y))}return x},L.raw=function(M){if(typeof M!="string")throw new TypeError("argument sql must be a string");return{toSqlString:function(){return M}}};function F(O){for(var M=W.lastIndex=0,Y="",x;x=W.exec(O);)Y+=O.slice(M,x.index)+I[x[0]],M=W.lastIndex;return M===0?"'"+O+"'":M<O.length?"'"+Y+O.slice(M)+"'":"'"+Y+"'"}function j(O,M){for(O=O.toString();O.length<M;)O="0"+O;return O}function b(O){if(O==="Z")return 0;var M=O.match(/([\+\-\s])(\d\d):?(\d\d)?/);return M?(M[1]==="-"?-1:1)*(parseInt(M[2],10)+(M[3]?parseInt(M[3],10):0)/60)*60:!1}},82441:(ge,te,m)=>{var V=m(7818).default;function L(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ge.exports=L=function(){return U},ge.exports.__esModule=!0,ge.exports.default=ge.exports;var w,U={},W=Object.prototype,I=W.hasOwnProperty,F=Object.defineProperty||function(Te,he,Ee){Te[he]=Ee.value},j=typeof Symbol=="function"?Symbol:{},b=j.iterator||"@@iterator",O=j.asyncIterator||"@@asyncIterator",M=j.toStringTag||"@@toStringTag";function Y(Te,he,Ee){return Object.defineProperty(Te,he,{value:Ee,enumerable:!0,configurable:!0,writable:!0}),Te[he]}try{Y({},"")}catch{Y=function(Ee,Le,_e){return Ee[Le]=_e}}function x(Te,he,Ee,Le){var _e=he&&he.prototype instanceof C?he:C,ce=Object.create(_e.prototype),Ze=new vr(Le||[]);return F(ce,"_invoke",{value:dr(Te,Ee,Ze)}),ce}function B(Te,he,Ee){try{return{type:"normal",arg:Te.call(he,Ee)}}catch(Le){return{type:"throw",arg:Le}}}U.wrap=x;var $="suspendedStart",K="suspendedYield",Re="executing",Ce="completed",ar={};function C(){}function Ue(){}function Oe(){}var N={};Y(N,b,function(){return this});var ye=Object.getPrototypeOf,be=ye&&ye(ye(wr([])));be&&be!==W&&I.call(be,b)&&(N=be);var We=Oe.prototype=C.prototype=Object.create(N);function Pe(Te){["next","throw","return"].forEach(function(he){Y(Te,he,function(Ee){return this._invoke(he,Ee)})})}function xe(Te,he){function Ee(_e,ce,Ze,De){var ur=B(Te[_e],Te,ce);if(ur.type!=="throw"){var Dt=ur.arg,Hr=Dt.value;return Hr&&V(Hr)=="object"&&I.call(Hr,"__await")?he.resolve(Hr.__await).then(function(lr){Ee("next",lr,Ze,De)},function(lr){Ee("throw",lr,Ze,De)}):he.resolve(Hr).then(function(lr){Dt.value=lr,Ze(Dt)},function(lr){return Ee("throw",lr,Ze,De)})}De(ur.arg)}var Le;F(this,"_invoke",{value:function(ce,Ze){function De(){return new he(function(ur,Dt){Ee(ce,Ze,ur,Dt)})}return Le=Le?Le.then(De,De):De()}})}function dr(Te,he,Ee){var Le=$;return function(_e,ce){if(Le===Re)throw new Error("Generator is already running");if(Le===Ce){if(_e==="throw")throw ce;return{value:w,done:!0}}for(Ee.method=_e,Ee.arg=ce;;){var Ze=Ee.delegate;if(Ze){var De=Wr(Ze,Ee);if(De){if(De===ar)continue;return De}}if(Ee.method==="next")Ee.sent=Ee._sent=Ee.arg;else if(Ee.method==="throw"){if(Le===$)throw Le=Ce,Ee.arg;Ee.dispatchException(Ee.arg)}else Ee.method==="return"&&Ee.abrupt("return",Ee.arg);Le=Re;var ur=B(Te,he,Ee);if(ur.type==="normal"){if(Le=Ee.done?Ce:K,ur.arg===ar)continue;return{value:ur.arg,done:Ee.done}}ur.type==="throw"&&(Le=Ce,Ee.method="throw",Ee.arg=ur.arg)}}}function Wr(Te,he){var Ee=he.method,Le=Te.iterator[Ee];if(Le===w)return he.delegate=null,Ee==="throw"&&Te.iterator.return&&(he.method="return",he.arg=w,Wr(Te,he),he.method==="throw")||Ee!=="return"&&(he.method="throw",he.arg=new TypeError("The iterator does not provide a '"+Ee+"' method")),ar;var _e=B(Le,Te.iterator,he.arg);if(_e.type==="throw")return he.method="throw",he.arg=_e.arg,he.delegate=null,ar;var ce=_e.arg;return ce?ce.done?(he[Te.resultName]=ce.value,he.next=Te.nextLoc,he.method!=="return"&&(he.method="next",he.arg=w),he.delegate=null,ar):ce:(he.method="throw",he.arg=new TypeError("iterator result is not an object"),he.delegate=null,ar)}function Zr(Te){var he={tryLoc:Te[0]};1 in Te&&(he.catchLoc=Te[1]),2 in Te&&(he.finallyLoc=Te[2],he.afterLoc=Te[3]),this.tryEntries.push(he)}function Mr(Te){var he=Te.completion||{};he.type="normal",delete he.arg,Te.completion=he}function vr(Te){this.tryEntries=[{tryLoc:"root"}],Te.forEach(Zr,this),this.reset(!0)}function wr(Te){if(Te||Te===""){var he=Te[b];if(he)return he.call(Te);if(typeof Te.next=="function")return Te;if(!isNaN(Te.length)){var Ee=-1,Le=function _e(){for(;++Ee<Te.length;)if(I.call(Te,Ee))return _e.value=Te[Ee],_e.done=!1,_e;return _e.value=w,_e.done=!0,_e};return Le.next=Le}}throw new TypeError(V(Te)+" is not iterable")}return Ue.prototype=Oe,F(We,"constructor",{value:Oe,configurable:!0}),F(Oe,"constructor",{value:Ue,configurable:!0}),Ue.displayName=Y(Oe,M,"GeneratorFunction"),U.isGeneratorFunction=function(Te){var he=typeof Te=="function"&&Te.constructor;return!!he&&(he===Ue||(he.displayName||he.name)==="GeneratorFunction")},U.mark=function(Te){return Object.setPrototypeOf?Object.setPrototypeOf(Te,Oe):(Te.__proto__=Oe,Y(Te,M,"GeneratorFunction")),Te.prototype=Object.create(We),Te},U.awrap=function(Te){return{__await:Te}},Pe(xe.prototype),Y(xe.prototype,O,function(){return this}),U.AsyncIterator=xe,U.async=function(Te,he,Ee,Le,_e){_e===void 0&&(_e=Promise);var ce=new xe(x(Te,he,Ee,Le),_e);return U.isGeneratorFunction(he)?ce:ce.next().then(function(Ze){return Ze.done?Ze.value:ce.next()})},Pe(We),Y(We,M,"Generator"),Y(We,b,function(){return this}),Y(We,"toString",function(){return"[object Generator]"}),U.keys=function(Te){var he=Object(Te),Ee=[];for(var Le in he)Ee.push(Le);return Ee.reverse(),function _e(){for(;Ee.length;){var ce=Ee.pop();if(ce in he)return _e.value=ce,_e.done=!1,_e}return _e.done=!0,_e}},U.values=wr,vr.prototype={constructor:vr,reset:function(he){if(this.prev=0,this.next=0,this.sent=this._sent=w,this.done=!1,this.delegate=null,this.method="next",this.arg=w,this.tryEntries.forEach(Mr),!he)for(var Ee in this)Ee.charAt(0)==="t"&&I.call(this,Ee)&&!isNaN(+Ee.slice(1))&&(this[Ee]=w)},stop:function(){this.done=!0;var he=this.tryEntries[0].completion;if(he.type==="throw")throw he.arg;return this.rval},dispatchException:function(he){if(this.done)throw he;var Ee=this;function Le(Dt,Hr){return Ze.type="throw",Ze.arg=he,Ee.next=Dt,Hr&&(Ee.method="next",Ee.arg=w),!!Hr}for(var _e=this.tryEntries.length-1;_e>=0;--_e){var ce=this.tryEntries[_e],Ze=ce.completion;if(ce.tryLoc==="root")return Le("end");if(ce.tryLoc<=this.prev){var De=I.call(ce,"catchLoc"),ur=I.call(ce,"finallyLoc");if(De&&ur){if(this.prev<ce.catchLoc)return Le(ce.catchLoc,!0);if(this.prev<ce.finallyLoc)return Le(ce.finallyLoc)}else if(De){if(this.prev<ce.catchLoc)return Le(ce.catchLoc,!0)}else{if(!ur)throw new Error("try statement without catch or finally");if(this.prev<ce.finallyLoc)return Le(ce.finallyLoc)}}}},abrupt:function(he,Ee){for(var Le=this.tryEntries.length-1;Le>=0;--Le){var _e=this.tryEntries[Le];if(_e.tryLoc<=this.prev&&I.call(_e,"finallyLoc")&&this.prev<_e.finallyLoc){var ce=_e;break}}ce&&(he==="break"||he==="continue")&&ce.tryLoc<=Ee&&Ee<=ce.finallyLoc&&(ce=null);var Ze=ce?ce.completion:{};return Ze.type=he,Ze.arg=Ee,ce?(this.method="next",this.next=ce.finallyLoc,ar):this.complete(Ze)},complete:function(he,Ee){if(he.type==="throw")throw he.arg;return he.type==="break"||he.type==="continue"?this.next=he.arg:he.type==="return"?(this.rval=this.arg=he.arg,this.method="return",this.next="end"):he.type==="normal"&&Ee&&(this.next=Ee),ar},finish:function(he){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var Le=this.tryEntries[Ee];if(Le.finallyLoc===he)return this.complete(Le.completion,Le.afterLoc),Mr(Le),ar}},catch:function(he){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var Le=this.tryEntries[Ee];if(Le.tryLoc===he){var _e=Le.completion;if(_e.type==="throw"){var ce=_e.arg;Mr(Le)}return ce}}throw new Error("illegal catch attempt")},delegateYield:function(he,Ee,Le){return this.delegate={iterator:wr(he),resultName:Ee,nextLoc:Le},this.method==="next"&&(this.arg=w),ar}},U}ge.exports=L,ge.exports.__esModule=!0,ge.exports.default=ge.exports},7818:ge=>{function te(m){"@babel/helpers - typeof";return ge.exports=te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},ge.exports.__esModule=!0,ge.exports.default=ge.exports,te(m)}ge.exports=te,ge.exports.__esModule=!0,ge.exports.default=ge.exports},80341:(ge,te,m)=>{var V=m(82441)();ge.exports=V;try{regeneratorRuntime=V}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=V:Function("r","regeneratorRuntime = r")(V)}}}]);

//# sourceMappingURL=4755.0c5666aaa82227b40088.js.map