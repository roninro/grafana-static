{"version":3,"file":"SnapshotListPage.78b4d17150d86a2bd62c.js","mappings":"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","sources":["webpack://grafana/./public/app/features/manage-dashboards/components/SnapshotListTable.tsx","webpack://grafana/./public/app/features/manage-dashboards/SnapshotListPage.tsx","webpack://grafana/./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/lib/useAsync.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\n\nimport { getBackendSrv, config } from '@grafana/runtime';\nimport { ConfirmModal, Button, LinkButton } from '@grafana/ui';\nimport { Trans } from 'app/core/internationalization';\n\nimport { Snapshot } from '../types';\n\nexport function getSnapshots() {\n  return getBackendSrv()\n    .get('/api/dashboard/snapshots')\n    .then((result: Snapshot[]) => {\n      return result.map((snapshot) => ({\n        ...snapshot,\n        url: `${config.appUrl}dashboard/snapshot/${snapshot.key}`,\n      }));\n    });\n}\nexport const SnapshotListTable = () => {\n  const [snapshots, setSnapshots] = useState<Snapshot[]>([]);\n  const [removeSnapshot, setRemoveSnapshot] = useState<Snapshot | undefined>();\n  useAsync(async () => {\n    const response = await getSnapshots();\n    setSnapshots(response);\n  }, [setSnapshots]);\n\n  const doRemoveSnapshot = useCallback(\n    async (snapshot: Snapshot) => {\n      const filteredSnapshots = snapshots.filter((ss) => ss.key !== snapshot.key);\n      setSnapshots(filteredSnapshots);\n      await getBackendSrv()\n        .delete(`/api/snapshots/${snapshot.key}`)\n        .catch(() => {\n          setSnapshots(snapshots);\n        });\n    },\n    [snapshots]\n  );\n\n  return (\n    <div>\n      <table className=\"filter-table\">\n        <thead>\n          <tr>\n            <th>\n              <strong>\n                <Trans i18nKey=\"snapshot.name-column-header\">Name</Trans>\n              </strong>\n            </th>\n            <th>\n              <strong>\n                <Trans i18nKey=\"snapshot.url-column-header\">Snapshot url</Trans>\n              </strong>\n            </th>\n            <th style={{ width: '70px' }}></th>\n            <th style={{ width: '30px' }}></th>\n            <th style={{ width: '25px' }}></th>\n          </tr>\n        </thead>\n        <tbody>\n          {snapshots.map((snapshot) => {\n            const url = snapshot.externalUrl || snapshot.url;\n            return (\n              <tr key={snapshot.key}>\n                <td>\n                  <a href={url}>{snapshot.name}</a>\n                </td>\n                <td>\n                  <a href={url}>{url}</a>\n                </td>\n                <td>\n                  {snapshot.external && (\n                    <span className=\"query-keyword\">\n                      <Trans i18nKey=\"snapshot.external-badge\">External</Trans>\n                    </span>\n                  )}\n                </td>\n                <td className=\"text-center\">\n                  <LinkButton href={url} variant=\"secondary\" size=\"sm\" icon=\"eye\">\n                    <Trans i18nKey=\"snapshot.view-button\">View</Trans>\n                  </LinkButton>\n                </td>\n                <td className=\"text-right\">\n                  <Button variant=\"destructive\" size=\"sm\" icon=\"times\" onClick={() => setRemoveSnapshot(snapshot)} />\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n\n      <ConfirmModal\n        isOpen={!!removeSnapshot}\n        icon=\"trash-alt\"\n        title=\"Delete\"\n        body={`Are you sure you want to delete '${removeSnapshot?.name}'?`}\n        confirmText=\"Delete\"\n        onDismiss={() => setRemoveSnapshot(undefined)}\n        onConfirm={() => {\n          doRemoveSnapshot(removeSnapshot!);\n          setRemoveSnapshot(undefined);\n        }}\n      />\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { Page } from 'app/core/components/Page/Page';\n\nimport { SnapshotListTable } from './components/SnapshotListTable';\n\nexport const SnapshotListPage = ({}) => {\n  return (\n    <Page navId=\"dashboards/snapshots\">\n      <Page.Contents>\n        <SnapshotListTable />\n      </Page.Contents>\n    </Page>\n  );\n};\n\nexport default SnapshotListPage;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar react_1 = require(\"react\");\nvar useAsyncFn_1 = tslib_1.__importDefault(require(\"./useAsyncFn\"));\nfunction useAsync(fn, deps) {\n    if (deps === void 0) { deps = []; }\n    var _a = useAsyncFn_1.default(fn, deps, {\n        loading: true,\n    }), state = _a[0], callback = _a[1];\n    react_1.useEffect(function () {\n        callback();\n    }, [callback]);\n    return state;\n}\nexports.default = useAsync;\n"],"names":["getSnapshots","result","snapshot","config","SnapshotListTable","snapshots","setSnapshots","removeSnapshot","setRemoveSnapshot","useAsync","response","doRemoveSnapshot","filteredSnapshots","ss","url","Button","ConfirmModal","SnapshotListPage","Page","tslib_1","react_1","useAsyncFn_1","fn","deps","_a","state","callback","exports"],"sourceRoot":""}