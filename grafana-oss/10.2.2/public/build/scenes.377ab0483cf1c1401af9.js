"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[207],{1781:(O,g,n)=>{n.d(g,{UV:()=>e});var e=(a=>(a.Annotations="annotations",a.Arrow="arrow",a.CSVContent="csv_content",a.CSVFile="csv_file",a.CSVMetricValues="csv_metric_values",a.DataPointsOutsideRange="datapoints_outside_range",a.ExponentialHeatmapBucketData="exponential_heatmap_bucket_data",a.FlameGraph="flame_graph",a.GrafanaAPI="grafana_api",a.LinearHeatmapBucketData="linear_heatmap_bucket_data",a.Live="live",a.Logs="logs",a.ManualEntry="manual_entry",a.NoDataPoints="no_data_points",a.NodeGraph="node_graph",a.PredictableCSVWave="predictable_csv_wave",a.PredictablePulse="predictable_pulse",a.RandomWalk="random_walk",a.RandomWalkTable="random_walk_table",a.RandomWalkWithError="random_walk_with_error",a.RawFrame="raw_frame",a.ServerError500="server_error_500",a.Simulation="simulation",a.SlowQuery="slow_query",a.StreamingClient="streaming_client",a.TableStatic="table_static",a.Trace="trace",a.USA="usa",a.VariablesQuery="variables-query",a))(e||{});const t={fields:[],states:[]},l={csvWave:[],points:[],scenarioId:"random_walk"}},2864:(O,g,n)=>{n.r(g),n.d(g,{DashboardScenePage:()=>y,default:()=>h});var e=n(39953),t=n(15750),l=n(13253),a=n(13150),c=n(64299);function y({match:i}){const v=(0,c.w)(),{dashboard:p,isLoading:S,loadError:b}=v.useState();return(0,e.useEffect)(()=>(v.loadDashboard(i.params.uid),()=>{v.clearState()}),[v,i.params.uid]),p?e.createElement(p.Component,{model:p}):e.createElement(l.T,{layout:t.Q.Canvas},S&&e.createElement(a.Z,null),b&&e.createElement("h2",null,b))}const h=y},64299:(O,g,n)=>{n.d(g,{w:()=>K});var e=n(99636),t=n(36861),l=n(97433),a=n(13601),c=n(74502),y=n(88939),h=n(41407),i=n(39953),v=n(53721),p=n(15750),S=n(82803),b=n(4919),M=n(16924),H=n(82618),F=n(13253);function X({model:u}){const{body:o,controls:m,drawer:f}=u.useState(),E=(0,S.wW)(T),W=(0,v.TH)(),V=u.getPageNav(W);return i.createElement(F.T,{navId:"scenes",pageNav:V,layout:p.Q.Custom},i.createElement(M.A,{actions:x(u)}),i.createElement("div",{className:E.canvasContent},m&&i.createElement("div",{className:E.controls},m.map(I=>i.createElement(I.Component,{key:I.state.key,model:I}))),i.createElement("div",{className:E.body},i.createElement(o.Component,{model:o}))),f&&i.createElement(f.Component,{model:f}))}function x(u){return i.createElement(i.Fragment,null,i.createElement(H.M,{leftActionsSeparator:!0,key:"separator"}),i.createElement(b.zx,{onClick:u.onDiscard,tooltip:"",key:"panel-edit-discard",variant:"destructive",fill:"outline",size:"sm"},"Discard"),i.createElement(b.zx,{onClick:u.onApply,tooltip:"",key:"panel-edit-apply",variant:"primary",size:"sm"},"Apply"))}function T(u){return{canvasContent:(0,h.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:u.spacing(0,2),flexBasis:"100%",flexGrow:1,minHeight:0,width:"100%"}),body:(0,h.css)({label:"body",flexGrow:1,display:"flex",position:"relative",minHeight:0,gap:"8px",marginBottom:u.spacing(2)}),controls:(0,h.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:u.spacing(1),padding:u.spacing(2,0)})}}var L=n(96227),B=n(38637);class A extends c.wx{constructor(o){super({}),this.panel=o}}A.Component=({model:u})=>{const{panel:o}=u,{title:m}=o.useState(),f=(0,S.wW)(U);return i.createElement("div",{className:f.box},i.createElement(L.g,{label:"Title"},i.createElement(B.I,{value:m,onChange:E=>o.setState({title:E.currentTarget.value})})))};function U(u){return{box:(0,h.css)({display:"flex",flexDirection:"column",padding:u.spacing(2),flexBasis:"100%",flexGrow:1,minHeight:0})}}class w extends c.wx{constructor(o){super(o),this.onDiscard=()=>{this._navigateBackToDashboard()},this.onApply=()=>{this._commitChanges(),this._navigateBackToDashboard()},this.onSave=()=>{this._commitChanges()},this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){return()=>{(0,c.oo)().cleanUp(this)}}startUrlSync(){(0,c.oo)().initSync(this)}getPageNav(o){return{text:"Edit panel",parentItem:this.state.dashboardRef.resolve().getPageNav(o)}}_commitChanges(){const o=this.state.dashboardRef.resolve(),m=this.state.sourcePanelRef.resolve(),f=this.state.panelRef.resolve();o.state.isEditing||o.onEnterEditMode();const E=c.vp.cloneSceneObjectState(f.state);m.setState(E),o.setState({$timeRange:this.state.$timeRange?.clone(),$variables:this.state.$variables?.clone(),isDirty:!0})}_navigateBackToDashboard(){a.E1.push((0,y.$9)({uid:this.state.dashboardRef.resolve().state.uid,currentQueryParams:a.E1.getLocation().search}))}}w.Component=X;function C(u,o){const m=o.clone(),f=c.vp.cloneSceneObjectState(u.state);return new w({dashboardRef:u.getRef(),sourcePanelRef:o.getRef(),panelRef:m.getRef(),controls:f.controls,$variables:f.$variables,$timeRange:f.$timeRange,body:new c.KH({direction:"row",primary:new c.QY({direction:"column",children:[m]}),secondary:new c.fy({width:"300px",body:new A(m)})})})}var R=n(24119);class _ extends e.b{constructor(){super(...arguments),this.cache={}}async loadDashboard(o){try{const m=await this.loadScene(o);m.startUrlSync(),this.setState({dashboard:m,isLoading:!1})}catch(m){this.setState({isLoading:!1,loadError:String(m)})}}async loadPanelEdit(o,m){try{const f=await this.loadScene(o),E=(0,y.ds)(f,(0,y.Rv)(parseInt(m,10)));if(!E){this.setState({isLoading:!1,loadError:"Panel not found"});return}const W=C(f,E);W.startUrlSync(),this.setState({isLoading:!1,panelEditor:W})}catch(f){this.setState({isLoading:!1,loadError:String(f)})}}async loadScene(o){const m=this.cache[o];if(m)return m;this.setState({isLoading:!0});const f=await t.pD.loadDashboard("db","",o);if(f.dashboard){const E=(0,R.Td)(f);return this.cache[o]=E,E}throw new Error("Dashboard not found")}clearState(){(0,l.h4)().setCurrent(void 0),this.setState({dashboard:void 0,loadError:void 0,isLoading:!1,panelEditor:void 0})}}let z=null;function K(){return z||(z=new _({})),z}},54671:(O,g,n)=>{n.r(g),n.d(g,{PanelEditPage:()=>y,default:()=>h});var e=n(39953),t=n(15750),l=n(13253),a=n(13150),c=n(64299);function y({match:i}){const v=(0,c.w)(),{panelEditor:p,isLoading:S,loadError:b}=v.useState();return(0,e.useEffect)(()=>(v.loadPanelEdit(i.params.uid,i.params.panelId),()=>{v.clearState()}),[v,i.params.uid,i.params.panelId]),p?e.createElement(p.Component,{model:p}):e.createElement(l.T,{layout:t.Q.Canvas},S&&e.createElement(a.Z,null),b&&e.createElement("h2",null,b))}const h=y},31954:(O,g,n)=>{n.d(g,{q:()=>e});var e=(t=>(t.Data="data",t.Meta="meta",t.Error="error",t.Stats="stats",t.JSON="json",t.Query="query",t.Help="help",t))(e||{})},4855:(O,g,n)=>{n.r(g),n.d(g,{SceneListPage:()=>i,default:()=>v});var e=n(39953),t=n(20653),l=n(27366),a=n(4236),c=n(13253),y=n(17231),h=n(23601);const i=({})=>{const p=(0,h.F)(),S=(0,t.Z)(()=>(0,y.getGrafanaSearcher)().starred({starred:!0}),[]);return e.createElement(c.T,{navId:"scenes",subTitle:"Experimental new runtime and state model for dashboards"},e.createElement(c.T.Contents,null,e.createElement(l.K,{direction:"column",gap:1},e.createElement("h5",null,"Apps"),e.createElement(l.K,{direction:"column",gap:0},e.createElement(a.Z,{href:"/scenes/grafana-monitoring"},e.createElement(a.Z.Heading,null,"Grafana monitoring"))),e.createElement("h5",null,"Test scenes"),e.createElement(l.K,{direction:"column",gap:0},p.map(b=>e.createElement(a.Z,{key:b.title,href:`/scenes/${b.title}`},e.createElement(a.Z.Heading,null,b.title)))),S.value&&e.createElement(e.Fragment,null,e.createElement("h5",null,"Starred dashboards"),e.createElement(l.K,{direction:"column",gap:0},S.value.view.map(b=>e.createElement(a.Z,{href:`/scenes/dashboard/${b.uid}`,key:b.uid},e.createElement(a.Z.Heading,null,b.name))))))))},v=i},23230:(O,g,n)=>{n.r(g),n.d(g,{ScenePage:()=>a,default:()=>c});var e=n(39953),t=n(74502),l=n(23601);const a=y=>{const h=(0,l.H)(y.match.params.name),[i,v]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{h&&!i&&((0,t.oo)().initSync(h),v(!0))},[i,h]),h?i?e.createElement(h.Component,{model:h}):null:e.createElement("h2",null,"Scene not found")},c=a},82164:(O,g,n)=>{n.r(g),n.d(g,{GrafanaMonitoringApp:()=>V,default:()=>j,getHandlerDrilldownPage:()=>Q,getMainPageScene:()=>I});var e=n(39953),t=n(74502),l=n(63011),a=n(48474),c=n(69330),y=n(97898),h=n(13601),i=n(34547),v=n(4919),p=n(20454);class S extends t.wx{constructor(){super(...arguments),this.onChange=s=>{this.setState({value:s}),this.state.onChange(s)}}}S.Component=({model:r})=>{const{options:s,value:d}=r.useState();return e.createElement(p.S,{options:s,value:d,onChange:r.onChange})};var b=n(38637);class M extends t.wx{constructor(){super(...arguments),this.onChange=s=>{this.setState({value:s.currentTarget.value})}}}M.Component=({model:r})=>{const{value:s}=r.useState();return e.createElement(b.I,{width:25,placeholder:"Search...",value:s,onChange:r.onChange})};var H=n(71476),F=n(86981),X=n(7959),x=n(86968);function T(r){const s={id:F.mE.regex,options:{value:r}};return{id:X.W.filterByValue,options:{type:x.PQ.include,match:x.ER.all,filters:[{fieldName:"handler",config:s}]}}}function L(r){return()=>s=>s.pipe((0,H.U)(d=>d.filter(P=>(0,c.nf)(P).toLowerCase().includes(r.toLowerCase()))))}var B=n(69307);function A(){const r=useLocation();return locationSearchToObject(r.search||"")}function U(r,s){return B.Cj.renderUrl(r,s)}function w(r){return new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",instant:!0,format:"table",maxDataPoints:500,...r}]})}function C(r){return new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",range:!0,format:"time_series",maxDataPoints:500,...r}]})}function R(){return new t.hT({variables:[new t.$1({name:"instance",datasource:{uid:"gdev-prometheus"},query:{query:"label_values(grafana_http_request_duration_seconds_sum, instance)",refId:"A"}})]})}function _(){const r=new M({value:""}),s=w({expr:"sort_desc(avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum[$__rate_interval]) * 1e3)) "}),d=new t.bM({$data:s,transformations:[T("")]});d.addActivationHandler(()=>{const D=r.subscribeToState($=>{d.setState({transformations:[T($.value)]}),d.reprocessTransformations()});return()=>D.unsubscribe()});const P=t.wX.table().setTitle("Handlers").setData(d).setOption("footer",{enablePagination:!0}).setOverrides(D=>D.matchFieldsWithNameByRegex(".*").overrideFilterable(!1).matchFieldsWithName("Time").overrideCustomFieldConfig("hidden",!0).matchFieldsWithName("Value").overrideDisplayName("Duration (Avg)").matchFieldsWithName("handler").overrideLinks([{title:"Go to handler drilldown view",url:"",onBuildUrl:()=>{const $=h.E1.getSearchObject();return U("/scenes/grafana-monitoring/handlers/${__value.text:percentencode}",$)}}])).build(),Z=new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",expr:"topk(20, avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum[$__rate_interval])) * 1e3)",range:!0,format:"time_series",legendFormat:"{{method}} {{handler}} (status = {{status_code}})",maxDataPoints:500}]}),G=new t.bM({$data:Z,transformations:[L("")]});G.addActivationHandler(()=>{const D=r.subscribeToState($=>{G.setState({transformations:[L($.value)]}),G.reprocessTransformations()});return()=>D.unsubscribe()});const q=new t.$M({$data:G,body:new t.QY({direction:"column",children:[]}),getLayoutChild:(D,$,N)=>new t.fy({key:`panel-${N}`,minHeight:200,$data:new t.Yt({data:{...D,series:[$]}}),body:new t.QY({direction:"row",key:`row-${N}`,children:[new t.fy({key:`flex1-${N}`,body:t.wX.timeseries().setTitle((0,c.nf)($)).setOption("legend",{showLegend:!1}).setHeaderActions(e.createElement(v.Qj,{fill:"text",size:"sm",icon:"arrow-right",href:z($.fields[1].labels.handler)},"Details")).build()}),new t.fy({key:`flex2-${N}`,width:200,body:t.wX.stat().setTitle("Last").setOption("graphMode",i.IG.None).setOption("textMode",i.jG.Value).setDisplayName("Last").build()})]})})}),Y=new t.QY({children:[new t.fy({body:P})]}),J=new S({options:[{value:"table",label:"Table"},{value:"graphs",label:"Graphs"}],value:"table",onChange:D=>{D==="table"?Y.setState({children:[new t.fy({body:P})]}):Y.setState({children:[q]})}});return new t.U4({$variables:R(),$data:s,$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),r,new t.o$,J,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:Y})}function z(r){const s=h.E1.getSearchObject();return U(`/scenes/grafana-monitoring/handlers/${encodeURIComponent(r)}`,s)}function K(r){const s=C({expr:`avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum{handler="${r}"}[$__rate_interval])) * 1e3`,legendFormat:"{{method}} {{handler}} (status = {{status_code}})"}),d=C({expr:`sum without(job, instance) (rate(grafana_http_request_duration_seconds_count{handler="${r}"}[$__rate_interval])) `,legendFormat:"{{method}} {{handler}} (status = {{status_code}})"});return new t.U4({$variables:R(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({body:t.wX.timeseries().setData(s).setTitle("Request duration avg (ms)").build()}),new t.fy({body:t.wX.timeseries().setData(d).setTitle("Request count/s").build()})]})})}function u(){return new t.U4({$variables:R(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({height:150,body:new t.QY({children:[new t.fy({body:o("grafana_stat_totals_dashboard","Dashboards")}),new t.fy({body:o("grafana_stat_total_users","Users")}),new t.fy({body:o("sum(grafana_stat_totals_datasource)","Data sources")}),new t.fy({body:o("grafana_stat_total_service_account_tokens","Service account tokens")})]})}),new t.fy({body:t.wX.timeseries().setData(new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",expr:'sum(process_resident_memory_bytes{job="grafana", instance=~"$instance"})',range:!0,format:"time_series",maxDataPoints:500}]})).setTitle("Memory usage").setOption("legend",{showLegend:!1}).setUnit("bytes").setMin(0).setCustomFieldConfig("lineWidth",2).setCustomFieldConfig("fillOpacity",6).build()}),new t.fy({body:t.wX.timeseries().setData(new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",expr:'sum(go_goroutines{job="grafana", instance=~"$instance"})',range:!0,format:"time_series",maxDataPoints:500}]})).setOption("legend",{showLegend:!1}).setMin(0).setCustomFieldConfig("lineWidth",2).setCustomFieldConfig("fillOpacity",6).setTitle("Go routines").build()})]})})}function o(r,s){return t.wX.stat().setData(w({expr:r})).setTitle(s).setColor({fixedColor:"text",mode:y.S.Fixed}).build()}function m(r){const s=new t.uq({datasource:{uid:"gdev-loki"},queries:[{refId:"A",expr:`{job="grafana"} | logfmt | handler=\`${r}\` | __error__=\`\``,queryType:"range",maxDataPoints:5e3}]});return new t.U4({$variables:R(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({body:t.wX.logs().setData(s).setTitle("").setOption("showTime",!0).setOption("showLabels",!1).setOption("showCommonLabels",!1).setOption("wrapLogMessage",!0).setOption("prettifyLogMessage",!1).setOption("enableLogDetails",!0).setOption("dedupStrategy",i.Y4.none).setOption("sortOrder",i.UV.Descending).build()})]})})}function f(){const r=new t.uq({datasource:{uid:"gdev-loki"},queries:[{refId:"A",expr:'{job="grafana"} | logfmt | __error__=``',queryType:"range",maxDataPoints:5e3}]});return new t.U4({$variables:R(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({body:t.wX.logs().setTitle("").setData(r).setOption("showTime",!0).setOption("showLabels",!1).setOption("showCommonLabels",!1).setOption("wrapLogMessage",!0).setOption("prettifyLogMessage",!1).setOption("enableLogDetails",!0).setOption("dedupStrategy",i.Y4.none).setOption("sortOrder",i.UV.Descending).build()})]})})}function E(){const r=t.wX.table().setData(w({expr:"sort_desc(avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum[$__rate_interval]) * 1e3)) "})).setTitle("Handlers").setOption("footer",{enablePagination:!0}).setOverrides(d=>d.matchFieldsWithNameByRegex(".*").overrideFilterable(!1).matchFieldsWithName("Time").overrideCustomFieldConfig("hidden",!0).matchFieldsWithName("Value").overrideDisplayName("Duration (Avg)").matchFieldsWithName("handler").overrideLinks([{title:"Go to handler drilldown view",url:"/scenes/grafana-monitoring/traffic?handler=${__value.text:percentencode}"}])).build();return new t.U4({$variables:R(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({$behaviors:[new W],children:[new t.fy({body:r})]})})}class W extends t.wx{constructor(){super({}),this._urlSync=new t.oU(this,{keys:["handler"]}),this.addActivationHandler(()=>{this._subs.add(this.subscribeToState(s=>this.onHandlerChanged(s.handler))),this.onHandlerChanged(this.state.handler)})}onHandlerChanged(s){const d=this.getLayout();s==null?d.setState({children:d.state.children.slice(0,1)}):d.setState({children:[d.state.children[0],this.getDrilldownView(s)]})}getDrilldownView(s){return new t.fy({key:"drilldown-flex",body:t.wX.timeseries().setData(C({expr:`rate(grafana_http_request_duration_seconds_sum{handler="${s}"}[$__rate_interval]) * 1e3`})).setTitle(`Handler: ${s} details`).setHeaderActions(e.createElement(v.zx,{size:"sm",variant:"secondary",icon:"times",onClick:()=>this.setState({handler:void 0})})).build()})}getUrlState(){return{handler:this.state.handler}}updateFromUrl(s){(typeof s.handler=="string"||s.handler===void 0)&&this.setState({handler:s.handler})}getLayout(){if(this.parent instanceof t.QY)return this.parent;throw new Error("Invalid parent")}}function V(){const r=(0,e.useMemo)(()=>new t.mt({pages:[I()]}),[]),s=(0,l.P)("scenes"),[d]=(0,e.useState)({sectionNav:s});return e.createElement(a.v.Provider,{value:d},e.createElement(r.Component,{model:r}))}function I(){return new t.yH({title:"Grafana Monitoring",subTitle:"A custom app with embedded scenes to monitor your Grafana server",url:"/scenes/grafana-monitoring",hideFromBreadcrumbs:!1,getScene:u,tabs:[new t.yH({title:"Overview",url:"/scenes/grafana-monitoring",getScene:u,preserveUrlKeys:["from","to","var-instance"]}),new t.yH({title:"HTTP handlers",url:"/scenes/grafana-monitoring/handlers",getScene:_,preserveUrlKeys:["from","to","var-instance"],drilldowns:[{routePath:"/scenes/grafana-monitoring/handlers/:handler",getPage:Q}]}),new t.yH({title:"Traffic",url:"/scenes/grafana-monitoring/traffic",getScene:E,preserveUrlKeys:["from","to","var-instance"]}),new t.yH({title:"Logs",url:"/scenes/grafana-monitoring/logs",getScene:f,preserveUrlKeys:["from","to","var-instance"]})]})}function Q(r,s){const d=decodeURIComponent(r.params.handler),P=`/scenes/grafana-monitoring/handlers/${encodeURIComponent(d)}`;return new t.yH({title:d,subTitle:"A grafana http handler is responsible for service a specific API request",url:P,getParentPage:()=>s,getScene:()=>K(d),tabs:[new t.yH({title:"Metrics",url:P,routePath:"/scenes/grafana-monitoring/handlers/:handler",getScene:()=>K(d),preserveUrlKeys:["from","to","var-instance"]}),new t.yH({title:"Logs",url:P+"/logs",routePath:"/scenes/grafana-monitoring/handlers/:handler/logs",getScene:()=>m(d),preserveUrlKeys:["from","to","var-instance"]})]})}const j=V},23601:(O,g,n)=>{n.d(g,{H:()=>U,F:()=>B});var e=n(74502),t=n(1781),l=n(8507);function a(w,C){return new e.uq({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk",...w}],...C})}function c(){const w=new e.gg,C=new e.gg({from:"now-1y",to:"now"});return new l.W({title:"Grid with rows and different queries and time ranges",body:new e.Qh({children:[new e.I_({$timeRange:C,$data:a({scenarioId:t.UV.RandomWalkTable}),title:"Row A - has its own query, last year time range",key:"Row A",isCollapsed:!0,y:0,children:[new e.bO({x:0,y:1,width:12,height:5,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Row A Child1").build()}),new e.bO({x:0,y:5,width:6,height:5,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Row A Child2").build()})]}),new e.bO({x:0,y:12,width:6,height:10,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Outsider, has its own query").setData(a()).build()})]}),$timeRange:w,$data:a(),actions:[new e.n7({}),new e.vf({})]})}function y(){return new l.W({title:"Multiple grid layouts test",body:new e.QY({children:[new e.fy({body:new e.Qh({children:[new e.bO({x:0,y:0,width:12,height:10,isDraggable:!0,isResizable:!0,body:e.wX.timeseries().setTitle("Dragabble and resizable").build()}),new e.bO({x:12,y:0,width:12,height:10,isResizable:!1,isDraggable:!0,body:e.wX.timeseries().setTitle("Draggable only").build()}),new e.bO({x:6,y:11,width:12,height:10,isResizable:!1,isDraggable:!0,body:new e.QY({direction:"column",children:[new e.fy({ySizing:"fill",body:e.wX.timeseries().setTitle("Fill height").build()}),new e.fy({ySizing:"fill",body:e.wX.timeseries().setTitle("Fill height").build()})]})})]})}),new e.fy({body:new e.Qh({children:[new e.bO({x:0,y:0,width:12,height:10,isDraggable:!0,isResizable:!0,body:e.wX.timeseries().setTitle("Dragabble and resizable").build()}),new e.bO({x:12,y:0,width:12,height:10,isResizable:!1,isDraggable:!0,body:e.wX.timeseries().setTitle("Draggable only").build()}),new e.bO({x:6,y:11,width:12,height:10,isResizable:!1,isDraggable:!0,body:new e.QY({direction:"column",children:[new e.fy({ySizing:"fill",body:e.wX.timeseries().setTitle("Fill height").build()}),new e.fy({ySizing:"fill",body:e.wX.timeseries().setTitle("Fill height").build()})]})})]})})]}),$timeRange:new e.gg,$data:a(),actions:[new e.n7({}),new e.vf({})]})}function h(){return new l.W({title:"Grid with rows and different queries",body:new e.Qh({children:[new e.I_({$timeRange:new e.gg,$data:a({scenarioId:t.UV.RandomWalkTable}),title:"Row A - has its own query",key:"Row A",isCollapsed:!0,y:0,children:[new e.bO({x:0,y:1,width:12,height:5,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Row A Child1").build()}),new e.bO({x:0,y:5,width:6,height:5,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Row A Child2").build()})]}),new e.I_({title:"Row B - uses global query",key:"Row B",isCollapsed:!0,y:1,children:[new e.bO({x:0,y:2,width:12,height:5,isResizable:!1,isDraggable:!0,body:e.wX.timeseries().setTitle("Row B Child1").build()}),new e.bO({x:0,y:7,width:6,height:5,isResizable:!1,isDraggable:!0,body:e.wX.timeseries().setTitle("Row B Child2 with data").setData(a({seriesCount:10})).build()})]}),new e.bO({x:0,y:12,width:6,height:10,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Outsider, has its own query").setData(a({seriesCount:10})).build()}),new e.bO({x:6,y:12,width:12,height:10,isResizable:!0,isDraggable:!0,body:e.wX.timeseries().setTitle("Outsider, uses global query").build()})]}),$timeRange:new e.gg,$data:a(),actions:[new e.n7({}),new e.vf({})]})}var i=n(12699);function v(){return new l.W({title:"Query variable",$variables:new e.hT({variables:[new e.eO({name:"metric",query:"job : job, instance : instance"}),new e.l3({name:"datasource",pluginId:"prometheus"}),new e.$1({name:"instance (using datasource variable)",refresh:i.Bd.onTimeRangeChanged,query:{query:"label_values(go_gc_duration_seconds, ${metric})",refId:"A"},datasource:{uid:"${datasource}"}}),new e.$1({name:"label values (on time range refresh)",refresh:i.Bd.onTimeRangeChanged,query:{query:"label_values(go_gc_duration_seconds, ${metric})",refId:"B"},datasource:{uid:"gdev-prometheus",type:"prometheus"}}),new e.$1({name:"legacy (graphite)",refresh:i.Bd.onTimeRangeChanged,query:{queryType:"Default",target:"stats.response.*",refId:"C"},datasource:{uid:"gdev-graphite",type:"graphite"}})]}),body:new e.QY({direction:"row",children:[new e.fy({width:"40%",body:new e.S$({text:"metric: ${metric}",fontSize:20,align:"center"})})]}),$timeRange:new e.gg,actions:[new e.n7({}),new e.vf({})],controls:[new e.dn({})]})}var p=n(41406),S=n(52274),b=n(58086);function M(){return new l.W({title:"Variables - Repeating panels",$variables:new e.hT({variables:[new e.gU({name:"server",query:"AB",value:"server",text:"",delayMs:2e3,isMulti:!0,includeAll:!0,refresh:p.Bd.onTimeRangeChanged,optionsToReturn:[{label:"A",value:"A"},{label:"B",value:"B"}],options:[],$behaviors:[H]})]}),body:new e.Qh({isDraggable:!0,isResizable:!0,children:[new S.o({variableName:"server",x:0,y:0,width:24,height:8,itemHeight:8,source:e.wX.timeseries().setTitle("server = $server").setData(a({alias:"server = $server"})).build()})]}),$timeRange:new e.gg,actions:[],controls:[new e.dn({}),new e.o$,new e.n7({}),new e.vf({})]})}function H(w){const C=w.subscribeToState((R,_)=>{!R.loading&&_.loading&&(w.state.optionsToReturn?.length===2?w.setState({query:"ABC",optionsToReturn:[{label:"A",value:"A"},{label:"B",value:"B"},{label:"C",value:"C"}]}):w.setState({query:"AB",optionsToReturn:[{label:"A",value:"A"},{label:"B",value:"B"}]}))});return()=>{C.unsubscribe()}}function F(){return new l.W({title:"Variables - Repeating rows",$variables:new e.hT({variables:[new e.gU({name:"server",query:"AB",value:["A","B","C"],text:["A","B","C"],delayMs:2e3,isMulti:!0,includeAll:!0,refresh:p.Bd.onTimeRangeChanged,optionsToReturn:[{label:"A",value:"A"},{label:"B",value:"B"},{label:"C",value:"C"}],options:[]}),new e.gU({name:"pod",query:"AB",value:["Mu","Ma","Mi"],text:["Mu","Ma","Mi"],delayMs:2e3,isMulti:!0,includeAll:!0,refresh:p.Bd.onTimeRangeChanged,optionsToReturn:[{label:"Mu",value:"Mu"},{label:"Ma",value:"Ma"},{label:"Mi",value:"Mi"}],options:[]})]}),body:new e.Qh({isDraggable:!0,isResizable:!0,children:[new e.I_({title:"Row $server",key:"Row A",isCollapsed:!1,y:0,x:0,$behaviors:[new b.a({variableName:"server",sources:[new S.o({variableName:"pod",x:0,y:0,width:24,height:5,itemHeight:5,source:e.wX.timeseries().setTitle("server = $server, pod = $pod").setData(a({alias:"server = $server, pod = $pod"})).build()})]})]})]}),$timeRange:new e.gg,actions:[],controls:[new e.dn({}),new e.o$,new e.n7({}),new e.vf({})]})}function X(){return new l.W({title:"Scene with rows",body:new e.QY({direction:"column",children:[new e.Gb({title:"Overview",canCollapse:!0,body:new e.QY({direction:"row",children:[new e.fy({body:e.wX.timeseries().setTitle("Fill height").build()}),new e.fy({body:e.wX.timeseries().setTitle("Fill height").build()})]})}),new e.Gb({title:"More server details",canCollapse:!0,body:new e.QY({direction:"row",children:[new e.fy({body:e.wX.timeseries().setTitle("Fill height").build()}),new e.fy({body:e.wX.timeseries().setTitle("Fill height").build()})]})})]}),$timeRange:new e.gg,$data:a(),actions:[new e.n7({}),new e.vf({})]})}function x(){return new l.W({title:"Transformations demo",body:new e.QY({direction:"row",children:[new e.fy({body:new e.QY({direction:"column",children:[new e.fy({body:new e.QY({direction:"row",children:[new e.fy({body:e.wX.timeseries().setTitle("Source data (global query)").build()}),new e.fy({body:e.wX.stat().setTitle("Transformed data").setData(new e.bM({transformations:[{id:"reduce",options:{reducers:["last","mean"]}}]})).build()})]})}),new e.fy({body:e.wX.stat().setTitle("Query with predefined transformations").setData(new e.bM({$data:a(),transformations:[{id:"reduce",options:{reducers:["mean"]}}]})).build()})]})})]}),$timeRange:new e.gg,$data:a(),actions:[new e.n7({}),new e.vf({})]})}function T(){return new l.W({title:"Variables",$variables:new e.hT({variables:[new e.gU({name:"server",query:"A.*",value:"server",text:"",delayMs:1e3,options:[]}),new e.gU({name:"pod",query:"A.$server.*",value:"pod",delayMs:1e3,isMulti:!0,text:"",options:[]}),new e.gU({name:"handler",query:"A.$server.$pod.*",value:"handler",delayMs:1e3,text:"",options:[]}),new e.eO({name:"custom",query:"A : 10,B : 20"}),new e.l3({name:"ds",pluginId:"testdata"}),new e.Dm({name:"textbox",value:"default value"})]}),body:new e.QY({direction:"row",children:[new e.fy({body:new e.QY({direction:"column",children:[new e.fy({body:new e.QY({children:[new e.fy({body:e.wX.timeseries().setTitle("handler: $handler").setData(a({alias:"handler: $handler"})).build()}),new e.fy({body:new e.S$({text:"Text: ${textbox}",fontSize:20,align:"center"})}),new e.fy({width:"40%",body:new e.S$({text:"server: ${server} pod:${pod}",fontSize:20,align:"center"})})]})}),new e.fy({body:new e.Gb({title:"Collapsable inner scene",canCollapse:!0,body:new e.QY({direction:"row",children:[new e.fy({body:e.wX.timeseries().setTitle("handler: $handler").setData(a({alias:"handler: $handler"})).build()})]})})})]})})]}),$timeRange:new e.gg,actions:[new e.n7({}),new e.vf({})],controls:[new e.dn({})]})}function L(){return new l.W({title:"Variables with All values",$variables:new e.hT({variables:[new e.gU({name:"server",query:"A.*",value:"AA",text:"AA",includeAll:!0,defaultToAll:!0,delayMs:1e3,options:[]}),new e.gU({name:"pod",query:"A.$server.*",value:[],delayMs:1e3,isMulti:!0,includeAll:!0,defaultToAll:!0,text:"",options:[]}),new e.gU({name:"handler",query:"A.$server.$pod.*",value:[],delayMs:1e3,includeAll:!0,defaultToAll:!1,isMulti:!0,text:"",options:[]})]}),body:new e.QY({direction:"row",children:[new e.fy({body:e.wX.timeseries().setTitle("handler: $handler").setData(a({alias:"handler: $handler"})).build()}),new e.fy({width:"40%",body:new e.S$({text:"server: ${server} pod:${pod}",fontSize:20,align:"center"})})]}),$timeRange:new e.gg,actions:[new e.n7({}),new e.vf({})],controls:[new e.dn({})]})}function B(){return[{title:"Scene with rows",getScene:X},{title:"Grid with rows and different queries",getScene:h},{title:"Grid with rows and different queries and time ranges",getScene:c},{title:"Multiple grid layouts test",getScene:y},{title:"Variables",getScene:T},{title:"Variables with All values",getScene:L},{title:"Variables - Repeating panels",getScene:M},{title:"Variables - Repeating rows",getScene:F},{title:"Query variable",getScene:v},{title:"Transformations demo",getScene:x}]}const A={};function U(w){if(A[w])return A[w];const C=B().find(R=>R.title===w);return C&&(A[w]=C.getScene()),A[w]}}}]);

//# sourceMappingURL=scenes.377ab0483cf1c1401af9.js.map