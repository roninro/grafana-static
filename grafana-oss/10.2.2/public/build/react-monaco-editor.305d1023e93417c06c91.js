"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2462],{9203:(ae,N,f)=>{f.r(N),f.d(N,{ReactMonacoEditor:()=>z});var L=f(6526),D=f(39953),x=f(53735),V=f(63374);function A(l){if(l===void 0)return{};{const c={"editor.background":l.components.input.background,"minimap.background":l.colors.background.secondary};return Object.keys(c).forEach(g=>{c[g]=m(c[g])}),c}}function m(l){return(0,V.Z)(l).toHexString()}function R(l,c){const g=A(c);l.editor.defineTheme("grafana-dark",{base:"vs-dark",inherit:!0,colors:g,rules:[{token:"predefined",foreground:m(c?.visualization.getColorByName("purple"))},{token:"operator",foreground:m(c?.visualization.getColorByName("orange"))},{token:"tag",foreground:m(c?.visualization.getColorByName("green"))}]}),l.editor.defineTheme("grafana-light",{base:"vs",inherit:!0,colors:g,rules:[{token:"predefined",foreground:m(c?.visualization.getColorByName("purple"))},{token:"operator",foreground:m(c?.visualization.getColorByName("orange"))},{token:"tag",foreground:m(c?.visualization.getColorByName("green"))}]})}L._m.config({paths:{vs:(window.__grafana_public_path__??"public/")+"lib/monaco/min/vs"}});const z=l=>{const{beforeMount:c}=l,g=(0,x.l4)(),_=(0,D.useCallback)(B=>{R(B,g),c?.(B)},[c,g]);return D.createElement(L.ZP,{...l,theme:g.isDark?"grafana-dark":"grafana-light",beforeMount:_})}},53735:(ae,N,f)=>{f.d(N,{HE:()=>c,l4:()=>_,wW:()=>q});var L=f(16976),D=f.n(L),x=f(80172),V=f.n(x),A=f(39953),m=f(54342);let R=null;const z=new WeakMap,l=p=>{const O=I=>{const j=R||ThemeContext;return React.createElement(j.Consumer,null,K=>React.createElement(p,{...I,theme:K.v1}))};return O.displayName=`WithTheme(${p.displayName})`,hoistNonReactStatics(O,p),O},c=p=>{const O=I=>{const j=R||m.N;return A.createElement(j.Consumer,null,K=>A.createElement(p,{...I,theme:K}))};return O.displayName=`WithTheme(${p.displayName})`,D()(O,p),O};function g(){return useContext(R||ThemeContext).v1}function _(){return(0,A.useContext)(R||m.N)}function B(p){const O=g();let I=z.get(p);return I||(I=stylesFactory(p),z.set(p,I)),I(O)}function q(p,...O){const I=_();let j=z.get(p);return j||(j=V()(p,{maxSize:10}),z.set(p,j)),j(I,...O)}const Me=p=>(R=React.createContext(p),()=>{R=null})},93947:(ae,N,f)=>{f.r(N),f.d(N,{ReactMonacoEditor:()=>z});var L=f(6526),D=f(39953),x=f(82803),V=f(63374);function A(l){if(l===void 0)return{};{const c={"editor.background":l.components.input.background,"minimap.background":l.colors.background.secondary};return Object.keys(c).forEach(g=>{c[g]=m(c[g])}),c}}function m(l){return(0,V.Z)(l).toHexString()}function R(l,c){const g=A(c);l.editor.defineTheme("grafana-dark",{base:"vs-dark",inherit:!0,colors:g,rules:[{token:"predefined",foreground:m(c?.visualization.getColorByName("purple"))},{token:"operator",foreground:m(c?.visualization.getColorByName("orange"))},{token:"tag",foreground:m(c?.visualization.getColorByName("green"))}]}),l.editor.defineTheme("grafana-light",{base:"vs",inherit:!0,colors:g,rules:[{token:"predefined",foreground:m(c?.visualization.getColorByName("purple"))},{token:"operator",foreground:m(c?.visualization.getColorByName("orange"))},{token:"tag",foreground:m(c?.visualization.getColorByName("green"))}]})}L._m.config({paths:{vs:(window.__grafana_public_path__??"public/")+"lib/monaco/min/vs"}});const z=l=>{const{beforeMount:c}=l,g=(0,x.l4)(),_=(0,D.useCallback)(B=>{R(B,g),c?.(B)},[c,g]);return D.createElement(L.ZP,{...l,theme:g.isDark?"grafana-dark":"grafana-light",beforeMount:_})}},6526:(ae,N,f)=>{f.d(N,{ZP:()=>Nt,_m:()=>le});function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(n){L(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function A(e,t){if(e==null)return{};var r=V(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function m(e,t){return R(e)||z(e,t)||l(e,t)||g()}function R(e){if(Array.isArray(e))return e}function z(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,o=!1,a=void 0;try{for(var s=e[Symbol.iterator](),h;!(n=(h=s.next()).done)&&(r.push(h.value),!(t&&r.length===t));n=!0);}catch(b){o=!0,a=b}finally{try{!n&&s.return!=null&&s.return()}finally{if(o)throw a}}return r}}function l(e,t){if(e){if(typeof e=="string")return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}function c(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B(Object(r),!0).forEach(function(n){_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Me(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return t.reduceRight(function(o,a){return a(o)},n)}}function p(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return o.length>=e.length?e.apply(this,o):function(){for(var s=arguments.length,h=new Array(s),b=0;b<s;b++)h[b]=arguments[b];return t.apply(r,[].concat(o,h))}}}function O(e){return{}.toString.call(e).includes("Object")}function I(e){return!Object.keys(e).length}function j(e){return typeof e=="function"}function K(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ze(e,t){return O(t)||W("changeType"),Object.keys(t).some(function(r){return!K(e,r)})&&W("changeField"),t}function ke(e){j(e)||W("selectorType")}function Ne(e){j(e)||O(e)||W("handlerType"),O(e)&&Object.values(e).some(function(t){return!j(t)})&&W("handlersType")}function Le(e){e||W("initialIsRequired"),O(e)||W("initialType"),I(e)&&W("initialContent")}function Ae(e,t){throw new Error(e[t]||e.default)}var Be={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},W=p(Ae)(Be),ee={changes:ze,selector:ke,handler:Ne,initial:Le};function xe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ee.initial(e),ee.handler(t);var r={current:e},n=p(Ue)(r,t),o=p(We)(r),a=p(ee.changes)(e),s=p(_e)(r);function h(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(H){return H};return ee.selector(P),P(r.current)}function b(P){Me(n,o,a,s)(P)}return[h,b]}function _e(e,t){return j(t)?t(e.current):t}function We(e,t){return e.current=q(q({},e.current),t),t}function Ue(e,t,r){return j(t)?t(e.current):Object.keys(r).forEach(function(n){var o;return(o=t[n])===null||o===void 0?void 0:o.call(t,e.current[n])}),r}var Ve={create:xe};const Fe=Ve;var He={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};const $e=He;function Ke(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return o.length>=e.length?e.apply(this,o):function(){for(var s=arguments.length,h=new Array(s),b=0;b<s;b++)h[b]=arguments[b];return t.apply(r,[].concat(o,h))}}}const Ze=Ke;function Ge(e){return{}.toString.call(e).includes("Object")}const Ye=Ge;function Je(e){return e||Ee("configIsRequired"),Ye(e)||Ee("configType"),e.urls?(Qe(),{paths:{vs:e.urls.monacoBase}}):e}function Qe(){console.warn(we.deprecation)}function Xe(e,t){throw new Error(e[t]||e.default)}var we={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Ee=Ze(Xe)(we),qe={config:Je};const et=qe;var tt=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(o){return r.reduceRight(function(a,s){return s(a)},o)}};const rt=tt;function Ce(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],Ce(e[r],t[r]))}),x(x({},e),t)}const nt=Ce;var ot={type:"cancelation",msg:"operation is manually canceled"};function at(e){var t=!1,r=new Promise(function(n,o){e.then(function(a){return t?o(ot):n(a)}),e.catch(o)});return r.cancel=function(){return t=!0},r}const ie=at;var it=Fe.create({config:$e,isInitialized:!1,resolve:null,reject:null,monaco:null}),je=m(it,2),Z=je[0],te=je[1];function ct(e){var t=et.config(e),r=t.monaco,n=A(t,["monaco"]);te(function(o){return{config:nt(o.config,n),monaco:r}})}function ut(){var e=Z(function(t){var r=t.monaco,n=t.isInitialized,o=t.resolve;return{monaco:r,isInitialized:n,resolve:o}});if(!e.isInitialized){if(te({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),ie(ue);if(window.monaco&&window.monaco.editor)return Pe(window.monaco),e.resolve(window.monaco),ie(ue);rt(lt,ft)(dt)}return ie(ue)}function lt(e){return document.body.appendChild(e)}function st(e){var t=document.createElement("script");return e&&(t.src=e),t}function ft(e){var t=Z(function(n){var o=n.config,a=n.reject;return{config:o,reject:a}}),r=st("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function dt(){var e=Z(function(r){var n=r.config,o=r.resolve,a=r.reject;return{config:n,resolve:o,reject:a}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){Pe(r),e.resolve(r)},function(r){e.reject(r)})}function Pe(e){Z().monaco||te({monaco:e})}function gt(){return Z(function(e){var t=e.monaco;return t})}var ue=new Promise(function(e,t){return te({resolve:e,reject:t})}),pt={config:ct,init:ut,__getMonacoInstance:gt};const le=pt;var i=f(39953),mt={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},se=mt,ht={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},vt=ht;function bt({children:e}){return i.createElement("div",{style:vt.container},e)}var yt=bt,Ot=yt;function Mt({width:e,height:t,isEditorReady:r,loading:n,_ref:o,className:a,wrapperProps:s}){return i.createElement("section",{style:{...se.wrapper,width:e,height:t},...s},!r&&i.createElement(Ot,null,n),i.createElement("div",{ref:o,style:{...se.fullWidth,...!r&&se.hide},className:a}))}var wt=Mt,Te=(0,i.memo)(wt);function Et(e){(0,i.useEffect)(e,[])}var fe=Et;function Ct(e,t,r=!0){let n=(0,i.useRef)(!0);(0,i.useEffect)(n.current||!r?()=>{n.current=!1}:e,t)}var S=Ct;function G(){}function F(e,t,r,n){return jt(e,n)||Pt(e,t,r,n)}function jt(e,t){return e.editor.getModel(Se(e,t))}function Pt(e,t,r,n){return e.editor.createModel(t,r,n?Se(e,n):void 0)}function Se(e,t){return e.Uri.parse(t)}function Tt({original:e,modified:t,language:r,originalLanguage:n,modifiedLanguage:o,originalModelPath:a,modifiedModelPath:s,keepCurrentOriginalModel:h=!1,keepCurrentModifiedModel:b=!1,theme:P="light",loading:H="Loading...",options:k={},height:de="100%",width:ge="100%",className:pe,wrapperProps:me={},beforeMount:he=G,onMount:ve=G}){let[T,Y]=(0,i.useState)(!1),[J,y]=(0,i.useState)(!0),M=(0,i.useRef)(null),v=(0,i.useRef)(null),Q=(0,i.useRef)(null),E=(0,i.useRef)(ve),u=(0,i.useRef)(he),$=(0,i.useRef)(!1);fe(()=>{let d=le.init();return d.then(w=>(v.current=w)&&y(!1)).catch(w=>w?.type!=="cancelation"&&console.error("Monaco initialization: error:",w)),()=>M.current?X():d.cancel()}),S(()=>{if(M.current&&v.current){let d=M.current.getOriginalEditor(),w=F(v.current,e||"",n||r||"text",a||"");w!==d.getModel()&&d.setModel(w)}},[a],T),S(()=>{if(M.current&&v.current){let d=M.current.getModifiedEditor(),w=F(v.current,t||"",o||r||"text",s||"");w!==d.getModel()&&d.setModel(w)}},[s],T),S(()=>{let d=M.current.getModifiedEditor();d.getOption(v.current.editor.EditorOption.readOnly)?d.setValue(t||""):t!==d.getValue()&&(d.executeEdits("",[{range:d.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),d.pushUndoStop())},[t],T),S(()=>{M.current?.getModel()?.original.setValue(e||"")},[e],T),S(()=>{let{original:d,modified:w}=M.current.getModel();v.current.editor.setModelLanguage(d,n||r||"text"),v.current.editor.setModelLanguage(w,o||r||"text")},[r,n,o],T),S(()=>{v.current?.editor.setTheme(P)},[P],T),S(()=>{M.current?.updateOptions(k)},[k],T);let ne=(0,i.useCallback)(()=>{if(!v.current)return;u.current(v.current);let d=F(v.current,e||"",n||r||"text",a||""),w=F(v.current,t||"",o||r||"text",s||"");M.current?.setModel({original:d,modified:w})},[r,t,o,e,n,a,s]),oe=(0,i.useCallback)(()=>{!$.current&&Q.current&&(M.current=v.current.editor.createDiffEditor(Q.current,{automaticLayout:!0,...k}),ne(),v.current?.editor.setTheme(P),Y(!0),$.current=!0)},[k,P,ne]);(0,i.useEffect)(()=>{T&&E.current(M.current,v.current)},[T]),(0,i.useEffect)(()=>{!J&&!T&&oe()},[J,T,oe]);function X(){let d=M.current?.getModel();h||d?.original?.dispose(),b||d?.modified?.dispose(),M.current?.dispose()}return i.createElement(Te,{width:ge,height:de,isEditorReady:T,loading:H,_ref:Q,className:pe,wrapperProps:me})}var St=Tt,At=(0,i.memo)(St);function Bt(){let[e,t]=Ie(ce.__getMonacoInstance());return fe(()=>{let r;return e||(r=ce.init(),r.then(n=>{t(n)})),()=>r?.cancel()}),e}var xt=null;function Rt(e){let t=(0,i.useRef)();return(0,i.useEffect)(()=>{t.current=e},[e]),t.current}var It=Rt,re=new Map;function Dt({defaultValue:e,defaultLanguage:t,defaultPath:r,value:n,language:o,path:a,theme:s="light",line:h,loading:b="Loading...",options:P={},overrideServices:H={},saveViewState:k=!0,keepCurrentModel:de=!1,width:ge="100%",height:pe="100%",className:me,wrapperProps:he={},beforeMount:ve=G,onMount:T=G,onChange:Y,onValidate:J=G}){let[y,M]=(0,i.useState)(!1),[v,Q]=(0,i.useState)(!0),E=(0,i.useRef)(null),u=(0,i.useRef)(null),$=(0,i.useRef)(null),ne=(0,i.useRef)(T),oe=(0,i.useRef)(ve),X=(0,i.useRef)(),d=(0,i.useRef)(n),w=It(a),Re=(0,i.useRef)(!1),be=(0,i.useRef)(!1);fe(()=>{let C=le.init();return C.then(U=>(E.current=U)&&Q(!1)).catch(U=>U?.type!=="cancelation"&&console.error("Monaco initialization: error:",U)),()=>u.current?Lt():C.cancel()}),S(()=>{let C=F(E.current,e||n||"",t||o||"",a||r||"");C!==u.current?.getModel()&&(k&&re.set(w,u.current?.saveViewState()),u.current?.setModel(C),k&&u.current?.restoreViewState(re.get(a)))},[a],y),S(()=>{u.current?.updateOptions(P)},[P],y),S(()=>{!u.current||n===void 0||(u.current.getOption(E.current.editor.EditorOption.readOnly)?u.current.setValue(n):n!==u.current.getValue()&&(be.current=!0,u.current.executeEdits("",[{range:u.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),u.current.pushUndoStop(),be.current=!1))},[n],y),S(()=>{let C=u.current?.getModel();C&&o&&E.current?.editor.setModelLanguage(C,o)},[o],y),S(()=>{h!==void 0&&u.current?.revealLine(h)},[h],y),S(()=>{E.current?.editor.setTheme(s)},[s],y);let De=(0,i.useCallback)(()=>{if(!(!$.current||!E.current)&&!Re.current){oe.current(E.current);let C=a||r,U=F(E.current,n||e||"",t||o||"",C||"");u.current=E.current?.editor.create($.current,{model:U,automaticLayout:!0,...P},H),k&&u.current.restoreViewState(re.get(C)),E.current.editor.setTheme(s),h!==void 0&&u.current.revealLine(h),M(!0),Re.current=!0}},[e,t,r,n,o,a,P,H,k,s,h]);(0,i.useEffect)(()=>{y&&ne.current(u.current,E.current)},[y]),(0,i.useEffect)(()=>{!v&&!y&&De()},[v,y,De]),d.current=n,(0,i.useEffect)(()=>{y&&Y&&(X.current?.dispose(),X.current=u.current?.onDidChangeModelContent(C=>{be.current||Y(u.current.getValue(),C)}))},[y,Y]),(0,i.useEffect)(()=>{if(y){let C=E.current.editor.onDidChangeMarkers(U=>{let ye=u.current.getModel()?.uri;if(ye&&U.find(Oe=>Oe.path===ye.path)){let Oe=E.current.editor.getModelMarkers({resource:ye});J?.(Oe)}});return()=>{C?.dispose()}}return()=>{}},[y,J]);function Lt(){X.current?.dispose(),de?k&&re.set(a,u.current.saveViewState()):u.current.getModel()?.dispose(),u.current.dispose()}return i.createElement(Te,{width:ge,height:pe,isEditorReady:y,loading:b,_ref:$,className:me,wrapperProps:he})}var zt=Dt,kt=(0,i.memo)(zt),Nt=kt}}]);

//# sourceMappingURL=react-monaco-editor.305d1023e93417c06c91.js.map