(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3498],{34265:(J,R,e)=>{"use strict";e.d(R,{n:()=>l});var n=e(39953),a=e(85059);function l(r){const{children:o,instanceSettings:g}=r,m=(0,n.useMemo)(()=>({instanceSettings:g,meta:g.meta}),[g]);return n.createElement(a._.Provider,{value:m},o)}},85059:(J,R,e)=>{"use strict";e.d(R,{_:()=>a});var n=e(39953);const a=(0,n.createContext)(void 0)},8651:(J,R,e)=>{"use strict";e.d(R,{b:()=>l});var n=e(39953),a=e(85059);function l(r){const{children:o,...g}=r;return n.createElement(a._.Provider,{value:g},o)}},74948:(J,R,e)=>{"use strict";e.d(R,{v:()=>n});function n(a){return"instanceSettings"in a&&"meta"in a}},67093:(J,R,e)=>{"use strict";e.d(R,{g:()=>l});var n=e(39953),a=e(85059);function l(){const r=(0,n.useContext)(a._);if(!r)throw new Error("usePluginContext must be used within a PluginContextProvider");return r}},33975:(J,R,e)=>{"use strict";e.d(R,{P:()=>r,i:()=>l});var n=e(89591),a=e(53305);class l{constructor(m,d){return this.fields=[],this.length=0,r(m,d)}}function r(g,m){const d={fields:[],length:g.length};if(!g?.length)return d;if(m){for(const i of m)d.fields.push(o(i,g.map(f=>f[i])));return d}const u=g.find(i=>i!=null);return u!=null&&(typeof u=="object"?d.fields=Object.keys(u).map(i=>o(i,g.map(f=>f[i]))):d.fields.push(o(n.M5,g))),d}function o(g,m){const d={name:g,config:{},values:m,type:n.fS.other};return d.type=(0,a.fu)(d)??n.fS.other,d}},93648:(J,R,e)=>{"use strict";e.d(R,{a:()=>l});var n=e(68016),a=e(7906);class l extends a.v{constructor(o){super(void 0,g=>new n.d({...o,buffer:g}))}}},93313:(J,R,e)=>{"use strict";e.d(R,{Ib:()=>o,Jy:()=>r,Y:()=>d,vP:()=>m});var n=e(89591),a=e(53305);const l={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function r(u,i){for(const f in u){const c=l[f];for(const E of u[f])E<i.length&&(i[E]=c)}}function o(u,i){for(let f=0;f<i.length;f++)i[f]=u[i[f]]}function g(u,i){for(const f of i)if(f!=null)return(0,a._m)(u,f);return n.fS.other}function m(u){const{schema:i,data:f}=u;if(!i||!i.fields)throw new Error("JSON needs a fields definition");const c=f?f.values.reduce((p,h)=>Math.max(p,h.length),0):0,E=i.fields.map((p,h)=>{let y=f?f.values[h]:[],s=y.length,v=p.type;s!==c&&(y.length=c,y.fill(void 0,s));let C=f?.entities?.[h];C&&r(C,y);let D=f?.enums?.[h];D&&(o(D,y),v=n.fS.string);const M=f?.nanos?.[h],P={...p,type:v??g(p.name,y),config:p.config??{},values:y,entities:C??{}};return M!=null&&(P.nanos=M),P});return{...i,fields:E,length:c}}function d(u){const i={values:[]},f=[];let c=!1;const E={refId:u.refId,meta:u.meta,name:u.name,fields:u.fields.map(p=>{const{values:h,nanos:y,state:s,display:v,...C}=p;return delete C.entities,i.values.push(h),y!=null?(f.push(y),c=!0):f.push(null),C})};return c&&(i.nanos=f),{schema:E,data:i}}},98579:(J,R,e)=>{"use strict";e.d(R,{U:()=>a});var n=e(98975);class a extends n.G{constructor(r){super(),this.data=r,this.index=0;const o={},g={};for(let m=0;m<r.fields.length;m++){const d=r.fields[m];if(!d.name)continue;g[d.name]=d;const u=()=>d.values.get(this.index);o.hasOwnProperty(d.name)||Object.defineProperty(o,d.name,{enumerable:!0,get:u}),o.hasOwnProperty(m.toString())||Object.defineProperty(o,m,{enumerable:!1,get:u})}this.obj=o,this.fields=g}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(r){if(!this.dataFrame||!this.dataFrame.fields)return;const o=this.dataFrame.fields[r];if(!(!o||!o.display))return o.display}get(r){return this.index=r,this.obj}toArray(){return new Array(this.data.length).fill(0).map((r,o)=>({...this.get(o)}))}}},76892:(J,R,e)=>{"use strict";e.d(R,{N:()=>l});var n=e(89591),a=e(53305);class l{constructor(o){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=o.fields.map((g,m)=>({...g,index:m}));for(let g=0;g<o.fields.length;g++){const m=o.fields[g];if(m.type===n.fS.other){const d=(0,a.fu)(m);d&&(m.type=d)}this.fieldByType[m.type]||(this.fieldByType[m.type]=[]),this.fieldByType[m.type].push({...m,index:g}),this.fieldByName[m.name]?console.warn("Duplicate field names in DataFrame: ",m.name):this.fieldByName[m.name]={...m,index:g}}}getFields(o){if(!o)return[...this.fields];const g=this.fieldByType[o];return g?[...g]:[]}hasFieldOfType(o){const g=this.fieldByType[o];return g&&g.length>0}getFirstFieldOfType(o,g=!1){return this.fieldByType[o]?.find(u=>g||!u.config.custom?.hidden)}hasFieldNamed(o){return!!this.fieldByName[o]}hasFieldWithNameAndType(o,g){return!!this.fieldByName[o]&&this.fieldByType[g].filter(m=>m.name===o).length>0}getFieldByName(o){return this.fieldByName[o]}getFieldsByLabel(o,g){return Object.values(this.fieldByName).filter(m=>m.labels&&m.labels[o]===g)}}},7906:(J,R,e)=>{"use strict";e.d(R,{Y:()=>g,v:()=>m});var n=e(86832),a=e(89591),l=e(53305);function r(d,u){return u.type||(u.name==="time"||u.name==="Time"?u.type=a.fS.time:u.type=(0,l.LI)(d)),u.type===a.fS.number?i=>parseFloat(i):u.type===a.fS.boolean?i=>!(i[0]==="F"||i[0]==="f"||i[0]==="0"):i=>i}var o=e(98975);const g=void 0;class m extends o.G{constructor(u,i){if(super(),this.fields=[],this.first=[],this.parsers=void 0,this.creator=i||(f=>f??[]),u){const{name:f,refId:c,meta:E,fields:p}=u;if(f&&(this.name=f),c&&(this.refId=c),E&&(this.meta=E),p)for(const h of p)this.addField(h)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(u,i){return this.addField({name:i||"",type:(0,l.LI)(u)})}addField(u,i){let f;u.values&&(f=u.values);let c=u.type;!c&&(u.name==="time"||u.name==="Time")?c=a.fS.time:(!c&&f&&f.length&&(c=(0,l.LI)(f[0])),c||(c=a.fS.other));let E=u.name;E||(E=`Field ${this.fields.length+1}`);const p={...u,name:E,type:c,config:u.config||{},values:this.creator(f)};if(c===a.fS.other&&(c=(0,l.fu)(p),c&&(p.type=c)),this.fields.push(p),this.first=this.fields[0].values,i)for(;p.values.length<i;)p.values.push(g);else this.validate();return p}validate(){const u=this.fields.reduce((i,f)=>Math.max(i,f.values.length),0);for(const i of this.fields)for(;i.values.length!==u;)i.values.push(g)}setParser(u,i){return this.parsers||(this.parsers=new Map),this.parsers.set(u,i),i}parseValue(u,i){let f=this.parsers?.get(u);return f||(f=this.setParser(u,r(i,u))),f(i)}appendRow(u){for(let i=this.fields.length;i<u.length;i++)this.addField({name:`Field ${i+1}`,type:(0,l.LI)(u[i])});if(this.length<1)for(let i=0;i<this.fields.length;i++){const f=this.fields[i];(!f.type||f.type===a.fS.other)&&(f.type=(0,l.LI)(u[i]))}for(let i=0;i<this.fields.length;i++){const f=this.fields[i];let c=u[i];f.type!==a.fS.string&&(0,n.isString)(c)&&(c=this.parseValue(f,c)),f.values.push(c)}}push(...u){for(const i of u)this.add(i);return this.length}reverse(){for(const u of this.fields)u.values.reverse();return this}add(u){const i=u;for(const f of this.fields){let c=i[f.name];f.type!==a.fS.string&&(0,n.isString)(c)&&(c=this.parseValue(f,c)),c===void 0&&(c=g),f.values.push(c)}}set(u,i){if(u>this.length)throw new Error("Unable to set value beyond current length");const f=i||{};for(const c of this.fields)c.values[u]=f[c.name]}get(u){const i={};for(const f of this.fields)i[f.name]=f.values[u];return i}toJSON(){return(0,l.og)(this)}}},26058:(J,R,e)=>{"use strict";e.d(R,{Av:()=>f,Ko:()=>p,MB:()=>y,T0:()=>m,_A:()=>c});var n=e(89591),a=e(36822),l=e(82837),r=e(72964),o=e(53305),g=e(93313),m=(M=>(M.Append="append",M.Replace="replace",M))(m||{});const d="__name__";var u=(M=>(M[M.wide=0]="wide",M[M.labels=1]="labels",M))(u||{});const i=class{constructor(M){this.options=M,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:"replace",length:0},this.serialize=(P,x,S)=>{const I=x?Object.assign({},{...this.options,...x}):this.options,T=(0,o.Aw)(this,P),O=C(T.fields.map(B=>B.values),typeof S?.maxLength=="number"?Math.min(S.maxLength,I.maxLength):I.maxLength,this.timeFieldIndex,I.maxDelta);T.fields=T.fields.map(B=>({...B,values:B.values.slice(O)}));const A=T.fields[0]?.values?.length??0;return{...T,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:A,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:I}},this.initFromSerialized=P=>{this.name=P.name,this.refId=P.refId,this.meta=P.meta,this.length=P.length,this.labels=P.labels,this.schemaFields=P.schemaFields,this.timeFieldIndex=P.timeFieldIndex,this.pushMode=P.pushMode,this.packetInfo.length=P.packetInfo.length,this.packetInfo.number=P.packetInfo.number,this.packetInfo.action="replace",this.packetInfo.schemaChanged=!0,this.fields=P.fields.map(x=>({...x,type:x.type??n.fS.other,config:x.config??{},values:x.values??[]})),v(this.fields.map(x=>x.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:P,maxDelta:x})=>{const S=P&&this.options.maxLength<P,I=x&&this.options.maxDelta<x,T=x&&this.options.maxDelta===1/0;return!!(S||I||T)},this.resize=({maxLength:P,maxDelta:x})=>{x&&(this.options.maxDelta===1/0?this.options.maxDelta=x:this.options.maxDelta=Math.max(x,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,P??0)},this.pushNewValues=P=>{if(!P?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=P[0].length,this.packetInfo.schemaChanged=!1,this.options.action==="append"?s(this.fields.map(S=>S.values),P,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(P.forEach((S,I)=>{this.fields[I]&&(this.fields[I].values=S)}),v(this.fields.map(S=>S.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const x=this.fields?.[0]?.values.length;x!==void 0&&(this.length=x)},this.resetStateCalculations=()=>{this.fields.forEach(P=>{P.state={...P.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=P=>this.fields.map((x,S)=>P(x)?S:void 0).filter(x=>x!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(P=>{const x=P.values;return x.slice(Math.max(x.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>!!this.packetInfo.length,this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action==="replace"}push(M){const{schema:P,data:x}=M;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,P){this.pushMode=0,this.timeFieldIndex=P.fields.findIndex(O=>O.type===n.fS.time);const S=P.fields[0];this.timeFieldIndex===1&&S.type===n.fS.string&&(S.name==="labels"||S.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const I=this.pushMode===1?P.fields.slice(1):P.fields;this.refId=P.refId,P.meta&&(this.meta={...P.meta});const{displayNameFormat:T}=this.options;if(D(this.schemaFields,I)){const O=I.length;this.fields.forEach((A,B)=>{const b=I[B%O];A.config=b.config??{},A.labels=b.labels}),T&&this.fields.forEach(A=>{const B={[d]:A.name,...A.labels};A.config.displayNameFromDS=(0,r.W)(T,B)})}else{this.packetInfo.schemaChanged=!0;const O=this.pushMode===0;this.fields=I.map(A=>{const B=A.config??{};if(T){const b={[d]:A.name,...A.labels};B.displayNameFromDS=(0,r.W)(T,b)}return{config:B,name:A.name,labels:A.labels,type:A.type??n.fS.other,values:O?this.fields.find(b=>b.name===A.name&&A.type===b.type)?.values??Array(this.length).fill(void 0):[]}})}this.schemaFields=I}if(x&&x.values.length&&x.values[0].length){let{values:S,entities:I}=x;if(I&&I.forEach((O,A)=>{O&&(0,g.Jy)(O,S[A])}),this.pushMode===1){const O=E(S);for(const b of O.keys())this.labels.has(b)||(this.packetInfo.schemaChanged=!0,this.addLabel(b));let A=Array(this.schemaFields.length).fill([]),B=[];this.labels.forEach(b=>{B.push(O.get(b)??A)}),S=(0,l.v_)(B)}if(S.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${S.length} (labels=${this.pushMode===1})`);this.fields=S.map((O,A)=>{let B=`Field ${A}`,b=(0,o.LI)(O[0]);return A===0&&b===n.fS.number&&O[0]>1600016688632&&(b=n.fS.time,B="Time"),{name:B,type:b,config:{},values:[]}})}let T=S;this.packetInfo.length=S[0].length,this.alwaysReplace||!this.length?this.packetInfo.action="replace":(this.packetInfo.action="append",T=this.fields.map(O=>O.values),s(T,S,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),T.forEach((O,A)=>{const B=this.fields[A],{state:b}=B;B.values=O,b&&(b.calcs=void 0)}),this.length=T[0].length}return{...this.packetInfo}}addLabel(M){const{displayNameFormat:P}=this.options,x=this.labels.size,S=h(M);if(x===0)this.fields.forEach((I,T)=>{if(T>0&&(I.labels=S,P)){const O={[d]:I.name,...S};I.config.displayNameFromDS=(0,r.W)(P,O)}});else for(let I=1;I<this.schemaFields.length;I++){let T=this.schemaFields[I];const O=T.config??{};if(P){const A={[d]:T.name,...S};O.displayNameFromDS=(0,r.W)(P,A)}this.fields.push({...T,config:O,labels:S,values:Array(this.length).fill(void 0)})}this.labels.add(M)}};let f=i;f.deserialize=M=>{const P=new i(M.options);return P.initFromSerialized(M),P},f.empty=M=>new i(c(M)),f.fromDataFrameJSON=(M,P)=>{const x=new i(c(P));return x.push(M),x};function c(M){return{maxLength:M?.maxLength??1e3,maxDelta:M?.maxDelta??1/0,action:M?.action??"append",displayNameFormat:M?.displayNameFormat}}function E(M){let P=new Set(M[0]),x=new Map;P.forEach(S=>{let I=Array(M.length-1).fill(null).map(()=>[]);x.set(S,I)});for(let S=0;S<M[0].length;S++){let I=x.get(M[0][S]);for(let T=1;T<M.length;T++)I[T-1].push(M[T][S])}return x}function p(M,P,x,S){let I;x=x||0,S=S||P.length-1;let T=S<=2147483647;for(;S-x>1;)I=T?x+S>>1:Math.floor((x+S)/2),P[I]<M?x=I:S=I;return M-P[x]<=P[S]-M?x:S}function h(M){if(!M.length)return{};if(M.charAt(0)==="{")return(0,a.J8)(M);const P={};return M.split(",").forEach(x=>{const[S,I]=x.trim().split("=");P[S]=I}),P}function y(M){const P=M.packetInfo;return P?.action?P:void 0}function s(M,P,x=1/0,S=0,I=1/0){for(let T=0;T<M.length;T++)for(let O=0;O<P[T].length;O++)M[T].push(P[T][O]);return v(M,x,S,I)}function v(M,P=1/0,x=0,S=1/0){const I=C(M,P,x,S);if(I)for(let T=0;T<M.length;T++)M[T].splice(0,I);return I}function C(M,P=1/0,x=0,S=1/0){if(!M[0]?.length)return 0;const I=M[0].length;let T=0;if(I>P&&(T=I-P),S!==1/0&&x>=0){const O=M[x],A=O[T],B=O[I-1];B-A>S&&(T=p(B-S,O,T))}return T}function D(M,P){if(M?.length!==P.length)return!1;for(let x=0;x<M.length;x++){const S=M[x],I=P[x];if(S.name!==I.name||S.type!==I.type)return!1}return!0}},2906:(J,R,e)=>{"use strict";e.d(R,{$q:()=>l,GV:()=>a,YP:()=>g,jC:()=>r,q2:()=>n,r7:()=>o});const n=(m,d)=>({name:m,columns:d}),a=m=>m.columns,l=(m,d)=>m.columns[d],r=(m,d,u)=>m.columns[d].values[u],o=(m,d,u)=>m.columns.map(i=>i.values[u]),g=(m,d)=>m[d]},99977:(J,R,e)=>{"use strict";e.d(R,{Ch:()=>l,Vv:()=>g,nl:()=>r});var n=e(86832),a=e.n(n);function l(m,d,u){if(m===d)return!0;if(m?.fields?.length!==d?.fields?.length||m.name!==d.name)return!1;for(let i=0;i<m.fields.length;i++){const f=m.fields[i],c=d.fields[i];if(f.type!==c.type||f.name!==c.name)return!1;if(u)continue;if(f.labels&&c.labels&&!g(f.labels,c.labels))return!1;const E=f.config,p=c.config;let h=Object.keys(E),y=Object.keys(p);if(h.length!==y.length)return!1;for(const s of h){if(!(s in p))return!1;if(s!=="interval"&&!(0,n.isEqual)(E[s],p[s]))return!1}}return!0}function r(m,d,u){if(m===d)return!0;if(m?.length!==d?.length)return!1;for(let i=0;i<m.length;i++)if(!u(m[i],d[i]))return!1;return!0}const o=(m,d)=>m===d;function g(m,d,u=o){if(m===d)return!0;const i=Object.keys(m),f=Object.keys(d);if(i.length!==f.length)return!1;for(let c of i)if(!u(m[c],d[c]))return!1;return!0}},65423:(J,R,e)=>{"use strict";e.d(R,{$q:()=>g.$q,Av:()=>f.Av,Aw:()=>o.Aw,Ch:()=>u.Ch,DP:()=>o.DP,F9:()=>o.F9,GV:()=>g.GV,Ib:()=>d.Ib,Ji:()=>o.Ji,Jy:()=>d.Jy,Ko:()=>f.Ko,LI:()=>o.LI,N:()=>a.N,Pc:()=>m.P,SX:()=>o.SX,T0:()=>f.T0,US:()=>n.U,Vv:()=>u.Vv,Y:()=>d.Y,Y6:()=>o.Y6,YP:()=>g.YP,Yi:()=>r.Y,Zr:()=>o.Zr,_m:()=>o._m,a2:()=>l.a,aK:()=>o.aK,aY:()=>o.aY,at:()=>o.at,fh:()=>o.fh,fu:()=>o.fu,g0:()=>o.g0,iB:()=>m.i,jC:()=>g.jC,m$:()=>i.m$,nl:()=>u.nl,og:()=>o.og,pP:()=>i.pP,q2:()=>g.q2,r7:()=>g.r7,sV:()=>o.sV,vA:()=>r.v,vP:()=>d.vP,xI:()=>i.xI,z4:()=>o.z4,zR:()=>o.zR});var n=e(98579),a=e(76892),l=e(93648),r=e(7906),o=e(53305),g=e(2906),m=e(33975),d=e(93313),u=e(99977),i=e(65038),f=e(26058)},53305:(J,R,e)=>{"use strict";e.d(R,{Aw:()=>B,DP:()=>y,F9:()=>V,Ji:()=>D,LI:()=>s,SX:()=>C,Y6:()=>T,Zr:()=>S,_m:()=>h,aK:()=>I,aY:()=>M,at:()=>K,fh:()=>O,fu:()=>v,g0:()=>x,og:()=>A,sV:()=>b,z4:()=>P,zR:()=>w});var n=e(86832),a=e.n(n),l=e(92403),r=e(49372),o=e(69330),g=e(89591),m=e(10694),d=e(33975),u=e(93313);function i(z){const G=z.columns.map(Q=>{const{text:j,type:F,...k}=Q;return{name:j?.length?j:Q,config:k||{},values:[],type:F&&Object.values(g.fS).includes(F)?F:g.fS.other}});if(!(0,n.isArray)(z.rows))throw new Error(`Expected table rows to be array, got ${typeof z.rows}.`);for(const Q of z.rows)for(let j=0;j<G.length;j++)G[j].values.push(Q[j]);for(const Q of G)if(Q.type===g.fS.other){const j=v(Q);j&&(Q.type=j)}return{fields:G,refId:z.refId,meta:z.meta,name:z.name,length:z.rows.length}}function f(z){const G=[],Q=[],j=z.datapoints||z.points;for(const k of j)Q.push(k[0]),G.push(k[1]);const F=[{name:g.Ls,type:g.fS.time,config:{},values:G},{name:g.M5,type:g.fS.number,config:{unit:z.unit},values:Q,labels:z.tags}];return z.title&&(F[1].config.displayNameFromDS=z.title),{name:z.target||z.name,refId:z.refId,meta:z.meta,fields:F,length:Q.length}}function c(z){const G=[],Q=[];for(let j=0;j<z.data.length;j++){const F=z.data[j];G.push(F[1]),Q.push(F[0])}return{name:z.label,fields:[{name:z.label||g.M5,type:g.fS.number,config:{},values:G},{name:g.Ls,type:g.fS.time,config:{unit:"dateTimeAsIso"},values:Q}],length:G.length}}function E(z){const G=[{name:z.target,type:g.fS.other,labels:z.tags,config:{unit:z.unit,filterable:z.filterable},values:[]}];for(const Q of z.datapoints)G[0].values.push(Q);return{name:z.target,refId:z.target,meta:{json:!0},fields:G,length:z.datapoints.length}}const p=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function h(z,G){return z&&(z=z.toLowerCase(),z==="date"||z==="time")?g.fS.time:s(G)}function y(z){return z instanceof Date||(0,l.v9)(z)?g.fS.time:(0,n.isNumber)(z)?g.fS.number:(0,n.isString)(z)?g.fS.string:(0,n.isBoolean)(z)?g.fS.boolean:g.fS.other}function s(z){return z instanceof Date||(0,l.v9)(z)?g.fS.time:(0,n.isNumber)(z)?g.fS.number:(0,n.isString)(z)?p.test(z)?g.fS.number:z==="true"||z==="TRUE"||z==="True"||z==="false"||z==="FALSE"||z==="False"?g.fS.boolean:g.fS.string:(0,n.isBoolean)(z)?g.fS.boolean:g.fS.other}function v(z){if(z.name){const G=z.name.toLowerCase();if(G==="date"||G==="time")return g.fS.time}for(let G=0;G<z.values.length;G++){const Q=z.values[G];if(Q!=null)return s(Q)}}const C=(z,G=!1)=>{for(const Q of z.fields)if(!Q.type||Q.type===g.fS.other||G)return{...z,fields:z.fields.map(j=>j.type&&j.type!==g.fS.other&&!G?j:{...j,type:v(j)||g.fS.other})};return z},D=z=>!!(z&&z.hasOwnProperty("columns")),M=z=>!!(z&&z.hasOwnProperty("fields")),P=z=>!!(M(z)&&z.hasOwnProperty("value"));function x(z){if("fields"in z)return"length"in z&&z.fields[0]?.values?.get?z:K(z);if(z.hasOwnProperty("type")&&z.type==="docs")return E(z);if(z.hasOwnProperty("datapoints")||z.hasOwnProperty("points"))return f(z);if(z.hasOwnProperty("data"))return z.hasOwnProperty("schema")?(0,u.vP)(z):c(z);if(z.hasOwnProperty("columns"))return i(z);if(Array.isArray(z))return(0,d.P)(z);throw console.warn("Can not convert",z),new Error("Unsupported data format")}const S=z=>{const{fields:G}=z,Q=z.length,j=[];if(G.length===2){const{timeField:F,timeIndex:k}=b(z);if(F){const Y=G[k===0?1:0],Z=G[k];for(let ae=0;ae<Q;ae++)j.push([Y.values[ae],Z.values[ae]]);return{alias:z.name,target:(0,o.CZ)(Y,z),datapoints:j,unit:G[0].config?G[0].config.unit:void 0,refId:z.refId,meta:z.meta}}}for(let F=0;F<Q;F++){const k=[];for(let _=0;_<G.length;_++)k.push(G[_].values[F]);j.push(k)}return z.meta&&z.meta.json?{alias:G[0].name||z.name,target:G[0].name||z.name,datapoints:G[0].values,filterable:G[0].config?G[0].config.filterable:void 0,type:"docs"}:{columns:G.map(F=>{const{name:k,config:_}=F;if(_){const{...Y}=_;return Y.text=k,Y}return{text:k}}),type:"table",refId:z.refId,meta:z.meta,rows:j}};function I(z,G,Q=!1){const j=z.fields[G];if(!j)return z;const F=[];for(let _=0;_<z.length;_++)F.push(_);const k=(0,r.Mo)(j,Q);return F.sort(k),{...z,fields:z.fields.map(_=>{const Y={..._,values:_.values.map((ae,ce)=>_.values[F[ce]])},{nanos:Z}=_;return Z!==void 0&&(Y.nanos=Z.map((ae,ce)=>Z[F[ce]])),Y})}}function T(z){return{...z,fields:z.fields.map(G=>{const Q=[...G.values];Q.reverse();const j={...G,values:Q},{nanos:F}=G;if(F!==void 0){const k=[...F];k.reverse(),j.nanos=k}return j})}}function O(z,G){const Q=[];for(const j of z.fields)Q.push(j.values[G]);return Q}function A(z){return B(z)}function B(z,G){return{fields:(G?z.fields.filter(G):z.fields).map(F=>{let k=F.values;return{name:F.name,type:F.type,config:F.config,values:k,labels:F.labels}}),refId:z.refId,meta:z.meta,name:z.name}}const b=z=>{for(let G=0;G<z.fields.length;G++)if(z.fields[G].type===g.fS.time)return{timeField:z.fields[G],timeIndex:G};return{}};function W(z){const G=C(x(z));if(G.fields&&G.fields.length)for(const Q of G.fields)Q.state=null;return G}function V(z){return!z||!(0,n.isArray)(z)?[]:z.map(G=>W(G))}function w(z,G){const{series:Q,annotations:j}=z;if(z.state===m.Gu.Loading&&Q.length===0)return G||(G=z),{...G,state:m.Gu.Loading,request:z.request};const F=performance.now(),k=Q.map(Z=>W(Z)),_=V(j),Y=performance.now();return{...z,series:k,annotations:_,timings:{dataProcessingTime:Y-F}}}function K(z){let G=0;const Q=z.fields.map((j,F)=>{const{state:k,..._}=j;return _.name||(_.name=`Field ${F+1}`),_.config||(_.config={}),_.values?_.values.length>G&&(G=_.values.length):_.values=new Array(G),_.type||(_.type=v(_)??g.fS.other),_});return{...z,fields:Q,length:G}}},65038:(J,R,e)=>{"use strict";e.d(R,{m$:()=>o,pP:()=>l,xI:()=>r});var n=e(89591),a=e(53305);function l(g){return g.fields.length>2?!1:!!g.fields.find(m=>m.type===n.fS.time)}function r(g){return!g.find(m=>!l(m))}function o(g){for(let m=0;m<g.length;m++){const d=(0,a.sV)(g[m]);if(d.timeField!==void 0&&d.timeIndex!==void 0)return!0}return!1}},73:(J,R,e)=>{"use strict";e.d(R,{K:()=>o,Z:()=>g});var n=e(86832),a=e.n(n),l=e(54554);let r=()=>l.Ys;const o=m=>{r=m??r},g=m=>m?.timeZone&&!(0,n.isEmpty)(m.timeZone)?m.timeZone:r()??l.Ys},77877:(J,R,e)=>{"use strict";e.r(R),e.d(R,{isMathString:()=>o,isValid:()=>m,parse:()=>g,parseDateMath:()=>d,roundToFiscal:()=>u});var n=e(86832),a=e.n(n),l=e(92403);const r=["y","M","w","d","h","m","s","Q"];function o(i){return i?!!(typeof i=="string"&&(i.substring(0,3)==="now"||i.includes("||"))):!1}function g(i,f,c,E){if(i){if(typeof i!="string")return(0,l.v9)(i)?i:(0,n.isDate)(i)?(0,l.CQ)(i):void 0;{let p,h="",y,s;return i.substring(0,3)==="now"?(p=(0,l.GY)(c),h=i.substring(3)):(y=i.indexOf("||"),y===-1?(s=i,h=""):(s=i.substring(0,y),h=i.substring(y+2)),p=(0,l.CQ)(s,l.VJ)),h.length?d(h,p,f,E):p}}}function m(i){const f=g(i);return f&&(0,l.v9)(f)?f.isValid():!1}function d(i,f,c,E=0){const p=i.replace(/\s/g,""),h=(0,l.CQ)(f);let y=0;const s=p.length;for(;y<s;){const v=p.charAt(y++);let C,D,M,P=!1;if(v==="/")C=0;else if(v==="+")C=1;else if(v==="-")C=2;else return;if(isNaN(parseInt(p.charAt(y),10)))D=1;else if(p.length===2)D=parseInt(p.charAt(y),10);else{const S=y;for(;!isNaN(parseInt(p.charAt(y),10));)if(y++,y>10)return;D=parseInt(p.substring(S,y),10)}if(C===0&&D!==1)return;M=p.charAt(y++),M==="f"&&(M=p.charAt(y++),P=!0);const x=M;if((0,n.includes)(r,x))C===0?P?u(E,h,x,c):c?h.endOf(x):h.startOf(x):C===1?h.add(D,x):C===2&&h.subtract(D,x);else return}return h}function u(i,f,c,E){switch(c){case"y":return E?u(i,f,c,!1).add(11,"M").endOf("M"):f.subtract((f.month()-i+12)%12,"M").startOf("M"),f;case"Q":return E?u(i,f,c,!1).add(2,"M").endOf("M"):f.subtract((f.month()-i+12)%3,"M").startOf("M"),f;default:return}}},5195:(J,R,e)=>{"use strict";e.d(R,{IA:()=>f,Ks:()=>m,RA:()=>g,fI:()=>c,iX:()=>d,jO:()=>i,qb:()=>u,vT:()=>o});var n=e(92570),a=e(47607),l=e(32066);const r={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function o(p,h=!0){if((0,n.Z)(p.start,p.end))return"";const y=(0,l.Z)(p);return Object.entries(y).reduce((s,[v,C])=>C&&C!==0&&!(v==="seconds"&&!h&&s)?s+`${s!==""?" ":""}${C}${r[v][0]}`:s,"")}function g(p){return p.split(" ").reduce((h,y)=>{const s=y.match(/(\d+)(.+)/),v=s?.[1],C=s?.[2];if(!(v&&C))return h;const D=Object.entries(r).find(([P,x])=>x?.includes(s[2])),M=parseInt(v,10);return D?{...h,[D[0]]:M}:h},{})}function m(p,h){return(0,a.Z)(p,h)}function d(p){const h=new Date;return m(h,p).getTime()-h.getTime()}function u(p){return!isNaN(Date.parse(p))}function i(p){for(const h of p.trim().split(" ")){const y=h.match(/(\d+)(.+)/);if(y===null||y.length!==3||!Object.entries(r).find(([v,C])=>C?.includes(y[2]))?.[0])return!1}return!0}function f(p){return E(p,["h","m","s","ms","us","\xB5s","ns"])}function c(p){return E(p,["y","M","w","d","h","m","s","ms","us","\xB5s","ns"])}function E(p,h){for(const y of p.trim().split(" ")){const s=y.match(/([0-9]*[.]?[0-9]+)(.+)/);if(s===null||s.length!==3||!h.includes(s[2]))return!1}return!0}},47330:(J,R,e)=>{"use strict";e.d(R,{Ji:()=>r,U6:()=>o,zf:()=>l});const n="YYYY-MM-DD HH:mm:ss",a="YYYY-MM-DD HH:mm:ss.SSS";class l{constructor(){this.fullDate=n,this.fullDateMS=a,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(d){this.fullDate=d.fullDate,this.interval=d.interval,d.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=r({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=r({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=r({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=r({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=r({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=r({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=r({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(d){return`time:${d?this.fullDateMS:this.fullDate}`}}function r(m,d,u){if(g())return u??n;!d&&navigator&&(d=[...navigator.languages]);const i=new Intl.DateTimeFormat(d||void 0,m),f=i.formatToParts(new Date),E={year:"YYYY",month:"MM",day:"DD",hour:i.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return f.map(p=>E[p.type]||p.value).join("")}const o=new l,g=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},48069:(J,R,e)=>{"use strict";e.d(R,{E8:()=>m,Fm:()=>d,Hk:()=>u,dq:()=>o,lf:()=>g});var n=e(21306),a=e.n(n),l=e(73),r=e(47330);const o=(c,E)=>f(c,(0,l.Z)(E)).format(i(E)),g=(c,E)=>f(c,(0,l.Z)(E)).format(),m=(c,E)=>f(c,(0,l.Z)(E)).fromNow(),d=(c,E)=>f(c,(0,l.Z)(E)).format(`${r.U6.fullDate} z`),u=(c,E)=>f(c,(0,l.Z)(E)).format("z"),i=c=>c?.defaultWithMS?c?.format??r.U6.fullDateMS:c?.format??r.U6.fullDate,f=(c,E)=>{const p=c,h=a().tz.zone(E);if(h&&h.name)return a().utc(p).tz(h.name);switch(E){case"utc":return a().utc(p);default:return a().utc(p).local()}}},64469:(J,R,e)=>{"use strict";e.d(R,{$8:()=>r.$8,CQ:()=>l.CQ,C_:()=>l.C_,D2:()=>l.D2,E8:()=>g.E8,Fm:()=>g.Fm,GY:()=>l.GY,Hk:()=>g.Hk,IA:()=>d.IA,J:()=>m.J,Ji:()=>o.Ji,K7:()=>u.K,Kd:()=>l.Kd,Ks:()=>d.Ks,Ls:()=>l.Ls,Pr:()=>r.Pr,RA:()=>d.RA,RQ:()=>r.RQ,Rn:()=>n,U6:()=>o.U6,VJ:()=>l.VJ,Vs:()=>r.Vs,ZV:()=>r.ZV,Ze:()=>u.Z,cT:()=>a,dq:()=>g.dq,fI:()=>d.fI,iX:()=>d.iX,i_:()=>l.i_,ig:()=>l.ig,jN:()=>l.jN,jO:()=>d.jO,k4:()=>l.k4,lf:()=>g.lf,nA:()=>r.nA,np:()=>l.Ks,qb:()=>d.qb,v9:()=>l.v9,vT:()=>d.vT,zf:()=>o.zf,zh:()=>l.zh});var n=e(77877),a=e(81626),l=e(92403),r=e(36602),o=e(47330),g=e(48069),m=e(26234),d=e(5195),u=e(73)},92403:(J,R,e)=>{"use strict";e.d(R,{CQ:()=>f,C_:()=>c,D2:()=>m,GY:()=>E,Kd:()=>o,Ks:()=>i,Ls:()=>y,VJ:()=>l,i_:()=>r,ig:()=>p,jN:()=>h,k4:()=>g,v9:()=>d,zh:()=>u});var n=e(52291),a=e.n(n);const l=a().ISO_8601,r=s=>{a().locale(s)},o=()=>a().locale(),g=()=>a().localeData(),m=s=>s===null||typeof s=="string"||typeof s=="number"||s instanceof Date||Array.isArray(s)&&s.every(v=>typeof v=="string"||typeof v=="number")||d(s),d=s=>a().isMoment(s),u=(s,v)=>a().utc(s,v),i=(s,v)=>a().duration(s,v),f=(s,v)=>a()(s,v),c=s=>f(s),E=(s,v,C)=>{if(s==="utc")return u(v,C);if(s&&s!=="browser"){let D;if(typeof v=="string"&&C?D=a().tz(v,C,s):D=a().tz(v,s),d(D))return D}return f(v,C)},p=s=>a().weekdays().findIndex(v=>v.toLowerCase()===s.toLowerCase()),h=s=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(v=>v.toLowerCase()===s.toLowerCase()),y=s=>{const v="-weekStart",C=o().replace(v,""),D=s?h(s):-1;D!==-1?a().locale(C+v,{parentLocale:C,week:{dow:D}}):r(C)}},26234:(J,R,e)=>{"use strict";e.d(R,{J:()=>u});var n=e(86832),a=e.n(n),l=e(21306),r=e.n(l),o=e(73),g=e(77877),m=e(47330),d=e(92403);const u=(c,E)=>(0,d.v9)(c)?c:typeof c=="string"?i(c,E):f(c,E),i=(c,E)=>{if(c.indexOf("now")!==-1)return(0,g.isValid)(c)&&(0,g.parse)(c,E?.roundUp,E?.timeZone,E?.fiscalYearStartMonth)||r()();const p=(0,o.Z)(E),h=r().tz.zone(p),y=E?.format??m.U6.fullDate;if(h&&h.name)return r().tz(c,y,h.name);switch((0,n.lowerCase)(p)){case"utc":return r().utc(c,y);default:return r()(c,y)}},f=(c,E)=>{const p=c,h=(0,o.Z)(E),y=r().tz.zone(h);if(y&&y.name)return r().tz(p,y.name);switch((0,n.lowerCase)(h)){case"utc":return r().utc(p);default:return r()(p)}}},81626:(J,R,e)=>{"use strict";e.r(R),e.d(R,{calculateInterval:()=>M,convertRawToRange:()=>h,describeInterval:()=>S,describeTextRange:()=>f,describeTimeRange:()=>c,describeTimeRangeAbbreviation:()=>p,intervalToMs:()=>T,intervalToSeconds:()=>I,isFiscal:()=>s,isRelativeTimeRange:()=>v,isValidTimeSpan:()=>E,msRangeToTimeString:()=>D,relativeToTimeRange:()=>B,roundInterval:()=>O,secondsToHms:()=>C,timeRangeToRelative:()=>A});var n=e(86832),a=e.n(n),l=e(77877),r=e(48069),o=e(92403),g=e(26234);const m={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},d=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],u=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],i={};(0,n.each)(d,b=>{i[b.from+" to "+b.to]=b}),(0,n.each)(u,b=>{i[b.from+" to "+b.to]=b});function f(b){const W=b.indexOf("+")!==0;b.indexOf("now")===-1&&(b=(W?"now-":"now")+b);let V=i[b+" to now"];if(V)return V;W?V={from:b,to:"now",display:""}:V={from:"now",to:b,display:""};const w=/^now([-+])(\d+)(\w)/.exec(b);if(w){const K=w[3],z=parseInt(w[2],10),G=m[K];G&&(V.display=W?"Last ":"Next ",V.display+=z+" "+G.display,V.section=G.section,z>1&&(V.display+="s"))}else V.display=V.from+" to "+V.to,V.invalid=!0;return V}function c(b,W){const V=i[b.from.toString()+" to "+b.to.toString()];if(V)return V.display;const w={timeZone:W};if((0,o.v9)(b.from)&&(0,o.v9)(b.to))return(0,r.dq)(b.from,w)+" to "+(0,r.dq)(b.to,w);if((0,o.v9)(b.from)){const K=l.parse(b.to,!0,"utc");return K?(0,r.dq)(b.from,w)+" to "+(0,r.E8)(K,w):""}if((0,o.v9)(b.to)){const K=l.parse(b.from,!1,"utc");return K?(0,r.E8)(K,w)+" to "+(0,r.dq)(b.to,w):""}return b.to.toString()==="now"?f(b.from).display:b.from.toString()+" to "+b.to.toString()}const E=b=>b.indexOf("$")===0||b.indexOf("+$")===0?!0:f(b).invalid!==!0,p=(b,W)=>{if((0,o.v9)(b.from))return(0,r.Hk)(b.from,{timeZone:W});const V=l.parse(b.from,!0);return V?(0,r.Hk)(V,{timeZone:W}):""},h=(b,W,V,w)=>{const K=(0,g.J)(b.from,{roundUp:!1,timeZone:W,fiscalYearStartMonth:V,format:w}),z=(0,g.J)(b.to,{roundUp:!0,timeZone:W,fiscalYearStartMonth:V,format:w});return l.isMathString(b.from)||l.isMathString(b.to)?{from:K,to:z,raw:b}:{from:K,to:z,raw:{from:K,to:z}}};function y(b){return typeof b=="string"?b.indexOf("now")>=0:!1}function s(b){return typeof b.raw.from=="string"&&b.raw.from.indexOf("f")>0?!0:typeof b.raw.to=="string"&&b.raw.to.indexOf("f")>0}function v(b){return y(b.from)||y(b.to)}function C(b){const W=Math.floor(b/31536e3);if(W)return W+"y";const V=Math.floor(b%31536e3/86400);if(V)return V+"d";const w=Math.floor(b%31536e3%86400/3600);if(w)return w+"h";const K=Math.floor(b%31536e3%86400%3600/60);if(K)return K+"m";const z=Math.floor(b%31536e3%86400%3600%60);if(z)return z+"s";const G=Math.floor(b*1e3);return G?G+"ms":"less than a millisecond"}function D(b){const W=Number((b/1e3).toFixed()),V=Math.floor(W/60/60),w=Math.floor(W/60)-V*60,K=Number((W%60).toFixed());let z=V?V+"h":"",G=w?w+"min":"",Q=K?K+"sec":"";return z&&G?z=z+" ":z=z,(G||z)&&Q?G=G+" ":G=G,z+G+Q||"less than 1sec"}function M(b,W,V){let w=1;V&&(w=T(V));let K=O((b.to.valueOf()-b.from.valueOf())/W);return w>K&&(K=w),{intervalMs:K,interval:C(K/1e3)}}const P=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,x={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function S(b){if(Number(b))return{sec:x.s,type:"s",count:parseInt(b,10)};const W=b.match(P);if(!W||!(0,n.has)(x,W[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(x).join(", ")}"`);return{sec:x[W[2]],type:W[2],count:parseInt(W[1],10)}}function I(b){const W=S(b);return W.sec*W.count}function T(b){const W=S(b);return W.sec*1e3*W.count}function O(b){switch(!0){case b<10:return 1;case b<15:return 10;case b<35:return 20;case b<75:return 50;case b<150:return 100;case b<350:return 200;case b<750:return 500;case b<1500:return 1e3;case b<3500:return 2e3;case b<7500:return 5e3;case b<12500:return 1e4;case b<17500:return 15e3;case b<25e3:return 2e4;case b<45e3:return 3e4;case b<9e4:return 6e4;case b<21e4:return 12e4;case b<45e4:return 3e5;case b<75e4:return 6e5;case b<105e4:return 9e5;case b<15e5:return 12e5;case b<27e5:return 18e5;case b<54e5:return 36e5;case b<9e6:return 72e5;case b<162e5:return 108e5;case b<324e5:return 216e5;case b<864e5:return 432e5;case b<6048e5:return 864e5;case b<18144e5:return 6048e5;case b<36288e5:return 2592e6;default:return 31536e6}}function A(b,W=(0,o.CQ)()){const V=W.unix()-b.from.unix(),w=W.unix()-b.to.unix();return{from:V,to:w}}function B(b,W=(0,o.CQ)()){const V=(0,o.CQ)(W).subtract(b.from,"s"),w=b.to===0?(0,o.CQ)(W):(0,o.CQ)(W).subtract(b.to,"s");return{from:V,to:w,raw:{from:V,to:w}}}},36602:(J,R,e)=>{"use strict";e.d(R,{$8:()=>f,Pr:()=>u,RQ:()=>g,Vs:()=>m,ZV:()=>i,nA:()=>d});var n=e(86832),a=e.n(n),l=e(21306),r=e.n(l),o=e(73),g=(s=>(s.default="",s.localBrowserTime="browser",s.utc="utc",s))(g||{});const m=s=>{switch((0,o.Z)({timeZone:s})){case"browser":return"Local browser time";case"utc":return"UTC";default:return s}},d=s=>r().tz.zone(s),u=(s,v)=>{const C=c(s,v);return C||p(s,v)},i=(0,n.memoize)((s=!1)=>{const v=[];return s===!0?v.push("","browser","utc"):s&&v.push(...s),r().tz.names().reduce((C,D)=>{const M=y[D];return!Array.isArray(M)||M.length===0||C.push(D),C},v)}),f=(0,n.memoize)((s=!1)=>{const C=i(s).reduce((D,M)=>{const P=M.indexOf("/");if(P===-1){const S="";return D[S]=D[S]??[],D[S].push(M),D}const x=M.slice(0,P);return D[x]=D[x]??[],D[x].push(M),D},{});return Object.keys(C).map(D=>({name:D,zones:C[D]}))}),c=(s,v)=>{switch(s){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:s,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const C=(0,o.Z)(),M=C==="browser"||C==="utc"?c(C,v):p(C,v);return{countries:y[C]??[],abbreviation:"",offsetInMins:0,...M,ianaName:M?.ianaName??"",name:"Default",zone:s}}case"browser":{const C=r().tz.guess(!0),D=p(C,v);return{countries:y[C]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...D,name:"Browser Time",ianaName:D?.ianaName??"",zone:s}}default:return}},E=s=>/^(\+|\-).+/.test(s)?"":s,p=(s,v)=>{const C=r().tz.zone(s);if(C)return{name:s,ianaName:C.name,zone:s,countries:y[s]??[],abbreviation:E(C.abbr(v)),offsetInMins:C.utcOffset(v)}},h={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},y=(()=>r().tz.countries().reduce((s,v)=>r().tz.zonesForCountry(v).reduce((D,M)=>{D[M]||(D[M]=[]);const P=h[v];return P&&D[M].push({code:v,name:P}),D},s),{}))()},91395:(J,R,e)=>{"use strict";e.d(R,{F:()=>r});var n=e(67738),a=e(36497),l=e(81595);class r{constructor(){this.subscribers=new Map,this.emitter=new n.Z}publish(m){this.emitter.emit(m.type,m)}subscribe(m,d){return this.getStream(m).subscribe({next:d})}getStream(m){return new a.y(d=>{const u=i=>{d.next(i)};return this.emitter.on(m.type,u),this.subscribers.set(u,d),()=>{this.emitter.off(m.type,u),this.subscribers.delete(u)}})}newScopedBus(m,d){return new o([m],this,d)}emit(m,d){typeof m=="string"?this.emitter.emit(m,{type:m,payload:d}):this.emitter.emit(m.name,{type:m.name,payload:d})}on(m,d,u){if(d.wrapper=i=>{d(i.payload)},typeof m=="string"?this.emitter.on(m,d.wrapper):this.emitter.on(m.name,d.wrapper),u){const i=u.$on("$destroy",()=>{this.off(m,d),i()})}}off(m,d){if(typeof m=="string"){this.emitter.off(m,d.wrapper);return}this.emitter.off(m.name,d.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[m,d]of this.subscribers)d.complete(),this.subscribers.delete(m)}}class o{constructor(m,d,u){this.path=m,this.eventBus=d,this.filterConfig=u??{onlyLocal:!1}}publish(m){m.origin||(m.origin=this),this.eventBus.publish(m)}filter(m){return this.filterConfig.onlyLocal?m.origin===this:!0}getStream(m){return this.eventBus.getStream(m).pipe((0,l.h)(this.filter.bind(this)))}subscribe(m,d){return this.getStream(m).subscribe({next:d})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(m,d){return new o([...this.path,m],this,d)}}},36316:(J,R,e)=>{"use strict";e.d(R,{Ix:()=>m,Pl:()=>g,U6:()=>d,_m:()=>u,es:()=>a,n1:()=>o,v9:()=>r,xH:()=>l});var n=e(45276);class a extends n.R{}a.type="data-hover";class l extends n.m{}l.type="data-hover-clear";class r extends n.R{}r.type="data-select";class o extends n.R{}o.type="annotation-event";class g extends n.R{}g.type="dashboard-loaded";class m extends n.m{}m.type="datasource-updated-successfully";class d extends n.m{}d.type="datasource-test-succeeded";class u extends n.m{}u.type="datasource-test-failed"},71054:(J,R,e)=>{"use strict";e.d(R,{X:()=>a});const n=new Set;function a(l){if(n.has(l))throw new Error(`There is already an event defined with type '${l}'`);return n.add(l),{name:l}}},7593:(J,R,e)=>{"use strict";e.d(R,{Fb:()=>l.F,Ix:()=>r.Ix,Pl:()=>r.Pl,R_:()=>a.R,U6:()=>r.U6,Xw:()=>n.X,_m:()=>r._m,es:()=>r.es,mA:()=>a.m,n1:()=>r.n1,v9:()=>r.v9,xH:()=>r.xH});var n=e(71054),a=e(45276),l=e(91395),r=e(36316)},45276:(J,R,e)=>{"use strict";e.d(R,{R:()=>a,m:()=>n});class n{constructor(){this.type=this.__proto__.constructor.type}}class a extends n{constructor(r){super(),this.payload=r}}},24369:(J,R,e)=>{"use strict";e.d(R,{Z:()=>a});var n=e(77663);class a extends n.B{}},94123:(J,R,e)=>{"use strict";e.d(R,{U:()=>c,g:()=>p});var n=e(86832),a=e.n(n),l=e(53305),r=e(26234),o=e(92403),g=e(89591),m=e(97253),d=e(38450),u=e(83502),i=e(10124);const f={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function c(y){if(!y||(0,n.isEmpty)(y)||!y.field)return E;const s=y.field,v=s.config??{},{palette:C}=y.theme.visualization;let D=v.unit,M=D&&(f[D]||D.startsWith("time:")),P=!1;if(s.type===g.fS.time&&!M){if(D="dateTimeAsSystem",M=!0,s.values&&s.values.length>1){let b=s.values[0],W=s.values[s.values.length-1];typeof b=="string"?(b=(0,r.J)(b).unix(),W=(0,r.J)(W).unix()):(b/=1e3,W/=1e3),P=Math.abs(W-b)<60}}else s.type===g.fS.boolean?(0,u.br)(D)||(D="bool"):!D&&s.type===g.fS.string&&(D="string");const x=D?.startsWith("currency"),S=(0,u.br)(D),I=s.type===g.fS.number,O=!M&&!x&&!S&&!(D==="locale")&&I&&v.decimals==null,A=(0,u.Cf)(D||"none"),B=(0,i.NI)(s,y.theme);return(b,W)=>{const{mappings:V}=v,w=D==="string";M&&typeof b=="string"&&(b=(0,o.zh)(b).valueOf());let K=w?NaN:(0,m.I)(b),z,G,Q,j,F,k;if(V&&V.length>0){const Y=(0,d.vh)(V,b);Y&&(Y.text!=null&&(z=Y.text),Y.color!=null&&(j=y.theme.visualization.getColorByName(Y.color)),Y.icon!=null&&(F=Y.icon))}else if(s.type===g.fS.enum){if(b==null)return{text:"",numeric:NaN};const Y=+b;if(v&&v.type&&v.type.enum){const{text:Z,color:ae}=v.type.enum;if(z=Z?Z[Y]:`${b}`,j=ae?ae[Y]:void 0,j==null){const ce=C[Y%C.length];j=y.theme.visualization.getColorByName(ce)}}}if(!Number.isNaN(K)){if(z==null&&!(0,n.isBoolean)(b)){let Y;O&&W!=null?(Y=A(K,W,null,y.timeZone,P),Y.text=+Y.text+""):Y=A(K,v.decimals,null,y.timeZone,P),z=Y.text,Q=Y.suffix,G=Y.prefix}if(j==null){const Y=B(K);j=Y.color,k=Y.percent}}if(z==null&&(0,n.isArray)(b)&&(z=(0,n.join)(b,", ")),z==null&&(z=(0,n.toString)(b),z||(v.noValue?z=v.noValue:z="")),!j){const Y=B(-1/0);j=Y.color,k=Y.percent}const _={text:z,numeric:K,prefix:G,suffix:Q,color:j};return F!=null&&(_.icon=F),k!=null&&(_.percent=k),_}}function E(y){return{text:(0,n.toString)(y),numeric:(0,m.I)(y)}}function p(){return y=>({text:(0,l.DP)(y)==="other"?`${JSON.stringify(y,h())}`:`${y}`,numeric:null})}const h=()=>{const y=new WeakSet;return(s,v)=>{if(typeof v=="object"&&v!==null){if(y.has(v))return;y.add(v)}return v}}},73254:(J,R,e)=>{"use strict";e.d(R,{QY:()=>p,WO:()=>f,YO:()=>h,fD:()=>E});var n=e(64714),a=e(28643),l=e.n(a),r=e(63374),o=e(91249),g=e(3181),m=e(97898),d=e(77663),u=e(10124),i=e(49231);const f=new d.B(()=>[{id:m.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:y},{id:m.S.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:s},{id:m.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(v,C)=>(D,M,P)=>{const x=P??i.yM;return C.visualization.getColorByName(x.color)}},new c({id:m.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:v=>v.visualization.palette}),new c({id:m.S.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:v=>v.visualization.palette.filter(C=>o.getContrastRatio(v.visualization.getColorByName(C),v.colors.background.primary)>=v.colors.contrastThreshold)}),new c({id:m.S.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:v=>["green","yellow","red"]}),new c({id:m.S.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:v=>["red","yellow","green"]}),new c({id:m.S.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:v=>["dark-blue","super-light-yellow","dark-red"]}),new c({id:m.S.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:v=>["super-light-yellow","dark-red"]}),new c({id:m.S.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:v=>["blue","purple"]}),new c({id:m.S.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:v=>["super-light-yellow","dark-blue"]}),new c({id:m.S.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:v=>["panel-bg","dark-blue"]}),new c({id:m.S.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:v=>["panel-bg","dark-red"]}),new c({id:m.S.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:v=>["panel-bg","dark-green"]}),new c({id:m.S.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:v=>["panel-bg","dark-purple"]})]);class c{constructor(C){this.id=C.id,this.name=C.name,this.description=C.description,this.getNamedColors=C.getColors,this.isContinuous=C.isContinuous,this.isByValue=C.isByValue,this.useSeriesName=C.useSeriesName}getColors(C){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===C?this.colorCache:(this.colorCache=this.getNamedColors(C).map(C.visualization.getColorByName),this.colorCacheTheme=C,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,n.hD)(this.colorCache)),this.interpolator}getCalculator(C,D){const M=this.getColors(D);return this.isByValue?this.isContinuous?(P,x,S)=>this.getInterpolator()(x):(P,x,S)=>M[x*(M.length-1)]:this.useSeriesName?(P,x,S)=>M[Math.abs(l()(C.name))%M.length]:(P,x,S)=>{const I=C.state?.seriesIndex??0;return M[I%M.length]}}}function E(v){return f.get(v.config.color?.mode??m.S.Thresholds)}function p(v){return f.get(v??m.S.Thresholds)}function h(v,C){const D=E(v);if(!D.isByValue)return{color:D.getCalculator(v,C)(0,0),threshold:i.yM,percent:1};const M=(0,u.NI)(v,C),P=v.config.color?.seriesBy??"last",S=(0,g.Kx)({field:v,reducers:[P]})[P]??0;return M(S)}function y(v,C){return()=>C.visualization.getColorByName(v.config.color?.fixedColor??m.R)}function s(v,C){return()=>{const D=C.visualization.getColorByName(v.config.color?.fixedColor??m.R),M=[D],P=6,x=10,S=35,I=35;for(let O=1;O<P;O++)M.push((0,r.Z)(D).spin(O/P*x).brighten(O/P*S).toHexString()),M.push((0,r.Z)(D).spin(-(O/P)*x).darken(O/P*I).toHexString());const T=v.state?.seriesIndex??0;return M[T%M.length]}}},52366:(J,R,e)=>{"use strict";e.d(R,{E1:()=>E,HU:()=>f,cB:()=>y,dE:()=>h,gG:()=>M,nG:()=>s,n_:()=>c,pZ:()=>p,r5:()=>I,sg:()=>P});var n=e(86832),a=e.n(n),l=e(98579),r=e(53305),o=e(36085),g=e(3181),m=e(86981),d=e(89591),u=e(94123),i=e(69330);const f="__series.name",c="__field.displayName",E="__field.labels",p="__calc",h="__cell_",y=25,s=O=>{const{replaceVariables:A,reduceOptions:B,timeZone:b,theme:W}=O,V=B.calcs.length?B.calcs:[g.gz.last],w=[],K=(0,o.sq)(B.fields?{id:m.mi.byRegexp,options:B.fields}:{id:m.mi.numeric}),z=O.data??[],G=B.limit?B.limit:y;let Q=!1;for(let j=0;j<z.length&&!Q;j++){const F=z[j],{timeField:k}=(0,r.sV)(F),_=new l.U(F);for(let Y=0;Y<F.fields.length&&!Q;Y++){const Z=F.fields[Y],ae=Z.getLinks;if(!K(Z,F,z))continue;let ce=Z.config;Z.state?.range&&(ce={...ce,...Z.state?.range});let q=Z.config.displayName??"";const De=Z.display??(0,u.U)({field:Z,theme:O.theme,timeZone:b});if(B.values)for(let oe=0;oe<Z.values.length;oe++){Z.state=C(Z,w.length);const te=T(Z,oe),fe=De(Z.values[oe]),Te=v(F,Z,oe,A,te),ge=D(Te,O.fieldConfig,W);if(w.push({name:"",field:ce,display:{...fe,title:Te,color:ge??fe.color},view:_,colIndex:Y,rowIndex:oe,getLinks:ae?()=>ae({valueRowIndex:oe}):()=>[],hasLinks:M(Z)}),w.length>=G){Q=!0;break}}else{const oe=(0,g.Kx)({field:Z,reducers:V});for(const te of V){const fe=Z.state?.scopedVars??{};fe[p]={value:te,text:te};const Te=De(oe[te]);q!==""?Te.title=A(q,fe):Te.title=(0,i.CZ)(Z,F,z);let ge;O.sparkline&&(ge={y:F.fields[Y],x:k},te===g.gz.last?ge.highlightIndex=ge.y.values.length-1:te===g.gz.first&&(ge.highlightIndex=0)),w.push({name:te,field:ce,display:Te,sparkline:ge,view:_,colIndex:Y,getLinks:ae?()=>ae({calculatedValue:Te}):()=>[],hasLinks:M(Z)})}}}}return w.length===0&&w.push(x(O)),w};function v(O,A,B,b,W){const V=A.config.displayName;if(V)return V.indexOf(h)?b(I(V),W):b(V,W);let w=[],K=0;for(const z of O.fields)if(z!==A)if(z.type===d.fS.string){const G=z.values[B]??"",Q=z.display?z.display(G).text:G;Q.length>0&&w.push(Q)}else z.type===d.fS.number&&K++;return(K||w.length===0)&&w.push((0,i.CZ)(A,O)),w.join(" ")}function C(O,A){return{...O.state,seriesIndex:A}}function D(O,A,B){for(const b of A.overrides)if(b.matcher.id==="byName"&&b.matcher.options===O){for(const W of b.properties)if(W.id==="color"&&W.value)return B.visualization.getColorByName(W.value.fixedColor)}return null}function M(O){return O.config?.links?.length?O.config.links.length>0:!1}function P(O){let A="",B="",b="",W="";for(let V=0;V<O.length;V++){const w=O[V].display;w.text&&w.text.length>B.length&&(B=w.text),w.title&&w.title.length>A.length&&(A=w.title),w.prefix&&w.prefix.length>b.length&&(b=w.prefix),w.suffix&&w.suffix.length>W.length&&(W=w.suffix)}return{text:B,title:A,suffix:W,prefix:b}}function x(O){const A="No data",{fieldConfig:B,timeZone:b}=O,{defaults:W}=B,w=(0,u.U)({field:{type:d.fS.other,config:W},theme:O.theme,timeZone:b})(null),K=S(w,A);return{name:A,field:{...W,max:W.max??0,min:W.min??0},display:{text:K,numeric:0,color:w.color},hasLinks:!1}}function S(O,A){return!O||(0,n.isEmpty)(O.text)?A:O.text}function I(O){return O.replace(/\${__cell_(\d+)(.*?)}|\[\[__cell_(\d+)(.*?)\]\]|\$__cell_(\d+)(\S*)/g,(A,B,b,W,V,w,K)=>`\${__data.fields[${B??W??w}]${b??V??K}}`)}function T(O,A){return O.state?.scopedVars?.__dataContext?{...O.state?.scopedVars,__dataContext:{value:{...O.state?.scopedVars?.__dataContext.value,rowIndex:A}}}:O.state?.scopedVars}},52716:(J,R,e)=>{"use strict";e.d(R,{Cc:()=>B,Of:()=>A,SM:()=>C,Xu:()=>v,gb:()=>I,oB:()=>O});var n=e(86832),a=e.n(n),l=e(39953),r=e(92418),o=e(34547),g=e(53305),m=e(99977),d=e(91249),u=e(3181),i=e(36085),f=e(89591),c=e(97898),E=e(57837),p=e(24824),h=e(94123),y=e(10124),s=e(18985);function v(W){let V=null,w=null;const K=[u.gz.min,u.gz.max];for(const z of W)for(const G of z.fields)if(G.type===f.fS.number){const Q=(0,u.Kx)({field:G,reducers:K}),j=Q[u.gz.min],F=Q[u.gz.max];(V===null||j<V)&&(V=j),(w===null||F>w)&&(w=F)}return{min:V,max:w,delta:(w??0)-(V??0)}}function C(W){if(!W.data)return[];const V=W.fieldConfig;if(!V)return W.data;const w=W.fieldConfigRegistry??s.N;let K=0,z;const G=[];if(V.overrides)for(const Q of V.overrides){const j=i.Ls.get(Q.matcher.id);j&&G.push({match:j.get(Q.matcher.options),properties:Q.properties})}return W.data.map((Q,j)=>{const F={...Q};F.fields=F.fields.map(k=>({...k,config:(0,n.cloneDeep)(k.config),state:{...k.state}}));for(const k of F.fields){const _=k.config;k.state.scopedVars={__dataContext:{value:{data:W.data,frame:F,frameIndex:j,field:k}}};const Y={field:k,data:W.data,dataFrameIndex:j,replaceVariables:W.replaceVariables,fieldConfigRegistry:w};x(_,V.defaults,Y);for(const q of G)if(q.match(k,F,W.data))for(const De of q.properties)P(_,De,Y);let Z=k.type;if(!Z||Z===f.fS.other){const q=(0,g.fu)(k);q&&(Z=q)}const{range:ae,newGlobalRange:ce}=D(_,k,z,W.data);if(z=ce,k.state.seriesIndex=K,k.state.range=ae,k.type=Z,k.type!==f.fS.time&&K++,k.display=(0,h.U)({field:k,theme:W.theme,timeZone:W.timeZone}),k.config.unit!=="dateTimeFromNow"&&(k.display=M(k.display,2500)),k.getLinks=O(F,k,k.state.scopedVars,Y.replaceVariables,W.timeZone,W.dataLinkPostProcessor),k.type===f.fS.nestedFrames)for(const q of k.values)for(let De=0;De<q.length;De++)for(const oe of q[De].fields)oe.state={scopedVars:{__dataContext:{value:{data:q,frame:q[De],frameIndex:De,field:oe}}}},oe.getLinks=O(q[De],oe,oe.state.scopedVars,Y.replaceVariables,W.timeZone,W.dataLinkPostProcessor)}return F})}function D(W,V,w,K){if(V.type!==f.fS.number||(0,n.isNumber)(W.min)&&(0,n.isNumber)(W.max))return{newGlobalRange:w};if(W.fieldMinMax){const j=(0,y.dz)(V),F=W.min??j.min,k=W.max??j.max;return{range:{min:F,max:k,delta:k-F},newGlobalRange:w}}const z=w??v(K),G=W.min??z.min,Q=W.max??z.max;return{range:{min:G,max:Q,delta:Q-G},newGlobalRange:z}}function M(W,V=2500){const w=new Map;for(let K=-1;K<=15;K++)w.set(K,new Map);return(K,z)=>{let G=w.get(z??-1),Q=G.get(K);return Q||(G.size===V&&G.clear(),Q=W(K,z),Q.color&&(Q.color=(0,d.asHexString)(Q.color)),G.set(K,Q)),Q}}function P(W,V,w){const z=w.fieldConfigRegistry.getIfExists(V.id);if(!z)return;const G=z.process(V.value,w,z.settings);G==null?z.isCustom&&W.custom?(0,n.unset)(W.custom,z.path):(0,n.unset)(W,z.path):z.isCustom?(W.custom||(W.custom={}),(0,n.set)(W.custom,z.path,G)):(0,n.set)(W,z.path,G)}function x(W,V,w){W.links&&V.links&&(W.links=[...W.links,...V.links]);for(const K of w.fieldConfigRegistry.list())K.isCustom&&!W.custom&&(W.custom={}),S(K.isCustom?W.custom:W,K.isCustom?V.custom:V,K,w);I(W)}function S(W,V,w,K){const z=(0,n.get)(W,w.path);if(z==null){const G=K.fieldConfigRegistry.getIfExists(w.id);if(!G)return;if(G&&G.shouldApply(K.field)){const Q=G.process((0,n.get)(V,G.path),K,G.settings);Q!=null&&(0,n.set)(W,G.path,Q)}}}function I(W){const{thresholds:V}=W;if(W.color?W.color.mode||delete W.color:V&&(W.color={mode:c.S.Thresholds}),W.hasOwnProperty("min")&&W.hasOwnProperty("max")&&W.min>W.max){const w=W.max;W.max=W.min,W.min=w}}const T=W=>{const{link:V,linkModel:w,dataLinkScopedVars:K,field:z,replaceVariables:G}=W;return V.internal?(0,p._)({link:V,internalLink:V.internal,scopedVars:K,field:z,range:V.internal.range,replaceVariables:G}):w},O=(W,V,w,K,z,G)=>Q=>!V.config.links||V.config.links.length===0?[]:V.config.links.map(F=>{const k=b(W,V,w),_={...w,__dataContext:k},Y=(ae,ce,q)=>K(ae,{..._,...ce},q);Q.valueRowIndex!==void 0&&!isNaN(Q.valueRowIndex)?k.value.rowIndex=Q.valueRowIndex:k.value.calculatedValue=Q.calculatedValue;let Z;if(F.onClick)Z={href:F.url,title:K(F.title||"",_),target:F.targetBlank?"_blank":void 0,onClick:(ae,ce)=>{F.onClick({origin:ce??V,e:ae,replaceVariables:Y})},origin:V};else{let ae=F.onBuildUrl?F.onBuildUrl({origin:V,replaceVariables:Y}):F.url;ae&&(ae=E.u.assureBaseUrl(ae.replace(/\n/g,"")),ae=K(ae,_,o.b8.UriEncode),ae=E.u.processUrl(ae)),Z={href:ae,title:K(F.title||"",_),target:F.targetBlank?"_blank":void 0,origin:V}}return(G||T)({frame:W,field:V,dataLinkScopedVars:_,replaceVariables:K,config:Q,link:F,linkModel:Z})}).filter(F=>!!F);function A(W){if(!W||W.length===0)return[];const V=[...W],w=(0,h.g)();for(let K=0;K<V.length;K++){const z={...V[K]},G=[...z.fields];for(let Q=0;Q<G.length;Q++)G[Q]={...G[Q],display:w};V[K]={...z,fields:G}}return V}function B(W,V,w,K,z,G,Q){const j=W?.fieldConfigRegistry,F=(0,l.useRef)(0),k=(0,r.Z)(w?.series);return(0,l.useMemo)(()=>{if(!j||!V||!w)return;const _=w?.series;w.structureRev==null&&_&&k&&!(0,m.nl)(_,k,m.Ch)&&F.current++;const Y={structureRev:F.current,...w,series:C({data:_,fieldConfig:V,fieldConfigRegistry:j,replaceVariables:G,theme:z,timeZone:K,dataLinkPostProcessor:Q})};return w.annotations&&w.annotations.length>0&&(Y.annotations=C({data:w.annotations,fieldConfig:{defaults:{},overrides:[]},replaceVariables:G,theme:z,timeZone:K,dataLinkPostProcessor:Q})),Y},[j,V,w,k,K,z,G,Q])}function b(W,V,w){return w?.__dataContext?{value:{...w.__dataContext.value}}:{value:{frame:W,field:V,data:[W]}}}},69330:(J,R,e)=>{"use strict";e.d(R,{CZ:()=>m,UY:()=>g,nf:()=>o});var n=e(86832),a=e.n(n),l=e(89591),r=e(36822);function o(f,c){if(f.name)return f.name;const E=[];for(const p of f.fields)if(p.type!==l.fS.time){if(E.length>1)break;E.push(m(p,f))}return E.length===1?E[0]:c===void 0?f.fields.filter(p=>p.type!==l.fS.time).map(p=>m(p,f)).join(", "):f.refId?`Series (${f.refId})`:`Series (${c})`}function g(f){f.forEach(c=>{c.fields.forEach(E=>{m(E,c,f)})})}function m(f,c,E){const p=f.state?.displayName,h=!!(E&&E.length>1);if(p&&h===f.state?.multipleFrames)return p;const y=d(f,c,E);return f.state=f.state||{},f.state.displayName=y,f.state.multipleFrames=h,y}function d(f,c,E){const p=f.config?.displayName&&f.config?.displayName.length,h=!!c?.meta?.timeCompare?.isTimeShiftQuery;let y=p?f.config.displayName:f.name;if(p)return h?`${y} (comparison)`:y;if(c&&f.config?.displayNameFromDS)return h?`${f.config.displayNameFromDS} (comparison)`:f.config.displayNameFromDS;if(f.type===l.fS.time&&!f.labels)return y??l.Ls;let s=[],v=!1;if(E&&E.length>1){for(let M=1;M<E.length;M++)if(E[M].name!==E[M-1].name){v=!0;break}}let C=!1,D=!1;if(v&&c?.name&&(s.push(c.name),C=!0),f.name&&f.name!==l.M5&&s.push(f.name),f.labels&&c){let M=i(E??[c]);if(M)f.labels[M]&&(s.push(f.labels[M]),D=!0);else{let P=(0,r.aA)(f.labels);P&&(s.push(P),D=!0)}}return c&&!C&&!D&&f.name===l.M5&&c.name&&c.name.length>0&&(s.push(c.name),C=!0),s.length?y=s.join(" "):f.name?y=f.name:y=l.M5,y===f.name&&(y=u(f,c)),h&&(y=`${y} (comparison)`),y}function u(f,c){let E=0,p=!1;if(c)for(let h=0;h<c.fields.length;h++){const y=c.fields[h];if((0,n.isEqual)(f,y)){if(p=!0,E>0){E++;break}}else if(f.name===y.name&&(E++,p))break}return E?`${f.name} ${E}`:f.name}function i(f){let c=null;for(let E=0;E<f.length;E++){const p=f[E];for(const h of p.fields)if(h.labels){for(const y in h.labels)if(c===null)c=y;else if(y!==c)return null}}return c}},86127:(J,R,e)=>{"use strict";e.d(R,{z:()=>o});var n=e(86832),a=e.n(n),l=e(83502),r=e(94123);function o(g){return new Proxy({},{get:(m,d)=>{let u=g.frame.fields.find(E=>d===E.name);if(!u){const E=(0,n.toNumber)(d);u=g.frame.fields[E]}if(u||(u=g.frame.fields.find(E=>d===E.config.displayName)),u||(u=g.frame.fields.find(E=>E.labels?d===E.labels.name:!1)),!u)return;const i=u.display??(0,r.U)(),f=u.values[g.rowIndex],c=i(f);return c.toString=()=>(0,l.zc)(c),c}})}},32811:(J,R,e)=>{"use strict";e.d(R,{AE:()=>r.AE,CZ:()=>i.CZ,Cc:()=>d.Cc,E1:()=>n.E1,HU:()=>n.HU,N6:()=>l.N,NI:()=>f.NI,NN:()=>r.NN,Of:()=>d.Of,Oh:()=>r.Oh,QY:()=>o.QY,SM:()=>d.SM,SO:()=>l.S,UY:()=>i.UY,U_:()=>a.U,VB:()=>r.VB,W0:()=>r.W0,W4:()=>r.W4,WO:()=>o.WO,YO:()=>o.YO,ZD:()=>g.Z,ZN:()=>r.ZN,bP:()=>m.bP,cB:()=>n.cB,dE:()=>n.dE,dz:()=>f.dz,fD:()=>o.fD,gE:()=>a.g,gG:()=>n.gG,gb:()=>d.gb,kG:()=>r.kG,m1:()=>m.m1,nG:()=>n.nG,n_:()=>n.n_,nf:()=>i.nf,op:()=>r.op,pZ:()=>n.pZ,r5:()=>n.r5,sg:()=>n.sg,uj:()=>r.uj,xD:()=>f.xD,zv:()=>u.z});var n=e(52366),a=e(94123),l=e(18985),r=e(63671),o=e(73254),g=e(24369),m=e(49231),d=e(52716),u=e(86127),i=e(69330),f=e(10124)},63671:(J,R,e)=>{"use strict";e.d(R,{AE:()=>g,NN:()=>r,Oh:()=>a,VB:()=>u,W0:()=>l,W4:()=>i,ZN:()=>d,kG:()=>n,op:()=>m,uj:()=>o});const n=(f,c,E)=>f,a=(f,c,E)=>{if(f!=null)return parseFloat(f)},l=(f,c,E)=>(delete c.field?.state?.displayName,m(f,c,E)),r=(f,c,E)=>f,o=(f,c,E)=>f,g=(f,c,E)=>f,m=(f,c,E)=>f==null?f:E&&E.expandTemplateVars&&c.replaceVariables?c.replaceVariables(f,c.field.state.scopedVars):`${f}`,d=(f,c,E)=>f,u=(f,c,E)=>f,i=(f,c,E)=>f},10124:(J,R,e)=>{"use strict";e.d(R,{NI:()=>m,dz:()=>u,xD:()=>i});var n=e(86832),a=e.n(n),l=e(3181),r=e(89591),o=e(73254),g=e(49231);function m(f,c){if(f.type===r.fS.boolean)return d(f,c);const p=(0,o.fD)(f).getCalculator(f,c),h=f.state?.range??u(f);return y=>{let s=0;y!==-1/0&&(s=(y-h.min)/h.delta,Number.isNaN(s)&&(s=0));const v=(0,g.pD)(f,y,s);return{percent:s,threshold:v,color:p(y,s,v)}}}function d(f,c){const E={color:c.visualization.getColorByName("green"),percent:1,threshold:void 0},p={color:c.visualization.getColorByName("red"),percent:0,threshold:void 0},h=(0,o.fD)(f);if(h.isContinuous&&h.getColors){const y=h.getColors(c);E.color=y[y.length-1],p.color=y[0]}return y=>y?E:p}function u(f){if(f.type!==r.fS.number)return{min:0,max:100,delta:100};let c=f.config.min,E=f.config.max;if(!(0,n.isNumber)(c)||!(0,n.isNumber)(E))if(f.values&&f.values.length){const p=(0,l.Kx)({field:f,reducers:[l.gz.min,l.gz.max]});(0,n.isNumber)(c)||(c=p[l.gz.min]),(0,n.isNumber)(E)||(E=p[l.gz.max])}else c=0,E=100;return{min:c,max:E,delta:E-c}}function i(f,c){const{config:E}=f;let{min:p,max:h}=E;return(0,n.isNumber)(p)&&(0,n.isNumber)(h)?E:c||!f.state?.range?{...E,...u(f)}:{...E,...f.state.range}}},18985:(J,R,e)=>{"use strict";e.d(R,{N:()=>l,S:()=>r});var n=e(77663),a=e(24369);const l=new a.Z,r=new n.B},49231:(J,R,e)=>{"use strict";e.d(R,{bP:()=>g,m1:()=>r,pD:()=>o,yM:()=>l});var n=e(97898),a=e(60695);const l={value:0,color:n.R};function r(m,d){if(!d||d.length===0)return l;let u=d[0];for(const i of d)if(m>=i.value)u=i;else break;return u}function o(m,d,u){const{thresholds:i}=m.config;return i?.mode===a.H.Percentage?r(u*100,i?.steps):r(d,i?.steps)}function g(m){return m.sort((d,u)=>d.value-u.value)}},12779:(J,R,e)=>{"use strict";e.d(R,{q:()=>n.q1});var n=e(34547)},9744:(J,R,e)=>{"use strict";e.r(R),e.d(R,{AnnotationChangeEvent:()=>f.n1,AppendedVectors:()=>r.l$,ArrayDataFrame:()=>o.iB,ArrayVector:()=>r.Gt,AsNumberVector:()=>r.sq,BinaryOperationID:()=>n.LH,BinaryOperationVector:()=>r.rM,BusEventBase:()=>f.mA,BusEventWithPayload:()=>f.R_,ByNamesMatcherMode:()=>g.Ys,CSVHeaderStyle:()=>n.x5,CSVReader:()=>n.QM,CircularDataFrame:()=>o.a2,CircularVector:()=>r.dV,ConstantVector:()=>r.uI,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>i.cB,DashboardLoadedEvent:()=>f.Pl,DataFrameView:()=>o.US,DataHoverClearEvent:()=>f.xH,DataHoverEvent:()=>f.es,DataLinkBuiltInVars:()=>n.WC,DataSelectEvent:()=>f.v9,DataSourcePluginContextProvider:()=>D.n,DataSourceTestFailed:()=>f._m,DataSourceTestSucceeded:()=>f.U6,DataSourceUpdatedSuccessfully:()=>f.Ix,DataTransformerID:()=>g.Wk,DocsId:()=>n.xV,EventBusSrv:()=>f.Fb,FieldCache:()=>o.N,FieldConfigEditorBuilder:()=>n.vo,FieldConfigOptionsRegistry:()=>i.ZD,FieldMatcherID:()=>g.mi,FormattedVector:()=>r.$Y,FrameGeometrySourceMode:()=>p.q,FrameMatcherID:()=>g.E4,ISO_8601:()=>m.VJ,IndexVector:()=>r.rm,InternalTimeZones:()=>m.RQ,LayoutModes:()=>h.l,LegacyMappingType:()=>n.HU,MISSING_VALUE:()=>o.Yi,MatcherID:()=>g.Ff,MutableDataFrame:()=>o.vA,NodeGraphDataFrameFieldNames:()=>n.zG,PanelOptionsEditorBuilder:()=>n.rt,PanelPlugin:()=>y.c,PluginContextProvider:()=>C.b,ReducerID:()=>g.gz,Registry:()=>n.Bz,SortedVector:()=>r.oH,StreamingDataFrame:()=>o.Av,StreamingFrameAction:()=>o.T0,SystemDateFormatsState:()=>m.zf,ThemeContext:()=>c.Ni,TransformerCategory:()=>g.wf,UnaryOperationID:()=>n.T1,VAR_CALC:()=>i.pZ,VAR_CELL_PREFIX:()=>i.dE,VAR_FIELD_LABELS:()=>i.E1,VAR_FIELD_NAME:()=>i.n_,VAR_SERIES_NAME:()=>i.HU,ValueMatcherID:()=>g.mE,addDurationToDate:()=>m.Ks,anySeriesWithTimeField:()=>o.m$,anyToNumber:()=>n.IX,applyFieldOverrides:()=>i.SM,applyRawFieldOverrides:()=>i.Of,arrayToDataFrame:()=>o.Pc,arrayUtils:()=>n.sq,binaryOperators:()=>n.nk,booleanOverrideProcessor:()=>i.W4,booleanValueFormatter:()=>u.IR,buildHistogram:()=>g.gY,cacheFieldDisplayNames:()=>i.UY,classicColors:()=>n.ZC,closestIdx:()=>o.Ko,colorManipulator:()=>c.r8,compareArrayValues:()=>o.nl,compareDataFrameStructures:()=>o.Ch,containsSearchFilter:()=>n.bf,convertOldAngularValueMappings:()=>n.Jb,createDataFrame:()=>o.at,createDimension:()=>o.q2,createFieldConfigRegistry:()=>v.j,createTheme:()=>c.jG,dataFrameFromJSON:()=>o.vP,dataFrameToJSON:()=>o.Y,dataLinksOverrideProcessor:()=>i.NN,dateMath:()=>m.Rn,dateTime:()=>m.CQ,dateTimeAsMoment:()=>m.C_,dateTimeForTimeZone:()=>m.GY,dateTimeFormat:()=>m.dq,dateTimeFormatISO:()=>m.lf,dateTimeFormatTimeAgo:()=>m.E8,dateTimeFormatWithAbbrevation:()=>m.Fm,dateTimeParse:()=>m.J,decodeFieldValueEntities:()=>o.Jy,decodeFieldValueEnums:()=>o.Ib,deprecationWarning:()=>n.d9,displayNameOverrideProcessor:()=>i.W0,doStandardCalcs:()=>g.uP,durationToMilliseconds:()=>m.iX,ensureTimeField:()=>g.J_,escapeRegex:()=>d.yI,escapeStringForRegex:()=>d.GE,eventFactory:()=>f.Xw,fieldColorModeRegistry:()=>i.WO,fieldMatchers:()=>g.Ls,fieldReducers:()=>g.TB,filterFieldConfigOverrides:()=>s.aS,findCommonLabels:()=>n.FT,findHighlightChunksInText:()=>d.Xt,findMatchesInText:()=>d.lu,findUniqueLabels:()=>n.IU,fixCellTemplateExpressions:()=>i.r5,formatLabels:()=>n.aA,formattedValueToString:()=>u.zc,frameMatchers:()=>g.Ac,getActiveThreshold:()=>i.m1,getAllValuesFromDimension:()=>o.r7,getBuiltInThemes:()=>c.d5,getColumnFromDimension:()=>o.$q,getColumnsFromDimension:()=>o.GV,getDataFrameRow:()=>o.fh,getDataSourceRef:()=>n.iU,getDataSourceUID:()=>n.BT,getDimensionByName:()=>o.YP,getDisplayProcessor:()=>i.U_,getDisplayValueAlignmentFactors:()=>i.sg,getFieldColorMode:()=>i.QY,getFieldColorModeForField:()=>i.fD,getFieldConfigWithMinMax:()=>i.xD,getFieldDisplayName:()=>i.CZ,getFieldDisplayValues:()=>i.nG,getFieldDisplayValuesProxy:()=>i.zv,getFieldMatcher:()=>g.sq,getFieldSeriesColor:()=>i.YO,getFieldTypeFromValue:()=>o.DP,getFlotPairs:()=>n.k8,getFlotPairsConstant:()=>n.HE,getFrameDisplayName:()=>i.nf,getFrameMatchers:()=>g.b9,getHistogramFields:()=>g.qr,getLinksSupplier:()=>x.oB,getLocale:()=>m.Kd,getLocaleData:()=>m.k4,getMinMaxAndDelta:()=>i.dz,getPanelOptionsWithDefaults:()=>s.d4,getProcessedDataFrames:()=>o.F9,getRawDisplayProcessor:()=>i.gE,getScaleCalculator:()=>i.NI,getSearchFilterScopedVar:()=>n._6,getSeriesTimeStep:()=>n.e4,getThemeById:()=>c.jY,getTimeField:()=>o.sV,getTimeZone:()=>m.Ze,getTimeZoneGroups:()=>m.$8,getTimeZoneInfo:()=>m.Pr,getTimeZones:()=>m.ZV,getValueFormat:()=>u.Cf,getValueFormats:()=>u.QW,getValueFormatterIndex:()=>u.Td,getValueFromDimension:()=>o.jC,getValueMatcher:()=>g.IG,getWeekdayIndex:()=>m.ig,getWeekdayIndexByEnglishName:()=>m.jN,getZone:()=>m.nA,guessDecimals:()=>n.dP,guessFieldTypeForField:()=>o.fu,guessFieldTypeFromNameAndValue:()=>o._m,guessFieldTypeFromValue:()=>o.LI,guessFieldTypes:()=>o.SX,hasLinks:()=>i.gG,hasMsResolution:()=>n.fp,histogramBucketSizes:()=>g.Zi,histogramFieldInfo:()=>g.py,histogramFieldsToFrame:()=>g.zM,histogramFrameBucketMaxFieldName:()=>g.cO,histogramFrameBucketMinFieldName:()=>g.wL,histogramTransformer:()=>g.Op,identityOverrideProcessor:()=>i.kG,incrRound:()=>g.Jz,incrRoundDn:()=>g.mB,incrRoundUp:()=>g.UO,intervalToAbbreviatedDurationString:()=>m.vT,isBooleanUnit:()=>u.br,isCustomFieldProp:()=>s.Lc,isDataFrame:()=>o.aY,isDataFrameWithValue:()=>o.z4,isDataSourcePluginContext:()=>P.v,isDataSourceRef:()=>n.cv,isDateTime:()=>m.v9,isDateTimeInput:()=>m.D2,isEmptyObject:()=>n.Qr,isHistogramFrameBucketMaxFieldName:()=>g.kl,isHistogramFrameBucketMinFieldName:()=>g.Ok,isLikelyAscendingVector:()=>g.lP,isReducerID:()=>g.CC,isStandardFieldProp:()=>s._k,isTableData:()=>o.Ji,isTimeSeriesFrame:()=>o.pP,isTimeSeriesFrames:()=>o.xI,isValidDate:()=>m.qb,isValidDuration:()=>m.jO,isValidGoDuration:()=>m.IA,isValidGrafanaDuration:()=>m.fI,localTimeFormat:()=>m.Ji,locale:()=>u.SP,locationUtil:()=>n.uT,makeClassES5Compatible:()=>n.s2,mapInternalLinkToExplore:()=>n._N,matchAllLabels:()=>n.VS,monacoLanguageRegistry:()=>E.F,numberOverrideProcessor:()=>i.Oh,objRemoveUndefined:()=>n.Hh,onUpdateDatasourceJsonDataOption:()=>n._R,onUpdateDatasourceJsonDataOptionChecked:()=>n.hz,onUpdateDatasourceJsonDataOptionSelect:()=>n.nx,onUpdateDatasourceOption:()=>n.z_,onUpdateDatasourceResetOption:()=>n.HD,onUpdateDatasourceSecureJsonDataOption:()=>n.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>n.TX,outerJoinDataFrames:()=>g.JP,parseDuration:()=>m.RA,parseFlags:()=>d.TL,parseLabels:()=>n.J8,preProcessPanelData:()=>o.zR,rangeUtil:()=>m.cT,readCSV:()=>n.uP,reduceField:()=>g.Kx,renderLegendFormat:()=>n.Wn,renderMarkdown:()=>d.ap,renderTextPanelMarkdown:()=>d.xH,restoreCustomOverrideRules:()=>s.__,reverseDataFrame:()=>o.Y6,roundDecimals:()=>n.O9,scaledUnits:()=>u.Qj,selectOverrideProcessor:()=>i.AE,serializeStateToUrlParam:()=>n.S,setLocale:()=>m.i_,setTimeZoneResolver:()=>m.K7,setWeekStart:()=>m.Ls,shallowCompare:()=>o.Vv,simpleCountUnit:()=>u.SR,sortDataFrame:()=>o.aK,sortThresholds:()=>i.bP,standardEditorsRegistry:()=>i.SO,standardFieldConfigEditorRegistry:()=>i.N6,standardTransformers:()=>g.YR,standardTransformersRegistry:()=>g.Ze,stringFormater:()=>u.vb,stringOverrideProcessor:()=>i.op,stringStartsAsRegEx:()=>d.oH,stringToJsRegex:()=>d.jO,stringToMs:()=>d.e0,systemDateFormats:()=>m.U6,textUtil:()=>d.QX,thresholdsOverrideProcessor:()=>i.ZN,timeZoneAbbrevation:()=>m.Hk,timeZoneFormatUserFriendly:()=>m.Vs,toCSV:()=>n.MJ,toDataFrame:()=>o.g0,toDataFrameDTO:()=>o.og,toDuration:()=>m.np,toFilteredDataFrameDTO:()=>o.Aw,toFixed:()=>u.FH,toFixedScaled:()=>u.bn,toFixedUnit:()=>u.q2,toFloatOrUndefined:()=>d.dz,toIntegerOrUndefined:()=>d.By,toLegacyResponseData:()=>o.Zr,toNumberString:()=>d.PF,toOption:()=>n.Er,toPascalCase:()=>d.Mh,toURLRange:()=>n.R_,toUtc:()=>m.zh,transformDataFrame:()=>g.Hz,unEscapeStringFromRegex:()=>d.x6,unaryOperators:()=>n.mL,unitOverrideProcessor:()=>i.VB,updateDatasourcePluginJsonDataOption:()=>n.tp,updateDatasourcePluginOption:()=>n.fd,updateDatasourcePluginResetOption:()=>n.Mf,updateDatasourcePluginSecureJsonDataOption:()=>n.uw,urlUtil:()=>n.Cj,useFieldOverrides:()=>i.Cc,usePluginContext:()=>M.g,validateFieldConfig:()=>i.gb,valueMappingsOverrideProcessor:()=>i.uj,valueMatchers:()=>g.U8,vectorator:()=>r.sD,withLoadingIndicator:()=>n.xc});var n=e(41010),a=e(92199),l={};for(const S in a)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","UnaryOperationID","anyToNumber","arrayUtils","binaryOperators","classicColors","containsSearchFilter","convertOldAngularValueMappings","deprecationWarning","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getSearchFilterScopedVar","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","isEmptyObject","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","renderLegendFormat","roundDecimals","serializeStateToUrlParam","toCSV","toOption","toURLRange","unaryOperators","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(S)<0&&(l[S]=()=>a[S]);e.d(R,l);var r=e(67757),o=e(65423),g=e(63950),m=e(64469),d=e(28425),u=e(75172),i=e(32811),f=e(7593),c=e(30582),E=e(93464),p=e(12779),h=e(94562),y=e(40530),s=e(58103),v=e(51761),C=e(8651),D=e(34265),M=e(67093),P=e(74948),x=e(52716)},93464:(J,R,e)=>{"use strict";e.d(R,{F:()=>n.F});var n=e(23619)},23619:(J,R,e)=>{"use strict";e.d(R,{F:()=>a});var n=e(77663);const a=new n.B},40530:(J,R,e)=>{"use strict";e.d(R,{c:()=>d});var n=e(86832),a=e.n(n),l=e(24369),r=e(30670),o=e(14255),g=e(98458),m=e(51761);class d extends r.Sg{constructor(i){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new l.Z,this.dataSupport={annotations:!1,alertStates:!1},this.panel=i}get defaults(){let i=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const f=new g.rt;this.optionsSupplier(f,{data:[]});for(const c of f.getItems())c.defaultValue!=null&&(0,n.set)(i,c.path,c.defaultValue)}return i}get fieldConfigDefaults(){const i=this._fieldConfigDefaults.defaults;i.custom={};for(const f of this.fieldConfigRegistry.list())f.defaultValue!==void 0&&(0,n.set)(i,f.id,f.defaultValue);return{defaults:{...i},overrides:this._fieldConfigDefaults.overrides}}setDefaults(i){return(0,o.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=i,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(i){return(0,o.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=i,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(i){return this.onPanelMigration=i,this}setPanelChangeHandler(i){return this.onPanelTypeChanged=i,this}setPanelOptions(i){return this.optionsSupplier=i,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(i){return this.dataSupport={...this.dataSupport,...i},this}useFieldConfig(i={}){return this._initConfigRegistry=()=>(0,m.j)(i,this.meta.name),this}setSuggestionsSupplier(i){return this.suggestionsSupplier=i,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(i){return this.meta.id===i}}},58103:(J,R,e)=>{"use strict";e.d(R,{Lc:()=>p,__:()=>E,_k:()=>h,aS:()=>u,d4:()=>m});var n=e(86832),a=e.n(n),l=e(73254),r=e(97898),o=e(82909),g=e(60695);function m({plugin:y,currentOptions:s,currentFieldConfig:v,isAfterPluginChange:C}){const D=(0,n.mergeWith)({},y.defaults,s||{},(x,S)=>{if((0,n.isArray)(S))return S}),M=d(v,y),P=f(y,M,C);return{options:D,fieldConfig:P}}function d(y,s){const v=s.fieldConfigDefaults,C={defaults:(0,n.mergeWith)({},v.defaults,y?y.defaults:{},(D,M)=>{if((0,n.isArray)(M))return M}),overrides:y?.overrides??[]};i(C.defaults,"",s.fieldConfigRegistry),C.defaults.thresholds&&c(C.defaults.thresholds),C.overrides=u(C.overrides,D=>s.fieldConfigRegistry.getIfExists(D.id)!==void 0);for(const D of C.overrides)for(const M of D.properties)M.id==="thresholds"&&c(M.value);return C}function u(y,s){return y.map(v=>{const C=v.properties.filter(s);return{...v,properties:C}}).filter(v=>v.properties.length>0)}function i(y,s,v){let C=!1;for(const D of Object.keys(y)){const M=y[D],P=`${s}${D}`,x=!!v.getIfExists(P);if(x){C=!0;continue}(0,n.isArray)(M)||!(0,n.isObject)(M)?x||(0,n.unset)(y,D):i(M,`${P}.`,v)||(0,n.unset)(y,D)}return C}function f(y,s,v){if(!v)return s;const C=y.fieldConfigRegistry.getIfExists(o.qb.Color);if(C&&C.settings){const D=C.settings,M=l.WO.getIfExists(s.defaults.color?.mode);if(!D.byValueSupport&&(!M||M.isByValue))return s.defaults.color={mode:r.S.PaletteClassic},s;if(D.byValueSupport&&D.preferThresholdsMode&&M?.id!==r.S.Fixed&&(!M||!M.isByValue))return s.defaults.color={mode:r.S.Thresholds},s;if(D.bySeriesSupport&&M?.isByValue)return s.defaults.color={mode:r.S.PaletteClassic},s}return s}function c(y){y.mode||(y.mode=g.H.Absolute),y.steps?y.steps.length&&(y.steps[0].value=-1/0):y.steps=[]}function E(y,s){const v={defaults:{...y.defaults,custom:s.defaults.custom},overrides:[...y.overrides]};for(const C of s.overrides)for(const D of C.properties)if(p(D)){const M=v.overrides.find(P=>(0,n.isEqual)(P.matcher,C.matcher));M?M!==C&&M.properties.push(D):v.overrides.push(C)}return v}function p(y){return y.id.startsWith("custom.")}function h(y){return!p(y)}},51761:(J,R,e)=>{"use strict";e.d(R,{j:()=>r});var n=e(24369),a=e(18985),l=e(98458);function r(g={},m){const d=new n.Z,u=a.N.list(),i={};if(g.useCustomConfig){const f=new l.vo;g.useCustomConfig(f);for(const c of f.getRegistry().list())if(c.isCustom=!0,c.id="custom."+c.id,o(c,u)){const E=i[c.category[0]]??[];E.push(c),i[c.category[0]]=E}else d.register(c)}for(let f of u)if(!(g.disableStandardOptions&&g.disableStandardOptions.indexOf(f.id)>-1)){if(g.standardOptions){const c=g.standardOptions[f.id]?.hideFromDefaults,E=g.standardOptions[f.id]?.defaultValue,p=g.standardOptions[f.id]?.settings;c&&(f={...f,hideFromDefaults:c}),E&&(f={...f,defaultValue:E}),p&&(f={...f,settings:f.settings?{...f.settings,...p}:p})}if(d.register(f),f.category&&i[f.category[0]])for(let c of i[f.category[0]])d.register(c)}for(const f of d.list())if(f.path.indexOf("[")>0)throw new Error(`[${m}] Field config paths do not support arrays: ${f.id}`);return d}function o(g,m){return!!m.find(d=>g.category&&d.category&&g.category[0]===d.category[0])}},28425:(J,R,e)=>{"use strict";e.d(R,{By:()=>n.By,GE:()=>n.GE,Mh:()=>n.Mh,PF:()=>n.PF,QX:()=>o,TL:()=>l.TL,Xt:()=>l.Xt,ap:()=>a.a,dz:()=>n.dz,e0:()=>n.e0,jO:()=>n.jO,lu:()=>l.lu,oH:()=>n.oH,x6:()=>n.x6,xH:()=>a.x,yI:()=>n.yI});var n=e(55705),a=e(52807),l=e(68495),r=e(69159);const o={escapeHtml:r.Xv,hasAnsiCodes:r.oT,sanitize:r.Nw,sanitizeTextPanelContent:r.he,sanitizeUrl:r.Nm,sanitizeSVGContent:r.Is,sanitizeTrustedTypes:r.cd,sanitizeTrustedTypesRSS:r.pQ}},52807:(J,R,e)=>{"use strict";e.d(R,{a:()=>g,x:()=>m});var n=e(45300),a=e(38336),l=e(69159);let r=!1;const o={headerIds:!1,pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function g(d,u){r||(n.TU.use((0,a.d)()),n.TU.setOptions({...o}),r=!0);let i;u?.breaks&&(i={...o,breaks:!0});const f=(0,n.TU)(d||"",i);return u?.noSanitize?f:(0,l.he)(f)}function m(d,u){r||(n.TU.use((0,a.d)()),n.TU.setOptions({...o}),r=!0);const i=(0,n.TU)(d||"");return u?.noSanitize?i:(0,l.he)(i)}},69159:(J,R,e)=>{"use strict";e.d(R,{Is:()=>c,Nm:()=>E,Nw:()=>d,Xv:()=>h,cd:()=>i,he:()=>f,oT:()=>p,pQ:()=>u});var n=e(99568),a=e(97639),l=e.n(a),r=e(4664),o=e.n(r);const g=Object.keys(r.whiteList).reduce((y,s)=>(y[s]=r.whiteList[s]?.concat(["class","style"]),y),{}),m=new r.FilterXSS({whiteList:g,css:{whiteList:{...r.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function d(y){try{return l().sanitize(y,{USE_PROFILES:{html:!0},FORBID_TAGS:["form","input"]})}catch{return console.error("String could not be sanitized",y),h(y)}}function u(y){return l().sanitize(y,{RETURN_TRUSTED_TYPE:!0,ADD_ATTR:["xmlns:atom","version","property","content"],ADD_TAGS:["rss","meta","channel","title","link","description","atom:link","item","pubDate","guid"],PARSER_MEDIA_TYPE:"application/xhtml+xml"})}function i(y){return l().sanitize(y,{RETURN_TRUSTED_TYPE:!0})}function f(y){try{return m.process(y)}catch{return console.error("String could not be sanitized",y),"Text string could not be sanitized"}}function c(y){return l().sanitize(y,{USE_PROFILES:{svg:!0,svgFilters:!0}})}function E(y){return(0,n.N)(y)}function p(y){return/\u001b\[\d{1,2}m/.test(y)}function h(y){return String(y).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}},55705:(J,R,e)=>{"use strict";e.d(R,{By:()=>E,GE:()=>m,Mh:()=>h,PF:()=>c,dz:()=>p,e0:()=>f,jO:()=>i,oH:()=>u,x6:()=>d,yI:()=>y});var n=e(86832),a=e.n(n);const r="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",o=new RegExp(r,"g"),g=new RegExp("(\\\\)"+r,"g");function m(s){return s&&s.replace(o,"\\$1")}function d(s){return s&&s.replace(g,"$2")}function u(s){return s?s[0]==="/":!1}function i(s){if(!u(s))return new RegExp(`^${s}$`);const v=s.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!v)throw new Error(`'${s}' is not a valid regular expression.`);return new RegExp(v[1],v[2])}function f(s){if(!s)return 0;const v=parseInt(s,10),C=s.slice(String(v).length),D=1e3,M=D*60,P=M*60,x=P*24;switch(C){case"s":return v*D;case"m":return v*M;case"h":return v*P;case"d":return v*x;default:if(!C)return isNaN(v)?0:v;throw new Error("Not supported unit: "+C)}}function c(s){return s!=null&&Number.isFinite(s)?s.toString():""}function E(s){if(!s)return;const v=parseInt(s,10);return isNaN(v)?void 0:v}function p(s){if(!s)return;const v=parseFloat(s);return isNaN(v)?void 0:v}function h(s){const v=(0,n.camelCase)(s);return v.charAt(0).toUpperCase()+v.substring(1)}function y(s){return s.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},68495:(J,R,e)=>{"use strict";e.d(R,{TL:()=>g,Xt:()=>n,lu:()=>l});function n({searchWords:m,textToHighlight:d}){const u=[];for(const i of m)typeof i=="string"&&u.push(...l(d,i));return u}const a=m=>m.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function l(m,d){if(!m||!d)return[];const u=[],{cleaned:i,flags:f}=g(a(d));let c;try{c=new RegExp(`(?:${i})`,f)}catch{return u}return m.replace(c,(E,...p)=>{if(E){const h=p[p.length-2];u.push({text:E,start:h,length:E.length,end:h+E.length})}return""}),u}const r="-",o=/\(\?([ims-]+)\)/g;function g(m){const d=new Set(["g"]);return{cleaned:m.replace(o,(i,f)=>{const c=f.startsWith(r);for(let E=0;E<f.length;++E){const p=f.charAt(E);c||f.charAt(E-1)===r?d.delete(p):p!==r&&d.add(p)}return""}),flags:Array.from(d).join("")}}},91249:(J,R,e)=>{"use strict";e.r(R),e.d(R,{alpha:()=>p,asHexString:()=>g,asRgbString:()=>m,darken:()=>h,decomposeColor:()=>u,emphasize:()=>E,getContrastRatio:()=>f,getLuminance:()=>c,hexToRgb:()=>l,hslToRgb:()=>d,lighten:()=>y,recomposeColor:()=>i,rgbToHex:()=>o});var n=e(63374);function a(s,v=0,C=1){return Math.min(Math.max(v,s),C)}function l(s){s=s.slice(1);const v=new RegExp(`.{1,${s.length>=6?2:1}}`,"g");let C=s.match(v);return C&&C[0].length===1&&(C=C.map(D=>D+D)),C?`rgb${C.length===4?"a":""}(${C.map((D,M)=>M<3?parseInt(D,16):Math.round(parseInt(D,16)/255*1e3)/1e3).join(", ")})`:""}function r(s){const v=s.toString(16);return v.length===1?`0${v}`:v}function o(s){if(s.indexOf("#")===0)return s;const{values:v}=u(s);return`#${v.map(C=>r(C)).join("")}`}function g(s){if(s[0]==="#")return s;const v=(0,n.Z)(s);return v.getAlpha()===1?v.toHexString():v.toHex8String()}function m(s){return s.startsWith("rgb")?s:(0,n.Z)(s).toRgbString()}function d(s){const v=u(s),{values:C}=v,D=C[0],M=C[1]/100,P=C[2]/100,x=M*Math.min(P,1-P),S=(O,A=(O+D/30)%12)=>P-x*Math.max(Math.min(A-3,9-A,1),-1);let I="rgb";const T=[Math.round(S(0)*255),Math.round(S(8)*255),Math.round(S(4)*255)];return v.type==="hsla"&&(I+="a",T.push(C[3])),i({type:I,values:T})}function u(s){if(typeof s!="string")return s;if(s.charAt(0)==="#")return u(l(s));const v=s.indexOf("("),C=s.substring(0,v);if(["rgb","rgba","hsl","hsla","color"].indexOf(C)===-1)throw new Error(`Unsupported '${s}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let D=s.substring(v+1,s.length-1),M;if(C==="color"){if(D=D.split(" "),M=D.shift(),D.length===4&&D[3].charAt(0)==="/"&&(D[3]=D[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(M)===-1)throw new Error(`Unsupported ${M} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else D=D.split(",");return D=D.map(P=>parseFloat(P)),{type:C,values:D,colorSpace:M}}function i(s){const{type:v,colorSpace:C}=s;let D=s.values;return v.indexOf("rgb")!==-1?D=D.map((M,P)=>P<3?parseInt(M,10):M):v.indexOf("hsl")!==-1&&(D[1]=`${D[1]}%`,D[2]=`${D[2]}%`),v.indexOf("color")!==-1?D=`${C} ${D.join(" ")}`:D=`${D.join(", ")}`,`${v}(${D})`}function f(s,v,C){const D=c(s),M=c(v,C);return(Math.max(D,M)+.05)/(Math.min(D,M)+.05)}function c(s,v){const C=u(s);let D=C.type==="hsl"?u(d(s)).values:C.values;if(v&&C.type==="rgba"){const P=u(v),x=D[3];D[0]=D[0]*x+P.values[0]*(1-x),D[1]=D[1]*x+P.values[1]*(1-x),D[2]=D[2]*x+P.values[2]*(1-x)}const M=D.map(P=>(C.type!=="color"&&(P/=255),P<=.03928?P/12.92:((P+.055)/1.055)**2.4));return Number((.2126*M[0]+.7152*M[1]+.0722*M[2]).toFixed(3))}function E(s,v=.15){return c(s)>.5?h(s,v):y(s,v)}function p(s,v){if(s==="")return"#000000";if(v=a(v),s[0]==="#"){if(s.length===9)s=s.substring(0,7);else if(s.length<=5){let D="#";for(let M=1;M<4;M++)D+=s[M]+s[M];s=D}return s+Math.round(v*255).toString(16).padStart(2,"0")}else{if(s[3]==="(")return s.replace(")",`, ${v})`);if(s[4]==="(")return s.substring(0,s.lastIndexOf(","))+`, ${v})`}const C=u(s);return C.type==="color"?C.values[3]=`/${v}`:C.values[3]=v,i(C)}function h(s,v){const C=u(s);if(v=a(v),C.type.indexOf("hsl")!==-1)C.values[2]*=1-v;else if(C.type.indexOf("rgb")!==-1||C.type.indexOf("color")!==-1)for(let D=0;D<3;D+=1)C.values[D]*=1-v;return i(C)}function y(s,v){const C=u(s);if(v=a(v),C.type.indexOf("hsl")!==-1)C.values[2]+=(100-C.values[2])*v;else if(C.type.indexOf("rgb")!==-1)for(let D=0;D<3;D+=1)C.values[D]+=(255-C.values[D])*v;else if(C.type.indexOf("color")!==-1)for(let D=0;D<3;D+=1)C.values[D]+=(1-C.values[D])*v;return i(C)}},54342:(J,R,e)=>{"use strict";e.d(R,{N:()=>l});var n=e(39953),a=e(48706);const l=n.createContext((0,a.j)());l.displayName="ThemeContext"},48706:(J,R,e)=>{"use strict";e.d(R,{j:()=>V});function n(){const K=["xs","sm","md","lg","xl","xxl"],z="px",G={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function Q(F){return`@media (min-width:${typeof F=="number"?F:G[F]}${z})`}function j(F){return`@media (max-width:${(typeof F=="number"?F:G[F])-5/100}${z})`}return{values:G,up:Q,down:j,keys:K,unit:z}}var a=e(86832),l=e(91249);const r={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#FF9900",orangeDarkText:"#fbad37",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FF9900",orangeLightText:"#B5510D"};class o{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.12)`,medium:`rgba(${this.whiteBase}, 0.20)`,strong:`rgba(${this.whiteBase}, 0.30)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:r.blueDarkText,maxContrast:r.white},this.primary={main:r.blueDarkMain,text:r.blueDarkText,border:r.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.10)`,shade:`rgba(${this.whiteBase}, 0.14)`,transparent:`rgba(${this.whiteBase}, 0.08)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:`rgba(${this.whiteBase}, 0.08)`},this.info=this.primary,this.error={main:r.redDarkMain,text:r.redDarkText},this.success={main:r.greenDarkMain,text:r.greenDarkText},this.warning={main:r.orangeDarkMain,text:r.orangeDarkText},this.background={canvas:r.gray05,primary:r.gray10,secondary:r.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,selectedBorder:r.orangeDarkMain,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class g{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:r.blueLightMain,border:r.blueLightText,text:r.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:r.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.08)`,shade:`rgba(${this.blackBase}, 0.15)`,transparent:`rgba(${this.blackBase}, 0.08)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.weak},this.info={main:r.blueLightMain,text:r.blueLightText},this.error={main:r.redLightMain,text:r.redLightText,border:r.redLightText},this.success={main:r.greenLightMain,text:r.greenLightText},this.warning={main:r.orangeLightMain,text:r.orangeLightText},this.background={canvas:r.gray90,primary:r.white,secondary:r.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,selectedBorder:r.orangeLightMain,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function m(w){const K=new o,z=new g,G=(w.mode??"dark")==="dark"?K:z,{primary:Q=G.primary,secondary:j=G.secondary,info:F=G.info,warning:k=G.warning,success:_=G.success,error:Y=G.error,tonalOffset:Z=G.tonalOffset,hoverFactor:ae=G.hoverFactor,contrastThreshold:ce=G.contrastThreshold,...q}=w;function De(te,fe=ce){return(0,l.getContrastRatio)(K.text.maxContrast,te,G.background.primary)>=fe?K.text.maxContrast:z.text.maxContrast}const oe=({color:te,name:fe})=>{if(te={...te,name:fe},!te.main)throw new Error(`Missing main color for ${fe}`);return te.text||(te.text=te.main),te.border||(te.border=te.text),te.shade||(te.shade=G.mode==="light"?(0,l.darken)(te.main,Z):(0,l.lighten)(te.main,Z)),te.transparent||(te.transparent=(0,l.alpha)(te.main,.15)),te.contrastText||(te.contrastText=De(te.main)),te.borderTransparent||(te.borderTransparent=(0,l.alpha)(te.border,.25)),te};return(0,a.merge)({...G,primary:oe({color:Q,name:"primary"}),secondary:oe({color:j,name:"secondary"}),info:oe({color:F,name:"info"}),error:oe({color:Y,name:"error"}),success:oe({color:_,name:"success"}),warning:oe({color:k,name:"warning"}),getContrastText:De,emphasize:(te,fe)=>(0,l.emphasize)(te,fe??ae)},q)}function d(w,K){const z={padding:1,headerHeight:4,background:w.background.primary,borderColor:w.border.weak,boxShadow:"none"},G={borderColor:w.border.medium,borderHover:w.border.strong,text:w.text.primary,background:w.mode==="dark"?w.background.canvas:w.background.primary};return{height:{sm:3,md:4,lg:6},input:G,panel:z,dropdown:{background:G.background},tooltip:{background:w.background.secondary,text:w.text.primary},dashboard:{background:w.background.canvas,padding:1},overlay:{background:w.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:42},textHighlight:{text:w.warning.contrastText,background:w.warning.main},horizontalDrawer:{defaultHeight:400},table:{rowHoverBackground:w.emphasize(w.background.primary,.03)}}}function u(w){return w.mode==="dark"?{z1:"0px 1px 2px rgba(1, 4, 9, 0.75)",z2:"0px 4px 8px rgba(1, 4, 9, 0.75)",z3:"0px 8px 24px rgb(1, 4, 9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function i(w){const K=w.borderRadius??2;return{radius:{default:"2px",pill:"9999px",circle:"100%"},borderRadius:Q=>`${(Q??1)*K}px`}}function f(w={}){const{gridSize:K=8}=w,z=Q=>typeof Q=="string"?Q:Q*K,G=(...Q)=>(Q.length===0&&(Q[0]=1),Q.map(j=>{const F=z(j);return typeof F=="number"?`${F}px`:F}).join(" "));return G.gridSize=K,G.x0="0px",G.x0_25="2px",G.x0_5="4px",G.x1="8px",G.x1_5="12px",G.x2="16px",G.x2_5="20px",G.x3="24px",G.x4="32px",G.x5="40px",G.x6="48px",G.x8="64px",G.x10="80px",G}const c={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},E={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function p(w=["all"],K={}){const{duration:z=E.standard,easing:G=c.easeInOut,delay:Q=0}=K;return(Array.isArray(w)?w:[w]).map(j=>`${j} ${typeof z=="string"?z:y(z)} ${G} ${typeof Q=="string"?Q:y(Q)}`).join(",")}function h(w){if(!w)return 0;const K=w/36;return Math.round((4+15*K**.25+K/5)*10)}function y(w){return`${Math.round(w)}ms`}function s(){return{create:p,duration:E,easing:c,getAutoHeightDuration:h}}const v='"Inter", "Helvetica", "Arial", sans-serif',C="'Roboto Mono', monospace";function D(w,K={}){const{fontFamily:z=v,fontFamilyMonospace:G=C,fontSize:Q=14,fontWeightLight:j=300,fontWeightRegular:F=400,fontWeightMedium:k=500,fontWeightBold:_=500,htmlFontSize:Y=14}=K,Z=Q/14,ae=oe=>`${oe/Y*Z}rem`,ce=(oe,te,fe,Te,ge)=>{if(fe%2!==0||te%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:z,fontWeight:oe,fontSize:ae(te),lineHeight:fe/te,...z===v?{letterSpacing:`${M(Te/te)}em`}:{},...ge}},q={h1:ce(F,28,32,-.25),h2:ce(F,24,28,0),h3:ce(F,22,24,0),h4:ce(F,18,22,.25),h5:ce(F,16,22,0),h6:ce(k,14,22,.15),body:ce(F,Q,22,.15),bodySmall:ce(F,12,18,.15)};return{htmlFontSize:Y,pxToRem:ae,fontFamily:z,fontFamilyMonospace:G,fontSize:Q,fontWeightLight:j,fontWeightRegular:F,fontWeightMedium:k,fontWeightBold:_,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...q}}function M(w){return Math.round(w*1e5)/1e5}var P=e(89647);function x(w){const K={name:"Grafana Default",typography:{fontFamily:{sansSerif:w.typography.fontFamily,monospace:w.typography.fontFamilyMonospace},size:{base:`${w.typography.fontSize}px`,xs:w.typography.size.xs,sm:w.typography.size.sm,md:w.typography.size.md,lg:w.typography.size.lg},heading:{h1:w.typography.h1.fontSize,h2:w.typography.h2.fontSize,h3:w.typography.h3.fontSize,h4:w.typography.h4.fontSize,h5:w.typography.h5.fontSize,h6:w.typography.h6.fontSize},weight:{light:w.typography.fontWeightLight,regular:w.typography.fontWeightRegular,semibold:w.typography.fontWeightMedium,bold:w.typography.fontWeightBold},lineHeight:{xs:w.typography.bodySmall.lineHeight,sm:w.typography.bodySmall.lineHeight,md:w.typography.body.lineHeight,lg:w.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${w.breakpoints.values.xs}px`,sm:`${w.breakpoints.values.sm}px`,md:`${w.breakpoints.values.md}px`,lg:`${w.breakpoints.values.lg}px`,xl:`${w.breakpoints.values.xl}px`,xxl:`${w.breakpoints.values.xxl}px`},spacing:{base:w.spacing.gridSize,insetSquishMd:w.spacing(.5,1),d:w.spacing(2),xxs:w.spacing(.25),xs:w.spacing(.5),sm:w.spacing(1),md:w.spacing(2),lg:w.spacing(3),xl:w.spacing(4),gutter:w.spacing(4),formSpacingBase:w.spacing.gridSize,formMargin:`${w.spacing.gridSize*4}px`,formFieldsetMargin:`${w.spacing.gridSize*2}px`,formInputHeight:w.spacing.gridSize*4,formButtonHeight:w.spacing.gridSize*4,formInputPaddingHorizontal:`${w.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${w.spacing.gridSize/2}px`,formInputMargin:`${w.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${w.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:w.shape.borderRadius(1),md:w.shape.borderRadius(2),lg:w.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:w.spacing.gridSize*w.components.height.sm,md:w.spacing.gridSize*w.components.height.md,lg:w.spacing.gridSize*w.components.height.lg},panelPadding:w.components.panel.padding*w.spacing.gridSize,panelHeaderHeight:w.spacing.gridSize*w.components.panel.headerHeight,zIndex:w.zIndex},z={...S,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},G={bg1:w.colors.background.primary,bg2:w.colors.background.secondary,bg3:w.colors.action.hover,dashboardBg:w.colors.background.canvas,bgBlue1:w.colors.primary.main,bgBlue2:w.colors.primary.shade},Q={border1:w.colors.border.weak,border2:w.colors.border.medium,border3:w.colors.border.strong},j={textStrong:w.colors.text.maxContrast,textHeading:w.colors.text.primary,text:w.colors.text.primary,textSemiWeak:w.colors.text.secondary,textWeak:w.colors.text.secondary,textFaint:w.colors.text.disabled,textBlue:w.colors.primary.text},F={formLabel:w.colors.text.primary,formDescription:w.colors.text.secondary,formInputBg:w.components.input.background,formInputBgDisabled:w.colors.action.disabledBackground,formInputBorder:w.components.input.borderColor,formInputBorderHover:w.components.input.borderHover,formInputBorderActive:w.colors.primary.border,formInputBorderInvalid:w.colors.error.border,formInputPlaceholderText:w.colors.text.disabled,formInputText:w.components.input.text,formInputDisabledText:w.colors.action.disabledText,formFocusOutline:w.colors.primary.main,formValidationMessageText:w.colors.error.contrastText,formValidationMessageBg:w.colors.error.main};return{...K,type:w.colors.mode==="dark"?P.Q.Dark:P.Q.Light,isDark:w.isDark,isLight:w.isLight,name:w.name,palette:{...z,brandPrimary:z.orange,brandSuccess:w.colors.success.main,brandWarning:w.colors.warning.main,brandDanger:w.colors.error.main,queryRed:w.colors.error.text,queryGreen:w.colors.success.text,queryPurple:"#fe85fc",queryOrange:z.orange,online:w.colors.success.main,warn:w.colors.success.main,critical:w.colors.success.main},colors:{...G,...Q,...F,...j,bodyBg:w.colors.background.canvas,panelBg:w.components.panel.background,panelBorder:w.components.panel.borderColor,pageHeaderBg:w.colors.background.canvas,pageHeaderBorder:w.colors.background.canvas,dropdownBg:F.formInputBg,dropdownShadow:z.black,dropdownOptionHoverBg:G.bg2,link:w.colors.text.primary,linkDisabled:w.colors.text.disabled,linkHover:w.colors.text.maxContrast,linkExternal:w.colors.text.link},shadows:{listItem:"none"},visualization:w.visualization}}const S={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var I=e(97898);function T(w){const K=w.mode==="light"?A():O(),z={};for(const j of K)for(const F of j.shades)if(z[F.name]=F.color,F.aliases)for(const k of F.aliases)z[k]=F.color;z.transparent="rgba(0,0,0,0)",z["panel-bg"]=w.background.primary,z.text=w.text.primary;const G=j=>{if(!j)return I.R;const F=z[j];if(F)return F;if(j[0]==="#"||j.indexOf("rgb")>-1)return j;const k=b[j.toLowerCase()];return k?(z[j]=k,k):j},Q=B();return{hues:K,palette:Q,getColorByName:G}}function O(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function A(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function B(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const b={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},W={activePanel:999,navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function V(w={}){const{colors:K={},spacing:z={},shape:G={},typography:Q={}}=w,j=m(K),F=n(),k=f(z),_=i(G),Y=D(j,Q),Z=u(j),ae=s(),ce=d(j,Z),q=T(j),De={name:j.mode==="dark"?"Dark":"Light",isDark:j.mode==="dark",isLight:j.mode==="light",colors:j,breakpoints:F,spacing:k,shape:_,components:ce,typography:Y,shadows:Z,transitions:ae,visualization:q,zIndex:{...W},flags:{}};return{...De,v1:x(De)}}},30582:(J,R,e)=>{"use strict";e.d(R,{Ni:()=>r.N,d5:()=>a.d,jG:()=>n.j,jY:()=>a.j,r8:()=>l});var n=e(48706),a=e(54112),l=e(91249),r=e(54342)},54112:(J,R,e)=>{"use strict";e.d(R,{d:()=>r,j:()=>l});var n=e(77663),a=e(48706);function l(u){return(o.getIfExists(u)??o.get("dark")).build()}function r(u){return o.list().filter(i=>u?!0:!i.isExtra)}const o=new n.B(()=>[{id:"system",name:"System preference",build:g},{id:"dark",name:"Dark",build:()=>(0,a.j)({colors:{mode:"dark"}})},{id:"light",name:"Light",build:()=>(0,a.j)({colors:{mode:"light"}})},{id:"blue-night",name:"Blue night",build:d,isExtra:!0},{id:"midnight",name:"Midnight",build:m,isExtra:!0}]);function g(){const i=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return l(i)}function m(){const u="204, 204, 220";return(0,a.j)({name:"Midnight",colors:{mode:"dark",background:{canvas:"#000000",primary:"#000000",secondary:"#181818"},border:{weak:`rgba(${u}, 0.17)`,medium:`rgba(${u}, 0.25)`,strong:`rgba(${u}, 0.35)`}}})}function d(){return(0,a.j)({name:"Blue night",colors:{mode:"dark",background:{canvas:"#15161d",primary:"#15161d",secondary:"#1d1f2e"},border:{weak:"#2e304f",medium:"#2e304f",strong:"#2e304f"}}})}},3181:(J,R,e)=>{"use strict";e.d(R,{CC:()=>m,Kx:()=>d,TB:()=>u,gz:()=>g,uP:()=>i});var n=e(86832),a=e.n(n),l=e(10694),r=e(89591),o=e(77663),g=(v=>(v.sum="sum",v.max="max",v.min="min",v.logmin="logmin",v.mean="mean",v.variance="variance",v.stdDev="stdDev",v.last="last",v.first="first",v.count="count",v.range="range",v.diff="diff",v.diffperc="diffperc",v.delta="delta",v.step="step",v.firstNotNull="firstNotNull",v.lastNotNull="lastNotNull",v.changeCount="changeCount",v.distinctCount="distinctCount",v.allIsZero="allIsZero",v.allIsNull="allIsNull",v.allValues="allValues",v.uniqueValues="uniqueValues",v))(g||{});function m(v){return Object.keys(g).includes(v)}function d(v){const{field:C,reducers:D}=v;if(!C||!D||D.length<1)return{};if(C.state?.calcs){const O=[];for(const A of D)C.state.calcs.hasOwnProperty(A)||O.push(A);if(O.length<1)return{...C.state.calcs}}C.state||(C.state={});const M=u.list(D);if(C.values.length<1){const O={...C.state.calcs};for(const A of M)O[A.id]=A.emptyInputResult!==null?A.emptyInputResult:null;return C.state.calcs=O}const{nullValueMode:x=l.Gl.Ignore}=C.config,S=x===l.Gl.Ignore,I=x===l.Gl.AsZero;if(M.length===1&&M[0].reduce){const O=M[0].reduce(C,S,I);return C.state.calcs={...C.state.calcs,...O},O}let T=i(C,S,I);for(const O of M)!T.hasOwnProperty(O.id)&&O.reduce&&(T={...T,...O.reduce(C,S,I)});return C.state.calcs={...C.state.calcs,...T},T}const u=new o.B(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value",standard:!0,aliasIds:["current"],reduce:p},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:E},{id:"firstNotNull",name:"First *",description:"First non-null value",standard:!0,reduce:c},{id:"first",name:"First",description:"First Value",standard:!0,reduce:f},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:h},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:h},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:y},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:s},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:v=>({allValues:[...v.values]})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:v=>({uniqueValues:[...new Set(v.values)]})}]);function i(v,C,D){const M={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},P=v.values,x=v.type===r.fS.number||v.type===r.fS.time;for(let S=0;S<P.length;S++){let I=P[S];if(S===0&&(M.first=I),M.last=I,I==null){if(C)continue;D&&(I=0)}if(M.count++,I!=null){const T=M.firstNotNull===null;if(T&&(M.firstNotNull=I),x){if(M.sum+=I,M.allIsNull=!1,M.nonNullCount++,!T){const O=I-M.lastNotNull;M.step>O&&(M.step=O),M.lastNotNull>I?(M.previousDeltaUp=!1,S===P.length-1&&(M.delta+=I)):(M.previousDeltaUp?M.delta+=O:M.delta+=I,M.previousDeltaUp=!0)}I>M.max&&(M.max=I),I<M.min&&(M.min=I),I<M.logmin&&I>0&&(M.logmin=I)}I!==0&&(M.allIsZero=!1),M.lastNotNull=I}}return M.max===-Number.MAX_VALUE&&(M.max=null),M.min===Number.MAX_VALUE&&(M.min=null),M.step===Number.MAX_VALUE&&(M.step=null),M.nonNullCount>0&&(M.mean=M.sum/M.nonNullCount),M.allIsNull&&(M.allIsZero=!1),M.max!==null&&M.min!==null&&(M.range=M.max-M.min),(0,n.isNumber)(M.firstNotNull)&&(0,n.isNumber)(M.lastNotNull)&&(M.diff=M.lastNotNull-M.firstNotNull),(0,n.isNumber)(M.firstNotNull)&&(0,n.isNumber)(M.diff)&&(M.diffperc=M.diff/M.firstNotNull),M}function f(v,C,D){return{first:v.values[0]}}function c(v,C,D){const M=v.values;for(let P=0;P<M.length;P++){const x=M[P];if(x!=null&&x!==void 0)return{firstNotNull:x}}return{firstNotNull:null}}function E(v,C,D){const M=v.values;return{last:M[M.length-1]}}function p(v,C,D){const M=v.values;let P=M.length-1;for(;P>=0;){const x=M[P--];if(x!=null&&x!==void 0)return{lastNotNull:x}}return{lastNotNull:null}}function h(v,C,D){if(!(v.type===r.fS.number||v.type===r.fS.time))return{variance:0,stdDev:0};let M=0,P=0,x=0;const S=v.values;for(let I=0;I<S.length;I++){const T=S[I];if(T!=null){x++;let O=P;P+=(T-O)/x,M+=(T-O)*(T-P)}}if(x>0){const I=M/x;return{variance:I,stdDev:Math.sqrt(I)}}return{variance:0,stdDev:0}}function y(v,C,D){const M=v.values;let P=0,x=!0,S=null;for(let I=0;I<M.length;I++){let T=M[I];if(T===null){if(C)continue;D&&(T=0)}!x&&S!==T&&P++,x=!1,S=T}return{changeCount:P}}function s(v,C,D){const M=v.values,P=new Set;for(let x=0;x<M.length;x++){let S=M[x];if(S===null){if(C)continue;D&&(S=0)}P.add(S)}return{distinctCount:P.size}}},63950:(J,R,e)=>{"use strict";e.d(R,{Ac:()=>l.Ac,CC:()=>o.CC,E4:()=>n.E4,Ff:()=>n.Ff,Hz:()=>g.H,IG:()=>l.IG,JP:()=>u._9,J_:()=>f.J_,Jz:()=>i.Jz,Kx:()=>o.Kx,Ls:()=>l.Ls,Ok:()=>i.Ok,Op:()=>i.Op,TB:()=>o.TB,U8:()=>l.U8,UO:()=>i.UO,Wk:()=>a.W,YR:()=>r.Y,Ys:()=>d.Ys,Ze:()=>m.Z,Zi:()=>i.Zi,b9:()=>l.b9,cO:()=>i.cO,gY:()=>i.gY,gz:()=>o.gz,kl:()=>i.kl,lP:()=>u.lP,mB:()=>i.mB,mE:()=>n.mE,mi:()=>n.mi,py:()=>i.py,qr:()=>i.qr,sq:()=>l.sq,uP:()=>o.uP,wL:()=>i.wL,wf:()=>m.w,zM:()=>i.zM});var n=e(86981),a=e(7959),l=e(36085),r=e(31049),o=e(3181),g=e(60593),m=e(34177),d=e(66654),u=e(82837),i=e(80742),f=e(26204)},36085:(J,R,e)=>{"use strict";e.d(R,{Ac:()=>p,IG:()=>v,Ls:()=>E,U8:()=>h,b9:()=>s,sq:()=>y});var n=e(77663),a=e(62322),l=e(50416),r=e(66654),o=e(73550),g=e(55912),m=e(75898),d=e(23203),u=e(17436),i=e(64697),f=e(90215),c=e(67580);const E=new n.B(()=>[...(0,o.Ty)(),...(0,a.N)(),...(0,r.Lk)(),...(0,m.z)(),l.b]),p=new n.B(()=>[...(0,o.fX)(),...(0,r.cC)(),...(0,g.n)()]),h=new n.B(()=>[...(0,u.a)(),...(0,i.H)(),...(0,d.T)(),...(0,f.G)(),...(0,c.G)()]);function y(C){const D=E.get(C.id);if(!D)throw new Error("Unknown field matcher: "+C.id);return D.get(C.options)}function s(C){const D=p.get(C.id);if(!D)throw new Error("Unknown frame matcher: "+C.id);return D.get(C.options)}function v(C){const D=h.get(C.id);if(!D)throw new Error("Unknown value matcher: "+C.id);return D.get(C.options)}},66654:(J,R,e)=>{"use strict";e.d(R,{Lk:()=>p,Ys:()=>o,cC:()=>h});var n=e(69330),a=e(55705),l=e(89591),r=e(86981),o=(y=>(y.exclude="exclude",y.include="include",y))(o||{});const g={id:r.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:y=>{const v=d(new Set([y]));return(C,D,M)=>y===C.name||y===(0,n.CZ)(C,D,M)||!!(v&&v(C,D,M))},getOptionsDisplayText:y=>`Field name: ${y}`},m={id:r.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:y=>{const{names:s,mode:v="include"}=y,C=new Set(s??[]),D=d(C),M=(P,x,S)=>C.has(P.name)||C.has((0,n.CZ)(P,x,S))||!!(D&&D(P,x,S));return v==="exclude"?(P,x,S)=>!M(P,x,S):M},getOptionsDisplayText:y=>{const{names:s,mode:v}=y,C=(s??[]).join(", ");return v==="exclude"?`All except: ${C}`:`All of: ${C}`}};function d(y){let s;return window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback&&(y.has(l.M5)?s=(C,D)=>!!C.labels&&C.labels?.__name__===C.name:(y.has("Time")||y.has("time"))&&(s=(C,D)=>D.meta?.typeVersion==null&&C.type===l.fS.time)),s}const u={id:r.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:y=>{const s=c(y);return(v,C,D)=>{const M=(0,n.CZ)(v,C,D);return!!s&&s.test(M)}},getOptionsDisplayText:y=>`Field name by pattern: ${y}`},i={id:r.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:y=>(s,v,C)=>v.refId===y,getOptionsDisplayText:y=>`Math all fields returned by query with reference ID: ${y}`},f={id:r.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:y=>{const s=u.get(y?.pattern||""),v=m.get({mode:"include",names:y?.names??[]});return(C,D,M)=>v(C,D,M)||s(C,D,M)},getOptionsDisplayText:y=>{const s=y?.pattern??"",v=y?.names?.join(",")??"";return`Field name by pattern: ${s} or names: ${v}`}},c=y=>{if(y)try{return(0,a.jO)(y)}catch(s){console.error(s);return}},E={id:r.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:y=>{const s=(0,a.jO)(y);return v=>s.test(v.name||"")},getOptionsDisplayText:y=>`Frame name: ${y}`};function p(){return[g,u,m,f,i]}function h(){return[E]}},73550:(J,R,e)=>{"use strict";e.d(R,{Qw:()=>E,Ty:()=>C,fX:()=>D,m3:()=>i});var n=e(89591),a=e(36085),l=e(86981);const r={id:l.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:M=>{const P=M.map(x=>(0,a.sq)(x));return(x,S,I)=>{for(const T of P)if(T(x,S,I))return!0;return!1}},getOptionsDisplayText:M=>{let P="";for(const x of M){P.length>0&&(P+=" OR ");const S=a.Ls.get(x.id);P+=S.getOptionsDisplayText?S.getOptionsDisplayText(x):S.name}return P}},o={id:l.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:M=>{const P=M.map(x=>(0,a.b9)(x));return x=>{for(const S of P)if(S(x))return!0;return!1}},getOptionsDisplayText:M=>{let P="";for(const x of M){P.length>0&&(P+=" OR ");const S=a.Ac.get(x.id);P+=S.getOptionsDisplayText?S.getOptionsDisplayText(x):S.name}return P}},g={id:l.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:M=>{const P=M.map(x=>(0,a.sq)(x));return(x,S,I)=>{for(const T of P)if(!T(x,S,I))return!1;return!0}},getOptionsDisplayText:M=>{let P="";for(const x of M){P.length>0&&(P+=" AND ");const S=a.Ls.get(x.id);P+=S.getOptionsDisplayText?S.getOptionsDisplayText(x):S.name}return P}},m={id:l.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:M=>{const P=M.map(x=>(0,a.b9)(x));return x=>{for(const S of P)if(!S(x))return!1;return!0}},getOptionsDisplayText:M=>{let P="";for(const x of M){P.length>0&&(P+=" AND ");const S=a.Ac.get(x.id);P+=S.getOptionsDisplayText?S.getOptionsDisplayText(x):S.name}return P}},d={id:l.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:M=>{const P=(0,a.sq)(M);return(x,S,I)=>!P(x,S,I)},getOptionsDisplayText:M=>{const P=a.Ls.get(M.id);return"NOT "+(P.getOptionsDisplayText?P.getOptionsDisplayText(M.options):P.name)}},u={id:l.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:M=>{const P=(0,a.b9)(M);return x=>!P(x)},getOptionsDisplayText:M=>{const P=a.Ac.get(M.id);return"NOT "+(P.getOptionsDisplayText?P.getOptionsDisplayText(M.options):P.name)}},i=M=>!0,f=M=>!0,c=M=>!1,E=M=>M.type!==n.fS.time,p=M=>!1,h={id:l.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:M=>i,getOptionsDisplayText:M=>"Always"},y={id:l.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:M=>f,getOptionsDisplayText:M=>"Always"},s={id:l.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:M=>c,getOptionsDisplayText:M=>"Never"},v={id:l.Ff.neverMatch,name:"No Frames",description:"Never Match",get:M=>p,getOptionsDisplayText:M=>"Never"};function C(){return[r,g,d,h,s]}function D(){return[o,m,u,y,v]}},34177:(J,R,e)=>{"use strict";e.d(R,{Z:()=>l,w:()=>a});var n=e(77663),a=(r=>(r.Combine="combine",r.CalculateNewFields="calculateNewFields",r.CreateNewVisualization="createNewVisualization",r.Filter="filter",r.PerformSpatialOperations="performSpatialOperations",r.Reformat="reformat",r.ReorderAndRename="reorderAndRename",r))(a||{});const l=new n.B},60593:(J,R,e)=>{"use strict";e.d(R,{H:()=>u});var n=e(63302),a=e(84289),l=e(71476),r=e(36085),o=e(34177);const g=(f,c)=>E=>{const p=o.Z.get(f.id);if(!p)return E;const y={...p.transformation.defaultOptions??{},...f.options},s=f.filter?.options?(0,r.b9)(f.filter):void 0;return E.pipe((0,a.z)(v=>(0,n.of)(m(v,s)).pipe(p.transformation.operator(y,c),d(v,p,s))))};function m(f,c){return c?f.filter(E=>c(E)):f}const d=(f,c,E)=>p=>p.pipe((0,l.U)(h=>{if(h===f)return h;for(const y of h)y.meta||(y.meta={}),y.meta.transformations?y.meta.transformations=[...y.meta.transformations,c.id]:y.meta.transformations=[c.id];if(E){let y=0;const s=f.filter((v,C)=>{const D=!E(v);return D&&!y&&(y=C),D});s.length&&h.splice(y,0,...s)}return h}));function u(f,c,E){const p=(0,n.of)(c);if(!f.length)return p;const h=[],y=E??{interpolate:s=>s};for(let s=0;s<f.length;s++){const v=f[s];if(i(v))h.push(v(y));else{if(v.disabled)continue;h.push(g(v,y))}}return p.pipe.apply(p,h)}function i(f){return typeof f=="function"}},31049:(J,R,e)=>{"use strict";e.d(R,{Y:()=>ye});var n=e(79485),a=e(93186),l=e(26204),r=e(21907),o=e(18660),g=e(22439),m=e(86981),d=e(7959);const u={id:d.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(ue,Oe)=>Ue=>{const at={};return ue.include&&(at.include={id:m.E4.byRefId,options:ue.include}),ue.exclude&&(at.exclude={id:m.E4.byRefId,options:ue.exclude}),Ue.pipe(o.u.operator(at,Oe))}};var i=e(86968),f=e(99804),c=e(71476),E=e(36604);const p={id:d.W.formatTime,name:"Format time",description:"Set the output format of a time field",defaultOptions:{timeField:"",outputFormat:"",useTimezone:!0},isApplicable:ue=>{for(const Oe of ue)for(const Ue of Oe.fields)if(Ue.type==="time")return E.s.Applicable;return E.s.NotApplicable},isApplicableDescription:"The Format time transformation requires a time field to work. No time field could be found.",operator:ue=>Oe=>Oe.pipe((0,c.U)(Ue=>{const at=h(ue.timeField,ue.outputFormat,ue.timezone);return!Array.isArray(Ue)||Ue.length===0?Ue:Ue.map(Ne=>({...Ne,fields:at(Ne.fields)}))}))},h=(ue,Oe,Ue)=>at=>at.map(Ne=>{if(Ne.name===ue){let _e=null;return Ue?_e=(0,l.ub)(Ne,Oe,{timeZone:Ue}):_e=(0,l.ub)(Ne,Oe),_e}return Ne});var y=e(20687),s=e(69330),v=e(89591),C=e(36085);const D="Time",M="Time",P="Value",x=E.U.Empty,S=window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback,I={id:d.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:D,rowField:M,valueField:P},isApplicable:ue=>{let Oe=0;for(const Ue of ue)Oe+=Ue.fields.length;return Oe>=3?E.s.Applicable:E.s.NotApplicable},isApplicableDescription:ue=>{let Oe=0;for(const Ue of ue)Oe+=Ue.fields.length;return`Grouping to matrix requiers at least 3 fields to work. Currently there are ${Oe} fields.`},operator:ue=>Oe=>Oe.pipe((0,c.U)(Ue=>{const at=ue.columnField||D,Ne=ue.rowField||M,_e=ue.valueField||P,Ke=ue.emptyValue||x;if(Ue.length!==1)return Ue;const et=Ue[0],ze=O(et,at),je=O(et,Ne),Qe=O(et,_e),We=`${Ne}\\${at}`;if(!ze||!je||!Qe)return Ue;const ke=T(ze.values),ot=T(je.values),lt={};for(let wt=0;wt<Qe.values.length;wt++){const Lt=ze.values[wt],Ye=je.values[wt],Be=Qe.values[wt];lt[Lt]||(lt[Lt]={}),lt[Lt][Ye]=Be}const Ct=[{name:We,values:ot,type:v.fS.string,config:{}}];for(const wt of ke){let Lt=[];for(const Ye of ot){const Be=lt[wt][Ye]??A(Ke);Lt.push(Be)}S&&typeof wt=="number"&&(Qe.config={...Qe.config,displayNameFromDS:void 0}),Ct.push({name:wt.toString(),values:Lt,config:Qe.config,type:Qe.type})}return[{fields:Ct,length:ot.length}]}))};function T(ue){const Oe=new Set;for(let Ue=0;Ue<ue.length;Ue++)Oe.add(ue[Ue]);return Array.from(Oe)}function O(ue,Oe){for(let Ue=0;Ue<ue.fields.length;Ue++){const at=ue.fields[Ue];let Ne;if(S?Ne=C.Ls.get(m.mi.byName).get(Oe)(at,ue,[ue]):Ne=Oe===(0,s.CZ)(at),Ne)return at}return null}function A(ue){switch(ue){case E.U.False:return!1;case E.U.True:return!0;case E.U.Null:return null;case E.U.Empty:default:return""}}var B=e(80742),b=e(18605),W=e(20788),V=e(67206);const w=10,K={id:d.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:w},operator:(ue,Oe)=>Ue=>Ue.pipe((0,c.U)(at=>{let Ne=w;return ue.limitField!==void 0&&(typeof ue.limitField=="string"?(0,V.U)()?Ne=parseInt(Oe.interpolate(ue.limitField),10):Ne=parseInt(ue.limitField,10):Ne=ue.limitField),at.map(_e=>_e.length>Ne?{..._e,fields:_e.fields.map(Ke=>({...Ke,values:Ke.values.slice(0,Ne)})),length:Ne}:_e)}))};var z=e(55971),G=e(21070),Q=e(16761);const j={id:d.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:ue=>Oe=>Oe.pipe((0,c.U)(Ue=>{const at=F(ue.renameByName);return!Array.isArray(Ue)||Ue.length===0?Ue:Ue.map(Ne=>({...Ne,fields:at(Ne)}))}))},F=ue=>Oe=>!ue||Object.keys(ue).length===0?Oe.fields:Oe.fields.map(Ue=>{const at=(0,s.CZ)(Ue,Oe),Ne=ue[at];return typeof Ne!="string"||Ne.length===0?Ue:{...Ue,config:{...Ue.config,displayName:Ne},state:{...Ue.state,displayName:Ne}}}),k={id:d.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{}},isApplicable:ue=>ue.length>1?E.s.NotPossible:E.s.Applicable,operator:(ue,Oe)=>Ue=>Ue.pipe(g.w.operator({exclude:{names:_(ue.excludeByName)}},Oe),Q.t.operator(ue,Oe),j.operator(ue,Oe))},_=ue=>ue?Object.keys(ue).filter(Oe=>ue[Oe]):[];var Y=e(15951),Z=e(55705);const ae={id:d.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:ue=>Oe=>Oe.pipe((0,c.U)(Ue=>!Array.isArray(Ue)||Ue.length===0?Ue:Ue.map(ce(ue))))},ce=ue=>Oe=>{const Ue=(0,Z.jO)(ue.regex),at=Oe.fields.map(Ne=>{const _e=(0,s.CZ)(Ne,Oe);if(!Ue.test(_e))return Ne;const Ke=_e.replace(Ue,ue.renamePattern);return{...Ne,config:{...Ne.config,displayName:Ke},state:{...Ne.state,displayName:Ke}}});return{...Oe,fields:at}};var q=e(86832),De=e(7906),oe=e(53305),te=e(65038);const fe={id:d.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:ue=>Oe=>Oe.pipe((0,c.U)(Ue=>{if(!Array.isArray(Ue)||Ue.length<=1||(Ue=Ue.filter(et=>et.length>0),!(0,te.xI)(Ue)))return Ue;const at={},Ne=new Set,_e=new De.v,Ke={name:v.rN,values:[],config:{},type:v.fS.string};for(let et=0;et<Ue.length;et++){const ze=Ue[et];for(let je=0;je<ze.fields.length;je++){const Qe=ze.fields[je];if(Qe.type===v.fS.time){at[et]=je,Ne.has(v.Ls)||(_e.addField(Te(Qe,v.Ls)),_e.addField(Ke),Ne.add(v.Ls));continue}Ne.has(v.M5)||(_e.addField(Te(Qe,v.M5)),Ne.add(v.M5))}}for(let et=0;et<Ue.length;et++){const ze=Ue[et];for(let je=0;je<ze.length;je++){const Qe=at[et],We=Qe===0?1:0;_e.add({[v.Ls]:ze.fields[Qe].values[je],[v.rN]:(0,s.nf)(ze),[v.M5]:ze.fields[We].values[je]})}}return[(0,oe.aK)(_e,0,!0)]}))},Te=(ue,Oe)=>({...(0,q.omit)(ue,["values","state","labels","config","name"]),name:Oe,values:[],config:{...(0,q.omit)(ue.config,["displayName","displayNameFromDS"])}}),ge={id:d.W.sortBy,name:"Sort by",description:"Sort fields in a frame.",defaultOptions:{fields:{}},operator:(ue,Oe)=>Ue=>Ue.pipe((0,c.U)(at=>!Array.isArray(at)||at.length===0||!ue?.sort?.length?at:he(at,ue.sort,Oe)))};function he(ue,Oe,Ue){return ue.map(at=>{const Ne=me(at,Oe,Ue);return Ne.length&&Ne[0].index!=null?(0,oe.aK)(at,Ne[0].index,Ne[0].desc):at})}function me(ue,Oe,Ue){return Oe.map(at=>at.index!=null?at:(0,V.U)()?{...at,index:ue.fields.findIndex(Ne=>Ue.interpolate(at.field)===(0,s.CZ)(Ne,ue))}:{...at,index:ue.fields.findIndex(Ne=>at.field===(0,s.CZ)(Ne,ue))})}const ye={noopTransformer:G.d,filterFieldsTransformer:o.P,filterFieldsByNameTransformer:g.w,filterFramesTransformer:o.u,filterFramesByRefIdTransformer:u,filterByValueTransformer:i.JA,formatStringTransformer:f.kA,formatTimeTransformer:p,orderFieldsTransformer:Q.t,organizeFieldsTransformer:k,reduceTransformer:Y.mf,concatenateTransformer:a.aE,calculateFieldTransformer:n.U,joinByFieldTransformer:b.M,seriesToColumnsTransformer:b.M,seriesToRowsTransformer:fe,renameFieldsTransformer:j,labelsToFieldsTransformer:W.r,ensureColumnsTransformer:r.W,groupByTransformer:y.i,sortByTransformer:ge,mergeTransformer:z.R,renameByRegexTransformer:ae,histogramTransformer:B.Op,convertFieldTypeTransformer:l.mg,groupingToMatrixTransformer:I,limitTransformer:K}},79485:(J,R,e)=>{"use strict";e.d(R,{U:()=>D,h:()=>I,ie:()=>y});var n=e(86832),a=e.n(n),l=e(71476),r=e(53305),o=e(69330),g=e(89591),m=e(10694),d=e(35648),u=e(22637),i=e(3181),f=e(36085),c=e(86981),E=e(21907),p=e(7959),h=e(21070),y=(T=>(T.ReduceRow="reduceRow",T.BinaryOperation="binary",T.UnaryOperation="unary",T.Index="index",T))(y||{});const s={reducer:i.gz.sum},v={left:"",operator:d.L.Add,right:""},C={operator:u.T.Abs,fieldName:""},D={id:p.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:i.gz.sum}},operator:(T,O)=>A=>{const B=T&&T.timeSeries!==!1?E.W.operator(null,O):h.d.operator({},O);return T.alias!=null&&(T.alias=O.interpolate(T.alias)),A.pipe(B,(0,l.U)(b=>{const W=T.mode??"reduceRow";let V;if(W==="reduceRow")V=M((0,n.defaults)(T.reduce,s),b);else if(W==="unary")V=S((0,n.defaults)(T.unary,C),b);else if(W==="binary"){const w={...T.binary,left:O.interpolate(T.binary?.left),right:O.interpolate(T.binary?.right)};V=x((0,n.defaults)(w,v),b)}else if(W==="index")return b.map(w=>{const K=[...Array(w.length).keys()];if(T.index?.asPercentile)for(let G=0;G<K.length;G++)K[G]=K[G]/K.length;const z={name:T.alias??"Row",type:g.fS.number,values:K,config:T.index?.asPercentile?{unit:"percentunit"}:{}};return{...w,fields:T.replaceFields?[z]:[...w.fields,z]}});return V?b.map(w=>{const K=V(w);if(!K)return w;const z={name:I(T),type:g.fS.number,config:{},values:K};let G=[];if(T.replaceFields){const{timeField:Q}=(0,r.sV)(w);Q&&T.timeSeries!==!1?G=[Q,z]:G=[z]}else G=[...w.fields,z];return{...w,fields:G}}):b}))}};function M(T,O){let A=(0,f.sq)({id:c.mi.numeric});T.include&&T.include.length&&(A=(0,f.sq)({id:c.mi.byNames,options:{names:T.include}}));const B=i.TB.get(T.reducer);if(!B)throw new Error(`Unknown reducer: ${T.reducer}`);const b=B.reduce??i.uP,W=T.nullValueMode===m.Gl.Ignore,V=T.nullValueMode===m.Gl.AsZero;return w=>{const K=[];for(const j of w.fields)A(j,w,O)&&K.push(j.values);const z=K.length,G={name:"temp",values:new Array(z),type:g.fS.number,config:{}},Q=[];for(let j=0;j<w.length;j++){for(let F=0;F<z;F++)G.values[F]=K[F][j];Q.push(b(G,W,V)[T.reducer])}return Q}}function P(T,O,A){if(!O)return;for(const b of T.fields)if(O===(0,o.CZ)(b,T,A))return b.type===g.fS.boolean?b.values.map(W=>W?1:0):b.values;const B=parseFloat(O);if(!isNaN(B))return new Array(T.length).fill(B)}function x(T,O){const A=d.n.getIfExists(T.operator);return B=>{const b=P(B,T.left,O),W=P(B,T.right,O);if(!b||!W||!A)return;const V=new Array(b.length);for(let w=0;w<V.length;w++)V[w]=A.operation(b[w],W[w]);return V}}function S(T,O){const A=u.m.getIfExists(T.operator);return B=>{let b=[];for(const V of B.fields)T.fieldName===(0,o.CZ)(V,B,O)&&V.type===g.fS.number&&(b=V.values);if(!b.length||!A)return;const W=new Array(b.length);for(let V=0;V<W.length;V++)W[V]=A.operation(b[V]);return W}}function I(T){if(T.alias?.length)return T.alias;switch(T.mode){case"unary":{const{unary:O}=T;return`${O?.operator??""}${O?.fieldName?`(${O.fieldName})`:""}`}case"binary":{const{binary:O}=T;return`${O?.left??""} ${O?.operator??""} ${O?.right??""}`.replace(/\$/g,"")}case"reduceRow":{const O=i.TB.getIfExists(T.reduce?.reducer);if(O)return O.name}break;case"index":return"Row"}return"math"}},93186:(J,R,e)=>{"use strict";e.d(R,{HO:()=>r,aE:()=>o});var n=e(71476),a=e(89591),l=e(7959),r=(m=>(m.Drop="drop",m.FieldName="field",m.Label="label",m))(r||{});const o={id:l.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:m=>d=>d.pipe((0,n.U)(u=>!Array.isArray(u)||u.length<2?u:[g(u,m)]))};function g(m,d){let u=!0,i=m[0].length;const f=d.frameNameLabel??"frame";let c=[];for(const E of m){i!==E.length&&(u=!1,i=Math.max(i,E.length));for(const p of E.fields){const h={...p};h.state=void 0,E.name&&(d.frameNameMode==="drop"||(d.frameNameMode==="label"?(h.labels={...p.labels},h.labels[f]=E.name):!h.name||h.name===a.M5?h.name=E.name:h.name=`${E.name} \xB7 ${p.name}`)),c.push(h)}}return u||(c=c.map(E=>{if(E.values.length===i)return E;const p=E.values;return p.length=i,{...E,values:p}})),{fields:c,length:i}}},26204:(J,R,e)=>{"use strict";e.d(R,{J_:()=>y,mg:()=>m,p8:()=>u,ub:()=>p});var n=e(71476),a=e(26234),l=e(89591),r=e(36085),o=e(86981),g=e(7959);const m={id:g.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0,timezone:void 0}]},operator:(v,C)=>D=>D.pipe((0,n.U)(M=>m.transformer(v,C)(M))),transformer:v=>C=>!Array.isArray(C)||C.length===0?C:d(v,C)??[]};function d(v,C){if(!v.conversions.length)return C;const D=C.map(M=>({...M}));for(const M of v.conversions){if(!M.targetField)continue;const P=r.Ls.get(o.mi.byName).get(M.targetField);for(const x of D)x.fields=x.fields.map(S=>P(S,x,D)?u(S,M):S)}return D}function u(v,C){switch(C.destinationType){case l.fS.time:return y(v,C.dateFormat);case l.fS.number:return c(v);case l.fS.string:return p(v,C.dateFormat,{timeZone:C.timezone});case l.fS.boolean:return E(v);case l.fS.enum:return s(v,C.enumConfig);case l.fS.other:return h(v);default:return v}}const i=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function f(v,C){let D=C?{format:C}:void 0;const M=v.values.slice();let P=M.find(S=>S!=null),x=typeof P=="string"&&i.test(P);for(let S=0;S<M.length;S++)if(M[S]){let I=x?Date.parse(M[S]):(0,a.J)(M[S],D).valueOf();M[S]=Number.isFinite(I)?I:null}else M[S]=null;return{...v,type:l.fS.time,values:M}}function c(v){const C=v.values.slice(),D=C.some(M=>typeof M=="string");for(let M=0;M<C.length;M++){let P=C[M];D&&P!=null&&typeof P=="string"&&(P=P.replace(/,/g,""));const x=+P;C[M]=Number.isFinite(x)?x:null}return{...v,type:l.fS.number,values:C}}function E(v){const C=v.values.slice();for(let D=0;D<C.length;D++)C[D]=!!C[D];return{...v,type:l.fS.boolean,values:C}}function p(v,C,D){let M=v.values;switch(v.type){case l.fS.time:M=M.map(P=>(0,a.J)(P,D).format(C));break;case l.fS.other:M=M.map(P=>JSON.stringify(P));break;default:M=M.map(P=>`${P}`)}return{...v,type:l.fS.string,values:M}}function h(v){const C=v.values.slice();for(let D=0;D<C.length;D++)try{C[D]=JSON.parse(C[D])}catch{C[D]=null}return{...v,type:l.fS.other,values:C}}function y(v,C){const D=typeof v.values[0]=="number";return v.type===l.fS.time&&D?v:D?{...v,type:l.fS.time}:f(v,C)}function s(v,C){const D={...C},M=v.values.slice(),P=new Map;if(D.text)for(let x=0;x<D.text.length;x++)P.set(D.text[x],x);else D.text=[];for(let x=0;x<M.length;x++){const S=M[x];P.has(S)||(D.text[P.size]=S,P.set(S,P.size)),M[x]=P.get(S)}return{...v,config:{...v.config,type:{enum:D}},type:l.fS.enum,values:M}}},21907:(J,R,e)=>{"use strict";e.d(R,{W:()=>o});var n=e(71476),a=e(53305),l=e(7959),r=e(18605);const o={id:l.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(m,d)=>u=>u.pipe((0,n.U)(i=>o.transformer(m,d)(i))),transformer:(m,d)=>u=>{const i=g(u);return u.length>1&&i?r.M.transformer({byField:i},d)(u):u}};function g(m){let d;for(const u of m){const{timeField:i}=(0,a.sV)(u);if(!i)return;if(!d)d=i.name;else if(d!==i.name)return}return d}},18660:(J,R,e)=>{"use strict";e.d(R,{P:()=>o,u:()=>g});var n=e(71476),a=e(36085),l=e(7959),r=e(21070);const o={id:l.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(m,d)=>u=>!m.include&&!m.exclude?u.pipe(r.d.operator({},d)):(typeof m.include?.options=="string"?m.include.options=d.interpolate(m.include?.options):typeof m.include?.options?.pattern=="string"&&(m.include.options.pattern=d.interpolate(m.include?.options.pattern)),typeof m.exclude?.options=="string"?m.exclude.options=d.interpolate(m.exclude?.options):typeof m.exclude?.options?.pattern=="string"&&(m.exclude.options.pattern=d.interpolate(m.exclude?.options.pattern)),u.pipe((0,n.U)(i=>{const f=m.include?(0,a.sq)(m.include):null,c=m.exclude?(0,a.sq)(m.exclude):null,E=[];for(const p of i){const h=[];for(let s=0;s<p.fields.length;s++){const v=p.fields[s];if(c){if(c(v,p,i))continue;f||h.push(v)}f&&f(v,p,i)&&h.push(v)}if(!h.length)continue;const y={...p,fields:h};E.push(y)}return E})))},g={id:l.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(m,d)=>u=>!m.include&&!m.exclude?u.pipe(r.d.operator({},d)):u.pipe((0,n.U)(i=>{const f=m.include?(0,a.b9)(m.include):null,c=m.exclude?(0,a.b9)(m.exclude):null,E=[];for(const p of i){if(c){if(c(p))continue;f||E.push(p)}f&&f(p)&&E.push(p)}return E}))}},22439:(J,R,e)=>{"use strict";e.d(R,{f:()=>o,w:()=>r});var n=e(86981),a=e(18660),l=e(7959);const r={id:l.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(g,m)=>d=>d.pipe(a.P.operator({include:o(m,g.include,g.byVariable),exclude:o(m,g.exclude,g.byVariable)},m))},o=(g,m,d)=>{if(!m)return;const{names:u,pattern:i,variable:f}=m;if(d&&f){const c=g.interpolate(f);if(/\{.*\}/.test(c)){const E=c.slice(1).slice(0,-1).split(",");return{id:n.mi.byNames,options:{names:E}}}return{id:n.mi.byNames,options:{names:c.split(",")}}}if(!((!Array.isArray(u)||u.length===0)&&!i))return i?!Array.isArray(u)||u.length===0?{id:n.mi.byRegexp,options:i}:{id:n.mi.byRegexpOrNames,options:m}:{id:n.mi.byNames,options:{names:u}}}},86968:(J,R,e)=>{"use strict";e.d(R,{ER:()=>u,JA:()=>i,PQ:()=>d});var n=e(71476),a=e(69330),l=e(36085),r=e(86981),o=e(7959),g=e(21070),m=e(67206),d=(E=>(E.exclude="exclude",E.include="include",E))(d||{}),u=(E=>(E.all="all",E.any="any",E))(u||{});const i={id:o.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(E,p)=>h=>{const y=E.filters,s=E.match==="all",v=E.type==="include";if(!Array.isArray(y)||y.length===0)return h.pipe(g.d.operator({},p));const C=[];return(0,m.U)()&&C.push(...y.map(D=>{if(D.config.id===r.mE.between){const M=p.interpolate(D.config.options.from),P=p.interpolate(D.config.options.to);return{...D,config:{...D.config,options:{...D.config.options,to:P,from:M}}}}else{if(D.config.id===r.mE.regex)return D;if(D.config.options.value){const M=p.interpolate(D.config.options.value),P={...D,config:{...D.config,options:{...D.config.options,value:M}}};return P.config.options.value=M,P}}return D})),h.pipe((0,n.U)(D=>{if(!Array.isArray(D)||D.length===0)return D;const M=new Set;for(const S of D){const I=c(S,D);let T;(0,m.U)()?T=f(C,I):T=f(y,I);for(let O=0;O<S.length;O++){if(M.has(O))continue;let A=!0;for(const B of T){const b=B(O,S,D);if(!s&&b){A=!0;break}if(s&&!b){A=!1;break}A=b}A&&M.add(O)}}const P=[],x=v?M.size:D[0].length-M.size;for(const S of D){const I=[];for(const T of S.fields){const O=[];for(let A=0;A<S.length;A++){if(v&&M.has(A)){O.push(T.values[A]);continue}if(!v&&!M.has(A)){O.push(T.values[A]);continue}}I.push({...T,values:O,state:{}})}P.push({...S,fields:I,length:x})}return P}))}},f=(E,p)=>{const h=()=>!1;return E.map(y=>{const s=p[y.fieldName]??-1;if(s<0)return console.warn(`[FilterByValue] Could not find index for field name: ${y.fieldName}`),h;const v=(0,l.IG)(y.config);return(C,D,M)=>v(C,D.fields[s],D,M)})},c=(E,p)=>E.fields.reduce((h,y,s)=>{const v=(0,a.CZ)(y,E,p);return h[v]=s,h},{})},99804:(J,R,e)=>{"use strict";e.d(R,{kA:()=>u,vh:()=>g});var n=e(71476),a=e(89591),l=e(36085),r=e(86981),o=e(7959),g=(f=>(f.UpperCase="Upper Case",f.LowerCase="Lower Case",f.SentenceCase="Sentence Case",f.TitleCase="Title Case",f.PascalCase="Pascal Case",f.CamelCase="Camel Case",f.SnakeCase="Snake Case",f.KebabCase="Kebab Case",f.Trim="Trim",f.Substring="Substring",f))(g||{});const m=f=>{const c=f.split(" ");for(let E=0;E<c.length;E++)c[E]=c[E].charAt(0).toUpperCase()+c[E].slice(1).toLowerCase();return c},d=f=>c=>c.values.map(E=>{switch(f.outputFormat){case"Upper Case":return E.toUpperCase();case"Lower Case":return E.toLowerCase();case"Sentence Case":return E.charAt(0).toUpperCase()+E.slice(1);case"Title Case":return m(E).join(" ");case"Pascal Case":return m(E).join("");case"Camel Case":return E=m(E).join(""),E.charAt(0).toLowerCase()+E.slice(1);case"Snake Case":return E.toLowerCase().split(" ").join("_");case"Kebab Case":return E.toLowerCase().split(" ").join("-");case"Trim":return E.trim();case"Substring":return E.substring(f.substringStart,f.substringEnd)}}),u={id:o.W.formatString,name:"Format string",description:"Manipulate string fields formatting",defaultOptions:{stringField:"",outputFormat:"Upper Case"},operator:f=>c=>c.pipe((0,n.U)(E=>{if(E.length===0)return E;const p=l.Ls.get(r.mi.byName).get(f.stringField),h=d(f),y=i(p,h);return E.map(s=>({...s,fields:y(s,E)}))}))},i=(f,c)=>(E,p)=>E.fields.map(h=>{if(f(h,E,p)){const y=c(h);return{...h,type:a.fS.string,values:y}}return h})},20687:(J,R,e)=>{"use strict";e.d(R,{i:()=>u,x:()=>d});var n=e(71476),a=e(53305),l=e(69330),r=e(36604),o=e(89591),g=e(3181),m=e(7959),d=(E=>(E.aggregate="aggregate",E.groupBy="groupby",E))(d||{});const u={id:m.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group.",defaultOptions:{fields:{}},isApplicable:E=>{let p=0;for(const h of E)h.fields.length>p&&(p=h.fields.length);return p>=2?r.s.Applicable:r.s.NotApplicable},isApplicableDescription:E=>{let p=0;for(const h of E)h.fields.length>p&&(p=h.fields.length);return`The Group by transformation requires a series with at least two fields to work. The maximum number of fields found on a series is ${p}`},operator:E=>p=>p.pipe((0,n.U)(h=>{if(!Object.keys(E.fields).find(v=>E.fields[v].operation==="groupby"))return h;const s=[];for(const v of h){const C=[];for(const P of v.fields)i(P,E)&&C.push(P);if(C.length===0)continue;const D=new Map;for(let P=0;P<v.length;P++){const x=String(C.map(I=>I.values[P])),S=D.get(x)??{};D.has(x)||D.set(x,S);for(let I of v.fields){const T=(0,l.CZ)(I);S[T]||(S[T]={name:T,type:I.type,config:{...I.config},values:[]}),S[T].values.push(I.values[P])}}const M=[];for(const P of C){const x=[],S=(0,l.CZ)(P);D.forEach(I=>{x.push(I[S].values[0])}),M.push({name:P.name,type:P.type,config:{...P.config},values:x})}for(const P of v.fields){if(!f(P,E))continue;const x=(0,l.CZ)(P),S=E.fields[x].aggregations,I={};D.forEach(T=>{const O=T[x],A=(0,g.Kx)({field:O,reducers:S});for(const B of S)Array.isArray(I[B])||(I[B]=[]),I[B].push(A[B])});for(const T of S){const O={name:`${x} (${T})`,values:I[T]??[],type:o.fS.other,config:{}};O.type=c(T,P,O),M.push(O)}}s.push({fields:M,length:D.size})}return s}))},i=(E,p)=>{const h=(0,l.CZ)(E);return p?.fields[h]?.operation==="groupby"},f=(E,p)=>{const h=(0,l.CZ)(E);return p?.fields[h]?.operation==="aggregate"&&Array.isArray(p?.fields[h].aggregations)&&p?.fields[h].aggregations.length>0},c=(E,p,h)=>{switch(E){case g.gz.allIsNull:return o.fS.boolean;case g.gz.last:case g.gz.lastNotNull:case g.gz.first:case g.gz.firstNotNull:return p.type;default:return(0,a.fu)(h)??o.fS.string}}},80742:(J,R,e)=>{"use strict";e.d(R,{Jz:()=>P,Ok:()=>y,Op:()=>p,UO:()=>x,Zi:()=>i,cO:()=>s,gY:()=>M,kl:()=>v,mB:()=>S,py:()=>E,qr:()=>C,wL:()=>h,zM:()=>T});var n=e(71476),a=e(94123),l=e(48706),r=e(51226),o=e(89591),g=e(99331),m=e(7959),d=e(82837),u=e(67206);const i=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],f=[null],c=(O,A)=>O-A,E={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},p={id:m.W.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(O,A)=>B=>B.pipe((0,n.U)(b=>p.transformer(O,A)(b))),transformer:(O,A)=>B=>{if(!Array.isArray(B)||B.length===0)return B;let b,W;O.bucketSize&&((0,u.U)()&&(O.bucketSize=A.interpolate(O.bucketSize.toString())),typeof O.bucketSize=="string"?b=parseFloat(O.bucketSize):b=O.bucketSize,isNaN(b)&&(b=void 0)),O.bucketOffset&&((0,u.U)()&&(O.bucketOffset=A.interpolate(O.bucketOffset.toString())),typeof O.bucketOffset=="string"?W=parseFloat(O.bucketOffset):W=O.bucketOffset,isNaN(W)&&(W=void 0));const V={bucketSize:b,bucketOffset:W,combine:O.combine},w=M(B,V);return w==null?[]:[T(w)]}},h="xMin";function y(O){return O===h||O==="BucketMin"}const s="xMax";function v(O){return O===s||O==="BucketMax"}function C(O){let A,B;const b=[];for(const W of O.fields)y(W.name)?A=W:v(W.name)?B=W:W.type===o.fS.number&&b.push(W);if(!B&&A&&A.values.length>1){let W=A.values,V=(0,g.O)(W[1]-W[0],6);B={...A,name:s,values:W.map(w=>w+V)}}if(!A&&B&&B?.values.length>1){let W=B.values,V=(0,g.O)(W[1]-W[0],6);A={...B,name:h,values:W.map(w=>w-V)}}if(A&&B&&b.length)return{xMin:A,xMax:B,counts:b}}const D=20;function M(O,A){let B=A?.bucketSize,b=A?.bucketOffset??0;if(!B||B<0){let F=[];for(const ce of O)for(const q of ce.fields)q.type===o.fS.number&&(F=F.concat(q.values));F=F.filter(ce=>ce!=null),F.sort((ce,q)=>ce-q);let k=1/0;if(F.length===1)k=1;else for(let ce=1;ce<F.length;ce++){let q=F[ce]-F[ce-1];q!==0&&(k=Math.min(k,q))}let _=F[0];const ae=(F[F.length-1]-_)/D;for(let ce=0;ce<i.length;ce++){let q=i[ce];if(ae<q&&q>=k){B=q;break}}}const W=F=>S(F-b,B)+b;let V=((""+B).match(/\.\d+$/)??["."])[0].length-1,w=[],K=[],z;for(const F of O)for(const k of F.fields)if(k.type===o.fS.number){let _=I(k.values,W,f,c);w.push(_),K.push({...k,config:{...k.config,unit:k.config.unit==="short"?"short":void 0}}),!z&&k.config.unit&&(z=k.config)}if(!K.length)return null;let G=(0,d.v_)(w);for(let F=1;F<G.length;F++){let k=G[F];for(let _=0;_<k.length;_++)k[_]==null&&(k[_]=0)}const Q={name:h,values:G[0],type:o.fS.number,state:void 0,config:V===0?z??{}:{...z,decimals:V}},j={...Q,name:s,values:G[0].map(F=>F+B)};if(A?.combine){const F=new Array(G[0].length).fill(0);for(let k=1;k<G.length;k++)for(let _=0;_<F.length;_++)F[_]+=G[k][_];K=[{...K[0],name:"count",values:F,type:o.fS.number,state:void 0}]}else K.forEach((F,k)=>{F.values=G[k+1]});return{xMin:Q,xMax:j,counts:K}}function P(O,A){return Math.round(O/A)*A}function x(O,A){return Math.ceil(O/A)*A}function S(O,A){return Math.floor(O/A)*A}function I(O,A,B,b){let W=new Map;for(let z=0;z<O.length;z++){let G=O[z];G!=null&&(G=A(G));let Q=W.get(G);Q?Q.count++:W.set(G,{value:G,count:1})}B&&B.forEach(z=>W.delete(z));let V=[...W.values()];b&&V.sort((z,G)=>b(z.value,G.value));let w=Array(V.length),K=Array(V.length);for(let z=0;z<V.length;z++)w[z]=V[z].value,K[z]=V[z].count;return[w,K]}function T(O,A){if(!O.xMin.display){const B=(0,a.U)({field:O.xMin,theme:A??(0,l.j)()});O.xMin.display=B,O.xMax.display=B}return O.counts[0].display=(0,a.U)({field:O.counts[0],theme:A??(0,l.j)()}),{length:O.xMin.values.length,meta:{type:r.P.Histogram},fields:[O.xMin,O.xMax,...O.counts]}}},18605:(J,R,e)=>{"use strict";e.d(R,{M:()=>m,c:()=>g});var n=e(71476),a=e(36085),l=e(86981),r=e(7959),o=e(82837),g=(d=>(d.outer="outer",d.inner="inner",d.outerTabular="outerTabular",d))(g||{});const m={id:r.W.joinByField,aliasIds:[r.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(d,u)=>i=>i.pipe((0,n.U)(f=>m.transformer(d,u)(f))),transformer:(d,u)=>{let i;return f=>{if(f.length>1){d.byField&&!i&&(i=a.Ls.get(l.mi.byName).get(u.interpolate(d.byField)));const c=(0,o._9)({frames:f,joinBy:i,mode:d.mode});if(c)return[c]}return f}}}},82837:(J,R,e)=>{"use strict";e.d(R,{Y3:()=>u,_9:()=>i,lP:()=>s,v_:()=>y});var n=e(27392),a=e(53305),l=e(89591),r=e(36085),o=e(86981),g=e(18605);function m(v){const{timeField:C}=(0,a.sV)(v[0]);if(C)return r.Ls.get(o.mi.firstTimeField).get({});let D=[];for(const M of v[0].fields)M.type===l.fS.number&&D.push(M.name);for(let M=1;M<v.length;M++){const P=[];for(const x of v[0].fields)x.type===l.fS.number&&P.push(x.name);D=D.filter(x=>!P.includes(x))}return r.Ls.get(o.mi.byName).get(D[0])}function d(v){return v.joinBy??m(v.frames)}function u(v,C){if(C>=0){let D=v.fields[C];D.type!==l.fS.string&&!s(D.values)&&(v=(0,a.aK)(v,C))}return v}function i(v){if(!v.frames?.length)return;if(v.frames.length===1){let T=v.frames[0],O=T;const A=d(v);let B=O.fields.findIndex(b=>A(b,O,v.frames));if(v.keepOriginIndices&&(O={...T,fields:T.fields.map((b,W)=>{const V={...b},w={frameIndex:0,fieldIndex:W};return V.state?V.state.origin=w:V.state={origin:w},V})},B>0)){const b=O.fields[B],W=O.fields.filter((V,w)=>w!==B);W.unshift(b),O.fields=W,B=0}if(B>=0&&(O=u(O,B)),v.keep){let b=O.fields.filter((W,V)=>V===B||v.keep(W,O,v.frames));T!==O?O.fields=b:O={...T,fields:b}}return O}const C=[],D=[],M=[],P=[];let x=1;const S=d(v);for(let T=0;T<v.frames.length;T++){const O=v.frames[T];if(!O||!O.fields?.length)continue;const A=[c];let B,b=[],W=[];for(let w=0;w<O.fields.length;w++){const K=O.fields[w];if(K.state=K.state||{},!B&&S(K,O,v.frames))B=K;else{if(v.keep&&!v.keep(K,O,v.frames))continue;let z=K.config.custom?.spanNulls;A.push(z===!0?c:z===-1?E:p);let G=K.labels??{},Q=K.name;O.name&&(K.name===l.M5?Q=O.name:G={...G,name:O.name}),b.push({...K,name:Q,labels:G})}v.keepOriginIndices&&(K.state.origin={frameIndex:T,fieldIndex:w})}if(!B)continue;M.length===0&&M.push(B),C.push(A);const V=[B.values];for(const w of b)V.push(w.values),M.push(w),delete w.state?.displayName,W.push(x),x++;P.push(W),D.push(V)}let I=[];return v.mode===g.c.outerTabular?I=f(D,P,M.length,C):I=y(D,C,v.mode),{length:I[0]?I[0].length:0,fields:M.map((T,O)=>({...T,values:I[O]}))}}function f(v,C,D,M){let P={};for(let S=0;S<v.length;S++){let I=v[S],T=I[0];for(let O=0;O<v.length;O++){if(O===S)continue;let A=v[O],B=A[0];for(let b=0;b<T.length;b++){const W=T[b],V=D-1;let w=[W].concat(new Array(V)),K=0;for(let z=1;z<I.length;z++){const G=C[S][K];w[G]=I[z][b],K++}for(let z=0;z<B.length;z++)if(T[b]===B[z]){let G=0;for(let Q=1;Q<A.length;Q++){const j=C[O][G];w[j]=A[Q][z],G++}break}P[JSON.stringify(w)]=w}}}let x=[];for(let S=0;S<D;S++)x.push(new Array(0));for(let S in P){const I=P[S];for(let T=0;T<I.length;T++)x[T].push(I[T])}return x}const c=0,E=1,p=2;function h(v,C,D){for(let M=0,P,x=-1;M<C.length;M++){let S=C[M];if(S>x){for(P=S-1;P>=0&&v[P]==null;)v[P--]=null;for(P=S+1;P<D&&v[P]==null;)v[x=P++]=null}}}function y(v,C,D=g.c.outer){let M;if(D===g.c.inner)M=new Set((0,n.Z)(v.map(I=>I[0])));else{M=new Set;for(let I=0;I<v.length;I++){let O=v[I][0],A=O.length;for(let B=0;B<A;B++)M.add(O[B])}}let P=[Array.from(M).sort((I,T)=>I-T)],x=P[0].length,S=new Map;for(let I=0;I<x;I++)S.set(P[0][I],I);for(let I=0;I<v.length;I++){let T=v[I],O=T[0];for(let A=1;A<T.length;A++){let B=T[A],b=Array(x).fill(void 0),W=C?C[I][A]:E,V=[];for(let w=0;w<B.length;w++){let K=B[w],z=S.get(O[w]);K===null?W!==c&&(b[z]=K,W===p&&V.push(z)):b[z]=K}h(b,V,x),P.push(b)}}return P}function s(v,C=50){const D=v.length;if(D<=1)return!0;let M=0,P=D-1;for(;M<=P&&v[M]==null;)M++;for(;P>=M&&v[P]==null;)P--;if(P<=M)return!0;const x=Math.max(1,Math.floor((P-M+1)/C));for(let S=v[M],I=M+x;I<=P;I+=x){const T=v[I];if(T!=null){if(T<=S)return!1;S=T}}return!0}},20788:(J,R,e)=>{"use strict";e.d(R,{k:()=>o,r:()=>g});var n=e(71476),a=e(69330),l=e(89591),r=e(7959),o=(d=>(d.Columns="columns",d.Rows="rows",d))(o||{});const g={id:r.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(d,u)=>i=>i.pipe((0,n.U)(f=>g.transformer(d,u)(f))),transformer:d=>u=>{if(d.mode==="rows")return m(u,d.keepLabels);const i=[],f=d.keepLabels?.length?new Set(d.keepLabels):void 0;for(const c of u){const E=[],p={};for(const h of c.fields){if(!h.labels){E.push(h);continue}const y={...h,config:{...h.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};E.push(y);for(const s of Object.keys(h.labels)){if(f&&!f.has(s))continue;if(d.valueLabel===s){y.name=h.labels[s];continue}(p[s]??(p[s]=new Set)).add(h.labels[s])}}for(const h in p)for(const y of p[h]){const s=new Array(c.length).fill(y);E.push({name:h,type:l.fS.string,values:s,config:{}})}i.push({...c,fields:E,length:c.length})}return i}};function m(d,u){const i=[];for(const f of d)for(const c of f.fields)if(c.labels){const E=[],p=[];if(u)for(const h of u)E.push(h),p.push(c.labels[h]);else for(const[h,y]of Object.entries(c.labels))E.push(h),p.push(y);p.length&&i.push({...f,name:(0,a.CZ)(c,f,d),fields:[{name:"label",type:l.fS.string,config:{},values:E},{name:"value",type:l.fS.string,config:{},values:p}],length:p.length})}return i}},55971:(J,R,e)=>{"use strict";e.d(R,{R:()=>m});var n=e(86832),a=e.n(n),l=e(71476),r=e(7906),o=e(36604),g=e(7959);const m={id:g.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},isApplicable:p=>p.length>1?o.s.Applicable:o.s.NotApplicable,isApplicableDescription:p=>`The merge transformation requires at least 2 data series to work. There is currently ${p.length} data series.`,operator:p=>h=>h.pipe((0,l.U)(y=>{if(!Array.isArray(y)||y.length<=1)return y;const s=y.filter(T=>T.fields.length>0);if(s.length===0)return[y[0]];const v=new Set,C={},D=[],M=new r.v;for(let T=0;T<s.length;T++){const O=s[T];for(let A=0;A<O.fields.length;A++){const B=O.fields[A];v.has(B.name)||(M.addField(d(B)),v.add(B.name)),C[B.name]=C[B.name]||{},C[B.name][T]=A,s.length-1===T&&c(C,B,s)&&D.push(B.name)}}if(D.length===0)return y;const P={},x=[],S=u(s,C,D),I=i(s,v,C);for(let T=0;T<s.length;T++){const O=s[T];for(let A=0;A<O.length;A++){const B=S(T,A),b=I(T,A);if(!Array.isArray(P[B])){P[B]=[b],x.push(E(B,P));continue}let W=!1;P[B]=P[B].map(V=>f(V,b)?(W=!0,{...V,...b}):V),W||(P[B].push(b),x.push(E(B,P)))}}for(const T of x){const O=P[T.key][T.index];O&&M.add(O)}return[M]}))},d=p=>({...(0,n.omit)(p,["values","state","labels","config"]),values:[],config:{...(0,n.omit)(p.config,"displayName")}}),u=(p,h,y)=>{const s=y.reduce((v,C)=>Object.keys(h[C]).reduce((D,M)=>(D[M]=D[M]||[],D[M].push(h[C][M]),D),v),{});return(v,C)=>s[v].reduce((D,M)=>D+p[v].fields[M].values[C],"")},i=(p,h,y)=>(s,v)=>{const C={},D=Array.from(h);for(const M of D){const P=y[M];if(!P)continue;const x=P[s];if(typeof x!="number")continue;const S=p[s];if(!S||!S.fields)continue;const I=S.fields[x];!I||!I.values||(C[M]=I.values[v])}return C},f=(p,h)=>{let y=!0;for(const s in h)if(!(typeof p[s]>"u")&&p[s]!==null&&p[s]!==h[s]){y=!1;break}return y},c=(p,h,y)=>Object.keys(p[h.name]).length===y.length,E=(p,h)=>({key:p,index:h[p].length-1})},21070:(J,R,e)=>{"use strict";e.d(R,{d:()=>a});var n=e(7959);const a={id:n.W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:l=>r=>r,transformer:l=>r=>r}},16761:(J,R,e)=>{"use strict";e.d(R,{$:()=>m,t:()=>g});var n=e(86832),a=e.n(n),l=e(71476),r=e(69330),o=e(7959);const g={id:o.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:i=>f=>f.pipe((0,l.U)(c=>{const E=d(i.indexByName);return!Array.isArray(c)||c.length===0?c:c.map(p=>({...p,fields:E(p.fields,c,p)}))}))},m=i=>(f,c)=>u(f,i)-u(c,i),d=i=>(f,c,E)=>{if(!Array.isArray(f)||f.length===0||!i||Object.keys(i).length===0)return f;const p=m(i);return(0,n.clone)(f).sort((h,y)=>p((0,r.CZ)(h,E,c),(0,r.CZ)(y,E,c)))},u=(i,f)=>Number.isInteger(f[i])?f[i]:Number.MAX_SAFE_INTEGER},15951:(J,R,e)=>{"use strict";e.d(R,{AL:()=>u,mf:()=>i});var n=e(71476),a=e(53305),l=e(69330),r=e(89591),o=e(3181),g=e(36085),m=e(73550),d=e(7959),u=(h=>(h.SeriesToRows="seriesToRows",h.ReduceFields="reduceFields",h))(u||{});const i={id:d.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last.",defaultOptions:{reducers:[o.gz.max]},operator:h=>y=>y.pipe((0,n.U)(s=>{if(!h?.reducers?.length)return s;const v=h.fields?(0,g.sq)(h.fields):h.includeTimeField&&h.mode==="reduceFields"?m.m3:m.Qw;if(h.mode==="reduceFields")return p(s,v,h.reducers);const C=f(s,v,h.reducers,h.labelsToFields);return C?[C]:[]}))};function f(h,y,s,v){const C=o.TB.list(s),D=C.map(x=>x.id),M=[],P=v?c(h):[];for(const x of h){const S=x.fields.filter(b=>y(b,x,h)),I=S.length,T=[],O=new Array(I);T.push({name:"Field",type:r.fS.string,values:O,config:{}});const A={};if(v)for(const b of P)A[b]=new Array(I),T.push({name:b,type:r.fS.string,values:A[b],config:{}});const B={};for(const b of C)B[b.id]=new Array(I),T.push({name:b.name,type:r.fS.other,values:B[b.id],config:{}});for(let b=0;b<S.length;b++){const W=S[b],V=(0,o.Kx)({field:W,reducers:D});if(v){if(O[b]=W.name,W.labels)for(const w of Object.keys(W.labels))A[w][b]=W.labels[w]}else O[b]=(0,l.CZ)(W,x,h);for(const w of C){const K=V[w.id];B[w.id][b]=K}}for(const b of T)if(b.type===r.fS.other){const W=(0,a.fu)(b);W&&(b.type=W)}M.push({...x,fields:T,length:I})}return E(M)}function c(h){const y=new Set;for(const s of h)for(const v of s.fields)if(v.labels)for(const C of Object.keys(v.labels))y.add(C);return[...y]}function E(h){if(!h?.length)return;const y=h[0];for(let s=1;s<h.length;s++){const v=h[s];for(let C=0;C<y.fields.length;C++){const D=y.fields[C];for(let M=0;M<v.fields.length;M++){const P=v.fields[M],x=C===0&&M===0,S=D.type===P.type&&D.name===P.name;if(x||S){const I=D.values,T=P.values;D.values=I.concat(T)}}}}return y.name=void 0,y.length=y.fields[0].values.length,y}function p(h,y,s){const C=o.TB.list(s).map(M=>M.id),D=[];for(const M of h){const P=[];for(const x of M.fields)if(y(x,M,h)){const S=(0,o.Kx)({field:x,reducers:C});for(const I of C){const T=S[I],O={...x,values:[T]};O.state=void 0,C.length>1&&(O.labels||(O.labels={}),O.labels.reducer=o.TB.get(I).name),P.push(O)}}P.length&&D.push({...M,fields:P,length:1})}return D}},67206:(J,R,e)=>{"use strict";e.d(R,{U:()=>n});const n=()=>window?.grafanaBootData?.settings?.featureToggles?.transformationsVariableSupport},69906:()=>{},83927:()=>{},41560:(J,R,e)=>{"use strict";e.d(R,{Z:()=>n});var n=(a=>(a.NoData="no_data",a.Paused="paused",a.Alerting="alerting",a.OK="ok",a.Pending="pending",a.Unknown="unknown",a))(n||{})},19353:(J,R,e)=>{"use strict";e.d(R,{L:()=>n});var n=(a=>(a.Field="field",a.Text="text",a.Skip="skip",a))(n||{})},96083:(J,R,e)=>{"use strict";e.d(R,{CQ:()=>o,k8:()=>r,zj:()=>l});var n=e(30670),a=e(41175),l=(g=>(g.CloudAlerting="cloud-alerting",g.UnifiedAlerting="unified-alerting",g.Dashboard="dashboard",g.Explore="explore",g.Correlations="correlations",g.Unknown="unknown",g.PanelEditor="panel-editor",g.PanelViewer="panel-viewer",g))(l||{});class r extends n.Sg{constructor(){super(...arguments),this._extensionConfigs=[]}init(m){}setRootPage(m){return this.root=m,this}setComponentsFromLegacyExports(m){if(m.ConfigCtrl&&(this.angularConfigCtrl=m.ConfigCtrl),this.meta&&this.meta.includes){for(const d of this.meta.includes)if(d.type===n.$_.page&&d.component&&!m[d.component]){console.warn("App Page uses unknown component: ",d.component,this.meta);continue}}}get extensionConfigs(){return this._extensionConfigs}configureExtensionLink(m){return this._extensionConfigs.push({...m,type:a.D.link}),this}configureExtensionComponent(m){return this._extensionConfigs.push({...m,type:a.D.component}),this}}var o=(g=>(g.alpha="alpha",g.beta="beta",g))(o||{})},70929:(J,R,e)=>{"use strict";e.d(R,{e:()=>n});var n=(a=>(a.OpenSource="Open Source",a.Pro="Pro",a.Enterprise="Enterprise",a))(n||{})},35664:(J,R,e)=>{"use strict";e.d(R,{Hx:()=>n,Z3:()=>a,bm:()=>l});const n=0,a=100,l="SAML"},40793:(J,R,e)=>{"use strict";e.d(R,{m:()=>n});var n=(a=>(a[a.Off=0]="Off",a[a.Crosshair=1]="Crosshair",a[a.Tooltip=2]="Tooltip",a))(n||{})},10694:(J,R,e)=>{"use strict";e.d(R,{Gl:()=>l,Gu:()=>n,dC:()=>a,fQ:()=>r});var n=(o=>(o.NotStarted="NotStarted",o.Loading="Loading",o.Streaming="Streaming",o.Done="Done",o.Error="Error",o))(n||{});const a=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var l=(o=>(o.Null="null",o.Ignore="connected",o.AsZero="null as zero",o))(l||{});const r=o=>!!o},89591:(J,R,e)=>{"use strict";e.d(R,{Ls:()=>l,M5:()=>a,fS:()=>n,rN:()=>r});var n=(o=>(o.time="time",o.number="number",o.string="string",o.boolean="boolean",o.trace="trace",o.geo="geo",o.enum="enum",o.other="other",o.frame="frame",o.nestedFrames="nestedFrames",o))(n||{});const a="Value",l="Time",r="Metric"},51226:(J,R,e)=>{"use strict";e.d(R,{P:()=>n});var n=(a=>(a.TimeSeriesWide="timeseries-wide",a.TimeSeriesLong="timeseries-long",a.TimeSeriesMany="timeseries-many",a.TimeSeriesMulti="timeseries-multi",a.NumericWide="numeric-wide",a.NumericMulti="numeric-multi",a.NumericLong="numeric-long",a.LogLines="log-lines",a.DirectoryListing="directory-listing",a.HeatmapRows="heatmap-rows",a.HeatmapCells="heatmap-cells",a.Histogram="histogram",a))(n||{})},69733:(J,R,e)=>{"use strict";e.d(R,{L8:()=>l,n1:()=>n,o3:()=>r,sN:()=>a});var n=(o=>(o.Datasource="Datasource",o.Correlations="Correlations",o.ExploreCorrelationsEditor="CorrelationsEditor",o))(n||{}),a=(o=>(o.Regex="regex",o.Logfmt="logfmt",o))(a||{}),l=(o=>(o.Series="series",o.Field="field",o.Fields="fields",o.Value="value",o.BuiltIn="built-in",o.Template="template",o))(l||{}),r=(o=>(o.Values="values",o))(r||{})},54721:(J,R,e)=>{"use strict";e.d(R,{MF:()=>r,Ru:()=>o,eA:()=>g,hf:()=>l,iL:()=>m});var n=e(20510),a=e(30670);class l extends a.Sg{constructor(u){super(),this.DataSourceClass=u,this.components={}}setConfigEditor(u){return this.components.ConfigEditor=u,this}setConfigCtrl(u){return this.angularConfigCtrl=u,this}setQueryCtrl(u){return this.components.QueryCtrl=u,this}setAnnotationQueryCtrl(u){return this.components.AnnotationsQueryCtrl=u,this}setQueryEditor(u){return this.components.QueryEditor=u,this}setExploreQueryField(u){return this.components.ExploreQueryField=u,this}setExploreMetricsQueryField(u){return this.components.ExploreMetricsQueryField=u,this}setExploreLogsQueryField(u){return this.components.ExploreLogsQueryField=u,this}setQueryEditorHelp(u){return this.components.QueryEditorHelp=u,this}setExploreStartPage(u){return this.setQueryEditorHelp(u)}setVariableQueryEditor(u){return this.components.VariableQueryEditor=u,this}setMetadataInspector(u){return this.components.MetadataInspector=u,this}setComponentsFromLegacyExports(u){this.angularConfigCtrl=u.ConfigCtrl,this.components.QueryCtrl=u.QueryCtrl,this.components.AnnotationsQueryCtrl=u.AnnotationsQueryCtrl,this.components.ExploreQueryField=u.ExploreQueryField,this.components.QueryEditor=u.QueryEditor,this.components.QueryEditorHelp=u.QueryEditorHelp,this.components.VariableQueryEditor=u.VariableQueryEditor}}class r{constructor(u){this.name=u.name,this.id=u.id,this.type=u.type,this.meta=u.meta,this.cachingConfig=u.cachingConfig,this.uid=u.uid}getRef(){return{type:this.type,uid:this.uid}}}var o=(d=>(d.Logs="Logs",d.Metrics="Metrics",d.Tracing="Tracing",d))(o||{}),g=(d=>(d.Cancelled="cancelled",d.Timeout="timeout",d.Unknown="unknown",d))(g||{});class m{}m=(0,n.s)(m),r=(0,n.s)(r)},91866:()=>{},81266:()=>{},97898:(J,R,e)=>{"use strict";e.d(R,{R:()=>a,S:()=>n});var n=(l=>(l.Thresholds="thresholds",l.PaletteClassic="palette-classic",l.PaletteClassicByName="palette-classic-by-name",l.PaletteSaturated="palette-saturated",l.ContinuousGrYlRd="continuous-GrYlRd",l.ContinuousRdYlGr="continuous-RdYlGr",l.ContinuousBlYlRd="continuous-BlYlRd",l.ContinuousYlRd="continuous-YlRd",l.ContinuousBlPu="continuous-BlPu",l.ContinuousYlBl="continuous-YlBl",l.ContinuousBlues="continuous-blues",l.ContinuousReds="continuous-reds",l.ContinuousGreens="continuous-greens",l.ContinuousPurples="continuous-purples",l.Fixed="fixed",l.Shades="shades",l))(n||{});const a="#808080"},82909:(J,R,e)=>{"use strict";e.d(R,{Y4:()=>n,qb:()=>l,v3:()=>a});function n(r){return o=>o.__systemRef===r}const a=r=>typeof r?.__systemRef=="string";var l=(r=>(r.Unit="unit",r.Min="min",r.Max="max",r.Decimals="decimals",r.DisplayName="displayName",r.NoValue="noValue",r.Thresholds="thresholds",r.Mappings="mappings",r.Links="links",r.Color="color",r.Filterable="filterable",r))(l||{})},18401:()=>{},58278:()=>{},40888:()=>{},17393:(J,R,e)=>{"use strict";e.d(R,{Mo:()=>a,_S:()=>n,iJ:()=>l});const n={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,discord:!0,hipchat:!0,amazon:!0,"google-hangouts-alt":!0,pagerduty:!0,line:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,"align-left":!0,"align-right":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,"expand-arrows":!0,at:!0,ai:!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,"calendar-slash":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"corner-down-right-alt":!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,"file-landscape-alt":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-ml":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,"gf-pin":!0,"gf-prometheus":!0,"gf-traces":!0,grafana:!0,"graph-bar":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"layers-alt":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,"list-ol":!0,lock:!0,"map-marker":!0,"map-marker-plus":!0,"map-marker-minus":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,stopwatch:!0,"stopwatch-slash":!0,sync:!0,"sync-slash":!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"web-section-alt":!0,"wrap-text":!0,rss:!0,x:!0};function a(r){return!r||typeof r!="string"?!1:r in n}function l(r){if(a(r))return r}},92199:(J,R,e)=>{"use strict";e.r(R),e.d(R,{AbstractLabelOperator:()=>m.K2,AlertState:()=>ce.Z,AnnotationEventFieldSource:()=>d.L,AppEvents:()=>F.SI,AppPlugin:()=>I.k8,CoreApp:()=>I.zj,CustomVariableSupport:()=>_.Mg,DEFAULT_SAML_NAME:()=>n.bm,DashboardCursorSync:()=>g.m,DataFrameType:()=>r.P,DataLinkConfigOrigin:()=>o.n1,DataQueryErrorType:()=>T.eA,DataSourceApi:()=>T.MF,DataSourcePlugin:()=>T.hf,DataSourceVariableSupport:()=>_.gv,DataTopic:()=>m.w5,DefaultTimeZone:()=>E.Ys,ExploreMode:()=>T.Ru,FALLBACK_COLOR:()=>b.R,FeatureState:()=>I.CQ,FieldColorModeId:()=>b.S,FieldConfigProperty:()=>x.qb,FieldType:()=>l.fS,GAUGE_DEFAULT_MAXIMUM:()=>n.Z3,GAUGE_DEFAULT_MINIMUM:()=>n.Hx,GrafanaPlugin:()=>A.Sg,GrafanaThemeType:()=>W.Q,LanguageProvider:()=>T.iL,LegacyGraphHoverClearEvent:()=>F.oi,LegacyGraphHoverEvent:()=>F.IA,LiveChannelConnectionState:()=>k.yS,LiveChannelEventType:()=>k.FU,LiveChannelScope:()=>k.z,LiveChannelType:()=>k.SK,LoadingState:()=>a.Gu,LogLevel:()=>u.in,LogRowContextQueryDirection:()=>u.M4,LogsDedupDescription:()=>u.Uv,LogsDedupStrategy:()=>u.Y4,LogsMetaKind:()=>u.Ku,LogsSortOrder:()=>u.UV,LogsVolumeType:()=>u.o8,MappingType:()=>h.H,NullValueMode:()=>a.Gl,OrgRole:()=>V.B,PageLayoutType:()=>i.Q,PanelEvents:()=>F.Kh,PluginErrorCode:()=>A.w2,PluginExtensionPoints:()=>ge.y,PluginExtensionTypes:()=>ge.D,PluginIncludeType:()=>A.$_,PluginSignatureStatus:()=>A.Xy,PluginSignatureType:()=>A._Z,PluginState:()=>A.BV,PluginType:()=>A.zV,SpecialValue:()=>P.U,SpecialValueMatch:()=>h.e,StandardVariableSupport:()=>_.v6,SupplementaryQueryType:()=>u.v8,SupportedTransformationType:()=>o.sN,TIME_FORMAT:()=>E.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>l.rN,TIME_SERIES_TIME_FIELD_NAME:()=>l.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>l.M5,ThresholdsMode:()=>p.H,TransformationApplicabilityLevels:()=>P.s,VariableHide:()=>B.bU,VariableOrigin:()=>o.L8,VariableRefresh:()=>B.Bd,VariableSort:()=>B.$U,VariableSuggestionsScope:()=>o.o3,VariableSupportBase:()=>_.Tq,VariableSupportType:()=>_.j2,VisualizationSuggestionScore:()=>O._,VisualizationSuggestionsBuilder:()=>O.mi,VisualizationSuggestionsListAppender:()=>O.sf,VizOrientation:()=>O.wm,availableIconsIndex:()=>Te._S,getDefaultRelativeTimeRange:()=>E.Rr,getDefaultTimeRange:()=>E.JK,hasLogsContextSupport:()=>u.Q4,hasLogsContextUiSupport:()=>u.xW,hasQueryExportSupport:()=>m.p,hasQueryImportSupport:()=>m.CZ,hasSupplementaryQuerySupport:()=>u.mN,hasToggleableQueryFiltersSupport:()=>u.Vw,isIconName:()=>Te.Mo,isLiveChannelJoinEvent:()=>k.mx,isLiveChannelLeaveEvent:()=>k.gH,isLiveChannelMessageEvent:()=>k.RL,isLiveChannelStatusEvent:()=>k.se,isSystemOverride:()=>x.v3,isSystemOverrideWithRef:()=>x.Y4,isTruthy:()=>a.fQ,isUnsignedPluginSignature:()=>ae.x,isValidLiveChannelAddress:()=>k.nU,makeArrayIndexableVector:()=>S.U,parseLiveChannelAddress:()=>k.H7,patchArrayVectorProrotypeMethods:()=>S.X,preferredVisualizationTypes:()=>a.dC,toIconName:()=>Te.iJ,toLiveChannelId:()=>k.Aj});var n=e(35664),a=e(10694),l=e(89591),r=e(51226),o=e(69733),g=e(40793),m=e(30976),d=e(19353),u=e(69323),i=e(15750),f=e(89047),c=e.n(f),fe={};for(const he in f)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType"].indexOf(he)<0&&(fe[he]=()=>f[he]);e.d(R,fe);var E=e(54554),p=e(60695),h=e(23955),y=e(91866),s=e.n(y),fe={};for(const he in y)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(he)<0&&(fe[he]=()=>y[he]);e.d(R,fe);var v=e(40888),C=e.n(v),fe={};for(const he in v)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(he)<0&&(fe[he]=()=>v[he]);e.d(R,fe);var D=e(69906),M=e.n(D),fe={};for(const he in D)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(he)<0&&(fe[he]=()=>D[he]);e.d(R,fe);var P=e(36604),x=e(82909),S=e(11574),I=e(96083),T=e(54721),O=e(64943),A=e(30670),B=e(12699),b=e(97898),W=e(89647),V=e(24275),w=e(18401),K=e.n(w),fe={};for(const he in w)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(he)<0&&(fe[he]=()=>w[he]);e.d(R,fe);var z=e(87516),G=e.n(z),fe={};for(const he in z)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(he)<0&&(fe[he]=()=>z[he]);e.d(R,fe);var Q=e(81266),j=e.n(Q),fe={};for(const he in Q)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(he)<0&&(fe[he]=()=>Q[he]);e.d(R,fe);var F=e(71519),k=e(48614),_=e(95405),Y=e(58278),Z=e.n(Y),fe={};for(const he in Y)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(he)<0&&(fe[he]=()=>Y[he]);e.d(R,fe);var ae=e(88227),ce=e(41560),q=e(41614),De=e.n(q),fe={};for(const he in q)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(he)<0&&(fe[he]=()=>q[he]);e.d(R,fe);var oe=e(83927),te=e.n(oe),fe={};for(const he in oe)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(he)<0&&(fe[he]=()=>oe[he]);e.d(R,fe);var Te=e(17393),ge=e(41175)},94562:(J,R,e)=>{"use strict";e.d(R,{l:()=>n});var n=(a=>(a.Grid="grid",a.List="list",a))(n||{})},71519:(J,R,e)=>{"use strict";e.d(R,{IA:()=>o,Kh:()=>r,SI:()=>l,oi:()=>g});var n=e(71054),a=e(45276);const l={alertSuccess:(0,n.X)("alert-success"),alertWarning:(0,n.X)("alert-warning"),alertError:(0,n.X)("alert-error")},r={refresh:(0,n.X)("refresh"),componentDidMount:(0,n.X)("component-did-mount"),dataReceived:(0,n.X)("data-received"),dataError:(0,n.X)("data-error"),dataFramesReceived:(0,n.X)("data-frames-received"),dataSnapshotLoad:(0,n.X)("data-snapshot-load"),editModeInitialized:(0,n.X)("init-edit-mode"),initPanelActions:(0,n.X)("init-panel-actions"),initialized:(0,n.X)("panel-initialized"),panelTeardown:(0,n.X)("panel-teardown"),render:(0,n.X)("render")};class o extends a.R{}o.type="graph-hover";class g extends a.m{constructor(){super(...arguments),this.payload={point:{}}}}g.type="graph-hover-clear"},48614:(J,R,e)=>{"use strict";e.d(R,{Aj:()=>f,FU:()=>r,H7:()=>u,RL:()=>d,SK:()=>a,gH:()=>m,mx:()=>g,nU:()=>i,se:()=>o,yS:()=>l,z:()=>n});var n=(c=>(c.DataSource="ds",c.Plugin="plugin",c.Grafana="grafana",c.Stream="stream",c))(n||{}),a=(c=>(c.DataStream="stream",c.DataFrame="frame",c.JSON="json",c))(a||{}),l=(c=>(c.Pending="pending",c.Connected="connected",c.Connecting="connecting",c.Disconnected="disconnected",c.Shutdown="shutdown",c.Invalid="invalid",c))(l||{}),r=(c=>(c.Status="status",c.Join="join",c.Leave="leave",c.Message="message",c))(r||{});function o(c){return c.type==="status"}function g(c){return c.type==="join"}function m(c){return c.type==="leave"}function d(c){return c.type==="message"}function u(c){if(c?.length){let E=c.trim().split("/");if(E.length>=3)return{scope:E[0],namespace:E[1],path:E.slice(2).join("/")}}}function i(c){return!!(c?.path&&c.namespace&&c.scope)}function f(c){if(!c.scope)return"";let E=c.scope;return!c.namespace||(E+="/"+c.namespace,!c.path)?E:E+"/"+c.path}},69323:(J,R,e)=>{"use strict";e.d(R,{Ku:()=>l,M4:()=>o,Q4:()=>g,UV:()=>n.UV,Uv:()=>r,Vw:()=>f,Y4:()=>n.Y4,in:()=>a,mN:()=>u,o8:()=>d,v8:()=>m,xW:()=>i});var n=e(34547),a=(c=>(c.emerg="critical",c.fatal="critical",c.alert="critical",c.crit="critical",c.critical="critical",c.warn="warning",c.warning="warning",c.err="error",c.eror="error",c.error="error",c.info="info",c.information="info",c.informational="info",c.notice="info",c.dbug="debug",c.debug="debug",c.trace="trace",c.unknown="unknown",c))(a||{}),l=(c=>(c[c.Number=0]="Number",c[c.String=1]="String",c[c.LabelsMap=2]="LabelsMap",c[c.Error=3]="Error",c))(l||{}),r=(c=>(c.none="No de-duplication",c.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",c.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",c.signature="De-duplication of successive lines that have identical punctuation and whitespace.",c))(r||{}),o=(c=>(c.Backward="BACKWARD",c.Forward="FORWARD",c))(o||{});const g=c=>c?"getLogRowContext"in c&&"showContextToggle"in c:!1;var m=(c=>(c.LogsVolume="LogsVolume",c.LogsSample="LogsSample",c))(m||{}),d=(c=>(c.FullRange="FullRange",c.Limited="Limited",c))(d||{});const u=(c,E)=>{if(!c)return!1;const p=c;return p.getDataProvider!==void 0&&p.getSupplementaryQuery!==void 0&&p.getSupportedSupplementaryQueryTypes().includes(E)},i=c=>c?"getLogRowContextUi"in c:!1,f=c=>c!==null&&typeof c=="object"&&"toggleQueryFilter"in c&&"queryHasFilter"in c},15750:(J,R,e)=>{"use strict";e.d(R,{Q:()=>n});var n=(a=>(a[a.Standard=0]="Standard",a[a.Canvas=1]="Canvas",a[a.Custom=2]="Custom",a))(n||{})},24275:(J,R,e)=>{"use strict";e.d(R,{B:()=>n});var n=(a=>(a.None="None",a.Viewer="Viewer",a.Editor="Editor",a.Admin="Admin",a))(n||{})},64943:(J,R,e)=>{"use strict";e.d(R,{_:()=>o,mi:()=>g,sf:()=>m,wm:()=>r});var n=e(86832),a=e.n(n),l=e(89591),r=(d=>(d.Auto="auto",d.Vertical="vertical",d.Horizontal="horizontal",d))(r||{}),o=(d=>(d[d.Best=100]="Best",d[d.Good=70]="Good",d[d.OK=50]="OK",d))(o||{});class g{constructor(u,i){this.list=[],this.data=u,this.panel=i,this.dataSummary=this.computeDataSummary()}getListAppender(u){return new m(this.list,u)}computeDataSummary(){const u=this.data?.series||[];let i=0,f=0,c=0,E=0,p=0,h=0,y;for(const s of u){E+=s.length,s.meta?.preferredVisualisationType&&(y=s.meta.preferredVisualisationType);for(const v of s.fields)switch(h++,v.type){case l.fS.number:i+=1;break;case l.fS.time:f+=1;break;case l.fS.string:c+=1;break}s.length>p&&(p=s.length)}return{numberFieldCount:i,timeFieldCount:f,stringFieldCount:c,rowCountTotal:E,rowCountMax:p,fieldCount:h,preferredVisualisationType:y,frameCount:u.length,hasData:E>0,hasTimeField:f>0,hasNumberField:i>0,hasStringField:c>0}}getList(){return this.list}}class m{constructor(u,i){this.list=u,this.defaults=i}append(u){this.list.push((0,n.defaultsDeep)(u,this.defaults))}}},30670:(J,R,e)=>{"use strict";e.d(R,{$_:()=>g,BV:()=>n,Sg:()=>m,Xy:()=>l,_Z:()=>r,w2:()=>o,zV:()=>a});var n=(d=>(d.alpha="alpha",d.beta="beta",d.stable="stable",d.deprecated="deprecated",d))(n||{}),a=(d=>(d.panel="panel",d.datasource="datasource",d.app="app",d.renderer="renderer",d.secretsmanager="secretsmanager",d))(a||{}),l=(d=>(d.internal="internal",d.valid="valid",d.invalid="invalid",d.modified="modified",d.missing="missing",d))(l||{}),r=(d=>(d.grafana="grafana",d.commercial="commercial",d.community="community",d.private="private",d.core="core",d))(r||{}),o=(d=>(d.missingSignature="signatureMissing",d.invalidSignature="signatureInvalid",d.modifiedSignature="signatureModified",d))(o||{}),g=(d=>(d.dashboard="dashboard",d.page="page",d.panel="panel",d.datasource="datasource",d))(g||{});class m{addConfigPage(u){return this.configPages||(this.configPages=[]),this.configPages.push(u),this}setChannelSupport(u){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},41175:(J,R,e)=>{"use strict";e.d(R,{D:()=>n,y:()=>a});var n=(l=>(l.link="link",l.component="component",l))(n||{}),a=(l=>(l.DashboardPanelMenu="grafana/dashboard/panel/menu",l.DataSourceConfig="grafana/datasources/config",l.ExploreToolbarAction="grafana/explore/toolbar/action",l))(a||{})},88227:(J,R,e)=>{"use strict";e.d(R,{x:()=>a});var n=e(30670);function a(l){return l&&l!==n.Xy.valid&&l!==n.Xy.internal}},30976:(J,R,e)=>{"use strict";e.d(R,{CZ:()=>l,K2:()=>a,p:()=>r,w5:()=>n});var n=(o=>(o.Annotations="annotations",o))(n||{}),a=(o=>(o.Equal="Equal",o.NotEqual="NotEqual",o.EqualRegEx="EqualRegEx",o.NotEqualRegEx="NotEqualRegEx",o))(a||{});const l=o=>o?"importFromAbstractQueries"in o:!1,r=o=>o?"exportToAbstractQueries"in o:!1},89047:()=>{},41614:()=>{},12699:(J,R,e)=>{"use strict";e.d(R,{$U:()=>a,Bd:()=>n,bU:()=>l});var n=(r=>(r[r.never=0]="never",r[r.onDashboardLoad=1]="onDashboardLoad",r[r.onTimeRangeChanged=2]="onTimeRangeChanged",r))(n||{}),a=(r=>(r[r.disabled=0]="disabled",r[r.alphabeticalAsc=1]="alphabeticalAsc",r[r.alphabeticalDesc=2]="alphabeticalDesc",r[r.numericalAsc=3]="numericalAsc",r[r.numericalDesc=4]="numericalDesc",r[r.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",r[r.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",r))(a||{}),l=(r=>(r[r.dontHide=0]="dontHide",r[r.hideLabel=1]="hideLabel",r[r.hideVariable=2]="hideVariable",r))(l||{})},89647:(J,R,e)=>{"use strict";e.d(R,{Q:()=>n});var n=(a=>(a.Light="light",a.Dark="dark",a))(n||{})},60695:(J,R,e)=>{"use strict";e.d(R,{H:()=>n});var n=(a=>(a.Absolute="absolute",a.Percentage="percentage",a))(n||{})},54554:(J,R,e)=>{"use strict";e.d(R,{JK:()=>o,Rr:()=>g,T_:()=>r,Ys:()=>l});var n=e(34547),a=e(92403);const l=n.iT,r="YYYY-MM-DD HH:mm:ss";function o(){const m=(0,a.CQ)();return{from:(0,a.CQ)(m).subtract(6,"hour"),to:m,raw:{from:"now-6h",to:"now"}}}function g(){return{from:600,to:0}}},87516:()=>{},36604:(J,R,e)=>{"use strict";e.d(R,{U:()=>a,s:()=>n});var n=(l=>(l[l.NotPossible=-1]="NotPossible",l[l.NotApplicable=0]="NotApplicable",l[l.Applicable=1]="Applicable",l[l.HighlyApplicable=2]="HighlyApplicable",l))(n||{}),a=(l=>(l.True="true",l.False="false",l.Null="null",l.Empty="empty",l))(a||{})},23955:(J,R,e)=>{"use strict";e.d(R,{H:()=>n,e:()=>a});var n=(l=>(l.ValueToText="value",l.RangeToText="range",l.RegexToText="regex",l.SpecialValue="special",l))(n||{}),a=(l=>(l.True="true",l.False="false",l.Null="null",l.NaN="nan",l.NullAndNaN="null+nan",l.Empty="empty",l))(a||{})},95405:(J,R,e)=>{"use strict";e.d(R,{Mg:()=>r,Tq:()=>a,gv:()=>o,j2:()=>n,v6:()=>l});var n=(g=>(g.Legacy="legacy",g.Standard="standard",g.Custom="custom",g.Datasource="datasource",g))(n||{});class a{}class l extends a{getType(){return"standard"}}class r extends a{getType(){return"custom"}}class o extends a{getType(){return"datasource"}}},11574:(J,R,e)=>{"use strict";e.d(R,{U:()=>a,X:()=>n});function n(){Object.getOwnPropertyDescriptor(Array.prototype,"toArray")||Object.defineProperties(Array.prototype,{get:{value:function(l){return this[l]},writable:!0,enumerable:!1,configurable:!0},set:{value:function(l,r){this[l]=r},writable:!0,enumerable:!1,configurable:!0},add:{value:function(l){this.push(l)},writable:!0,enumerable:!1,configurable:!0},toArray:{value:function(){return this},writable:!0,enumerable:!1,configurable:!0}})}n();function a(l){return new Proxy(l,{get(r,o,g){if(typeof o!="symbol"){const m=+o;if(String(m)===o)return r.get(m)}return Reflect.get(r,o,g)},set(r,o,g,m){if(typeof o!="symbol"){const d=+o;if(String(d)===o)return r.set(d,g),!0}return Reflect.set(r,o,g,m)}})}},98458:(J,R,e)=>{"use strict";e.d(R,{vo:()=>o,rt:()=>d,j:()=>m});var n=e(18985),a=e(63671),l=e(77663);class r{constructor(){this.properties=[]}addCustomEditor(i){return this.properties.push(i),this}getRegistry(){return new l.B(()=>this.properties)}getItems(){return this.properties}}class o extends r{addNumberInput(i){return this.addCustomEditor({...i,id:i.path,override:n.S.get("number").editor,editor:n.S.get("number").editor,process:a.Oh,shouldApply:i.shouldApply??(()=>!0),settings:i.settings||{}})}addSliderInput(i){return this.addCustomEditor({...i,id:i.path,override:n.S.get("slider").editor,editor:n.S.get("slider").editor,process:a.Oh,shouldApply:i.shouldApply??(()=>!0),settings:i.settings||{}})}addTextInput(i){return this.addCustomEditor({...i,id:i.path,override:n.S.get("text").editor,editor:n.S.get("text").editor,process:a.op,shouldApply:i.shouldApply??(()=>!0),settings:i.settings||{}})}addSelect(i){return this.addCustomEditor({...i,id:i.path,override:n.S.get("select").editor,editor:n.S.get("select").editor,process:a.AE,shouldApply:i.shouldApply?i.shouldApply:()=>!0,settings:i.settings||{options:[]}})}addRadio(i){return this.addCustomEditor({...i,id:i.path,override:n.S.get("radio").editor,editor:n.S.get("radio").editor,process:a.AE,shouldApply:i.shouldApply?i.shouldApply:()=>!0,settings:i.settings||{options:[]}})}addBooleanSwitch(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("boolean").editor,override:n.S.get("boolean").editor,process:a.W4,shouldApply:i.shouldApply?i.shouldApply:()=>!0,settings:i.settings||{}})}addColorPicker(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("color").editor,override:n.S.get("color").editor,process:a.kG,shouldApply:i.shouldApply?i.shouldApply:()=>!0,settings:i.settings||{}})}addUnitPicker(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("unit").editor,override:n.S.get("unit").editor,process:a.VB,shouldApply:i.shouldApply?i.shouldApply:()=>!0,settings:i.settings||{}})}addFieldNamePicker(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("field-name").editor,override:n.S.get("field-name").editor,process:a.kG,shouldApply:i.shouldApply?i.shouldApply:()=>!0,settings:i.settings||{}})}addGenericEditor(i,f){return this.addCustomEditor({...i,id:i.path,editor:f,override:f,process:a.kG,shouldApply:i.shouldApply?i.shouldApply:()=>!0,settings:i.settings||{}})}}class g{constructor(i){this.cfg=i,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=f=>{const c=this.cfg.values;return c?c(f):{getValue:E=>f.getValue(`${this.path}.${E}`),onChange:(E,p)=>f.onChange(`${this.path}.${E}`,p)}},this.path=i.path,this.category=i.category,this.defaultValue=i.defaultValue}}function m(u){return u.id==="nested-panel-options"}class d extends r{addNestedOptions(i){const f=new g(i);return this.addCustomEditor(f)}addNumberInput(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("number").editor})}addSliderInput(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("slider").editor})}addTextInput(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("text").editor})}addStringArray(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("strings").editor})}addSelect(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("select").editor})}addMultiSelect(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("multi-select").editor})}addRadio(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("radio").editor})}addBooleanSwitch(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("boolean").editor})}addColorPicker(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("color").editor,settings:i.settings||{}})}addTimeZonePicker(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("timezone").editor,settings:i.settings||{}})}addUnitPicker(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("unit").editor})}addFieldNamePicker(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("field-name").editor})}addDashboardPicker(i){return this.addCustomEditor({...i,id:i.path,editor:n.S.get("dashboard-uid").editor})}}},97253:(J,R,e)=>{"use strict";e.d(R,{I:()=>l});var n=e(86832),a=e.n(n);function l(r){return typeof r=="number"?r:r===""||r===null||r===void 0||Array.isArray(r)?NaN:typeof r=="boolean"?r?1:0:(0,n.toNumber)(r)}},24571:(J,R,e)=>{"use strict";e.r(R),e.d(R,{moveItemImmutably:()=>a,sortValues:()=>o});var n=e(34547);function a(g,m,d){const u=[...g];return Array.prototype.splice.call(u,d,0,Array.prototype.splice.call(u,m,1)[0]),u}const l=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),r=(g,m)=>g-m;function o(g){return(m,d)=>{if(m===d)return 0;if(d==null||typeof d=="string"&&d.trim()==="")return-1;if(m==null||typeof m=="string"&&m?.trim()==="")return 1;let u=l.compare;return typeof m=="number"&&typeof d=="number"&&(u=r),g===n.As.Descending?u(d,m):u(m,d)}}},35648:(J,R,e)=>{"use strict";e.d(R,{L:()=>a,n:()=>l});var n=e(77663),a=(r=>(r.Add="+",r.Subtract="-",r.Divide="/",r.Multiply="*",r))(a||{});const l=new n.B(()=>[{id:"+",name:"Add",operation:(r,o)=>r+o,binaryOperationID:"+"},{id:"-",name:"Subtract",operation:(r,o)=>r-o,binaryOperationID:"-"},{id:"*",name:"Multiply",operation:(r,o)=>r*o,binaryOperationID:"*"},{id:"/",name:"Divide",operation:(r,o)=>r/o,binaryOperationID:"/"}])},29710:(J,R,e)=>{"use strict";e.d(R,{MJ:()=>v,QM:()=>E,uP:()=>f,x5:()=>i});var n=e(86832),a=e.n(n),l=e(30795),r=e.n(l),o=e(7906),g=e(53305),m=e(69330),d=e(89591),u=e(83502),i=(C=>(C[C.full=0]="full",C[C.name=1]="name",C[C.none=2]="none",C))(i||{});function f(C,D){return new E(D).readCSV(C)}var c=(C=>(C[C.Starting=0]="Starting",C[C.InHeader=1]="InHeader",C[C.ReadingRows=2]="ReadingRows",C))(c||{});class E{constructor(D){this.chunk=(M,P)=>{for(let x=0;x<M.data.length;x++){const S=M.data[x];if(S.length<1)continue;const I=S[0];if(I){if(I.startsWith("#")){const T=I.indexOf("#",2);if(T>0){const O=I.slice(1,T),A=O==="name";if(A||{unit:"#"}.hasOwnProperty(O)){this.state===2&&(this.current=new o.v({fields:[]}),this.data.push(this.current));const b=I.slice(T+1);if(A){this.current.addFieldFor(void 0,b);for(let W=1;W<S.length;W++)this.current.addFieldFor(void 0,S[W])}else{const{fields:W}=this.current;for(let V=0;V<W.length;V++){W[V].config||(W[V].config={});const w=W[V].config;w[O]=V===0?b:S[V]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,g.LI)(I)===d.fS.string){for(const O of S)this.current.addFieldFor(void 0,O);this.state=1;continue}this.state=1}}if(this.state,this.state=2,S.length>this.current.fields.length){const{fields:T}=this.current;for(let O=T.length;O<S.length;O++)this.current.addFieldFor(S[O]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(S),this.callback&&this.callback.onRow(S)}},D||(D={}),this.config=D.config||{},this.callback=D.callback,this.current=new o.v({fields:[]}),this.state=0,this.data=[]}readCSV(D){this.current=new o.v({fields:[]}),this.data=[this.current];const M={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return r().parse(D,M),this.data}}function p(C,D){if(C==null)return"";const M=C.toString();return M.includes('"')?D.quoteChar+M.replace(/"/gi,'""')+D.quoteChar:M.includes(`
`)||D.delimiter&&M.includes(D.delimiter)?D.quoteChar+M+D.quoteChar:M}function h(C,D){return C.display?M=>{const P=C.display(M);return p((0,u.zc)(P),D)}:M=>p(M,D)}function y(C,D,M){const P=C==="name",x=C==="type";for(const S of D){const I=S.config;if(P||x||I&&I.hasOwnProperty(C)){let T="#"+C+"#";for(let O=0;O<D.length;O++){O>0&&(T=T+M.delimiter);let A=D[O].name;x?A=D[O].type:P||(A=D[O].config[C]),A&&(T=T+p(A,M))}return T+M.newline}}return""}function s(){const C=["x","y"];return C.toLocaleString?C.toLocaleString().charAt(1):","}function v(C,D){if(!C)return"";D=(0,n.defaults)(D,{delimiter:s(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let M=D.useExcelHeader?`sep=${D.delimiter}${D.newline}`:"";for(let P=0;P<C.length;P++){const x=C[P],{fields:S}=x;if(S.length===0)continue;if(D.headerStyle===0)M=M+y("name",S,D)+y("type",S,D)+y("unit",S,D)+y("dateFormat",S,D);else if(D.headerStyle===1){for(let T=0;T<S.length;T++)T>0&&(M+=D.delimiter),M+=`"${(0,m.CZ)(S[T],x).replace(/"/g,'""')}"`;M+=D.newline}const I=S[0].values.length;if(I>0){const T=S.map(O=>h(O,D));for(let O=0;O<I;O++){for(let A=0;A<S.length;A++){A>0&&(M=M+D.delimiter);const B=S[A].values[O];B!==null&&(M=M+T[A](B))}O!==I-1&&(M=M+D.newline)}}P!==C.length-1&&(M=M+D.newline)}return M}},24824:(J,R,e)=>{"use strict";e.d(R,{W:()=>l,_:()=>r});var n=e(57837),a=e(69307);const l={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function r(d){const{onClickFn:u,replaceVariables:i,link:f,scopedVars:c,range:E,field:p,internalLink:h}=d,y=g(f.internal?.query,c,i),s=g(f.internal?.panelsState,c,i),v=g(f.internal?.meta?.correlationData,c,i),C=f.title?f.title:h.datasourceName;return{title:i(C,c),href:o(h.datasourceUid,y,E,s),onClick:u?D=>{D.preventDefault&&D.preventDefault(),u({datasourceUid:h.datasourceUid,queries:[y],panelsState:s,correlationHelperData:v,range:E})}:void 0,target:f?.targetBlank?"_blank":"_self",origin:p}}function o(d,u,i,f){return n.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,a.S)({...i?.raw?{range:(0,a.R_)(i.raw)}:{},datasource:d,queries:[u],panelsState:f}))}`)}function g(d,u,i){if(!d)return d;if(typeof d=="string")return i(d,u);const f=JSON.parse(JSON.stringify(d));return m(f,u,i)}function m(d,u,i){for(const f of Object.keys(d))typeof d[f]=="string"?d[f]=i(d[f],u):typeof d[f]=="object"&&d[f]!==null&&(d[f]=m(d[f],u,i));return d}},47635:(J,R,e)=>{"use strict";e.d(R,{BT:()=>o,HD:()=>c,Mf:()=>y,TX:()=>f,_R:()=>m,cv:()=>r,fd:()=>E,fi:()=>d,hz:()=>i,iU:()=>l,nx:()=>u,tp:()=>p,uw:()=>h,z_:()=>g});var n=e(86832),a=e.n(n);function l(s){return{uid:s.uid,type:s.type}}function r(s){return typeof s=="object"&&typeof s?.uid=="string"}function o(s){if(r(s))return s.uid;if((0,n.isString)(s))return s}const g=(s,v)=>C=>{E(s,v,C.currentTarget.value)},m=(s,v)=>C=>{p(s,v,C.currentTarget.value)},d=(s,v)=>C=>{h(s,v,C.currentTarget.value)},u=(s,v)=>C=>{p(s,v,C.value)},i=(s,v)=>C=>{p(s,v,C.currentTarget.checked)},f=(s,v)=>C=>{h(s,v,C.value)},c=(s,v)=>C=>{y(s,v)};function E(s,v,C){const D=s.options;s.onOptionsChange({...D,[v]:C})}const p=(s,v,C)=>{const D=s.options;s.onOptionsChange({...D,jsonData:{...D.jsonData,[v]:C}})},h=(s,v,C)=>{const D=s.options;s.onOptionsChange({...D,secureJsonData:{...D.secureJsonData?D.secureJsonData:{},[v]:C}})},y=(s,v)=>{const C=s.options;s.onOptionsChange({...C,secureJsonData:{...C.secureJsonData?C.secureJsonData:{},[v]:""},secureJsonFields:{...C.secureJsonFields,[v]:!1}})}},14255:(J,R,e)=>{"use strict";e.d(R,{d:()=>a});const n={},a=(l,r,o)=>{let g=`[Deprecation warning] ${l}: ${r} is deprecated`;o&&(g+=`. Use ${o} instead`);const m=Date.now(),d=n[g];(!d||m-d>1e4)&&(console.warn(g),n[g]=m)}},74129:(J,R,e)=>{"use strict";e.d(R,{x:()=>n});var n=(a=>(a[a.Transformations=0]="Transformations",a[a.FieldConfig=1]="FieldConfig",a[a.FieldConfigOverrides=2]="FieldConfigOverrides",a))(n||{})},69240:(J,R,e)=>{"use strict";e.d(R,{H:()=>l,k:()=>a});var n=e(10694);function a({xField:r,yField:o,nullValueMode:g}){const m=r.values,d=o.values,u=m.length;if(d.length!==u)throw new Error("Unexpected field length");const i=g===n.Gl.Ignore,f=g===n.Gl.AsZero,c=[];for(let E=0;E<u;E++){const p=m[E];let h=d[E];if(h===null){if(i)continue;f&&(h=0)}p!==null&&c.push([p,h])}return c}function l(r,o){if(!o.from||!o.to||!r||r.length===0)return[];const g=o.from.valueOf(),m=o.to.valueOf(),d=r[0][1];return[[g,d],[m,d]]}},41010:(J,R,e)=>{"use strict";e.d(R,{LH:()=>c.L,x5:()=>o.x5,QM:()=>o.QM,WC:()=>D.W,xV:()=>M.x,vo:()=>y.vo,HU:()=>I.HU,zG:()=>p.z,rt:()=>y.rt,Bz:()=>a.B,T1:()=>E.T,IX:()=>x.I,sq:()=>n,nk:()=>c.n,ZC:()=>u,bf:()=>T.b,Jb:()=>I.Jb,d9:()=>r.d,FT:()=>g.FT,IU:()=>g.IU,aA:()=>g.aA,iU:()=>l.iU,BT:()=>l.BT,k8:()=>s.k,HE:()=>s.H,_6:()=>T._,e4:()=>i,dP:()=>m.d,fp:()=>f,cv:()=>l.cv,Qr:()=>d.Q,uT:()=>v.u,s2:()=>P.s,_N:()=>D._,VS:()=>g.VS,Hh:()=>d.H,_R:()=>l._R,hz:()=>l.hz,nx:()=>l.nx,z_:()=>l.z_,HD:()=>l.HD,fi:()=>l.fi,TX:()=>l.TX,J8:()=>g.J8,uP:()=>o.uP,Wn:()=>O.W,O9:()=>m.O,S:()=>C.S,MJ:()=>o.MJ,Er:()=>h.E,R_:()=>C.R_,mL:()=>E.m,tp:()=>l.tp,fd:()=>l.fd,Mf:()=>l.Mf,uw:()=>l.uw,Cj:()=>C.Cj,xc:()=>S.x});var n=e(24571),a=e(77663),l=e(47635),r=e(14255),o=e(29710),g=e(36822),m=e(99331),d=e(69084);const u=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],i=A=>{let B,b,W=Number.MAX_VALUE;for(let V=0;V<A.values.length;V++){const w=A.values[V];if(B!==void 0){const K=w-B;b===void 0&&(W=K),K<W&&(W=K)}B=w}return W},f=A=>{for(let B=0;B<A.values.length;B++){const b=A.values[B];if(b!=null){const W=b.toString();if(W.length===13&&W%1e3!==0)return!0}}return!1};var c=e(35648),E=e(22637),p=e(2221),h=e(99456),y=e(98458),s=e(69240),v=e(57837),C=e(69307),D=e(24824),M=e(74129),P=e(20510),x=e(97253),S=e(89079),I=e(38450),T=e(40729),O=e(72964)},36822:(J,R,e)=>{"use strict";e.d(R,{FT:()=>l,IU:()=>r,J8:()=>a,VS:()=>o,aA:()=>g});const n=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function a(m){const d={};return m.replace(n,(u,i,f,c)=>(d[i]=c,"")),d}function l(m){return m.reduce((d,u)=>{if(!u)throw new Error("Need parsed labels to find common labels.");return Object.keys(u).forEach(i=>{(d[i]===void 0||d[i]!==u[i])&&delete d[i]}),Object.keys(d).forEach(i=>{u[i]===void 0&&delete d[i]}),d},{...m[0]})}function r(m,d){const u={...m};return Object.keys(d).forEach(i=>{delete u[i]}),u}function o(m,d){if(!m)return!0;for(const[u,i]of Object.entries(m))if(!d||d[u]!==i)return!1;return!0}function g(m,d="",u){if(!m||Object.keys(m).length===0)return d;const f=Object.keys(m).sort().map(c=>`${c}="${m[c]}"`).join(", ");return u?f:["{",f,"}"].join("")}},57837:(J,R,e)=>{"use strict";e.d(R,{u:()=>f});var n=e(28425),a=e(69307);let l={appSubUrl:""},r,o;const g=c=>{try{return new URL(c)}catch{return}},m=c=>{const E=g(c);if(E&&E.origin!==window.location.origin)return c;const p=l.appSubUrl??"",h=p.endsWith("/")?1:0,y=c.startsWith("http");let s=p;return(!c.startsWith("/")||y)&&(s=`${window.location.origin}${p}`),c.length>0&&(c.indexOf(s+"/")===0||c===s)?c.slice(s.length-h):c},d=c=>c.startsWith("/")?`${l.appSubUrl}${m(c)}`:c,f={initialize:c=>{l=c.config,r=c.getTimeRangeForUrl,o=c.getVariablesUrlParams},stripBaseFromUrl:m,assureBaseUrl:d,updateSearchParams:(c,E)=>{const p=new URLSearchParams(E);try{const h=new URL(c);return p.forEach((y,s)=>h.searchParams.set(s,y)),h.href}catch{const h=new URLSearchParams(c);return p.forEach((y,s)=>{h.set(s,y)}),"?"+h.toString()}},getTimeRangeUrlParams:()=>r?a.Cj.toUrlParams(r()):null,getVariablesUrlParams:c=>{if(!o)return null;const E=o(c);return a.Cj.toUrlParams(E)},getUrlForPartial:(c,E)=>{const p=a.Cj.parseKeyValue(c.search.startsWith("?")?c.search.substring(1):c.search);for(const h of Object.keys(E))E[h]===null||E[h]===void 0?delete p[h]:p[h]=E[h];return d(a.Cj.renderUrl(c.pathname,p))},processUrl:c=>l.disableSanitizeHtml?c:n.QX.sanitizeUrl(c)}},20510:(J,R,e)=>{"use strict";e.d(R,{s:()=>n});function n(a){return new Proxy(a,{apply(l,r,o){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(l,o,r.constructor)}})}},2221:(J,R,e)=>{"use strict";e.d(R,{z:()=>n});var n=(a=>(a.id="id",a.title="title",a.subTitle="subtitle",a.mainStat="mainstat",a.secondaryStat="secondarystat",a.arc="arc__",a.icon="icon",a.color="color",a.source="source",a.target="target",a.detail="detail__",a.nodeRadius="noderadius",a))(n||{})},99331:(J,R,e)=>{"use strict";e.d(R,{O:()=>n,d:()=>a});function n(l,r=0){if(Number.isInteger(l))return l;let o=10**r,g=l*o*(1+Number.EPSILON);return Math.round(g)/o}function a(l){return((""+l).split(".")[1]||"").length}},69084:(J,R,e)=>{"use strict";e.d(R,{H:()=>n,Q:()=>a});const n=l=>Object.keys(l).reduce((r,o)=>(l[o]!==void 0&&(r[o]=l[o]),r),{}),a=l=>typeof l=="object"&&l!==null&&Object.keys(l).length===0},99456:(J,R,e)=>{"use strict";e.d(R,{E:()=>n});const n=a=>({label:a,value:a})},22637:(J,R,e)=>{"use strict";e.d(R,{T:()=>a,m:()=>l});var n=e(77663),a=(r=>(r.Abs="abs",r.Exp="exp",r.Ln="ln",r.Floor="floor",r.Ceil="ceil",r))(a||{});const l=new n.B(()=>[{id:"abs",name:"Absolute value",operation:r=>Math.abs(r),unaryOperationID:"abs"},{id:"exp",name:"Natural exponent",operation:r=>Math.exp(r),unaryOperationID:"exp"},{id:"ln",name:"Natural logarithm",operation:r=>Math.log(r),unaryOperationID:"ln"},{id:"floor",name:"Floor",operation:r=>Math.floor(r),unaryOperationID:"floor"},{id:"ceil",name:"Ceiling",operation:r=>Math.ceil(r),unaryOperationID:"ceil"}])},69307:(J,R,e)=>{"use strict";e.d(R,{Cj:()=>u,R_:()=>f,S:()=>i});var n=e(92403);/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function a(c,E){return E&&Object.keys(E).length>0&&(c+="?"+r(E)),c}function l(c,E){return encodeURIComponent(c).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,E?"%20":"+").replace(/[!'()*]/g,function(p){return"%"+p.charCodeAt(0).toString(16).toUpperCase()})}function r(c){const E=[],p=/\[\]$/,h=v=>Object.prototype.toString.call(v)==="[object Array]",y=(v,C)=>{if(C=typeof C=="function"?C():C===null||C===void 0?"":C,typeof C!="boolean")E[E.length]=l(v,!0)+"="+l(C,!0);else{const D=C?"":"="+l("false",!0);E[E.length]=l(v,!0)+D}},s=(v,C)=>{let D,M,P;if(v)if(h(C))for(D=0,M=C.length;D<M;D++)p.test(v)?y(v,C[D]):s(v,C[D]);else if(C&&String(C)==="[object Object]")for(P in C)s(v+"["+P+"]",C[P]);else y(v,C);else if(h(C))for(D=0,M=C.length;D<M;D++)y(C[D].name,C[D].value);else for(P in C)s(P,C[P]);return E};return s("",c).join("&")}function o(c,E){if(E!=null&&E!==""){const p=c.indexOf("?");p!==-1?c.length-p>1&&(c+="&"):c+="?",c+=E}return c}function g(){const E=window.location.search.substring(1).split("&"),p={};for(const h of E){const y=h.split("=");if(y.length>1){const s=decodeURIComponent(y[0]),v=decodeURIComponent(y[1]);s in p?p[s]=[...p[s],v]:p[s]=[v]}else if(y.length===1){const s=decodeURIComponent(y[0]);p[s]=!0}}return p}function m(c){const E={},p=(c||"").split("&");for(let h of p){let y,s,v;if(h&&(s=h=h.replace(/\+/g,"%20"),y=h.indexOf("="),y!==-1&&(s=h.substring(0,y),v=h.substring(y+1)),s=d(s),s!==void 0)){v=v!==void 0?d(v):!0;let C;typeof v=="string"&&v!==""?C=v==="true"||v==="false"?v==="true":v:C=v,E.hasOwnProperty(s)?Array.isArray(E[s])?E[s].push(v):E[s]=[E[s],isNaN(C)?v:C]:E[s]=isNaN(C)?v:C}}return E}function d(c){try{return decodeURIComponent(c)}catch{return}}const u={renderUrl:a,toUrlParams:r,appendQueryToUrl:o,getUrlSearchParams:g,parseKeyValue:m};function i(c,E){return E!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(c)}const f=c=>{let E=c.from;(0,n.v9)(E)&&(E=E.valueOf().toString());let p=c.to;return(0,n.v9)(p)&&(p=p.valueOf().toString()),{from:E,to:p}}},38450:(J,R,e)=>{"use strict";e.d(R,{HU:()=>g,Jb:()=>m,vh:()=>r});var n=e(49231),a=e(55705),l=e(23955);function r(u,i){for(const f of u)switch(f.type){case l.H.ValueToText:if(i==null)continue;const c=f.options[i];if(c)return c;break;case l.H.RangeToText:if(i==null)continue;const E=parseFloat(i);if(isNaN(E)||!isNaN(f.options.from)&&E<f.options.from||!isNaN(f.options.to)&&E>f.options.to)continue;return f.options.result;case l.H.RegexToText:if(i==null||typeof i!="string")continue;const y=(0,a.jO)(f.options.pattern);if(i.match(y)){const s={...f.options.result};return s.text!=null&&(s.text=i.replace(y,f.options.result.text||"")),s}case l.H.SpecialValue:switch(f.options.match){case l.e.Null:{if(i==null)return f.options.result;break}case l.e.NaN:{if(typeof i=="number"&&isNaN(i))return f.options.result;break}case l.e.NullAndNaN:{if(typeof i=="number"&&isNaN(i)||i==null)return f.options.result;break}case l.e.True:{if(i===!0||i==="true")return f.options.result;break}case l.e.False:{if(i===!1||i==="false")return f.options.result;break}case l.e.Empty:{if(i==="")return f.options.result;break}}}return null}function o(u){return(typeof u=="number"||typeof u=="string"&&u.trim()!=="")&&!isNaN(u)}var g=(u=>(u[u.ValueToText=1]="ValueToText",u[u.RangeToText=2]="RangeToText",u))(g||{});function m(u,i){const f=[];let c=u.mappingType;if(u.mappingType||(u.valueMaps&&u.valueMaps.length?c=1:u.rangeMaps&&u.rangeMaps.length&&(c=2)),c===1)for(let E=0;E<u.valueMaps.length;E++){const p=u.valueMaps[E];f.push(d({...p,id:E,type:l.H.ValueToText},u.fieldConfig?.defaults?.thresholds||i))}else if(c===2)for(let E=0;E<u.rangeMaps.length;E++){const p=u.rangeMaps[E];f.push(d({...p,id:E,type:l.H.RangeToText},u.fieldConfig?.defaults?.thresholds||i))}return f}function d(u,i){const f={type:l.H.ValueToText,options:{}},c=[];let E;const p=parseFloat(u.text);if(i&&!isNaN(p)){const h=(0,n.m1)(p,i.steps);h&&h.color&&(E=h.color)}switch(u.type){case 1:case l.H.ValueToText:u.value!=null&&(u.value==="null"?c.push({type:l.H.SpecialValue,options:{match:l.e.Null,result:{text:u.text,color:E}}}):f.options[String(u.value)]={text:u.text,color:E});break;case 2:case l.H.RangeToText:u.from==="null"||u.to==="null"?c.push({type:l.H.SpecialValue,options:{match:l.e.Null,result:{text:u.text,color:E}}}):c.push({type:l.H.RangeToText,options:{from:+u.from,to:+u.to,result:{text:u.text,color:E}}});break}return Object.keys(f.options).length>0&&c.unshift(f),c[0]}},40729:(J,R,e)=>{"use strict";e.d(R,{_:()=>l,b:()=>a});const n="__searchFilter",a=r=>r&&typeof r=="string"?r.indexOf(n)!==-1:!1,l=r=>{const{query:o,wildcardChar:g}=r;if(!a(o))return{};let{options:m}=r;return m=m||{searchFilter:""},{__searchFilter:{value:m.searchFilter?`${m.searchFilter}${g}`:`${g}`,text:""}}}},89079:(J,R,e)=>{"use strict";e.d(R,{x:()=>o});var n=e(3195),a=e(46514),l=e(66453),r=e(79947);function o({whileLoading:g,source:m}){return(0,n.T)((0,a.H)(200).pipe((0,l.h)(g),(0,r.R)(m)),m)}},75172:(J,R,e)=>{"use strict";e.d(R,{Cf:()=>n.Cf,FH:()=>n.FH,IR:()=>n.IR,QW:()=>n.QW,Qj:()=>n.Qj,SP:()=>n.SP,SR:()=>n.SR,Td:()=>n.Td,bn:()=>n.bn,br:()=>n.br,q2:()=>n.q2,vb:()=>n.vb,zc:()=>n.zc});var n=e(83502)},6787:(J,R,e)=>{"use strict";e.d(R,{Aq:()=>a,Yh:()=>m,dT:()=>o,i7:()=>d});var n=e(83502);function a(u,i){const f=["","K","M","B","T"],c=(0,n.Qj)(1e3,f);return(E,p,h)=>{if(E==null)return{text:""};const y=E<0;y&&(E=Math.abs(E));const s=c(E,p,h);return i?s.suffix=s.suffix!==void 0?`${s.suffix}${u}`:void 0:s.prefix=u,y&&(s.prefix=`-${s.prefix?.length?s.prefix:""}`),s}}const l=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],r=l.indexOf("");function o(u){const i=l.findIndex(f=>f.normalize("NFKD")===u.normalize("NFKD"));return i<0?0:i-r}const g=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function m(u,i=0){const f=g.map(c=>" "+c+u);return(0,n.Qj)(1024,f,i)}function d(u,i=0){const f=l.map(c=>" "+c+u);return(0,n.Qj)(1e3,f,r+i)}},83502:(J,R,e)=>{"use strict";e.d(R,{IR:()=>fe,zc:()=>_,Cf:()=>Oe,QW:()=>at,Td:()=>Ue,br:()=>te,SP:()=>he,Qj:()=>ge,SR:()=>me,vb:()=>ye,FH:()=>ce,bn:()=>De,q2:()=>oe});var n=e(86832);function a(Ne,_e){return Ne===null?{text:""}:{text:ce(Ne,_e),suffix:"%"}}function l(Ne,_e){return Ne===null?{text:""}:{text:ce(100*Ne,_e),suffix:"%"}}function r(Ne,_e){if(Ne==null)return{text:""};const Ke=o(Ne,_e);return Ke.text.substring(0,1)==="-"?Ke.text="-0x"+Ke.text.substring(1):Ke.text="0x"+Ke.text,Ke}function o(Ne,_e){return Ne==null?{text:""}:{text:parseFloat(ce(Ne,_e)).toString(16).toUpperCase()}}function g(Ne,_e){return Ne==null?{text:""}:{text:Ne.toExponential(_e??void 0)}}var m=e(48069),d=e(47330),u=e(92403),i=(Ne=>(Ne.Year="year",Ne.Month="month",Ne.Week="week",Ne.Day="day",Ne.Hour="hour",Ne.Minute="minute",Ne.Second="second",Ne.Millisecond="millisecond",Ne))(i||{});const f=["year","month","week","day","hour","minute","second","millisecond"],c={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function E(Ne,_e){return Ne===null?{text:""}:Math.abs(Ne)<1e3?{text:ce(Ne,_e),suffix:" ns"}:Math.abs(Ne)<1e6?De(Ne/1e3,_e," \xB5s"):Math.abs(Ne)<1e9?De(Ne/1e6,_e," ms"):Math.abs(Ne)<6e10?De(Ne/1e9,_e," s"):Math.abs(Ne)<36e11?De(Ne/6e10,_e," min"):Math.abs(Ne)<864e11?De(Ne/36e11,_e," hour"):De(Ne/864e11,_e," day")}function p(Ne,_e){return Ne===null?{text:""}:Math.abs(Ne)<1e3?{text:ce(Ne,_e),suffix:" \xB5s"}:Math.abs(Ne)<1e6?De(Ne/1e3,_e," ms"):De(Ne/1e6,_e," s")}function h(Ne,_e,Ke){return Ne===null?{text:""}:Math.abs(Ne)<1e3?{text:ce(Ne,_e),suffix:" ms"}:Math.abs(Ne)<6e4?De(Ne/1e3,_e," s"):Math.abs(Ne)<36e5?De(Ne/6e4,_e," min"):Math.abs(Ne)<864e5?De(Ne/36e5,_e," hour"):Math.abs(Ne)<31536e6?De(Ne/864e5,_e," day"):De(Ne/31536e6,_e," year")}function y(Ne,_e){if(Ne!=null&&_e!==null&&_e!==void 0)return Ne-_e}function s(Ne,_e){return Ne===null?{text:""}:Ne===0?{text:"0",suffix:" s"}:Math.abs(Ne)<1e-6?De(Ne*1e9,_e," ns"):Math.abs(Ne)<.001?De(Ne*1e6,_e," \xB5s"):Math.abs(Ne)<1?De(Ne*1e3,_e," ms"):Math.abs(Ne)<60?{text:ce(Ne,_e),suffix:" s"}:Math.abs(Ne)<3600?De(Ne/60,_e," min"):Math.abs(Ne)<86400?De(Ne/3600,_e," hour"):Math.abs(Ne)<604800?De(Ne/86400,_e," day"):Math.abs(Ne)<31536e3?De(Ne/604800,_e," week"):De(Ne/31556900,_e," year")}function v(Ne,_e){return Ne===null?{text:""}:Math.abs(Ne)<60?{text:ce(Ne,_e),suffix:" min"}:Math.abs(Ne)<1440?De(Ne/60,_e," hour"):Math.abs(Ne)<10080?De(Ne/1440,_e," day"):Math.abs(Ne)<604800?De(Ne/10080,_e," week"):De(Ne/525948,_e," year")}function C(Ne,_e){return Ne===null?{text:""}:Math.abs(Ne)<24?{text:ce(Ne,_e),suffix:" hour"}:Math.abs(Ne)<168?De(Ne/24,_e," day"):Math.abs(Ne)<8760?De(Ne/168,_e," week"):De(Ne/8760,_e," year")}function D(Ne,_e){return Ne===null?{text:""}:Math.abs(Ne)<7?{text:ce(Ne,_e),suffix:" day"}:Math.abs(Ne)<365?De(Ne/7,_e," week"):De(Ne/365,_e," year")}function M(Ne,_e,Ke){if(Ne===null)return{text:""};if(Ne===0)return{text:"0",suffix:" "+Ke+"s"};if(Ne<0){const Qe=M(-Ne,_e,Ke);return Qe.suffix||(Qe.suffix=""),Qe.suffix+=" ago",Qe}Ne*=c[Ke]*1e3;const et=[];let ze=!1,je=0;_e!=null&&(je=_e);for(let Qe=0;Qe<f.length&&je>=0;Qe++){const We=c[f[Qe]]*1e3,ke=Ne/We;if(ke>=1||ze){ze=!0;const ot=Math.floor(ke),lt=f[Qe]+(ot!==1?"s":"");et.push(ot+" "+lt),Ne=Ne%We,je--}}return{text:et.join(", ")}}function P(Ne,_e){if(Ne===null)return{text:""};if(Ne<1e3)return{text:(0,u.zh)(Ne).format("SSS\\m\\s")};if(Ne<6e4){let je="ss\\s:SSS\\m\\s";return _e===0&&(je="ss\\s"),{text:(0,u.zh)(Ne).format(je)}}if(Ne<36e5){let je="mm\\m:ss\\s:SSS\\m\\s";return _e===0?je="mm\\m":_e===1&&(je="mm\\m:ss\\s"),{text:(0,u.zh)(Ne).format(je)}}let Ke="mm\\m:ss\\s:SSS\\m\\s";const et=`${("0"+Math.floor((0,u.Ks)(Ne,"milliseconds").asHours())).slice(-2)}h`;return _e===0?Ke="":_e===1?Ke="mm\\m":_e===2&&(Ke="mm\\m:ss\\s"),{text:Ke?`${et}:${(0,u.zh)(Ne).format(Ke)}`:et}}function x(Ne,_e){return M(Ne,_e,"millisecond")}function S(Ne,_e){return M(Ne,_e,"second")}function I(Ne){if(Ne<0){const je=I(-Ne);return je.suffix||(je.suffix=""),je.suffix+=" ago",je}const _e=[],Ke=Math.floor(Ne/3600),et=Math.floor(Ne%3600/60),ze=Math.floor(Ne%3600%60);return Ke>9?_e.push(""+Ke):_e.push("0"+Ke),et>9?_e.push(""+et):_e.push("0"+et),ze>9?_e.push(""+ze):_e.push("0"+ze),{text:_e.join(":")}}function T(Ne){if(Ne<0){const ze=T(-Ne);return ze.suffix||(ze.suffix=""),ze.suffix+=" ago",ze}let _e="";const Ke=Math.floor(Ne/(24*3600));Ke>0&&(_e=Ke+" d ");const et=I(Ne-Ke*24*3600);return{text:_e+et.text}}function O(Ne,_e){return s(Ne/100,_e)}function A(Ne,_e){return P(Ne,_e)}function B(Ne,_e){return P(Ne*1e3,_e)}function b(Ne,_e){return(Ke,et,ze,je)=>_e&&(0,u.CQ)().isSame(Ke,"day")?{text:(0,m.dq)(Ke,{format:_e,timeZone:je})}:{text:(0,m.dq)(Ke,{format:Ne,timeZone:je})}}const W=b("YYYY-MM-DD HH:mm:ss"),V=b("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),w=b("MM/DD/YYYY h:mm:ss a"),K=b("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function z(){return b((0,d.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function G(){return b((0,d.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,d.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function Q(Ne,_e,Ke,et,ze){return{text:(0,m.dq)(Ne,{format:ze?d.U6.fullDateMS:d.U6.fullDate,timeZone:et})}}function j(Ne,_e,Ke,et){return{text:(0,m.E8)(Ne,{timeZone:et})}}var F=e(6787);const k=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:oe("")},{name:"String",id:"string",fn:ye},{name:"short",id:"short",fn:ge(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:a},{name:"Percent (0.0-1.0)",id:"percentunit",fn:l},{name:"Humidity (%H)",id:"humidity",fn:oe("%H")},{name:"Decibel",id:"dB",fn:oe("dB")},{name:"Candela (cd)",id:"candela",fn:(0,F.i7)("cd")},{name:"Hexadecimal (0x)",id:"hex0x",fn:r},{name:"Hexadecimal",id:"hex",fn:o},{name:"Scientific notation",id:"sci",fn:g},{name:"Locale format",id:"locale",fn:he},{name:"Pixels",id:"pixel",fn:oe("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:oe("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:oe("f/sec\xB2")},{name:"G unit",id:"accG",fn:oe("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:oe("\xB0")},{name:"Radians",id:"radian",fn:oe("rad")},{name:"Gradian",id:"grad",fn:oe("grad")},{name:"Arc Minutes",id:"arcmin",fn:oe("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:oe("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:oe("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:oe("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:oe("mi\xB2")},{name:"Acres (ac)",id:"acres",fn:oe("ac")},{name:"Hectares (ha)",id:"hectares",fn:oe("ha")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,F.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,F.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,F.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,F.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,F.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,F.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,F.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,F.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:oe("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:oe("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:oe("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:oe("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:oe("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:oe("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:oe("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:oe("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:oe("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:oe("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:oe("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:oe("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,F.Aq)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,F.Aq)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,F.Aq)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,F.Aq)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,F.Aq)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,F.Aq)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,F.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,F.Aq)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,F.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,F.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,F.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,F.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,F.Aq)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,F.Aq)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,F.Aq)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,F.Aq)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,F.Aq)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,F.Aq)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,F.Aq)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,F.Aq)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,F.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,F.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,F.Aq)("\u0111",!0)},{name:"Turkish Lira (\u20BA)",id:"currencyTRY",fn:(0,F.Aq)("\u20BA",!0)},{name:"Malaysian Ringgit (RM)",id:"currencyMYR",fn:(0,F.Aq)("RM")},{name:"CFP franc (XPF)",id:"currencyXPF",fn:(0,F.Aq)("XPF")}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,F.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,F.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,F.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,F.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,F.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,F.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,F.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,F.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,F.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,F.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,F.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,F.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,F.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,F.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,F.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,F.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,F.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,F.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,F.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,F.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,F.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,F.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,F.i7)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,F.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,F.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,F.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,F.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,F.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,F.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,F.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,F.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,F.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,F.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,F.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,F.i7)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,F.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,F.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,F.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,F.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:W},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:V},{name:"Datetime US",id:"dateTimeAsUS",fn:w},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:K},{name:"Datetime local",id:"dateTimeAsLocal",fn:z()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:G()},{name:"Datetime default",id:"dateTimeAsSystem",fn:Q},{name:"From Now",id:"dateTimeFromNow",fn:j}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,F.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,F.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,F.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,F.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,F.i7)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:oe("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,F.i7)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,F.i7)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,F.i7)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,F.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,F.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,F.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,F.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,F.i7)("W-Min",1)},{name:"Megawatt-hour (MWh)",id:"mwatth",fn:(0,F.i7)("Wh",2)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,F.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,F.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,F.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,F.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,F.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,F.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,F.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,F.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,F.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,F.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,F.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,F.i7)("dBm")},{name:"Milliohm (m\u03A9)",id:"mohm",fn:(0,F.i7)("\u03A9",-1)},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,F.i7)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,F.i7)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,F.i7)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,F.i7)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,F.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,F.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,F.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,F.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,F.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,F.i7)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,F.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,F.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:oe("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:oe("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:oe("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:oe("cfm")},{name:"Litre/hour",id:"litreh",fn:oe("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:oe("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:oe("mL/min")},{name:"Lux (lx)",id:"lux",fn:oe("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,F.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,F.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,F.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,F.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,F.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,F.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,F.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,F.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,F.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,F.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,F.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,F.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,F.i7)("g")},{name:"pound (lb)",id:"masslb",fn:oe("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,F.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:oe("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,F.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:oe("in")},{name:"feet (ft)",id:"lengthft",fn:oe("ft")},{name:"meter (m)",id:"lengthm",fn:(0,F.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,F.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:oe("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,F.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,F.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,F.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,F.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:oe("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:oe("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:oe('"Hg')},{name:"PSI",id:"pressurepsi",fn:ge(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,F.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,F.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,F.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,F.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,F.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,F.i7)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,F.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,F.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,F.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,F.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,F.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,F.i7)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,F.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:oe("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,F.i7)("Hz")},{name:"Kilohertz (kHz)",id:"rotkhz",fn:(0,F.i7)("Hz",1)},{name:"Megahertz (MHz)",id:"rotmhz",fn:(0,F.i7)("Hz",2)},{name:"Gigahertz (GHz)",id:"rotghz",fn:(0,F.i7)("Hz",3)},{name:"Radians per second (rad/s)",id:"rotrads",fn:oe("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:oe("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:oe("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:oe("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:oe("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,F.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:E},{name:"microseconds (\xB5s)",id:"\xB5s",fn:p},{name:"milliseconds (ms)",id:"ms",fn:h},{name:"seconds (s)",id:"s",fn:s},{name:"minutes (m)",id:"m",fn:v},{name:"hours (h)",id:"h",fn:C},{name:"days (d)",id:"d",fn:D},{name:"duration (ms)",id:"dtdurationms",fn:x},{name:"duration (s)",id:"dtdurations",fn:S},{name:"duration (hh:mm:ss)",id:"dthms",fn:I},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:T},{name:"Timeticks (s/100)",id:"timeticks",fn:O},{name:"clock (ms)",id:"clockms",fn:A},{name:"clock (s)",id:"clocks",fn:B}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:me("c/s")},{name:"ops/sec (ops)",id:"ops",fn:me("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:me("req/s")},{name:"reads/sec (rps)",id:"rps",fn:me("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:me("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:me("io/s")},{name:"events/sec (eps)",id:"eps",fn:me("evt/s")},{name:"messages/sec (mps)",id:"mps",fn:me("msg/s")},{name:"records/sec (rps)",id:"recps",fn:me("rec/s")},{name:"rows/sec (rps)",id:"rowsps",fn:me("rows/s")},{name:"counts/min (cpm)",id:"cpm",fn:me("c/m")},{name:"ops/min (opm)",id:"opm",fn:me("ops/m")},{name:"requests/min (rpm)",id:"reqpm",fn:me("req/m")},{name:"reads/min (rpm)",id:"rpm",fn:me("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:me("wr/m")},{name:"events/min (epm)",id:"epm",fn:me("evts/m")},{name:"messages/min (mpm)",id:"mpm",fn:me("msgs/m")},{name:"records/min (rpm)",id:"recpm",fn:me("rec/m")},{name:"rows/min (rpm)",id:"rowspm",fn:me("rows/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:oe("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:oe("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:oe("mph")},{name:"knot (kn)",id:"velocityknot",fn:oe("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,F.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,F.i7)("L")},{name:"cubic meter",id:"m3",fn:oe("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:oe("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:oe("dm\xB3")},{name:"gallons",id:"gallons",fn:oe("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:fe("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:fe("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:fe("On","Off")}]}];function _(Ne){return`${Ne.prefix??""}${Ne.text}${Ne.suffix??""}`}let Y=[];const Z={};let ae=!1;function ce(Ne,_e){if(Ne===null)return"";if(Ne===Number.NEGATIVE_INFINITY||Ne===Number.POSITIVE_INFINITY)return Ne.toLocaleString();if(_e==null&&(_e=q(Ne)),Ne===0)return Ne.toFixed(_e);const Ke=_e?Math.pow(10,Math.max(0,_e)):1,et=String(Math.round(Ne*Ke)/Ke);if(et.indexOf("e")!==-1||Ne===0)return et;const ze=et.indexOf("."),je=ze===-1?0:et.length-ze-1;return je<_e?(je?et:et+".")+String(Ke).slice(1,_e-je+1):et}function q(Ne){const _e=Math.abs(Ne);let et=-Math.floor(Math.log(_e)/Math.LN10)+1;const ze=Math.pow(10,-et);return _e/ze>2.25&&++et,Ne%1===0&&(et=0),Math.max(0,et)}function De(Ne,_e,Ke){return{text:ce(Ne,_e),suffix:Ke}}function oe(Ne,_e){return(Ke,et)=>{if(Ke===null)return{text:""};const ze=ce(Ke,et);return Ne?_e?{text:ze,prefix:Ne}:{text:ze,suffix:" "+Ne}:{text:ze}}}function te(Ne){return Ne&&Ne.startsWith("bool")}function fe(Ne,_e){return Ke=>({text:Ke?Ne:_e})}const Te=(Ne,_e)=>Math.log10(_e)/Math.log10(Ne);function ge(Ne,_e,Ke=0){return(et,ze)=>{if(et==null)return{text:""};if(et===Number.NEGATIVE_INFINITY||et===Number.POSITIVE_INFINITY||isNaN(et))return{text:et.toLocaleString()};const je=et===0?0:Math.floor(Te(Ne,Math.abs(et))),Qe=_e[(0,n.clamp)(Ke+je,0,_e.length-1)];return{text:ce(et/Ne**(0,n.clamp)(je,-Ke,_e.length-Ke-1),ze),suffix:Qe}}}function he(Ne,_e){return Ne==null?{text:""}:{text:Ne.toLocaleString(void 0,{maximumFractionDigits:_e??void 0})}}function me(Ne){const Ke=ge(1e3,["","K","M","B","T"]);return(et,ze,je)=>{if(et===null)return{text:""};const Qe=Ke(et,ze,je);return Qe.suffix+=" "+Ne,Qe}}function ye(Ne){return{text:`${Ne}`}}function ue(){Y=k();for(const Ne of Y)for(const _e of Ne.formats)Z[_e.id]=_e.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(Ne=>{const _e=Z[Ne.to];_e&&(Z[Ne.from]=_e)}),ae=!0}function Oe(Ne){if(!Ne)return oe("");ae||ue();const _e=Z[Ne];if(!_e&&Ne){let Ke=Ne.indexOf(":");if(Ke>0){const et=Ne.substring(0,Ke),ze=Ne.substring(Ke+1);if(et==="prefix")return oe(ze,!0);if(et==="suffix")return oe(ze,!1);if(et==="time")return b(ze);if(et==="si"){const je=(0,F.dT)(ze.charAt(0)),Qe=je===0?ze:ze.substring(1);return(0,F.i7)(Qe,je)}if(et==="count")return me(ze);if(et==="currency")return(0,F.Aq)(ze);if(et==="bool"){if(Ke=ze.indexOf("/"),Ke>=0){const je=ze.substring(0,Ke),Qe=ze.substring(Ke+1);return fe(je,Qe)}return fe(ze,"-")}}return oe(Ne)}return _e}function Ue(){return ae||ue(),Z}function at(){return ae||ue(),Y.map(Ne=>({text:Ne.name,submenu:Ne.formats.map(_e=>({text:_e.name,value:_e.id}))}))}},86756:(J,R,e)=>{"use strict";e.d(R,{G:()=>l});const n="ArrayVector is deprecated and will be removed in Grafana 11. Please use plain arrays for field.values.";let a=!1;class l extends Array{get buffer(){return this}set buffer(o){this.length=0;const g=o?.length;if(g){let m=65e3,d=Math.ceil(g/m);for(let u=0;u<d;u++)this.push.apply(this,o.slice(u*m,(u+1)*m))}}constructor(o){super(),this.buffer=o??[],a||(console.warn(n),a=!0)}toJSON(){return[...this]}}},68016:(J,R,e)=>{"use strict";e.d(R,{d:()=>l});var n=e(11574),a=e(98975);class l extends a.G{constructor(o){return super(),this.buffer=o.buffer||[],this.capacity=this.buffer.length,this.tail=o.append!=="head",this.index=0,this.add=this.getAddFunction(),o.capacity&&this.setCapacity(o.capacity),(0,n.U)(this)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?o=>{this.buffer.push(o),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:o=>{this.buffer.unshift(o),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?o=>{this.buffer[this.index]=o,this.index=(this.index+1)%this.buffer.length}:o=>{let g=this.index-1;g<0&&(g=this.buffer.length-1),this.buffer[g]=o,this.index=g}}setCapacity(o){if(this.capacity===o)return;const g=this.toArray();if(o>this.length)this.buffer=g;else if(o<this.capacity){const m=this.length-o;this.tail?this.buffer=g.slice(m,g.length):this.buffer=g.slice(0,g.length-m)}this.capacity=o,this.index=0,this.add=this.getAddFunction()}setAppendMode(o){const g=o!=="head";g!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=g,this.add=this.getAddFunction())}reverse(){return this.buffer.reverse()}get(o){return this.buffer[(o+this.index)%this.buffer.length]}set(o,g){this.buffer[(o+this.index)%this.buffer.length]=g}get length(){return this.buffer.length}}},98975:(J,R,e)=>{"use strict";e.d(R,{G:()=>a,s:()=>r});var n=e(15679);class a{*iterator(){for(let g=0;g<this.length;g++)yield this.get(g)}set(g,m){throw"unsupported operation"}add(g){throw"unsupported operation"}push(...g){for(const m of g)this.add(m);return this.length}[Symbol.iterator](){return this.iterator()}forEach(g){return r(this).forEach(g)}map(g){return r(this).map(g)}filter(g){return r(this).filter(g)}at(g){return this.get(g)}toArray(){return(0,n.n)(this)}join(g){return this.toArray().join(g)}toJSON(){return this.toArray()}pop(){throw new Error("Method not implemented.")}concat(...g){throw new Error("Method not implemented.")}reverse(){throw new Error("Method not implemented.")}shift(){throw new Error("Method not implemented.")}sort(g){throw new Error("Method not implemented.")}splice(g,m,...d){throw new Error("Method not implemented.")}unshift(...g){throw new Error("Method not implemented.")}fill(g,m,d){throw new Error("Method not implemented.")}copyWithin(g,m,d){throw new Error("Method not implemented.")}[Symbol.unscopables](){throw new Error("Method not implemented.")}slice(g,m){return this.toArray().slice(g,m)}indexOf(g,m){return this.toArray().indexOf(g,m)}lastIndexOf(g,m){return this.toArray().lastIndexOf(g,m)}every(g,m){return this.toArray().every(g,m)}some(g,m){return this.toArray().some(g,m)}reduce(g,m){throw new Error("Method not implemented.")}reduceRight(g,m){throw new Error("Method not implemented.")}find(g,m){return this.toArray().find(g,m)}findIndex(g,m){return this.toArray().findIndex(g,m)}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.toArray().values()}includes(g,m){return this.toArray().includes(g,m)}flatMap(g,m){return this.toArray().flatMap(g,m)}flat(g){throw new Error("Method not implemented.")}}const l=[];function r(o){return{*[Symbol.iterator](){for(let g=0;g<o.length;g++)yield o.get(g)},forEach(g){for(let m=0;m<o.length;m++)g(o.get(m),m,l)},map(g){const m=[];for(let d=0;d<o.length;d++)m.push(g(o.get(d),d,l));return m},filter(g){const m=[];let d=0;for(const u of this)g(u,d++,l)&&m.push(u);return m}}}},88350:(J,R,e)=>{"use strict";e.d(R,{o:()=>r});var n=e(11574),a=e(98975),l=e(15679);class r extends a.G{constructor(g,m){return super(),this.source=g,this.order=m,(0,n.U)(this)}get length(){return this.source.length}get(g){return this.source.get(this.order[g])}toArray(){return(0,l.n)(this)}toJSON(){return(0,l.n)(this)}getOrderArray(){return this.order}}},67757:(J,R,e)=>{"use strict";e.d(R,{l$:()=>r,Gt:()=>o.G,sq:()=>p,rM:()=>d,dV:()=>g.d,uI:()=>m,$Y:()=>f,rm:()=>E,oH:()=>u.o,sD:()=>a.s});var n=e(11574),a=e(98975),l=e(15679);class r extends a.G{constructor(y=0){return super(),this.length=0,this.source=[],this.length=y,(0,n.U)(this)}setLength(y){if(y>this.length)this.length=y;else if(y<this.length){const s=[];for(const v of this.source)if(s.push(v),v.end>y){v.end=y;break}this.source=s,this.length=y}}append(y){const s={start:this.length,end:this.length+y.length,values:y};return this.length=s.end,this.source.push(s),s}get(y){for(let s=0;s<this.source.length;s++){const v=this.source[s];if(y>=v.start&&y<v.end)return v.values[y-v.start]}}toArray(){return(0,l.n)(this)}toJSON(){return(0,l.n)(this)}}var o=e(86756),g=e(68016);class m extends Array{constructor(y,s){return super(),new Array(s).fill(y)}}class d extends Array{constructor(y,s,v){super();const C=new Array(y.length);for(let D=0;D<C.length;D++)C[D]=v(y[D],s[D]);return C}}var u=e(88350),i=e(83502);class f extends Array{constructor(y,s){return super(),y.map(v=>(0,i.zc)(s(v)))}}var c=e(89591);class E extends Array{constructor(y){super();const s=new Array(y);for(let v=0;v<y;v++)s[v]=v;return s}static newField(y){return{name:"",values:new E(y),type:c.fS.number,config:{min:0,max:y-1}}}}class p extends Array{constructor(y){return super(),y.map(s=>+s)}}},15679:(J,R,e)=>{"use strict";e.d(R,{n:()=>n});function n(a){const l=Array(a.length);for(let r=0;r<a.length;r++)l[r]=a.get(r);return l}},20836:(J,R,e)=>{"use strict";e.d(R,{Sg:()=>c,d6:()=>f,cN:()=>i});var n=e(89591),a=e(48706),l=e(94123),r=e(42082),o=e(86832);function g(p,h){const y=m(p);return d(y,h,"parents")}function m(p){return p.map(h=>{if(!h.parents?.length)return h;const y={...h,children:[]},s=[{child:y,parent:h.parents[0]}];for(;s.length;){const v=s.shift(),C={...v.parent,children:v.child?[v.child]:[],parents:[]};v.child&&(C.value=v.child.value,v.child.parents=[C]),v.parent.parents?.length&&s.push({child:C,parent:v.parent.parents[0]})}return y})}function d(p,h,y="children"){const s=y==="parents"?"children":"parents",v=[],C=[{previous:void 0,items:p,level:0}];for(;C.length;){const D=C.shift(),M=D.items.flatMap(I=>I.itemIndexes),P={value:D.items.reduce((I,T)=>I+T.value,0),itemIndexes:M,children:[],parents:[],start:0};if(v[D.level]=v[D.level]||[],v[D.level].push(P),D.previous){P[s]=[D.previous];const I=D.previous[y]?.reduce((T,O)=>T+O.value,0)||0;P.start=D.previous.start+I,D.previous[y].push(P)}const x=D.items.flatMap(I=>I[y]||[]),S=(0,o.groupBy)(x,I=>h.getLabel(I.itemIndexes[0]));for(const I of Object.values(S))C.push({previous:P,items:I,level:D.level+1})}return y==="parents"&&v.reverse(),v}function u(p){const h=[];let y=0,s;const v={};for(let C=0;C<p.data.length;C++){const D=p.getLevel(C),M=C>0?p.getLevel(C-1):void 0;if(h[D]=h[D]||[],M&&M>=D){const x=h[D][h[D].length-1];y=x.start+p.getValue(x.itemIndexes[0])+p.getValueRight(x.itemIndexes[0]),s=x.parents[0]}const P={itemIndexes:[C],value:p.getValue(C)+p.getValueRight(C),valueRight:p.isDiffFlamegraph()?p.getValueRight(C):void 0,start:y,parents:s&&[s],children:[]};v[p.getLabel(C)]?v[p.getLabel(C)].push(P):v[p.getLabel(C)]=[P],s&&s.children.push(P),s=P,h[D].push(P)}return[h,v]}function i(p){return p.missingFields.length?`Data is missing fields: ${p.missingFields.join(", ")}`:p.wrongTypeFields.length?`Data has fields of wrong type: ${p.wrongTypeFields.map(h=>`${h.name} has type ${h.type} but should be ${h.expectedTypes.join(" or ")}`).join(", ")}`:""}function f(p){const h=[["label",[n.fS.string,n.fS.enum]],["level",[n.fS.number]],["value",[n.fS.number]],["self",[n.fS.number]]],y=[],s=[];for(const v of h){const[C,D]=v,M=p.fields.find(P=>P.name===C);if(!M){y.push(C);continue}D.includes(M.type)||s.push({name:C,expectedTypes:D,type:M.type})}if(y.length>0||s.length>0)return{wrongTypeFields:s,missingFields:y}}class c{constructor(h,y=(0,a.j)()){this.data=h;const s=f(h);if(s)throw new Error(i(s));if(this.labelField=h.fields.find(C=>C.name==="label"),this.levelField=h.fields.find(C=>C.name==="level"),this.valueField=h.fields.find(C=>C.name==="value"),this.selfField=h.fields.find(C=>C.name==="self"),this.valueRightField=h.fields.find(C=>C.name==="valueRight"),this.selfRightField=h.fields.find(C=>C.name==="selfRight"),(this.valueField||this.selfField)&&!(this.valueField&&this.selfField))throw new Error("Malformed dataFrame: both valueRight and selfRight has to be present if one of them is present.");const v=this.labelField?.config?.type?.enum;v?(this.labelDisplayProcessor=(0,l.U)({field:this.labelField,theme:y}),this.uniqueLabels=v.text||[]):(this.labelDisplayProcessor=C=>({text:C+"",numeric:0}),this.uniqueLabels=[...new Set(this.labelField.values)]),this.valueDisplayProcessor=(0,l.U)({field:this.valueField,theme:y})}isDiffFlamegraph(){return this.valueRightField&&this.selfRightField}getLabel(h){return this.labelDisplayProcessor(this.labelField.values[h]).text}getLevel(h){return this.levelField.values[h]}getValue(h){return E(this.valueField,h)}getValueRight(h){return E(this.valueRightField,h)}getSelf(h){return E(this.selfField,h)}getSelfRight(h){return E(this.selfRightField,h)}getSelfDisplay(h){return this.valueDisplayProcessor(this.getSelf(h))}getUniqueLabels(){return this.uniqueLabels}getUnitTitle(){switch(this.valueField.config.unit){case r._r.Bytes:return"RAM";case r._r.Nanoseconds:return"Time"}return"Count"}getLevels(){return this.initLevels(),this.levels}getSandwichLevels(h){const y=this.getNodesWithLabel(h);if(!y?.length)return[[],[]];const s=g(y,this),v=d(y,this);return[s,v]}getNodesWithLabel(h){return this.initLevels(),this.uniqueLabelsMap[h]}initLevels(){if(!this.levels){const[h,y]=u(this);this.levels=h,this.uniqueLabelsMap=y}}}function E(p,h){return p?(typeof h=="number"?[h]:h).reduce((s,v)=>s+p.values[v],0):0}},56626:(J,R,e)=>{"use strict";e.d(R,{Z:()=>St});var n=e(41407),a=e(39953),l=e(13479),r=e(54342),o=e(12190);const g=22*window.devicePixelRatio,m=10*window.devicePixelRatio,d=.5*window.devicePixelRatio,u=20*window.devicePixelRatio,i=.5*window.devicePixelRatio,f=4*window.devicePixelRatio,c=800,E=120;var p=e(85001),h=e(53790);const s=({itemData:st,onMenuItemClick:tt,onItemFocus:ft,onSandwich:$t})=>{function Ht(){return a.createElement(a.Fragment,null,a.createElement(p.s,{label:"Focus block",icon:"eye",onClick:()=>{ft(),tt()}}),a.createElement(p.s,{label:"Copy function name",icon:"copy",onClick:()=>{navigator.clipboard.writeText(st.label).then(()=>{tt()})}}),a.createElement(p.s,{label:"Sandwich view",icon:"gf-show-context",onClick:()=>{$t(),tt()}}))}return a.createElement("div",{"data-testid":"contextMenu"},a.createElement(h.x,{renderMenuItems:Ht,x:st.posX+10,y:st.posY,focusOnOpen:!1}))};var v=e(83502),C=e(82803),D=e(68497);const M=a.memo(({data:st,focusedItem:tt,totalTicks:ft,sandwichedLabel:$t,onFocusPillClick:Ht,onSandwichPillClick:Zt})=>{const tn=(0,C.wW)(P),on=[],qt=(0,v.Cf)("short")(ft),pn=st.valueDisplayProcessor(ft);let Cn=pn.text+pn.suffix;const Rt=st.getUnitTitle();if(Rt==="Count"&&(pn.suffix||(Cn=pn.text)),on.push(a.createElement("div",{className:tn.metadataPill,key:"default"},Cn," | ",qt.text,qt.suffix," samples (",Rt,")")),$t&&on.push(a.createElement("span",{key:"sandwich"},a.createElement(o.J,{size:"sm",name:"angle-right"}),a.createElement("div",{className:tn.metadataPill},a.createElement(o.J,{size:"sm",name:"gf-show-context"})," ",a.createElement("span",{className:tn.metadataPillName},$t.substring($t.lastIndexOf("/")+1)),a.createElement(D.h,{className:tn.pillCloseButton,name:"times",size:"sm",onClick:Zt,tooltip:"Remove sandwich view","aria-label":"Remove sandwich view"})))),tt){const mt=Math.round(1e4*(tt.item.value/ft))/100;on.push(a.createElement("span",{key:"focus"},a.createElement(o.J,{size:"sm",name:"angle-right"}),a.createElement("div",{className:tn.metadataPill},a.createElement(o.J,{size:"sm",name:"eye"})," ",mt,"% of total",a.createElement(D.h,{className:tn.pillCloseButton,name:"times",size:"sm",onClick:Ht,tooltip:"Remove focus","aria-label":"Remove focus"}))))}return a.createElement(a.Fragment,null,a.createElement("div",{className:tn.metadata},on))});M.displayName="FlameGraphMetadata";const P=st=>({metadataPill:(0,n.css)`
    label: metadataPill;
    display: inline-flex;
    align-items: center;
    background: ${st.colors.background.secondary};
    border-radius: ${st.shape.borderRadius(8)};
    padding: ${st.spacing(.5,1)};
    font-size: ${st.typography.bodySmall.fontSize};
    font-weight: ${st.typography.fontWeightMedium};
    line-height: ${st.typography.bodySmall.lineHeight};
    color: ${st.colors.text.secondary};
  `,pillCloseButton:(0,n.css)`
    label: pillCloseButton;
    vertical-align: text-bottom;
    margin: ${st.spacing(0,.5)};
  `,metadata:(0,n.css)`
    margin: 8px 0;
    text-align: center;
  `,metadataPillName:(0,n.css)`
    label: metadataPillName;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-left: ${st.spacing(.5)};
  `}),x=M;var S=e(94696),I=e(70393),T=e(41013);const O=({data:st,item:tt,totalTicks:ft,position:$t})=>{const Ht=(0,C.wW)(W);if(!(tt&&$t))return null;let Zt;if(st.isDiffFlamegraph()){const tn=B(st,tt,ft);Zt=a.createElement(S.e,{className:Ht.tooltipTable,columns:[{id:"label",header:""},{id:"baseline",header:"Baseline"},{id:"comparison",header:"Comparison"},{id:"diff",header:"Diff"}],data:tn,getRowId:on=>on.rowId})}else{const tn=A(st,tt,ft);Zt=a.createElement("p",{className:Ht.lastParagraph},tn.unitTitle,a.createElement("br",null),"Total: ",a.createElement("b",null,tn.unitValue)," (",tn.percentValue,"%)",a.createElement("br",null),"Self: ",a.createElement("b",null,tn.unitSelf)," (",tn.percentSelf,"%)",a.createElement("br",null),"Samples: ",a.createElement("b",null,tn.samples))}return a.createElement(I.h_,null,a.createElement(T.S,{className:Ht.tooltipContainer,position:$t,offset:{x:15,y:0}},a.createElement("div",{className:Ht.tooltipContent},a.createElement("p",{className:Ht.tooltipName},st.getLabel(tt.itemIndexes[0])),Zt)))},A=(st,tt,ft)=>{const $t=st.valueDisplayProcessor(tt.value),Ht=st.getSelfDisplay(tt.itemIndexes),Zt=Math.round(1e4*($t.numeric/ft))/100,tn=Math.round(1e4*(Ht.numeric/ft))/100;let on=$t.text+$t.suffix,qt=Ht.text+Ht.suffix;const pn=st.getUnitTitle();return pn==="Count"&&($t.suffix||(on=$t.text),Ht.suffix||(qt=Ht.text)),{percentValue:Zt,percentSelf:tn,unitTitle:pn,unitValue:on,unitSelf:qt,samples:$t.numeric.toLocaleString()}},B=(st,tt,ft)=>{const Ht=st.getLevels()[0][0].valueRight,Zt=ft-Ht,tn=tt.value-tt.valueRight,on=Math.round(1e4*tn/Zt)/100,qt=Math.round(1e4*tt.valueRight/Ht)/100,pn=(qt-on)/on*100,Cn=b(st,st.valueDisplayProcessor(tn)),Rt=b(st,st.valueDisplayProcessor(tt.valueRight)),mt=(0,v.Cf)("short");return[{rowId:"1",label:"% of total",baseline:on+"%",comparison:qt+"%",diff:mt(pn).text+"%"},{rowId:"2",label:"Value",baseline:Cn,comparison:Rt,diff:b(st,st.valueDisplayProcessor(tt.valueRight-tn))},{rowId:"3",label:"Samples",baseline:mt(tn).text,comparison:mt(tt.valueRight).text,diff:mt(tt.valueRight-tn).text}]};function b(st,tt){let ft=tt.text+tt.suffix;return st.getUnitTitle()==="Count"&&(tt.suffix||(ft=tt.text)),ft}const W=st=>({tooltipContainer:(0,n.css)`
    title: tooltipContainer;
    overflow: hidden;
  `,tooltipContent:(0,n.css)`
    title: tooltipContent;
    font-size: ${st.typography.bodySmall.fontSize};
    width: 100%;
  `,tooltipName:(0,n.css)`
    title: tooltipName;
    margin-top: 0;
    word-break: break-all;
  `,lastParagraph:(0,n.css)`
    title: lastParagraph;
    margin-bottom: 0;
  `,name:(0,n.css)`
    title: name;
    margin-bottom: 10px;
  `,tooltipTable:(0,n.css)`
    title: tooltipTable;
    max-width: 400px;
  `}),V=O;var w=e(5135),K=e(63374),z=e(42082),G=e(39228);function Q(st,tt=0){let ft,$t,Ht,Zt,tn,on,qt,pn;for(ft=st.length&3,$t=st.length-ft,Ht=tt,tn=3432918353,on=461845907,pn=0;pn<$t;)qt=st.charCodeAt(pn)&255|(st.charCodeAt(++pn)&255)<<8|(st.charCodeAt(++pn)&255)<<16|(st.charCodeAt(++pn)&255)<<24,++pn,qt=(qt&65535)*tn+(((qt>>>16)*tn&65535)<<16)&4294967295,qt=qt<<15|qt>>>17,qt=(qt&65535)*on+(((qt>>>16)*on&65535)<<16)&4294967295,Ht^=qt,Ht=Ht<<13|Ht>>>19,Zt=(Ht&65535)*5+(((Ht>>>16)*5&65535)<<16)&4294967295,Ht=(Zt&65535)+27492+(((Zt>>>16)+58964&65535)<<16);switch(qt=0,ft){case 3:qt^=(st.charCodeAt(pn+2)&255)<<16;case 2:qt^=(st.charCodeAt(pn+1)&255)<<8;case 1:qt^=st.charCodeAt(pn)&255;default:qt=(qt&65535)*tn+(((qt>>>16)*tn&65535)<<16)&4294967295,qt=qt<<15|qt>>>17,qt=(qt&65535)*on+(((qt>>>16)*on&65535)<<16)&4294967295,Ht^=qt}return Ht^=st.length,Ht^=Ht>>>16,Ht=(Ht&65535)*2246822507+(((Ht>>>16)*2246822507&65535)<<16)&4294967295,Ht^=Ht>>>13,Ht=(Ht&65535)*3266489909+(((Ht>>>16)*3266489909&65535)<<16)&4294967295,Ht^=Ht>>>16,Ht>>>0}const j=[(0,K.Z)({h:24,s:69,l:60}),(0,K.Z)({h:34,s:65,l:65}),(0,K.Z)({h:194,s:52,l:61}),(0,K.Z)({h:163,s:45,l:55}),(0,K.Z)({h:211,s:48,l:60}),(0,K.Z)({h:246,s:40,l:65}),(0,K.Z)({h:305,s:63,l:79}),(0,K.Z)({h:47,s:100,l:73}),(0,K.Z)({r:183,g:219,b:171}),(0,K.Z)({r:244,g:213,b:152}),(0,K.Z)({r:78,g:146,b:249}),(0,K.Z)({r:249,g:186,b:143}),(0,K.Z)({r:242,g:145,b:145}),(0,K.Z)({r:130,g:181,b:216}),(0,K.Z)({r:229,g:168,b:226}),(0,K.Z)({r:174,g:162,b:224}),(0,K.Z)({r:154,g:196,b:138}),(0,K.Z)({r:242,g:201,b:109}),(0,K.Z)({r:101,g:197,b:219}),(0,K.Z)({r:249,g:147,b:78}),(0,K.Z)({r:234,g:100,b:96}),(0,K.Z)({r:81,g:149,b:206}),(0,K.Z)({r:214,g:131,b:206}),(0,K.Z)({r:128,g:110,b:183})],F=Z(1,100,0,1),k=Z(100,100,0,1),_=`linear-gradient(90deg, ${F} 0%, ${k} 100%)`,Y=`linear-gradient(90deg, ${j[0]} 0%, ${j[2]} 30%, ${j[6]} 50%, ${j[7]} 70%, ${j[8]} 100%)`;function Z(st,tt,ft,$t){const Ht=Math.min(1,st/tt/($t-ft)),Zt=50-50*Ht,tn=65+7*Ht;return(0,K.Z)({h:Zt,s:100,l:tn})}function ae(st,tt){const ft=Te(st),Ht=Q(ft||"",0)%j.length;let Zt=j[Ht].clone();return tt.isLight&&(Zt=Zt.brighten(15)),Zt}const ce=["rgb(0, 170, 0)","rgb(148, 142, 142)","rgb(200, 0, 0)"],q=`linear-gradient(90deg, ${ce[0]} 0%, ${ce[1]} 50%, ${ce[2]} 100%)`,De=["rgb(26, 133, 255)","rgb(148, 142, 142)","rgb(220, 50, 32)"],oe=`linear-gradient(90deg, ${De[0]} 0%, ${De[1]} 50%, ${De[2]} 100%)`;function te(st,tt,ft,$t,Ht){const Zt=Ht===z.cB.Default?ce:De,tn=(0,G.scaleLinear)().domain([-100,0,100]).range(Zt),on=st-tt,qt=ft-$t;if($t===0||qt===0){const xt=tn(0);return(0,K.Z)(xt)}const pn=Math.round(1e4*on/qt)/100,Rt=(Math.round(1e4*tt/$t)/100-pn)/pn*100,mt=tn(Rt);return(0,K.Z)(mt)}const fe=[["phpspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.php+)(?<line_info>.*)$/],["pyspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.py+)(?<line_info>.*)$/],["rbspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.rb+)(?<line_info>.*)$/],["nodespy",/^(\.\/node_modules\/)?(?<packageName>[^/]*)(?<filename>.*\.?(jsx?|tsx?)?):(?<functionName>.*):(?<line_info>.*)$/],["gospy",/^(?<packageName>.*?\/.*?\.|.*?\.|.+)(?<functionName>.*)$/],["javaspy",/^(?<packageName>.+\/)(?<filename>.+\.)(?<functionName>.+)$/],["dotnetspy",/^(?<packageName>.+)\.(.+)\.(.+)\(.*\)$/],["tracing",/^(?<packageName>.+?):.*$/],["pyroscope-rs",/^(?<packageName>[^::]+)/],["ebpfspy",/^(?<packageName>.+)$/],["unknown",/^(?<packageName>.+)$/]];function Te(st){for(const[tt,ft]of fe){const $t=st.match(ft);if($t)return $t.groups?.packageName||""}}const ge=new w.Z;function he(st){const{canvasRef:tt,data:ft,levels:$t,wrapperWidth:Ht,rangeMin:Zt,rangeMax:tn,search:on,textAlign:qt,totalViewTicks:pn,totalColorTicks:Cn,totalTicksRight:Rt,colorScheme:mt,focusedItemData:xt}=st,Ft=(0,a.useMemo)(()=>{if(on){const ln=new Set;let Pt=ge.filter(ft.getUniqueLabels(),on);if(Pt)for(let Gt of Pt)ln.add(ft.getUniqueLabels()[Gt]);return ln}},[on,ft]),zt=me(tt,Ht,$t.length),Jt=(0,C.l4)();(0,a.useEffect)(()=>{if(!zt)return;zt.clearRect(0,0,zt.canvas.width,zt.canvas.height);const ln=Ht*window.devicePixelRatio/pn/(tn-Zt);for(let Pt=0;Pt<$t.length;Pt++){const Gt=$t[Pt],Kt=ye(ft,Gt,Pt,pn,Zt,ln);for(const kt of Kt){const dn=xt?xt.level:0;ue(zt,kt,Cn,Rt,Zt,tn,Pt,dn,Ft,qt,mt,Jt)}}},[zt,ft,$t,Ht,Zt,tn,on,xt,Ft,qt,pn,Cn,Rt,mt,Jt])}function me(st,tt,ft){const[$t,Ht]=(0,a.useState)();return(0,a.useEffect)(()=>{if(!(ft&&st.current))return;const Zt=st.current.getContext("2d"),tn=g*ft;st.current.width=Math.round(tt*window.devicePixelRatio),st.current.height=Math.round(tn),st.current.style.width=`${tt}px`,st.current.style.height=`${tn/window.devicePixelRatio}px`,Zt.textBaseline="middle",Zt.font=12*window.devicePixelRatio+"px monospace",Zt.strokeStyle="white",Ht(Zt)},[st,Ht,tt,ft]),$t}function ye(st,tt,ft,$t,Ht,Zt){const tn=[];for(let on=0;on<tt.length;on+=1){const qt=tt[on],pn=Ue(qt.start,$t,Ht,Zt);let Cn=qt.value;const Rt=Cn*Zt<=m;if(Rt)for(;on<tt.length-1&&qt.start+Cn===tt[on+1].start&&tt[on+1].value*Zt<=m;)on+=1,Cn+=tt[on].value;const mt=st.valueDisplayProcessor(qt.value);let xt=mt.suffix?mt.text+mt.suffix:mt.text;const Ft=Cn*Zt-(Rt?0:i*2);tn.push({width:Ft,height:g,x:pn,y:ft*g,collapsed:Rt,ticks:Cn,ticksRight:qt.valueRight,label:st.getLabel(qt.itemIndexes[0]),unitLabel:xt,itemIndex:qt.itemIndexes[0]})}return tn}function ue(st,tt,ft,$t,Ht,Zt,tn,on,qt,pn,Cn,Rt){if(tt.width<d)return;st.beginPath(),st.rect(tt.x+(tt.collapsed?0:i),tt.y,tt.width,tt.height);const mt=tt.ticksRight!==void 0&&(Cn===z.cB.Default||Cn===z.cB.DiffColorBlind)?te(tt.ticks,tt.ticksRight,ft,$t,Cn):Cn===z.eL.ValueBased?Z(tt.ticks,ft,Ht,Zt):ae(tt.label,Rt),xt=(0,K.Z)(Rt.colors.background.secondary),Ft=Rt.isLight?xt.darken(10).toHexString():xt.lighten(10).toHexString();if(qt?st.fillStyle=qt.has(tt.label)?mt.toHslString():Ft:tt.collapsed?st.fillStyle=Ft:st.fillStyle=tn>on-1?mt.toHslString():mt.lighten(15).toHslString(),tt.collapsed){st.fill();return}st.stroke(),st.fill(),tt.width>=u&&Oe(st,tt.label,tt,pn)}function Oe(st,tt,ft,$t){st.save(),st.clip(),st.fillStyle="#222";const Ht=st.measureText(tt),Zt=ft.width-f;let tn=`${tt} (${ft.unitLabel})`,on=Math.max(ft.x,0)+f;Ht.width>Zt&&(st.textAlign=$t,$t==="right"&&(tn=tt,on=ft.x+ft.width-f)),st.fillText(tn,on,ft.y+g/2),st.restore()}function Ue(st,tt,ft,$t){return(st-tt*ft)*$t}const at=({data:st,rangeMin:tt,rangeMax:ft,search:$t,setRangeMin:Ht,setRangeMax:Zt,onItemFocused:tn,focusedItemData:on,textAlign:qt,onSandwich:pn,sandwichItem:Cn,onFocusPillClick:Rt,onSandwichPillClick:mt,colorScheme:xt})=>{const Ft=Ne(),[zt,Jt,ln,Pt,Gt]=(0,a.useMemo)(()=>{let ga=st.getLevels(),ca=ga.length?ga[0][0].value:0,Ra=ga.length?ga[0][0].valueRight:void 0,va=0,Sa=ca;if(Cn){const[es,yt]=st.getSandwichLevels(Cn);ga=[...es,[],...yt],Sa=yt[0]?.[0]?.value??0,va=es.length}return[ga,ca,Ra,Sa,va]},[st,Cn]),[Kt,{width:kt}]=(0,l.Z)(),dn=(0,a.useRef)(null),[nn,mn]=(0,a.useState)(),[Mn,Gn]=(0,a.useState)();he({canvasRef:dn,colorScheme:xt,data:st,focusedItemData:on,levels:zt,rangeMax:ft,rangeMin:tt,search:$t,textAlign:qt,totalViewTicks:Pt,totalColorTicks:st.isDiffFlamegraph()?Jt:Pt,totalTicksRight:ln,wrapperWidth:kt});const $n=(0,a.useCallback)(ga=>{mn(void 0);const ca=dn.current.clientWidth/Pt/(ft-tt),{levelIndex:Ra,barIndex:va}=_e({x:ga.nativeEvent.offsetX,y:ga.nativeEvent.offsetY},zt,ca,Pt,tt);if(va!==-1&&!isNaN(Ra)&&!isNaN(va)){const Sa=zt[Ra][va];Gn({posY:ga.clientY,posX:ga.clientX,item:Sa,level:Ra,label:st.getLabel(Sa.itemIndexes[0])})}else Gn(void 0)},[st,tt,ft,Pt,zt]),[Fn,Yn]=(0,a.useState)(),ua=(0,a.useCallback)(ga=>{if(Mn===void 0){mn(void 0),Yn(void 0);const ca=dn.current.clientWidth/Pt/(ft-tt),{levelIndex:Ra,barIndex:va}=_e({x:ga.nativeEvent.offsetX,y:ga.nativeEvent.offsetY},zt,ca,Pt,tt);va!==-1&&!isNaN(Ra)&&!isNaN(va)&&(Yn({x:ga.clientX,y:ga.clientY}),mn(zt[Ra][va]))}},[tt,ft,Pt,Mn,zt,Yn]),wa=(0,a.useCallback)(()=>{mn(void 0)},[]);return(0,a.useEffect)(()=>{const ga=ca=>{ca.target instanceof HTMLElement&&ca.target.parentElement?.id!=="flameGraphCanvasContainer_clickOutsideCheck"&&Gn(void 0)};return window.addEventListener("click",ga),()=>window.removeEventListener("click",ga)},[Gn]),a.createElement("div",{className:Ft.graph},a.createElement(x,{data:st,focusedItem:on,sandwichedLabel:Cn,totalTicks:Pt,onFocusPillClick:Rt,onSandwichPillClick:mt}),a.createElement("div",{className:Ft.canvasContainer},Cn&&a.createElement("div",null,a.createElement("div",{className:Ft.sandwichMarker,style:{height:Gt*g/window.devicePixelRatio}},"Callers",a.createElement(o.J,{className:Ft.sandwichMarkerIcon,name:"arrow-down"})),a.createElement("div",{className:Ft.sandwichMarker,style:{marginTop:g/window.devicePixelRatio}},a.createElement(o.J,{className:Ft.sandwichMarkerIcon,name:"arrow-up"}),"Callees")),a.createElement("div",{className:Ft.canvasWrapper,id:"flameGraphCanvasContainer_clickOutsideCheck",ref:Kt},a.createElement("canvas",{ref:dn,"data-testid":"flameGraph",onClick:$n,onMouseMove:ua,onMouseLeave:wa}))),a.createElement(V,{position:Fn,item:nn,data:st,totalTicks:Pt}),Mn&&a.createElement(s,{itemData:Mn,onMenuItemClick:()=>{Gn(void 0)},onItemFocus:()=>{Ht(Mn.item.start/Pt),Zt((Mn.item.start+Mn.item.value)/Pt),tn(Mn)},onSandwich:()=>{pn(st.getLabel(Mn.item.itemIndexes[0]))}}))},Ne=()=>({graph:(0,n.css)`
    label: graph;
    overflow: auto;
    height: 100%;
    flex-grow: 1;
    flex-basis: 50%;
  `,canvasContainer:(0,n.css)`
    label: canvasContainer;
    display: flex;
  `,canvasWrapper:(0,n.css)`
    label: canvasWrapper;
    cursor: pointer;
    flex: 1;
    overflow: hidden;
  `,sandwichMarker:(0,n.css)`
    label: sandwichMarker;
    writing-mode: vertical-lr;
    transform: rotate(180deg);
    overflow: hidden;
    white-space: nowrap;
  `,sandwichMarkerIcon:(0,n.css)`
    label: sandwichMarkerIcon;
    vertical-align: baseline;
  `}),_e=(st,tt,ft,$t,Ht)=>{const Zt=Math.floor(st.y/(g/window.devicePixelRatio)),tn=Ke(st.x,tt[Zt],ft,$t,Ht);return{levelIndex:Zt,barIndex:tn}},Ke=(st,tt,ft,$t,Ht)=>{if(tt){let Zt=0,tn=tt.length-1;for(;Zt<=tn;){const on=Zt+tn>>1,qt=Ue(tt[on].start,$t,Ht,ft),pn=Ue(tt[on].start+tt[on].value,$t,Ht,ft);if(qt<=st&&pn>=st)return on;qt>st?tn=on-1:Zt=on+1}}return-1},et=at;var ze=e(20836),je=e(87231),Qe=e(92418),We=e(4919),ke=e(38637),ot=e(20454),lt=e(13767),Ct=e(58047);const wt=({search:st,setSearch:tt,selectedView:ft,setSelectedView:$t,containerWidth:Ht,onReset:Zt,textAlign:tn,onTextAlignChange:on,showResetButton:qt,colorScheme:pn,onColorSchemeChange:Cn,stickyHeader:Rt,extraHeaderElements:mt,vertical:xt,isDiffMode:Ft})=>{const zt=(0,C.wW)(le,Rt),[Jt,ln]=Le(st,tt),Pt=Jt!==""?a.createElement(We.zx,{icon:"times",fill:"text",size:"sm",onClick:()=>{tt(""),ln("")}},"Clear"):null;return a.createElement("div",{className:zt.header},a.createElement("div",{className:zt.inputContainer},a.createElement(ke.I,{value:Jt||"",onChange:Gt=>{ln(Gt.currentTarget.value)},placeholder:"Search..",suffix:Pt})),a.createElement("div",{className:zt.rightContainer},qt&&a.createElement(We.zx,{variant:"secondary",fill:"outline",size:"sm",icon:"history-alt",tooltip:"Reset focus and sandwich state",onClick:()=>{Zt()},className:zt.buttonSpacing,"aria-label":"Reset focus and sandwich state"}),a.createElement(Lt,{value:pn,onChange:Cn,isDiffMode:Ft}),a.createElement(ot.S,{size:"sm",disabled:ft===z.So.TopTable,options:Ye,value:tn,onChange:on,className:zt.buttonSpacing}),a.createElement(ot.S,{size:"sm",options:Be(Ht,xt),value:ft,onChange:$t}),mt&&a.createElement("div",{className:zt.extraElements},mt)))};function Lt(st){const tt=(0,C.wW)(le,!1);let ft=a.createElement(lt.v,null,a.createElement(lt.v.Item,{label:"By package name",onClick:()=>st.onChange(z.eL.PackageBased)}),a.createElement(lt.v.Item,{label:"By value",onClick:()=>st.onChange(z.eL.ValueBased)}));st.isDiffMode&&(ft=a.createElement(lt.v,null,a.createElement(lt.v.Item,{label:"Default (green to red)",onClick:()=>st.onChange(z.cB.Default)}),a.createElement(lt.v.Item,{label:"Color blind (blue to red)",onClick:()=>st.onChange(z.cB.DiffColorBlind)})));const $t={[z.eL.ValueBased]:tt.colorDotByValue,[z.eL.PackageBased]:tt.colorDotByPackage,[z.cB.DiffColorBlind]:tt.colorDotDiffColorBlind,[z.cB.Default]:tt.colorDotDiffDefault}[st.value]||tt.colorDotByValue;return a.createElement(Ct.L,{overlay:ft},a.createElement(We.zx,{variant:"secondary",fill:"outline",size:"sm",tooltip:"Change color scheme",onClick:()=>{},className:tt.buttonSpacing,"aria-label":"Change color scheme"},a.createElement("span",{className:(0,n.cx)(tt.colorDot,$t)})))}const Ye=[{value:"left",description:"Align text left",icon:"align-left"},{value:"right",description:"Align text right",icon:"align-right"}];function Be(st,tt){let ft=[{value:z.So.TopTable,label:"Top Table",description:"Only show top table"},{value:z.So.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return(st>=c||tt)&&ft.push({value:z.So.Both,label:"Both",description:"Show both the top table and flame graph"}),ft}function Le(st,tt){const[ft,$t]=(0,a.useState)(st),Ht=(0,Qe.Z)(st);return(0,je.Z)(()=>{tt(ft)},250,[ft]),(0,a.useEffect)(()=>{Ht!==st&&st!==ft&&$t(st)},[st,Ht,ft]),[ft,$t]}const le=(st,tt)=>({header:(0,n.css)`
    label: header;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    width: 100%;
    top: 0;
    ${tt?(0,n.css)`
          z-index: ${st.zIndex.navbarFixed};
          position: sticky;
          padding-bottom: ${st.spacing(1)};
          padding-top: ${st.spacing(1)};
          background: ${st.colors.background.primary};
        `:""};
  `,inputContainer:(0,n.css)`
    label: inputContainer;
    margin-right: 20px;
    flex-grow: 1;
    min-width: 150px;
    max-width: 350px;
  `,rightContainer:(0,n.css)`
    label: rightContainer;
    display: flex;
    align-items: flex-start;
    flex-wrap: wrap;
  `,buttonSpacing:(0,n.css)`
    label: buttonSpacing;
    margin-right: ${st.spacing(1)};
  `,resetButton:(0,n.css)`
    label: resetButton;
    display: flex;
    margin-right: ${st.spacing(2)};
  `,resetButtonIconWrapper:(0,n.css)`
    label: resetButtonIcon;
    padding: 0 5px;
    color: ${st.colors.text.disabled};
  `,colorDot:(0,n.css)`
    label: colorDot;
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
  `,colorDotByValue:(0,n.css)`
    label: colorDotByValue;
    background: ${_};
  `,colorDotByPackage:(0,n.css)`
    label: colorDotByPackage;
    background: ${Y};
  `,colorDotDiffDefault:(0,n.css)`
    label: colorDotDiffDefault;
    background: ${q};
  `,colorDotDiffColorBlind:(0,n.css)`
    label: colorDotDiffColorBlind;
    background: ${oe};
  `,extraElements:(0,n.css)`
    label: extraElements;
    margin-left: ${st.spacing(1)};
  `}),de=wt;var X=e(19977),se=e(89591),re=e(23955),pe=e(52716),be=e(23968),xe=e(34547);const Pe=a.memo(({data:st,onSymbolClick:tt,height:ft,search:$t,onSearch:Ht,sandwichItem:Zt,onSandwich:tn,onTableSort:on,vertical:qt})=>{const pn=(0,a.useMemo)(()=>{let Jt={};for(let ln=0;ln<st.data.length;ln++){const Pt=st.getValue(ln),Gt=st.getValueRight(ln),Kt=st.getSelf(ln),kt=st.getLabel(ln);Jt[kt]=Jt[kt]||{},Jt[kt].self=Jt[kt].self?Jt[kt].self+Kt:Kt,Jt[kt].total=Jt[kt].total?Jt[kt].total+Pt:Pt,Jt[kt].totalRight=Jt[kt].totalRight?Jt[kt].totalRight+Gt:Gt}return Jt},[st]),Cn=35,Rt=qt?Math.min(Object.keys(pn).length*Cn,800):0,mt=(0,C.wW)(ct,Rt),xt=(0,C.l4)(),[Ft,zt]=(0,a.useState)([{displayName:"Self",desc:!0}]);return a.createElement("div",{className:mt.topTableContainer,"data-testid":"topTable"},a.createElement(X.Z,{style:{width:"100%",height:ft}},({width:Jt,height:ln})=>{if(Jt<3||ln<3)return null;const Pt=we(st,pn,Jt,tt,Ht,tn,xt,$t,Zt);return a.createElement(be.i,{initialSortBy:Ft,onSortByChange:Gt=>{Gt&&Gt.length&&on?.(Gt[0].displayName+"_"+(Gt[0].desc?"desc":"asc")),zt(Gt)},data:Pt,width:Jt,height:ln})}))});Pe.displayName="FlameGraphTopTableContainer";function we(st,tt,ft,$t,Ht,Zt,tn,on,qt){const pn=Xe(Zt,Ht,on,qt),Cn={type:se.fS.string,name:"Symbol",values:[],config:{custom:{width:ft-He-E*2},links:[{title:"Highlight symbol",url:"",onClick:xt=>{const zt=xt.origin.field.values[xt.origin.rowIndex];$t(zt)}}]}};let Rt;if(st.isDiffFlamegraph()){Cn.config.custom.width=ft-He-E*3;const xt=Fe("Baseline","percent"),Ft=Fe("Comparison","percent"),zt=Fe("Diff","percent");zt.config.custom.cellOptions.type=xe.h2.ColorText,zt.config.mappings=[{type:re.H.ValueToText,options:{[1/0]:{text:"new",color:"red"}}},{type:re.H.ValueToText,options:{[-100]:{text:"removed",color:"green"}}},{type:re.H.RangeToText,options:{from:0,to:1/0,result:{color:"red"}}},{type:re.H.RangeToText,options:{from:-1/0,to:0,result:{color:"green"}}}];const Jt=st.getLevels(),ln=Jt.length?Jt[0][0].value:0,Pt=Jt.length?Jt[0][0].valueRight:void 0;for(let Gt in tt){pn.values.push(null),Cn.values.push(Gt);const Kt=tt[Gt].total,kt=tt[Gt].totalRight,dn=ln-Pt,nn=Math.round(1e4*Kt/dn)/100,mn=Math.round(1e4*kt/Pt)/100,Mn=(mn-nn)/nn*100;zt.values.push(Mn),xt.values.push(nn),Ft.values.push(mn)}Rt={fields:[pn,Cn,xt,Ft,zt],length:Cn.values.length}}else{const xt=Fe("Self",st.selfField.config.unit),Ft=Fe("Total",st.valueField.config.unit);for(let zt in tt)pn.values.push(null),Cn.values.push(zt),xt.values.push(tt[zt].self),Ft.values.push(tt[zt].total);Rt={fields:[pn,Cn,xt,Ft],length:Cn.values.length}}return(0,pe.SM)({data:[Rt],fieldConfig:{defaults:{},overrides:[]},replaceVariables:xt=>xt,theme:tn})[0]}function Fe(st,tt){const ft={width:E,align:"auto",inspect:!1,cellOptions:{type:xe.h2.Auto}};return{type:se.fS.number,name:st,values:[],config:{unit:tt,custom:ft}}}const He=61;function Xe(st,tt,ft,$t){const Ht={type:xe.h2.Custom,cellComponent:tn=>a.createElement(dt,{frame:tn.frame,onSandwich:st,onSearch:tt,search:ft,sandwichItem:$t,rowIndex:tn.rowIndex})},Zt={filterable:!1,width:He,hideHeader:!0,inspect:!1,align:"auto",cellOptions:Ht};return{type:se.fS.number,name:"actions",values:[],config:{custom:Zt}}}function dt(st){const tt=At(),ft=st.frame.fields.find(Zt=>Zt.name==="Symbol")?.values[st.rowIndex],$t=st.search===ft,Ht=st.sandwichItem===ft;return a.createElement("div",{className:tt.actionCellWrapper},a.createElement(D.h,{className:tt.actionCellButton,name:"search",variant:$t?"primary":"secondary",tooltip:$t?"Clear from search":"Search for symbol","aria-label":$t?"Clear from search":"Search for symbol",onClick:()=>{st.onSearch($t?"":ft)}}),a.createElement(D.h,{className:tt.actionCellButton,name:"gf-show-context",tooltip:Ht?"Remove from sandwich view":"Show in sandwich view",variant:Ht?"primary":"secondary","aria-label":Ht?"Remove from sandwich view":"Show in sandwich view",onClick:()=>{st.onSandwich(Ht?void 0:ft)}}))}const ct=(st,tt)=>({topTableContainer:(0,n.css)`
      label: topTableContainer;
      flex-grow: 1;
      flex-basis: 50%;
      overflow: hidden;
      padding: ${st.spacing(1)};
      background-color: ${st.colors.background.secondary};
      ${tt?(0,n.css)`
            min-height: ${tt}px;
          `:""}
    `}),At=()=>({actionCellWrapper:(0,n.css)`
      label: actionCellWrapper;
      display: flex;
      height: 24px;
    `,actionCellButton:(0,n.css)`
      label: actionCellButton;
      margin-right: 0;
      width: 24px;
    `}),Ie=Pe,Ze=({data:st,onTableSymbolClick:tt,onViewSelected:ft,onTextAlignSelected:$t,onTableSort:Ht,getTheme:Zt,stickyHeader:tn,extraHeaderElements:on,vertical:qt})=>{const[pn,Cn]=(0,a.useState)(),[Rt,mt]=(0,a.useState)(0),[xt,Ft]=(0,a.useState)(1),[zt,Jt]=(0,a.useState)(""),[ln,Pt]=(0,a.useState)(z.So.Both),[Gt,{width:Kt}]=(0,l.Z)(),[kt,dn]=(0,a.useState)("left"),[nn,mn]=(0,a.useState)(),Mn=Zt(),Gn=(0,a.useMemo)(()=>{if(st)return new ze.Sg(st,Mn)},[st,Mn]),[$n,Fn]=ut(Gn),Yn=rt(Mn,qt);(0,a.useEffect)(()=>{Kt>0&&Kt<c&&ln===z.So.Both&&!qt&&Pt(z.So.FlameGraph)},[ln,Pt,Kt,qt]);const ua=(0,a.useCallback)(()=>{Cn(void 0),mt(0),Ft(1)},[Cn,Ft,mt]);function wa(){mn(void 0)}(0,a.useEffect)(()=>{ua(),wa()},[st,ua]);const ga=(0,a.useCallback)(ca=>{zt===ca?Jt(""):(tt?.(ca),Jt(ca),ua())},[Jt,ua,tt,zt]);return Gn?a.createElement(r.N.Provider,{value:Mn},a.createElement("div",{ref:Gt,className:Yn.container},a.createElement(de,{search:zt,setSearch:Jt,selectedView:ln,setSelectedView:ca=>{Pt(ca),ft?.(ca)},containerWidth:Kt,onReset:()=>{ua(),wa()},textAlign:kt,onTextAlignChange:ca=>{dn(ca),$t?.(ca)},showResetButton:!!(pn||nn),colorScheme:$n,onColorSchemeChange:Fn,stickyHeader:!!tn,extraHeaderElements:on,vertical:qt,isDiffMode:!!Gn.isDiffFlamegraph()}),a.createElement("div",{className:Yn.body},ln!==z.So.FlameGraph&&a.createElement(Ie,{data:Gn,onSymbolClick:ga,height:ln===z.So.TopTable?600:void 0,search:zt,sandwichItem:nn,onSandwich:mn,onSearch:Jt,onTableSort:Ht,vertical:qt}),ln!==z.So.TopTable&&a.createElement(et,{data:Gn,rangeMin:Rt,rangeMax:xt,search:zt,setRangeMin:mt,setRangeMax:Ft,onItemFocused:ca=>Cn(ca),focusedItemData:pn,textAlign:kt,sandwichItem:nn,onSandwich:ca=>{ua(),mn(ca)},onFocusPillClick:ua,onSandwichPillClick:wa,colorScheme:$n})))):null};function ut(st){const tt=st?.isDiffFlamegraph()?z.cB.Default:z.eL.PackageBased,[ft,$t]=(0,a.useState)(tt);return(0,a.useEffect)(()=>{$t(tt)},[tt]),[ft,$t]}function rt(st,tt){return{container:(0,n.css)({label:"container",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0,gap:st.spacing(1)}),body:(0,n.css)({label:"body",display:"flex",flexGrow:1,minHeight:0,flexDirection:tt?"column-reverse":"row",columnGap:st.spacing(1)})}}const St=Ze},42082:(J,R,e)=>{"use strict";e.d(R,{So:()=>a,_r:()=>n,cB:()=>r,eL:()=>l});var n=(o=>(o.Bytes="bytes",o.Short="short",o.Nanoseconds="ns",o))(n||{}),a=(o=>(o.TopTable="topTable",o.FlameGraph="flameGraph",o.Both="both",o))(a||{}),l=(o=>(o.ValueBased="valueBased",o.PackageBased="packageBased",o))(l||{}),r=(o=>(o.Default="default",o.DiffColorBlind="diffColorBlind",o))(r||{})},39060:(J,R,e)=>{"use strict";e.d(R,{I:()=>a,i:()=>l});var n=e(32688);function a(r){return{grafana_version:n.config.buildInfo.version,plugin_type:String(r.type),plugin_version:r.info.version,plugin_id:r.id,plugin_name:r.name}}function l(r){return{...a(r.meta),datasource_uid:r.uid}}},32822:(J,R,e)=>{"use strict";e.d(R,{Q:()=>m});var n=e(39953),a=e(67093),l=e(74948),r=e(72639),o=e(39060);const g="grafana_plugin_";function m(){const u=(0,a.g)();return(0,n.useMemo)(()=>{const i=(0,l.v)(u)?(0,o.i)(u.instanceSettings):(0,o.I)(u.meta);return(f,c)=>{if(!d(f))throw new Error(`Interactions reported in plugins should start with: "${g}".`);return(0,r.ff)(f,{...c,...i})}},[u])}function d(u){return u.startsWith(g)&&u.length>g.length}},4651:(J,R,e)=>{"use strict";e.d(R,{Si:()=>a,ct:()=>n,fV:()=>l,mR:()=>r});var n=(o=>(o.DashboardView="dashboard-view",o.DataRequest="data-request",o))(n||{});const a=o=>!!o.payload.page,l=o=>!!o.payload.interactionName,r=o=>!!o.payload.experimentId},72639:(J,R,e)=>{"use strict";e.d(R,{SZ:()=>m,ff:()=>g,r_:()=>r,sm:()=>o});var n=e(32688),a=e(13601),l=e(30281);const r=d=>{(0,l.RP)().addEvent({type:l.ee.MetaAnalytics,payload:d})},o=()=>{const d=a.E1.getLocation(),u=`${n.config.appSubUrl??""}${d.pathname}${d.search}${d.hash}`;(0,l.RP)().addEvent({type:l.ee.Pageview,payload:{page:u}})},g=(d,u)=>{(0,l.RP)().addEvent({type:l.ee.Interaction,payload:{interactionName:d,properties:u}})},m=(d,u,i)=>{(0,l.RP)().addEvent({type:l.ee.ExperimentView,payload:{experimentId:d,experimentGroup:u,experimentVariant:i}})}},39458:(J,R,e)=>{"use strict";e.d(R,{q:()=>i});var n=e(39953),a=e(47635),l=e(88227),r=e(28888),o=e(9558),g=e(12223),m=e(45802),d=e(26205),u=e(92743);class i extends n.PureComponent{constructor(c){super(c),this.dataSourceSrv=(0,d.F)(),this.state={},this.onChange=(E,p)=>{if(p.action==="clear"&&this.props.onClear){this.props.onClear();return}const h=this.dataSourceSrv.getInstanceSettings(E.value);h&&(this.props.onChange(h),this.setState({error:void 0}))}}componentDidMount(){const{current:c}=this.props;this.dataSourceSrv.getInstanceSettings(c)||this.setState({error:"Could not find data source "+c})}getCurrentValue(){const{current:c,hideTextValue:E,noDefault:p}=this.props;if(!c&&p)return;const h=this.dataSourceSrv.getInstanceSettings(c);if(h)return{label:h.name.slice(0,37),value:h.uid,imgUrl:h.meta.info.logos.small,hideText:E,meta:h.meta};const y=(0,a.BT)(c);return y===u.hr.uid||y===u.hr.name?{label:y,value:y,hideText:E}:{label:(y??"no name")+" - not found",value:y??void 0,imgUrl:"",hideText:E}}getDataSourceOptions(){const{alerting:c,tracing:E,metrics:p,mixed:h,dashboard:y,variables:s,annotations:v,pluginId:C,type:D,filter:M,logs:P}=this.props;return this.dataSourceSrv.getList({alerting:c,tracing:E,metrics:p,logs:P,dashboard:y,mixed:h,variables:s,annotations:v,pluginId:C,filter:M,type:D}).map(S=>({value:S.name,label:`${S.name}${S.isDefault?" (default)":""}`,imgUrl:S.meta.info.logos.small,meta:S.meta}))}render(){const{autoFocus:c,onBlur:E,onClear:p,openMenuOnFocus:h,placeholder:y,width:s,inputId:v,disabled:C=!1,isLoading:D=!1}=this.props,{error:M}=this.state,P=this.getDataSourceOptions(),x=this.getCurrentValue(),S=typeof p=="function";return n.createElement("div",{"aria-label":"Data source picker select container","data-testid":r.wl.components.DataSourcePicker.container},n.createElement(o.Ph,{isLoading:D,disabled:C,"aria-label":"Select a data source","data-testid":r.wl.components.DataSourcePicker.inputV2,inputId:v||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:S,backspaceRemovesValue:!1,onChange:this.onChange,options:P,autoFocus:c,onBlur:E,width:s,openMenuOnFocus:h,maxMenuHeight:500,placeholder:y,noOptionsMessage:"No datasources found",value:x??null,invalid:!!M||!!this.props.invalid,getOptionLabel:I=>I.meta&&(0,l.x)(I.meta.signature)&&I!==x?n.createElement(g.Lh,{align:"center",justify:"space-between",height:"auto"},n.createElement("span",null,I.label)," ",n.createElement(m.o,{status:I.meta.signature})):I.label||""}))}}i.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},30639:(J,R,e)=>{"use strict";e.d(R,{$:()=>l,Z:()=>a});var n=e(39953);let a=({message:r})=>n.createElement("div",null,"Unable to render data: ",r,".");function l(r){a=r}},51103:(J,R,e)=>{"use strict";e.d(R,{$:()=>a,L:()=>l});var n=e(39953);let a=()=>n.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function l(r){a=r}},3799:(J,R,e)=>{"use strict";e.d(R,{T:()=>a,t:()=>l});var n=e(39953);let a=({children:r})=>n.createElement("div",null,r);function l(r){a=r}},32688:(J,R,e)=>{"use strict";e.d(R,{O:()=>o,config:()=>i});var n=e(86832),a=e.n(n),l=e(47330),r=e(54112);class o{constructor(c){this.snapshotEnabled=!0,this.datasources={},this.panels={},this.apps={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.newsFeedEnabled=!0,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.secureSocksDSProxyEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.trustedTypesDefaultPolicyEnabled=!1,this.cspReportOnlyEnabled=!1,this.liveEnabled=!0,this.featureToggles={},this.anonymousEnabled=!1,this.licenseInfo={},this.rendererAvailable=!1,this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1,workloadIdentityEnabled:!1,userIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:"",alertStateHistoryBackend:void 0,alertStateHistoryPrimary:void 0},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.sqlConnectionLimits={maxOpenConns:100,maxIdleConns:100,connMaxLifetime:14400},this.disableFrontendSandboxForPlugins=[],this.bootData=c.bootData;const E={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,n.merge)(this,E,c),this.buildInfo=c.buildInfo||E.buildInfo,this.dateFormats&&l.U6.update(this.dateFormats),this.buildInfo.env==="development"&&m(this),g(this),this.featureToggles.disableAngular&&(this.angularSupportEnabled=!1),this.theme2=(0,r.j)(this.bootData.user.theme),this.bootData.user.lightTheme=this.theme2.isLight,this.theme=this.theme2.v1}}function g(f){const c=f.featureToggles,E="grafana.featureToggles",p=window.localStorage.getItem(E);if(p){const h=p.split(",");for(const y of h){const[s,v]=y.split("="),C=v==="true"||v==="1";c[s]=C,console.log(`Setting feature toggle ${s} = ${C} via localstorage`)}}}function m(f){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((E,p)=>{if(p.startsWith("__feature.")){const h=f.featureToggles,y=p.substring(10),s=E==="true"||E==="";s!==h[p]&&(h[y]=s,console.log(`Setting feature toggle ${y} = ${s} via url`))}})}const d=window.grafanaBootData||{settings:{},user:{},navTree:[]},u=d.settings;u.bootData=d;const i=new o(u)},90354:(J,R,e)=>{"use strict";e.r(R),e.d(R,{CopyPanelEvent:()=>i.EK,DataSourcePicker:()=>T.q,DataSourceWithBackend:()=>C.CK,EchoEventType:()=>o.ee,FakeEchoSrv:()=>o.rX,GrafanaBootConfig:()=>E.O,HealthCheckError:()=>C.ZA,HealthStatus:()=>C.QO,HistoryWrapper:()=>u._i,MetaAnalyticsEventName:()=>p.ct,PanelDataErrorView:()=>P.Z,PanelRenderer:()=>M.$,PluginPage:()=>I.T,RefreshEvent:()=>i.U5,StreamingFrameAction:()=>d.T0,SystemJS:()=>h.i3,ThemeChangedEvent:()=>i.hD,TimeRangeUpdatedEvent:()=>i.md,config:()=>E.config,createDataSourcePluginEventProperties:()=>O.i,createPluginEventProperties:()=>O.I,createQueryRunner:()=>S.AQ,featureEnabled:()=>s.v,frameToMetricFindValue:()=>D.S9,getAngularLoader:()=>a.w,getAppEvents:()=>i.N$,getBackendSrv:()=>n.i,getDataSourceSrv:()=>l.F,getEchoSrv:()=>o.RP,getGrafanaLiveSrv:()=>d.gj,getLegacyAngularInjector:()=>m.V,getLocationSrv:()=>r.w,getPluginComponentExtensions:()=>f.QK,getPluginExtensions:()=>f.I4,getPluginImportUtils:()=>h.bP,getPluginLinkExtensions:()=>f.dj,getRunRequest:()=>S.Pl,getTemplateSrv:()=>g.J,isExperimentViewEvent:()=>p.mR,isFetchError:()=>n.kW,isInteractionEvent:()=>p.fV,isPageviewEvent:()=>p.Si,isPluginExtensionComponent:()=>c.M,isPluginExtensionLink:()=>c.c,loadPluginCss:()=>h.iS,locationSearchToObject:()=>u.Ox,locationService:()=>u.E1,logDebug:()=>v.o7,logError:()=>v.H,logInfo:()=>v.PN,logWarning:()=>v.KE,navigationLogger:()=>u.GQ,registerEchoBackend:()=>o.e6,reportExperimentView:()=>y.SZ,reportInteraction:()=>y.ff,reportMetaAnalytics:()=>y.r_,reportPageview:()=>y.sm,setAngularLoader:()=>a.W,setAppEvents:()=>i.Xw,setBackendSrv:()=>n.jW,setDataSourceSrv:()=>l.w,setEchoSrv:()=>o.tz,setGrafanaLiveSrv:()=>d.cA,setLegacyAngularInjector:()=>m.t,setLocationService:()=>u.ZG,setLocationSrv:()=>r.x,setPluginExtensionGetter:()=>f.oI,setPluginImportUtils:()=>h.Qf,setQueryRunnerFactory:()=>S.pD,setRunRequest:()=>S.Iw,setTemplateSrv:()=>g.l,toDataQueryError:()=>x.P,toDataQueryResponse:()=>D.z1,usePluginInteractionReporter:()=>A.Q});var n=e(4148),a=e(52275),l=e(26205),r=e(66134),o=e(30281),g=e(79059),m=e(12384),d=e(16843),u=e(13601),i=e(77014),f=e(44076),c=e(64654),E=e(32688),p=e(4651),h=e(2292),y=e(72639),s=e(13475),v=e(54538),C=e(92743),D=e(4649),M=e(51103),P=e(30639),x=e(43882),S=e(14338),I=e(3799),T=e(39458),O=e(39060),A=e(32822)},52275:(J,R,e)=>{"use strict";e.d(R,{W:()=>a,w:()=>l});let n;function a(r){n=r}function l(){return n}},30281:(J,R,e)=>{"use strict";e.d(R,{RP:()=>r,e6:()=>o,ee:()=>n,rX:()=>g,tz:()=>l});var n=(m=>(m.Performance="performance",m.MetaAnalytics="meta-analytics",m.Pageview="pageview",m.Interaction="interaction",m.ExperimentView="experimentview",m.GrafanaJavascriptAgent="grafana-javascript-agent",m))(n||{});let a;function l(m){if(a instanceof g)for(const d of a.buffer)m.addEvent(d.event,d.meta);a=m}function r(){return a||(a=new g),a}const o=m=>{r().addBackend(m)};class g{constructor(){this.buffer=[]}flush(){this.buffer=[]}addBackend(d){}addEvent(d,u){this.buffer.push({event:d,meta:u})}}},13601:(J,R,e)=>{"use strict";e.d(R,{E1:()=>u,GQ:()=>c,Ox:()=>d,ZG:()=>i,_i:()=>m});var n=e(42801),a=e(69307),l=e(14255),r=e(42851),o=e(66841),g=e(32688);class m{constructor(p){this.history=p||n.lX({basename:g.config.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(p,h){const y=this.history.location,s=this.getSearchObject();for(const C of Object.keys(p))p[C]===null||p[C]===void 0?delete s[C]:s[C]=p[C];const v=a.Cj.renderUrl(y.pathname,s);h?this.history.replace(v,this.history.location.state):this.history.push(v,this.history.location.state)}push(p){this.history.push(p)}replace(p){this.history.replace(p)}reload(){const p=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:p?p+1:1}})}getLocation(){return this.history.location}getSearchObject(){return d(this.history.location.search)}update(p){if((0,l.d)("LocationSrv","update","partial, push or replace"),p.partial&&p.query)this.partial(p.query,p.partial);else{const h={pathname:p.path};p.query&&(h.search=a.Cj.toUrlParams(p.query)),p.replace?this.replace(h):this.push(h)}}}function d(E){let p=typeof E=="number"?String(E):E;return p.length>0?p.startsWith("?")?a.Cj.parseKeyValue(p.substring(1)):a.Cj.parseKeyValue(p):{}}let u=new m;const i=E=>{throw new Error("locationService can be only overriden in test environment")},f=(0,r.h)("Router"),c=f.logger;(0,o.x)("location",u,f)},66134:(J,R,e)=>{"use strict";e.d(R,{w:()=>l,x:()=>a});let n;function a(r){n=r}function l(){return n}},14338:(J,R,e)=>{"use strict";e.d(R,{AQ:()=>l,Iw:()=>o,Pl:()=>g,pD:()=>a});let n;const a=m=>{if(n)throw new Error("Runner should only be set when Grafana is starting.");n=m},l=()=>{if(!n)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return n()};let r;function o(m){if(r)throw new Error("runRequest function should only be set once, when Grafana is starting.");r=m}function g(){if(!r)throw new Error("getRunRequest can only be used after Grafana instance has started.");return r}},77014:(J,R,e)=>{"use strict";e.d(R,{EK:()=>o,N$:()=>d,U5:()=>a,Xw:()=>m,hD:()=>l,md:()=>r});var n=e(45276);class a extends n.m{}a.type="refresh";class l extends n.R{}l.type="theme-changed";class r extends n.R{}r.type="time-range-updated";class o extends n.R{}o.type="copy-panel";let g;function m(u){g=u}function d(){return g}},4148:(J,R,e)=>{"use strict";e.d(R,{i:()=>r,jW:()=>l,kW:()=>n});function n(o){return typeof o=="object"&&o!==null&&"status"in o&&"data"in o}let a;const l=o=>{a=o},r=()=>a},26205:(J,R,e)=>{"use strict";e.d(R,{F:()=>l,w:()=>a});let n;function a(r){n=r}function l(){return n}},12384:(J,R,e)=>{"use strict";e.d(R,{V:()=>l,t:()=>a});let n;const a=r=>{n=r},l=()=>n},16843:(J,R,e)=>{"use strict";e.d(R,{T0:()=>n.T0,cA:()=>l,gj:()=>r});var n=e(26058);let a;const l=o=>{a=o},r=()=>a},44076:(J,R,e)=>{"use strict";e.d(R,{I4:()=>o,QK:()=>m,dj:()=>g,oI:()=>l});var n=e(64654);let a;function l(d){if(a)throw new Error("setPluginExtensionGetter() function should only be called once, when Grafana is starting.");a=d}function r(){if(!a)throw new Error("getPluginExtensionGetter() can only be used after the Grafana instance has started.");return a}const o=d=>r()(d),g=d=>{const{extensions:u}=o(d);return{extensions:u.filter(n.c)}},m=d=>{const{extensions:u}=o(d);return{extensions:u.filter(n.M)}}},64654:(J,R,e)=>{"use strict";e.d(R,{M:()=>l,c:()=>a});var n=e(41175);function a(r){return r?r.type===n.D.link&&("path"in r||"onClick"in r):!1}function l(r){return r?r.type===n.D.component&&"component"in r:!1}},79059:(J,R,e)=>{"use strict";e.d(R,{J:()=>l,l:()=>a});let n;const a=r=>{n=r},l=()=>n},92743:(J,R,e)=>{"use strict";e.d(R,{CK:()=>x,hr:()=>v,ZA:()=>D,QO:()=>M,Pr:()=>C,PI:()=>I,B9:()=>S});var n=e(63302),a=e(31312),l=e(3195),r=e(61782),o=e(10752),g=e(54721),m=e(47635),d=e(48614),u=e(93313),i=e(20510),f=e(32688),c=e(26205),E=e(16843),p=e(4148),h=e(26058),y=e(4649);function s(T){const{intervalMs:O,maxDataPoints:A,requestId:B,panelId:b,queryCachingTTL:W,range:{from:V,to:w}}=T;if(!T.targets.length)return(0,n.of)({data:[]});const K={intervalMs:O,maxDataPoints:A,queryCachingTTL:W,timeRange:{from:V.valueOf().toString(),to:w.valueOf().toString(),timezone:T.timezone}};return(0,p.i)().fetch({url:`/api/public/dashboards/${f.config.publicDashboardAccessToken}/panels/${b}/query`,method:"POST",data:K,requestId:B}).pipe((0,r.w)(z=>(0,n.of)((0,y.z1)(z,T.targets))),(0,o.K)(z=>(0,n.of)((0,y.z1)(z))))}const v=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function C(T){if(!T)return!1;const O=typeof T=="string"?T:T.type;return O===v.type||O===v.name||O==="-100"}class D extends Error{constructor(O,A){super(O),this.details=A,this.name="HealthCheckError"}}var M=(T=>(T.Unknown="UNKNOWN",T.OK="OK",T.Error="ERROR",T))(M||{}),P=(T=>(T.PluginID="X-Plugin-Id",T.DatasourceUID="X-Datasource-Uid",T.DashboardUID="X-Dashboard-Uid",T.PanelID="X-Panel-Id",T.QueryGroupID="X-Query-Group-Id",T.FromExpression="X-Grafana-From-Expr",T))(P||{});class x extends g.MF{constructor(O){super(O),this.streamOptionsProvider=I}query(O){if(f.config.publicDashboardAccessToken)return s(O);const{intervalMs:A,maxDataPoints:B,queryCachingTTL:b,range:W,requestId:V,hideFromInspector:w=!1}=O;let K=O.targets;this.filterQuery&&(K=K.filter(Y=>this.filterQuery(Y)));let z=!1;const G=new Set,Q=new Set,j=K.map(Y=>{let Z=this.getRef(),ae=this.id,ce=!0;if(C(Y.datasource))return z=!0,{...Y,datasource:v};if(Y.datasource){const q=(0,c.F)().getInstanceSettings(Y.datasource,O.scopedVars);if(!q)throw new Error(`Unknown Datasource: ${JSON.stringify(Y.datasource)}`);const De=q.rawRef??(0,m.iU)(q),oe=q.id;(De.uid!==Z.uid||ae!==oe)&&(Z=De,ae=oe,ce=!1)}return Z.type?.length&&G.add(Z.type),Z.uid?.length&&Q.add(Z.uid),{...ce?this.applyTemplateVariables(Y,O.scopedVars,O.filters):Y,datasource:Z,datasourceId:ae,intervalMs:A,maxDataPoints:B,queryCachingTTL:b}});if(!j.length)return(0,n.of)({data:[]});const F={queries:j};if(W&&(F.from=W.from.valueOf().toString(),F.to=W.to.valueOf().toString()),f.config.featureToggles.queryOverLive)return(0,E.gj)().getQueryData({request:O,body:F});const k={};k["X-Plugin-Id"]=Array.from(G).join(", "),k["X-Datasource-Uid"]=Array.from(Q).join(", ");let _="/api/ds/query?ds_type="+this.type;return z&&(k["X-Grafana-From-Expr"]="true",_+="&expression=true"),V&&(_+=`&requestId=${V}`),O.dashboardUID&&(k["X-Dashboard-Uid"]=O.dashboardUID),O.panelId&&(k["X-Panel-Id"]=`${O.panelId}`),O.queryGroupId&&(k["X-Query-Group-Id"]=`${O.queryGroupId}`),(0,p.i)().fetch({url:_,method:"POST",data:F,requestId:V,hideFromInspector:w,headers:k}).pipe((0,r.w)(Y=>{const Z=(0,y.z1)(Y,j);return Z.data?.length&&Z.data.find(ae=>ae.meta?.channel)?S(Z,O,this.streamOptionsProvider):(0,n.of)(Z)}),(0,o.K)(Y=>(0,n.of)((0,y.z1)(Y))))}getRequestHeaders(){const O={};return O["X-Plugin-Id"]=this.type,O["X-Datasource-Uid"]=this.uid,O}interpolateVariablesInQueries(O,A,B){return O.map(b=>this.applyTemplateVariables(b,A,B))}applyTemplateVariables(O,A,B){return O}async getResource(O,A,B){const b=this.getRequestHeaders();return(await(0,a.n)((0,p.i)().fetch({...B,method:"GET",headers:B?.headers?{...B.headers,...b}:b,params:A??B?.params,url:`/api/datasources/uid/${this.uid}/resources/${O}`}))).data}async postResource(O,A,B){const b=this.getRequestHeaders();return(await(0,a.n)((0,p.i)().fetch({...B,method:"POST",headers:B?.headers?{...B.headers,...b}:b,data:A??{...A},url:`/api/datasources/uid/${this.uid}/resources/${O}`}))).data}async callHealthCheck(){return(0,a.n)((0,p.i)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(O=>O.data).catch(O=>O.data)}async testDatasource(){return this.callHealthCheck().then(O=>O.status==="OK"?{status:"success",message:O.message}:Promise.reject({status:"error",message:O.message,error:new D(O.message,O.details)}))}}function S(T,O,A){const B=(0,E.gj)();if(!B)return(0,n.of)(T);const b=[],W=[];for(const V of T.data){const w=(0,d.H7)(V.meta?.channel);if(w){const K=V;W.push(B.getDataStream({addr:w,buffer:A(O,K),frame:(0,u.Y)(V)}))}else b.push(V)}return b.length&&W.push((0,n.of)({...T,data:b})),W.length===1?W[0]:(0,l.T)(...W)}const I=(T,O)=>{const A={maxLength:T.maxDataPoints??500,action:h.T0.Append};return T.rangeRaw?.to==="now"&&(A.maxDelta=T.range.to.valueOf()-T.range.from.valueOf()),A};x=(0,i.s)(x)},13475:(J,R,e)=>{"use strict";e.d(R,{v:()=>a});var n=e(32688);const a=l=>{const{enabledFeatures:r}=n.config.licenseInfo;return r&&r[l]}},54538:(J,R,e)=>{"use strict";e.d(R,{H:()=>m,KE:()=>o,PN:()=>r,o7:()=>g});var n=e(60862),a=e(60450),l=e(32688);function r(d,u){l.config.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([d],{level:a.in.INFO,context:u})}function o(d,u){l.config.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([d],{level:a.in.WARN,context:u})}function g(d,u){l.config.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([d],{level:a.in.DEBUG,context:u})}function m(d,u){l.config.grafanaJavascriptAgent.enabled&&n.s.api.pushError(d)}},2292:(J,R,e)=>{"use strict";e.d(R,{Qf:()=>f,bP:()=>c,i3:()=>d,iS:()=>u});var n=e(62407),a=e.n(n),l=e(41226),r=e.n(l),o=e(15639),g=e.n(o),m=e(32688);const d=window.System;async function u(E){try{const p=m.config.bootData.user.theme==="light"?E.light:E.dark;return await d.import(p)}catch(p){console.error(p)}}let i;function f(E){if(i)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");i=E}function c(){if(!i)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return i}window.__grafana_amd_define=window.define,window.define=void 0},4649:(J,R,e)=>{"use strict";e.d(R,{S9:()=>f,z1:()=>m});var n=e(10694),a=e(93313),l=e(53305),r=e(89591),o=e(43882);const g={severity:"info",text:"Cached response"};function m(c,E){const p={data:[],state:n.Gu.Done},h="traceId"in c?c.traceId:void 0;if(h!=null&&(p.traceIds=[h]),c.data?.results){const y=c.data.results,s=E?.length?E.map(D=>D.refId):Object.keys(y),v=d(c),C=[];for(const D of s){const M=y[D];M&&(M.refId=D,C.push(M))}for(const D of C){if(D.error){const M={refId:D.refId,message:D.error,status:D.status};h!=null&&(M.traceId=h),p.error||(p.error={...M}),p.errors?p.errors.push({...M}):p.errors=[{...M}],p.state=n.Gu.Error}if(D.frames?.length){for(let M of D.frames){v&&(M=u(M));const P=(0,a.vP)(M);P.refId||(P.refId=D.refId),p.data.push(P)}continue}if(D.series?.length)for(const M of D.series)M.refId||(M.refId=D.refId),p.data.push((0,l.g0)(M));if(D.tables?.length)for(const M of D.tables)M.refId||(M.refId=D.refId),p.data.push((0,l.g0)(M))}}return c.status&&c.status!==200&&(p.state!==n.Gu.Error&&(p.state=n.Gu.Error),p.error||(p.error=(0,o.P)(c))),p}function d(c){const E=c?.headers;return!E||!E.get?!1:E.get("X-Cache")==="HIT"}function u(c){return{...c,schema:{...c.schema,fields:[...c.schema?.fields??[]],meta:{...c.schema?.meta,notices:[...c.schema?.meta?.notices??[],g],isCachedResponse:!0}}}}function i(c){const E=m(c);if(E.error?.data?.message)return{status:"error",message:E.error.data.message,details:E.error?.data?.error?{message:E.error.data.error}:void 0};if(E.error?.refId&&E.error?.message)return{status:"error",message:E.error.message};throw c}function f(c){if(!c||!c.length)return[];const E=[];let p=c.fields.find(h=>h.type===r.fS.string);if(p||(p=c.fields.find(h=>h.type!==r.fS.time)),p)for(let h=0;h<p.values.length;h++)E.push({text:""+p.values[h]});return E}},33155:(J,R,e)=>{"use strict";e.d(R,{b:()=>u});var n=e(41407),a=e(39953),l=e(28888),r=e(82803),o=e(4919),g=e(12190),m=e(71974),d=e(98632);const u=a.forwardRef(({title:c,onRemove:E,children:p,buttonContent:h,elevated:y,bottomSpacing:s,topSpacing:v,className:C,severity:D="error",...M},P)=>{const x=(0,r.l4)(),I=f(x,D,!!c,y,s,v),T={error:"alert",warning:"alert",info:"status",success:"status"},O=M.role||T[D],A=M["aria-label"]||c;return a.createElement("div",{ref:P,className:(0,n.cx)(I.wrapper,C),"data-testid":l.wl.components.Alert.alertV2(D),role:O,"aria-label":A,...M},a.createElement(m.x,{display:"flex",backgroundColor:D,borderRadius:"default",paddingY:1,paddingX:2,borderStyle:"solid",borderColor:D,alignItems:"stretch",boxShadow:y?"z3":void 0},a.createElement(m.x,{paddingTop:1,paddingRight:2},a.createElement("div",{className:I.icon},a.createElement(g.J,{size:"xl",name:i(D)}))),a.createElement(m.x,{paddingY:1,grow:1},a.createElement(d.x,{weight:"medium"},c),p&&a.createElement("div",{className:I.content},p)),E&&!h&&a.createElement("div",{className:I.close},a.createElement(o.zx,{"aria-label":"Close alert",icon:"times",onClick:E,type:"button",fill:"text",variant:"secondary"})),E&&h&&a.createElement(m.x,{marginLeft:1,display:"flex",alignItems:"center"},a.createElement(o.zx,{"aria-label":"Close alert",variant:"secondary",onClick:E,type:"button"},h))))});u.displayName="Alert";const i=c=>{switch(c){case"error":return"exclamation-circle";case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},f=(c,E,p,h,y,s)=>{const v=c.colors[E];return{wrapper:(0,n.css)({flexGrow:1,marginBottom:c.spacing(y??2),marginTop:c.spacing(s??0),position:"relative","&:before":{content:'""',position:"absolute",top:0,left:0,bottom:0,right:0,background:c.colors.background.primary,zIndex:-1}}),icon:(0,n.css)({color:v.text}),content:(0,n.css)({paddingTop:p?c.spacing(.5):0,maxHeight:"50vh",overflowY:"auto"}),close:(0,n.css)({position:"relative",color:c.colors.text.secondary,background:"none",display:"flex",top:"-6px",right:"-14px"})}}},63528:(J,R,e)=>{"use strict";e.d(R,{h:()=>E});var n=e(41407),a=e(86832),l=e(39953),r=e(82803),o=e(96227),g=e(99560);const m=l.memo(()=>{const h=(0,r.wW)(d);return l.createElement("div",{className:h.ellipsis},l.createElement("span",{className:h.firstDot},"."),l.createElement("span",{className:h.secondDot},"."),l.createElement("span",{className:h.thirdDot},"."))});m.displayName="EllipsisAnimated";const d=()=>({ellipsis:(0,n.css)({display:"inline"}),firstDot:(0,n.css)({animation:`${u} 2s linear infinite`}),secondDot:(0,n.css)({animation:`${i} 2s linear infinite`}),thirdDot:(0,n.css)({animation:`${f} 2s linear infinite`})}),u=(0,n.keyframes)`
  0% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,i=(0,n.keyframes)`
  0% {
    opacity: 0;
  }
  21% {
    opacity: 0.5;
  }
  22% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,f=(0,n.keyframes)`
  0% {
    opacity: 0;
  }
  43% {
    opacity: 0.5;
  }
  44% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,c=2*1e3;function E(h){const{invalid:y,loading:s,onFinishChange:v,saveErrorMessage:C="Error saving this value",error:D,children:M,disabled:P,...x}=h,[S,I]=l.useState({isLoading:!1,showSuccess:!1,showError:y}),T=(0,l.useRef)(null);l.useEffect(()=>{let W;if(S.showSuccess){const V=S.showError?0:c;W=setTimeout(()=>{I({...S,showSuccess:!1})},V)}return()=>{window.clearTimeout(W)}},[S]);const O=(0,l.useCallback)(W=>{y||(I({...S,isLoading:!0,showSuccess:!1}),v(W).then(()=>{I({isLoading:!1,showSuccess:!0,showError:!1})}).catch(()=>{I({...S,isLoading:!1,showError:!0})}))},[y,S,v]),A=(0,l.useMemo)(()=>(0,a.debounce)(O,600,{leading:!1}),[O]),B=y||S.showError||void 0,b=(0,r.wW)(p);return l.createElement(l.Fragment,null,l.createElement(o.g,{...x,loading:s||void 0,invalid:B,disabled:P,error:D||S.showError&&C,ref:T,className:b.widthFitContent},l.cloneElement(M(W=>{A(W)}))),S.isLoading&&l.createElement(g.K,{referenceElement:T.current,placement:"right",alternativePlacement:"bottom"},"Saving ",l.createElement(m,null)),S.showSuccess&&l.createElement(g.K,{suffixIcon:"check",referenceElement:T.current,placement:"right",alternativePlacement:"bottom"},"Saved!"))}E.displayName="AutoSaveField";const p=()=>({widthFitContent:(0,n.css)({width:"fit-content"})})},12608:(J,R,e)=>{"use strict";e.d(R,{C:()=>m});var n=e(41407),a=e(39953),l=e(63374),r=e(82803),o=e(12190),g=e(69865);const m=a.memo(({icon:u,color:i,text:f,tooltip:c,className:E,...p})=>{const h=(0,r.wW)(d,i),y=a.createElement("div",{className:(0,n.cx)(h.wrapper,E),...p},u&&a.createElement(o.J,{name:u,size:"sm"}),f);return c?a.createElement(g.u,{content:c,placement:"auto"},y):y});m.displayName="Badge";const d=(u,i)=>{let f=u.visualization.getColorByName(i),c="",E="",p="";return u.isDark?(E=(0,l.Z)(f).setAlpha(.15).toString(),c=(0,l.Z)(f).setAlpha(.25).toString(),p=(0,l.Z)(f).lighten(15).toString()):(E=(0,l.Z)(f).setAlpha(.15).toString(),c=(0,l.Z)(f).setAlpha(.25).toString(),p=(0,l.Z)(f).darken(20).toString()),{wrapper:(0,n.css)({display:"inline-flex",padding:"1px 4px",borderRadius:u.shape.radius.default,background:E,border:`1px solid ${c}`,color:p,fontWeight:u.typography.fontWeightRegular,gap:"2px",fontSize:u.typography.bodySmall.fontSize,lineHeight:u.typography.bodySmall.lineHeight,alignItems:"center"})}}},24300:(J,R,e)=>{"use strict";e.d(R,{xf:()=>M});var n=e(41407),a=e(39953),l=e(63374),r=e(35664),o=e(64943),g=e(60695),m=e(83502),d=e(97898),u=e(73254),i=e(28888),f=e(34547),c=e(76297),E=e(4919),p=e(6430);const h=18,y=50,s=150,v=1.5,C=1,D=10;class M extends a.PureComponent{render(){const{onClick:w,className:K,theme:z}=this.props,{title:G}=this.props.value,Q=S(this.props);return w?a.createElement("button",{type:"button",style:Q.wrapper,onClick:w,className:(0,n.cx)((0,E.gN)(z),K)},a.createElement("div",{style:Q.title},G),this.renderBarAndValue()):a.createElement("div",{style:Q.wrapper,className:K},G&&a.createElement("div",{style:Q.title},G),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:w,showUnfilled:K,valueDisplayMode:z}=this.props,G=A(this.props);return a.createElement("div",{style:G.wrapper},z!==f.M8.Hidden&&a.createElement(p.W,{"data-testid":i.wl.components.Panels.Visualization.BarGauge.valueV2,value:w,style:G.value}),K&&a.createElement("div",{style:G.emptyBar}),a.createElement("div",{style:G.bar}))}renderRetroBars(){const{display:w,field:K,value:z,itemSpacing:G,alignmentFactors:Q,orientation:j,lcdCellWidth:F,text:k,valueDisplayMode:_,theme:Y}=this.props,{valueHeight:Z,valueWidth:ae,maxBarHeight:ce,maxBarWidth:q,wrapperWidth:De,wrapperHeight:oe}=I(this.props),te=K.min??r.Hx,fe=K.max??r.Z3,Te=P(j),ge=fe-te,he=Te?ce:q,me=G,ye=Math.floor(he/F),ue=Math.floor((he-me*ye)/ye),Oe=b(this.props),at=W(Q||z,Oe,ae,Z,j,k),Ne={width:`${De}px`,height:`${oe}px`,display:"flex"};Te?(Ne.flexDirection="column-reverse",Ne.alignItems="center"):(Ne.flexDirection="row",Ne.alignItems="center",at.justifyContent="flex-end");const _e=[];for(let Ke=0;Ke<ye;Ke++){const et=te+ge/ye*Ke,ze=T(et,z,w),je={borderRadius:Y.shape.radius.default};ze.isLit?je.backgroundImage=`radial-gradient(${ze.background} 10%, ${ze.backgroundShade})`:je.backgroundColor=ze.background,Te?(je.height=`${ue}px`,je.width=`${q}px`,je.marginTop=`${me}px`):(je.width=`${ue}px`,je.height=`${ce}px`,je.marginRight=`${me}px`),_e.push(a.createElement("div",{key:Ke.toString(),style:je}))}return a.createElement("div",{style:Ne},_e,_!==f.M8.Hidden&&a.createElement(p.W,{"data-testid":i.wl.components.Panels.Visualization.BarGauge.valueV2,value:z,style:at}))}}M.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:f.QH.Gradient,orientation:o.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:g.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function P(V){return V===o.wm.Vertical}function x(V){const{height:w,width:K,alignmentFactors:z,orientation:G,text:Q,namePlacement:j}=V,F=z?z.title:V.value.title;if(!F)return{fontSize:0,width:0,height:0,placement:"above"};if(P(G)){const q=Q?.titleSize??14;return{fontSize:q,width:K,height:q*v,placement:"below"}}if(w>40&&j===f.L3.Auto||j===f.L3.Top){if(Q?.titleSize)return{fontSize:Q?.titleSize,width:0,height:Q.titleSize*v,placement:"above"};const De=Math.max(Math.min(w*.45,y),17);return{fontSize:De/v,width:0,height:De,placement:"above"}}const Z=Math.max(w*.6,h)/v,ae=(0,c.X1)(F,Z),ce=Math.min(ae.width+15,K*.4);return{fontSize:Q?.titleSize??Z,height:0,width:ce,placement:"left"}}function S(V){const w={display:"flex",overflow:"hidden",width:"100%"},K=x(V),z={fontSize:`${K.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return P(V.orientation)?(w.flexDirection="column-reverse",z.textAlign="center"):K.placement==="above"?w.flexDirection="column":(w.flexDirection="row",z.width=`${K.width}px`,z.textAlign="right",z.paddingRight="10px"),{wrapper:w,title:z}}function I(V){const{height:w,width:K,orientation:z,text:G,alignmentFactors:Q,valueDisplayMode:j}=V,F=x(V),k=Q??V.value,_=(0,m.zc)(k);let Y=0,Z=0,ae=0,ce=0,q=0,De=0;const oe=G?.valueSize??Math.max(F.fontSize,12),fe=(0,c.X1)(_,oe).width+D*2;return P(z)?(G?.valueSize?ae=G.valueSize*C:ae=Math.min(Math.max(w*.1,h),y),ce=K,j===f.M8.Hidden&&(ae=0,ce=0),Y=w-(F.height+ae),Z=K,q=K,De=w-F.height):(j===f.M8.Hidden?(ae=0,ce=0):(ae=w-F.height,ce=Math.max(Math.min(K*.2,s),fe)),Y=w-F.height,Z=K-ce-F.width,F.placement==="above"?(q=K,De=w-F.height):(q=K-F.width,De=w)),{valueWidth:ce,valueHeight:ae,maxBarWidth:Z,maxBarHeight:Y,wrapperHeight:De,wrapperWidth:q}}function T(V,w,K){if(V===null)return{background:d.R,border:d.R};const z=K?K(V).color:null;return z?w===null||isNaN(w.numeric)||V!==null&&V>w.numeric?{background:(0,l.Z)(z).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,l.Z)(z).setAlpha(.95).toRgbString(),backgroundShade:(0,l.Z)(z).setAlpha(.55).toRgbString(),border:(0,l.Z)(z).setAlpha(.9).toRgbString(),isLit:!0}:{background:d.R,border:d.R}}function O(V,w,K){const z=Math.min((V-w)/(K-w),1);return isNaN(z)?0:z}function A(V){const{displayMode:w,field:K,value:z,alignmentFactors:G,orientation:Q,theme:j,text:F}=V,{valueWidth:k,valueHeight:_,maxBarHeight:Y,maxBarWidth:Z}=I(V),ae=K.min??r.Hx,ce=K.max??r.Z3,q=O(z.numeric,ae,ce),De=b(V),oe=z.color??d.R,fe=W(G||z,De,k,_,Q,F),Te=w==="basic",ge={display:"flex",flexGrow:1},he={borderRadius:j.shape.radius.default,position:"relative",zIndex:1},me={background:j.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:j.shape.radius.default,position:"relative"};if(P(Q)){const ye=Math.max(q*Y,1);ge.flexDirection="column",ge.justifyContent="flex-end",he.transition="height 1s",he.height=`${ye}px`,he.width=`${Z}px`,me.bottom="-3px",me.width=`${k}px`,Te?(he.background=`${(0,l.Z)(oe).setAlpha(.35).toRgbString()}`,he.borderTop=`2px solid ${oe}`):he.background=B(V,Y)}else{const ye=Math.max(q*Z,1);ge.flexDirection="row-reverse",ge.justifyContent="flex-end",ge.alignItems="stretch",he.transition="width 1s",he.height=`${Y}px`,he.width=`${ye}px`,me.left="-3px",me.height=`${_}px`,Te?(he.background=`${(0,l.Z)(oe).setAlpha(.35).toRgbString()}`,he.borderRight=`2px solid ${oe}`):he.background=B(V,Z)}return{wrapper:ge,bar:he,value:fe,emptyBar:me}}function B(V,w){const{field:K,value:z,orientation:G,theme:Q}=V,j=P(G)?"0deg":"90deg",F=K.min,k=K.max;let _="",Y=0,Z=(0,u.QY)(K.color?.mode);if(Z.id===d.S.Thresholds){const ae=K.thresholds;for(let ce=0;ce<ae.steps.length;ce++){const q=ae.steps[ce],De=V.theme.visualization.getColorByName(q.color),oe=ae.mode===g.H.Percentage?q.value/100:O(q.value,F,k),te=oe*w,fe=Math.round(te-(te-Y)/2),Te=ae.mode===g.H.Percentage?F+(k-F)*oe:q.value;if(_==="")_=`linear-gradient(${j}, ${De}, ${De}`;else{if(z.numeric<Te)break;Y=te,_+=` ${fe}px, ${De}`}}return _+")"}if(Z.isContinuous&&Z.getColors){const ae=Z.getColors(Q);for(let ce=0;ce<ae.length;ce++){const q=ae[ce];if(_==="")_=`linear-gradient(${j}, ${q} 0px`;else{const oe=ce/(ae.length-1)*w;_+=`, ${q} ${oe}px`}}return _+")"}return z.color??d.R}function b(V){if(V.valueDisplayMode==="text")return V.theme.colors.text.primary;const{value:w}=V;return w.color?w.color:d.R}function W(V,w,K,z,G,Q){const j={color:w,height:`${z}px`,width:`${K}px`,display:"flex",alignItems:"center",lineHeight:C};let F=K;const k=(0,m.zc)(V);return P(G)?(j.fontSize=Q?.valueSize??(0,c.MX)(k,F,z,C),j.justifyContent="center"):(j.fontSize=Q?.valueSize??(0,c.MX)(k,F-D*2,z,C),j.justifyContent="flex-end",j.paddingLeft=`${D}px`,j.paddingRight=`${D}px`,F-=D),j}},26753:(J,R,e)=>{"use strict";e.d(R,{w6:()=>A,pc:()=>S,IG:()=>I,ap:()=>T,jG:()=>O});var n=e(41407),a=e(39953),l=e(4919),r=e(6430),o=e(63374),g=e(64943),m=e(89591),d=e(83502),u=e(34547),i=e(14312),f=e(76297),c=e(52542);const E=1.2,p=30,h=500;class y{constructor(b){this.props=b;const{width:W,height:V,value:w,text:K}=b;this.valueColor=w.color??"gray",this.panelPadding=V>100?12:8,this.textValues=x(b),this.justifyCenter=P(b.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=W-this.panelPadding*2,this.maxTextHeight=V-this.panelPadding*2,K&&(K.titleSize&&(this.titleFontSize=K.titleSize,this.titleToAlignTo=void 0),K.valueSize&&(this.valueFontSize=K.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const b={fontSize:`${this.titleFontSize}px`,lineHeight:E};return this.props.parentOrientation===g.wm.Horizontal&&this.justifyCenter&&(b.paddingRight="0.75ch"),(this.props.colorMode===S.Background||this.props.colorMode===S.BackgroundSolid)&&(b.color=(0,i.bM)(this.valueColor,this.props.theme.isDark)),b}getValueStyles(){const b={fontSize:this.valueFontSize,fontWeight:h,lineHeight:E,position:"relative",zIndex:1};switch(this.justifyCenter&&(b.textAlign="center"),this.props.colorMode){case S.Value:b.color=this.valueColor;break;case S.Background:case S.BackgroundSolid:b.color=(0,i.bM)(this.valueColor,this.props.theme.isDark);break;case S.None:b.color=this.props.theme.colors.text.primary;break}return b}getValueAndTitleContainerStyles(){const b={display:"flex"};return this.justifyCenter&&(b.alignItems="center",b.justifyContent="center",b.flexGrow=1),b}getPanelStyles(){const{width:b,height:W,theme:V,colorMode:w}=this.props,K={width:`${b}px`,height:`${W}px`,padding:`${this.panelPadding}px`,borderRadius:V.shape.radius.default,position:"relative",display:"flex"},z=V.isDark?1:-.7;switch(w){case S.Background:const G=(0,o.Z)(this.valueColor).darken(15*z).spin(8).toRgbString(),Q=(0,o.Z)(this.valueColor).darken(5*z).spin(-8).toRgbString();K.background=`linear-gradient(120deg, ${G}, ${Q})`;break;case S.BackgroundSolid:K.background=(0,o.Z)(this.valueColor).toString();break;case S.Value:K.background="transparent";break}return this.justifyCenter&&(K.alignItems="center",K.flexDirection="row"),K}renderChart(){const{sparkline:b,colorMode:W}=this.props;if(!b||b.y?.type!==m.fS.number)return null;let V,w;switch(W){case S.Background:case S.BackgroundSolid:V="rgba(255,255,255,0.4)",w=(0,o.Z)(this.valueColor).brighten(40).toRgbString();break;case S.None:case S.Value:default:w=this.valueColor,V=(0,o.Z)(this.valueColor).setAlpha(.2).toRgbString();break}const K={custom:{drawStyle:u.l8.Line,lineWidth:1,fillColor:V,lineColor:w}};return a.createElement("div",{style:this.getChartStyles()},a.createElement(c.b,{height:this.chartHeight,width:this.chartWidth,sparkline:b,config:K,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class s extends y{constructor(b){super(b);const W=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,f.MX)(this.valueToAlignTo,this.maxTextWidth*W,this.maxTextHeight,E,void 0,h)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,f.MX)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,E,p),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const b=super.getValueAndTitleContainerStyles();return b.flexDirection="row",b.alignItems="center",b.flexGrow=1,this.justifyCenter||(b.justifyContent="space-between"),b}renderChart(){return null}getPanelStyles(){const b=super.getPanelStyles();return b.alignItems="center",b}}class v extends y{constructor(b){super(b);const{width:W,height:V}=b,w=.5,K=.6,z=1-K,G=.4;this.chartWidth=W,this.chartHeight=V*w,this.titleToAlignTo?.length&&(this.titleFontSize=(0,f.MX)(this.titleToAlignTo,this.maxTextWidth*K,this.maxTextHeight*G,E,p)),this.valueToAlignTo.length&&(this.valueFontSize=(0,f.MX)(this.valueToAlignTo,this.maxTextWidth*z,this.maxTextHeight*w,E,void 0,h))}getValueAndTitleContainerStyles(){const b=super.getValueAndTitleContainerStyles();return b.flexDirection="row",b.flexGrow=1,this.justifyCenter||(b.justifyContent="space-between"),b}getPanelStyles(){const b=super.getPanelStyles();return b.flexDirection="row",b.justifyContent="space-between",b}}class C extends y{constructor(b){super(b);const{width:W,height:V}=b,w=.15,K=.25;let z=0;this.chartHeight=V*K,this.chartWidth=W,this.titleToAlignTo?.length&&(this.titleFontSize=(0,f.MX)(this.titleToAlignTo,this.maxTextWidth,V*w,E,p),z=this.titleFontSize*E),this.valueToAlignTo.length&&(this.valueFontSize=(0,f.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-z,E,void 0,h)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=V-this.titleFontSize*E-this.valueFontSize*E}getValueAndTitleContainerStyles(){const b=super.getValueAndTitleContainerStyles();return b.flexDirection="column",b.justifyContent="center",b}getPanelStyles(){const b=super.getPanelStyles();return b.flexDirection="column",b}}class D extends y{constructor(b){super(b);const{height:W}=b,V=.15;let w=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,f.MX)(this.titleToAlignTo,this.maxTextWidth,W*V,E,p),w=this.titleFontSize*E),this.valueToAlignTo.length&&(this.valueFontSize=(0,f.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-w,E,void 0,h)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const b=super.getValueAndTitleContainerStyles();return b.flexDirection="column",b.flexGrow=1,b}renderChart(){return null}getPanelStyles(){const b=super.getPanelStyles();return b.alignItems="center",b}}function M(B){const{width:b,height:W,sparkline:V}=B;return b/W>2.5&&!B.disableWideLayout?W>50&&V&&V.y.values.length>1?new v(B):new s(B):W>100&&V&&V.y.values.length>1?new C(B):new D(B)}function P(B,b){return B===T.Center?!0:(b??"").length===0}function x(B){const{value:b,alignmentFactors:W,count:V}=B;let{textMode:w}=B;const K=W?W.title:b.title,z=(0,d.zc)(W||b);switch(w===O.Auto&&(V??1)===1&&(w=O.Value),w){case O.Name:return{...b,title:void 0,prefix:void 0,suffix:void 0,text:b.title||"",titleToAlignTo:void 0,valueToAlignTo:K??"",tooltip:(0,d.zc)(b)};case O.Value:return{...b,title:void 0,titleToAlignTo:void 0,valueToAlignTo:z,tooltip:b.title};case O.None:return{numeric:b.numeric,color:b.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${b.title}
Value: ${(0,d.zc)(b)}`};case O.ValueAndName:default:return{...b,titleToAlignTo:K,valueToAlignTo:z}}}var S=(B=>(B.Background="background",B.BackgroundSolid="background_solid",B.None="none",B.Value="value",B))(S||{}),I=(B=>(B.None="none",B.Line="line",B.Area="area",B))(I||{}),T=(B=>(B.Auto="auto",B.Center="center",B))(T||{}),O=(B=>(B.Auto="auto",B.Value="value",B.ValueAndName="value_and_name",B.Name="name",B.None="none",B))(O||{});class A extends a.PureComponent{render(){const{onClick:b,className:W,hasLinks:V,theme:w}=this.props,K=M(this.props),z=K.getPanelStyles(),G=K.getValueAndTitleContainerStyles(),Q=K.getValueStyles(),j=K.getTitleStyles(),F=K.textValues,k=V?void 0:F.tooltip;return b?a.createElement("button",{type:"button",className:(0,n.cx)((0,l.gN)(w),W),style:z,onClick:b,title:k},a.createElement("div",{style:G},F.title&&a.createElement("div",{style:j},F.title),a.createElement(r.W,{value:F,style:Q})),K.renderChart()):a.createElement("div",{className:W,style:z,title:k},a.createElement("div",{style:G},F.title&&a.createElement("div",{style:j},F.title),a.createElement(r.W,{value:F,style:Q})),K.renderChart())}}A.defaultProps={justifyMode:"auto"}},52499:(J,R,e)=>{"use strict";e.d(R,{_:()=>m});var n=e(41407),a=e(39953),l=e(90135),r=e.n(l),o=e(82803),g=e(93021);const m=(0,a.forwardRef)(({name:u,value:i,hidden:f,facets:c,onClick:E,className:p,loading:h,searchTerm:y,active:s,style:v,title:C,highlightParts:D,...M},P)=>{const x=(0,o.l4)(),S=d(x),I=y?[y]:[],T=(0,a.useCallback)(A=>{E&&!f&&E(u,i,A)},[E,u,f,i]);let O=i||u;return c&&(O=`${O} (${c})`),a.createElement("button",{key:O,ref:P,onClick:T,style:v,title:C||O,type:"button",role:"option","aria-selected":!!s,className:(0,n.cx)(S.base,s&&S.active,h&&S.loading,f&&S.hidden,p,E&&!f&&S.hover),...M},D!==void 0?a.createElement(g.H,{text:O,highlightClassName:S.matchHighLight,highlightParts:D}):a.createElement(r(),{textToHighlight:O,searchWords:I,autoEscape:!0,highlightClassName:S.matchHighLight}))});m.displayName="Label";const d=u=>({base:(0,n.css)({display:"inline-block",cursor:"pointer",fontSize:u.typography.size.sm,lineHeight:u.typography.bodySmall.lineHeight,backgroundColor:u.colors.background.secondary,color:u.colors.text.primary,whiteSpace:"nowrap",textShadow:"none",padding:u.spacing(.5),borderRadius:u.shape.radius.default,border:"none",marginRight:u.spacing(1),marginBottom:u.spacing(.5)}),loading:(0,n.css)({fontWeight:u.typography.fontWeightMedium,backgroundColor:u.colors.primary.shade,color:u.colors.text.primary,animation:"pulse 3s ease-out 0s infinite normal forwards","@keyframes pulse":{"0%":{color:u.colors.text.primary},"50%":{color:u.colors.text.secondary},"100%":{color:u.colors.text.disabled}}}),active:(0,n.css)({fontWeight:u.typography.fontWeightMedium,backgroundColor:u.colors.primary.main,color:u.colors.primary.contrastText}),matchHighLight:(0,n.css)({background:"inherit",color:u.components.textHighlight.text,backgroundColor:u.components.textHighlight.background}),hidden:(0,n.css)({opacity:.6,cursor:"default",border:"1px solid transparent"}),hover:(0,n.css)({["&:hover"]:{opacity:.85,cursor:"pointer"}})})},4919:(J,R,e)=>{"use strict";e.d(R,{Qj:()=>f,_7:()=>s,c9:()=>h,fW:()=>c,gN:()=>y,zx:()=>i});var n=e(41407),a=e(39953),l=e(82803),r=e(53039),o=e(15530),g=e(12190),m=e(69865);const d=null,u=null,i=a.forwardRef(({variant:v="primary",size:C="md",fill:D="solid",icon:M,fullWidth:P,children:x,className:S,type:I="button",tooltip:T,tooltipPlacement:O,...A},B)=>{const b=(0,l.l4)(),W=c({theme:b,size:C,variant:v,fill:D,fullWidth:P,iconOnly:!x}),V=a.createElement("button",{className:(0,n.cx)(W.button,S),type:I,...A,ref:T?void 0:B},M&&a.createElement(g.J,{name:M,size:C,className:W.icon}),x&&a.createElement("span",{className:W.content},x));return T?a.createElement(m.u,{ref:B,content:T,placement:O},V):V});i.displayName="Button";const f=a.forwardRef(({variant:v="primary",size:C="md",fill:D="solid",icon:M,fullWidth:P,children:x,className:S,onBlur:I,onFocus:T,disabled:O,tooltip:A,tooltipPlacement:B,...b},W)=>{const V=(0,l.l4)(),w=c({theme:V,fullWidth:P,size:C,variant:v,fill:D,iconOnly:!x}),K=(0,n.cx)(w.button,{[(0,n.css)(w.disabled,{pointerEvents:"none"})]:O},S),z=a.createElement("a",{className:K,...b,tabIndex:O?-1:0,"aria-disabled":O,ref:A?void 0:W},M&&a.createElement(g.J,{name:M,size:C,className:w.icon}),x&&a.createElement("span",{className:w.content},x));return A?a.createElement(m.u,{ref:W,content:A,placement:B},z):z});f.displayName="LinkButton";const c=v=>{const{theme:C,variant:D,fill:M="solid",size:P,iconOnly:x,fullWidth:S}=v,{height:I,padding:T,fontSize:O}=(0,o.iL)(P,C),A=h(C,D,M),B=p(C,D,M),b=(0,r.getFocusStyles)(C),W=C.spacing.gridSize*T-1;return{button:(0,n.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:O,fontWeight:C.typography.fontWeightMedium,fontFamily:C.typography.fontFamily,padding:`0 ${W}px`,height:C.spacing(I),lineHeight:`${C.spacing.gridSize*I-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:C.shape.radius.default,"&:focus":b,"&:focus-visible":b,"&:focus:not(:focus-visible)":(0,r.getMouseFocusStyles)(C),...S&&{flexGrow:1,justifyContent:"center"},...A,":disabled":B,"&[disabled]":B}),disabled:(0,n.css)(B),img:(0,n.css)({width:"16px",height:"16px",margin:C.spacing(0,1,0,.5)}),icon:x?(0,n.css)({marginRight:C.spacing(-T/2),marginLeft:C.spacing(-T/2)}):(0,n.css)({marginRight:C.spacing(T/2)}),content:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",height:"100%"})}};function E(v,C,D){let M=C.border,P="transparent",x="transparent";return C.name==="secondary"&&(P=C.border,x=v.colors.emphasize(C.border,.25),M=v.colors.border.strong),D==="outline"?{background:"transparent",color:C.text,border:`1px solid ${M}`,transition:v.transitions.create(["background-color","border-color","color"],{duration:v.transitions.duration.short}),"&:hover":{background:C.transparent,borderColor:v.colors.emphasize(M,.25),color:C.text}}:D==="text"?{background:"transparent",color:C.text,border:"1px solid transparent",transition:v.transitions.create(["background-color","color"],{duration:v.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:C.transparent,textDecoration:"none"}}:{background:C.main,color:C.contrastText,border:`1px solid ${P}`,transition:v.transitions.create(["background-color","box-shadow","border-color","color"],{duration:v.transitions.duration.short}),"&:hover":{background:C.shade,color:C.contrastText,boxShadow:v.shadows.z1,borderColor:x}}}function p(v,C,D){const M={cursor:"not-allowed",boxShadow:"none",color:v.colors.text.disabled,transition:"none"};return D==="text"?{...M,background:"transparent",border:"1px solid transparent"}:D==="outline"?{...M,background:"transparent",border:`1px solid ${v.colors.border.weak}`}:{...M,background:v.colors.action.disabledBackground,border:"1px solid transparent"}}function h(v,C,D){switch(C){case"secondary":return E(v,v.colors.secondary,D);case"destructive":return E(v,v.colors.error,D);case"success":return E(v,v.colors.success,D);case"primary":default:return E(v,v.colors.primary,D)}}const y=v=>(0,n.css)({background:"transparent",color:v.colors.text.primary,border:"none",padding:0}),s=v=>(0,n.css)({background:"transparent",border:"none",padding:0,fontFamily:"inherit",color:"inherit",height:"100%","&:hover":{background:"transparent",color:"inherit"}})},48824:(J,R,e)=>{"use strict";e.d(R,{h:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=(0,a.forwardRef)(({className:g,children:m,...d},u)=>{const i=(0,l.wW)(o);return a.createElement("div",{ref:u,className:(0,n.cx)("button-group",i.wrapper,g),...d},m)});r.displayName="ButtonGroup";const o=g=>({wrapper:(0,n.css)({display:"flex","> .button-group:not(:first-child) > button, > button:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"> .button-group:not(:last-child) > button, > button:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRightWidth:0}})})},95502:(J,R,e)=>{"use strict";e.d(R,{f:()=>r});var n=e(41407),a=e(39953),l=e(64084);const r=({className:g,children:m})=>{const d=o();return a.createElement("div",{className:(0,n.cx)(d,g)},m)},o=(0,l.B)(()=>(0,n.css)({display:"flex",button:{flexGrow:1,justifyContent:"center"},"> *":{flexGrow:1},label:{flexGrow:1,textAlign:"center"}}))},97725:(J,R,e)=>{"use strict";e.d(R,{O:()=>i});var n=e(41407),a=e(21499),l=e(39953),r=e(64084),o=e(82803),g=e(4919),m=e(62427),d=e(12190);const u=(0,r.B)(f=>({popup:(0,n.css)({label:"popup",zIndex:f.zIndex.dropdown}),icons:{right:(0,n.css)({margin:"1px 0 0 4px"}),left:(0,n.css)({margin:"-1px 4px 0 0"})}})),i=f=>{const{onChange:c,className:E,loadData:p,icon:h,buttonProps:y,hideDownIcon:s,variant:v,disabled:C,...D}=f,M=(0,o.l4)(),P=u(M);let x=f.children;return s||(x=[f.children,l.createElement(d.J,{key:"down-icon",name:"angle-down",className:P.icons.right})]),l.createElement(a.Z,{onChange:(0,m.K)(c),loadData:(0,m.p)(p),dropdownClassName:P.popup,...D,expandIcon:null},l.createElement(g.zx,{icon:h,disabled:C,variant:v,...y??{}},x))};i.displayName="ButtonCascader"},80318:(J,R,e)=>{"use strict";e.d(R,{_:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=({message:g,callToActionElement:m,footer:d,className:u})=>{const i=(0,l.wW)(o);return a.createElement("div",{className:(0,n.cx)([i.wrapper,u])},g&&a.createElement("div",{className:i.message},g),m,d&&a.createElement("div",{className:i.footer},d))},o=g=>({wrapper:(0,n.css)({label:"call-to-action-card",background:g.colors.background.secondary,borderRadius:g.shape.radius.default,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,padding:g.spacing(3),[g.breakpoints.down("sm")]:{padding:g.spacing(3,1)}}),message:(0,n.css)({marginBottom:g.spacing(3),fontStyle:"italic"}),footer:(0,n.css)({marginTop:g.spacing(3)})})},4236:(J,R,e)=>{"use strict";e.d(R,{L:()=>P,Z:()=>m});var n=e(41407),a=e(39953),l=e(82803),r=e(53039),o=e(78020);const g=a.createContext(null),m=({disabled:x,href:S,onClick:I,children:T,isSelected:O,className:A,...B})=>{const b=(0,a.useMemo)(()=>a.Children.toArray(T).some(z=>a.isValidElement(z)&&z.type===d),[T]),W=x||!I&&!S,V=I&&!x?I:void 0,w=(0,l.l4)(),K=(0,o.$)(w,x,W,O);return a.createElement(o._,{disableEvents:x,disableHover:W,isSelected:O,className:(0,n.cx)(K.container,A),...B},a.createElement(g.Provider,{value:{href:S,onClick:V,disabled:x,isSelected:O}},!b&&a.createElement(d,null),T))},d=({children:x,className:S,"aria-label":I})=>{const T=(0,a.useContext)(g),O=(0,l.wW)(u),{href:A,onClick:B,isSelected:b}=T??{href:void 0,onClick:void 0,isSelected:void 0};return a.createElement("h2",{className:(0,n.cx)(O.heading,S)},A?a.createElement("a",{href:A,className:O.linkHack,"aria-label":I,onClick:B},x):B?a.createElement("button",{onClick:B,className:O.linkHack,"aria-label":I,type:"button"},x):a.createElement(a.Fragment,null,x),b!==void 0&&a.createElement("input",{"aria-label":"option",type:"radio",readOnly:!0,checked:b}))};d.displayName="Heading";const u=x=>({heading:(0,n.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:x.typography.size.md,letterSpacing:"inherit",lineHeight:x.typography.body.lineHeight,color:x.colors.text.primary,fontWeight:x.typography.fontWeightMedium}),linkHack:(0,n.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:x.shape.radius.default},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,r.getFocusStyles)(x),zIndex:1}}})}),i=({children:x,className:S})=>{const I=(0,l.wW)(f);return a.createElement("div",{className:(0,n.cx)(I.tagList,S)},x)};i.displayName="Tags";const f=x=>({tagList:(0,n.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),c=({children:x,className:S})=>{const I=(0,l.wW)(E);return a.createElement("p",{className:(0,n.cx)(I.description,S)},x)};c.displayName="Description";const E=x=>({description:(0,n.css)({width:"100%",gridArea:"Description",margin:x.spacing(1,0,0),color:x.colors.text.secondary,lineHeight:x.typography.body.lineHeight})}),p=({children:x,align:S="start",className:I})=>{const T=(0,l.wW)(h);return a.createElement("div",{className:(0,n.cx)(T.media,I,(0,n.css)({alignSelf:S}))},x)};p.displayName="Figure";const h=x=>({media:(0,n.css)({position:"relative",gridArea:"Figure",marginRight:x.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),y=(0,a.memo)(({children:x,className:S,separator:I="|"})=>{const T=(0,l.wW)(s);let O=x;const A=a.Children.toArray(x).filter(Boolean);return A.length?(O=A.map((B,b)=>a.createElement("div",{key:`element_${b}`,className:T.metadataItem},B)),A.length>1&&I&&(O=A.reduce((B,b,W)=>[B,a.createElement("span",{key:`separator_${W}`,className:T.separator},I),b])),a.createElement("div",{className:(0,n.cx)(T.metadata,S)},O)):null});y.displayName="Meta";const s=x=>({metadata:(0,n.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:x.typography.size.sm,color:x.colors.text.secondary,margin:x.spacing(.5,0,0),lineHeight:x.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,n.css)({zIndex:0}),separator:(0,n.css)({margin:`0 ${x.spacing(1)}`})}),v=({children:x,disabled:S,variant:I,className:T})=>{const O=(0,l.wW)(C),B=(0,a.useContext)(g)?.disabled||S,b=I==="primary"?O.actions:O.secondaryActions;return a.createElement("div",{className:(0,n.cx)(b,T)},a.Children.map(x,W=>a.isValidElement(W)?(0,a.cloneElement)(W,{disabled:B,...W.props}):null))},C=x=>({actions:(0,n.css)({gridArea:"Actions",marginTop:x.spacing(2),"& > *":{marginRight:x.spacing(1)}}),secondaryActions:(0,n.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:x.colors.text.secondary,marginTtop:x.spacing(2),"& > *":{marginRight:`${x.spacing(1)} !important`}})}),D=({children:x,disabled:S,className:I})=>a.createElement(v,{variant:"primary",disabled:S,className:I},x);D.displayName="Actions";const M=({children:x,disabled:S,className:I})=>a.createElement(v,{variant:"secondary",disabled:S,className:I},x);M.displayName="SecondaryActions";const P=x=>({inner:(0,n.css)({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap"}),...u(x),...s(x),...E(x),...h(x),...C(x),...f(x)});m.Heading=d,m.Tags=i,m.Figure=p,m.Meta=y,m.Actions=D,m.SecondaryActions=M,m.Description=c},78020:(J,R,e)=>{"use strict";e.d(R,{$:()=>u,_:()=>d});var n=e(41407),a=e(39953),l=e(82803),r=e(64084),o=e(53039);const g=({children:i,href:f})=>{const{inner:c}=(0,l.wW)(m);return f?a.createElement("a",{className:c,href:f},i):a.createElement(a.Fragment,null,i)},m=i=>({inner:(0,n.css)({display:"flex",width:"100%",padding:i.spacing(2)})}),d=({children:i,disableEvents:f,disableHover:c,isSelected:E,className:p,href:h,...y})=>{const s=(0,l.l4)(),{oldContainer:v}=u(s,f,c,E);return a.createElement("div",{...y,className:(0,n.cx)(v,p)},a.createElement(g,{href:h},i))},u=(0,r.B)((i,f=!1,c=!1,E)=>{const p=E!==void 0;return{container:(0,n.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:i.spacing(2),background:i.colors.background.secondary,borderRadius:i.shape.radius.default,marginBottom:"8px",pointerEvents:f?"none":"auto",transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),...!c&&{"&:hover":{background:i.colors.emphasize(i.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":o.getFocusStyles(i)},...p&&{cursor:"pointer"},...E&&{outline:`solid 2px ${i.colors.primary.border}`}}),oldContainer:(0,n.css)({display:"flex",width:"100%",background:i.colors.background.secondary,borderRadius:i.shape.radius.default,position:"relative",pointerEvents:f?"none":"auto",marginBottom:i.spacing(1),transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),...!c&&{"&:hover":{background:i.colors.emphasize(i.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":o.getFocusStyles(i)}})}})},52895:(J,R,e)=>{"use strict";e.d(R,{v:()=>c});var n=e(41407),a=e(80172),l=e.n(a),r=e(21499),o=e(39953),g=e(12190),m=e(38637),d=e(9558),u=e(62427);const i=(0,n.css)({"&:focus":{outline:"none"}}),f=" / ";class c extends o.PureComponent{constructor(p){super(p),this.flattenOptions=(v,C=[])=>{let D=[];for(const M of v){const P=[...C];P.push(M),M.items?D=[...D,...this.flattenOptions(M.items,P)]:D.push({singleLabel:P[P.length-1].label,label:P.map(x=>x.label).join(this.props.separator||f),value:P.map(x=>x.value)})}return D},this.getSearchableOptions=l()(v=>this.flattenOptions(v)),this.onChange=(v,C)=>{const D=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?C.map(M=>M.label).join(this.props.separator||f):C[C.length-1].label;this.setState({rcValue:v,focusCascade:!0,activeLabel:D}),this.props.onSelect(C[C.length-1].value)},this.onSelect=v=>{const C=v.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?v.label:v.singleLabel||"",rcValue:C,isSearching:!1}),this.props.onSelect(C[C.length-1])},this.onCreateOption=v=>{this.setState({activeLabel:v,rcValue:[],isSearching:!1}),this.props.onSelect(v)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=v=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(v.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=v=>{v===""&&this.setState({isSearching:!1})};const h=this.getSearchableOptions(p.options),{rcValue:y,activeLabel:s}=this.setInitialValue(h,p.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:y,activeLabel:s}}setInitialValue(p,h){if(!h)return{rcValue:[],activeLabel:""};for(const y of p){const s=y.value||[];if(s[s.length-1]===h)return{rcValue:s,activeLabel:this.props.displayAllSelectedLevels?y.label:y.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:h}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:p,formatCreateLabel:h,placeholder:y,width:s,changeOnSelect:v,options:C}=this.props,{focusCascade:D,isSearching:M,rcValue:P,activeLabel:x}=this.state,S=this.getSearchableOptions(C);return o.createElement("div",null,M?o.createElement(d.Ph,{allowCustomValue:p,placeholder:y,autoFocus:!D,onChange:this.onSelect,onBlur:this.onBlur,options:S,onCreateOption:this.onCreateOption,formatCreateLabel:h,width:s,onInputChange:this.onSelectInputChange}):o.createElement(r.Z,{onChange:(0,u.K)(this.onChange),options:C,changeOnSelect:v,value:P.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen},o.createElement("div",{className:i},o.createElement(m.I,{autoFocus:this.props.autoFocus,width:s,placeholder:y,onBlur:this.onBlurCascade,value:x,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:D?o.createElement(g.J,{name:"angle-up"}):o.createElement(g.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})}))))}}c.defaultProps={changeOnSelect:!0}},62427:(J,R,e)=>{"use strict";e.d(R,{K:()=>n,p:()=>a});const n=o=>(g,m)=>{o&&o(g.map(d=>String(d)),l(m))},a=o=>g=>{o&&o(l(g))},l=o=>o.map(r),r=o=>({value:o.value??"",label:o.label})},846:(J,R,e)=>{"use strict";e.d(R,{L:()=>a});var n=e(39953);class a extends n.PureComponent{constructor(){super(...arguments),this.myRef=(0,n.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=r=>{const o=this.myRef.current;(!o||r.target instanceof Node&&!o.contains(r.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return n.createElement("div",{ref:this.myRef},this.props.children)}}a.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:void 0,useCapture:!1}},36210:(J,R,e)=>{"use strict";e.d(R,{m:()=>u});var n=e(41407),a=e(39953),l=e(28384),r=e(82803),o=e(4919),g=e(12190),m=e(99560);const d=2*1e3;function u({onClipboardCopy:c,onClipboardError:E,children:p,getText:h,icon:y,variant:s,...v}){const C=(0,r.wW)(f),[D,M]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let S;return D&&(S=setTimeout(()=>{M(!1)},d)),()=>{window.clearTimeout(S)}},[D]);const P=(0,a.useRef)(null),x=(0,a.useCallback)(async()=>{const S=h();try{await i(S,P),M(!0),c?.(S)}catch(I){E?.(S,I)}},[h,c,E]);return a.createElement(a.Fragment,null,D&&a.createElement(m.K,{placement:"top",referenceElement:P.current},a.createElement(l.c,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),a.createElement(o.zx,{onClick:x,icon:y,variant:D?"success":s,"aria-label":D?"Copied":void 0,...v,className:(0,n.cx)(C.button,D&&C.successButton,v.className),ref:P},p,D&&a.createElement("div",{className:C.successOverlay},a.createElement(g.J,{name:"check"}))))}const i=async(c,E)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(c);{const p=document.createElement("textarea");E.current?.appendChild(p),p.value=c,p.focus(),p.select(),document.execCommand("copy"),p.remove()}},f=c=>({button:(0,n.css)({position:"relative"}),successButton:(0,n.css)({"> *":(0,n.css)({visibility:"hidden"})}),successOverlay:(0,n.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},4516:(J,R,e)=>{"use strict";e.d(R,{s:()=>u});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(82803),g=e(53039),m=e(12190),d=e(28409);const u=({label:f,isOpen:c,onToggle:E,className:p,contentClassName:h,children:y,labelId:s,loading:v=!1,headerDataTestId:C,contentDataTestId:D})=>{const[M,P]=(0,r.useState)(c),x=(0,o.wW)(i),S=O=>{O.target instanceof HTMLElement&&O.target.tagName==="A"||(O.preventDefault(),O.stopPropagation(),E?.(!M),P(!M))},{current:I}=(0,r.useRef)((0,a.uniqueId)()),T=s??`collapse-label-${I}`;return r.createElement(r.Fragment,null,r.createElement("div",{onClick:S,className:(0,n.cx)(x.header,p)},r.createElement("button",{type:"button",id:`collapse-button-${I}`,className:x.button,onClick:S,"aria-expanded":M&&!v,"aria-controls":`collapse-content-${I}`,"aria-labelledby":T},v?r.createElement(d.$,{className:x.spinner}):r.createElement(m.J,{name:M?"angle-up":"angle-down",className:x.icon})),r.createElement("div",{className:x.label,id:`collapse-label-${I}`,"data-testid":C},f)),M&&r.createElement("div",{id:`collapse-content-${I}`,className:(0,n.cx)(x.content,h),"data-testid":D},y))},i=f=>({header:(0,n.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:f.typography.size.lg,padding:`${f.spacing(.5)} 0`,"&:focus-within":(0,g.getFocusStyles)(f)}),button:(0,n.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,n.css)({color:f.colors.text.secondary}),content:(0,n.css)({padding:`${f.spacing(2)} 0`}),spinner:(0,n.css)({display:"flex",alignItems:"center",width:f.spacing(2)}),label:(0,n.css)({display:"flex"})})},62818:(J,R,e)=>{"use strict";e.d(R,{U:()=>d,y:()=>m});var n=e(41407),a=e(39953),l=e(82803),r=e(4919),o=e(12190);const g=u=>({collapse:(0,n.css)({label:"collapse",marginBottom:u.spacing(1),backgroundColor:u.colors.background.primary,border:`1px solid ${u.colors.border.weak}`,position:"relative",borderRadius:u.shape.radius.default,width:"100%",display:"flex",flexDirection:"column",flex:"1 1 0"}),collapseBody:(0,n.css)({label:"collapse__body",padding:u.spacing(u.components.panel.padding),paddingTop:0,flex:1,overflow:"hidden",display:"flex",flexDirection:"column"}),bodyContentWrapper:(0,n.css)({label:"bodyContentWrapper",flex:1,overflow:"hidden"}),loader:(0,n.css)({label:"collapse__loader",height:"2px",position:"relative",overflow:"hidden",background:"none",margin:u.spacing(.5)}),loaderActive:(0,n.css)({label:"collapse__loader_active","&:after":{content:"' '",display:"block",width:"25%",top:0,height:"250%",position:"absolute",animation:"loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms",animationIterationCount:100,left:"-25%",background:u.colors.primary.main},"@keyframes loader":{from:{left:"-25%",opacity:.1},to:{left:"100%",opacity:1}}}),header:(0,n.css)({label:"collapse__header",padding:u.spacing(1,2,1,2),display:"flex",transition:"all 0.1s linear"}),headerCollapsed:(0,n.css)({label:"collapse__header--collapsed",padding:u.spacing(1,2,1,2)}),headerLabel:(0,n.css)({label:"collapse__header-label",fontWeight:u.typography.fontWeightMedium,marginRight:u.spacing(1),fontSize:u.typography.size.md,display:"flex",flex:"0 0 100%"}),icon:(0,n.css)({label:"collapse__icon",margin:u.spacing(.25,1,0,-1)})}),m=({isOpen:u,onToggle:i,...f})=>{const[c,E]=(0,a.useState)(u);return a.createElement(d,{isOpen:c,collapsible:!0,...f,onToggle:()=>{E(!c),i&&i(!c)}})},d=({isOpen:u,label:i,loading:f,collapsible:c,onToggle:E,className:p,children:h})=>{const y=(0,l.wW)(r.gN),s=(0,l.wW)(g),v=()=>{E&&E(!u)},C=(0,n.cx)([s.collapse,p]),D=f?(0,n.cx)([s.loader,s.loaderActive]):(0,n.cx)([s.loader]),M=c?(0,n.cx)([s.header]):(0,n.cx)([s.headerCollapsed]);return a.createElement("div",{className:C},a.createElement("button",{type:"button",className:(0,n.cx)(y,M),onClick:v},c&&a.createElement(o.J,{className:s.icon,name:u?"angle-down":"angle-right"}),a.createElement("div",{className:(0,n.cx)([s.headerLabel])},i)),u&&a.createElement("div",{className:(0,n.cx)([s.collapseBody])},a.createElement("div",{className:D}),a.createElement("div",{className:s.bodyContentWrapper},h)))};d.displayName="Collapse"},35605:(J,R,e)=>{"use strict";e.d(R,{Z:()=>u});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(63374),g=e(82803),m=e(38637);const d=(0,r.forwardRef)(({color:c,onChange:E,isClearable:p=!1,onClick:h,onBlur:y,disabled:s,buttonAriaLabel:v,...C},D)=>{const[M,P]=(0,r.useState)(c),[x,S]=(0,r.useState)(c),I=(0,r.useMemo)(()=>(0,a.debounce)(E,100),[]);(0,r.useEffect)(()=>{const A=(0,o.Z)(c);A.isValid()&&c!==x&&(P(A.toString()),S(c))},[c,x]);const T=A=>{const{value:B}=A.currentTarget;if(P(B),B===""&&p){I(B);return}const b=(0,o.Z)(B);b.isValid()&&I(b.toString())},O=A=>{(0,o.Z)(M).isValid()||P(c),y?.(A)};return r.createElement(m.I,{...C,value:M,onChange:T,disabled:s,onClick:h,onBlur:O,addonBefore:r.createElement(i,{onClick:h,ariaLabel:v,disabled:s,color:c}),ref:D})});d.displayName="ColorInput";const u=d,i=({color:c,onClick:E,disabled:p,ariaLabel:h})=>{const y=(0,g.wW)(f);return r.createElement("button",{type:"button",onClick:E,"aria-label":h,disabled:p||!E,className:(0,n.cx)(y,(0,n.css)({backgroundColor:c}))})},f=c=>(0,n.css)({height:"100%",width:`${c.spacing.gridSize*4}px`,borderRadius:`${c.shape.radius.default} 0 0 ${c.shape.radius.default}`,border:`1px solid ${c.colors.border.medium}`})},69360:(J,R,e)=>{"use strict";e.d(R,{sp:()=>E,zH:()=>c});var n=e(41407),a=e(39953),l=e(82803),r=e(64084),o=e(58842),g=e(55407),m=e(66557),d=e(15057),u=e(5205),i=e(33312);const f=(h,y="ColorPicker")=>{var s;return s=class extends a.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,a.createRef)()}render(){const{theme:v,children:C,onChange:D,color:M}=this.props,P=p(v),x=a.createElement(h,{...this.props,children:null,onChange:D});return a.createElement(m.D,{content:x,hideAfter:300},(S,I,T)=>a.createElement(a.Fragment,null,this.pickerTriggerRef.current&&a.createElement(g.J,{...T,referenceElement:this.pickerTriggerRef.current,wrapperClassName:P.colorPicker,onMouseLeave:I,onMouseEnter:S,onKeyDown:O=>(0,o.i)(O,I)}),C?C({ref:this.pickerTriggerRef,showColorPicker:S,hideColorPicker:I}):a.createElement(u.b,{ref:this.pickerTriggerRef,onClick:S,onMouseLeave:I,color:v.visualization.getColorByName(M||"#000000"),"aria-label":M})))}},s.displayName=y,s},c=(0,l.HE)(f(d.h,"ColorPicker")),E=(0,l.HE)(f(i.j,"SeriesColorPicker")),p=(0,r.B)(h=>({colorPicker:(0,n.css)({position:"absolute",zIndex:h.zIndex.tooltip,color:h.colors.text.primary,maxWidth:"400px",fontSize:h.typography.size.sm,padding:"15px !important",'& [data-placement^="top"]':{paddingLeft:"0 !important",paddingRight:"0 !important"},'& [data-placement^="bottom"]':{paddingLeft:"0 !important",paddingRight:"0 !important"},'& [data-placement^="left"]':{paddingTop:"0 !important"},'& [data-placement^="right"]':{paddingTop:"0 !important"}})}))},81573:(J,R,e)=>{"use strict";e.d(R,{T:()=>i});var n=e(41407),a=e(39953),l=e(85547),r=e(62271),o=e(91249),g=e(82803),m=e(846),d=e(35605),u=e(91797);const i=(0,a.forwardRef)(({value:c="",onChange:E,returnColorAs:p="rgb",...h},y)=>{const[s,v]=(0,a.useState)(c),[C,D]=(0,a.useState)(!1),M=(0,g.l4)(),P=(0,g.wW)(f),x=(0,g.wW)(u.W);return(0,r.Z)(S=>{if(S===c)return;if(!S){E("");return}const I=M.visualization.getColorByName(S);E(p==="rgb"?o.asRgbString(I):o.asHexString(I))},500,[s]),a.createElement(m.L,{onClick:()=>D(!1)},a.createElement("div",{className:P.wrapper},C&&!h.disabled&&a.createElement(l.ef,{"data-testid":"color-popover",color:s,onChange:v,className:(0,n.cx)(x.root,P.picker)}),a.createElement(d.Z,{...h,theme:M,color:s,onChange:v,buttonAriaLabel:"Open color picker",onClick:()=>D(!0),onBlur:()=>D(!1),ref:y,isClearable:!0})))});i.displayName="ColorPickerInput";const f=c=>({wrapper:(0,n.css)({position:"relative"}),picker:(0,n.css)({"&.react-colorful":{position:"absolute",width:"100%",zIndex:11,bottom:"36px"}}),inner:(0,n.css)({position:"absolute"})})},15057:(J,R,e)=>{"use strict";e.d(R,{h:()=>s});var n=e(41407),a=e(30064),l=e(39953),r=e(91249),o=e(82803),g=e(64084),m=e(5205),d=e(86832);function u(C,D){const M=new Array(C.length);for(let P=0;P<C.length;P++){const x=C.length-1-P;M[P]=D(C[x],x,C)}return M}const f=({hue:C,selectedColor:D,onColorSelect:M,...P})=>{const x=(0,d.upperFirst)(C.name),S=(0,o.wW)(c);return l.createElement("div",{className:S.colorRow},l.createElement("div",{className:S.colorLabel},x),l.createElement("div",{...P,className:S.swatchRow},u(C.shades,I=>l.createElement(m.b,{key:I.name,"aria-label":I.name,variant:I.primary?m.$.Large:m.$.Small,isSelected:I.name===D,color:I.color,onClick:()=>M(I.name)}))))},c=C=>({colorRow:(0,n.css)({display:"grid",gridTemplateColumns:"25% 1fr",gridColumnGap:C.spacing(2),padding:C.spacing(.5,0),"&:hover":{background:C.colors.background.secondary}}),colorLabel:(0,n.css)({paddingLeft:C.spacing(2),display:"flex",alignItems:"center"}),swatchRow:(0,n.css)({display:"flex",gap:C.spacing(1),alignItems:"center",justifyContent:"space-around",flexDirection:"row"})}),E=({color:C,onChange:D})=>{const M=(0,o.l4)(),P=(0,o.wW)(p),x=[];for(const S of M.visualization.hues)x.push(l.createElement(f,{key:S.name,selectedColor:C,hue:S,onColorSelect:D}));return l.createElement(l.Fragment,null,l.createElement("div",{className:P.swatches},x),l.createElement("div",{className:P.extraColors},l.createElement(m.b,{isSelected:C==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>D("transparent")}),l.createElement(m.b,{isSelected:C==="text",color:M.colors.text.primary,label:"Text color",onClick:()=>D("text")})))},p=C=>({container:(0,n.css)({display:"flex",flexDirection:"column"}),extraColors:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-around",gap:C.spacing(1),padding:C.spacing(1,0)}),swatches:(0,n.css)({display:"grid",flexGrow:1})});var h=e(91797);class y extends l.Component{constructor(D){super(D),this.getTabClassName=M=>{const{activePicker:P}=this.state;return`ColorPickerPopover__tab ${P===M&&"ColorPickerPopover__tab--active"}`},this.handleChange=M=>{const{onChange:P,enableNamedColors:x,theme:S}=this.props;if(x)return P(M);P(r.asHexString(S.visualization.getColorByName(M)))},this.onTabChange=M=>()=>this.setState({activePicker:M}),this.renderPicker=()=>{const{activePicker:M}=this.state,{color:P}=this.props;switch(M){case"spectrum":return l.createElement(h.Z,{color:P,onChange:this.handleChange});case"palette":return l.createElement(E,{color:P,onChange:this.handleChange});default:return this.renderCustomPicker(M)}},this.renderCustomPicker=M=>{const{customPickers:P,color:x,theme:S}=this.props;return P?l.createElement(P[M].tabComponent,{color:x,theme:S,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:M}=this.props;return M?l.createElement(l.Fragment,null,Object.keys(M).map(P=>l.createElement("button",{className:this.getTabClassName(P),onClick:this.onTabChange(P),key:P,type:"button"},M[P].name))):null},this.state={activePicker:"palette"}}render(){const{theme:D}=this.props,M=v(D);return l.createElement(a.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},l.createElement("div",{tabIndex:-1,className:M.colorPickerPopover},l.createElement("div",{className:M.colorPickerPopoverTabs},l.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette"),type:"button"},"Colors"),l.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum"),type:"button"},"Custom"),this.renderCustomPickerTabs()),l.createElement("div",{className:M.colorPickerPopoverContent},this.renderPicker())))}}const s=(0,o.HE)(y);s.displayName="ColorPickerPopover";const v=(0,g.B)(C=>({colorPickerPopover:(0,n.css)({borderRadius:C.shape.radius.default,boxShadow:C.shadows.z3,background:C.colors.background.primary,border:`1px solid ${C.colors.border.weak}`,".ColorPickerPopover__tab":{width:"50%",textAlign:"center",padding:C.spacing(1,0),background:C.colors.background.secondary,color:C.colors.text.secondary,fontSize:C.typography.bodySmall.fontSize,cursor:"pointer",border:"none","&:focus:not(:focus-visible)":{outline:"none",boxShadow:"none"},":focus-visible":{position:"relative"}},".ColorPickerPopover__tab--active":{color:C.colors.text.primary,fontWeight:C.typography.fontWeightMedium,background:C.colors.background.primary}}),colorPickerPopoverContent:(0,n.css)({width:"246px",fontSize:C.typography.bodySmall.fontSize,minHeight:"184px",padding:C.spacing(1),display:"flex",flexDirection:"column"}),colorPickerPopoverTabs:(0,n.css)({display:"flex",width:"100%",borderRadius:`${C.shape.radius.default} ${C.shape.radius.default} 0 0`})}))},5205:(J,R,e)=>{"use strict";e.d(R,{$:()=>m,b:()=>d});var n=e(41407),a=e(30064),l=e(39953),r=e(63374),o=e(28888),g=e(82803),m=(i=>(i.Small="small",i.Large="large",i))(m||{});const d=l.forwardRef(({color:i,label:f,variant:c="small",isSelected:E,"aria-label":p,...h},y)=>{const s=(0,g.l4)(),{isFocusVisible:v,focusProps:C}=(0,a.Fx)(),D=u(s,c,i,v,E),M=!!f,P=p||f;return l.createElement("div",{ref:y,className:D.wrapper,"data-testid":o.wl.components.ColorSwatch.name,...h},M&&l.createElement("span",{className:D.label},f),l.createElement("button",{className:D.swatch,...C,"aria-label":P?`${P} color`:"Pick a color",type:"button"}))}),u=(i,f,c,E,p)=>{const h=(0,r.Z)(c),s=f==="small"?"16px":"32px";let v="none";return h.getAlpha()<.1&&(v=`2px solid ${i.colors.border.medium}`),{wrapper:(0,n.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,n.css)({marginRight:i.spacing(1)}),swatch:(0,n.css)({width:s,height:s,background:`${c}`,border:v,borderRadius:i.shape.radius.circle,outlineOffset:"1px",outline:E?`2px solid  ${i.colors.primary.main}`:"none",boxShadow:p?`inset 0 0 0 2px ${c}, inset 0 0 0 4px ${i.colors.getContrastText(c)}`:"none",transition:i.transitions.create(["transform"],{duration:i.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"},"@media (forced-colors: active)":{forcedColorAdjust:"none"}})}};d.displayName="ColorSwatch"},33312:(J,R,e)=>{"use strict";e.d(R,{j:()=>g,q:()=>m});var n=e(41407),a=e(39953),l=e(82803),r=e(35829),o=e(15057);const g=u=>{const i=(0,l.wW)(d),{yaxis:f,onToggleAxis:c,color:E,...p}=u,h=c?{yaxis:{name:"Y-Axis",tabComponent(){return a.createElement(r.r,{key:"yaxisSwitch",label:"Use right y-axis",className:i.colorPickerAxisSwitch,labelClass:i.colorPickerAxisSwitchLabel,checked:f===2,onChange:()=>{c&&c()}})}}}:void 0;return a.createElement(o.h,{...p,color:E||"#000000",customPickers:h})},m=(0,l.HE)(g),d=()=>({colorPickerAxisSwitch:(0,n.css)({width:"100%"}),colorPickerAxisSwitchLabel:(0,n.css)({display:"flex",flexGrow:1})})},91797:(J,R,e)=>{"use strict";e.d(R,{W:()=>i,Z:()=>f});var n=e(41407),a=e(39953),l=e(85547),r=e(62271),o=e(63374),g=e(91249),m=e(82803),d=e(35605);const u=({color:c,onChange:E})=>{const[p,h]=(0,a.useState)(c);(0,r.Z)(C=>{E(g.asHexString(y.visualization.getColorByName(C)))},500,[p]);const y=(0,m.l4)(),s=(0,m.wW)(i),v=(0,a.useMemo)(()=>p.startsWith("rgba")?p:(0,o.Z)(y.visualization.getColorByName(c)).toRgbString(),[p,y,c]);return a.createElement("div",{className:s.wrapper},a.createElement(l.ef,{className:s.root,color:v,onChange:h}),a.createElement(d.Z,{theme:y,color:v,onChange:h,className:s.colorInput}))},i=c=>({wrapper:(0,n.css)({flexGrow:1}),root:(0,n.css)({"&.react-colorful":{width:"auto"},".react-colorful":{"&__saturation":{borderRadius:`${c.shape.radius.default} ${c.shape.radius.default} 0 0`},"&__alpha":{borderRadius:`0 0 ${c.shape.radius.default} ${c.shape.radius.default}`},"&__alpha, &__hue":{height:c.spacing(2),position:"relative"},"&__pointer":{height:c.spacing(2),width:c.spacing(2)}}}),colorInput:(0,n.css)({marginTop:c.spacing(2)})}),f=u},85387:(J,R,e)=>{"use strict";e.d(R,{p:()=>m});var n=e(41407),a=e(39953),l=e(82803),r=e(64084),o=e(4919);class g extends a.PureComponent{constructor(){super(...arguments),this.mainButtonRef=a.createRef(),this.confirmButtonRef=a.createRef(),this.state={showConfirm:!1},this.onClickButton=i=>{i&&i.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=i=>{i&&i.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=i=>{i&&i.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:i,className:f,size:c,disabled:E,confirmText:p,confirmVariant:h,children:y}=this.props,s=d(i),v=(0,n.cx)(f,this.state.showConfirm?s.buttonHide:s.buttonShow,E&&s.buttonDisabled),C=(0,n.cx)(s.confirmButton,this.state.showConfirm?s.confirmButtonShow:s.confirmButtonHide),D=E?()=>{}:this.onClickButton;return a.createElement("span",{className:s.buttonContainer},a.createElement("div",{className:(0,n.cx)(E&&s.disabled)},a.createElement("span",{className:v},typeof y=="string"?a.createElement(o.zx,{size:c,fill:"text",onClick:D,ref:this.mainButtonRef},y):a.cloneElement(y,{onClick:D,ref:this.mainButtonRef}))),a.createElement("span",{className:C},a.createElement(o.zx,{size:c,variant:h,onClick:this.onConfirm,ref:this.confirmButtonRef},p),a.createElement(o.zx,{size:c,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const m=(0,l.HE)(g),d=(0,r.B)(u=>({buttonContainer:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"flex-end"}),buttonDisabled:(0,n.css)({textDecoration:"none",color:u.colors.text.primary,opacity:.65,pointerEvents:"none"}),buttonShow:(0,n.css)({opacity:1,transition:"opacity 0.1s ease",zIndex:2}),buttonHide:(0,n.css)({opacity:0,transition:"opacity 0.1s ease, visibility 0 0.1s",visibility:"hidden",zIndex:0}),confirmButton:(0,n.css)({alignItems:"flex-start",background:u.colors.background.primary,display:"flex",position:"absolute",pointerEvents:"none"}),confirmButtonShow:(0,n.css)({zIndex:1,opacity:1,transition:"opacity 0.08s ease-out, transform 0.1s ease-out",transform:"translateX(0)",pointerEvents:"all"}),confirmButtonHide:(0,n.css)({opacity:0,visibility:"hidden",transition:"opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s",transform:"translateX(100px)"}),disabled:(0,n.css)({cursor:"not-allowed"})}));m.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},m.displayName="ConfirmButton"},51932:(J,R,e)=>{"use strict";e.d(R,{m:()=>r});var n=e(39953),a=e(4919),l=e(85387);const r=({size:o,disabled:g,onConfirm:m,"aria-label":d,closeOnConfirm:u})=>n.createElement(l.p,{confirmText:"Delete",confirmVariant:"destructive",size:o||"md",disabled:g,onConfirm:m,closeOnConfirm:u},n.createElement(a.zx,{"aria-label":d,variant:"destructive",icon:"times",size:o||"sm"}))},32840:(J,R,e)=>{"use strict";e.d(R,{s:()=>u});var n=e(41407),a=e(39953),l=e(28888),r=e(82803),o=e(4919),g=e(38637),m=e(12223),d=e(73075);const u=({isOpen:f,title:c,body:E,description:p,confirmText:h,confirmVariant:y="destructive",confirmationText:s,dismissText:v="Cancel",dismissVariant:C="secondary",alternativeText:D,modalClass:M,icon:P="exclamation-triangle",onConfirm:x,onDismiss:S,onAlternative:I,confirmButtonVariant:T="destructive"})=>{const[O,A]=(0,a.useState)(!!s),B=(0,r.wW)(i),b=(0,a.useRef)(null),W=w=>{A(s?.toLowerCase().localeCompare(w.currentTarget.value.toLowerCase())!==0)};(0,a.useEffect)(()=>{f&&b.current?.focus()},[f]),(0,a.useEffect)(()=>{f&&A(!!s)},[f,s]);const V=async()=>{A(!0);try{await x()}finally{A(!1)}};return a.createElement(d.u,{className:(0,n.cx)(B.modal,M),title:c,icon:P,isOpen:f,onDismiss:S},a.createElement("div",{className:B.modalText},E,p?a.createElement("div",{className:B.modalDescription},p):null,s?a.createElement("div",{className:B.modalConfirmationInput},a.createElement(m.Lh,null,a.createElement(g.I,{placeholder:`Type "${s}" to confirm`,onChange:W}))):null),a.createElement(d.u.ButtonRow,null,a.createElement(o.zx,{variant:C,onClick:S,fill:"outline"},v),a.createElement(o.zx,{variant:T,onClick:V,disabled:O,ref:b,"data-testid":l.wl.pages.ConfirmModal.delete},h),I?a.createElement(o.zx,{variant:"primary",onClick:I},D):null))},i=f=>({modal:(0,n.css)({width:"500px"}),modalText:(0,n.css)({fontSize:f.typography.h5.fontSize,color:f.colors.text.primary}),modalDescription:(0,n.css)({fontSize:f.typography.body.fontSize}),modalConfirmationInput:(0,n.css)({paddingTop:f.spacing(1)})})},53790:(J,R,e)=>{"use strict";e.d(R,{x:()=>g});var n=e(39953),a=e(17639),l=e(28888),r=e(13767),o=e(70393);const g=n.memo(({x:m,y:d,onClose:u,focusOnOpen:i=!0,renderMenuItems:f,renderHeader:c})=>{const E=(0,n.useRef)(null),[p,h]=(0,n.useState)({});(0,n.useLayoutEffect)(()=>{const D=E.current;if(D){const M=D.getBoundingClientRect(),P=5,x={right:window.innerWidth<m+M.width,bottom:window.innerHeight<d+M.height+P};h({position:"fixed",left:x.right?m-M.width-P:m-P,top:x.bottom?d-M.height-P:d+P})}},[m,d]),(0,a.Z)(E,()=>{u?.()});const y=c?.(),s=f?.(),v=D=>{i&&D(0)},C=D=>{D.key==="Escape"&&(D.preventDefault(),D.stopPropagation(),u?.())};return n.createElement(o.h_,null,n.createElement(r.v,{header:y,ref:E,style:p,ariaLabel:l.wl.components.Menu.MenuComponent("Context"),onOpen:v,onClick:u,onKeyDown:C},s))});g.displayName="ContextMenu"},43867:(J,R,e)=>{"use strict";e.d(R,{z:()=>l});var n=e(39953),a=e(53790);const l=({children:r,renderMenuItems:o,focusOnOpen:g=!0})=>{const[m,d]=(0,n.useState)(!1),[u,i]=(0,n.useState)({x:0,y:0});return n.createElement(n.Fragment,null,r({openMenu:f=>{d(!0),i({x:f.pageX,y:f.pageY})}}),m&&n.createElement(a.x,{onClose:()=>d(!1),x:u.x,y:u.y,renderMenuItems:o,focusOnOpen:g}))}},64447:(J,R,e)=>{"use strict";e.d(R,{$:()=>i,Z:()=>f});var n=e(41407),a=e(39953),l=e(90273),r=e(82803),o=e(77814),g=e.n(o),m=e(12190);const d=({children:E})=>{const[p,h]=(0,a.useState)(!1),[y,s]=(0,a.useState)(!1),v=(0,a.useRef)(null),C=(0,a.useRef)(null),D=(0,r.wW)(u);return(0,a.useEffect)(()=>{const M=new IntersectionObserver(P=>{P.forEach(x=>{x.target===v.current?h(!x.isIntersecting):x.target===C.current&&s(!x.isIntersecting)})});return[v,C].forEach(P=>{P.current&&M.observe(P.current)}),()=>M.disconnect()},[]),a.createElement(a.Fragment,null,a.createElement("div",{className:(0,n.cx)(D.scrollIndicator,D.scrollTopIndicator,{[D.scrollIndicatorVisible]:p})},a.createElement(m.J,{className:g()(D.scrollIcon,D.scrollTopIcon),name:"angle-up"})),a.createElement("div",{className:D.scrollContent},a.createElement("div",{ref:v}),E,a.createElement("div",{ref:C})),a.createElement("div",{className:(0,n.cx)(D.scrollIndicator,D.scrollBottomIndicator,{[D.scrollIndicatorVisible]:y})},a.createElement(m.J,{className:g()(D.scrollIcon,D.scrollBottomIcon),name:"angle-down"})))},u=E=>({scrollContent:(0,n.css)({flex:1,position:"relative"}),scrollIndicator:(0,n.css)({height:E.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:E.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,n.css)({background:`linear-gradient(0deg, transparent, ${E.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,n.css)({background:`linear-gradient(180deg, transparent, ${E.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,n.css)({opacity:1}),scrollIcon:(0,n.css)({left:"50%",position:"absolute",transform:"translateX(-50%)"}),scrollTopIcon:(0,n.css)({top:0}),scrollBottomIcon:(0,n.css)({bottom:0})}),i=({autoHide:E=!1,autoHideTimeout:p=200,setScrollTop:h,className:y,testId:s,autoHeightMin:v="0",autoHeightMax:C="100%",hideTracksWhenNotNeeded:D=!1,hideHorizontalTrack:M,hideVerticalTrack:P,scrollRefCallback:x,showScrollIndicators:S=!1,updateAfterMountMs:I,scrollTop:T,onScroll:O,children:A})=>{const B=(0,a.useRef)(null),b=(0,r.wW)(c);(0,a.useEffect)(()=>{B.current&&x&&x(B.current.view)},[B,x]),(0,a.useEffect)(()=>{B.current&&T!=null&&B.current.scrollTop(T)},[T]),(0,a.useEffect)(()=>{I&&setTimeout(()=>{const j=B.current;j?.update&&j.update()},I)},[I]);function W(j,F,k){return k.style&&F&&(k.style.display="none"),a.createElement("div",{...k,className:j})}const V=(0,a.useCallback)(j=>W("track-horizontal",M,j),[M]),w=(0,a.useCallback)(j=>W("track-vertical",P,j),[P]),K=(0,a.useCallback)(j=>a.createElement("div",{...j,className:"thumb-horizontal"}),[]),z=(0,a.useCallback)(j=>a.createElement("div",{...j,className:"thumb-vertical"}),[]),G=(0,a.useCallback)(j=>(j.style&&j.style.WebkitOverflowScrolling==="touch"&&(j.style.WebkitOverflowScrolling="auto"),a.createElement("div",{...j,className:"scrollbar-view"})),[]),Q=(0,a.useCallback)(()=>{B.current&&h&&h(B.current.getValues())},[h]);return a.createElement(l.ZP,{"data-testid":s,ref:B,className:(0,n.cx)(b.customScrollbar,y,{[b.scrollbarWithScrollIndicators]:S}),onScrollStop:Q,autoHeight:!0,autoHide:E,autoHideTimeout:p,hideTracksWhenNotNeeded:D,autoHeightMax:C,autoHeightMin:v,renderTrackHorizontal:V,renderTrackVertical:w,renderThumbHorizontal:K,renderThumbVertical:z,renderView:G,onScroll:O},S?a.createElement(d,null,A):A)},f=i,c=E=>({customScrollbar:(0,n.css)({display:"flex",flexGrow:1,".scrollbar-view":{display:"flex",flexGrow:1,flexDirection:"column"},".track-vertical":{borderRadius:E.shape.borderRadius(2),width:`${E.spacing(1)} !important`,right:0,bottom:E.spacing(.25),top:E.spacing(.25)},".track-horizontal":{borderRadius:E.shape.borderRadius(2),height:`${E.spacing(1)} !important`,right:E.spacing(.25),bottom:E.spacing(.25),left:E.spacing(.25)},".thumb-vertical":{background:E.colors.action.focus,borderRadius:E.shape.borderRadius(2),opacity:0},".thumb-horizontal":{background:E.colors.action.focus,borderRadius:E.shape.borderRadius(2),opacity:0},"&:hover":{".thumb-vertical, .thumb-horizontal":{opacity:1,transition:"opacity 0.3s ease-in-out"}}}),scrollbarWithScrollIndicators:(0,n.css)({".scrollbar-view":{position:"static !important"}})})},39960:(J,R,e)=>{"use strict";e.d(R,{k:()=>l});var n=e(39953),a=e(4919);function l({link:r,buttonProps:o}){return n.createElement("a",{href:r.href,target:r.target,rel:"noreferrer",onClick:r.onClick?g=>{!(g.ctrlKey||g.metaKey||g.shiftKey)&&r.onClick&&(g.preventDefault(),r.onClick(g))}:void 0},n.createElement(a.zx,{icon:r.target==="_blank"?"external-link-alt":void 0,variant:"primary",size:"sm",...o},r.title))}},95540:(J,R,e)=>{"use strict";e.d(R,{v:()=>x});var n=e(41407),a=e(10963),l=e.n(a),r=e(39953),o=e(46378),g=e(92418),m=e(76485),d=e(19661),u=e(69733),i=e(24824),f=e(59608),c=e(82803),E=e(64225),p=e(64447),h=e(38637),y=e(70393),s=e(71718);class v{getBoundingClientRect(){const T=window.getSelection(),O=T&&T.anchorNode;return O&&O.parentElement?O.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const C=(I,T)=>I-T*Math.floor(I/T),D={builtInVariable:{pattern:/(\${\S+?})/}},M=[(0,f.Z)({onlyIn:I=>"type"in I&&I.type==="code_block",getSyntax:()=>"links"},{...l().languages,links:D})],P=I=>({input:(0,h.H)({theme:I,invalid:!1}).input,editor:(0,n.css)({".token.builtInVariable":{color:I.colors.success.text},".token.variable":{color:I.colors.primary.text}}),suggestionsWrapper:(0,n.css)({boxShadow:I.shadows.z2}),wrapperOverrides:(0,n.css)({width:"100%","> .slate-query-field__wrapper":{padding:0,backgroundColor:"transparent",border:"none"}})}),x=(0,r.memo)(({value:I,onChange:T,suggestions:O,placeholder:A="http://your-grafana.com/d/000000010/annotations"})=>{const B=(0,r.useRef)(null),b=(0,c.wW)(P),[W,V]=(0,r.useState)(!1),[w,K]=(0,r.useState)(0),[z,G]=(0,r.useState)((0,E.l1)(I)),Q=(0,g.Z)(z),[j,F]=(0,r.useState)(0),k=(0,r.useRef)({showingSuggestions:W,suggestions:O,suggestionsIndex:w,linkUrl:z,onChange:T});k.current={showingSuggestions:W,suggestions:O,suggestionsIndex:w,linkUrl:z,onChange:T};const _=(0,r.useRef)(null);(0,r.useEffect)(()=>{F(S(_.current,w))},[w]);const Y=(0,r.useMemo)(()=>new v,[]),Z=r.useCallback((De,oe)=>{if(!k.current.showingSuggestions)return De.key==="="||De.key==="$"||De.keyCode===32&&De.ctrlKey?V(!0):oe();switch(De.key){case"Backspace":case"Escape":return V(!1),K(0);case"Enter":return De.preventDefault(),ce(k.current.suggestions[k.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":De.preventDefault();const te=De.key==="ArrowDown"?1:-1;return K(fe=>C(fe+te,k.current.suggestions.length));default:return oe()}},[]);(0,r.useEffect)(()=>{Q&&Q.selection.isFocused&&!z.selection.isFocused&&k.current.onChange(m.Z.serialize(z))},[z,Q]);const ae=r.useCallback(({value:De})=>{G(De)},[]),ce=(De,oe=B.current)=>{const fe=q()==="$";De.origin!==u.L8.Template||De.value===i.W.includeVars?oe.insertText(`${fe?"":"$"}{${De.value}}`):oe.insertText(`${fe?"":"$"}{${De.value}:queryparam}`),G(oe.value),V(!1),K(0),k.current.onChange(m.Z.serialize(oe.value))},q=()=>{const De=document.getElementById("data-link-input");let oe="",te,fe;return window.getSelection&&(te=window.getSelection(),te&&te.rangeCount>0&&(fe=te.getRangeAt(0).cloneRange(),fe.collapse(!0),fe.setStart(De,0),oe=fe.toString().slice(-1))),oe};return r.createElement("div",{className:b.wrapperOverrides},r.createElement("div",{className:"slate-query-field__wrapper"},r.createElement("div",{id:"data-link-input",className:"slate-query-field"},W&&r.createElement(y.h_,null,r.createElement(o.r,{referenceElement:Y,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}]},({ref:De,style:oe,placement:te})=>r.createElement("div",{ref:De,style:oe,"data-placement":te,className:b.suggestionsWrapper},r.createElement(p.Z,{scrollTop:j,autoHeightMax:"300px",setScrollTop:({scrollTop:fe})=>F(fe)},r.createElement(s.T,{activeRef:_,suggestions:k.current.suggestions,onSuggestionSelect:ce,onClose:()=>V(!1),activeIndex:w}))))),r.createElement(d.ML,{schema:E.Yi,ref:B,placeholder:A,value:k.current.linkUrl,onChange:ae,onKeyDown:(De,oe,te)=>Z(De,te),plugins:M,className:(0,n.cx)(b.editor,b.input,(0,n.css)({padding:"3px 8px"}))}))))});x.displayName="DataLinkInput";function S(I,T){return(I?.clientHeight??0)*T}},71718:(J,R,e)=>{"use strict";e.d(R,{T:()=>u});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(67814),g=e(82803),m=e(38696);const d=f=>({list:(0,n.css)({borderBottom:`1px solid ${f.colors.border.weak}`,"&:last-child":{border:"none"}}),wrapper:(0,n.css)({background:f.colors.background.primary,width:"250px"}),item:(0,n.css)({background:"none",padding:"2px 8px",userSelect:"none",color:f.colors.text.primary,cursor:"pointer","&:hover":{background:f.colors.action.hover}}),label:(0,n.css)({color:f.colors.text.secondary}),activeItem:(0,n.css)({background:f.colors.background.secondary,"&:hover":{background:f.colors.background.secondary}}),itemValue:(0,n.css)({fontFamily:f.typography.fontFamilyMonospace,fontSize:f.typography.size.sm})}),u=({suggestions:f,...c})=>{const E=(0,r.useRef)(null);(0,o.Z)(E,()=>{c.onClose&&c.onClose()});const p=(0,r.useMemo)(()=>(0,a.groupBy)(f,y=>y.origin),[f]),h=(0,g.wW)(d);return r.createElement("div",{role:"menu",ref:E,className:h.wrapper},Object.keys(p).map((y,s)=>{const v=s===0?0:Object.keys(p).reduce((C,D,M)=>M>=s?C:C+p[D].length,0);return r.createElement(i,{...c,suggestions:p[y],label:`${(0,a.capitalize)(y)}`,activeIndex:c.activeIndex,activeIndexOffset:v,key:y})}))};u.displayName="DataLinkSuggestions";const i=r.memo(({activeIndex:f,activeIndexOffset:c,label:E,onClose:p,onSuggestionSelect:h,suggestions:y,activeRef:s})=>{const v=(0,g.wW)(d);return r.createElement(r.Fragment,null,r.createElement(m.a,{className:v.list,items:y,renderItem:(C,D)=>{const M=D+c===f;return r.createElement("div",{role:"menuitem",tabIndex:0,className:(0,n.cx)(v.item,M&&v.activeItem),ref:M?s:void 0,onClick:()=>{h(C)},title:C.documentation},r.createElement("span",{className:v.itemValue},r.createElement("span",{className:v.label},E)," ",C.label))}}))});i.displayName="DataLinkSuggestionsList"},22785:(J,R,e)=>{"use strict";e.d(R,{V:()=>d});var n=e(41407),a=e(39953),l=e(28888),r=e(71972),o=e(43867),g=e(43078),m=e(85001);const d=({children:u,links:i,style:f})=>{const c=[{items:(0,r.R)(i),label:"Data links"}],E=c[0].items.length,p=()=>c.map((y,s)=>a.createElement(g.k,{key:`${y.label}${s}`,label:y.label},(y.items||[]).map(v=>a.createElement(m.s,{key:v.label,url:v.url,label:v.label,target:v.target,icon:v.icon,active:v.active,onClick:v.onClick})))),h=(0,n.css)({cursor:"context-menu"});if(E>1)return a.createElement(o.z,{renderMenuItems:p},({openMenu:y})=>u({openMenu:y,targetClassName:h}));{const y=i()[0];return a.createElement("a",{href:y.href,onClick:y.onClick,target:y.target,title:y.title,style:{...f,overflow:"hidden",display:"flex"},"aria-label":l.wl.components.DataLinksContextMenu.singleLink},u({}))}}},86467:(J,R,e)=>{"use strict";e.d(R,{d:()=>D});var n=e(41407),a=e(86832),l=e(39953),r=e(82803),o=e(64084),g=e(4919),m=e(73075),d=e(71972),u=e(96227),i=e(38637),f=e(26286),c=e(95540);const E=P=>({listItem:(0,n.css)({marginBottom:P.spacing()}),infoText:(0,n.css)({paddingBottom:P.spacing(2),marginLeft:"66px",color:P.colors.text.secondary})}),p=l.memo(({index:P,value:x,onChange:S,suggestions:I,isLast:T})=>{const O=(0,r.wW)(E),A=(W,V)=>{S(P,{...x,url:W},V)},B=W=>{S(P,{...x,title:W.target.value})},b=()=>{S(P,{...x,targetBlank:!x.targetBlank})};return l.createElement("div",{className:O.listItem},l.createElement(u.g,{label:"Title"},l.createElement(i.I,{value:x.title,onChange:B,placeholder:"Show details"})),l.createElement(u.g,{label:"URL",invalid:(0,d.g)(x.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},l.createElement(c.v,{value:x.url,onChange:A,suggestions:I})),l.createElement(u.g,{label:"Open in new tab"},l.createElement(f.r,{value:x.targetBlank||!1,onChange:b})),T&&l.createElement("div",{className:O.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});p.displayName="DataLinkEditor";const h=({link:P,index:x,getSuggestions:S,onSave:I,onCancel:T})=>{const[O,A]=(0,l.useState)(P);return l.createElement(l.Fragment,null,l.createElement(p,{value:O,index:x,isLast:!1,suggestions:S(),onChange:(B,b)=>{A(b)}}),l.createElement(m.u.ButtonRow,null,l.createElement(g.zx,{variant:"secondary",onClick:()=>T(x),fill:"outline"},"Cancel"),l.createElement(g.zx,{onClick:()=>{I(x,O)}},"Save")))};var y=e(43324),s=e(68497);const v=({link:P,onEdit:x,onRemove:S})=>{const I=(0,r.l4)(),T=C(I),{title:O="",url:A=""}=P,B=O.trim()!=="",b=A.trim()!=="",W=(0,d.g)(A);return l.createElement("div",{className:T.wrapper},l.createElement("div",{className:T.titleWrapper},l.createElement("div",{className:(0,n.cx)(T.url,!b&&T.notConfigured,W&&T.errored)},B?O:"Data link title not provided"),l.createElement("div",{className:T.actionButtons},l.createElement(s.h,{name:"pen",onClick:x,tooltip:"Edit data link title"}),l.createElement(s.h,{name:"times",onClick:S,tooltip:"Remove data link title"}))),l.createElement("div",{className:(0,n.cx)(T.url,!b&&T.notConfigured,W&&T.errored),title:A},b?A:"Data link url not provided"),W&&l.createElement(y.S,null,"Explore data link may not work in the future. Please edit."))},C=(0,o.B)(P=>({wrapper:(0,n.css)({marginBottom:P.spacing(2),width:"100%","&:last-child":{marginBottom:0},display:"flex",flexDirection:"column"}),titleWrapper:(0,n.css)({label:"data-links-list-item-title",justifyContent:"space-between",display:"flex",width:"100%",alignItems:"center"}),actionButtons:(0,n.css)({marginLeft:P.spacing(1),display:"flex"}),errored:(0,n.css)({color:P.colors.error.text,fontStyle:"italic"}),notConfigured:(0,n.css)({fontStyle:"italic"}),title:(0,n.css)({color:P.colors.text.primary,fontSize:P.typography.size.sm,fontWeight:P.typography.fontWeightMedium}),url:(0,n.css)({color:P.colors.text.secondary,fontSize:P.typography.size.sm,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"90%"})})),D=({links:P,onChange:x,getSuggestions:S,data:I})=>{const T=(0,r.l4)(),[O,A]=(0,l.useState)(null),[B,b]=(0,l.useState)(!1),W=M(T),V=P??[],w=O!==null,K=(j,F)=>{if(B)if(F.title.trim()===""&&F.url.trim()===""){b(!1),A(null);return}else A(null),b(!1);const k=(0,a.cloneDeep)(V);k[j]=F,x(k),A(null)},z=()=>{let j=(0,a.cloneDeep)(V);A(j.length),b(!0)},G=j=>{B&&b(!1),A(null)},Q=j=>{const F=(0,a.cloneDeep)(V);F.splice(j,1),x(F)};return l.createElement(l.Fragment,null,V.length>0&&l.createElement("div",{className:W.wrapper},V.map((j,F)=>l.createElement(v,{key:`${j.title}/${F}`,index:F,link:j,onChange:K,onEdit:()=>A(F),onRemove:()=>Q(F),data:I}))),w&&O!==null&&l.createElement(m.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{G(O)}},l.createElement(h,{index:O,link:B?{title:"",url:""}:V[O],data:I,onSave:K,onCancel:G,getSuggestions:S})),l.createElement(g.zx,{size:"sm",icon:"plus",onClick:z,variant:"secondary"},"Add link"))},M=(0,o.B)(P=>({wrapper:(0,n.css)({marginBottom:P.spacing(2)})}))},63544:(J,R,e)=>{"use strict";e.d(R,{Z:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(12190),o=e(39960);function g({links:d}){const u=(0,l.wW)(m);if(d.length===1)return a.createElement(o.k,{link:d[0]});const i=d.filter(c=>c.target==="_blank"),f=d.filter(c=>c.target==="_self");return a.createElement(a.Fragment,null,f.map((c,E)=>a.createElement(o.k,{key:E,link:c})),a.createElement("div",{className:u.wrapper},a.createElement("p",{className:u.externalLinksHeading},"External links"),i.map((c,E)=>a.createElement("a",{key:E,href:c.href,target:c.target,className:u.externalLink},a.createElement(r.J,{name:"external-link-alt"}),c.title))))}const m=d=>({wrapper:(0,n.css)({flexBasis:"150px",width:"100px",marginTop:d.spacing(1)}),externalLinksHeading:(0,n.css)({color:d.colors.text.secondary,fontWeight:d.typography.fontWeightRegular,fontSize:d.typography.size.sm,margin:0}),externalLink:(0,n.css)({color:d.colors.text.link,fontWeight:d.typography.fontWeightRegular,display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:hover":{textDecoration:"underline"},div:{marginRight:d.spacing(1)}})})},23333:(J,R,e)=>{"use strict";e.d(R,{O:()=>r});var n=e(39953),a=e(26286),l=e(69171);function r({options:o,onOptionsChange:g}){return n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Alerting"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(l._,{labelWidth:29,label:"Manage alert rules in Alerting UI",disabled:o.readOnly,tooltip:"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."},n.createElement(a.x,{value:o.jsonData.manageAlerts!==!1,onChange:m=>g({...o,jsonData:{...o.jsonData,manageAlerts:m.currentTarget.checked}})}))))))}},44062:(J,R,e)=>{"use strict";e.d(R,{W:()=>m});var n=e(39953),a=e(4919),l=e(69171),r=e(74661),o=e(38637),g=e(68421);const m=({hasCert:d,label:u,onChange:i,onClick:f,placeholder:c})=>n.createElement(r.Z,null,n.createElement(l._,{label:u,labelWidth:14,disabled:d},d?n.createElement(o.I,{type:"text",value:"configured",width:24}):n.createElement(g.K,{rows:7,onChange:i,placeholder:c,required:!0})),d&&n.createElement(a.zx,{variant:"secondary",onClick:f,style:{marginLeft:4}},"Reset"))},81177:(J,R,e)=>{"use strict";e.d(R,{H:()=>c});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(64084),g=e(4919),m=e(12392),d=e(12190),u=e(16557);const i=(0,o.B)(()=>({layout:(0,n.css)({display:"flex",alignItems:"center",marginBottom:"4px","> *":{marginLeft:"4px",marginBottom:0,height:"100%","&:first-child, &:last-child":{marginLeft:0}}})})),f=({header:p,onBlur:h,onChange:y,onRemove:s,onReset:v})=>{const C=i();return r.createElement("div",{className:C.layout},r.createElement(m.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:p.name||"",onChange:D=>y({...p,name:D.target.value}),onBlur:h}),r.createElement(u.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:p.configured,value:p.value,labelWidth:5,inputWidth:p.configured?11:12,placeholder:"Header Value",onReset:()=>v(p.id),onChange:D=>y({...p,value:D.target.value}),onBlur:h}),r.createElement(g.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:D=>s(p.id)},r.createElement(d.J,{name:"trash-alt"})))};f.displayName="CustomHeaderRow";class c extends r.PureComponent{constructor(h){super(h),this.state={headers:[]},this.updateSettings=()=>{const{headers:C}=this.state,D=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([P,x])=>!P.startsWith("httpHeaderName"))),M=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([P,x])=>!P.startsWith("httpHeaderValue")));for(const[P,x]of C.entries())D[`httpHeaderName${P+1}`]=x.name,x.configured||(M[`httpHeaderValue${P+1}`]=x.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:D,secureJsonData:M})},this.onHeaderAdd=()=>{this.setState(C=>({headers:[...C.headers,{id:(0,a.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(C,D)=>{this.setState(({headers:M})=>({headers:M.map((P,x)=>C!==x?P:{...D})}))},this.onHeaderReset=C=>{this.setState(({headers:D})=>({headers:D.map((M,P)=>M.id!==C?M:{...M,value:"",configured:!1})}))},this.onHeaderRemove=C=>{this.setState(({headers:D})=>({headers:D.filter(M=>M.id!==C)}),this.updateSettings)};const{jsonData:y,secureJsonData:s,secureJsonFields:v}=this.props.dataSourceConfig;this.state={headers:Object.keys(y).sort().filter(C=>C.startsWith("httpHeaderName")).map((C,D)=>({id:(0,a.uniqueId)(),name:y[C],value:s!==void 0?s[C]:"",configured:v&&v[`httpHeaderValue${D+1}`]||!1}))}}render(){const{headers:h}=this.state,{dataSourceConfig:y}=this.props;return r.createElement("div",{className:"gf-form-group"},r.createElement("div",{className:"gf-form"},r.createElement("h6",null,"Custom HTTP Headers")),r.createElement("div",null,h.map((s,v)=>r.createElement(f,{key:s.id,header:s,onChange:C=>{this.onHeaderChange(v,C)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!y.readOnly&&r.createElement("div",{className:"gf-form"},r.createElement(g.zx,{variant:"secondary",icon:"plus",type:"button",onClick:s=>{this.onHeaderAdd()}},"Add header")))}}var E=null},3782:(J,R,e)=>{"use strict";e.d(R,{E:()=>S});var n=e(41407),a=e(39953),l=e(28888),r=e(82803),o=e(12392),g=e(56921),m=e(69171),d=e(27325),u=e(12190),i=e(9558),f=e(26286),c=e(97250),E=e(16557);const p=({dataSourceConfig:I,onChange:T})=>{const O=I.secureJsonData?I.secureJsonData.basicAuthPassword:"",A=()=>{T({...I,secureJsonData:{...I.secureJsonData,basicAuthPassword:""},secureJsonFields:{...I.secureJsonFields,basicAuthPassword:!1}})},B=b=>{T({...I,secureJsonData:{...I.secureJsonData,basicAuthPassword:b.currentTarget.value}})};return a.createElement(a.Fragment,null,a.createElement(m._,{disabled:I.readOnly},a.createElement(o.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:I.basicAuthUser,onChange:b=>T({...I,basicAuthUser:b.currentTarget.value})})),a.createElement(m._,{disabled:I.readOnly},a.createElement(E.c,{isConfigured:!!(I.secureJsonFields&&I.secureJsonFields.basicAuthPassword),value:O||"",inputWidth:18,labelWidth:10,onReset:A,onChange:B})))};var h=e(81177);const y=26,s=({dataSourceConfig:I,onChange:T,showForwardOAuthIdentityOption:O=!0})=>a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement(m._,{label:"TLS Client Auth",labelWidth:y,disabled:I.readOnly},a.createElement(f.x,{id:"http-settings-tls-client-auth",value:I.jsonData.tlsAuth||!1,onChange:A=>T({...I.jsonData,tlsAuth:A.currentTarget.checked})})),a.createElement(m._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:y,disabled:I.readOnly},a.createElement(f.x,{id:"http-settings-ca-cert",value:I.jsonData.tlsAuthWithCACert||!1,onChange:A=>T({...I.jsonData,tlsAuthWithCACert:A.currentTarget.checked})}))),a.createElement("div",{className:"gf-form-inline"},a.createElement(m._,{label:"Skip TLS Verify",labelWidth:y,disabled:I.readOnly},a.createElement(f.x,{id:"http-settings-skip-tls-verify",value:I.jsonData.tlsSkipVerify||!1,onChange:A=>T({...I.jsonData,tlsSkipVerify:A.currentTarget.checked})}))),O&&a.createElement("div",{className:"gf-form-inline"},a.createElement(m._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:y,disabled:I.readOnly},a.createElement(f.x,{id:"http-settings-forward-oauth",value:I.jsonData.oauthPassThru||!1,onChange:A=>T({...I.jsonData,oauthPassThru:A.currentTarget.checked})}))));var v=e(47169),C=e(40108);const D=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],M={label:"Server (default)",value:"proxy"},P=()=>a.createElement("div",{className:"grafana-info-box m-t-2"},a.createElement("p",null,"Access mode controls how requests to the data source will be handled.",a.createElement("strong",null,"\xA0",a.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),a.createElement("div",{className:"alert-title"},"Server access mode (Default):"),a.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),a.createElement("div",{className:"alert-title"},"Browser access mode:"),a.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),x=26,S=I=>{const{defaultUrl:T,dataSourceConfig:O,onChange:A,showAccessOptions:B,sigV4AuthToggleEnabled:b,showForwardOAuthIdentityOption:W,azureAuthSettings:V,renderSigV4Editor:w,secureSocksDSProxyEnabled:K,urlLabel:z,urlDocs:G}=I,[Q,j]=(0,a.useState)(!1),[F,k]=(0,a.useState)(!1),_=(0,r.l4)();let Y;const Z=(0,a.useCallback)(te=>{const fe=V?.azureAuthSupported&&V.getAzureAuthEnabled(O)||!1;if(k(fe),fe){const Te=O.jsonData.oauthPassThru!==void 0?O.jsonData.oauthPassThru:!1;te={...te,jsonData:{...O.jsonData,oauthPassThru:fe?!1:Te}}}A({...O,...te})},[V,O,A]);switch(O.access){case"direct":Y=a.createElement(a.Fragment,null,"Your access method is ",a.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",G);break;case"proxy":Y=a.createElement(a.Fragment,null,"Your access method is ",a.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",G);break;default:Y=a.createElement(a.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",G)}const ae=a.createElement(i.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:D,value:D.filter(te=>te.value===O.access)[0]||M,onChange:te=>Z({access:te.value}),disabled:O.readOnly}),ce=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(O.url),q=(0,n.css)({boxShadow:`inset 0 0px 5px ${_.v1.palette.red}`}),De=(0,n.cx)({["width-20"]:!0,[q]:!ce}),oe=a.createElement(d.I,{className:De,placeholder:T,value:O.url,"aria-label":l.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:te=>Z({url:te.currentTarget.value}),disabled:O.readOnly});return a.createElement("div",{className:"gf-form-group"},a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"HTTP"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement(o.W,{interactive:!!G,label:z??"URL",labelWidth:13,tooltip:Y,inputEl:oe})),B&&a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(o.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:ae})),a.createElement("div",{className:"gf-form"},a.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>j(te=>!te)},"Help\xA0",a.createElement(u.J,{name:Q?"angle-down":"angle-right",style:{marginBottom:0}})))),Q&&a.createElement(P,null)),O.access==="proxy"&&a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement(g.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),a.createElement(c.B,{tags:O.jsonData.keepCookies,width:40,onChange:te=>Z({jsonData:{...O.jsonData,keepCookies:te}}),disabled:O.readOnly})),a.createElement("div",{className:"gf-form"},a.createElement(o.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:O.jsonData.timeout,onChange:te=>{Z({jsonData:{...O.jsonData,timeout:parseInt(te.currentTarget.value,10)}})},disabled:O.readOnly}))))),a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Auth"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement(m._,{label:"Basic auth",labelWidth:x,disabled:O.readOnly},a.createElement(f.x,{id:"http-settings-basic-auth",value:O.basicAuth,onChange:te=>{Z({basicAuth:te.currentTarget.checked})}})),a.createElement(m._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:x,disabled:O.readOnly},a.createElement(f.x,{id:"http-settings-with-credentials",value:O.withCredentials,onChange:te=>{Z({withCredentials:te.currentTarget.checked})}}))),V?.azureAuthSupported&&a.createElement("div",{className:"gf-form-inline"},a.createElement(m._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:x,disabled:O.readOnly},a.createElement(f.x,{id:"http-settings-azure-auth",value:F,onChange:te=>{Z(V.setAzureAuthEnabled(O,te.currentTarget.checked))}}))),b&&a.createElement("div",{className:"gf-form-inline"},a.createElement(m._,{label:"SigV4 auth",labelWidth:x,disabled:O.readOnly},a.createElement(f.x,{id:"http-settings-sigv4-auth",value:O.jsonData.sigV4Auth||!1,onChange:te=>{Z({jsonData:{...O.jsonData,sigV4Auth:te.currentTarget.checked}})}}))),O.access==="proxy"&&a.createElement(s,{dataSourceConfig:O,onChange:te=>Z({jsonData:te}),showForwardOAuthIdentityOption:F?!1:W})),O.basicAuth&&a.createElement(a.Fragment,null,a.createElement("h6",null,"Basic Auth Details"),a.createElement("div",{className:"gf-form-group"},a.createElement(p,{...I}))),V?.azureAuthSupported&&F&&V.azureSettingsUI&&a.createElement(V.azureSettingsUI,{dataSourceConfig:O,onChange:A}),O.jsonData.sigV4Auth&&b&&w,(O.jsonData.tlsAuth||O.jsonData.tlsAuthWithCACert)&&a.createElement(C.s,{dataSourceConfig:O,onChange:A}),O.access==="proxy"&&a.createElement(h.H,{dataSourceConfig:O,onChange:A})),K&&a.createElement(v.i,{options:O,onOptionsChange:A}))}},47169:(J,R,e)=>{"use strict";e.d(R,{i:()=>r});var n=e(39953),a=e(26286),l=e(69171);function r({options:o,onOptionsChange:g}){return n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(l._,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},n.createElement(a.x,{value:o.jsonData.enableSecureSocksProxy??!1,onChange:m=>g({...o,jsonData:{...o.jsonData,enableSecureSocksProxy:m.currentTarget.checked}})}))))))}},40108:(J,R,e)=>{"use strict";e.d(R,{s:()=>m});var n=e(41407),a=e(39953),l=e(12392),r=e(12190),o=e(69865),g=e(44062);const m=({dataSourceConfig:d,onChange:u})=>{const i=d.secureJsonFields&&d.secureJsonFields.tlsCACert,f=d.secureJsonFields&&d.secureJsonFields.tlsClientCert,c=d.secureJsonFields&&d.secureJsonFields.tlsClientKey,E=d.jsonData&&d.jsonData.serverName,p=s=>v=>{v.preventDefault();const C={...d.secureJsonFields};C[s]=!1,u({...d,secureJsonFields:C})},h=s=>v=>{const C={...d.secureJsonData};C[s]=v.currentTarget.value,u({...d,secureJsonData:C})},y=s=>{const v={...d.jsonData,serverName:s.currentTarget.value};u({...d,jsonData:v})};return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:(0,n.cx)("gf-form",(0,n.css)({alignItems:"baseline"}))},a.createElement("h6",null,"TLS/SSL Auth Details"),a.createElement(o.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},a.createElement(r.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}}))),a.createElement("div",null,d.jsonData.tlsAuthWithCACert&&a.createElement(g.W,{hasCert:!!i,onChange:h("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:p("tlsCACert")}),d.jsonData.tlsAuth&&a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form"},a.createElement(l.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:E&&d.jsonData.serverName,onChange:y})),a.createElement(g.W,{hasCert:!!f,label:"Client Cert",onChange:h("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:p("tlsClientCert")}),a.createElement(g.W,{hasCert:!!c,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:h("tlsClientKey"),onClick:p("tlsClientKey")}))))}},90838:(J,R,e)=>{"use strict";e.d(R,{M:()=>d});var n=e(41407),a=e(39953),l=e(73371),r=e(82803),o=e(846),g=e(12190),m=e(18852);const d=(0,a.memo)(f=>{const c=(0,r.wW)(i),{isOpen:E,onClose:p}=f;return E?a.createElement(o.L,{useCapture:!0,includeButtonPress:!1,onClick:p},a.createElement("div",{className:c.modal,"data-testid":"date-picker"},a.createElement(u,{...f}))):null});d.displayName="DatePicker";const u=(0,a.memo)(({value:f,minDate:c,maxDate:E,onChange:p})=>{const h=(0,r.wW)(m.mg);return a.createElement(l.ZP,{className:h.body,tileClassName:h.title,value:f||new Date,minDate:c,maxDate:E,nextLabel:a.createElement(g.J,{name:"angle-right"}),prevLabel:a.createElement(g.J,{name:"angle-left"}),onChange:y=>{y&&!Array.isArray(y)&&p(y)},locale:"en"})});u.displayName="Body";const i=f=>({modal:(0,n.css)({zIndex:f.zIndex.modal,position:"absolute",boxShadow:f.shadows.z3,backgroundColor:f.colors.background.primary,border:`1px solid ${f.colors.border.weak}`,borderTopLeftRadius:f.shape.radius.default,borderBottomLeftRadius:f.shape.radius.default,"button:disabled":{color:f.colors.text.disabled}})})},16991:(J,R,e)=>{"use strict";e.d(R,{d:()=>d});var n=e(41407),a=e(39953),l=e(92403),r=e(82803),o=e(38637),g=e(90838);const m=i=>(0,l.CQ)(i).format("L"),d=({value:i,minDate:f,maxDate:c,onChange:E,closeOnSelect:p,placeholder:h="Date",...y})=>{const[s,v]=a.useState(!1),C=(0,r.wW)(u);return a.createElement("div",{className:C.container},a.createElement(o.I,{type:"text",autoComplete:"off",placeholder:h,value:i&&m(i),onClick:()=>v(!0),onChange:D=>{D.target.value===""&&E("")},className:C.input,...y}),a.createElement(g.M,{isOpen:s,value:i&&typeof i!="string"?i:(0,l.CQ)().toDate(),minDate:f,maxDate:c,onChange:D=>{E(D),p&&v(!1)},onClose:()=>v(!1)}))},u=()=>({container:(0,n.css)({position:"relative"}),input:(0,n.css)({"input[type='date']::-webkit-inner-spin-button, input[type='date']::-webkit-calendar-picker-indicator":{display:"none",WebkitAppearance:"none"}})})},67823:(J,R,e)=>{"use strict";e.d(R,{x:()=>P});var n=e(41407),a=e(41056),l=e(30064),r=e(17037),o=e(39953),g=e(73371),m=e(76941),d=e(15138),u=e(48069),i=e(92403),f=e(82803),c=e(4919),E=e(69171),p=e(12190),h=e(38637),y=e(12223),s=e(75250),v=e(70393),C=e(63930),D=e(18852),M=e(78911);const P=({date:T,maxDate:O,minDate:A,label:B,onChange:b,disabledHours:W,disabledMinutes:V,disabledSeconds:w,showSeconds:K=!0})=>{const[z,G]=(0,o.useState)(!1),Q=(0,o.useRef)(null),{overlayProps:j,underlayProps:F}=(0,r.Ir)({onClose:()=>G(!1),isDismissable:!0,isOpen:z,shouldCloseOnInteractOutside:ge=>{const he=document.getElementsByClassName(C.F)[0];return!(he&&he.contains(ge))}},Q),{dialogProps:k}=(0,a.R)({},Q),_=(0,f.l4)(),{modalBackdrop:Y}=(0,s.J)(_),Z=(0,d.Z)(`(min-width: ${_.breakpoints.values.lg}px)`),ae=(0,f.wW)(I),[ce,q]=(0,o.useState)(),[De,oe]=(0,o.useState)(),te=(0,m.D)(ce,De,{placement:"bottom-start"}),fe=(0,o.useCallback)(ge=>{G(!1),b(ge)},[b]),Te=(0,o.useCallback)(ge=>{ge.preventDefault(),G(!0)},[G]);return o.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},o.createElement(x,{date:T,onChange:b,isFullscreen:Z,onOpen:Te,label:B,ref:q,showSeconds:K}),z?Z?o.createElement(v.h_,null,o.createElement(l.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},o.createElement("div",{ref:Q,...j,...k},o.createElement(S,{date:T,onChange:fe,isFullscreen:!0,onClose:()=>G(!1),maxDate:O,minDate:A,ref:oe,style:te.styles.popper,showSeconds:K,disabledHours:W,disabledMinutes:V,disabledSeconds:w})))):o.createElement(v.h_,null,o.createElement("div",{className:Y,...F}),o.createElement(l.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},o.createElement("div",{ref:Q,...j,...k},o.createElement("div",{className:ae.modal},o.createElement(S,{date:T,maxDate:O,minDate:A,onChange:fe,isFullscreen:!1,onClose:()=>G(!1),showSeconds:K,disabledHours:W,disabledMinutes:V,disabledSeconds:w}))))):null)},x=o.forwardRef(({date:T,label:O,onChange:A,onOpen:B,showSeconds:b=!0},W)=>{const V=b?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[w,K]=(0,o.useState)(()=>({value:T?(0,u.dq)(T):(0,u.dq)((0,i.CQ)()),invalid:!1}));(0,o.useEffect)(()=>{T&&K({invalid:!(0,M.J)((0,u.dq)(T,{format:V})),value:(0,i.v9)(T)?(0,u.dq)(T,{format:V}):T})},[T,V]);const z=(0,o.useCallback)(j=>{const F=!(0,M.J)(j.currentTarget.value);K({value:j.currentTarget.value,invalid:F})},[]),G=(0,o.useCallback)(()=>{if(!w.invalid){const j=(0,i.CQ)(w.value);A(j)}},[w,A]),Q=o.createElement(c.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:B});return o.createElement(E._,{label:O,invalid:!!(w.value&&w.invalid),className:(0,n.css)({marginBottom:0})},o.createElement(h.I,{onChange:z,addonAfter:Q,value:w.value,onBlur:G,"data-testid":"date-time-input",placeholder:"Select date/time",ref:W}))});x.displayName="DateTimeInput";const S=o.forwardRef(({date:T,onClose:O,onChange:A,isFullscreen:B,maxDate:b,minDate:W,style:V,showSeconds:w=!0,disabledHours:K,disabledMinutes:z,disabledSeconds:G},Q)=>{const j=(0,f.wW)(D.mg),F=(0,f.wW)(I),[k,_]=(0,o.useState)(()=>T&&T.isValid()?T.toDate():new Date),Y=(0,o.useCallback)(ae=>{ae&&!Array.isArray(ae)&&_(ce=>(ae.setHours(ce.getHours()),ae.setMinutes(ce.getMinutes()),ae.setSeconds(ce.getSeconds()),ae))},[]),Z=(0,o.useCallback)(ae=>{_(ae.toDate())},[]);return o.createElement("div",{className:(0,n.cx)(F.container,{[F.fullScreen]:B}),style:V,ref:Q},o.createElement(g.ZP,{next2Label:null,prev2Label:null,value:k,nextLabel:o.createElement(p.J,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:o.createElement(p.J,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:Y,locale:"en",className:j.body,tileClassName:j.title,maxDate:b,minDate:W}),o.createElement("div",{className:F.time},o.createElement(C.y,{showSeconds:w,onChange:Z,value:(0,i.CQ)(k),disabledHours:K,disabledMinutes:z,disabledSeconds:G})),o.createElement(y.Lh,null,o.createElement(c.zx,{type:"button",onClick:()=>A((0,i.CQ)(k))},"Apply"),o.createElement(c.zx,{variant:"secondary",type:"button",onClick:O},"Cancel")))});S.displayName="DateTimeCalendar";const I=T=>({container:(0,n.css)({padding:T.spacing(1),border:`1px ${T.colors.border.weak} solid`,borderRadius:T.shape.radius.default,backgroundColor:T.colors.background.primary,zIndex:T.zIndex.modal}),fullScreen:(0,n.css)({position:"absolute"}),time:(0,n.css)({marginBottom:T.spacing(2)}),modal:(0,n.css)({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:T.zIndex.modal,maxWidth:"280px"})})},47158:(J,R,e)=>{"use strict";e.d(R,{x:()=>D});var n=e(41407),a=e(41056),l=e(30064),r=e(17037),o=e(39953),g=e(76941),m=e(82803),d=e(28384),u=e(4919),i=e(64447),f=e(96227),c=e(12190),E=e(38637),p=e(69865),h=e(89860),y=e(10781),s=e(58682),v=e(71591);const C=s.r.filter(I=>(0,v.jD)(I.from));function D(I){const{timeRange:T,onChange:O}=I,[A,B]=(0,o.useState)(!1),b=(0,o.useCallback)(()=>B(!1),[]),W=(0,v.C_)(T),[V,w]=(0,o.useState)({value:W.from,validation:(0,v.x5)(W.from)}),[K,z]=(0,o.useState)({value:W.to,validation:(0,v.x5)(W.to)}),G=(0,o.useRef)(null),{overlayProps:Q,underlayProps:j}=(0,r.Ir)({onClose:()=>B(!1),isDismissable:!0,isOpen:A},G),{dialogProps:F}=(0,a.R)({},G),[k,_]=(0,o.useState)(null),[Y,Z]=(0,o.useState)(null),ae=(0,g.D)(k,Y,{placement:"auto-start"}),ce=(0,m.wW)(x(V.validation.errorMessage,K.validation.errorMessage)),q=te=>{const fe=(0,v.aw)(te);fe&&(b(),w({...V,value:te.from}),z({...K,value:te.to}),O(fe))},De=(0,o.useCallback)(te=>{te.stopPropagation(),te.preventDefault(),B(!A)},[A]),oe=te=>{if(te.preventDefault(),!K.validation.isValid||!V.validation.isValid)return;const fe=(0,v.aw)({from:V.value,to:K.value,display:""});fe&&(O(fe),B(!1))};return o.createElement("div",{className:ce.container,ref:_},o.createElement("button",{className:ce.pickerInput,type:"button",onClick:De},o.createElement("span",{className:ce.clockIcon},o.createElement(c.J,{name:"clock-nine"})),o.createElement("span",null,W.from," to ",W.to),o.createElement("span",{className:ce.caretIcon},o.createElement(c.J,{name:A?"angle-up":"angle-down",size:"lg"}))),A&&o.createElement("div",null,o.createElement("div",{role:"presentation",className:ce.backdrop,...j}),o.createElement(l.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},o.createElement("div",{ref:G,...Q,...F},o.createElement("div",{className:ce.content,ref:Z,style:ae.styles.popper,...ae.attributes},o.createElement("div",{className:ce.body},o.createElement(i.Z,{className:ce.leftSide,hideHorizontalTrack:!0},o.createElement(y.V,{title:(0,d.t)("time-picker.time-range.example-title","Example time ranges"),options:C,onChange:q,value:W})),o.createElement("div",{className:ce.rightSide},o.createElement("div",{className:ce.title},o.createElement(h.r,null,o.createElement(p.u,{content:o.createElement(M,null),placement:"bottom",theme:"info"},o.createElement("div",null,o.createElement(d.c,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",o.createElement(c.J,{name:"info-circle"})))))),o.createElement(f.g,{label:"From",invalid:!V.validation.isValid,error:V.validation.errorMessage},o.createElement(E.I,{onClick:te=>te.stopPropagation(),onBlur:()=>w({...V,validation:(0,v.x5)(V.value)}),onChange:te=>w({...V,value:te.currentTarget.value}),value:V.value})),o.createElement(f.g,{label:"To",invalid:!K.validation.isValid,error:K.validation.errorMessage},o.createElement(E.I,{onClick:te=>te.stopPropagation(),onBlur:()=>z({...K,validation:(0,v.x5)(K.value)}),onChange:te=>z({...K,value:te.currentTarget.value}),value:K.value})),o.createElement(u.zx,{"aria-label":"TimePicker submit button",onClick:oe},"Apply time range"))))))))}const M=()=>{const I=(0,m.wW)(P);return o.createElement(o.Fragment,null,o.createElement("div",{className:I.supported},"Supported formats: ",o.createElement("code",{className:I.tooltip},"now-[digit]s/m/h/d/w")),o.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),o.createElement("code",{className:I.tooltip},"From: now-10m To: now"),o.createElement("div",{className:I.link},"For more information see"," ",o.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",o.createElement(c.J,{name:"external-link-alt"})),"."))},P=I=>({supported:(0,n.css)({marginBottom:I.spacing(1)}),tooltip:(0,n.css)({margin:0}),link:(0,n.css)({marginTop:I.spacing(1)})}),x=(I,T)=>O=>{const A=(0,E.H)({theme:O,invalid:!1}),b=250+S(O,I)+S(O,T);return{backdrop:(0,n.css)({position:"fixed",zIndex:O.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0}),container:(0,n.css)({display:"flex",position:"relative"}),pickerInput:(0,n.cx)(A.input,A.wrapper,(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,paddingLeft:0,lineHeight:`${O.spacing.gridSize*O.components.height.md-2}px`})),caretIcon:(0,n.cx)(A.suffix,(0,n.css)({position:"relative",marginLeft:O.spacing(.5)})),clockIcon:(0,n.cx)(A.prefix,(0,n.css)({position:"relative",marginRight:O.spacing(.5)})),content:(0,n.css)({background:O.colors.background.primary,boxShadow:O.shadows.z3,position:"absolute",zIndex:O.zIndex.modal,width:"500px",top:"100%",borderRadius:O.shape.radius.default,border:`1px solid ${O.colors.border.weak}`,left:0,whiteSpace:"normal"}),body:(0,n.css)({display:"flex",height:`${b}px`}),description:(0,n.css)({color:O.colors.text.secondary,fontSize:O.typography.size.sm}),leftSide:(0,n.css)({width:"50% !important",borderRight:`1px solid ${O.colors.border.medium}`}),rightSide:(0,n.css)({width:"50%",padding:O.spacing(1)}),title:(0,n.css)({marginBottom:O.spacing(1)})}};function S(I,T){return T?T.length>34?I.spacing.gridSize*6.5:I.spacing.gridSize*4:0}},71591:(J,R,e)=>{"use strict";e.d(R,{C_:()=>l,aw:()=>a,jD:()=>o,x5:()=>r});const n=/^now$|^now\-(\d{1,10})([wdhms])$/,a=u=>({from:g(u.from),to:g(u.to)}),l=u=>{const i=d(u.from),f=d(u.to);return{from:i,to:f,display:`${i} to ${f}`}},r=(u,i=Date.now())=>o(u)?g(u)>Math.ceil(i/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},o=u=>n.test(u),g=u=>{const i=n.exec(u);if(!i||i.length!==3)return 0;const[,f,c]=i,E=parseInt(f,10);return isNaN(E)?0:E*m[c]},m={w:604800,d:86400,h:3600,m:60,s:1},d=u=>u<=0?"now":u>=m.w&&u%m.w===0?`now-${u/m.w}w`:u>=m.d&&u%m.d===0?`now-${u/m.d}d`:u>=m.h&&u%m.h===0?`now-${u/m.h}h`:u>=m.m&&u%m.m===0?`now-${u/m.m}m`:`now-${u}s`},63930:(J,R,e)=>{"use strict";e.d(R,{F:()=>u,y:()=>i});var n=e(41407),a=e(43374),l=e(39953),r=e(92403),o=e(82803),g=e(53039),m=e(15530),d=e(12190);const u="time-of-day-picker-panel",i=({minuteStep:E=1,showHour:p=!0,showSeconds:h=!1,onChange:y,value:s,size:v="auto",disabled:C,disabledHours:D,disabledMinutes:M,disabledSeconds:P})=>{const x=(0,o.wW)(c);return l.createElement(a.Z,{className:(0,n.cx)((0,m.ht)()[v],x.input),popupClassName:(0,n.cx)(x.picker,u),defaultValue:(0,r.C_)(),onChange:S=>{if((0,r.D2)(S))return y((0,r.CQ)(S))},allowEmpty:!1,showSecond:h,value:(0,r.C_)(s),showHour:p,minuteStep:E,inputIcon:l.createElement(f,{wrapperStyle:x.caretWrapper}),disabled:C,disabledHours:D,disabledMinutes:M,disabledSeconds:P})},f=({wrapperStyle:E=""})=>l.createElement("div",{className:E},l.createElement(d.J,{name:"angle-down"})),c=E=>{const p=E.components.input.background,h=E.v1.palette.black,y=E.colors.background.secondary,s=E.shape.radius.default,v=E.components.input.borderColor;return{caretWrapper:(0,n.css)({position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",display:"inline-block",textAlign:"right",color:E.colors.text.secondary}),picker:(0,n.css)({".rc-time-picker-panel-select":{fontSize:"14px",backgroundColor:p,borderColor:v,li:{outlineWidth:"2px","&.rc-time-picker-panel-select-option-selected":{backgroundColor:"inherit",border:`1px solid ${E.v1.palette.orange}`,borderRadius:s},"&:hover":{background:y},"&.rc-time-picker-panel-select-option-disabled":{color:E.colors.action.disabledText}}},".rc-time-picker-panel-inner":{boxShadow:`0px 4px 4px ${h}`,backgroundColor:p,borderColor:v,borderRadius:s,marginTop:"3px",".rc-time-picker-panel-input-wrap":{marginRight:"2px","&, .rc-time-picker-panel-input":{backgroundColor:p,paddingTop:"2px"}},".rc-time-picker-panel-combobox":{display:"flex"}}}),input:(0,n.css)({".rc-time-picker-input":{backgroundColor:p,borderRadius:s,borderColor:v,height:E.spacing(4),"&:focus":(0,g.getFocusStyles)(E),"&:disabled":{backgroundColor:E.colors.action.disabledBackground,color:E.colors.action.disabledText,border:`1px solid ${E.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}}})}}},88252:(J,R,e)=>{"use strict";e.d(R,{K:()=>y});var n=e(41407),a=e(39953),l=e(92403),r=e(54554),o=e(28888),g=e(64084),m=e(82803),d=e(846),u=e(12190),i=e(38637),f=e(49954),c=e(48408),E=e(58682),p=e(78911);const h=()=>{},y=({value:v,onChange:C,onChangeTimeZone:D=h,clearable:M,hideTimeZone:P=!0,timeZone:x="browser",placeholder:S="Select time range",isReversed:I=!0,hideQuickRanges:T=!1,disabled:O=!1,showIcon:A=!1})=>{const[B,b]=(0,a.useState)(!1),W=(0,m.l4)(),V=s(W,O),w=Q=>{Q.stopPropagation(),Q.preventDefault(),!O&&b(!B)},K=()=>{b(!1)},z=Q=>{K(),C(Q)},G=Q=>{Q.stopPropagation();const j=(0,l.CQ)(null),F=(0,l.CQ)(null);C({from:j,to:F,raw:{from:j,to:F}})};return a.createElement("div",{className:V.container},a.createElement("button",{type:"button",className:V.pickerInput,"aria-label":o.wl.components.TimePicker.openButton,onClick:w},A&&a.createElement(u.J,{name:"clock-nine",size:"sm",className:V.icon}),a.createElement(c.q,{value:v,timeZone:x,placeholder:S}),!O&&a.createElement("span",{className:V.caretIcon},(0,p.v)(v)&&M&&a.createElement(u.J,{className:V.clearIcon,name:"times",size:"lg",onClick:G}),a.createElement(u.J,{name:B?"angle-up":"angle-down",size:"lg"}))),B&&a.createElement(d.L,{includeButtonPress:!1,onClick:K},a.createElement(f.x,{timeZone:x,value:(0,p.v)(v)?v:(0,r.JK)(),onChange:z,quickOptions:E.r,onChangeTimeZone:D,className:V.content,hideTimeZone:P,isReversed:I,hideQuickRanges:T})))},s=(0,g.B)((v,C=!1)=>{const D=(0,i.H)({theme:v,invalid:!1});return{container:(0,n.css)({display:"flex",position:"relative"}),content:(0,n.css)({marginLeft:0,position:"absolute",top:"116%",zIndex:v.zIndex.dropdown}),pickerInput:(0,n.cx)(D.input,C&&D.inputDisabled,D.wrapper,(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,lineHeight:`${v.spacing.gridSize*4-2}px`})),caretIcon:(0,n.cx)(D.suffix,(0,n.css)({position:"relative",top:"-1px",marginLeft:v.spacing(.5)})),clearIcon:(0,n.css)({marginRight:v.spacing(.5),"&:hover":{color:v.colors.text.maxContrast}}),placeholder:(0,n.css)({color:v.colors.text.disabled,opacity:1}),icon:(0,n.css)({marginRight:v.spacing(.5)})}})},56064:(J,R,e)=>{"use strict";e.d(R,{IF:()=>P,Xc:()=>D,sU:()=>x});var n=e(41407),a=e(41056),l=e(30064),r=e(17037),o=e(39953),g=e(92403),m=e(48069),d=e(36602),u=e(81626),i=e(77877),f=e(28888),c=e(82803),E=e(28384),p=e(48824),h=e(75250),y=e(3839),s=e(69865),v=e(49954),C=e(58682);function D(O){const[A,B]=(0,o.useState)(!1),{value:b,onMoveBackward:W,onMoveForward:V,onZoom:w,timeZone:K,fiscalYearStartMonth:z,timeSyncButton:G,isSynced:Q,history:j,onChangeTimeZone:F,onChangeFiscalYearStartMonth:k,hideQuickRanges:_,widthOverride:Y,isOnCanvas:Z}=O,ae=Oe=>{O.onChange(Oe),B(!1)},ce=Oe=>{Oe.stopPropagation(),Oe.preventDefault(),B(!A)},q=()=>{B(!1)},De=(0,o.createRef)(),{overlayProps:oe,underlayProps:te}=(0,r.Ir)({onClose:q,isDismissable:!0,isOpen:A},De),{dialogProps:fe}=(0,a.R)({},De),Te=(0,c.l4)(),ge=(0,c.wW)(I),{modalBackdrop:he}=(0,h.J)(Te),me=(0,g.v9)(b.raw.from)||(0,g.v9)(b.raw.to),ye=Q?"active":Z?"canvas":"default",ue=S(b,K);return o.createElement(p.h,{className:ge.container},me&&o.createElement(y.h,{"aria-label":(0,E.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:ye,onClick:W,icon:"angle-left",narrow:!0}),o.createElement(s.u,{content:o.createElement(P,{timeRange:b,timeZone:K}),placement:"bottom",interactive:!0},o.createElement(y.h,{"data-testid":f.wl.components.TimePicker.openButton,"aria-label":(0,E.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:ue}),"aria-controls":"TimePickerContent",onClick:ce,icon:"clock-nine",isOpen:A,variant:ye},o.createElement(x,{...O}))),A&&o.createElement("div",null,o.createElement("div",{role:"presentation",className:(0,n.cx)(he,ge.backdrop),...te}),o.createElement(l.MT,{contain:!0,autoFocus:!0},o.createElement("section",{className:ge.content,ref:De,...oe,...fe},o.createElement(v.x,{timeZone:K,fiscalYearStartMonth:z,value:b,onChange:ae,quickOptions:C.r,history:j,showHistory:!0,widthOverride:Y,onChangeTimeZone:F,onChangeFiscalYearStartMonth:k,hideQuickRanges:_})))),G,me&&o.createElement(y.h,{"aria-label":(0,E.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:V,icon:"angle-right",narrow:!0,variant:ye}),o.createElement(s.u,{content:M,placement:"bottom"},o.createElement(y.h,{"aria-label":(0,E.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:w,icon:"search-minus",variant:ye})))}D.displayName="TimeRangePicker";const M=()=>o.createElement(o.Fragment,null,o.createElement(E.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",o.createElement("br",null)," CTRL+Z")),P=({timeRange:O,timeZone:A})=>{const B=(0,c.wW)(T);return o.createElement(o.Fragment,null,(0,m.dq)(O.from,{timeZone:A}),o.createElement("div",{className:"text-center"},o.createElement(E.c,{i18nKey:"time-picker.range-picker.to"},"to")),(0,m.dq)(O.to,{timeZone:A}),o.createElement("div",{className:"text-center"},o.createElement("span",{className:B.utc},(0,d.Vs)(A))))},x=(0,o.memo)(({hideText:O,value:A,timeZone:B})=>{const b=(0,c.wW)(T);return O?null:o.createElement("span",{className:b.container},o.createElement("span",null,S(A,B)),o.createElement("span",{className:b.utc},u.describeTimeRangeAbbreviation(A,B)))});x.displayName="TimePickerButtonLabel";const S=(O,A)=>{const B={to:i.isMathString(O.raw.to)?O.raw.to:O.to,from:i.isMathString(O.raw.from)?O.raw.from:O.from};return u.describeTimeRange(B,A)},I=O=>({container:(0,n.css)({position:"relative",display:"flex",verticalAlign:"middle"}),backdrop:(0,n.css)({display:"none",[O.breakpoints.down("sm")]:{display:"block"}}),content:(0,n.css)({position:"absolute",right:0,top:"116%",zIndex:O.zIndex.dropdown,[O.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:O.zIndex.modal}})}),T=O=>({container:(0,n.css)({display:"flex",alignItems:"center",whiteSpace:"nowrap"}),utc:(0,n.css)({color:O.v1.palette.orange,fontSize:O.typography.size.sm,paddingLeft:"6px",lineHeight:"28px",verticalAlign:"bottom",fontWeight:O.typography.fontWeightMedium})})},18852:(J,R,e)=>{"use strict";e.d(R,{mg:()=>E,uT:()=>d});var n=e(41407),a=e(39953),l=e(73371),r=e(36602),o=e(26234),g=e(82803),m=e(12190);function d({onChange:p,from:h,to:y,timeZone:s}){const v=u(h,y,new Date,s),C=f(p,s),D=(0,g.wW)(E);return a.createElement(l.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:D.body,tileClassName:D.title,value:v,nextLabel:a.createElement(m.J,{name:"angle-right"}),prevLabel:a.createElement(m.J,{name:"angle-left"}),onChange:C,locale:"en"})}d.displayName="Body";function u(p,h,y=new Date,s){let v=p.isValid()?p.toDate():y,C=h.isValid()?h.toDate():y;return s&&([v,C]=i(v,C,s)),v>C?[C,v]:[v,C]}function i(p,h,y){const s=(0,r.nA)(y);if(!s)return[p,h];const v=s.utcOffset(p.getTime()),C=s.utcOffset(h.getTime()),D=p.getTimezoneOffset(),M=h.getTimezoneOffset(),P=v-D,x=C-M,S=new Date(p.getTime()-P*1e3*60),I=new Date(h.getTime()-x*1e3*60);return[S,I]}function f(p,h){return(0,a.useCallback)(y=>{if(!Array.isArray(y))return console.error("onCalendarChange: should be run in selectRange={true}");if(y[0]&&y[1]){const s=(0,o.J)(c(y[0]),{timeZone:h}),v=(0,o.J)(c(y[1]),{timeZone:h});p(s,v)}},[p,h])}function c(p){return[p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds()]}const E=p=>{const h=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:(0,n.css)({color:p.colors.text.primary,backgroundColor:p.colors.background.primary,fontSize:p.typography.size.md,border:"1px solid transparent","&:hover":{position:"relative"},"&:disabled":{color:p.colors.action.disabledText}}),body:(0,n.css)({zIndex:p.zIndex.modal,backgroundColor:p.colors.background.primary,width:"268px",".react-calendar__navigation":{display:"flex"},".react-calendar__navigation__label, .react-calendar__navigation__arrow, .react-calendar__navigation":{paddingTop:"4px",backgroundColor:"inherit",color:p.colors.text.primary,border:0,fontWeight:p.typography.fontWeightMedium},".react-calendar__month-view__weekdays":{backgroundColor:"inherit",textAlign:"center",color:p.colors.primary.text,abbr:{border:0,textDecoration:"none",cursor:"default",display:"block",padding:"4px 0 4px 0"}},".react-calendar__month-view__days":{backgroundColor:"inherit"},".react-calendar__tile, .react-calendar__tile--now":{marginBottom:"4px",backgroundColor:"inherit",height:"26px"},".react-calendar__navigation__label, .react-calendar__navigation > button:focus, .time-picker-calendar-tile:focus":{outline:0},[`${h}, .react-calendar__tile--active, .react-calendar__tile--active:hover`]:{color:p.colors.primary.contrastText,fontWeight:p.typography.fontWeightMedium,background:p.colors.primary.main,boxShadow:"none",border:"0px"},".react-calendar__tile--rangeEnd, .react-calendar__tile--rangeStart":{padding:0,border:"0px",color:p.colors.primary.contrastText,fontWeight:p.typography.fontWeightMedium,background:p.colors.primary.main,abbr:{backgroundColor:p.colors.primary.main,borderRadius:"100px",display:"block",paddingTop:"2px",height:"26px"}},[`${h}, .react-calendar__tile--rangeStart`]:{borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px"},[`${h}, .react-calendar__tile--rangeEnd`]:{borderTopRightRadius:"20px",borderBottomRightRadius:"20px"}})}}},49954:(J,R,e)=>{"use strict";e.d(R,{x:()=>me});var n=e(41407),a=e(39953),l=e(92403),r=e(81626),o=e(28888),g=e(82803),m=e(64084),d=e(53039),u=e(28384),i=e(64447),f=e(41245),c=e(12190),E=e(86832),p=e(36602),h=e(4919),y=e(96227),s=e(20454),v=e(9558),C=e(87783),D=e(93992),M=e(54332),P=e(64333),x=e(58682);const S=ze=>{const{timeZone:je,fiscalYearStartMonth:Qe,timestamp:We=Date.now(),onChangeTimeZone:ke,onChangeFiscalYearStartMonth:ot}=ze,[lt,Ct]=(0,a.useState)(!1),[wt,Lt]=(0,a.useState)("tz"),Ye=(0,a.useCallback)(de=>{de&&de.stopPropagation(),Ct(!lt)},[lt,Ct]),Be=(0,g.l4)(),Le=I(Be);if(!(0,E.isString)(je))return null;const le=(0,p.Pr)(je,We);return le?a.createElement("div",null,a.createElement("section",{"aria-label":(0,u.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:Le.container},a.createElement("div",{className:Le.timeZoneContainer},a.createElement("div",{className:Le.timeZone},a.createElement(P.d,{title:le.name}),a.createElement("div",{className:Le.spacer}),a.createElement(D.K,{info:le})),a.createElement(M.v,{timeZone:je,timestamp:We})),a.createElement("div",{className:Le.spacer}),a.createElement(h.zx,{variant:"secondary",onClick:Ye,size:"sm"},a.createElement(u.c,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),lt?a.createElement("div",{className:Le.editContainer},a.createElement("div",null,a.createElement(s.S,{value:wt,options:[{label:(0,u.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,u.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:Lt})),wt==="tz"?a.createElement("section",{"data-testid":o.wl.components.TimeZonePicker.containerV2,className:(0,n.cx)(Le.timeZoneContainer,Le.timeSettingContainer)},a.createElement(C.O,{includeInternal:!0,onChange:de=>{Ye(),(0,E.isString)(de)&&ke(de)},onBlur:Ye,menuShouldPortal:!1})):a.createElement("section",{"aria-label":o.wl.components.TimeZonePicker.containerV2,className:(0,n.cx)(Le.timeZoneContainer,Le.timeSettingContainer)},a.createElement(y.g,{className:Le.fiscalYearField,label:(0,u.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},a.createElement(v.Ph,{value:Qe,menuShouldPortal:!1,options:x.E,onChange:de=>{ot&&ot(de.value??0)}})))):null):null},I=(0,m.B)(ze=>({container:(0,n.css)({borderTop:`1px solid ${ze.colors.border.weak}`,padding:"11px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),editContainer:(0,n.css)({borderTop:`1px solid ${ze.colors.border.weak}`,padding:"11px",justifyContent:"space-between",alignItems:"center"}),spacer:(0,n.css)({marginLeft:"7px"}),timeSettingContainer:(0,n.css)({paddingTop:ze.spacing(1)}),fiscalYearField:(0,n.css)({marginBottom:0}),timeZoneContainer:(0,n.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1}),timeZone:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"baseline",flexGrow:1})}));var T=e(89860),O=e(26234),A=e(48069),B=e(38637),b=e(69865),W=e(78911),V=e(41056),w=e(30064),K=e(17037),z=e(75250),G=e(18852);function Q({onClose:ze,onApply:je}){const Qe=(0,g.wW)(j);return a.createElement("div",{className:Qe.container},a.createElement(h.zx,{className:Qe.apply,onClick:je},a.createElement(u.c,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")),a.createElement(h.zx,{variant:"secondary",onClick:ze},a.createElement(u.c,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")))}Q.displayName="Footer";const j=ze=>({container:(0,n.css)({backgroundColor:ze.colors.background.primary,display:"flex",justifyContent:"center",padding:"10px",alignItems:"stretch"}),apply:(0,n.css)({marginRight:"4px",width:"100%",justifyContent:"center"})});function F({onClose:ze}){const je=(0,g.wW)(k);return a.createElement("div",{className:je.container},a.createElement(T.r,null,a.createElement(u.c,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),a.createElement(h.zx,{"aria-label":o.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:ze}))}F.displayName="Header";const k=ze=>({container:(0,n.css)({backgroundColor:ze.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"7px"})}),_=(ze,je=!1)=>({container:(0,n.css)({top:0,position:"absolute",[`${je?"left":"right"}`]:"544px",boxShadow:ze.shadows.z3,backgroundColor:ze.colors.background.primary,zIndex:-1,border:`1px solid ${ze.colors.border.weak}`,borderTopLeftRadius:ze.shape.radius.default,borderBottomLeftRadius:ze.shape.radius.default,"&:after":{display:"block",backgroundColor:ze.colors.background.primary,width:"19px",height:"100%",content:`${je?'""':'" "'}`,position:"absolute",top:0,right:"-19px",borderLeft:`1px solid ${ze.colors.border.weak}`}}),modal:(0,n.css)({boxShadow:ze.shadows.z3,left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)",zIndex:ze.zIndex.modal}),content:(0,n.css)({margin:"0 auto",width:"268px"})});function Y(ze){const je=(0,g.l4)(),{modalBackdrop:Qe}=(0,z.J)(je),We=_(je,ze.isReversed),{isOpen:ke,isFullscreen:ot,onClose:lt}=ze,Ct=a.createRef(),{dialogProps:wt}=(0,V.R)({"aria-label":o.wl.components.TimePicker.calendar.label},Ct),{overlayProps:Lt}=(0,K.Ir)({isDismissable:!0,isOpen:ke,onClose:lt},Ct);return ke?ot?a.createElement(w.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},a.createElement("section",{className:We.container,ref:Ct,...Lt,...wt},a.createElement(F,{...ze}),a.createElement(G.uT,{...ze}))):a.createElement(K.Xj,null,a.createElement("div",{className:Qe}),a.createElement(w.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement("section",{className:We.modal,ref:Ct,...Lt,...wt},a.createElement("div",{className:We.content,"aria-label":o.wl.components.TimePicker.calendar.label},a.createElement(F,{...ze}),a.createElement(G.uT,{...ze}),a.createElement(Q,{...ze}))))):null}const Z=(0,a.memo)(Y);Y.displayName="TimePickerCalendar";const ae={default:()=>(0,u.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,u.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},ce=ze=>{const{value:je,isFullscreen:Qe=!1,timeZone:We,onApply:ke,isReversed:ot,fiscalYearStartMonth:lt}=ze,[Ct,wt]=De(je.raw.from,je.raw.to,We),Lt=(0,g.wW)(te),[Ye,Be]=(0,a.useState)(Ct),[Le,le]=(0,a.useState)(wt),[de,X]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const[He,Xe]=De(je.raw.from,je.raw.to,We);Be(He),le(Xe)},[je.raw.from,je.raw.to,We]);const se=(0,a.useCallback)(He=>{He.preventDefault(),X(!0)},[X]),re=(0,a.useCallback)(()=>{if(Le.invalid||Ye.invalid)return;const He={from:Ye.value,to:Le.value},Xe=r.convertRawToRange(He,We,lt);ke(Xe)},[Ye.invalid,Ye.value,ke,We,Le.invalid,Le.value,lt]),pe=(0,a.useCallback)((He,Xe)=>{const[dt,ct]=De(He,Xe,We);Be(dt),le(ct)},[We]),be=He=>{He.key==="Enter"&&re()},xe=r.convertRawToRange({from:"now/fy",to:"now/fy"},We,lt),Pe=(0,u.t)("time-picker.range-content.fiscal-year","Fiscal year"),we=a.createElement("div",{className:Lt.tooltip},r.isFiscal(je)?a.createElement(b.u,{content:`${Pe}: ${xe.from.format("MMM-DD")} - ${xe.to.format("MMM-DD")}`},a.createElement(c.J,{name:"info-circle"})):null),Fe=a.createElement(h.zx,{"aria-label":o.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:se});return a.createElement("div",null,a.createElement("div",{className:Lt.fieldContainer},a.createElement(y.g,{label:(0,u.t)("time-picker.range-content.from-input","From"),invalid:Ye.invalid,error:Ye.errorMessage},a.createElement(B.I,{onClick:He=>He.stopPropagation(),onChange:He=>pe(He.currentTarget.value,Le.value),addonAfter:Fe,onKeyDown:be,"aria-label":o.wl.components.TimePicker.fromField,value:Ye.value})),we),a.createElement("div",{className:Lt.fieldContainer},a.createElement(y.g,{label:(0,u.t)("time-picker.range-content.to-input","To"),invalid:Le.invalid,error:Le.errorMessage},a.createElement(B.I,{onClick:He=>He.stopPropagation(),onChange:He=>pe(Ye.value,He.currentTarget.value),addonAfter:Fe,onKeyDown:be,"aria-label":o.wl.components.TimePicker.toField,value:Le.value})),we),a.createElement(h.zx,{"data-testid":o.wl.components.TimePicker.applyTimeRange,type:"button",onClick:re},a.createElement(u.c,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range")),a.createElement(Z,{isFullscreen:Qe,isOpen:de,from:(0,O.J)(Ye.value,{timeZone:We}),to:(0,O.J)(Le.value,{timeZone:We}),onApply:re,onClose:()=>X(!1),onChange:pe,timeZone:We,isReversed:ot}))};function q(ze,je,Qe){const We={from:ze,to:je},ke=r.convertRawToRange(We,Qe);return!(ke.from.isSame(ke.to)||ke.from.isBefore(ke.to))}function De(ze,je,Qe){const We=oe(ze,Qe),ke=oe(je,Qe),ot=!(0,W.J)(We,!1,Qe),lt=!(0,W.J)(ke,!0,Qe),Ct=q(We,ke,Qe)&&!lt;return[{value:We,invalid:ot||Ct,errorMessage:Ct&&!ot?ae.range():ae.default()},{value:ke,invalid:lt,errorMessage:ae.default()}]}function oe(ze,je){return(0,l.v9)(ze)?(0,A.dq)(ze,{timeZone:je}):ze}function te(ze){return{fieldContainer:(0,n.css)({display:"flex"}),tooltip:(0,n.css)({paddingLeft:ze.spacing(1),paddingTop:ze.spacing(3)})}}var fe=e(10781);const Te=(ze,je)=>r.convertRawToRange({from:ze.from,to:ze.to},je),ge=(ze,je)=>{const Qe=(0,A.dq)(ze.from,{timeZone:je}),We=(0,A.dq)(ze.to,{timeZone:je});return{from:Qe,to:We,display:`${Qe} to ${We}`}},he=ze=>{const{quickOptions:je=[],isReversed:Qe,isFullscreen:We,hideQuickRanges:ke,timeZone:ot,fiscalYearStartMonth:lt,value:Ct,onChange:wt,history:Lt,showHistory:Ye,className:Be,hideTimeZone:Le,onChangeTimeZone:le,onChangeFiscalYearStartMonth:de}=ze,X=!Lt?.length,se=We&&Ye||!We&&(Ye&&!X||!ke),re=(0,g.l4)(),pe=Ne(re,Qe,ke,se,We),be=Ue(Lt,ot),xe=at(Ct.raw,je),[Pe,we]=(0,a.useState)(""),Fe=je.filter(Xe=>Xe.display.toLowerCase().includes(Pe.toLowerCase())),He=Xe=>wt(Te(Xe));return a.createElement("div",{id:"TimePickerContent",className:(0,n.cx)(pe.container,Be)},a.createElement("div",{className:pe.body},(!We||!ke)&&a.createElement("div",{className:pe.rightSide},a.createElement("div",{className:pe.timeRangeFilter},a.createElement(f.H,{width:0,autoFocus:!0,value:Pe,onChange:we,placeholder:(0,u.t)("time-picker.content.filter-placeholder","Search quick ranges")})),a.createElement(i.$,null,!We&&a.createElement(ye,{...ze,historyOptions:be}),!ke&&a.createElement(fe.V,{options:Fe,onChange:He,value:xe}))),We&&a.createElement("div",{className:pe.leftSide},a.createElement(ue,{...ze,historyOptions:be}))),!Le&&We&&a.createElement(S,{timeZone:ot,fiscalYearStartMonth:lt,onChangeTimeZone:le,onChangeFiscalYearStartMonth:de}))},me=ze=>{const{widthOverride:je}=ze,Qe=(0,g.l4)(),We=(je||window.innerWidth)>=Qe.breakpoints.values.lg;return a.createElement(he,{...ze,isFullscreen:We})},ye=ze=>{const{value:je,hideQuickRanges:Qe,onChange:We,timeZone:ke,historyOptions:ot=[],showHistory:lt}=ze,Ct=(0,g.l4)(),wt=_e(Ct),Lt=(0,l.v9)(je.raw.from)||(0,l.v9)(je.raw.to),[Ye,Be]=(0,a.useState)(!Lt),Le=Qe?!1:Ye,le=de=>We(Te(de,ke));return a.createElement("fieldset",null,a.createElement("div",{className:wt.header},a.createElement("button",{type:"button",className:wt.expandButton,onClick:()=>{Qe||Be(!Le)},"data-testid":o.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!Le,"aria-controls":"expanded-timerange"},a.createElement(T.r,null,a.createElement(u.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!Qe&&a.createElement(c.J,{name:Le?"angle-down":"angle-up"}))),!Le&&a.createElement("div",{className:wt.body,id:"expanded-timerange"},a.createElement("div",{className:wt.form},a.createElement(ce,{value:je,onApply:We,timeZone:ke,isFullscreen:!1})),lt&&a.createElement(fe.V,{title:(0,u.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:ot,onChange:le,placeholderEmpty:null})))},ue=ze=>{const{onChange:je,value:Qe,timeZone:We,fiscalYearStartMonth:ke,isReversed:ot,historyOptions:lt}=ze,Ct=(0,g.l4)(),wt=Ke(Ct,ze.hideQuickRanges),Lt=Ye=>je(Te(Ye,We));return a.createElement(a.Fragment,null,a.createElement("div",{className:wt.container},a.createElement("div",{className:wt.title,"data-testid":o.wl.components.TimePicker.absoluteTimeRangeTitle},a.createElement(T.r,null,a.createElement(u.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),a.createElement(ce,{value:Qe,timeZone:We,fiscalYearStartMonth:ke,onApply:je,isFullscreen:!0,isReversed:ot})),ze.showHistory&&a.createElement("div",{className:wt.recent},a.createElement(fe.V,{title:(0,u.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:lt||[],onChange:Lt,placeholderEmpty:a.createElement(Oe,null)})))},Oe=(0,a.memo)(()=>{const ze=(0,g.l4)(),je=et(ze),Qe=(0,u.t)("time-picker.content.empty-recent-list-info","It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.");return a.createElement("div",{className:je.container},a.createElement("div",null,a.createElement("span",null,Qe)),a.createElement(u.c,{i18nKey:"time-picker.content.empty-recent-list-docs"},a.createElement("div",null,a.createElement("a",{className:je.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),a.createElement("span",null," to find out more about how to enter custom time ranges."))))});function Ue(ze,je){return!Array.isArray(ze)||ze.length===0?[]:ze.map(Qe=>ge(Qe,je))}Oe.displayName="EmptyRecentList";const at=(ze,je)=>(0,a.useMemo)(()=>{if(r.isRelativeTimeRange(ze))return je.find(Qe=>Qe.from===ze.from&&Qe.to===ze.to)},[ze,je]),Ne=(0,m.B)((ze,je,Qe,We,ke)=>({container:(0,n.css)({background:ze.colors.background.primary,boxShadow:ze.shadows.z3,width:`${ke?"546px":"262px"}`,borderRadius:ze.shape.radius.default,border:`1px solid ${ze.colors.border.weak}`,[`${je?"left":"right"}`]:0}),body:(0,n.css)({display:"flex",flexDirection:"row-reverse",height:`${We?"381px":"217px"}`,maxHeight:"100vh"}),leftSide:(0,n.css)({display:"flex",flexDirection:"column",borderRight:`${je?"none":`1px solid ${ze.colors.border.weak}`}`,width:`${Qe?"100%":"60%"}`,overflow:"hidden",order:je?1:0}),rightSide:(0,n.css)({width:`${ke?"40%":"100%"}; !important`,borderRight:je?`1px solid ${ze.colors.border.weak}`:"none",display:"flex",flexDirection:"column"}),timeRangeFilter:(0,n.css)({padding:ze.spacing(1)}),spacing:(0,n.css)({marginTop:"16px"})})),_e=(0,m.B)(ze=>({header:(0,n.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${ze.colors.border.weak}`,padding:"7px 9px 7px 9px"}),expandButton:(0,n.css)({backgroundColor:"transparent",border:"none",display:"flex",width:"100%","&:focus-visible":(0,d.getFocusStyles)(ze)}),body:(0,n.css)({borderBottom:`1px solid ${ze.colors.border.weak}`}),form:(0,n.css)({padding:"7px 9px 7px 9px"})})),Ke=(0,m.B)((ze,je)=>({container:(0,n.css)({paddingTop:"9px",paddingLeft:"11px",paddingRight:je?"11px":"20%"}),title:(0,n.css)({marginBottom:"11px"}),recent:(0,n.css)({flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-end",paddingTop:ze.spacing(1)})})),et=(0,m.B)(ze=>({container:(0,n.css)({padding:"12px",margin:"12px","a, span":{fontSize:"13px"}}),link:(0,n.css)({color:ze.colors.text.link})}))},89860:(J,R,e)=>{"use strict";e.d(R,{r:()=>o});var n=e(41407),a=e(39953),l=e(82803);const r=g=>({text:(0,n.css)({fontSize:g.typography.size.md,fontWeight:g.typography.fontWeightMedium,color:g.colors.text.primary,margin:0,display:"flex"})}),o=(0,a.memo)(({children:g})=>{const m=(0,l.wW)(r);return a.createElement("h3",{className:m.text},g)});o.displayName="TimePickerTitle"},48408:(J,R,e)=>{"use strict";e.d(R,{q:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(56064),o=e(78911);const g=(0,a.memo)(function({hideText:u,value:i,timeZone:f="browser",placeholder:c="No time range selected",className:E}){const p=(0,l.wW)(m);return u?null:a.createElement("span",{className:E},(0,o.v)(i)?a.createElement(r.sU,{value:i,timeZone:f}):a.createElement("span",{className:p.placeholder},c))}),m=d=>({placeholder:(0,n.css)({color:d.colors.text.disabled,opacity:1})})},10781:(J,R,e)=>{"use strict";e.d(R,{V:()=>E});var n=e(41407),a=e(39953),l=e(64084),r=e(28384),o=e(89860),g=e(34032),m=e(82803),d=e(53039);const u=s=>({container:(0,n.css)({display:"flex",alignItems:"center",flexDirection:"row-reverse",justifyContent:"space-between"}),selected:(0,n.css)({background:s.colors.action.selected,fontWeight:s.typography.fontWeightMedium}),radio:(0,n.css)({opacity:0,width:"0 !important","&:focus-visible + label":(0,d.getFocusStyles)(s)}),label:(0,n.css)({cursor:"pointer",flex:1,padding:"7px 9px 7px 9px","&:hover":{background:s.colors.action.hover,cursor:"pointer"}})}),i=(0,a.memo)(({value:s,onSelect:v,selected:C=!1,name:D})=>{const M=(0,m.wW)(u),P=(0,g.Z)();return a.createElement("li",{className:(0,n.cx)(M.container,C&&M.selected)},a.createElement("input",{className:M.radio,checked:C,name:D,type:"checkbox",id:P,onChange:()=>v(s)}),a.createElement("label",{className:M.label,htmlFor:P},s.display))});i.displayName="TimeRangeOption";const f=(0,l.B)(()=>({title:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px 5px 9px"})})),c=(0,l.B)(()=>({grow:(0,n.css)({flexGrow:1,alignItems:"flex-start"})})),E=s=>{const v=f(),{title:C,options:D,placeholderEmpty:M}=s;return typeof M<"u"&&D.length<=0?a.createElement(a.Fragment,null,M):C?a.createElement("section",{"aria-label":C},a.createElement("fieldset",null,a.createElement("div",{className:v.title},a.createElement(o.r,null,C)),a.createElement(p,{...s}))):a.createElement(p,{...s})},p=({options:s,value:v,onChange:C,title:D})=>{const M=c();return a.createElement(a.Fragment,null,a.createElement("ul",{"aria-roledescription":(0,r.t)("time-picker.time-range.aria-role","Time range selection")},s.map((P,x)=>a.createElement(i,{key:h(P,x),value:P,selected:y(P,v),onSelect:C,name:D??(0,r.t)("time-picker.time-range.default-title","Time ranges")}))),a.createElement("div",{className:M.grow}))};function h(s,v){return`${s.from}-${s.to}-${v}`}function y(s,v){return!v||!s?!1:v.from===s.from&&v.to===s.to}},87783:(J,R,e)=>{"use strict";e.d(R,{O:()=>C});var n=e(86832),a=e(39953),l=e(36602),r=e(28384),o=e(9558),g=e(41407),m=e(82803);const d=I=>{const{children:T,label:O}=I,A=(0,m.wW)(u);return O?a.createElement("div",null,a.createElement("div",{className:A.header},a.createElement("span",{className:A.label},O)),T):a.createElement("div",null,T)},u=I=>({header:(0,g.css)({padding:"7px 10px",width:"100%",borderTop:`1px solid ${I.colors.border.weak}`,textTransform:"capitalize"}),label:(0,g.css)({fontSize:I.typography.size.sm,color:I.colors.text.secondary,fontWeight:I.typography.fontWeightMedium})});var i=e(54332),f=e(64084),c=e(12190),E=e(93992),p=e(64333);const h="tz-utc-offset",y=I=>{const{children:T,innerProps:O,innerRef:A,data:B,isSelected:b,isFocused:W}=I,V=(0,m.l4)(),w=v(V),K=Date.now(),z=(0,g.cx)(w.container,W&&w.containerFocused);if(!(0,n.isString)(B.value))return null;const G=(0,l.Pr)(B.value,K);return a.createElement("div",{className:z,...O,ref:A,"aria-label":"Select option"},a.createElement("div",{className:(0,g.cx)(w.leftColumn,w.row)},a.createElement("div",{className:(0,g.cx)(w.leftColumn,w.wideRow)},a.createElement(p.d,{title:T}),a.createElement("div",{className:w.spacer}),a.createElement(E.K,{info:G})),a.createElement("div",{className:w.rightColumn},a.createElement(i.v,{timeZone:G?.ianaName||B.value,timestamp:K,className:h}),b&&a.createElement("span",null,a.createElement(c.J,{name:"check"})))))},s=I=>{const{children:T,innerProps:O,innerRef:A,data:B,isSelected:b,isFocused:W}=I,V=(0,m.l4)(),w=v(V),K=Date.now(),z=(0,g.cx)(w.container,W&&w.containerFocused);if(!(0,n.isString)(B.value))return null;const G=(0,l.Pr)(B.value,K);return a.createElement("div",{className:z,...O,ref:A,"aria-label":"Select option"},a.createElement("div",{className:w.body},a.createElement("div",{className:w.row},a.createElement("div",{className:w.leftColumn},a.createElement(p.d,{title:T})),a.createElement("div",{className:w.rightColumn},b&&a.createElement("span",null,a.createElement(c.J,{name:"check"})))),a.createElement("div",{className:w.row},a.createElement("div",{className:w.leftColumn},a.createElement(E.K,{info:G})),a.createElement("div",{className:w.rightColumn},a.createElement(i.v,{timestamp:K,timeZone:G?.ianaName||B.value,className:h})))))},v=(0,f.B)(I=>({container:(0,g.css)({display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",padding:"6px 8px 4px","&:hover":{background:I.colors.action.hover}}),containerFocused:(0,g.css)({background:I.colors.action.hover}),body:(0,g.css)({display:"flex",fontWeight:I.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),row:(0,g.css)({display:"flex",flexDirection:"row"}),leftColumn:(0,g.css)({flexGrow:1,textOverflow:"ellipsis"}),rightColumn:(0,g.css)({justifyContent:"flex-end",alignItems:"center"}),wideRow:(0,g.css)({display:"flex",flexDirection:"row",alignItems:"baseline"}),spacer:(0,g.css)({marginLeft:"6px"})})),C=I=>{const{onChange:T,width:O,autoFocus:A=!1,onBlur:B,value:b,includeInternal:W=!1,disabled:V=!1,inputId:w,menuShouldPortal:K=!0,openMenuOnFocus:z=!0}=I,G=D(W),Q=M(G,b),j=x(),F=O&&O<=45?s:y,k=(0,a.useCallback)(_=>{if(!_||!(0,n.isString)(_.value))return T(b);T(_.value)},[T,b]);return a.createElement(o.Ph,{inputId:w,value:Q,placeholder:(0,r.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:A,menuShouldPortal:K,openMenuOnFocus:z,width:O,filterOption:j,options:G,onChange:k,onBlur:B,components:{Option:F,Group:d},disabled:V,"aria-label":(0,r.t)("time-picker.zone.select-aria-label","Time zone picker")})},D=I=>{const T=Date.now();return(0,l.$8)(I).map(A=>{const B=A.zones.reduce((b,W)=>{const V=(0,l.Pr)(W,T);return V&&b.push({label:V.name,value:V.zone,searchIndex:S(V,T)}),b},[]);return{label:A.name,options:B}})},M=(I,T)=>(0,a.useMemo)(()=>{if(T===void 0)return;const O=(0,n.toLower)(T);return I.find(B=>B.label?O.startsWith((0,n.toLower)(B.label)):P(O))?.options.find(B=>(0,n.isEmpty)(O)?B.value===l.RQ.default:(0,n.toLower)(B.value)===O)},[I,T]),P=I=>{switch(I){case l.RQ.default:case l.RQ.localBrowserTime:case l.RQ.utc:return!0;default:return!1}},x=()=>(0,a.useCallback)((I,T)=>!T||!I.data||!I.data.searchIndex?!0:I.data.searchIndex.indexOf((0,n.toLower)(T))>-1,[]),S=(I,T)=>{const O=[(0,n.toLower)(I.name),(0,n.toLower)(I.abbreviation),(0,n.toLower)((0,i.k)(T,I.zone))];for(const A of I.countries)O.push((0,n.toLower)(A.name)),O.push((0,n.toLower)(A.code));return O.join("|")}},93992:(J,R,e)=>{"use strict";e.d(R,{K:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=({info:m})=>{const d=(0,l.wW)(g),u=o(m);return m?a.createElement("div",{className:d.description},u):null},o=m=>(0,a.useMemo)(()=>{const d=[];if(!m)return"";if(m.name==="Europe/Simferopol")return"Ukraine, EEST";if(m.countries.length>0){const u=m.countries[0];d.push(u.name)}return m.abbreviation&&d.push(m.abbreviation),d.join(", ")},[m]),g=m=>({description:(0,n.css)({fontWeight:"normal",fontSize:m.typography.size.sm,color:m.colors.text.secondary,whiteSpace:"normal",textOverflow:"ellipsis"})})},54332:(J,R,e)=>{"use strict";e.d(R,{k:()=>d,v:()=>m});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(48069),g=e(82803);const m=i=>{const{timestamp:f,timeZone:c,className:E}=i,p=(0,g.wW)(u);return(0,a.isString)(c)?r.createElement(r.Fragment,null,r.createElement("span",{className:(0,n.cx)(p.offset,E)},d(f,c))):null},d=(i,f)=>{const c=(0,o.dq)(i,{timeZone:f,format:"Z"});return c==="+00:00"?"UTC":`UTC${c}`},u=i=>{const f=(0,n.css)({fontWeight:"normal",fontSize:i.typography.size.sm,color:i.colors.text.secondary,whiteSpace:"normal"});return{offset:(0,n.css)(f,{color:i.colors.text.primary,background:i.colors.background.secondary,padding:"2px 5px",borderRadius:i.shape.radius.default,marginLeft:"4px"})}}},64333:(J,R,e)=>{"use strict";e.d(R,{d:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=({title:g})=>{const m=(0,l.wW)(o);return g?a.createElement("span",{className:m.title},g):null},o=g=>({title:(0,n.css)({fontWeight:g.typography.fontWeightRegular,textOverflow:"ellipsis"})})},76843:(J,R,e)=>{"use strict";e.d(R,{z:()=>o});var n=e(39953),a=e(28888),l=e(9558);const r=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],o=g=>{const{onChange:m,width:d,autoFocus:u=!1,onBlur:i,value:f,disabled:c=!1,inputId:E}=g,p=(0,n.useCallback)(h=>{h.value!==void 0&&m(h.value)},[m]);return n.createElement(l.Ph,{inputId:E,value:r.find(h=>h.value===f)?.value,placeholder:a.wl.components.WeekStartPicker.placeholder,autoFocus:u,openMenuOnFocus:!0,width:d,options:r,onChange:p,onBlur:i,disabled:c})}},58682:(J,R,e)=>{"use strict";e.d(R,{E:()=>a,r:()=>n});const n=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],a=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},78911:(J,R,e)=>{"use strict";e.d(R,{J:()=>r,v:()=>o});var n=e(92403),a=e(77877),l=e(26234);function r(g,m,d){return(0,n.v9)(g)?g.isValid():a.isMathString(g)?a.isValid(g):(0,l.J)(g,{roundUp:m,timeZone:d}).isValid()}function o(g){return a.isValid(g.from)&&a.isValid(g.to)}},68832:(J,R,e)=>{"use strict";e.d(R,{i:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=({direction:g="horizontal",spacing:m=2})=>{const d=(0,l.wW)(o,m);return g==="vertical"?a.createElement("div",{className:d.verticalDivider}):a.createElement("hr",{className:d.horizontalDivider})};r.displayName="Divider";const o=(g,m)=>({horizontalDivider:(0,n.css)({borderTop:`1px solid ${g.colors.border.weak}`,margin:g.spacing(m,0),width:"100%"}),verticalDivider:(0,n.css)({borderRight:`1px solid ${g.colors.border.weak}`,margin:g.spacing(0,m),height:"100%"})})},87722:(J,R,e)=>{"use strict";e.d(R,{d:()=>c});var n=e(41407),a=e(41056),l=e(30064),r=e(17037),o=e(52239),g=e(39953),m=e(28888),d=e(82803),u=e(4919),i=e(64447),f=e(98632);function c({children:h,onClose:y,closeOnMaskClick:s=!0,scrollableContent:v=!0,title:C,subtitle:D,width:M,size:P="md",tabs:x}){const S=(0,d.wW)(p),I=g.useRef(null),{dialogProps:T,titleProps:O}=(0,a.R)({},I),{overlayProps:A}=(0,r.Ir)({isDismissable:!1,isOpen:!0,onClose:y},I);E();const B=(0,n.cx)(S.drawer,!M&&S.sizes[P]),b=g.createElement("div",{className:S.content},h);return g.createElement(o.Z,{open:!0,onClose:y,placement:"right",width:M??"",getContainer:".main-view",className:S.drawerContent,rootClassName:B,motion:{motionAppear:!0,motionName:S.drawerMotion},maskClassName:S.mask,maskClosable:s,maskMotion:{motionAppear:!0,motionName:S.maskMotion}},g.createElement(l.MT,{restoreFocus:!0,contain:!0,autoFocus:!0},g.createElement("div",{"aria-label":typeof C=="string"?m.wl.components.Drawer.General.title(C):m.wl.components.Drawer.General.title("no title"),className:S.container,...A,...T,ref:I},typeof C=="string"&&g.createElement("div",{className:(0,n.cx)(S.header,!!x&&S.headerWithTabs)},g.createElement("div",{className:S.actions},g.createElement(u.zx,{icon:"times",variant:"secondary",fill:"text",onClick:y,"aria-label":m.wl.components.Drawer.General.close})),g.createElement("div",{className:S.titleWrapper},g.createElement(f.x,{element:"h3",...O},C),D&&g.createElement("div",{className:S.subtitle},D),x&&g.createElement("div",{className:S.tabsWrapper},x))),typeof C!="string"&&C,v?g.createElement(i.$,null,b):b)))}function E(){(0,g.useEffect)(()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}},[])}const p=h=>({container:(0,n.css)({display:"flex",flexDirection:"column",height:"100%",flex:"1 1 0",minHeight:"100%"}),drawer:(0,n.css)({".main-view &":{top:81},".main-view--search-bar-hidden &":{top:41},".main-view--chrome-hidden &":{top:0},".rc-drawer-content-wrapper":{boxShadow:h.shadows.z3,[h.breakpoints.down("sm")]:{width:`calc(100% - ${h.spacing(2)}) !important`,minWidth:"0 !important"}}}),sizes:{sm:(0,n.css)({".rc-drawer-content-wrapper":{label:"drawer-sm",width:"25vw",minWidth:h.spacing(48)}}),md:(0,n.css)({".rc-drawer-content-wrapper":{label:"drawer-md",width:"50vw",minWidth:h.spacing(60)}}),lg:(0,n.css)({".rc-drawer-content-wrapper":{label:"drawer-lg",width:"75vw",minWidth:h.spacing(93),[h.breakpoints.down("md")]:{width:`calc(100% - ${h.spacing(2)}) !important`,minWidth:0}}})},drawerContent:(0,n.css)({backgroundColor:`${h.colors.background.primary} !important`,display:"flex",flexDirection:"column",overflow:"hidden",zIndex:h.zIndex.dropdown}),drawerMotion:(0,n.css)({"&-appear":{transform:"translateX(100%)",transition:"none !important","&-active":{transition:`${h.transitions.create("transform")} !important`,transform:"translateX(0)"}}}),mask:(0,n.css)({backgroundColor:"transparent",position:"fixed","&:before":{backgroundColor:`${h.components.overlay.background} !important`,backdropFilter:"blur(1px)",bottom:0,content:'""',left:0,position:"fixed",right:0,".main-view &":{top:81},".main-view--search-bar-hidden &":{top:41},".main-view--chrome-hidden &":{top:0}}}),maskMotion:(0,n.css)({"&-appear":{opacity:0,"&-active":{opacity:1,transition:h.transitions.create("opacity")}}}),header:(0,n.css)({label:"drawer-header",flexGrow:0,padding:h.spacing(2,2,3),borderBottom:`1px solid ${h.colors.border.weak}`}),headerWithTabs:(0,n.css)({borderBottom:"none"}),actions:(0,n.css)({position:"absolute",right:h.spacing(1),top:h.spacing(1)}),titleWrapper:(0,n.css)({label:"drawer-title",overflowWrap:"break-word"}),subtitle:(0,n.css)({label:"drawer-subtitle",color:h.colors.text.secondary,paddingTop:h.spacing(1)}),content:(0,n.css)({padding:h.spacing(2),height:"100%",flexGrow:1}),tabsWrapper:(0,n.css)({label:"drawer-tabs",paddingLeft:h.spacing(2),margin:h.spacing(1,-1,-3,-3)})})},5222:(J,R,e)=>{"use strict";e.d(R,{d:()=>p});var n=e(41407),a=e(41626),l=e(30064),r=e(52904),o=e(33589),g=e(39953),m=e(82803),d=e(48824),u=e(846),i=e(13767),f=e(85001),c=e(3839);const E=y=>{const{className:s,options:v,value:C,onChange:D,narrow:M,variant:P,...x}=y,S=(0,m.wW)(h),I=(0,o.W)({}),T=g.useRef(null),{menuTriggerProps:O,menuProps:A}=(0,r.u4)({},I,T),{buttonProps:B}=(0,a.U)(O,T),b=W=>{D(W),I.close()};return g.createElement(d.h,{className:S.wrapper},g.createElement(c.h,{className:s,isOpen:I.isOpen,narrow:M,variant:P,ref:T,...B,...x},C?.label||(C?.value!=null?String(C?.value):null)),I.isOpen&&g.createElement("div",{className:S.menuWrapper},g.createElement(u.L,{onClick:I.close,parent:document,includeButtonPress:!1},g.createElement(l.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},g.createElement(i.v,{tabIndex:-1,onClose:I.close,...A,autoFocus:!!A.autoFocus},v.map(W=>g.createElement(f.s,{key:`${W.value}`,label:W.label??String(W.value),onClick:()=>b(W),active:W.value===C?.value,ariaChecked:W.value===C?.value,ariaLabel:W.ariaLabel||W.label,role:"menuitemradio"})))))))};E.displayName="ButtonSelect";const p=g.memo(E),h=y=>({wrapper:(0,n.css)({position:"relative",display:"inline-flex"}),menuWrapper:(0,n.css)({position:"absolute",zIndex:y.zIndex.dropdown,top:y.spacing(4),right:0})})},58047:(J,R,e)=>{"use strict";e.d(R,{L:()=>d});var n=e(41407),a=e(30064),l=e(39953),r=e(20588),o=e(17088),g=e(82360),m=e(70393);const d=l.memo(({children:i,overlay:f,placement:c,offset:E,onVisibleChange:p})=>{const[h,y]=(0,l.useState)(!1),s=(0,l.useRef)(null);(0,l.useEffect)(()=>{p?.(h)},[p,h]);const{getArrowProps:v,getTooltipProps:C,setTooltipRef:D,setTriggerRef:M,visible:P}=(0,r.O)({visible:h,placement:c,onVisibleChange:y,interactive:!0,delayHide:0,delayShow:0,offset:E??[0,8],trigger:["click"]}),x=150,S=u(x),I=()=>{y(!1)},T=O=>{(O.key==="Escape"||O.key==="Tab")&&y(!1)};return l.createElement(l.Fragment,null,l.cloneElement(i,{ref:M}),P&&l.createElement(m.h_,null,l.createElement(a.MT,{autoFocus:!0,restoreFocus:!0,contain:!0},l.createElement("div",{ref:D,...C(),onClick:I,onKeyDown:T},l.createElement("div",{...v({className:"tooltip-arrow"})}),l.createElement(o.Z,{nodeRef:s,appear:!0,in:!0,timeout:{appear:x,exit:0,enter:0},classNames:S},l.createElement("div",{ref:s},g.renderOrCallToRender(f,{})))))))});d.displayName="Dropdown";const u=i=>({appear:(0,n.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,n.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${i}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${i}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},16708:(J,R,e)=>{"use strict";e.d(R,{K:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=({children:g})=>{const m=(0,l.wW)(o);return a.createElement("div",{className:m.container},g)},o=g=>({container:(0,n.css)({borderLeft:`3px solid ${g.colors.info.main}`,backgroundColor:`${g.colors.background.secondary}`,padding:g.spacing(2),minWidth:"350px",borderRadius:g.shape.radius.default,marginBottom:g.spacing(4)})})},41393:(J,R,e)=>{"use strict";e.d(R,{Pf:()=>m,SV:()=>o,z4:()=>g});var n=e(39953),a=e(60862),l=e(33155),r=e(35521);class o extends n.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(u,i){a.s?.api?.pushError(u),this.setState({error:u,errorInfo:i}),this.props.onError&&this.props.onError(u)}componentDidUpdate(u){const{dependencies:i,onRecover:f}=this.props;if(this.state.error&&i&&u.dependencies){for(let c=0;c<i.length;c++)if(i[c]!==u.dependencies[c]){this.setState({error:null,errorInfo:null}),f&&f();break}}}render(){const{children:u}=this.props,{error:i,errorInfo:f}=this.state;return u({error:i,errorInfo:f})}}class g extends n.PureComponent{render(){const{title:u,children:i,style:f,dependencies:c}=this.props;return n.createElement(o,{dependencies:c},({error:E,errorInfo:p})=>p?f==="alertbox"?n.createElement(l.b,{title:u||""},n.createElement("details",{style:{whiteSpace:"pre-wrap"}},E&&E.toString(),n.createElement("br",null),p.componentStack)):n.createElement(r.X,{title:u||"",error:E,errorInfo:p}):i)}}g.defaultProps={title:"An unexpected error happened",style:"alertbox"};function m(d,u={}){const i=f=>n.createElement(g,{...u},n.createElement(d,{...f}));return i.displayName="WithErrorBoundary",i}},35521:(J,R,e)=>{"use strict";e.d(R,{X:()=>o});var n=e(41407),a=e(39953),l=e(64084);const r=(0,l.B)(()=>(0,n.css)({width:"500px",margin:"64px auto"})),o=({error:g,errorInfo:m,title:d})=>a.createElement("div",{className:r()},a.createElement("h2",null,d),a.createElement("details",{style:{whiteSpace:"pre-wrap"}},g&&g.toString(),a.createElement("br",null),m&&m.componentStack));o.displayName="ErrorWithStack"},17789:(J,R,e)=>{"use strict";e.d(R,{A_:()=>h,Yo:()=>c});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(41642),g=e(98965),m=e(83502),d=e(82803),u=e(33155),i=e(12190),f=e(65800);function c({options:D,children:M,readAs:P,onLoad:x,fileListRenderer:S,onFileRemove:I}){const[T,O]=(0,r.useState)([]),[A,B]=(0,r.useState)([]),b=(0,m.Cf)("decbytes")(D?.maxSize?D?.maxSize:0),W=(0,r.useCallback)((Z,ae)=>{O(ce=>ce.map(q=>(q.id===Z.id&&ae(q),q)))},[]),V=(0,r.useCallback)((Z,ae,ce)=>{let q=Z.map(v);if(D?.multiple===!1?O(q):O(De=>[...De,...q]),k(ae),D?.onDrop)D.onDrop(Z,ae,ce);else for(const De of q){const oe=new FileReader,te=()=>{P?oe[P](De.file):oe.readAsText(De.file)};W(De,fe=>{fe.abortUpload=()=>{oe.abort()},fe.retryUpload=()=>{W(De,Te=>{Te.error=null,Te.progress=void 0}),te()}}),oe.onabort=()=>{W(De,fe=>{fe.error=new DOMException("Aborted")})},oe.onprogress=fe=>{W(De,Te=>{Te.progress=fe.loaded})},oe.onload=()=>{x?.(oe.result)},oe.onerror=()=>{W(De,fe=>{fe.error=oe.error})},te()}},[x,D,P,W]),w=Z=>{const ae=T.filter(ce=>Z.id!==ce.id);O(ae),I?.(Z)},{getRootProps:K,getInputProps:z,isDragActive:G}=(0,o.uI)({...D,useFsAccessApi:!1,onDrop:V,accept:p(D?.accept)}),Q=(0,d.l4)(),j=C(Q,G),F=T.map(Z=>S?S(Z,w):r.createElement(f.K,{key:Z.id,file:Z,removeFile:w})),k=Z=>{let ae=[];Z.map(ce=>{ce.errors.map(q=>{ae.findIndex(De=>De.code===q.code&&De.message===q.message)===-1&&ae.push(q)})}),B(ae)},_=Z=>r.createElement("div",{className:j.errorAlert},r.createElement(u.b,{title:"Upload failed",severity:"error",onRemove:Y},Z.map(ae=>{switch(ae.code){case g.jK.FileTooLarge:return r.createElement("div",{key:ae.message+ae.code},"File is larger than ",(0,m.zc)(b));default:return r.createElement("div",{key:ae.message+ae.code},ae.message)}}))),Y=()=>{B([])};return r.createElement("div",{className:j.container},r.createElement("div",{"data-testid":"dropzone",...K({className:j.dropzone})},r.createElement("input",{...z()}),M??r.createElement(h,{primaryText:y(T,D)})),A.length>0&&_(A),r.createElement("small",{className:(0,n.cx)(j.small,j.acceptContainer)},D?.maxSize&&`Max file size: ${(0,m.zc)(b)}`,D?.maxSize&&D?.accept&&r.createElement("span",{className:j.acceptSeparator},"|"),D?.accept&&s(D.accept)),F)}function E(D){return["txt","json","csv","xls","yml"].some(M=>D.match(M))?"text/plain":"application/octet-stream"}function p(D){return(0,a.isString)(D)?{[E(D)]:[D]}:Array.isArray(D)?D.reduce((M,P)=>{const x=E(P);return M[x]=M[x]?[...M[x],P]:[P],M},{}):D}function h({primaryText:D="Drop file here or click to upload",secondaryText:M=""}){const P=(0,d.l4)(),x=C(P);return r.createElement("div",{className:(0,n.cx)(x.defaultDropZone),"data-testid":"file-drop-zone-default-children"},r.createElement(i.J,{className:(0,n.cx)(x.icon),name:"upload",size:"xl"}),r.createElement("h6",{className:(0,n.cx)(x.primaryText)},D),r.createElement("small",{className:x.small},M))}function y(D,M){return M?.multiple===void 0||M?.multiple?"Upload file":D.length?"Replace file":"Upload file"}function s(D){return(0,a.isString)(D)?`Accepted file type: ${D}`:Array.isArray(D)?`Accepted file types: ${D.join(", ")}`:`Accepted file types: ${Object.values(D).flat().join(", ")}`}function v(D){return{id:(0,a.uniqueId)("file"),file:D,error:null}}function C(D,M){return{container:(0,n.css)({display:"flex",flexDirection:"column",width:"100%",padding:D.spacing(2),borderRadius:D.shape.radius.default,border:`1px dashed ${D.colors.border.strong}`,backgroundColor:M?D.colors.background.secondary:D.colors.background.primary,cursor:"pointer",alignItems:"center",justifyContent:"center"}),dropzone:(0,n.css)({height:"100%",width:"100%",display:"flex",flexDirection:"column"}),defaultDropZone:(0,n.css)({textAlign:"center"}),icon:(0,n.css)({marginBottom:D.spacing(1)}),primaryText:(0,n.css)({marginBottom:D.spacing(1)}),acceptContainer:(0,n.css)({textAlign:"center",margin:0}),acceptSeparator:(0,n.css)({margin:`0 ${D.spacing(1)}`}),small:(0,n.css)({color:D.colors.text.secondary}),errorAlert:(0,n.css)({paddingTop:"10px"})}}},65800:(J,R,e)=>{"use strict";e.d(R,{K:()=>i});var n=e(41407),a=e(39953),l=e(83502),r=e(82803),o=e(96754),g=e(4919),m=e(12190),d=e(68497);const u="Remove file";function i({file:c,removeFile:E}){const p=(0,r.wW)(f),{file:h,progress:y,error:s,abortUpload:v,retryUpload:C}=c,D=()=>s?a.createElement(a.Fragment,null,a.createElement("span",{className:p.error},s.message),C&&a.createElement(d.h,{name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:C}),E&&a.createElement(d.h,{className:C?p.marginLeft:"",name:"trash-alt",onClick:()=>E(c),tooltip:u})):y&&h.size>y?a.createElement(a.Fragment,null,a.createElement("progress",{className:p.progressBar,max:h.size,value:y}),a.createElement("span",{className:p.paddingLeft},Math.round(y/h.size*100),"%"),v&&a.createElement(g.zx,{variant:"secondary",type:"button",fill:"text",onClick:v},"Cancel upload")):E&&a.createElement(d.h,{name:"trash-alt",onClick:()=>E(c),tooltip:u,tooltipPlacement:"top"}),M=(0,l.Cf)("decbytes")(h.size);return a.createElement("div",{className:p.fileListContainer},a.createElement("span",{className:p.fileNameWrapper},a.createElement(m.J,{name:"file-blank",size:"lg","aria-hidden":!0}),a.createElement("span",{className:p.padding},(0,o.O)(h.name)),a.createElement("span",null,(0,l.zc)(M))),a.createElement("div",{className:p.fileNameWrapper},D()))}function f(c){return{fileListContainer:(0,n.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:c.spacing(2),border:`1px dashed ${c.colors.border.medium}`,backgroundColor:`${c.colors.background.secondary}`,marginTop:c.spacing(1)}),fileNameWrapper:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center"}),padding:(0,n.css)({padding:c.spacing(0,1)}),paddingLeft:(0,n.css)({paddingLeft:c.spacing(2)}),marginLeft:(0,n.css)({marginLeft:c.spacing(1)}),error:(0,n.css)({paddingRight:c.spacing(2),color:c.colors.error.text}),progressBar:(0,n.css)({borderRadius:c.shape.radius.default,height:"4px","::-webkit-progress-bar":{backgroundColor:c.colors.border.weak,borderRadius:c.shape.radius.default},"::-webkit-progress-value":{backgroundColor:c.colors.primary.main,borderRadius:c.shape.radius.default}})}}},86320:(J,R,e)=>{"use strict";e.d(R,{A_:()=>n.A_,K$:()=>a.K,Yo:()=>n.Yo});var n=e(17789),a=e(65800)},72939:(J,R,e)=>{"use strict";e.d(R,{p:()=>i});var n=e(41407),a=e(39953),l=e(34032),r=e(28888),o=e(82803),g=e(53039),m=e(96754),d=e(4919),u=e(12190);const i=({onFileUpload:c,className:E,children:p="Upload file",accept:h="*",size:y="md",showFileName:s})=>{const v=(0,o.wW)(f(y)),[C,D]=(0,a.useState)(""),M=(0,l.Z)(),P=(0,a.useCallback)(x=>{const S=x.currentTarget?.files?.[0];S&&D(S.name??""),c(x)},[c]);return a.createElement(a.Fragment,null,a.createElement("input",{type:"file",id:M,className:v.fileUpload,onChange:P,multiple:!1,accept:h,"data-testid":r.wl.components.FileUpload.inputField}),a.createElement("label",{htmlFor:M,className:(0,n.cx)(v.labelWrapper,E)},a.createElement(u.J,{name:"upload",className:v.icon}),p),s&&C&&a.createElement("span",{"aria-label":"File name",className:v.fileName,"data-testid":r.wl.components.FileUpload.fileNameSpan},(0,m.O)(C)))},f=c=>E=>{const p=(0,d.fW)({theme:E,variant:"primary",size:c,iconOnly:!1}),h=(0,g.getFocusStyles)(E);return{fileUpload:(0,n.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":h,"&:focus-visible + label":h}),labelWrapper:p.button,icon:p.icon,fileName:(0,n.css)({marginLeft:E.spacing(.5)})}}},41245:(J,R,e)=>{"use strict";e.d(R,{H:()=>m});var n=e(39953),a=e(55705);function l(...d){const u=n.useRef(null);return n.useEffect(()=>{d.forEach(i=>{i&&(typeof i=="function"?i(u.current):i.current=u.current)})},[d]),u}var r=e(4919),o=e(12190),g=e(38637);const m=n.forwardRef(({value:d,width:u,onChange:i,escapeRegex:f=!0,...c},E)=>{const p=n.useRef(null),h=l(E,p),y=d!==""?n.createElement(r.zx,{icon:"times",fill:"text",size:"sm",onClick:s=>{p.current?.focus(),i(""),s.stopPropagation()}},"Clear"):null;return n.createElement(g.I,{prefix:n.createElement(o.J,{name:"search"}),suffix:y,width:u,type:"text",value:f?(0,a.x6)(d??""):d,onChange:s=>i(f?(0,a.GE)(s.currentTarget.value):s.currentTarget.value),...c,ref:h})});m.displayName="FilterInput"},13868:(J,R,e)=>{"use strict";e.d(R,{B:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(4919),o=e(12190);const g=({label:d,selected:u,onClick:i,icon:f="check"})=>{const c=(0,l.wW)(m),E=(0,l.wW)(r.gN);return a.createElement("button",{type:"button",className:(0,n.cx)(E,c.wrapper,u&&c.selected),onClick:i},a.createElement("span",null,d),u&&a.createElement(o.J,{name:f,className:c.icon}))},m=d=>({wrapper:(0,n.css)({background:d.colors.background.secondary,borderRadius:d.shape.radius.pill,padding:d.spacing(0,2),fontSize:d.typography.bodySmall.fontSize,fontWeight:d.typography.fontWeightMedium,lineHeight:d.typography.bodySmall.lineHeight,color:d.colors.text.secondary,display:"flex",alignItems:"center",height:"32px",position:"relative",border:`1px solid ${d.colors.background.secondary}`,whiteSpace:"nowrap","&:hover":{background:d.colors.action.hover,color:d.colors.text.primary}}),selected:(0,n.css)({color:d.colors.text.primary,background:d.colors.action.selected,"&:hover":{background:d.colors.action.focus}}),icon:(0,n.css)({marginLeft:d.spacing(.5)})})},12392:(J,R,e)=>{"use strict";e.d(R,{W:()=>o});var n=e(41407),a=e(39953),l=e(56921);const r={labelWidth:6,inputWidth:12},o=({label:m,tooltip:d,labelWidth:u,inputWidth:i,inputEl:f,className:c,interactive:E,...p})=>{const h=g();return a.createElement("div",{className:(0,n.cx)(h.formField,c)},a.createElement(l.c,{width:u,tooltip:d,interactive:E},m),f||a.createElement("input",{type:"text",className:`gf-form-input ${i?`width-${i}`:""}`,...p,disabled:p.disabled}))};o.displayName="FormField",o.defaultProps=r;const g=()=>({formField:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative"})})},56921:(J,R,e)=>{"use strict";e.d(R,{c:()=>m});var n=e(77814),a=e.n(n),l=e(39953),r=e(12190),o=e(69865);const m=({children:d,isFocused:u,isInvalid:i,className:f,htmlFor:c,tooltip:E,width:p,interactive:h,...y})=>{const s=a()(f,`gf-form-label width-${p||"10"}`,{"gf-form-label--is-focused":u,"gf-form-label--is-invalid":i});return l.createElement("label",{className:s,...y,htmlFor:c},d,E&&l.createElement(o.u,{placement:"top",content:E,theme:"info",interactive:h},l.createElement(r.J,{tabIndex:0,name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},6430:(J,R,e)=>{"use strict";e.d(R,{W:()=>l});var n=e(39953);function a(r){return r<20?.9:r<26?.8:.6}const l=({value:r,className:o,style:g,...m})=>{const d=(r.prefix??"").length>0,u=(r.suffix??"").length>0;let i;if(g&&g.fontSize&&typeof g.fontSize=="number"){const f=g.fontSize,c=a(f);i={fontSize:f*c}}return n.createElement("div",{className:o,style:g,...m},n.createElement("div",null,d&&n.createElement("span",null,r.prefix),n.createElement("span",null,r.text),u&&n.createElement("span",{style:i},r.suffix)))};l.displayName="FormattedDisplayValue"},13026:(J,R,e)=>{"use strict";e.d(R,{X:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(53039),o=e(36495);const g=a.forwardRef(({label:d,description:u,value:i,htmlValue:f,onChange:c,disabled:E,className:p,indeterminate:h,invalid:y,...s},v)=>{const C=(0,a.useCallback)(x=>{c&&c(x)},[c]),D=(0,l.l4)(),M=m(D,y),P=h?"mixed":void 0;return a.createElement("label",{className:(0,n.cx)(M.wrapper,p)},a.createElement("div",{className:M.checkboxWrapper},a.createElement("input",{type:"checkbox",className:(0,n.cx)(M.input,h&&M.inputIndeterminate),checked:i,disabled:E,onChange:C,value:f,"aria-checked":P,...s,ref:v}),a.createElement("span",{className:M.checkmark})),d&&a.createElement("span",{className:M.label},d),u&&a.createElement("span",{className:M.description},u))}),m=(d,u=!1)=>{const i=(0,o.F)(d),f=2,c=1,E=p=>u?d.colors.error.border:p;return{wrapper:(0,n.css)({display:"inline-grid",alignItems:"center",columnGap:d.spacing(c),gridAutoRows:"max-content",position:"relative",verticalAlign:"middle"}),input:(0,n.css)({position:"absolute",zIndex:1,top:0,left:0,width:"100% !important",height:"100%",opacity:0,"&:focus + span, &:focus-visible + span":(0,r.getFocusStyles)(d),"&:focus:not(:focus-visible) + span":(0,r.getMouseFocusStyles)(d),"&:checked + span":{background:d.colors.primary.main,border:`1px solid ${E(d.colors.primary.main)}`,"&:hover":{background:d.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"4px",top:0,width:"6px",height:"12px",border:`solid ${d.colors.primary.contrastText}`,borderWidth:"0 3px 3px 0",transform:"rotate(45deg)"}},"&:disabled + span":{backgroundColor:d.colors.action.disabledBackground,cursor:"not-allowed",border:`1px solid ${E(d.colors.action.disabledBackground)}`,"&:hover":{backgroundColor:d.colors.action.disabledBackground},"&:after":{borderColor:d.colors.action.disabledText}}}),inputIndeterminate:(0,n.css)({"&[aria-checked='mixed'] + span":{border:`1px solid ${E(d.colors.primary.main)}`,background:d.colors.primary.main,"&:hover":{background:d.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"2px",right:"2px",top:"calc(50% - 1.5px)",height:"3px",border:`1.5px solid ${d.colors.primary.contrastText}`,backgroundColor:d.colors.primary.contrastText,width:"auto",transform:"none"}},"&:disabled[aria-checked='mixed'] + span":{backgroundColor:d.colors.action.disabledBackground,border:`1px solid ${E(d.colors.error.transparent)}`,"&:after":{borderColor:d.colors.action.disabledText}}}),checkboxWrapper:(0,n.css)({display:"flex",alignItems:"center",gridColumnStart:1,gridRowStart:1}),checkmark:(0,n.css)({position:"relative",zIndex:2,display:"inline-block",width:d.spacing(f),height:d.spacing(f),borderRadius:d.shape.radius.default,background:d.components.input.background,border:`1px solid ${E(d.components.input.borderColor)}`,"&:hover":{cursor:"pointer",borderColor:E(d.components.input.borderHover)}}),label:(0,n.cx)(i.label,(0,n.css)({gridColumnStart:2,gridRowStart:1,position:"relative",zIndex:2,cursor:"pointer",maxWidth:"fit-content",lineHeight:d.typography.bodySmall.lineHeight,marginBottom:0})),description:(0,n.cx)(i.description,(0,n.css)({gridColumnStart:2,gridRowStart:2,lineHeight:d.typography.bodySmall.lineHeight,marginTop:0}))}};g.displayName="Checkbox"},96227:(J,R,e)=>{"use strict";e.d(R,{g:()=>u});var n=e(41407),a=e(39953),l=e(64084),r=e(82803),o=e(82360),g=e(43324),m=e(36495);const d=(0,l.B)(f=>({field:(0,n.css)({display:"flex",flexDirection:"column",marginBottom:f.spacing(2)}),fieldHorizontal:(0,n.css)({flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),fieldValidationWrapper:(0,n.css)({marginTop:f.spacing(.5)}),fieldValidationWrapperHorizontal:(0,n.css)({flex:"1 1 100%"}),validationMessageHorizontalOverflow:(0,n.css)({width:0,overflowX:"visible","& > *":{whiteSpace:"nowrap"}})})),u=a.forwardRef(({label:f,description:c,horizontal:E,invalid:p,loading:h,disabled:y,required:s,error:v,children:C,className:D,validationMessageHorizontalOverflow:M,htmlFor:P,...x},S)=>{const I=(0,r.l4)(),T=d(I),O=P??(0,o.getChildId)(C),A=typeof f=="string"?a.createElement(m._,{htmlFor:O,description:c},`${f}${s?" *":""}`):f,B=i({invalid:p,disabled:y,loading:h});return a.createElement("div",{className:(0,n.cx)(T.field,E&&T.fieldHorizontal,D),...x},A,a.createElement("div",null,a.createElement("div",{ref:S},a.cloneElement(C,B)),p&&v&&!E&&a.createElement("div",{className:(0,n.cx)(T.fieldValidationWrapper,{[T.validationMessageHorizontalOverflow]:!!M})},a.createElement(g.S,null,v))),p&&v&&E&&a.createElement("div",{className:(0,n.cx)(T.fieldValidationWrapper,T.fieldValidationWrapperHorizontal,{[T.validationMessageHorizontalOverflow]:!!M})},a.createElement(g.S,null,v)))});u.displayName="Field";function i(f){for(const c in f)f[c]===void 0&&delete f[c];return f}},58464:(J,R,e)=>{"use strict";e.d(R,{F:()=>a});var n=e(14058);const a=({name:l,control:r,children:o,...g})=>{const{fields:m,append:d,prepend:u,remove:i,swap:f,move:c,insert:E}=(0,n.Dq)({control:r,name:l,...g});return o({fields:m,append:d,prepend:u,remove:i,swap:f,move:c,insert:E})}},2827:(J,R,e)=>{"use strict";e.d(R,{C:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(64084),o=e(96276);const g=({label:d,children:u,className:i,...f})=>{const c=(0,l.l4)(),E=m(c);return a.createElement("fieldset",{className:(0,n.cx)(E.wrapper,i),...f},d&&a.createElement(o.D,null,d),u)},m=(0,r.B)(d=>({wrapper:(0,n.css)({marginBottom:d.spacing(4),"&:last-child":{marginBottom:0}})}))},43324:(J,R,e)=>{"use strict";e.d(R,{S:()=>m});var n=e(41407),a=e(39953),l=e(64084),r=e(82803),o=e(12190);const g=(0,l.B)(d=>{const u=`
      font-size: ${d.typography.size.sm};
      font-weight: ${d.typography.fontWeightMedium};
      padding: ${d.spacing(.5,1)};
      color: ${d.colors.error.contrastText};
      background: ${d.colors.error.main};
      border-radius: ${d.shape.radius.default};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${d.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:(0,n.css)(u,{margin:d.spacing(.5,0,0,0),"&:before":{content:'""',position:"absolute",left:"9px",top:"-5px",width:0,height:0,borderWidth:"0 4px 5px 4px",borderColor:`transparent transparent ${d.colors.error.main} transparent`,borderStyle:"solid"}}),horizontal:(0,n.css)(u,{marginLeft:"10px","&:before":{content:'""',position:"absolute",left:"-5px",top:"9px",width:0,height:0,borderWidth:"4px 5px 4px 0",borderColor:"transparent #e02f44 transparent transparent",borderStyle:"solid"}}),fieldValidationMessageIcon:(0,n.css)({marginRight:d.spacing()})}}),m=({children:d,horizontal:u,className:i})=>{const f=(0,r.l4)(),c=g(f),E=(0,n.cx)(u?c.horizontal:c.vertical,i);return a.createElement("div",{role:"alert",className:E},a.createElement(o.J,{className:c.fieldValidationMessageIcon,name:"exclamation-triangle"}),d)}},85830:(J,R,e)=>{"use strict";e.d(R,{l:()=>r});var n=e(41407),a=e(39953),l=e(14058);function r({defaultValues:o,onSubmit:g,validateOnMount:m=!1,validateFieldsOnMount:d,children:u,validateOn:i="onSubmit",maxWidth:f=600,...c}){const{handleSubmit:E,trigger:p,formState:h,...y}=(0,l.cI)({mode:i,defaultValues:o});return(0,a.useEffect)(()=>{m&&p(d)},[p,d,m]),a.createElement("form",{className:(0,n.css)({maxWidth:f!=="none"?f+"px":f,width:"100%"}),onSubmit:E(g),...c},u({errors:h.errors,formState:h,trigger:p,...y}))}},69171:(J,R,e)=>{"use strict";e.d(R,{_:()=>m});var n=e(41407),a=e(39953),l=e(82803),r=e(82360),o=e(43324),g=e(99491);const m=({children:u,label:i,tooltip:f,labelWidth:c="auto",invalid:E,loading:p,disabled:h,required:y,className:s,htmlFor:v,grow:C,shrink:D,error:M,transparent:P,interactive:x,...S})=>{const I=(0,l.l4)(),T=d(I,C,D),O=v??(0,r.getChildId)(u),A=typeof i=="string"?a.createElement(g.W,{interactive:x,width:c,tooltip:f,htmlFor:O,transparent:P},`${i}${y?" *":""}`):i;return a.createElement("div",{className:(0,n.cx)(T.container,s),...S},A,a.createElement("div",{className:T.childContainer},a.cloneElement(u,{invalid:E,disabled:h,loading:p}),E&&M&&a.createElement("div",{className:(0,n.cx)(T.fieldValidationWrapper)},a.createElement(o.S,null,M))))};m.displayName="InlineField";const d=(u,i,f)=>({container:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${i?1:0} ${f?1:0} auto`,margin:`0 ${u.spacing(.5)} ${u.spacing(.5)} 0`}),childContainer:(0,n.css)({flex:`${i?1:0} ${f?1:0} auto`}),fieldValidationWrapper:(0,n.css)({marginTop:u.spacing(.5)})})},74661:(J,R,e)=>{"use strict";e.d(R,{Z:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=({children:g,className:m,...d})=>{const u=(0,l.wW)(o);return a.createElement("div",{className:(0,n.cx)(u.container,m),...d},g)},o=g=>({container:(0,n.css)({label:"InlineFieldRow",display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",rowGap:g.spacing(.5)})})},99491:(J,R,e)=>{"use strict";e.d(R,{W:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(12190),o=e(69865);const g=({children:d,className:u,tooltip:i,width:f,transparent:c,interactive:E,as:p="label",...h})=>{const y=(0,l.wW)(m,c,f);return a.createElement(p,{className:(0,n.cx)(y.label,u),...h},d,i&&a.createElement(o.u,{interactive:E,placement:"top",content:i,theme:"info"},a.createElement(r.J,{tabIndex:0,name:"info-circle",size:"sm",className:y.icon})))},m=(d,u=!1,i)=>({label:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,padding:d.spacing(0,1),fontWeight:d.typography.fontWeightMedium,fontSize:d.typography.size.sm,backgroundColor:u?"transparent":d.colors.background.secondary,height:d.spacing(d.components.height.md),lineHeight:d.spacing(d.components.height.md),marginRight:d.spacing(.5),borderRadius:d.shape.radius.default,border:"none",width:i?i!=="auto"?`${8*i}px`:i:"100%",color:d.colors.text.primary}),icon:(0,n.css)({color:d.colors.text.secondary,marginLeft:"10px",":hover":{color:d.colors.text.primary}})})},27303:(J,R,e)=>{"use strict";e.d(R,{m:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=({children:g,className:m,grow:d,...u})=>{const i=(0,l.wW)(o,d);return a.createElement("div",{className:(0,n.cx)(i.container,m),...u},g)};r.displayName="InlineSegmentGroup";const o=(g,m)=>({container:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${m?1:0} 0 auto`,marginBottom:g.spacing(.5)})})},36495:(J,R,e)=>{"use strict";e.d(R,{F:()=>g,_:()=>m});var n=e(41407),a=e(39953),l=e(64084),r=e(82803),o=e(12190);const g=(0,l.B)(d=>({label:(0,n.css)({label:"Label",fontSize:d.typography.size.sm,fontWeight:d.typography.fontWeightMedium,lineHeight:1.25,marginBottom:d.spacing(.5),color:d.colors.text.primary,maxWidth:"480px"}),labelContent:(0,n.css)({display:"flex",alignItems:"center"}),description:(0,n.css)({label:"Label-description",color:d.colors.text.secondary,fontSize:d.typography.size.sm,fontWeight:d.typography.fontWeightRegular,marginTop:d.spacing(.25),display:"block"}),categories:(0,n.css)({label:"Label-categories",display:"inline-flex",alignItems:"center"}),chevron:(0,n.css)({margin:d.spacing(0,.25)})})),m=({children:d,description:u,className:i,category:f,...c})=>{const E=(0,r.l4)(),p=g(E),h=f?.map((y,s)=>a.createElement("span",{className:p.categories,key:`${y}/${s}`},a.createElement("span",null,y),a.createElement(o.J,{name:"angle-right",className:p.chevron})));return a.createElement("div",{className:(0,n.cx)(p.label,i)},a.createElement("label",{...c},a.createElement("div",{className:p.labelContent},h,d),u&&a.createElement("span",{className:p.description},u)))}},27325:(J,R,e)=>{"use strict";e.d(R,{G:()=>o,I:()=>g});var n=e(77814),a=e.n(n),l=e(39953),r=e(73201),o=(m=>(m.Invalid="invalid",m.Valid="valid",m))(o||{});class g extends l.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=d=>u=>{const i=(0,r.Gu)(u.target.value,d);this.setState(f=>({...f,error:i?i[0]:null}))},this.populateEventPropsWithStatus=(d,u)=>{const i={...d};return u&&Object.keys(r.JU).forEach(f=>{((0,r.z3)(f,u)||d[f])&&(i[f]=async c=>{c.persist(),(0,r.z3)(f,u)&&await this.validatorAsync(u[f]).apply(this,[c]),d[f]&&d[f].apply(null,[c,this.status])})}),i}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:d,className:u,hideErrorMessage:i,inputRef:f,...c}=this.props,{error:E}=this.state,p=a()("gf-form-input",{invalid:this.isInvalid},u),h=this.populateEventPropsWithStatus(c,d);return l.createElement("div",{style:{flexGrow:1}},l.createElement("input",{...h,ref:f,className:p}),E&&!i&&l.createElement("span",null,E))}}g.defaultProps={className:""}},43377:(J,R,e)=>{"use strict";e.d(R,{B:()=>r,Z:()=>o});var n=e(39953),a=e(72970),l=e(12190);const r=g=>{const m=g.selectProps.menuIsOpen;return n.createElement(a.c.IndicatorsContainer,{...g},n.createElement(l.J,{name:m?"angle-up":"angle-down",style:{marginTop:"7px"}}))},o=r},80010:(J,R,e)=>{"use strict";e.d(R,{P:()=>l,Z:()=>r});var n=e(39953),a=e(72970);const l=o=>{const{children:g}=o;return n.createElement(a.c.NoOptionsMessage,{...o},n.createElement("div",{className:"gf-form-select-box__desc-option"},n.createElement("div",{className:"gf-form-select-box__desc-option__body"},g)))},r=l},81425:(J,R,e)=>{"use strict";e.d(R,{qb:()=>P,Ph:()=>M});var n=e(77814),a=e.n(n),l=e(39953),r=e(72970),o=e(58990),g=e(4294),m=e(65183),d=e(54342),u=e(64447),i=e(39592),f=e(77503),c=e(65435),E=e(69865),p=e(43377),h=e(80010),y=e(12190);const s=I=>{const{children:T,isSelected:O,data:A}=I;return l.createElement(r.c.Option,{...I},l.createElement("div",{className:"gf-form-select-box__desc-option"},A.imgUrl&&l.createElement("img",{className:"gf-form-select-box__desc-option__img",src:A.imgUrl,alt:""}),l.createElement("div",{className:"gf-form-select-box__desc-option__body"},l.createElement("div",null,T),A.description&&l.createElement("div",{className:"gf-form-select-box__desc-option__desc"},A.description)),O&&l.createElement(y.J,{name:"check","aria-hidden":"true"})))},v=null,C=I=>l.createElement(r.c.MenuList,{...I},l.createElement(u.$,{autoHide:!1,autoHeightMax:"inherit"},I.children)),D=class extends l.PureComponent{render(){const{defaultValue:I,getOptionLabel:T,getOptionValue:O,onChange:A,options:B,placeholder:b,width:W,value:V,className:w,isDisabled:K,isLoading:z,isSearchable:G,isClearable:Q,backspaceRemovesValue:j,isMulti:F,autoFocus:k,openMenuOnFocus:_,onBlur:Y,maxMenuHeight:Z,noOptionsMessage:ae,isOpen:ce,components:q,tooltipContent:De,tabSelectsValue:oe,onCloseMenu:te,onOpenMenu:fe,allowCustomValue:Te,formatCreateLabel:ge,"aria-label":he}=this.props;let me="";W&&(me="width-"+W);let ye=o.ZP;const ue={};Te&&(ye=m.Z,ue.formatCreateLabel=ge??(at=>at));const Oe=a()("gf-form-input","gf-form-input--form-dropdown",me,w),Ue={...D.defaultProps.components,...q};return l.createElement(x,{onCloseMenu:te,onOpenMenu:fe,tooltipContent:De,isOpen:ce},(at,Ne)=>l.createElement(ye,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Oe,components:Ue,defaultValue:I,value:V,getOptionLabel:T,getOptionValue:O,menuShouldScrollIntoView:!1,isSearchable:G,onChange:A,options:B,placeholder:b||"Choose",styles:(0,c.Z)(this.context),isDisabled:K,isLoading:z,isClearable:Q,autoFocus:k,onBlur:Y,openMenuOnFocus:_,maxMenuHeight:Z,noOptionsMessage:ae,isMulti:F,backspaceRemovesValue:j,menuIsOpen:ce,onMenuOpen:at,onMenuClose:Ne,tabSelectsValue:oe,"aria-label":he,...ue}))}};let M=D;M.contextType=d.N,M.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:s,SingleValue:f.P,IndicatorsContainer:p.Z,MenuList:C,Group:i.n}};class P extends l.PureComponent{render(){const{defaultValue:T,getOptionLabel:O,getOptionValue:A,onChange:B,placeholder:b,width:W,value:V,className:w,loadOptions:K,defaultOptions:z,isLoading:G,loadingMessage:Q,noOptionsMessage:j,isDisabled:F,isSearchable:k,isClearable:_,backspaceRemovesValue:Y,autoFocus:Z,onBlur:ae,openMenuOnFocus:ce,maxMenuHeight:q,isMulti:De,tooltipContent:oe,onCloseMenu:te,onOpenMenu:fe,isOpen:Te}=this.props;let ge="";W&&(ge="width-"+W);const he=a()("gf-form-input","gf-form-input--form-dropdown",ge,w);return l.createElement(x,{onCloseMenu:te,onOpenMenu:fe,tooltipContent:oe,isOpen:Te},(me,ye)=>l.createElement(g.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:he,components:{Option:s,SingleValue:f.P,IndicatorsContainer:p.Z,NoOptionsMessage:h.Z},defaultValue:T,value:V,getOptionLabel:O,getOptionValue:A,menuShouldScrollIntoView:!1,onChange:B,loadOptions:K,isLoading:G,defaultOptions:z,placeholder:b||"Choose",styles:(0,c.Z)(this.context),loadingMessage:Q,noOptionsMessage:j,isDisabled:F,isSearchable:k,isClearable:_,autoFocus:Z,onBlur:ae,openMenuOnFocus:ce,maxMenuHeight:q,isMulti:De,backspaceRemovesValue:Y}))}}P.contextType=d.N,P.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class x extends l.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:T}=this.props;T&&T(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:T}=this.props;T&&T(),this.setState({isOpenInternal:!1})}}render(){const{children:T,isOpen:O,tooltipContent:A}=this.props,{isOpenInternal:B}=this.state;let b;return(B||O)&&(b=!1),A?l.createElement(E.u,{show:b,content:A,placement:"bottom"},l.createElement("div",null,T(this.onOpenMenu,this.onCloseMenu))):l.createElement("div",null,T(this.onOpenMenu,this.onCloseMenu))}}const S=null},35829:(J,R,e)=>{"use strict";e.d(R,{r:()=>g});var n=e(86832),a=e.n(n),l=e(39953),r=e(12190),o=e(69865);class g extends l.PureComponent{constructor(){super(...arguments),this.state={id:(0,n.uniqueId)()},this.internalOnChange=d=>{d.stopPropagation(),this.props.onChange(d)}}render(){const{labelClass:d="",switchClass:u="",label:i,checked:f,disabled:c,transparent:E,className:p,tooltip:h,tooltipPlacement:y}=this.props,s=this.state.id,v=`gf-form-label ${d} ${E?"gf-form-label--transparent":""} pointer`,C=`gf-form-switch ${u} ${E?"gf-form-switch--transparent":""}`;return l.createElement("div",{className:"gf-form-switch-container-react"},l.createElement("label",{htmlFor:s,className:`gf-form gf-form-switch-container ${p||""}`},i&&l.createElement("div",{className:v},i,h&&l.createElement(o.u,{placement:y||"auto",content:h,theme:"info"},l.createElement(r.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}}))),l.createElement("div",{className:C},l.createElement("input",{disabled:c,id:s,type:"checkbox",checked:f,onChange:this.internalOnChange}),l.createElement("span",{className:"gf-form-switch__slider"}))))}}},96276:(J,R,e)=>{"use strict";e.d(R,{D:()=>o});var n=e(41407),a=e(39953),l=e(82803);const r=g=>({legend:(0,n.css)({fontSize:g.typography.h3.fontSize,fontWeight:g.typography.fontWeightRegular,margin:g.spacing(0,0,2,0)})}),o=({children:g,className:m,...d})=>{const u=(0,l.wW)(r);return a.createElement("legend",{className:(0,n.cx)(u.legend,m),...d},g)}},20454:(J,R,e)=>{"use strict";e.d(R,{S:()=>c});var n=e(41407),a=e(86832),l=e(39953),r=e(17393),o=e(82803),g=e(12190),m=e(64084),d=e(53039),u=e(15530);const i=l.forwardRef(({children:p,active:h=!1,disabled:y=!1,size:s="md",onChange:v,onClick:C,id:D,name:M=void 0,description:P,fullWidth:x,"aria-label":S},I)=>{const T=(0,o.l4)(),O=f(T,s,x);return l.createElement("div",{className:O.radioOption},l.createElement("input",{type:"radio",className:O.radio,onChange:v,onClick:C,disabled:y,id:D,checked:h,name:M,"aria-label":S||P,ref:I}),l.createElement("label",{className:O.radioLabel,htmlFor:D,title:P||S},p))});i.displayName="RadioButton";const f=(0,m.B)((p,h,y)=>{const{fontSize:s,height:v,padding:C}=(0,u.iL)(h,p),D=p.colors.text.secondary,M=p.colors.text.primary,P=v*p.spacing.gridSize-4-2;return{radioOption:(0,n.css)({display:"flex",justifyContent:"space-between",position:"relative",flex:y?"1 0 0":"none",textAlign:"center"}),radio:(0,n.css)({position:"absolute",opacity:0,zIndex:-1e3,width:"100% !important",height:"100%","&:checked + label":{color:p.colors.text.primary,fontWeight:p.typography.fontWeightMedium,background:p.colors.action.selected,zIndex:3},"&:focus + label, &:focus-visible + label":(0,d.getFocusStyles)(p),"&:focus:not(:focus-visible) + label":(0,d.getMouseFocusStyles)(p),"&:disabled + label":{color:p.colors.text.disabled,cursor:"not-allowed"}}),radioLabel:(0,n.css)({fontSize:s,height:`${P}px`,lineHeight:`${P}px`,color:D,padding:p.spacing(0,C),borderRadius:p.shape.radius.default,background:p.colors.background.primary,cursor:"pointer",zIndex:1,userSelect:"none",whiteSpace:"nowrap",flexGrow:1,"&:hover":{color:M}})}});function c({options:p,value:h,onChange:y,onClick:s,disabled:v,disabledOptions:C,size:D="md",id:M,className:P,fullWidth:x=!1,autoFocus:S=!1,"aria-label":I,invalid:T=!1}){const O=(0,l.useCallback)(w=>()=>{y&&y(w.value)},[y]),A=(0,l.useCallback)(w=>()=>{s&&s(w.value)},[s]),B=M??(0,a.uniqueId)("radiogroup-"),b=(0,l.useRef)(B),W=(0,o.wW)(E),V=(0,l.useRef)(null);return(0,l.useEffect)(()=>{S&&V.current&&V.current.focus()},[S]),l.createElement("div",{role:"radiogroup","aria-label":I,className:(0,n.cx)(W.radioGroup,x&&W.fullWidth,P)},p.map((w,K)=>{const z=C&&w.value&&C.includes(w.value),G=w.icon?(0,r.iJ)(w.icon):void 0,Q=!!(w.imgUrl||w.label||w.component);return l.createElement(i,{size:D,disabled:z||v,active:h===w.value,key:`o.label-${K}`,"aria-label":w.ariaLabel,onChange:O(w),onClick:A(w),id:`option-${w.value}-${B}`,name:b.current,description:w.description,fullWidth:x,ref:h===w.value?V:void 0},G&&l.createElement(g.J,{name:G,className:(0,n.cx)(Q&&W.icon)}),w.imgUrl&&l.createElement("img",{src:w.imgUrl,alt:w.label,className:W.img}),w.label," ",w.component?l.createElement(w.component,null):null)}))}c.displayName="RadioButtonGroup";const E=p=>({radioGroup:(0,n.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${p.components.input.borderColor}`,borderRadius:p.shape.radius.default,padding:"2px"}),fullWidth:(0,n.css)({display:"flex"}),icon:(0,n.css)({marginRight:"6px"}),img:(0,n.css)({width:p.spacing(2),height:p.spacing(2),marginRight:p.spacing(1)}),invalid:(0,n.css)({border:`1px solid ${p.colors.error.border}`})})},41641:(J,R,e)=>{"use strict";e.d(R,{x:()=>m});var n=e(41407),a=e(86832),l=e(39953),r=e(82803);const o=({id:u,name:i,label:f,checked:c,value:E,disabled:p,description:h,onChange:y})=>{const s=(0,r.wW)(g);return l.createElement("label",{title:h,className:s.label},l.createElement("input",{id:u,name:i,type:"radio",checked:c,value:E,disabled:p,className:s.input,onChange:()=>y&&y(u)}),l.createElement("div",null,f,h&&l.createElement("div",{className:s.description},h)))},g=u=>({input:(0,n.css)({position:"relative",appearance:"none",outline:"none",backgroundColor:u.colors.background.canvas,width:`${u.spacing(2)} !important`,height:u.spacing(2),border:`1px solid ${u.colors.border.medium}`,borderRadius:u.shape.radius.circle,margin:"3px 0",":checked":{backgroundColor:u.v1.palette.white,border:`5px solid ${u.colors.primary.main}`},":disabled":{backgroundColor:`${u.colors.action.disabledBackground} !important`,borderColor:u.colors.border.weak},":disabled:checked":{border:`1px solid ${u.colors.border.weak}`},":disabled:checked::after":{content:'""',width:"6px",height:"6px",backgroundColor:u.colors.text.disabled,borderRadius:u.shape.radius.circle,display:"inline-block",position:"absolute",top:"4px",left:"4px"},":focus":{outline:"none !important",boxShadow:`0 0 0 1px ${u.colors.background.canvas}, 0 0 0 3px ${u.colors.primary.main}`}}),label:(0,n.css)({fontSize:u.typography.fontSize,lineHeight:"22px",display:"grid",gridTemplateColumns:`${u.spacing(2)} auto`,gap:u.spacing(1)}),description:(0,n.css)({fontSize:u.typography.size.sm,color:u.colors.text.secondary})});function m({name:u,id:i,options:f,value:c,onChange:E,className:p,disabled:h,disabledOptions:y=[]}){const s=(0,r.wW)(d),v=i??(0,a.uniqueId)("radiogroup-list-");return l.createElement("div",{id:i,className:(0,n.cx)(s.container,p),role:"radiogroup"},f.map((C,D)=>{const M=`${v}-${D}`,P=c&&c===C.value,x=h||y.some(I=>I===C.value),S=()=>E&&C.value&&E(C.value);return l.createElement(o,{key:D,id:M,name:u,label:C.label,description:C.description,checked:P,value:C.value,disabled:x,onChange:S})}))}const d=u=>({container:(0,n.css)({display:"grid",gap:u.spacing(1)})})},15530:(J,R,e)=>{"use strict";e.d(R,{GL:()=>l,RK:()=>r,ht:()=>g,iL:()=>d,nf:()=>o});var n=e(41407),a=e(53039);const l=u=>(0,n.css)({"&:focus":(0,a.getFocusStyles)(u)}),r=(u,i=!1)=>{const f=i?u.colors.error.border:u.components.input.borderColor,c=i?u.colors.error.shade:u.components.input.borderHover,E=u.components.input.background,p=u.components.input.text,h=u.isDark?"#2e2f35":"#bab4ca";return(0,n.cx)(o(u),(0,n.css)({background:E,lineHeight:u.typography.body.lineHeight,fontSize:u.typography.size.md,color:p,border:`1px solid ${f}`,"&:-webkit-autofill, &:-webkit-autofill:hover":{boxShadow:`inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${E}!important`,WebkitTextFillColor:`${p} !important`,borderColor:h},"&:-webkit-autofill:focus":{boxShadow:`0 0 0 2px ${u.colors.background.primary}, 0 0 0px 4px ${u.colors.primary.main}, inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${E}!important`,WebkitTextFillColor:`${p} !important`},"&:hover":{borderColor:c},"&:focus":{outline:"none"},"&:disabled":{backgroundColor:u.colors.action.disabledBackground,color:u.colors.action.disabledText,border:`1px solid ${u.colors.action.disabledBackground}`,"&:hover":{borderColor:f}},"&::placeholder":{color:u.colors.text.disabled,opacity:1}}))},o=u=>(0,n.css)({padding:u.spacing(0,1,0,1)}),g=()=>({sm:(0,n.css)({width:m("sm")}),md:(0,n.css)({width:m("md")}),lg:(0,n.css)({width:m("lg")}),auto:(0,n.css)({width:m("auto")})}),m=u=>{switch(u){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function d(u,i){switch(u){case"sm":return{padding:1,fontSize:i.typography.size.sm,height:i.components.height.sm};case"lg":return{padding:3,fontSize:i.typography.size.lg,height:i.components.height.lg};case"md":default:return{padding:2,fontSize:i.typography.size.md,height:i.components.height.md}}}},78031:(J,R,e)=>{"use strict";e.d(R,{a:()=>h});var n=e(6033),a=e.n(n),l=e(39953),r=e(83502),o=e(35664),g=e(60695),m=e(34547),d=e(76297),u=e(4919),i=e(97898),f=e(49231);const c={mode:g.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function E(y,s,v,C){const D=v!=null,M=C===m.wm.Vertical?s:y,P=Math.min(M*.15/1.5,20),x=P*1.5,S=D?s-x:s,I=Math.min(S,y);return{showLabel:D,gaugeHeight:I,titleFontSize:P}}function p(y,s,v,C){if(s.color?.mode!==i.S.Thresholds)return[{value:s.min??o.Hx,color:v.color??i.R}];const D=s.thresholds??c,M=D.mode===g.H.Percentage,P=D.steps;let x=s.min??o.Hx,S=s.max??o.Z3;M&&(x=0,S=100);const I=(0,f.m1)(x,P),T=(0,f.m1)(S,P),O=[{value:+x.toFixed(y),color:C.visualization.getColorByName(I.color)}];let A=!0;for(let B=0;B<P.length;B++){const b=P[B];if(A){I===b&&(A=!1);continue}const W=P[B-1];if(O.push({value:b.value,color:C.visualization.getColorByName(W.color)}),b===T)break}return O.push({value:+S.toFixed(y),color:C.visualization.getColorByName(T.color)}),O}class h extends l.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:s,value:v,height:C,onClick:D,text:M,theme:P,orientation:x}=this.props,S=E(s,C,v.title,x),I=x===m.wm.Vertical?`${S.gaugeHeight}px`:"100%",T=l.createElement("div",{style:{height:`${S.gaugeHeight}px`,width:I},ref:O=>this.canvasElement=O});return l.createElement(l.Fragment,null,D?l.createElement("button",{className:(0,u.gN)(P),type:"button",onClick:D},T):T,S.showLabel&&l.createElement("div",{style:{textAlign:"center",fontSize:M?.titleSize??S.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:I,top:"-4px",cursor:"default"}},v.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:s,showThresholdLabels:v,showThresholdMarkers:C,width:D,height:M,theme:P,value:x,orientation:S}=this.props,I=E(D,M,x.title),T=S===m.wm.Vertical?I.gaugeHeight:D,O=Math.min(T,I.gaugeHeight),A=P.colors.background.secondary,B=v?1.5:1,b=Math.min(O/5.5,40)/B,W=b/5,V=(0,r.zc)(x),K=Math.min(T,O*1.3)*.9-((b+(C?W:0)+(v?10:0))*2+10),z=this.props.text?.valueSize??(0,d.MX)(V,K,O,1,b*1.7),G=Math.max(z/2.5,12);let Q=s.min??o.Hx,j=s.max??o.Z3,F=x.numeric;s.thresholds?.mode===g.H.Percentage&&(Q=0,j=100,x.percent===void 0?F=(F-Q)/(j-Q)*100:F=x.percent*100);const k=s.decimals===void 0?2:s.decimals;C&&(Q=+Q.toFixed(k),j=+j.toFixed(k));const _={series:{gauges:{gauge:{min:Q,max:j,neutralValue:s.custom?.neutral,background:{color:A},border:{color:null},shadow:{show:!1},width:b},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:p(k,s,x,P),label:{show:v,margin:W+1,font:{size:G}},show:C,width:W},value:{color:x.color,formatter:()=>V,font:{size:z,family:P.typography.fontFamily}},show:!0}}},Y={data:[[0,F]],label:x.title};try{this.canvasElement&&a().plot(this.canvasElement,[Y],_)}catch(Z){console.error("Gauge rendering error",Z,_,x)}}render(){return l.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}h.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:c}}},27199:(J,R,e)=>{"use strict";e.d(R,{k:()=>y});var n=e(6033),a=e.n(n),l=e(86832),r=e(39953),o=e(2906),g=e(34547),m=e(49621),d=e(84415),u=e(55987),i=e(38913);const f=({dimensions:v,activeDimensions:C,pos:D,timeZone:M})=>{let P=null;if(C.xAxis===null)return null;C.yAxis&&(P=C.yAxis[0]);const x=C.xAxis[1]?(0,o.jC)(v.xAxis,C.xAxis[0],C.xAxis[1]):D.x,S=(0,i.wu)(v.yAxis.columns,v.xAxis.columns,x,M),I=S.time,T=S.results.map((O,A)=>({color:O.color,label:O.label,value:O.value,isActive:P===A}));return r.createElement(u.c,{series:T,timestamp:I})};f.displayName="MultiModeGraphTooltip";var c=e(83502),E=e(69330);const p=({dimensions:v,activeDimensions:C,timeZone:D})=>{if(C.yAxis===null||C.yAxis[1]===void 0||C.xAxis===null||C.xAxis[1]===void 0)return null;const M=(0,o.jC)(v.xAxis,C.xAxis[0],C.xAxis[1]),P=(0,o.$q)(v.xAxis,C.xAxis[0]),x=P.display?(0,c.zc)(P.display(M)):M,S=(0,o.$q)(v.yAxis,C.yAxis[0]),I=(0,o.jC)(v.yAxis,C.yAxis[0],C.yAxis[1]),T=S.display,O=T(I);return r.createElement(u.c,{series:[{color:O.color,label:(0,E.CZ)(S),value:(0,c.zc)(O)}],timestamp:x})};p.displayName="SingleModeGraphTooltip";const h=({mode:v=g.f3.Single,dimensions:C,activeDimensions:D,pos:M,timeZone:P})=>!D||!D.xAxis?null:v==="single"?r.createElement(p,{dimensions:C,activeDimensions:D,timeZone:P}):r.createElement(f,{dimensions:C,activeDimensions:D,pos:M,timeZone:P});h.displayName="GraphTooltip";class y extends r.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.$element=null,this.onPlotSelected=(C,D)=>{const{onHorizontalRegionSelected:M}=this.props;M&&M(D.xaxis.from,D.xaxis.to)},this.onPlotHover=(C,D,M)=>{this.setState({isTooltipVisible:!0,activeItem:M,pos:D})},this.onPlotClick=(C,D,M)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:M,contextPos:D})},this.renderTooltip=()=>{const{children:C,series:D,timeZone:M}=this.props,{pos:P,activeItem:x,isTooltipVisible:S}=this.state;let I;if(!S||!P||D.length===0||(r.Children.forEach(C,K=>{if(I)return;(K&&K.type&&(K.type.displayName||K.type.name))===m.I.displayName&&(I=K)}),!I))return null;const T=I.props,O=T.mode||"single";if(!x&&O==="single")return null;const A=T.tooltipComponent||h,B=x?x.series.seriesIndex:0,b=x?x.dataIndex:void 0,W={xAxis:[B,b],yAxis:x?[x.series.seriesIndex,x.dataIndex]:null},V={dimensions:{xAxis:(0,o.q2)("xAxis",D.map(K=>K.timeField)),yAxis:(0,o.q2)("yAxis",D.map(K=>K.valueField))},activeDimensions:W,pos:P,mode:T.mode||g.f3.Single,timeZone:M},w=r.createElement(A,{...V});return r.cloneElement(I,{content:w,position:{x:P.pageX,y:P.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:C}=this.props,{contextPos:D,contextItem:M,isContextVisible:P}=this.state;if(!P||!D||!M||C.length===0)return null;const x=M?M.series.seriesIndex:0,S=M?M.dataIndex:void 0,I={xAxis:[x,S],yAxis:M?[M.series.seriesIndex,M.dataIndex]:null},T={xAxis:(0,o.q2)("xAxis",C.map(b=>b.timeField)),yAxis:(0,o.q2)("yAxis",C.map(b=>b.valueField))},O=()=>this.setState({isContextVisible:!1}),A=()=>({datapoint:M.datapoint,dataIndex:M.dataIndex,series:M.series,seriesIndex:M.series.seriesIndex,pageX:D.pageX,pageY:D.pageY}),B={x:D.pageX,y:D.pageY,onClose:O,getContextMenuSource:A,timeZone:this.props.timeZone,dimensions:T,contextDimensions:I};return r.createElement(d.w,{...B})},this.getBarWidth=()=>{const{series:C}=this.props;return Math.min(...C.map(D=>D.timeStep))}}componentDidUpdate(C,D){C!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=a()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(C){return C.length===0?[{show:!0,min:-1,max:1}]:(0,l.uniqBy)(C.map(D=>{const M=D.yAxis?D.yAxis.index:1,P=D.yAxis&&D.yAxis.min&&!isNaN(D.yAxis.min)?D.yAxis.min:null,x=D.yAxis&&D.yAxis.tickDecimals&&!isNaN(D.yAxis.tickDecimals)?D.yAxis.tickDecimals:null;return{show:!0,index:M,position:M===1?"left":"right",min:P,tickDecimals:x}}),D=>D.index)}draw(){if(this.element===null)return;const{width:C,series:D,timeRange:M,showLines:P,showBars:x,showPoints:S,isStacked:I,lineWidth:T,timeZone:O,onHorizontalRegionSelected:A}=this.props;if(!C)return;const B=C/100,b=M.from.valueOf(),W=M.to.valueOf(),V=this.getYAxes(D),w={legend:{show:!1},series:{stack:I,lines:{show:P,lineWidth:T,zero:!1},points:{show:S,fill:1,fillColor:!1,radius:2},bars:{show:x,fill:1,barWidth:x?this.getBarWidth()/1.5:1,zero:!1,lineWidth:T},shadowSize:0},xaxis:{timezone:O,show:!0,mode:"time",min:b,max:W,label:"Datetime",ticks:B,timeformat:(0,i.mc)(B,b,W),tickFormatter:i.sV},yaxes:V,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:A?"x":null,color:"#666"},crosshair:{mode:"x"}};try{a().plot(this.element,D.filter(K=>K.isVisible),w)}catch(K){throw console.error("Graph rendering error",K,w,D),new Error("Error rendering panel")}}render(){const{ariaLabel:C,height:D,width:M,series:P}=this.props,x=P.length===0,S=this.renderTooltip(),I=this.renderContextMenu();return r.createElement("div",{className:"graph-panel","aria-label":C},r.createElement("div",{className:"graph-panel__chart",ref:T=>this.element=T,style:{height:D,width:M},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),x&&r.createElement("div",{className:"datapoints-warning"},"No data"),S,I)}}y.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const s=null},84415:(J,R,e)=>{"use strict";e.d(R,{b:()=>E,w:()=>c});var n=e(41407),a=e(39953),l=e(2906),r=e(48069),o=e(82803),g=e(53790),m=e(6430),d=e(12223),u=e(43078),i=e(85001),f=e(67611);const c=({getContextMenuSource:h,timeZone:y,itemsGroup:s,dimensions:v,contextDimensions:C,...D})=>{const M=h(),P=s?s.map(I=>({...I,items:I.items?.filter(T=>T.label)})):[],x=()=>{if(!M)return null;let I;if(v?.yAxis&&C?.yAxis?.[1]){const O=(0,l.jC)(v.yAxis,C.yAxis[0],C.yAxis[1]),A=M.series.valueField.display;I=A(O)}const T=(0,r.dq)(M.datapoint[0],{defaultWithMS:M.series.hasMsResolution,timeZone:y});return a.createElement(E,{timestamp:T,seriesColor:M.series.color,displayName:M.series.alias||M.series.label,displayValue:I})},S=()=>P?.map((I,T)=>a.createElement(u.k,{key:`${I.label}${T}`,label:I.label},(I.items||[]).map(O=>a.createElement(i.s,{key:`${O.label}`,url:O.url,label:O.label,target:O.target,icon:O.icon,active:O.active,onClick:O.onClick}))));return a.createElement(g.x,{...D,renderMenuItems:S,renderHeader:x})},E=({timestamp:h,seriesColor:y,displayName:s,displayValue:v})=>{const C=(0,o.wW)(p);return a.createElement("div",{className:C.wrapper},a.createElement("strong",null,h),a.createElement(d.Lh,null,a.createElement("div",null,a.createElement(f.F,{color:y}),a.createElement("span",{className:C.displayName},s)),v&&a.createElement(m.W,{value:v})))};function p(h){return{wrapper:(0,n.css)({padding:h.spacing(.5,1),fontSize:h.typography.size.sm,zIndex:h.zIndex.tooltip}),displayName:(0,n.css)({whiteSpace:"nowrap",paddingLeft:h.spacing(.5)})}}},85574:(J,R,e)=>{"use strict";e.d(R,{U:()=>r});var n=e(86832),a=e.n(n),l=e(39953);class r extends l.Component{constructor(g){super(g),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:g.series}}componentDidUpdate(g){const{series:m}=this.props;(0,n.isEqual)(g.series,m)||this.setState({hiddenSeries:[],toggledSeries:m})}onSeriesToggle(g,m){const{series:d,onHiddenSeriesChanged:u}=this.props,{hiddenSeries:i}=this.state;if(m.ctrlKey||m.metaKey||m.shiftKey){const p=i.indexOf(g)>-1?i.filter(y=>y!==g):i.concat([g]),h=d.map(y=>({...y,isVisible:p.indexOf(y.label)===-1}));this.setState({hiddenSeries:p,toggledSeries:h},()=>u?u(p):void 0);return}const f=d.map(p=>p.label),c=i.length+1===f.length?[]:(0,n.difference)(f,[g]),E=d.map(p=>({...p,isVisible:c.indexOf(p.label)===-1}));this.setState({hiddenSeries:c,toggledSeries:E},()=>u?u(c):void 0)}render(){const{children:g}=this.props,{toggledSeries:m}=this.state;return g({onSeriesToggle:this.onSeriesToggle,toggledSeries:m})}}},19032:(J,R,e)=>{"use strict";e.d(R,{U:()=>u});var n=e(41407),a=e(39953),l=e(64084),r=e(64447),o=e(78832),g=e(27199);const m=(0,l.B)(({placement:i})=>({wrapper:(0,n.css)({display:"flex",flexDirection:i==="bottom"?"column":"row"}),graphContainer:(0,n.css)({minHeight:"65%",flexGrow:1}),legendContainer:(0,n.css)({padding:"10px 0",maxHeight:i==="bottom"?"35%":"none"})})),d=(i,f=!1,c=!1)=>{const E=i.reduce((h,y)=>h+(y[1]||0),0)===0,p=!i.reduce((h,y)=>h&&y[1]!==null,!0);return f&&p||c&&E},u=i=>{const{series:f,timeRange:c,width:E,height:p,showBars:h,showLines:y,showPoints:s,sortLegendBy:v,sortLegendDesc:C,legendDisplayMode:D,legendVisibility:M,placement:P,onSeriesToggle:x,onToggleSort:S,hideEmpty:I,hideZero:T,isStacked:O,lineWidth:A,onHorizontalRegionSelected:B,timeZone:b,children:W,ariaLabel:V}=i,{graphContainer:w,wrapper:K,legendContainer:z}=m(i),G=f.reduce((Q,j)=>d(j.data,I,T)?Q:Q.concat([{label:j.label,color:j.color||"",disabled:!j.isVisible,yAxis:j.yAxis.index,getDisplayValues:()=>j.info||[]}]),[]);return a.createElement("div",{className:K,"aria-label":V},a.createElement("div",{className:w},a.createElement(g.k,{series:f,timeRange:c,timeZone:b,showLines:y,showPoints:s,showBars:h,width:E,height:p,isStacked:O,lineWidth:A,onHorizontalRegionSelected:B},W)),M&&a.createElement("div",{className:z},a.createElement(r.$,{hideHorizontalTrack:!0},a.createElement(o.l,{items:G,displayMode:D,placement:P,sortBy:v,sortDesc:C,onLabelClick:(Q,j)=>{x&&x(Q.label,j)},onToggleSort:S}))))}},38913:(J,R,e)=>{"use strict";e.d(R,{mc:()=>d,sV:()=>m,wu:()=>g});var n=e(83502),a=e(69330),l=e(48069),r=e(47330);const o=(u,i)=>{let f=0,c=u.values.length-1,E;for(;;){if(f>c)return Math.max(c,0);E=Math.floor((f+c)/2);const p=u.values[E];if(p===i)return E;p&&p<i?f=E+1:c=E-1}},g=(u,i,f,c)=>{let E,p,h,y,s;const v=[];let C,D;for(E=0;E<u.length;E++){p=u[E];const M=i[E];h=o(M,f),y=f-M.values[h],s=M.values[h],(C===void 0||y>=0&&(y<C||C<0)||y<0&&y>C)&&(C=y,D=M.display?(0,n.zc)(M.display(s)):s);const P=p.display(p.values[h]);v.push({value:(0,n.zc)(P),datapointIndex:h,seriesIndex:E,color:P.color,label:(0,a.CZ)(p),time:M.display?(0,n.zc)(M.display(s)):s})}return{results:v,time:D}},m=(u,i)=>(0,l.dq)(u,{format:i?.options?.timeformat,timeZone:i?.options?.timezone}),d=(u,i,f)=>{if(i&&f&&u){const c=f-i,E=c/u/1e3,p=86400010,h=31536e6;return E<=10?r.U6.interval.millisecond:E<=45?r.U6.interval.second:c<=p?r.U6.interval.minute:E<=8e4?r.U6.interval.hour:c<=h?r.U6.interval.day:E<=31536e3?r.U6.interval.month:r.U6.interval.year}return r.U6.interval.minute}},42626:(J,R,e)=>{"use strict";e.d(R,{d:()=>y,j:()=>p});var n=e(39953),a=e(31544),l=e(63646),r=e(36085),o=e(86981),g=e(89591),m=e(36316),d=e(71519),u=e(31276),i=e(96248),f=e(79469),c=e(95966),E=e(76685);const p="__fixed";function h(s,v,C=[]){for(const D of C)if(typeof D=="function"){if(!D(s,v))return!1}else if(v[D]!==s[D])return!1;return!0}class y extends n.Component{constructor(v){super(v),this.panelContext={},this.subscription=new a.w0,this.getTimeRange=()=>this.props.timeRange;let C=this.prepState(v);C.alignedData=C.config.prepData([C.alignedFrame]),this.state=C,this.plotInstance=n.createRef()}prepState(v,C=!0){let D=null;const{frames:M,fields:P,preparePlotFrame:x}=v,I=(x||E.Rn)(M,P||{x:r.Ls.get(o.mi.firstTimeField).get({}),y:r.Ls.get(o.mi.byTypes).get(new Set([g.fS.number,g.fS.enum]))},v.timeRange);if((0,c.Zp)("GraphNG",!1,"data aligned",I),I){let T=this.state?.config;C&&(T=v.prepConfig(I,this.props.frames,this.getTimeRange),(0,c.Zp)("GraphNG",!1,"config prepared",T)),D={alignedFrame:I,config:T},(0,c.Zp)("GraphNG",!1,"data prepared",D.alignedData)}return D}handleCursorUpdate(v){const C=v.payload?.point?.time,D=this.plotInstance.current;if(D&&C){const M=D.valToPos(C,"x");let P;if(M&&(P=(0,c.ah)(D,D.posToIdx(M))),!P||!M)return;D.setCursor({left:M,top:P})}}componentDidMount(){this.panelContext=this.context;const{eventBus:v}=this.panelContext;this.subscription.add(v.getStream(m.es).pipe((0,l.p)(50)).subscribe({next:C=>{v!==C.origin&&this.handleCursorUpdate(C)}})),this.subscription.add(v.getStream(d.IA).pipe((0,l.p)(50)).subscribe({next:C=>this.handleCursorUpdate(C)})),this.subscription.add(v.getStream(m.xH).pipe((0,l.p)(50)).subscribe({next:()=>{const C=this.plotInstance?.current;C&&!C.cursor._lock&&C.setCursor({left:-10,top:-10})}}))}componentDidUpdate(v){const{frames:C,structureRev:D,timeZone:M,propsToDiff:P}=this.props,x=!h(v,this.props,P);if(C!==v.frames||x||M!==v.timeZone){let S=this.prepState(this.props,!1);S&&((this.state.config===void 0||M!==v.timeZone||D!==v.structureRev||!D||x)&&(S.config=this.props.prepConfig(S.alignedFrame,this.props.frames,this.getTimeRange),(0,c.Zp)("GraphNG",!1,"config recreated",S.config)),S.alignedData=S.config.prepData([S.alignedFrame]),this.setState(S))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:v,height:C,children:D,renderLegend:M}=this.props,{config:P,alignedFrame:x,alignedData:S}=this.state;return P?n.createElement(i.AY,{width:v,height:C,legend:M(P)},(I,T)=>n.createElement(f.N,{config:P,data:S,width:I,height:T,plotRef:O=>this.plotInstance.current=O},D?D(P,x):null)):null}}y.contextType=u.bb},71170:(J,R,e)=>{"use strict";e.d(R,{z:()=>l});var n=e(39953);const a=n.createContext({}),l=()=>{const{data:r,dimFields:o,mapSeriesIndexToDataFrameFieldIndex:g}=(0,n.useContext)(a),m=(0,n.useCallback)(()=>{const d=o.x;let u=null;for(let i=0;i<r.fields.length;i++)if(d(r.fields[i],r,[r])){u=r.fields[i];break}return u},[r,o]);return{dimFields:o,mapSeriesIndexToDataFrameFieldIndex:g,getXAxisField:m,alignedData:r}}},12714:(J,R,e)=>{"use strict";e.d(R,{w:()=>l});var n=e(76685);const a={threshold:(o,g,m)=>o+m,midpoint:(o,g,m)=>(o+g)/2,plusone:(o,g,m)=>o+1};function l(o){if(o.frame.length===0)return o.frame;let g=!0,{frame:m,refFieldName:d,refFieldPseudoMax:u,refFieldPseudoMin:i,insertMode:f}=o;f||(f=a.threshold);const c=(0,n.N$)(m,d);if(c==null)return m;c.state={...c.state,nullThresholdApplied:!0};const E=m.fields.map(h=>h.config.custom?.insertNulls||c.config.interval||null),p=new Set(E);if(p.delete(null),p.size===0)return m;if(p.size===1){const h=p.values().next().value;if(h<=0)return m;const y=c.values,s=m.fields.map(C=>C.values),v=r(y,s,h,i,u,f,g);return v===s?m:{...m,length:v[0].length,fields:m.fields.map((C,D)=>({...C,values:v[D]}))}}return m}function r(o,g,m,d=null,u=null,i,f){const c=o.length,E=[];if(d!=null&&d<o[0]){let s=Math.ceil((o[0]-d)/m),v=o[0]-s*m;for(;v<o[0];)E.push(i(v-m,v,m)),v+=m}E.push(o[0]);let p=o[0];for(let s=1;s<c;s++){const v=o[s];for(;v-p>m&&(E.push(i(p,v,m)),p+=m,!!f););E.push(v),p=v}if(u!=null&&u>p)for(;p+m<u;)E.push(i(p,u,m)),p+=m;const h=E.length;if(h===c)return g;const y=[];for(let s of g){let v;if(s!==o){v=Array(h);for(let C=0,D=0;C<h;C++)v[C]=o[D]===E[C]?s[D++]:null}else v=E;y.push(v)}return y}},69994:(J,R,e)=>{"use strict";e.d(R,{I:()=>n});function n(a){return{...a,fields:a.fields.map(l=>{const r=+l.config?.noValue;if(Number.isNaN(r))return l;{const o=l.values.slice();for(let g=0;g<o.length;g++)o[g]===null&&(o[g]=r);return{...l,values:o}}})}}},76685:(J,R,e)=>{"use strict";e.d(R,{z1:()=>f,N$:()=>d,Rn:()=>i});var n=e(89591),a=e(82837),l=e(34547),r=e(42626),o=e(12714);function g(E,p,h){let y,s;for(let v=0;v<p.length;v++)if(p[v]==null)s==null&&y!=null&&(s=v);else{if(s!=null){if(E[v]-y<h)for(;s<v;)p[s++]=void 0;s=null}y=E[v]}return p}function m(E){return E.type===n.fS.number&&E.config.custom?.drawStyle===l.l8.Bars&&!E.config.custom?.hideFrom?.viz}function d(E,p){return E.fields.find(h=>p!=null?h.name===p:h.type===n.fS.time)}function u(E,p){const h=d(E,p);let y=h?.values;for(let s=0;s<E.fields.length;s++){let v=E.fields[s];if(v===h||m(v))continue;let C=v.config.custom?.spanNulls;typeof C=="number"&&C!==-1&&y&&(v.values=g(y,v.values,C))}return E}function i(E,p,h){let y;e:for(let D of E)for(let M of D.fields)if(p.x(M,D,E)){y=M;break e}E=E.map(D=>y?.state?.nullThresholdApplied?D:(0,o.w)({frame:D,refFieldName:y.name,refFieldPseudoMin:h?.from.valueOf(),refFieldPseudoMax:h?.to.valueOf()}));let s=0;E.forEach(D=>{D.fields.forEach(M=>{m(M)&&(M.config.custom={...M.config.custom,spanNulls:-1},s++)})});let v=1/0;s>1&&E.forEach(D=>{if(!D.fields.some(m))return;const M=y.values;for(let P=0;P<M.length;P++)P>0&&(v=Math.min(v,M[P]-M[P-1]))});let C=(0,a._9)({frames:E,joinBy:p.x,keep:p.y,keepOriginIndices:!0});return C?(C=u(C,y.name),v!==1/0&&(C.fields.forEach((D,M)=>{let P=D.values;if(M===0){let x=P[P.length-1];P.push(x+v,x+2*v)}else m(D)?P.push(null,null):P.push(void 0,void 0)}),C.length+=2),C):null}function f(E,p){const h="na",y=`${E.min!==void 0?E.min:h}-${E.max!==void 0?E.max:h}`,s=`${E.custom?.axisSoftMin!==void 0?E.custom.axisSoftMin:h}-${E.custom?.axisSoftMax!==void 0?E.custom.axisSoftMax:h}`,v=`${E.custom?.axisPlacement!==void 0?E.custom?.axisPlacement:l.LB.Auto}`,C=E.unit??r.j,D=E.custom?.scaleDistribution?c(E.custom.scaleDistribution):l.wf.Linear,M=E.custom?.axisLabel?E.custom.axisLabel:h;return`${C}/${y}/${s}/${v}/${D}/${M}/${p}`}function c(E){return E.type===l.wf.Log?`${E.type}${E.log}`:E.type}},12190:(J,R,e)=>{"use strict";e.d(R,{J:()=>d});var n=e(41407),a=e(39953),l=e(66883),r=e(17393),o=e(82803),g=e(99268);const m=i=>({container:(0,n.css)({label:"Icon",display:"inline-block",lineHeight:0}),icon:(0,n.css)({verticalAlign:"middle",display:"inline-block",fill:"currentColor"}),orange:(0,n.css)({fill:i.v1.palette.orange})}),d=a.forwardRef(({size:i="md",type:f="default",name:c,className:E,style:p,title:h="",...y},s)=>{const v=(0,o.wW)(m);if(c?.startsWith("fa fa-"))return a.createElement("i",{className:u(c,E),...y,style:p});if((0,r.Mo)(c)||console.warn("Icon component passed an invalid icon name",c),!c||c.includes(".."))return a.createElement("div",{ref:s},"invalid icon name");const C=(0,g.lK)(),D=(0,g.Bm)(i),M=D,P=c.startsWith("gf-bar-align")?16:c.startsWith("gf-interp")?30:D,x=(0,g.y_)(c,f),S=`${C}${x}/${c}.svg`;return a.createElement("div",{className:v.container,...y,ref:s},a.createElement(l.default,{src:S,width:P,height:M,title:h,className:(0,n.cx)(v.icon,E,f==="mono"?{[v.orange]:c==="favorite"}:""),style:p}))});d.displayName="Icon";function u(i,f){return(0,n.cx)(i,{"fa-spin":i==="fa fa-spinner"},f)}},99268:(J,R,e)=>{"use strict";e.d(R,{Bm:()=>l,lK:()=>o,y_:()=>a});const n=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function a(g,m){return g?.startsWith("gf-")?"custom":n.includes(g)?"mono":m==="default"?"unicons":m==="solid"?"solid":"mono"}function l(g){switch(g){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}let r;function o(){if(r)return r;const g=typeof window<"u"&&window.__grafana_public_path__;return g?r=g+"img/icons/":r="public/img/icons/",r}},68497:(J,R,e)=>{"use strict";e.d(R,{h:()=>f});var n=e(41407),a=e(39953),l=e(14255),r=e(91249),o=e(82803),g=e(64084),m=e(53039),d=e(12190),u=e(99268),i=e(69865);const f=a.forwardRef((E,p)=>{const{size:h="md",variant:y="secondary"}=E,s=(0,o.l4)();let v;h==="xxl"||h==="xxxl"?((0,l.d)("IconButton",'size="xxl" and size="xxxl"','size="xl"'),v="xl"):v=h;const C=c(s,v,y);let D,M;if("tooltip"in E){const{tooltip:P}=E;D=typeof P=="string"?P:void 0}else if("ariaLabel"in E||"aria-label"in E){const{ariaLabel:P,["aria-label"]:x}=E;D=x||P,M=p}if("tooltip"in E){const{name:P,iconType:x,className:S,tooltip:I,tooltipPlacement:T,...O}=E;return a.createElement(i.u,{ref:p,content:I,placement:T},a.createElement("button",{...O,ref:M,"aria-label":D,className:(0,n.cx)(C.button,S),type:"button"},a.createElement(d.J,{name:P,size:v,className:C.icon,type:x})))}else{const{name:P,iconType:x,className:S,...I}=E;return a.createElement("button",{...I,ref:M,"aria-label":D,className:(0,n.cx)(C.button,S),type:"button"},a.createElement(d.J,{name:P,size:v,className:C.icon,type:x}))}});f.displayName="IconButton";const c=(0,g.B)((E,p,h)=>{const y=(0,u.Bm)(p)+E.spacing.gridSize;let s=E.colors.text.primary;return h==="primary"?s=E.colors.primary.text:h==="destructive"&&(s=E.colors.error.text),{button:(0,n.css)({zIndex:0,position:"relative",margin:`0 ${E.spacing.x0_5} 0 0`,boxShadow:"none",border:"none",display:"inline-flex",background:"transparent",justifyContent:"center",alignItems:"center",padding:0,color:s,"&[disabled], &:disabled":{cursor:"not-allowed",color:E.colors.action.disabledText,opacity:.65},"&:before":{zIndex:-1,position:"absolute",opacity:0,width:`${y}px`,height:`${y}px`,borderRadius:E.shape.radius.default,content:'""',transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionProperty:"opacity"},"&:focus, &:focus-visible":(0,m.getFocusStyles)(E),"&:focus:not(:focus-visible)":(0,m.getMouseFocusStyles)(E),"&:hover":{"&:before":{backgroundColor:h==="secondary"?E.colors.action.hover:r.alpha(s,.12),opacity:1}}}),icon:(0,n.css)({verticalAlign:"baseline"})}})},5217:(J,R,e)=>{"use strict";e.d(R,{Z:()=>m,a:()=>u});var n=e(41407),a=e(39953),l=e(96083),r=e(82803),o=e(12608),g=e(7429);const m=a.memo(a.forwardRef(({title:f,featureState:c,...E},p)=>{const h=(0,r.wW)(d),y=c?a.createElement(a.Fragment,null,a.createElement("div",{className:h.badge},a.createElement(u,{featureState:c})),a.createElement("h3",null,f)):a.createElement("h3",null,f);return a.createElement(g.v,{branded:!0,title:y,urlTitle:"Read documentation",ref:p,...E})}));m.displayName="FeatureInfoBox";const d=f=>({badge:(0,n.css)({marginBottom:f.spacing(1)})}),u=({featureState:f,tooltip:c})=>{const E=i(f);return a.createElement(o.C,{text:E.text,color:E.color,icon:E.icon,tooltip:c})};function i(f){switch(f){case l.CQ.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},7429:(J,R,e)=>{"use strict";e.d(R,{v:()=>m});var n=e(41407),a=e(39953),l=e(82803),r=e(64084),o=e(33155),g=e(12190);const m=a.memo(a.forwardRef(({title:u,className:i,children:f,branded:c,url:E,urlTitle:p,onDismiss:h,severity:y="info",...s},v)=>{const C=(0,l.wW)(d);return a.createElement(o.b,{severity:y,className:i,...s,ref:v,title:u},a.createElement("div",null,f),E&&a.createElement("a",{href:E,className:(0,n.cx)("external-link",C.docsLink),target:"_blank",rel:"noreferrer"},a.createElement(g.J,{name:"book"})," ",p||"Read more"))}));m.displayName="InfoBox";const d=(0,r.B)(u=>({docsLink:(0,n.css)({display:"inline-block",marginTop:u.spacing(2)})}))},99560:(J,R,e)=>{"use strict";e.d(R,{K:()=>m});var n=e(41407),a=e(39953),l=e(76941),r=e(82803),o=e(12190),g=e(70393);function m({referenceElement:c,children:E,suffixIcon:p,placement:h,alternativePlacement:y}){const[s,v]=(0,a.useState)(null),[C,D]=(0,a.useState)(h),M=(0,l.D)(c,s,{placement:C}),P=(0,r.wW)(d),x=(0,r.wW)(f);return a.useEffect(()=>{y&&u(h,s,c)&&D(y)},[y,h,s,c]),a.createElement(g.h_,null,a.createElement("div",{style:{display:"inline-block",...M.styles.popper},...M.attributes.popper,ref:v,"aria-live":"polite"},a.createElement("span",{className:(0,n.cx)(P.root,x[C])},E&&a.createElement("span",null,E),p&&a.createElement(o.J,{name:p}))))}const d=c=>({root:(0,n.css)({...c.typography.bodySmall,willChange:"transform",background:c.components.tooltip.background,color:c.components.tooltip.text,padding:c.spacing(.5,1.5),borderRadius:c.shape.radius.pill,display:"inline-flex",gap:c.spacing(.5),alignItems:"center"})}),u=(c,E,p)=>{const h=E?.getBoundingClientRect(),y=p?.getBoundingClientRect();if(!h||!y)return!1;switch(c){case"right":return h.width+y.right>window.innerWidth;case"bottom":return h.height+y.bottom>window.innerHeight;case"left":return y.left-h.width<0;case"top":return y.top-h.height<0;default:return!1}},i=(c,E)=>(0,n.keyframes)({from:{opacity:0,transform:`translate(${c}, ${E})`},to:{opacity:1,transform:"translate(0, 0px)"}}),f=c=>{const p=i(0,c.spacing(1)),h=i(0,c.spacing(1*-1)),y=i(c.spacing(1),0),s=i(c.spacing(1*-1),0);return{top:(0,n.css)({marginBottom:c.spacing(1),animation:`${p} ease-out 100ms`}),bottom:(0,n.css)({marginTop:c.spacing(1),animation:`${h} ease-out 100ms`}),left:(0,n.css)({marginRight:c.spacing(1),animation:`${y} ease-out 100ms`}),right:(0,n.css)({marginLeft:c.spacing(1),animation:`${s} ease-out 100ms`})}}},28448:(J,R,e)=>{"use strict";e.d(R,{H:()=>r});var n=e(39953),a=e(76297),l=e(38637);const r=n.forwardRef((g,m)=>{const{defaultValue:d="",minWidth:u=10,maxWidth:i,onCommitChange:f,onKeyDown:c,onBlur:E,...p}=g,[h,y]=n.useState(d),[s,v]=n.useState(u);return(0,n.useEffect)(()=>{v(o(h.toString(),u,i))},[h,i,u]),n.createElement(l.I,{...p,ref:m,value:h.toString(),onChange:C=>{y(C.currentTarget.value)},width:s,onBlur:C=>{E?E(C):f&&f(C)},onKeyDown:C=>{c?c(C):C.key==="Enter"&&f&&f(C)},"data-testid":"autosize-input"})});function o(g,m,d){if(!g)return m;const u=3,i=(0,a.X1)(g.toString(),14).width/8+u;return m&&i<m?m:d&&i>d?d:i}r.displayName="AutoSizeInput"},38637:(J,R,e)=>{"use strict";e.d(R,{H:()=>u,I:()=>d});var n=e(41407),a=e(39953),l=e(15262),r=e(82803),o=e(64084),g=e(15530),m=e(28409);const d=a.forwardRef((i,f)=>{const{className:c,addonAfter:E,addonBefore:p,prefix:h,suffix:y,invalid:s,loading:v,width:C=0,...D}=i,[M,P]=(0,l.Z)(),[x,S]=(0,l.Z)(),I=(0,r.l4)(),T=u({theme:I,invalid:!!s,width:C});return a.createElement("div",{className:(0,n.cx)(T.wrapper,c),"data-testid":"input-wrapper"},!!p&&a.createElement("div",{className:T.addon},p),a.createElement("div",{className:T.inputWrapper},h&&a.createElement("div",{className:T.prefix,ref:M},h),a.createElement("input",{ref:f,className:T.input,...D,style:{paddingLeft:h?P.width+12:void 0,paddingRight:y||v?S.width+12:void 0}}),(y||v)&&a.createElement("div",{className:T.suffix,ref:x},v&&a.createElement(m.$,{className:T.loadingIndicator,inline:!0}),y)),!!E&&a.createElement("div",{className:T.addon},E))});d.displayName="Input";const u=(0,o.B)(({theme:i,invalid:f=!1,width:c})=>{const E="28px",p=(0,n.css)({position:"absolute",top:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,fontSize:i.typography.size.md,height:"100%",minWidth:E,color:i.colors.text.secondary});return{wrapper:(0,n.cx)((0,n.css)({label:"input-wrapper",display:"flex",width:c?i.spacing(c):"100%",height:i.spacing(i.components.height.md),borderRadius:i.shape.radius.default,"&:hover":{"> .prefix, .suffix, .input":{borderColor:f?i.colors.error.border:i.colors.primary.border},"input[type='number']":{appearance:"textfield"},"input[type='number']::-webkit-inner-spin-button, input[type='number']::-webkit-outer-spin-button":{WebkitAppearance:"inner-spin-button !important",opacity:1}}})),inputWrapper:(0,n.css)({label:"input-inputWrapper",position:"relative",flexGrow:1,zIndex:1,"&:not(:first-child):last-child":{"> input":{borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0}},"&:first-child:not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0}},"&:not(:first-child):not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderBottomLeftRadius:0}},input:{"&:not(:first-child)":{paddingLeft:E},"&:not(:last-child)":{paddingRight:E},"&[readonly]":{cursor:"default"}}}),input:(0,n.cx)((0,g.GL)(i),(0,g.RK)(i,f),(0,n.css)({label:"input-input",position:"relative",zIndex:0,flexGrow:1,borderRadius:i.shape.radius.default,height:"100%",width:"100%"})),inputDisabled:(0,n.css)({backgroundColor:i.colors.action.disabledBackground,color:i.colors.action.disabledText,border:`1px solid ${i.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}),addon:(0,n.css)({label:"input-addon",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:0,flexShrink:0,position:"relative","&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0,"> :last-child":{borderTopRightRadius:0,borderBottomRightRadius:0}},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0,"> :first-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"> *:focus":{zIndex:2}}),prefix:(0,n.cx)(p,(0,n.css)({label:"input-prefix",paddingLeft:i.spacing(1),paddingRight:i.spacing(.5),borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0})),suffix:(0,n.cx)(p,(0,n.css)({label:"input-suffix",paddingLeft:i.spacing(1),paddingRight:i.spacing(1),marginBottom:"-2px",borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0,right:0})),loadingIndicator:(0,n.css)({"& + *":{marginLeft:i.spacing(.5)}})}})},9006:(J,R,e)=>{"use strict";e.d(R,{g:()=>a});var n=e(14058);const a=n.Qr},94696:(J,R,e)=>{"use strict";e.d(R,{e:()=>y});var n=e(41407),a=e(86832),l=e(39953),r=e(41655),o=e(10694),g=e(82803),m=e(12190),d=e(39017),u=e(69865),i=e(68497);const f=(0,n.css)({display:"flex",alignItems:"center",height:"100%"});function c({row:D,__rowID:M}){return l.createElement("div",{className:f},l.createElement(i.h,{tooltip:"toggle row expanded","aria-controls":M,name:D.isExpanded?"angle-down":"angle-right","aria-expanded":D.isExpanded,...D.getToggleRowExpandedProps(),size:"lg"}))}const E="__expander";function p(D){return[{id:E,Cell:c,disableSortBy:!0,width:0},...D.map(M=>({id:M.id,accessor:M.id,Header:M.header||(()=>null),sortType:M.sortType||"alphanumeric",disableSortBy:!M.sortType,width:M.disableGrow?0:void 0,visible:M.visible,...M.cell&&{Cell:M.cell}}))]}const h=D=>{const M=D.colors.emphasize(D.colors.background.primary,.03);return{container:(0,n.css)({display:"flex",gap:D.spacing(2),flexDirection:"column",width:"100%",overflowX:"auto"}),table:(0,n.css)({borderRadius:D.shape.radius.default,width:"100%",td:{padding:D.spacing(1)},"td, th":{minWidth:D.spacing(3)}}),disableGrow:(0,n.css)({width:0}),header:(0,n.css)({borderBottom:`1px solid ${D.colors.border.weak}`,"&, & > button":{position:"relative",whiteSpace:"nowrap",padding:D.spacing(1)},"& > button":{"&:after":{content:'"\\00a0"'},width:"100%",height:"100%",background:"none",border:"none",paddingRight:D.spacing(2.5),textAlign:"left",fontWeight:D.typography.fontWeightMedium}}),row:(0,n.css)({label:"row",borderBottom:`1px solid ${D.colors.border.weak}`,"&:hover":{backgroundColor:M},"&:last-child":{borderBottom:0}}),expandedRow:(0,n.css)({label:"expanded-row-content",borderBottom:"none"}),expandedContentRow:(0,n.css)({label:"expanded-row-content",td:{borderBottom:`1px solid ${D.colors.border.weak}`,position:"relative",padding:D.spacing(2,2,2,5),"&:before":{content:'""',position:"absolute",width:"1px",top:0,left:"16px",bottom:D.spacing(2),background:D.colors.border.medium}}}),sortableHeader:(0,n.css)({"&&":{padding:0}})}};function y({className:D,columns:M,data:P,getRowId:x,headerTooltips:S,pageSize:I=0,renderExpandedRow:T,fetchData:O}){const A=(0,g.wW)(h),B=(0,l.useMemo)(()=>p(M),[M]),b=s(),W=(0,l.useCallback)(k=>`${b}-${k.id}`.replace(/\s/g,""),[b]),V=[r.useSortBy,r.useExpanded],w=I>0;w&&V.push(r.usePagination);const K=(0,r.useTable)({columns:B,data:P,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,manualSortBy:!!O,getRowId:x,initialState:{hiddenColumns:[!T&&E,...B.filter(k=>!(!k.visible||k.visible(P))).map(k=>k.id).filter(o.fQ)].filter(o.fQ)}},...V),{getTableProps:z,getTableBodyProps:G,headerGroups:Q,prepareRow:j}=K,{sortBy:F}=K.state;return(0,l.useEffect)(()=>{O&&O({sortBy:F})},[F,O]),(0,l.useEffect)(()=>{w&&K.setPageSize(I)},[w,I,K.setPageSize,K]),l.createElement("div",{className:A.container},l.createElement("table",{...z(),className:(0,n.cx)(A.table,D)},l.createElement("thead",null,Q.map(k=>{const{key:_,...Y}=k.getHeaderGroupProps();return l.createElement("tr",{key:_,...Y},k.headers.map(Z=>{const{key:ae,...ce}=Z.getHeaderProps(),q=S?.[Z.id];return l.createElement("th",{key:ae,className:(0,n.cx)(A.header,{[A.disableGrow]:Z.width===0,[A.sortableHeader]:Z.canSort}),...ce,...Z.isSorted&&{"aria-sort":Z.isSortedDesc?"descending":"ascending"}},l.createElement(C,{column:Z,headerTooltip:q}))}))})),l.createElement("tbody",{...G()},(w?K.page:K.rows).map(k=>{j(k);const{key:_,...Y}=k.getRowProps(),Z=W(k),ae=k.isExpanded;return l.createElement(l.Fragment,{key:_},l.createElement("tr",{...Y,className:(0,n.cx)(A.row,ae&&A.expandedRow)},k.cells.map(ce=>{const{key:q,...De}=ce.getCellProps();return l.createElement("td",{key:q,...De},ce.render("Cell",{__rowID:Z}))})),ae&&T&&l.createElement("tr",{...Y,id:Z,className:A.expandedContentRow},l.createElement("td",{colSpan:k.cells.length},T(k.original))))}))),w&&l.createElement("span",null,l.createElement(d.t,{currentPage:K.state.pageIndex+1,numberOfPages:K.pageOptions.length,onNavigate:k=>K.gotoPage(k-1)})))}const s=()=>(0,l.useMemo)(()=>(0,a.uniqueId)("InteractiveTable"),[]),v=D=>({sortIcon:(0,n.css)({position:"absolute",top:D.spacing(1)}),headerTooltipIcon:(0,n.css)({marginLeft:D.spacing(.5)})});function C({column:{canSort:D,render:M,isSorted:P,isSortedDesc:x,getSortByToggleProps:S},headerTooltip:I}){const T=(0,g.wW)(v),{onClick:O}=S(),A=l.createElement(l.Fragment,null,M("Header"),I&&l.createElement(u.u,{theme:"info-alt",content:I.content,placement:"top-end"},l.createElement(m.J,{className:T.headerTooltipIcon,name:I.iconName||"info-circle","data-testid":"header-tooltip-icon"})),P&&l.createElement("span",{"aria-hidden":"true",className:T.sortIcon},l.createElement(m.J,{name:x?"angle-down":"angle-up"})));return D?l.createElement("button",{type:"button",onClick:O},A):A}},19649:(J,R,e)=>{"use strict";e.d(R,{g:()=>l});var n=e(39953),a=e(72202);class l extends n.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,n.createRef)(),this.renderJson=()=>{const{json:o,config:g,open:m,onDidRender:d}=this.props,u=this.wrapperRef.current,i=new a.u(o,m,g);u.hasChildNodes()?u.replaceChild(i.render(),u.lastChild):u.appendChild(i.render()),d&&d(i.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:o}=this.props;return n.createElement("div",{className:o,ref:this.wrapperRef})}}l.defaultProps={open:3,config:{animateOpen:!0}}},72202:(J,R,e)=>{"use strict";e.d(R,{u:()=>s});var n=e(86832);function a(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function l(v){return!!v&&typeof v==="object"}function r(v){if(v===void 0)return"";if(v===null||typeof v=="object"&&!v.constructor)return"Object";const D=/function ([^(]*)/.exec(v.constructor.toString());return D&&D.length>1?D[1]:""}function o(v){return v===null?"null":typeof v}function g(v,C){const D=o(v);return D==="null"||D==="undefined"?D:(D==="string"&&(C='"'+a(C)+'"'),D==="function"?v.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":C)}let m="";function d(v){return l(v)?(m=r(v),Array.isArray(v)&&(m+="["+v.length+"]")):m=g(v,v.toString()),m}function u(v){return`json-formatter-${v}`}function i(v,C,D){const M=document.createElement(v);return C&&M.classList.add(u(C)),D!==void 0&&(D instanceof Node?M.appendChild(D):M.appendChild(document.createTextNode(String(D)))),M}const f=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,c=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,E=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,p=10,h=typeof window<"u"&&window.requestAnimationFrame||(v=>(v(),0)),y={animateOpen:!0,animateClose:!0};class s{constructor(C,D=1,M=y,P){this.json=C,this.open=D,this.config=M,this.key=P,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(C){this._isOpen=C}get isDate(){return this.type==="string"&&(f.test(this.json)||E.test(this.json)||c.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return l(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return r(this.json)}get type(){return o(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(C=>C||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(u("open")))}openAtDepth(C=1){C<0||(this.open=C,this.isOpen=C!==0,this.element&&(this.removeChildren(!1),C===0?this.element.classList.remove(u("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(u("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,n.isNumber)(this.json[0])||(0,n.isNumber)(this.json[1]))}renderArray(){const C=i("span");return C.appendChild(i("span","bracket","[")),this.isNumberArray()?(this.json.forEach((D,M)=>{M>0&&C.appendChild(i("span","array-comma",",")),C.appendChild(i("span","number",D))}),this.skipChildren=!0):C.appendChild(i("span","number",this.json.length)),C.appendChild(i("span","bracket","]")),C}render(C=!1){this.element=i("div","row");const D=i("a","toggler-link"),M=i("span","toggler");if(this.isObject&&D.appendChild(M),this.hasKey&&D.appendChild(i("span","key",`${this.key}:`)),this.isObject){const x=i("span","value"),S=i("span"),I=i("span","constructor-name",this.constructorName);if(S.appendChild(I),this.isArray){const T=this.renderArray();S.appendChild(T)}x.appendChild(S),D.appendChild(x)}else{const x=this.isUrl?i("a"):i("span");x.classList.add(u(this.type)),this.isDate&&x.classList.add(u("date")),this.isUrl&&(x.classList.add(u("url")),x.setAttribute("href",this.json));const S=g(this.json,this.json);x.appendChild(document.createTextNode(S)),D.appendChild(x)}const P=i("div","children");return this.isObject&&P.classList.add(u("object")),this.isArray&&P.classList.add(u("array")),this.isEmpty&&P.classList.add(u("empty")),this.config&&this.config.theme&&this.element.classList.add(u(this.config.theme)),this.isOpen&&this.element.classList.add(u("open")),C||this.element.appendChild(D),this.skipChildren?D.removeChild(M):this.element.appendChild(P),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&D.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(C=!1){const D=this.element&&this.element.querySelector(`div.${u("children")}`);if(!(!D||this.isEmpty))if(C){let M=0;const P=()=>{const x=this.keys[M],S=new s(this.json[x],this.open-1,this.config,x);D.appendChild(S.render()),M+=1,M<this.keys.length&&(M>p?P():h(P))};h(P)}else this.keys.forEach(M=>{const P=new s(this.json[M],this.open-1,this.config,M);D.appendChild(P.render())})}removeChildren(C=!1){const D=this.element&&this.element.querySelector(`div.${u("children")}`);if(C){let M=0;const P=()=>{D&&D.children.length&&(D.removeChild(D.children[0]),M+=1,M>p?P():h(P))};h(P)}else D&&(D.innerHTML="")}}},71974:(J,R,e)=>{"use strict";e.d(R,{x:()=>o});var n=e(41407),a=e(39953),l=e(82803),r=e(7894);const o=(0,a.forwardRef)((u,i)=>{const{children:f,margin:c,marginX:E,marginY:p,marginTop:h,marginBottom:y,marginLeft:s,marginRight:v,padding:C,paddingX:D,paddingY:M,paddingTop:P,paddingBottom:x,paddingLeft:S,paddingRight:I,display:T,backgroundColor:O,grow:A,shrink:B,borderColor:b,borderStyle:W,borderRadius:V,justifyContent:w,alignItems:K,boxShadow:z,element:G,...Q}=u,j=(0,l.wW)(d,c,E,p,h,y,s,v,C,D,M,P,x,S,I,T,O,A,B,b,W,V,w,K,z),F=G??"div";return a.createElement(F,{ref:i,className:j.root,...Q},f)});o.displayName="Box";const g=(u,i)=>{switch(u){case"error":case"success":case"info":case"warning":return i.colors[u].borderTransparent;default:return u?i.colors.border[u]:void 0}},m=(u,i)=>{switch(u){case"error":case"success":case"info":case"warning":return i.colors[u].transparent;default:return u?i.colors.background[u]:void 0}},d=(u,i,f,c,E,p,h,y,s,v,C,D,M,P,x,S,I,T,O,A,B,b,W,V,w)=>({root:(0,n.css)([(0,r.U)(u,i,K=>({margin:u.spacing(K)})),(0,r.U)(u,f,K=>({marginLeft:u.spacing(K),marginRight:u.spacing(K)})),(0,r.U)(u,c,K=>({marginTop:u.spacing(K),marginBottom:u.spacing(K)})),(0,r.U)(u,E,K=>({marginTop:u.spacing(K)})),(0,r.U)(u,p,K=>({marginBottom:u.spacing(K)})),(0,r.U)(u,h,K=>({marginLeft:u.spacing(K)})),(0,r.U)(u,y,K=>({marginRight:u.spacing(K)})),(0,r.U)(u,s,K=>({padding:u.spacing(K)})),(0,r.U)(u,v,K=>({paddingLeft:u.spacing(K),paddingRight:u.spacing(K)})),(0,r.U)(u,C,K=>({paddingTop:u.spacing(K),paddingBottom:u.spacing(K)})),(0,r.U)(u,D,K=>({paddingTop:u.spacing(K)})),(0,r.U)(u,M,K=>({paddingBottom:u.spacing(K)})),(0,r.U)(u,P,K=>({paddingLeft:u.spacing(K)})),(0,r.U)(u,x,K=>({paddingRight:u.spacing(K)})),(0,r.U)(u,S,K=>({display:K})),(0,r.U)(u,I,K=>({backgroundColor:m(K,u)})),(0,r.U)(u,T,K=>({flex:K})),(0,r.U)(u,O,K=>({flexShrink:K})),(0,r.U)(u,B,K=>({borderStyle:K})),(0,r.U)(u,A,K=>({borderColor:g(K,u)})),(B||A)&&{borderWidth:"1px"},(0,r.U)(u,W,K=>({justifyContent:K})),(0,r.U)(u,V,K=>({alignItems:K})),(0,r.U)(u,b,K=>({borderRadius:u.shape.radius[K]})),(0,r.U)(u,w,K=>({boxShadow:u.shadows[K]}))])})},37047:(J,R,e)=>{"use strict";e.d(R,{k:()=>o});var n=e(41407),a=e(39953),l=e(82803),r=e(7894);const o=a.forwardRef(({gap:m=1,alignItems:d,justifyContent:u,direction:i,wrap:f,children:c,...E},p)=>{const h=(0,l.wW)(g,m,d,u,i,f);return a.createElement("div",{ref:p,className:h.flex,...E},c)});o.displayName="Flex";const g=(m,d,u,i,f,c)=>({flex:(0,n.css)([{display:"flex"},(0,r.U)(m,f,E=>({flexDirection:E})),(0,r.U)(m,c,E=>({flexWrap:E})),(0,r.U)(m,u,E=>({alignItems:E})),(0,r.U)(m,i,E=>({justifyContent:E})),(0,r.U)(m,d,E=>({gap:m.spacing(E)}))])})},12223:(J,R,e)=>{"use strict";e.d(R,{Ar:()=>o,Lh:()=>g,W2:()=>d,wc:()=>m});var n=e(41407),a=e(39953),l=e(82803),r=(c=>(c[c.Horizontal=0]="Horizontal",c[c.Vertical=1]="Vertical",c))(r||{});const o=({children:c,orientation:E=0,spacing:p="sm",justify:h="flex-start",align:y="normal",wrap:s=!1,width:v="100%",height:C="100%",...D})=>{const M=(0,l.wW)(u,E,p,h,y,s);return a.createElement("div",{className:M.layout,style:{width:v,height:C},...D},a.Children.toArray(c).filter(Boolean).map((P,x)=>a.createElement("div",{className:M.childWrapper,key:x},P)))},g=({children:c,spacing:E,justify:p,align:h="center",wrap:y,width:s,height:v})=>a.createElement(o,{spacing:E,justify:p,orientation:0,align:h,width:s,height:v,wrap:y},c),m=({children:c,spacing:E,justify:p,align:h,width:y,height:s})=>a.createElement(o,{spacing:E,justify:p,orientation:1,align:h,width:y,height:s},c),d=({children:c,padding:E,margin:p,grow:h,shrink:y})=>{const s=(0,l.wW)(f,E,p);return a.createElement("div",{className:(0,n.cx)(s.wrapper,h!==void 0&&(0,n.css)({flexGrow:h}),y!==void 0&&(0,n.css)({flexShrink:y}))},c)},u=(c,E,p,h,y,s)=>{const v=p!=="none"?c.spacing(i[p]):0,C=E===0&&!s||E===1?0:`-${v}`,D=E===1?"vertical-group":"horizontal-group";return{layout:(0,n.css)({label:D,display:"flex",flexDirection:E===1?"column":"row",flexWrap:s?"wrap":"nowrap",justifyContent:h,alignItems:y,height:"100%",maxWidth:"100%",marginBottom:C}),childWrapper:(0,n.css)({label:"layoutChildrenWrapper",marginBottom:E===0&&!s?0:v,marginRight:E===0?v:0,display:"flex",alignItems:y,"&:last-child":{marginBottom:E===1?0:void 0,marginRight:E===0?0:void 0}})}},i={none:0,xs:.5,sm:1,md:2,lg:3},f=(c,E,p)=>{const h=E&&E!=="none"&&c.spacing(i[E])||0,y=p&&p!=="none"&&c.spacing(i[p])||0;return{wrapper:(0,n.css)({label:"container",margin:y,padding:h})}}},7894:(J,R,e)=>{"use strict";e.d(R,{U:()=>a});function n(l,r,o,g){const m=r[g];if(m!=null)return{[l.breakpoints.up(g)]:o(m)}}function a(l,r,o){return r==null?null:typeof r!="object"||!("xs"in r)?o(r):[n(l,r,o,"xs"),n(l,r,o,"sm"),n(l,r,o,"md"),n(l,r,o,"lg"),n(l,r,o,"xl"),n(l,r,o,"xxl")]}},18950:(J,R,e)=>{"use strict";e.d(R,{r:()=>o});var n=e(39953),a=e(17716),l=e(57837),r=e(28425);const o=(0,n.forwardRef)(({href:g,children:m,...d},u)=>{const i=l.u.stripBaseFromUrl(r.QX.sanitizeUrl(g??""));return n.createElement(a.Link,{ref:u,to:i,...d},m)});o.displayName="Link"},66729:(J,R,e)=>{"use strict";e.d(R,{h:()=>i});var n=e(41407),a=e(39953),l=e(57837),r=e(28425),o=e(82803),g=e(12190),m=e(77229),d=e(18950);const u={h1:"xl",h2:"xl",h3:"lg",h4:"lg",h5:"md",h6:"md",body:"md",bodySmall:"xs"},i=(0,a.forwardRef)(({href:c,color:E="link",external:p=!1,inline:h=!0,variant:y="body",weight:s,icon:v,children:C,...D},M)=>{const P=l.u.stripBaseFromUrl(r.QX.sanitizeUrl(c??"")),x=(0,o.l4)(),S=f(x,h,y,s,E),I=v||"external-link-alt";return p?a.createElement("a",{href:P,ref:M,...D,target:"_blank",rel:"noreferrer",className:S},C,a.createElement(g.J,{size:u[y]||"md",name:I})):a.createElement(d.r,{ref:M,href:P,...D,className:S},C,v&&a.createElement(g.J,{name:v,size:u[y]||"md"}))});i.displayName="TextLink";const f=(c,E,p,h,y)=>(0,n.css)([p&&{...c.typography[p]},h&&{fontWeight:(0,m.RC)(h,c)},y&&{color:c.colors.text[y]},{alignItems:"center",gap:"0.25em",display:"inline-flex",textDecoration:"none","&:hover":{textDecoration:"underline",color:c.colors.text.link}},E&&{textDecoration:"underline","&:hover":{textDecoration:"none"}}])},25870:(J,R,e)=>{"use strict";e.d(R,{L:()=>o});var n=e(41407),a=e(39953),l=e(64084);const r=(0,l.B)((g=!1)=>({list:(0,n.css)({listStyleType:"none",margin:0,padding:0}),item:(0,n.css)({display:g&&"inline-block"||"block"})}));class o extends a.PureComponent{constructor(m){super(m)}render(){const{items:m,renderItem:d,getItemKey:u,className:i,inline:f}=this.props,c=r(f);return a.createElement("ul",{className:(0,n.cx)(c.list,i)},m.map((E,p)=>a.createElement("li",{className:c.item,key:u?u(E):p},d(E,p))))}}},28471:(J,R,e)=>{"use strict";e.d(R,{Y:()=>l});var n=e(39953),a=e(25870);class l extends n.PureComponent{render(){return n.createElement(a.L,{inline:!0,...this.props})}}},38696:(J,R,e)=>{"use strict";e.d(R,{a:()=>l});var n=e(39953),a=e(25870);class l extends n.PureComponent{render(){return n.createElement(a.L,{...this.props})}}},94615:(J,R,e)=>{"use strict";e.d(R,{F:()=>i});var n=e(41407),a=e(39953),l=e(82803);const r=28,o=2.4,g=500,m=4e3,d=300,u=100/r*100;function i({width:c,delay:E=d,ariaLabel:p="Loading bar"}){const h=Math.min(Math.max(Math.round(c*o),g),m),y=(0,l.wW)(f,E,h),s={overflow:"hidden"};return a.createElement("div",{style:s},a.createElement("div",{"aria-label":p,className:y.bar}))}const f=(c,E,p)=>{const h=(0,n.keyframes)({"0%":{transform:"translateX(-100%)"},"85%, 100%":{transform:`translateX(${u}%)`}});return{bar:(0,n.css)({width:r+"%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)",transform:"translateX(-100%)",animationName:h,animationDelay:`${E}ms`,animationDuration:`${p}ms`,animationTimingFunction:"linear",animationIterationCount:"infinite",willChange:"transform"})}}},84766:(J,R,e)=>{"use strict";e.d(R,{u:()=>o});var n=e(41407),a=e(39953),l=e(82803),r=e(28409);const o=({text:m,className:d,...u})=>{const i=(0,l.wW)(g);return a.createElement("div",{className:(0,n.cx)(i.container,d),...u},m," ",a.createElement(r.$,{inline:!0}))},g=m=>({container:(0,n.css)({marginBottom:m.spacing(4)})})},57669:(J,R,e)=>{"use strict";e.d(R,{b:()=>r});var n=e(39953),a=e(9558),l=e(29711);const r=({value:o,onChange:g,context:m,item:d})=>{const u=d.settings??{},i=(0,l.IX)(m.data,u?.filter),f=(0,l.nw)(i,o),c=(0,n.useCallback)(p=>{if(!(p&&!(0,l.w3)(p.value,i)))return g(p?.value)},[i,g]),E=f.find(p=>p.value===o);return n.createElement(n.Fragment,null,n.createElement(a.Ph,{value:E,placeholder:u.placeholderText??"Select field",options:f,onChange:c,noOptionsMessage:u.noFieldsMessage,width:u.width,isClearable:u.isClearable!==!1}))}},78002:(J,R,e)=>{"use strict";e.d(R,{$w:()=>f,OL:()=>d});var n=e(39953),a=e(89591),l=e(86981),r=e(36085),o=e(72305),g=e(9558);const m=(0,n.memo)(c=>{const{data:E,options:p,onChange:h,id:y}=c,s=u(E),v=i(s,p),C=(0,n.useCallback)(M=>h(M.value),[h]),D=v.find(M=>M.value===p);return n.createElement(g.Ph,{inputId:y,value:D,options:v,onChange:C})});m.displayName="FieldTypeMatcherEditor";const d=[{value:a.fS.number,label:"Number",icon:(0,o.WZ)(a.fS.number)},{value:a.fS.string,label:"String",icon:(0,o.WZ)(a.fS.string)},{value:a.fS.time,label:"Time",icon:(0,o.WZ)(a.fS.time)},{value:a.fS.boolean,label:"Boolean",icon:(0,o.WZ)(a.fS.boolean)},{value:a.fS.trace,label:"Traces",icon:(0,o.WZ)(a.fS.trace)},{value:a.fS.enum,label:"Enum",icon:(0,o.WZ)(a.fS.enum)},{value:a.fS.other,label:"Other",icon:(0,o.WZ)(a.fS.other)}],u=c=>(0,n.useMemo)(()=>{const E=new Map;for(const p of d)E.set(p.value,0);for(const p of c)for(const h of p.fields){const y=h.type||a.fS.other;let s=E.get(y);s||(s=0),E.set(y,s+1)}return E},[c]),i=(c,E)=>(0,n.useMemo)(()=>{let p=!1;const h=[];for(const y of d){const s=c.get(y.value),v=E===y.value;(s||v)&&h.push({...y,label:`${y.label} (${c.get(y.value)})`}),v&&(p=!0)}return E&&!p&&h.push({value:E,label:`${E} (No matches)`}),h},[c,E]),f={id:l.mi.byType,component:m,matcher:r.Ls.get(l.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:c=>c}},20:(J,R,e)=>{"use strict";e.d(R,{J8:()=>i,fN:()=>p});var n=e(41407),a=e(39953),l=e(3181),r=e(86981),o=e(36085),g=e(34547),m=e(82803),d=e(38637),u=e(9558);const i=[{label:"==",value:g.Bd.EQ},{label:"!=",value:g.Bd.NEQ},{label:">",value:g.Bd.GT},{label:">=",value:g.Bd.GTE},{label:"<",value:g.Bd.LT},{label:"<=",value:g.Bd.LTE}];function f(h){return h===l.gz.allIsNull||h===l.gz.allIsZero}const c=({options:h,onChange:y})=>{const s=(0,m.wW)(E),v=(0,a.useMemo)(()=>l.TB.selectOptions([h?.reducer]),[h?.reducer]),C=(0,a.useCallback)(S=>y({...h,reducer:S.value}),[h,y]),D=(0,a.useCallback)(S=>y({...h,op:S.value}),[h,y]),M=(0,a.useCallback)(S=>{const I=S.currentTarget.valueAsNumber;return y({...h,value:I})},[h,y]),P=h??{},x=f(h.reducer);return a.createElement("div",{className:s.spot},a.createElement(u.Ph,{value:v.current,options:v.options,onChange:C,placeholder:"Select field reducer"}),P.reducer&&!x&&a.createElement(a.Fragment,null,a.createElement(u.Ph,{value:i.find(S=>S.value===P.op),options:i,onChange:D,"aria-label":"Comparison operator",width:19}),a.createElement(d.I,{type:"number",value:P.value,onChange:M})))},E=h=>({spot:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end",gap:"4px"})}),p={id:r.mi.byValue,component:c,matcher:o.Ls.get(r.mi.byValue),name:"Fields with values",description:"Set properties for fields with reducer condition",optionsToLabel:h=>`${h?.reducer} ${h?.op} ${h?.value}`}},77834:(J,R,e)=>{"use strict";e.d(R,{O:()=>m,S:()=>i});var n=e(39953),a=e(69330),l=e(86981),r=e(36085),o=e(9558);const g=(f,c,E)=>{if(!E)return;let p=f.find(h=>!c.some(y=>h===y));if(p)return p};function m({value:f,data:c,onChange:E,placeholder:p}){const h=(0,n.useMemo)(()=>d(c),[c]),[y,s]=(0,n.useState)({refIds:[],value:void 0}),v=(0,n.useMemo)(()=>h.find(D=>D.value===f)??g(h,y.refIds,y.value),[f,h,y]),C=(0,n.useCallback)(D=>{E(D?.value)},[E]);return(h!==y.refIds||v?.value!==y.value)&&s({refIds:h,value:v?.value}),n.createElement(o.Ph,{options:h,onChange:C,isClearable:!0,placeholder:p??"Select query refId",value:v})}function d(f){const c=new Map;for(const p of f){const h=p.refId??"",y=c.get(h)??[];y.length===0&&c.set(h,y),y.push(p)}const E=[];for(const[p,h]of c.entries())E.push({value:p,label:`Query: ${p??"(missing refId)"}`,description:u(h)});return E}function u(f){return`Frames (${f.length}):
    ${f.slice(0,Math.min(3,f.length)).map(c=>(0,a.nf)(c)).join(", ")} ${f.length>3?"...":""}`}const i={id:l.mi.byFrameRefID,component:f=>n.createElement(m,{value:f.options,data:f.data,onChange:f.onChange}),matcher:r.Ls.get(l.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:f=>f}},63064:(J,R,e)=>{"use strict";e.d(R,{i:()=>s});var n=e(77663),a=e(39953),l=e(86981),r=e(36085),o=e(38637);const g=(0,a.memo)(v=>{const{options:C,onChange:D}=v,M=(0,a.useCallback)(P=>D(P.target.value),[D]);return a.createElement(o.I,{placeholder:"Enter regular expression",defaultValue:C,onBlur:M})});g.displayName="FieldNameByRegexMatcherEditor";const m={id:l.mi.byRegexp,component:g,matcher:r.Ls.get(l.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:v=>v};var d=e(9558),u=e(29711);const i=(0,a.memo)(v=>{const{data:C,options:D,onChange:M,id:P}=v,x=(0,u.IX)(C),S=(0,u.nw)(x,D),I=(0,a.useCallback)(O=>{if((0,u.w3)(O.value,x))return M(O.value)},[x,M]),T=S.find(O=>O.value===D);return a.createElement(d.Ph,{value:T,options:S,onChange:I,inputId:P})});i.displayName="FieldNameMatcherEditor";const f={id:l.mi.byName,component:i,matcher:r.Ls.get(l.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:v=>v},c=(0,a.memo)(v=>{const{data:C,options:D,onChange:M}=v,{readOnly:P,prefix:x}=D,S=(0,u.IX)(C),I=(0,u.nw)(S,void 0),T=(0,a.useCallback)(O=>{if(Array.isArray(O))return M({...D,names:O.reduce((A,B)=>((0,u.w3)(B.value,S)&&A.push(B.value),A),[])})},[S,M,D]);if(P){const O=(D.names??[]).join(", ");return a.createElement(o.I,{value:O,readOnly:!0,disabled:!0,prefix:x})}return a.createElement(d.NU,{value:D.names,options:I,onChange:T})});c.displayName="FieldNameMatcherEditor";const E={id:l.mi.byNames,component:c,matcher:r.Ls.get(l.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:v=>(v.names??[]).join(", "),excludeFromPicker:!0};var p=e(78002),h=e(20),y=e(77834);const s=new n.B(()=>[f,m,p.$w,y.S,E,h.fN])},29711:(J,R,e)=>{"use strict";e.d(R,{IX:()=>g,g2:()=>o,nw:()=>m,w3:()=>r});var n=e(39953),a=e(69330),l=e(72305);function r(d,u){return d?u.display.has(d)||u.raw.has(d):!1}function o(d,u){const i={display:new Set,raw:new Set,fields:new Map};for(const f of d)for(const c of f.fields){if(u&&!u(c))continue;const E=(0,a.CZ)(c,f,d);i.display.add(E),i.fields.set(E,c),c.name&&E!==c.name&&(i.raw.add(c.name),i.fields.set(c.name,c))}return i}function g(d,u){return(0,n.useMemo)(()=>o(d,u),[d,u])}function m(d,u,i,f){return(0,n.useMemo)(()=>{let c=!1;const E=[];i&&E.push(i);for(const p of d.display){!c&&p===u&&(c=!0);const h=d.fields.get(p);(!f||f===h?.type)&&E.push({value:p,label:p,icon:h?(0,l.e7)(h):void 0})}for(const p of d.raw)d.display.has(p)||(!c&&p===u&&(c=!0),E.push({value:p,label:`${p} (base field name)`}));return u&&!c&&E.push({value:u,label:`${u} (not found)`}),E},[d,u,i,f])}},13767:(J,R,e)=>{"use strict";e.d(R,{v:()=>u});var n=e(41407),a=e(39953),l=e(82803),r=e(12727),o=e(43078),g=e(85001),m=e(31157);const d=a.forwardRef(({header:f,children:c,ariaLabel:E,onOpen:p,onClose:h,onKeyDown:y,...s},v)=>{const C=(0,l.wW)(i),D=(0,a.useRef)(null);(0,a.useImperativeHandle)(v,()=>D.current);const[M]=(0,m.d)({localRef:D,onOpen:p,onClose:h,onKeyDown:y});return a.createElement("div",{...s,tabIndex:-1,ref:D,className:C.wrapper,role:"menu","aria-label":E,onKeyDown:M},f&&a.createElement("div",{className:(0,n.cx)(C.header,!!c&&a.Children.toArray(c).length>0&&C.headerBorder)},f),c)});d.displayName="Menu";const u=Object.assign(d,{Item:g.s,Divider:r.R,Group:o.k}),i=f=>({header:(0,n.css)({padding:`${f.spacing(.5,1,1,1)}`}),headerBorder:(0,n.css)({borderBottom:`1px solid ${f.colors.border.weak}`}),wrapper:(0,n.css)({background:`${f.colors.background.primary}`,boxShadow:`${f.shadows.z3}`,display:"inline-block",borderRadius:`${f.shape.radius.default}`,padding:`${f.spacing(.5,0)}`})})},12727:(J,R,e)=>{"use strict";e.d(R,{R:()=>r});var n=e(41407),a=e(39953),l=e(82803);function r(){const g=(0,l.wW)(o);return a.createElement("div",{className:g.divider})}const o=g=>({divider:(0,n.css)({height:1,backgroundColor:g.colors.border.weak,margin:g.spacing(.5,0)})})},43078:(J,R,e)=>{"use strict";e.d(R,{k:()=>g});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(82803);const g=({label:d,ariaLabel:u,children:i})=>{const f=(0,o.wW)(m),c=`group-label-${(0,a.uniqueId)()}`;return r.createElement("div",{role:"group","aria-labelledby":!u&&d?c:void 0,"aria-label":u},d&&r.createElement("label",{id:c,className:f.groupLabel,"aria-hidden":!0},d),i)};g.displayName="MenuGroup";const m=d=>({groupLabel:(0,n.css)({color:d.colors.text.secondary,fontSize:d.typography.size.sm,padding:d.spacing(.5,1)})})},85001:(J,R,e)=>{"use strict";e.d(R,{s:()=>f});var n=e(41407),a=e(39953),l=e(82803),r=e(53039),o=e(12190),g=e(28888),m=e(31157);const d=E=>{if(!E)return!1;const p=E.parentElement.getBoundingClientRect(),h=E.getBoundingClientRect();return h.width!==0&&p.right+h.width+10>window.innerWidth},u=a.memo(({items:E,isOpen:p,openedWithArrow:h,setOpenedWithArrow:y,close:s,customStyle:v})=>{const C=(0,l.wW)(i),D=(0,a.useRef)(null),[M]=(0,m.d)({localRef:D,isMenuOpen:p,openedWithArrow:h,setOpenedWithArrow:y,close:s}),[P,x]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{p&&D.current&&x(d(D.current))},[p]),a.createElement(a.Fragment,null,a.createElement("div",{className:C.iconWrapper,"aria-label":g.wl.components.Menu.SubMenu.icon},a.createElement(o.J,{name:"angle-right",className:C.icon,"aria-hidden":!0})),p&&a.createElement("div",{ref:D,className:(0,n.cx)(C.subMenu,{[C.pushLeft]:P}),"aria-label":g.wl.components.Menu.SubMenu.container,style:v},a.createElement("div",{tabIndex:-1,className:C.itemsWrapper,role:"menu",onKeyDown:M},E)))});u.displayName="SubMenu";const i=E=>({iconWrapper:(0,n.css)({display:"flex",flex:1,justifyContent:"end"}),icon:(0,n.css)({opacity:.7,marginLeft:E.spacing(1),color:E.colors.text.secondary}),itemsWrapper:(0,n.css)({background:E.colors.background.primary,boxShadow:E.shadows.z3,display:"inline-block",borderRadius:E.shape.radius.default}),pushLeft:(0,n.css)({right:"100%",left:"unset"}),subMenu:(0,n.css)({position:"absolute",top:0,left:"100%",zIndex:E.zIndex.dropdown})}),f=a.memo(a.forwardRef((E,p)=>{const{url:h,icon:y,label:s,ariaLabel:v,ariaChecked:C,target:D,onClick:M,className:P,active:x,disabled:S,destructive:I,childItems:T,role:O="menuitem",tabIndex:A=-1,customSubMenuContainerStyles:B,shortcut:b,testId:W}=E,V=(0,l.wW)(c),[w,K]=(0,a.useState)(x),[z,G]=(0,a.useState)(!1),[Q,j]=(0,a.useState)(!1),F=(0,a.useCallback)(()=>{S||(G(!0),K(!0))},[S]),k=(0,a.useCallback)(()=>{S||(G(!1),K(!1))},[S]),_=T&&T.length>0,Y=_?"div":h===void 0?"button":"a",Z=(0,n.cx)({[V.item]:!0,[V.active]:w,[V.disabled]:S,[V.destructive]:I&&!S},P),ae={[Y==="button"?"disabled":"aria-disabled"]:S,...Y==="a"&&S&&{href:void 0,onClick:void 0},...S&&{tabIndex:-1,["data-disabled"]:S}},ce=(0,a.useRef)(null);(0,a.useImperativeHandle)(p,()=>ce.current);const q=te=>{switch(te.key){case"ArrowRight":te.preventDefault(),te.stopPropagation(),_&&(G(!0),j(!0),K(!0));break;default:break}},De=()=>{G(!1),K(!1),ce?.current?.focus()},oe=!!(b&&b.length>0);return a.createElement(Y,{target:D,className:Z,rel:D==="_blank"?"noopener noreferrer":void 0,href:h,onClick:M,onMouseEnter:F,onMouseLeave:k,onKeyDown:q,role:h===void 0?O:void 0,"data-role":"menuitem",ref:ce,"data-testid":W,"aria-label":v,"aria-checked":C,tabIndex:A,...ae},a.createElement(a.Fragment,null,y&&a.createElement(o.J,{name:y,className:V.icon,"aria-hidden":!0}),s,a.createElement("div",{className:(0,n.cx)(V.rightWrapper,{[V.withShortcut]:oe})},oe&&a.createElement("div",{className:V.shortcut},a.createElement(o.J,{name:"keyboard",title:"keyboard shortcut"}),b),_&&a.createElement(u,{items:T,isOpen:z,openedWithArrow:Q,setOpenedWithArrow:j,close:De,customStyle:B}))))}));f.displayName="MenuItem";const c=E=>({item:(0,n.css)({background:"none",cursor:"pointer",whiteSpace:"nowrap",color:E.colors.text.primary,display:"flex",alignItems:"center",padding:E.spacing(.5,2),minHeight:E.spacing(4),margin:0,border:"none",width:"100%",position:"relative","&:hover, &:focus, &:focus-visible":{background:E.colors.action.hover,color:E.colors.text.primary,textDecoration:"none"},"&:focus-visible":(0,r.getFocusStyles)(E)}),active:(0,n.css)({background:E.colors.action.hover}),destructive:(0,n.css)({color:E.colors.error.text,svg:{color:E.colors.error.text},"&:hover, &:focus, &:focus-visible":{background:E.colors.error.main,color:E.colors.error.contrastText,svg:{color:E.colors.error.contrastText}}}),disabled:(0,n.css)({color:E.colors.action.disabledText,"&:hover, &:focus, &:focus-visible":{cursor:"not-allowed",background:"none",color:E.colors.action.disabledText}}),icon:(0,n.css)({opacity:.7,marginRight:"10px",marginLeft:"-4px",color:E.colors.text.secondary}),rightWrapper:(0,n.css)({display:"flex",alignItems:"center",marginLeft:"auto"}),shortcutIcon:(0,n.css)({marginRight:E.spacing(1)}),withShortcut:(0,n.css)({minWidth:E.spacing(10.5)}),shortcut:(0,n.css)({display:"flex",alignItems:"center",gap:E.spacing(1),marginLeft:E.spacing(2),color:E.colors.text.secondary,opacity:.7})})},31157:(J,R,e)=>{"use strict";e.d(R,{d:()=>o});var n=e(39953),a=e(45580);const l=(g,m)=>(g%m+m)%m,r=-1,o=({localRef:g,isMenuOpen:m,openedWithArrow:d,setOpenedWithArrow:u,close:i,onOpen:f,onClose:c,onKeyDown:E})=>{const[p,h]=(0,n.useState)(r);return(0,n.useEffect)(()=>{m&&d&&(h(0),u?.(!1))},[m,d,u]),(0,n.useEffect)(()=>{const s=g?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');s?.[p]?.focus(),s?.forEach((v,C)=>{v.tabIndex=C===p?0:-1})},[g,p]),(0,a.Z)(()=>{f?.(h)}),[s=>{const v=g?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),C=v?.length??0;switch(s.key){case"ArrowUp":s.preventDefault(),s.stopPropagation(),h(l(p-1,C));break;case"ArrowDown":s.preventDefault(),s.stopPropagation(),h(l(p+1,C));break;case"ArrowLeft":s.preventDefault(),s.stopPropagation(),h(r),i?.();break;case"Home":s.preventDefault(),s.stopPropagation(),h(0);break;case"End":s.preventDefault(),s.stopPropagation(),h(C-1);break;case"Enter":s.preventDefault(),s.stopPropagation(),v?.[p]?.click();break;case"Escape":c?.();break;case"Tab":s.preventDefault(),c?.();break;default:break}E?.(s)}]}},73075:(J,R,e)=>{"use strict";e.d(R,{u:()=>c});var n=e(41407),a=e(41056),l=e(30064),r=e(17037),o=e(39953),g=e(82803),m=e(28384),d=e(68497),u=e(12223),i=e(1936),f=e(75250);function c(h){const{title:y,children:s,isOpen:v=!1,closeOnEscape:C=!0,closeOnBackdropClick:D=!0,className:M,contentClassName:P,onDismiss:x,onClickBackdrop:S,trapFocus:I=!0}=h,T=(0,g.l4)(),O=(0,f.J)(T),A=(0,o.useRef)(null),{overlayProps:B,underlayProps:b}=(0,r.Ir)({isKeyboardDismissDisabled:!C,isOpen:v,onClose:x},A),{dialogProps:W,titleProps:V}=(0,a.R)({},A);if(!v)return null;const w=(0,n.cx)(O.modalHeader,typeof y!="string"&&O.modalHeaderWithTabs);return o.createElement(r.Xj,null,o.createElement("div",{role:"presentation",className:O.modalBackdrop,onClick:S||(D?x:void 0),...b}),o.createElement(l.MT,{contain:I,autoFocus:!0,restoreFocus:!0},o.createElement("div",{className:(0,n.cx)(O.modal,M),ref:A,...B,...W},o.createElement("div",{className:w},typeof y=="string"&&o.createElement(p,{...h,title:y,id:V.id}),typeof y!="string"&&y,o.createElement("div",{className:O.modalHeaderClose},o.createElement(d.h,{name:"times",size:"xl",onClick:x,tooltip:(0,m.t)("grafana-ui.modal.close-tooltip","Close")}))),o.createElement("div",{className:(0,n.cx)(O.modalContent,P)},s))))}function E({leftItems:h,children:y}){const s=(0,g.l4)(),v=(0,f.J)(s);return h?o.createElement("div",{className:v.modalButtonRow},o.createElement(u.Lh,{justify:"space-between"},o.createElement(u.Lh,{justify:"flex-start",spacing:"md"},h),o.createElement(u.Lh,{justify:"flex-end",spacing:"md"},y))):o.createElement("div",{className:v.modalButtonRow},o.createElement(u.Lh,{justify:"flex-end",spacing:"md",wrap:!0},y))}c.ButtonRow=E;function p({icon:h,iconTooltip:y,title:s,id:v}){return o.createElement(i.x,{icon:h,iconTooltip:y,title:s,id:v})}},1936:(J,R,e)=>{"use strict";e.d(R,{x:()=>r});var n=e(39953),a=e(82803),l=e(75250);const r=({icon:o,iconTooltip:g,title:m,children:d,id:u})=>{const i=(0,a.wW)(l.J);return n.createElement(n.Fragment,null,n.createElement("h2",{className:i.modalHeaderTitle,id:u},m),d)}},85188:(J,R,e)=>{"use strict";e.d(R,{Q:()=>a});var n=e(39953);const a=({children:l})=>n.createElement("div",{className:"share-modal-body"},n.createElement("div",{className:"share-modal-header"},n.createElement("div",{className:"share-modal-content"},l)))},35823:(J,R,e)=>{"use strict";e.d(R,{H:()=>o});var n=e(39953),a=e(77804),l=e(22784),r=e(1936);const o=({icon:g,title:m,tabs:d,activeTab:u,onChangeTab:i})=>n.createElement(r.x,{icon:g,title:m},n.createElement(l.J,{hideBorder:!0},d.map((f,c)=>n.createElement(a.O,{key:`${f.value}-${c}`,label:f.label,icon:f.icon,suffix:f.tabSuffix,active:f.value===u,onChangeTab:()=>i(f)}))))},39106:(J,R,e)=>{"use strict";e.d(R,{$i:()=>l,JY:()=>o,Y0:()=>r,kr:()=>a});var n=e(39953);const a=n.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class l extends n.Component{constructor(m){super(m),this.showModal=(d,u)=>{this.setState({component:d,props:u})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:m.component||null,props:m.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return n.createElement(a.Provider,{value:this.state},this.props.children)}}const r=()=>n.createElement(a.Consumer,null,({component:g,props:m})=>g?n.createElement(g,{...m}):null),o=a.Consumer},75250:(J,R,e)=>{"use strict";e.d(R,{J:()=>l});var n=e(41407),a=e(64084);const l=(0,a.B)(r=>{const o=r.shape.radius.default;return{modal:(0,n.css)({position:"fixed",zIndex:r.zIndex.modal,background:r.colors.background.primary,boxShadow:r.shadows.z3,borderRadius:o,border:`1px solid ${r.colors.border.weak}`,backgroundClip:"padding-box",outline:"none",width:"750px",maxWidth:"100%",left:0,right:0,marginLeft:"auto",marginRight:"auto",top:"10%",maxHeight:"80%",display:"flex",flexDirection:"column"}),modalBackdrop:(0,n.css)({position:"fixed",zIndex:r.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0,backgroundColor:r.components.overlay.background,backdropFilter:"blur(1px)"}),modalHeader:(0,n.css)({label:"modalHeader",display:"flex",alignItems:"center",minHeight:"42px",margin:r.spacing(1,2,0,2)}),modalHeaderWithTabs:(0,n.css)({borderBottom:`1px solid ${r.colors.border.weak}`}),modalHeaderTitle:(0,n.css)({fontSize:r.typography.size.lg,margin:r.spacing(0,4,0,1),display:"flex",alignItems:"center",position:"relative",top:"2px"}),modalHeaderIcon:(0,n.css)({marginRight:r.spacing(2),fontSize:"inherit","&:before":{verticalAlign:"baseline"}}),modalHeaderClose:(0,n.css)({height:"100%",display:"flex",alignItems:"center",color:r.colors.text.secondary,flexGrow:1,justifyContent:"flex-end"}),modalContent:(0,n.css)({overflow:"auto",padding:r.spacing(3),width:"100%"}),modalButtonRow:(0,n.css)({paddingTop:r.spacing(3)})}})},84541:(J,R,e)=>{"use strict";e.d(R,{p:()=>E});var n=e(41407),a=e(39953),l=e(23619),r=e(28888),o=e(82803),g=e(13094),m=e(99566);function d(h){for(let y=h.length-1;y>0;y--){const s=h.charAt(y);if(s==="$")return{index:y,prefix:h.substring(y)};if(s===" "||s==="	"||s==='"'||s==="'")return{index:y+1,prefix:h.substring(y+1)}}return{index:0,prefix:h}}function u(h,y,s,v){const C=[];for(const D of s)y&&!D.label.startsWith(y)||C.push({...D,kind:i(h,D.kind),range:v,insertText:D.insertText??D.label});return C}function i(h,y){switch(y){case m.k.Method:return h.languages.CompletionItemKind.Method;case m.k.Field:return h.languages.CompletionItemKind.Field;case m.k.Property:return h.languages.CompletionItemKind.Property;case m.k.Constant:return h.languages.CompletionItemKind.Constant;case m.k.Text:return h.languages.CompletionItemKind.Text}return h.languages.CompletionItemKind.Text}function f(h,y,s,v){if(!(!y||!s))return h.languages.registerCompletionItemProvider(y,{triggerCharacters:["$"],provideCompletionItems:(C,D,M)=>{if(C.id!==v)return;const P={startLineNumber:D.lineNumber,endLineNumber:D.lineNumber,startColumn:D.column,endColumn:D.column};if(M.triggerCharacter==="$")return P.startColumn=D.column-1,{suggestions:u(h,"$",s(),P)};const x=C.getValueInRange({startLineNumber:D.lineNumber,startColumn:1,endLineNumber:D.lineNumber,endColumn:D.column}),{index:S,prefix:I}=d(x);P.startColumn=S+1;const T=u(h,I,s(),P);if(T.length)return{suggestions:T}}})}class c extends a.PureComponent{constructor(y){super(y),this.loadCustomLanguage=()=>{const{language:s}=this.props,v=l.F.getIfExists(s);return v?v.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:s}=this.props;s&&s(this.getEditorValue())},this.onSave=()=>{const{onSave:s}=this.props;s&&s(this.getEditorValue())},this.handleBeforeMount=s=>{this.monaco=s;const{onBeforeEditorMount:v}=this.props;v?.(s)},this.handleOnMount=(s,v)=>{const{getSuggestions:C,language:D,onChange:M,onEditorDidMount:P}=this.props;this.modelId=s.getModel()?.id,this.getEditorValue=()=>s.getValue(),C&&this.modelId&&(this.completionCancel=f(v,D,C,this.modelId)),s.onKeyDown(S=>{S.keyCode===v.KeyCode.KeyS&&(S.ctrlKey||S.metaKey)&&(S.preventDefault(),this.onSave())});const x=this.loadCustomLanguage();M&&s.getModel()?.onDidChangeContent(()=>M(s.getValue())),P&&x.then(()=>P(s,v))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(y){const{getSuggestions:s,language:v}=this.props,C=y.language!==v;if(y.getSuggestions!==s||C){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}s&&this.modelId&&(this.completionCancel=f(this.monaco,v,s,this.modelId))}C&&this.loadCustomLanguage()}render(){const{theme:y,language:s,width:v,height:C,showMiniMap:D,showLineNumbers:M,readOnly:P,monacoOptions:x}=this.props,S=this.props.value??"",I=S.length>100,T=this.props.containerStyles??p(y).container,O={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:I&&D,renderCharacters:!1},readOnly:P,lineNumbersMinChars:4,lineDecorationsWidth:1*y.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*y.spacing.gridSize,bottom:.5*y.spacing.gridSize},fixedOverflowWidgets:!0};return M||(O.glyphMargin=!1,O.folding=!1,O.lineNumbers="off",O.lineNumbersMinChars=0),a.createElement("div",{className:T,onBlur:this.onBlur,"aria-label":r.wl.components.CodeEditor.container},a.createElement(g.o,{width:v,height:C,language:s,value:S,options:{...O,...x??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount,keepCurrentModel:!0}))}}const E=(0,o.HE)(c),p=h=>({container:(0,n.css)({borderRadius:h.shape.radius.default,border:`1px solid ${h.components.input.borderColor}`})})},13094:(J,R,e)=>{"use strict";e.d(R,{o:()=>g});var n=e(39953),a=e(20653);const l=m=>{const d=(0,a.Z)(async()=>await m);return{...d,dependency:d.value}};var r=e(35521),o=e(84766);const g=m=>{const{loading:d,error:u,dependency:i}=l(e.e(2462).then(e.bind(e,93947)));if(d)return n.createElement(o.u,{text:""});if(u)return n.createElement(r.X,{title:"React Monaco Editor failed to load",error:u,errorInfo:{componentStack:u?.stack||""}});const f=i.ReactMonacoEditor;return n.createElement(f,{...m})}},99566:(J,R,e)=>{"use strict";e.d(R,{k:()=>n});var n=(a=>(a.Method="method",a.Field="field",a.Property="property",a.Constant="constant",a.Text="text",a))(n||{})},74317:(J,R,e)=>{"use strict";e.d(R,{T:()=>a});var n=e(99566);function a(l){const r="${"+l.value+"}",o=l.value===l.label?l.origin:`${l.label} / ${l.origin}`;return{label:r,kind:n.k.Property,detail:o,documentation:l.documentation}}},44138:(J,R,e)=>{"use strict";e.d(R,{X:()=>i});var n=e(41407),a=e(39953),l=e(28888),r=e(82803),o=e(53039),g=e(12190),m=e(68497),d=e(18950),u=e(7258);const i=a.memo(({title:c,section:E,parent:p,pageIcon:h,onGoBack:y,children:s,titleHref:v,parentHref:C,leftItems:D,isFullscreen:M,className:P,"aria-label":x,buttonOverflowAlignment:S="right",forceShowLeftItems:I=!1})=>{const T=(0,r.wW)(f),O=(0,n.cx)("page-toolbar",T.toolbar,{["page-toolbar--fullscreen"]:M,[T.noPageIcon]:!h},P),A=a.createElement(a.Fragment,null,a.createElement("span",{className:T.truncateText},c),E&&a.createElement("span",{className:T.pre}," / ",E));return a.createElement("nav",{className:O,"aria-label":x},a.createElement("div",{className:T.leftWrapper},h&&!y&&a.createElement("div",{className:T.pageIcon},a.createElement(g.J,{name:h,size:"lg","aria-hidden":!0})),y&&a.createElement("div",{className:T.pageIcon},a.createElement(m.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":l.wl.components.BackButton.backArrow,onClick:y})),a.createElement("nav",{"aria-label":"Search links",className:T.navElement},p&&C&&a.createElement(a.Fragment,null,a.createElement(d.r,{"aria-label":`Search dashboard in the ${p} folder`,className:(0,n.cx)(T.titleText,T.parentLink,T.titleLink,T.truncateText),href:C},p," ",a.createElement("span",{className:T.parentIcon})),v&&a.createElement("span",{className:(0,n.cx)(T.titleText,T.titleDivider),"aria-hidden":!0},"/")),(c||!!D?.length)&&a.createElement("div",{className:T.titleWrapper},c&&a.createElement("h1",{className:T.h1Styles},v?a.createElement(d.r,{"aria-label":"Search dashboard by name",className:(0,n.cx)(T.titleText,T.titleLink),href:v},A):a.createElement("div",{className:T.titleText},A)),D?.map((B,b)=>a.createElement("div",{className:(0,n.cx)(T.leftActionItem,{[T.forceShowLeftActionItems]:I}),key:b},B))))),a.createElement(u.R,{alignment:S},a.Children.toArray(s).filter(Boolean)))});i.displayName="PageToolbar";const f=c=>{const{spacing:E,typography:p}=c,h=(0,o.getFocusStyles)(c);return{pre:(0,n.css)({whiteSpace:"pre"}),toolbar:(0,n.css)({alignItems:"center",background:c.colors.background.canvas,display:"flex",gap:c.spacing(2),justifyContent:"space-between",padding:c.spacing(1.5,2),[c.breakpoints.down("md")]:{paddingLeft:"53px"}}),noPageIcon:(0,n.css)({[c.breakpoints.down("md")]:{paddingLeft:c.spacing(2)}}),leftWrapper:(0,n.css)({display:"flex",flexWrap:"nowrap",maxWidth:"70%"}),pageIcon:(0,n.css)({display:"none",[c.breakpoints.up("sm")]:{display:"flex",paddingRight:c.spacing(1),alignItems:"center"}}),truncateText:(0,n.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),titleWrapper:(0,n.css)({display:"flex",margin:0,minWidth:0}),navElement:(0,n.css)({display:"flex",alignItems:"center",minWidth:0}),h1Styles:(0,n.css)({margin:E(0,1,0,0),lineHeight:"inherit",flexGrow:1,minWidth:0}),parentIcon:(0,n.css)({marginLeft:c.spacing(.5)}),titleText:(0,n.css)({display:"flex",fontSize:p.size.lg,margin:0,borderRadius:c.shape.radius.default}),titleLink:(0,n.css)({"&:focus-visible":h}),titleDivider:(0,n.css)({padding:E(0,.5,0,.5),display:"none",[c.breakpoints.up("md")]:{display:"unset"}}),parentLink:(0,n.css)({display:"none",[c.breakpoints.up("md")]:{display:"unset",flex:1}}),leftActionItem:(0,n.css)({display:"none",alignItems:"center",paddingRight:E(.5),[c.breakpoints.up("md")]:{display:"flex"}}),forceShowLeftActionItems:(0,n.css)({display:"flex"})}}},39017:(J,R,e)=>{"use strict";e.d(R,{t:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(4919),o=e(12190);const g=({currentPage:d,numberOfPages:u,onNavigate:i,hideWhenSinglePage:f,showSmallVersion:c,className:E})=>{const p=(0,l.wW)(m),h=c?1:8,y=(0,a.useMemo)(()=>{const s=[...new Array(u).keys()],v=u>h,C=(D,M)=>a.createElement("li",{key:D,className:p.item},a.createElement(r.zx,{size:"sm",variant:M,onClick:()=>i(D)},D));return s.reduce((D,M)=>{const P=M+1,x=P===d?"primary":"secondary",S=h,I=u-h+1,T=I-S,O=P===1||P===u,A=T>-1&&d>=S&&d<=I,B=c?1:3,b=c?0:2;return v?O||d<S&&P<S||T>=0&&d>I&&P>I||T<0&&d>=S&&P>I||A&&P>=d-b&&P<=d+b?D.push(C(P,x)):(P===S&&d<S||P===I&&d>I||A&&(P===d-B||P===d+B))&&D.push(a.createElement("li",{key:P,className:p.item},a.createElement(o.J,{className:p.ellipsis,name:"ellipsis-v"}))):D.push(C(P,x)),D},[])},[d,u,i,h,c,p.ellipsis,p.item]);return f&&u<=1?null:a.createElement("div",{className:(0,n.cx)(p.container,E)},a.createElement("ol",null,a.createElement("li",{className:p.item},a.createElement(r.zx,{"aria-label":"previous page",size:"sm",variant:"secondary",onClick:()=>i(d-1),disabled:d===1},a.createElement(o.J,{name:"angle-left"}))),y,a.createElement("li",{className:p.item},a.createElement(r.zx,{"aria-label":"next page",size:"sm",variant:"secondary",onClick:()=>i(d+1),disabled:d===u},a.createElement(o.J,{name:"angle-right"})))))},m=()=>({container:(0,n.css)({float:"right"}),item:(0,n.css)({display:"inline-block",paddingLeft:"10px",marginBottom:"5px"}),ellipsis:(0,n.css)({transform:"rotate(90deg)"})})},32961:(J,R,e)=>{"use strict";e.d(R,{T:()=>m});var n=e(41407),a=e(39953),l=e(28888),r=e(82803),o=e(12190),g=e(69865);const m=({onCancel:u,loading:i})=>{const f=(0,r.wW)(d);return i?a.createElement(g.u,{content:"Cancel query"},a.createElement(o.J,{className:(0,n.cx)("spin-clockwise",{[f.clickable]:!!u}),name:"sync",size:"sm",onClick:u,"aria-label":l.wl.components.LoadingIndicator.icon})):null},d=()=>({clickable:(0,n.css)({cursor:"pointer"})})},16217:(J,R,e)=>{"use strict";e.d(R,{f:()=>x});var n=e(41407),a=e(39953),l=e(948),r=e(13479),o=e(10694),g=e(28888),m=e(82803),d=e(53039);function u({children:A,delay:B}){const[b,W]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{window.setTimeout(()=>{W(!0)},B)},[A,B]),a.createElement(a.Fragment,null,b?A:null)}var i=e(12190),f=e(94615),c=e(69865),E=e(58047),p=e(3839);function h({menu:A,title:B,placement:b="bottom",offset:W,dragClassCancel:V,menuButtonClass:w,onOpenMenu:K}){const z=B?g.wl.components.Panels.Panel.menu(B):"panel-menu-button",G=(0,a.useCallback)(Q=>{Q&&K&&K()},[K]);return a.createElement(E.L,{overlay:A,placement:b,offset:W,onVisibleChange:G},a.createElement(p.h,{"aria-label":`Menu for panel with ${B?`title ${B}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":z,className:(0,n.cx)(w,V)}))}function y({menu:A,title:B,dragClass:b,children:W,offset:V=-32,onOpenMenu:w}){const K=(0,m.wW)(s),z=(0,a.useRef)(null),G=g.wl.components.Panels.Panel.HoverWidget,Q=(0,a.useCallback)(F=>{z.current?.setPointerCapture(F.pointerId)},[]),j=(0,a.useCallback)(F=>{z.current?.releasePointerCapture(F.pointerId)},[]);return W===void 0||a.Children.count(W)===0?null:a.createElement("div",{className:(0,n.cx)(K.container,"show-on-hover"),style:{top:V},"data-testid":G.container},b&&a.createElement("div",{className:(0,n.cx)(K.square,K.draggable,b),onPointerDown:Q,onPointerUp:j,ref:z,"data-testid":G.dragIcon},a.createElement(i.J,{name:"expand-arrows",className:K.draggableIcon})),W,A&&a.createElement(h,{menu:A,title:B,placement:"bottom",menuButtonClass:K.menuButton,onOpenMenu:w}))}function s(A){return{container:(0,n.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:A.colors.background.secondary,color:A.colors.text.primary,border:`1px solid ${A.colors.border.weak}`,borderRadius:A.shape.radius.default,height:A.spacing(4),boxShadow:A.shadows.z1}),square:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center",width:A.spacing(4),height:"100%"}),draggable:(0,n.css)({cursor:"move",[A.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,n.css)({background:"inherit",border:"none","&:hover":{background:A.colors.secondary.main}}),draggableIcon:(0,n.css)({transform:"rotate(45deg)",color:A.colors.text.secondary,"&:hover":{color:A.colors.text.primary}})}}var v=e(37361);function C({description:A,className:B}){const b=(0,m.wW)(D),W=()=>{const V=typeof A=="function"?A():A;return a.createElement("div",{className:"panel-info-content markdown-html"},a.createElement("div",{dangerouslySetInnerHTML:{__html:V}}))};return A!==""?a.createElement(c.u,{interactive:!0,content:W},a.createElement(v.a,{className:(0,n.cx)(B,b.description)},a.createElement(i.J,{name:"info-circle",size:"md"}))):null}const D=A=>({description:(0,n.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function M({message:A,onClick:B,ariaLabel:b="status"}){const W=(0,m.wW)(P);return a.createElement(p.h,{className:W.buttonStyles,onClick:B,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:A||"","aria-label":b,"data-testid":g.wl.components.Panels.Panel.status("error")})}const P=A=>{const{headerHeight:B,padding:b}=A.components.panel;return{buttonStyles:(0,n.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:A.spacing(b),width:A.spacing(B),height:A.spacing(B),borderRadius:A.shape.radius.default})}};function x({width:A,height:B,children:b,padding:W="md",title:V="",description:w="",displayMode:K="default",titleItems:z,menu:G,dragClass:Q,dragClassCancel:j,hoverHeader:F=!1,hoverHeaderOffset:k,loadingState:_,statusMessage:Y,statusMessageOnClick:Z,leftItems:ae,actions:ce,onCancelQuery:q,onOpenMenu:De,collapsible:oe=!1,collapsed:te,onToggleCollapse:fe}){const Te=(0,m.l4)(),ge=(0,m.wW)(O),he=(0,a.useId)(),me=!F,[ye,ue]=(0,l.Z)(!0);te===void 0&&(te=!ye);const Oe="show-on-hover",Ue=K==="transparent",at=I(Te,me),{contentStyle:Ne,innerWidth:_e,innerHeight:Ke}=T(W,Te,at,te,B,A),et={height:at,cursor:Q?"move":"auto"},ze={width:A,height:te?void 0:B},[je,{width:Qe}]=(0,r.Z)();ae&&(ce=ae);const We=V?g.wl.components.Panels.Panel.title(V):"Panel",ke=a.createElement(a.Fragment,null,!oe&&V&&a.createElement("h6",{title:V,className:ge.title},V),oe&&a.createElement("h6",{className:ge.title},a.createElement("button",{type:"button",className:ge.clearButtonStyles,onClick:()=>{ue(),fe&&fe(!te)},"aria-expanded":!te,"aria-controls":te?void 0:he},a.createElement(i.J,{name:te?"angle-right":"angle-down","aria-hidden":!!V,"aria-label":V?void 0:"toggle collapse panel"}),V)),a.createElement("div",{className:(0,n.cx)(ge.titleItems,j),"data-testid":"title-items-container"},a.createElement(C,{description:w,className:j}),z),_===o.Gu.Streaming&&a.createElement(c.u,{content:q?"Stop streaming":"Streaming"},a.createElement(v.a,{className:j,"data-testid":"panel-streaming",onClick:q},a.createElement(i.J,{name:"circle-mono",size:"md",className:ge.streaming}))),_===o.Gu.Loading&&q&&a.createElement(u,{delay:2e3},a.createElement(c.u,{content:"Cancel query"},a.createElement(v.a,{className:(0,n.cx)(j,ge.pointer),"data-testid":"panel-cancel-query",onClick:q},a.createElement(i.J,{name:"sync-slash",size:"md"})))),a.createElement("div",{className:ge.rightAligned},ce&&a.createElement("div",{className:ge.rightActions},S(ce,ot=>ot))));return a.createElement("div",{className:(0,n.cx)(ge.container,{[ge.transparentContainer]:Ue}),style:ze,"data-testid":We,tabIndex:0,ref:je},a.createElement("div",{className:ge.loadingBarContainer},_===o.Gu.Loading?a.createElement(f.F,{width:Qe,ariaLabel:"Panel loading bar"}):null),F&&a.createElement(a.Fragment,null,a.createElement(y,{menu:G,title:V,offset:k,dragClass:Q,onOpenMenu:De},ke),Y&&a.createElement("div",{className:ge.errorContainerFloating},a.createElement(M,{message:Y,onClick:Z,ariaLabel:"Panel status"}))),me&&a.createElement("div",{className:(0,n.cx)(ge.headerContainer,Q),style:et,"data-testid":"header-container"},Y&&a.createElement("div",{className:j},a.createElement(M,{message:Y,onClick:Z,ariaLabel:"Panel status"})),ke,G&&a.createElement(h,{menu:G,title:V,placement:"bottom-end",menuButtonClass:(0,n.cx)(ge.menuItem,j,Oe),onOpenMenu:De})),!te&&a.createElement("div",{id:he,className:(0,n.cx)(ge.content,B===void 0&&ge.containNone),style:Ne},typeof b=="function"?b(_e,Ke):b))}const S=(A,B)=>{const b=a.Children.toArray(A).filter(Boolean);return b.length>0?B(b):null},I=(A,B)=>B?A.spacing.gridSize*A.components.panel.headerHeight:0,T=(A,B,b,W,V,w)=>{const K=(A==="md"?B.components.panel.padding:0)*B.spacing.gridSize,z=K*2,G=1*2;let Q=0;w&&(Q=w-z-G);let j=0;return V&&(j=V-b-z-G),W&&(j=b),{contentStyle:{padding:K},innerWidth:Q,innerHeight:j}},O=A=>{const{background:B,borderColor:b,padding:W}=A.components.panel;return{container:(0,n.css)({label:"panel-container",backgroundColor:B,border:`1px solid ${b}`,position:"relative",borderRadius:A.shape.radius.default,height:"100%",display:"flex",flexDirection:"column","> *":{zIndex:0},"&:hover, &:active, &:focus":{zIndex:A.zIndex.activePanel},".show-on-hover":{opacity:"0",visibility:"hidden"},"&:focus-visible, &:hover":{".show-on-hover":{opacity:"1",visibility:"visible"}},"&:focus-visible":(0,d.getFocusStyles)(A),"&:focus-within:not(:focus)":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),transparentContainer:(0,n.css)({label:"panel-transparent-container",backgroundColor:"transparent",border:"1px solid transparent",boxSizing:"border-box","&:hover":{border:`1px solid ${b}`}}),loadingBarContainer:(0,n.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%"}),containNone:(0,n.css)({contain:"none"}),content:(0,n.css)({label:"panel-content",flexGrow:1,contain:"size layout"}),headerContainer:(0,n.css)({label:"panel-header",display:"flex",alignItems:"center"}),pointer:(0,n.css)({cursor:"pointer"}),streaming:(0,n.css)({label:"panel-streaming",marginRight:0,color:A.colors.success.text,"&:hover":{color:A.colors.success.text}}),title:(0,n.css)({label:"panel-title",display:"flex",marginBottom:0,padding:A.spacing(0,W),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:A.typography.h6.fontSize,fontWeight:A.typography.h6.fontWeight}),items:(0,n.css)({display:"flex"}),item:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,n.css)({visibility:"hidden"}),menuItem:(0,n.css)({label:"panel-menu",border:"none",background:A.colors.secondary.main,"&:hover":{background:A.colors.secondary.shade}}),errorContainerFloating:(0,n.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:A.zIndex.tooltip}),rightActions:(0,n.css)({display:"flex",padding:A.spacing(0,W),gap:A.spacing(1)}),rightAligned:(0,n.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,n.css)({display:"flex",height:"100%"}),clearButtonStyles:(0,n.css)({alignItems:"center",display:"flex",gap:A.spacing(.5),background:"transparent",color:A.colors.text.primary,border:"none",padding:0,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:A.typography.h6.fontSize,fontWeight:A.typography.h6.fontWeight})}}},31276:(J,R,e)=>{"use strict";e.d(R,{R9:()=>o,_w:()=>r,bb:()=>l});var n=e(39953),a=e(91395);const l=n.createContext({eventsScope:"global",eventBus:new a.F}),r=l.Provider,o=()=>n.useContext(l)},37361:(J,R,e)=>{"use strict";e.d(R,{a:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(53039),o=e(4919);const g=(0,a.forwardRef)(({className:d,children:u,href:i,onClick:f,target:c,title:E,...p},h)=>{const y=(0,l.wW)(m);return i?a.createElement("a",{ref:h,href:i,onClick:f,target:c,title:E,className:(0,n.cx)(y.linkItem,d),...p},u):f?a.createElement(o.zx,{ref:h,className:(0,n.cx)(y.item,d),variant:"secondary",fill:"text",onClick:f},u):a.createElement("span",{ref:h,className:(0,n.cx)(y.item,d),...p},u)});g.displayName="TitleItem";const m=d=>{const u=(0,n.css)({color:`${d.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${d.shape.radius.default}`,padding:`${d.spacing(0,1)}`,height:`${d.spacing(d.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,r.getFocusStyles)(d),zIndex:1},"&: focus:not(:focus-visible)":(0,r.getMouseFocusStyles)(d),"&:hover ":{boxShadow:`${d.shadows.z1}`,background:`${d.colors.background.secondary}`,color:`${d.colors.text.primary}`}});return{item:u,linkItem:(0,n.cx)(u,(0,n.css)({cursor:"pointer"}))}}},4185:(J,R,e)=>{"use strict";e.d(R,{fm:()=>r});var n=e(32961),a=e(16217),l=e(37361);const r=a.f;r.LoadingIndicator=n.T,r.TitleItem=l.a},52343:(J,R,e)=>{"use strict";e.d(R,{R:()=>n});var n=(a=>(a.ToggleSelection="select",a.AppendToSelection="append",a))(n||{})},41804:(J,R,e)=>{"use strict";e.d(R,{l:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=({children:g,className:m,...d})=>{const u=(0,l.wW)(o);return a.createElement("div",{className:(0,n.cx)(u,m),...d},g)},o=g=>(0,n.css)({backgroundColor:g.components.panel.background,border:`1px solid ${g.components.panel.borderColor}`,borderRadius:g.shape.radius.default})},45802:(J,R,e)=>{"use strict";e.d(R,{o:()=>r});var n=e(39953),a=e(30670),l=e(12608);const r=({status:g,color:m,...d})=>{const u=o(g);return n.createElement(l.C,{text:u.text,color:u.color,icon:u.icon,tooltip:u.tooltip,...d})};r.displayName="PluginSignatureBadge";function o(g){switch(g||(g=a.Xy.invalid),g){case a.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case a.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case a.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case a.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case a.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},70393:(J,R,e)=>{"use strict";e.d(R,{RN:()=>o,h_:()=>r,lO:()=>g});var n=e(39953),a=e(49065),l=e(82803);function r(d){const{children:u,className:i,root:f,forwardedRef:c}=d,E=(0,l.l4)(),p=(0,n.useRef)(null),h=f??o();return p.current||(p.current=document.createElement("div"),i&&(p.current.className=i),p.current.style.position="relative",p.current.style.zIndex=`${E.zIndex.portal}`),(0,n.useLayoutEffect)(()=>(p.current&&h.appendChild(p.current),()=>{p.current&&h.removeChild(p.current)}),[h]),a.createPortal(n.createElement("div",{ref:c},u),p.current)}function o(){return window.document.getElementById("grafana-portal-container")??document.body}function g(){return n.createElement("div",{id:"grafana-portal-container"})}const m=n.forwardRef((d,u)=>n.createElement(r,{...d,forwardedRef:u}));m.displayName="RefForwardingPortal"},54795:(J,R,e)=>{"use strict";e.d(R,{q:()=>M});var n=e(41407),a=e(77814),l=e.n(a),r=e(86832),o=e.n(r),g=e(39953),m=e(76485),d=e(19661),u=e(28888),i=e(98198),f=e(82199),c=e(16016),E=e(26118),p=e(69679),h=e(73378),y=e(52606),s=e(82803),v=e(53039),C=e(64225);class D extends g.PureComponent{constructor(S,I){super(S,I),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(b,W)=>{const V=b.document!==this.state.value.document,w=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(b),this.setState({value:b},()=>{if(V){const K=m.Z.serialize(w)!==m.Z.serialize(b);K&&W&&this.runOnChangeAndRunQuery(),K&&!W&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:b}=this.props,W=m.Z.serialize(this.state.value);b&&b(this.cleanText(W))},this.runOnRunQuery=()=>{const{onRunQuery:b}=this.props;b&&(b(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(b,W,V)=>{const{onBlur:w}=this.props;if(w)w();else{const K=this.lastExecutedValue?m.Z.serialize(this.lastExecutedValue):"",z=m.Z.serialize(W.value);K!==z&&this.runOnChangeAndRunQuery()}return V()},this.runOnChangeDebounced=(0,r.debounce)(this.runOnChange,500);const{onTypeahead:T,cleanText:O,portalOrigin:A,onWillApplySuggestion:B}=S;this.plugins=[(0,i.b)({onTypeahead:T,cleanText:O,portalOrigin:A,onWillApplySuggestion:B}),(0,f.d)({handler:this.runOnChangeAndRunQuery}),(0,c.z)(),(0,E.G)(),(0,p.$)(),(0,h.R)(),(0,y.w)(),...S.additionalPlugins||[]].filter(b=>b),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,C.l1)(S.query||"",S.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(S,I){const{query:T,syntax:O,syntaxLoaded:A}=this.props;if(!S.syntaxLoaded&&A&&this.editor){const b=this.editor.insertText(" ").deleteBackward(1);this.onChange(b.value,!0)}const{value:B}=this.state;T!==S.query&&T!==m.Z.serialize(B)&&this.setState({value:(0,C.l1)(T||"",O)})}cleanText(S){return S.replace(/[\r]/g,"")}render(){const{disabled:S,theme:I}=this.props,T=l()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":S}),O=P(I);return g.createElement("div",{className:(0,n.cx)(T,O.wrapper)},g.createElement("div",{className:"slate-query-field","aria-label":u.wl.components.QueryField.container},g.createElement(d.ML,{ref:A=>this.editor=A,schema:C.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:A=>{this.onChange(A.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const M=(0,s.HE)(D);M.defaultProps={onBlur:()=>{}};const P=x=>{const S=(0,v.getFocusStyles)(x);return{wrapper:(0,n.css)({"&:focus-within":S})}}},82563:(J,R,e)=>{"use strict";e.d(R,{dP:()=>f,o5:()=>u});var n=e(80100),a=e(39953),l=e(5195),r=e(28888),o=e(28384),g=e(48824),m=e(5222),d=e(3839);const u=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],i=class extends a.PureComponent{constructor(p){super(p),this.onChangeSelect=h=>{const{onIntervalChanged:y}=this.props;y&&h.value!=null&&y(h.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:p,intervals:h,tooltip:y,value:s,text:v,isLoading:C,noIntervalPicker:D,width:M,showAutoInterval:P}=this.props,x=s||"",S=this.getVariant(),I=E({intervals:h,showAutoInterval:P}),T=I.find(({value:G})=>G===x),O=c(i.offOption.value);let A=T||O;A.label===O.label&&(A={value:""});const B=A.ariaLabel,b=(0,o.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:B}),W=(0,o.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),V=A.value===""?W:b,w=(0,o.t)("refresh-picker.tooltip.interval-selected","Set auto refresh interval"),K=(0,o.t)("refresh-picker.tooltip.turned-off","Auto refresh off"),z=A.value===""?K:w;return a.createElement(g.h,{className:"refresh-picker"},a.createElement(d.h,{"aria-label":v,tooltip:y,onClick:p,variant:S,icon:C?"fa fa-spinner":"sync",style:M?{width:M}:void 0,"data-testid":r.wl.components.RefreshPicker.runButtonV2},v),!D&&a.createElement(m.d,{value:A,options:I,onChange:this.onChangeSelect,variant:S,"data-testid":r.wl.components.RefreshPicker.intervalButtonV2,"aria-label":V,tooltip:z}))}};let f=i;f.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},f.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},f.autoOption={label:"Auto",value:"auto",ariaLabel:"Select refresh from the query range"},f.isLive=p=>p===i.liveOption.value;function c(p){switch(p){case f.liveOption.value:return{label:(0,o.t)("refresh-picker.live-option.label","Live"),value:p,ariaLabel:(0,o.t)("refresh-picker.live-option.aria-label","Turn on live streaming")};case f.offOption.value:return{label:(0,o.t)("refresh-picker.off-option.label","Off"),value:p,ariaLabel:(0,o.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")};case f.autoOption.value:return{label:(0,o.t)("refresh-picker.auto-option.label",f.autoOption.label),value:p,ariaLabel:(0,o.t)("refresh-picker.auto-option.aria-label",f.autoOption.ariaLabel)}}return{label:p,value:p}}function E({intervals:p=u,showAutoInterval:h=!1}={}){const y=p.map(s=>{const v=(0,l.RA)(s),C=(0,n.Z)(v);return{label:s,value:s,ariaLabel:C}});return h&&y.unshift(c(f.autoOption.value)),y.unshift(c(f.offOption.value)),y}},18328:(J,R,e)=>{"use strict";e.d(R,{D:()=>l});var n=e(39953),a=e(28425);function l({component:r,content:o,...g}){return n.createElement(r||"span",{dangerouslySetInnerHTML:{__html:a.QX.sanitize(o)},...g})}},16557:(J,R,e)=>{"use strict";e.d(R,{c:()=>d});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(4919),g=e(12392);const m=()=>({noRadiusInput:(0,n.css)({borderBottomRightRadius:"0 !important",borderTopRightRadius:"0 !important"}),noRadiusButton:(0,n.css)({borderBottomLeftRadius:"0 !important",borderTopLeftRadius:"0 !important"})}),d=({label:u="Password",labelWidth:i,inputWidth:f=12,onReset:c,isConfigured:E,tooltip:p,placeholder:h="Password",interactive:y,...s})=>{const v=m();return r.createElement(g.W,{label:u,tooltip:p,interactive:y,labelWidth:i,inputEl:E?r.createElement(r.Fragment,null,r.createElement("input",{type:"text",className:(0,n.cx)(`gf-form-input width-${f}`,v.noRadiusInput),disabled:!0,value:"configured",...(0,a.omit)(s,"value")}),r.createElement(o.zx,{onClick:c,variant:"secondary",type:"button"},"Reset")):r.createElement("input",{type:"password",className:`gf-form-input width-${f}`,placeholder:h,...s})})};d.displayName="SecretFormField"},63423:(J,R,e)=>{"use strict";e.d(R,{m4:()=>m});var n=e(39953),a=e(4919),l=e(38637),r=e(12223);const o="configured",g="Reset",m=({isConfigured:d,onReset:u,...i})=>n.createElement(r.Lh,null,!d&&n.createElement(l.I,{...i,type:"password"}),d&&n.createElement(l.I,{...i,type:"text",disabled:!0,value:o}),d&&n.createElement(a.zx,{onClick:u,variant:"secondary"},g))},10626:(J,R,e)=>{"use strict";e.d(R,{m:()=>n.m4});var n=e(63423)},52970:(J,R,e)=>{"use strict";e.d(R,{Zk:()=>i});var n=e(41407),a=e(39953),l=e(82803),r=e(4919),o=e(12223),g=e(68421);const m="configured",d="Reset",u=f=>({configuredStyle:(0,n.css)({minHeight:f.spacing(f.components.height.md),paddingTop:f.spacing(.5),resize:"none"})}),i=({isConfigured:f,onReset:c,...E})=>{const p=(0,l.wW)(u);return a.createElement(o.Lh,null,!f&&a.createElement(g.K,{...E}),f&&a.createElement(g.K,{...E,rows:1,disabled:!0,value:m,className:(0,n.cx)(p.configuredStyle)}),f&&a.createElement(r.zx,{onClick:c,variant:"secondary"},d))}},75583:(J,R,e)=>{"use strict";e.d(R,{Z:()=>n.Zk});var n=e(52970)},26005:(J,R,e)=>{"use strict";e.d(R,{X:()=>i});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(82803),g=e(99491),m=e(24955),d=e(10916),u=e(63202);function i({options:f,value:c,onChange:E,Component:p,className:h,allowCustomValue:y,allowEmptyValue:s,placeholder:v,disabled:C,inputMinWidth:D,inputPlaceholder:M,onExpandedChange:P,autofocus:x=!1,...S}){const[I,T,O,A]=(0,u._)(x,P),B=D?Math.max(D,T):T,b=(0,o.wW)(d.N);if(!O){const W=(0,a.isObject)(c)?c.label:c,V=W!=null?String(W):void 0;return r.createElement(I,{disabled:C,Component:p||r.createElement(g.W,{className:(0,n.cx)(b.segment,{[b.queryPlaceholder]:v!==void 0&&!c,[b.disabled]:C},h)},V||v)})}return r.createElement(m.V,{...S,value:c&&!(0,a.isObject)(c)?{value:c}:c,placeholder:M,options:f,width:B,onClickOutside:()=>A(!1),allowCustomValue:y,allowEmptyValue:s,onChange:W=>{A(!1),E(W)}})}},60314:(J,R,e)=>{"use strict";e.d(R,{V:()=>c});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(65489),g=e(82803),m=e(28384),d=e(99491),u=e(24955),i=e(10916),f=e(63202);function c({value:p,onChange:h,loadOptions:y,reloadOptionsOnChange:s=!1,Component:v,className:C,allowCustomValue:D,allowEmptyValue:M,disabled:P,placeholder:x,inputMinWidth:S,inputPlaceholder:I,autofocus:T=!1,onExpandedChange:O,noOptionMessageHandler:A=E,...B}){const[b,W]=(0,o.Z)(y,[y]),[V,w,K,z]=(0,f._)(T,O),G=S?Math.max(S,w):w,Q=(0,g.wW)(i.N);if(!K){const j=(0,a.isObject)(p)?p.label:p,F=j!=null?String(j):void 0;return r.createElement(V,{onClick:s?void 0:W,disabled:P,Component:v||r.createElement(d.W,{className:(0,n.cx)(Q.segment,{[Q.queryPlaceholder]:x!==void 0&&!p,[Q.disabled]:P},C)},F||x)})}return r.createElement(u.V,{...B,value:p&&!(0,a.isObject)(p)?{value:p}:p,placeholder:I,options:b.value??[],loadOptions:s?W:void 0,width:G,noOptionsMessage:A(b),allowCustomValue:D,allowEmptyValue:M,onClickOutside:()=>{z(!1)},onChange:j=>{z(!1),h(j)}})}function E(p){return p.loading?(0,m.t)("grafana-ui.segment-async.loading","Loading options..."):p.error?(0,m.t)("grafana-ui.segment-async.error","Failed to load options"):(0,m.t)("grafana-ui.segment-async.no-options","No options found")}},70967:(J,R,e)=>{"use strict";e.d(R,{X:()=>i});var n=e(41407),a=e(39953),l=e(67814),r=e(82803),o=e(76297),g=e(99491),m=e(10916),d=e(63202);const u=14;function i({value:f,onChange:c,Component:E,className:p,placeholder:h,inputPlaceholder:y,disabled:s,autofocus:v=!1,onExpandedChange:C,...D}){const M=(0,a.useRef)(null),[P,x]=(0,a.useState)(f),[S,I]=(0,a.useState)((0,o.X1)((f||"").toString(),u).width),[T,,O,A]=(0,d._)(v,C),B=(0,r.wW)(m.N);if((0,l.Z)(M,()=>{A(!1),c(P)}),!O)return a.createElement(T,{disabled:s,Component:E||a.createElement(g.W,{className:(0,n.cx)(B.segment,{[B.queryPlaceholder]:h!==void 0&&!P,[B.disabled]:s},p)},f||h)});const b=(0,n.css)({width:`${Math.max(S+20,32)}px`});return a.createElement("input",{...D,ref:M,autoFocus:!0,className:(0,n.cx)("gf-form gf-form-input",b),value:P,placeholder:y,onChange:W=>{const{width:V}=(0,o.X1)(W.target.value,u);I(V),x(W.target.value)},onBlur:()=>{A(!1),c(P)},onKeyDown:W=>{[13,27].includes(W.keyCode)&&(A(!1),c(P))}})}},75160:(J,R,e)=>{"use strict";e.d(R,{f:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(74661),o=e(99491);const g=({label:d,htmlFor:u,children:i,fill:f})=>{const c=(0,l.wW)(m);return a.createElement(a.Fragment,null,a.createElement(r.Z,null,a.createElement(o.W,{htmlFor:u,width:12,className:c.label},d),i,f&&a.createElement("div",{className:c.fill},a.createElement(o.W,null,""))))},m=d=>({label:(0,n.css)({color:d.colors.primary.text}),fill:(0,n.css)({flexGrow:1,marginBottom:d.spacing(.5)})})},24955:(J,R,e)=>{"use strict";e.d(R,{V:()=>r});var n=e(39953),a=e(82803),l=e(9558);function r({value:o,placeholder:g="",options:m=[],onChange:d,onClickOutside:u,loadOptions:i=void 0,width:f,noOptionsMessage:c="",allowCustomValue:E=!1,allowEmptyValue:p=!1,...h}){const y=(0,n.useRef)(null),s=(0,a.l4)();let v=f>0?f/s.spacing.gridSize:void 0,C,D={};return i?(C=l.qb,D={loadOptions:i,defaultOptions:!0}):C=l.Ph,n.createElement("div",{...h,ref:y},n.createElement(C,{width:v,noOptionsMessage:c,placeholder:g,autoFocus:!0,isOpen:!0,onChange:d,options:m,value:o,closeMenuOnSelect:!1,onCloseMenu:()=>{if(y&&y.current){const M=y.current.querySelector('input[id^="react-select-"]');M&&(M.value||p)?d({value:M.value,label:M.value}):u()}},allowCustomValue:E,...D}))}},10916:(J,R,e)=>{"use strict";e.d(R,{N:()=>a});var n=e(41407);const a=l=>{const r="v1"in l?l.v1.palette:l.palette;return{segment:(0,n.css)({cursor:"pointer",width:"auto"}),queryPlaceholder:(0,n.css)({color:r.gray2}),disabled:(0,n.css)({cursor:"not-allowed",opacity:.65,boxShadow:"none"})}}},63202:(J,R,e)=>{"use strict";e.d(R,{_:()=>r});var n=e(39953),a=e(82803),l=e(4919);const r=(o,g)=>{const m=(0,n.useRef)(null),d=(0,a.wW)(l.gN),[u,i]=(0,n.useState)(o),[f,c]=(0,n.useState)(0),E=h=>{i(h),g&&g(h)};return[({Component:h,onClick:y,disabled:s})=>n.createElement("button",{type:"button",className:d,ref:m,disabled:s,onClick:()=>{E(!0),m&&m.current&&c(m.current.clientWidth*1.25),y?.()}},h),f,u,E]}},82449:(J,R,e)=>{"use strict";e.d(R,{m:()=>l});var n=e(39953),a=e(12190);const l=({isOpen:r})=>{const o=r?"search":"angle-down",g=r?"sm":"md";return n.createElement(a.J,{name:o,size:g})}},9558:(J,R,e)=>{"use strict";e.d(R,{M8:()=>Y,qb:()=>F,gY:()=>_,NU:()=>j,Ph:()=>Q,eI:()=>x.e,LT:()=>k});var n=e(39953),a=e(20463),l=e(58990),r=e(4294),o=e(24876),g=e(65183),m=e(99456),d=e(82803),u=e(12190),i=e(28409),f=e(82449),c=e(41407),E=e(38637);const p=n.forwardRef((Z,ae)=>{const{children:ce}=Z,q=(0,d.l4)(),De=(0,E.H)({theme:q,invalid:!1});return n.createElement("div",{className:(0,c.cx)(De.suffix,(0,c.css)({position:"relative"})),ref:ae},ce)});p.displayName="IndicatorsContainer";var h=e(64084),y=e(15530);const s=(0,h.B)((Z,ae,ce)=>{const q=(0,E.H)({theme:Z,invalid:ae});return{input:(0,c.cx)((0,y.nf)(Z),(0,c.css)({width:"100%",maxWidth:"100%",display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",paddingRight:0,position:"relative",boxSizing:"border-box"}),ce&&(0,c.css)({paddingLeft:0})),prefix:(0,c.cx)(q.prefix,(0,c.css)({position:"relative"}))}}),v=n.forwardRef(function({focused:ae,invalid:ce,disabled:q,children:De,innerProps:oe,prefix:te,...fe},Te){const ge=(0,d.l4)(),he=s(ge,ce,!!te);return n.createElement("div",{className:he.input,...oe,ref:Te},te&&n.createElement("div",{className:(0,c.cx)(he.prefix)},te),De)});var C=e(68497),D=e(15246);const M=({innerProps:Z,children:ae})=>{const ce=(0,d.l4)(),q=(0,D.D)(ce);return n.createElement("div",{...Z,className:q.multiValueContainer},ae)},P=({children:Z,innerProps:ae})=>{const ce=(0,d.l4)(),q=(0,D.D)(ce);return n.createElement(C.h,{...ae,name:"times",size:"sm",className:q.multiValueRemove,tooltip:"Remove"})};var x=e(28987),S=e(56127),I=e(39592),T=e(77503);class O extends n.Component{render(){const{children:ae}=this.props,{selectProps:ce}=this.props;if(ce&&Array.isArray(ae)&&Array.isArray(ae[0])&&ce.maxVisibleValues!==void 0&&!(ce.showAllSelectedWhenOpen&&ce.menuIsOpen)){const[q,...De]=ae,oe=q.slice(0,ce.maxVisibleValues);return this.renderContainer([oe,...De])}return this.renderContainer(ae)}renderContainer(ae){const{isMulti:ce,theme:q}=this.props,De=(0,D.D)(q),oe=(0,c.cx)(De.valueContainer,ce&&De.valueContainerMulti);return n.createElement("div",{className:oe},ae)}}const A=(0,d.HE)(O);var B=e(65435);const b=(Z,ae)=>{if(Array.isArray(Z)){const ce=Z.filter(Boolean);return ce?.length?ce:void 0}if(typeof Z=="object")return[Z];if(typeof Z=="string"||typeof Z=="number"){const ce=W(Z,ae);if(ce)return[ce]}},W=(Z,ae)=>{for(const ce of ae)if("options"in ce){let q=W(Z,ce.options);if(q)return q}else if("value"in ce&&ce.value===Z)return ce;return null},V=Z=>Z.map(({description:ae,...ce})=>ce),w=Z=>{const{maxVisibleValues:ae,selectedValuesCount:ce,menuIsOpen:q,showAllSelectedWhenOpen:De}=Z;return ae!==void 0&&ce>ae&&!(De&&q)?n.createElement("span",{key:"excess-values",id:"excess-values"},"(+",ce-ae,")"):null},K=Z=>{const{children:ae,innerProps:ce,selectProps:{menuIsOpen:q,onMenuClose:De,onMenuOpen:oe},isFocused:te,isMulti:fe,getValue:Te,innerRef:ge}=Z,he=Z.selectProps;return he.renderControl?n.createElement(he.renderControl,{isOpen:q,value:fe?Te():Te()[0],ref:ge,onClick:q?De:oe,onBlur:De,disabled:!!he.disabled,invalid:!!he.invalid}):n.createElement(v,{ref:ge,innerProps:ce,prefix:he.prefix,focused:te,invalid:!!he.invalid,disabled:!!he.disabled},ae)};function z({allowCustomValue:Z=!1,allowCreateWhileLoading:ae=!1,"aria-label":ce,autoFocus:q=!1,backspaceRemovesValue:De=!0,blurInputOnSelect:oe,cacheOptions:te,className:fe,closeMenuOnSelect:Te=!0,components:ge,createOptionPosition:he="last",defaultOptions:me,defaultValue:ye,disabled:ue=!1,filterOption:Oe,formatCreateLabel:Ue,getOptionLabel:at,getOptionValue:Ne,inputValue:_e,invalid:Ke,isClearable:et=!1,id:ze,isLoading:je=!1,isMulti:Qe=!1,inputId:We,isOpen:ke,isOptionDisabled:ot,isSearchable:lt=!0,loadOptions:Ct,loadingMessage:wt="Loading options...",maxMenuHeight:Lt=300,minMenuHeight:Ye,maxVisibleValues:Be,menuPlacement:Le="auto",menuPosition:le,menuShouldPortal:de=!0,noOptionsMessage:X=(0,a.t)("grafana-ui.select.no-options-label","No options found"),onBlur:se,onChange:re,onCloseMenu:pe,onCreateOption:be,onInputChange:xe,onKeyDown:Pe,onMenuScrollToBottom:we,onMenuScrollToTop:Fe,onOpenMenu:He,onFocus:Xe,openMenuOnFocus:dt=!1,options:ct=[],placeholder:At=(0,a.t)("grafana-ui.select.placeholder","Choose"),prefix:Ie,renderControl:Ze,showAllSelectedWhenOpen:ut=!0,tabSelectsValue:rt=!0,value:St,virtualized:st=!1,width:tt,isValidNewOption:ft,formatOptionLabel:$t,hideSelectedOptions:Ht,...Zt}){const tn=(0,d.l4)(),on=(0,D.D)(tn),qt=(0,n.useRef)(null),[pn,Cn]=(0,n.useState)(!1),Rt=(0,B.O)(tn,tt),[mt,xt]=(0,n.useState)(!!_e);(0,n.useEffect)(()=>{if(Ct&&ke&&qt.current&&qt.current.controlRef&&Le==="auto"){const kt=window.innerHeight-qt.current.controlRef.getBoundingClientRect().bottom;Cn(kt<Lt)}},[Lt,Le,Ct,ke]);const Ft=(0,n.useCallback)((kt,dn)=>{if(Qe&&kt==null)return re([],dn);re(kt,dn)},[Qe,re]);let zt=l.ZP;const Jt={};let ln={},Pt;if(Qe&&Ct)Pt=St;else if(Qe&&St&&Array.isArray(St)&&!Ct)Pt=St.map(kt=>{const dn=W(kt.value??kt,ct);return!Z||dn?dn:typeof kt=="string"?(0,m.E)(kt):kt});else if(Ct){const kt=ye||St;Pt=kt?[kt]:[]}else Pt=b(St,ct);const Gt={"aria-label":ce,autoFocus:q,backspaceRemovesValue:De,blurInputOnSelect:oe,captureMenuScroll:we||Fe,closeMenuOnSelect:Te,defaultValue:ye,disabled:ue,filterOption:mt?Oe:null,getOptionLabel:at,getOptionValue:Ne,hideSelectedOptions:Ht,inputValue:_e,invalid:Ke,isClearable:et,id:ze,isDisabled:ue,isLoading:je,isMulti:Qe,inputId:We,isOptionDisabled:ot,isSearchable:lt,maxMenuHeight:Lt,minMenuHeight:Ye,maxVisibleValues:Be,menuIsOpen:ke,menuPlacement:Le==="auto"&&pn?"top":Le,menuPosition:le,menuShouldBlockScroll:!0,menuPortalTarget:de&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:se,onChange:Ft,onInputChange:(kt,dn)=>{xt(!!kt),xe?.(kt,dn)},onKeyDown:Pe,onMenuClose:pe,onMenuOpen:He,onMenuScrollToBottom:we,onMenuScrollToTop:Fe,onFocus:Xe,formatOptionLabel:$t,openMenuOnFocus:dt,options:st?V(ct):ct,placeholder:At,prefix:Ie,renderControl:Ze,showAllSelectedWhenOpen:ut,tabSelectsValue:rt,value:Qe?Pt:Pt?.[0]};Z&&(zt=g.Z,Jt.allowCreateWhileLoading=ae,Jt.formatCreateLabel=Ue??G,Jt.onCreateOption=be,Jt.createOptionPosition=he,Jt.isValidNewOption=ft),Ct&&(zt=Z?o.Z:r.Z,ln={loadOptions:Ct,cacheOptions:te,defaultOptions:me});const Kt=st?S.r4:S.SA;return n.createElement(n.Fragment,null,n.createElement(zt,{ref:qt,components:{MenuList:Kt,Group:I.n,ValueContainer:A,IndicatorsContainer(kt){const{selectProps:dn}=kt,{value:nn,showAllSelectedWhenOpen:mn,maxVisibleValues:Mn,menuIsOpen:Gn}=dn;if(Mn!==void 0){const $n=nn.length,Fn=[...kt.children];return Fn.splice(-1,0,w({maxVisibleValues:Mn,selectedValuesCount:$n,showAllSelectedWhenOpen:mn,menuIsOpen:Gn})),n.createElement(p,{...kt},Fn)}return n.createElement(p,{...kt})},IndicatorSeparator(){return n.createElement(n.Fragment,null)},Control:K,Option:S.Qn,ClearIndicator(kt){const{clearValue:dn}=kt;return n.createElement(u.J,{name:"times",role:"button","aria-label":"select-clear-value",className:on.singleValueRemove,onMouseDown:nn=>{nn.preventDefault(),nn.stopPropagation(),dn()}})},LoadingIndicator(){return n.createElement(i.$,{inline:!0})},LoadingMessage(){return n.createElement("div",{className:on.loadingMessage},wt)},NoOptionsMessage(){return n.createElement("div",{className:on.loadingMessage,"aria-label":"No options provided"},X)},DropdownIndicator(kt){return n.createElement(f.m,{isOpen:kt.selectProps.menuIsOpen})},SingleValue(kt){return n.createElement(T.P,{...kt,isDisabled:ue})},SelectContainer:x.e,MultiValueContainer:M,MultiValueRemove:ue?()=>null:P,...ge},styles:Rt,className:fe,...Gt,...Jt,...ln,...Zt}))}function G(Z){return n.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},n.createElement("div",null,Z),n.createElement("div",{style:{flexGrow:1}}),n.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function Q(Z){return n.createElement(z,{...Z})}function j(Z){return n.createElement(z,{...Z,isMulti:!0})}function F(Z){return n.createElement(z,{...Z})}function k(Z){return n.createElement(z,{virtualized:!0,...Z})}function _(Z){return n.createElement(z,{virtualized:!0,...Z})}function Y(Z){return n.createElement(z,{...Z,isMulti:!0})}},28987:(J,R,e)=>{"use strict";e.d(R,{e:()=>u});var n=e(41407),a=e(39953),l=e(72970),r=e(64084),o=e(82803),g=e(53039),m=e(15530),d=e(38637);const u=f=>{const{isDisabled:c,isFocused:E,children:p,selectProps:{invalid:h=!1}}=f,y=(0,o.l4)(),s=i(y,E,c,h);return a.createElement(l.c.SelectContainer,{...f,className:(0,n.cx)(s.wrapper,f.className)},p)},i=(0,r.B)((f,c,E,p)=>{const h=(0,d.H)({theme:f,invalid:p});return{wrapper:(0,n.cx)(h.wrapper,(0,m.RK)(f,p),c&&(0,n.css)((0,g.getFocusStyles)(f)),E&&h.inputDisabled,(0,n.css)({position:"relative",boxSizing:"border-box",flexDirection:"row",flexWrap:"wrap",alignItems:"stretch",justifyContent:"space-between",minHeight:"32px",height:"auto",maxWidth:"100%",padding:0,cursor:E?"not-allowed":"pointer"}))}})},56127:(J,R,e)=>{"use strict";e.d(R,{Qn:()=>h,SA:()=>f,r4:()=>p});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(68084),g=e(17393),m=e(82803),d=e(64447),u=e(12190),i=e(15246);const f=({children:y,maxHeight:s,innerRef:v,innerProps:C})=>{const D=(0,m.l4)(),M=(0,i.D)(D);return r.createElement("div",{...C,className:M.menu,style:{maxHeight:s},"aria-label":"Select options menu"},r.createElement(d.$,{scrollRefCallback:v,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},y))};f.displayName="SelectMenu";const c=37,E=7,p=({children:y,maxHeight:s,options:v,getValue:C})=>{const D=(0,m.l4)(),M=(0,i.D)(D),[P]=C(),S=(P?v.findIndex(A=>A.value===P.value):0)*c;if(!Array.isArray(y))return null;const T=((0,a.max)(v.map(A=>A.label?.length))??0)*E,O=Math.min(v.length*c,s);return r.createElement(o.t7,{className:M.menu,height:O,width:T,"aria-label":"Select options menu",itemCount:y.length,itemSize:c,initialScrollOffset:S},({index:A,style:B})=>r.createElement("div",{style:{...B,overflow:"hidden"}},y[A]))};p.displayName="VirtualizedSelectMenu";const h=({children:y,data:s,innerProps:v,innerRef:C,isFocused:D,isSelected:M,renderOptionLabel:P})=>{const x=(0,m.l4)(),S=(0,i.D)(x),I=s.icon?(0,g.iJ)(s.icon):void 0,{onMouseMove:T,onMouseOver:O,...A}=v;return r.createElement("div",{ref:C,className:(0,n.cx)(S.option,D&&S.optionFocused,M&&S.optionSelected,s.isDisabled&&S.optionDisabled),...A,"aria-label":"Select option",title:s.title},I&&r.createElement(u.J,{name:I,className:S.optionIcon}),s.imgUrl&&r.createElement("img",{className:S.optionImage,src:s.imgUrl,alt:s.label||String(s.value)}),r.createElement("div",{className:S.optionBody},r.createElement("span",null,P?P(s):y),s.description&&r.createElement("div",{className:S.optionDescription},s.description),s.component&&r.createElement(s.component,null)))};h.displayName="SelectMenuOptions"},39592:(J,R,e)=>{"use strict";e.d(R,{n:()=>d});var n=e(41407),a=e(39953),l=e(64084),r=e(82803),o=e(12190);const g=(0,l.B)(u=>({header:(0,n.css)({display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%",borderBottom:`1px solid ${u.colors.background.secondary}`,"&:hover":{color:u.colors.text.maxContrast}}),label:(0,n.css)({flexGrow:1}),icon:(0,n.css)({paddingRight:"2px"})}));class m extends a.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(i=>({expanded:!i.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:i}=this.props.selectProps.value;i&&this.props.options.some(f=>f.value===i)&&this.setState({expanded:!0})}}componentDidUpdate(i){i.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:i,label:f,theme:c}=this.props,{expanded:E}=this.state,p=g(c);return a.createElement("div",null,a.createElement("div",{className:p.header,onClick:this.onToggleChildren,role:"presentation"},a.createElement("span",{className:p.label},f),a.createElement(o.J,{className:p.icon,name:E?"angle-up":"angle-down"})),E&&i)}}const d=(0,r.HE)(m)},77503:(J,R,e)=>{"use strict";e.d(R,{P:()=>c});var n=e(41407),a=e(39953),l=e(72970),r=e(17393),o=e(82803);function g(p,h={}){const{duration:y=250,delay:s=250}=h,[v,C]=(0,a.useState)(p),D=(0,a.useRef)();return(0,a.useEffect)(()=>{let M;if(p)M=setTimeout(()=>{D.current=new Date,C(p)},s);else{const P=D.current?Date.now()-D.current.valueOf():0,x=()=>{D.current=void 0,C(p)};P>=y?x():M=setTimeout(x,y-P)}return()=>{M&&(clearTimeout(M),M=void 0)}},[p,y,s]),v}var m=e(12190),d=e(28409),u=e(63618),i=e(69043);const f=p=>({singleValue:(0,n.css)({label:"singleValue",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%",gridArea:"1 / 1 / 2 / 3"}),spinnerWrapper:(0,n.css)({width:"16px",height:"16px",display:"inline-block",marginRight:"10px",position:"relative",verticalAlign:"middle",overflow:"hidden"}),spinnerIcon:(0,n.css)({width:"100%",height:"100%",position:"absolute"}),optionIcon:(0,n.css)({marginRight:p.spacing(1),color:p.colors.text.secondary}),disabled:(0,n.css)({color:p.colors.text.disabled}),isOpen:(0,n.css)({color:p.colors.text.disabled})}),c=p=>{const{children:h,data:y,isDisabled:s}=p,v=(0,o.wW)(f),C=g(y.loading||!1,{delay:250,duration:750}),D=y.icon?(0,r.iJ)(y.icon):void 0;return a.createElement(l.c.SingleValue,{...p,className:(0,n.cx)(v.singleValue,s&&v.disabled,p.selectProps.menuIsOpen&&v.isOpen)},y.imgUrl?a.createElement(E,{loading:C,imgUrl:y.imgUrl,styles:v,alt:String(y.label??y.value)}):a.createElement(a.Fragment,null,a.createElement(i.R,{horizontal:!0,size:16,visible:C,duration:150},a.createElement("div",{className:v.spinnerWrapper},a.createElement(d.$,{className:v.spinnerIcon,inline:!0}))),D&&a.createElement(m.J,{name:D,role:"img",className:v.optionIcon})),!y.hideText&&h)},E=p=>a.createElement("div",{className:p.styles.spinnerWrapper},a.createElement(u.n,{duration:150,visible:p.loading},a.createElement(d.$,{className:p.styles.spinnerIcon,inline:!0})),a.createElement(u.n,{duration:150,visible:!p.loading},a.createElement("img",{className:p.styles.spinnerIcon,src:p.imgUrl,alt:p.alt})))},15246:(J,R,e)=>{"use strict";e.d(R,{D:()=>l});var n=e(41407),a=e(64084);const l=(0,a.B)(r=>({menu:(0,n.css)({label:"grafana-select-menu",background:r.components.dropdown.background,boxShadow:r.shadows.z3,position:"relative",minWidth:"100%",zIndex:1}),option:(0,n.css)({label:"grafana-select-option",padding:"8px",display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",borderLeft:"2px solid transparent","&:hover":{background:r.colors.action.hover}}),optionIcon:(0,n.css)({marginRight:r.spacing(1)}),optionImage:(0,n.css)({label:"grafana-select-option-image",width:"16px",marginRight:"10px"}),optionDescription:(0,n.css)({label:"grafana-select-option-description",fontWeight:"normal",fontSize:r.typography.size.sm,color:r.colors.text.secondary,whiteSpace:"normal",lineHeight:r.typography.body.lineHeight}),optionBody:(0,n.css)({label:"grafana-select-option-body",display:"flex",fontWeight:r.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),optionFocused:(0,n.css)({label:"grafana-select-option-focused",background:r.colors.action.focus}),optionSelected:(0,n.css)({background:r.colors.action.selected}),optionDisabled:(0,n.css)({label:"grafana-select-option-disabled",backgroundColor:r.colors.action.disabledBackground,color:r.colors.action.disabledText,cursor:"not-allowed"}),singleValue:(0,n.css)({label:"grafana-select-single-value",color:r.components.input.text,gridArea:"1 / 1 / 2 / 3",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%"}),valueContainer:(0,n.css)({label:"grafana-select-value-container",alignItems:"center",display:"grid",position:"relative",boxSizing:"border-box",flex:"1 1 0%",outline:"none",overflow:"hidden"}),valueContainerMulti:(0,n.css)({label:"grafana-select-value-container-multi",flexWrap:"wrap",display:"flex"}),loadingMessage:(0,n.css)({label:"grafana-select-loading-message",padding:r.spacing(1),textAlign:"center",width:"100%"}),multiValueContainer:(0,n.css)({label:"grafana-select-multi-value-container",display:"flex",alignItems:"center",lineHeight:1,background:r.colors.background.secondary,borderRadius:r.shape.radius.default,margin:r.spacing(.25,1,.25,0),padding:r.spacing(.25,0,.25,1),color:r.colors.text.primary,fontSize:r.typography.size.sm,"&:hover":{background:r.colors.emphasize(r.colors.background.secondary)}}),multiValueRemove:(0,n.css)({label:"grafana-select-multi-value-remove",margin:r.spacing(0,.5),cursor:"pointer",svg:{marginBottom:0}}),singleValueRemove:(0,n.css)({cursor:"pointer","&:hover":{color:r.colors.text.primary}})}))},65435:(J,R,e)=>{"use strict";e.d(R,{O:()=>l,Z:()=>a});var n=e(39953);function a(r){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(o){return{...o,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:o})=>({maxHeight:o}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:o=>({...o,color:r.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function l(r,o){return(0,n.useMemo)(()=>({...a(r),menuPortal:g=>({...g,zIndex:r.zIndex.portal}),menu:({top:g,bottom:m,position:d})=>({top:g,bottom:m,position:d,minWidth:"100%",zIndex:r.zIndex.dropdown}),container:()=>({width:o?r.spacing(o):"100%",display:o==="auto"?"inline-flex":"flex"}),option:(g,m)=>({...g,opacity:m.isDisabled?.5:1})}),[r,o])}},32109:()=>{},45679:(J,R,e)=>{"use strict";e.d(R,{F:()=>E});var n=e(86832),a=e.n(n),l=e(39953),r=e(23997),o=e(63302),g=e(7063),m=e(36376),d=e(61782),u=e(82696),i=e(55705),f=e(82563);function c(p){return{label:p,value:stringToMs(p)}}class E extends l.PureComponent{constructor(h){super(h),this.propsSubject=new r.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,d.w)(h=>f.dP.isLive(h.interval)?(0,o.of)({}):h.loading?g.C:(0,m.F)((0,i.e0)(h.interval))),(0,u.b)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(h){f.dP.isLive(h.interval)&&f.dP.isLive(this.props.interval)||(0,n.isEqual)(h,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},86609:(J,R,e)=>{"use strict";e.d(R,{PR:()=>s,ZH:()=>f,rD:()=>E});var n=e(86832),a=e.n(n),l=e(3181),r=e(64943),o=e(60695),g=e(38450),m=e(97898),d=e(52716),u=e(49231);const i=["reduceOptions","orientation"];function f(v,C,D){let M=v.options;if(v.fieldConfig=v.fieldConfig||{defaults:{},overrides:[]},C==="singlestat"&&D.angular)return c(v,D);for(const P of i)D.hasOwnProperty(P)&&(M[P]=(0,n.cloneDeep)(D[P]));return M}function c(v,C){const D=C.angular,M=l.TB.getIfExists(D.valueName),P={reduceOptions:{calcs:[M?M.id:l.gz.mean]},orientation:r.wm.Horizontal},x={};if(D.format&&(x.unit=D.format),D.tableColumn&&(P.reduceOptions.fields=`/^${D.tableColumn}$/`),D.nullPointMode&&(x.nullValueMode=D.nullPointMode),D.nullText&&(x.noValue=D.nullText),(D.decimals||D.decimals===0)&&(x.decimals=D.decimals),D.thresholds&&D.colors){const I=D.thresholds.split(",").map(O=>Number(O.trim())),T=[];for(const O of D.colors){const A=T.length-1;A>=0?T.push({value:I[A],color:O}):T.push({value:-1/0,color:O})}x.thresholds={mode:o.H.Absolute,steps:T}}const S=(0,g.Jb)(D,x.thresholds);return S&&S.length&&(x.mappings=S),D.gauge&&D.gauge.show&&(x.min=D.gauge.minValue,x.max=D.gauge.maxValue),v.fieldConfig.defaults=x,P}function E(v){if(!v.options)return{};const C=parseFloat(v.pluginVersion||"6.1");let D=v.options;C<6.2&&(D=h(D)),C<6.3&&(D=p(D));const{fieldOptions:M}=D;if(C<6.6&&M){if(M&&M.override){const{override:S,...I}=D.fieldOptions;D={...D,fieldOptions:{...I,overrides:[]}}}let P=M?.defaults?.thresholds;P?delete M.defaults.thresholds:(P=M?.thresholds,delete M.thresholds),P&&(M.defaults.thresholds={mode:o.H.Absolute,steps:P});const{defaults:x}=M;x.color&&typeof x.color=="string"&&(x.color={mode:m.S.Fixed,fixedColor:x.color}),(0,d.gb)(x)}if(C<7&&(v.fieldConfig=v.fieldConfig||{defaults:{},overrides:[]},v.fieldConfig={defaults:M&&M.defaults?{...v.fieldConfig.defaults,...M.defaults}:v.fieldConfig.defaults,overrides:M&&M.overrides?[...v.fieldConfig.overrides,...M.overrides]:v.fieldConfig.overrides},M&&(D.reduceOptions={values:M.values,limit:M.limit,calcs:M.calcs}),delete D.fieldOptions),C<7.1){const P=v.fieldConfig.defaults.title;P!=null&&(v.fieldConfig.defaults.displayName=P,delete v.fieldConfig.defaults.title)}if(C<8){const P=v.fieldConfig?.defaults;let x=P?.unit;x==="percent"?((0,n.isNumber)(P.min)||(P.min=0),(0,n.isNumber)(P.max)||(P.max=100)):x==="percentunit"&&((0,n.isNumber)(P.min)||(P.min=0),(0,n.isNumber)(P.max)||(P.max=1))}return D}function p(v){const{fieldOptions:C}=v;if(!C)return v;const{mappings:D,...M}=v.fieldOptions;let P;return v.thresholds&&(P={mode:o.H.Absolute,steps:y(v.thresholds)}),{...v,fieldOptions:{...M,defaults:{...C.defaults,mappings:D,thresholds:P}}}}function h(v){const{valueOptions:C}=v;if(!C)return v;const D={},M={};if(D.mappings=v.valueMappings,D.thresholds=v.thresholds,D.defaults=M,M.unit=C.unit,M.decimals=C.decimals,C.stat){const x=l.TB.get(C.stat);x&&(D.calcs=[x.id])}M.min=v.minValue,M.max=v.maxValue;const P={...v,fieldOptions:D};return(0,n.omit)(P,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function y(v){if(!v||!v.length)return;const C=v.map(D=>({value:D.value===null?-1/0:D.value,color:D.color}));return(0,u.bP)(C),C[0].value=-1/0,C}function s(v){return(0,g.Jb)(v)}},76117:(J,R,e)=>{"use strict";e.d(R,{PR:()=>n.PR,ZH:()=>n.ZH,rD:()=>n.rD});var n=e(86609)},98263:(J,R,e)=>{"use strict";e.d(R,{U:()=>f});var n=e(41407),a=e(93986),l=e(75965),r=e(39953),o=e(82803),g=e(10766);const m=c=>{const{value:E,children:p,visible:h,placement:y,tipFormatter:s,...v}=c,C=(0,r.useRef)(null),D=(0,r.useRef)(null),M=(0,o.wW)(d);function P(){D.current!==null&&cancelAnimationFrame(D.current)}function x(){D.current=requestAnimationFrame(()=>{C.current?.forceAlign()})}return(0,r.useEffect)(()=>(h?x():P(),P),[E,h]),r.createElement(g.Z,{overlayClassName:M.tooltip,placement:y,overlay:s??E,overlayInnerStyle:{minHeight:"auto"},ref:C,visible:h,...v},p)},d=c=>({tooltip:(0,n.css)({position:"absolute",display:"block",visibility:"visible",fontSize:c.typography.bodySmall.fontSize,opacity:.9,padding:3,zIndex:c.zIndex.tooltip})}),u=m;var i=e(35226);const f=({min:c,max:E,onChange:p,onAfterChange:h,orientation:y="horizontal",reverse:s,step:v,formatTooltipResult:C,value:D,tooltipAlwaysVisible:M=!0})=>{const P=(0,r.useCallback)(A=>{p?.(typeof A=="number"?[A,A]:A)},[p]),x=(0,r.useCallback)(A=>{h?.(typeof A=="number"?[A,A]:A)},[h]),S=y==="horizontal",I=(0,o.l4)(),T=(0,i.W)(I,S),O=(A,B)=>r.createElement(u,{value:B.value,visible:M||B.dragging,tipFormatter:C?()=>C(B.value):void 0,placement:S?"top":"right"},A);return r.createElement("div",{className:(0,n.cx)(T.container,T.slider)},r.createElement(a.Global,{styles:T.tooltip}),r.createElement(l.Z,{min:c,max:E,step:v,defaultValue:D,range:!0,onChange:P,onAfterChange:x,vertical:!S,reverse:s,handleRender:O}))};f.displayName="RangeSlider"},23527:(J,R,e)=>{"use strict";e.d(R,{i:()=>d});var n=e(41407),a=e(93986),l=e(75965),r=e(39953),o=e(82803),g=e(38637),m=e(35226);const d=({min:u,max:i,onChange:f,onAfterChange:c,orientation:E="horizontal",reverse:p,step:h,value:y,ariaLabelForHandle:s,marks:v,included:C})=>{const D=E==="horizontal",M=(0,o.l4)(),P=(0,m.W)(M,D,!!v),x=l.Z,[S,I]=(0,r.useState)(y??u),T=(0,r.useCallback)(V=>{const w=typeof V=="number"?V:V[0];I(w),f?.(w)},[I,f]),O=(0,r.useCallback)(V=>{let w=+V.target.value;Number.isNaN(w)&&(w=0),I(w),f&&f(w),c&&c(w)},[f,c]),A=(0,r.useCallback)(V=>{const w=+V.target.value;w>i?I(i):w<u&&I(u)},[i,u]),B=(0,r.useCallback)(V=>{const w=typeof V=="number"?V:V[0];c?.(w)},[c]),b=D?[]:[P.sliderInputVertical],W=D?[]:[P.sliderInputFieldVertical];return r.createElement("div",{className:(0,n.cx)(P.container,P.slider)},r.createElement(a.Global,{styles:P.tooltip}),r.createElement("div",{className:(0,n.cx)(P.sliderInput,...b)},r.createElement(x,{min:u,max:i,step:h,defaultValue:y,value:S,onChange:T,onAfterChange:B,vertical:!D,reverse:p,ariaLabelForHandle:s,marks:v,included:C}),r.createElement(g.I,{type:"text",className:(0,n.cx)(P.sliderInputField,...W),value:S,onChange:O,onBlur:A,min:u,max:i})))};d.displayName="Slider"},35226:(J,R,e)=>{"use strict";e.d(R,{W:()=>r});var n=e(41407),a=e(93986),l=e(64084);const r=(0,l.B)((o,g,m=!1)=>{const{spacing:d}=o,u=o.colors.border.strong,i=o.colors.primary.main,f=o.colors.primary.main,E=`box-shadow: 0px 0px 0px 6px ${o.colors.primary.transparent}`;return{container:(0,n.css)({width:"100%",margin:g?"inherit":d(1,3,1,1),paddingBottom:g&&m?o.spacing(1):"inherit",height:g?"auto":"100%"}),slider:(0,n.css)`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${o.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${o.colors.text.disabled};
        font-size: ${o.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${o.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${f};
        box-shadow: ${o.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${E};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${o.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${o.colors.text.primary};
        border-color: ${o.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${i};
      }
      .rc-slider-rail {
        background-color: ${u};
        cursor: pointer;
      }
    `,tooltip:(0,a.css)`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${o.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${o.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"}),sliderInputVertical:(0,n.css)({flexDirection:"column",height:"100%",".rc-slider":{margin:0,order:2}}),sliderInputField:(0,n.css)({marginLeft:o.spacing(3),width:"60px",input:{textAlign:"center"}}),sliderInputFieldVertical:(0,n.css)({margin:`0 0 ${o.spacing(3)} 0`,order:1})}})},52542:(J,R,e)=>{"use strict";e.d(R,{b:()=>h});var n=e(86832),a=e(39953),l=e(99977),r=e(89591),o=e(73254),g=e(34547),m=e(79469),d=e(80115),u=e(95966),i=e(82837),f=e(53305),c=e(12714);function E(y,s){const v=y.y.values.length,C={...y.y.config,...s},D=y.x??{name:"",values:[...Array(v).keys()],type:r.fS.number,config:{}};let M={refId:"sparkline",fields:[D,{...y.y,config:C}],length:v};return(0,i.lP)(D.values)||(M=(0,f.aK)(M,0)),(0,c.w)({frame:M,refFieldPseudoMin:y.timeRange?.from.valueOf(),refFieldPseudoMax:y.timeRange?.to.valueOf()})}const p={drawStyle:g.l8.Line,showPoints:g.Jp.Auto,axisPlacement:g.LB.Hidden,pointSize:2};class h extends a.PureComponent{constructor(s){super(s);const v=E(s.sparkline,s.config);this.state={data:(0,u.Bj)(v,(0,u.i7)(v)),alignedDataFrame:v,configBuilder:this.prepareConfig(v)}}static getDerivedStateFromProps(s,v){const C=E(s.sparkline,s.config);return C?{...v,data:(0,u.Bj)(C,(0,u.i7)(C)),alignedDataFrame:C}:{...v}}componentDidUpdate(s,v){const{alignedDataFrame:C}=this.state;if(!C)return;let D=!1;s.sparkline!==this.props.sparkline?D=!(0,l.Ch)(this.state.alignedDataFrame,v.alignedDataFrame):D=!(0,n.isEqual)(s.config,this.props.config),D&&this.setState({configBuilder:this.prepareConfig(C)})}getYRange(s){let{min:v,max:C}=this.state.alignedDataFrame.fields[1].state?.range;return v===C?(v===0?C=100:(v=0,C*=2),[v,C]):[Math.max(v,s.config.min??-1/0),Math.min(C,s.config.max??1/0)]}prepareConfig(s){const{theme:v}=this.props,C=new d.U;C.setCursor({show:!1,x:!1,y:!1});const D=s.fields[0];C.addScale({scaleKey:"x",orientation:g.wN.Horizontal,direction:g.bQ.Right,isTime:!1,range:()=>{const{sparkline:M}=this.props;if(M.x){if(M.timeRange&&M.x.type===r.fS.time)return[M.timeRange.from.valueOf(),M.timeRange.to.valueOf()];const P=M.x.values;return[P[0],P[P.length-1]]}return[0,M.y.values.length-1]}}),C.addAxis({scaleKey:"x",theme:v,placement:g.LB.Hidden});for(let M=0;M<s.fields.length;M++){const P=s.fields[M],x=P.config,S={...p,...x.custom};if(P===D||P.type!==r.fS.number)continue;const I=x.unit||"__fixed";C.addScale({scaleKey:I,orientation:g.wN.Vertical,direction:g.bQ.Up,range:()=>this.getYRange(P)}),C.addAxis({scaleKey:I,theme:v,placement:g.LB.Hidden});const T=(0,o.fD)(P),O=T.getCalculator(P,v)(0,0),A=S.drawStyle===g.l8.Points?g.Jp.Always:S.showPoints;C.addSeries({pxAlign:!1,scaleKey:I,theme:v,colorMode:T,thresholds:x.thresholds,drawStyle:S.drawStyle,lineColor:S.lineColor??O,lineWidth:S.lineWidth,lineInterpolation:S.lineInterpolation,showPoints:A,pointSize:S.pointSize,fillOpacity:S.fillOpacity,fillColor:S.fillColor,lineStyle:S.lineStyle,gradientMode:S.gradientMode})}return C}render(){const{data:s,configBuilder:v}=this.state,{width:C,height:D}=this.props;return a.createElement(m.N,{data:s,config:v,width:C,height:D})}}},28409:(J,R,e)=>{"use strict";e.d(R,{$:()=>g});var n=e(41407),a=e(39953),l=e(64084),r=e(12190);const o=(0,l.B)((m,d)=>(0,n.css)([{fontSize:typeof m=="string"?m:`${m}px`},d&&{display:"inline-block"}])),g=({className:m,inline:d=!1,iconClassName:u,style:i,size:f=16})=>{const c=o(f,d);return a.createElement("div",{"data-testid":"Spinner",style:i,className:(0,n.cx)(c,m)},a.createElement(r.J,{className:(0,n.cx)("fa-spin",u),name:"fa fa-spinner","aria-label":"loading spinner"}))}},54173:(J,R,e)=>{"use strict";e.d(R,{m:()=>g});var n=e(86832),a=e.n(n),l=e(39953),r=e(3181),o=e(9558);class g extends l.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:d,allowMultiple:u,defaultStat:i,onChange:f}=this.props,c=r.TB.list(d);if(c.length!==d.length){const E=c.map(h=>h.id),p=(0,n.difference)(d,E);console.warn("Unknown stats",p,d),f(c.map(h=>h.id))}!u&&d.length>1&&(console.warn("Removing extra stat",d),f([d[0]])),i&&d.length<1&&f([i])},this.onSelectionChange=d=>{const{onChange:u}=this.props;Array.isArray(d)?u(d.map(i=>i.value)):u(d&&d.value?[d.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(d){this.checkInput()}render(){const{stats:d,allowMultiple:u,defaultStat:i,placeholder:f,className:c,menuPlacement:E,width:p,inputId:h,filterOptions:y}=this.props,s=r.TB.selectOptions(d,y);return l.createElement(o.Ph,{value:s.current,className:c,isClearable:!i,isMulti:u,width:p,isSearchable:!0,options:s.options,placeholder:f,onChange:this.onSelectionChange,menuPlacement:E,inputId:h})}}g.defaultProps={allowMultiple:!1}},26286:(J,R,e)=>{"use strict";e.d(R,{r:()=>u,x:()=>i});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(14255),g=e(82803),m=e(64084),d=e(53039);const u=r.forwardRef(({value:c,checked:E,onChange:p,id:h,label:y,disabled:s,invalid:v=!1,...C},D)=>{E&&(0,o.d)("Switch","checked prop","value");const M=(0,g.l4)(),P=f(M),x=(0,r.useRef)(h||(0,a.uniqueId)("switch-"));return r.createElement("div",{className:(0,n.cx)(P.switch,v&&P.invalid)},r.createElement("input",{type:"checkbox",disabled:s,checked:c,onChange:S=>{!s&&p?.(S)},id:x.current,...C,ref:D}),r.createElement("label",{htmlFor:x.current,"aria-label":y??"Toggle switch"}))});u.displayName="Switch";const i=r.forwardRef(({transparent:c,className:E,showLabel:p,label:h,value:y,id:s,invalid:v,...C},D)=>{const M=(0,g.l4)(),P=f(M,c);return r.createElement("div",{className:(0,n.cx)(P.inlineContainer,E,C.disabled&&P.disabled,v&&P.invalid)},p&&r.createElement("label",{htmlFor:s,className:(0,n.cx)(P.inlineLabel,y&&P.inlineLabelEnabled,"inline-switch-label")},h),r.createElement(u,{...C,id:s,label:h,ref:D,value:y}))});i.displayName="Switch";const f=(0,m.B)((c,E)=>({switch:(0,n.css)({width:"32px",height:"16px",position:"relative",input:{opacity:0,left:"-100vw",zIndex:-1e3,position:"absolute","&:disabled + label":{background:c.colors.action.disabledBackground,cursor:"not-allowed"},"&:checked + label":{background:c.colors.primary.main,borderColor:c.colors.primary.main,"&:hover":{background:c.colors.primary.shade},"&::after":{transform:"translate3d(18px, -50%, 0)",background:c.colors.primary.contrastText}},"&:focus + label, &:focus-visible + label":(0,d.getFocusStyles)(c),"&:focus:not(:focus-visible) + label":(0,d.getMouseFocusStyles)(c)},label:{width:"100%",height:"100%",cursor:"pointer",borderRadius:c.shape.radius.pill,background:c.components.input.background,border:`1px solid ${c.components.input.borderColor}`,transition:"all 0.3s ease","&:hover":{borderColor:c.components.input.borderHover},"&::after":{position:"absolute",display:"block",content:'""',width:"12px",height:"12px",borderRadius:c.shape.radius.circle,background:c.colors.text.secondary,boxShadow:c.shadows.z1,top:"50%",transform:"translate3d(2px, -50%, 0)",transition:"transform 0.2s cubic-bezier(0.19, 1, 0.22, 1)","@media (forced-colors: active)":{border:"1px solid transparent"}}}}),inlineContainer:(0,n.css)({padding:c.spacing(0,1),height:c.spacing(c.components.height.md),display:"inline-flex",alignItems:"center",background:E?"transparent":c.components.input.background,border:`1px solid ${E?"transparent":c.components.input.borderColor}`,borderRadius:c.shape.radius.default,"&:hover":{border:`1px solid ${E?"transparent":c.components.input.borderHover}`,".inline-switch-label":{color:c.colors.text.primary}}}),disabled:(0,n.css)({backgroundColor:"rgba(204, 204, 220, 0.04)",color:"rgba(204, 204, 220, 0.6)",border:"1px solid rgba(204, 204, 220, 0.04)"}),inlineLabel:(0,n.css)({cursor:"pointer",paddingRight:c.spacing(1),color:c.colors.text.secondary,whiteSpace:"nowrap"}),inlineLabelEnabled:(0,n.css)({color:c.colors.text.primary}),invalid:(0,n.css)({"input + label, input:checked + label, input:hover + label":{border:`1px solid ${c.colors.error.border}`}})}))},77514:(J,R,e)=>{"use strict";e.d(R,{W:()=>f});var n=e(41407),a=e(39953),l=e(68497),r=e(22784),o=e(77804),g=e(90201),m=e(64084),d=e(82803),u=e(64447);const i=(0,m.B)(c=>({container:(0,n.css)({height:"100%"}),tabContent:(0,n.css)({padding:c.spacing(2),backgroundColor:c.colors.background.primary,height:`calc(100% - ${c.components.menuTabs.height}px)`}),close:(0,n.css)({position:"absolute",right:"16px",top:"5px",cursor:"pointer",fontSize:c.typography.size.lg}),tabs:(0,n.css)({paddingTop:c.spacing(1),borderColor:c.colors.border.weak,ul:{marginLeft:c.spacing(2)}})}));function f(c){const[E,p]=(0,a.useState)(c.tabs.some(M=>M.value===c.defaultTab)?c.defaultTab:c.tabs?.[0].value),h=M=>{p(M.value)},{tabs:y,onClose:s,closeIconTooltip:v}=c,C=(0,d.l4)(),D=i(C);return a.createElement("div",{className:D.container},a.createElement(r.J,{className:D.tabs},y.map(M=>a.createElement(o.O,{key:M.value,label:M.label,active:M.value===E,onChangeTab:()=>h(M),icon:M.icon})),a.createElement(l.h,{className:D.close,onClick:s,name:"times",tooltip:v??"Close"})),a.createElement(u.$,{autoHeightMin:"100%"},a.createElement(g.I,{className:D.tabContent},y.find(M=>M.value===E)?.content)))}},13570:(J,R,e)=>{"use strict";e.d(R,{i:()=>m,c:()=>u});var n=e(39953),a=e(3181),l=e(28888),r=e(41407);const o=i=>{const f=(0,r.css)({width:"100%",listStyle:"none"}),c=(0,r.css)({width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"});return i.value&&!Array.isArray(i.value)?n.createElement("span",null,i.value):i.value&&Array.isArray(i.value)&&i.value.length>0?n.createElement("ul",{className:f},i.value.map((E,p)=>{const h=Object.keys(E)[0];return n.createElement("li",{className:c,key:p},n.createElement("span",null,h),n.createElement("span",null,E[h]))})):g},g=()=>n.createElement("span",null,"\xA0");function m(i){const{totalColumnsWidth:f,footerGroups:c,isPaginationVisible:E,tableStyles:p}=i,h=l.wl.components.Panels.Visualization.Table;return n.createElement("div",{style:{position:E?"relative":"absolute",width:f?`${f}px`:"100%",bottom:"0px"}},c.map(y=>{const{key:s,...v}=y.getFooterGroupProps();return n.createElement("div",{className:p.tfoot,...v,key:s,"data-testid":h.footer},y.headers.map(C=>d(C,p)))}))}function d(i,f){const c=i.getHeaderProps();return c?(c.style=c.style??{},c.style.position="absolute",c.style.justifyContent=i.justifyContent,n.createElement("div",{className:f.headerCell,...c},i.render("Footer"))):null}function u(i,f,c){if(f===void 0)return g;if(c){if(f[i]===void 0)return g;const E=a.TB.get(a.gz.count).name;return o({value:[{[E]:String(f[i])}]})}return o({value:f[i]})}},80857:(J,R,e)=>{"use strict";e.d(R,{A:()=>c,U:()=>f});var n=e(39953),a=e(10124),l=e(53305),r=e(89591),o=e(34547),g=e(82803),m=e(76297),d=e(6430),u=e(52542),i=e(900);const f={type:o.h2.Sparkline,drawStyle:o.l8.Line,lineInterpolation:o.KC.Smooth,lineWidth:1,fillOpacity:17,gradientMode:o.FI.Hue,pointSize:2,barAlignment:o.pu.Center,showPoints:o.Jp.Never,hideValue:!1},c=h=>{const{field:y,innerWidth:s,tableStyles:v,cell:C,cellProps:D,timeRange:M}=h,P=E(C.value),x=(0,g.l4)();if(!P)return n.createElement("div",{...D,className:v.cellContainer},y.config.noValue||"no data");P.x&&!P.x.config.interval&&P.x.values.length>1&&(P.x.config.interval=P.x.values[1]-P.x.values[0]),P.y.values=P.y.values.map(b=>Number.isFinite(b)?b:null);const S=(0,a.dz)(P.y);P.y.config.min=S.min,P.y.config.max=S.max,P.y.state={range:S},P.timeRange=M;const I=p(y),T={color:y.config.color,custom:{...f,...I}},O=y.config.custom?.cellOptions?.hideValue;let A=0,B=null;if(!O){const b=(0,l.z4)(C.value)?C.value.value:null,W=y.display(b),V=(0,i.f2)(y,W,C.row.index);A=(0,m.X1)(`${V.prefix??""}${V.text}${V.suffix??""}`,16).width+x.spacing.gridSize,B=n.createElement(d.W,{style:{width:`${A-x.spacing.gridSize}px`,textAlign:"right",marginRight:x.spacing(1)},value:W})}return n.createElement("div",{...D,className:v.cellContainer},B,n.createElement("div",null,n.createElement(u.b,{width:s-A,height:v.cellHeightInner,sparkline:P,config:T,theme:v.theme})))};function E(h){if(Array.isArray(h))return{y:{name:"test",type:r.fS.number,values:h,config:{}}};if((0,l.aY)(h)){const y=h.fields.find(v=>v.type===r.fS.time),s=h.fields.find(v=>v.type===r.fS.number);if(y&&s)return{x:y,y:s}}}function p(h){let y=(0,i.S_)(h);if(y.type===o.h2.Auto&&(y={...y,type:o.h2.Sparkline}),y.type===o.h2.Sparkline)return y;throw new Error(`Expected options type ${o.h2.Sparkline} but got ${y.type}`)}},23968:(J,R,e)=>{"use strict";e.d(R,{i:()=>oe});var n=e(41407),a=e(39953),l=e(41655),r=e(68084),o=e(3181),g=e(89591),m=e(28888),d=e(34547),u=e(82803),i=e(64447),f=e(39017),c=e(900);function E({tableStyles:te,nestedData:fe,rowIndex:Te,width:ge,cellHeight:he}){const me=fe.values,ye=[],ue=(0,u.l4)(),Oe=(0,u.wW)(p);let Ue=te.rowHeight+ue.spacing.gridSize;return me[Te].forEach((at,Ne)=>{const _e=!!at.meta?.custom?.noHeader,Ke=te.rowHeight*(at.length+(_e?0:1)),et={height:Ke,paddingLeft:c.bc,position:"absolute",top:Ue};Ue+=Ke+ue.spacing.gridSize,ye.push(a.createElement("div",{style:et,key:`subTable_${Te}_${Ne}`},a.createElement(oe,{data:at,width:ge-c.bc,height:te.rowHeight*(at.length+1),noHeader:_e,cellHeight:he})))}),a.createElement("div",{className:Oe.subTables},ye)}const p=te=>({subTables:(0,n.css)({"&:before":{content:'""',position:"absolute",width:"1px",top:te.spacing(5),left:te.spacing(1),bottom:te.spacing(2),background:te.colors.border.medium}})});function h(te,fe,Te){return te.values[fe].reduce((me,ye)=>{if(ye.length){const ue=!!ye.meta?.custom?.noHeader;return me+Te.rowHeight*(ye.length+(ue?0:1))+8}return me},Te.rowHeight)??Te.rowHeight}var y=e(13570),s=e(72305),v=e(12190),C=e(55407),D=e(846),M=e(12223),P=e(36495),x=e(68497),S=e(4919),I=e(41245),T=e(13026),O=e(64084);const A=28,B=A*5,b=({options:te,values:fe,caseSensitive:Te,onChange:ge})=>{const he=(0,u.l4)(),me=W(he),[ye,ue]=(0,a.useState)(""),Oe=(0,a.useMemo)(()=>new RegExp(ye,Te?void 0:"i"),[ye,Te]),Ue=(0,a.useMemo)(()=>te.filter(et=>et.label===void 0?!1:Oe.test(et.label)),[te,Oe]),at=he.spacing.gridSize,Ne=(0,a.useMemo)(()=>Math.min(Ue.length*A,B)+at,[at,Ue.length]),_e=(0,a.useCallback)(et=>{ue(et)},[ue]),Ke=(0,a.useCallback)(et=>ze=>{const je=ze.currentTarget.checked?fe.concat(et):fe.filter(Qe=>Qe.value!==et.value);ge(je)},[ge,fe]);return a.createElement(M.wc,{spacing:"md"},a.createElement(I.H,{placeholder:"Filter values",onChange:_e,value:ye}),!Ue.length&&a.createElement(P._,null,"No values"),Ue.length&&a.createElement(r.t7,{height:Ne,itemCount:Ue.length,itemSize:A,width:"100%",className:me.filterList},({index:et,style:ze})=>{const je=Ue[et],{value:Qe,label:We}=je,ke=fe.find(ot=>ot.value===Qe)!==void 0;return a.createElement("div",{className:me.filterListRow,style:ze,title:We},a.createElement(T.X,{value:ke,label:We,onChange:Ke(je)}))}))},W=(0,O.B)(te=>({filterList:(0,n.css)({label:"filterList"}),filterListRow:(0,n.css)({label:"filterListRow",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:te.spacing(.5),":hover":{backgroundColor:te.colors.action.hover}})})),V=({column:{preFilteredRows:te,filterValue:fe,setFilter:Te},onClose:ge,field:he})=>{const me=(0,u.l4)(),ye=(0,a.useMemo)(()=>(0,c.AF)(te,he),[te,he]),ue=(0,a.useMemo)(()=>(0,c.mP)(ye),[ye]),Oe=(0,a.useMemo)(()=>(0,c.n0)(ue,fe),[ue,fe]),[Ue,at]=(0,a.useState)(Oe),[Ne,_e]=(0,a.useState)(!1),Ke=(0,a.useCallback)(We=>ge(),[ge]),et=(0,a.useCallback)(We=>{const ke=Ue.length?Ue:void 0;Te(ke),ge()},[Te,Ue,ge]),ze=(0,a.useCallback)(We=>{Te(void 0),ge()},[Te,ge]),je=(0,a.useMemo)(()=>fe!==void 0,[fe]),Qe=(0,u.wW)(w);return a.createElement(D.L,{onClick:Ke,useCapture:!0},a.createElement("div",{className:(0,n.cx)(Qe.filterContainer),onClick:K},a.createElement(M.wc,{spacing:"lg"},a.createElement(M.wc,{spacing:"xs"},a.createElement(M.Lh,{justify:"space-between",align:"center"},a.createElement(P._,{className:Qe.label},"Filter by values:"),a.createElement(x.h,{name:"text-fields",tooltip:"Match case",style:{color:Ne?me.colors.text.link:me.colors.text.disabled},onClick:()=>{_e(We=>!We)}})),a.createElement("div",{className:(0,n.cx)(Qe.listDivider)}),a.createElement(b,{onChange:at,values:Ue,options:ue,caseSensitive:Ne})),a.createElement(M.Lh,{spacing:"lg"},a.createElement(M.Lh,null,a.createElement(S.zx,{size:"sm",onClick:et},"Ok"),a.createElement(S.zx,{size:"sm",variant:"secondary",onClick:Ke},"Cancel")),je&&a.createElement(M.Lh,null,a.createElement(S.zx,{fill:"text",size:"sm",onClick:ze},"Clear filter"))))))},w=te=>({filterContainer:(0,n.css)({label:"filterContainer",width:"100%",minWidth:"250px",height:"100%",maxHeight:"400px",backgroundColor:te.colors.background.primary,border:`1px solid ${te.colors.border.weak}`,padding:te.spacing(2),margin:te.spacing(1,0),boxShadow:te.shadows.z3,borderRadius:te.shape.radius.default}),listDivider:(0,n.css)({label:"listDivider",width:"100%",borderTop:`1px solid ${te.colors.border.medium}`,padding:te.spacing(.5,2)}),label:(0,n.css)({marginBottom:0})}),K=te=>{te.stopPropagation()},z=({column:te,field:fe,tableStyles:Te})=>{const ge=(0,a.useRef)(null),[he,me]=(0,a.useState)(!1),ye=(0,u.wW)(G),ue=(0,a.useMemo)(()=>!!te.filterValue,[te.filterValue]),Oe=(0,a.useCallback)(()=>me(!0),[me]),Ue=(0,a.useCallback)(()=>me(!1),[me]);return!fe||!fe.config.custom?.filterable?null:a.createElement("button",{className:(0,n.cx)(Te.headerFilter,ue?ye.filterIconEnabled:ye.filterIconDisabled),ref:ge,type:"button",onClick:Oe},a.createElement(v.J,{name:"filter"}),he&&ge.current&&a.createElement(C.J,{content:a.createElement(V,{column:te,tableStyles:Te,field:fe,onClose:Ue}),placement:"bottom-start",referenceElement:ge.current,show:!0}))},G=te=>({filterIconEnabled:(0,n.css)({label:"filterIconEnabled",color:te.colors.primary.text}),filterIconDisabled:(0,n.css)({label:"filterIconDisabled",color:te.colors.text.disabled})}),Q=te=>{const{headerGroups:fe,showTypeIcons:Te,tableStyles:ge}=te,he=m.wl.components.Panels.Visualization.Table;return a.createElement("div",{role:"rowgroup",className:ge.headerRow},fe.map(me=>{const{key:ye,...ue}=me.getHeaderGroupProps();return a.createElement("div",{className:ge.thead,...ue,key:ye,"aria-label":he.header,role:"row"},me.headers.map((Oe,Ue)=>j(Oe,ge,Te)))}))};function j(te,fe,Te){const ge=te.getHeaderProps(),he=te.field??null;return te.canResize&&(ge.style.userSelect=te.isResizing?"none":"auto"),ge.style.position="absolute",ge.style.justifyContent=te.justifyContent,a.createElement("div",{className:fe.headerCell,...ge,role:"columnheader"},te.canSort&&a.createElement(a.Fragment,null,a.createElement("button",{...te.getSortByToggleProps(),className:fe.headerCellLabel},Te&&a.createElement(v.J,{name:(0,s.e7)(he),title:he?.type,size:"sm",className:fe.typeIcon}),a.createElement("div",null,te.render("Header")),te.isSorted&&(te.isSortedDesc?a.createElement(v.J,{size:"lg",name:"arrow-down",className:fe.sortIcon}):a.createElement(v.J,{name:"arrow-up",size:"lg",className:fe.sortIcon}))),te.canFilter&&a.createElement(z,{column:te,tableStyles:fe,field:he})),!te.canSort&&te.render("Header"),!te.canSort&&te.canFilter&&a.createElement(z,{column:te,tableStyles:fe,field:he}),te.canResize&&a.createElement("div",{...te.getResizerProps(),className:fe.resizeHandle}))}var F=e(13640);function k(te,fe){(0,a.useEffect)(()=>{if(te.current&&fe.current){const Te=te.current.querySelector(".track-vertical"),ge=fe.current.firstChild;ge&&Te&&(Te.remove(),ge instanceof HTMLElement&&(ge.querySelector(":scope > .track-vertical")?.remove(),ge.append(Te)))}})}function _(te,fe,Te){(0,a.useEffect)(()=>{if(te.lastExpandedIndex!==void 0){let ge=te.lastExpandedIndex;const he=Object.keys(te.expanded);if(he.length>0){const ye=parseInt(he[0],10);isNaN(ye)||(ge=Math.min(ge,ye))}const me=te.pageIndex===0?ge-1:ge-te.pageIndex-te.pageIndex*te.pageSize;fe.current?.resetAfterIndex(Math.max(me,0));return}},[te.lastExpandedIndex,te.toggleRowExpandedCounter,te.pageIndex,te.pageSize,fe,Te,te.expanded])}var Y=e(69330);function Z({onColumnResize:te,onSortByChange:fe,data:Te}){return(0,a.useCallback)((ge,he)=>{switch(he.type){case"columnDoneResizing":if(te){const ye=ge.columnResizing.headerIdWidths[0][0],ue=parseInt(ye,10),Oe=Math.round(ge.columnResizing.columnWidths[ye]),Ue=Te.fields[ue];if(!Ue)return ge;const at=(0,Y.CZ)(Ue,Te);te(at,Oe)}case"toggleSortBy":if(fe){const me=[];for(const ye of ge.sortBy){const ue=Te.fields[parseInt(ye.id,10)];ue&&me.push({displayName:(0,Y.CZ)(ue,Te),desc:ye.desc})}fe(me)}case"toggleRowExpanded":if(he.id)return{...ge,lastExpandedIndex:parseInt(he.id,10),toggleRowExpandedCounter:ge.toggleRowExpandedCounter+1}}return ge},[Te,te,fe])}function ae(te,fe){const Te={toggleRowExpandedCounter:0};if(te){Te.sortBy=[];for(const ge of te)for(const he of fe)he.Header===ge.displayName&&Te.sortBy.push({id:he.id,desc:ge.desc})}return Te}var ce=e(79578);const q=150,De=36,oe=(0,a.memo)(te=>{const{ariaLabel:fe,data:Te,height:ge,onCellFilterAdded:he,width:me,columnMinWidth:ye=q,noHeader:ue,resizable:Oe=!0,initialSortBy:Ue,footerOptions:at,showTypeIcons:Ne,footerValues:_e,enablePagination:Ke,cellHeight:et=d.Ss.Sm,timeRange:ze}=te,je=(0,a.useRef)(null),Qe=(0,a.useRef)(null),We=(0,a.useRef)(null),ke=(0,u.l4)(),ot=(0,ce.p)(ke,et),lt=ue?0:ot.rowHeight,[Ct,wt]=(0,a.useState)(_e),Lt=(0,a.useMemo)(()=>{const on=De;let qt=0;if(!Ct)return 0;for(const pn of Ct)Array.isArray(pn)&&pn.length>qt&&(qt=pn.length);return qt>1?on*qt:on},[Ct]),Ye=(0,a.useMemo)(()=>Te.fields.length?Array(Te.length).fill(0):[],[Te]),Be=!!(at?.countRows&&at.reducer&&at.reducer.length&&at.reducer[0]===o.gz.count),Le=Te.fields.find(on=>on.type===g.fS.nestedFrames),le=Le!==void 0,de=(0,a.useMemo)(()=>(0,c.Pu)(Te,me,ye,le,Ct,Be),[Te,me,ye,Ct,le,Be]),X=(0,a.useRef)(),se=Z({...te,onSortByChange:on=>{X.current(!1),te.onSortByChange&&te.onSortByChange(on)}}),re=(0,a.useMemo)(()=>({columns:de,data:Ye,disableResizing:!Oe,stateReducer:se,autoResetPage:!1,initialState:ae(Ue,de),autoResetFilters:!1,sortTypes:{number:c.QT,"alphanumeric-insensitive":c.nl}}),[Ue,de,Ye,Oe,se]),{getTableProps:pe,headerGroups:be,footerGroups:xe,rows:Pe,prepareRow:we,totalColumnsWidth:Fe,page:He,state:Xe,gotoPage:dt,setPageSize:ct,pageOptions:At,toggleAllRowsExpanded:Ie}=(0,l.useTable)(re,l.useFilters,l.useSortBy,l.useAbsoluteLayout,l.useResizeColumns,l.useExpanded,l.usePagination),Ze=Xe;X.current=Ie;const ut=JSON.stringify(Object.keys(Xe.expanded));(0,a.useEffect)(()=>{je.current?.resetAfterIndex(0)},[ut]),(0,a.useEffect)(()=>{at||wt(_e)},[_e,at]),(0,a.useEffect)(()=>{if(!at)return;if(!at.show){wt(void 0);return}if(Be){const qt=[];qt[0]=be[0]?.headers[0]?.filteredRows.length.toString()??Te.length.toString(),wt(qt);return}const on=(0,c.jB)(be[0].headers,(0,c.KF)(Pe),at,ke);wt(on)},[at,ke,Xe.filters,Te]);let rt=ge-(lt+Lt);Ke&&(rt-=ot.cellHeight);const St=Math.round(rt/ot.rowHeight)-1;(0,a.useEffect)(()=>{St<=0||ct(St)},[St,ct]),_(Ze,je,Te),k(We,Qe);const st=(0,a.useCallback)(on=>Xe.pageIndex*Xe.pageSize+on,[Xe.pageIndex,Xe.pageSize]),tt=(0,a.useCallback)(({index:on,style:qt})=>{const pn=st(on),Cn=Pe[pn];we(Cn);const Rt=Xe.expanded[Cn.index]?(0,n.css)({"&:hover":{background:"inherit"}}):{};return a.createElement("div",{...Cn.getRowProps({style:qt}),className:(0,n.cx)(ot.row,Rt)},Le&&Xe.expanded[Cn.index]&&a.createElement(E,{nestedData:Le,tableStyles:ot,rowIndex:on,width:me,cellHeight:et}),Cn.cells.map((mt,xt)=>a.createElement(F.p,{key:xt,tableStyles:ot,cell:mt,onCellFilterAdded:he,columnIndex:xt,columnCount:Cn.cells.length,timeRange:ze,frame:Te})))},[st,Pe,we,Xe.expanded,ot,Le,me,et,he,ze,Te]),ft=(0,a.useCallback)(on=>{dt(on-1)},[dt]),$t=Ke?He.length:Pe.length;let Ht=null;if(Ke){const on=Xe.pageIndex*Xe.pageSize+1;let qt=on+Xe.pageSize-1;const pn=me<550;qt>Te.length&&(qt=Te.length),Ht=a.createElement("div",{className:ot.paginationWrapper},a.createElement(f.t,{currentPage:Xe.pageIndex+1,numberOfPages:At.length,showSmallVersion:pn,onNavigate:ft}),pn?null:a.createElement("div",{className:ot.paginationSummary},on," - ",qt," of ",Te.length," rows"))}const Zt=on=>{const qt=st(on),pn=Pe[qt];return Xe.expanded[pn.index]&&Le?h(Le,on,ot):ot.rowHeight},tn=on=>{const{scrollTop:qt}=on.currentTarget;je.current!==null&&je.current.scrollTo(qt)};return a.createElement("div",{...pe(),className:ot.table,"aria-label":fe,role:"table",ref:Qe,style:{width:me,height:ge}},a.createElement(i.$,{hideVerticalTrack:!0},a.createElement("div",{className:ot.tableContentWrapper(Fe)},!ue&&a.createElement(Q,{headerGroups:be,showTypeIcons:Ne,tableStyles:ot}),$t>0?a.createElement("div",{"data-testid":m.wl.components.Panels.Visualization.Table.body,ref:We},a.createElement(i.$,{onScroll:tn,hideHorizontalTrack:!0},a.createElement(r.S_,{key:ot.rowHeight+Xe.pageIndex,height:rt,itemCount:$t,itemSize:Zt,width:"100%",ref:je,style:{overflow:void 0}},tt))):a.createElement("div",{style:{height:ge-lt},className:ot.noData},"No data"),Ct&&a.createElement(y.i,{isPaginationVisible:!!Ke,footerValues:Ct,footerGroups:xe,totalColumnsWidth:Fe,tableStyles:ot}))),Ht)});oe.displayName="Table"},13640:(J,R,e)=>{"use strict";e.d(R,{p:()=>a});var n=e(39953);const a=({cell:l,tableStyles:r,onCellFilterAdded:o,timeRange:g,userProps:m,frame:d})=>{const u=l.getCellProps(),i=l.column.field;if(!i?.display)return null;u.style&&(u.style.minWidth=u.style.width,u.style.justifyContent=l.column.justifyContent);let f=(typeof l.column.width=="number"?l.column.width:24)-r.cellPadding*2;return n.createElement(n.Fragment,null,l.render("Cell",{field:i,tableStyles:r,onCellFilterAdded:o,cellProps:u,innerWidth:f,timeRange:g,userProps:m,frame:d}))}},79578:(J,R,e)=>{"use strict";e.d(R,{p:()=>a});var n=e(41407);function a(r,o){const g=r.colors.border.weak,m=r.colors.primary.border,d=6,u=l(r,o,d),i=u+2,f=28,c=(E,p,h)=>(0,n.css)({label:h?"cellContainerOverflow":"cellContainerNoOverflow",padding:`${d}px`,width:"100%",height:`${i-1}px`,display:"flex",alignItems:"center",borderRight:`1px solid ${g}`,color:E??void 0,background:p??void 0,backgroundClip:"padding-box","&:last-child:not(:only-child)":{borderRight:"none"},"&:hover":{overflow:h?"visible":void 0,width:h?"auto !important":void 0,boxShadow:h?`0 0 2px ${r.colors.primary.main}`:void 0,background:h?p??r.components.table.rowHoverBackground:void 0,zIndex:h?1:void 0,".cellActions":{visibility:"visible",opacity:1,width:"auto"}},a:{color:"inherit"},".cellActions":{display:"flex",position:h?void 0:"absolute",top:h?void 0:0,right:h?void 0:0,margin:h?r.spacing(0,-.5,0,.5):"auto",visibility:"hidden",opacity:0,width:0,alignItems:"center",height:"100%",padding:r.spacing(1,.5,1,.5),background:p?"none":r.colors.emphasize(r.colors.background.primary,.03),svg:{color:E}},".cellActionsLeft":{right:"auto !important",left:0},".cellActionsTransparent":{background:"none"}});return{theme:r,cellHeight:u,buildCellContainerStyle:c,cellPadding:d,cellHeightInner:u-d*2,rowHeight:i,table:(0,n.css)({height:"100%",width:"100%",overflow:"auto",display:"flex",flexDirection:"column"}),thead:(0,n.css)({label:"thead",height:`${f}px`,overflowY:"auto",overflowX:"hidden",position:"relative"}),tfoot:(0,n.css)({label:"tfoot",height:`${f}px`,borderTop:`1px solid ${g}`,overflowY:"auto",overflowX:"hidden",position:"relative"}),headerRow:(0,n.css)({label:"row",borderBottom:`1px solid ${g}`}),headerCell:(0,n.css)({height:"100%",padding:`0 ${d}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",fontWeight:r.typography.fontWeightMedium,"&:last-child":{borderRight:"none"}}),headerCellLabel:(0,n.css)({border:"none",padding:0,background:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:r.typography.fontWeightMedium,display:"flex",alignItems:"center",marginRight:r.spacing(.5),"&:hover":{textDecoration:"underline",color:r.colors.text.link}}),cellContainer:c(void 0,void 0,!0),cellContainerNoOverflow:c(void 0,void 0,!1),cellText:(0,n.css)({overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}),sortIcon:(0,n.css)({marginLeft:r.spacing(.5)}),cellLink:(0,n.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",color:r.colors.text.link,fontWeight:r.typography.fontWeightMedium,"&:hover":{textDecoration:"underline",color:r.colors.text.link}}),cellLinkForColoredCell:(0,n.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",fontWeight:r.typography.fontWeightMedium,textDecoration:"underline"}),imageCellLink:(0,n.css)({cursor:"pointer",overflow:"hidden",height:"100%"}),headerFilter:(0,n.css)({background:"transparent",border:"none",label:"headerFilter",padding:0}),paginationWrapper:(0,n.css)({display:"flex",height:`${u}px`,justifyContent:"center",alignItems:"center",width:"100%",li:{marginBottom:0}}),paginationSummary:(0,n.css)({color:r.colors.text.secondary,fontSize:r.typography.bodySmall.fontSize,display:"flex",justifyContent:"flex-end",padding:r.spacing(0,1,0,2)}),tableContentWrapper:E=>{const p=E!==void 0?`${E}px`:"100%";return(0,n.css)({label:"tableContentWrapper",width:p,display:"flex",flexDirection:"column"})},row:(0,n.css)({label:"row",borderBottom:`1px solid ${g}`,"&:hover":{backgroundColor:r.components.table.rowHoverBackground},"&:last-child":{borderBottom:0}}),imageCell:(0,n.css)({height:"100%"}),resizeHandle:(0,n.css)({label:"resizeHandle",cursor:"col-resize !important",display:"inline-block",background:m,opacity:0,transition:"opacity 0.2s ease-in-out",width:"8px",height:"100%",position:"absolute",right:"-4px",borderRadius:r.shape.radius.default,top:0,touchAction:"none","&:hover":{opacity:1}}),typeIcon:(0,n.css)({marginRight:r.spacing(1),color:r.colors.text.secondary}),noData:(0,n.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%"}),expanderCell:(0,n.css)({display:"flex",flexDirection:"column",justifyContent:"center",height:`${i}px`,cursor:"pointer"})}}function l(r,o,g){const m=r.typography.fontSize,d=r.typography.body.lineHeight;switch(o){case"md":return 42;case"lg":return 48;case"sm":default:return g*2+m*d}}},87320:(J,R,e)=>{"use strict";e.d(R,{PT:()=>n,tE:()=>a});const n="=",a="!="},900:(J,R,e)=>{"use strict";e.d(R,{bc:()=>q,AF:()=>Te,KF:()=>_e,f2:()=>Qe,S_:()=>et,Pu:()=>oe,n0:()=>ye,jB:()=>at,E4:()=>De,q7:()=>ze,nl:()=>ue,QT:()=>Oe,mP:()=>he});var n=e(86832),a=e(80172),l=e.n(a),r=e(89591),o=e(69330),g=e(53305),m=e(65038),d=e(83502),u=e(3181),i=e(94123),f=e(34547),c=e(39953),E=e(60695),p=e(10124),h=e(64943),y=e(24300),s=e(22785);const v={mode:E.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},C=We=>{const{field:ke,innerWidth:ot,tableStyles:lt,cell:Ct,cellProps:wt,row:Lt}=We,Ye=ke.display(Ct.value),Be=et(ke);let Le=(0,p.xD)(ke,!1);Le.thresholds||(Le={...Le,thresholds:v});let le=f.QH.Gradient,de;Be.type===f.h2.Gauge&&(le=Be.mode??f.QH.Gradient,de=Be.valueDisplayMode!==void 0?Be.valueDisplayMode:f.M8.Text);const X=()=>(0,n.isFunction)(ke.getLinks)?ke.getLinks({valueRowIndex:Lt.index}):[],se=!!X().length,re=Qe(ke,Ye,Ct.row.index),pe=be=>{const{openMenu:xe,targetClassName:Pe}=be;return c.createElement(y.xf,{width:ot,height:lt.cellHeightInner,field:Le,display:ke.display,text:{valueSize:14},value:Ye,orientation:h.wm.Horizontal,theme:lt.theme,alignmentFactors:re,onClick:xe,className:Pe,itemSpacing:1,lcdCellWidth:8,displayMode:le,valueDisplayMode:de})};return c.createElement("div",{...wt,className:lt.cellContainer},se&&c.createElement(s.V,{links:X,style:{display:"flex",width:"100%"}},be=>pe(be)),!se&&pe({}))};var D=e(41407),M=e(63374),P=e(82803),x=e(3274),S=e(14312),I=e(4919),T=e(68497),O=e(12223),A=e(36210),B=e(73075),b=e(84541);function W({value:We,onDismiss:ke,mode:ot}){let lt=We;if((0,n.isString)(We))try{We=JSON.parse(We)}catch{}else lt=JSON.stringify(We,null," ");let Ct=lt;return ot==="code"&&(Ct=JSON.stringify(We,null," ")),c.createElement(B.u,{onDismiss:ke,isOpen:!0,title:"Inspect value"},ot==="code"?c.createElement(b.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(Ct&&Ct.length)>100,value:Ct,readOnly:!0}):c.createElement("pre",null,Ct),c.createElement(B.u.ButtonRow,null,c.createElement(A.m,{icon:"copy",getText:()=>Ct},"Copy to Clipboard")))}var V=e(87320);function w({field:We,cell:ke,previewMode:ot,showFilters:lt,onCellFilterAdded:Ct}){const[wt,Lt]=(0,c.useState)(!1),Ye=De(We)==="flex-end",Be=!!We.config.custom?.inspect,Le={size:"sm",tooltipPlacement:"top"},le=(0,c.useCallback)(X=>{Ct&&Ct({key:We.name,operator:V.PT,value:ke.value})},[ke,We,Ct]),de=(0,c.useCallback)(X=>{Ct&&Ct({key:We.name,operator:V.tE,value:ke.value})},[ke,We,Ct]);return c.createElement(c.Fragment,null,c.createElement("div",{className:`cellActions ${Ye?"cellActionsLeft":""}`},c.createElement(O.Lh,{spacing:"xs"},Be&&c.createElement(T.h,{name:"eye",tooltip:"Inspect value",onClick:()=>{Lt(!0)},...Le}),lt&&c.createElement(T.h,{name:"search-plus",onClick:le,tooltip:"Filter for value",...Le}),lt&&c.createElement(T.h,{name:"search-minus",onClick:de,tooltip:"Filter out value",...Le}))),wt&&c.createElement(W,{mode:ot,value:ke.value,onDismiss:()=>{Lt(!1)}}))}const K=We=>{const{field:ke,cell:ot,tableStyles:lt,row:Ct,cellProps:wt,frame:Lt}=We,Ye=!!ke.config.custom?.inspect,Be=ke.display(ot.value),Le=We.onCellFilterAdded&&ke.config.filterable,le=Le&&ot.value!==void 0||Ye,de=et(ke),X=z(lt,de,Be,Ye),se=!!(0,x.i)(ke,Ct)?.length,re=(0,P.wW)(I._7);let pe;if(de.type===f.h2.Custom){const be=de.cellComponent;pe=c.createElement(be,{field:ke,value:ot.value,rowIndex:Ct.index,frame:Lt})}else c.isValidElement(ot.value)?pe=ot.value:pe=(0,d.zc)(Be);return c.createElement("div",{...wt,className:X},!se&&c.createElement("div",{className:lt.cellText},pe),se&&c.createElement(s.V,{links:()=>(0,x.i)(ke,Ct)||[]},be=>be.openMenu?c.createElement("button",{className:(0,D.cx)(re,G(lt,de,be.targetClassName)),onClick:be.openMenu},pe):c.createElement("div",{className:G(lt,de,be.targetClassName)},pe)),le&&c.createElement(w,{...We,previewMode:"text",showFilters:Le}))};function z(We,ke,ot,lt=!1){const Ct=We.theme.isDark?1:-.7;let wt,Lt;if(ke.type===f.h2.ColorText)wt=ot.color;else if(ke.type===f.h2.ColorBackground){const Ye=ke.mode??f.v7.Gradient;if(Ye===f.v7.Basic)wt=(0,S.bM)(ot.color,We.theme.isDark),Lt=(0,M.Z)(ot.color).toRgbString();else if(Ye===f.v7.Gradient){const Be=(0,M.Z)(ot.color).darken(10*Ct).spin(5);wt=(0,S.bM)(ot.color,We.theme.isDark),Lt=`linear-gradient(120deg, ${Be.toRgbString()}, ${ot.color})`}}return wt!==void 0||Lt!==void 0?We.buildCellContainerStyle(wt,Lt,!lt):lt?We.cellContainerNoOverflow:We.cellContainer}function G(We,ke,ot){return ke.type===f.h2.Auto?(0,D.cx)(We.cellLink,ot):(0,D.cx)(We.cellLinkForColoredCell,ot)}var Q=e(13570),j=e(33268),F=e(86046);function k(We){const{cell:ke,tableStyles:ot,cellProps:lt}=We;let Ct="";return ke.value instanceof F.Z?Ct=new j.Z().writeGeometry(ke.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):ke.value!=null&&(Ct=`${ke.value}`),c.createElement("div",{...lt,className:ot.cellContainer},c.createElement("div",{className:ot.cellText,style:{fontFamily:"monospace"}},Ct))}const _=We=>{const{field:ke,cell:ot,tableStyles:lt,row:Ct,cellProps:wt}=We,Lt=ke.display(ot.value),Ye=!!(0,x.i)(ke,Ct)?.length,Be=(0,P.wW)(I._7);return c.createElement("div",{...wt,className:lt.cellContainer},!Ye&&c.createElement("img",{src:Lt.text,className:lt.imageCell,alt:""}),Ye&&c.createElement(s.V,{style:{height:"100%"},links:()=>(0,x.i)(ke,Ct)||[]},Le=>{const le=c.createElement("img",{src:Lt.text,className:lt.imageCell,alt:""});return Le.openMenu?c.createElement(I.zx,{className:(0,D.cx)(Be),onClick:Le.openMenu},le):le}))};function Y(We){const{cell:ke,tableStyles:ot,cellProps:lt,field:Ct,row:wt}=We,Lt=!!Ct.config.custom?.inspect,Ye=(0,D.css)({cursor:"pointer",fontFamily:"monospace"});let Be=ke.value,Le=Be;if((0,n.isString)(Be))try{Be=JSON.parse(Be)}catch{}else Le=JSON.stringify(Be,null," ");const le=!!(0,x.i)(Ct,wt)?.length,de=(0,P.wW)(I._7);return c.createElement("div",{...lt,className:Lt?ot.cellContainerNoOverflow:ot.cellContainer},c.createElement("div",{className:(0,D.cx)(ot.cellText,Ye)},!le&&c.createElement("div",{className:ot.cellText},Le),le&&c.createElement(s.V,{links:()=>(0,x.i)(Ct,wt)||[]},X=>X.openMenu?c.createElement(I.zx,{className:(0,D.cx)(de),onClick:X.openMenu},Le):c.createElement(c.Fragment,null,Le))),Lt&&c.createElement(w,{...We,previewMode:"code"}))}var Z=e(12190);function ae({row:We,tableStyles:ke}){return c.createElement("div",{className:ke.expanderCell,...We.getToggleRowExpandedProps()},c.createElement(Z.J,{"aria-label":We.isExpanded?"Collapse row":"Expand row",name:We.isExpanded?"angle-down":"angle-right",size:"lg"}))}var ce=e(80857);const q=50;function De(We){if(!We)return"flex-start";if(We.config.custom)switch(We.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return We.type===r.fS.number?"flex-end":"flex-start"}function oe(We,ke,ot,lt,Ct,wt){const Lt=[];let Ye=0;lt&&(Lt.push({Header:()=>null,id:"expander",Cell:ae,width:q,minWidth:q,filter:(Le,le,de)=>[],justifyContent:"left",field:We.fields[0],sortType:"basic"}),ke-=q);for(const[Le,le]of We.fields.entries()){const de=le.config.custom||{};if(de.hidden||le.type===r.fS.nestedFrames)continue;de.width?ke-=de.width:Ye++;const X=re=>{switch(re){case r.fS.number:case r.fS.frame:return"number";case r.fS.time:return"basic";default:return"alphanumeric-insensitive"}},se=te(de.cellOptions?.type,le);Lt.push({Cell:se,id:Le.toString(),field:le,Header:de.hideHeader?"":(0,o.CZ)(le,We),accessor:(re,pe)=>le.values[pe],sortType:X(le.type),width:de.width,minWidth:de.minWidth??ot,filter:l()(fe(le)),justifyContent:De(le),Footer:(0,Q.c)(Le,Ct,wt)})}let Be=ke/Ye;for(let Le=Ye;Le>0;Le--)for(const le of Lt)!le.width&&le.minWidth>Be&&(le.width=le.minWidth,ke-=le.width,Ye-=1,Be=ke/Ye);for(const Le of Lt)Le.width||(Le.width=Be),Le.minWidth=50;return Lt}function te(We,ke){switch(We){case f.h2.Custom:case f.h2.ColorText:case f.h2.ColorBackground:return K;case f.h2.Image:return _;case f.h2.Gauge:return C;case f.h2.Sparkline:return ce.A;case f.h2.JSONView:return Y}if(ke.type===r.fS.geo)return k;if(ke.type===r.fS.frame){const ot=ke.values[0];return(0,g.aY)(ot)&&(0,m.pP)(ot)?ce.A:Y}return ke.type===r.fS.other?Y:K}function fe(We){return function(ke,ot,lt){return ke.length===0||!lt||!We?ke:ke.filter(Ct=>{if(!Ct.values.hasOwnProperty(ot))return!1;const wt=ge(Ct,We);return lt.find(Lt=>Lt.value===wt)!==void 0})}}function Te(We,ke){if(!ke||We.length===0)return{};const ot={};for(let lt=0;lt<We.length;lt++){const Ct=ge(We[lt],ke);ot[Ct||"(Blanks)"]=Ct}return ot}function ge(We,ke){if(!ke||!We)return"";const ot=ke.values[We.index],lt=ke.display?ke.display(ot):ot;return ke.display?(0,d.zc)(lt):lt}function he(We){return Object.keys(We).reduce((ke,ot)=>ke.concat({value:We[ot],label:ot}),[]).sort(me)}function me(We,ke){return We.label===void 0&&ke.label===void 0?0:We.label===void 0&&ke.label!==void 0?-1:We.label!==void 0&&ke.label===void 0?1:We.label<ke.label?-1:We.label>ke.label?1:0}function ye(We,ke){return ke?We.filter(ot=>ke.some(lt=>lt.value===ot.value)):[]}function ue(We,ke,ot){return String(We.values[ot]).localeCompare(String(ke.values[ot]),void 0,{sensitivity:"base"})}function Oe(We,ke,ot){const lt=Ue(We.values[ot]),Ct=Ue(ke.values[ot]);return lt===Ct?0:lt>Ct?1:-1}function Ue(We){return(0,g.z4)(We)?We.value??Number.NEGATIVE_INFINITY:We==null||We===""||isNaN(We)?Number.NEGATIVE_INFINITY:typeof We=="number"?We:Number(We)}function at(We,ke,ot,lt){return je(We),We.map((Ct,wt)=>{if(Ct?.field?.type!==r.fS.number)return wt===0&&ot.reducer&&ot.reducer.length>0?u.TB.get(ot.reducer[0]).name:void 0;let Lt=(0,n.clone)(Ct.field);return Lt.values=ke[Ct.id],Lt.state=void 0,Ct.field=Lt,ot.fields&&ot.fields.length>0?ot.fields.find(Be=>Be===Ct?.field?.name)?Ne(Ct.field,ot.reducer,lt):void 0:Ne(Ct.field,ot.reducer||[],lt)})}function Ne(We,ke,ot){const lt=We.display??(0,i.U)({field:We,theme:ot}),Ct=ke[0],wt=(0,u.Kx)({field:We,reducers:ke})[Ct];return(0,d.zc)(lt(wt))}function _e(We){const ke=[];for(const ot in We)for(const[lt,Ct]of Object.entries(We[ot].values))ke[lt]===void 0&&(ke[lt]=[]),ke[lt].push(Ct);return ke}const Ke={type:f.h2.Auto};function et(We){return We.config.custom?.displayMode?ze(We.config.custom?.displayMode):We.config.custom?.cellOptions?We.config.custom.cellOptions:Ke}function ze(We){switch(We){case"basic":case"gradient-gauge":case"lcd-gauge":let ke=f.QH.Basic;return We==="gradient-gauge"?ke=f.QH.Gradient:We==="lcd-gauge"&&(ke=f.QH.Lcd),{type:f.h2.Gauge,mode:ke};case"color-background":case"color-background-solid":let ot=f.v7.Basic;return We==="color-background"&&(ot=f.v7.Gradient),{type:f.h2.ColorBackground,mode:ot};default:return{type:We}}}function je(We){const ke=We.findIndex((ot,lt)=>ot?.id!==String(lt));ke===-1||We[ke]?.id==="expander"||(We.splice(ke,0,{id:String(ke)}),je(We))}function Qe(We,ke,ot){let lt=We.state?.alignmentFactors;if(lt)return lt.text.length<ke.text.length&&(lt.text=ke.text),lt;{lt={...ke};const Ct=Math.min(We.values.length,ot+1e3);for(let wt=ot+1;wt<Ct;wt++)We.display(We.values[wt]).text.length>lt.text.length&&(lt.text=ke.text);return We.state?We.state.alignmentFactors=lt:We.state={alignmentFactors:lt},lt}}},59158:(J,R,e)=>{"use strict";e.d(R,{w:()=>f});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(29710),g=e(82803),m=e(64084),d=e(12190),u=e(68421);class i extends r.PureComponent{constructor(p){super(p),this.readCSV=(0,a.debounce)(()=>{const{config:s}=this.props,{text:v}=this.state;this.setState({data:(0,o.uP)(v,{config:s})})},150),this.onTextChange=s=>{this.setState({text:s.target.value})};const{text:h,config:y}=p;this.state={text:h,data:(0,o.uP)(h,{config:y})}}componentDidUpdate(p,h){const{text:y}=this.state;(y!==h.text||this.props.config!==p.config)&&this.readCSV(),this.props.text!==p.text&&this.props.text!==y&&this.setState({text:this.props.text}),this.state.data!==h.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:p,height:h,theme:y}=this.props,{data:s}=this.state,v=c(y);return r.createElement("div",{className:v.tableInputCsv},r.createElement(u.K,{style:{width:p,height:h},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:v.textarea}),s&&r.createElement("footer",{className:v.footer},s.map((C,D)=>r.createElement("span",{key:D},"Rows:",C.length,", Columns:",C.fields.length," \xA0",r.createElement(d.J,{name:"check-circle"})))))}}const f=(0,g.HE)(i);f.displayName="TableInputCSV";const c=(0,m.B)(E=>({tableInputCsv:(0,n.css)({position:"relative"}),textarea:(0,n.css)({height:"100%",width:"100%"}),footer:(0,n.css)({position:"absolute",bottom:"15px",right:"15px",border:"1px solid #222",background:E.colors.success.main,padding:`1px ${E.spacing(.5)}`,fontSize:"80%"})}))},54951:(J,R,e)=>{"use strict";e.d(R,{A:()=>m});var n=e(41407),a=e(39953),l=e(83502),r=e(64084),o=e(82803);const g=(0,r.B)(d=>({counter:(0,n.css)({label:"counter",marginLeft:d.spacing(1),borderRadius:d.spacing(3),backgroundColor:d.colors.action.hover,padding:d.spacing(.25,1),color:d.colors.text.secondary,fontWeight:d.typography.fontWeightMedium,fontSize:d.typography.size.sm})})),m=({value:d})=>{const u=(0,o.wW)(g);return a.createElement("span",{className:u.counter},(0,l.SP)(d,0).text)}},77804:(J,R,e)=>{"use strict";e.d(R,{O:()=>d});var n=e(41407),a=e(39953),l=e(28888),r=e(82803),o=e(53039),g=e(12190),m=e(54951);const d=a.forwardRef(({label:i,active:f,icon:c,onChangeTab:E,counter:p,suffix:h,className:y,href:s,...v},C)=>{const D=(0,r.wW)(u),M=()=>a.createElement(a.Fragment,null,c&&a.createElement(g.J,{name:c}),i,typeof p=="number"&&a.createElement(m.A,{value:p}),h&&a.createElement(h,{className:D.suffix})),P=(0,n.cx)(D.link,f?D.activeStyle:D.notActive);return a.createElement("div",{className:D.item},a.createElement("a",{href:s||"#",className:P,...v,onClick:E,"aria-label":v["aria-label"]||l.wl.components.Tab.title(i),role:"tab","aria-selected":f,ref:C},M()))});d.displayName="Tab";const u=i=>({item:(0,n.css)({listStyle:"none",position:"relative",display:"flex",whiteSpace:"nowrap",padding:i.spacing(.5)}),link:(0,n.css)({color:i.colors.text.secondary,padding:i.spacing(1,1.5,.5),borderRadius:i.shape.radius.default,display:"block",height:"100%",svg:{marginRight:i.spacing(1)},"&:focus-visible":(0,o.getFocusStyles)(i),"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"4px",borderRadius:i.shape.radius.default,bottom:0}}),notActive:(0,n.css)({"a:hover, &:hover, &:focus":{color:i.colors.text.primary,"&::before":{backgroundColor:i.colors.action.hover}}}),activeStyle:(0,n.css)({label:"activeTabStyle",color:i.colors.text.primary,overflow:"hidden",a:{color:i.colors.text.primary},"&::before":{backgroundImage:i.colors.gradients.brandHorizontal}}),suffix:(0,n.css)({marginLeft:i.spacing(1)})})},90201:(J,R,e)=>{"use strict";e.d(R,{I:()=>g});var n=e(41407),a=e(39953),l=e(64084),r=e(82803);const o=(0,l.B)(m=>({tabContent:(0,n.css)({background:m.colors.background.primary})})),g=({children:m,className:d,...u})=>{const i=(0,r.l4)(),f=o(i);return a.createElement("div",{...u,className:(0,n.cx)(f.tabContent,d)},m)}},22784:(J,R,e)=>{"use strict";e.d(R,{J:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=a.forwardRef(({children:g,className:m,hideBorder:d=!1},u)=>{const i=(0,l.wW)(o);return a.createElement("div",{className:(0,n.cx)(i.tabsWrapper,d&&i.noBorder,m),ref:u},a.createElement("div",{className:i.tabs,role:"tablist"},g))}),o=g=>({tabsWrapper:(0,n.css)({borderBottom:`1px solid ${g.colors.border.weak}`,overflowX:"auto"}),noBorder:(0,n.css)({borderBottom:0}),tabs:(0,n.css)({position:"relative",display:"flex",height:`${g.components.menuTabs.height}px`,alignItems:"center"})});r.displayName="TabsBar"},4092:(J,R,e)=>{"use strict";e.d(R,{L:()=>m});var n=e(41407),a=e(39953),l=e(28888),r=e(82803),o=e(12190),g=e(54951);const m=a.forwardRef(({label:u,active:i,icon:f,counter:c,className:E,suffix:p,onChangeTab:h,href:y,...s},v)=>{const C=(0,r.wW)(d),D=()=>a.createElement(a.Fragment,null,f&&a.createElement(o.J,{name:f}),u,typeof c=="number"&&a.createElement(g.A,{value:c}),p&&a.createElement(p,{className:C.suffix})),M=(0,n.cx)(C.link,i&&C.activeStyle);return a.createElement("a",{href:y,className:M,...s,onClick:h,"aria-label":s["aria-label"]||l.wl.components.Tab.title(u),role:"tab","aria-selected":i,ref:v},D())});m.displayName="Tab";const d=u=>({link:(0,n.css)({padding:"6px 12px",display:"block",height:"100%",cursor:"pointer",position:"relative",color:u.colors.text.primary,svg:{marginRight:u.spacing(1)},"&:hover, &:focus":{textDecoration:"underline"}}),activeStyle:(0,n.css)({label:"activeTabStyle",color:u.colors.text.maxContrast,overflow:"hidden","&::before":{display:"block",content:'" "',position:"absolute",left:0,width:"4px",bottom:"2px",top:"2px",borderRadius:u.shape.radius.default,backgroundImage:"linear-gradient(0deg, #f05a28 30%, #fbca0a 99%)"}}),suffix:(0,n.css)({marginLeft:u.spacing(1)})})},51064:(J,R,e)=>{"use strict";e.d(R,{V:()=>u});var n=e(41407),a=e(39953),l=e(15166),r=e(82803),o=e(72899),g=e(12190);const m=(0,a.forwardRef)(({name:c,onClick:E,icon:p,className:h,colorIndex:y,...s},v)=>{const C=(0,r.l4)(),D=f(C,c,y),M=x=>{x.preventDefault(),x.stopPropagation(),E?.(c,x)},P=(0,n.cx)(D.wrapper,h,{[D.hover]:E!==void 0});return E?a.createElement("button",{...s,className:P,onClick:M,ref:v},p&&a.createElement(g.J,{name:p}),c):a.createElement("span",{...s,className:P,ref:v},p&&a.createElement(g.J,{name:p}),c)});m.displayName="Tag";const u=Object.assign(m,{Skeleton:()=>{const c=(0,r.wW)(i);return a.createElement(l.Z,{width:60,height:22,containerClassName:c.container})}}),i=()=>({container:(0,n.css)({lineHeight:1})}),f=(c,E,p)=>{let h;return p===void 0?h=(0,o.Bx)(E):h=(0,o.vm)(p),{wrapper:(0,n.css)({appearance:"none",borderStyle:"none",fontWeight:c.typography.fontWeightMedium,fontSize:c.typography.size.sm,lineHeight:c.typography.bodySmall.lineHeight,verticalAlign:"baseline",backgroundColor:h.color,color:c.v1.palette.gray98,whiteSpace:"nowrap",textShadow:"none",padding:"3px 6px",borderRadius:c.shape.radius.default}),hover:(0,n.css)({"&:hover":{opacity:.85,cursor:"pointer"}})}}},3532:(J,R,e)=>{"use strict";e.d(R,{P:()=>m});var n=e(41407),a=e(39953),l=e(82803),r=e(51064);const o=(0,a.memo)((0,a.forwardRef)(({displayMax:i,tags:f,icon:c,onClick:E,className:p,getAriaLabel:h,getColorIndex:y},s)=>{const v=(0,l.l4)(),C=u(v,!!(i&&i>0)),D=f.length,M=i?f.slice(0,i):f;return a.createElement("ul",{className:(0,n.cx)(C.wrapper,p),"aria-label":"Tags",ref:s},M.map((P,x)=>a.createElement("li",{className:C.li,key:P},a.createElement(r.V,{name:P,icon:c,onClick:E,"aria-label":h?.(P,x),"data-tag-id":x,colorIndex:y?.(P,x)}))),i&&i>0&&D-i>0&&a.createElement("span",{className:C.moreTagsLabel},"+ ",D-i))}));o.displayName="TagList";const m=Object.assign(o,{Skeleton:()=>{const i=(0,l.wW)(d);return a.createElement("div",{className:i.container},a.createElement(r.V.Skeleton,null),a.createElement(r.V.Skeleton,null))}}),d=i=>({container:(0,n.css)({display:"flex",gap:i.spacing(1)})}),u=(i,f)=>({wrapper:(0,n.css)({position:"relative",alignItems:f?"center":"unset",display:"flex",flex:"1 1 auto",flexWrap:"wrap",flexShrink:f?0:1,justifyContent:"flex-end",gap:"6px"}),moreTagsLabel:(0,n.css)({color:i.colors.text.secondary,fontSize:i.typography.size.sm}),li:(0,n.css)({listStyle:"none"})})},97250:(J,R,e)=>{"use strict";e.d(R,{B:()=>i});var n=e(41407),a=e(39953),l=e(82803),r=e(4919),o=e(38637),g=e(72899),m=e(68497);const d=({name:c,disabled:E,onRemove:p})=>{const{color:h,borderColor:y}=(0,a.useMemo)(()=>(0,g.Bx)(c),[c]),s=(0,l.wW)(u);return a.createElement("li",{className:s.itemStyle,style:{backgroundColor:h,borderColor:y}},a.createElement("span",{className:s.nameStyle},c),a.createElement(m.h,{name:"times",size:"lg",disabled:E,tooltip:`Remove "${c}" tag`,onClick:()=>p(c),className:s.buttonStyles}))},u=c=>{const E=c.spacing.gridSize*3;return{itemStyle:(0,n.css)({display:"flex",gap:"3px",alignItems:"center",height:`${E}px`,lineHeight:`${E-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:c.shape.radius.default,padding:`0 ${c.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:c.typography.size.sm}),nameStyle:(0,n.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,n.css)({margin:0,"&:hover::before":{display:"none"}})}},i=({placeholder:c="New tag (enter key to add)",tags:E=[],onChange:p,width:h,className:y,disabled:s,addOnBlur:v,invalid:C,id:D})=>{const[M,P]=(0,a.useState)(""),x=(0,l.wW)(f),S=(0,l.l4)(),I=(0,a.useCallback)(b=>{P(b.target.value)},[]),T=b=>{p(E.filter(W=>W!==b))},O=b=>{b?.preventDefault(),E.includes(M)||p(E.concat(M)),P("")},A=()=>{v&&M&&O()},B=b=>{b.key==="Enter"&&M!==""&&O(b)};return a.createElement("div",{className:(0,n.cx)(x.wrapper,y,h?(0,n.css)({width:S.spacing(h)}):"")},a.createElement(o.I,{id:D,disabled:s,placeholder:c,onChange:I,value:M,onKeyDown:B,onBlur:A,invalid:C,suffix:a.createElement(r.zx,{fill:"text",className:x.addButtonStyle,onClick:O,size:"md",disabled:M.length<=0},"Add")}),E?.length>0&&a.createElement("ul",{className:x.tags},E.map(b=>a.createElement(d,{key:b,name:b,onRemove:T,disabled:s}))))},f=c=>({wrapper:(0,n.css)({minHeight:c.spacing(4),display:"flex",flexDirection:"column",gap:c.spacing(1),flexWrap:"wrap"}),tags:(0,n.css)({display:"flex",justifyContent:"flex-start",flexWrap:"wrap",gap:c.spacing(.5)}),addButtonStyle:(0,n.css)({margin:`0 -${c.spacing(1)}`})})},98632:(J,R,e)=>{"use strict";e.d(R,{x:()=>m});var n=e(41407),a=e(39953),l=e(1614),r=e(82803),o=e(69865),g=e(77229);const m=a.forwardRef(({element:u="span",variant:i,weight:f,color:c,truncate:E,italic:p,textAlignment:h,children:y,...s},v)=>{const C=(0,r.wW)(d,u,i,c,f,E,p,h),[D,M]=(0,a.useState)(!1),P=(0,a.useRef)(null);(0,a.useImperativeHandle)(v,()=>P.current);const x=(0,a.createElement)(u,{...s,style:void 0,className:C,ref:D?void 0:P},y),S=(0,a.useMemo)(()=>new ResizeObserver(T=>{for(const O of T)O.target.clientWidth&&O.target.scrollWidth&&(O.target.scrollWidth>O.target.clientWidth&&M(!0),O.target.scrollWidth<=O.target.clientWidth&&M(!1))}),[]);(0,a.useEffect)(()=>{const{current:T}=P;return T&&E&&S.observe(T),()=>{S.disconnect()}},[D,S,E]);const I=T=>typeof T=="string"?T:l.renderToStaticMarkup(a.createElement(a.Fragment,null,T)).replace(/(<([^>]+)>)/gi,"");return E&&D&&u!=="span"?a.createElement(o.u,{ref:P,content:I(y)},x):x});m.displayName="Text";const d=(u,i,f,c,E,p,h,y)=>(0,n.css)([{margin:0,padding:0,...(0,g.jt)(u,i,f)},f&&{...u.typography[f]},c&&{color:(0,g.Jx)(c,u)},E&&{fontWeight:(0,g.RC)(E,u)},p&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},h&&{fontStyle:"italic"},y&&{textAlign:y}])},77229:(J,R,e)=>{"use strict";e.d(R,{Jx:()=>a,RC:()=>n,jt:()=>l});const n=(r,o)=>{switch(r){case"bold":return o.typography.fontWeightBold;case"medium":return o.typography.fontWeightMedium;case"light":return o.typography.fontWeightLight;case"regular":case void 0:return o.typography.fontWeightRegular}},a=(r,o)=>{switch(r){case"error":return o.colors.error.text;case"success":return o.colors.success.text;case"info":return o.colors.info.text;case"warning":return o.colors.warning.text;default:return r?o.colors.text[r]:void 0}},l=(r,o,g)=>{if(g)return r.typography[g];switch(o){case"span":return;case"h1":return r.typography.h1;case"h2":return r.typography.h2;case"h3":return r.typography.h3;case"h4":return r.typography.h4;case"h5":return r.typography.h5;case"h6":return r.typography.h6;default:return r.typography.body}}},68421:(J,R,e)=>{"use strict";e.d(R,{K:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(64084),o=e(15530);const g=a.forwardRef(({invalid:d,className:u,...i},f)=>{const c=(0,l.l4)(),E=m(c,d);return a.createElement("textarea",{...i,className:(0,n.cx)(E.textarea,u),ref:f})}),m=(0,r.B)((d,u=!1)=>({textarea:(0,n.cx)((0,o.RK)(d),(0,o.GL)(d),(0,n.css)({display:"block",borderRadius:d.shape.radius.default,padding:`${d.spacing.gridSize/4}px ${d.spacing.gridSize}px`,width:"100%",borderColor:u?d.colors.error.border:d.components.input.borderColor}))}));g.displayName="TextArea"},12569:(J,R,e)=>{"use strict";e.d(R,{p:()=>B});var n=e(39953),a=e(82803),l=e(42626),r=e(31276),o=e(98419),g=e(86832),m=e(79527),d=e(89591),u=e(83502),i=e(94123),f=e(73254),c=e(97898),E=e(69330),p=e(40793),h=e(36316),y=e(34547),s=e(76685),v=e(80115),C=e(44040),D=e(95966);const M=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),P=Array(53);for(let b=0;b<P.length;b++)P[b]=2**b;const x=(b,W=1)=>b==null?"-":b.toFixed(W),S={drawStyle:y.l8.Line,showPoints:y.Jp.Auto,axisPlacement:y.LB.Auto},I=({frame:b,theme:W,timeZones:V,getTimeRange:w,eventBus:K,sync:z,allFrames:G,renderers:Q,tweakScale:j=_=>_,tweakAxis:F=_=>_,eventsScope:k="__global_"})=>{const _=new v.U(V[0]);let Y;_.setPrepData(me=>(Y=me[0],(0,D.Bj)(me[0],_.getStackingGroups())));const Z=b.fields[0];if(!Z)return _;const ae="x";let ce="_x",q="";const De=Z.config.custom?.axisPlacement!==y.LB.Hidden?y.LB.Bottom:y.LB.Hidden,oe=Z.config.custom?.axisPlacement!==y.LB.Hidden;if(Z.type===d.fS.time){ce="time",_.addScale({scaleKey:ae,orientation:y.wN.Horizontal,direction:y.bQ.Right,isTime:!0,range:()=>{const ye=w();return[ye.from.valueOf(),ye.to.valueOf()]}});const me=V.length>1?(ye,ue)=>ue.map((Oe,Ue)=>Ue<2?null:Oe):void 0;for(let ye=0;ye<V.length;ye++){const ue=V[ye];_.addAxis({scaleKey:ae,isTime:!0,placement:De,show:oe,label:Z.config.custom?.axisLabel,timeZone:ue,theme:W,grid:{show:ye===0&&Z.config.custom?.axisGridShow},filter:me})}V.length>1&&_.addHook("drawAxes",ye=>{ye.ctx.save(),ye.ctx.fillStyle=W.colors.text.primary,ye.ctx.textAlign="left",ye.ctx.textBaseline="bottom";let ue=0;ye.axes.forEach(Oe=>{if(Oe.side===2){let Ue=Oe._pos+Oe._size;ye.ctx.fillText(V[ue],ye.bbox.left,Ue*m.Z.pxRatio),ue++}}),ye.ctx.restore()})}else Z.config.unit&&(ce=Z.config.unit),_.addScale({scaleKey:ae,orientation:y.wN.Horizontal,direction:y.bQ.Right,range:(me,ye,ue)=>[Z.config.min??ye,Z.config.max??ue]}),_.addAxis({scaleKey:ae,placement:De,show:oe,label:Z.config.custom?.axisLabel,theme:W,grid:{show:Z.config.custom?.axisGridShow},formatValue:(me,ye)=>(0,u.zc)(Z.display(me,ye))});let te=Q?.flatMap(me=>Object.values(me.fieldMap).filter(ye=>me.indicesOnly.indexOf(ye)===-1))??[],fe;for(let me=1;me<b.fields.length;me++){const ye=b.fields[me],ue={...ye.config,custom:{...S,...ye.config.custom}},Oe=ue.custom;if(ye===Z||ye.type!==d.fS.number&&ye.type!==d.fS.enum)continue;let Ue=ye.display??x;ye.config.custom?.stacking?.mode===y.o0.Percent&&(Ue=(0,i.U)({field:{...ye,config:{...ye.config,unit:"percentunit"}},theme:W}));const at=(0,s.z1)(ue,ye.type),Ne=(0,f.fD)(ye),Ke=(0,f.YO)(ye,W).color;if(_.addScale(j({scaleKey:at,orientation:y.wN.Vertical,direction:y.bQ.Up,distribution:Oe.scaleDistribution?.type,log:Oe.scaleDistribution?.log,linearThreshold:Oe.scaleDistribution?.linearThreshold,min:ye.config.min,max:ye.config.max,softMin:Oe.axisSoftMin,softMax:Oe.axisSoftMax,centeredZero:Oe.axisCenteredZero,range:Oe.stacking?.mode===y.o0.Percent?(ot,lt,Ct)=>(lt=lt<0?-1:0,Ct=Ct>0?1:0,[lt,Ct]):ye.type===d.fS.enum?(ot,lt,Ct)=>[-1,ye.config.type.enum.text.length]:void 0,decimals:ye.config.decimals},ye)),q||(q=at),Oe.axisPlacement!==y.LB.Hidden){let ot;Oe.axisColorMode===y.yK.Series&&(Ne.isByValue&&ye.config.custom?.gradientMode===y.FI.Scheme&&Ne.id===c.S.Thresholds?ot=(0,C.P2)(1,W,Ne,ye.config.thresholds):ot=Ke);const lt={border:{show:Oe.axisBorderShow||!1,width:1/devicePixelRatio,stroke:ot||W.colors.text.primary},ticks:{show:Oe.axisBorderShow||!1,stroke:ot||W.colors.text.primary},color:ot||W.colors.text.primary};let Ct,wt,Lt;if(M.has(ue.unit))Ct=P;else if(ye.type===d.fS.enum){let Ye=ye.config.type.enum.text;Lt=Ye.map((Be,Le)=>Le),wt=Ye}_.addAxis(F({scaleKey:at,label:Oe.axisLabel,size:Oe.axisWidth,placement:Oe.axisPlacement??y.LB.Auto,formatValue:(Ye,Be)=>(0,u.zc)(Ue(Ye,Be)),theme:W,grid:{show:Oe.axisGridShow},decimals:ye.config.decimals,distr:Oe.scaleDistribution?.type,splits:Lt,values:wt,incrs:Ct,...lt},ye))}const et=Oe.drawStyle===y.l8.Points?y.Jp.Always:Oe.showPoints;let ze=()=>null;Oe.spanNulls!==!0&&(ze=(ot,lt,Ct,wt)=>{let Lt=[],Ye=ot.series[lt];if(!Ct&&wt&&wt.length){const[Be,Le]=Ye.idxs,le=ot.data[0],de=ot.data[lt],X=Math.round(ot.valToPos(le[Be],"x",!0)),se=Math.round(ot.valToPos(le[Le],"x",!0));wt[0][0]===X&&Lt.push(Be);for(let re=0;re<wt.length;re++){let pe=wt[re],be=wt[re+1];if(be&&pe[1]===be[0]){let xe=ot.posToIdx(pe[1],!0);if(de[xe]==null)for(let Pe=1;Pe<100;Pe++){if(de[xe+Pe]!=null){xe+=Pe;break}if(de[xe-Pe]!=null){xe-=Pe;break}}Lt.push(xe)}}wt[wt.length-1][1]===se&&Lt.push(Le)}return Lt.length?Lt:null});let{fillOpacity:je}=Oe,Qe=null,We=null;if(ye.state?.origin){fe||(fe=T(b,G));const ot=G[ye.state.origin.frameIndex],lt=ot?.fields[ye.state.origin.fieldIndex],Ct=(0,E.CZ)(lt??ye,ot,G);if(te.indexOf(Ct)>=0)Qe=()=>null,We=()=>{};else if(Oe.transform===y.pR.Constant){const wt=m.Z.paths.linear();Qe=(Lt,Ye)=>{const Be=Lt._data,Le=w();let le=[Le.from.valueOf(),Le.to.valueOf()],de=Be[Ye].find(re=>re!=null),X=[de,de],se=Be.slice();return se[0]=le,se[Ye]=X,wt({...Lt,_data:se},Ye,0,1)}}if(Oe.fillBelowTo){const wt=b.fields.find(Le=>Oe.fillBelowTo===Le.name||Oe.fillBelowTo===Le.config?.displayNameFromDS||Oe.fillBelowTo===(0,E.CZ)(Le,b,G)),Lt=wt?(0,E.CZ)(wt,b,G):Oe.fillBelowTo,Ye=fe.get(Ct),Be=fe.get(Lt);(0,g.isNumber)(Be)&&(0,g.isNumber)(Ye)?(_.addBand({series:[Ye,Be],fill:void 0}),je||(je=35)):je=0}}let ke;Ne.id===c.S.Thresholds&&(ke=ot=>(0,f.YO)(Y.fields[ot],W).color),_.addSeries({pathBuilder:Qe,pointsBuilder:We,scaleKey:at,showPoints:et,pointsFilter:ze,colorMode:Ne,fillOpacity:je,theme:W,dynamicSeriesColor:ke,drawStyle:Oe.drawStyle,lineColor:Oe.lineColor??Ke,lineWidth:Oe.lineWidth,lineInterpolation:Oe.lineInterpolation,lineStyle:Oe.lineStyle,barAlignment:Oe.barAlignment,barWidthFactor:Oe.barWidthFactor,barMaxWidth:Oe.barMaxWidth,pointSize:Oe.pointSize,spanNulls:Oe.spanNulls||!1,show:!Oe.hideFrom?.viz,gradientMode:Oe.gradientMode,thresholds:ue.thresholds,hardMin:ye.config.min,hardMax:ye.config.max,softMin:Oe.axisSoftMin,softMax:Oe.axisSoftMax,dataFrameFieldIndex:ye.state?.origin}),Oe.thresholdsStyle&&ue.thresholds&&(Oe.thresholdsStyle.mode??y.i3.Off)!==y.i3.Off&&_.addThresholds({config:Oe.thresholdsStyle,thresholds:ue.thresholds,scaleKey:at,theme:W,hardMin:ye.config.min,hardMax:ye.config.max,softMin:Oe.axisSoftMin,softMax:Oe.axisSoftMax})}let Te=(0,D.i7)(b);_.setStackingGroups(Te),Q?.forEach(me=>{fe||(fe=T(b,G));let ye={};for(let ue in me.fieldMap){let Oe=me.fieldMap[ue];ye[ue]=fe.get(Oe)}me.init(_,ye)}),_.scaleKeys=[ae,q];const ge=15;let he={dataIdx:(me,ye,ue,Oe)=>{let Ue=me.data[ye];if(Ue[ue]==null){let at=null,Ne=null,_e;for(_e=ue;at==null&&_e-- >0;)Ue[_e]!=null&&(at=_e);for(_e=ue;Ne==null&&_e++<Ue.length;)Ue[_e]!=null&&(Ne=_e);let Ke=me.data[0],et=me.valToPos(Oe,"x"),ze=Ne==null?1/0:me.valToPos(Ke[Ne],"x"),je=at==null?-1/0:me.valToPos(Ke[at],"x"),Qe=et-je,We=ze-et;Qe<=We?Qe<=ge&&(ue=at):We<=ge&&(ue=Ne)}return ue}};if(z&&z()!==p.m.Off){const me={point:{[ae]:null,[q]:null},data:b},ye=new h.es(me);he.sync={key:k,filters:{pub:(ue,Oe,Ue,at,Ne,_e,Ke)=>z&&z()===p.m.Off?!1:(me.rowIndex=Ke,Ue<0&&at<0?(me.point[ce]=null,me.point[q]=null,K.publish(new h.xH)):(me.point[ce]=Oe.posToVal(Ue,ae),me.point[q]=Oe.posToVal(at,q),me.point.panelRelY=at>0?at/_e:1,K.publish(ye),ye.payload.down=void 0),!0)},scales:[ae,q]}}return _.setSync(),_.setCursor(he),_};function T(b,W){const V=new Map;return b.fields.forEach((w,K)=>{const z=w.state?.origin;if(z){const G=W[z.frameIndex]?.fields[z.fieldIndex];G&&V.set((0,E.CZ)(G,W[z.frameIndex],W),K)}}),V}const O=["legend","options","theme"];class A extends n.Component{constructor(){super(...arguments),this.panelContext={},this.prepConfig=(W,V,w)=>{const{eventBus:K,eventsScope:z,sync:G}=this.context,{theme:Q,timeZone:j,renderers:F,tweakAxis:k,tweakScale:_}=this.props;return I({frame:W,theme:Q,timeZones:Array.isArray(j)?j:[j],getTimeRange:w,eventBus:K,sync:G,allFrames:V,renderers:F,tweakScale:_,tweakAxis:k,eventsScope:z})},this.renderLegend=W=>{const{legend:V,frames:w}=this.props;return!W||V&&!V.showLegend||!(0,o.o)(W,w)?null:n.createElement(o.l,{data:w,config:W,...V})}}render(){return n.createElement(l.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:O,renderLegend:this.renderLegend})}}A.contextType=r.bb;const B=(0,a.HE)(A);B.displayName="TimeSeries"},36884:(J,R,e)=>{"use strict";e.d(R,{P:()=>m});var n=e(41407),a=e(39953),l=e(20588),r=e(82803),o=e(36517),g=e(68497);const m=a.memo(({children:u,theme:i="info",placement:f="auto",content:c,title:E,closeButton:p=!0,onClose:h,footer:y,fitContent:s=!1,onOpen:v,show:C})=>{const D=(0,r.wW)(d),M=D[i],P=(0,a.useRef)(null),[x,S]=a.useState(C),{getArrowProps:I,getTooltipProps:T,setTooltipRef:O,setTriggerRef:A,visible:B,update:b,tooltipRef:W,triggerRef:V}=(0,l.O)({visible:C??x,placement:f,interactive:!0,offset:[0,8],trigger:"click",onVisibleChange:K=>{C===void 0&&S(K),K?v?.():h?.()}},{strategy:"fixed"}),w=(0,a.useCallback)(K=>{S(!1),h?.(),K.target instanceof Node&&W?.contains(K.target)&&V?.focus()},[h,W,V]);return(0,a.useEffect)(()=>{if(x){const K=z=>{z.key==="Escape"&&w(z)};return document.addEventListener("keydown",K),()=>{document.removeEventListener("keydown",K)}}},[x,w]),a.createElement(a.Fragment,null,a.cloneElement(u,{ref:A,tabIndex:0,"aria-expanded":B}),B&&a.createElement("div",{"data-testid":"toggletip-content",ref:O,...T({className:(0,n.cx)(M.container,s&&D.fitContent)})},!!E&&a.createElement("div",{className:M.header},E),p&&a.createElement("div",{className:M.headerClose},a.createElement(g.h,{tooltip:"Close",name:"times","data-testid":"toggletip-header-close",onClick:w})),a.createElement("div",{ref:P,...I({className:M.arrow})}),a.createElement("div",{className:M.body},(typeof c=="string"||a.isValidElement(c))&&c,typeof c=="function"&&b&&c({update:b})),!!y&&a.createElement("div",{className:M.footer},y)))});m.displayName="Toggletip";const d=u=>{const i=(0,o.k)(u,u.components.tooltip.background,u.components.tooltip.background,u.components.tooltip.text,{topBottom:2,rightLeft:2}),f=(0,o.k)(u,u.colors.error.main,u.colors.error.main,u.colors.error.contrastText,{topBottom:2,rightLeft:2});return{info:i,error:f,fitContent:(0,n.css)({maxWidth:"fit-content"})}}},3839:(J,R,e)=>{"use strict";e.d(R,{h:()=>i});var n=e(41407),a=e(39953),l=e(17393),r=e(28888),o=e(82803),g=e(53039),m=e(4919),d=e(12190),u=e(69865);const i=(0,a.forwardRef)(({tooltip:p,icon:h,iconSize:y,className:s,children:v,imgSrc:C,imgAlt:D,fullWidth:M,isOpen:P,narrow:x,variant:S="default",iconOnly:I,"aria-label":T,isHighlighted:O,...A},B)=>{const b=(0,o.wW)(E),W=(0,n.cx)({[b.button]:!0,[b.buttonFullWidth]:M,[b.narrow]:x},b[S],s),V=(0,n.cx)({[b.content]:!0,[b.contentWithIcon]:!!h,[b.contentWithRightIcon]:P!==void 0}),w=a.createElement("button",{ref:B,className:W,"aria-label":f(T,p),"aria-expanded":P,...A},c(h,y),C&&a.createElement("img",{className:b.img,src:C,alt:D??""}),v&&!I&&a.createElement("div",{className:V},v),P===!1&&a.createElement(d.J,{name:"angle-down"}),P===!0&&a.createElement(d.J,{name:"angle-up"}),O&&a.createElement("div",{className:b.highlight}));return p?a.createElement(u.u,{content:p,placement:"bottom"},w):w});i.displayName="ToolbarButton";function f(p,h){return p||(h?r.wl.components.PageToolbar.item(h):void 0)}function c(p,h){return p?(0,l.Mo)(p)?a.createElement(d.J,{name:p,size:`${h||"lg"}`}):p:null}const E=p=>{const h=(0,m.c9)(p,"primary","solid"),y=(0,m.c9)(p,"destructive","solid"),s=(0,n.css)({color:p.colors.text.primary,background:p.colors.secondary.main,"&:hover":{color:p.colors.text.primary,background:p.colors.secondary.shade,border:`1px solid ${p.colors.border.medium}`}});return{button:(0,n.css)({label:"toolbar-button",position:"relative",display:"flex",alignItems:"center",height:p.spacing(p.components.height.md),padding:p.spacing(0,1),borderRadius:p.shape.radius.default,lineHeight:`${p.components.height.md*p.spacing.gridSize-2}px`,fontWeight:p.typography.fontWeightMedium,border:`1px solid ${p.colors.secondary.border}`,whiteSpace:"nowrap",transition:p.transitions.create(["background","box-shadow","border-color","color"],{duration:p.transitions.duration.short}),"&:focus, &:focus-visible":{...(0,g.getFocusStyles)(p),zIndex:1},"&:focus:not(:focus-visible)":(0,g.getMouseFocusStyles)(p),"&:hover":{boxShadow:p.shadows.z1},"&[disabled], &:disabled":{cursor:"not-allowed",opacity:p.colors.action.disabledOpacity,background:p.colors.action.disabledBackground,boxShadow:"none","&:hover":{color:p.colors.text.disabled,background:p.colors.action.disabledBackground,boxShadow:"none"}}}),default:(0,n.css)({color:p.colors.text.secondary,background:"transparent",border:"1px solid transparent","&:hover":{color:p.colors.text.primary,background:p.colors.background.secondary}}),canvas:s,active:(0,n.cx)(s,(0,n.css)({"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"2px",bottom:0,borderRadius:p.shape.radius.default,backgroundImage:p.colors.gradients.brandHorizontal}})),primary:(0,n.css)(h),destructive:(0,n.css)(y),narrow:(0,n.css)({padding:p.spacing(0,.5)}),img:(0,n.css)({width:"16px",height:"16px",marginRight:p.spacing(1)}),buttonFullWidth:(0,n.css)({flexGrow:1}),content:(0,n.css)({flexGrow:1}),contentWithIcon:(0,n.css)({display:"none",paddingLeft:p.spacing(1),[`@media ${g.mediaUp(p.v1.breakpoints.md)}`]:{display:"block"}}),contentWithRightIcon:(0,n.css)({paddingRight:p.spacing(.5)}),highlight:(0,n.css)({backgroundColor:p.colors.success.main,borderRadius:p.shape.radius.circle,width:"6px",height:"6px",position:"absolute",top:"-3px",right:"-3px",zIndex:1})}}},7258:(J,R,e)=>{"use strict";e.d(R,{R:()=>u});var n=e(41407),a=e(41056),l=e(30064),r=e(17037),o=e(39953),g=e(82803),m=e(70393),d=e(3839);const u=(0,o.forwardRef)(({alignment:f="left",className:c,children:E,...p},h)=>{const y=o.Children.toArray(E).filter(B=>B!=null),[s,v]=(0,o.useState)(Array(y.length).fill(!1)),C=(0,o.useRef)(null),[D,M]=(0,o.useState)(!1),P=(0,o.useRef)(null),x=(0,o.createRef)(),{overlayProps:S}=(0,r.Ir)({onClose:()=>M(!1),isDismissable:!0,isOpen:D,shouldCloseOnInteractOutside:B=>{const b=(0,m.RN)();return!P.current?.contains(B)&&!b.contains(B)}},x),{dialogProps:I}=(0,a.R)({},x),T=(0,g.l4)(),O=f==="left"?s.indexOf(!1)-1:s.length,A=i(T,O,f);return(0,o.useLayoutEffect)(()=>{const B=new IntersectionObserver(b=>{b.forEach(W=>{if(W.target instanceof HTMLElement&&W.target.parentNode){const V=Array.prototype.indexOf.call(W.target.parentNode.children,W.target);v(w=>{const K=[...w];return K[V]=W.isIntersecting,K})}})},{threshold:1,root:C.current});return C.current&&Array.from(C.current.children).forEach(b=>{b instanceof HTMLElement&&b!==P.current&&B.observe(b)}),()=>B.disconnect()},[E]),o.createElement("div",{ref:C,className:(0,n.cx)(A.container,c),...p},y.map((B,b)=>o.createElement("div",{key:b,style:{order:b,visibility:s[b]?"visible":"hidden"},className:A.childWrapper},B)),s.includes(!1)&&o.createElement("div",{ref:P,className:A.overflowButton},o.createElement(d.h,{variant:D?"active":"default",tooltip:"Show more items",onClick:()=>M(!D),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),D&&o.createElement(l.MT,{contain:!0,autoFocus:!0},o.createElement("div",{className:A.overflowItems,ref:x,...S,...I},y.map((B,b)=>!s[b]&&B)))))});u.displayName="ToolbarButtonRow";const i=(f,c,E)=>({overflowButton:(0,n.css)({order:c}),overflowItems:(0,n.css)({alignItems:"center",backgroundColor:f.colors.background.primary,borderRadius:f.shape.radius.default,boxShadow:f.shadows.z3,display:"flex",flexWrap:"wrap",gap:f.spacing(1),marginTop:f.spacing(1),maxWidth:"80vw",padding:f.spacing(.5,1),position:"absolute",right:0,top:"100%",width:"max-content",zIndex:f.zIndex.sidemenu}),container:(0,n.css)({alignItems:"center",display:"flex",gap:f.spacing(1),justifyContent:E==="left"?"flex-start":"flex-end",minWidth:0,position:"relative"}),childWrapper:(0,n.css)({alignItems:"center",display:"flex",gap:f.spacing(1)})})},55407:(J,R,e)=>{"use strict";e.d(R,{J:()=>d});var n=e(39953),a=e(86419),l=e(46378),r=e(72907),o=e(70393);const g={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},m={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class d extends n.PureComponent{render(){const{content:i,show:f,placement:c,className:E,wrapperClassName:p,renderArrow:h,referenceElement:y,...s}=this.props;return n.createElement(a.dK,null,n.createElement(r.ZP,{in:f,timeout:100,mountOnEnter:!0,unmountOnExit:!0},v=>n.createElement(o.h_,null,n.createElement(l.r,{placement:c,referenceElement:y,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:C,style:D,placement:M,arrowProps:P,update:x})=>n.createElement("div",{ref:C,style:{...D,...g,...m[v]},"data-placement":M,className:`${p}`,...s},n.createElement("div",{className:E},typeof i=="string"&&i,n.isValidElement(i)&&n.cloneElement(i),typeof i=="function"&&i({updatePopperPosition:x}),h&&h({arrowProps:P,placement:M})))))))}}},66557:(J,R,e)=>{"use strict";e.d(R,{D:()=>a});var n=e(39953);class a extends n.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:r,content:o,placement:g="auto"}=this.props,{show:m}=this.state;return r(this.showPopper,this.hidePopper,{show:m,placement:g,content:o})}}},69865:(J,R,e)=>{"use strict";e.d(R,{u:()=>m});var n=e(39953),a=e(20588),l=e(28888),r=e(82803),o=e(36517),g=e(70393);const m=n.forwardRef(({children:u,theme:i,interactive:f,show:c,placement:E,content:p},h)=>{const[y,s]=n.useState(c);(0,n.useEffect)(()=>{if(y!==!1){const O=A=>{A.key==="Escape"&&s(!1)};return document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)}}else return},[y]);const{getArrowProps:v,getTooltipProps:C,setTooltipRef:D,setTriggerRef:M,visible:P,update:x}=(0,a.O)({visible:c??y,placement:E,interactive:f,delayHide:f?100:0,delayShow:150,offset:[0,8],trigger:["hover","focus"],onVisibleChange:s}),I=(0,r.wW)(d)[i??"info"],T=(0,n.useCallback)(O=>{M(O),typeof h=="function"?h(O):h&&(h.current=O)},[h,M]);return n.createElement(n.Fragment,null,n.cloneElement(u,{ref:T,tabIndex:0}),P&&n.createElement(g.h_,null,n.createElement("div",{"data-testid":l.wl.components.Tooltip.container,ref:D,...C({className:I.container})},n.createElement("div",{...v({className:I.arrow})}),typeof p=="string"&&p,n.isValidElement(p)&&n.cloneElement(p),typeof p=="function"&&x&&p({updatePopperPosition:x}))))});m.displayName="Tooltip";const d=u=>{const i=(0,o.k)(u,u.components.tooltip.background,u.components.tooltip.background,u.components.tooltip.text,{topBottom:.5,rightLeft:1}),f=(0,o.k)(u,u.colors.error.main,u.colors.error.main,u.colors.error.contrastText,{topBottom:.5,rightLeft:1});return{info:i,["info-alt"]:i,error:f}}},93021:(J,R,e)=>{"use strict";e.d(R,{H:()=>l});var n=e(39953);function a(r,o){const g=[];return r.forEach(m=>{g.push(m.start,m.end+1)}),g[0]!==0&&g.unshift(0),g[g.length-1]!==o&&g.push(o),g}const l=r=>{let{highlightParts:o,text:g,highlightClassName:m}=r;if(!o?.length)return null;let d=[],u=a(o,g.length),i=o[0].start===0;for(let f=1;f<u.length;f++){let c=u[f-1],E=u[f];d.push((0,n.createElement)(i?"mark":"span",{key:f-1,className:i?m:void 0},g.substring(c,E))),i=!i}return n.createElement("div",null,d)}},61805:(J,R,e)=>{"use strict";e.d(R,{n:()=>o});var n=e(39953),a=e(83502),l=e(52895);function r(g){return`Custom unit: ${g}`}class o extends n.PureComponent{constructor(){super(...arguments),this.onChange=m=>{this.props.onChange(m.value)}}render(){const{value:m,width:d}=this.props;let u;const f=(0,a.QW)().map(c=>{const E=c.submenu.map(p=>{const h={label:p.text,value:p.value};return p.value===m&&(u=h),h});return{label:c.text,value:c.text,items:E}});return m&&!u&&(u={value:m,label:m}),n.createElement(l.v,{width:d,initialValue:u&&u.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:r,options:f,placeholder:"Choose",onSelect:this.props.onChange})}}},99503:(J,R,e)=>{"use strict";e.d(R,{q:()=>o});var n=e(41407),a=e(39953),l=e(82803),r=e(7894);const o=({src:m,alt:d,width:u,height:i})=>{const f=(0,l.wW)(g,u,i);return a.createElement("img",{className:f.image,src:m,alt:d})},g=(m,d=3,u=3)=>({image:(0,n.css)([(0,r.U)(m,d,i=>({width:m.spacing(i)})),(0,r.U)(m,u,i=>({height:m.spacing(i)})),{borderRadius:m.shape.radius.circle}])})},3455:(J,R,e)=>{"use strict";e.d(R,{t:()=>d});var n=e(41407),a=e(39953),l=e(92403),r=e(82803),o=e(69865);const g=f=>{const E=(0,l.CQ)(f).diff((0,l.CQ)(),"hours",!1);return`Active last ${(Math.floor(-E/24)+1)*24}h`},m=f=>{if(!f)return"";const[c,E]=f.split(" ");return`${c?.[0]??""}${E?.[0]??""}`.toUpperCase()},d=({userView:f,className:c,children:E,onClick:p,showTooltip:h=!0})=>{const{user:y,lastActiveAt:s}=f,v=(0,l.CQ)(s).diff((0,l.CQ)(),"minutes",!0)>=-15,C=(0,r.l4)(),D=(0,a.useMemo)(()=>i(C,v),[C,v]),M=a.createElement("button",{type:"button",onClick:p,className:(0,n.cx)(D.container,p&&D.pointer,c),"aria-label":`${y.name} icon`},E?a.createElement("div",{className:(0,n.cx)(D.content,D.textContent)},E):y.avatarUrl?a.createElement("img",{className:D.content,src:y.avatarUrl,alt:`${y.name} avatar`}):a.createElement("div",{className:(0,n.cx)(D.content,D.textContent)},m(y.name)));if(h){const P=a.createElement("div",{className:D.tooltipContainer},a.createElement("div",{className:D.tooltipName},y.name),a.createElement("div",{className:D.tooltipDate},v?a.createElement("div",{className:D.dotContainer},a.createElement("span",null,"Active last 15m"),a.createElement("span",{className:D.dot})):g(s)));return a.createElement(o.u,{content:P},M)}else return M},u=f=>`0 0 0 1px ${f}`,i=(f,c)=>{const E=c?f.colors.primary.main:f.colors.border.medium,p=c?f.colors.primary.text:f.colors.border.strong;return{container:(0,n.css)({padding:0,width:"30px",height:"30px",background:"none",border:"none",borderRadius:f.shape.radius.circle,"& > *":{borderRadius:f.shape.radius.circle}}),content:(0,n.css)({lineHeight:"24px",maxWidth:"100%",border:`3px ${f.colors.background.primary} solid`,boxShadow:u(E),backgroundClip:"padding-box","&:hover":{boxShadow:u(p)}}),textContent:(0,n.css)({background:f.colors.background.primary,padding:0,color:f.colors.text.secondary,textAlign:"center",fontSize:f.typography.size.sm,"&:focus":{boxShadow:u(E)}}),tooltipContainer:(0,n.css)({textAlign:"center",padding:f.spacing(0,1)}),tooltipName:(0,n.css)({fontWeight:f.typography.fontWeightBold}),tooltipDate:(0,n.css)({fontWeight:f.typography.fontWeightRegular}),dotContainer:(0,n.css)({display:"flex",alignItems:"center"}),dot:(0,n.css)({height:"6px",width:"6px",backgroundColor:f.colors.primary.main,borderRadius:f.shape.radius.circle,display:"inline-block",marginLeft:f.spacing(1)}),pointer:(0,n.css)({cursor:"pointer"})}}},96428:(J,R,e)=>{"use strict";e.d(R,{b:()=>g});var n=e(39953),a=e(28888),l=e(82803),r=e(4919),o=e(9558);function g({"aria-label":m,label:d,icon:u,options:i,onChange:f,variant:c,minWidth:E=16,size:p="sm",isFullWidth:h=!0,menuPlacement:y,fill:s,buttonCss:v}){const[C,D]=(0,n.useState)(!1),M=(0,l.l4)();return n.createElement(n.Fragment,null,!C&&n.createElement(r.zx,{size:p||"sm",className:v,icon:u||"plus",onClick:()=>D(!0),variant:c,fill:s,fullWidth:h,"aria-label":a.wl.components.ValuePicker.button(m??d)},d),C&&n.createElement("span",{style:{minWidth:M.spacing(E),flexGrow:h?1:void 0}},n.createElement(o.Ph,{placeholder:d,options:i,"aria-label":a.wl.components.ValuePicker.select(m??d),isOpen:!0,onCloseMenu:()=>D(!1),autoFocus:!0,onChange:P=>{D(!1),f(P)},menuPlacement:y})))}},96248:(J,R,e)=>{"use strict";e.d(R,{AY:()=>m});var n=e(41407),a=e(39953),l=e(13479),r=e(82803),o=e(53039),g=e(64447);const m=({width:i,height:f,legend:c,children:E})=>{const p=(0,r.l4)(),h=(0,r.wW)(d),y={display:"flex",width:`${i}px`,height:`${f}px`},[s,v]=(0,l.Z)();if(!c)return a.createElement(a.Fragment,null,a.createElement("div",{style:y,className:h.viz},E(i,f)));let{placement:C,maxHeight:D="35%",maxWidth:M="60%"}=c.props;document.body.clientWidth<p.breakpoints.values.lg&&(C="bottom");let P=null;const x={};switch(C){case"bottom":y.flexDirection="column",x.maxHeight=D,v.height&&(P={width:i,height:f-v.height});break;case"right":y.flexDirection="row",x.maxWidth=M,v.width&&(P={width:i-v.width,height:f}),c.props.width&&(x.width=c.props.width,P={width:i-c.props.width,height:f});break}return P?.width===0&&(P.width=i),P?.height===0&&(P.height=f),a.createElement("div",{style:y},a.createElement("div",{className:h.viz},P&&E(P.width,P.height)),a.createElement("div",{style:x,ref:s},a.createElement(g.$,{hideHorizontalTrack:!0},c)))},d=i=>({viz:(0,n.css)({flexGrow:2,borderRadius:i.shape.radius.default,"&:focus-visible":(0,o.getFocusStyles)(i)})}),u=({children:i})=>a.createElement(a.Fragment,null,i);m.Legend=u},67611:(J,R,e)=>{"use strict";e.d(R,{F:()=>o});var n=e(41407),a=e(39953),l=e(73254),r=e(82803);const o=a.memo(a.forwardRef(({color:m,className:d,gradient:u,...i},f)=>{const c=(0,r.l4)(),E=(0,r.wW)(g);let p;if(u){const y=l.WO.get(u).getColors?.(c);y?.length?p=`linear-gradient(90deg, ${y.join(", ")})`:p=c.visualization.getColorByName("")}else p=m;const h={background:p,width:"14px",height:"4px",borderRadius:c.shape.radius.pill,display:"inline-block",marginRight:"8px"};return a.createElement("div",{"data-testid":"series-icon",ref:f,className:(0,n.cx)(d,E.forcedColors),style:h,...i})})),g=()=>({forcedColors:(0,n.css)({"@media (forced-colors: active)":{forcedColorAdjust:"none"}})});o.displayName="SeriesIcon"},78832:(J,R,e)=>{"use strict";e.d(R,{l:()=>S});var n=e(39953),a=e(36316),l=e(34547),r=e(31276),o=e(52343),g=e(41407),m=e(82803),d=e(28471),u=e(38696),i=e(98095);const f=({items:I,itemRenderer:T,onLabelMouseOver:O,onLabelMouseOut:A,onLabelClick:B,placement:b,className:W,readonly:V})=>{const w=(0,m.wW)(c);T||(T=z=>n.createElement(i.e,{item:z,onLabelClick:B,onLabelMouseOver:O,onLabelMouseOut:A,readonly:V}));const K=z=>`${z.getItemKey?z.getItemKey():z.label}`;switch(b){case"right":{const z=(G,Q)=>n.createElement("span",{className:w.itemRight},T(G,Q));return n.createElement("div",{className:(0,g.cx)(w.rightWrapper,W)},n.createElement(u.a,{items:I,renderItem:z,getItemKey:K}))}case"bottom":default:{const z=(G,Q)=>n.createElement("span",{className:w.itemBottom},T(G,Q));return n.createElement("div",{className:(0,g.cx)(w.bottomWrapper,W)},n.createElement("div",{className:w.section},n.createElement(d.Y,{items:I.filter(G=>G.yAxis===1),renderItem:z,getItemKey:K})),n.createElement("div",{className:(0,g.cx)(w.section,w.sectionRight)},n.createElement(d.Y,{items:I.filter(G=>G.yAxis!==1),renderItem:z,getItemKey:K})))}}};f.displayName="VizLegendList";const c=I=>{const T=(0,g.css)({paddingRight:"10px",display:"flex",fontSize:I.typography.bodySmall.fontSize,whiteSpace:"nowrap"});return{itemBottom:T,itemRight:(0,g.cx)(T,(0,g.css)({marginBottom:I.spacing(.5)})),rightWrapper:(0,g.css)({paddingLeft:I.spacing(.5)}),bottomWrapper:(0,g.css)({display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",paddingLeft:I.spacing(.5),gap:"15px 25px"}),section:(0,g.css)({display:"flex"}),sectionRight:(0,g.css)({justifyContent:"flex-end",flexGrow:1,flexBasis:"50%"})}};var E=e(86832),p=e(12190),h=e(83502),y=e(53039),s=e(35820);const v=({item:I,onLabelClick:T,onLabelMouseOver:O,onLabelMouseOut:A,className:B,readonly:b})=>{const W=(0,m.wW)(C),V=(0,n.useCallback)(z=>{O&&O(I,z)},[I,O]),w=(0,n.useCallback)(z=>{A&&A(I,z)},[I,A]),K=(0,n.useCallback)(z=>{T&&T(I,z)},[I,T]);return n.createElement("tr",{className:(0,g.cx)(W.row,B)},n.createElement("td",null,n.createElement("span",{className:W.itemWrapper},n.createElement(s.i,{color:I.color,seriesName:I.label,readonly:b}),n.createElement("button",{disabled:b,type:"button",title:I.label,onBlur:w,onFocus:V,onMouseOver:V,onMouseOut:w,onClick:b?void 0:K,className:(0,g.cx)(W.label,I.disabled&&W.labelDisabled)},I.label," ",I.yAxis===2&&n.createElement("span",{className:W.yAxisLabel},"(right y-axis)")))),I.getDisplayValues&&I.getDisplayValues().map((z,G)=>n.createElement("td",{className:W.value,key:`${z.title}-${G}`},(0,h.zc)(z))))};v.displayName="LegendTableItem";const C=I=>{const T=y.hoverColor(I.colors.background.primary,I);return{row:(0,g.css)({label:"LegendRow",fontSize:I.v1.typography.size.sm,borderBottom:`1px solid ${I.colors.border.weak}`,td:{padding:I.spacing(.25,1),whiteSpace:"nowrap"},"&:hover":{background:T}}),label:(0,g.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,maxWidth:"600px",textOverflow:"ellipsis",overflow:"hidden"}),labelDisabled:(0,g.css)({label:"LegendLabelDisabled",color:I.colors.text.disabled}),itemWrapper:(0,g.css)({display:"flex",whiteSpace:"nowrap",alignItems:"center"}),value:(0,g.css)({textAlign:"right"}),yAxisLabel:(0,g.css)({color:I.colors.text.secondary})}},D=({items:I,sortBy:T,sortDesc:O,itemRenderer:A,className:B,onToggleSort:b,onLabelClick:W,onLabelMouseOver:V,onLabelMouseOut:w,readonly:K,isSortable:z})=>{const G=(0,m.wW)(M),Q={},j="Name";z&&(Q[j]={description:"name",numeric:0,text:""});for(const k of I)if(k.getDisplayValues)for(const _ of k.getDisplayValues())Q[_.title??"?"]=_;const F=T?(0,E.orderBy)(I,k=>{if(T===j)return k.label;if(k.getDisplayValues){const _=k.getDisplayValues().filter(Y=>Y.title===T)[0];if(_)return isNaN(_.numeric)?-1/0:_.numeric}},O?"desc":"asc"):I;return A||(A=(k,_)=>n.createElement(v,{key:`${k.label}-${_}`,item:k,onLabelClick:W,onLabelMouseOver:V,onLabelMouseOut:w,readonly:K})),n.createElement("table",{className:(0,g.cx)(G.table,B)},n.createElement("thead",null,n.createElement("tr",null,!z&&n.createElement("th",null),Object.keys(Q).map(k=>{const _=Q[k];return n.createElement("th",{title:_.description,key:k,className:(0,g.cx)(G.header,b&&G.headerSortable,z&&G.nameHeader,{[G.withIcon]:T===k}),onClick:()=>{b&&b(k)}},k,T===k&&n.createElement(p.J,{size:"xs",name:O?"angle-down":"angle-up"}))}))),n.createElement("tbody",null,F.map(A)))},M=I=>({table:(0,g.css)({width:"100%","th:first-child":{width:"100%",borderBottom:`1px solid ${I.colors.border.weak}`}}),header:(0,g.css)({color:I.colors.primary.text,fontWeight:I.typography.fontWeightMedium,borderBottom:`1px solid ${I.colors.border.weak}`,padding:I.spacing(.25,1,.25,1),fontSize:I.typography.bodySmall.fontSize,textAlign:"right",whiteSpace:"nowrap"}),nameHeader:(0,g.css)({textAlign:"left",paddingLeft:"30px"}),withIcon:(0,g.css)({paddingRight:"4px"}),headerSortable:(0,g.css)({cursor:"pointer"})});var P=e(75881);function x(I){return I.ctrlKey||I.metaKey||I.shiftKey?o.R.AppendToSelection:o.R.ToggleSelection}function S({items:I,displayMode:T,sortBy:O,seriesVisibilityChangeBehavior:A=P.Y.Isolate,sortDesc:B,onLabelClick:b,onToggleSort:W,placement:V,className:w,itemRenderer:K,readonly:z,isSortable:G}){const{eventBus:Q,onToggleSeriesVisibility:j,onToggleLegendSort:F}=(0,r.R9)(),k=(0,n.useCallback)((Z,ae)=>{Q?.publish({type:a.es.type,payload:{raw:ae,x:0,y:0,dataId:Z.label}})},[Q]),_=(0,n.useCallback)((Z,ae)=>{Q?.publish({type:a.xH.type,payload:{raw:ae,x:0,y:0,dataId:Z.label}})},[Q]),Y=(0,n.useCallback)((Z,ae)=>{b&&b(Z,ae),j&&j(Z.label,A===P.Y.Hide?o.R.AppendToSelection:x(ae))},[j,b,A]);switch(T){case l.jK.Table:return n.createElement(D,{className:w,items:I,placement:V,sortBy:O,sortDesc:B,onLabelClick:Y,onToggleSort:W||F,onLabelMouseOver:k,onLabelMouseOut:_,itemRenderer:K,readonly:z,isSortable:G});case l.jK.List:return n.createElement(f,{className:w,items:I,placement:V,onLabelMouseOver:k,onLabelMouseOut:_,onLabelClick:Y,itemRenderer:K,readonly:z});default:return null}}S.displayName="VizLegend"},98095:(J,R,e)=>{"use strict";e.d(R,{e:()=>f});var n=e(41407),a=e(39953),l=e(28888),r=e(82803),o=e(35820),g=e(86832),m=e(83502),d=e(28471);const u=({stats:E})=>{const p=(0,r.wW)(i);return E.length===0?null:a.createElement(d.Y,{className:p.list,items:E,renderItem:h=>a.createElement("div",{className:p.item,title:h.description},h.title&&`${(0,g.capitalize)(h.title)}:`," ",(0,m.zc)(h))})},i=()=>({list:(0,n.css)({flexGrow:1,textAlign:"right"}),item:(0,n.css)({marginLeft:"8px"})});u.displayName="VizLegendStatsList";const f=({item:E,onLabelClick:p,onLabelMouseOver:h,onLabelMouseOut:y,className:s,readonly:v})=>{const C=(0,r.wW)(c),D=(0,a.useCallback)(x=>{h&&h(E,x)},[E,h]),M=(0,a.useCallback)(x=>{y&&y(E,x)},[E,y]),P=(0,a.useCallback)(x=>{p&&p(E,x)},[E,p]);return a.createElement("div",{className:(0,n.cx)(C.itemWrapper,E.disabled&&C.itemDisabled,s),"aria-label":l.wl.components.VizLegend.seriesName(E.label)},a.createElement(o.i,{seriesName:E.label,color:E.color,gradient:E.gradient,readonly:v}),a.createElement("button",{disabled:v,type:"button",onBlur:M,onFocus:D,onMouseOver:D,onMouseOut:M,onClick:P,className:C.label},E.label),E.getDisplayValues&&a.createElement(u,{stats:E.getDisplayValues()}))};f.displayName="VizLegendListItem";const c=E=>({label:(0,n.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,userSelect:"text"}),itemDisabled:(0,n.css)({label:"LegendLabelDisabled",color:E.colors.text.disabled}),itemWrapper:(0,n.css)({label:"LegendItemWrapper",display:"flex",whiteSpace:"nowrap",alignItems:"center",flexGrow:1}),value:(0,n.css)({textAlign:"right"}),yAxisLabel:(0,n.css)({color:E.v1.palette.gray2})})},35820:(J,R,e)=>{"use strict";e.d(R,{i:()=>o});var n=e(39953),a=e(69360),l=e(31276),r=e(67611);const o=n.memo(({seriesName:g,color:m,gradient:d,readonly:u})=>{const{onSeriesColorChange:i}=(0,l.R9)(),f=(0,n.useCallback)(c=>i(g,c),[g,i]);return g&&i&&m&&!u?n.createElement(a.sp,{color:m,onChange:f,enableNamedColors:!0},({ref:c,showColorPicker:E,hideColorPicker:p})=>n.createElement(r.F,{color:m,className:"pointer",ref:c,onClick:E,onMouseLeave:p})):n.createElement(r.F,{color:m,gradient:d})});o.displayName="VizLegendSeriesIcon"},75881:(J,R,e)=>{"use strict";e.d(R,{Y:()=>n});var n=(a=>(a[a.Isolate=0]="Isolate",a[a.Hide=1]="Hide",a))(n||{})},4367:(J,R,e)=>{"use strict";e.d(R,{Q:()=>o});var n=e(39953),a=e(64943);const l=(m,d,u,i)=>{const f=r(m,d,i),c=r(d,m,i),E=Math.max(f,c);let p=Math.floor(m/E),h=Math.ceil(i/p);p=Math.ceil(i/h);const y=p-(p*h-i),s=m/y-u+u/y;return{width:m/p-u+u/p,height:d/h-u+u/h,widthOnLastRow:s,xCount:p,yCount:h}};function r(m,d,u){const i=Math.ceil(Math.sqrt(u*m/d));return Math.floor(i*d/m)*i<u?d/Math.ceil(i*d/m):m/i}class o extends n.PureComponent{constructor(d){super(d),this.state={values:d.getValues()}}componentDidUpdate(d){const{renderCounter:u,source:i}=this.props;(u!==d.renderCounter||i!==d.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:d,width:u,height:i}=this.props;return d===a.wm.Auto?u>i?a.wm.Vertical:a.wm.Horizontal:d}renderGrid(){const{renderValue:d,height:u,width:i,itemSpacing:f,getAlignmentFactors:c,orientation:E}=this.props,{values:p}=this.state,h=l(i,u,f,p.length),y=c?c(p,h.width,h.height):{};let s=0,v=0,C=[];for(let D=0;D<p.length;D++){const M=p[D],x=v===h.yCount-1?h.widthOnLastRow:h.width,S=h.height,I=s*x+f*s,T=v*S+f*v,O={position:"absolute",left:I,top:T,width:`${x}px`,height:`${S}px`};C.push(n.createElement("div",{key:D,style:O},d({value:M,width:x,height:S,alignmentFactors:y,orientation:E,count:p.length}))),s++,s===h.xCount&&(s=0,v++)}return n.createElement("div",{style:{position:"relative"}},C)}render(){const{renderValue:d,height:u,width:i,itemSpacing:f,getAlignmentFactors:c,autoGrid:E,orientation:p,minVizWidth:h,minVizHeight:y}=this.props,{values:s}=this.state;if(E&&p===a.wm.Auto)return this.renderGrid();const v={display:"flex"},C={display:"flex",overflow:`${h?"auto":"hidden"} ${y?"auto":"hidden"}`};let D=u,M=i,P=this.getOrientation();switch(P){case a.wm.Horizontal:C.flexDirection="column",C.height=`${u}px`,v.marginBottom=`${f}px`,M=i,D=Math.max(u/s.length-f+f/s.length,y??0);break;case a.wm.Vertical:C.flexDirection="row",C.justifyContent="space-between",v.marginRight=`${f}px`,D=u,M=Math.max(i/s.length-f+f/s.length,h??0)}v.width=`${M}px`,v.height=`${D}px`;const x=c?c(s,M,D):{};return n.createElement("div",{style:C},s.map((S,I)=>n.createElement("div",{key:I,style:g(v,I,s.length)},d({value:S,width:M,height:D,alignmentFactors:x,orientation:P,count:s.length}))))}}o.defaultProps={itemSpacing:8};function g(m,d,u){return d===u-1?{...m,marginRight:0,marginBottom:0}:m}},55987:(J,R,e)=>{"use strict";e.d(R,{V:()=>g,c:()=>m});var n=e(41407),a=e(39953),l=e(82803),r=e(67611);const o=d=>({icon:(0,n.css)({marginRight:d.spacing(1),verticalAlign:"middle"}),seriesTable:(0,n.css)({display:"table"}),seriesTableRow:(0,n.css)({display:"table-row",fontSize:d.typography.bodySmall.fontSize}),seriesTableCell:(0,n.css)({display:"table-cell"}),label:(0,n.css)({wordBreak:"break-all"}),value:(0,n.css)({paddingLeft:d.spacing(2),textAlign:"right"}),activeSeries:(0,n.css)({fontWeight:d.typography.fontWeightBold,color:d.colors.text.maxContrast}),timestamp:(0,n.css)({fontWeight:d.typography.fontWeightBold,fontSize:d.typography.bodySmall.fontSize})}),g=({color:d,label:u,value:i,isActive:f})=>{const c=(0,l.wW)(o);return a.createElement("div",{"data-testid":"SeriesTableRow",className:(0,n.cx)(c.seriesTableRow,f&&c.activeSeries)},d&&a.createElement("div",{className:c.seriesTableCell},a.createElement(r.F,{color:d,className:c.icon})),u&&a.createElement("div",{className:(0,n.cx)(c.seriesTableCell,c.label)},u),i&&a.createElement("div",{className:(0,n.cx)(c.seriesTableCell,c.value)},i))},m=({timestamp:d,series:u})=>{const i=(0,l.wW)(o);return a.createElement(a.Fragment,null,d&&a.createElement("div",{className:i.timestamp,"aria-label":"Timestamp"},d),u.map((f,c)=>a.createElement(g,{isActive:f.isActive,label:f.label,color:f.color,value:f.value,key:`${f.label}-${c}`})))}},49621:(J,R,e)=>{"use strict";e.d(R,{I:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(70393),o=e(41013);const g=({content:d,position:u,offset:i})=>{const f=(0,l.wW)(m);return u?a.createElement(r.h_,{className:f.portal},a.createElement(o.S,{position:u,offset:i||{x:0,y:0}},d)):null};g.displayName="VizTooltip";const m=()=>({portal:(0,n.css)({position:"absolute",top:0,left:0,pointerEvents:"none",width:"100%",height:"100%"})})},41013:(J,R,e)=>{"use strict";e.d(R,{S:()=>d});var n=e(41407),a=e(39953),l=e(29721),r=e(82803),o=e(53039);const g=(i=0,f=0,c=0,E=0,p=0,h=0,y=0,s=0)=>{let v=i,C=f;const D=Math.max(i+p+c-(y-p),0),M=Math.abs(Math.min(i-p-c-p,0)),P=D>0,x=M>0,S=Math.max(f+h+E-(s-h),0),I=Math.abs(Math.min(f-h-E-h,0)),T=S>0,O=I>0;return P&&x?v=D>M?p:y-p-c:P?v=i-p-c:v=i+p,T&&O?C=S>I?h:s-h-E:T?C=f-h-E:C=f+h,{x:v,y:C}},m=(i,f)=>{switch(i){case ColorIndicator.value:return f.value;case ColorIndicator.series:return f.series;case ColorIndicator.hexagon:return f.hexagon;case ColorIndicator.pie_1_4:return f.pie_1_4;case ColorIndicator.pie_2_4:return f.pie_2_4;case ColorIndicator.pie_3_4:return f.pie_3_4;case ColorIndicator.marker_sm:return f.marker_sm;case ColorIndicator.marker_md:return f.marker_md;case ColorIndicator.marker_lg:return f.marker_lg;default:return f.value}},d=({position:{x:i,y:f},offset:{x:c,y:E},children:p,allowPointerEvents:h=!1,className:y,...s})=>{const v=(0,a.useRef)(null),[C,D]=(0,a.useState)({width:0,height:0}),{width:M,height:P}=(0,l.Z)(),[x,S]=(0,a.useState)({x:i+c,y:f+E}),I=(0,a.useMemo)(()=>new ResizeObserver(O=>{for(let A of O){const B=Math.floor(A.contentRect.width+16),b=Math.floor(A.contentRect.height+2*8);(C.width!==B||C.height!==b)&&D({width:Math.min(B,M),height:Math.min(b,P)})}}),[C,M,P]);(0,a.useLayoutEffect)(()=>(v.current&&I.observe(v.current),()=>{I.disconnect()}),[I]),(0,a.useLayoutEffect)(()=>{if(v&&v.current){const{x:O,y:A}=g(i,f,C.width,C.height,c,E,M,P);S({x:O,y:A})}},[M,P,i,c,f,E,C]);const T=(0,r.wW)(u);return a.createElement("div",{ref:v,style:{position:"fixed",left:0,pointerEvents:h?"auto":"none",top:0,transform:`translate(${x.x}px, ${x.y}px)`,transition:"transform ease-out 0.1s"},"aria-live":"polite","aria-atomic":"true",...s,className:(0,n.cx)(T.wrapper,y)},p)};d.displayName="VizTooltipContainer";const u=i=>({wrapper:(0,n.css)((0,o.getTooltipContainerStyles)(i))})},3587:(J,R,e)=>{"use strict";e.r(R),e.d(R,{Alert:()=>He.b,AlertingSettings:()=>ln.O,AsyncMultiSelect:()=>La.M8,AsyncSelect:()=>La.qb,AsyncVirtualizedSelect:()=>La.gY,AutoSaveField:()=>Z.h,AutoSizeInput:()=>Wa.H,Avatar:()=>eo.q,Badge:()=>rs.C,BarGauge:()=>Be.xf,BarGaugeDisplayMode:()=>Ar.QH,BigValue:()=>ot.w6,BigValueColorMode:()=>ot.pc,BigValueGraphMode:()=>ot.IG,BigValueJustifyMode:()=>ot.ap,BigValueTextMode:()=>ot.jG,BrowserLabel:()=>sa._,Button:()=>va.zx,ButtonCascader:()=>M.O,ButtonGroup:()=>Sa.h,ButtonSelect:()=>sr.d,CallToActionCard:()=>St._,Card:()=>ar.Z,CardContainer:()=>ws._,Cascader:()=>D.v,CertificationKey:()=>Kt.W,Checkbox:()=>kn.X,ClickOutsideWrapper:()=>ut.L,ClipboardButton:()=>C.m,CodeEditor:()=>fe.p,CodeEditorSuggestionItemKind:()=>ge.k,CollapsableSection:()=>ct.s,Collapse:()=>dt.U,ColorPicker:()=>I.zH,ColorPickerInput:()=>T.T,ConfirmButton:()=>i.p,ConfirmModal:()=>oe.s,Container:()=>ss.W2,ContextMenu:()=>st.x,ControlledCollapse:()=>dt.y,Counter:()=>We.A,CustomHeadersSettings:()=>Jt.H,CustomScrollbar:()=>s.$,DataLinkButton:()=>At.k,DataLinkInput:()=>tn.v,DataLinksContextMenu:()=>on.V,DataLinksInlineEditor:()=>Zt.d,DataSourceHttpSettings:()=>zt.E,DatePicker:()=>Q.M,DatePickerWithInput:()=>j.d,DateTimePicker:()=>F.x,DeleteButton:()=>f.m,Divider:()=>Ws.i,Drawer:()=>Yn.d,Dropdown:()=>Pr.L,DropdownIndicator:()=>Xa.m,EmptySearchResult:()=>A.K,ErrorBoundary:()=>xt.SV,ErrorBoundaryAlert:()=>xt.z4,ErrorWithStack:()=>Ft.X,EventsCanvas:()=>Yt.TZ,FIXED_UNIT:()=>fn.j,FadeTransition:()=>dn.n,FeatureBadge:()=>Cn.a,FeatureInfoBox:()=>Cn.Z,Field:()=>Rn.g,FieldArray:()=>Qn.F,FieldLinkList:()=>Ie.Z,FieldSet:()=>Tn.C,FieldValidationMessage:()=>jn.S,FileDropzone:()=>Pa.Yo,FileDropzoneDefaultChildren:()=>Pa.A_,FileListItem:()=>Pa.K$,FileUpload:()=>ha.p,FilterInput:()=>qa.H,FilterPill:()=>De.B,Form:()=>ga.l,FormattedValueDisplay:()=>Qa.W,FullWidthButtonContainer:()=>Ze.f,Gauge:()=>Ct.a,Graph:()=>wt.k,GraphContextMenu:()=>Ye.w,GraphContextMenuHeader:()=>Ye.b,GraphNG:()=>fn.d,GraphSeriesToggler:()=>Xe.U,GraphWithLegend:()=>Lt.U,HorizontalGroup:()=>ss.Lh,Icon:()=>d.J,IconButton:()=>u.h,InfoBox:()=>pn.v,InlineField:()=>ra._,InlineFieldRow:()=>oa.Z,InlineFormLabel:()=>zr.c,InlineLabel:()=>Xn.W,InlineSegmentGroup:()=>Jn.m,InlineSwitch:()=>Qs.x,InlineToast:()=>P.K,Input:()=>Zs.I,InputControl:()=>Ra.g,InteractiveTable:()=>_.e,JSONFormatter:()=>Rt.g,JsonExplorer:()=>mt.u,KeyboardPlugin:()=>rn.Cm,Label:()=>En._,LegacyForms:()=>ya,LegacyInputStatus:()=>a.G,Legend:()=>Dn.D,Link:()=>Wt.r,LinkButton:()=>va.Qj,List:()=>k.a,LoadingBar:()=>S.F,LoadingPlaceholder:()=>x.u,Marker:()=>Yt.Jx,Menu:()=>tt.v,MenuGroup:()=>ft.k,MenuItem:()=>$t.s,Modal:()=>me.u,ModalHeader:()=>ye.x,ModalRoot:()=>Ue.Y0,ModalTabContent:()=>Oe.Q,ModalTabsHeader:()=>ue.H,ModalsContext:()=>Ue.kr,ModalsController:()=>Ue.JY,ModalsProvider:()=>Ue.$i,MultiSelect:()=>La.NU,PageToolbar:()=>at.X,Pagination:()=>ae.t,PanelChrome:()=>re.fm,PanelChromeLoadingIndicator:()=>pe.T,PanelContainer:()=>Un.l,PanelContextProvider:()=>be._w,PanelContextRoot:()=>be.bb,PlotLegend:()=>Qt.l,PluginSignatureBadge:()=>Xs.o,Popover:()=>p.J,PopoverController:()=>E.D,Portal:()=>y.h_,PortalContainer:()=>y.lO,QueryField:()=>te.q,RadioButtonGroup:()=>Ba.S,RadioButtonList:()=>Aa.x,RangeSlider:()=>wa.U,ReactMonacoEditor:()=>Te.o,RefreshPicker:()=>W.dP,RelativeTimeRangePicker:()=>Js.x,RenderUserContentAsHTML:()=>ke.D,ScaleDistribution:()=>Ar.wf,SecretInput:()=>zn.m,SecretTextArea:()=>Bt.Z,SecureSocksProxySettings:()=>Pt.i,Segment:()=>mn.X,SegmentAsync:()=>Mn.V,SegmentInput:()=>Gn.X,SegmentSection:()=>Fn.f,SegmentSelect:()=>$n.V,Select:()=>La.Ph,SelectContainer:()=>La.eI,SeriesColorPicker:()=>I.sp,SeriesColorPickerPopover:()=>O.j,SeriesColorPickerPopoverWithTheme:()=>O.q,SeriesIcon:()=>qt.F,SeriesTable:()=>de.c,SeriesTableRow:()=>de.V,SeriesVisibilityChangeBehavior:()=>Pe.Y,SeriesVisibilityChangeMode:()=>Ea.R,SetInterval:()=>Ne.F,SlideOutTransition:()=>nn.R,Slider:()=>ua.i,Sparkline:()=>lt.b,Spinner:()=>kt.$,StatsPicker:()=>b.m,Switch:()=>Qs.r,TLSAuthSettings:()=>Gt.s,Tab:()=>ze.O,TabContent:()=>Qe.I,TabbedContainer:()=>v.W,Table:()=>_e.i,TableInputCSV:()=>Ke.w,TabsBar:()=>et.J,Tag:()=>ce.V,TagList:()=>q.P,TagsInput:()=>Y.B,Text:()=>en.x,TextArea:()=>ma.K,TextLink:()=>cn.h,TimeOfDayPicker:()=>K.y,TimePickerTooltip:()=>V.IF,TimeRangeInput:()=>$s.K,TimeRangeLabel:()=>w.q,TimeRangePicker:()=>V.Xc,TimeSeries:()=>xn.p,TimeZonePicker:()=>z.O,Toggletip:()=>h.P,ToolbarButton:()=>es.h,ToolbarButtonRow:()=>yt.R,Tooltip:()=>c.u,TooltipPlugin:()=>rn.ii,TooltipPlugin2:()=>rn.x2,UPLOT_AXIS_FONT_SIZE:()=>vt.gD,UPlotChart:()=>Et.N,UPlotConfigBuilder:()=>Ta.U,UnitPicker:()=>B.n,UserIcon:()=>_r.t,ValuePicker:()=>bt.b,VerticalGroup:()=>ss.wc,VerticalTab:()=>je.L,VirtualizedSelect:()=>La.LT,VizLayout:()=>xe.AY,VizLegend:()=>we.l,VizLegendListItem:()=>Fe.e,VizRepeater:()=>X.Q,VizTooltip:()=>Le.I,VizTooltipContainer:()=>le.S,WeekStartPicker:()=>G.z,WithContextMenu:()=>Ht.z,XYCanvas:()=>Yt.K2,ZoomPlugin:()=>rn.Rb,buildScaleKey:()=>yn.z1,clearButtonStyles:()=>va.gN,convertOldAngularValueMapping:()=>rt.PR,defaultIntervals:()=>W.o5,fieldMatchersUI:()=>Dt.i,getCardStyles:()=>ar.L,getInputStyles:()=>Zs.H,getPortalContainer:()=>y.RN,getSelectStyles:()=>bs.D,graphFieldOptions:()=>rr.q,graphTickFormatter:()=>se.sV,graphTimeFormat:()=>se.mc,preparePlotFrame:()=>yn.Rn,resetSelectStyles:()=>ts.Z,sharedInputStyle:()=>ca.RK,sharedSingleStatMigrationHandler:()=>rt.rD,sharedSingleStatPanelChangedHandler:()=>rt.ZH,useGraphNGContext:()=>wn.z,usePanelContext:()=>be.R9,variableSuggestionToCodeEditorSuggestion:()=>he.T,withErrorBoundary:()=>xt.Pf});var n=e(12392),a=e(27325),l=e(43377),r=e(80010),o=e(81425),g=e(35829),m=e(16557),d=e(12190),u=e(68497),i=e(85387),f=e(51932),c=e(69865),E=e(66557),p=e(55407),h=e(36884),y=e(70393),s=e(64447),v=e(77514),C=e(36210),D=e(52895),M=e(97725),P=e(99560),x=e(84766),S=e(94615),I=e(69360),T=e(81573),O=e(33312),A=e(16708),B=e(61805),b=e(54173),W=e(82563),V=e(56064),w=e(48408),K=e(63930),z=e(87783),G=e(76843),Q=e(90838),j=e(16991),F=e(67823),k=e(38696),_=e(94696),Y=e(97250),Z=e(63528),ae=e(39017),ce=e(51064),q=e(3532),De=e(13868),oe=e(32840),te=e(54795),fe=e(84541),Te=e(13094),ge=e(99566),he=e(74317),me=e(73075),ye=e(1936),ue=e(35823),Oe=e(85188),Ue=e(39106),at=e(44138),Ne=e(45679),_e=e(23968),Ke=e(59158),et=e(22784),ze=e(77804),je=e(4092),Qe=e(90201),We=e(54951),ke=e(18328),ot=e(26753),lt=e(52542),Ct=e(78031),wt=e(27199),Lt=e(19032),Ye=e(84415),Be=e(24300),Le=e(49621),le=e(41013),de=e(55987),X=e(4367),se=e(38913),re=e(4185),pe=e(32961),be=e(31276),xe=e(96248),Pe=e(75881),we=e(78832),Fe=e(98095),He=e(33155),Xe=e(85574),dt=e(62818),ct=e(4516),At=e(39960),Ie=e(63544),Ze=e(95502),ut=e(846),rt=e(76117),St=e(80318),st=e(53790),tt=e(13767),ft=e(43078),$t=e(85001),Ht=e(43867),Zt=e(86467),tn=e(95540),on=e(22785),qt=e(67611),pn=e(7429),Cn=e(5217),Rt=e(19649),mt=e(72202),xt=e(41393),Ft=e(35521),zt=e(3782),Jt=e(81177),ln=e(23333),Pt=e(47169),Gt=e(40108),Kt=e(44062),kt=e(28409),dn=e(63618),nn=e(69043),mn=e(26005),Mn=e(60314),Gn=e(70967),$n=e(24955),Fn=e(75160),Yn=e(87722),ua=e(23527),wa=e(98263),ga=e(85830),ca=e(15530),Ra=e(9006),va=e(4919),Sa=e(48824),es=e(3839),yt=e(7258),bt=e(96428),Dt=e(63064),Wt=e(18950),cn=e(66729),en=e(98632),En=e(36495),Rn=e(96227),Dn=e(96276),Tn=e(2827),jn=e(43324),ra=e(69171),Jn=e(27303),Xn=e(99491),oa=e(74661),Qn=e(58464),ts=e(65435),La=e(9558),Xa=e(82449),bs=e(15246),ia=e(32109),ls=e.n(ia),As={};for(const os in ia)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","graphTimeFormat","graphTickFormatter","PanelChrome","PanelChromeLoadingIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Text","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","DropdownIndicator","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","Avatar","InlineFormLabel","Divider","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","GraphNG","FIXED_UNIT","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","BrowserLabel","PanelContainer","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(os)<0&&(As[os]=()=>ia[os]);e.d(R,As);var ss=e(12223),rs=e(12608),Ba=e(20454),Aa=e(41641),Zs=e(38637),Wa=e(28448),qa=e(41245),zn=e(10626),Bt=e(75583),Qs=e(26286),kn=e(13026),ma=e(68421),ha=e(72939),Pa=e(86320),$s=e(88252),Js=e(47158),ar=e(4236),ws=e(78020),Qa=e(6430),sr=e(5222),Pr=e(58047),Xs=e(45802),_r=e(3455),eo=e(99503),zr=e(56921),Ws=e(68832),rr=e(39480),Ar=e(34547),Ta=e(80115),vt=e(59208),Et=e(79469),Qt=e(98419),Yt=e(43523),rn=e(64535),fn=e(42626),xn=e(12569),wn=e(71170),yn=e(76685),Ea=e(52343),sa=e(52499),Un=e(41804);const ya={SecretFormField:m.c,FormField:n.W,Select:o.Ph,AsyncSelect:o.qb,IndicatorsContainer:l.B,NoOptionsMessage:r.P,Input:a.I,Switch:g.r}},63618:(J,R,e)=>{"use strict";e.d(R,{n:()=>g});var n=e(41407),a=e(39953),l=e(17088),r=e(64084);const o=(0,r.B)(m=>({enter:(0,n.css)({label:"enter",opacity:0}),enterActive:(0,n.css)({label:"enterActive",opacity:1,transition:`opacity ${m}ms ease-out`}),exit:(0,n.css)({label:"exit",opacity:1}),exitActive:(0,n.css)({label:"exitActive",opacity:0,transition:`opacity ${m}ms ease-out`})}));function g(m){const{visible:d,children:u,duration:i=250}=m,f=o(i);return a.createElement(l.Z,{in:d,mountOnEnter:!0,unmountOnExit:!0,timeout:i,classNames:f},u)}},69043:(J,R,e)=>{"use strict";e.d(R,{R:()=>g});var n=e(41407),a=e(39953),l=e(17088),r=e(64084);const o=(0,r.B)((m,d,u)=>({enter:(0,n.css)({label:"enter",[`${d}`]:0,opacity:0}),enterActive:(0,n.css)({label:"enterActive",[`${d}`]:`${u}px`,opacity:1,transition:`opacity ${m}ms ease-out, ${d} ${m}ms ease-out`}),exit:(0,n.css)({label:"exit",[`${d}`]:`${u}px`,opacity:1}),exitActive:(0,n.css)({label:"exitActive",opacity:0,[`${d}`]:0,transition:`opacity ${m}ms ease-out, ${d} ${m}ms ease-out`})}));function g(m){const{visible:d,children:u,duration:i=250,horizontal:f,size:c}=m,E=o(i,f?"width":"height",c);return a.createElement(l.Z,{in:d,mountOnEnter:!0,unmountOnExit:!0,timeout:i,classNames:E},u)}},79469:(J,R,e)=>{"use strict";e.d(R,{N:()=>m});var n=e(39953),a=e(79527),l=e(95966);function r(d,u){return u.width===d.width&&u.height===d.height}function o(d,u){return u.data===d.data}function g(d,u){return u.config===d.config}class m extends n.Component{constructor(u){super(u),this.plotContainer=(0,n.createRef)(),this.plotCanvasBBox=(0,n.createRef)(),this.state={plot:null}}reinitPlot(){let{width:u,height:i,plotRef:f}=this.props;if(this.state.plot?.destroy(),u===0&&i===0)return;this.props.config.addHook("setSize",p=>{p.over});const c={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,l.Zp)("UPlot",!1,"Reinitializing plot",c);const E=new a.Z(c,this.props.data,this.plotContainer.current);f&&f(E),this.setState({plot:E})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(u){let{plot:i}=this.state;r(u,this.props)?g(u,this.props)?o(u,this.props)||i?.setData(this.props.data):this.reinitPlot():i?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return n.createElement("div",{style:{position:"relative"}},n.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},98419:(J,R,e)=>{"use strict";e.d(R,{l:()=>c,o:()=>f});var n=e(39953),a=e(69330),l=e(73254),r=e(3181),o=e(94123),g=e(34547),m=e(82803),d=e(96248),u=e(78832);const i=E=>E==null?"-":E.toFixed(1);function f(E,p){return E.getSeries().some(h=>{const y=h.props.dataFrameFieldIndex;if(!y)return!1;const s=p[y.frameIndex]?.fields[y.fieldIndex];return!(!s||s.config.custom?.hideFrom?.legend)})}const c=n.memo(({data:E,config:p,placement:h,calcs:y,displayMode:s,...v})=>{const C=(0,m.l4)(),D=p.getSeries().map(M=>{const P=M.props,x=P.dataFrameFieldIndex,S=p.getAxisPlacement(M.props.scaleKey);if(!x)return;const I=E[x.frameIndex]?.fields[x.fieldIndex];if(!I||I.config.custom?.hideFrom?.legend)return;const T=(0,a.CZ)(I,E[x.frameIndex],E),A=(0,l.YO)(I,C).color;return{disabled:!(P.show??!0),fieldIndex:x,color:A,label:T,yAxis:S===g.LB.Left||S===g.LB.Bottom?1:2,getDisplayValues:()=>{if(!y?.length)return[];const B=I.display??i;let b=null;const W=(0,r.Kx)({field:I,reducers:y});return y.map(V=>{const w=r.TB.get(V);let K=B;return w.id===r.gz.diffperc&&(K=(0,o.U)({field:{...I,config:{...I.config,unit:"percentunit"}},theme:C})),(w.id===r.gz.count||w.id===r.gz.changeCount||w.id===r.gz.distinctCount)&&(b||(b=(0,o.U)({field:{...I,config:{...I.config,unit:"none"}},theme:C})),K=b),{...K(W[V]),title:w.name,description:w.description}})},getItemKey:()=>`${T}-${x.frameIndex}-${x.fieldIndex}`}}).filter(M=>M!==void 0);return n.createElement(d.AY.Legend,{placement:h,...v},n.createElement(u.l,{placement:h,items:D,displayMode:s,sortBy:v.sortBy,sortDesc:v.sortDesc,isSortable:!0}))});c.displayName="PlotLegend"},39480:(J,R,e)=>{"use strict";e.d(R,{q:()=>a});var n=e(34547);const a={drawStyle:[{label:"Lines",value:n.l8.Line},{label:"Bars",value:n.l8.Bars},{label:"Points",value:n.l8.Points}],lineInterpolation:[{description:"Linear",value:n.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:n.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:n.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:n.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:n.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:n.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:n.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:n.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:n.Jp.Always},{label:"Never",value:n.Jp.Never}],axisPlacement:[{label:"Auto",value:n.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:n.LB.Left},{label:"Right",value:n.LB.Right},{label:"Hidden",value:n.LB.Hidden}],fillGradient:[{label:"None",value:n.FI.None},{label:"Opacity",value:n.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:n.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:n.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:n.o0.None},{label:"Normal",value:n.o0.Normal},{label:"100%",value:n.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:n.i3.Off},{label:"As lines",value:n.i3.Line},{label:"As lines (dashed)",value:n.i3.Dashed},{label:"As filled regions",value:n.i3.Area},{label:"As filled regions and lines",value:n.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:n.i3.DashedAndArea}]}},59208:(J,R,e)=>{"use strict";e.d(R,{ff:()=>f,gD:()=>u,mr:()=>E});var n=e(83502),a=e(99331),l=e(47330),r=e(48069),o=e(34547),g=e(76297),m=e(43388),d=e(62663);const u=12,i=8;class f extends m.L{merge(y){this.props.size=(0,d.V)("max",this.props.size,y.size),this.props.label||(this.props.label=y.label),this.props.placement===o.LB.Auto&&(this.props.placement=y.placement)}calculateSpace(y,s,v,C,D){const M=y.axes[s],P=y.scales[M.scale];if(M.side!==2||!P)return 30;const x=40;if(P.time){const S=D/x,I=(C-v)/S,T=E(y,[v],s,x,I);return(0,g.X1)(T[0],u).width+18}return x}calculateAxisSize(y,s,v){const C=y.axes[v];let D=C.ticks.size;if(C.side===2)D+=C.gap+u;else if(s?.length){let M=s.reduce((x,S)=>Math.max(x,(0,g.X1)(S,u).width),0);const P=Math.min(y.width*.4,M);D+=C.gap+C.labelGap+P}return Math.ceil(D)}getConfig(){let{scaleKey:y,label:s,show:v=!0,placement:C=o.LB.Auto,grid:D={show:!0},ticks:M,space:P,filter:x,gap:S=5,formatValue:I,splits:T,values:O,incrs:A,isTime:B,timeZone:b,theme:W,tickLabelRotation:V,size:w,color:K,border:z,decimals:G,distr:Q=o.wf.Linear}=this.props;const j=`${u}px ${W.typography.fontFamily}`,F=W.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,n.br)(y)&&(T=[0,1]),G===0&&Q===o.wf.Linear&&(x=(_,Y)=>Y.map(Z=>Number.isInteger(Z)?Z:null));let k={scale:y,show:v,stroke:K??W.colors.text.primary,side:p(C),font:j,size:w??((_,Y,Z)=>this.calculateAxisSize(_,Y,Z)),rotate:V,gap:S,labelGap:0,grid:{show:D.show,stroke:F,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:z?.show?K??W.colors.text.primary:F,width:1/devicePixelRatio,size:4},M),splits:T,values:O,space:P??((_,Y,Z,ae,ce)=>this.calculateSpace(_,Y,Z,ae,ce)),filter:x,incrs:A};return z?.show&&(k.border={stroke:K??W.colors.text.primary,width:1/devicePixelRatio,...z}),s!=null&&s.length>0&&(k.label=s,k.labelSize=u+i,k.labelFont=j,k.labelGap=i),O?k.values=O:B?k.values=E:I&&(k.values=(_,Y,Z,ae,ce)=>{let q=(0,a.d)((0,a.O)(ce,6));return Y.map(De=>I(De,q>0?q:void 0))}),k.timeZone=b,k}}const c={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function E(h,y,s,v,C){const D=h.axes[s].timeZone,M=h.scales.x,P=(M?.max??0)-(M?.min??0),x=Math.round(c.year/c.day)*c.day,S=Math.round(C/c.day)*c.day;let I=l.U6.interval.year;return C<c.second?I=l.U6.interval.millisecond:C<=c.minute?I=l.U6.interval.second:P<=c.day?I=l.U6.interval.minute:C<=c.day?I=l.U6.interval.hour:P<c.year?I=l.U6.interval.day:S===x?I=l.U6.interval.year:C<=c.year&&(I=l.U6.interval.month),y.map(T=>T==null?"":(0,r.dq)(T,{format:I,timeZone:D}))}function p(h){switch(h){case o.LB.Top:return 0;case o.LB.Right:return 1;case o.LB.Bottom:return 2;case o.LB.Left:}return 3}},80115:(J,R,e)=>{"use strict";e.d(R,{U:()=>D});var n=e(86832),a=e(79527),l=e(54554),r=e(36602),o=e(34547),g=e(95966),m=e(59208),d=e(62663),u=e(97898),i=e(91249),f=e(43388),c=e(44040);class E extends f.L{getConfig(){const{facets:P,drawStyle:x,pathBuilder:S,pointsBuilder:I,pointsFilter:T,lineInterpolation:O,lineWidth:A,lineStyle:B,barAlignment:b,barWidthFactor:W,barMaxWidth:V,showPoints:w,pointSize:K,scaleKey:z,pxAlign:G,spanNulls:Q,show:j=!0}=this.props;let F={},k=this.getLineColor();F.stroke=k,F.width=A,B&&B.fill!=="solid"&&(B.fill==="dot"&&(F.cap="round"),F.dash=B.dash??[10,10]),S!=null?F.paths=S:x===o.l8.Points?F.paths=()=>null:x!=null&&(F.paths=(Z,ae,ce,q)=>h(x,O,b,W,V)(Z,ae,ce,q));const _=typeof k=="string"?k:(Z,ae)=>Z.series[ae]._stroke,Y={points:{stroke:_,fill:_,size:!K||K<A?void 0:K,filter:T}};return I!=null?Y.points.show=I:x===o.l8.Points?Y.points.show=!0:w===o.Jp.Auto?x===o.l8.Bars&&(Y.points.show=!1):w===o.Jp.Never?Y.points.show=!1:w===o.Jp.Always&&(Y.points.show=!0),{scale:z,facets:P,spanGaps:typeof Q=="number"?!1:Q,value:()=>"",pxAlign:G,show:j,fill:this.getFill(),...F,...Y}}getLineColor(){const{lineColor:P,gradientMode:x,colorMode:S,thresholds:I,theme:T,hardMin:O,hardMax:A,softMin:B,softMax:b,dynamicSeriesColor:W}=this.props;return x===o.FI.None&&W?(V,w)=>W(w)??P??u.R:x===o.FI.Scheme&&S?.id!==u.S.Fixed?(0,c.P2)(1,T,S,I,O,A,B,b):P??u.R}getFill(){const{lineColor:P,fillColor:x,gradientMode:S,fillOpacity:I,colorMode:T,thresholds:O,theme:A,hardMin:B,hardMax:b,softMin:W,softMax:V,dynamicSeriesColor:w}=this.props;if(x)return x;const K=S??o.FI.None,z=(I??0)/100;if(K===o.FI.None&&w&&z>0)return(G,Q)=>{let j=G.series[Q]._stroke;return i.alpha(j??"",z)};switch(K){case o.FI.Opacity:return(0,c.DT)(x??P,z);case o.FI.Hue:return(0,c.oN)(x??P,z,A);case o.FI.Scheme:if(T?.id!==u.S.Fixed)return(0,c.P2)(z,A,T,O,B,b,W,V);default:if(z>0)return i.alpha(P??"",z)}}}let p;function h(M,P,x=o.pu.Center,S=.6,I=200){const T=a.Z.paths;if(p||(p={linear:T.linear(),smooth:T.spline(),stepBefore:T.stepped({align:-1}),stepAfter:T.stepped({align:1})}),M===o.l8.Bars){let O=`bars|${x}|${S}|${I}`;return p[O]||(p[O]=T.bars({size:[S,I],align:x})),p[O]}else if(M===o.l8.Line){if(P===o.KC.StepBefore)return p.stepBefore;if(P===o.KC.StepAfter)return p.stepAfter;if(P===o.KC.Smooth)return p.smooth}return p.linear}var y=e(63374),s=e(60695);function v(M){const P=M.config.mode===o.i3.Dashed||M.config.mode===o.i3.DashedAndArea?[10,10]:null;function x(w,K,z,G){let Q=w.ctx,j=0;for(let F=0;F<z.length;F++)if(z[F].color==="transparent"){j=F;break}Q.lineWidth=2,P&&Q.setLineDash(P);for(let F=1;F<z.length;F++){const k=z[F];let _;j>=F&&F>0?_=(0,y.Z)(G.visualization.getColorByName(z[F-1].color)):_=(0,y.Z)(G.visualization.getColorByName(k.color)),_.getAlpha()===1&&_.setAlpha(.7);let Y=Math.round(w.bbox.left),Z=Math.round(w.valToPos(k.value,K,!0)),ae=Math.round(w.bbox.left+w.bbox.width),ce=Math.round(w.valToPos(k.value,K,!0));Q.beginPath(),Q.moveTo(Y,Z),Q.lineTo(ae,ce),Q.strokeStyle=_.toString(),Q.stroke()}}function S(w,K,z,G){let Q=w.ctx,j=(0,c.KV)(w,K,z.map(F=>{let k=(0,y.Z)(G.visualization.getColorByName(F.color));return k.getAlpha()===1&&k.setAlpha(.15),[F.value,k.toString()]}),!0);Q.fillStyle=j,Q.fillRect(w.bbox.left,w.bbox.top,w.bbox.width,w.bbox.height)}const{scaleKey:I,thresholds:T,theme:O,config:A,hardMin:B,hardMax:b,softMin:W,softMax:V}=M;return w=>{const K=w.ctx,{min:z,max:G}=w.scales.x,{min:Q,max:j}=w.scales[I];if(z==null||G==null||Q==null||j==null)return;let{steps:F,mode:k}=T;if(k===s.H.Percentage){let[_,Y]=(0,c.A9)(w,I,B,b,W,V),Z=Y-_;F=F.map(ae=>({...ae,value:_+Z*(ae.value/100)}))}switch(K.save(),A.mode){case o.i3.Line:case o.i3.Dashed:x(w,I,F,O);break;case o.i3.Area:S(w,I,F,O);break;case o.i3.LineAndArea:case o.i3.DashedAndArea:S(w,I,F,O),x(w,I,F,O)}K.restore()}}const C={drag:{setScale:!1},points:{size:(M,P)=>M.series[P].points.size*2,width:(M,P,x)=>x/4},focus:{prox:30}};class D{constructor(P=l.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=x=>{let S=new Date(x);return this.tz?a.Z.tzDate(S,this.tz):S},this.tz=(0,r.Pr)(P,Date.now())?.ianaName}addHook(P,x){(0,g.Zp)("UPlotConfigBuilder",!1,"addHook",P),this.hooks[P]||(this.hooks[P]=[]),this.hooks[P].push(x)}addThresholds(P){this.thresholds[P.scaleKey]||(this.thresholds[P.scaleKey]=P,this.addHook("drawClear",v(P)))}addAxis(P){P.placement=P.placement??o.LB.Auto,P.grid=P.grid??{};let x=P.scaleKey;if(x==="x"&&(x+=P.timeZone??""),this.axes[x]){this.axes[x].merge(P);return}P.placement===o.LB.Auto&&(P.placement=this.hasLeftAxis?o.LB.Right:o.LB.Left),P.placement===o.LB.Left&&(this.hasLeftAxis=!0),P.placement===o.LB.Hidden&&(P.grid.show=!1,P.size=0),this.axes[x]=new m.ff(P)}getAxisPlacement(P){return this.axes[P]?.props.placement??o.LB.Left}setCursor(P){this.cursor=(0,n.merge)({},this.cursor,P)}setMode(P){this.mode=P}setSelect(P){this.select=P}addSeries(P){this.series.push(new E(P))}getSeries(){return this.series}addScale(P){const x=this.scales.find(S=>S.props.scaleKey===P.scaleKey);if(x){x.merge(P);return}this.scales.push(new d.I(P))}addBand(P){this.bands.push(P)}setStackingGroups(P){this.stackingGroups=P}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(P){this.tooltipInterpolator=P}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(P){this.prepData=x=>(this.frames=x,P(x,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(P){this.padding=P}getConfig(){const P={...g.qt,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};P.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(S=>S.getConfig()),P.series=[...P.series,...this.series.map(S=>S.getConfig())],P.scales=this.scales.reduce((S,I)=>({...S,...I.getConfig()}),{}),P.hooks=this.hooks,P.select=this.select;const x=(S="")=>(I,T)=>{let O=I.series[T].points._stroke;if(typeof O!="string"){let A=this.frames[0].fields[T];O=A.display(A.values[I.cursor.idxs[T]]).color}return O+S};return P.cursor=(0,n.merge)({},C,{points:{stroke:x("80"),fill:x()}},this.cursor),P.tzDate=this.tzDate,Array.isArray(this.padding)&&(P.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(S=>{(0,g.Kq)(S).forEach(I=>{this.addBand(I)})}),this.bands.length&&(P.bands=this.bands),P}ensureNonOverlappingAxes(P){const x=P.find(T=>T.props.scaleKey==="x"),S=P.filter(T=>T.props.grid?.show===void 0),I=S.findIndex(T=>T.props.placement===o.LB.Left||T.props.placement===o.LB.Right||T.props.placement===o.LB.Bottom&&T!==x);for(let T=0;T<S.length;T++)S[T]===x||T===I?S[T].props.grid.show=!0:S[T].props.grid.show=!1;return P}}},62663:(J,R,e)=>{"use strict";e.d(R,{I:()=>g,V:()=>m});var n=e(79527),a=e(80742),l=e(83502),r=e(34547),o=e(43388);class g extends o.L{merge(u){this.props.min=m("min",this.props.min,u.min),this.props.max=m("max",this.props.max,u.max)}getConfig(){let{isTime:u,scaleKey:i,min:f,max:c,softMin:E,softMax:p,range:h,direction:y,orientation:s,centeredZero:v,decimals:C}=this.props;const D=this.props.distribution,M=u?{}:{distr:D===r.wf.Symlog?4:D===r.wf.Log?3:D===r.wf.Ordinal?2:1,log:D===r.wf.Log||D===r.wf.Symlog?this.props.log??2:void 0,asinh:D===r.wf.Symlog?this.props.linearThreshold??1:void 0};if(D===r.wf.Log){let b=this.props.log,W=b===2?Math.log2:Math.log10;f!=null&&(f<=0?f=null:f=b**Math.floor(W(f))),c!=null&&(c<=0?c=null:c=b**Math.ceil(W(c))),E!=null&&(E<=0?E=null:E=b**Math.floor(W(E))),p!=null&&(p<=0?p=null:p=b**Math.ceil(W(p)))}let P=E==null?3:1,x=p==null?3:1;const S={min:{pad:.1,hard:f??-1/0,soft:E||0,mode:P},max:{pad:.1,hard:c??1/0,soft:p||0,mode:x}};let I=E==null&&f!=null,T=p==null&&c!=null,O=I&&T;const A=(b,W,V,w)=>{const K=b.scales[w];let z=[W,V];if(w==="x"&&!u&&D===r.wf.Linear||!O&&W==null&&V==null)return z;let G=K.log??10;if(K.distr===1||K.distr===2||K.distr===4){if(v){let Q=Math.abs(W),j=Math.abs(V),F=Math.max(Q,j);F===0&&(F=80),W=-F,V=F}K.distr===4?z=n.Z.rangeAsinh(W,V,G,!0):z=n.Z.rangeNum(I?f:W,T?c:V,S)}else K.distr===3&&(z=n.Z.rangeLog(f??W,c??V,G,!0));if(C===0)if(K.distr===1||K.distr===2)z[0]=(0,a.mB)(z[0],1),z[1]=(0,a.UO)(z[1],1);else if(K.distr===3){let Q=K.log===2?Math.log2:Math.log10;if(z[0]<=1)z[0]=1;else{let F=Math.floor(Q(z[0]));z[0]=G**F}let j=Math.ceil(Q(z[1]));z[1]=G**j,z[0]===z[1]&&(z[1]*=G)}else K.distr===4&&(z[0]=(0,a.mB)(z[0],1),z[1]=(0,a.UO)(z[1],1));return(K.distr===1||K.distr===4)&&(I&&(z[0]=f),T&&(z[1]=c)),z[0]>=z[1]&&(z[0]=K.distr===3?1:0,z[1]=100),z};let B=!u&&!O;return(0,l.br)(i)&&(B=!1,h=[0,1]),{[i]:{time:u,auto:B,range:h??A,dir:y,ori:s,...M}}}}function m(d,u,i){const f=u!=null,c=i!=null;return f?c?d==="min"?u<i?u:i:u>i?u:i:u:i}},44040:(J,R,e)=>{"use strict";e.d(R,{A9:()=>E,DT:()=>d,KV:()=>f,P2:()=>p,oN:()=>u});var n=e(63374),a=e(91249),l=e(97898),r=e(60695),o=e(34547),g=e(76297);function m(h,y,s){let v=0,C=0,D=0,M=0;return h===3?(C=y.top,M=y.top+y.height):h===2?(v=y.left+y.width,D=y.left):h===1?(C=y.top+y.height,M=y.top):h===0&&(v=y.left,D=y.left+y.width),s.createLinearGradient(v,C,D,M)}function d(h,y){return(s,v)=>{const C=(0,g.AE)(),D=m(s.scales.x.ori===o.wN.Horizontal?3:2,s.bbox,C);return D.addColorStop(0,a.alpha(h,y)),D.addColorStop(1,a.alpha(h,0)),D}}function u(h,y,s){return(v,C)=>{const D=(0,g.AE)(),M=m(v.scales.x.ori===o.wN.Horizontal?3:2,v.bbox,D),P=(0,n.Z)(h).spin(-15),x=(0,n.Z)(h).spin(15);return s.isDark?(M.addColorStop(0,x.lighten(10).setAlpha(y).toString()),M.addColorStop(1,P.darken(10).setAlpha(y).toString())):(M.addColorStop(0,x.lighten(10).setAlpha(y).toString()),M.addColorStop(1,P.setAlpha(y).toString())),M}}var i=(h=>(h[h.Right=0]="Right",h[h.Up=1]="Up",h[h.Left=2]="Left",h[h.Down=3]="Down",h))(i||{});function f(h,y,s,v=!1){let C=h.scales[y],D=null,M=null;for(let K=0;K<s.length;K++){let z=s[K][0];if((z<=C.min||D==null)&&(D=K),M=K,z>=C.max)break}if(D===M)return s[D][1];let P=s[D][0],x=s[M][0];P===-1/0&&(P=C.min),x===1/0&&(x=C.max);let S=Math.round(h.valToPos(P,y,!0)),I=Math.round(h.valToPos(x,y,!0)),T=S-I;if(T===0)return s[M][1];let O,A,B,b;h.scales.x.ori===o.wN.Horizontal?(O=B=0,A=S,b=I):(A=b=0,O=S,B=I);let V=(0,g.AE)().createLinearGradient(O,A,B,b),w;for(let K=D;K<=M;K++){let z=s[K],G=K===D?S:K===M?I:Math.round(h.valToPos(z[0],y,!0)),Q=(S-G)/T;v&&K>D&&V.addColorStop(Q,w),V.addColorStop(Q,w=z[1])}return V}function c(h,y){let s=h.scales[y],v=1/0,C=-1/0;return h.series.forEach((D,M)=>{if(D.show&&D.scale===y)if(D.min==null){let P=h.data[M];for(let x=0;x<P.length;x++)P[x]!=null&&(v=Math.min(v,P[x]),C=Math.max(C,P[x]))}else v=Math.min(v,D.min),C=Math.max(C,D.max)}),C===v&&(v=s.min,C=s.max),[v,C]}function E(h,y,s,v,C,D){let M=s??C??null,P=v??D??null;if(M==null||P==null){let[x,S]=c(h,y);M=M??x??0,P=P??S??100}return[M,P]}function p(h,y,s,v,C,D,M,P){if(!s)throw Error("Missing colorMode required for color scheme gradients");if(!v)throw Error("Missing thresholds required for color scheme gradients");return(x,S)=>{let I=x.series[S].scale,T="";if(s.id===l.S.Thresholds)if(v.mode===r.H.Absolute){const O=v.steps.map(A=>[A.value,a.alpha(y.visualization.getColorByName(A.color),h)]);T=f(x,I,O,!0)}else{const[O,A]=E(x,I,C,D,M,P),B=A-O,b=v.steps.map(W=>[O+B*(W.value/100),a.alpha(y.visualization.getColorByName(W.color),h)]);T=f(x,I,b,!0)}else if(s.getColors){const O=s.getColors(y),[A,B]=E(x,I,C,D,M,P),b=B-A,W=O.map((V,w)=>[A+b*(w/(O.length-1)),a.alpha(y.visualization.getColorByName(V),h)]);T=f(x,I,W,!1)}return T}}},33582:(J,R,e)=>{"use strict";e.d(R,{T:()=>o});var n=e(39953),a=e(87786),l=e(88611),r=e(52844);function o({id:g,events:m,renderEventMarker:d,mapEventToXYCoords:u,config:i}){const f=(0,n.useRef)(),[c,E]=(0,n.useState)(0),p=(0,a.Z)();(0,n.useLayoutEffect)(()=>{i.addHook("init",y=>{f.current=y}),i.addHook("draw",()=>{p()&&E(y=>y+1)})},[i,E]);const h=(0,n.useMemo)(()=>{const y=[];if(!f.current||m.length===0)return y;for(let s=0;s<m.length;s++){const v=m[s];for(let C=0;C<v.length;C++){const D=u(v,{fieldIndex:C,frameIndex:s});D&&y.push(n.createElement(l.J,{...D,key:`${g}-marker-${s}-${C}`},d(v,{fieldIndex:C,frameIndex:s})))}}return n.createElement(n.Fragment,null,y)},[m,d,c]);return f.current?n.createElement(r.K,{left:f.current.bbox.left/window.devicePixelRatio,top:f.current.bbox.top/window.devicePixelRatio},h):null}},88611:(J,R,e)=>{"use strict";e.d(R,{J:()=>a});var n=e(39953);const a=({x:l,y:r,children:o})=>n.createElement("div",{style:{position:"absolute",top:`${r}px`,left:`${l}px`}},o)},52844:(J,R,e)=>{"use strict";e.d(R,{K:()=>l});var n=e(41407),a=e(39953);const l=({children:r,left:o,top:g})=>{const m=(0,a.useMemo)(()=>(0,n.css)({position:"absolute",overflow:"visible",left:`${o}px`,top:`${g}px`}),[o,g]);return a.createElement("div",{className:m},r)}},43523:(J,R,e)=>{"use strict";e.d(R,{Jx:()=>a.J,K2:()=>l.K,TZ:()=>n.T});var n=e(33582),a=e(88611),l=e(52844)},62806:(J,R,e)=>{"use strict";e.d(R,{C:()=>d});var n=e(86832),a=e.n(n),l=e(39953);const r=.1,o=2,g=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),m=u=>{let i=u.root.closest("[tabindex]"),f=new Set,c=null,E=null;if(!i)return;const p=(M,P)=>{const{cursor:x}=u;if(x.left===void 0||x.top===void 0)return;const{width:S,height:I}=u.over.style,[T,O]=[Math.floor(parseFloat(S)),Math.floor(parseFloat(I))];u.setCursor({left:(0,n.clamp)(x.left+M,0,T),top:(0,n.clamp)(x.top+P,0,O)})},h=M=>{if(f.size===0||!u){E=null;return}const S=(M-(E??M))*r;let I=0,T=0;f.has("ArrowUp")&&(T-=S),f.has("ArrowDown")&&(T+=S),f.has("ArrowLeft")&&(I-=S),f.has("ArrowRight")&&(I+=S),f.has("Shift")&&(I*=o,T*=o),p(I,T);const{cursor:O}=u;if(f.has(" ")&&O){const A=Number(u.over.style.height.slice(0,-2));u.setSelect({left:O.left<c?O.left:c,top:0,width:Math.abs(O.left-(c??O.left)),height:A},!1)}E=M,window.requestAnimationFrame(h)},y=M=>{if(M.key==="Tab"){u.setCursor({left:-5,top:-5});return}if(!g.has(M.key))return;if(M.preventDefault(),M.stopPropagation(),!f.has(M.key)){const x=f.size===0;f.add(M.key),c=M.key===" "&&c===null?u.cursor.left:c,x&&window.requestAnimationFrame(h)}},s=M=>{g.has(M.key)&&(f.delete(M.key),M.key===" "&&(M.preventDefault(),M.stopPropagation(),u.setSelect(u.select),c=null))},v=()=>{if(!i?.matches(":focus-visible"))return;const M=parseFloat(u.over.style.width),P=parseFloat(u.over.style.height);u.setCursor({left:M/2,top:P/2})},C=()=>{E=null,c=null,f.clear(),u.setSelect({left:0,top:0,width:0,height:0},!1)};i.addEventListener("keydown",y),i.addEventListener("keyup",s),i.addEventListener("focus",v),i.addEventListener("blur",C);const D=()=>{i?.removeEventListener("keydown",y),i?.removeEventListener("keyup",s),i?.removeEventListener("focus",v),i?.removeEventListener("blur",C),i=null};(u.hooks.destroy??=[]).push(D)},d=({config:u})=>((0,l.useLayoutEffect)(()=>u.addHook("init",m),[u]),null)},18577:(J,R,e)=>{"use strict";e.d(R,{_:()=>D,i:()=>v});var n=e(41407),a=e(39953),l=e(87786),r=e(40793),o=e(94123),g=e(97898),m=e(69330),d=e(83502),u=e(89591),i=e(24571),f=e(34547),c=e(82803),E=e(70393),p=e(55987),h=e(41013),y=e(95966);const s=10,v=({mode:P=f.f3.Single,sortOrder:x=f.As.None,sync:S,timeZone:I,config:T,renderTooltip:O,...A})=>{const B=(0,a.useRef)(),b=(0,c.l4)(),[W,V]=(0,a.useState)(null),[w,K]=(0,a.useState)(null),[z,G]=(0,a.useState)([]),[Q,j]=(0,a.useState)(null),[F,k]=(0,a.useState)(!1),_=(0,l.Z)();let Y=null;const Z="TooltipPlugin",ae=(0,c.wW)(M);if((0,a.useEffect)(()=>{(0,y.Zp)(Z,!0,`Focused series: ${W}, focused point: ${w}`)},[w,W]),(0,a.useLayoutEffect)(()=>{let te;const fe=()=>{_()&&(k(!0),B.current?.root.classList.add("plot-active"))},Te=()=>{_()&&(j(null),k(!1),B.current?.root.classList.remove("plot-active"))};T.addHook("syncRect",(he,me)=>te=me),T.addHook("init",he=>{B.current=he,he.over.addEventListener("mouseenter",fe),he.over.addEventListener("mouseleave",Te),Y=he.root.closest("[tabindex]"),Y&&(Y.addEventListener("focus",fe),Y.addEventListener("blur",Te)),S&&S()===r.m.Crosshair&&he.root.classList.add("shared-crosshair")});const ge=T.getTooltipInterpolator();return ge?T.addHook("setCursor",he=>{ge(V,K,me=>{if(me){j(null);return}if(!te)return;const{x:ye,y:ue}=D(he,te);ye!==void 0&&ue!==void 0&&j({x:ye,y:ue})},he)}):(T.addHook("setLegend",he=>{_()&&(K(he.legend.idx),G(he.legend.idxs.slice()))}),T.addHook("setCursor",he=>{if(!te||!_())return;const{x:me,y:ye}=D(he,te);j(me!==void 0&&ye!==void 0?{x:me,y:ye}:null)}),T.addHook("setSeries",(he,me)=>{_()&&V(me)})),()=>{j(null),B.current&&(B.current.over.removeEventListener("mouseleave",Te),B.current.over.removeEventListener("mouseenter",fe),Y&&(Y.removeEventListener("focus",fe),Y.removeEventListener("blur",Te)))}},[T,j,k,K,G]),w===null||!F&&S&&S()===r.m.Crosshair)return null;let ce=A.data.fields[0];if(!ce)return null;const q=ce.display||(0,o.U)({field:ce,timeZone:I,theme:b});let De=null,oe=q(ce.values[w]).text;if(O)De=O(A.data,W,w);else{if(P===f.f3.Single&&W!==null){const te=A.data.fields[W];if(!te)return null;const fe=z?.[W]??w;oe=q(ce.values[fe]).text;const ge=(te.display||(0,o.U)({field:te,timeZone:I,theme:b}))(te.values[fe]);De=a.createElement(p.c,{series:[{color:ge.color||g.R,label:(0,m.CZ)(te,A.data,A.frames),value:ge?(0,d.zc)(ge):null}],timestamp:oe})}if(P===f.f3.Multi){let te=[];const fe=A.data,Te=fe.fields,ge=[];for(let he=0;he<Te.length;he++){const me=fe.fields[he];if(!me||me===ce||me.type===u.fS.time||me.type!==u.fS.number||me.config.custom?.hideFrom?.tooltip||me.config.custom?.hideFrom?.viz)continue;const ye=A.data.fields[he].values[z[he]],ue=me.display(ye);ge.push(ye),te.push({color:ue.color||g.R,label:(0,m.CZ)(me,fe,A.frames),value:ue?(0,d.zc)(ue):null,isActive:W===he})}if(x!==f.As.None){const he=[...te],me=i.sortValues(x);te.sort((ye,ue)=>{const Oe=he.indexOf(ye),Ue=he.indexOf(ue);return me(ge[Oe],ge[Ue])})}De=a.createElement(p.c,{series:te,timestamp:oe})}}return a.createElement(E.h_,{className:F?ae.tooltipWrapper:void 0},De&&Q&&a.createElement(h.S,{position:{x:Q.x,y:Q.y},offset:{x:s,y:s}},De))};function C({left:P,top:x},S){return P===void 0||x===void 0?!1:P<0||P>S.width||x<0||x>S.height}function D(P,x){let S,I;const T=P.cursor.left||0,O=P.cursor.top||0;if(C(P.cursor,x)){const A=P.posToIdx(T);if(O<0||O>x.height){let B=(0,y.ah)(P,A);B&&(I=x.top+B,T>=0&&T<=x.width&&(S=x.left+P.valToPos(P.data[0][P.posToIdx(T)],P.series[0].scale)))}}else S=x.left+T,I=x.top+O;return{x:S,y:I}}const M=P=>({tooltipWrapper:(0,n.css)({"z-index":P.zIndex.portal+1+" !important"})})},37437:(J,R,e)=>{"use strict";e.d(R,{R:()=>r});var n=e(39953);const a=5,l=o=>o!=null&&!o.ctrlKey&&!o.metaKey,r=({onZoom:o,config:g,withZoomY:m=!1})=>((0,n.useLayoutEffect)(()=>{let d=!1,u=!1;m&&g.addHook("init",i=>{i.over.addEventListener("mousedown",f=>{if(l(f)&&f.button===0&&f.shiftKey){u=!0,i.cursor.drag.x=!1,i.cursor.drag.y=!0;let c=E=>{i.cursor.drag.x=!0,i.cursor.drag.y=!1,document.removeEventListener("mouseup",c,!0)};document.addEventListener("mouseup",c,!0)}},!0)}),g.addHook("setSelect",i=>{if(l(i.cursor.event)){if(m&&u){if(i.select.height>=a){for(let f in i.scales)if(f!=="x"){const c=i.posToVal(i.select.top,f),E=i.posToVal(i.select.top+i.select.height,f);i.setScale(f,{min:E,max:c})}d=!0}u=!1}else if(i.select.width>=a){const f=i.posToVal(i.select.left,"x"),c=i.posToVal(i.select.left+i.select.width,"x");o({from:f,to:c}),d=!1}}i.setSelect({left:0,width:0,top:0,height:0},!1)}),g.setCursor({bind:{dblclick:i=>()=>{if(!l(i.cursor.event))return null;if(m&&d){for(let f in i.scales)f!=="x"&&i.setScale(f,{min:null,max:null});d=!1}else{let f=i.scales.x;const c=f.min,E=f.max,p=(E-c)/2;o({from:c-p,to:E+p})}return null}}})},[g]),null)},64535:(J,R,e)=>{"use strict";e.d(R,{Cm:()=>p.C,ii:()=>a.i,x2:()=>c,Rb:()=>n.R});var n=e(37437),a=e(18577),l=e(41407),r=e(39953),o=e(49065),g=e(82803),m=e(68497);const d=({onClick:h,"aria-label":y,style:s})=>{const v=(0,g.wW)(u);return r.createElement(m.h,{"aria-label":y??"Close",className:v,name:"times",onClick:h,style:s,tooltip:"Close"})},u=h=>(0,l.css)({position:"absolute",right:h.spacing(.5),top:h.spacing(1)});function i(h,y){return{...h,...y,style:{...h.style,...y.style}}}const f={style:{transform:"",pointerEvents:"none"},isHovering:!1,isPinned:!1,contents:null,plot:null,dismiss:()=>{}},c=({config:h,render:y})=>{const s=(0,r.useRef)(null),[{plot:v,isHovering:C,isPinned:D,contents:M,style:P,dismiss:x},S]=(0,r.useReducer)(i,f),I=(0,r.useRef)(),T=(0,g.wW)(E);return(0,r.useLayoutEffect)(()=>{I.current={width:0,height:0,observer:new ResizeObserver(Z=>{let ae=I.current;for(const ce of Z)ce.borderBoxSize?.length>0?(ae.width=ce.borderBoxSize[0].inlineSize,ae.height=ce.borderBoxSize[0].blockSize):(ae.width=ce.contentRect.width,ae.height=ce.contentRect.height)})};let O=v,A=C,B=D,b=P,W=0,V=0,w=document.documentElement,K=w.clientWidth-16,z=w.clientHeight-16;window.addEventListener("resize",Z=>{K=w.clientWidth-5,z=w.clientHeight-5});let G=null,Q=!1,j=!1;const F=(Z=!1)=>{Q||(A?queueMicrotask(_):setTimeout(_,100),Q=!0),Z&&(j=!0)},k=Z=>{Z.target.closest(`.${T.tooltipWrapper}`)!==s.current&&Y()},_=()=>{Q=!1,j&&(b={pointerEvents:B?"all":"none"},s.current.closest(".react-grid-item")?.classList.toggle("context-menu-open",B),O.cursor._lock=B,B?(document.addEventListener("mousedown",k,!0),document.addEventListener("keydown",k,!0)):(document.removeEventListener("mousedown",k,!0),document.removeEventListener("keydown",k,!0)),j=!1);let Z={style:b,isPinned:B,isHovering:A,contents:A?y(O,O.cursor.idxs,G,B,Y):null,dismiss:Y};S(Z)},Y=()=>{B=!1,A=!1,O.setCursor({left:-10,top:-10}),F(!0)};h.addHook("init",Z=>{S({plot:O=Z}),Z.over.addEventListener("click",ae=>{A&&!B&&ae.target===Z.over&&(B=!0,F(!0))})}),h.addHook("setLegend",Z=>{O.cursor.idxs.some(ce=>ce!=null)?A||(A=!0):A&&(A=!1),F()}),h.addHook("setSeries",(Z,ae)=>{Z.series.length>2&&G!==ae&&(G=ae,F())}),h.addHook("setCursor",Z=>{let{left:ae=-10,top:ce=-10}=Z.cursor;if(ae>=0||ce>=0){let{width:q,height:De}=I.current,oe=Z.rect.left+ae,te=Z.rect.top+ce;V?te+De<z||te-De<0?V=0:V!==-De&&(V=-De):te+De>z&&te-De>=0&&(V=-De),W?oe+q<K||oe-q<0?W=0:W!==-q&&(W=-q):oe+q>K&&oe-q>=0&&(W=-q);const ge=`${W!==0?"translateX(-100%)":""} translateX(${ae}px) ${V!==0?"translateY(-100%)":""} translateY(${ce}px)`;A&&(s.current!=null?s.current.style.transform=ge:(b.transform=ge,F()))}})},[h]),(0,r.useLayoutEffect)(()=>{const O=I.current;s.current!=null&&O.observer.observe(s.current)},[s.current]),v&&C?(0,o.createPortal)(r.createElement("div",{className:T.tooltipWrapper,style:P,ref:s},D&&r.createElement(d,{onClick:x,style:{top:"16px"}}),M),v.over):null},E=h=>({tooltipWrapper:(0,l.css)({top:0,left:0,zIndex:h.zIndex.tooltip,padding:"8px",whiteSpace:"pre",borderRadius:h.shape.radius.default,position:"absolute",background:h.colors.background.secondary,boxShadow:`0 4px 8px ${h.colors.background.primary}`,userSelect:"text"})});var p=e(62806)},43388:(J,R,e)=>{"use strict";e.d(R,{L:()=>n});class n{constructor(l){this.props=l}}},95966:(J,R,e)=>{"use strict";e.d(R,{Bj:()=>p,Kq:()=>c,Zp:()=>C,ah:()=>h,i7:()=>E,qt:()=>i});var n=e(89591),a=e(26204),l=e(34547),r=e(66841),o=e(42851),g=e(76685);const m=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function d(D){return D.replace(m,M=>`{${M}}`)}const u=(D,M,P)=>{let x=M%2?P[0]||P[2]:P[1]||P[3];return P[M]||!x?0:8},i={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[u,u,u,u],series:[],hooks:{}};var f=(D=>(D[D.Pos=1]="Pos",D[D.Neg=-1]="Neg",D))(f||{});function c(D){let M=[],{series:P,dir:x}=D,S=P.length-1,I=P.slice().reverse();return I.forEach((T,O)=>{if(O!==S){let A=I[O+1];M.push({series:[T,A],dir:-1*x})}}),M}function E(D){let M=new Map;return D.fields.forEach(({config:P,values:x,type:S},I)=>{if(I===0)return;let{custom:T}=P;if(T==null||T.hideFrom?.viz)return;let{stacking:O}=T;if(O==null)return;let{mode:A,group:B}=O;if(A===l.o0.None)return;let b=T.transform,W=y(b,x),V=T.drawStyle,w=V===l.l8.Bars?T.barAlignment:V===l.l8.Line?T.lineInterpolation:null,K=`${W}|${A}|${B}|${(0,g.z1)(P,S)}|${V}|${w}`,z=M.get(K);z==null&&(z={series:[],dir:W},M.set(K,z)),z.series.push(I)}),[...M.values()]}function p(D,M,P){let x=Array(D.fields.length),S=M.length,I=D.length,T=S>0?Array(I).fill(0):[],O=S>0?Array(I).fill(!1):[],A=Array.from({length:S},()=>T.slice()),B=Array.from({length:S},()=>O.slice());if(M.forEach((b,W)=>{let V=B[W];b.series.forEach(w=>{let K=D.fields[w];if(K.config.custom?.hideFrom?.viz)return;let z=K.values;for(let G=0;G<I;G++)z[G]!=null&&(V[G]=!0)})}),D.fields.forEach((b,W)=>{let V=b.values;if(W===0){b.type===n.fS.time?x[W]=(0,a.J_)(b).values:x[W]=V;return}let{custom:w}=b.config;if(!w||w.hideFrom?.viz){x[W]=V;return}if(w.transform===l.pR.Constant){let z=V.findIndex(Q=>Q!=null),G=V[z];V=Array(V.length).fill(void 0),V[z]=G}else if(V=V.slice(),w.transform===l.pR.NegativeY)for(let z=0;z<V.length;z++)V[z]!=null&&(V[z]*=-1);let K=w.stacking?.mode;if(!K||K===l.o0.None)x[W]=V;else{let z=M.findIndex(F=>F.series.indexOf(W)>-1),G=A[z],Q=B[z],j=x[W]=Array(I);for(let F=0;F<I;F++){let k=V[F];k!=null?j[F]=G[F]+=k:j[F]=Q[F]?G[F]:k}}}),P){let b=x.map((W,V)=>{let w=M.findIndex(K=>K.series.indexOf(V)>-1);return w!==-1?A[w]:W});P({totals:b})}return D.fields.forEach((b,W)=>{if(W===0||b.config.custom?.hideFrom?.viz)return;if(b.config.custom?.stacking?.mode===l.o0.Percent){let w=M.findIndex(Q=>Q.series.indexOf(W)>-1),K=A[w],z=M[w],G=x[W];for(let Q=0;Q<I;Q++){let j=G[Q];j!=null&&(G[Q]=K[Q]===0?0:z.dir*(j/K[Q]))}}}),x}function h(D,M){let P,x=1,S=1,I=D.data[1][M],T=D.data[1][M];for(let O=1;O<D.data.length;O++){const B=D.data[O][M];B!=null&&(I==null?I=B:B>I&&(I=D.data[O][M],x=O),T==null?T=B:B<T&&(T=D.data[O][M],S=O))}return T==null&&I==null?P=void 0:T!=null&&I!=null?P=(D.valToPos(T,D.series[S].scale)+D.valToPos(I,D.series[x].scale))/2:P=D.valToPos(T||I,D.series[x||S].scale),P!==void 0&&P<0&&(P=D.bbox.height/devicePixelRatio),P}function y(D,M){const P=s(M);return D===l.pR.NegativeY?P?1:-1:P?-1:1}function s(D,M=100){const P=D.length;if(P===0)return!1;let x=0,S=P-1;for(;x<=S&&D[x]==null;)x++;for(;S>=x&&D[S]==null;)S--;let I=0,T=0;if(S>=x){const O=Math.max(1,Math.floor((S-x+1)/M));for(let A=x;A<=S;A+=O){const B=D[A];B!=null&&(B<0||Object.is(B,-0)?I++:B>0&&T++)}if(I>T)return!0}return!1}const v=(0,o.h)("uPlot"),C=v.logger;(0,r.x)("graphng",void 0,v)},41730:(J,R,e)=>{"use strict";e.r(R),e.d(R,{ALERTING_COLOR:()=>r.ns,AxisPlacement:()=>d.LB,BarAlignment:()=>d.pu,BarValueVisibility:()=>d.eU,BracesPlugin:()=>m.hP,ClearPlugin:()=>m.Gp,ClipboardPlugin:()=>m.wl,DEFAULT_ANNOTATION_COLOR:()=>r.Jx,DOMUtil:()=>r.Qi,DrawStyle:()=>d.$6,EventsWithValidation:()=>r.JU,GlobalStyles:()=>o.nz,GraphGradientMode:()=>d.FI,GraphTresholdsStyleMode:()=>d.i3,IndentationPlugin:()=>m.Rc,LegendDisplayMode:()=>d.jK,LineInterpolation:()=>d.KC,NO_DATA_COLOR:()=>r._V,NewlinePlugin:()=>m.z2,NodeGraphDataFrameFieldNames:()=>r.zG,OK_COLOR:()=>r.te,PENDING_COLOR:()=>r.f7,PointVisibility:()=>d.mv,REGION_FILL_ALPHA:()=>r.iV,ReactUtils:()=>r.Ot,RunnerPlugin:()=>m.dv,SCHEMA:()=>r.Yi,ScaleDirection:()=>d.bQ,ScaleOrientation:()=>d.wN,SearchFunctionType:()=>r.nu,SelectionShortcutsPlugin:()=>m.$L,SlatePrism:()=>m.Ze,StackingMode:()=>d.o0,SuggestionsPlugin:()=>m.bm,TableCellDisplayMode:()=>d.h2,ThemeContext:()=>o.Ni,TooltipDisplayMode:()=>d.f3,ansicolor:()=>r._J,attachDebugger:()=>r.xq,calculateFontSize:()=>r.MX,colors:()=>r.O9,commonOptionsBuilder:()=>g.q,createLogger:()=>r.hu,fuzzyMatch:()=>r.C6,getCanvasContext:()=>r.AE,getCellLinks:()=>r.iu,getScrollbarWidth:()=>r.np,getTagColor:()=>r.vm,getTagColorIndexFromName:()=>r.tu,getTagColorsFromName:()=>r.Bx,getTextColorForAlphaBackground:()=>r.bM,getTextColorForBackground:()=>r.Gc,getTheme:()=>o.gh,hasValidationEvent:()=>r.z3,isCompactUrl:()=>r.go,linkModelToContextMenuItems:()=>r.Rc,makeFragment:()=>r.xl,makeValue:()=>r.l1,measureText:()=>r.X1,mockTheme:()=>o.Zu,mockThemeContext:()=>o.sJ,regexValidation:()=>r.FE,sortedColors:()=>r.Wm,styleMixins:()=>o.GU,stylesFactory:()=>o.Bb,useForceUpdate:()=>r.NW,useStyles:()=>o.yK,useStyles2:()=>o.wW,useTheme:()=>o.Fg,useTheme2:()=>o.l4,validate:()=>r.Gu,withTheme:()=>o.Zz,withTheme2:()=>o.HE});var n=e(3587),l={};for(const u in n)u!=="default"&&(l[u]=()=>n[u]);e.d(R,l);var a=e(78963),l={};for(const u in a)["default","Alert","AlertingSettings","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","AutoSaveField","AutoSizeInput","Avatar","Badge","BarGauge","BarGaugeDisplayMode","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","BrowserLabel","Button","ButtonCascader","ButtonGroup","ButtonSelect","CallToActionCard","Card","CardContainer","Cascader","CertificationKey","Checkbox","ClickOutsideWrapper","ClipboardButton","CodeEditor","CodeEditorSuggestionItemKind","CollapsableSection","Collapse","ColorPicker","ColorPickerInput","ConfirmButton","ConfirmModal","Container","ContextMenu","ControlledCollapse","Counter","CustomHeadersSettings","CustomScrollbar","DataLinkButton","DataLinkInput","DataLinksContextMenu","DataLinksInlineEditor","DataSourceHttpSettings","DatePicker","DatePickerWithInput","DateTimePicker","DeleteButton","Divider","Drawer","Dropdown","DropdownIndicator","EmptySearchResult","ErrorBoundary","ErrorBoundaryAlert","ErrorWithStack","EventsCanvas","FIXED_UNIT","FadeTransition","FeatureBadge","FeatureInfoBox","Field","FieldArray","FieldLinkList","FieldSet","FieldValidationMessage","FileDropzone","FileDropzoneDefaultChildren","FileListItem","FileUpload","FilterInput","FilterPill","Form","FormattedValueDisplay","FullWidthButtonContainer","Gauge","Graph","GraphContextMenu","GraphContextMenuHeader","GraphNG","GraphSeriesToggler","GraphWithLegend","HorizontalGroup","Icon","IconButton","InfoBox","InlineField","InlineFieldRow","InlineFormLabel","InlineLabel","InlineSegmentGroup","InlineSwitch","InlineToast","Input","InputControl","InteractiveTable","JSONFormatter","JsonExplorer","KeyboardPlugin","Label","LegacyForms","LegacyInputStatus","Legend","Link","LinkButton","List","LoadingBar","LoadingPlaceholder","Marker","Menu","MenuGroup","MenuItem","Modal","ModalHeader","ModalRoot","ModalTabContent","ModalTabsHeader","ModalsContext","ModalsController","ModalsProvider","MultiSelect","PageToolbar","Pagination","PanelChrome","PanelChromeLoadingIndicator","PanelContainer","PanelContextProvider","PanelContextRoot","PlotLegend","PluginSignatureBadge","Popover","PopoverController","Portal","PortalContainer","QueryField","RadioButtonGroup","RadioButtonList","RangeSlider","ReactMonacoEditor","RefreshPicker","RelativeTimeRangePicker","RenderUserContentAsHTML","ScaleDistribution","SecretInput","SecretTextArea","SecureSocksProxySettings","Segment","SegmentAsync","SegmentInput","SegmentSection","SegmentSelect","Select","SelectContainer","SeriesColorPicker","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","SeriesIcon","SeriesTable","SeriesTableRow","SeriesVisibilityChangeBehavior","SeriesVisibilityChangeMode","SetInterval","SlideOutTransition","Slider","Sparkline","Spinner","StatsPicker","Switch","TLSAuthSettings","Tab","TabContent","TabbedContainer","Table","TableInputCSV","TabsBar","Tag","TagList","TagsInput","Text","TextArea","TextLink","TimeOfDayPicker","TimePickerTooltip","TimeRangeInput","TimeRangeLabel","TimeRangePicker","TimeSeries","TimeZonePicker","Toggletip","ToolbarButton","ToolbarButtonRow","Tooltip","TooltipPlugin","TooltipPlugin2","UPLOT_AXIS_FONT_SIZE","UPlotChart","UPlotConfigBuilder","UnitPicker","UserIcon","ValuePicker","VerticalGroup","VerticalTab","VirtualizedSelect","VizLayout","VizLegend","VizLegendListItem","VizRepeater","VizTooltip","VizTooltipContainer","WeekStartPicker","WithContextMenu","XYCanvas","ZoomPlugin","buildScaleKey","clearButtonStyles","convertOldAngularValueMapping","defaultIntervals","fieldMatchersUI","getCardStyles","getInputStyles","getPortalContainer","getSelectStyles","graphFieldOptions","graphTickFormatter","graphTimeFormat","preparePlotFrame","resetSelectStyles","sharedInputStyle","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","useGraphNGContext","usePanelContext","variableSuggestionToCodeEditorSuggestion","withErrorBoundary"].indexOf(u)<0&&(l[u]=()=>a[u]);e.d(R,l);var r=e(23321),o=e(85919),g=e(75353),m=e(57214),d=e(78172)},41456:(J,R,e)=>{"use strict";e.d(R,{Y:()=>E,r:()=>i});var n=e(39953),a=e(89591),l=e(63671),r=e(34547),o=e(96227),g=e(20454),m=e(38637),d=e(9558),u=e(39480);function i(p,h,y){const s=["Axis"];p.addRadio({path:"axisPlacement",name:"Placement",category:s,defaultValue:u.q.axisPlacement[0].value,settings:{options:u.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:s,defaultValue:"",settings:{placeholder:"Optional text"},showIf:v=>v.axisPlacement!==r.LB.Hidden,shouldApply:v=>v.type!==a.fS.time&&v.type!==a.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:s,settings:{placeholder:"Auto"},showIf:v=>v.axisPlacement!==r.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:s,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]},showIf:v=>v.axisPlacement!==r.LB.Hidden}).addRadio({path:"axisColorMode",name:"Color",category:s,defaultValue:r.yK.Text,settings:{options:[{value:r.yK.Text,label:"Text"},{value:r.yK.Series,label:"Series"}]},showIf:v=>v.axisPlacement!==r.LB.Hidden}).addBooleanSwitch({path:"axisBorderShow",name:"Show border",category:s,defaultValue:!1,showIf:v=>v.axisPlacement!==r.LB.Hidden}),p.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:s,editor:E,override:E,defaultValue:{type:r.wf.Linear},shouldApply:v=>v.type===a.fS.number,process:l.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:s,defaultValue:!1,showIf:v=>v.scaleDistribution?.type!==r.wf.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:h.axisSoftMin,category:s,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:h.axisSoftMax,category:s,settings:{placeholder:"See: Standard options > Max"}})}const f=[{label:"Linear",value:r.wf.Linear},{label:"Logarithmic",value:r.wf.Log},{label:"Symlog",value:r.wf.Symlog}],c=[{label:"2",value:2},{label:"10",value:10}],E=({value:p,onChange:h})=>{const y=p?.type??r.wf.Linear,s=p?.log??2;return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginBottom:16}},n.createElement(g.S,{value:y,options:f,onChange:v=>{h({...p,type:v,log:v===r.wf.Linear?void 0:s})}})),(y===r.wf.Log||y===r.wf.Symlog)&&n.createElement(o.g,{label:"Log base"},n.createElement(d.Ph,{options:c,value:s,onChange:v=>{h({...p,log:v.value})}})),y===r.wf.Symlog&&n.createElement(o.g,{label:"Linear threshold"},n.createElement(m.I,{placeholder:"1",value:p?.linearThreshold,onChange:v=>{h({...p,linearThreshold:Number(v.currentTarget.value)})}})))}},86246:(J,R,e)=>{"use strict";e.d(R,{B:()=>m});var n=e(86832),a=e.n(n),l=e(39953),r=e(13868),o=e(12223);const g=({value:d,onChange:u})=>{const i=(0,l.useCallback)(f=>{u({...d,[f]:!d[f]})},[d,u]);return l.createElement(o.Lh,{spacing:"xs"},Object.keys(d).map(f=>{const c=f;return l.createElement(r.B,{icon:d[c]?"eye-slash":"eye",onClick:()=>i(c),key:c,label:(0,n.startCase)(c),selected:d[c]})}))};function m(d){d.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:g,override:g,shouldApply:()=>!0,hideFromDefaults:!0,process:u=>u})}},57827:(J,R,e)=>{"use strict";e.d(R,{J:()=>l});var n=e(18985),a=e(34547);function l(r,o=!0){r.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:a.jK.List,settings:{options:[{value:a.jK.List,label:"List"},{value:a.jK.Table,label:"Table"}]},showIf:g=>g.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:g=>g.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:g=>g.legend.showLegend&&g.legend.placement==="right"}),o&&r.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:n.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:g=>g.legend.showLegend!==!1})}},69107:(J,R,e)=>{"use strict";e.d(R,{V:()=>f,n:()=>i});var n=e(39953),a=e(63671),l=e(89591),r=e(34547),o=e(20454),g=e(68497),m=e(38637),d=e(12223),u=e(39480);const i=({value:c,context:E,onChange:p,item:h})=>n.createElement(d.Lh,null,n.createElement(o.S,{value:c?.mode||r.o0.None,options:h.settings.options,onChange:y=>{p({...c,mode:y})}}),E.isOverride&&c?.mode&&c?.mode!==r.o0.None&&n.createElement(m.I,{type:"text",placeholder:"Group",suffix:n.createElement(g.h,{name:"question-circle",tooltip:"Name of the stacking group",tooltipPlacement:"top"}),defaultValue:c?.group,onChange:y=>{p({...c,group:y.currentTarget.value.trim()})}}));function f(c,E,p=["Graph styles"]){c.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:p,defaultValue:E,editor:i,override:i,settings:{options:u.q.stacking},process:a.kG,shouldApply:h=>h.type===l.fS.number})}},40723:(J,R,e)=>{"use strict";e.d(R,{Z:()=>n});function n(a,l=!0){l&&a.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),a.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},61729:(J,R,e)=>{"use strict";e.d(R,{L:()=>a});var n=e(34547);function a(l,r=!1){const o=["Tooltip"],g=r?[{value:n.f3.Single,label:"Single"},{value:n.f3.None,label:"Hidden"}]:[{value:n.f3.Single,label:"Single"},{value:n.f3.Multi,label:"All"},{value:n.f3.None,label:"Hidden"}],m=[{value:n.As.None,label:"None"},{value:n.As.Ascending,label:"Ascending"},{value:n.As.Descending,label:"Descending"}];l.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:o,defaultValue:"single",settings:{options:g}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:o,defaultValue:n.As.None,showIf:d=>d.tooltip?.mode===n.f3.Multi,settings:{options:m}})}},75353:(J,R,e)=>{"use strict";e.d(R,{q:()=>n});var n={};e.r(n),e.d(n,{ScaleDistributionEditor:()=>a.Y,StackingEditor:()=>m.n,addAxisConfig:()=>a.r,addHideFrom:()=>l.B,addLegendOptions:()=>r.J,addStackingConfig:()=>m.V,addTextSizeOptions:()=>g.Z,addTooltipOptions:()=>o.L});var a=e(41456),l=e(86246),r=e(57827),o=e(61729),g=e(40723),m=e(69107)},78172:(J,R,e)=>{"use strict";e.d(R,{$6:()=>n.l8,FI:()=>n.FI,KC:()=>n.KC,LB:()=>n.LB,bQ:()=>n.bQ,eU:()=>n.Jp,f3:()=>n.f3,h2:()=>n.h2,i3:()=>n.i3,jK:()=>n.jK,mv:()=>n.Jp,o0:()=>n.o0,pu:()=>n.pu,wN:()=>n.wN});var n=e(34547)},97697:(J,R,e)=>{"use strict";e.d(R,{h:()=>r});var n=e(34032);const a={"[":"]","{":"}","(":")"},l="brace_match";function r(){return{onKeyDown(o,g,m){const{value:d}=g;switch(o.key){case"(":case"{":case"[":{const{start:{offset:u,key:i},end:{offset:f,key:c},focus:{offset:E}}=d.selection,p=d.focusText.text;if(d.selection.isExpanded)return o.preventDefault(),g.insertTextByKey(i,u,o.key).insertTextByKey(c,f+1,a[o.key]).moveEndBackward(1),!0;if(E===p.length||p[E]===" "||Object.values(a).includes(p[E])){o.preventDefault();const h=a[o.key],y={key:`${l}-${(0,n.Z)()}`,type:`${l}-${h}`,anchor:{key:i,offset:u,object:"point"},focus:{key:c,offset:f+1,object:"point"},object:"annotation"};return g.insertText(o.key).insertText(h).addAnnotation(y).moveBackward(1),!0}break}case")":case"}":case"]":{const u=d.anchorText.text,i=d.selection.anchor.offset,f=u[i],c=o.key,E=`${l}-${c}`,p=d.annotations.find(h=>h?.type===E&&h.anchor.key===d.anchorText.key);if(p&&f===c&&!d.selection.isExpanded)return o.preventDefault(),g.moveFocusForward(1).removeAnnotation(p).moveAnchorForward(1),!0;break}case"Backspace":{const u=d.anchorText.text,i=d.selection.anchor.offset,f=u[i-1],c=u[i];if(a[f]&&a[f]===c)return o.preventDefault(),g.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return m()}}}},26118:(J,R,e)=>{"use strict";e.d(R,{G:()=>n});function n(){return{onKeyDown(a,l,r){const o=l.value;if(o.selection.isExpanded)return r();if(a.key==="k"&&a.ctrlKey){a.preventDefault();const g=o.anchorText.text,m=o.selection.anchor.offset,u=g.length-m;return l.deleteForward(u),!0}return r()}}}},52606:(J,R,e)=>{"use strict";e.d(R,{w:()=>l});const n=(r,o,g)=>{if(!r.length)return;const m=r.slice(0,-1).join("").length+r.length-1;return r.join(`
`).slice(o,m+g)},a=r=>r?.replace(/[\uFEFF]/g,"");function l(){const r={onCopy(o,g,m){o.preventDefault();const{document:d,selection:u}=g.value,{start:{offset:i},end:{offset:f}}=u,c=d.getLeafBlocksAtRange(u).toArray().map(p=>p.text),E=a(n(c,i,f));return E&&o.clipboardData&&o.clipboardData.setData("Text",E),!0},onPaste(o,g,m){if(o.preventDefault(),o.clipboardData){const u=a(o.clipboardData.getData("Text"))?.split(`
`);if(u&&u.length){g.insertText(u[0]);for(const i of u.slice(1))g.splitBlock().insertText(i)}}return!0}};return{...r,onCut(o,g,m){return r.onCopy(o,g,m),g.deleteAtRange(g.value.selection),!0}}}},73378:(J,R,e)=>{"use strict";e.d(R,{R:()=>i});var n=e(63591),a=e(20399),l=e(76485);const r=(0,n.TB)("mod+["),o=(0,n.TB)("shift+tab"),g=(0,n.TB)("mod+]"),m="  ",d=(f,c,E)=>{const{startBlock:p,endBlock:h,selection:{start:{offset:y,key:s},end:{offset:v,key:C}}}=c.value;if(l.Z.serialize(c.value)==="")return;f.preventDefault();const D=p.getFirstText();D&&y===0&&s===D.key&&v===D.text.length&&C===D.key||!p.equals(h)?u(c,"right"):c.insertText(m)},u=(f,c)=>{const E=f.value.selection,p=f.value.document.getLeafBlocksAtRange(E).toArray();if(c==="left")for(const h of p){const y=h.text.length-h.text.trimLeft().length,s=h.getFirstText().key,v={anchor:{key:s,offset:y,path:[]},focus:{key:s,offset:y,path:[]}};f.deleteBackwardAtRange(a.e6.create(v),Math.min(m.length,y))}else{const{startText:h}=f.value,y=h.text.slice(0,E.start.offset),s=/^\s*$/.test(y);for(const v of p)f.insertTextByKey(v.getFirstText().key,0,m);s&&f.moveStartBackward(m.length)}};function i(){return{onKeyDown(f,c,E){if(r(f)||o(f))f.preventDefault(),u(c,"left");else if(g(f))f.preventDefault(),u(c,"right");else if(f.key==="Tab")d(f,c,E);else return E();return!0}}}},57214:(J,R,e)=>{"use strict";e.d(R,{$L:()=>m.$,Gp:()=>a.G,Rc:()=>r.R,Ze:()=>d.Z,bm:()=>u.b,dv:()=>g.d,hP:()=>n.h,wl:()=>l.w,z2:()=>o.z});var n=e(97697),a=e(26118),l=e(52606),r=e(73378),o=e(16016),g=e(82199),m=e(69679),d=e(59608),u=e(98198)},16016:(J,R,e)=>{"use strict";e.d(R,{z:()=>a});function n(l){let r=l.length-l.trimLeft().length;if(r){let o=l[0];for(;--r;)o+=l[0];return o}return""}function a(){return{onKeyDown(l,r,o){const g=r.value;if(g.selection.isExpanded)return o();if(l.key==="Enter"){l.preventDefault();const{startBlock:m}=g,d=m.text,u=n(d);return r.splitBlock().insertText(u).focus()}return o()}}}},82199:(J,R,e)=>{"use strict";e.d(R,{d:()=>n});function n({handler:a}){return{onKeyDown(l,r,o){return a&&l.key==="Enter"&&(l.shiftKey||l.ctrlKey)?(l.preventDefault(),a(l),r):o()}}}},69679:(J,R,e)=>{"use strict";e.d(R,{$:()=>l});var n=e(63591);const a=(0,n.TB)("mod+l");function l(){return{onKeyDown(r,o,g){if(a(r)){r.preventDefault();const{focusBlock:m,document:d}=o.value;o.moveAnchorToStartOfBlock(),d.getNextBlock(m.key)?o.moveFocusToStartOfNextBlock():o.moveFocusToEndOfText()}else return g();return!0}}}},95220:(J,R,e)=>{"use strict";e.d(R,{Z:()=>a});const a="prism-token"},59608:(J,R,e)=>{"use strict";e.d(R,{Z:()=>c,a:()=>y});var n=e(10963),a=e.n(n),l=e(20399),r=e(95220),o=e(13162),g=e(39953);function m(s){return s.object==="block"&&s.type==="code_block"}function d(s){return"javascript"}function u(s,v,C){const{decoration:D}=s;if(D.type!==r.Z)return C();const M=D.data.get("className");return g.createElement("span",{className:M},s.children)}class i extends(0,o.Record)({onlyIn:m,getSyntax:d,renderDecoration:u}){constructor(v){super(v)}}const f=i;function c(s={},v=a().languages){const C=new f(s);return{decorateNode:(D,M,P)=>{if(!C.onlyIn(D))return P();const x=l.gO.create(D),S=C.getSyntax(x),I=v[S];if(!I)return[];const O=x.getTexts().map(W=>W&&W.getText()).join(`
`),A=a().tokenize(O,I),B=y(A),b=M.value.data.set("tokens",B);return M.setData(b),E(C,A,x)},renderDecoration:(D,M,P)=>C.renderDecoration({children:D.children,decoration:D.decoration},M,P)}}function E(s,v,C){const D=C.getTexts(),M=[];let P=0,x=0;return D.forEach(S=>{x=P+S.getText().length;let I=0;function T(O,A){if(typeof O=="string"){if(A){const B=p({text:S,textStart:P,textEnd:x,start:I,end:I+O.length,className:`prism-token token ${A}`,block:C});B&&M.push(B)}I+=O.length}else if(A=`${A} ${O.type}`,O.alias&&(A+=" "+O.alias),typeof O.content=="string"){const B=p({text:S,textStart:P,textEnd:x,start:I,end:I+O.content.length,className:`prism-token token ${A}`,block:C});B&&M.push(B),I+=O.content.length}else for(let B=0;B<O.content.length;B+=1)T(O.content[B],A)}v.forEach(T),P=x+1}),M}function p({text:s,textStart:v,textEnd:C,start:D,end:M,className:P,block:x}){return D>=C||M<=v?null:(D=Math.max(D,v),M=Math.min(M,C),D-=v,M-=v,x.createDecoration({object:"decoration",anchor:{key:s.key,offset:D,object:"point"},focus:{key:s.key,offset:M,object:"point"},type:r.Z,data:{className:P}}))}function h(s){return typeof s=="string"?[{content:s,types:[],aliases:[]}]:Array.isArray(s)?s.flatMap(v=>h(v)):s instanceof a().Token?h(s.content).flatMap(v=>{let C=[];return typeof s.alias=="string"?C=[s.alias]:C=s.alias??[],{content:v.content,types:[s.type,...v.types],aliases:[...C,...v.aliases]}}):[]}function y(s){const v=h(s);if(!v.length)return[];const C=v[0];C.prev=null,C.next=v.length>=2?v[1]:null,C.offsets={start:0,end:C.content.length};for(let M=1;M<v.length-1;M++)v[M].prev=v[M-1],v[M].next=v[M+1],v[M].offsets={start:v[M-1].offsets.end,end:v[M-1].offsets.end+v[M].content.length};const D=v[v.length-1];return D.prev=v.length>=2?v[v.length-2]:null,D.next=null,D.offsets={start:v.length>=2?v[v.length-2].offsets.end:0,end:v.length>=2?v[v.length-2].offsets.end+D.content.length:D.content.length},v}},98198:(J,R,e)=>{"use strict";e.d(R,{b:()=>W});var n=e(86832),a=e(39953),l=e(49065),r=e(68084),o=e(54342),g=e(36777),m=e(39965);const d=w=>w.reduce((K,{items:z,label:G})=>(K.push({label:G,kind:g.c.GroupTitle}),z.reduce((Q,j)=>(Q.push(j),Q),K)),[]),u=w=>w.reduce((K,z)=>K.length<z.label.length?z.label:K,""),i=(w,K,z)=>{const G=(0,m.Z)(z,{font:w.typography.fontFamilyMonospace,fontSize:w.typography.bodySmall.fontSize,fontWeight:"normal"}),Q=c(G.width,w),j=f(G.height,w),F=E(j,K);return{listWidth:Q,listHeight:F,itemHeight:j}},f=(w,K)=>{const z=K.spacing.gridSize*2;return w+z},c=(w,K)=>{const z=K.spacing.gridSize*3,G=800;return Math.min(Math.max(w+z,200),G)},E=(w,K)=>{const z=Math.min(K.length,10),G=100,Q=z*w;return Math.max(Q,G)};var p=e(41407),h=e(52807),y=e(82803);const s=(w,K,z)=>({typeaheadItem:(0,p.css)({label:"type-ahead-item",zIndex:11,padding:w.spacing(1,1,1,2),border:w.colors.border.medium,overflowY:"scroll",overflowX:"hidden",outline:"none",background:w.colors.background.secondary,color:w.colors.text.secondary,boxShadow:`0 0 20px ${w.v1.colors.dropdownShadow}`,visibility:z===!0?"visible":"hidden",width:"250px",minHeight:`${K+parseInt(w.spacing(.25),10)}px`,position:"relative",wordBreak:"break-word"})}),v=({item:w,height:K})=>{const z=w&&!!w.documentation,G=w?w.label:"",Q=(0,h.a)(w?.documentation),j=(0,y.l4)(),F=s(j,K,z);return a.createElement("div",{className:(0,p.cx)([F.typeaheadItem])},a.createElement("b",null,G),a.createElement("hr",null),a.createElement("div",{dangerouslySetInnerHTML:{__html:Q}}))};var C=e(90135),D=e.n(C),M=e(93021);const P=w=>({typeaheadItem:(0,p.css)({border:"none",background:"none",textAlign:"left",label:"type-ahead-item",height:"auto",fontFamily:w.typography.fontFamilyMonospace,padding:w.spacing(1,1,1,2),fontSize:w.typography.bodySmall.fontSize,textOverflow:"ellipsis",overflow:"hidden",zIndex:11,display:"block",whiteSpace:"nowrap",cursor:"pointer",transition:"color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1)"}),typeaheadItemSelected:(0,p.css)({label:"type-ahead-item-selected",backgroundColor:w.colors.background.secondary}),typeaheadItemMatch:(0,p.css)({label:"type-ahead-item-match",color:w.v1.palette.yellow,borderBottom:`1px solid ${w.v1.palette.yellow}`,padding:"inherit",background:"inherit"}),typeaheadItemGroupTitle:(0,p.css)({label:"type-ahead-item-group-title",color:w.colors.text.secondary,fontSize:w.typography.bodySmall.fontSize,lineHeight:w.typography.body.lineHeight,padding:w.spacing(1)})}),x=w=>{const K=(0,y.wW)(P),{isSelected:z,item:G,prefix:Q,style:j,onMouseEnter:F,onMouseLeave:k,onClickItem:_}=w,Y=z?(0,p.cx)([K.typeaheadItem,K.typeaheadItemSelected]):(0,p.cx)([K.typeaheadItem]),Z=(0,p.cx)([K.typeaheadItemMatch]),ae=(0,p.cx)([K.typeaheadItemGroupTitle]),ce=G.label||"";return G.kind===g.c.GroupTitle?a.createElement("li",{className:ae,style:j},a.createElement("span",null,ce)):a.createElement("li",{role:"none"},a.createElement("button",{role:"menuitem",className:Y,style:j,onMouseDown:_,onMouseEnter:F,onMouseLeave:k,type:"button"},G.highlightParts!==void 0?a.createElement(M.H,{text:ce,highlightClassName:Z,highlightParts:G.highlightParts}):a.createElement(D(),{textToHighlight:ce,searchWords:[Q??""],autoEscape:!0,highlightClassName:Z})))},S=(w,K)=>w-K*Math.floor(w/K);class I extends a.PureComponent{constructor(){super(...arguments),this.listRef=(0,a.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const K=d(this.props.groupedItems),z=u(K),{listWidth:G,listHeight:Q,itemHeight:j}=i(this.context,K,z);this.setState({listWidth:G,listHeight:Q,itemHeight:j,allItems:K})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(K,z)=>{if(this.state.typeaheadIndex!==null&&z.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,n.isEqual)(K.groupedItems,this.props.groupedItems)===!1){const G=d(this.props.groupedItems),Q=u(G),{listWidth:j,listHeight:F,itemHeight:k}=i(this.context,G,Q);this.setState({listWidth:j,listHeight:F,itemHeight:k,allItems:G,typeaheadIndex:null})}},this.onMouseEnter=K=>{this.setState({hoveredItem:K})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=K=>{const z=this.state.allItems.length;if(z){const G=this.state.typeaheadIndex||0;let Q=S(G+K,z);this.state.allItems[Q].kind===g.c.GroupTitle&&(Q=S(Q+K,z)),this.setState({typeaheadIndex:Q});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const K=window.getSelection(),z=K&&K.anchorNode;if(z&&z.parentElement){const G=z.parentElement.getBoundingClientRect(),Q=window.scrollX,j=window.scrollY;return`position: absolute; display: flex; top: ${G.top+j+G.height+6}px; left: ${G.left+Q-2}px`}return""}render(){const{prefix:K,isOpen:z=!1,origin:G}=this.props,{allItems:Q,listWidth:j,listHeight:F,itemHeight:k,hoveredItem:_,typeaheadIndex:Y}=this.state,Z=_||Y,ae=Q[_||Y||0];return a.createElement(T,{origin:G,isOpen:z,style:this.menuPosition},a.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},a.createElement(r.t7,{ref:this.listRef,itemCount:Q.length,itemSize:k,itemKey:ce=>{const q=Q&&Q[ce];return q?`${ce}-${q.label}`:`${ce}`},width:j,height:F},({index:ce,style:q})=>{const De=Q&&Q[ce];return De?a.createElement(x,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(De):{},isSelected:Y===null?!1:Q[Y]===De,item:De,prefix:K,style:q,onMouseEnter:()=>this.onMouseEnter(ce),onMouseLeave:this.onMouseLeave}):null})),Z&&a.createElement(v,{height:F,item:ae}))}}I.contextType=o.N;class T extends a.PureComponent{constructor(K){super(K);const{index:z=0,origin:G="query",style:Q}=K;this.node=document.createElement("div"),this.node.setAttribute("style",Q),this.node.classList.add("slate-typeahead",`slate-typeahead-${G}-${z}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),l.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var O=e(64225),A=e(66445),B=e(95220);const b=250;function W({onTypeahead:w,cleanText:K,onWillApplySuggestion:z,portalOrigin:G}){let Q,j={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const F=(0,n.debounce)(V,b),k=_=>{j={...j,..._}};return{onBlur:(_,Y,Z)=>(j={...j,groupedItems:[]},Z()),onClick:(_,Y,Z)=>(j={...j,groupedItems:[]},Z()),onKeyDown:(_,Y,Z)=>{const ce=j.groupedItems.length;switch(_.key){case"Escape":{if(ce)return _.preventDefault(),j={...j,groupedItems:[]},Y.insertText("");break}case"ArrowDown":case"ArrowUp":if(ce){_.preventDefault(),Q.moveMenuIndex(_.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(_.shiftKey||_.ctrlKey)&&ce)return _.preventDefault(),Q.insertSuggestion();break}case"Tab":{if(ce)return _.preventDefault(),Q.insertSuggestion();break}default:{_.key.length===1&&F(Y,k,w,K);break}}return Z()},commands:{selectSuggestion:(_,Y)=>{const Z=j.groupedItems;if(!Z||!Z.length)return _;const ae=_.applyTypeahead(Y);return F(_,k,w,K),ae},applyTypeahead:(_,Y)=>{let Z=Y.insertText||Y.label;const ae=Y.kind==="function",ce=Y.move||0,q=ce>0?ce:0,De=ce<0?-ce:0,{typeaheadPrefix:oe,typeaheadText:te,typeaheadContext:fe}=j;z&&(Z=z(Z,{groupedItems:j.groupedItems,typeaheadContext:fe,typeaheadPrefix:oe,typeaheadText:te}));const Te=Y.deleteBackwards||oe.length,he=(K?K(te):te).length-oe.length,me=te.indexOf(oe),ue=oe&&(he>0&&me>-1||Z===te)&&!ae?he+me:0;if(Z.match(/\n/)){const Oe=(0,O.xl)(Z);return _.deleteBackward(Te).deleteForward(ue).insertFragment(Oe).focus(),_}return j={...j,groupedItems:[]},_.snapshotSelection().deleteBackward(Te).deleteForward(ue).insertText(Z).moveForward(q).moveBackward(De).focus(),_}},renderEditor(_,Y,Z){if(Y.value.selection.isExpanded)return Z();const ae=Z();return a.createElement(a.Fragment,null,ae,a.createElement(I,{menuRef:ce=>Q=ce,origin:G,prefix:j.typeaheadPrefix,isOpen:!!j.groupedItems.length,groupedItems:j.groupedItems,onSelectSuggestion:Y.selectSuggestion}))}}}const V=async(w,K,z,G)=>{if(!z)return;const{value:Q}=w,{selection:j}=Q,F=Q.document.getClosestBlock(Q.focusBlock.key),k=Q.selection.start.offset-1,_=F&&F.getDecorations(w),Y=_?_.filter(ge=>ge.start.offset<=k&&ge.end.offset>k&&ge.type===B.Z).toArray():[],Z=_&&_.filter(ge=>ge.end.offset<=k&&ge.type===B.Z&&ge.data.get("className").includes("label-key")).last(),ae=Z&&Q.focusText.text.slice(Z.start.offset,Z.end.offset),ce=Y.map(ge=>ge.data.get("className")).join(" ").split(" ").filter(ge=>ge.length);let q=Q.focusText.text,De=q.slice(0,j.focus.offset);Y.length&&(q=Q.focusText.text.slice(Y[0].start.offset,Y[0].end.offset),De=Q.focusText.text.slice(Y[0].start.offset,j.focus.offset));const oe=De.match(/(?:!?=~?"?|")(.*)/);oe?De=oe[1]:G&&(De=G(De));const{suggestions:te,context:fe}=await z({prefix:De,text:q,value:Q,wrapperClasses:ce,labelKey:ae||void 0,editor:w}),Te=te.map(ge=>{if(!ge.items)return ge;const he=ge.searchFunctionType||(ge.prefixMatch?A.Z.Prefix:A.Z.Word),me=A.n[he];let ye={...ge};return De&&(ge.skipFilter||(ye.items=ye.items.filter(ue=>(ue.filterText||ue.label).length>=De.length),ye.items=me(ye.items,De)),ye.items=ye.items.filter(ue=>!(ue.insertText===De||(ue.filterText??ue.label)===De))),ge.skipSort||(ye.items=(0,n.sortBy)(ye.items,ue=>ue.sortText===void 0?ue.sortValue!==void 0?ue.sortValue:ue.label:ue.sortText||ue.label)),ye}).filter(ge=>ge.items&&ge.items.length);K({groupedItems:Te,typeaheadPrefix:De,typeaheadContext:fe,typeaheadText:q}),w.blur().focus()}},89625:(J,R,e)=>{"use strict";e.d(R,{n:()=>E});var n=e(93986),a=e(39953),l=e(82803);function r(p){return(0,n.css)({".panel-options-group":{borderBottom:`1px solid ${p.colors.border.weak}`},".panel-options-group__header":{padding:p.spacing(1,2,1,1),position:"relative",display:"flex",alignItems:"center",cursor:"pointer",fontWeight:500,color:p.colors.text.primary,"&:hover":{background:p.colors.emphasize(p.colors.background.primary,.03)}},".panel-options-group__icon":{color:p.colors.text.secondary,marginRight:p.spacing(1),padding:p.spacing(0,.9,0,.6)},".panel-options-group__title":{position:"relative"},".panel-options-group__body":{padding:p.spacing(1,2,1,4)}})}function o(p){return(0,n.css)({".card-section":{marginBottom:p.spacing(4)},".card-list":{display:"flex",flexDirection:"row",flexWrap:"wrap",listStyleType:"none"},".card-item":{display:"block",height:"100%",background:p.colors.background.secondary,boxShadow:"none",padding:p.spacing(2),borderRadius:"4px","&:hover":{background:p.colors.emphasize(p.colors.background.secondary,.03)},".label-tag":{marginLeft:p.spacing(1),fontSize:"11px",padding:"2px 6px"}},".card-item-body":{display:"flex",overflow:"hidden"},".card-item-details":{overflow:"hidden"},".card-item-header":{marginBottom:p.spacing(2)},".card-item-type":{color:p.colors.text.secondary,textTransform:"uppercase",fontSize:p.typography.size.sm,fontWeight:p.typography.fontWeightMedium},".card-item-badge":{margin:"6px 0"},".card-item-notice":{fontSize:p.typography.size.sm},".card-item-name":{color:p.colors.text.primary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-label":{marginLeft:p.spacing(1)},".card-item-sub-name":{color:p.colors.text.secondary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-sub-name--header":{color:p.colors.text.secondary,textTransform:"uppercase",marginBottom:p.spacing(2),fontSize:p.typography.size.sm,fontWeight:"bold"},".card-list-layout-grid":{".card-item-type":{display:"inline-block"},".card-item-notice":{fontSize:p.typography.size.sm,display:"inline-block",marginLeft:p.spacing(2)},".card-item-header-action":{float:"right"},".card-item-wrapper":{width:"100%",padding:p.spacing(0,2,2,0)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item-figure":{margin:p.spacing(0,2,2,0),height:"80px",img:{width:"80px"}},".card-item-name":{fontSize:p.typography.h3.fontSize},[p.breakpoints.up("md")]:{".card-item-wrapper":{width:"50%"}},[p.breakpoints.up("lg")]:{".card-item-wrapper":{width:"33.333333%"}},"&.card-list-layout-grid--max-2-col":{[p.breakpoints.up("lg")]:{".card-item-wrapper":{width:"50%"}}}},".card-list-layout-list":{".card-item-wrapper":{padding:0,width:"100%",marginBottom:p.spacing(1)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item":{borderRadius:"2px"},".card-item-header":{float:"right",textAlign:"right"},".card-item-figure":{margin:p.spacing(0,2,0,0),img:{width:"48px"}},".card-item-name":{fontSize:p.typography.h4.fontSize},".card-item-sub-name":{fontSize:p.typography.size.sm},".layout-selector":{marginRight:0}}})}var g=e(53039);function m(p){return(0,n.css)({html:{MsOverflowStyle:"scrollbar",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",height:"100%",fontSize:`${p.typography.htmlFontSize}px`,fontFamily:p.typography.fontFamily,lineHeight:p.typography.body.lineHeight,fontKerning:"normal"},":root":{colorScheme:p.colors.mode},body:{height:"100%",width:"100%",position:"absolute",color:p.colors.text.primary,backgroundColor:p.colors.background.canvas,...d(p.typography.body)},"h1, .h1":d(p.typography.h1),"h2, .h2":d(p.typography.h2),"h3, .h3":d(p.typography.h3),"h4, .h4":d(p.typography.h4),"h5, .h5":d(p.typography.h5),"h6, .h6":d(p.typography.h6),p:{margin:p.spacing(0,0,2)},button:{letterSpacing:p.typography.body.letterSpacing,"&:focus-visible":(0,g.getFocusStyles)(p),"&:focus":{outline:"none"}},small:{fontSize:p.typography.bodySmall.fontSize},"b, strong":{fontWeight:p.typography.fontWeightMedium},em:{fontStyle:"italic",color:p.colors.text.primary},cite:{fontStyle:"normal"},".muted":{color:p.colors.text.secondary},"a.muted:hover, a.muted:focus":{color:p.colors.text.primary},".text-warning":{color:p.colors.warning.text,"&:hover, &:focus":{color:p.colors.emphasize(p.colors.warning.text,.15)}},".text-error":{color:p.colors.error.text,"&:hover, &:focus":{color:p.colors.emphasize(p.colors.error.text,.15)}},".text-success":{color:"$success-text-color","&:hover, &:focus":{color:p.colors.emphasize(p.colors.success.text,.15)}},a:{cursor:"pointer",color:p.colors.text.primary,textDecoration:"none","&:focus":{outline:"none"},"&:focus-visible":(0,g.getFocusStyles)(p),"&:[disabled]":{cursor:"default",pointerEvents:"none !important"}},".text-link":{textDecoration:"underline"},".text-left":{textAlign:"left"},".text-right":{textAlign:"right"},".text-center":{textAlign:"center"},".highlight-search-match":{background:p.components.textHighlight.background,color:p.components.textHighlight.text,padding:0}})}function d(p){return{margin:0,fontSize:p.fontSize,lineHeight:p.lineHeight,fontWeight:p.fontWeight,letterSpacing:p.letterSpacing,fontFamily:p.fontFamily,marginBottom:"0.45em"}}function u(p){return(0,n.css)({"iframe.intercom-borderless-frame":{colorScheme:p.colors.mode}})}function i(p){return(0,n.css)({"input, button, select, textarea":{fontFamily:p.typography.body.fontFamily,fontSize:p.typography.body.fontSize,fontWeight:p.typography.body.fontWeight,lineHeight:p.typography.body.lineHeight},"input, select":{backgroundColor:p.components.input.background,color:p.components.input.text,border:"none",boxShadow:"none"},textarea:{height:"auto"},"input[type='file'], input[type='image'], input[type='submit'], input[type='reset'], input[type='button'], input[type='radio'], input[type='checkbox']":{width:"auto"}})}function f(p){return(0,n.css)({})}function c(p){const h=p.breakpoints.values.xxl+p.spacing.gridSize*2+p.components.sidemenu.width;return(0,n.css)({".grafana-app":{display:"flex",alignItems:"stretch",position:"absolute",width:"100%",height:"100%",top:0,left:0},".main-view":{position:"relative",display:"flex",flexDirection:"column",flexGrow:1,height:"100%",flex:"1 1 0",minWidth:0},".page-scrollbar-content":{display:"flex",minHeight:"100%",flexDirection:"column",width:"100%",height:"100%"},".page-container":{flexGrow:1,flexBasis:"100%",paddingLeft:p.spacing(2),paddingRight:p.spacing(2),[p.breakpoints.up("sm")]:{margin:p.spacing(0,1)},[p.breakpoints.up("md")]:{margin:p.spacing(0,2)},[`@media (min-width: ${h}px)`]:{maxWidth:`${p.breakpoints.values.xxl}px`,marginLeft:"auto",marginRight:"auto",width:"100%"}},".page-full":{marginLeft:p.spacing(2),paddingLeft:p.spacing(2),paddingRight:p.spacing(2)},".page-body":{padding:p.spacing(1),background:p.components.panel.background,border:`1px solid ${p.components.panel.borderColor}`,marginBottom:"32px",[p.breakpoints.up("md")]:{padding:p.spacing(2)},[p.breakpoints.up("lg")]:{padding:p.spacing(3)}},".page-heading":{fontSize:p.typography.h4.fontSize,marginTop:0,marginBottom:p.spacing(2)},".page-action-bar":{marginBottom:p.spacing(2),display:"flex",alignItems:"flex-start",gap:p.spacing(2)},".page-action-bar--narrow":{marginBottom:0},".page-action-bar__spacer":{width:p.spacing(2),flexGrow:1},".page-sub-heading":{marginBottom:p.spacing(2)},".page-sub-heading-icon":{marginLeft:p.spacing(1),marginTop:p.spacing(.5)},".page-hidden":{display:"none"}})}function E(){const p=(0,l.l4)();return a.createElement(n.Global,{styles:[m(p),u(p),i(p),c(p),o(p),r(p),f(p)]})}},82803:(J,R,e)=>{"use strict";e.d(R,{Fg:()=>c,HE:()=>f,Zz:()=>i,l4:()=>E,sJ:()=>y,wW:()=>h,yK:()=>p});var n=e(16976),a=e.n(n),l=e(80172),r=e.n(l),o=e(39953),g=e(54342),m=e(64084);let d=null;const u=new WeakMap,i=s=>{const v=C=>{const D=d||g.N;return o.createElement(D.Consumer,null,M=>o.createElement(s,{...C,theme:M.v1}))};return v.displayName=`WithTheme(${s.displayName})`,a()(v,s),v},f=s=>{const v=C=>{const D=d||g.N;return o.createElement(D.Consumer,null,M=>o.createElement(s,{...C,theme:M}))};return v.displayName=`WithTheme(${s.displayName})`,a()(v,s),v};function c(){return(0,o.useContext)(d||g.N).v1}function E(){return(0,o.useContext)(d||g.N)}function p(s){const v=c();let C=u.get(s);return C||(C=(0,m.B)(s),u.set(s,C)),C(v)}function h(s,...v){const C=E();let D=u.get(s);return D||(D=r()(s,{maxSize:10}),u.set(s,D)),D(C,...v)}const y=s=>(d=o.createContext(s),()=>{d=null})},85919:(J,R,e)=>{"use strict";e.d(R,{nz:()=>d.n,Ni:()=>n.N,gh:()=>o,Zu:()=>g,sJ:()=>a.sJ,GU:()=>u,Bb:()=>m.B,yK:()=>a.yK,wW:()=>a.wW,Fg:()=>a.Fg,l4:()=>a.l4,Zz:()=>a.Zz,HE:()=>a.HE});var n=e(54342),a=e(82803),l=e(48706);let r;const o=(i="dark")=>r?r(i):(0,l.j)({colors:{mode:i}}).v1,g=i=>(r=i,()=>{r=null});var m=e(64084),d=e(89625),u=e(53039)},53039:(J,R,e)=>{"use strict";e.r(R),e.d(R,{cardChrome:()=>a,focusCss:()=>d,getFocusStyles:()=>i,getMouseFocusStyles:()=>u,getTooltipContainerStyles:()=>f,hoverColor:()=>l,listItem:()=>r,listItemSelected:()=>o,mediaUp:()=>g});var n=e(63374);function a(c){return`
    background: ${c.colors.background.secondary};
    &:hover {
      background: ${l(c.colors.background.secondary,c)};
    }
    box-shadow: ${c.components.panel.boxShadow};
    border-radius: ${c.shape.radius.default};
`}function l(c,E){return E.isDark?(0,n.Z)(c).brighten(2).toString():(0,n.Z)(c).darken(2).toString()}function r(c){return`
  background: ${c.colors.background.secondary};
  &:hover {
    background: ${l(c.colors.background.secondary,c)};
  }
  box-shadow: ${c.components.panel.boxShadow};
  border-radius: ${c.shape.radius.default};
`}function o(c){return`
    background: ${l(c.colors.background.secondary,c)};
    color: ${c.colors.text.maxContrast};
`}function g(c){return`only screen and (min-width: ${c})`}const m=c=>c.hasOwnProperty("v1"),d=c=>{const E=m(c),p=E?c.colors.background.canvas:c.colors.bodyBg,h=E?c.colors.primary.main:c.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${p}, 0 0 0px 4px ${h};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function u(c){return{outline:"none",boxShadow:"none"}}function i(c){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${c.colors.background.canvas}, 0 0 0px 4px ${c.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const f=c=>({overflow:"hidden",background:c.colors.background.secondary,boxShadow:c.shadows.z2,maxWidth:"800px",padding:c.spacing(1),borderRadius:c.shape.radius.default,zIndex:c.zIndex.tooltip})},64084:(J,R,e)=>{"use strict";e.d(R,{B:()=>l});var n=e(80172),a=e.n(n);function l(r){return a()(r)}},36777:(J,R,e)=>{"use strict";e.d(R,{c:()=>n});var n=(a=>(a.GroupTitle="GroupTitle",a))(n||{})},12839:()=>{},72305:(J,R,e)=>{"use strict";e.d(R,{BI:()=>l,WZ:()=>o,e7:()=>r,iJ:()=>n.iJ});var n=e(17393),a=e(89591);const l=()=>Object.keys(n._S);function r(g){return o(g?.type)}function o(g){if(g)switch(g){case a.fS.time:return"clock-nine";case a.fS.string:return"font";case a.fS.number:return"calculator-alt";case a.fS.boolean:return"toggle-on";case a.fS.trace:return"info-circle";case a.fS.enum:return"list-ol";case a.fS.geo:return"map-marker";case a.fS.other:return"brackets-curly"}return"question-circle"}},78963:(J,R,e)=>{"use strict";e.r(R),e.d(R,{CompletionItemKind:()=>o.c,getAvailableIcons:()=>d.BI,getFieldTypeIcon:()=>d.e7,getFieldTypeIconName:()=>d.WZ,toIconName:()=>d.iJ});var n=e(18979),a=e.n(n),h={};for(const y in n)y!=="default"&&(h[y]=()=>n[y]);e.d(R,h);var l=e(4659),r=e.n(l),h={};for(const y in l)y!=="default"&&(h[y]=()=>l[y]);e.d(R,h);var o=e(36777),g=e(12839),m=e.n(g),h={};for(const y in g)["default","CompletionItemKind"].indexOf(y)<0&&(h[y]=()=>g[y]);e.d(R,h);var d=e(72305),u=e(57632),i=e.n(u),h={};for(const y in u)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(y)<0&&(h[y]=()=>u[y]);e.d(R,h);var f=e(20523),c=e.n(f),h={};for(const y in f)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(y)<0&&(h[y]=()=>f[y]);e.d(R,h);var E=e(35194),p=e.n(E),h={};for(const y in E)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(y)<0&&(h[y]=()=>E[y]);e.d(R,h)},4659:()=>{},35194:()=>{},57632:()=>{},20523:()=>{},18979:()=>{},58842:(J,R,e)=>{"use strict";e.d(R,{i:()=>n});const n=(a,l)=>{a.key==="Tab"||a.altKey||a.ctrlKey||a.metaKey||(a.stopPropagation(),a.key==="Escape"&&l())}},14312:(J,R,e)=>{"use strict";e.d(R,{Gc:()=>h,Jx:()=>o,O9:()=>f,Wm:()=>s,_V:()=>d,bM:()=>y,f7:()=>u,iV:()=>i,ns:()=>m,te:()=>g});var n=e(86832),a=e.n(n),l=e(63374);const r=4,o="rgba(0, 211, 255, 1)",g="rgba(11, 237, 50, 1)",m="rgba(237, 46, 24, 1)",d="rgba(150, 150, 150, 1)",u="rgba(247, 149, 32, 1)",i=.09,f=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function c(v){const C=(0,n.map)(v,E),D=(0,n.sortBy)(C,["h"]),M=(0,n.chunk)(D,r),P=(0,n.map)(M,S=>(0,n.sortBy)(S,"l")),x=(0,n.flattenDeep)((0,n.zip)(...P));return(0,n.map)(x,p)}function E(v){return(0,l.Z)(v).toHsl()}function p(v){return(0,l.Z)(v).toHexString()}function h(v){return(0,l.Z)(v).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function y(v,C){const D=(0,l.Z)(v),M=D.getBrightness();return D.getAlpha()<.3?C?"rgb(247, 248, 250)":"rgb(32, 34, 38)":M>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let s=c(f)},71972:(J,R,e)=>{"use strict";e.d(R,{R:()=>n,g:()=>a});const n=l=>l().map(r=>({label:r.title,ariaLabel:r.title,url:r.href,target:r.target,icon:`${r.target==="_blank"?"external-link-alt":"link"}`,onClick:r.onClick})),a=l=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(l)},66841:(J,R,e)=>{"use strict";e.d(R,{x:()=>n});function n(a,l,r){}},96754:(J,R,e)=>{"use strict";e.d(R,{O:()=>n});function n(a){const r=a.lastIndexOf("."),o=a.substring(r),g=a.substring(0,r);return g.length<16?a:`${g.substring(0,16)}...${o}`}},52184:(J,R,e)=>{"use strict";e.d(R,{C:()=>l});var n=e(86832),a=e.n(n);function l(r,o){let g=0,m=r.indexOf(o);o=o.replace(/\s/g,"");const d=[];if(m!==-1)return{distance:0,found:!0,ranges:[{start:m,end:m+o.length-1}]};for(const u of o){const i=r.indexOf(u,m);if(i===-1)return{distance:1/0,ranges:[],found:!1};if(m!==-1&&(g+=i-m),m=i+1,d.length===0)d.push({start:i,end:i});else{const f=(0,n.last)(d);i===f.end+1?f.end++:d.push({start:i,end:i})}}return{distance:g,ranges:d,found:!0}}},28384:(J,R,e)=>{"use strict";e.d(R,{c:()=>g,t:()=>d});var n=e(20463),a=e(39953),l=e(7330),r=e(75146);function o(){typeof n.default.options.resources!="object"&&n.default.use(l.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const g=u=>(o(),a.createElement(r.c,{...u})),m=n.default.t,d=(u,i,f)=>(o(),m(u,i,f))},23321:(J,R,e)=>{"use strict";e.d(R,{ns:()=>o.ns,Jx:()=>o.Jx,Qi:()=>n,JU:()=>g.JU,_V:()=>o._V,zG:()=>v,te:()=>o.te,f7:()=>o.f7,iV:()=>o.iV,Ot:()=>r,Yi:()=>m.Yi,nu:()=>p.Z,_J:()=>h._J,xq:()=>s.x,MX:()=>c.MX,O9:()=>o.O9,hu:()=>y.h,C6:()=>C.C,AE:()=>c.AE,iu:()=>f.i,np:()=>i.n,vm:()=>u.vm,tu:()=>u.tu,Bx:()=>u.Bx,bM:()=>o.bM,Gc:()=>o.Gc,z3:()=>g.z3,go:()=>d.g,Rc:()=>d.R,xl:()=>m.xl,l1:()=>m.l1,X1:()=>c.X1,FE:()=>g.FE,Wm:()=>o.Wm,NW:()=>E.N,Gu:()=>g.Gu});var n={};e.r(n),e.d(n,{getNextCharacter:()=>l,getPreviousCousin:()=>a}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(D){const M=(this.document||this.ownerDocument).querySelectorAll(D);let P=this,x;do{for(x=M.length;--x>=0&&M.item(x)!==P;);P=P.parentElement}while(x<0&&P);return P});function a(D,M){let P=D.parentElement.previousSibling,x;for(;P;){if(x=P.querySelector(M),x)return x;P=P.previousSibling}}function l(D){const M=(D||window).getSelection();if(!M||!M.anchorNode)return null;const P=M.getRangeAt(0),x=M.anchorNode.textContent,S=P.startOffset;return x.slice(S,S+1)}var r=e(82360),o=e(14312),g=e(73201),m=e(64225),d=e(71972),u=e(72899),i=e(26825),f=e(3274),c=e(76297),E=e(55356),p=e(66445),h=e(48996),y=e(42851),s=e(66841),v=(D=>(D.id="id",D.title="title",D.subTitle="subTitle",D.mainStat="mainStat",D.secondaryStat="secondaryStat",D.source="source",D.target="target",D.detail="detail__",D.arc="arc__",D.color="color",D))(v||{}),C=e(52184)},42851:(J,R,e)=>{"use strict";e.d(R,{h:()=>r});var n=e(86832),a=e.n(n);const l=(0,n.throttle)((...o)=>{console.log(...o)},500),r=o=>{let g=!1;return typeof window<"u"&&(g=window.localStorage.getItem("grafana.debug")==="true"),{logger:(m,d=!1,...u)=>{},enable:()=>g=!0,disable:()=>g=!1,isEnabled:()=>g}}},76297:(J,R,e)=>{"use strict";e.d(R,{AE:()=>o,MX:()=>m,X1:()=>g});let n;const a=new Map,l=500;let r="";function o(){return n||(n=document.createElement("canvas").getContext("2d")),n}function g(d,u,i=400){const f=`${i} ${u}px 'Inter'`,c=d+f,E=a.get(c);if(E)return E;const p=o();r!==f&&(p.font=r=f);const h=p.measureText(d);return a.size===l&&a.clear(),a.set(c,h),h}function m(d,u,i,f,c,E){const p=g(d,14,E),h=u/(p.width+2)*14,y=i/f,s=Math.min(y,h);return Math.min(s,c??s)}},82360:(J,R,e)=>{"use strict";e.r(R),e.d(R,{getChildId:()=>a,renderOrCallToRender:()=>l});var n=e(39953);function a(r){let o;const g=n.Children.only(r);return"id"in g?.props?o=g.props.id:"inputId"in g.props&&(o=g?.props.inputId),typeof o=="string"?o:void 0}function l(r,o){if(n.isValidElement(r)||typeof r=="string"||typeof r=="number")return r;if(typeof r=="function"&&o)return r(o);throw new Error(`${r} is not a React element nor a function that returns React element`)}},26825:(J,R,e)=>{"use strict";e.d(R,{n:()=>a});let n=null;function a(){if(n!==null)return n;if(typeof document<"u"){const l=document.createElement("div"),r={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(r).map(o=>{l.style[o]=r[o]}),document.body.appendChild(l),n=l.offsetWidth-l.clientWidth,document.body.removeChild(l)}else n=0;return n||0}},66445:(J,R,e)=>{"use strict";e.d(R,{Z:()=>a,n:()=>g});var n=e(52184),a=(m=>(m.Word="Word",m.Prefix="Prefix",m.Fuzzy="Fuzzy",m))(a||{});const g={Word:(m,d)=>m.filter(u=>(u.filterText||u.label).includes(d)),Prefix:(m,d)=>m.filter(u=>(u.filterText||u.label).startsWith(d)),Fuzzy:(m,d)=>(d=d.toLowerCase(),m.filter(u=>{const{distance:i,ranges:f,found:c}=(0,n.C)(u.label.toLowerCase(),d);return c?(u.sortValue=i,u.highlightParts=f,!0):!1}))}},64225:(J,R,e)=>{"use strict";e.d(R,{Yi:()=>a,l1:()=>r,xl:()=>l});var n=e(20399);const a={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},l=(o,g)=>{const m=o.split(`
`).map(u=>n.gO.create({type:"code_line",nodes:[n.xv.create(u)]})),d=n.gO.create({data:{syntax:g},type:"code_block",nodes:m});return n.BB.create({nodes:[d]})},r=(o,g)=>{const m=l(o,g);return n.B4.create({document:m})}},3274:(J,R,e)=>{"use strict";e.d(R,{i:()=>n});const n=(a,l)=>{let r;if(a.getLinks&&(r=a.getLinks({valueRowIndex:l.index})),!!r){for(let o=0;o<r?.length;o++)if(r[o].onClick){const g=r[o].onClick;r[o].onClick=m=>{m.ctrlKey||m.metaKey||m.shiftKey||(m.preventDefault(),g(m,{field:a,rowIndex:l.index}))}}return r}}},72899:(J,R,e)=>{"use strict";e.d(R,{Bx:()=>r,tu:()=>l,vm:()=>o});const n=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],a=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function l(d=""){const u=g(d.toLowerCase());return Math.abs(u%n.length)}function r(d=""){const u=l(d);return o(u)}function o(d){return{color:n[d],borderColor:a[d]}}function g(d){let u=5381;for(let i=0;i<d.length;i++)u=(u<<5)+u+d.charCodeAt(i);return u}var m={getTagColorsFromName:r}},36517:(J,R,e)=>{"use strict";e.d(R,{k:()=>l});var n=e(41407),a=e(91249);function l(r,o,g,m,d){return{arrow:(0,n.css)({height:"1rem",width:"1rem",position:"absolute",pointerEvents:"none","&::before":{borderStyle:"solid",content:'""',display:"block",height:0,margin:"auto",width:0},"&::after":{borderStyle:"solid",content:'""',display:"block",height:0,margin:"auto",position:"absolute",width:0}}),container:(0,n.css)({backgroundColor:o,borderRadius:r.shape.radius.default,border:`1px solid ${g}`,boxShadow:r.shadows.z2,color:m,fontSize:r.typography.bodySmall.fontSize,padding:r.spacing(d.topBottom,d.rightLeft),transition:"opacity 0.3s",zIndex:r.zIndex.tooltip,maxWidth:"400px",overflowWrap:"break-word","&[data-popper-interactive='false']":{pointerEvents:"none"},"&[data-popper-placement*='bottom'] > div[data-popper-arrow='true']":{left:0,marginTop:"-7px",top:0,"&::before":{borderColor:`transparent transparent ${g} transparent`,borderWidth:"0 8px 7px 8px",position:"absolute",top:"-1px"},"&::after":{borderColor:`transparent transparent ${o} transparent`,borderWidth:"0 8px 7px 8px"}},"&[data-popper-placement*='top'] > div[data-popper-arrow='true']":{bottom:0,left:0,marginBottom:"-14px","&::before":{borderColor:`${g} transparent transparent transparent`,borderWidth:"7px 8px 0 7px",position:"absolute",top:"1px"},"&::after":{borderColor:`${o} transparent transparent transparent`,borderWidth:"7px 8px 0 7px"}},"&[data-popper-placement*='right'] > div[data-popper-arrow='true']":{left:0,marginLeft:"-10px","&::before":{borderColor:`transparent ${g} transparent transparent`,borderWidth:"7px 6px 7px 0"},"&::after":{borderColor:`transparent ${o} transparent transparent`,borderWidth:"6px 7px 7px 0",left:"2px",top:"1px"}},"&[data-popper-placement*='left'] > div[data-popper-arrow='true']":{marginRight:"-11px",right:0,"&::before":{borderColor:`transparent transparent transparent ${g}`,borderWidth:"7px 0 6px 7px"},"&::after":{borderColor:`transparent transparent transparent ${o}`,borderWidth:"6px 0 5px 5px",left:"1px",top:"1px"}},code:{border:"none",display:"inline",background:a.darken(o,.1),color:m},pre:{background:a.darken(o,.1),color:m},a:{color:m,textDecoration:"underline"},"a:hover":{textDecoration:"none"}}),headerClose:(0,n.css)({color:r.colors.text.secondary,position:"absolute",right:r.spacing(1),top:r.spacing(1.5),backgroundColor:"transparent",border:0}),header:(0,n.css)({paddingTop:r.spacing(1),paddingBottom:r.spacing(2)}),body:(0,n.css)({paddingTop:r.spacing(1),paddingBottom:r.spacing(1)}),footer:(0,n.css)({paddingTop:r.spacing(2),paddingBottom:r.spacing(1)})}}},55356:(J,R,e)=>{"use strict";e.d(R,{N:()=>a});var n=e(39953);function a(){const[l,r]=(0,n.useState)(0);return()=>r(o=>o+1)}},73201:(J,R,e)=>{"use strict";e.d(R,{FE:()=>r,Gu:()=>a,JU:()=>n,z3:()=>l});var n=(o=>(o.onBlur="onBlur",o.onFocus="onFocus",o.onChange="onChange",o))(n||{});const a=(o,g)=>{const m=g.reduce((d,u)=>u.rule(o)?d:d.concat(u.errorMessage),[]);return m.length>0?m:null},l=(o,g)=>g&&g[o],r=(o,g)=>({rule:m=>!!m.match(o),errorMessage:g||"Value is not valid"})},22453:(J,R,e)=>{"use strict";e.d(R,{z:()=>n});const n={Breadcrumbs:{breadcrumb:a=>`data-testid ${a} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{connectionSettings:"Data source connection URL",exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:a=>`${a} menu`,MenuGroup:a=>`${a} menu group`,MenuItem:a=>`${a} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:a=>`data-testid Panel header ${a}`,headerItems:a=>`data-testid Panel header item ${a}`,menuItems:a=>`data-testid Panel menu item ${a}`,menu:a=>`data-testid Panel menu ${a}`,containerByTitle:a=>`${a} panel`,headerCornerInfo:a=>`Panel header ${a}`,status:a=>`data-testid Panel status ${a}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-testid hover-header-container",dragIcon:"data-testid drag-icon"}},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:a=>`gpl alias ${a}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer",body:"data-testid table body"}}},VizLegend:{seriesName:a=>`VizLegend series ${a}`},Drawer:{General:{title:a=>`Drawer title ${a}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:a=>`${a} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",showZoomField:"Map controls Show zoom control field property editor",showAttributionField:"Map controls Show attribution field property editor",showScaleField:"Map controls Show scale field property editor",showMeasureField:"Map controls Show measure tools field property editor",showDebugField:"Map controls Show debug field property editor",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:a=>`Tab ${a}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"data-testid query-history-button",addQuery:"data-testid query-tab-add-query"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:a=>`${a}`,title:a=>`Query editor row title ${a}`,container:a=>`Query editor row ${a}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:a=>`Alert ${a}`,alertV2:a=>`data-testid Alert ${a}`},TransformTab:{content:"data-testid Transform editor tab content",newTransform:a=>`data-testid New transform ${a}`,transformationEditor:a=>`data-testid Transformation editor ${a}`,transformationEditorDebugger:a=>`data-testid Transformation editor debugger ${a}`},Transforms:{card:a=>`data-testid New transform ${a}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location Mode field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations",addTransformationButton:"data-testid add transformation button"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:a=>`${a}`,itemButton:a=>`data-testid ${a}`},QueryEditorToolbarItem:{button:a=>`QueryEditor toolbar item button ${a}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:a=>a?`Options group ${a}`:"Options group",toggle:a=>a?`Options group ${a} toggle`:"Options group toggle"},PluginVisualization:{item:a=>`Plugin visualization item ${a}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"data-testid Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:a=>`Value picker button ${a}`,select:a=>`Value picker select ${a}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:a=>`data-testid Collapse folder ${a}`,expandFolder:a=>`data-testid Expand folder ${a}`,dashboardItem:a=>`${n.Search.dashboardItems} ${a}`,dashboardCard:a=>`data-testid Search card ${a}`,folderHeader:a=>`data-testid Folder header ${a}`,folderContent:a=>`data-testid Folder content ${a}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:a=>`Call to action button ${a}`,buttonV2:a=>`data-testid Call to action button ${a}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:a=>`data-testid suggestion-${a}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:a=>`data-testid dashboard-row-title-${a}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input"},Tooltip:{container:"data-testid tooltip"}}},28888:(J,R,e)=>{"use strict";e.d(R,{wl:()=>l});var n=e(22453);const l={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:r=>`Data source list item ${r}`},EditDataSource:{url:r=>`/datasources/edit/${r}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:r=>`Data source plugin item ${r}`,dataSourcePluginsV2:r=>`Add new data source ${r}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:r=>`data-testid ${r}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:r=>`/d/${r}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:r=>`data-testid Dashboard template variables submenu Label ${r}`,submenuItemValueDropDownValueLinkTexts:r=>`data-testid Dashboard template variables Variable Value DropDown value link text ${r}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:r=>`data-testid Dashboard template variables Variable Value DropDown option text ${r}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:r=>`data-testid Dashboard annotations submenu Label ${r}`,annotationToggle:r=>`data-testid Dashboard annotations submenu Toggle ${r}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:r=>`Dashboard settings section item ${r}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:n.z.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:n.z.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview"}},Variables:{List:{addVariableCTA:n.z.CallToActionCard.button("Add variable"),addVariableCTAV2:n.z.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:r=>`Variable editor Table Name field ${r}`,tableRowDefinitionFields:r=>`Variable editor Table Definition field ${r}`,tableRowArrowUpButtons:r=>`Variable editor Table ArrowUp button ${r}`,tableRowArrowDownButtons:r=>`Variable editor Table ArrowDown button ${r}`,tableRowDuplicateButtons:r=>`Variable editor Table Duplicate button ${r}`,tableRowRemoveButtons:r=>`Variable editor Table Remove button ${r}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:n.z.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}},Annotations:{marker:"data-testid annotation-marker"},Rows:{Repeated:{ConfigSection:{warningMessage:"data-testid Repeated rows warning message"}}}},Dashboards:{url:"/dashboards",dashboards:r=>`Dashboard search item ${r}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",SettingsDropdown:"data-testid public dashboard settings dropdown",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"}},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:r=>`/d-solo/${r}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"data-testid playlist-form-delete-item"},BrowseDashboards:{table:{body:"data-testid browse-dashboards-table",row:r=>`data-testid browse dashboards row ${r}`,checkbox:r=>`data-testid ${r} checkbox`},NewFolderForm:{form:"data-testid new folder form",nameInput:"data-testid new-folder-name-input",createButton:"data-testid new-folder-create-button"}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button",pauseSwitch:"data-testid public dashboard pause switch"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:r=>`data-testid dashboards-list-item-${r}`}}},ProfilePage:{url:"/profile"}},components:n.z}},34547:(J,R,e)=>{"use strict";e.d(R,{As:()=>V,B5:()=>n,Bd:()=>Z,FI:()=>y,IG:()=>A,Jp:()=>f,KC:()=>p,L3:()=>G,LB:()=>u,M8:()=>z,Q8:()=>r,QH:()=>K,Ss:()=>k,UV:()=>d,Y4:()=>Y,ap:()=>B,b8:()=>_,bQ:()=>D,eK:()=>a,f3:()=>W,h2:()=>Q,i3:()=>P,iT:()=>ce,jG:()=>b,jK:()=>x,kW:()=>g,kv:()=>m,l8:()=>c,o0:()=>s,pR:()=>E,pc:()=>O,pu:()=>v,q1:()=>o,v7:()=>j,wN:()=>C,wf:()=>h,wm:()=>I,xy:()=>l,yK:()=>i});var n=(q=>(q.Linear="linear",q.Quad="quad",q))(n||{}),a=(q=>(q.Clamped="clamped",q.Mod="mod",q))(a||{}),l=(q=>(q.Field="field",q.Fixed="fixed",q.Template="template",q))(l||{}),r=(q=>(q.Field="field",q.Fixed="fixed",q.Mapping="mapping",q))(r||{}),o=(q=>(q.Auto="auto",q.Coords="coords",q.Geohash="geohash",q.Lookup="lookup",q))(o||{}),g=(q=>(q.Count="count",q.Size="size",q))(g||{}),m=(q=>(q.auto="auto",q.ge="ge",q.le="le",q.unknown="unknown",q))(m||{}),d=(q=>(q.Ascending="Ascending",q.Descending="Descending",q))(d||{}),u=(q=>(q.Auto="auto",q.Bottom="bottom",q.Hidden="hidden",q.Left="left",q.Right="right",q.Top="top",q))(u||{}),i=(q=>(q.Series="series",q.Text="text",q))(i||{}),f=(q=>(q.Always="always",q.Auto="auto",q.Never="never",q))(f||{}),c=(q=>(q.Bars="bars",q.Line="line",q.Points="points",q))(c||{}),E=(q=>(q.Constant="constant",q.NegativeY="negative-Y",q))(E||{}),p=(q=>(q.Linear="linear",q.Smooth="smooth",q.StepAfter="stepAfter",q.StepBefore="stepBefore",q))(p||{}),h=(q=>(q.Linear="linear",q.Log="log",q.Ordinal="ordinal",q.Symlog="symlog",q))(h||{}),y=(q=>(q.Hue="hue",q.None="none",q.Opacity="opacity",q.Scheme="scheme",q))(y||{}),s=(q=>(q.None="none",q.Normal="normal",q.Percent="percent",q))(s||{}),v=(q=>(q[q.After=1]="After",q[q.Before=-1]="Before",q[q.Center=0]="Center",q))(v||{}),C=(q=>(q[q.Horizontal=0]="Horizontal",q[q.Vertical=1]="Vertical",q))(C||{}),D=(q=>(q[q.Down=-1]="Down",q[q.Left=-1]="Left",q[q.Right=1]="Right",q[q.Up=1]="Up",q))(D||{});const M={dash:[]};var P=(q=>(q.Area="area",q.Dashed="dashed",q.DashedAndArea="dashed+area",q.Line="line",q.LineAndArea="line+area",q.Off="off",q.Series="series",q))(P||{}),x=(q=>(q.Hidden="hidden",q.List="list",q.Table="table",q))(x||{});const S={calcs:[]};var I=(q=>(q.Auto="auto",q.Horizontal="horizontal",q.Vertical="vertical",q))(I||{});const T={timezone:[]};var O=(q=>(q.Background="background",q.BackgroundSolid="background_solid",q.None="none",q.Value="value",q))(O||{}),A=(q=>(q.Area="area",q.Line="line",q.None="none",q))(A||{}),B=(q=>(q.Auto="auto",q.Center="center",q))(B||{}),b=(q=>(q.Auto="auto",q.Name="name",q.None="none",q.Value="value",q.ValueAndName="value_and_name",q))(b||{}),W=(q=>(q.Multi="multi",q.None="none",q.Single="single",q))(W||{}),V=(q=>(q.Ascending="asc",q.Descending="desc",q.None="none",q))(V||{});const w={calcs:[]};var K=(q=>(q.Basic="basic",q.Gradient="gradient",q.Lcd="lcd",q))(K||{}),z=(q=>(q.Color="color",q.Hidden="hidden",q.Text="text",q))(z||{}),G=(q=>(q.Auto="auto",q.Left="left",q.Top="top",q))(G||{}),Q=(q=>(q.Auto="auto",q.BasicGauge="basic",q.ColorBackground="color-background",q.ColorBackgroundSolid="color-background-solid",q.ColorText="color-text",q.Custom="custom",q.Gauge="gauge",q.GradientGauge="gradient-gauge",q.Image="image",q.JSONView="json-view",q.LcdGauge="lcd-gauge",q.Sparkline="sparkline",q))(Q||{}),j=(q=>(q.Basic="basic",q.Gradient="gradient",q))(j||{});const F={fields:[],reducer:[]};var k=(q=>(q.Lg="lg",q.Md="md",q.Sm="sm",q))(k||{}),_=(q=>(q.CSV="csv",q.Date="date",q.Distributed="distributed",q.DoubleQuote="doublequote",q.Glob="glob",q.HTML="html",q.JSON="json",q.Lucene="lucene",q.PercentEncode="percentencode",q.Pipe="pipe",q.QueryParam="queryparam",q.Raw="raw",q.Regex="regex",q.SQLString="sqlstring",q.SingleQuote="singlequote",q.Text="text",q.UriEncode="uriencode",q))(_||{}),Y=(q=>(q.exact="exact",q.none="none",q.numbers="numbers",q.signature="signature",q))(Y||{}),Z=(q=>(q.EQ="eq",q.GT="gt",q.GTE="gte",q.LT="lt",q.LTE="lte",q.NEQ="neq",q))(Z||{});const ae={align:"auto",inspect:!1},ce="browser"},49299:(J,R,e)=>{"use strict";e.d(R,{AU:()=>r,vC:()=>l});var n=e(34547);const a="10.2.2",l={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:n.wm.Auto,showValue:n.Jp.Auto,stacking:n.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},r={fillOpacity:80,gradientMode:n.FI.None,lineWidth:1}},28849:(J,R,e)=>{"use strict";e.d(R,{v:()=>l});var n=e(34547);const a="10.2.2",l={displayMode:n.QH.Gradient,minVizHeight:10,minVizWidth:0,namePlacement:n.L3.Auto,showUnfilled:!0,valueMode:n.M8.Color}},59917:(J,R,e)=>{"use strict";e.d(R,{v:()=>a});const n="10.2.2",a={selectedSeries:0}},86534:(J,R,e)=>{"use strict";e.d(R,{v:()=>a});const n="10.2.2",a={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0}},8537:(J,R,e)=>{"use strict";e.d(R,{vC:()=>a});const n="10.2.2",a={layers:[]},l={allLayers:!0,id:"zero",lat:0,lon:0,zoom:1};var r=(g=>(g.Details="details",g.None="none",g))(r||{}),o=(g=>(g.Coords="coords",g.Fit="fit",g.Zero="zero",g))(o||{})},35856:(J,R,e)=>{"use strict";e.d(R,{vC:()=>o});var n=e(34547);const a="10.2.2";var l=(g=>(g.Opacity="opacity",g.Scheme="scheme",g))(l||{}),r=(g=>(g.Exponential="exponential",g.Linear="linear",g))(r||{});const o={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:n.Jp.Auto,tooltip:{show:!0,yHistogram:!1}}},9962:(J,R,e)=>{"use strict";e.d(R,{AU:()=>r,vC:()=>l});var n=e(34547);const a="10.2.2",l={bucketOffset:0},r={fillOpacity:80,gradientMode:n.FI.None,lineWidth:1}},33926:(J,R,e)=>{"use strict";e.d(R,{v:()=>a});const n="10.2.2",a={showImage:!0}},80883:(J,R,e)=>{"use strict";e.d(R,{vC:()=>g});const n="10.2.2";var a=(m=>(m.Donut="donut",m.Pie="pie",m))(a||{}),l=(m=>(m.Name="name",m.Percent="percent",m.Value="value",m))(l||{}),r=(m=>(m.Percent="percent",m.Value="value",m))(r||{});const o={values:[]},g={displayLabels:[]}},84643:(J,R,e)=>{"use strict";e.d(R,{v:()=>l});var n=e(34547);const a="10.2.2",l={colorMode:n.pc.Value,graphMode:n.IG.Area,justifyMode:n.ap.Auto,textMode:n.jG.Auto,wideLayout:!0}},42180:(J,R,e)=>{"use strict";e.d(R,{AU:()=>r,vC:()=>l});var n=e(34547);const a="10.2.2",l={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:n.Jp.Auto},r={fillOpacity:70,lineWidth:0}},39235:(J,R,e)=>{"use strict";e.d(R,{AU:()=>r,vC:()=>l});var n=e(34547);const a="10.2.2",l={colWidth:.9,rowHeight:.9,showValue:n.Jp.Auto},r={fillOpacity:70,lineWidth:1}},66303:(J,R,e)=>{"use strict";e.d(R,{v:()=>l});var n=e(34547);const a="10.2.2",l={cellHeight:n.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]}},53193:(J,R,e)=>{"use strict";e.d(R,{vC:()=>g});const n="10.2.2";var a=(m=>(m.Code="code",m.HTML="html",m.Markdown="markdown",m))(a||{}),l=(m=>(m.Go="go",m.Html="html",m.Json="json",m.Markdown="markdown",m.Plaintext="plaintext",m.Sql="sql",m.Typescript="typescript",m.Xml="xml",m.Yaml="yaml",m))(l||{});const r="plaintext",o={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},g={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"}},51676:(J,R,e)=>{"use strict";e.d(R,{vC:()=>m});var n=e(34547);const a="10.2.2";var l=(d=>(d.Auto="auto",d.Manual="manual",d))(l||{}),r=(d=>(d.Lines="lines",d.Points="points",d.PointsAndLines="points+lines",d))(r||{});const o={exclude:[]},g={label:n.Jp.Auto,show:"points"},m={series:[]}},41406:(J,R,e)=>{"use strict";e.d(R,{$U:()=>d,AU:()=>M,Bd:()=>g,G_:()=>r,H3:()=>c,Hi:()=>p,NU:()=>v,Ql:()=>x,SJ:()=>P,Vb:()=>C,ZM:()=>D,bn:()=>l,gW:()=>o,mQ:()=>y});const n={tags:[]},a={exclude:!1,ids:[]},l={list:[]},r={builtIn:0,enable:!0,hide:!1},o={multi:!1,options:[],skipUrlSync:!1};var g=(S=>(S[S.never=0]="never",S[S.onDashboardLoad=1]="onDashboardLoad",S[S.onTimeRangeChanged=2]="onTimeRangeChanged",S))(g||{}),m=(S=>(S[S.dontHide=0]="dontHide",S[S.hideLabel=1]="hideLabel",S[S.hideVariable=2]="hideVariable",S))(m||{}),d=(S=>(S[S.alphabeticalAsc=1]="alphabeticalAsc",S[S.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",S[S.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",S[S.alphabeticalDesc=2]="alphabeticalDesc",S[S.disabled=0]="disabled",S[S.numericalAsc=3]="numericalAsc",S[S.numericalDesc=4]="numericalDesc",S))(d||{});const u={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var i=(S=>(S.ContinuousBlPu="continuous-BlPu",S.ContinuousBlYlRd="continuous-BlYlRd",S.ContinuousBlues="continuous-blues",S.ContinuousGrYlRd="continuous-GrYlRd",S.ContinuousGreens="continuous-greens",S.ContinuousPurples="continuous-purples",S.ContinuousRdYlGr="continuous-RdYlGr",S.ContinuousReds="continuous-reds",S.ContinuousYlBl="continuous-YlBl",S.ContinuousYlRd="continuous-YlRd",S.Fixed="fixed",S.PaletteClassic="palette-classic",S.PaletteClassicByName="palette-classic-by-name",S.Shades="shades",S.Thresholds="thresholds",S))(i||{});const f={h:9,w:12,x:0,y:0};var c=(S=>(S.Absolute="absolute",S.Percentage="percentage",S))(c||{});const E={steps:[]};var p=(S=>(S.RangeToText="range",S.RegexToText="regex",S.SpecialValue="special",S.ValueToText="value",S))(p||{}),h=(S=>(S.Empty="empty",S.False="false",S.NaN="nan",S.Null="null",S.NullAndNan="null+nan",S.True="true",S))(h||{}),y=(S=>(S[S.Crosshair=1]="Crosshair",S[S.Off=0]="Off",S[S.Tooltip=2]="Tooltip",S))(y||{});const s=0,v={links:[],repeatDirection:"h",tags:[],targets:[],transformations:[],transparent:!1},C={overrides:[]},D={id:""},M={links:[],mappings:[]},P={collapsed:!1,panels:[]},x={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:36,tags:[],timezone:"browser"}},50821:(J,R,e)=>{"use strict";e.d(R,{Gu:()=>l,OA:()=>a});var n=e(34547);const a={align:"auto",inspect:!1,cellOptions:{type:n.h2.Auto}};var l=(r=>(r.NotStarted="NotStarted",r.Loading="Loading",r.Streaming="Streaming",r.Done="Done",r.Error="Error",r))(l||{})},61606:(J,R,e)=>{"use strict";e.d(R,{Ql:()=>l,bU:()=>a});var n=e(41406),a=(c=>(c[c.dontHide=0]="dontHide",c[c.hideLabel=1]="hideLabel",c[c.hideVariable=2]="hideVariable",c))(a||{});const l=n.Ql,r={...n.gW},o=n.NU,g=n.SJ,m=n.AU,d=n.Vb,u=n.ZM,i=n.G_,f=n.bn},94162:(J,R,e)=>{"use strict";e.d(R,{M:()=>o,Z:()=>l});var n=e(86832),a=e.n(n);class l{constructor(m){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",m){if(m.columns)for(const d of m.columns)this.addColumn(d);if(m.rows)for(const d of m.rows)this.addRow(d)}}sort(m){m.col===null||m.col===void 0||this.columns.length<=m.col||(this.rows.sort((d,u)=>(d=d[m.col],u=u[m.col],+(d==null)-+(u==null)||+(d>u)||-(d<u))),m.desc&&this.rows.reverse(),this.columns[m.col].sort=!0,this.columns[m.col].desc=m.desc)}addColumn(m){this.columnMap[m.text]||(this.columns.push(m),this.columnMap[m.text]=m)}addRow(m){this.rows.push(m)}}function r(g,m,d){let u=!1;for(let i=0;i<g.length;i++)if(m[i]!==void 0&&d[i]!==void 0){if(m[i]!==d[i])return!1}else(m[i]===void 0||d[i]===void 0)&&(u=!0);return u}function o(g,...m){const d=g||new l;if(arguments.length===1)return d;if(arguments.length===2)return d.columns=m[0].hasOwnProperty("columns")?[...m[0].columns]:[],d.rows=m[0].hasOwnProperty("rows")?[...m[0].rows]:[],d;const u=m.filter(y=>!!y.columns),i={},f=u.slice().reduce((y,s)=>(s.columns.forEach(v=>{const{text:C}=v;i[C]===void 0&&(i[C]=y.length,y.push(v))}),y),[]),c=u.map(y=>y.columns.map(s=>i[s.text])),E=u.reduce((y,s,v)=>{const C=c[v];return s.rows.forEach(D=>{const M=[];C.forEach((P,x)=>{M[P]=D[x]}),y.push(M)}),y},[]),p={},h=E.reduce((y,s,v)=>{if(!p[v]){let C=v+1;for(;C<E.length;){const D=(0,n.findIndex)(E,M=>r(f,s,M),C);if(D>-1){const M=E[D];for(let P=0;P<f.length;P++)s[P]===void 0&&M[P]!==void 0&&(s[P]=M[P]);p[D]=M,C=D+1}else break}y.push(s)}return y},[]);return d.columns=f,d.rows=h,d}},43686:(J,R,e)=>{"use strict";e.d(R,{e:()=>a});var n=e(77960);const a=(0,n.PH)("core/cleanUpState")},97316:(J,R,e)=>{"use strict";e.d(R,{$l:()=>n.$l,H7:()=>a.H7,RL:()=>a.RL,ad:()=>n.ad});var n=e(59138),a=e(12813)},28833:(J,R,e)=>{"use strict";e.d(R,{Z:()=>l,h:()=>a});var n=e(91395);const a=new n.F,l=a},88206:(J,R,e)=>{"use strict";e.d(R,{P:()=>w});var n=e(41407),a=e(86832),l=e(39953),r=e(30623),o=e(82803),g=e(4919),m=e(24297),d=e(62679),u=e(20367),i=e(83408),f=e(23334),c=e(27366),E=e(85830),p=e(9558),h=e(80583),y=e(4148);class s extends l.Component{constructor(Y){super(Y),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,a.debounce)(this.search,300,{leading:!0,trailing:!0})}search(Y){return this.setState({isLoading:!0}),(0,a.isNil)(Y)&&(Y=""),(0,y.i)().get("/api/serviceaccounts/search").then(Z=>Z.serviceAccounts.map(ae=>({id:ae.id,value:ae.id,label:ae.login,imgUrl:ae.avatarUrl,login:ae.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:Y,onSelected:Z,inputId:ae}=this.props,{isLoading:ce}=this.state;return l.createElement("div",{className:"service-account-picker","data-testid":"serviceAccountPicker"},l.createElement(p.qb,{isClearable:!0,className:Y,inputId:ae,isLoading:ce,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:Z,placeholder:"Start typing to search for service accounts",noOptionsMessage:"No service accounts found","aria-label":"Service Account picker"}))}}class v extends l.Component{constructor(Y){super(Y),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,a.debounce)(this.search,300,{leading:!0,trailing:!0})}componentDidMount(){const{teamId:Y}=this.props;Y&&(0,y.i)().get(`/api/teams/${Y}`).then(Z=>{this.setState({value:{value:Z,label:Z.name,imgUrl:Z.avatarUrl}})})}search(Y){return this.setState({isLoading:!0}),(0,a.isNil)(Y)&&(Y=""),(0,y.i)().get(`/api/teams/search?perpage=100&page=1&query=${Y}`).then(Z=>{const ae=Z.teams.map(ce=>({value:ce,label:ce.name,imgUrl:ce.avatarUrl}));return this.setState({isLoading:!1}),ae})}render(){const{onSelected:Y,className:Z}=this.props,{isLoading:ae,value:ce}=this.state;return l.createElement("div",{className:"user-picker","data-testid":"teamPicker"},l.createElement(p.qb,{isLoading:ae,defaultOptions:!0,loadOptions:this.debouncedSearch,value:ce,onChange:Y,className:Z,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}class C extends l.Component{constructor(Y){super(Y),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,a.debounce)(this.search,300,{leading:!0,trailing:!0})}search(Y){return this.setState({isLoading:!0}),(0,a.isNil)(Y)&&(Y=""),(0,y.i)().get(`/api/org/users/lookup?query=${Y}&limit=100`).then(Z=>Z.map(ae=>({id:ae.userId,value:ae.userId,label:ae.login,imgUrl:ae.avatarUrl,login:ae.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:Y,onSelected:Z,inputId:ae}=this.props,{isLoading:ce}=this.state;return l.createElement("div",{className:"user-picker","data-testid":"userPicker"},l.createElement(p.qb,{isClearable:!0,className:Y,inputId:ae,isLoading:ce,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:Z,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}var D=e(64944),M=(_=>(_.None="None",_.Team="Team",_.User="User",_.ServiceAccount="ServiceAccount",_.BuiltInRole="builtInRole",_))(M||{});const P=({title:_=(0,d.t)("access-control.add-permission.title","Add permission for"),permissions:Y,assignments:Z,onAdd:ae,onCancel:ce})=>{const[q,De]=(0,l.useState)(M.None),[oe,te]=(0,l.useState)(0),[fe,Te]=(0,l.useState)(0),[ge,he]=(0,l.useState)(""),[me,ye]=(0,l.useState)(""),ue=(0,l.useMemo)(()=>{const Ue=[];return Z.users&&Ue.push({value:M.User,label:(0,d.t)("access-control.add-permission.user-label","User")}),Z.serviceAccounts&&Ue.push({value:M.ServiceAccount,label:(0,d.t)("access-control.add-permission.serviceaccount-label","Service Account")}),Z.teams&&Ue.push({value:M.Team,label:(0,d.t)("access-control.add-permission.team-label","Team")}),Z.builtInRoles&&Ue.push({value:M.BuiltInRole,label:(0,d.t)("access-control.add-permission.role-label","Role")}),Ue},[Z]);(0,l.useEffect)(()=>{Y.length>0&&ye(Y[0])},[Y]);const Oe=()=>q===M.Team&&oe>0||q===M.User&&fe>0||q===M.ServiceAccount&&fe>0||M.BuiltInRole&&D.B5.hasOwnProperty(ge);return l.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},l.createElement(h.P,{onClick:ce}),l.createElement("h5",null,_),l.createElement(E.l,{name:"addPermission",maxWidth:"none",onSubmit:()=>ae({userId:fe,teamId:oe,builtInRole:ge,permission:me,target:q})},()=>l.createElement(c.K,{gap:1,direction:"row"},l.createElement(p.Ph,{"aria-label":"Role to add new permission to",value:q,options:ue,onChange:Ue=>De(Ue.value),disabled:ue.length===0,width:"auto"}),q===M.User&&l.createElement(C,{onSelected:Ue=>Te(Ue?.value||0)}),q===M.ServiceAccount&&l.createElement(s,{onSelected:Ue=>Te(Ue?.value||0)}),q===M.Team&&l.createElement(v,{onSelected:Ue=>te(Ue.value?.id||0)}),q===M.BuiltInRole&&l.createElement(p.Ph,{"aria-label":"Built-in role picker",options:Object.values(D.B5).filter(Ue=>Ue!==D.B5.None).map(Ue=>({value:Ue,label:Ue})),onChange:Ue=>he(Ue.value||""),width:"auto"}),l.createElement(p.Ph,{"aria-label":"Permission Level",width:"auto",value:Y.find(Ue=>Ue===me),options:Y.map(Ue=>({label:Ue,value:Ue})),onChange:Ue=>ye(Ue.value||"")}),l.createElement(g.zx,{type:"submit",disabled:!Oe()},l.createElement(d.cC,{i18nKey:"access-control.add-permissions.save"},"Save")))))};var x=e(69865),S=e(12190);const I=({item:_,permissionLevels:Y,canSet:Z,onRemove:ae,onChange:ce})=>l.createElement("tr",null,l.createElement("td",null,T(_)),l.createElement("td",null,A(_)),l.createElement("td",null,_.isInherited&&l.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),l.createElement("td",null,l.createElement(p.Ph,{disabled:!Z||!_.isManaged,onChange:q=>ce(_,q.value),value:Y.find(q=>q===_.permission),options:Y.map(q=>({value:q,label:q}))})),l.createElement("td",null,l.createElement(x.u,{content:B(_)},l.createElement(S.J,{name:"info-circle"}))),l.createElement("td",null,_.isManaged?l.createElement(g.zx,{size:"sm",icon:"times",variant:"destructive",disabled:!Z,onClick:()=>ae(_),"aria-label":`Remove permission for ${O(_)}`}):l.createElement(x.u,{content:_.isInherited?"Inherited Permission":"Provisioned Permission"},l.createElement(g.zx,{size:"sm",icon:"lock"})))),T=_=>_.teamId?l.createElement("img",{className:"filter-table__avatar",src:_.teamAvatarUrl,alt:`Avatar for team ${_.teamId}`}):_.userId?l.createElement("img",{className:"filter-table__avatar",src:_.userAvatarUrl,alt:`Avatar for user ${_.userId}`}):l.createElement(S.J,{size:"xl",name:"shield"}),O=_=>_.userId?_.userLogin:_.teamId?_.team:_.builtInRole,A=_=>_.userId?l.createElement("span",{key:"name"},_.userLogin," "):_.teamId?l.createElement("span",{key:"name"},_.team," "):_.builtInRole?l.createElement("span",{key:"name"},_.builtInRole," "):l.createElement("span",{key:"name"}),B=_=>`Actions: ${[...new Set(_.actions)].sort().join(" ")}`,b=({title:_,items:Y,compareKey:Z,permissionLevels:ae,canSet:ce,onRemove:q,onChange:De})=>{const oe=(0,l.useMemo)(()=>{const te={};for(let fe of Y){const Te=fe[Z];if(!te[Te]){te[Te]=fe;continue}fe.actions.length>te[Te].actions.length&&(te[Te]=fe)}return Object.keys(te).map(fe=>te[fe])},[Y,Z]);return oe.length===0?null:l.createElement("div",null,l.createElement("table",{className:"filter-table gf-form-group"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",{style:{width:"1%"}}),l.createElement("th",null,_),l.createElement("th",{style:{width:"1%"}}),l.createElement("th",{style:{width:"40%"}},l.createElement(d.cC,{i18nKey:"access-control.permission-list.permission"},"Permission")),l.createElement("th",{style:{width:"1%"}}),l.createElement("th",{style:{width:"1%"}}))),l.createElement("tbody",null,oe.map((te,fe)=>l.createElement(I,{item:te,onRemove:q,onChange:De,canSet:ce,key:`${fe}-${te.userId}`,permissionLevels:ae})))))},W="",V={permissions:[],assignments:{teams:!1,users:!1,serviceAccounts:!1,builtInRoles:!1}},w=({title:_=(0,d.t)("access-control.permissions.title","Permissions"),buttonLabel:Y=(0,d.t)("access-control.permissions.add-label","Add a permission"),emptyLabel:Z=(0,d.t)("access-control.permissions.no-permissions","There are no permissions"),resource:ae,resourceId:ce,canSetPermissions:q,addPermissionTitle:De})=>{const oe=(0,o.wW)(k),[te,fe]=(0,l.useState)(!1),[Te,ge]=(0,l.useState)([]),[he,me]=(0,l.useState)(V),ye=(0,l.useCallback)(()=>z(ae,ce).then(We=>ge(We)),[ae,ce]);(0,l.useEffect)(()=>{K(ae).then(We=>(me(We),ye()))},[ae,ce,ye]);const ue=We=>{let ke=null;We.target===M.User||We.target===M.ServiceAccount?ke=G(ae,ce,We.userId,We.permission):We.target===M.Team?ke=Q(ae,ce,We.teamId,We.permission):We.target===M.BuiltInRole&&(ke=j(ae,ce,We.builtInRole,We.permission)),ke!==null&&ke.then(ye)},Oe=We=>{let ke=null;We.userId?ke=G(ae,ce,We.userId,W):We.teamId?ke=Q(ae,ce,We.teamId,W):We.isServiceAccount&&We.userId?ke=G(ae,ce,We.userId,W):We.builtInRole&&(ke=j(ae,ce,We.builtInRole,W)),ke!==null&&ke.then(ye)},Ue=(We,ke)=>{We.permission!==ke&&(We.userId?ue({permission:ke,userId:We.userId,target:M.User}):We.isServiceAccount?ue({permission:ke,userId:We.userId,target:M.User}):We.teamId?ue({permission:ke,teamId:We.teamId,target:M.Team}):We.builtInRole&&ue({permission:ke,builtInRole:We.builtInRole,target:M.BuiltInRole}))},at=(0,l.useMemo)(()=>(0,a.sortBy)(Te.filter(We=>We.teamId),["team","isManaged"]),[Te]),Ne=(0,l.useMemo)(()=>(0,a.sortBy)(Te.filter(We=>We.userId&&!We.isServiceAccount),["userLogin","isManaged"]),[Te]),_e=(0,l.useMemo)(()=>(0,a.sortBy)(Te.filter(We=>We.userId&&We.isServiceAccount),["userLogin","isManaged"]),[Te]),Ke=(0,l.useMemo)(()=>(0,a.sortBy)(Te.filter(We=>We.builtInRole),["builtInRole","isManaged"]),[Te]),et=(0,d.t)("access-control.permissions.role","Role"),ze=(0,d.t)("access-control.permissions.user","User"),je=(0,d.t)("access-control.permissions.serviceaccount","Service Account"),Qe=(0,d.t)("access-control.permissions.team","Team");return l.createElement("div",null,q&&l.createElement(l.Fragment,null,(0,f.v)()&&ae==="folders"&&l.createElement(l.Fragment,null,l.createElement(d.cC,{i18nKey:"access-control.permissions.permissions-change-warning"},"This will change permissions for this folder and all its descendants. In total, this will affect:"),l.createElement(i.X,{selectedItems:{folder:{[ce]:!0},dashboard:{},panel:{},$all:!1}}),l.createElement(r.T,{v:2})),l.createElement(g.zx,{className:oe.addPermissionButton,variant:"primary",key:"add-permission",onClick:()=>fe(!0)},Y),l.createElement(m.s,{in:te},l.createElement(P,{title:De,onAdd:ue,permissions:he.permissions,assignments:he.assignments,onCancel:()=>fe(!1)}))),Te.length===0&&l.createElement("table",{className:"filter-table gf-form-group"},l.createElement("tbody",null,l.createElement("tr",null,l.createElement("th",null,Z)))),l.createElement(b,{title:et,items:Ke,compareKey:"builtInRole",permissionLevels:he.permissions,onChange:Ue,onRemove:Oe,canSet:q}),l.createElement(b,{title:ze,items:Ne,compareKey:"userLogin",permissionLevels:he.permissions,onChange:Ue,onRemove:Oe,canSet:q}),l.createElement(b,{title:je,items:_e,compareKey:"userLogin",permissionLevels:he.permissions,onChange:Ue,onRemove:Oe,canSet:q}),l.createElement(b,{title:Qe,items:at,compareKey:"team",permissionLevels:he.permissions,onChange:Ue,onRemove:Oe,canSet:q}))},K=async _=>{try{return await(0,u.i)().get(`/api/access-control/${_}/description`)}catch(Y){return console.error("failed to load resource description: ",Y),V}},z=(_,Y)=>(0,u.i)().get(`/api/access-control/${_}/${Y}`),G=(_,Y,Z,ae)=>F(_,Y,"users",Z,ae),Q=(_,Y,Z,ae)=>F(_,Y,"teams",Z,ae),j=(_,Y,Z,ae)=>F(_,Y,"builtInRoles",Z,ae),F=(_,Y,Z,ae,ce)=>(0,u.i)().post(`/api/access-control/${_}/${Y}/${Z}/${ae}`,{permission:ce}),k=_=>({breakdown:(0,n.css)({..._.typography.bodySmall,color:_.colors.text.secondary,marginBottom:_.spacing(2)}),addPermissionButton:(0,n.css)({marginBottom:_.spacing(2)})})},24297:(J,R,e)=>{"use strict";e.d(R,{s:()=>g});var n=e(39953),a=e(72907);const l="200px",r=200,o={transition:`max-height ${r}ms ease-in-out`,overflow:"hidden"},g=({children:m,in:d,maxHeight:u=l,style:i=o})=>{const f={exited:{maxHeight:0},entering:{maxHeight:u},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return n.createElement(a.ZP,{in:d,timeout:r},c=>n.createElement("div",{style:{...i,...f[c]}},m))}},16924:(J,R,e)=>{"use strict";e.d(R,{A:()=>l});var n=e(39953),a=e(61205);const l=n.memo(({actions:r})=>{const{chrome:o}=(0,a.p)();return(0,n.useLayoutEffect)(()=>{o.update({actions:r})}),null});l.displayName="TopNavUpdate"},82618:(J,R,e)=>{"use strict";e.d(R,{M:()=>r});var n=e(41407),a=e(39953),l=e(82803);function r({className:g,leftActionsSeparator:m}){const d=(0,l.wW)(o);return m?a.createElement("div",{className:(0,n.cx)(g,d.leftActionsSeparator)}):a.createElement("div",{className:(0,n.cx)(g,d.line)})}const o=g=>({leftActionsSeparator:(0,n.css)({display:"flex",flexGrow:1}),line:(0,n.css)({width:1,backgroundColor:g.colors.border.medium,height:24})})},58434:(J,R,e)=>{"use strict";e.d(R,{$:()=>n});const n=40},20015:(J,R,e)=>{"use strict";e.d(R,{c:()=>i});var n=e(41407),a=e(39953),l=e(91249),r=e(82803),o=e(53039);const g=({className:f,logo:c})=>a.createElement("img",{className:f,src:`${c||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),m=({className:f,children:c})=>{const E=(0,r.l4)(),p=(0,n.css)`
    &:before {
      content: '';
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${E.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${o.mediaUp(E.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return a.createElement("div",{className:(0,n.cx)(p,f)},c)},d=({className:f})=>a.createElement("img",{className:f,src:"public/img/grafana_icon.svg",alt:"Grafana"}),u=()=>{const f=(0,r.l4)();return(0,n.css)`
    background: ${l.alpha(f.colors.background.primary,.7)};
    background-size: cover;
  `};class i{}i.LoginLogo=g,i.LoginBackground=m,i.MenuLogo=d,i.LoginBoxBackground=u,i.AppTitle="Grafana",i.LoginTitle="Welcome to Grafana",i.HideEdition=!1,i.GetLoginSubTitle=()=>null},12258:(J,R,e)=>{"use strict";e.d(R,{t:()=>a});var n=e(32688);function a(l,r,o){const g=[];let m=!1,d;function u(i){if(m)return;const f=i.url?.split("?")??["",""];let c=f[0];if(n.config.featureToggles.dockedMegaMenu){const p=new URLSearchParams(f[1]);p.has("editview")&&(c+=`?editview=${p.get("editview")}`)}if(o&&c===o.url){g.unshift({text:o.text,href:i.url??""}),m=!0;return}const E=c.length>0&&d===c;d=c,!i.hideFromBreadcrumbs&&!E&&g.unshift({text:i.text,href:i.url??""}),i.parentItem&&u(i.parentItem)}return r&&u(r),u(l),g}},18330:(J,R,e)=>{"use strict";e.d(R,{x:()=>o});var n=e(41407),a=e(39953),l=e(82803),r=e(12190);const o=a.forwardRef(({icon:m,children:d,onClick:u,...i},f)=>{const c=(0,l.wW)(g);return a.createElement("button",{...i,className:c.action,onClick:u},a.createElement(r.J,{name:m,size:"xl"}),d)});o.displayName="CardButton";const g=m=>({action:(0,n.css)`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${m.colors.background.secondary};
      border-radius: ${m.shape.radius.default};
      color: ${m.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${m.colors.emphasize(m.colors.background.secondary)};
      }
    `})},80583:(J,R,e)=>{"use strict";e.d(R,{P:()=>o});var n=e(41407),a=e(39953),l=e(82803),r=e(68497);const o=({onClick:m,"aria-label":d,style:u})=>{const i=(0,l.wW)(g);return a.createElement(r.h,{"aria-label":d??"Close",className:i,name:"times",onClick:m,style:u,tooltip:"Close"})},g=m=>(0,n.css)`
  position: absolute;
  right: ${m.spacing(.5)};
  top: ${m.spacing(1)};
`},43997:(J,R,e)=>{"use strict";e.d(R,{W:()=>r});var n=e(41407),a=e(39953),l=e(82803);function r(g){const{description:m,suffix:d,feature:u}=g,i=`Learn more about ${u}`,f=(0,l.wW)(o);return a.createElement("span",{className:f.container},m,a.createElement("a",{"aria-label":i,href:`https://grafana.com/docs/grafana/next/datasources/${d}`,rel:"noreferrer",target:"_blank"},i))}const o=g=>({container:(0,n.css)({color:g.colors.text.secondary,a:(0,n.css)({color:g.colors.text.link,textDecoration:"underline",marginLeft:"5px","&:hover":{textDecoration:"none"}})})})},79684:(J,R,e)=>{"use strict";e.d(R,{Q:()=>a});var n=e(39953);const a=l=>n.lazy(l)},11906:(J,R,e)=>{"use strict";e.d(R,{Z:()=>i});var n=e(41407),a=e(39953),l=e(28888),r=e(12190),o=e(4919),g=e(80318);const m=(0,n.css)`
  text-align: center;
`,d=(0,n.css)`
  max-width: 700px;
  margin: 0 auto;
`,i=({title:f,buttonIcon:c,buttonLink:E,buttonTitle:p,buttonDisabled:h,onClick:y,proTip:s,proTipLink:v,proTipLinkTitle:C,proTipTarget:D,infoBox:M,infoBoxTitle:P})=>{const x=()=>a.createElement(a.Fragment,null,s?a.createElement("span",{key:"proTipFooter"},a.createElement(r.J,{name:"rocket"}),a.createElement(a.Fragment,null," ProTip: ",s," "),v&&a.createElement("a",{href:v,target:D,className:"text-link"},C)):"",M?a.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${d}`},P&&a.createElement("h5",null,P),a.createElement("div",{dangerouslySetInnerHTML:M})):""),S=x()?"":(0,n.css)`
        margin-bottom: 20px;
      `,I=E?o.Qj:o.zx,T=a.createElement(I,{size:"lg",onClick:y,href:E,icon:c,className:S,"data-testid":l.wl.components.CallToActionCard.buttonV2(p),disabled:h},p);return a.createElement(g._,{className:m,message:f,footer:x(),callToActionElement:T})}},85806:(J,R,e)=>{"use strict";e.d(R,{$_:()=>u,dP:()=>o});var n=e(39953),a=e(32688),l=e(12190),r=e(62679);let o=()=>[{target:"_blank",id:"documentation",text:(0,r.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,r.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,r.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function g(f){return{hasReleaseNotes:!0,isBeta:f.includes("-beta")}}function m(f){const{buildInfo:c,licenseInfo:E}=a.config,p=[],h=E.stateInfo?` (${E.stateInfo})`:"";if(f||p.push({target:"_blank",id:"license",text:`${c.edition}${h}`,url:E.licenseUrl}),c.hideVersion)return p;const{hasReleaseNotes:y}=g(c.version);return p.push({target:"_blank",id:"version",text:`v${c.version} (${c.commit})`,url:y?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),c.hasUpdate&&p.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),p}function d(f){o=f}const u=n.memo(({customLinks:f,hideEdition:c})=>{const E=(f||o()).concat(m(c));return n.createElement("footer",{className:"footer"},n.createElement("div",{className:"text-center"},n.createElement("ul",null,E.map(p=>n.createElement("li",{key:p.text},n.createElement(i,{item:p}))))))});u.displayName="Footer";function i({item:f}){const c=f.url?n.createElement("a",{href:f.url,target:f.target,rel:"noopener noreferrer",id:f.id},f.text):f.text;return n.createElement(n.Fragment,null,f.icon&&n.createElement(l.J,{name:f.icon})," ",c)}},14534:(J,R,e)=>{"use strict";e.d(R,{G:()=>f});var n=e(39953),a=e(28888),l=e(85830),r=e(33155),o=e(96227),g=e(12223),m=e(4919),d=e(69865),u=e(2746),i=e(61992);const f=({onSubmit:c,onSkip:E,showDefaultPasswordWarning:p})=>{const h=y=>{c(y.newPassword)};return n.createElement(l.l,{onSubmit:h},({errors:y,register:s,getValues:v})=>n.createElement(n.Fragment,null,p&&n.createElement(r.b,{severity:"info",title:"Continuing to use the default password exposes you to security risks."}),n.createElement(o.g,{label:"New password",invalid:!!y.newPassword,error:y?.newPassword?.message},n.createElement(i.Z,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...s("newPassword",{required:"New Password is required"})})),n.createElement(o.g,{label:"Confirm new password",invalid:!!y.confirmNew,error:y?.confirmNew?.message},n.createElement(i.Z,{id:"confirm-new-password",autoComplete:"new-password",...s("confirmNew",{required:"Confirmed Password is required",validate:C=>C===v().newPassword||"Passwords must match!"})})),n.createElement(g.wc,null,n.createElement(m.zx,{type:"submit",className:u.F},"Submit"),E&&n.createElement(d.u,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},n.createElement(m.zx,{fill:"text",onClick:E,type:"button","aria-label":a.wl.pages.Login.skip},"Skip")))))}},58869:(J,R,e)=>{"use strict";e.d(R,{A:()=>o});var n=e(41407),a=e(39953),l=e(82803),r=e(7894);function o({children:m,spacing:d,level:u}){const i=(0,l.wW)(g,d,u);return a.createElement("span",{className:(0,n.css)(i.indentor)},m)}const g=(m,d,u)=>({indentor:(0,n.css)((0,r.U)(m,d,i=>({paddingLeft:m.spacing(i*u)})))})},13273:(J,R,e)=>{"use strict";e.d(R,{w:()=>m});var n=e(39953),a=e(48993),l=e(69171),r=e(38637);const o=/^(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])$/,g=(d,u)=>!(d.match(u)||!d),m=d=>{const u=d.validationRegex||o,[i,f]=(0,n.useState)(()=>d.value?g(d.value,u):!1);(0,a.Z)(()=>{f(g(d.value,u))},500,[d.value]);const c={labelWidth:26,disabled:d.disabled??!1,invalid:i,error:d.isInvalidError};return d.label&&(c.label=d.label,c.tooltip=d.tooltip||""),n.createElement(l._,{...c},n.createElement(r.I,{type:"text",placeholder:d.placeholder||"0",width:d.width||40,onChange:E=>{d.onChange(E.currentTarget.value)},value:d.value,"aria-label":d.ariaLabel||"interval input"}))}},93114:(J,R,e)=>{"use strict";e.d(R,{X:()=>m});var n=e(41407),a=e(39953),l=e(82803),r=e(12190),o=e(38637),g=e(43324);const m=({name:u,onChange:i,verifyLayerNameUniqueness:f,overrideStyles:c})=>{const E=(0,l.wW)(d),[p,h]=(0,a.useState)(!1),[y,s]=(0,a.useState)(null),v=S=>{h(!0)},C=S=>{if(h(!1),y){s(null);return}u!==S&&i(S)},D=S=>{const I=S.currentTarget.value.trim();if(I.length===0){s("An empty layer name is not allowed");return}if(f&&!f(I)&&I!==u){s("Layer name already exists");return}y&&s(null)},M=S=>{C(S.currentTarget.value.trim())},P=S=>{S.key==="Enter"&&C(S.currentTarget.value)},x=S=>{S.target.select()};return a.createElement(a.Fragment,null,a.createElement("div",{className:E.wrapper},!p&&a.createElement("button",{className:E.layerNameWrapper,title:"Edit layer name",onClick:v,"data-testid":"layer-name-div"},a.createElement("span",{className:c?"":E.layerName},u),a.createElement(r.J,{name:"pen",className:E.layerEditIcon,size:"sm"})),p&&a.createElement(a.Fragment,null,a.createElement(o.I,{type:"text",defaultValue:u,onBlur:M,autoFocus:!0,onKeyDown:P,onFocus:x,invalid:y!==null,onChange:D,className:E.layerNameInput,"data-testid":"layer-name-input"}),y&&a.createElement(g.S,{horizontal:!0},y))))},d=u=>({wrapper:(0,n.css)`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${u.spacing(.5)};
    `,layerNameWrapper:(0,n.css)`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${u.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${u.spacing(.5)};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${u.colors.action.hover};
        border: 1px dashed ${u.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${u.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,layerName:(0,n.css)`
      font-weight: ${u.typography.fontWeightMedium};
      color: ${u.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${u.spacing(.5)};
    `,layerEditIcon:(0,n.cx)((0,n.css)`
        margin-left: ${u.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),layerNameInput:(0,n.css)`
      max-width: 300px;
      margin: -4px 0;
    `})},1188:(J,R,e)=>{"use strict";e.d(R,{G:()=>l});var n=e(39953),a=e(23062);const l=r=>{const{children:o,storageKey:g,defaultValue:m}=r,[d,u]=(0,n.useState)({value:a.Z.getObject(r.storageKey,r.defaultValue)});(0,n.useEffect)(()=>{const c=E=>{E.key===g&&u({value:a.Z.getObject(r.storageKey,r.defaultValue)})};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}});const i=c=>{try{a.Z.setObject(g,c)}catch(E){console.error(E)}u({value:c})},f=()=>{try{a.Z.delete(g)}catch(c){console.log(c)}u({value:m})};return n.createElement(n.Fragment,null,o(d.value,i,f))}},76897:(J,R,e)=>{"use strict";e.d(R,{Z:()=>m});var n=e(39953),a=e(4148),l=e(50820),r=e(62679);const o=()=>!!l.default.oauth&&Object.keys(l.default.oauth).length>0;class g extends n.PureComponent{constructor(i){super(i),this.changePassword=f=>{const c={newPassword:f,confirmNew:f,oldPassword:"admin"};if(this.props.resetCode){const E={code:this.props.resetCode,newPassword:f,confirmPassword:f};(0,a.i)().post("/api/user/password/reset",E).then(()=>{this.toGrafana()})}else(0,a.i)().put("/api/user/password",c).then(()=>{this.toGrafana()}).catch(E=>console.error(E))},this.login=f=>{this.setState({loginErrorMessage:void 0,isLoggingIn:!0}),(0,a.i)().post("/login",f,{showErrorAlert:!1}).then(c=>{if(this.result=c,f.password!=="admin"||l.default.ldapEnabled||l.default.authProxyEnabled){this.toGrafana();return}else this.changeView(f.password==="admin")}).catch(c=>{const E=(0,a.kW)(c)?d(c):void 0;this.setState({isLoggingIn:!1,loginErrorMessage:E||(0,r.t)("login.error.unknown","Unknown error occurred")})})},this.changeView=f=>{this.setState({isChangingPassword:!0,showDefaultPasswordWarning:f})},this.toGrafana=()=>{this.result?.redirectUrl?l.default.appSubUrl!==""&&!this.result.redirectUrl.startsWith(l.default.appSubUrl)?window.location.assign(l.default.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(l.default.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1,showDefaultPasswordWarning:!1,loginErrorMessage:l.default.loginError}}render(){const{children:i}=this.props,{isLoggingIn:f,isChangingPassword:c,showDefaultPasswordWarning:E,loginErrorMessage:p}=this.state,{login:h,toGrafana:y,changePassword:s}=this,{loginHint:v,passwordHint:C,disableLoginForm:D,disableUserSignUp:M}=l.default;return n.createElement(n.Fragment,null,i({isOauthEnabled:o(),loginHint:v,passwordHint:C,disableLoginForm:D,disableUserSignUp:M,login:h,isLoggingIn:f,changePassword:s,skipPasswordChange:y,isChangingPassword:c,showDefaultPasswordWarning:E,loginErrorMessage:p}))}}const m=g;function d(u){switch(u.data?.messageId){case"password-auth.empty":case"password-auth.failed":case"password-auth.invalid":return(0,r.t)("login.error.invalid-user-or-password","Invalid username or password");case"login-attempt.blocked":return(0,r.t)("login.error.blocked","You have exceeded the number of login attempts for this user. Please try again later.");default:return u.data?.message}}},2746:(J,R,e)=>{"use strict";e.d(R,{F:()=>i,U:()=>f});var n=e(41407),a=e(39953),l=e(28888),r=e(85830),o=e(96227),g=e(38637),m=e(4919),d=e(61992);const u=(0,n.css)`
  width: 100%;
  padding-bottom: 16px;
`,i=(0,n.css)`
  justify-content: center;
  width: 100%;
`,f=({children:c,onSubmit:E,isLoggingIn:p,passwordHint:h,loginHint:y})=>a.createElement("div",{className:u},a.createElement(r.l,{onSubmit:E,validateOn:"onChange"},({register:s,errors:v})=>a.createElement(a.Fragment,null,a.createElement(o.g,{label:"Email or username",invalid:!!v.user,error:v.user?.message},a.createElement(g.I,{...s("user",{required:"Email or username is required"}),autoFocus:!0,autoCapitalize:"none",placeholder:y,"aria-label":l.wl.pages.Login.username})),a.createElement(o.g,{label:"Password",invalid:!!v.password,error:v.password?.message},a.createElement(d.Z,{id:"current-password",autoComplete:"current-password",passwordHint:h,...s("password",{required:"Password is required"})})),a.createElement(m.zx,{type:"submit","aria-label":l.wl.pages.Login.submit,className:i,disabled:p},p?"Logging in...":"Log in"),c)))},77326:(J,R,e)=>{"use strict";e.d(R,{$s:()=>m,dd:()=>d,pJ:()=>i});var n=e(41407),a=e(39953),l=e(82803),r=e(53039),o=e(20015),g=e(85806);const m=({children:f,enterAnimation:c=!0})=>{const E=(0,l.wW)(i);return a.createElement("div",{className:(0,n.cx)(E.loginInnerBox,c&&E.enterAnimation)},f)},d=({children:f,branding:c,isChangingPassword:E})=>{const p=(0,l.wW)(i),[h,y]=(0,a.useState)(!1),s=c?.loginSubtitle??o.c.GetLoginSubTitle(),v=c?.loginTitle??o.c.LoginTitle,C=c?.loginBoxBackground||o.c.LoginBoxBackground(),D=c?.loginLogo,M=c?.hideEdition??o.c.HideEdition;return(0,a.useEffect)(()=>y(!0),[]),a.createElement(o.c.LoginBackground,{className:(0,n.cx)(p.container,h&&p.loginAnim,c?.loginBackground)},a.createElement("div",{className:p.loginMain},a.createElement("div",{className:(0,n.cx)(p.loginContent,C,"login-content-box")},a.createElement("div",{className:p.loginLogoWrapper},a.createElement(o.c.LoginLogo,{className:p.loginLogo,logo:D}),a.createElement("div",{className:p.titleWrapper},E?a.createElement("h1",{className:p.mainTitle},"Update your password"):a.createElement(a.Fragment,null,a.createElement("h1",{className:p.mainTitle},v),s&&a.createElement("h3",{className:p.subTitle},s)))),a.createElement("div",{className:p.loginOuterBox},f))),c?.hideFooter?a.createElement(a.Fragment,null):a.createElement(g.$_,{hideEdition:M,customLinks:c?.footerLinks}))},u=(0,n.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,i=f=>({loginMain:(0,n.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,n.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,n.css)`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:(0,n.css)`
      justify-content: center;
      width: 100%;
    `,loginLogo:(0,n.css)`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${r.mediaUp(f.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:(0,n.css)`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${f.spacing(3)};
    `,titleWrapper:(0,n.css)`
      text-align: center;
    `,mainTitle:(0,n.css)`
      font-size: 22px;

      @media ${r.mediaUp(f.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:(0,n.css)`
      font-size: ${f.typography.size.md};
      color: ${f.colors.text.secondary};
    `,loginContent:(0,n.css)`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${f.shape.borderRadius(4)};
      padding: ${f.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${r.mediaUp(f.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:(0,n.css)`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:(0,n.css)`
      padding: ${f.spacing(0,2,2,2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:(0,n.css)`
      animation: ${u} ease-out 0.2s;
    `})},30359:(J,R,e)=>{"use strict";e.d(R,{Y:()=>g});var n=e(86832),a=e.n(n),l=e(39953),r=e(38637),o=e(96227);class g extends l.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=l.createRef(),this.updateValue=()=>{const d=this.inputRef.current?.value;let u=!1,i="";const f=this.props.min,c=this.props.max;let E=d!==""?Number(d):void 0;E&&!Number.isNaN(E)&&(f!=null&&E<f?(i=f.toString(),u=!0):c!=null&&E>c?(i=c.toString(),u=!0):i=d??"",this.setState({text:i,inputCorrected:u})),u&&this.updateValueDebounced(),!Number.isNaN(E)&&E!==this.props.value&&this.props.onChange(E)},this.updateValueDebounced=(0,n.debounce)(this.updateValue,500),this.onChange=d=>{this.setState({text:d.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=d=>{d.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(d){if(this.props.value!==d.value){const u=isNaN(this.props.value)?"":`${this.props.value}`;u!==this.state.text&&this.setState({text:u})}}renderInput(){return l.createElement(r.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width,suffix:this.props.suffix})}render(){const{inputCorrected:d}=this.state;if(d){let u="",{min:i,max:f}=this.props;return f==null?i!=null&&(u=`< ${i}`):i!=null?u=`${i} < > ${f}`:u=`> ${f}`,l.createElement(o.g,{invalid:d,error:`Out of range ${u}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},83851:(J,R,e)=>{"use strict";e.d(R,{B:()=>m});var n=e(41407),a=e(39953),l=e(82803),r=e(69360),o=e(68497),g=e(5205);const m=({value:u,settings:i,onChange:f,details:c})=>{const E=(0,l.l4)(),p=(0,l.wW)(d);return a.createElement(r.zH,{color:u??"",onChange:f,enableNamedColors:i?.enableNamedColors!==!1},({ref:h,showColorPicker:y,hideColorPicker:s})=>a.createElement("div",{className:p.spot},a.createElement("div",{className:p.colorPicker},a.createElement(g.b,{ref:h,onClick:y,onMouseLeave:s,color:u?E.visualization.getColorByName(u):E.components.input.borderColor})),c&&a.createElement(a.Fragment,null,u?a.createElement("span",{className:p.colorText,onClick:y},u):a.createElement("span",{className:p.placeholderText,onClick:y},i?.placeholder??"Select color"),i?.isClearable&&u&&a.createElement(o.h,{name:"times",onClick:()=>f(void 0),tooltip:"Clear settings"}))))},d=u=>({spot:(0,n.css)`
      cursor: pointer;
      color: ${u.colors.text};
      background: ${u.components.input.background};
      padding: 3px;
      height: ${u.v1.spacing.formInputHeight}px;
      border: 1px solid ${u.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      align-content: flex-end;
      &:hover {
        border: 1px solid ${u.components.input.borderHover};
      }
    `,colorPicker:(0,n.css)`
      padding: 0 ${u.spacing(1)};
    `,colorText:(0,n.css)`
      flex-grow: 2;
    `,placeholderText:(0,n.css)`
      flex-grow: 2;
      color: ${u.colors.text.secondary};
    `})},46108:(J,R,e)=>{"use strict";e.d(R,{w:()=>l});var n=e(39953),a=e(30359);const l=({value:r,onChange:o,item:g})=>{const{settings:m}=g,d=(0,n.useCallback)(u=>{o(m?.integer&&u!==void 0?Math.floor(u):u)},[o,m?.integer]);return n.createElement(a.Y,{value:r,min:m?.min,max:m?.max,step:m?.step,placeholder:m?.placeholder,onChange:d})}},92756:(J,R,e)=>{"use strict";e.d(R,{u:()=>Ye,l:()=>Be});var n=e(39953),a=e(18985),l=e(63671),r=e(89591),o=e(60695),g=e(26286),m=e(20454),d=e(87783),u=e(57669),i=e(41407),f=e(86832),c=e(49231),E=e(54342),p=e(14312),h=e(38637),y=e(69360),s=e(68497),v=e(4919),C=e(36495),D=e(64084);const M=[{value:o.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:o.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class P extends n.PureComponent{constructor(le){super(le),this.onAddThreshold=()=>{const{steps:X}=this.state;let se=0;X.length>1&&(se=X[X.length-1].value+10);let re=p.O9.filter(xe=>!X.some(Pe=>Pe.color===xe))[1];re||(re="#CCCCCC");const pe={value:se,color:re,key:x++},be=[...X,pe];(0,c.bP)(be),this.setState({steps:be},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=X=>{const{steps:se}=this.state;se.length&&X.key!==se[0].key&&this.setState({steps:se.filter(re=>re.key!==X.key)},this.onChange)},this.onChangeThresholdValue=(X,se)=>{const re=X.target.value.replace(/,/g,"."),pe=parseFloat(re),be=isNaN(pe)?"":pe,xe=this.state.steps.map(Pe=>(Pe.key===se.key&&(Pe={...Pe,value:be}),Pe));xe.length&&(xe[0].value=-1/0),(0,c.bP)(xe),this.setState({steps:xe})},this.onChangeThresholdColor=(X,se)=>{const{steps:re}=this.state,pe=re.map(be=>(be.key===X.key&&(be={...be,color:se}),be));this.setState({steps:pe},this.onChange)},this.onBlur=()=>{const X=[...this.state.steps];(0,c.bP)(X),this.setState({steps:X},this.onChange)},this.onChange=()=>{this.props.onChange(I(this.props.thresholds,this.state.steps))},this.onModeChanged=X=>{this.props.onChange({...this.props.thresholds,mode:X})};const de=S(le.thresholds.steps);de[0].value=-1/0,this.state={steps:de},this.latestThresholdInputRef=n.createRef()}renderInput(le,de,X){const se=this.props.thresholds.mode===o.H.Percentage,re=`Threshold ${X+1}`;return isFinite(le.value)?n.createElement(h.I,{type:"number",step:"0.0001",key:se.toString(),onChange:pe=>this.onChangeThresholdValue(pe,le),value:le.value,"aria-label":re,ref:X===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:n.createElement("div",{className:de.inputPrefix},n.createElement("div",{className:de.colorPicker},n.createElement(y.zH,{color:le.color,onChange:pe=>this.onChangeThresholdColor(le,pe),enableNamedColors:!0})),se&&n.createElement("div",{className:de.percentIcon},"%")),suffix:n.createElement(s.h,{className:de.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(le),tooltip:`Remove ${re}`})}):n.createElement(h.I,{type:"text",value:"Base","aria-label":re,disabled:!0,prefix:n.createElement("div",{className:de.colorPicker},n.createElement(y.zH,{color:le.color,onChange:pe=>this.onChangeThresholdColor(le,pe),enableNamedColors:!0}))})}render(){const{thresholds:le}=this.props,{steps:de}=this.state;return n.createElement(E.N.Consumer,null,X=>{const se=T(X);return n.createElement("div",{className:se.wrapper},n.createElement(v.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:se.addButton,fullWidth:!0},"Add threshold"),n.createElement("div",{className:se.thresholds},de.slice(0).reverse().map((re,pe)=>n.createElement("div",{className:se.item,key:`${re.key}`},this.renderInput(re,se,pe)))),n.createElement("div",null,n.createElement(C._,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),n.createElement(m.S,{options:M,onChange:this.onModeChanged,value:le.mode})))})}}let x=100;function S(Le){return(!Le||Le.length===0)&&(Le=[{value:-1/0,color:"green"}]),Le.filter((le,de)=>(0,f.isNumber)(le.value)||de===0).map(le=>({color:le.color,value:le.value===null?-1/0:le.value,key:x++}))}function I(Le,le){return{mode:Le.mode??o.H.Absolute,steps:le.map(X=>{const{key:se,...re}=X;return re})}}const T=(0,D.B)(Le=>({wrapper:(0,i.css)`
      display: flex;
      flex-direction: column;
    `,thresholds:(0,i.css)`
      display: flex;
      flex-direction: column;
      margin-bottom: ${Le.spacing(2)};
    `,item:(0,i.css)`
      margin-bottom: ${Le.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:(0,i.css)`
      padding: 0 ${Le.spacing(1)};
    `,addButton:(0,i.css)`
      margin-bottom: ${Le.spacing(1)};
    `,percentIcon:(0,i.css)`
      font-size: ${Le.typography.bodySmall.fontSize};
      color: ${Le.colors.text.secondary};
    `,inputPrefix:(0,i.css)`
      display: flex;
      align-items: center;
    `,trashIcon:(0,i.css)`
      color: ${Le.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${Le.colors.text};
      }
    `}));class O extends n.PureComponent{constructor(le){super(le)}render(){const{onChange:le}=this.props;let de=this.props.value;return de||(de={mode:o.H.Percentage,steps:[]}),n.createElement(P,{thresholds:de,onChange:le})}}var A=e(23955),B=e(82803),b=e(12223),W=e(12190),V=e(73075),w=e(11925),K=e(57346),z=e(24058),G=e(96428),Q=e(9558);function j({mapping:Le,index:le,onChange:de,onRemove:X,onDuplicate:se,showIconPicker:re}){const{key:pe,result:be,id:xe}=Le,Pe=(0,B.wW)(F),we=(0,n.useRef)(null),Fe=(0,n.useCallback)(tt=>{const ft={...Le,result:{...Le.result}};tt(ft),de(le,ft)},[Le,le,de]);(0,n.useEffect)(()=>{we.current&&Le.isNew&&(we.current.focus(),Fe(tt=>{tt.isNew=!1}))},[Le,we,Fe]);const He=tt=>{Fe(ft=>{ft.result.color=tt})},Xe=()=>{Fe(tt=>{tt.result.color=void 0})},dt=tt=>{Fe(ft=>{ft.result.icon=tt})},ct=()=>{Fe(tt=>{tt.result.icon=void 0})},At=tt=>{Fe(ft=>{ft.key=tt.currentTarget.value})},Ie=tt=>{Fe(ft=>{ft.result.text=tt.currentTarget.value})},Ze=tt=>{Fe(ft=>{ft.from=parseFloat(tt.currentTarget.value)})},ut=tt=>{Fe(ft=>{ft.to=parseFloat(tt.currentTarget.value)})},rt=tt=>{Fe(ft=>{ft.pattern=tt.currentTarget.value})},St=tt=>{Fe(ft=>{ft.specialMatch=tt.value})},st=[{label:"Null",value:A.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:A.e.NaN,description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:A.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:A.e.True,description:"Boolean true values"},{label:"False",value:A.e.False,description:"Boolean false values"},{label:"Empty",value:A.e.Empty,description:"Empty string"}];return n.createElement(z._l,{key:xe,draggableId:xe,index:le},tt=>n.createElement("tr",{className:Pe.dragRow,ref:tt.innerRef,...tt.draggableProps},n.createElement("td",null,n.createElement("div",{className:Pe.dragHandle,...tt.dragHandleProps},n.createElement(W.J,{name:"draggabledots",size:"lg"}))),n.createElement("td",{className:Pe.typeColumn},Le.type),n.createElement("td",null,Le.type===A.H.ValueToText&&n.createElement(h.I,{ref:we,type:"text",value:pe??"",onChange:At,placeholder:"Exact value to match"}),Le.type===A.H.RangeToText&&n.createElement("div",{className:Pe.rangeInputWrapper},n.createElement(h.I,{type:"number",value:Le.from??"",placeholder:"Range start",onChange:Ze,prefix:"From"}),n.createElement(h.I,{type:"number",value:Le.to??"",placeholder:"Range end",onChange:ut,prefix:"To"})),Le.type===A.H.RegexToText&&n.createElement(h.I,{type:"text",value:Le.pattern??"",placeholder:"Regular expression",onChange:rt}),Le.type===A.H.SpecialValue&&n.createElement(Q.Ph,{value:st.find(ft=>ft.value===Le.specialMatch),options:st,onChange:St})),n.createElement("td",null,n.createElement(h.I,{type:"text",value:be.text??"",onChange:Ie,placeholder:"Optional display text"})),n.createElement("td",{className:Pe.textAlignCenter},be.color&&n.createElement(b.Lh,{spacing:"sm",justify:"center"},n.createElement(y.zH,{color:be.color,onChange:He,enableNamedColors:!0}),n.createElement(s.h,{name:"times",onClick:Xe,tooltip:"Remove color",tooltipPlacement:"top"})),!be.color&&n.createElement(y.zH,{color:"gray",onChange:He,enableNamedColors:!0},ft=>n.createElement(v.zx,{variant:"primary",fill:"text",onClick:ft.showColorPicker,ref:ft.ref,size:"sm"},"Set color"))),re&&n.createElement("td",{className:Pe.textAlignCenter},n.createElement(b.Lh,{spacing:"sm",justify:"center"},n.createElement(K.E,{onChange:dt,onClear:ct,value:be.icon,size:w.zc.SMALL,folderName:w.QS.Icon,mediaType:w.DD.Icon,color:be.color}),be.icon&&n.createElement(s.h,{name:"times",onClick:ct,tooltip:"Remove icon",tooltipPlacement:"top"}))),n.createElement("td",{className:Pe.textAlignCenter},n.createElement(b.Lh,{spacing:"sm"},n.createElement(s.h,{name:"copy",onClick:()=>se(le),"data-testid":"duplicate-value-mapping","aria-label":"Duplicate value mapping",tooltip:"Duplicate"}),n.createElement(s.h,{name:"trash-alt",onClick:()=>X(le),"data-testid":"remove-value-mapping","aria-label":"Delete value mapping",tooltip:"Delete"})))))}const F=Le=>({dragRow:(0,i.css)({position:"relative"}),dragHandle:(0,i.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${Le.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,i.css)({display:"flex","> div:first-child":{marginRight:Le.spacing(2)}}),regexInputWrapper:(0,i.css)({display:"flex","> div:first-child":{marginRight:Le.spacing(2)}}),typeColumn:(0,i.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,i.css)({textAlign:"center"})});function k({value:Le,onChange:le,onClose:de,showIconPicker:X}){const se=(0,B.wW)(_),[re,pe]=(0,n.useState)([]);(0,n.useEffect)(()=>{pe(q(Le))},[Le]);const be=dt=>{if(!Le||!dt.destination)return;const ct=[...re],At=ct[dt.source.index];ct.splice(dt.source.index,1),ct.splice(dt.destination.index,0,At),pe(ct)},xe=(dt,ct)=>{const At=[...re];At.splice(dt,1,ct),pe(At)},Pe=dt=>{const ct=[...re];ct.splice(dt,1),pe(ct)},we=[{label:"Value",value:A.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:A.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:A.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:A.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],Fe=dt=>{pe([...re,Z({type:dt.value,result:{},isNew:!0})])},He=dt=>{const ct=ae(re[dt]),At=[...re];At.splice(dt,0,{...ct});for(let Ie=dt;Ie<re.length;Ie++)At[Ie].result.index=Ie;pe(At)},Xe=()=>{le(ce(re)),de()};return(0,n.useEffect)(()=>{Le?.length||Fe({value:A.H.ValueToText})},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:se.tableWrap},n.createElement("table",{className:se.editTable},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{style:{width:"1%"}}),n.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),n.createElement("th",{style:{textAlign:"left"}},"Display text"),n.createElement("th",{style:{width:"10%"}},"Color"),X&&n.createElement("th",{style:{width:"10%"}},"Icon"),n.createElement("th",{style:{width:"1%"}}))),n.createElement(z.Z5,{onDragEnd:be},n.createElement(z.bK,{droppableId:"sortable-field-mappings",direction:"vertical"},dt=>n.createElement("tbody",{ref:dt.innerRef,...dt.droppableProps},re.map((ct,At)=>n.createElement(j,{key:ct.id,mapping:ct,index:At,onChange:xe,onRemove:Pe,onDuplicate:He,showIconPicker:X})),dt.placeholder))))),n.createElement(V.u.ButtonRow,{leftItems:n.createElement(G.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:we,onChange:Fe})},n.createElement(v.zx,{variant:"secondary",fill:"outline",onClick:de},"Cancel"),n.createElement(v.zx,{variant:"primary",onClick:Xe},"Update")))}const _=Le=>({tableWrap:(0,i.css)`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,i.css)({width:"100%",marginBottom:Le.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:Le.colors.action.hover}," th, td":{padding:Le.spacing(1)}})});function Y(){return(0,f.uniqueId)("mapping-")}function Z(Le){return{type:A.H.ValueToText,result:{},id:Y(),...Le}}function ae(Le){return{...Z(Le),id:Y()}}function ce(Le){const le=[],de={type:A.H.ValueToText,options:{}};return Le.forEach((X,se)=>{const re={...X.result,index:se};switch((!re.text||re.text.trim().length===0)&&(re.text=void 0),X.type){case A.H.ValueToText:X.key!=null&&(de.options[X.key]=re);break;case A.H.RangeToText:X.from!=null&&X.to!=null&&le.push({type:X.type,options:{from:X.from,to:X.to,result:re}});break;case A.H.RegexToText:X.pattern!=null&&le.push({type:X.type,options:{pattern:X.pattern,result:re}});break;case A.H.SpecialValue:le.push({type:X.type,options:{match:X.specialMatch,result:re}})}}),Object.keys(de.options).length>0&&le.unshift(de),le}function q(Le){const le=[];if(Le)for(const de of Le)switch(de.type){case A.H.ValueToText:for(const X of Object.keys(de.options))le.push(Z({type:de.type,result:de.options[X],key:X}));break;case A.H.RangeToText:le.push(Z({type:de.type,result:de.options.result,from:de.options.from??0,to:de.options.to??0}));break;case A.H.RegexToText:le.push(Z({type:de.type,result:de.options.result,pattern:de.options.pattern}));break;case A.H.SpecialValue:le.push(Z({type:de.type,result:de.options.result,specialMatch:de.options.match??A.e.Null}))}return le.sort((de,X)=>(de.result.index??0)>(X.result.index??0)?1:-1),le}const De=n.memo(Le=>{const{value:le,onChange:de,item:X}=Le,se=(0,B.wW)(oe),re=X.settings?.icon,[pe,be]=(0,n.useState)(!1),xe=(0,n.useCallback)(()=>{be(!1)},[be]),Pe=(0,n.useMemo)(()=>q(le),[le]),we=(0,n.useCallback)((He,Xe)=>{Pe[Xe].result.color=He,de(ce(Pe))},[Pe,de]),Fe=(0,n.useCallback)((He,Xe)=>{Pe[Xe].result.icon=He,de(ce(Pe))},[Pe,de]);return n.createElement(b.wc,null,n.createElement("table",{className:se.compactTable},n.createElement("tbody",null,Pe.map((He,Xe)=>n.createElement("tr",{key:Xe.toString()},n.createElement("td",null,He.type===A.H.ValueToText&&He.key,He.type===A.H.RangeToText&&n.createElement("span",null,"[",He.from," - ",He.to,"]"),He.type===A.H.RegexToText&&He.pattern,He.type===A.H.SpecialValue&&He.specialMatch),n.createElement("td",null,n.createElement(W.J,{name:"arrow-right"})),n.createElement("td",null,He.result.text),He.result.color&&n.createElement("td",null,n.createElement(y.zH,{color:He.result.color,onChange:dt=>we(dt,Xe),enableNamedColors:!0})),re&&He.result.icon&&n.createElement("td",{"data-testid":"iconPicker"},n.createElement(K.E,{onChange:dt=>Fe(dt,Xe),value:He.result.icon,size:w.zc.SMALL,folderName:w.QS.Icon,mediaType:w.DD.Icon,color:He.result.color})))))),n.createElement(v.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>be(!0)},Pe.length>0&&n.createElement("span",null,"Edit value mappings"),Pe.length===0&&n.createElement("span",null,"Add value mappings")),n.createElement(V.u,{isOpen:pe,title:"Value mappings",onDismiss:xe,className:se.modal,closeOnBackdropClick:!1},n.createElement(k,{value:le,onChange:de,onClose:xe,showIconPicker:re})))});De.displayName="ValueMappingsEditor";const oe=Le=>({modal:(0,i.css)({width:"980px"}),compactTable:(0,i.css)({width:"100%","tbody td":{padding:Le.spacing(.5)}})});var te=e(56516);const fe=({value:Le,onChange:le,item:de})=>{const{placeholder:X,isClearable:se}=de?.settings??{},re=(0,n.useCallback)(pe=>{le(pe?.value?.uid)},[le]);return n.createElement(te.o,{isClearable:se,defaultOptions:!0,onChange:re,placeholder:X,value:Le})};var Te=e(83851),ge=e(73254),he=e(97898),me=e(96227);const ye=({value:Le,onChange:le,item:de,id:X})=>{const se=(0,B.l4)(),re=(0,B.wW)(Oe),pe=(0,ge.QY)(Le?.mode),xe=(de.settings?.byValueSupport?ge.WO.list():ge.WO.list().filter(Xe=>!Xe.isByValue)).map(Xe=>{let dt=Xe.isByValue?" (by value)":"";return{value:Xe.id,label:`${Xe.name}${dt}`,description:Xe.description,isContinuous:Xe.isContinuous,isByValue:Xe.isByValue,component(){return n.createElement(ue,{mode:Xe,theme:se})}}}),Pe=Xe=>{le({...Le,mode:Xe.value})},we=Xe=>{le({...Le,mode:He,fixedColor:Xe})},Fe=Xe=>{le({...Le,mode:He,seriesBy:Xe})},He=Le?.mode??he.S.Thresholds;if(He===he.S.Fixed||He===he.S.Shades)return n.createElement("div",{className:re.group},n.createElement(Q.Ph,{minMenuHeight:200,options:xe,value:He,onChange:Pe,className:re.select,inputId:X}),n.createElement(Te.B,{value:Le?.fixedColor,onChange:we}));if(de.settings?.bySeriesSupport&&pe.isByValue){const Xe=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginBottom:se.spacing(2)}},n.createElement(Q.Ph,{minMenuHeight:200,options:xe,value:He,onChange:Pe,inputId:X})),n.createElement(me.g,{label:"Color series by"},n.createElement(m.S,{value:Le?.seriesBy??"last",options:Xe,onChange:Fe})))}return n.createElement(Q.Ph,{minMenuHeight:200,options:xe,value:He,onChange:Pe,inputId:X})},ue=({mode:Le,theme:le})=>{if(!Le.getColors)return null;const de=Le.getColors(le).map(le.visualization.getColorByName),X={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(Le.isContinuous)X.background=`linear-gradient(90deg, ${de.join(",")})`;else{let se="",re="";for(let pe=0;pe<de.length;pe++){const be=de[pe];if(se==="")se=`linear-gradient(90deg, ${be} 0%`;else{const Pe=pe/(de.length-1)*100;se+=`, ${re} ${Pe}%, ${be} ${Pe}%`}re=be}X.background=se}return n.createElement("div",{style:X})},Oe=Le=>({group:(0,i.css)`
      display: flex;
    `,select:(0,i.css)`
      margin-right: 8px;
      flex-grow: 1;
    `});var Ue=e(69733),at=e(86467);const Ne=({value:Le,onChange:le,context:de})=>n.createElement(at.d,{links:Le,onChange:le,data:de.data,getSuggestions:()=>de.getSuggestions?de.getSuggestions(Ue.o3.Values):[]});class _e extends n.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:le}=this.props,{settings:de}=le;let X=le.settings?.options||[];de?.getOptions&&(X=await de.getOptions(this.props.context)),this.state.options!==X&&this.setState({isLoading:!1,options:X})}}componentDidMount(){this.updateOptions()}componentDidUpdate(le){const de=le.item?.settings,X=this.props.item?.settings;if(de!==X)this.updateOptions();else if(X?.getOptions){const se=le.context?.data,re=this.props.context?.data;se!==re&&this.updateOptions()}}render(){const{options:le,isLoading:de}=this.state,{value:X,onChange:se,item:re}=this.props,{settings:pe}=re;return n.createElement(Q.NU,{isLoading:de,value:X,defaultValue:X,allowCustomValue:pe?.allowCustomValue,onChange:be=>{se(be.map(xe=>xe.value).flatMap(xe=>xe!==void 0?[xe]:[]))},options:le})}}var Ke=e(46108);class et extends n.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:le}=this.props,{settings:de}=le;let X=le.settings?.options||[];de?.getOptions&&(X=await de.getOptions(this.props.context)),this.state.options!==X&&this.setState({isLoading:!1,options:X})}}componentDidMount(){this.updateOptions()}componentDidUpdate(le){const de=le.item?.settings,X=this.props.item?.settings;if(de!==X)this.updateOptions();else if(X?.getOptions){const se=le.context?.data,re=this.props.context?.data;se!==re&&this.updateOptions()}}render(){const{options:le,isLoading:de}=this.state,{value:X,onChange:se,item:re}=this.props,{settings:pe}=re;let be=le.find(xe=>xe.value===X);return!be&&X&&(be={label:`${X}`,value:X}),n.createElement(Q.Ph,{isLoading:de,value:be,defaultValue:X,allowCustomValue:pe?.allowCustomValue,isClearable:pe?.isClearable,onChange:xe=>se(xe?.value),options:le})}}var ze=e(52234),je=e(54173);const Qe=({value:Le,onChange:le,item:de,id:X})=>n.createElement(je.m,{stats:Le,onChange:le,allowMultiple:!!de.settings?.allowMultiple,defaultStat:de.settings?.defaultStat,inputId:X});var We=e(40866),ke=e(32688);class ot extends n.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=le=>{const{value:de,onChange:X}=this.props,se=[...de];se.splice(le,1),X(se)},this.onValueChange=(le,de)=>{if("key"in le&&le.key!=="Enter")return;const{value:X,onChange:se}=this.props,re=le.currentTarget.value.trim();if(de<0){re&&(le.currentTarget.value="",se([...X,re])),this.setState({showAdd:!1});return}if(!re)return this.onRemoveString(de);const pe=[...X];pe[de]=re,se(pe)}}render(){const{value:le,item:de}=this.props,{showAdd:X}=this.state,se=lt(ke.config.theme2),re=de.settings?.placeholder||"Add text";return n.createElement("div",null,le.map((pe,be)=>n.createElement(h.I,{className:se.textInput,key:`${be}/${pe}`,defaultValue:pe||"",onBlur:xe=>this.onValueChange(xe,be),onKeyDown:xe=>this.onValueChange(xe,be),suffix:n.createElement(W.J,{className:se.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(be)})})),X?n.createElement(h.I,{autoFocus:!0,className:se.textInput,placeholder:re,defaultValue:"",onBlur:pe=>this.onValueChange(pe,-1),onKeyDown:pe=>this.onValueChange(pe,-1),suffix:n.createElement(W.J,{name:"plus-circle"})}):n.createElement(v.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},re))}}const lt=(0,D.B)(Le=>({textInput:(0,i.css)`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${Le.components.input.borderHover};
      }
    `,trashIcon:(0,i.css)`
      color: ${Le.colors.text.secondary};
      cursor: pointer;

      &:hover {
        color: ${Le.colors.text};
      }
    `}));var Ct=e(61805);function wt({value:Le,onChange:le,item:de}){const X=(0,B.wW)(Lt);return de?.settings?.isClearable&&Le!=null?n.createElement("div",{className:X.wrapper},n.createElement("span",{className:X.first},n.createElement(Ct.n,{value:Le,onChange:le})),n.createElement(s.h,{name:"times",onClick:()=>le(void 0),tooltip:"Clear unit selection"})):n.createElement(Ct.n,{value:Le,onChange:le})}const Lt=Le=>({wrapper:(0,i.css)`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:(0,i.css)`
    margin-right: 8px;
    flex-grow: 2;
  `}),Ye=()=>{const Le={id:"number",name:"Number",description:"Allows numeric values input",editor:Ke.w},le={id:"slider",name:"Slider",description:"Allows numeric values input",editor:ze.p},de={id:"text",name:"Text",description:"Allows string values input",editor:We.A},X={id:"strings",name:"String array",description:"An array of strings",editor:ot},se={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(Ze){const{id:ut,...rt}=Ze;return n.createElement(g.r,{...rt,onChange:St=>Ze.onChange(St.currentTarget.checked)})}},re={id:"select",name:"Select",description:"Allows option selection",editor:et},pe={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:_e},be={id:"radio",name:"Radio",description:"Allows option selection",editor(Ze){return n.createElement(m.S,{...Ze,options:Ze.item.settings?.options})}},xe={id:"unit",name:"Unit",description:"Allows unit input",editor:wt},Pe={id:"color",name:"Color",description:"Allows color selection",editor(Ze){return n.createElement(Te.B,{value:Ze.value,onChange:Ze.onChange,settings:Ze.item.settings,details:!0})}},we={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:ye},Fe={id:"links",name:"Links",description:"Allows defining data links",editor:Ne},He={id:"stats-picker",name:"Stats Picker",editor:Qe,description:""},Xe={id:"timezone",name:"Time zone",description:"Time zone selection",editor:d.O},dt={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:u.b};return[de,Le,le,se,be,re,xe,Fe,He,X,Xe,we,Pe,pe,dt,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:fe},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:De},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:O}]},Be=()=>{const Le=["Standard options"],le={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:a.S.get("text").editor,override:a.S.get("text").editor,process:l.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:Le},de={id:"unit",path:"unit",name:"Unit",description:"",editor:a.S.get("unit").editor,override:a.S.get("unit").editor,process:l.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:Le},X={id:"fieldMinMax",path:"fieldMinMax",name:"Field min/max",description:"Calculate min max per field",editor:a.S.get("boolean").editor,override:a.S.get("boolean").editor,process:l.W4,shouldApply:Xe=>Xe.type===r.fS.number,showIf:Xe=>Xe.min===void 0||Xe.max===void 0,category:Le},se={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:a.S.get("number").editor,override:a.S.get("number").editor,process:l.Oh,settings:{placeholder:"auto"},shouldApply:Xe=>Xe.type===r.fS.number,category:Le},re={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:a.S.get("number").editor,override:a.S.get("number").editor,process:l.Oh,settings:{placeholder:"auto"},shouldApply:Xe=>Xe.type===r.fS.number,category:Le},pe={id:"decimals",path:"decimals",name:"Decimals",editor:a.S.get("number").editor,override:a.S.get("number").editor,process:l.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:Xe=>Xe.type===r.fS.number,category:Le},be={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:a.S.get("text").editor,override:a.S.get("text").editor,process:l.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:Le},xe={id:"links",path:"links",name:"Data links",editor:a.S.get("links").editor,override:a.S.get("links").editor,process:l.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:Xe=>Xe?Xe.length:0},Pe={id:"color",path:"color",name:"Color scheme",editor:a.S.get("fieldColor").editor,override:a.S.get("fieldColor").editor,process:l.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:Le},we={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:a.S.get("mappings").editor,override:a.S.get("mappings").editor,process:l.uj,settings:{},defaultValue:[],shouldApply:Xe=>Xe.type!==r.fS.time,category:["Value mappings"],getItemsCount:Xe=>Xe?Xe.length:0},Fe={id:"thresholds",path:"thresholds",name:"Thresholds",editor:a.S.get("thresholds").editor,override:a.S.get("thresholds").editor,process:l.ZN,settings:{},defaultValue:{mode:o.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:Xe=>Xe?Xe.steps.length:0},He={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:a.S.get("boolean").editor,override:a.S.get("boolean").editor,process:l.W4,shouldApply:()=>!0,settings:{},category:Le};return[de,se,re,X,pe,le,Pe,be,xe,we,Fe,He]}},52234:(J,R,e)=>{"use strict";e.d(R,{p:()=>d});var n=e(41407),a=e(93986),l=e(75965),r=e(39953),o=e(82803),g=e(35226),m=e(30359);const d=({value:f,onChange:c,item:E})=>{const p=(0,r.useRef)(null),{settings:h}=E,y=h?.min||0,s=h?.max||100,v=h?.step,C=h?.marks||{[y]:y,[s]:s},D=h?.included,M=h?.ariaLabelForHandle,P=75,x=!0,S=(0,o.l4)(),[I,T]=(0,r.useState)(f??y),[O,A]=(0,r.useState)(P);(0,r.useEffect)(()=>{f!=null&&f!==I&&T(f)},[f,I]),(0,r.useEffect)(()=>{const K=getComputedStyle(p.current),z=K.getPropertyValue("font-weight")||"normal",G=K.getPropertyValue("font-size")||"16px",Q=K.getPropertyValue("font-family")||"Arial",j="0",F=4,k=8,_=Math.max((s+(v||0)).toString().length,(s-(v||0)).toString().length)+F,Y=j.repeat(_),Z=u(Y,`${z} ${G} ${Q}`);Z&&A(Z+k*2)},[s,v]);const B=(0,r.useCallback)(K=>{const z=typeof K=="number"?K:K[0];T(z),c&&c(z)},[T,c]),b=(0,r.useCallback)(K=>{let z=K;(Number.isNaN(z)||!z)&&(z=0),T(z),c&&c(z)},[c]),W=(0,g.W)(S,x,!!C),V=i(S,O),w=x?[]:[W.sliderInputVertical];return r.createElement("div",{className:(0,n.cx)(W.container,W.slider)},r.createElement(a.Global,{styles:W.slider}),r.createElement("label",{className:(0,n.cx)(W.sliderInput,...w)},r.createElement(l.Z,{min:y,max:s,step:v,defaultValue:f,value:I,onChange:B,vertical:!x,reverse:!1,ariaLabelForHandle:M,marks:C,included:D}),r.createElement("span",{className:V.numberInputWrapper,ref:p},r.createElement(m.Y,{value:I,onChange:b,max:s,min:y,step:v}))))};function u(f,c){const p=document.createElement("canvas").getContext("2d");return p?(p.font=c,p.measureText(f).width):null}const i=(f,c)=>({numberInputWrapper:(0,n.css)`
      margin-left: ${f.spacing(3)};
      max-height: 32px;
      max-width: ${c}px;
      min-width: ${c}px;
      overflow: visible;
      width: 100%;
    `})},40866:(J,R,e)=>{"use strict";e.d(R,{A:()=>r});var n=e(39953),a=e(68421),l=e(38637);const r=({value:o,onChange:g,item:m,suffix:d})=>{const u=m.settings?.useTextarea?a.K:l.I,i=(0,n.useCallback)(f=>{let c=o??"";"key"in f?f.key==="Enter"&&!m.settings?.useTextarea&&(c=f.currentTarget.value.trim()):c=f.currentTarget.value.trim(),c!==o&&g(c===""?void 0:c)},[o,m.settings?.useTextarea,g]);return n.createElement(u,{placeholder:m.settings?.placeholder,defaultValue:o||"",rows:m.settings?.useTextarea&&m.settings.rows||5,onBlur:i,onKeyDown:i,suffix:d})}},13253:(J,R,e)=>{"use strict";e.d(R,{T:()=>W});var n=e(41407),a=e(39953),l=e(15750),r=e(32688),o=e(82803),g=e(64447),m=e(61205),d=e(13150);const u=({isLoading:w,children:K,className:z})=>{let G=z?a.createElement("div",{className:z},K):K;return a.createElement(a.Fragment,null,w?a.createElement(d.Z,null):G)};var i=e(44813),f=e(4148),c=e(98632),E=e(68497),p=e(96227),h=e(38637);const y=({value:w,onEdit:K})=>{const z=(0,o.wW)(s),[G,Q]=(0,a.useState)(w),[j,F]=(0,a.useState)(!1),[k,_]=(0,a.useState)(!1),[Y,Z]=(0,a.useState)();(0,a.useEffect)(()=>{Q(w)},[w]);const ae=(0,a.useCallback)(async ce=>{const q=ce.currentTarget.value;if(!q)Z("Please enter a title");else if(q===w)Z(void 0),F(!1);else{_(!0);try{await K(q),Z(void 0),F(!1)}catch(De){(0,f.kW)(De)?Z(De.data.message):De instanceof Error&&Z(De.message)}_(!1)}},[K,w]);return j?a.createElement("div",{className:z.inputContainer},a.createElement(p.g,{className:z.field,loading:k,invalid:!!Y,error:Y},a.createElement(h.I,{className:z.input,defaultValue:G,onKeyDown:ce=>{ce.key==="Enter"&&ae(ce)},autoFocus:!0,onBlur:ae,onChange:ce=>Q(ce.currentTarget.value),onFocus:()=>F(!0)}))):a.createElement("div",{className:z.textContainer},a.createElement("div",{className:z.textWrapper},a.createElement(c.x,{element:"h1",truncate:!0},G),a.createElement(E.h,{name:"pen",size:"lg",tooltip:"Edit title",onClick:()=>F(!0)})))};y.displayName="EditableTitle";const s=w=>({textContainer:(0,n.css)({minWidth:0}),field:(0,n.css)({flex:1,left:`calc(-${w.spacing(1)} - 1px)`,position:"relative",marginBottom:0}),input:(0,n.css)({input:{...w.typography.h1}}),inputContainer:(0,n.css)({display:"flex",flex:1}),textWrapper:(0,n.css)({alignItems:"center",display:"flex",gap:w.spacing(1)})});function v({navItem:w,renderTitle:K,actions:z,info:G,subTitle:Q,onEditTitle:j}){const F=(0,o.wW)(C),k=Q??w.subTitle,_=j?a.createElement(y,{value:w.text,onEdit:j}):a.createElement("div",{className:F.title},w.img&&a.createElement("img",{className:F.img,src:w.img,alt:`logo for ${w.text}`}),K?K(w.text):a.createElement("h1",null,w.text));return a.createElement("div",{className:F.pageHeader},a.createElement("div",{className:F.topRow},a.createElement("div",{className:F.titleInfoContainer},_,G&&a.createElement(i.S,{info:G})),a.createElement("div",{className:F.actions},z)),k&&a.createElement("div",{className:F.subTitle},k))}const C=w=>({topRow:(0,n.css)({alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:w.spacing(1,3)}),title:(0,n.css)({display:"flex",flexDirection:"row",h1:{display:"flex",marginBottom:0}}),actions:(0,n.css)({display:"flex",flexDirection:"row",gap:w.spacing(1)}),titleInfoContainer:(0,n.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:w.spacing(1,4),justifyContent:"space-between",maxWidth:"100%",minWidth:"200px"}),pageHeader:(0,n.css)({label:"page-header",display:"flex",flexDirection:"column",gap:w.spacing(1),marginBottom:w.spacing(2)}),subTitle:(0,n.css)({position:"relative",color:w.colors.text.secondary}),img:(0,n.css)({width:"32px",height:"32px",marginRight:w.spacing(2)})});var D=e(22784),M=e(41730),P=e(77804);function x({navItem:w}){const K=(0,o.wW)(S);return a.createElement("div",{className:K.tabsWrapper},a.createElement(D.J,null,w.children.map((z,G)=>{const Q=z.icon?(0,M.toIconName)(z.icon):void 0;return!z.hideFromTabs&&a.createElement(P.O,{label:z.text,active:z.active,key:`${z.url}-${G}`,icon:Q,href:z.url,suffix:z.tabSuffix})})))}const S=w=>({tabsWrapper:(0,n.css)({paddingBottom:w.spacing(3)})});var I=e(63011),T=e(12813),O=e(57721),A=e(20015),B=e(12258);function b(w,K){const z=(0,O.useSelector)(G=>G.navIndex)?.[T.Qz];(0,a.useEffect)(()=>{const G=(w?.node!==w?.main?w?.node:w?.main)??{text:"Grafana"},Q=(0,B.t)(G,K,z).map(j=>j.text).reverse();Q[Q.length-1]=A.c.AppTitle,document.title=Q.join(" - ")},[z,w,K])}const W=({navId:w,navModel:K,pageNav:z,renderTitle:G,onEditTitle:Q,actions:j,subTitle:F,children:k,className:_,info:Y,layout:Z=l.Q.Standard,scrollTop:ae,scrollRef:ce,...q})=>{const De=(0,o.wW)(V),oe=(0,I.P)(w,K),{chrome:te}=(0,m.p)();b(oe,z);const fe=z??oe?.node;return(0,a.useLayoutEffect)(()=>{oe&&te.update({sectionNav:oe,pageNav:z,layout:Z})},[oe,z,te,Z]),a.createElement("div",{className:(0,n.cx)(De.wrapper,_),...q},Z===l.Q.Standard&&a.createElement(g.$,{autoHeightMin:"100%",scrollTop:ae,scrollRefCallback:ce},a.createElement("div",{className:De.pageInner},fe&&a.createElement(v,{actions:j,onEditTitle:Q,navItem:fe,renderTitle:G,info:Y,subTitle:F}),z&&z.children&&a.createElement(x,{navItem:z}),a.createElement("div",{className:De.pageContent},k))),Z===l.Q.Canvas&&a.createElement(g.$,{autoHeightMin:"100%",scrollTop:ae,scrollRefCallback:ce},a.createElement("div",{className:De.canvasContent},k)),Z===l.Q.Custom&&k)};W.Contents=u;const V=w=>({wrapper:(0,n.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),pageContent:(0,n.css)({label:"page-content",flexGrow:1}),pageInner:(0,n.css)({label:"page-inner",padding:w.spacing(2),borderRadius:w.shape.radius.default,border:`1px solid ${w.colors.border.weak}`,borderBottom:"none",background:w.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:w.spacing(0,0,0,0),[w.breakpoints.up("md")]:{margin:w.spacing(2,2,0,r.config.featureToggles.dockedMegaMenu?2:1),padding:w.spacing(3)}}),canvasContent:(0,n.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:w.spacing(2),flexBasis:"100%",flexGrow:1})})},63011:(J,R,e)=>{"use strict";e.d(R,{P:()=>o});var n=e(38874),a=e(45015),l=e(74600),r=e(57721);function o(m,d){if(d)return d;if(m&&l.h)return(0,r.useSelector)((0,n.P1)(g,u=>(0,a.ht)(u,m??"home")))}function g(m){return m.navIndex}},44813:(J,R,e)=>{"use strict";e.d(R,{S:()=>r});var n=e(41407),a=e(39953),l=e(82803);function r({info:g}){const m=(0,l.wW)(o);return a.createElement("div",{className:m.container},g.map((d,u)=>a.createElement(a.Fragment,{key:u},a.createElement("div",{className:m.infoItem},a.createElement("div",{className:m.label},d.label),d.value),u+1<g.length&&a.createElement("div",{"data-testid":"page-info-separator",className:m.separator}))))}const o=g=>({container:(0,n.css)({display:"flex",flexDirection:"row",gap:g.spacing(1.5),overflow:"auto"}),infoItem:(0,n.css)({...g.typography.bodySmall,display:"flex",flexDirection:"column",gap:g.spacing(.5)}),label:(0,n.css)({color:g.colors.text.secondary}),separator:(0,n.css)({borderLeft:`1px solid ${g.colors.border.weak}`})})},13150:(J,R,e)=>{"use strict";e.d(R,{Z:()=>r});var n=e(39953),a=e(84766);const r=({pageName:o=""})=>{const g=`Loading ${o}...`;return n.createElement("div",{className:"page-loader-wrapper"},n.createElement(a.u,{text:g}))}},18644:(J,R,e)=>{"use strict";e.d(R,{j:()=>r});var n=e(41407),a=e(39953),l=e(82803);function r({entity:g="Page"}){const m=(0,l.wW)(o),d=(0,l.l4)();return a.createElement("div",{className:m.container},a.createElement("h1",null,g," not found"),a.createElement("div",{className:m.subtitle},"We're looking but can't seem to find this ",g.toLowerCase(),". Try returning"," ",a.createElement("a",{href:"/",className:"external-link"},"home")," ","or seeking help on the"," ",a.createElement("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"external-link"},"community site.")),a.createElement("div",{className:m.grot},a.createElement("img",{src:`public/img/grot-404-${d.isDark?"dark":"light"}.svg`,width:"100%",alt:"grot"})))}function o(g){return{container:(0,n.css)({display:"flex",flexDirection:"column",padding:g.spacing(8,2,2,2),h1:{textAlign:"center"}}),subtitle:(0,n.css)({color:g.colors.text.secondary,fontSize:g.typography.h5.fontSize,padding:g.spacing(2,0),textAlign:"center"}),grot:(0,n.css)({maxWidth:"450px",paddingTop:g.spacing(8),margin:"0 auto"})}}},61992:(J,R,e)=>{"use strict";e.d(R,{Z:()=>o});var n=e(39953),a=e(28888),l=e(38637),r=e(68497);const o=n.forwardRef(({autoComplete:g,autoFocus:m,id:d,passwordHint:u,...i},f)=>{const[c,E]=(0,n.useState)(!1);return n.createElement(l.I,{id:d,autoFocus:m,autoComplete:g,...i,type:c?"text":"password",placeholder:u,"aria-label":a.wl.pages.Login.password,ref:f,suffix:n.createElement(r.h,{name:c?"eye-slash":"eye","aria-controls":d,role:"switch","aria-checked":c,onClick:()=>{E(!c)},tooltip:c?"Hide password":"Show password"})})});o.displayName="PasswordField"},98347:(J,R,e)=>{"use strict";e.d(R,{h:()=>o});var n=e(41407),a=e(39953),l=e(52807),r=e(82803);const o=a.memo(a.forwardRef(({className:d,children:u,markdown:i,onRemove:f,...c},E)=>{const p=(0,r.wW)(m);return a.createElement("div",{className:(0,n.cx)(p.wrapper,d),...c,ref:E},i&&g(i),u)}));function g(d){const u=(0,l.a)(d);return a.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:u}})}o.displayName="OperationRowHelp";const m=d=>{const u=d.shape.radius.default;return{wrapper:(0,n.css)`
      padding: ${d.spacing(2)};
      border: 2px solid ${d.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${u} ${u};
      position: relative;
      top: -4px;
    `}}},78209:(J,R,e)=>{"use strict";e.d(R,{V:()=>d,y:()=>m});var n=e(41407),a=e(39953),l=e(28888),r=e(82803),o=e(68497);function g(i){const f=(0,r.wW)(u);return a.createElement("div",{className:(0,n.cx)(f.icon,"active"in i&&i.active&&f.active)},a.createElement(o.h,{name:i.icon,tooltip:i.title,className:f.icon,disabled:!!i.disabled,onClick:i.onClick,type:"button","aria-label":l.wl.components.QueryEditorRow.actionButton(i.title),..."active"in i&&{"aria-pressed":i.active}}))}function m(i){return a.createElement(g,{...i})}const d=i=>a.createElement(g,{...i}),u=i=>({icon:(0,n.css)`
      display: flex;
      position: relative;
      color: ${i.colors.text.secondary};
    `,active:(0,n.css)`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: ${i.shape.radius.default};
        bottom: -8px;
        background-image: ${i.colors.gradients.brandHorizontal} !important;
      }
    `})},98324:(J,R,e)=>{"use strict";e.d(R,{t:()=>c});var n=e(41407),a=e(39953),l=e(24058),r=e(68766),o=e(72639),g=e(82803),m=e(82360),d=e(27366),u=e(68497);const i=({actionsElement:p,disabled:h,draggable:y,collapsable:s=!0,dragHandleProps:v,headerElement:C,isContentVisible:D,onRowToggle:M,reportDragMousePosition:P,title:x,id:S,expanderMessages:I})=>{const T=(0,g.wW)(f);let O=D?"Collapse query row":"Expand query row";return I!==void 0&&D?O=I.close:I!==void 0&&(O=I?.open),a.createElement("div",{className:T.header},a.createElement("div",{className:T.column},s&&a.createElement(u.h,{name:D?"angle-down":"angle-right",tooltip:O,className:T.collapseIcon,onClick:M,"aria-expanded":D,"aria-controls":S}),x&&a.createElement("div",{className:T.titleWrapper,onClick:M,"aria-label":"Query operation row title"},a.createElement("div",{className:(0,n.cx)(T.title,h&&T.disabled)},x)),C),a.createElement(d.K,{gap:1,alignItems:"center",wrap:!1},p,y&&a.createElement(u.h,{title:"Drag and drop to reorder",name:"draggabledots",tooltip:"Drag and drop to reorder",tooltipPlacement:"bottom",size:"lg",className:T.dragIcon,onMouseMove:P,...v})))},f=p=>({header:(0,n.css)`
    label: Header;
    padding: ${p.spacing(.5,.5)};
    border-radius: ${p.shape.radius.default};
    background: ${p.colors.background.secondary};
    min-height: ${p.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:(0,n.css)`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:(0,n.css)`
    cursor: grab;
    color: ${p.colors.text.disabled};
    margin: ${p.spacing(0,.5)};
    &:hover {
      color: ${p.colors.text};
    }
  `,collapseIcon:(0,n.css)`
    margin-left: ${p.spacing(.5)};
    color: ${p.colors.text.disabled};
    }
  `,titleWrapper:(0,n.css)`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${p.spacing(.5)};
  `,title:(0,n.css)`
    font-weight: ${p.typography.fontWeightBold};
    color: ${p.colors.text.link};
    margin-left: ${p.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:(0,n.css)`
    color: ${p.colors.text.disabled};
  `});i.displayName="QueryOperationRowHeader";function c({children:p,actions:h,title:y,headerElement:s,onClose:v,onOpen:C,isOpen:D,disabled:M,draggable:P,collapsable:x,index:S,id:I,expanderMessages:T}){const[O,A]=(0,a.useState)(D!==void 0?D:!0),B=(0,g.wW)(E),b=(0,a.useCallback)(()=>{A(!O)},[O,A]);(0,a.useEffect)(()=>{typeof D=="boolean"&&A(D)},[D]);const W=(0,a.useCallback)(z=>{if(z.defaultPrevented){const G=z.currentTarget.getBoundingClientRect(),Q=z.clientX-G.left,j=z.clientY-G.top;(0,o.ff)("query_row_reorder_drag_position",{x:Q/G.width,y:j/G.height,width:G.width,height:G.height})}},[]);(0,r.Z)(()=>{O?C&&C():v&&v()},[O]);const V={isOpen:O,onOpen:()=>{A(!0)},onClose:()=>{A(!1)}},w=h&&m.renderOrCallToRender(h,V),K=s&&m.renderOrCallToRender(s,V);return P?a.createElement(l._l,{draggableId:I,index:S},z=>a.createElement(a.Fragment,null,a.createElement("div",{ref:z.innerRef,className:B.wrapper,...z.draggableProps},a.createElement("div",null,a.createElement(i,{id:I,actionsElement:w,disabled:M,draggable:!0,collapsable:x,dragHandleProps:z.dragHandleProps,headerElement:K,isContentVisible:O,onRowToggle:b,reportDragMousePosition:W,title:y,expanderMessages:T})),O&&a.createElement("div",{className:B.content},p)))):a.createElement("div",{className:B.wrapper},a.createElement(i,{id:I,actionsElement:w,disabled:M,draggable:!1,collapsable:x,headerElement:K,isContentVisible:O,onRowToggle:b,reportDragMousePosition:W,title:y,expanderMessages:T}),O&&a.createElement("div",{className:B.content},p))}const E=p=>({wrapper:(0,n.css)`
      margin-bottom: ${p.spacing(2)};
    `,content:(0,n.css)`
      margin-top: ${p.spacing(.5)};
      margin-left: ${p.spacing(3)};
    `});c.displayName="QueryOperationRow"},35430:(J,R,e)=>{"use strict";e.d(R,{I:()=>Te});var n=e(39953),a=e(82803),l=e(846),r=e(41407),o=e(28409),g=e(12190),m=e(69865),d=e(38637),u=e(15530),i=e(53039),f=e(15246);const c=(0,n.forwardRef)(({children:ge,iconName:he},me)=>{const ye=(0,a.wW)(E);return n.createElement("div",{className:ye.container,ref:me},he&&n.createElement(g.J,{name:he,size:"xs"}),ge)});c.displayName="ValueContainer";const E=ge=>{const{prefix:he}=(0,d.H)({theme:ge}),{multiValueContainer:me}=(0,f.D)(ge);return{container:(0,r.cx)(he,me,(0,r.css)`
        position: relative;
        padding: ${ge.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${ge.spacing(.5)};
        }
      `)}},p=300,h=360,y=260,s=ge=>ge.stopPropagation(),v=({appliedRoles:ge,basicRole:he,disabled:me,isFocused:ye,query:ue,showBasicRole:Oe,width:Ue,isLoading:at,onOpen:Ne,onClose:_e,onQueryChange:Ke,...et})=>{const ze=(0,a.wW)(D,!1,!!ye,!!me,!1,Ue),je=(0,n.useRef)(null);(0,n.useEffect)(()=>{ye&&je.current?.focus()});const Qe=ke=>{const ot=ke.target?.value;Ke(ot)},We=Oe&&he!=="None";return ye?n.createElement("div",{className:ze.wrapper},We&&n.createElement(c,null,he),ge.map(ke=>n.createElement(c,{key:ke.uid},ke.displayName||ke.name)),!me&&n.createElement("input",{...et,className:ze.input,ref:je,onMouseDown:s,onChange:Qe,"data-testid":"role-picker-input",placeholder:ye?"Select role":"",value:ue}),n.createElement("div",{className:ze.suffix},n.createElement(g.J,{name:"angle-up",className:ze.dropdownIndicator,onMouseDown:_e}))):n.createElement("div",{className:(0,r.cx)(ze.wrapper,ze.selectedRoles),onMouseDown:Ne},We&&n.createElement(c,null,he),n.createElement(C,{appliedRoles:ge,numberOfRoles:ge.length,showBuiltInRole:We}),at&&n.createElement("div",{className:ze.spinner},n.createElement(o.$,{size:16,inline:!0})))};v.displayName="RolePickerInput";const C=({showBuiltInRole:ge,numberOfRoles:he,appliedRoles:me})=>{const ye=(0,a.wW)(ue=>M(ue));return n.createElement(n.Fragment,null,he?n.createElement(m.u,{content:n.createElement("div",{className:ye.tooltip},me?.map(ue=>n.createElement("p",{key:ue.uid},ue.displayName)))},n.createElement(c,null,`${ge?"+":""}${he} role${he>1?"s":""}`)):!ge&&n.createElement(c,null,"No roles assigned"))},D=(ge,he,me,ye,ue,Oe)=>{const Ue=(0,d.H)({theme:ge,invalid:he});return{wrapper:(0,r.cx)(Ue.wrapper,(0,u.RK)(ge,he),me&&(0,r.css)`
          ${i.focusCss(ge.v1)}
        `,ye&&Ue.inputDisabled,(0,r.css)({minWidth:Oe||h+"px",width:Oe,minHeight:"32px",height:"auto",flexDirection:"row",paddingRight:ge.spacing(1),maxWidth:"100%",alignItems:"center",display:"flex",flexWrap:"wrap",justifyContent:"flex-start",position:"relative",boxSizing:"border-box",cursor:"default"}),ue&&(0,r.css)`
          padding-left: 0;
        `),input:(0,r.cx)((0,u.RK)(ge,he),(0,r.css)`
        max-width: 120px;
        border: none;
        cursor: ${me?"default":"pointer"};
      `),suffix:Ue.suffix,dropdownIndicator:(0,r.css)`
      cursor: pointer;
    `,selectedRoles:(0,r.css)`
      display: flex;
      align-items: center;
      cursor: ${ye?"not-allowed":"pointer"};
    `,tooltip:(0,r.css)`
      p {
        margin-bottom: ${ge.spacing(.5)};
      }
    `,spinner:(0,r.css)({display:"flex",flexGrow:1,justifyContent:"flex-end"})}},M=ge=>({tooltip:(0,r.css)`
    p {
      margin-bottom: ${ge.spacing(.5)};
    }
  `});var P=e(66729),x=e(64447),S=e(12223),I=e(4919),T=e(41641),O=e(57721);const A=ge=>({hideScrollBar:(0,r.css)({".scrollbar-view":{"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"}}),menuWrapper:(0,r.css)({display:"flex",maxHeight:"650px",position:"absolute",zIndex:ge.zIndex.dropdown,overflow:"hidden",minWidth:"auto"}),menu:(0,r.css)({minWidth:`${y}px`,"& > div":{paddingTop:ge.spacing(1)}}),menuLeft:(0,r.css)({right:0,flexDirection:"row-reverse"}),subMenu:(0,r.css)({height:"100%",minWidth:`${y}px`,display:"flex",flexDirection:"column",borderLeft:`1px solid ${ge.components.input.borderColor}`,"& > div":{paddingTop:ge.spacing(1)}}),subMenuLeft:(0,r.css)({borderRight:`1px solid ${ge.components.input.borderColor}`,borderLeft:"unset"}),groupHeader:(0,r.css)({padding:ge.spacing(0,4.5),display:"flex",alignItems:"center",color:ge.colors.text.primary,fontWeight:ge.typography.fontWeightBold}),container:(0,r.css)({padding:ge.spacing(1),border:`1px ${ge.colors.border.weak} solid`,borderRadius:ge.shape.radius.default,backgroundColor:ge.colors.background.primary,zIndex:ge.zIndex.modal}),menuSection:(0,r.css)({marginBottom:ge.spacing(2)}),menuOptionCheckbox:(0,r.css)({display:"flex",margin:ge.spacing(0,1,0,.25)}),menuButtonRow:(0,r.css)({backgroundColor:ge.colors.background.primary,padding:ge.spacing(1)}),menuOptionBody:(0,r.css)({fontWeight:ge.typography.fontWeightRegular,padding:ge.spacing(0,1.5,0,0)}),menuOptionDisabled:(0,r.css)({color:ge.colors.text.disabled,cursor:"not-allowed"}),menuOptionExpand:(0,r.css)({position:"absolute",right:ge.spacing(1.25),color:ge.colors.text.disabled,"&:after":{content:'">"'}}),menuOptionInfoSign:(0,r.css)({color:ge.colors.text.disabled}),basicRoleSelector:(0,r.css)({margin:ge.spacing(1,1.25,1,1.5)}),subMenuPortal:(0,r.css)({height:"100%","> div":{height:"100%"}}),subMenuButtonRow:(0,r.css)({backgroundColor:ge.colors.background.primary,padding:ge.spacing(1)}),checkboxPartiallyChecked:(0,r.css)({input:{"&:checked + span":{"&:after":{borderWidth:"0 3px 0px 0",transform:"rotate(90deg)"}}}}),loadingSpinner:(0,r.css)({marginLeft:ge.spacing(1)})}),B=Object.values(O.OrgRole).map(ge=>({label:ge===O.OrgRole.None?"No basic role":ge,value:ge})),b=({value:ge,onChange:he,disabled:me,disabledMesssage:ye,tooltipMessage:ue})=>{const Oe=(0,a.wW)(A),Ue=(0,a.l4)();return n.createElement(n.Fragment,null,n.createElement("div",{className:Oe.groupHeader},n.createElement("span",{style:{marginRight:Ue.spacing(1)}},"Basic roles"),me&&ye&&n.createElement(m.u,{placement:"right-end",interactive:!0,content:n.createElement("div",null,ye)},n.createElement(g.J,{name:"question-circle"})),!me&&ue&&n.createElement(m.u,{placement:"right-end",interactive:!0,content:ue},n.createElement(g.J,{name:"info-circle",size:"xs"}))),n.createElement(T.x,{name:"Basic Role Selector",className:Oe.basicRoleSelector,options:B,value:ge,onChange:he,disabled:me}))};var W=e(13026),V=e(70393);const w=(0,n.memo)(n.forwardRef(({name:ge,value:he,isFocused:me,isSelected:ye,partiallySelected:ue,disabled:Oe,onChange:Ue,onClick:at,onOpenSubMenu:Ne,onCloseSubMenu:_e,children:Ke,root:et},ze)=>{const je=(0,a.l4)(),Qe=(0,f.D)(je),We=(0,a.wW)(A),ke=(0,r.cx)(Qe.option,me&&Qe.optionFocused,Oe&&We.menuOptionDisabled),ot=Lt=>{Oe||he&&Ue(he)},lt=Lt=>{at&&at(he)},Ct=()=>{Ne&&Ne(he)},wt=()=>{_e&&_e()};return n.createElement("div",{onMouseEnter:Ct,onMouseLeave:wt},n.createElement("div",{ref:ze,className:ke,"aria-label":"Role picker option",onClick:lt},n.createElement(W.X,{value:ye,className:(0,r.cx)(We.menuOptionCheckbox,{[We.checkboxPartiallyChecked]:ue}),onChange:ot,disabled:Oe}),n.createElement("div",{className:(0,r.cx)(Qe.optionBody,We.menuOptionBody)},n.createElement("span",null,ge),n.createElement("span",{className:We.menuOptionExpand})),et&&Ke&&n.createElement(V.h_,{className:We.subMenuPortal,root:et},Ke)))}));w.displayName="RoleMenuGroupOption";const K=n.forwardRef(({data:ge,isFocused:he,isSelected:me,disabled:ye,onChange:ue,hideDescription:Oe},Ue)=>{const at=(0,a.l4)(),Ne=(0,f.D)(at),_e=(0,a.wW)(A),Ke=(0,r.cx)(Ne.option,he&&Ne.optionFocused,ye&&_e.menuOptionDisabled),et=ze=>{ye||(ze.preventDefault(),ze.stopPropagation(),ue(ge))};return n.createElement("div",{ref:Ue,className:Ke,"aria-label":"Role picker option",onClick:et},n.createElement(W.X,{value:me,className:_e.menuOptionCheckbox,onChange:et,disabled:ye}),n.createElement("div",{className:(0,r.cx)(Ne.optionBody,_e.menuOptionBody)},n.createElement("span",null,ge.displayName||ge.name),!Oe&&ge.description&&n.createElement("div",{className:Ne.optionDescription},ge.description)),ge.description&&n.createElement(m.u,{content:ge.description},n.createElement(g.J,{name:"info-circle",className:_e.menuOptionInfoSign})))});K.displayName="RoleMenuOption";var z=e(75581);const G=({options:ge,selectedOptions:he,disabledOptions:me,onSelect:ye,onClear:ue,showOnLeft:Oe})=>{const Ue=(0,a.l4)(),at=(0,f.D)(Ue),Ne=(0,a.wW)(A),_e=async()=>{ue&&ue()};return n.createElement("div",{className:(0,r.cx)(Ne.subMenu,{[Ne.subMenuLeft]:Oe}),"aria-label":"Role picker submenu"},n.createElement(x.$,{autoHide:!1,autoHeightMax:`${p}px`,hideHorizontalTrack:!0},n.createElement("div",{className:at.optionBody},ge.map((Ke,et)=>n.createElement(K,{data:Ke,key:et,isSelected:!!(Ke.uid&&(he.find(ze=>ze.uid===Ke.uid)||me?.find(ze=>ze.uid===Ke.uid))),disabled:!!(Ke.uid&&me?.find(ze=>ze.uid===Ke.uid))||(0,z.r)(Ke),onChange:ye,hideDescription:!0})))),n.createElement("div",{className:Ne.subMenuButtonRow},n.createElement(S.Lh,{justify:"flex-end"},n.createElement(I.zx,{size:"sm",fill:"text",onClick:_e},"Clear"))))},Q=n.forwardRef(({roles:ge,renderedName:he,showGroups:me,optionGroups:ye,onGroupChange:ue,groupSelected:Oe,groupPartiallySelected:Ue,subMenuNode:at,selectedOptions:Ne,onRoleChange:_e,onClearSubMenu:Ke,showOnLeftSubMenu:et},ze)=>{const[je,Qe]=(0,n.useState)(!1),[We,ke]=(0,n.useState)(""),ot=(0,a.l4)(),lt=(0,f.D)(ot),Ct=(0,a.wW)(A),wt=(0,n.useCallback)(Ye=>{ke(Ye),Qe(!0)},[]),Lt=(0,n.useCallback)(()=>{Qe(!1),ke("")},[]);return n.createElement("div",null,ge.length>0&&n.createElement("div",{className:Ct.menuSection},n.createElement("div",{className:Ct.groupHeader},he),n.createElement("div",{className:lt.optionBody}),me&&ye?.length?ye.map(Ye=>n.createElement(w,{key:Ye.value,name:Ye.name,value:Ye.value,isSelected:Oe(Ye.value)||Ue(Ye.value),partiallySelected:Ue(Ye.value),disabled:Ye.options?.every(z.r),onChange:ue,onOpenSubMenu:wt,onCloseSubMenu:Lt,root:at,isFocused:je&&We===Ye.value},je&&We===Ye.value&&n.createElement(G,{options:Ye.options,selectedOptions:Ne,onSelect:_e,onClear:()=>Ke(We),showOnLeft:et}))):ge.map(Ye=>n.createElement(K,{data:Ye,key:Ye.uid,isSelected:!!(Ye.uid&&Ne.find(Be=>Be.uid===Ye.uid)),disabled:(0,z.r)(Ye),onChange:_e,hideDescription:!0}))))});Q.displayName="RoleMenuGroupsSection";var j=(ge=>(ge.fixed="fixed",ge.custom="custom",ge.plugin="plugin",ge))(j||{});const F={ldap:"LDAP",current:"Current org"},k=n.createElement(n.Fragment,null,'You can now select the "No basic role" option and add permissions to your custom needs. You can find more information in\xA0',n.createElement(P.h,{href:"https://grafana.com/docs/grafana/latest/administration/roles-and-permissions/#organization-roles",variant:"bodySmall",external:!0},"our documentation"),"."),_=({basicRole:ge,options:he,appliedRoles:me,showGroups:ye,basicRoleDisabled:ue,disabledMessage:Oe,showBasicRole:Ue,onSelect:at,onBasicRoleSelect:Ne,onUpdate:_e,updateDisabled:Ke,offset:et,apply:ze})=>{const[je,Qe]=(0,n.useState)(me),[We,ke]=(0,n.useState)(ge),[ot,lt]=(0,n.useState)({}),Ct=(0,n.useRef)(null),wt=(0,a.l4)(),Lt=(0,f.D)(wt),Ye=(0,a.wW)(A);(0,n.useEffect)(()=>{at(je)},[je,at]),(0,n.useEffect)(()=>{Ne&&We&&Ne(We)},[We,Ne]),(0,n.useEffect)(()=>{const xe=he.filter(Y).sort(te),Pe=he.filter(Z).sort(te),we=he.filter(ae).sort(te),Fe={fixed:ce(Pe).sort((He,Xe)=>He.name.localeCompare(Xe.name)),custom:ce(xe).sort((He,Xe)=>He.name.localeCompare(Xe.name)),plugin:ce(we).sort((He,Xe)=>He.name.localeCompare(Xe.name))};lt({fixed:{groupType:"fixed",optionGroup:Fe.fixed,renderedName:"Fixed roles",roles:Pe},custom:{groupType:"custom",optionGroup:Fe.custom,renderedName:"Custom roles",roles:xe},plugin:{groupType:"plugin",optionGroup:Fe.plugin,renderedName:"Plugin roles",roles:we}})},[he]);const Be=xe=>{const Pe=[];for(const we of je)q(we)===xe&&Pe.push(we);return Pe},Le=(xe,Pe)=>{const we=Be(Pe),Fe=ot[xe]?.optionGroup.find(He=>He.value===Pe);return we.length>0&&we.length>=Fe.options.length},le=(xe,Pe)=>{const we=Be(Pe),Fe=ot[xe]?.optionGroup.find(He=>He.value===Pe);return we.length>0&&we.length<Fe.options.length},de=xe=>{je.find(Pe=>Pe.uid===xe.uid)?Qe(je.filter(Pe=>Pe.uid!==xe.uid)):Qe([...je,xe])},X=(xe,Pe)=>{const we=ot[xe]?.optionGroup.find(Fe=>Fe.value===Pe);if(we)if(Le(xe,Pe)||le(xe,Pe))Qe(je.filter(Fe=>!we.options.find(He=>Fe.uid===He.uid)));else{const Fe=we.options.filter(Xe=>Xe.delegatable),He=je.filter(Xe=>!we.options.find(dt=>Xe.uid===dt.uid));Qe([...He,...Fe])}},se=xe=>{ke(xe)},re=async()=>{Qe([])},pe=xe=>{const Pe=je.filter(we=>q(we)!==xe);Qe(Pe)},be=()=>{_e(je,We)};return n.createElement("div",{className:(0,r.cx)(Lt.menu,Ye.menuWrapper,{[Ye.menuLeft]:et.horizontal>0},(0,r.css)`
          bottom: ${et.vertical>0?`${et.vertical}px`:"unset"};
          top: ${et.vertical<0?`${Math.abs(et.vertical)}px`:"unset"};
        `)},n.createElement("div",{className:Ye.menu,"aria-label":"Role picker menu"},n.createElement(x.$,{autoHide:!1,autoHeightMax:`${p}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0,className:(0,r.cx)(Ye.hideScrollBar)},Ue&&n.createElement("div",{className:Ye.menuSection},n.createElement(b,{value:We,onChange:se,disabled:ue,disabledMesssage:Oe,tooltipMessage:k})),Object.entries(ot).map(([xe,Pe])=>n.createElement(Q,{key:xe,roles:Pe.roles,renderedName:Pe.renderedName,showGroups:ye,optionGroups:Pe.optionGroup,groupSelected:we=>Le(Pe.groupType,we),groupPartiallySelected:we=>le(Pe.groupType,we),onGroupChange:we=>X(Pe.groupType,we),subMenuNode:Ct?.current,selectedOptions:je,onRoleChange:de,onClearSubMenu:pe,showOnLeftSubMenu:et.horizontal>0}))),n.createElement("div",{className:Ye.menuButtonRow},n.createElement(S.Lh,{justify:"flex-end"},n.createElement(I.zx,{size:"sm",fill:"text",onClick:re,disabled:Ke},"Clear all"),n.createElement(I.zx,{size:"sm",onClick:be,disabled:Ke},ze?"Apply":"Update")))),n.createElement("div",{ref:Ct}))},Y=ge=>!ge.name?.startsWith("fixed:")&&!ge.name.startsWith("plugins:"),Z=ge=>ge.name?.startsWith("fixed:"),ae=ge=>ge.name?.startsWith("plugins:"),ce=ge=>{const he={};return ge.forEach(ye=>{const ue=q(ye),Oe=De(ye);he[ue]||(he[ue]={name:Oe,roles:[]}),he[ue].roles.push(ye)}),Object.entries(he).map(([ye,ue])=>({name:F[ye]||fe(ue.name),value:ye,options:ue.roles.sort(te)}))},q=ge=>{const he=oe(ge),me=De(ge);return`${he}:${me}`},De=ge=>ge.group||"Other",oe=ge=>{const he=ge.name.indexOf(":");return he<0?"unknown":ge.name.substring(0,he)},te=(ge,he)=>ge.name.localeCompare(he.name),fe=ge=>ge.slice(0,1).toUpperCase()+ge.slice(1),Te=({basicRole:ge,appliedRoles:he,roleOptions:me,disabled:ye,isLoading:ue,basicRoleDisabled:Oe,basicRoleDisabledMessage:Ue,showBasicRole:at,onRolesChange:Ne,onBasicRoleChange:_e,canUpdateRoles:Ke=!0,apply:et=!1,maxWidth:ze=h,width:je})=>{const[Qe,We]=(0,n.useState)(!1),[ke,ot]=(0,n.useState)(he),[lt,Ct]=(0,n.useState)(ge),[wt,Lt]=(0,n.useState)(""),[Ye,Be]=(0,n.useState)({vertical:0,horizontal:0}),Le=(0,n.useRef)(null),le=(0,a.l4)(),de=typeof je=="number"?le.spacing(je):je;(0,n.useEffect)(()=>{Ct(ge),ot(he)},[he,ge,_e]),(0,n.useEffect)(()=>{const Fe=Le?.current?.getBoundingClientRect();if(!Fe||!Qe)return;const{bottom:He,top:Xe,left:dt,right:ct,width:At}=Fe,Ie=window.innerHeight-He,Ze=He-Xe+10,ut=ct-dt;let rt=-ut,St=-Ze;Ie<p+20&&(St=50+(p-Ie)-Ze),window.innerWidth-ct<At&&At<2*y&&(rt=ut),Be({horizontal:rt,vertical:St})},[Qe,ke]);const X=(0,n.useCallback)(Fe=>{ye||(Fe.preventDefault(),Fe.stopPropagation(),We(!0))},[We,ye]),se=(0,n.useCallback)(()=>{We(!1),Lt(""),ot(he),Ct(ge)},[he,ge]),re=()=>Qe&&se(),pe=Fe=>{Lt(Fe||"")},be=Fe=>{ot(Fe)},xe=Fe=>{Ct(Fe)},Pe=(Fe,He)=>{_e&&He&&He!==ge&&_e(He),Ke&&Ne(Fe),Lt(""),We(!1)},we=()=>{const Fe=me.map(He=>({...He,delegatable:Ke&&He.delegatable}));return wt&&wt.trim()!==""?Fe.filter(He=>He.name?.toLowerCase().includes(wt.toLowerCase())):Fe};return n.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:de||ze,width:de},ref:Le},n.createElement(l.L,{onClick:re,useCapture:!0},n.createElement(v,{basicRole:lt,appliedRoles:ke,query:wt,onQueryChange:pe,onOpen:X,onClose:se,isFocused:Qe,disabled:ye,showBasicRole:at,width:de,isLoading:ue}),Qe&&n.createElement(_,{options:we(),basicRole:lt,appliedRoles:he,onBasicRoleSelect:xe,onSelect:be,onUpdate:Pe,showGroups:wt.length===0||wt.trim()==="",basicRoleDisabled:Oe,disabledMessage:Ue,showBasicRole:at,updateDisabled:Oe&&!Ke,apply:et,offset:Ye})))}},10639:(J,R,e)=>{"use strict";e.d(R,{R:()=>m});var n=e(39953),a=e(65489),l=e(21308),r=e(57721),o=e(35430),g=e(4171);const m=({basicRole:d,roles:u,userId:i,orgId:f,onBasicRoleChange:c,roleOptions:E,disabled:p,basicRoleDisabled:h,basicRoleDisabledMessage:y,apply:s=!1,onApplyRoles:v,pendingRoles:C,maxWidth:D,width:M,isLoading:P})=>{const[{loading:x,value:S=u||[]},I]=(0,a.Z)(async()=>{try{if(u)return u;if(s&&C?.length)return C;if(l.Vt.hasPermission(r.AccessControlAction.ActionUserRolesList))return await(0,g.kt)(i,f)}catch{console.error("Error loading options")}return[]},[f,i,C,u]);(0,n.useEffect)(()=>{f&&I()},[I,f]);const T=async A=>{s?v&&v(A,i,f):(await(0,g.hB)(A,i,f),await I())},O=l.Vt.hasPermission(r.AccessControlAction.ActionUserRolesAdd)&&l.Vt.hasPermission(r.AccessControlAction.ActionUserRolesRemove);return n.createElement(o.I,{appliedRoles:S,basicRole:d,onRolesChange:T,onBasicRoleChange:c,roleOptions:E,isLoading:x||P,disabled:p,basicRoleDisabled:h,basicRoleDisabledMessage:y,showBasicRole:!0,apply:s,canUpdateRoles:O,maxWidth:D,width:M})}},4171:(J,R,e)=>{"use strict";e.d(R,{_C:()=>g,hB:()=>o,kt:()=>r,u7:()=>m,ul:()=>l});var n=e(4148),a=e(75581);const l=async(d,u)=>{let i="/api/access-control/roles?delegatable=true";d&&(i+=`&targetOrgId=${d}`);const f=await(0,n.i)().get(i);return!f||!f.length?[]:f.map(a.w)},r=async(d,u)=>{let i=`/api/access-control/users/${d}/roles`;u&&(i+=`?targetOrgId=${u}`);try{const f=await(0,n.i)().get(i);return!f||!f.length?[]:f.map(a.w)}catch(f){return(0,n.kW)(f)&&(f.isHandled=!0),[]}},o=(d,u,i)=>{let f=`/api/access-control/users/${u}/roles`;i&&(f+=`?targetOrgId=${i}`);const c=d.flatMap(E=>E.uid);return(0,n.i)().put(f,{orgId:i,roleUids:c})},g=async(d,u)=>{let i=`/api/access-control/teams/${d}/roles`;u&&(i+=`?targetOrgId=${u}`);try{const f=await(0,n.i)().get(i);return!f||!f.length?[]:f.map(a.w)}catch(f){return(0,n.kW)(f)&&(f.isHandled=!0),[]}},m=(d,u,i)=>{let f=`/api/access-control/teams/${u}/roles`;i&&(f+=`?targetOrgId=${i}`);const c=d.flatMap(E=>E.uid);return(0,n.i)().put(f,{orgId:i,roleUids:c})}},75581:(J,R,e)=>{"use strict";e.d(R,{r:()=>n,w:()=>a});const n=l=>l.delegatable!==void 0&&!l.delegatable,a=l=>{const r="fixed:";if(!l.displayName&&l.name.startsWith(r)){let o="";o=l.name.replace(r,"").replace(/:/g," "),l.displayName=o}return l}},65132:(J,R,e)=>{"use strict";e.d(R,{V:()=>i});var n=e(39953),a=e(66883),l=e(28425),r=e(34032);const o=2,g=5,m=p=>{const h=p.match(new RegExp('<style type="text/css">([\\s\\S]*?)<\\/style>'));return h?h[0]:null},d=p=>p.match(new RegExp(`<svg.*id\\s*=\\s*(['"])(.*?)\\1`))?.[o],u=p=>{let h=d(p);if(!h){h=`x${(0,r.Z)()}`;const s=p.indexOf("<svg")+g;p=p.substring(0,s)+`id="${h}" `+p.substring(s)}let y=m(p);if(y){let s=y.replace(/(#(.*?))?\./g,`#${h} .`);p=p.replace(y,s)}return p},i=p=>{const{cleanStyle:h,...y}=p;return n.createElement(a.default,{...y,cacheRequests:!0,preProcessor:h?E:c})};let f=new Map;function c(p){let h=f.get(p);return h||(h=l.QX.sanitizeSVGContent(p),f.set(p,h)),h}function E(p){let h=f.get(p);return h||(h=l.QX.sanitizeSVGContent(p),h.indexOf('<style type="text/css">')>-1&&(h=u(h)),f.set(p,h)),h}},56516:(J,R,e)=>{"use strict";e.d(R,{o:()=>u});var n=e(97368),a=e.n(n),l=e(39953),r=e(9558),o=e(20367);const g=(i="General",f)=>`${i}/${f}`;async function m(i=""){return o.ae.search({type:"dash-db",query:i,limit:100}).then(f=>f.map(c=>({value:{uid:c.uid,title:c.title,folderTitle:c.folderTitle,folderUid:c.folderUid},label:g(c?.folderTitle,c.title)})))}const d=a()(m,250,{leading:!0}),u=({value:i,onChange:f,placeholder:c="Select dashboard",noOptionsMessage:E="No dashboards found",...p})=>{const[h,y]=(0,l.useState)();(0,l.useEffect)(()=>{!i||i===h?.value?.uid||(async()=>{const v=await o.ae.getDashboardByUid(i);v.dashboard&&y({value:{uid:v.dashboard.uid,title:v.dashboard.title,folderTitle:v.meta.folderTitle,folderUid:v.meta.folderUid},label:g(v.meta?.folderTitle,v.dashboard.title)})})()},[i]);const s=(0,l.useCallback)(v=>{y(v),f?.(v?.value)},[f,y]);return l.createElement(r.qb,{loadOptions:d,onChange:s,placeholder:c,noOptionsMessage:E,value:h,defaultOptions:!0,...p})}},15296:(J,R,e)=>{"use strict";e.d(R,{E:()=>Z});var n=e(39953),a=e(32688),l=e(41407),r=e(20588),o=e(20653),g=e(82803),m=e(38637),d=e(12190),u=e(33155),i=e(94615),f=e(62679),c=e(46347),E=e(13540),p=e(8099),h=e(99432),y=e(17231),s=e(39971),v=e(28804),C=e(15166),D=e(68084),M=e(96198),P=e(68497),x=e(99268),S=e(98632),I=e(58869),T=e(57721);const O=40,A="md",B=(ce,q)=>`${ce}-${q||"root"}`;function b({items:ce,focusedItemIndex:q,foldersAreOpenable:De,idPrefix:oe,selectedFolder:te,onFolderExpand:fe,onFolderSelect:Te,isItemLoaded:ge,requestLoadMore:he}){const me=(0,n.useRef)(null),ye=(0,g.wW)(w),ue=(0,n.useMemo)(()=>({items:ce,focusedItemIndex:q,foldersAreOpenable:De,selectedFolder:te,onFolderExpand:fe,onFolderSelect:Te,idPrefix:oe}),[ce,q,De,te,fe,Te,oe]),Oe=(0,n.useCallback)(at=>ge(at),[ge]),Ue=(0,n.useCallback)((at,Ne)=>{const{parentUID:_e}=ce[at];he(_e)},[he,ce]);return n.createElement("div",{className:ye.table,role:"tree"},ce.length>0?n.createElement(M.Z,{ref:me,itemCount:ce.length,isItemLoaded:Oe,loadMoreItems:Ue},({onItemsRendered:at,ref:Ne})=>n.createElement(D.t7,{ref:Ne,height:O*Math.min(6.5,ce.length),width:"100%",itemData:ue,itemSize:O,itemCount:ce.length,onItemsRendered:at},V)):n.createElement("div",{className:ye.emptyMessage},n.createElement(f.cC,{i18nKey:"browse-dashboards.folder-picker.empty-message"},"No folders found")))}const W=[100,200,130,160,150];function V({index:ce,style:q,data:De}){const{items:oe,focusedItemIndex:te,foldersAreOpenable:fe,selectedFolder:Te,onFolderExpand:ge,onFolderSelect:he,idPrefix:me}=De,{item:ye,isOpen:ue,level:Oe,parentUID:Ue}=oe[ce],at=(0,n.useRef)(null),Ne=(0,n.useId)(),_e=(0,T.useSelector)(p.hO),Ke=(0,T.useSelector)(p.MH),et=(ye.uid?Ke[ye.uid]:_e)?.items??[];let ze=[];ye.uid&&(ze=(Ue?Ke[Ue]:_e)?.items??[]);const je=(0,g.wW)(w),Qe=(0,n.useCallback)(ke=>{ke.preventDefault(),ke.stopPropagation(),ye.uid&&ge(ye.uid,!ue)},[ye.uid,ue,ge]),We=(0,n.useCallback)(()=>{ye.kind==="folder"&&he(ye)},[ye,he]);return ye.kind==="ui"&&ye.uiKind==="pagination-placeholder"?n.createElement("span",{style:q,className:je.row},n.createElement(I.A,{level:Oe,spacing:2}),n.createElement(C.Z,{width:W[ce%W.length]})):ye.kind!=="folder"?null:n.createElement("div",{ref:at,style:q,className:(0,l.cx)(je.row,{[je.rowFocused]:ce===te,[je.rowSelected]:ye.uid===Te}),tabIndex:-1,onClick:We,"aria-expanded":ue,"aria-selected":ye.uid===Te,"aria-labelledby":Ne,"aria-level":Oe+1,role:"treeitem","aria-owns":et.length>0?et.map(ke=>B(me,ke.uid)).join(" "):void 0,"aria-setsize":et.length,"aria-posinset":ze.findIndex(ke=>ke.uid===ye.uid)+1,id:B(me,ye.uid)},n.createElement("div",{className:je.rowBody},n.createElement(I.A,{level:Oe,spacing:2}),fe?n.createElement(P.h,{size:A,onMouseDown:Qe,tabIndex:-1,"aria-label":ue?`Collapse folder ${ye.title}`:`Expand folder ${ye.title}`,name:ue?"angle-down":"angle-right"}):n.createElement("span",{className:je.folderButtonSpacer}),n.createElement("label",{className:je.label,id:Ne},n.createElement(S.x,{truncate:!0},ye.title))))}const w=ce=>{const q=(0,l.css)({height:O,display:"flex",position:"relative",alignItems:"center",flexGrow:1,gap:ce.spacing(.5),overflow:"hidden",padding:ce.spacing(0,1)});return{table:(0,l.css)({background:ce.components.input.background}),emptyMessage:(0,l.css)({padding:ce.spacing(1),textAlign:"center",width:"100%"}),folderButtonSpacer:(0,l.css)({paddingLeft:`calc(${(0,x.Bm)(A)}px + ${ce.spacing(.5)})`}),row:(0,l.css)({display:"flex",position:"relative",alignItems:"center",[":not(:first-child)"]:{borderTop:`solid 1px ${ce.colors.border.weak}`}}),rowFocused:(0,l.css)({backgroundColor:ce.colors.background.secondary}),rowSelected:(0,l.css)({"&::before":{display:"block",content:'""',position:"absolute",left:0,bottom:0,top:0,width:4,borderRadius:ce.shape.radius.default,backgroundImage:ce.colors.gradients.brandVertical}}),rowBody:q,label:(0,l.css)({lineHeight:O+"px",flexGrow:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","&:hover":{textDecoration:"underline",cursor:"pointer"}})}};var K=e(53039);function z({isLoading:ce,invalid:q,label:De,...oe},te){const fe=(0,g.l4)(),Te=Q(fe,q);return n.createElement("div",{className:Te.wrapper},n.createElement("div",{className:Te.inputWrapper},De?n.createElement("div",{className:Te.prefix},n.createElement(d.J,{name:"folder"})):void 0,n.createElement("button",{type:"button",className:(0,l.cx)(Te.fakeInput,De?Te.hasPrefix:void 0),...oe,ref:te},ce?n.createElement(C.Z,{width:100}):De?n.createElement(S.x,{truncate:!0},De):n.createElement(S.x,{truncate:!0,color:"secondary"},n.createElement(f.cC,{i18nKey:"browse-dashboards.folder-picker.button-label"},"Select folder"))),n.createElement("div",{className:Te.suffix},n.createElement(d.J,{name:"angle-down"}))))}const G=(0,n.forwardRef)(z),Q=(ce,q=!1)=>{const De=(0,m.H)({theme:ce,invalid:q});return{wrapper:De.wrapper,inputWrapper:De.inputWrapper,prefix:(0,l.css)([De.prefix,{pointerEvents:"none",color:ce.colors.text.primary}]),suffix:(0,l.css)([De.suffix,{pointerEvents:"none"}]),fakeInput:(0,l.css)([De.input,{textAlign:"left",letterSpacing:"normal","&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,l.css)`
          ${(0,K.focusCss)(ce)}
        `}]),hasPrefix:(0,l.css)({paddingLeft:28})}};function j({tree:ce,handleCloseOverlay:q,handleFolderSelect:De,handleFolderExpand:oe,idPrefix:te,search:fe,visible:Te}){const[ge,he]=(0,n.useState)(-1);(0,n.useEffect)(()=>{Te&&he(-1)},[Te]),(0,n.useEffect)(()=>{he(0)},[fe]),(0,n.useEffect)(()=>{document.getElementById(B(te,ce[ge]?.item.uid))?.scrollIntoView({block:"nearest",inline:"nearest"})},[ge,te,ce]);const me=(0,n.useCallback)(ye=>{const ue=!fe;switch(ye.key){case"ArrowRight":case"ArrowLeft":ue&&(ye.preventDefault(),oe(ce[ge].item.uid,ye.key==="ArrowRight"));break;case"ArrowUp":ge>0&&(ye.preventDefault(),he(ge-1));break;case"ArrowDown":ge<ce.length-1&&(ye.preventDefault(),he(ge+1));break;case"Enter":ye.preventDefault();const Oe=ce[ge].item;Oe.kind==="folder"&&De(Oe);break;case"Tab":ye.stopPropagation(),q();break;case"Escape":ye.stopPropagation(),ye.preventDefault(),q();break}},[ge,q,oe,De,fe,ce]);return{focusedItemIndex:ge,handleKeyDown:me}}const F=["empty-folder","dashboard"];function k({value:ce,invalid:q,showRootFolder:De=!0,excludeUIDs:oe,onChange:te}){const fe=(0,g.wW)(_),Te=(0,v.I0)(),ge=(0,c.t4)(ce||c.CN),he=(0,p.zw)(void 0),[me,ye]=(0,n.useState)(""),[ue,Oe]=(0,n.useState)(!1),[Ue,at]=(0,n.useState)(!1),[Ne,_e]=(0,n.useState)({}),Ke=(0,n.useId)(),[et]=(0,n.useState)(void 0),ze=(0,o.Z)(async()=>{if(!me)return;const xe=await(0,y.getGrafanaSearcher)().search({query:me,kind:["folder"],limit:100}),Pe=xe.view.map(we=>(0,s.f9)(we,xe.view));return{...xe,items:Pe}},[me]),je=(0,v.v9)(p.hO),Qe=(0,v.v9)(p.MH),{getTooltipProps:We,setTooltipRef:ke,setTriggerRef:ot,visible:lt,triggerRef:Ct}=(0,r.O)({visible:Ue,placement:"bottom",interactive:!0,offset:[0,0],trigger:"click",onVisibleChange:be=>{be&&(ye(""),Oe(!0)),at(be)}}),wt=(0,n.useCallback)(async(be,xe)=>{_e(Pe=>({...Pe,[be]:xe})),xe&&!Ne[be]&&Te((0,p.si)({parentUID:be,pageSize:E.IV,excludeKinds:F}))},[Te,Ne]),Lt=(0,n.useCallback)(be=>{te&&te(be.uid,be.title),at(!1)},[te]),Ye=(0,n.useCallback)(()=>at(!1),[at]),Be=(0,p.D$)(F),Le=(0,n.useCallback)(be=>{me||Be(be)},[me,Be]),le=(0,n.useMemo)(()=>{const be=me&&ze.value;if(be){const Pe={isFullyLoaded:!0,lastKindHasMoreItems:!1,lastFetchedKind:"folder",lastFetchedPage:1,items:be.items??[]};return(0,p.qO)(void 0,Pe,Qe,{},0,F,oe)}let xe=(0,p.qO)(void 0,je,Qe,Ne,0,F,oe);if(De){for(const Pe of xe)Pe.level+=1;xe.unshift({isOpen:!0,level:0,item:{kind:"folder",title:"Dashboards",uid:""}})}return je||(xe=xe.concat((0,h.k)(E.IV,void 0,0))),xe},[me,ze.value,je,Qe,Ne,oe,De]),de=(0,n.useCallback)(be=>{const xe=le[be];if(!xe)return!1;const Pe=xe.item;return!(Pe.kind==="ui"&&Pe.uiKind==="pagination-placeholder")},[le]),X=he==="pending"||ze.loading,{focusedItemIndex:se,handleKeyDown:re}=j({tree:le,handleCloseOverlay:Ye,handleFolderSelect:Lt,handleFolderExpand:wt,idPrefix:Ke,search:me,visible:lt});let pe=ge.data?.title;return ce===""&&(pe="Dashboards"),lt?n.createElement(n.Fragment,null,n.createElement(m.I,{ref:ot,autoFocus:!0,prefix:pe?n.createElement(d.J,{name:"folder"}):null,placeholder:pe??(0,f.t)("browse-dashboards.folder-picker.search-placeholder","Search folders"),value:me,invalid:q,className:fe.search,onKeyDown:re,onChange:be=>ye(be.currentTarget.value),"aria-autocomplete":"list","aria-expanded":!0,"aria-haspopup":!0,"aria-controls":Ke,"aria-owns":Ke,"aria-activedescendant":B(Ke,le[se]?.item.uid),role:"combobox",suffix:n.createElement(d.J,{name:"search"})}),n.createElement("fieldset",{ref:ke,id:Ke,...We({className:fe.tableWrapper,style:{width:Ct?.clientWidth}})},et?n.createElement(u.b,{className:fe.error,severity:"warning",title:(0,f.t)("browse-dashboards.folder-picker.error-title","Error loading folders")},et.message||et.toString?.()||(0,f.t)("browse-dashboards.folder-picker.unknown-error","Unknown error")):n.createElement("div",null,X&&n.createElement("div",{className:fe.loader},n.createElement(i.F,{width:600})),n.createElement(b,{items:le,selectedFolder:ce,focusedItemIndex:se,onFolderExpand:wt,onFolderSelect:Lt,idPrefix:Ke,foldersAreOpenable:!(me&&ze.value),isItemLoaded:de,requestLoadMore:Le})))):n.createElement(G,{label:pe,invalid:q,isLoading:ge.isLoading,autoFocus:ue,ref:ot,"aria-label":pe?(0,f.t)("browse-dashboards.folder-picker.accessible-label","Select folder: {{ label }} currently selected",{label:pe}):void 0})}const _=ce=>({button:(0,l.css)({maxWidth:"100%"}),error:(0,l.css)({marginBottom:0}),tableWrapper:(0,l.css)({boxShadow:ce.shadows.z3,position:"relative",zIndex:ce.zIndex.portal}),loader:(0,l.css)({position:"absolute",top:0,left:0,right:0,zIndex:ce.zIndex.portal+1,overflow:"hidden"}),search:(0,l.css)({input:{cursor:"default"}})});var Y=e(67979);function Z(ce){const q=a.config.featureToggles.nestedFolders&&a.config.featureToggles.nestedFolderPicker,{initialTitle:De,dashboardId:oe,enableCreateNew:te,...fe}=ce;return q?n.createElement(k,{...fe}):n.createElement(ae,{...ce})}function ae({value:ce,showRootFolder:q,onChange:De,initialTitle:oe,dashboardId:te,enableCreateNew:fe,inputId:Te,skipInitialLoad:ge}){const he=(0,n.useCallback)(me=>{De&&De(me.uid,me.title)},[De]);return n.createElement(Y.Fz,{onChange:he,showRoot:q,initialFolderUid:ce,initialTitle:oe,inputId:Te,skipInitialLoad:ge,dashboardId:te,enableCreateNew:fe})}},67979:(J,R,e)=>{"use strict";e.d(R,{Fz:()=>D});var n=e(41407),a=e(97368),l=e.n(a),r=e(39953),o=e(20653),g=e(71519),m=e(28888),d=e(72639),u=e(82803),i=e(38637),f=e(9558),c=e(28833),E=e(62679),p=e(97125),h=e(23334),y=e(44622),s=e(57721);const v="+ Add new",C="-10";function D(S){const{dashboardId:I,allowEmpty:T,onChange:O,filter:A,enableCreateNew:B,inputId:b,onClear:W,enableReset:V,initialFolderUid:w,initialTitle:K="",permissionLevel:z=s.PermissionLevelString.Edit,rootName:G,showRoot:Q=!0,skipInitialLoad:j,searchQueryType:F,customAdd:k,folderWarning:_}=S,Y=G??(0,h.v)()?"Dashboards":"General",[Z,ae]=(0,r.useState)(null),[ce,q]=(0,r.useState)(!1),[De,oe]=(0,r.useState)(""),[te,fe]=(0,r.useState)(Z?.title??""),Te=(0,u.wW)(x),ge=typeof W=="function",he=(0,r.useCallback)(async ze=>{const je=await(0,y.ZL)(ze,z,F),We=M(je,A);return(0,d.ff)("grafana_folder_picker_results_loaded",{results:We.length,searchTermLength:ze.length,enableCreateNew:!!B}),(p.contextSrv.hasPermission(s.AccessControlAction.DashboardsWrite)||p.contextSrv.hasPermission(s.AccessControlAction.DashboardsCreate))&&Y?.toLowerCase().startsWith(ze.toLowerCase())&&Q&&We.unshift({label:Y,value:""}),V&&ze===""&&K!==""&&!We.find(ot=>ot.label===K)&&We.unshift({label:K,value:w}),B&&k?[...We,{value:C,label:v,title:ze}]:We},[V,w,K,z,Y,Q,F,A,B,k]),me=(0,r.useMemo)(()=>l()(he,300,{leading:!0}),[he]),ye=async()=>{const ze={label:K,value:void 0},je={label:Y,value:""},Qe=await he("");let We=null;w!=null?We=Qe.find(ke=>ke.value===w)||null:V&&K?We=ze:w&&(We=Qe.find(ke=>ke.id===w)||null),!We&&!T&&(p.contextSrv.isEditor?We=je:!!I?We=ze:We=Qe.length>0?Qe[0]:ze),!ce&&ae(We)};(0,r.useEffect)(()=>{Z&&Z.value!==w&&!ce&&Z.value&&Z.label&&O({uid:Z.value,title:Z.label})},[Z,w]),(0,o.Z)(async()=>{if(j){const ze=await P({getFolder:y.Pb,folderUid:w,folderName:K});ae(ze)}await ye()},[j,w,K]),(0,r.useEffect)(()=>{Z&&Z.id===C&&q(!0)},[Z]);const ue=(0,r.useCallback)((ze,je)=>{if(ze?.value===C)ae({id:C,title:De}),fe(De);else{if(ze||(ze={value:"",label:Y}),je.action==="clear"&&W){W();return}ae(ze),O({uid:ze.value,title:ze.label})}},[O,W,Y,De]),Oe=(0,r.useCallback)(async ze=>{if(_?.warningCondition(ze))return(0,d.ff)("grafana_folder_picker_folder_created",{status:"failed_condition"}),!1;const je=await(0,y.L6)({title:ze});let Qe={value:"",label:"Not created"};return je.uid?((0,d.ff)("grafana_folder_picker_folder_created",{status:"success"}),c.Z.emit(g.SI.alertSuccess,["Folder Created","OK"]),Qe={value:je.uid,label:je.title},ae(je),ue(Qe,{action:"create-option",option:Qe})):((0,d.ff)("grafana_folder_picker_folder_created",{status:"failed"}),c.Z.emit(g.SI.alertError,["Folder could not be created"])),Qe},[_,ue]),Ue=(0,r.useCallback)(ze=>{const je=!!k?.disallowValues;if(ze.key==="Enter"&&je&&!k?.isAllowedValue(te)){ze.preventDefault();return}switch(ze.key){case"Enter":{Oe(Z?.title),q(!1);break}case"Escape":ae({value:"",label:Y}),q(!1)}},[k?.disallowValues,k?.isAllowedValue,te,Oe,Z?.title,Y]),at=ze=>{const je=ze.currentTarget.value;fe(je),ae({id:void 0,title:je})},Ne=()=>{ae({value:"",label:Y}),q(!1)},_e=(ze,{action:je})=>{je==="input-change"&&oe(Qe=>ze),je==="menu-close"&&oe(Qe=>ze)},Ke=()=>_?.warningCondition(te)?r.createElement(_.warningComponent,null):null,et=()=>_?.warningCondition(De)?r.createElement(_.warningComponent,null):null;return ce?r.createElement(r.Fragment,null,r.createElement(Ke,null),r.createElement("div",{className:Te.newFolder},"Press enter to create the new folder."),r.createElement(i.I,{width:30,autoFocus:!0,value:te,onChange:at,onKeyDown:Ue,placeholder:"Press enter to confirm new folder.",onBlur:Ne})):r.createElement("div",{"data-testid":m.wl.components.FolderPicker.containerV2},r.createElement(et,null),r.createElement(f.gY,{inputId:b,"aria-label":m.wl.components.FolderPicker.input,loadingMessage:(0,E.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:Z,inputValue:De,onInputChange:_e,value:Z,allowCustomValue:B&&!k,loadOptions:me,onChange:ue,onCreateOption:Oe,isClearable:ge}))}function M(S,I){return(I?I(S):S).map(O=>({label:O.title,value:O.uid}))}async function P({folderName:S,folderUid:I,getFolder:T}){if(I==null)throw new Error("folderUid is not found.");return S?{label:S,value:I}:{label:(await T(I)).title,value:I}}const x=S=>({newFolder:(0,n.css)`
    color: ${S.colors.warning.main};
    font-size: ${S.typography.bodySmall.fontSize};
    padding-bottom: ${S.spacing(1)};
  `})},90139:(J,R,e)=>{"use strict";e.d(R,{e:()=>r});var n=e(39953),a=e(72899),l=e(12190);class r extends n.Component{constructor(g){super(g)}render(){const{label:g,removeIcon:m,count:d,onClick:u}=this.props,{color:i}=(0,a.Bx)(g),f={backgroundColor:i},c=d!==0&&n.createElement("span",{className:"tag-count-label"},`(${d})`);return n.createElement("span",{className:"label label-tag",style:f},m&&n.createElement(l.J,{onClick:u,name:"times"}),g," ",c)}}},40835:(J,R,e)=>{"use strict";e.d(R,{D:()=>E});var n=e(41407),a=e(39953),l=e(72970),r=e(55705),o=e(82803),g=e(9558),m=e(12190),d=e(62679),u=e(90139);const i=({data:h,className:y,label:s,isFocused:v,innerProps:C})=>{const D=(0,o.wW)(f);return a.createElement("div",{className:(0,n.cx)(D.option,v&&D.optionFocused),"aria-label":"Tag option",...C},a.createElement("div",{className:`tag-filter-option ${y||""}`},typeof s=="string"?a.createElement(u.e,{label:s,removeIcon:!1,count:h.count??0}):s))},f=h=>({option:(0,n.css)`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${h.colors.background.secondary};
      }
    `,optionFocused:(0,n.css)`
      background: ${h.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),c=(h,y)=>RegExp((0,r.GE)(y),"i").test(h.value),E=({allowCustomValue:h=!1,formatCreateLabel:y,hideValues:s,inputId:v,isClearable:C,onChange:D,placeholder:M,tagOptions:P,tags:x,width:S})=>{const I=(0,o.wW)(p),T=x.map(k=>({value:k,label:k,count:0})),[O,A]=(0,a.useState)(T),[B,b]=(0,a.useState)(!1),[W,V]=(0,a.useState)(x),[w,K]=(0,a.useState)(T),z=(0,a.useMemo)(()=>x.join(),[x]),G=(0,a.useCallback)(async()=>(await P()).map(_=>x.includes(_.term)?{value:_.term,label:_.term,count:0}:{value:_.term,label:_.term,count:_.count}),[P,x]),Q=(0,a.useCallback)(async()=>{b(!0);const k=await G();h&&w.forEach(_=>k.push(_)),A(k),b(!1)},[h,w,G]);(0,a.useEffect)(()=>{x.length>0&&O.length===0&&Q()},[Q,O.length,x.length]),(0,a.useEffect)(()=>{x!==W&&(V(x),Q())},[Q,W,x]);const j=k=>{k.forEach(_=>_.count=0),D((k||[]).map(_=>_.value)),h&&K(k.filter(_=>!x.includes(_)))},F={key:z,onFocus:Q,isLoading:B,options:O,allowCreateWhileLoading:!0,allowCustomValue:h,formatCreateLabel:y,defaultOptions:!0,filterOption:c,getOptionLabel:k=>k.label,getOptionValue:k=>k.value,inputId:v,isMulti:!0,onChange:j,loadingMessage:(0,d.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,d.t)("tag-filter.no-tags","No tags found"),placeholder:M||(0,d.t)("tag-filter.placeholder","Filter by tag"),value:T,width:S,components:{Option:i,MultiValueLabel:()=>null,MultiValueRemove(k){const{data:_}=k;return a.createElement(l.c.MultiValueRemove,{...k},a.createElement(u.e,{key:_.label,label:_.label,removeIcon:!0,count:_.count}))},MultiValueContainer:s?()=>null:l.c.MultiValueContainer}};return a.createElement("div",{className:I.tagFilter},C&&x.length>0&&a.createElement("button",{className:I.clear,onClick:()=>j([])},"Clear tags"),a.createElement(g.NU,{...F,prefix:a.createElement(m.J,{name:"tag-alt"}),"aria-label":"Tag filter"}))};E.displayName="TagFilter";const p=h=>({tagFilter:(0,n.css)`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:(0,n.css)`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${h.colors.text.secondary};

    &:hover {
      color: ${h.colors.text.primary};
    }
  `})},74480:(J,R,e)=>{"use strict";e.d(R,{a:()=>u});var n=e(86832),a=e.n(n),l=e(39953),r=e(81626),o=e(92403),g=e(56064),m=e(1188);const d="grafana.dashboard.timepicker.history",u=h=>l.createElement(m.G,{storageKey:d,defaultValue:[]},(y,s)=>{const v=f(y),C=i(v);return l.createElement(g.Xc,{...h,history:C,onChange:D=>{c(D,v,s),h.onChange(D)}})});function i(h){return h.map(y=>r.convertRawToRange(y,"utc",void 0,"YYYY-MM-DD HH:mm:ss"))}function f(h){return h.map(y=>{const s=typeof y.from=="string"?y.from:y.from.toISOString(),v=typeof y.to=="string"?y.to:y.to.toISOString();return{from:s,to:v}})}function c(h,y,s){if(!E(h))return;const v={from:typeof h.raw.from=="string"?h.raw.from:h.raw.from.toISOString(),to:typeof h.raw.to=="string"?h.raw.to:h.raw.to.toISOString()},C=p([v,...y]);s(C)}function E(h){return(0,o.v9)(h.raw.from)||(0,o.v9)(h.raw.to)}function p(h){return(0,n.uniqBy)(h,y=>y.from+y.to).slice(0,4)}},56386:(J,R,e)=>{"use strict";e.d(R,{K:()=>i});var n=e(39953),a=e(97898),l=e(89591),r=e(96248),o=e(78832),g=e(42626),m=e(31276),d=e(80047);const u=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class i extends n.Component{constructor(){super(...arguments),this.getValueColor=(c,E,p)=>{const h=this.props.frames[c].fields[E];if(h.display){const y=h.display(p);if(y.color)return y.color}return a.R},this.prepConfig=(c,E,p)=>{this.panelContext=this.context;const{eventBus:h,sync:y}=this.panelContext;return(0,d.Nj)({frame:c,getTimeRange:p,eventBus:h,sync:y,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:c.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor})},this.renderLegend=c=>{const{legend:E,legendItems:p}=this.props;return!c||!p||!E||E.showLegend===!1?null:n.createElement(r.AY.Legend,{placement:E.placement},n.createElement(o.l,{placement:E.placement,items:p,displayMode:E.displayMode,readonly:!0}))}}render(){return n.createElement(g.d,{...this.props,fields:{x:c=>c.type===l.fS.time,y:c=>c.type===l.fS.number||c.type===l.fS.boolean||c.type===l.fS.string||c.type===l.fS.enum},prepConfig:this.prepConfig,propsToDiff:u,renderLegend:this.renderLegend})}}i.contextType=m.bb},80047:(J,R,e)=>{"use strict";e.d(R,{KN:()=>W,iK:()=>ae,Y:()=>ce,$m:()=>Y,Ur:()=>k,Nj:()=>K,AR:()=>F,SA:()=>_});var n=e(97898),a=e(69330),l=e(83502),r=e(40793),o=e(36316),g=e(89591),m=e(60695),d=e(10124),u=e(49231),i=e(82837),f=e(41406),c=e(34547),E=e(80115),p=e(42626),h=e(12714),y=e(69994),s=e(95966),v=e(79527),C=e(91249),D=e(50342),M=e(14197);const{round:P,min:x,ceil:S}=Math,I=2;let T=6;const O=D.Gj;function A(q,De,oe,te,fe){(0,D.Qm)(oe,q,O,De,(Te,ge,he)=>{let me=te*ge,ye=te*he;fe(Te,me,ye)})}function B(q){const{mode:De,numSeries:oe,isDiscrete:te,hasMappedNull:fe,rowHeight:Te=0,colWidth:ge=0,showValue:he,mergeValues:me=!1,theme:ye,label:ue,formatValue:Oe,alignValue:Ue="left",getTimeRange:at,getValueColor:Ne,getFieldConfig:_e,onHover:Ke,onLeave:et}=q;let ze,je;const Qe=Fe=>{je=Array(oe).fill(null).map(He=>Array(Fe).fill(null))},We=`500 ${Math.round(12*devicePixelRatio)}px ${ye.typography.fontFamily}`,ke=Array(oe).fill(null);let ot=null;const lt=[ge,1/0],Ct=1-lt[0],wt=(lt[1]??1/0)*v.Z.pxRatio,Lt=new Map,Ye=new Map;function Be(Fe){Lt.forEach((He,Xe)=>{Fe.fillStyle=Xe,Fe.fill(He)}),Ye.forEach((He,Xe)=>{Fe.strokeStyle=Xe,Fe.stroke(He)}),Lt.clear(),Ye.clear()}function Le(Fe,He,Xe,dt,ct,At,Ie,Ze,ut,rt,St,st,tt){if(Ie<1)return;const ft=Ne(rt+1,st),$t=_e(rt),Ht=b($t,ft);if(je[rt][St]={x:P(ct-Xe),y:P(At-dt),w:Ie,h:Ze,sidx:rt+1,didx:St,fillColor:Ht},tt){let Zt=Ht,tn=Lt.get(Zt);if(tn==null&&Lt.set(Zt,tn=new Path2D),He(tn,ct,At,Ie,Ze),ut){let on=ft,qt=Ye.get(on);qt==null&&Ye.set(on,qt=new Path2D),He(qt,ct+ut/2,At+ut/2,Ie-ut,Ze-ut)}}else Fe.beginPath(),He(Fe,ct,At,Ie,Ze),Fe.fillStyle=Ht,Fe.fill(),ut&&(Fe.beginPath(),He(Fe,ct+ut/2,At+ut/2,Ie-ut,Ze-ut),Fe.strokeStyle=ft,Fe.lineWidth=ut,Fe.stroke())}const le=(Fe,He,Xe,dt)=>(v.Z.orient(Fe,He,(ct,At,Ie,Ze,ut,rt,St,st,tt,ft,$t,Ht,Zt,tn)=>{let on=P((ct.width||0)*v.Z.pxRatio),qt=te(He),pn=qt&&fe(He);Fe.ctx.save(),tn(Fe.ctx,Fe.bbox.left,Fe.bbox.top,Fe.bbox.width,Fe.bbox.height),Fe.ctx.clip(),A(Te,He-1,oe,$t,(Cn,Rt,mt)=>{if(De===W.Changes)for(let xt=0;xt<Ie.length;xt++){let Ft=Ie[xt];if(Ft!=null||pn){let zt=Math.round(rt(At[xt],Ze,ft,st)),Jt=xt;for(;++Jt<Ie.length&&(Ie[Jt]===void 0||me&&Ie[Jt]===Ft););let ln=Jt===Ie.length?st+ft+on:Math.round(rt(At[Jt],Ze,ft,st));Le(Fe.ctx,tn,st,tt,zt,P(tt+Rt),ln-zt,P(mt),on,Cn,xt,Ft,qt),xt=Jt-1}}else if(De===W.Samples){let xt=rt(At[1],Ze,ft,st)-rt(At[0],Ze,ft,st),Ft=xt*Ct,zt=P(x(wt,xt-Ft)-on),Jt=zt/2;for(let ln=Xe;ln<=dt;ln++){let Pt=Ie[ln];if(Pt!=null||pn){let Gt=rt(At[ln],Ze,ft,st);Le(Fe.ctx,tn,st,tt,P(Gt-Jt),P(tt+Rt),zt,P(mt),on,Cn,ln,Pt,qt)}}}}),qt&&(Fe.ctx.lineWidth=on,Be(Fe.ctx)),Fe.ctx.restore()}),null),de=Oe==null||he===c.Jp.Never?!1:(Fe,He,Xe,dt)=>(Fe.ctx.save(),Fe.ctx.rect(Fe.bbox.left,Fe.bbox.top,Fe.bbox.width,Fe.bbox.height),Fe.ctx.clip(),Fe.ctx.font=We,Fe.ctx.textAlign=De===W.Changes?Ue:"center",Fe.ctx.textBaseline="middle",v.Z.orient(Fe,He,(ct,At,Ie,Ze,ut,rt,St,st,tt,ft,$t)=>{let Ht=P((ct.width||0)*v.Z.pxRatio),tn=te(He)&&fe(He),on=P(tt+xe[He-1]);for(let qt=0;qt<Ie.length;qt++)if(Ie[qt]!=null||tn){const pn=je[He-1][qt];if(!pn||pn.x>=ft)continue;let Cn=Math.floor(pn?.w/T);if(he===c.Jp.Auto&&Cn<2)continue;let Rt=Oe(He,Ie[qt]),mt=P(pn.x+st+pn.w/2);De===W.Changes&&(Ue==="left"?mt=P(pn.x+st+Ht+I):Ue==="right"&&(mt=P(pn.x+st+pn.w-Ht-I))),Fe.ctx.fillStyle=ye.colors.getContrastText(pn.fillColor,3),Fe.ctx.fillText(Rt.slice(0,Cn),mt,on)}}),Fe.ctx.restore(),!1),X=Fe=>{let He=Fe.over,Xe="";for(let dt=32;dt<=126;dt++)Xe+=String.fromCharCode(dt);T=Math.ceil(Fe.ctx.measureText(Xe).width/Xe.length*v.Z.pxRatio),T+=2.5,He.style.overflow="hidden",Fe.root.querySelectorAll(".u-cursor-pt").forEach(dt=>{dt.style.borderRadius="0"})},se=Fe=>{ze=ze||new M.lW(0,0,Fe.bbox.width,Fe.bbox.height),ze.clear(),Qe(Fe.data[0].length),Fe.series.forEach(He=>{He._paths=null})};function re(Fe,He,Xe){if(ke.fill(null),ot=null,!(Fe<0))for(let dt=0;dt<Xe.length;dt++){let ct=Xe[dt];ze.get(Fe,ct,1,1,At=>{(0,M.Pn)(Fe,ct,At.x,At.y,At.x+At.w,At.y+At.h)&&(ke[At.sidx]=At,Math.abs(He-ct)<=At.h/2&&(ot=At))})}}const pe=De===W.Changes,be={x:De===W.Changes,y:!1,dataIdx:(Fe,He)=>{if(He===1){if(ze.o.length===0&&ze.q==null)for(const At of je)for(const Ie of At)Ie&&ze.add(Ie);let Xe=Fe.cursor.left*v.Z.pxRatio,dt=Fe.cursor.top*v.Z.pxRatio,ct=ot;re(Xe,dt,pe?xe:[dt]),ot!=null?ot!==ct&&Ke(ot.sidx,ot.didx,ot):ct!=null&&et()}return ke[He]?.didx},points:{fill:"rgba(255,255,255,0.2)",bbox:(Fe,He)=>{let Xe=ke[He],dt=Xe!=null;return{left:dt?Xe.x/v.Z.pxRatio:-10,top:dt?Xe.y/v.Z.pxRatio:-10,width:dt?Xe.w/v.Z.pxRatio:0,height:dt?Xe.h/v.Z.pxRatio:0}}}},xe=Array(oe).fill(0),Pe=Array(oe).fill(0),we=[0,1];return{cursor:be,xSplits:De===W.Samples?(Fe,He,Xe,dt,ct,At)=>{let Ie=[],Ze=Fe.data[0][1]-Fe.data[0][0],ut=S(ct/Ze);for(let rt=0;rt<Fe.data[0].length;rt+=ut){let St=Fe.data[0][rt];St>=Xe&&St<=dt&&Ie.push(St)}return Ie}:null,xRange:Fe=>{const He=at();let Xe=He.from.valueOf(),dt=He.to.valueOf();if(De===W.Samples){let Ie=(Fe.data[0][1]-Fe.data[0][0])/2;Xe<=Fe.data[0][0]&&(Xe=Fe.data[0][0]-Ie);let Ze=Fe.data[0].length-1;dt>=Fe.data[0][Ze]&&(dt=Fe.data[0][Ze]+Ie)}return[Xe,dt]},ySplits:Fe=>(A(Te,null,oe,Fe.bbox.height,(He,Xe,dt)=>{xe[He]=P(Xe+dt/2),Pe[He]=Fe.posToVal(xe[He]/v.Z.pxRatio,p.j)}),Pe),yValues:(Fe,He)=>He.map((Xe,dt)=>ue(dt+1)),yRange:we,drawPaths:le,drawPoints:de,init:X,drawClear:se}}function b(q,De){if(De[0]==="#"&&De.length===9)return De;const oe=(q.fillOpacity??100)/100;return(0,C.alpha)(De,oe)}var W=(q=>(q.Changes="changes",q.Samples="samples",q))(W||{});const V={lineWidth:0,fillOpacity:80};function w(q){return q.ctrlKey||q.metaKey||q.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const K=({frame:q,theme:De,timeZones:oe,getTimeRange:te,mode:fe,eventBus:Te,sync:ge,rowHeight:he,colWidth:me,showValue:ye,alignValue:ue,mergeValues:Oe,getValueColor:Ue,eventsScope:at="__global_"})=>{const Ne=new E.U(oe[0]),_e="time",Ke="x",et=Ye=>{const Be=Ye.config?.color?.mode;return!(Be&&Ye.display&&Be.startsWith("continuous-"))},ze=Ye=>Ye.config.mappings?.some(Be=>Be.type===f.Hi.SpecialValue&&Be.options.match==="null")||!1,je=(Ye,Be)=>{const Le=q.fields[Ye];return Le.state?.origin?.fieldIndex!==void 0&&Le.state?.origin?.frameIndex!==void 0&&Ue?Ue(Le.state?.origin?.frameIndex,Le.state?.origin?.fieldIndex,Be):n.R},Qe={mode:fe,numSeries:q.fields.length-1,isDiscrete:Ye=>et(q.fields[Ye]),hasMappedNull:Ye=>ze(q.fields[Ye]),mergeValues:Oe,rowHeight:he,colWidth:me,showValue:ye,alignValue:ue,theme:De,label:Ye=>(0,a.CZ)(q.fields[Ye],q),getFieldConfig:Ye=>q.fields[Ye].config.custom,getValueColor:je,getTimeRange:te,formatValue:(Ye,Be)=>(0,l.zc)(q.fields[Ye].display(Be)),onHover:(Ye,Be)=>{ke=Ye,ot=Be,We=!0},onLeave:()=>{ke=null,ot=null,We=!0}};let We=!1,ke=null,ot=null;const lt=B(Qe),Ct={point:{[_e]:null,[p.j]:null},data:q};Ne.addHook("init",lt.init),Ne.addHook("drawClear",lt.drawClear);const wt=(Ye,Be,Le)=>{We&&(ke!=null&&(Ye(ke),Be(ot)),We=!1),Le(ke==null)};Ne.setTooltipInterpolator(wt),Ne.setPrepData(Ye=>(0,s.Bj)(Ye[0],(0,s.i7)(Ye[0]))),Ne.setCursor(lt.cursor),Ne.addScale({scaleKey:Ke,isTime:!0,orientation:c.wN.Horizontal,direction:c.bQ.Right,range:lt.xRange}),Ne.addScale({scaleKey:p.j,isTime:!1,orientation:c.wN.Vertical,direction:c.bQ.Up,range:lt.yRange}),Ne.addAxis({scaleKey:Ke,isTime:!0,splits:lt.xSplits,placement:c.LB.Bottom,timeZone:oe[0],theme:De,grid:{show:!0}}),Ne.addAxis({scaleKey:p.j,isTime:!1,placement:c.LB.Left,splits:lt.ySplits,values:lt.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:De});let Lt=0;for(let Ye=0;Ye<q.fields.length;Ye++){if(Ye===0)continue;const Be=q.fields[Ye],Le=Be.config,le={...V,...Le.custom};Be.state.seriesIndex=Lt++,Ne.addSeries({scaleKey:p.j,pathBuilder:lt.drawPaths,pointsBuilder:lt.drawPoints,lineWidth:le.lineWidth,fillOpacity:le.fillOpacity,theme:De,show:!le.hideFrom?.viz,thresholds:Le.thresholds,dataFrameFieldIndex:Be.state?.origin})}if(ge&&ge()!==r.m.Off){let Ye={};Ye.sync={key:at,filters:{pub:(Be,Le,le,de,X,se,re)=>ge&&ge()===r.m.Off?!1:(Ct.rowIndex=re,le<0&&de<0?(Ct.point[_e]=null,Ct.point[p.j]=null,Te.publish(new o.xH)):(Ct.point[_e]=Le.posToVal(le,Ke),Ct.point.panelRelY=de>0?de/se:1,Ct.down=void 0,Te.publish(new o.es(Ct))),!0)},scales:[Ke,null]},Ne.setSync(),Ne.setCursor(Ye)}return Ne};function z(q){const De=new Map;for(let oe=0;oe<q.fields.length;oe++)De.set(getFieldDisplayName(q.fields[oe],q),oe);return De}function G(q){let De=q[0],oe;for(let te=1;te<q.length;te++){let fe=q[te];fe===null?De=null:fe===De?(oe||(oe=[...q]),oe[te]=void 0):fe!=null&&(De=fe)}return oe}function Q(q){let De=q.config.custom?.spanNulls;return De?De===!0?1/0:De:-1}function j(q,De){const oe=q.config.thresholds;if(q.type!==g.fS.number||!oe||!oe.steps.length)return;const te=k(q.config,De);if(te.length!==oe.steps.length)return;const fe=new Map,Te=new Map;for(let me=0;me<te.length;me++)fe.set(oe.steps[me],te[me].label),Te.set(te[me].label,te[me].color);let ge=q.values;const he=new Array(q.values.length);if(oe.mode===m.H.Percentage){const{min:me,max:ye}=(0,d.xD)(q),ue=ye-me;ge=ge.map(Oe=>Oe==null?Oe:(Oe-me)/ue*100)}for(let me=0;me<he.length;me++){const ye=ge[me];ye==null?he[me]=ye:he[me]=fe.get((0,u.m1)(ye,oe.steps))}return{...q,config:{...q.config,custom:{...q.config.custom,spanNulls:Q(q)}},type:g.fS.string,values:he,display:me=>({text:String(me),color:Te.get(String(me)),numeric:NaN})}}function F(q,De,oe,te){if(!q?.length)return{warn:"No data in response"};let fe=!1;const Te=[];for(let ge of q){let he=!1,me=!1,ye=(0,i.Y3)(ge,ge.fields.findIndex(Ue=>Ue.type===g.fS.time)),ue=(0,h.w)({frame:ye,refFieldPseudoMin:oe.from.valueOf(),refFieldPseudoMax:oe.to.valueOf()});ue!==ge&&(me=!0);const Oe=[];for(let Ue of(0,y.I)(ue).fields)if(!Ue.config.custom?.hideFrom?.viz)switch(Ue.type){case g.fS.time:he=!0,fe=!0,Oe.push(Ue);break;case g.fS.enum:case g.fS.number:if(De&&Ue.config.color?.mode===n.S.Thresholds){const at=j(Ue,te);if(at){Oe.push(at),me=!0;continue}}case g.fS.boolean:case g.fS.string:Ue={...Ue,config:{...Ue.config,custom:{...Ue.config.custom,spanNulls:Q(Ue)}}},Oe.push(Ue);break;default:me=!0}he&&Oe.length>1&&(fe=!0,me?Te.push({...ye,fields:Oe}):Te.push(ye))}return fe?Te.length?{frames:Te}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function k(q,De){const oe=[],te=q.thresholds;if(!te||!te.steps.length)return oe;const fe=te.steps,Te=(0,l.Cf)(te.mode===m.H.Percentage?"percent":q.unit??""),ge=he=>(0,l.zc)(Te(he,q.decimals??void 0));for(let he=0;he<fe.length;he++){let me=fe[he],ye=me.value,ue="",Oe="";ye===-1/0&&he<fe.length-1?(ye=fe[he+1].value,ue="< "):Oe="+",oe.push({label:`${ue}${ge(ye)}${Oe}`,color:De.visualization.getColorByName(me.color),yAxis:1})}return oe}function _(q,De,oe){if(!(!q||De.showLegend===!1))return Y(Z(q),oe)}function Y(q,De){if(!q.length)return;const oe=[],te=q[0].config,fe=te.color?.mode??n.S.Fixed,Te=te.thresholds;if(fe===n.S.Thresholds&&Te?.steps&&Te.steps.length>1)return k(te,De);if(fe.startsWith("continuous"))return;const ge=new Map;return q.forEach(he=>{he.config.custom?.hideFrom?.legend||he.values.forEach(me=>{let ye=he.display(me);ye.color&&ge.set(ye.text,ye.color)})}),ge.forEach((he,me)=>{me.length>0&&oe.push({label:me,color:De.visualization.getColorByName(he??n.R),yAxis:1})}),oe}function Z(q){const De=[];for(const oe of q)for(const te of oe.fields)te.type!==g.fS.time&&De.push(te);return De}function ae(q,De){let oe,te=De+1;if(te>=q.values.length)return null;const fe=q.values[De];for(;oe===void 0;){if(te>=q.values.length)return null;const Te=q.values[te];Te===void 0||Te===fe?te++:oe=te}return oe}function ce(q){if(q<0||Number.isNaN(q))return"";let De,oe,te,fe,Te,ge,he,me;return he=Math.floor(q/1e3),ge=Math.floor(he/60),he=he%60,Te=Math.floor(ge/60),ge=ge%60,fe=Math.floor(Te/24),Te=Te%24,De=Math.floor(fe/365),De>0&&(fe=fe%365),oe=Math.floor(fe/30),oe>0&&(fe=fe%30),te=Math.floor(fe/7),te>0&&(fe=fe%7),me=Math.round(q%1e3*1e3)/1e3,(De>0?De+"y "+(oe>0?oe+"mo ":"")+(te>0?te+"w ":"")+(fe>0?fe+"d ":""):oe>0?oe+"mo "+(te>0?te+"w ":"")+(fe>0?fe+"d ":""):te>0?te+"w "+(fe>0?fe+"d ":""):fe>0?fe+"d "+(Te>0?Te+"h ":""):Te>0?Te+"h "+(ge>0?ge+"m ":""):ge>0?ge+"m "+(he>0?he+"s ":""):he>0?he+"s "+(me>0?me+"ms ":""):me>0?me+"ms ":"0").trim()}},60317:(J,R,e)=>{"use strict";e.d(R,{a:()=>m});var n=e(41407),a=e(39953),l=e(82803),r=e(70967),o=e(99491),g=e(12190);const m=({values:u,onChange:i,id:f})=>{const c=(0,l.wW)(d);return a.createElement("div",{className:c.wrapper},u.length?u.map((E,p)=>a.createElement("div",{className:c.pair,key:p},a.createElement(r.X,{id:`${f}-key-${p}`,placeholder:"Tag name",value:E.key,onChange:h=>{i(u.map((y,s)=>s===p?{...y,key:String(h)}:y))}}),a.createElement(o.W,{"aria-label":"equals",className:c.operator},"as"),a.createElement(r.X,{id:`${f}-value-${p}`,placeholder:"New name (optional)",value:E.value||"",onChange:h=>{i(u.map((y,s)=>s===p?{...y,value:String(h)}:y))}}),a.createElement("button",{onClick:()=>i([...u.slice(0,p),...u.slice(p+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",type:"button"},a.createElement(g.J,{name:"times"})),p===u.length-1?a.createElement("button",{onClick:()=>i([...u,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},a.createElement(g.J,{name:"plus"})):null)):a.createElement("button",{onClick:()=>i([...u,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},a.createElement(g.J,{name:"plus"})))},d=u=>({wrapper:(0,n.css)`
    display: flex;
    flex-direction: column;
    gap: ${u.spacing(.5)} 0;
  `,pair:(0,n.css)`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:(0,n.css)`
    color: ${u.v1.palette.orange};
    width: auto;
  `})},36516:(J,R,e)=>{"use strict";e.d(R,{Ny:()=>s,dw:()=>v,mH:()=>h,p1:()=>c,rr:()=>y});var n=e(41407),a=e(39953),l=e(27770),r=e(74661),o=e(69171),g=e(26286),m=e(38637),d=e(43997),u=e(92811),i=e(13273),f=e(60317);function c(C){if(C?.tracesToLogsV2)return C.tracesToLogsV2;if(!C?.tracesToLogs)return;const D={customQuery:!1};return D.datasourceUid=C.tracesToLogs.datasourceUid,D.tags=C.tracesToLogs.mapTagNamesEnabled?C.tracesToLogs.mappedTags:C.tracesToLogs.tags?.map(M=>({key:M})),D.filterByTraceID=C.tracesToLogs.filterByTraceID,D.filterBySpanID=C.tracesToLogs.filterBySpanID,D.spanStartTimeShift=C.tracesToLogs.spanStartTimeShift,D.spanEndTimeShift=C.tracesToLogs.spanEndTimeShift,D}function E({options:C,onOptionsChange:D}){const M=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource","grafana-falconlogscale-datasource","googlecloud-logging-datasource"],P=(0,a.useMemo)(()=>c(C.jsonData)||{customQuery:!1},[C.jsonData]),{query:x="",tags:S,customQuery:I}=P,T=(0,a.useCallback)(O=>{D({...C,jsonData:{...C.jsonData,tracesToLogsV2:{...P,...O},tracesToLogs:void 0}})},[D,C,P]);return a.createElement("div",{className:(0,n.css)({width:"100%"})},a.createElement(r.Z,null,a.createElement(o._,{tooltip:"The logs data source the trace is going to navigate to",label:"Data source",labelWidth:26},a.createElement(u.q,{inputId:"trace-to-logs-data-source-picker",filter:O=>M.includes(O.type),current:P.datasourceUid,noDefault:!0,width:40,onChange:O=>T({datasourceUid:O.uid})}))),a.createElement(r.Z,null,a.createElement(i.w,{label:h("start"),tooltip:y("start","0"),value:P.spanStartTimeShift||"",onChange:O=>{T({spanStartTimeShift:O})},isInvalidError:s})),a.createElement(r.Z,null,a.createElement(i.w,{label:h("end"),tooltip:y("end","0"),value:P.spanEndTimeShift||"",onChange:O=>{T({spanEndTimeShift:O})},isInvalidError:s})),a.createElement(r.Z,null,a.createElement(o._,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod', 'service.name', 'service.namespace'",label:"Tags",labelWidth:26},a.createElement(f.a,{values:S??[],onChange:O=>T({tags:O})}))),a.createElement(p,{disabled:I,type:"trace",id:"filterByTraceID",value:!!P.filterByTraceID,onChange:O=>T({filterByTraceID:O})}),a.createElement(p,{disabled:I,type:"span",id:"filterBySpanID",value:!!P.filterBySpanID,onChange:O=>T({filterBySpanID:O})}),a.createElement(r.Z,null,a.createElement(o._,{tooltip:"Use a custom query with the possibility to interpolate variables from the trace or span",label:"Use custom query",labelWidth:26},a.createElement(g.x,{id:"customQuerySwitch",value:I,onChange:O=>T({customQuery:O.currentTarget.checked})}))),I&&a.createElement(o._,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword",grow:!0},a.createElement(m.I,{label:"Query",type:"text",allowFullScreen:!0,value:x,onChange:O=>T({query:O.currentTarget.value})})))}function p(C){return a.createElement(r.Z,null,a.createElement(o._,{disabled:C.disabled,label:`Filter by ${C.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${C.type} ID`},a.createElement(g.x,{id:C.id,value:C.value,onChange:D=>C.onChange(D.currentTarget.checked)})))}const h=C=>`Span ${C} time shift`,y=(C,D)=>`Shifts the ${C} time of the span. Default: ${D} (Time units can be used here, for example: 5s, -1m, 3h)`,s="Invalid time shift. See tooltip for examples.",v=({options:C,onOptionsChange:D})=>a.createElement(l.K,{title:"Trace to logs",description:a.createElement(d.W,{description:"Navigate from a trace span to the selected data source's logs.",suffix:`${C.type}/#trace-to-logs`,feature:"trace to logs"}),isCollapsible:!0,isInitiallyOpen:!0},a.createElement(E,{options:C,onOptionsChange:D}))},42367:(J,R,e)=>{"use strict";e.d(R,{Z:()=>o});var n=e(41407),a=e(39953),l=e(72639),r=e(82803);const o=({text:m="PRO",className:d,experimentId:u,eventVariant:i="",...f})=>{const c=(0,r.wW)(g);return(0,a.useEffect)(()=>{u&&(0,l.SZ)(u,"test",i)},[u,i]),a.createElement("span",{className:(0,n.cx)(c.badge,d),...f},m)},g=m=>({badge:(0,n.css)`
      margin-left: ${m.spacing(1.25)};
      border-radius: ${m.shape.borderRadius(5)};
      background-color: ${m.colors.success.main};
      padding: ${m.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${m.typography.fontWeightMedium};
      font-size: ${m.typography.pxToRem(10)};
    `})},65963:(J,R,e)=>{"use strict";e.d(R,{B:()=>d});var n=e(41407),a=e(39953),l=e(82803),r=e(73075),o=e(62679),g=e(10178);const m=i=>[{category:(0,o.t)("help-modal.shortcuts-category.global","Global"),shortcuts:[{keys:["g","h"],description:(0,o.t)("help-modal.shortcuts-description.go-to-home-dashboard","Go to Home Dashboard")},{keys:["g","d"],description:(0,o.t)("help-modal.shortcuts-description.go-to-dashboards","Go to Dashboards")},{keys:["g","e"],description:(0,o.t)("help-modal.shortcuts-description.go-to-explore","Go to Explore")},{keys:["g","p"],description:(0,o.t)("help-modal.shortcuts-description.go-to-profile","Go to Profile")},{keys:[`${i} + k`],description:(0,o.t)("help-modal.shortcuts-description.open-search","Open search")},{keys:["esc"],description:(0,o.t)("help-modal.shortcuts-description.exit-edit/setting-views","Exit edit/setting views")},{keys:["h"],description:(0,o.t)("help-modal.shortcuts-description.show-all-shortcuts","Show all keyboard shortcuts")},{keys:["c","t"],description:(0,o.t)("help-modal.shortcuts-description.change-theme","Change theme")}]},{category:(0,o.t)("help-modal.shortcuts-category.dashboard","Dashboard"),shortcuts:[{keys:[`${i}+s`],description:(0,o.t)("help-modal.shortcuts-description.save-dashboard","Save dashboard")},{keys:["d","r"],description:(0,o.t)("help-modal.shortcuts-description.refresh-all-panels","Refresh all panels")},{keys:["d","s"],description:(0,o.t)("help-modal.shortcuts-description.dashboard-settings","Dashboard settings")},{keys:["d","v"],description:(0,o.t)("help-modal.shortcuts-description.toggle-active-mode","Toggle in-active / view mode")},{keys:["d","k"],description:(0,o.t)("help-modal.shortcuts-description.toggle-kiosk","Toggle kiosk mode (hides top nav)")},{keys:["d","E"],description:(0,o.t)("help-modal.shortcuts-description.expand-all-rows","Expand all rows")},{keys:["d","C"],description:(0,o.t)("help-modal.shortcuts-description.collapse-all-rows","Collapse all rows")},{keys:["d","a"],description:(0,o.t)("help-modal.shortcuts-description.toggle-auto-fit","Toggle auto fit panels (experimental feature)")},{keys:[`${i} + o`],description:(0,o.t)("help-modal.shortcuts-description.toggle-graph-crosshair","Toggle shared graph crosshair")},{keys:["d","l"],description:(0,o.t)("help-modal.shortcuts-description.toggle-all-panel-legends","Toggle all panel legends")},{keys:["d","x"],description:(0,o.t)("help-modal.shortcuts-description.toggle-exemplars","Toggle exemplars in all panel")}]},{category:(0,o.t)("help-modal.shortcuts-category.focused-panel","Focused Panel"),shortcuts:[{keys:["e"],description:(0,o.t)("help-modal.shortcuts-description.toggle-panel-edit","Toggle panel edit view")},{keys:["v"],description:(0,o.t)("help-modal.shortcuts-description.toggle-panel-fullscreen","Toggle panel fullscreen view")},{keys:["p","s"],description:(0,o.t)("help-modal.shortcuts-description.open-shared-modal","Open Panel Share Modal")},{keys:["p","d"],description:(0,o.t)("help-modal.shortcuts-description.duplicate-panel","Duplicate Panel")},{keys:["p","r"],description:(0,o.t)("help-modal.shortcuts-description.remove-panel","Remove Panel")},{keys:["p","l"],description:(0,o.t)("help-modal.shortcuts-description.toggle-panel-legend","Toggle panel legend")}]},{category:(0,o.t)("help-modal.shortcuts-category.time-range","Time Range"),shortcuts:[{keys:["t","z"],description:(0,o.t)("help-modal.shortcuts-description.zoom-out-time-range","Zoom out time range")},{keys:["t","\u2190"],description:(0,o.t)("help-modal.shortcuts-description.move-time-range-back","Move time range back")},{keys:["t","\u2192"],description:(0,o.t)("help-modal.shortcuts-description.move-time-range-forward","Move time range forward")},{keys:["t","a"],description:(0,o.t)("help-modal.shortcuts-description.make-time-range-permanent","Make time range absolute/permanent")}]}],d=({onDismiss:i})=>{const f=(0,l.wW)(u),c=(0,a.useMemo)(()=>(0,g.vl)(),[]),E=(0,a.useMemo)(()=>m(c),[c]);return a.createElement(r.u,{title:(0,o.t)("help-modal.title","Shortcuts"),isOpen:!0,onDismiss:i,onClickBackdrop:i},a.createElement("div",{className:f.categories},Object.values(E).map(({category:p,shortcuts:h},y)=>a.createElement("div",{className:f.shortcutCategory,key:y},a.createElement("table",{className:f.shortcutTable},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("th",{className:f.shortcutTableCategoryHeader,colSpan:2},p)),h.map((s,v)=>a.createElement("tr",{key:`${y}-${v}`},a.createElement("td",{className:f.shortcutTableKeys},s.keys.map((C,D)=>a.createElement("span",{className:f.shortcutTableKey,key:`${y}-${v}-${D}`},C))),a.createElement("td",{className:f.shortcutTableDescription},s.description)))))))))};function u(i){return{titleDescription:(0,n.css)`
      font-size: ${i.typography.bodySmall.fontSize};
      font-weight: ${i.typography.bodySmall.fontWeight};
      color: ${i.colors.text.disabled};
      padding-bottom: ${i.spacing(2)};
    `,categories:(0,n.css)`
      font-size: ${i.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:(0,n.css)`
      width: 50%;
      font-size: ${i.typography.bodySmall.fontSize};
    `,shortcutTable:(0,n.css)`
      margin-bottom: ${i.spacing(2)};
    `,shortcutTableCategoryHeader:(0,n.css)`
      font-weight: normal;
      font-size: ${i.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:(0,n.css)`
      text-align: left;
      color: ${i.colors.text.disabled};
      width: 99%;
      padding: ${i.spacing(1,2)};
    `,shortcutTableKeys:(0,n.css)`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${i.colors.text.primary};
    `,shortcutTableKey:(0,n.css)`
      display: inline-block;
      text-align: center;
      margin-right: ${i.spacing(.5)};
      padding: 3px 5px;
      font:
        11px Consolas,
        'Liberation Mono',
        Menlo,
        Courier,
        monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${i.colors.border.medium};
      border-radius: ${i.shape.borderRadius(3)};
      color: ${i.colors.text.primary};
      background-color: ${i.colors.background.secondary};
    `}}},50820:(J,R,e)=>{"use strict";e.d(R,{Oh:()=>m,config:()=>a.config,default:()=>r,iE:()=>o});var n=e(30670),a=e(32688);let l=a.config;const r=l,o=()=>l,g=d=>{l={...l,...d}},m=a.config.panels?.debug?.state===n.BV.alpha},74602:(J,R,e)=>{"use strict";e.d(R,{AV:()=>d,FL:()=>E,Hk:()=>p,K3:()=>n,OA:()=>r,QO:()=>i,b0:()=>m,cz:()=>l,gN:()=>c,hD:()=>a,kh:()=>g,yM:()=>o,zF:()=>u});const n=30,a=8,l=24,r="v",o="h",g=4,m=250,d=n*3,u="panel-copy",i=2,f=23763571993,c=40,E="VisualizationSelectPane.ListMode",p="WidgetSelectPane.ListMode"},61205:(J,R,e)=>{"use strict";e.d(R,{h:()=>a,p:()=>l});var n=e(39953);const a=n.createContext(void 0);function l(){const r=(0,n.useContext)(a);if(!r)throw new Error("No GrafanaContext found");return r}},90634:(J,R,e)=>{"use strict";e.d(R,{AT:()=>u,ZR:()=>f,iG:()=>c,t_:()=>i});var n=e(39953),a=e(34032),l=e(35358),r=e(57721),o=e(97316);const g={title:"",text:"",severity:r.AppNotificationSeverity.Success,icon:"check"},m={title:"",text:"",severity:r.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},d={title:"",text:"",severity:r.AppNotificationSeverity.Error,icon:"exclamation-triangle"},u=(E,p="",h)=>({...g,title:E,text:p,id:(0,a.Z)(),timestamp:Date.now(),showing:!0}),i=(E,p="",h,y)=>({...d,text:(0,l.i)(p),title:E,id:(0,a.Z)(),traceId:h,component:y,timestamp:Date.now(),showing:!0}),f=(E,p="",h)=>({...m,title:E,text:p,traceId:h,id:(0,a.Z)(),timestamp:Date.now(),showing:!0});function c(){const E=(0,r.useDispatch)();return(0,n.useMemo)(()=>({success:(p,h="")=>{E((0,o.$l)(u(p,h)))},warning:(p,h="",y)=>{E((0,o.$l)(f(p,h,y)))},error:(p,h="",y)=>{E((0,o.$l)(i(p,h,y)))}}),[E])}},21308:(J,R,e)=>{"use strict";e.d(R,{Vt:()=>l.contextSrv,Wz:()=>r.W,h$:()=>n.Z,rv:()=>a.r});var n=e(28833),a=e(2634),l=e(97125),r=e(24796)},89739:(J,R,e)=>{"use strict";e.d(R,{H6:()=>y,ZP:()=>s});var n=e(86832),a=e(23062),l=e(91013),r=e(26205);const o=T=>{const O=(0,r.F)().getInstanceSettings(T.datasourceName);return{id:T.ts.toString(),createdAt:T.ts,datasourceName:T.datasourceName,datasourceUid:O?.uid||"",starred:T.starred,comment:T.comment,queries:T.queries}},g=T=>{if(!(0,r.F)().getInstanceSettings({uid:T.datasourceUid}))throw new Error("Datasource not found.");return{ts:T.createdAt,datasourceName:T.datasourceName,starred:T.starred,comment:T.comment,queries:T.queries}};var m=e(17254);function d(T,O,A,B,b){const W=f(T,A),V=c(W,B),w=b?i(V,b):V;return E(w,O)}const u=(T,O)=>{const A=new Date,B=new Date(A.setDate(A.getDate()-T));return O?B.setHours(24,0,0,0):B.setHours(0,0,0,0)};function i(T,O){const A=u(O[0],!0),B=u(O[1],!1);return T.filter(b=>b.createdAt<A&&b.createdAt>B)}function f(T,O){return O.length>0?T.filter(A=>O.includes(A.datasourceName)):T}function c(T,O){return T.filter(A=>A.comment.includes(O)?!0:A.queries.filter(b=>Object.values((0,n.omit)(b,["datasource","key","refId","hide","queryType"])).some(W=>W?.toString().includes(O))).length>0)}const E=(T,O)=>{let A;return O===m.A.Ascending&&(A=(B,b)=>B.createdAt<b.createdAt?-1:B.createdAt>b.createdAt?1:0),O===m.A.Descending&&(A=(B,b)=>B.createdAt<b.createdAt?1:B.createdAt>b.createdAt?-1:0),O===m.A.DatasourceZA&&(A=(B,b)=>B.datasourceName<b.datasourceName?-1:B.datasourceName>b.datasourceName?1:0),O===m.A.DatasourceAZ&&(A=(B,b)=>B.datasourceName<b.datasourceName?1:B.datasourceName>b.datasourceName?-1:0),T.sort(A)},p={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"},h="grafana.explore.richHistory",y=1e4;class s{async getRichHistory(O){const A=M().map(o),B=O.starred?A.filter(W=>W.starred===!0):A,b=d(B,O.sortOrder,O.datasourceFilters,O.search,[O.from,O.to]);return{richHistory:b,total:b.length}}async addToRichHistory(O){const A=Date.now(),B={id:A.toString(),createdAt:A,...O},b=g(B),W=C(M()),V=b.queries.map(Q=>(0,n.omit)(Q,["key","refId"])),w=W.length>0&&W[0].queries.map(Q=>(0,n.omit)(Q,["key","refId"]));if((0,n.isEqual)(V,w)){const Q=new Error("Entry already exists");throw Q.name=l.j.DuplicatedEntry,Q}const{queriesToKeep:K,limitExceeded:z}=D(W),G=[b,...K];try{a.Z.setObject(h,G)}catch(Q){if(Q instanceof Error&&Q.name==="QuotaExceededError")I(l.j.StorageFull,`Saving rich history failed: ${Q.message}`);else throw Q}return z?{warning:{type:l.V.LimitExceeded,message:`Query history reached the limit of ${y}. Old, not-starred items have been removed.`},richHistoryQuery:B}:{richHistoryQuery:B}}async deleteAll(){a.Z.delete(h)}async deleteRichHistory(O){const A=parseInt(O,10),b=a.Z.getObject(h,[]).filter(W=>W.ts!==A);a.Z.setObject(h,b)}async updateStarred(O,A){return v(O,B=>B.starred=A)}async updateComment(O,A){return v(O,B=>B.comment=A)}async getSettings(){return{activeDatasourceOnly:a.Z.getObject(p.activeDatasourceOnly,!1),retentionPeriod:a.Z.getObject(p.retentionPeriod,7),starredTabAsFirstTab:a.Z.getBool(p.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:a.Z.getObject(p.datasourceFilters,[]).map(O=>O.value)}}async updateSettings(O){a.Z.set(p.activeDatasourceOnly,O.activeDatasourceOnly),a.Z.set(p.retentionPeriod,O.retentionPeriod),a.Z.set(p.starredTabAsFirstTab,O.starredTabAsFirstTab),a.Z.setObject(p.datasourceFilters,(O.lastUsedDatasourceFilters||[]).map(A=>({value:A})))}}function v(T,O){const A=parseInt(T,10),B=a.Z.getObject(h,[]),b=(0,n.find)(B,{ts:A});if(!b)throw new Error("Rich history item not found.");return O(b),a.Z.setObject(h,B),o(b)}function C(T){const O=a.Z.getObject(p.retentionPeriod,7),A=u(O,!1);return T.filter(B=>B.ts>A||B.starred===!0)||[]}function D(T){let O=!1,A=T.length-1;for(;A>=0&&T.length>=y;)T[A].starred||(T.splice(A,1),O=!0),A--;return{queriesToKeep:T,limitExceeded:O}}function M(){const T=a.Z.getObject(h,[]);return P(T)}function P(T){return T.map(A=>{const B=A.queries.map((b,W)=>x(A,b,W));return{...A,queries:B}})}function x(T,O,A){const B="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof O=="object"?O:S(O)?JSON.parse(O):{expr:O,refId:B[A]}}function S(T){try{JSON.parse(T)}catch{return!1}return!0}function I(T,O){const A=new Error(O);throw A.name=T,A}},91013:(J,R,e)=>{"use strict";e.d(R,{V:()=>a,j:()=>n});var n=(l=>(l.StorageFull="StorageFull",l.DuplicatedEntry="DuplicatedEntry",l))(n||{}),a=(l=>(l.LimitExceeded="LimitExceeded",l))(a||{})},55284:(J,R,e)=>{"use strict";e.d(R,{b:()=>h,X:()=>y});var n=e(32688),a=e(21308),l=e(17254),r=e(89739),o=e(31312),g=e(4148),m=e(26205),d=e(88960);const u=s=>{const v=(0,m.F)().getInstanceSettings({uid:s.datasourceUid});return{id:s.uid,createdAt:s.createdAt*1e3,datasourceName:v?.name||"",datasourceUid:s.datasourceUid,starred:s.starred,comment:s.comment,queries:s.queries}},i=s=>({uid:s.id,createdAt:Math.floor(s.createdAt/1e3),datasourceUid:s.datasourceUid,starred:s.starred,comment:s.comment,queries:s.queries});class f{constructor(){this.preferenceService=new d.y("user")}async addToRichHistory(v){const{result:C}=await(0,g.i)().post("/api/query-history",{dataSourceUid:v.datasourceUid,queries:v.queries});return{richHistoryQuery:u(C)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(v){(0,g.i)().delete(`/api/query-history/${v}`)}async getRichHistory(v){const C=c(v);let D="query-history-get-all";v.starred&&(D="query-history-get-starred");const P=(await(0,o.n)((0,g.i)().fetch({method:"GET",url:`/api/query-history?${C}`,requestId:D}))).data,x=(P.result.queryHistory||[]).map(u),S=P.result.totalCount||0;return{richHistory:x,total:S}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(v,C){const D=await(0,g.i)().patch(`/api/query-history/${v}`,{comment:C});return u(D.result)}updateSettings(v){return this.preferenceService.patch({queryHistory:{homeTab:v.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(v,C){let D;return C?D=await(0,g.i)().post(`/api/query-history/star/${v}`):D=await(0,g.i)().delete(`/api/query-history/star/${v}`),u(D.result)}}function c(s){let v=`${s.datasourceFilters.map(C=>{const D=(0,m.F)().getInstanceSettings(C).uid;return`datasourceUid=${encodeURIComponent(D)}`}).join("&")}`;if(s.search&&(v=v+`&searchString=${s.search}`),s.sortOrder&&(v=v+`&sort=${s.sortOrder===l.A.Ascending?"time-asc":"time-desc"}`),!s.starred){const C=s.from===0?"now":`now-${s.from}d`,D=s.to===0?"now":`now-${s.to}d`;v=v+`&to=${C}`,v=v+`&from=${D}`}return v=v+"&limit=100",v=v+`&page=${s.page||1}`,s.starred&&(v=v+`&onlyStarred=${s.starred}`),v}const E=new r.ZP,p=new f,h=()=>n.config.queryHistoryEnabled?p:E,y=()=>n.config.queryHistoryEnabled?{availableFilters:[l.A.Descending,l.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:a.Vt.isSignedIn}:{availableFilters:[l.A.Descending,l.A.Ascending,l.A.DatasourceAZ,l.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},83450:(J,R,e)=>{"use strict";e.d(R,{q:()=>l});var n=e(57721),a=e(45015);const l=r=>{const o=(0,n.useSelector)(g=>g.navIndex);return(0,a.ht)(o,r)}},67650:(J,R,e)=>{"use strict";e.d(R,{K:()=>r});var n=e(39953),a=e(53721),l=e(13601);function r(){const{search:o}=(0,a.TH)(),g=(0,n.useMemo)(()=>(0,l.Ox)(o||""),[o]),m=(0,n.useCallback)((d,u)=>l.E1.partial(d,u),[]);return[g,m]}},80214:(J,R,e)=>{"use strict";e.d(R,{D_:()=>u,a2:()=>d});const n="en-US",a="fr-FR",l="es-ES",r="de-DE",o="zh-Hans",g="pseudo-LOCALE",m=null,d=[{code:n,name:"English",loader:()=>e.e(7424).then(e.t.bind(e,67424,19))},{code:a,name:"Fran\xE7ais",loader:()=>e.e(6419).then(e.t.bind(e,66419,19))},{code:l,name:"Espa\xF1ol",loader:()=>e.e(4253).then(e.t.bind(e,4253,19))},{code:r,name:"Deutsch",loader:()=>e.e(810).then(e.t.bind(e,90810,19))},{code:o,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(5001).then(e.t.bind(e,35001,19))}],u=d.map(i=>i.code)},62679:(J,R,e)=>{"use strict";e.d(R,{$q:()=>p,cC:()=>f,t:()=>E,uC:()=>u});var n=e(20463),a=e(14525),l=e(39953),r=e(7330),o=e(75146),g=e(80214);const m=h=>h.split("-")[0].toLowerCase(),d={type:"backend",init(){},async read(h,y,s){let v=g.a2.find(D=>D.code===h);if(v||(v=g.a2.find(D=>m(D.code)===m(h))),!v)return s(new Error("No message loader available for "+h),null);const C=await v.loader();s(null,C)}};function u(h){const y={partialBundledLanguages:!0,resources:{},returnEmptyString:!1};let s=n.default;if(h==="detect"){s=s.use(a.Z);const v={order:["navigator"],caches:[]};y.detection=v}else y.lng=g.D_.includes(h)?h:void 0;return s.use(d).use(r.Db).init(y)}function i(h){const y=VALID_LANGUAGES.includes(h)?h:void 0;return i18n.changeLanguage(y)}const f=h=>l.createElement(o.c,{...h}),c=n.default.t,E=(h,y,s)=>c(h,y,s),p=(h,y={})=>typeof h=="string"?p(new Date(h),y):new Intl.DateTimeFormat(n.default.language,y).format(h)},2634:(J,R,e)=>{"use strict";e.d(R,{r:()=>a});class n{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const a=new n},59138:(J,R,e)=>{"use strict";e.d(R,{$l:()=>d,Av:()=>p,F6:()=>f,Jk:()=>c,VW:()=>E,ad:()=>u,hS:()=>i,mE:()=>y,vo:()=>s});var n=e(77960),a=e(57721);const l=25,r="notifications",o=`${r}/lastRead`,g={byId:M(),lastRead:Number.parseInt(window.localStorage.getItem(o)??`${Date.now()}`,10)},m=(0,n.oM)({name:"appNotifications",initialState:g,reducers:{notifyApp:(x,{payload:S})=>{Object.values(x.byId).some(I=>v(S,I)&&I.showing)||(x.byId[S.id]=S,P(x.byId))},hideAppNotification:(x,{payload:S})=>{S in x.byId&&(x.byId[S].showing=!1,P(x.byId))},clearNotification:(x,{payload:S})=>{delete x.byId[S],P(x.byId)},clearAllNotifications:x=>{x.byId={},P(x.byId)},readAllNotifications:(x,{payload:S})=>{x.lastRead=S}}}),{notifyApp:d,hideAppNotification:u,clearNotification:i,clearAllNotifications:f,readAllNotifications:c}=m.actions,E=m.reducer,p=x=>x.lastRead,h=x=>Object.values(x.byId).sort((S,I)=>I.timestamp-S.timestamp),y=x=>h(x).filter(C),s=x=>Object.values(x.byId).filter(S=>S.showing);function v(x,S){return x.icon===S.icon&&x.severity===S.severity&&x.text===S.text&&x.title===S.title}function C(x){return x.severity===a.AppNotificationSeverity.Warning||x.severity===a.AppNotificationSeverity.Error}function D(x){return typeof x=="object"&&x!==null&&"id"in x&&"icon"in x&&"title"in x&&"text"in x}function M(){const x=window.localStorage.getItem(r);if(!x)return{};const S=JSON.parse(x);return Object.values(S).every(I=>D(I))?S:{}}function P(x){const S=Object.values(x).filter(C).sort((I,T)=>T.timestamp-I.timestamp).slice(0,l).reduce((I,T)=>(I[T.id]={id:T.id,severity:T.severity,icon:T.icon,title:T.title,text:T.text,traceId:T.traceId,timestamp:T.timestamp,showing:!1},I),{});try{window.localStorage.setItem(r,JSON.stringify(S))}catch(I){console.error("Unable to persist notifications to local storage"),console.error(I)}}},71707:(J,R,e)=>{"use strict";e.d(R,{Lk:()=>u,OQ:()=>d,V4:()=>f,gd:()=>i});var n=e(77960),a=e(32688),l=e(20305);const r=a.config.bootData?.navTree??[];function o(c){return c.map(E=>{const p=E.children&&o(E.children);return{...E,children:p,text:(0,l.Y)(E.id)??E.text,subTitle:(0,l.L)(E.id)??E.subTitle,emptyMessage:(0,l.Y)(E.emptyMessageId)}})}const g="starred/",m=(0,n.oM)({name:"navBarTree",initialState:()=>o(a.config.bootData?.navTree??[]),reducers:{setStarred:(c,E)=>{const p=c.find(C=>C.id==="starred"),{id:h,title:y,url:s,isStarred:v}=E.payload;if(p)if(v){p.children||(p.children=[]);const C={id:g+h,text:y,url:s};p.children.push(C),p.children.sort((D,M)=>D.text.localeCompare(M.text))}else{const C=p.children?.findIndex(D=>D.id===g+h)??-1;C>-1&&p?.children?.splice(C,1)}},updateDashboardName:(c,E)=>{const{id:p,title:h,url:y}=E.payload,s=c.find(v=>v.id==="starred");if(s){const v=s.children?.find(C=>C.id===p);v&&(v.text=h,v.url=y,s.children?.sort((C,D)=>C.text.localeCompare(D.text)))}},removePluginFromNavTree:(c,E)=>{const p="plugin-page-"+E.payload.pluginID,h=c.findIndex(y=>y.id===p);h>-1&&c.splice(h,1)}}}),{setStarred:d,removePluginFromNavTree:u,updateDashboardName:i}=m.actions,f=m.reducer},12813:(J,R,e)=>{"use strict";e.d(R,{Cu:()=>m,G4:()=>p,H7:()=>c,Qz:()=>g,RL:()=>f});var n=e(77960),a=e(86832),l=e.n(a),r=e(50820),o=e(20305);const g="home";function m(){const h={},y=(0,a.cloneDeep)(r.default.bootData.navTree),s=y.find(C=>C.id===g),v=y.filter(C=>C.id!==g);return s&&d(h,[s]),d(h,v,h[g]),h}function d(h,y,s){const v=[];for(const C of y){const D={...C,text:(0,o.Y)(C.id)??C.text,subTitle:(0,o.L)(C.id)??C.subTitle,emptyMessage:(0,o.Y)(C.emptyMessageId),parentItem:s};D.id&&(h[D.id]=D),D.children&&d(h,D.children,D),v.push(D)}s&&(s.children=v),h["not-found"]={...u("Page not found","404 Error").node},h.error={...u("Page error","An unexpected error").node}}function u(h,y){const s={text:h,subTitle:y,icon:"exclamation-triangle"};return{node:s,main:s}}const i={},f=(0,n.PH)("navIndex/updateNavIndex"),c=(0,n.PH)("navIndex/updateConfigurationSubtitle"),E=(h,y)=>({...h,parentItem:{...h.parentItem,text:h.parentItem?.text??"",subTitle:y}}),p=(h=i,y)=>{if(f.match(y)){let v=function(M){if(M.children)for(const P of M.children)C[P.id]={...P,parentItem:M};M.parentItem&&v(M.parentItem)};var s=v;const C={},D=y.payload;return v(D),{...h,...C}}else if(c.match(y)){const v=`Organization: ${y.payload}`;return{...h,cfg:{...h.cfg,subTitle:v},datasources:E(h.datasources,v),correlations:E(h.correlations,v),users:E(h.users,v),teams:E(h.teams,v),plugins:E(h.plugins,v),"org-settings":E(h["org-settings"],v),apikeys:E(h.apikeys,v)}}return h}},45015:(J,R,e)=>{"use strict";e.d(R,{ht:()=>o,vw:()=>g});var n=e(23334),a=e(82744),l=e(12813);const r=()=>{const u={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:u,main:u}},o=(u,i,f,c=!1)=>{if(u[i]){const E=u[i],p=c?E:g(E),h=m(p,i);return{node:E,main:h}}return f||r()};function g(u){return(0,n.v)()&&u.id===a.y3?u:u.parentItem&&u.parentItem.id!==l.Qz?g(u.parentItem):u}function m(u,i){return u.id===i?{...u,active:!0}:u.children&&u.children.length>0?{...u,children:u.children.map(f=>m(f,i))}:u}const d=u=>`${u.main.text}${u.node.text?": "+u.node.text:""}`},88960:(J,R,e)=>{"use strict";e.d(R,{y:()=>a});var n=e(20367);class a{constructor(r){this.resourceUri=r}update(r){return n.ae.put(`/api/${this.resourceUri}/preferences`,r)}patch(r){return n.ae.patch(`/api/${this.resourceUri}/preferences`,r)}load(){return n.ae.get(`/api/${this.resourceUri}/preferences`)}}},20367:(J,R,e)=>{"use strict";e.d(R,{y$:()=>te,ae:()=>fe,i:()=>Te});var n=e(94082),a=e(23997),l=e(31312),r=e(36497),o=e(31544),g=e(8894),m=e(22605),d=e(22501),u=e(71476),i=e(84289),f=e(82696),c=e(90685),E=e(10752),p=e(79947),h=e(81595),y=e(12202),s=e(81698),v=e(52325),C=e(34032),D=e(71519),M=e(54721),P=e(70929),x=e(32688),S=e(28833),I=e(50820),T=e(23653),O=e(69617),A=e(41407),B=e(39953),b=e(82803),W=e(70393),V=e(7429),w=e(4919),K=e(64084),z=e(75250);const G=he=>{const me=(0,b.l4)(),ye=Q(me),ue=(0,z.J)(me),Oe=!!he.maxConcurrentSessions,Ue=()=>{window.location.reload()};return B.createElement(W.h_,null,B.createElement("div",{className:ue.modal},B.createElement(V.v,{title:"You have been automatically signed out",severity:"warning",className:ye.infobox},B.createElement("div",{className:ye.text},B.createElement("p",null,"Your session token was automatically revoked because you have reached",B.createElement("strong",null,` the maximum number of ${Oe?he.maxConcurrentSessions:""} concurrent sessions `),"for your account."),B.createElement("p",null,B.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),B.createElement(w.zx,{size:"md",variant:"primary",onClick:Ue},"Sign in"))),B.createElement("div",{className:(0,A.cx)(ue.modalBackdrop,ye.backdrop)}))},Q=(0,K.B)(he=>({infobox:(0,A.css)`
      margin-bottom: 0;
    `,text:(0,A.css)`
      margin: ${he.spacing(1,0,2)};
    `,backdrop:(0,A.css)`
      background-color: ${he.colors.background.canvas};
      opacity: 0.8;
    `}));var j=e(73431),F=e(5365),k=e(78354),_=(he=>(he[he.Pending=0]="Pending",he[he.InProgress=1]="InProgress",he[he.Done=2]="Done",he))(_||{});class Y{constructor(me=!1){this.state={},this.queue=new a.x,this.updates=new a.x,this.add=(ye,ue)=>this.queue.next({id:ye,options:ue,state:0}),this.setInProgress=ye=>this.queue.next({id:ye,state:1}),this.setDone=ye=>this.queue.next({id:ye,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=ye=>{const ue=Object.keys(ye).filter(Ue=>ye[Ue].state===1).length;return{noOfPending:Object.keys(ye).filter(Ue=>ye[Ue].state===0).length,noOfInProgress:ue,state:ye}},this.publishUpdate=(ye,ue)=>{this.printState(ye,ue),this.updates.next(ye)},this.printState=(ye,ue)=>{if(!ue)return;const Oe=Object.keys(ye.state).reduce((Ue,at)=>{const Ne={id:at,state:ye.state[at].state};return Ue.push(Ne),Ue},[]);console.log("FetchQueue noOfStarted",ye.noOfInProgress),console.log("FetchQueue noOfNotStarted",ye.noOfPending),console.log("FetchQueue state",Oe)},this.queue.subscribe(ye=>{const{id:ue,state:Oe,options:Ue}=ye;if(this.state[ue]||(this.state[ue]={state:0,options:{url:""}}),Oe===2){delete this.state[ue];const Ne=this.getUpdate(this.state);this.publishUpdate(Ne,me);return}this.state[ue].state=Oe,Ue&&(this.state[ue].options=Ue);const at=this.getUpdate(this.state);this.publishUpdate(at,me)})}}var Z=e(83639);class ae{constructor(me,ye,ue){const Oe=ue?.http2Enabled?1e3:5;me.getUpdates().pipe((0,h.h)(({noOfPending:Ue})=>Ue>0),(0,Z.b)(({state:Ue,noOfInProgress:at})=>{const Ne=Object.keys(Ue).filter(ze=>Ue[ze].state===_.Pending&&!(0,k.mu)(Ue[ze].options.url)).reduce((ze,je)=>{const Qe={id:je,options:Ue[je].options};return ze.push(Qe),ze},[]),_e=Object.keys(Ue).filter(ze=>Ue[ze].state===_.Pending&&(0,k.mu)(Ue[ze].options.url)).reduce((ze,je)=>{const Qe={id:je,options:Ue[je].options};return ze.push(Qe),ze},[]),Ke=Math.max(Oe-at-Ne.length,0),et=_e.slice(0,Ke);return Ne.concat(et)})).subscribe(({id:Ue,options:at})=>{ye.add(Ue,at)})}}class ce{constructor(me,ye){this.queue=new a.x,this.responses=new a.x,this.add=(ue,Oe)=>{this.queue.next({id:ue,options:Oe})},this.getResponses=ue=>this.responses.asObservable().pipe((0,h.h)(Oe=>Oe.id===ue)),this.queue.subscribe(ue=>{const{id:Oe,options:Ue}=ue;me.setInProgress(Oe),this.responses.next({id:Oe,observable:ye(Ue)})})}}var q=e(97125);const De="cancel_all_requests_request_id",oe="grafana-trace-id";class te{constructor(me){this.inFlightRequests=new a.x,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new a.x,this._tokenRotationInProgress=null,this.deviceID=null,this.dependencies={fromFetch:d.U,appEvents:S.Z,contextSrv:q.contextSrv,logout:()=>{q.contextSrv.setLoggedOut()}},me&&(this.dependencies={...this.dependencies,...me}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new Y,this.responseQueue=new ce(this.fetchQueue,this.internalFetch),this.initGrafanaDeviceID(),new ae(this.fetchQueue,this.responseQueue,(0,I.iE)())}async initGrafanaDeviceID(){if(x.config.buildInfo?.edition!==P.e.OpenSource)try{const ye=await(await n.ZP.load()).get();this.deviceID=ye.visitorId}catch(me){console.error(me)}}async request(me){return await(0,l.n)(this.fetch(me).pipe((0,u.U)(ye=>ye.data)))}fetch(me){const ye=(0,C.Z)(),ue=this.fetchQueue;return new r.y(Oe=>{const Ue=new o.w0;return Ue.add(this.responseQueue.getResponses(ye).subscribe(at=>{Ue.add(at.observable.subscribe(Oe))})),this.fetchQueue.add(ye,me),function(){ue.setDone(ye),Ue.unsubscribe()}})}internalFetch(me){me.requestId&&this.inFlightRequests.next(me.requestId),me=this.parseRequestOptions(me);const ye=(0,O.v)();return ye!==null&&ye!==""&&x.config.jwtUrlLogin&&x.config.jwtHeaderName&&(me.headers=me.headers??{},me.headers[x.config.jwtHeaderName]=`${ye}`),x.config.buildInfo?.edition!==P.e.OpenSource&&this.deviceID&&(me.headers=me.headers??{},me.headers["X-Grafana-Device-Id"]=`${this.deviceID}`),this.getFromFetchStream(me).pipe(this.handleStreamResponse(me),this.handleStreamError(me),this.handleStreamCancellation(me))}resolveCancelerIfExists(me){this.inFlightRequests.next(me)}cancelAllInFlightRequests(){this.inFlightRequests.next(De)}async datasourceRequest(me){return(0,l.n)(this.fetch(me))}parseRequestOptions(me){const ye=this.dependencies.contextSrv.user?.orgId;return me.retry=me.retry??0,(0,k.R8)(me.url)&&(ye&&(me.headers=me.headers??{},me.headers["X-Grafana-Org-Id"]=ye),me.url.startsWith("/")&&(me.url=me.url.substring(1)),me.headers?.Authorization&&(me.headers["X-DS-Authorization"]=me.headers.Authorization,delete me.headers.Authorization),this.noBackendCache&&(me.headers=me.headers??{},me.headers["X-Grafana-NoCache"]="true")),me.hideFromInspector===void 0&&(me.hideFromInspector=(0,k.R8)(me.url)&&!(0,k.mu)(me.url)),me}getFromFetchStream(me){const ye=(0,F.Xv)(me),ue=(0,F.nS)(me);return this.dependencies.fromFetch(ye,ue).pipe((0,i.z)(async Oe=>{const{status:Ue,statusText:at,ok:Ne,headers:_e,url:Ke,type:et,redirected:ze}=Oe,je=me.responseType??((0,F.rZ)(_e)?"json":void 0),Qe=await(0,F.aO)(Oe,je);return{status:Ue,statusText:at,ok:Ne,data:Qe,headers:_e,url:Ke,type:et,redirected:ze,config:me,traceId:Oe.headers.get(oe)??void 0}}))}showApplicationErrorAlert(me){}showSuccessAlert(me){const{config:ye}=me;if(ye.showSuccessAlert===!1||ye.showSuccessAlert===void 0&&(ye.method==="GET"||(0,k.mu)(ye.url)||!(0,k.R8)(ye.url)))return;const ue=me.data;ue?.message&&this.dependencies.appEvents.emit(D.SI.alertSuccess,[ue.message])}showErrorAlert(me,ye){if(me.showErrorAlert===!1||me.showErrorAlert===void 0&&((0,k.mu)(me.url)||!(0,k.R8)(me.url)))return;let ue="",Oe=ye.data.message;Oe==="Unexpected error"&&ye.message&&(Oe=ye.message),Oe.length>80&&(ue=Oe,Oe="Error"),ye.status===422&&(ue=ye.data.message,Oe="Validation failed"),this.dependencies.appEvents.emit(ye.status<500?D.SI.alertWarning:D.SI.alertError,[Oe,ue,ye.data.traceID])}processRequestError(me,ye){return ye.data=ye.data??{message:"Unexpected error"},typeof ye.data=="string"&&(ye.data={message:ye.data,error:ye.statusText,response:ye.data}),ye.data&&!ye.data.message&&typeof ye.data.error=="string"&&(ye.data.message=ye.data.error),ye.data.message&&setTimeout(()=>{ye.isHandled||this.showErrorAlert(me,ye)},50),this.inspectorStream.next(ye),ye}handleStreamResponse(me){return ye=>ye.pipe((0,u.U)(ue=>{if(!ue.ok){const{status:Oe,statusText:Ue,data:at}=ue;throw{status:Oe,statusText:Ue,data:at,config:me,traceId:ue.headers.get(oe)??void 0}}return ue}),(0,f.b)(ue=>{this.showSuccessAlert(ue),this.inspectorStream.next(ue)}))}handleStreamError(me){const{isSignedIn:ye}=this.dependencies.contextSrv.user;return ue=>ue.pipe((0,c.a)(Oe=>Oe.pipe((0,i.z)((Ue,at)=>{const Ne=at===0&&me.retry===0;if(Ue.status===401&&(0,k.R8)(me.url)&&Ne&&ye){if(Ue.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new j.Dn({component:G,props:{maxConcurrentSessions:Ue.data?.error?.maxConcurrentSessions}})),(0,g._)(()=>Ue);let _e=this.loginPing();const Ke=(0,T.D)()*1e3<Date.now();return x.config.featureToggles.clientTokenRotation&&Ke&&(_e=this.rotateToken()),(0,m.D)(_e).pipe((0,E.K)(et=>(et.status===401&&this.dependencies.logout(),(0,g._)(et))))}return(0,g._)(Ue)}))),(0,E.K)(Oe=>(0,g._)(()=>this.processRequestError(me,Oe))))}handleStreamCancellation(me){return ye=>ye.pipe((0,p.R)(this.inFlightRequests.pipe((0,h.h)(ue=>{let Oe=!1;return me&&me.requestId&&me.requestId===ue&&(Oe=!0),ue===De&&(Oe=!0),Oe}))),(0,y.T)(()=>({type:M.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:me})))}getInspectorStream(){return this.inspectorStream}async get(me,ye,ue,Oe){return this.request({...Oe,method:"GET",url:me,params:ye,requestId:ue})}async delete(me,ye,ue){return this.request({...ue,method:"DELETE",url:me,data:ye})}async post(me,ye,ue){return this.request({...ue,method:"POST",url:me,data:ye})}async patch(me,ye,ue){return this.request({...ue,method:"PATCH",url:me,data:ye})}async put(me,ye,ue){return this.request({...ue,method:"PUT",url:me,data:ye})}withNoBackendCache(me){return this.noBackendCache=!0,me().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this._tokenRotationInProgress?this._tokenRotationInProgress:(this._tokenRotationInProgress=this.fetch({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1}).pipe((0,s.x)(()=>{this._tokenRotationInProgress=null}),(0,v.B)()),this._tokenRotationInProgress)}loginPing(){return this.fetch({url:"/api/login/ping",method:"GET",retry:1})}search(me){return this.get("/api/search",me)}getDashboardByUid(me){return this.get(`/api/dashboards/uid/${me}`)}validateDashboard(me){const ye=JSON.stringify(me,ge,2);return this.request({method:"POST",url:"/api/dashboards/validate",data:{dashboard:ye},showSuccessAlert:!1,showErrorAlert:!1})}getPublicDashboardByUid(me){return this.get(`/api/public/dashboards/${me}`)}getFolderByUid(me,ye={}){const ue=new URLSearchParams;return ye.withAccessControl&&ue.set("accesscontrol","true"),this.get(`/api/folders/${me}?${ue.toString()}`,void 0,void 0,{showErrorAlert:!1})}}const fe=new te,Te=()=>fe;function ge(he,me){if(!(typeof me=="number"&&!Number.isFinite(me)))return me}},97125:(J,R,e)=>{"use strict";e.d(R,{Wg:()=>u,contextSrv:()=>c});var n=e(86832),a=e.n(n),l=e(81626),r=e(4148),o=e(13475),g=e(23653),m=e(57721),d=e(50820);const u="auto";class i{constructor(){this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},this.authenticatedBy="",d.default.bootData.user&&(0,n.extend)(this,d.default.bootData.user)}}class f{constructor(){this.sidemenuSmallBreakpoint=!1,this.tokenRotationJobId=0,d.default.bootData||(d.default.bootData={user:{},settings:{},navTree:[]}),this.user=new i,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=d.default.minRefreshInterval,this.scheduleTokenRotationJob()}async fetchUserPermissions(){try{this.user.permissions=await(0,r.i)().get("/api/access-control/user/actions",{reloadcache:!0})}catch(h){console.error(h)}}setLoggedOut(){this.cancelTokenRotationJob(),this.user.isSignedIn=!1,this.isSignedIn=!1,window.location.reload()}hasRole(h){return h==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===h}licensedAccessControlEnabled(){return(0,o.v)("accesscontrol")}hasPermissionInMetadata(h,y){return!!y.accessControl?.[h]}hasPermission(h){return!!this.user.permissions?.[h]}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(h){return!d.default.minRefreshInterval||h===u?!0:l.intervalToMs(h)>=l.intervalToMs(d.default.minRefreshInterval)}getValidInterval(h){return this.isAllowedInterval(h)?h:d.default.minRefreshInterval}getValidIntervals(h){return this.minRefreshInterval?h.filter(y=>y!=="").filter(this.isAllowedInterval):h}hasAccessToExplore(){return this.hasPermission(m.AccessControlAction.DataSourcesExplore)&&d.default.exploreEnabled}evaluatePermission(h){return h.some(y=>this.hasPermission(y))?[]:["Reject"]}scheduleTokenRotationJob(){if(this.canScheduleRotation()){let h=(0,g.D)(),s=(h-Math.floor(Math.random()*(20-1)+1))*1e3-Date.now();this.tokenRotationJobId=setTimeout(()=>{if((0,g.D)()>h){this.scheduleTokenRotationJob();return}this.rotateToken().then()},s)}}canScheduleRotation(){return!(!this.isSignedIn||!d.default.featureToggles.clientTokenRotation||(0,g.D)()===0)}cancelTokenRotationJob(){d.default.featureToggles.clientTokenRotation&&this.tokenRotationJobId>0&&clearTimeout(this.tokenRotationJobId)}rotateToken(){return fetch(d.default.appSubUrl+"/api/user/auth-tokens/rotate",{method:"POST"}).then(h=>{if(h.status===200){this.scheduleTokenRotationJob();return}if(h.status===401){this.setLoggedOut();return}}).catch(h=>{console.error(h)})}}let c=new f;const E=p=>{throw new Error("contextSrv can be only overridden in test environment")}},81583:(J,R,e)=>{"use strict";e.d(R,{Z:()=>d});var n=e(86832),a=e.n(n),l=e(4148),r=e(50820),o=e(23062);class g{constructor(){}addDashboardImpression(i){const f=this.impressionKey();let c=[];o.Z.exists(f)&&(c=JSON.parse(o.Z.get(f)),(0,n.isArray)(c)||(c=[])),c=c.filter(E=>i!==E),c.unshift(i),c.length>50&&c.pop(),o.Z.set(f,JSON.stringify(c))}async convertToUIDs(){let i=this.getImpressions();const f=(0,n.filter)(i,E=>(0,n.isNumber)(E));if(!f.length)return;const c=await(0,l.i)().get(`/api/dashboards/ids/${f.join(",")}`);o.Z.set(this.impressionKey(),JSON.stringify([...(0,n.filter)(i,E=>(0,n.isString)(E)),...c]))}getImpressions(){const i=o.Z.get(this.impressionKey())||"[]";return JSON.parse(i)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,n.filter)(this.getImpressions(),f=>(0,n.isString)(f))}impressionKey(){return"dashboard_impressions-"+r.default.bootData.user.orgId}}const d=new g},54977:(J,R,e)=>{"use strict";e.d(R,{L:()=>m,X:()=>d});var n=e(54112),a=e(77014),l=e(28833),r=e(50820),o=e(21308),g=e(88960);async function m(u,i){const f=r.config.theme2,c=(0,n.j)(u);if(l.Z.publish(new a.hD(c)),f.colors.mode!==c.colors.mode){const h=document.createElement("link");h.rel="stylesheet",h.href=r.config.bootData.themePaths[c.colors.mode],h.onload=()=>{const y=document.getElementsByTagName("link");for(let s=0;s<y.length;s++){const v=y[s];v.href&&v.href.includes(`build/grafana.${f.colors.mode}`)&&v.remove()}},document.head.insertBefore(h,document.head.firstChild)}if(i||!o.Vt.isSignedIn)return;const E=new g.y("user"),p=await E.load();await E.update({...p,theme:c.colors.mode})}async function d(u){const i=r.config.theme2;m(i.isDark?"light":"dark",u)}},23062:(J,R,e)=>{"use strict";e.d(R,{Z:()=>l});class n{get(o){return window.localStorage[o]}set(o,g){window.localStorage[o]=g}getBool(o,g){return g!==void 0&&!this.exists(o)?g:window.localStorage[o]==="true"}getObject(o,g){let m=g;if(this.exists(o)){const d=window.localStorage[o];try{m=JSON.parse(d)}catch(u){console.error(`Error parsing store object: ${o}. Returning default: ${g}. [${u}]`)}}return m}setObject(o,g){let m;try{m=JSON.stringify(g)}catch(d){throw new Error(`Could not stringify object: ${o}. [${d}]`)}try{this.set(o,m)}catch(d){const u=new Error(`Could not save item in localStorage: ${o}. [${d}]`);throw d instanceof Error&&(u.name=d.name),u}return!0}exists(o){return window.localStorage[o]!==void 0}delete(o){window.localStorage.removeItem(o)}}const l=new n},24796:(J,R,e)=>{"use strict";e.d(R,{W:()=>d,Z:()=>u});var n=e(86832),a=e.n(n),l=e(55705),r=e(83502);function o(i,f){if(!i)return!1;if(i[0]==="/"){const c=(0,l.jO)(i);return f.match(c)!=null}return i===f}function g(i){return i===0?.001:i/10}function m(i){return i?{colors:[{opacity:0},{opacity:i/10}]}:null}function d(i,f,c){for(let E=0;E<i.length;E++){const p=i[E],h=f.yaxes,y=p.yaxis||1,s=h[y-1],v=(0,r.Cf)(s.format);(0,n.isNumber)(f.decimals)?p.updateLegendValues(v,f.decimals):(0,n.isNumber)(s.decimals)?p.updateLegendValues(v,s.decimals+1):p.updateLegendValues(v,null)}}class u{constructor(f){this.datapoints=f.datapoints,this.label=f.alias,this.id=f.alias,this.alias=f.alias,this.aliasEscaped=(0,n.escape)(f.alias),this.color=f.color,this.bars={fillColor:f.color},this.valueFormater=(0,r.Cf)("none"),this.stats={},this.legend=!0,this.unit=f.unit,this.dataFrameIndex=f.dataFrameIndex,this.fieldIndex=f.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(f){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let c=0;c<f.length;c++){const E=f[c];o(E.alias,this.alias)&&(E.lines!==void 0&&(this.lines.show=E.lines),E.dashes!==void 0&&(this.dashes.show=E.dashes,this.lines.lineWidth=0),E.points!==void 0&&(this.points.show=E.points),E.bars!==void 0&&(this.bars.show=E.bars),E.fill!==void 0&&(this.lines.fill=g(E.fill)),E.fillGradient!==void 0&&(this.lines.fillColor=m(E.fillGradient)),E.stack!==void 0&&(this.stack=E.stack),E.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:E.linewidth,this.dashes.lineWidth=E.linewidth),E.dashLength!==void 0&&(this.dashes.dashLength[0]=E.dashLength),E.spaceLength!==void 0&&(this.dashes.dashLength[1]=E.spaceLength),E.nullPointMode!==void 0&&(this.nullPointMode=E.nullPointMode),E.pointradius!==void 0&&(this.points.radius=E.pointradius),E.steppedLine!==void 0&&(this.lines.steps=E.steppedLine),E.zindex!==void 0&&(this.zindex=E.zindex),E.fillBelowTo!==void 0&&(this.fillBelowTo=E.fillBelowTo),E.color!==void 0&&this.setColor(E.color),E.transform!==void 0&&(this.transform=E.transform),E.legend!==void 0&&(this.legend=E.legend),E.hideTooltip!==void 0&&(this.hideTooltip=E.hideTooltip),E.yaxis!==void 0&&(this.yaxis=E.yaxis),E.hiddenSeries!==void 0&&(this.hiddenSeries=E.hiddenSeries))}}getFlotPairs(f){const c=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const E=f==="connected",p=f==="null as zero";let h,y,s=0,v,C=0,D=!0;for(let M=0;M<this.datapoints.length;M++){if(y=this.datapoints[M][0],h=this.datapoints[M][1],v!==void 0){const P=h-v;P<this.stats.timeStep&&(this.stats.timeStep=P)}if(v=h,y===null){if(E)continue;p&&(y=0)}y!==null&&((0,n.isNumber)(y)&&(this.stats.total+=y,this.allIsNull=!1,s++),y>this.stats.max&&(this.stats.max=y),y<this.stats.min&&(this.stats.min=y),this.stats.first===null?this.stats.first=y:C>y?(D=!1,M===this.datapoints.length-1&&(this.stats.delta+=y)):(D?this.stats.delta+=y-C:this.stats.delta+=y,D=!0),C=y,y<this.stats.logmin&&y>0&&(this.stats.logmin=y),y!==0&&(this.allIsZero=!1)),c.push([h,y])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),c.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/s,this.stats.current=c[c.length-1][1],this.stats.current===null&&c.length>1&&(this.stats.current=c[c.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=c.length,c}updateLegendValues(f,c){this.valueFormater=f,this.decimals=c}formatValue(f){return(0,n.isFinite)(f)||(f=null),(0,r.zc)(this.valueFormater(f,this.decimals))}isMsResolutionNeeded(){for(let f=0;f<this.datapoints.length;f++)if(this.datapoints[f][1]!==null&&this.datapoints[f][1]!==void 0){const c=this.datapoints[f][1].toString();if(c.length===13&&c%1e3!==0)return!0}return!1}hideFromLegend(f){return!!(f.hideEmpty&&this.allIsNull||!this.legend||f.hideZero&&this.allIsZero)}setColor(f){this.color=f,this.bars.fillColor=f}}},21712:(J,R,e)=>{"use strict";e.d(R,{k:()=>r});var n=e(28425),a=e(32688);const l=a.config.bootData.settings.cspReportOnlyEnabled,r={createHTML:(o,g,m)=>l?(console.error("[HTML not sanitized with Trusted Types]",o,g,m),o):o.replace(/<script/gi,"&lt;script"),createScript:o=>o,createScriptURL:(o,g,m)=>l?(console.error("[ScriptURL not sanitized with Trusted Types]",o,g,m),o):n.QX.sanitizeUrl(o)};a.config.bootData.settings.trustedTypesDefaultPolicyEnabled&&window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",r)},3793:(J,R,e)=>{"use strict";e.d(R,{E:()=>u,f:()=>d});var n=e(39953),a=e(15166),l=e(54342),r=e(77014),o=e(32688),g=e(21308),m=e(8132);const d=({children:i,value:f})=>{const[c,E]=(0,n.useState)(f);return(0,n.useEffect)(()=>{const p=g.h$.subscribe(r.hD,h=>{o.config.theme2=h.payload,E(h.payload)});return()=>p.unsubscribe()},[]),n.createElement(l.N.Provider,{value:c},n.createElement(a.y,{baseColor:c.colors.background.secondary,highlightColor:c.colors.emphasize(c.colors.background.secondary),borderRadius:c.shape.radius.default},i))},u=(i,f)=>function(E){return n.createElement(d,{value:f},n.createElement(i,{...E}))}},84474:(J,R,e)=>{"use strict";e.d(R,{q:()=>n});class n extends window.Worker{constructor(l,r){const o=l.toString(),g=o.split("/");g.pop();const m=`${g.join("/")}/`,d=`importScripts('${o}');`,u=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${m}'; ${d}`],{type:"application/javascript"}));super(u,r),URL.revokeObjectURL(u)}}},26893:(J,R,e)=>{"use strict";e.d(R,{y:()=>n});function n(a={}){return{...a,accesscontrol:!0}}},17653:(J,R,e)=>{"use strict";e.d(R,{A:()=>n});function n(l){return l.map(a).sort((r,o)=>o.sortRank-r.sortRank||r.name.localeCompare(o.name))}function a(l){const r=l;return r.sortRank=0,r.userId>0?(r.name=r.userLogin,r.sortRank=10):r.teamId>0?(r.name=r.team,r.sortRank=20):r.role&&(r.icon="fa fa-fw fa-street-view",r.name=r.role,r.sortRank=30,r.role==="Editor"&&(r.sortRank+=1)),r.inherited&&(r.sortRank+=100),r}},38906:(J,R,e)=>{"use strict";e.d(R,{R:()=>n});const n=(a,l,r)=>(a.splice(r,0,a.splice(l,1)[0]),a)},23653:(J,R,e)=>{"use strict";e.d(R,{D:()=>n});function n(){const a=document.cookie.split("; ").find(r=>r.startsWith("grafana_session_expiry="));if(!a)return 0;let l=a.split("=").at(1);return l?parseInt(l,10):0}},10178:(J,R,e)=>{"use strict";e.d(R,{vl:()=>l});function n(){const r=navigator.userAgent.indexOf("MSIE")>-1,o=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,g=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,m=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),d=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return r&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||o&&(d&&parseFloat(d[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||g&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(m&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function a(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function l(){return a()?"cmd":"ctrl"}},14211:(J,R,e)=>{"use strict";e.d(R,{kJ:()=>l});class n{_linkTo(m,d){d<=0&&m.inputEdges.push(this),d>=0&&m.outputEdges.push(this),m.edges.push(this)}link(m,d){if(!m)throw Error("inputNode is required");if(!d)throw Error("outputNode is required");return this.unlink(),this.inputNode=m,this.outputNode=d,this._linkTo(m,1),this._linkTo(d,-1),this}unlink(){let m;const d=this.inputNode,u=this.outputNode;d&&u&&(m=d.edges.indexOf(this),m>-1&&d.edges.splice(m,1),m=u.edges.indexOf(this),m>-1&&u.edges.splice(m,1),m=d.outputEdges.indexOf(this),m>-1&&d.outputEdges.splice(m,1),m=u.inputEdges.indexOf(this),m>-1&&u.inputEdges.splice(m,1))}}class a{constructor(m){this.name=m,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(m){return m?typeof m=="object"?this.inputEdges.find(d=>d.inputNode?.name===m.name):this.inputEdges.find(d=>d.inputNode?.name===m):null}getEdgeTo(m){return m?typeof m=="object"?this.outputEdges.find(d=>d.outputNode?.name===m.name):this.outputEdges.find(d=>d.outputNode?.name===m):null}getOptimizedInputEdges(){const m=[];return this.inputEdges.forEach(d=>{d.inputNode?.inputEdges.map(i=>i.inputNode)?.forEach(i=>{const f=i?.getEdgeTo(this.name);f&&m.push(f)})}),this.inputEdges.filter(d=>m.indexOf(d)===-1)}}class l{constructor(){this.nodes={}}createNode(m){const d=new a(m);return this.nodes[m]=d,d}createNodes(m){const d=[];return m.forEach(u=>{d.push(this.createNode(u))}),d}link(m,d){let u=[],i=[];const f=[],c=[];m instanceof Array?u=m:u=[m],d instanceof Array?i=d:i=[d];for(let p=0;p<u.length;p++){const h=u[p];if(typeof h=="string"){const y=this.getNode(h);if(!y)throw Error(`cannot link input node named ${h} since it doesn't exist in graph`);f.push(y)}else f.push(h)}for(let p=0;p<i.length;p++){const h=i[p];if(typeof h=="string"){const y=this.getNode(h);if(!y)throw Error(`cannot link output node named ${h} since it doesn't exist in graph`);c.push(y)}else c.push(h)}const E=[];return f.forEach(p=>{c.forEach(h=>{E.push(this.createEdge().link(p,h))})}),E}descendants(m){if(!m.length)return new Set;const d=new Set(o(m)?m.map(u=>this.nodes[u]).filter(u=>u!==void 0):m);return this.descendantsRecursive(d)}descendantsRecursive(m,d=new Set){for(const u of m){const i=new Set;for(const{inputNode:f}of u.inputEdges)f&&!d.has(f)&&(d.add(f),i.add(f));this.descendantsRecursive(i,d)}return d}createEdge(){return new n}getNode(m){return this.nodes[m]}}const r=g=>{Object.keys(g.nodes).forEach(m=>{const d=g.nodes[m];let u=d.outputEdges.map(f=>f.outputNode?.name).join(", ");u||(u="<none>");let i=d.inputEdges.map(f=>f.inputNode?.name).join(", ");i||(i="<none>"),console.log(`${d.name}:
 - links to:   ${u}
 - links from: ${i}`)})};function o(g){return g.length>0&&typeof g[0]=="string"}},35358:(J,R,e)=>{"use strict";e.d(R,{i:()=>a});var n=e(4148);function a(l){if(typeof l=="string")return l;if(l){if(l instanceof Error)return l.message;if((0,n.kW)(l)){if(l.data&&l.data.message)return l.data.message;if(l.statusText)return l.statusText}}return JSON.stringify(l)}},44951:(J,R,e)=>{"use strict";e.d(R,{$$:()=>w,ET:()=>C,F3:()=>G,H6:()=>M,OQ:()=>K,Oy:()=>z,RZ:()=>Q,Xh:()=>I,Xk:()=>O,Z8:()=>B,Zf:()=>P,_Q:()=>V,as:()=>S,fR:()=>A,n9:()=>F,uC:()=>x,y_:()=>v,z0:()=>D,z_:()=>W});var n=e(77960),a=e(34032),l=e(34547),r=e(69307),o=e(96083),g=e(54554),m=e(81626),d=e(26205),u=e(82563),i=e(23062),f=e(29409),c=e(50820),E=e(78354);const p={dedupStrategy:l.Y4.none},h=100,y="grafana.explore.datasource",s=k=>`${y}.${k}`,v=k=>i.Z.getObject(s(k)),C=(k,_)=>i.Z.setObject(s(k),_);function D(){return(0,n.x0)(3)}async function M(k){const{queries:_,dsRef:Y,timeRange:Z,scopedVars:ae}=k;let ce=await(0,d.F)().get(Y),q=_.filter(oe=>oe.datasource?.uid!==f.Yq),De;if(ce){let oe={range:(0,r.R_)(Z.raw)};ce.interpolateVariablesInQueries?oe={...oe,datasource:ce.uid,queries:ce.interpolateVariablesInQueries(q,ae??{})}:oe={...oe,datasource:ce.uid,queries:q};const te=JSON.stringify({[D()]:oe});De=r.Cj.renderUrl("/explore",{panes:te,schemaVersion:1})}return De}function P(k,_,Y,Z,ae,ce,q){const De=_.reduce((ge,he)=>(ge+=he.key,ge),""),{interval:oe,intervalMs:te}=j(Z,Y.minInterval,Y.maxDataPoints),fe=`${De}`,Te={app:o.zj.Explore,timezone:ce||g.Ys,startTime:Date.now(),interval:oe,intervalMs:te,panelId:fe,targets:_,range:Z,requestId:"explore_"+k,rangeRaw:Z.raw,scopedVars:{__interval:{text:oe,value:oe},__interval_ms:{text:te,value:te},...q},maxDataPoints:Y.maxDataPoints,liveStreaming:Y.liveStreaming};return{queries:_,request:Te,scanning:ae,id:T(),done:!1}}const x=({key:k,..._})=>_,S=k=>{if(k)try{return JSON.parse(k)}catch(_){console.error(_)}},I=(k,_)=>{if(k==null)return"";try{return JSON.stringify(k,null,_)}catch(Y){console.error(Y)}return""};function T(k=0){return`Q-${(0,a.Z)()}-${k}`}async function O(k,_=0,Y){let Z,ae,ce;return Y?ae=Y:k.length>0&&k[k.length-1].datasource?ae=k[k.length-1].datasource:(Z=await(0,d.F)().get(),ce=Z.getDefaultQuery?.(o.zj.Explore),ae=Z.getRef()),Z||(Z=await(0,d.F)().get(ae),ce=Z.getDefaultQuery?.(o.zj.Explore)),{...ce,refId:(0,E.Hs)(k),key:T(_),datasource:ae}}const A=(k,_,Y=0)=>{const Z=T(Y),ae=k.refId||(0,E.Hs)(_);return{...k,refId:ae,key:Z}};async function B(k,_){if(k&&typeof k=="object"&&k.length>0){const Y=[];for(let Z=0;Z<k.length;Z++){const ae=k[Z],ce=T(Z);let q=ae.refId;q||(q=(0,E.Hs)(Y));let De=!0;if(ae.datasource)try{await(0,d.F)().get(ae.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),De=!1}De&&Y.push({...ae,refId:q,key:ce})}return Y}try{const Y=_??(await(0,d.F)().get()).getRef();return[await O(k??[],void 0,Y)]}catch{return[]}}const b=["refId","key","context","datasource"];function W(k){return k&&k.some(_=>Object.keys(_).filter(Z=>b.indexOf(Z)===-1).map(Z=>_[Z]).filter(Z=>Z).length>0)}function V(k,_,Y){const Z=Date.now();let ae=k;Y.forEach(q=>{ae=[{query:q,ts:Z},...ae]}),ae.length>h&&(ae=ae.slice(0,h));const ce=`grafana.explore.history.${_}`;try{return i.Z.setObject(ce,ae),ae}catch(q){return console.error(q),k}}const w=k=>k.reduce((Y,Z,ae)=>{const ce=Z.datasource?.uid||Z.key;return Y.concat(`${ce}-${ae}`)},[]),K=(k,_,Y)=>{let Z=m.convertRawToRange(_,k,Y);return Z.to.isBefore(Z.from)&&(Z=m.convertRawToRange({from:Z.raw.to,to:Z.raw.from},k,Y)),Z},z=k=>u.dP.isLive(k)?l.UV.Ascending:l.UV.Descending,G=k=>{let Y=`${window.location.protocol==="https:"?"wss://":"ws://"}${window.location.host}${c.config.appSubUrl}`;return Y.endsWith("/")&&(Y=Y.slice(0,-1)),`${Y}${k}`},Q=k=>{k&&k.unsubscribe()};function j(k,_,Y){return Y?m.calculateInterval(k,Y,_):{interval:"1s",intervalMs:1e3}}const F=k=>{const _=document.createElement("textarea");_.value=k,document.body.appendChild(_),_.select(),document.execCommand("copy"),document.body.removeChild(_)}},5365:(J,R,e)=>{"use strict";e.d(R,{Xv:()=>y,aO:()=>p,nS:()=>r,rZ:()=>c,tW:()=>h});var n=e(86832),a=e.n(n),l=e(14255);const r=v=>{const C=v.method,D=f(v),M=c(D),P=E(v,M),x=s(v);return{method:C,headers:D,body:P,credentials:x}},o={canParse:()=>!0,parse:v=>(v.get("accept")||v.set("accept","application/json, text/plain, */*"),v)},g=v=>({canParse:C=>(C?.method?C?.method.toLowerCase():"")===v,parse:C=>(C.get("content-type")||C.set("content-type","application/json"),C)}),m=g("post"),d=g("put"),u=g("patch"),i=[m,d,u,o],f=v=>{const C=v?.headers?new Headers(v.headers):new Headers;return i.filter(P=>P.canParse(v)).reduce((P,x)=>x.parse(P),C)},c=v=>{if(!v)return!1;const C=v.get("content-type");return!!(C&&C.toLowerCase()==="application/json")},E=(v,C)=>v&&(!v.data||typeof v.data=="string"||v.data instanceof Blob?v.data:C?JSON.stringify(v.data):new URLSearchParams(v.data));async function p(v,C){if(C)switch(C){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"json":return v.headers.get("Content-Length")==="0"?(console.warn(`${v.url} returned an invalid JSON`),{}):await v.json();case"text":return v.text()}const D=await v.text();try{return JSON.parse(D)}catch{}return D}function h(v){return Object.keys(v).map(C=>{const D=v[C];return Array.isArray(D)?D.map(M=>`${encodeURIComponent(C)}=${encodeURIComponent(M)}`).join("&"):`${encodeURIComponent(C)}=${encodeURIComponent(D)}`}).join("&")}const y=v=>{const C=(0,n.omitBy)(v.params,M=>M===void 0||M&&M.length===0),D=h(C);return v.params&&D.length?`${v.url}?${D}`:v.url},s=v=>v&&(v.credentials?v.credentials:v.withCredentials?((0,l.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin")},57804:(J,R,e)=>{"use strict";e.r(R),e.d(R,{default:()=>n});function n(a,l){l=l||{};const r=l.delimiter||".";let o=l.maxDepth||3,g=1;const m={};function d(u,i){Object.keys(u).forEach(f=>{const c=u[f],E=l?.safe&&Array.isArray(c),h=Object.prototype.toString.call(c)==="[object Object]",y=i?i+r+f:f;if(l?.maxDepth||(o=g+1),!E&&h&&Object.keys(c).length&&g<o)return++g,d(c,y);m[y]=c})}return d(a,null),m}},8741:(J,R,e)=>{"use strict";e.d(R,{Z:()=>m});var n=e(14255),a=e(55705),l=e(81626),r=e(83502);const g={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:d=>((0,n.d)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,a.yI)(d)),roundInterval:d=>((0,n.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),l.roundInterval(d)),secondsToHms:d=>((0,n.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),l.secondsToHms(d)),secondsToHhmmss:d=>{const u=[],i=Math.floor(d/3600),f=Math.floor(d%3600/60),c=Math.floor(d%3600%60);return i>9?u.push(""+i):u.push("0"+i),f>9?u.push(""+f):u.push("0"+f),c>9?u.push(""+c):u.push("0"+c),u.join(":")},toPercent:(d,u)=>Math.floor(d/u*1e4)/100+"%",addSlashes:d=>d.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:d=>((0,n.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),l.describeInterval(d)),intervalToSeconds:d=>((0,n.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),l.intervalToSeconds(d)),intervalToMs:d=>((0,n.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),l.intervalToMs(d)),calculateInterval:(d,u,i)=>((0,n.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),l.calculateInterval(d,u,i)),queryColorDot:(d,u)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+d,"font-size:"+u+"px"].join(";")+'"></div>',slugifyForUrl:d=>d.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:d=>((0,n.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,a.jO)(d)),toFixed:(d,u)=>{if(d===null)return"";const i=u?Math.pow(10,Math.max(0,u)):1,f=String(Math.round(d*i)/i);if(f.indexOf("e")!==-1||d===0)return f;if(u!=null){const c=f.indexOf("."),E=c===-1?0:f.length-c-1;if(E<u)return(E?f:f+".")+String(i).slice(1,u-E+1)}return f},toFixedScaled:(d,u,i,f,c)=>i===null?g.toFixed(d,u)+c:g.toFixed(d,i+f)+c,roundValue:(d,u)=>{if(d===null)return null;const i=Math.pow(10,u),f=(i*d).toFixed(u);return Math.round(parseFloat(f))/i},getUnitFormats:r.QW};typeof Proxy<"u"?g.valueFormats=new Proxy(g.valueFormats,{get(d,u,i){if(typeof u!="string")throw{message:`Value format ${String(u)} is not a string`};const f=(0,r.Cf)(u);return f?(c,E,p,h)=>(0,r.zc)(f(c,E,p,h?"utc":"browser")):Reflect.get(d,u,i)}}):g.valueFormats=(0,r.Td)();const m=g},20305:(J,R,e)=>{"use strict";e.d(R,{L:()=>l,Y:()=>a});var n=e(62679);function a(r){switch(r){case"home":return(0,n.t)("nav.home.title","Home");case"new":return(0,n.t)("nav.new.title","New");case"create":return(0,n.t)("nav.create.title","Create");case"create-dashboard":return(0,n.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,n.t)("nav.create-folder.title","Folder");case"import":return(0,n.t)("nav.create-import.title","Import dashboard");case"alert":return(0,n.t)("nav.create-alert.title","Create alert rule");case"starred":return(0,n.t)("nav.starred.title","Starred");case"starred-empty":return(0,n.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,n.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return(0,n.t)("nav.dashboards.title","Dashboards");case"dashboards/playlists":return(0,n.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.title","Library panels");case"reports":return(0,n.t)("nav.reporting.title","Reporting");case"dashboards/public":return(0,n.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,n.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,n.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,n.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,n.t)("nav.scenes.title","Scenes");case"explore":return(0,n.t)("nav.explore.title","Explore");case"alerting":return(0,n.t)("nav.alerting.title","Alerting");case"plugin-page-grafana-oncall-app":return(0,n.t)("nav.oncall.title","OnCall");case"alerting-legacy":return(0,n.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alert-home":return(0,n.t)("nav.alerting-home.title","Home");case"alert-list":return(0,n.t)("nav.alerting-list.title","Alert rules");case"receivers":return(0,n.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,n.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,n.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,n.t)("nav.alerting-silences.title","Silences");case"groups":return(0,n.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,n.t)("nav.alerting-admin.title","Admin");case"cfg":return(0,n.t)("nav.config.title","Administration");case"cfg/general":return(0,n.t)("nav.config-general.title","General");case"cfg/plugins":return(0,n.t)("nav.config-plugins.title","Plugins and data");case"cfg/access":return(0,n.t)("nav.config-access.title","Users and access");case"datasources":return(0,n.t)("nav.datasources.title","Data sources");case"authentication":return(0,n.t)("nav.authentication.title","Authentication");case"licensing":return(0,n.t)("nav.statistics-and-licensing.title","Statistics and licensing");case"recordedQueries":return(0,n.t)("nav.recorded-queries.title","Recorded queries");case"correlations":return(0,n.t)("nav.correlations.title","Correlations");case"users":return(0,n.t)("nav.users.title","Users");case"teams":return(0,n.t)("nav.teams.title","Teams");case"plugins":return(0,n.t)("nav.plugins.title","Plugins");case"org-settings":return(0,n.t)("nav.org-settings.title","Default preferences");case"apikeys":return(0,n.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,n.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,n.t)("nav.admin.title","Server admin");case"support-bundles":return(0,n.t)("nav.support-bundles.title","Support bundles");case"global-users":return(0,n.t)("nav.global-users.title","Users");case"global-orgs":return(0,n.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,n.t)("nav.server-settings.title","Settings");case"storage":return(0,n.t)("nav.storage.title","Storage");case"upgrading":return(0,n.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,n.t)("nav.monitoring.title","Observability");case"apps":return(0,n.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"plugin-page-grafana-incident-app":return(0,n.t)("nav.incidents.title","Incidents");case"plugin-page-grafana-ml-app":return(0,n.t)("nav.machine-learning.title","Machine learning");case"plugin-page-grafana-slo-app":return(0,n.t)("nav.slo.title","SLO");case"plugin-page-k6-app":return(0,n.t)("nav.performance-testing.title","Performance testing");case"monitoring":return(0,n.t)("nav.observability.title","Observability");case"plugin-page-grafana-k8s-app":return(0,n.t)("nav.kubernetes.title","Kubernetes");case"plugin-page-grafana-app-observability-app":return(0,n.t)("nav.application.title","Application (preview)");case"plugin-page-grafana-pyroscope-app":return(0,n.t)("nav.profiles.title","Profiles");case"plugin-page-grafana-kowalski-app":return(0,n.t)("nav.frontend.title","Frontend");case"plugin-page-grafana-synthetic-monitoring-app":return(0,n.t)("nav.synthetics.title","Synthetics");case"help":return(0,n.t)("nav.help.title","Help");case"profile/settings":return(0,n.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,n.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,n.t)("nav.profile/password.title","Change password");case"sign-out":return(0,n.t)("nav.sign-out.title","Sign out");case"search":return(0,n.t)("nav.search-dashboards.title","Search dashboards");case"connections":return(0,n.t)("nav.connections.title","Connections");case"connections-add-new-connection":return(0,n.t)("nav.add-new-connections.title","Add new connection");case"connections-datasources":return(0,n.t)("nav.data-sources.title","Data sources");case"standalone-plugin-page-/connections/infrastructure":return(0,n.t)("nav.infrastructure.title","Integrations");case"standalone-plugin-page-/connections/connect-data":return(0,n.t)("nav.connect-data.title","Connect data");case"plugin-page-grafana-detect-app":return(0,n.t)("nav.detect.title","Detect");case"plugin-page-grafana-quaderno-app":return(0,n.t)("nav.grafana-quaderno.title","Grafana Quaderno");default:return}}function l(r){switch(r){case"dashboards":return(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"manage-folder":return(0,n.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,n.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,n.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alert-list":return(0,n.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,n.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,n.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,n.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,n.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,n.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,n.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,n.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,n.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,n.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,n.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,n.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,n.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,n.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,n.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,n.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,n.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,n.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return(0,n.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses");case"cfg/general":return(0,n.t)("nav.config-general.subtitle","Manage default preferences and settings across Grafana");case"cfg/plugins":return(0,n.t)("nav.config-plugins.subtitle","Install plugins and define the relationships between data");case"cfg/access":return(0,n.t)("nav.config-access.subtitle","Configure access for individual users, teams, and service accounts");case"apps":return(0,n.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,n.t)("nav.monitoring.subtitle","Monitoring and infrastructure apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");case"connections-add-new-connection":return(0,n.t)("nav.connections.subtitle","Browse and create new connections");case"connections-datasources":return(0,n.t)("nav.data-sources.subtitle","View and manage your connected data source connections");default:return}}},27554:(J,R,e)=>{"use strict";e.d(R,{M:()=>l});var n=e(86832),a=e.n(n);function l(r){return(0,n.isArray)(r)?r.map(l):(0,n.isPlainObject)(r)?Object.keys(r).sort().reduce((o,g)=>{const m=r[g];return m!=null&&(o[g]=l(m)),o},{}):r}},78354:(J,R,e)=>{"use strict";e.d(R,{DI:()=>l,Hs:()=>n,R8:()=>o,mu:()=>r,sB:()=>m,vH:()=>a});const n=d=>{for(let u=0;;u++){const i=g(u);if(!d.some(f=>f.refId===i))return i}};function a(d){const u=["refId","hide","key","queryType","datasource"];for(const i in d)if(i!=="label"&&!u.includes(i))return!1;return!0}function l(d,u,i){const f={...u,refId:n(d),hide:!1};return!f.datasource&&i&&(f.datasource=i),[...d,f]}function r(d){return d.indexOf("api/datasources/proxy")!==-1||d.indexOf("api/ds/query")!==-1}function o(d){return!d.match(/^http/)}function g(d){const u="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return d<u.length?u[d]:g(Math.floor(d/u.length)-1)+u[d%u.length]}function m(d){return d||void 0}},25999:(J,R,e)=>{"use strict";e.d(R,{As:()=>f.A,DR:()=>O,HK:()=>y,OH:()=>I,VI:()=>s,au:()=>c,bQ:()=>M,di:()=>h,gt:()=>v,k4:()=>T,kg:()=>p,t2:()=>D,ub:()=>E,y9:()=>C});var n=e(86832),a=e.n(n),l=e(69307),r=e(48069),o=e(26205),g=e(97316),m=e(90634),d=e(74600),u=e(91013),i=e(55284),f=e(17254);async function c(B,b,W,V,w,K,z){const G=W&&W.filter(Q=>A(Q));if(G.length>0){let Q=!1,j=!1,F;try{F=(await(0,i.b)().addToRichHistory({datasourceUid:B,datasourceName:b??"",queries:G,starred:V,comment:w??""})).warning}catch(k){return k instanceof Error&&(k.name===u.j.StorageFull?(Q=!0,K&&(0,d.WI)((0,g.$l)((0,m.t_)(k.message)))):k.name!==u.j.DuplicatedEntry&&(0,d.WI)((0,g.$l)((0,m.t_)("Rich History update failed",k.message)))),{richHistoryStorageFull:Q,limitExceeded:j}}return F&&F.type===u.V.LimitExceeded&&(j=!0,z&&(0,d.WI)((0,g.$l)((0,m.ZR)(F.message)))),{richHistoryStorageFull:Q,limitExceeded:j}}return{}}async function E(B){return await(0,i.b)().getRichHistory(B)}async function p(B){await(0,i.b)().updateSettings(B)}async function h(){return await(0,i.b)().getSettings()}async function y(){return(0,i.b)().deleteAll()}async function s(B,b){try{return await(0,i.b)().updateStarred(B,b)}catch(W){W instanceof Error&&(0,d.WI)((0,g.$l)((0,m.t_)("Saving rich history failed",W.message)));return}}async function v(B,b){try{return await(0,i.b)().updateComment(B,b)}catch(W){W instanceof Error&&(0,d.WI)((0,g.$l)((0,m.t_)("Saving rich history failed",W.message)));return}}async function C(B){try{return await(0,i.b)().deleteRichHistory(B),B}catch(b){b instanceof Error&&(0,d.WI)((0,g.$l)((0,m.t_)("Saving rich history failed",b.message)));return}}const D=B=>{const b={range:{from:"now-1h",to:"now"},datasource:B.datasourceName,queries:B.queries},W=(0,l.S)(b),V=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return l.Cj.renderUrl(`${V}/explore`,{left:W})},M=B=>{let b;switch(B){case 0:b="today";break;case 1:b="yesterday";break;case 7:b="a week ago";break;case 14:b="two weeks ago";break;default:b=`${B} days ago`}return b};function P(B){return(0,r.dq)(B,{format:"MMMM D"})}function x(B){const b=(0,n.omit)(B,["key","refId","datasource"]);return JSON.stringify(b)}function S(B,b){let W="";return b===f.A.DatasourceAZ||b===f.A.DatasourceZA?W=B.datasourceName:W=P(B.createdAt),W}function I(B,b){return b?.getQueryDisplayText?b.getQueryDisplayText(B):x(B)}function T(B,b){let W={};return B.forEach(V=>{let w=S(V,b);w in W?W[w]=[...W[w],V]:W[w]=[V]}),W}function O(){return(0,o.F)().getList({mixed:!0}).map(B=>({name:B.name,uid:B.uid}))}function A(B){const b=(0,n.omit)(B,["key","refId","datasource"]);return Object.keys(b).length>0}},17254:(J,R,e)=>{"use strict";e.d(R,{A:()=>n});var n=(a=>(a.Descending="Descending",a.Ascending="Ascending",a.DatasourceAZ="Datasource A-Z",a.DatasourceZA="Datasource Z-A",a))(n||{})},37965:(J,R,e)=>{"use strict";e.d(R,{D:()=>i,L:()=>f});var n=e(16360),a=e(32688),l=e(4148),r=e(97316),o=e(90634),g=e(74600),m=e(44951);function d(){return`${window.location.protocol}//${window.location.host}${a.config.appSubUrl}`}function u(c){let E=c.replace(d(),"");return E.startsWith("/")?E.substring(1,E.length):E}const i=(0,n.Z)(async function(c){try{return(await(0,l.i)().post("/api/short-urls",{path:u(c)})).url}catch(E){console.error("Error when creating shortened link: ",E),(0,g.WI)((0,r.$l)((0,o.t_)("Error generating shortened link")))}}),f=async c=>{const E=await i(c);E?((0,m.n9)(E),(0,g.WI)((0,r.$l)((0,o.AT)("Shortened link copied to clipboard")))):(0,g.WI)((0,r.$l)((0,o.t_)("Error generating shortened link")))}},38533:(J,R,e)=>{"use strict";e.r(R),e.d(R,{getFlotRange:()=>r,getFlotTickDecimals:()=>o,getFlotTickSize:()=>l,getPrecision:()=>d,getScaledDecimals:()=>a,getStringPrecision:()=>u,grafanaTimeFormat:()=>g,logp:()=>m,tickStep:()=>n});function n(i,f,c){const E=Math.sqrt(50),p=Math.sqrt(10),h=Math.sqrt(2),y=Math.abs(f-i)/Math.max(0,c);let s=Math.pow(10,Math.floor(Math.log(y)/Math.LN10));const v=y/s;return v>=E?s*=10:v>=p?s*=5:v>=h&&(s*=2),f<i?-s:s}function a(i,f){return i-Math.floor(Math.log(f)/Math.LN10)}function l(i,f,c,E){const p=(f-i)/c;let h=-Math.floor(Math.log(p)/Math.LN10);const y=E,s=Math.pow(10,-h),v=p/s;let C;return v<1.5?C=1:v<3?(C=2,v>2.25&&(y==null||h+1<=y)&&(C=2.5,++h)):v<7.5?C=5:C=10,C*=s,C}function r(i,f,c,E){let h=+(i??c),y=+(f??E);const s=y-h;if(s===0){const C=Math.abs(y===0?1:y*.25);i===null&&(h-=C),(f==null||i!=null)&&(y+=C)}else i==null&&(h-=s*.02,h<0&&c!=null&&c>=0&&(h=0)),f==null&&(y+=s*.02,y>0&&E!=null&&E<=0&&(y=0));return{min:h,max:y}}function o(i,f,c,E){const{min:p,max:h}=r(c.min,c.max,i,f),y=.3*Math.sqrt(E),s=(h-p)/y,v=-Math.floor(Math.log(s)/Math.LN10),C=Math.pow(10,-v),D=s/C;let M;D<1.5?M=1:D<3?(M=2,D>2.25&&(M=2.5)):D<7.5?M=5:M=10,M*=C;const P=Math.max(0,-Math.floor(Math.log(s)/Math.LN10)+1),x=P-Math.floor(Math.log(M)/Math.LN10);return{tickDecimals:P,scaledDecimals:x}}function g(i,f,c){if(f&&c&&i){const E=c-f,p=E/i/1e3,h=864e5,y=31536e6;return p<=45?"HH:mm:ss":p<=7200||E<=h?"HH:mm":p<=8e4?"MM/DD HH:mm":p<=2419200||E<=y?"MM/DD":"YYYY-MM"}return"HH:mm"}function m(i,f){return Math.log(i)/Math.log(f)}function d(i){const f=i.toString();return u(f)}function u(i){if(isNaN(i))return 0;const f=i.indexOf(".");return f===-1?0:i.length-f-1}},56858:(J,R,e)=>{"use strict";e.d(R,{e:()=>a,h:()=>l});var n=e(92403);const a=(r,o)=>{const g={from:(0,n.zh)(o.from),to:(0,n.zh)(o.to)},m=(g.to.valueOf()-g.from.valueOf())/2;let d,u;return r===-1?(d=g.to.valueOf()-m,u=g.from.valueOf()-m):r===1?(d=g.to.valueOf()+m,u=g.from.valueOf()+m,d>Date.now()&&g.to.valueOf()<Date.now()&&(d=Date.now(),u=g.from.valueOf())):(d=g.to.valueOf(),u=g.from.valueOf()),{from:u,to:d}},l=(r,o)=>{const g=r.to.valueOf()-r.from.valueOf(),m=r.to.valueOf()-g/2,d=g===0?3e4:g*o,u=m+d/2;return{from:m-d/2,to:u}}},85926:(J,R,e)=>{"use strict";e.d(R,{q7:()=>a});var n=e(92403);function a(o,g){if(!(o.fromDayOfWeek||o.from)&&!(o.toDayOfWeek||o.to))return[];const m={...o};m.from&&!m.to&&(m.to=m.from),!m.from&&m.to&&(m.from=m.to);const d={from:l(m.from),to:l(m.to)};if(!m.fromDayOfWeek&&m.toDayOfWeek&&(m.fromDayOfWeek=m.toDayOfWeek),!m.toDayOfWeek&&m.fromDayOfWeek&&(m.toDayOfWeek=m.fromDayOfWeek),m.fromDayOfWeek&&(d.from.dayOfWeek=Number(m.fromDayOfWeek)),m.toDayOfWeek&&(d.to.dayOfWeek=Number(m.toDayOfWeek)),d.from.dayOfWeek&&d.from.h==null&&d.from.m==null&&(d.from.h=0,d.from.m=0,d.from.s=0),d.to.dayOfWeek&&d.to.h==null&&d.to.m==null&&(d.to.h=23,d.to.m=59,d.to.s=59),!d.from||!d.to)return[];d.from.h==null&&(d.from.h=0),d.to.h==null&&(d.to.h=23);const u=[],i=(0,n.CQ)(g.from).utc();for(i.set("hour",0),i.set("minute",0),i.set("second",0),i.set("millisecond",0),i.add(d.from.h,"hours"),i.add(d.from.m,"minutes"),i.add(d.from.s,"seconds");i.unix()<=g.to.unix();){for(;d.from.dayOfWeek&&d.from.dayOfWeek!==i.isoWeekday();)i.add(24,"hours");if(i.unix()>g.to.unix())break;const f=(0,n.CQ)(i).utc();if(f.hour)if(d.from.h<=d.to.h)f.add(d.to.h-d.from.h,"hours");else if(d.from.h>d.to.h)for(;f.hour()!==d.to.h;)f.add(1,"hours");else for(f.add(24-d.from.h,"hours");f.hour()!==d.to.h;)f.add(1,"hours");for(f.set("minute",d.to.m??0),f.set("second",d.to.s??0);d.to.dayOfWeek&&d.to.dayOfWeek!==f.isoWeekday();)f.add(24,"hours");i.unix()<g.from.unix()&&f.unix()<g.from.unix()||i.unix()>g.to.unix()&&f.unix()>g.to.unix()||u.push({from:i.valueOf(),to:f.valueOf()}),i.add(24,"hours")}return u}function l(o){const g={};if(!o?.length)return g;const m=o.split(":");return m?.length&&(g.h=Math.min(23,Math.max(0,Number(m[0]))),m.length>1&&(g.m=Math.min(60,Math.max(0,Number(m[1]))),m.length>2&&(g.s=Math.min(60,Math.max(0,Number(m[2])))))),g}function r(o){if(!o||o.h==null&&o.m==null&&o.s==null)return"";let g=String(o.h??0).padStart(2,"0")+":"+String(o.m??0).padStart(2,"0");return o.s!=null&&(g+=String(o.s??0).padStart(2,"0")),g}},68586:(J,R,e)=>{"use strict";e.d(R,{et:()=>r,fy:()=>g,nO:()=>o,np:()=>d});var n=e(7906),a=e(2221),l=e(89591);function r(u){return u.sort((f,c)=>f[0]-c[0]),u.reduce((f,c)=>{if(!f.length)return[c];const E=f.slice(-1)[0],[p,h]=E,[y,s]=c;return s<h?f:y>h?[...f,c]:[...f.slice(0,-1),[p,s]]},[]).reduce((f,c)=>f+(c[1]-c[0]),0)}function o(u){const i={};let f;for(let c=0;f=u(c),!!f;c++){i[f.id]?i[f.id].span=f.span:i[f.id]={span:f.span,children:[]};for(const E of f.parentIds)E&&(i[E]?i[E].children.push(f.id):i[E]={span:void 0,children:[f.id]})}return i}function g(u,i,f){return{main:`${m(u)}ms (${m(u/i*100)}%)`,secondary:`${m(f)}ms (${m(f/u*100)}%)`}}function m(u){return parseFloat(u.toFixed(2))}function d(){const u=new n.v({fields:[{name:a.z.id,type:l.fS.string},{name:a.z.title,type:l.fS.string},{name:a.z.subTitle,type:l.fS.string},{name:a.z.mainStat,type:l.fS.string,config:{displayName:"Total time (% of trace)"}},{name:a.z.secondaryStat,type:l.fS.string,config:{displayName:"Self time (% of total)"}},{name:a.z.color,type:l.fS.number,config:{color:{mode:"continuous-GrYlRd"},displayName:"Self time / Trace duration"}}],meta:{preferredVisualisationType:"nodeGraph"}}),i=new n.v({fields:[{name:a.z.id,type:l.fS.string},{name:a.z.target,type:l.fS.string},{name:a.z.source,type:l.fS.string}],meta:{preferredVisualisationType:"nodeGraph"}});return[u,i]}},69617:(J,R,e)=>{"use strict";e.d(R,{v:()=>a});let n="";const a=()=>{const r=new URLSearchParams(window.location.search).get("auth_token");return r!==null&&r!==""?(n=r,r):n}},79779:(J,R,e)=>{"use strict";e.d(R,{ep:()=>o,f$:()=>d,sF:()=>g,xW:()=>m});var n=e(91986),a=e(31312),l=e(4148);const r=({baseUrl:u})=>async({url:i,method:f="GET",body:c})=>{try{const{data:E}=await(0,a.n)((0,l.i)().fetch({url:u+i,method:f,data:c}));return{data:E}}catch(E){return{error:E}}},o=(0,n.LC)({reducerPath:"togglesApi",baseQuery:r({baseUrl:"/api"}),endpoints:u=>({getManagerState:u.query({query:()=>({url:"/featuremgmt/state"})}),getFeatureToggles:u.query({query:()=>({url:"/featuremgmt"})}),updateFeatureToggles:u.mutation({query:i=>({url:"/featuremgmt",method:"POST",body:{featureToggles:i}})})})}),{useGetManagerStateQuery:g,useGetFeatureTogglesQuery:m,useUpdateFeatureTogglesMutation:d}=o},65741:(J,R,e)=>{"use strict";e.d(R,{A:()=>o});var n=e(39953),a=e(24275),l=e(9558);const r=Object.keys(a.B).map(g=>({label:g,value:g}));function o({value:g,onChange:m,"aria-label":d,inputId:u,autoFocus:i,...f}){return n.createElement(l.Ph,{inputId:u,value:g,options:r,onChange:c=>m(c.value),placeholder:"Choose role...","aria-label":d,autoFocus:i,...f})}},88480:(J,R,e)=>{"use strict";e.d(R,{B9:()=>y,CP:()=>A,Dx:()=>s,Fm:()=>T,IS:()=>V,Jk:()=>P,M6:()=>Q,Nq:()=>p,PK:()=>c,R5:()=>G,V0:()=>W,Xx:()=>C,Y3:()=>B,_1:()=>I,bN:()=>M,b_:()=>b,h8:()=>v,j4:()=>O,nt:()=>F,oO:()=>j,tQ:()=>h,uV:()=>x,uh:()=>K});var n=e(86832),a=e.n(n),l=e(48069),r=e(13475),o=e(4148),g=e(13601),m=e(50820),d=e(21308),u=e(26893),i=e(57721),f=e(3818);function c(k){return async _=>{try{_((0,f.UA)(!1)),await _(E(k)),await _(D(k)),await _(S(k)),m.default.ldapEnabled&&(0,r.v)("ldapsync")&&await _(O()),_((0,f.UA)(!0))}catch(Y){if(console.error(Y),(0,o.kW)(Y)){const Z={title:Y.data.message,body:Y.data.error};_((0,f.sL)(Z))}}}}function E(k){return async _=>{const Y=await(0,o.i)().get(`/api/users/${k}`,(0,u.y)());_((0,f.pm)(Y))}}function p(k){return async _=>{await(0,o.i)().put(`/api/users/${k.id}`,k),_(c(k.id))}}function h(k,_){return async Y=>{const Z={password:_};await(0,o.i)().put(`/api/admin/users/${k}/password`,Z),Y(c(k))}}function y(k){return async _=>{await(0,o.i)().post(`/api/admin/users/${k}/disable`),g.E1.push("/admin/users")}}function s(k){return async _=>{await(0,o.i)().post(`/api/admin/users/${k}/enable`),_(c(k))}}function v(k){return async _=>{await(0,o.i)().delete(`/api/admin/users/${k}`),g.E1.push("/admin/users")}}function C(k,_){return async Y=>{const Z={isGrafanaAdmin:_};await(0,o.i)().put(`/api/admin/users/${k}/permissions`,Z),Y(c(k))}}function D(k){return async _=>{const Y=await(0,o.i)().get(`/api/users/${k}/orgs`);_((0,f.fm)(Y))}}function M(k,_,Y){return async Z=>{const ae={loginOrEmail:k.login,role:Y};await(0,o.i)().post(`/api/orgs/${_}/users/`,ae),Z(c(k.id))}}function P(k,_,Y){return async Z=>{const ae={role:Y};await(0,o.i)().patch(`/api/orgs/${_}/users/${k}`,ae),Z(c(k))}}function x(k,_){return async Y=>{await(0,o.i)().delete(`/api/orgs/${_}/users/${k}`),Y(c(k))}}function S(k){return async _=>{if(!d.Vt.hasPermission(i.AccessControlAction.UsersAuthTokenList))return;const Y=await(0,o.i)().get(`/api/admin/users/${k}/auth-tokens`);Y.reverse();const Z=Y.map(ae=>({id:ae.id,isActive:ae.isActive,seenAt:(0,l.E8)(ae.seenAt),createdAt:ae.createdAt,clientIp:ae.clientIp,browser:ae.browser,browserVersion:ae.browserVersion,os:ae.os,osVersion:ae.osVersion,device:ae.device}));_((0,f.RC)(Z))}}function I(k,_){return async Y=>{const Z={authTokenId:k};await(0,o.i)().post(`/api/admin/users/${_}/revoke-auth-token`,Z),Y(S(_))}}function T(k){return async _=>{await(0,o.i)().post(`/api/admin/users/${k}/logout`),_(S(k))}}function O(){return async k=>{const _=d.Vt.hasPermission(i.AccessControlAction.LDAPStatusRead);if((0,r.v)("ldapsync")&&_){const Y=await(0,o.i)().get("/api/admin/ldap-sync-status");k((0,f.CY)(Y))}}}function A(k){return async _=>{await(0,o.i)().post(`/api/admin/ldap/sync/${k}`),_(c(k))}}function B(){return async k=>{if(d.Vt.hasPermission(i.AccessControlAction.LDAPStatusRead))try{const _=await(0,o.i)().get("/api/admin/ldap/status");k((0,f.Ls)(_))}catch(_){if((0,o.kW)(_)){_.isHandled=!0;const Y={title:_.data.message,body:_.data.error};k((0,f.y3)(Y))}}}}function b(k){return async _=>{try{const Y=await(0,o.i)().get(`/api/admin/ldap/${encodeURIComponent(k)}`),{name:Z,surname:ae,email:ce,login:q,isGrafanaAdmin:De,isDisabled:oe,roles:te,teams:fe}=Y,Te={info:{name:Z,surname:ae,email:ce,login:q},permissions:{isGrafanaAdmin:De,isDisabled:oe},roles:te,teams:fe};_((0,f.sJ)(Te))}catch(Y){if((0,o.kW)(Y)){Y.isHandled=!0;const Z={title:Y.data.message,body:Y.data.error};_((0,f.eq)()),_((0,f.VB)(Z))}}}}function W(){return k=>{k((0,f.WO)())}}function V(){return k=>{k((0,f.WO)()),k((0,f.eq)())}}const w=k=>k.map(_=>Array.isArray(_.value)?_.value.map(Y=>`${_.name}=${Y.value}`).join("&"):`${_.name}=${_.value}`).join("&");function K(){return async(k,_)=>{try{const{perPage:Y,page:Z,query:ae,filters:ce,sort:q}=_().userListAdmin;let De=`/api/users/search?perpage=${Y}&page=${Z}&query=${ae}&${w(ce)}`;q&&(De+=`&sort=${q}`);const oe=await(0,o.i)().get(De);k((0,f.xh)(oe))}catch(Y){(0,f.k7)(),console.error(Y)}}}const z=(0,n.debounce)(k=>k(K()),500);function G(k){return async _=>{_((0,f.tZ)()),_((0,f.aj)(k)),z(_)}}function Q(k){return async _=>{_((0,f.tZ)()),_((0,f.qz)(k)),z(_)}}function j(k){return async _=>{_((0,f.tZ)()),_((0,f.PJ)(k)),_(K())}}function F({sortBy:k}){const _=k.length?`${k[0].id}-${k[0].desc?"desc":"asc"}`:void 0;return async(Y,Z)=>{Z().userListAdmin.sort!==_&&(Y((0,f.tZ)()),Y((0,f.UL)(_)),Y(K()))}}},3818:(J,R,e)=>{"use strict";e.d(R,{CY:()=>d,Ls:()=>g,PJ:()=>T,RC:()=>y,UA:()=>s,UL:()=>A,VB:()=>u,WO:()=>r,ZP:()=>b,aj:()=>I,eq:()=>o,fm:()=>h,k7:()=>S,pm:()=>p,qz:()=>O,sJ:()=>i,sL:()=>v,tZ:()=>x,xh:()=>P,y3:()=>m});var n=e(77960);const a={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},l=(0,n.oM)({name:"ldap",initialState:a,reducers:{ldapConnectionInfoLoadedAction:(W,V)=>({...W,ldapError:void 0,connectionInfo:V.payload}),ldapFailedAction:(W,V)=>({...W,ldapError:V.payload}),ldapSyncStatusLoadedAction:(W,V)=>({...W,syncInfo:V.payload}),userMappingInfoLoadedAction:(W,V)=>({...W,user:V.payload,userError:void 0}),userMappingInfoFailedAction:(W,V)=>({...W,user:void 0,userError:V.payload}),clearUserMappingInfoAction:(W,V)=>({...W,user:void 0}),clearUserErrorAction:(W,V)=>({...W,userError:void 0})}}),{clearUserErrorAction:r,clearUserMappingInfoAction:o,ldapConnectionInfoLoadedAction:g,ldapFailedAction:m,ldapSyncStatusLoadedAction:d,userMappingInfoFailedAction:u,userMappingInfoLoadedAction:i}=l.actions,f=l.reducer,c={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},E=(0,n.oM)({name:"userAdmin",initialState:c,reducers:{userProfileLoadedAction:(W,V)=>({...W,user:V.payload}),userOrgsLoadedAction:(W,V)=>({...W,orgs:V.payload}),userSessionsLoadedAction:(W,V)=>({...W,sessions:V.payload}),userAdminPageLoadedAction:(W,V)=>({...W,isLoading:!V.payload}),userAdminPageFailedAction:(W,V)=>({...W,error:V.payload,isLoading:!1})}}),{userProfileLoadedAction:p,userOrgsLoadedAction:h,userSessionsLoadedAction:y,userAdminPageLoadedAction:s,userAdminPageFailedAction:v}=E.actions,C=E.reducer,D={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!0},M=(0,n.oM)({name:"userListAdmin",initialState:D,reducers:{usersFetched:(W,V)=>{const{totalCount:w,perPage:K,...z}=V.payload,G=Math.ceil(w/K);return{...W,...z,totalPages:G,perPage:K,showPaging:G>1,isLoading:!1}},usersFetchBegin:W=>({...W,isLoading:!0}),usersFetchEnd:W=>({...W,isLoading:!1}),queryChanged:(W,V)=>({...W,query:V.payload,page:0}),pageChanged:(W,V)=>({...W,page:V.payload}),sortChanged:(W,V)=>({...W,page:0,sort:V.payload}),filterChanged:(W,V)=>{const{name:w,value:K}=V.payload;return W.filters.some(z=>z.name===w)?{...W,page:0,filters:W.filters.map(z=>z.name===w?{...z,value:K}:z)}:{...W,page:0,filters:[...W.filters,V.payload]}}}}),{usersFetched:P,usersFetchBegin:x,usersFetchEnd:S,queryChanged:I,pageChanged:T,filterChanged:O,sortChanged:A}=M.actions,B=M.reducer,b={ldap:f,userAdmin:C,userListAdmin:B}},22001:(J,R,e)=>{"use strict";e.d(R,{Yb:()=>a,d5:()=>r});var n=e(32688);const a=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function l(){const o=n.config.licenseInfo?.trialExpiry;return!!(o&&o>0)}const r=()=>l()&&n.config.featureToggles.featureHighlights},5026:(J,R,e)=>{"use strict";e.d(R,{$:()=>m,Z:()=>v});var n=e(86832),a=e.n(n),l=e(40927);const r=new l.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),o=[{text:"Query",value:"query"}],g={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var m=(C=>(C.IsAbove="gt",C.IsBelow="lt",C.IsOutsideRange="outside_range",C.IsWithinRange="within_range",C.HasNoValue="no_value",C))(m||{});const d=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],u=[{text:"OR",value:"or"},{text:"AND",value:"and"}],i=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],f=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],c=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function E(C){const D=new l.zU({type:C.type,defaultParams:[]});return new l.XN(C,D)}function p(C){return C.toLowerCase().replace(/_/g,"").split(" ")[0]}function h(C){switch(p(C)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function y(C,D){return(0,n.reduce)(C,(M,P)=>(P.metric!==void 0&&P.value!==void 0&&M.push(P.metric+"="+P.value),P.Metric!==void 0&&P.Value!==void 0&&M.push(P.Metric+"="+P.Value),M),[]).join(D)}function s(C){return(0,n.isArray)(C.data)?y(C.data,", "):(0,n.isArray)(C.data.evalMatches)?y(C.data.evalMatches,", "):C.data.error?"Error: "+C.data.error:""}const v={alertQueryDef:r,getStateDisplayModel:h,conditionTypes:o,evalFunctions:d,evalOperators:u,noDataModes:f,executionErrorModes:c,reducerTypes:i,createReducerPart:E,getAlertAnnotationInfo:s,alertStateSortScore:g}},40927:(J,R,e)=>{"use strict";e.d(R,{C7:()=>g,D:()=>o,XN:()=>r,zU:()=>l});var n=e(86832),a=e.n(n);class l{constructor(i){this.type=i.type,this.params=i.params,this.defaultParams=i.defaultParams,this.renderer=i.renderer,this.category=i.category,this.addStrategy=i.addStrategy}}class r{constructor(i,f){if(this.part=i,this.def=f,!this.def)throw{message:"Could not find query part "+i.type};i.params=i.params||(0,n.clone)(this.def.defaultParams),this.params=i.params,this.text="",this.updateText()}render(i){return this.def.renderer(this,i)}hasMultipleParamsInString(i,f){return i.indexOf(",")===-1?!1:this.def.params[f+1]&&this.def.params[f+1].optional}updateParam(i,f){if(this.hasMultipleParamsInString(i,f)){(0,n.each)(i.split(","),(c,E)=>{this.updateParam(c.trim(),E)});return}i===""&&this.def.params[f].optional?this.params.splice(f,1):this.params[f]=i,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let i=this.def.type+"(";i+=this.params.join(", "),i+=")",this.text=i}}function o(u,i){const f=u.def.type+"(",c=(0,n.map)(u.params,(E,p)=>{const h=u.def.params[p];return h.type==="time"&&E==="auto"&&(E="$__interval"),h.quote==="single"?"'"+E+"'":h.quote==="double"?'"'+E+'"':E});return i&&c.unshift(i),f+c.join(", ")+")"}function g(u,i){return i+" "+u.params[0]}function m(u,i){return u.params[0]}function d(u,i){return'"'+u.params[0]+'"'}},71854:(J,R,e)=>{"use strict";e.d(R,{ZP:()=>P,Gr:()=>i,gz:()=>p,Oc:()=>h,K:()=>v,J0:()=>C,T2:()=>s,ql:()=>y});var n=e(77960),a=e(92403),l=e(44722),r=e(57675),o=e(79493);const m=(0,l.combineReducers)({dataSources:(0,r.jK)("dataSources",o.nw,({rulesSourceName:I})=>I).reducer,promRules:(0,r.jK)("promRules",o.y6,({rulesSourceName:I})=>I).reducer,rulerRules:(0,r.jK)("rulerRules",o.UR,({rulesSourceName:I})=>I).reducer,silences:(0,r.jK)("silences",o.je,I=>I).reducer,ruleForm:(0,l.combineReducers)({saveRule:(0,r.i6)("saveRule",o.wy).reducer,existingRule:(0,r.i6)("existingRule",o.on).reducer}),grafanaNotifiers:(0,r.i6)("grafanaNotifiers",o.Vj).reducer,saveAMConfig:(0,r.i6)("saveAMConfig",o.mM).reducer,deleteAMConfig:(0,r.i6)("deleteAMConfig",o.Nc).reducer,updateSilence:(0,r.i6)("updateSilence",o.QY).reducer,amAlerts:(0,r.jK)("amAlerts",o.dB,I=>I).reducer,folders:(0,r.jK)("folders",o.vL,I=>I).reducer,amAlertGroups:(0,r.jK)("amAlertGroups",o.mS,I=>I).reducer,testReceivers:(0,r.i6)("testReceivers",o.D8).reducer,updateLotexNamespaceAndGroup:(0,r.i6)("updateLotexNamespaceAndGroup",o.hv).reducer,externalAlertmanagers:(0,l.combineReducers)({alertmanagerConfig:(0,r.i6)("alertmanagerConfig",o.wE).reducer,discoveredAlertmanagers:(0,r.i6)("discoveredAlertmanagers",o.zy).reducer}),managedAlertStateHistory:(0,r.i6)("managedAlertStateHistory",o.Ms).reducer});var d=e(5026);const u={items:[],searchQuery:"",isLoading:!1},i={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function f(I,T){const O=d.Z.getStateDisplayModel(T),A={...I,stateText:O.text,stateIcon:O.iconClass,stateClass:O.stateClass,stateAge:(0,a.CQ)(I.newStateDate).fromNow(!0)};return A.state!=="paused"&&(A.executionError&&(A.info="Execution Error: "+A.executionError),A.evalData&&A.evalData.noData&&(A.info="Query returned no data")),A}const c=(0,n.oM)({name:"alertRules",initialState:u,reducers:{loadAlertRules:I=>({...I,isLoading:!0}),loadedAlertRules:(I,T)=>{const A=T.payload.map(B=>f(B,B.state));return{...I,items:A,isLoading:!1}},setSearchQuery:(I,T)=>({...I,searchQuery:T.payload})}}),E=(0,n.oM)({name:"notificationChannel",initialState:i,reducers:{setNotificationChannels:(I,T)=>({...I,notificationChannelTypes:S(T.payload),notifiers:T.payload}),notificationChannelLoaded:(I,T)=>{const O=T.payload,B=I.notifiers.find(b=>b.type===O.type).options.filter(b=>b.secure);return B.length>0&&B.some(b=>O.settings[b.propertyName]!=="")?x(I,T.payload,B):{...I,notificationChannel:O}},resetSecureField:(I,T)=>({...I,notificationChannel:{...I.notificationChannel,secureFields:{...I.notificationChannel.secureFields,[T.payload]:!1}}})}}),{loadAlertRules:p,loadedAlertRules:h,setSearchQuery:y}=c.actions,{setNotificationChannels:s,notificationChannelLoaded:v,resetSecureField:C}=E.actions,D=c.reducer,M=E.reducer,P={alertRules:D,notificationChannel:M,unifiedAlerting:m};function x(I,T,O){const A={},B={};return O.forEach(b=>{B[b.propertyName]=T.settings[b.propertyName],A[b.propertyName]=""}),{...I,notificationChannel:{...T,settings:{...T.settings,...A},secureSettings:{...B}}}}function S(I){return I.map(T=>({value:T.type,label:T.name,...T,typeName:T.type})).sort((T,O)=>T.name>O.name?1:-1)}},79517:(J,R,e)=>{"use strict";e.d(R,{$I:()=>h,Ej:()=>C,Io:()=>c,PN:()=>f,Z0:()=>v,pM:()=>E,z7:()=>i});var n=e(92403),a=e(60862),l=e(60450),r=e(54538),o=e(4148),g=e(32688),m=e(72639),d=e(21308);const u=7,i={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",recordingRuleFromScratch:"creating recording rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError"};function f(D,M={}){g.config.grafanaJavascriptAgent.enabled&&a.s.api.pushLog([D],{level:l.in.INFO,context:{...M,module:"Alerting"}})}function c(D,M={}){(0,r.H)(D,{...M,module:"Alerting"})}function E(D,M,P){return async function(...x){const S=performance.now(),I=await D(...x);return f(M,{loadTimeMs:(performance.now()-S).toFixed(0),...P}),I}}async function p(){try{const{createdAt:D}=await(0,o.i)().get("/api/user"),M=(0,n.CQ)().subtract(u,"days"),P=(0,n.CQ)(D);return M.isBefore(P)}catch{return!0}}const h=async(D={grafana_version:g.config.buildInfo.version,org_id:d.Vt.user.orgId,user_id:d.Vt.user.id})=>{await p()||(0,m.ff)("grafana_alerting_navigation",D)},y=async D=>{await p()||reportInteraction("grafana_alerting_rule_creation",D)},s=async D=>{await p()||reportInteraction("grafana_alerting_rule_aborted",D)},v=async D=>{await p()||(0,m.ff)("grafana_alerting_rule_form_error",D)},C=async D=>{const M={grafana_version:g.config.buildInfo.version,org_id:d.Vt.user.orgId,user_id:d.Vt.user.id};(0,m.ff)("grafana_alerting_insights",{...M,...D})}},26516:(J,R,e)=>{"use strict";e.d(R,{alertRuleApi:()=>u});var n=e(95712),a=e(68694),l=e(15032),r=e(20584),o=e(32735),g=e(98301);const m="/api/v1/rule/test/grafana",d="api/prometheus/grafana/api/v1/rules",u=r.C.injectEndpoints({endpoints:i=>({preview:i.mutation({query:({alertQueries:f,condition:c,customLabels:E,folder:p,alertName:h,alertUid:y})=>({url:m,data:{rule:{grafana_alert:{data:f,condition:c,no_data_state:"Alerting",title:h,uid:y??"N/A"},for:"0s",labels:(0,a.bR)(E),annotations:{}},folderUid:p.uid,folderTitle:p.title},method:"POST"})}),prometheusRulesByNamespace:i.query({query:({limitAlerts:f,identifier:c,filter:E,state:p,matcher:h})=>{const y=new URLSearchParams;f&&y.set("limit_alerts",String(f)),c&&((0,l.qE)(c)||(0,l.E4)(c))&&(y.set("file",c.namespace),y.set("rule_group",c.groupName));const s=(0,o.hd)(y,E);return{url:d,params:(0,o.Tb)(s,p,h)}},transformResponse:f=>(0,o.lL)(f.data.groups,n.GC)}),prometheusRuleNamespaces:i.query({query:({ruleSourceName:f,namespace:c,groupName:E,ruleName:p})=>{const h={};return h.file=c,h.rule_group=E,h.rule_name=p,{url:`api/prometheus/${(0,n.gt)(f)}/api/v1/rules`,params:h}},transformResponse:(f,c,E)=>(0,o.lL)(f.data.groups,E.ruleSourceName)}),rulerRules:i.query({query:({rulerConfig:f,filter:c})=>{const{path:E,params:p}=(0,g.IN)(f).rules(c);return{url:E,params:p}}}),rulerRuleGroup:i.query({query:({rulerConfig:f,namespace:c,group:E})=>{const{path:p,params:h}=(0,g.IN)(f).namespaceGroup(c,E);return{url:p,params:h}}}),exportRules:i.query({query:({format:f,folderUid:c,group:E,ruleUid:p})=>({url:"/api/ruler/grafana/api/v1/export/rules",params:{format:f,folderUid:c,group:E,ruleUid:p},responseType:"text"})}),exportReceiver:i.query({query:({receiverName:f,decrypt:c,format:E})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:E,decrypt:c,name:f},responseType:"text"})}),exportReceivers:i.query({query:({decrypt:f,format:c})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:c,decrypt:f},responseType:"text"})}),exportPolicies:i.query({query:({format:f})=>({url:"/api/v1/provisioning/policies/export/",params:{format:f},responseType:"text"})}),exportModifiedRuleGroup:i.mutation({query:({payload:f,format:c,nameSpace:E})=>({url:`/api/ruler/grafana/api/v1/rules/${E}/export/`,params:{format:c},responseType:"text",data:f,method:"POST"})})})})},20584:(J,R,e)=>{"use strict";e.d(R,{C:()=>g});var n=e(91986),a=e(31312),l=e(4148),r=e(79517);const o=()=>async m=>{try{const d=performance.now(),{data:u,...i}=await(0,a.n)((0,l.i)().fetch(m));return(0,r.PN)("Request finished",{loadTimeMs:(performance.now()-d).toFixed(0),url:m.url,method:m.method??"",responseStatus:i.statusText}),{data:u,meta:i}}catch(d){return{error:d}}},g=(0,n.LC)({reducerPath:"alertingApi",baseQuery:o(),tagTypes:["AlertmanagerChoice","AlertmanagerConfiguration","OnCallIntegrations"],endpoints:()=>({})})},41272:(J,R,e)=>{"use strict";e.d(R,{$l:()=>C,Bp:()=>p,CN:()=>m,Ch:()=>o,QK:()=>f,U7:()=>d,UK:()=>E,XK:()=>c,Zo:()=>D,dx:()=>u,iT:()=>i,oy:()=>g,tK:()=>v});var n=e(31312),a=e(69307),l=e(4148),r=e(95712);async function o(P){try{const x=await(0,n.n)((0,l.i)().fetch({url:`/api/alertmanager/${(0,r.gt)(P)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:x.data.template_files??{},template_file_provenances:x.data.template_file_provenances??{},alertmanager_config:x.data.alertmanager_config??{},last_applied:x.data.last_applied,id:x.data.id}}catch(x){if(P===r.GC&&(0,l.kW)(x)&&x.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw x}}async function g(P,x){await(0,n.n)((0,l.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,r.gt)(P)}/config/api/v1/alerts`,data:x,showErrorAlert:!1,showSuccessAlert:!1}))}async function m(P){await(0,n.n)((0,l.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,r.gt)(P)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function d(P){return(await(0,n.n)((0,l.i)().fetch({url:`/api/alertmanager/${(0,r.gt)(P)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function u(P,x){return(await(0,n.n)((0,l.i)().fetch({url:`/api/alertmanager/${(0,r.gt)(P)}/api/v2/silences`,data:x,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function i(P,x){await(0,l.i)().delete(`/api/alertmanager/${(0,r.gt)(P)}/api/v2/silence/${encodeURIComponent(x)}`)}async function f(P,x,S=!0,I=!0,T=!0){const O=a.Cj.toUrlParams({silenced:S,active:I,inhibited:T})+x?.map(B=>`filter=${encodeURIComponent(`${M(B.name)}=${B.isRegex?"~":""}"${M(B.value)}"`)}`).join("&")||"";return(await(0,n.n)((0,l.i)().fetch({url:`/api/alertmanager/${(0,r.gt)(P)}/api/v2/alerts`+(O?"?"+O:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function c(P){return(await(0,n.n)((0,l.i)().fetch({url:`/api/alertmanager/${(0,r.gt)(P)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function E(P){return(await(0,n.n)((0,l.i)().fetch({url:`/api/alertmanager/${(0,r.gt)(P)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function p(P,x,S){const I={receivers:x,alert:S};try{const T=await(0,n.n)((0,l.i)().fetch({method:"POST",data:I,url:`/api/alertmanager/${(0,r.gt)(P)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(h(T.data))throw new Error(s(T.data))}catch(T){throw(0,l.kW)(T)&&y(T.data)&&h(T.data)?new Error(s(T.data)):T}}function h(P){return P.receivers.some(x=>x.grafana_managed_receiver_configs.some(S=>S.status==="failed"))}function y(P){const x=P?.receivers;return Array.isArray(x)?x.every(S=>typeof S.name=="string"&&Array.isArray(S.grafana_managed_receiver_configs)):!1}function s(P){return P.receivers.flatMap(x=>x.grafana_managed_receiver_configs.filter(S=>S.status==="failed").map(S=>S.error??"Unknown error.")).join("; ")}async function v(P){await(0,n.n)((0,l.i)().fetch({method:"POST",data:P,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{D()})}async function C(){return(await(0,n.n)((0,l.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function D(){return(await(0,n.n)((0,l.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function M(P){return P.replace(/"/g,'\\"')}},37546:(J,R,e)=>{"use strict";e.d(R,{alertmanagerApi:()=>p});var n=e(86832),a=e.n(n),l=e(74600),r=e(79517),o=e(14949),g=e(95712),m=e(76716),d=e(57675),u=e(20584),i=e(41272),f=e(14055);const c=10,E=30*1e3,p=u.C.injectEndpoints({endpoints:h=>({getAlertmanagerAlerts:h.query({query:({amSourceName:y,filter:s})=>{const v=s?.matchers?.filter(I=>I.name&&I.value).map(I=>`${I.name}${(0,o.zy)(I)}${(0,m.sM)(I.value)}`),{silenced:C,inhibited:D,unprocessed:M,active:P}=s||{},x=Object.fromEntries(Object.entries({silenced:C,active:P,inhibited:D,unprocessed:M}).filter(([I,T])=>T!==void 0)),S={filter:v};return x&&Object.keys(x).forEach(I=>{S[I]=x[I]}),{url:`/api/alertmanager/${(0,g.gt)(y)}/api/v2/alerts`,params:S}}}),getAlertmanagerAlertGroups:h.query({query:({amSourceName:y})=>({url:`/api/alertmanager/${(0,g.gt)(y)}/api/v2/alerts/groups`})}),grafanaNotifiers:h.query({query:()=>({url:"/api/alert-notifiers"})}),getAlertmanagerChoiceStatus:h.query({query:()=>({url:"/api/v1/ngalert"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagerConfig:h.query({query:()=>({url:"/api/v1/ngalert/admin_config"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagers:h.query({query:()=>({url:"/api/v1/ngalert/alertmanagers"}),transformResponse:y=>y.data}),saveExternalAlertmanagersConfig:h.mutation({query:y=>({url:"/api/v1/ngalert/admin_config",method:"POST",data:y}),invalidatesTags:["AlertmanagerChoice"]}),getValidAlertManagersConfig:h.query({query:()=>({url:`/api/alertmanager/${(0,g.gt)(g.GC)}/config/history?limit=${c}`})}),resetAlertManagerConfigToOldVersion:h.mutation({query:y=>({url:`/api/alertmanager/${(0,g.gt)(g.GC)}/config/history/${y.id}/_activate`,method:"POST"})}),getAlertmanagerConfiguration:h.query({queryFn:async y=>{const s=y===g.GC;if((0,g.RY)(y))return(0,d.$b)((0,i.UK)(y).then(S=>({data:{alertmanager_config:S.config,template_files:{}}})));const{data:C}=await(0,l.WI)(f.T.endpoints.discoverAmFeatures.initiate({amSourceName:y})),D={alertmanager_config:{},template_files:{},template_file_provenances:{}},M=C?.lazyConfigInit??!1,P=(0,r.pM)(i.Ch,`[${y}] Alertmanager config loaded`,{dataSourceName:y,thunk:"unifiedalerting/fetchAmConfig"}),x=(0,m.fm)(()=>P(y),S=>!!(0,d.kk)(S)?.includes("alertmanager storage object not found")&&!M,E).then(S=>s?S:(0,n.isEmpty)(S.alertmanager_config)&&(0,n.isEmpty)(S.template_files)?(0,i.UK)(y).then(T=>({alertmanager_config:T.config,template_files:{},template_file_provenances:S.template_file_provenances,last_applied:S.last_applied,id:S.id})):S).then(S=>S??D).then(S=>({data:S})).catch(S=>{if(M&&(0,d.kk)(S)?.includes("alertmanager storage object not found"))return{data:D};throw S});return(0,d.$b)(x).catch(S=>({error:S,data:void 0}))},providesTags:["AlertmanagerConfiguration"]}),updateAlertmanagerConfiguration:h.mutation({query:({selectedAlertmanager:y,config:s,...v})=>({url:`/api/alertmanager/${(0,g.gt)(y)}/config/api/v1/alerts`,method:"POST",data:s,...v}),invalidatesTags:["AlertmanagerConfiguration"]}),getContactPointsStatus:h.query({query:()=>({url:`/api/alertmanager/${(0,g.gt)(g.GC)}/config/api/v1/receivers`}),transformResponse:y=>{const s=v=>v.startsWith("0001-01-01");return y.map(v=>({...v,integrations:v.integrations.map(C=>{const D=s(C.lastNotifyAttempt);return{...C,lastNotifyAttempt:D?"":C.lastNotifyAttempt,lastNotifyAttemptDuration:D?"":C.lastNotifyAttemptDuration}})}))}})})})},78313:(J,R,e)=>{"use strict";e.d(R,{C$:()=>d,SJ:()=>f,Zy:()=>i});var n=e(31312),a=e(4148),l=e(17330),r=e(63483),o=e(95712),g=e(32735),m=e(98301);async function d(s){if(s===o.GC)return{features:{rulerApiEnabled:!0}};const v=(0,o.c$)(s);if(!v)throw new Error(`Cannot find data source configuration for ${s}`);const{url:C,name:D,type:M}=v;if(!C)throw new Error("The data source url cannot be empty.");if(M!=="prometheus"&&M!=="loki")throw new Error(`The build info request is not available for ${M}. Only 'prometheus' and 'loki' are supported`);return u({name:D,url:C,type:M})}async function u(s){const{url:v,name:C,type:D}=s,M=D==="loki"?void 0:await E(v);if(!(M!==void 0)){if(!await p(C))throw new Error(`Unable to fetch alert rules. Is the ${C} data source properly configured?`);const I=await h(C);return{application:l.T8.Cortex,features:{rulerApiEnabled:I}}}const{features:x}=M.data;return x?{application:l.T8.Mimir,features:{rulerApiEnabled:x?.ruler_config_api==="true"}}:{application:l.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function i(s){if(s===o.GC)return{lazyConfigInit:!1};const v=c(s),{url:C,type:D}=v;if(!C)throw new Error("The data source url cannot be empty.");if(D!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${D}. Only 'alertmanager' type is supported`);return await f(C)}async function f(s){try{return{lazyConfigInit:(await E(s))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function c(s){const v=(0,o.c$)(s);if(!v)throw new Error(`Cannot find data source configuration for ${s}`);return v}async function E(s){return(await(0,n.n)((0,a.i)().fetch({url:`${s}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(C=>{if(!("status"in C&&C.status===404))throw C}))?.data}async function p(s){try{return await(0,g.j)(s),!0}catch{return!1}}async function h(s){try{return await(0,m.jw)(s),!0}catch(v){if(y(v))return!1;throw v}}function y(s){return(0,a.kW)(s)?s.data.message?.includes("GetRuleGroup unsupported in rule local store")||s.data.message?.includes("page not found")||s.data.message?.includes(r.jZ):s instanceof Error&&s.message?.includes("404 from rules config endpoint")}},14055:(J,R,e)=>{"use strict";e.d(R,{T:()=>g});var n=e(17330),a=e(79517),l=e(95712),r=e(20584),o=e(78313);const g=r.C.injectEndpoints({endpoints:m=>({discoverAmFeatures:m.query({queryFn:async({amSourceName:d})=>{try{return{data:await(0,o.Zy)(d)}}catch(u){return{error:u}}}}),discoverDsFeatures:m.query({queryFn:async({rulesSourceName:d})=>{const u=(0,l.VX)(d);if(!u)return{error:new Error(`Missing data source configuration for ${d}`)};const f=await(0,a.pM)(o.C$,`[${d}] Rules source features discovered`,{dataSourceName:d,endpoint:"unifiedalerting/featureDiscoveryApi/discoverDsFeatures"})(u.name);return{data:{rulerConfig:f.features.rulerApiEnabled?{dataSourceName:u.name,apiVersion:f.application===n.T8.Cortex?"legacy":"config"}:void 0}}}})})})},32490:(J,R,e)=>{"use strict";e.d(R,{QE:()=>d,i9:()=>r});var n=e(31312),a=e(4148),l=e(95712);function r(){return(0,a.i)().get("/api/alert-notifiers")}const o=u=>{const i=u.match(/^(\w+)(\[\d+\])?$/);return i?{type:i[1],index:i[2]}:{type:u,index:void 0}},g=u=>{const i={receivers:{},errorCount:0};u.forEach(c=>{i.receivers[c.name]={active:c.active,notifiers:{},errorCount:0};const E=i.receivers[c.name];c.integrations.forEach(p=>{!!p?.lastNotifyAttemptError&&(E.errorCount+=1);const y=m(p.name);y&&(E.notifiers[y]||(E.notifiers[y]=[]),E.notifiers[y].push(p))})});const f=Object.values(i.receivers).reduce((c,E)=>c+E.errorCount,0);return{...i,errorCount:f}},m=u=>o(u)?.type;async function d(u){try{const i=await(0,n.n)((0,a.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(u)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return g(i.data)}catch{return g([])}}},32735:(J,R,e)=>{"use strict";e.d(R,{Tb:()=>m,hd:()=>g,j:()=>u,lL:()=>d});var n=e(31312),a=e(4148),l=e(95712),r=e(15032);function o(i){const{dataSourceName:f,limitAlerts:c,identifier:E}=i;return{rules:(p,h,y)=>{const s=new URLSearchParams;f===l.GC&&c&&s.set("limit_alerts",String(c)),E&&((0,r.qE)(E)||(0,r.E4)(E))&&(s.set("file",E.namespace),s.set("rule_group",E.groupName));const v=g(s,p);return{url:`/api/prometheus/${(0,l.gt)(f)}/api/v1/rules`,params:m(v,h,y)}}}}function g(i,f){return f?.dashboardUID&&(i.set("dashboard_uid",f.dashboardUID),f?.panelId&&i.set("panel_id",String(f.panelId))),Object.fromEntries(i)}function m(i,f,c){let E={...i};if(f?.length&&(E={...E,state:f}),c?.length){const p=c.map(h=>JSON.stringify(h));E={...E,matcher:p}}return E}const d=(i,f)=>{const c={};return i.forEach(E=>{E.rules.forEach(p=>{p.query=p.query||""}),c[E.file]?c[E.file].groups.push(E):c[E.file]={dataSourceName:f,name:E.file,groups:[E]}}),Object.values(c)};async function u(i,f,c,E,p,h){if(f?.dashboardUID&&i!==l.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:y,params:s}=o({dataSourceName:i,limitAlerts:c,identifier:h}).rules(f,p,E),v=await(0,n.n)((0,a.i)().fetch({url:y,params:s,showErrorAlert:!1,showSuccessAlert:!1})).catch(C=>{throw"status"in C&&C.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):C});return d(v.data.data.groups,i)}},98301:(J,R,e)=>{"use strict";e.d(R,{BC:()=>c,IN:()=>g,P4:()=>m,jJ:()=>f,jw:()=>i,m6:()=>d,sz:()=>s});var n=e(31312),a=e(4148),l=e(63483),r=e(95712),o=e(32735);function g(v){const D=`${`/api/ruler/${(0,r.gt)(v.dataSourceName)}`}/api/v1/rules`,M=new URLSearchParams;return M.set("subtype",v.apiVersion==="legacy"?"cortex":"mimir"),{rules:P=>{const x=(0,o.hd)(M,P);return{path:`${D}`,params:x}},namespace:P=>({path:`${D}/${encodeURIComponent(P)}`,params:Object.fromEntries(M)}),namespaceGroup:(P,x)=>({path:`${D}/${encodeURIComponent(P)}/${encodeURIComponent(x)}`,params:Object.fromEntries(M)})}}async function m(v,C,D){const{path:M,params:P}=g(v).namespace(C);await(0,n.n)((0,a.i)().fetch({method:"POST",url:M,data:D,showErrorAlert:!1,showSuccessAlert:!1,params:P}))}async function d(v,C){if(C?.dashboardUID&&v.dataSourceName!==r.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:D,params:M}=g(v).rules(C);return E(D,{},M)}async function u(v,C){const{path:D,params:M}=g(v).namespace(C);return(await E(D,{},M))[C]||[]}async function i(v){return E(`/api/ruler/${(0,r.gt)(v)}/api/v1/rules/test/test`,null)}async function f(v,C,D){const{path:M,params:P}=g(v).namespaceGroup(C,D);return E(M,null,P)}async function c(v,C,D){const{path:M,params:P}=g(v).namespaceGroup(C,D);await(0,n.n)((0,a.i)().fetch({url:M,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:P}))}async function E(v,C,D){try{return(await(0,n.n)((0,a.i)().fetch({url:v,showErrorAlert:!1,showSuccessAlert:!1,params:D}))).data}catch(M){if(!p(M))throw M;if(y(M))return C;throw h(M)?{...M,data:{...M.data,message:l.jZ}}:M}}function p(v){const C=v.data!=null;return Number.isFinite(v.status)&&C}function h(v){return v.status===404||v.status===500&&v.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function y(v){return v.status===404&&(v.data.message?.includes("group does not exist")||v.data.message?.includes("no rule groups found"))}async function s(v,C){const{path:D,params:M}=g(v).namespace(C);await(0,n.n)((0,a.i)().fetch({method:"DELETE",url:D,showErrorAlert:!1,showSuccessAlert:!1,params:M}))}},91085:(J,R,e)=>{"use strict";e.d(R,{i:()=>o});var n=e(41407),a=e(39953),l=e(82803),r=e(68497);const o=({labelKey:m,value:d,operator:u="=",onRemoveLabel:i})=>{const f=(0,l.wW)(g);return a.createElement("div",{className:f.wrapper},m,u,d,!!i&&a.createElement(r.h,{name:"times",size:"xs",onClick:i,tooltip:"Remove label"}))},g=m=>({wrapper:(0,n.css)`
    padding: ${m.spacing(.5,1)};
    border-radius: ${m.shape.radius.default};
    border: solid 1px ${m.colors.border.medium};
    font-size: ${m.typography.bodySmall.fontSize};
    background-color: ${m.colors.background.secondary};
    font-weight: ${m.typography.fontWeightBold};
    color: ${m.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},4353:(J,R,e)=>{"use strict";e.d(R,{s:()=>f});var n=e(41407),a=e(86832),l=e.n(a),r=e(71757),o=e.n(r),g=e(39953),m=e(82803),d=e(4919),u=e(72899),i=e(15429);const f=({labels:h,commonLabels:y={},size:s})=>{const v=(0,m.wW)(p,s),[C,D]=(0,g.useState)(!1),M=(0,a.chain)(h).toPairs().reject(E).reject(([S])=>C?!1:S in y).value(),P=Object.keys(y).length,x=P>0;return g.createElement("div",{className:v.wrapper,role:"list","aria-label":"Labels"},M.map(([S,I])=>g.createElement(i._,{key:S+I,size:s,label:S,value:I,color:c(S)})),!C&&x&&g.createElement(d.zx,{variant:"secondary",fill:"text",onClick:()=>D(!0),tooltip:"Show common labels",tooltipPlacement:"top",size:"sm"},"+",P," common ",o()("label",P)),C&&x&&g.createElement(d.zx,{variant:"secondary",fill:"text",onClick:()=>D(!1),tooltipPlacement:"top",size:"sm"},"Hide common labels"))};function c(h){return(0,u.Bx)(h).color}const E=([h,y])=>h.startsWith("__")&&h.endsWith("__"),p=(h,y)=>({wrapper:(0,n.css)`
    display: flex;
    flex-wrap: wrap;
    align-items: center;

    gap: ${y==="md"?h.spacing():h.spacing(.5)};
  `})},75825:(J,R,e)=>{"use strict";e.d(R,{a:()=>f});var n=e(41407),a=e(39953),l=e(28425),r=e(69865),o=e(82803),g=e(63483),m=e(40700),d=e(89066),u=e(97453);const i=["message","description"],f=({annotationKey:p,value:h,valueLink:y})=>{const s=g.vY[p]?a.createElement(r.u,{content:p,placement:"top",theme:"info"},a.createElement("span",null,g.vY[p])):p;return a.createElement(m.C,{label:s,horizontal:!0},a.createElement(c,{annotationKey:p,value:h,valueLink:y}))},c=({annotationKey:p,value:h,valueLink:y})=>{const s=(0,o.wW)(E),v=i.includes(p),C=h&&h.startsWith("http"),D=a.createElement(d.Z,{input:h,delimiter:["{{","}}"]});return y?a.createElement("a",{href:l.QX.sanitizeUrl(y),className:s.link},h):v?a.createElement(u.t,{className:s.well},D):C?a.createElement("a",{href:l.QX.sanitizeUrl(h),target:"__blank",className:s.link},h):a.createElement(a.Fragment,null,D)},E=p=>({well:(0,n.css)`
    word-break: break-word;
  `,link:(0,n.css)`
    word-break: break-all;
    color: ${p.colors.primary.text};
  `})},98934:(J,R,e)=>{"use strict";e.d(R,{U:()=>l});var n=e(39953),a=e(4919);const l=({isCollapsed:r,onToggle:o,idControlled:g,className:m,text:d,size:u="xl",...i})=>n.createElement(a.zx,{type:"button",fill:"text",variant:"secondary","aria-expanded":!r,"aria-controls":g,className:m,icon:r?"angle-right":"angle-down",onClick:()=>o(!r),...i},d)},40700:(J,R,e)=>{"use strict";e.d(R,{C:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=({className:g,label:m,horizontal:d,children:u,childrenWrapperClassName:i})=>{const f=(0,l.wW)(o);return a.createElement("div",{className:(0,n.cx)(f.field,d?f.fieldHorizontal:f.fieldVertical,g)},a.createElement("div",null,m),a.createElement("div",{className:i},u))},o=g=>({fieldHorizontal:(0,n.css)`
    flex-direction: row;
    ${g.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:(0,n.css)`
    flex-direction: column;
  `,field:(0,n.css)`
    display: flex;
    margin: ${g.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${g.spacing(1)};
      font-size: ${g.typography.size.sm};
      font-weight: ${g.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${g.colors.text.secondary};
    }
  `})},47224:(J,R,e)=>{"use strict";e.d(R,{t:()=>d});var n=e(41407),a=e(39953),l=e(82803),r=e(68497),o=e(39017),g=e(73278),m=e(3128);const d=({cols:i,items:f,isExpandable:c=!1,onCollapse:E,onExpand:p,isExpanded:h,renderExpandedContent:y,testIdGenerator:s,pagination:v,paginationStyles:C,renderPrefixCell:D,renderPrefixHeader:M,footerRow:P,dataTestId:x})=>{const S=(0,l.wW)(m.Z);if((E||p||h)&&!(E&&p&&h))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((c||y)&&!(c&&y))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const I=(0,l.wW)(u(i,c,!!M)),[T,O]=(0,a.useState)([]),A=K=>{h&&E&&p?h(K)?E(K):p(K):O(T.includes(K.id)?T.filter(z=>z!==K.id):[...T,K.id])},B=v?.itemsPerPage??f.length,{page:b,numberOfPages:W,onPageChange:V,pageItems:w}=(0,g.h)(f,1,B);return a.createElement(a.Fragment,null,a.createElement("div",{className:I.container,"data-testid":x??"dynamic-table"},a.createElement("div",{className:I.row,"data-testid":"header"},M&&M(),c&&a.createElement("div",{className:I.cell}),i.map(K=>a.createElement("div",{className:I.cell,key:K.id},K.label))),w.map((K,z)=>{const G=h?h(K):T.includes(K.id);return a.createElement("div",{className:I.row,key:`${K.id}-${z}`,"data-testid":s?.(K,z)??"row"},D&&D(K,z,f),c&&a.createElement("div",{className:(0,n.cx)(I.cell,I.expandCell)},a.createElement(r.h,{tooltip:`${G?"Collapse":"Expand"} row`,"data-testid":"collapse-toggle",name:G?"angle-down":"angle-right",onClick:()=>A(K)})),i.map(Q=>a.createElement("div",{className:(0,n.cx)(I.cell,I.bodyCell,Q.className),"data-column":Q.label,key:`${K.id}-${Q.id}`},Q.renderCell(K,z))),G&&y&&a.createElement("div",{className:I.expandedContentRow,"data-testid":"expanded-content"},y(K,z,f)))}),P&&a.createElement("div",{className:(0,n.cx)(I.row,I.footerRow)},P)),v&&a.createElement(o.t,{className:(0,n.cx)(S,C),currentPage:b,numberOfPages:W,onNavigate:V,hideWhenSinglePage:!0}))},u=(i,f,c)=>{const E=i.map(p=>p.size?typeof p.size=="number"?`${p.size}fr`:p.size:"auto");return f&&E.unshift("calc(1em + 16px)"),c&&E.unshift("0"),p=>({container:(0,n.css)`
      border: 1px solid ${p.colors.border.weak};
      border-radius: ${p.shape.radius.default};
      color: ${p.colors.text.secondary};
    `,row:(0,n.css)`
      display: grid;
      grid-template-columns: ${E.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${p.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${p.colors.background.primary};
      }

      ${p.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${p.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${c?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:(0,n.css)`
      display: flex;
      padding: ${p.spacing(1)};
    `,cell:(0,n.css)`
      display: flex;
      align-items: center;
      padding: ${p.spacing(1)};

      ${p.breakpoints.down("sm")} {
        padding: ${p.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:(0,n.css)`
      overflow: hidden;

      ${p.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${p.colors.text.primary};
        }
      }
    `,expandCell:(0,n.css)`
      justify-content: center;

      ${p.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:(0,n.css)`
      grid-column-end: ${E.length+1};
      grid-column-start: ${c?3:2};
      grid-row: 2;
      padding: 0 ${p.spacing(3)} 0 ${p.spacing(1)};
      position: relative;

      ${p.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${p.colors.border.strong};
        grid-row: auto;
        padding: ${p.spacing(1)} 0 0 0;
      }
    `})}},44351:(J,R,e)=>{"use strict";e.d(R,{z:()=>u});var n=e(41407),a=e(77814),l=e.n(a),r=e(39953),o=e(27366),g=e(82803),m=e(66557),d=e(55407);const u=({children:f,header:c,content:E,footer:p,arrow:h,showAfter:y=300,wrapperClassName:s,disabled:v=!1,...C})=>{const D=(0,r.useRef)(null),M=(0,g.wW)(i);if(v)return f;const P=r.createElement(o.K,{direction:"column",gap:0},c&&r.createElement("div",{className:M.card.header},c),r.createElement("div",{className:M.card.body},E),p&&r.createElement("div",{className:M.card.footer},p));return r.createElement(m.D,{content:P,hideAfter:100},(x,S,I)=>r.createElement(r.Fragment,null,D.current&&r.createElement(d.J,{...I,...C,wrapperClassName:l()(M.popover(h?1.25:0),s),onMouseLeave:S,onMouseEnter:x,onFocus:x,onBlur:S,referenceElement:D.current,renderArrow:h?({arrowProps:T,placement:O})=>r.createElement("div",{className:M.arrow(O),...T}):()=>r.createElement(r.Fragment,null)}),r.cloneElement(f,{ref:D,onMouseEnter:x,onMouseLeave:S,onFocus:x,onBlur:S})))},i=f=>({popover:c=>(0,n.css)`
    border-radius: ${f.shape.radius.default};
    box-shadow: ${f.shadows.z3};
    background: ${f.colors.background.primary};
    border: 1px solid ${f.colors.border.medium};

    margin-bottom: ${f.spacing(c)};
  `,card:{body:(0,n.css)`
      padding: ${f.spacing(1)};
    `,header:(0,n.css)`
      padding: ${f.spacing(1)};
      background: ${f.colors.background.secondary};
      border-bottom: solid 1px ${f.colors.border.medium};
    `,footer:(0,n.css)`
      padding: ${f.spacing(.5)} ${f.spacing(1)};
      background: ${f.colors.background.secondary};
      border-top: solid 1px ${f.colors.border.medium};
    `},arrow:c=>{const E="9px";return(0,n.css)`
      width: 0;
      height: 0;

      border-left: ${E} solid transparent;
      border-right: ${E} solid transparent;
      /* using hex colors here because the border colors use alpha transparency */
      border-top: ${E} solid ${f.isLight?"#d2d3d4":"#2d3037"};

      &:after {
        content: '';
        position: absolute;

        border: ${E} solid ${f.colors.background.primary};
        border-bottom: 0;
        border-left-color: transparent;
        border-right-color: transparent;

        margin-top: 1px;
        bottom: 1px;
        left: -${E};
      }
    `}})},15429:(J,R,e)=>{"use strict";e.d(R,{_:()=>m});var n=e(41407),a=e(39953),l=e(63374),r=e(27366),o=e(82803),g=e(12190);const m=({label:u,value:i,icon:f,color:c,size:E="md"})=>{const p=(0,o.wW)(d,c,E);return a.createElement("div",{className:p.wrapper,role:"listitem"},a.createElement(r.K,{direction:"row",gap:0,alignItems:"stretch",wrap:!1},a.createElement("div",{className:p.label},a.createElement(r.K,{direction:"row",gap:.5,alignItems:"center"},f&&a.createElement(g.J,{name:f})," ",u??"")),a.createElement("div",{className:p.value},i)))},d=(u,i,f)=>{const c=i??u.colors.secondary.main,E=u.isDark?(0,l.Z)(c).lighten(5).toString():(0,l.Z)(c).darken(5).toString(),p=u.isDark?(0,l.Z)(c).darken(5).toString():(0,l.Z)(c).lighten(5).toString(),h=i?l.Z.mostReadable(c,["#000","#fff"]).toString():u.colors.text.primary,y=f==="md"?`${u.spacing(.33)} ${u.spacing(1)}`:`${u.spacing(.2)} ${u.spacing(.6)}`;return{wrapper:(0,n.css)`
      color: ${h};
      font-size: ${u.typography.bodySmall.fontSize};

      border-radius: ${u.shape.borderRadius(2)};
    `,label:(0,n.css)`
      display: flex;
      align-items: center;
      color: inherit;

      padding: ${y};
      background: ${c};

      border: solid 1px ${E};
      border-top-left-radius: ${u.shape.borderRadius(2)};
      border-bottom-left-radius: ${u.shape.borderRadius(2)};
    `,value:(0,n.css)`
      color: inherit;
      padding: ${y};
      background: ${p};

      border: solid 1px ${E};
      border-left: none;
      border-top-right-radius: ${u.shape.borderRadius(2)};
      border-bottom-right-radius: ${u.shape.borderRadius(2)};
    `}}},34383:(J,R,e)=>{"use strict";e.d(R,{d:()=>r});var n=e(39953),a=e(17241);const l=({children:o,plugin:g,loadingComponent:m,notInstalledFallback:d})=>{const{loading:u,installed:i}=usePluginBridge(g);return u?m??null:i?React.createElement(React.Fragment,null,o):d??null};function r(o,g,m){const d=new URLSearchParams(m).toString();return`/a/${o}${g}`+(d?"?"+d:"")}},67111:(J,R,e)=>{"use strict";e.d(R,{L:()=>l});var n=e(41407),a=e(39953);const l=()=>a.createElement("span",{className:(0,n.css)`
      flex: 1;
    `})},47624:(J,R,e)=>{"use strict";e.d(R,{i:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=({children:g,state:m,size:d="md",muted:u=!1})=>{const i=(0,l.wW)(o);return a.createElement("span",{className:(0,n.cx)(i.common,i[m],i[d],{[i.muted]:u})},g||m)},o=g=>({common:(0,n.css)`
    display: inline-block;
    color: white;
    border-radius: ${g.shape.radius.default};
    font-size: ${g.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${g.typography.fontWeightBold};
  `,good:(0,n.css)`
    background-color: ${g.colors.success.main};
    border: solid 1px ${g.colors.success.main};
    color: ${g.colors.success.contrastText};
  `,warning:(0,n.css)`
    background-color: ${g.colors.warning.main};
    border: solid 1px ${g.colors.warning.main};
    color: ${g.colors.warning.contrastText};
  `,bad:(0,n.css)`
    background-color: ${g.colors.error.main};
    border: solid 1px ${g.colors.error.main};
    color: ${g.colors.error.contrastText};
  `,neutral:(0,n.css)`
    background-color: ${g.colors.secondary.main};
    border: solid 1px ${g.colors.secondary.main};
    color: ${g.colors.secondary.contrastText};
  `,info:(0,n.css)`
    background-color: ${g.colors.primary.main};
    border: solid 1px ${g.colors.primary.main};
    color: ${g.colors.primary.contrastText};
  `,md:(0,n.css)`
    padding: ${g.spacing(.5,1)};
    min-width: ${g.spacing(8)};
  `,sm:(0,n.css)`
    padding: ${g.spacing(.3,.5)};
    min-width: 52px;
  `,muted:(0,n.css)`
    opacity: 0.5;
  `})},89066:(J,R,e)=>{"use strict";e.d(R,{Z:()=>d});var n=e(41407),a=e(39953),l=e(82803),r=e(12608),o=e(44351),g=e(905);const m=["$",".",'"'];function d({input:y,delimiter:s=["{{","}}"]}){const v=(0,l.wW)(h),[C,D]=s,M=new RegExp(`(?<before>.*?)(${C}(?<token>.*?)${D}|$)`,"gm"),P=y.split(`
`),x=[];return P.forEach((S,I)=>{Array.from(S.matchAll(M)).forEach((O,A)=>{const B=O.groups?.before,b=O.groups?.token?.trim();if(B&&x.push(a.createElement("span",{key:`${I}-${A}-before`},B)),b){const W=p(b),V=W==="variable"?b:"",w=`${C} ${b} ${D}`;x.push(a.createElement(i,{key:`${I}-${A}-token`,content:w,type:W,description:V}))}}),x.push(a.createElement("br",{key:`${I}-newline`}))}),a.createElement("span",{className:v.wrapper},x)}var u=(y=>(y.Variable="variable",y.Function="function",y.Keyword="keyword",y.Unknown="unknown",y))(u||{});function i({content:y,description:s,type:v}){const C=(0,l.wW)(h),D=!v;return a.createElement(o.z,{placement:"top-start",disabled:D,content:a.createElement("div",{className:C.hoverTokenItem},a.createElement(r.C,{tabIndex:0,text:a.createElement(a.Fragment,null,v),color:"blue"})," ",s&&a.createElement("code",null,s))},a.createElement("span",null,a.createElement(r.C,{tabIndex:0,className:C.token,text:y,color:"blue"})))}function f(y){return m.some(s=>y.startsWith(s))}function c(y){return g.keywords.some(s=>y.startsWith(s))}function E(y){return g.builtinFunctions.some(s=>y.startsWith(s))}function p(y){let s;return f(y)?s="variable":c(y)?s="keyword":E(y)?s="function":s="unknown",s}const h=y=>({wrapper:(0,n.css)`
    white-space: pre-wrap;
  `,token:(0,n.css)`
    cursor: default;
    font-family: ${y.typography.fontFamilyMonospace};
  `,popover:(0,n.css)`
    border-radius: ${y.shape.radius.default};
    box-shadow: ${y.shadows.z3};
    background: ${y.colors.background.primary};
    border: 1px solid ${y.colors.border.medium};

    padding: ${y.spacing(1)};
  `,hoverTokenItem:(0,n.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${y.spacing(1)};
  `})},97453:(J,R,e)=>{"use strict";e.d(R,{t:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=({children:g,className:m})=>{const d=(0,l.wW)(o);return a.createElement("div",{className:(0,n.cx)(d.wrapper,m)},g)},o=g=>({wrapper:(0,n.css)`
    background-color: ${g.components.panel.background};
    border: solid 1px ${g.components.input.borderColor};
    border-radius: ${g.shape.radius.default};
    padding: ${g.spacing(.5,1)};
    font-family: ${g.typography.fontFamilyMonospace};
  `})},66706:(J,R,e)=>{"use strict";e.d(R,{Z:()=>g});var n=e(71757),a=e.n(n),l=e(39953),r=e(82803),o=e(57716);const g=({group:m})=>{const d=(0,r.wW)(o.r),u=m.alerts.length,i=m.alerts.reduce((f,c)=>(f[c.status.state]?f[c.status.state]+=1:f[c.status.state]=1,f),{});return l.createElement("div",null,`${u} ${a()("alert",u)}: `,Object.entries(i).map(([f,c],E)=>l.createElement("span",{key:`${JSON.stringify(m.labels)}-notifications-${E}`,className:d[f]},E>0&&", ",`${c} ${f}`)))}},3879:(J,R,e)=>{"use strict";e.d(R,{F:()=>E});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(27366),g=e(54538),m=e(82803),d=e(12190),u=e(36495),i=e(69865),f=e(38637),c=e(79517);const E=({className:h,onFilterChange:y,defaultQueryString:s})=>{const v=(0,m.wW)(p),C=(0,r.useMemo)(()=>(0,a.debounce)(M=>{(0,g.PN)(c.z7.filterByLabel);const P=M.currentTarget;y(P.value)},600),[y]);(0,r.useEffect)(()=>C.cancel(),[C]);const D=r.createElement(d.J,{name:"search"});return r.createElement("div",{className:h},r.createElement(u._,null,r.createElement(o.K,{gap:.5},r.createElement("span",null,"Search by label"),r.createElement(i.u,{content:r.createElement("div",null,"Filter alerts using label querying, ex:",r.createElement("pre",null,'{severity="critical", instance=~"cluster-us-.+"}'))},r.createElement(d.J,{className:v.icon,name:"info-circle",size:"sm"})))),r.createElement(f.I,{placeholder:"Search",defaultValue:s,onChange:C,"data-testid":"search-query-input",prefix:D,className:v.inputWidth}))},p=h=>({icon:(0,n.css)`
    margin-right: ${h.spacing(.5)};
  `,inputWidth:(0,n.css)`
    width: 340px;
    flex-grow: 0;
  `})},905:(J,R,e)=>{"use strict";e.r(R),e.d(R,{AlertmanagerTemplateFunction:()=>a,availableAlertManagerFunctions:()=>l,builtinFunctions:()=>o,conf:()=>d,keywords:()=>g,language:()=>m});var n=(u=>(u.Delimiter="delimiter",u.Keyword="keyword",u.Function="type.identifier",u.String="string",u.Variable="variable.name",u.Number="number",u.Comment="comment",u.Operator="operator",u.Identifier="idenfifier",u))(n||{}),a=(u=>(u.toUpper="toUpper",u.toLower="toLower",u.title="title",u.join="join",u.match="match",u.safeHtml="safeHtml",u.reReplaceAll="reReplaceAll",u.stringSlice="stringSlice",u))(a||{});const l=Object.values(a),o=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],g=["define","if","else","end","range","break","continue","template","block","with"],m={defaultToken:"",keywords:g,functions:[...o,...l],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},d={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},20850:(J,R,e)=>{"use strict";e.d(R,{o:()=>c});var n=e(39953),a=e(36822),l=e(92403),r=e(15032),o=e(4353),g=e(47224),m=e(50287),d=e(75825),u=e(40700);const i=({instance:p})=>{const h=(0,m.$9)(p.annotations),y=(0,m.XW)(h);return n.createElement("div",null,p.value&&n.createElement(u.C,{label:"Value",horizontal:!0},p.value),h.map(([s,v])=>n.createElement(d.a,{key:s,annotationKey:s,value:v,valueLink:y.get(s)})))};var f=e(10162);const c=({instances:p,pagination:h,footerRow:y})=>{const s=(0,n.useMemo)(()=>p.length>1?(0,a.FT)(p.map(C=>C.labels)):{},[p]),v=(0,n.useMemo)(()=>p.map(C=>({data:{...C,commonLabels:s},id:(0,r.pB)(C)})),[s,p]);return n.createElement(g.t,{cols:E,isExpandable:!0,items:v,renderExpandedContent:({data:C})=>n.createElement(i,{instance:C}),pagination:h,footerRow:y})},E=[{id:"state",label:"State",renderCell:({data:{state:p}})=>n.createElement(f.l,{state:p}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{labels:p,commonLabels:h}})=>n.createElement(o.s,{labels:p,commonLabels:h,size:"sm"})},{id:"created",label:"Created",renderCell:({data:{activeAt:p}})=>n.createElement(n.Fragment,null,p.startsWith("0001")?"-":(0,l.CQ)(p).format("YYYY-MM-DD HH:mm:ss")),size:"150px"}]},10162:(J,R,e)=>{"use strict";e.d(R,{l:()=>r});var n=e(39953),a=e(15032),l=e(47624);const r=n.memo(({state:o,isPaused:g=!1,size:m="md",muted:d=!1})=>n.createElement(l.i,{state:(0,a.Aq)(o),size:m,muted:d},(0,a.SS)(o)," ",g?" (Paused)":""));r.displayName="AlertStateTag"},49376:(J,R,e)=>{"use strict";e.d(R,{_:()=>d});var n=e(41407),a=e(39953),l=e(53721),r=e(82803),o=e(32840),g=e(4919),m=e(30391);function d({identifier:f,isProvisioned:c,onDismiss:E}){const p=(0,r.wW)(i),[h,y]=(0,a.useState)(c?"confirm":"redirect");if(h==="redirect"){const s=`/alerting/new?copyFrom=${m.$V(f)}`;return a.createElement(l.l_,{to:s,push:!0})}return a.createElement(o.s,{isOpen:h==="confirm",title:"Copy provisioned alert rule",body:a.createElement("div",null,a.createElement("p",null,"The new rule will ",a.createElement("span",{className:p.bold},"NOT")," be marked as a provisioned rule."),a.createElement("p",null,"You will need to set a new evaluation group for the copied rule because the original one has been provisioned and cannot be used for rules created in the UI.")),confirmText:"Copy",onConfirm:()=>y("redirect"),onDismiss:E})}const u=a.forwardRef(({text:f,ruleIdentifier:c,isProvisioned:E,className:p},h)=>{const[y,s]=(0,a.useState)(!1);return a.createElement(a.Fragment,null,a.createElement(g.zx,{title:"Copy",className:p,size:"sm",key:"clone",variant:"secondary",icon:"copy",onClick:()=>s(!0),ref:h},f),y&&a.createElement(d,{identifier:c,isProvisioned:E,onDismiss:()=>s(!1)}))});u.displayName="CloneRuleButton";const i=f=>({bold:(0,n.css)`
    font-weight: ${f.typography.fontWeightBold};
  `})},61403:(J,R,e)=>{"use strict";e.d(R,{Ii:()=>C,gr:()=>v});var n=e(41407),a=e(39953),l=e(48069),r=e(92403),o=e(82803),g=e(69865),m=e(32566),d=e(50287),u=e(15032),i=e(66793),f=e(4353),c=e(40700),E=e(17539),p=e(87109),h=e(93698),y=e(1603),s=e(76121);const v=15,C=({rule:P})=>{const x=(0,o.wW)(M),{namespace:{rulesSource:S}}=P,I=(0,d.$9)(P.annotations);return a.createElement("div",null,a.createElement(E.f,{rule:P,rulesSource:S,isViewMode:!1}),a.createElement("div",{className:x.wrapper},a.createElement("div",{className:x.leftSide},a.createElement(D,{rule:P}),!!P.labels&&!!Object.keys(P.labels).length&&a.createElement(c.C,{label:"Labels",horizontal:!0},a.createElement(f.s,{labels:P.labels})),a.createElement(y.C,{rulesSource:S,rule:P,annotations:I}),a.createElement(p.J,{annotations:I})),a.createElement("div",{className:x.rightSide},a.createElement(h.C,{rulesSource:S,rule:P}))),a.createElement(s.M,{rule:P,itemsDisplayLimit:v}))},D=({rule:P})=>{let x,S=P.group.interval,I=P.promRule?.lastEvaluation,T=P.promRule?.evaluationTime;return(0,u.yF)(P.rulerRule)||(x=P.rulerRule?.for),a.createElement(a.Fragment,null,S&&a.createElement(c.C,{label:"Evaluate",horizontal:!0},"Every ",S),x&&a.createElement(c.C,{label:"For",horizontal:!0},x),I&&!(0,i.gV)(I)&&a.createElement(c.C,{label:"Last evaluation",horizontal:!0},a.createElement(g.u,{placement:"top",content:`${(0,l.dq)(I,{format:"YYYY-MM-DD HH:mm:ss"})}`,theme:"info"},a.createElement("span",null,`${(0,r.CQ)(I).locale("en").fromNow(!0)} ago`))),I&&!(0,i.gV)(I)&&T!==void 0&&a.createElement(c.C,{label:"Evaluation time",horizontal:!0},a.createElement(g.u,{placement:"top",content:`${T}s`,theme:"info"},a.createElement("span",null,(0,m.q)({timeInMs:T*1e3,humanize:!0})))))},M=P=>({wrapper:(0,n.css)`
    display: flex;
    flex-direction: row;

    ${P.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,leftSide:(0,n.css)`
    flex: 1;
  `,rightSide:(0,n.css)`
    ${P.breakpoints.up("md")} {
      padding-left: 90px;
      width: 300px;
    }
  `})},17539:(J,R,e)=>{"use strict";e.d(R,{f:()=>ae});var n=e(41407),a=e(86832),l=e(39953),r=e(53721),o=e(28425),g=e(69307),m=e(32688),d=e(82803),u=e(4919),i=e(36210),f=e(13767),c=e(12223),E=e(58047),p=e(12190),h=e(32840),y=e(90634),s=e(97125),v=e(47858),C=e(57721),D=e(17330),M=e(37546),P=e(41222),x=e(73075);const S=(0,l.lazy)(()=>e.e(3634).then(e.bind(e,13634))),I=(0,l.lazy)(()=>e.e(9007).then(e.bind(e,34132)));var T=(oe=>(oe.Loki="loki",oe.Annotations="annotations",oe))(T||{});function O(){const[oe,te]=(0,l.useState)(!1),[fe,Te]=(0,l.useState)(),ge=(0,d.wW)(A),he=m.config.unifiedAlerting.alertStateHistoryBackend,me=m.config.unifiedAlerting.alertStateHistoryPrimary,ue=[he,me].some(Ne=>Ne==="loki")?"loki":"annotations",Oe=(0,l.useCallback)(()=>{Te(void 0),te(!1)},[]),Ue=(0,l.useCallback)(Ne=>{Te(Ne),te(!0)},[]);return{StateHistoryModal:(0,l.useMemo)(()=>fe?l.createElement(x.u,{isOpen:oe,onDismiss:Oe,closeOnBackdropClick:!0,closeOnEscape:!0,title:"State history",className:ge.modal,contentClassName:ge.modalContent},l.createElement(l.Suspense,{fallback:"Loading..."},ue==="loki"&&l.createElement(I,{ruleUID:fe.grafana_alert.uid}),ue==="annotations"&&l.createElement(S,{alertId:fe.grafana_alert.id??""}))):null,[fe,oe,Oe,ue,ge]),showStateHistoryModal:Ue,hideStateHistoryModal:Oe}}const A=oe=>({modal:(0,n.css)`
    width: 80%;
    height: 80%;
    min-width: 800px;
  `,modalContent:(0,n.css)`
    height: 100%;
    width: 100%;
    padding: ${oe.spacing(2)};
  `});var B=e(79493),b=e(60703),W=e(14949),V=e(63483),w=e(95712),K=e(76716),z=e(30391),G=e(15032),Q=e(24597),j=e(69865),F=e(17241),k=e(11272),_=e(34383);const Y=({title:oe="",severity:te="",url:fe=""})=>{const Te=(0,_.d)(k.W.Incident,"/incidents/declare",{title:oe,severity:te,url:fe}),{loading:ge,installed:he,settings:me}=(0,F.n)(k.W.Incident);return l.createElement(l.Fragment,null,ge===!0&&l.createElement(u.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident"),he===!1&&l.createElement(j.u,{content:"Grafana Incident is not installed or is not configured correctly"},l.createElement(u.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident")),me&&l.createElement(u.Qj,{icon:"fire",size:"sm",type:"button",href:Te},"Declare Incident"))};var Z=e(49376);const ae=({rule:oe,rulesSource:te,isViewMode:fe})=>{const Te=(0,d.wW)(De),{namespace:ge,group:he,rulerRule:me}=oe,{StateHistoryModal:ye,showStateHistoryModal:ue}=O(),Oe=(0,C.useDispatch)(),Ue=(0,r.TH)(),at=(0,y.iG)(),[Ne,_e]=(0,l.useState)(),[Ke,et]=(0,l.useState)(void 0),ze=(0,w.HY)(te)?te:(0,W.Xy)(te.jsonData.alertmanagerUid)?.name,je=s.contextSrv.hasPermission(C.AccessControlAction.DataSourcesExplore),Qe=[],We=[],ke=[],ot=()=>{if(Ne&&Ne.rulerRule){const re=z.Zk((0,w.EG)(Ne.namespace.rulesSource),Ne.namespace.name,Ne.group.name,Ne.rulerRule);Oe((0,B.hS)(re,{navigateTo:fe?"/alerting/list":void 0})),_e(void 0)}},lt=(0,G.Jq)(he),Ct=(0,w.EG)(te),wt=(0,G.Pc)(oe.rulerRule)&&!!oe.rulerRule.grafana_alert.provenance,Lt=(0,G.x_)(oe.promRule)&&oe.promRule.state===D.x_.Firing,Ye=(0,b.Bz)(Ct),Be=s.contextSrv.hasPermission(Ye.create),{isEditable:Le,isRemovable:le}=(0,P.M)(Ct,me),de=q(oe),X=()=>(0,K.t6)(te,oe),se=Ue.pathname+Ue.search;if((0,w.jq)(te)&&je&&!lt&&Qe.push(l.createElement(u.Qj,{size:"sm",key:"explore",variant:"primary",icon:"chart-line",target:"__blank",href:(0,K.mH)(te,oe.query)},"See graph")),oe.annotations[V.q6.runbookURL]&&Qe.push(l.createElement(u.Qj,{size:"sm",key:"runbook",variant:"primary",icon:"book",target:"__blank",href:o.QX.sanitizeUrl(oe.annotations[V.q6.runbookURL])},"View runbook")),oe.annotations[V.q6.dashboardUID]){const re=oe.annotations[V.q6.dashboardUID];if(re){Qe.push(l.createElement(u.Qj,{size:"sm",key:"dashboard",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(re)}`},"Go to dashboard"));const pe=oe.annotations[V.q6.panelID];pe&&Qe.push(l.createElement(u.Qj,{size:"sm",key:"panel",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(re)}?viewPanel=${encodeURIComponent(pe)}`},"Go to panel"))}}if(de&&ze&&Qe.push(l.createElement(u.Qj,{size:"sm",key:"silence",icon:"bell-slash",target:"__blank",href:(0,K.Vv)(ze,oe)},"Silence")),(0,G.Pc)(oe.rulerRule)&&Qe.push(l.createElement(l.Fragment,{key:"history"},l.createElement(u.zx,{size:"sm",icon:"history",onClick:()=>(0,G.Pc)(oe.rulerRule)&&ue(oe.rulerRule)},"Show state history"),ye)),Lt&&ce()&&Qe.push(l.createElement(l.Fragment,{key:"declare-incident"},l.createElement(Y,{title:oe.name,url:X()}))),fe&&me){const re=(0,w.EG)(te),pe=z.Zk(re,ge.name,he.name,me);if(Le&&!lt&&(We.push(l.createElement(i.m,{key:"copy",icon:"copy",onClipboardError:be=>{at.error("Error while copying URL",be)},size:"sm",getText:X},"Copy link to rule")),!wt)){const be=g.Cj.renderUrl(`${m.config.appSubUrl}/alerting/${encodeURIComponent(z.$V(pe))}/edit`,{returnTo:se});We.push(l.createElement(u.Qj,{size:"sm",key:"edit",variant:"secondary",icon:"pen",href:be},"Edit"))}if((0,G.Pc)(me)){const be=(0,Q.u)(`/alerting/${encodeURIComponent(z.$V(pe))}/modify-export`);ke.push(l.createElement(f.v.Item,{label:"Modify export",icon:"edit",url:be}))}Be&&!lt&&ke.push(l.createElement(f.v.Item,{label:"Duplicate",icon:"copy",onClick:()=>et({identifier:pe,isProvisioned:wt})})),le&&!lt&&!wt&&(ke.push(l.createElement(f.v.Divider,null)),ke.push(l.createElement(f.v.Item,{key:"delete",label:"Delete",icon:"trash-alt",onClick:()=>_e(oe)})))}return Qe.length||We.length||ke.length?l.createElement(l.Fragment,null,l.createElement("div",{className:Te.wrapper},l.createElement(c.Lh,{width:"auto"},Qe.length?Qe:l.createElement("div",null)),l.createElement(c.Lh,{width:"auto"},We.length&&We,ke.length&&l.createElement(E.L,{overlay:l.createElement(f.v,null,ke.map(re=>l.createElement(l.Fragment,{key:(0,a.uniqueId)("action_")},re)))},l.createElement(u.zx,{variant:"secondary",size:"sm"},"More",l.createElement(p.J,{name:"angle-down"}))))),!!Ne&&l.createElement(h.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:ot,onDismiss:()=>_e(void 0)}),Ke&&l.createElement(Z._,{identifier:Ke.identifier,isProvisioned:Ke.isProvisioned,onDismiss:()=>et(void 0)})):null};function ce(){return!(0,K.Vj)()||(0,K.mt)()}function q(oe){const te=(0,G.Pc)(oe.rulerRule),{useGetAlertmanagerChoiceStatusQuery:fe}=M.alertmanagerApi,{currentData:Te,isLoading:ge}=fe(void 0,{skip:!te});if(!te||ge)return!1;const he=s.contextSrv.hasPermission(C.AccessControlAction.AlertingInstanceCreate),me=Te?.alertmanagersChoice===v.TE.External,ye=Te?.alertmanagersChoice===v.TE.All;return he&&(!me||ye)}const De=oe=>({wrapper:(0,n.css)`
    padding: ${oe.spacing(2)} 0;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    flex-wrap: wrap;
    border-bottom: solid 1px ${oe.colors.border.medium};
  `})},87109:(J,R,e)=>{"use strict";e.d(R,{J:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(50287),o=e(75825);function g(d){const u=(0,l.wW)(m),{annotations:i}=d,f=(0,r.XW)(i);return i.length===0?null:a.createElement("div",{className:u.annotations},i.map(([c,E])=>a.createElement(o.a,{key:c,annotationKey:c,value:E,valueLink:f.get(c)})))}const m=()=>({annotations:(0,n.css)`
    margin-top: 46px;
  `})},93698:(J,R,e)=>{"use strict";e.d(R,{C:()=>u});var n=e(41407),a=e(39953),l=e(26205),r=e(82803),o=e(29409),g=e(95712),m=e(15032),d=e(40700);function u(f){const{rulesSource:c,rule:E}=f,p=(0,r.wW)(i),h=(0,a.useMemo)(()=>{if((0,g.jq)(c))return[{name:c.name,icon:c.meta.info.logos.small}];if((0,m.Pc)(E.rulerRule)){const{data:y}=E.rulerRule.grafana_alert,s=y.reduce((v,C)=>{const D=(0,l.F)().getInstanceSettings(C.datasourceUid);return!D||D.uid===o.Yq||(v[D.name]={name:D.name,icon:D.meta.info.logos.small}),v},{});return Object.values(s)}return[]},[E,c]);return h.length===0?null:a.createElement(d.C,{label:"Data source"},h.map(({name:y,icon:s},v)=>a.createElement("div",{key:y},s&&a.createElement(a.Fragment,null,a.createElement("img",{alt:`${y} datasource logo`,className:p.dataSourceIcon,src:s})," "),y)))}function i(f){const c=f.spacing(2);return{dataSourceIcon:(0,n.css)`
      width: ${c};
      height: ${c};
    `}}},1603:(J,R,e)=>{"use strict";e.d(R,{C:()=>y});var n=e(41407),a=e(39953),l=e(95712),r=e(40700),o=e(10963),g=e(19661),m=e(59608),d=e(64225),u=e(82803),i=e(88553),f=e(49403),c=e(97453);const E=({language:v,expr:C})=>{const D=(0,a.useMemo)(()=>[(0,m.Z)({onlyIn:P=>"type"in P&&P.type==="code_block",getSyntax:()=>v},{...o.languages,[v]:v==="logql"?i.ZP:f.ZP})],[v]),M=(0,a.useMemo)(()=>(0,d.l1)(C),[C]);return a.createElement(g.ML,{"data-testid":"expression-editor",plugins:D,value:M})},p=({expression:v,rulesSource:C})=>{const D=(0,u.wW)(h);return a.createElement(c.t,{className:(0,n.cx)(D.well,"slate-query-field")},(0,l.jq)(C)?a.createElement(E,{expr:v,language:C.type===l.ye.Loki?"logql":"promql"}):v)},h=v=>({well:(0,n.css)`
    font-family: ${v.typography.fontFamilyMonospace};
  `});function y(v){const{annotations:C,rulesSource:D,rule:M}=v,P=s();return(0,l.jq)(D)?a.createElement(r.C,{label:"Expression",horizontal:!0,className:(0,n.cx)({[P.exprRow]:!!C.length})},a.createElement(p,{expression:M.query,rulesSource:D})):null}const s=()=>({exprRow:(0,n.css)`
    margin-bottom: 46px;
  `})},76121:(J,R,e)=>{"use strict";e.d(R,{M:()=>x});var n=e(41407),a=e(86832),l=e(39953),r=e(53721),o=e(82803),g=e(4919),m=e(3879),d=e(51064),u=e(36495),i=e(20454),f=e(17330);const c=({className:T,onStateFilterChange:O,stateFilter:A,filterType:B,itemPerStateStats:b})=>{const W=(0,o.wW)(E),V=Q=>function(){return b&&b[Q]?l.createElement(d.V,{name:b[Q].toFixed(0),colorIndex:9,className:W.tag}):null},w=Object.values(f.bj).map(Q=>({label:Q,value:Q,component:V(Q)})),z=[f.x_.Firing,f.x_.Pending].map(Q=>({label:(0,a.capitalize)(Q),value:Q,component:V(Q)})),G=B==="grafana"?w:z;return l.createElement("div",{className:T,"data-testid":"alert-instance-state-filter"},l.createElement(u._,null,"State"),l.createElement(i.S,{options:G,value:A,onChange:O,onClick:Q=>{Q===A&&O(void 0)}}))};function E(T){return{tag:(0,n.css)`
      font-size: 11px;
      font-weight: normal;
      padding: ${T.spacing(.25,.5)};
      vertical-align: middle;
      margin-left: ${T.spacing(.5)};
    `}}var p=e(14949),h=e(76716),y=e(3),s=e(95712),v=e(15032),C=e(40700),D=e(20850),M=e(8896);function P(T){const O=(0,o.wW)(I),{onClick:A,stats:B}=T;return l.createElement("div",{className:O.footerRow},l.createElement("div",null,"Showing ",B.visibleItemsCount," out of ",B.totalItemsCount," instances"),l.createElement(g.zx,{size:"sm",variant:"secondary","data-testid":"show-all",onClick:A},"Show all ",B.totalItemsCount," alert instances"))}function x(T){const O=(0,r.k6)(),{rule:{promRule:A,namespace:B,instanceTotals:b},itemsDisplayLimit:W=Number.POSITIVE_INFINITY,pagination:V,enableFiltering:w=!1}=T,[K,z]=(0,l.useState)(),[G,Q]=(0,l.useState)(),[j]=(0,l.useState)(Math.floor(Math.random()*100)),F=`queryString-${j}`,k=(0,o.wW)(I),_=(0,s.HY)(B.rulesSource)?s.GC:"prometheus",Y=(0,l.useMemo)(()=>(0,v.x_)(A)&&A.alerts?.length?S(K,G,(0,h.Zl)(y.As.Importance,A.alerts)):[],[A,G,K]);if(!(0,v.x_)(A))return null;const Z=Y.slice(0,W),ae=(0,a.countBy)(A.alerts,me=>(0,f.ED)(me.state)),ce=(0,a.sum)(Object.values(b)),q=ce-Z.length,De={totalItemsCount:ce,visibleItemsCount:Z.length},oe=(0,h.V2)(B.rulesSource,T.rule,location.pathname+location.search),te=(0,M.r0)(b),ge=w?()=>Q(void 0):()=>O.push(oe),he=q?l.createElement(P,{stats:De,onClick:ge}):void 0;return l.createElement(C.C,{label:"Matching instances",horizontal:!0},w&&l.createElement("div",{className:(0,n.cx)(k.flexRow,k.spaceBetween)},l.createElement("div",{className:k.flexRow},l.createElement(m.F,{className:k.rowChild,key:F,defaultQueryString:K,onFilterChange:me=>z(me)}),l.createElement(c,{className:k.rowChild,filterType:_,stateFilter:G,onStateFilterChange:Q,itemPerStateStats:ae}))),!w&&l.createElement("div",{className:k.stats},te),l.createElement(D.o,{instances:Z,pagination:V,footerRow:he}))}function S(T,O,A){let B=[...A];if(T){const b=(0,p.Zh)(T||"");B=B.filter(({labels:W})=>(0,p.eD)(W,b))}return O&&(B=B.filter(b=>(0,f.ED)(b.state)===O)),B}const I=T=>({flexRow:(0,n.css)`
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      width: 100%;
      flex-wrap: wrap;
      margin-bottom: ${T.spacing(1)};
    `,spaceBetween:(0,n.css)`
      justify-content: space-between;
    `,rowChild:(0,n.css)`
      margin-right: ${T.spacing(1)};
    `,footerRow:(0,n.css)`
      display: flex;
      flex-direction: column;
      gap: ${T.spacing(1)};
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,instancesContainer:(0,n.css)`
      margin-bottom: ${T.spacing(2)};
    `,stats:(0,n.css)`
      display: flex;
      gap: ${T.spacing(1)};
      padding: ${T.spacing(1,0)};
    `})},8896:(J,R,e)=>{"use strict";e.d(R,{Pb:()=>c,WN:()=>f,r0:()=>E});var n=e(86832),a=e.n(n),l=e(71757),r=e.n(l),o=e(39953),g=e(27366),m=e(12608),d=e(70751),u=e(17330);const i={recording:0,alerting:0,[u.x_.Pending]:0,[u.x_.Inactive]:0,paused:0,error:0,nodata:0},f=({namespaces:p})=>{const h={...i};p.forEach(({groups:C})=>{C.forEach(D=>{const M=(0,n.omitBy)(D.totals,n.isUndefined);for(let P in M)h[P]+=M[P]})});const y=E(h),s=!!y.length,v=(0,n.sum)(Object.values(h));return y.unshift(o.createElement(o.Fragment,{key:"total"},v," ",r()("rule",v))),o.createElement(g.K,{direction:"row"},s&&o.createElement("div",null,o.createElement(g.K,{gap:.5},y)))},c=({group:p})=>{const h=p.totals,y=p?.interval,s=E(h),v=!!s.length;return o.createElement(g.K,{direction:"row"},v&&o.createElement("div",null,o.createElement(g.K,{gap:.5},s)),y&&o.createElement(o.Fragment,null,o.createElement("div",null,"|"),o.createElement(m.C,{text:y,icon:"clock-nine",color:"blue"})))};function E(p){const h=[];return p[d.P.Alerting]&&h.push(o.createElement(m.C,{color:"red",key:"firing",text:`${p[d.P.Alerting]} firing`})),p.error&&h.push(o.createElement(m.C,{color:"red",key:"errors",text:`${p.error} errors`})),p.nodata&&h.push(o.createElement(m.C,{color:"blue",key:"nodata",text:`${p.nodata} no data`})),p[d.P.Pending]&&h.push(o.createElement(m.C,{color:"orange",key:"pending",text:`${p[d.P.Pending]} pending`})),p[d.P.Normal]&&p.paused&&h.push(o.createElement(m.C,{color:"green",key:"paused",text:`${p[d.P.Normal]} normal (${p.paused} paused)`})),p[d.P.Normal]&&!p.paused&&h.push(o.createElement(m.C,{color:"green",key:"inactive",text:`${p[d.P.Normal]} normal`})),p.recording&&h.push(o.createElement(m.C,{color:"purple",key:"recording",text:`${p.recording} recording`})),h}},52106:(J,R,e)=>{"use strict";e.d(R,{DD:()=>C,Fm:()=>s,K$:()=>f,Kd:()=>E,ZP:()=>v,Zo:()=>u,bU:()=>i});var n=e(86832),a=e.n(n),l=e(39953),r=e(70751),o=e(17330),g=e(95712),m=e(15032),d=e(26544);function u(T,O){const A=(0,d._)(V=>V.promRules),B=(0,d._)(V=>V.rulerRules),b=(0,l.useRef)({}),W=(0,l.useMemo)(()=>{if(T){const V=(0,g.o_)(T);if(!V)throw new Error(`Unknown rules source: ${T}`);return[V]}return(0,g.h_)()},[T]);return(0,l.useMemo)(()=>W.map(V=>{const w=(0,g.jq)(V)?V.name:V,K=B[w]?.result;let z=A[w]?.result;w===g.GC&&O&&(z=O);const G=b.current[w];if(G&&G.promRules===z&&G.rulerRules===K)return G.result;const Q={};Object.entries(K||{}).forEach(([F,k])=>{const _={rulesSource:V,name:F,groups:[]};Q[F]=_,h(_,k)}),z?.forEach(({name:F,groups:k})=>{const _=Q[F]=Q[F]||{rulesSource:V,name:F,groups:[]};y(_,k)});const j=Object.values(Q);return b.current[w]={promRules:z,rulerRules:K,result:j},j}).flat(),[A,B,W,O])}function i(T,O,A){const B={};return Object.entries(A||{}).forEach(([b,W])=>{const V={rulesSource:T,name:b,groups:[]};B[b]=V,h(V,W)}),O?.forEach(({name:b,groups:W})=>{const V=B[b]=B[b]||{rulesSource:T,name:b,groups:[]};y(V,W)}),Object.values(B)}function f(T,O,A){const B={rulesSource:T,name:O.name,groups:[]};return h(B,A),y(B,O.groups),B.groups.forEach(b=>{b.rules=b.rules.filter(W=>W.promRule)}),B}function c(T,O,A){return h(T,A),y(T,O),T}function E(T){return T.map(O=>{const A={...O,groups:[]};return A.groups.push({name:"default",rules:p(O.groups.flatMap(B=>B.rules)),totals:D(O.groups)}),A})}function p(T){return T.sort((O,A)=>O.name.localeCompare(A.name))}function h(T,O=[]){T.groups=O.map(A=>{const B=A.rules.filter(V=>(0,m.yF)(V)).length,b=A.rules.filter(V=>(0,m.Pc)(V)&&V.grafana_alert.is_paused).length,W={name:A.name,interval:A.interval,source_tenants:A.source_tenants,rules:[],totals:{paused:b,recording:B}};return W.rules=A.rules.map(V=>P(V,T,W)),W})}function y(T,O){const A=new Map;T.groups.forEach(B=>A.set(B.name,B)),O.forEach(B=>{let b=A.get(B.name);b||(b={name:B.name,rules:[],totals:C(B)},T.groups.push(b),A.set(B.name,b)),b.totals={...b.totals,...C(B)};const W=new Map;b.rules.forEach(V=>{const w=W.get(V.name);w?w.push(V):W.set(V.name,[V])}),(B.rules??[]).forEach(V=>{const w=x(V,W,T.rulesSource);w?(w.promRule=V,w.instanceTotals=(0,m.x_)(V)?s(V):{},w.filteredInstanceTotals=(0,m.x_)(V)?v(V):{}):b.rules.push(M(V,T,b))})})}function s(T){const O=(0,n.countBy)(T.alerts,"state");if(T.totals){const{normal:A,...B}=T.totals;return{...B,inactive:A}}return{alerting:O[r.P.Alerting],pending:O[r.P.Pending],inactive:O[r.P.Normal],nodata:O[r.P.NoData],error:O[r.P.Error]+O.err}}function v(T){if(T.totalsFiltered){const{normal:O,...A}=T.totalsFiltered;return{...A,inactive:O}}return{}}function C(T){if(T.totals){const{firing:b,...W}=T.totals;return{...W,alerting:b}}const O=(0,n.countBy)(T.rules,b=>(0,m.x_)(b)&&b.state),A=(0,n.countBy)(T.rules,b=>b.health),B=T.rules.filter(b=>(0,m.OP)(b)).length;return{alerting:O[o.x_.Firing],error:A.error,nodata:A.nodata,inactive:O[o.x_.Inactive],pending:O[o.x_.Pending],recording:B}}function D(T){const O={};return T.forEach(A=>{const B=A.totals;Object.entries(B).forEach(([b,W])=>{O[b]||(O[b]=0),O[b]+=W})}),O}function M(T,O,A){return{name:T.name,query:T.query,labels:T.labels||{},annotations:(0,m.x_)(T)?T.annotations||{}:{},promRule:T,namespace:O,group:A,instanceTotals:(0,m.x_)(T)?s(T):{},filteredInstanceTotals:(0,m.x_)(T)?v(T):{}}}function P(T,O,A){return(0,m.cG)(T)?{name:T.alert,query:T.expr,labels:T.labels||{},annotations:T.annotations||{},rulerRule:T,namespace:O,group:A,instanceTotals:{},filteredInstanceTotals:{}}:(0,m.yF)(T)?{name:T.record,query:T.expr,labels:T.labels||{},annotations:{},rulerRule:T,namespace:O,group:A,instanceTotals:{},filteredInstanceTotals:{}}:{name:T.grafana_alert.title,query:"",labels:T.labels||{},annotations:T.annotations||{},rulerRule:T,namespace:O,group:A,instanceTotals:{},filteredInstanceTotals:{}}}function x(T,O,A){const B=O.get(T.name);if(!B)return;if((0,g.HY)(A))return B[0];const b=B.find(V=>!V.promRule&&S(V,T,!0));if(b)return b;const W=B.find(V=>!V.promRule&&S(V,T,!1));if(W)return W}function S(T,O,A=!0){return T.name===O.name?(0,n.isEqual)([A?I(T.query):"",T.labels,T.annotations],[A?I(O.query):"",O.labels||{},(0,m.x_)(O)?O.annotations||{}:{}]):!1}function I(T){return T.length>1&&T[0]==="("&&T[T.length-1]===")"&&(T=T.slice(1,-1)),T=T.replace(/\s|\n/g,""),T.split("").sort().join("")}},13916:(J,R,e)=>{"use strict";e.d(R,{W:()=>g});var n=e(39953),a=e(57721),l=e(79493),r=e(57675),o=e(26544);function g(m){const d=(0,a.useDispatch)(),u=(0,o._)(i=>i.folders);if((0,n.useEffect)(()=>{m&&d((0,l.sw)(m))},[d,m]),m){const i=u[m]||r.oq;return{folder:i.result,loading:i.loading}}return{loading:!1}}},41222:(J,R,e)=>{"use strict";e.d(R,{M:()=>m});var n=e(97125),a=e(14055),l=e(60703),r=e(15032),o=e(13916),g=e(26544);function m(d,u){const i=(0,g._)(D=>D.dataSources),{currentData:f,isLoading:c}=a.T.endpoints.discoverDsFeatures.useQuery({rulesSourceName:d}),E=u&&(0,r.Pc)(u)?u.grafana_alert.namespace_uid:void 0,p=(0,l.Bz)(d),{folder:h,loading:y}=(0,o.W)(E);if(!u)return{isEditable:!1,isRemovable:!1,loading:!1};if((0,r.Pc)(u)){if(!E)throw new Error(`Rule ${u.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`);if(!h)return{isEditable:!1,isRemovable:!1,loading:y};const D=n.contextSrv.hasPermissionInMetadata(p.update,h),M=n.contextSrv.hasPermissionInMetadata(p.delete,h);return{isEditable:D,isRemovable:M,loading:y||c}}const s=!!i[d]?.result?.rulerConfig||!!f?.rulerConfig,v=n.contextSrv.hasPermission(p.update),C=n.contextSrv.hasPermission(p.delete);return{isEditable:v&&s,isRemovable:C&&s,loading:c||i[d]?.loading}}},73278:(J,R,e)=>{"use strict";e.d(R,{h:()=>r});var n=e(86832),a=e.n(n),l=e(39953);function r(o,g=1,m){const[d,u]=(0,l.useState)(g),i=(0,l.useMemo)(()=>(0,n.chunk)(o,m),[o,m]),f=i.length,c=i[d-1]??[],E=(d-1)*m+1,p=(0,n.clamp)(d*m,o.length),h=(0,l.useCallback)(v=>{u((0,n.clamp)(v,1,i.length))},[u,i]),y=(0,l.useCallback)(()=>h(d+1),[d,h]),s=(0,l.useCallback)(()=>h(d-1),[d,h]);return(0,l.useEffect)(()=>u(1),[f]),{page:d,onPageChange:h,numberOfPages:f,pageItems:c,pageStart:E,pageEnd:p,nextPage:y,previousPage:s}}},17241:(J,R,e)=>{"use strict";e.d(R,{n:()=>l});var n=e(20653),a=e(33558);function l(r){const{loading:o,error:g,value:m}=(0,n.Z)(()=>(0,a.a)(r,{showErrorAlert:!1})),d=m&&!g&&!o,u=m?.enabled;return o&&!m?{loading:!0}:!d||!u?{loading:!1,installed:!1}:{loading:o,installed:!0,settings:m}}},26544:(J,R,e)=>{"use strict";e.d(R,{_:()=>a});var n=e(57721);function a(l,r){return(0,n.useSelector)(o=>l(o.unifiedAlerting),r)}},90659:(J,R,e)=>{"use strict";e.d(R,{VG:()=>z,HY:()=>Q,ug:()=>G});var n=e(17330),a=e(15032);const l=1,r=2,o=3,g=4,m=5,d=6,u=7,i=8,f=9,c=10,E=11,p=12,h=0,y=1,s=2,v=3,C=4,D=5,M=6,P=7;var x=e(86832),S=e(48355);const I=S.WQ.deserialize({version:14,states:"!vOQOPOOOrOPO'#ChOOOO'#Ch'#ChOQOPO'#ClOOOO'#Ci'#CiQQOPOOO!gOQO'#C^O!lOPO'#CjO!qOPO,59SOOOO,59W,59WOOOO-E6g-E6gOOOO,58x,58xOOOO,59U,59UOOOO-E6h-E6h",stateData:"$O~ORUOTUOUUOVUOWUOXUOYUOZUOaPOcQO~ObVOR[XT[XU[XV[XW[XX[XY[XZ[Xa[Xc[X~OSZO~Oa[O~ObVOR[aT[aU[aV[aW[aX[aY[aZ[aa[ac[a~OR~T~U~V~W~Y~Z~RZYXWVUTa~",goto:"zaPPbPPPPPPPPPbgmPsVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken FreeFormExpression",maxTerm:19,skippedNodes:[0],repeatNodeCount:2,tokenData:"#$QRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[=b#[#]F[#]#`#Y#`#a!!n#a#b#Y#b#c!+h#c#f#Y#f#g!:f#g#h!Av#h#i!Jp#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQcPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQbPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i/|#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0TeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U1f#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h3O#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4h#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j6Q#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7j#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W9S#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y:l#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:scSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]<O!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR<VcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR=ieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g>z#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@d#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jA|#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBTeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#eCf#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCmcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]Dx!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREPcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRFceSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YGt#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRG{eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#UI^#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRIeeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#aJv#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRJ}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#iL`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]Mx#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNPcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]! [!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! ccSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!!ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!$W#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!$_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!%p#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%weSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!'Y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'aeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(r#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(ycSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!*U!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*]cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!+oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!-Q#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!.j#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!.qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!0S#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!1l#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1seSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!3U#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3]eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!4n#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!6W#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!7p#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!7wcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!9S!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9ZcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!:meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!<O#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!=h#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!?Q#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?XcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!@d!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@kcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!A}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!C`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!Dx#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EPeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!Fb#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!FieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Gz#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HRcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!I^!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IecSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!JweSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n!LY#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LaeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!Mr#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!MyeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y# [#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# ccSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#!n!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#!ucSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:114,nameSpaceFilter:116,labelFilter:118,groupFilter:120,ruleFilter:122,stateFilter:66,typeFilter:124,healthFilter:126},tokenPrec:128}),T={[o]:"datasource",[m]:"namespace",[d]:"label",[i]:"rule",[u]:"group",[f]:"state",[c]:"type",[E]:"health"};var O=(F=>(F.dataSource="dataSourceFilter",F.nameSpace="nameSpaceFilter",F.label="labelFilter",F.group="groupFilter",F.rule="ruleFilter",F.state="stateFilter",F.type="typeFilter",F.health="healthFilter",F))(O||{});function A(F,k,_){V(F,k,Y=>{if(Y.type.id===r){const Z=B(F,Y);if(Z.type&&Z.value){const ae=_[Z.type];ae&&ae(Z.value)}}else if(Y.type.id===p){const Z=_[p];Z&&Z(b(F,Y))}})}function B(F,k){if(k.type.id!==r)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const _=k.firstChild;if(!_)return{type:void 0,value:void 0};const Y=k.getChild(g),Z=Y?(0,x.trim)(b(F,Y),'"'):void 0;return{type:_.type.id,value:Z}}function b(F,k){return F.slice(k.from,k.to).trim().replace(/\"/g,"")}function W(F,k,_){const Y=[];V(F,k,ae=>{ae.type.id===r&&ae.firstChild&&Y.push(ae.firstChild),ae.type.id===p&&Y.push(ae)});let Z=[];return Y.forEach(ae=>{const ce=_.findIndex(q=>q.type===ae.type.id);if(ce!==-1){if(ae.parent?.type.is(r)){const q=T[ae.type.id],De=_.splice(ce,1)[0];Z.push(`${q}:${w(De.value)}`)}if(ae.type.is(p)){const q=_.splice(ce,1)[0];Z.push(q.value)}}}),_.forEach(ae=>{ae.type===p?Z.push(ae.value):Z.push(`${T[ae.type]}:${w(ae.value)}`)}),Z.join(" ")}function V(F,k,_){const Y=k.join(" ");let ae=I.configure({dialect:Y}).parse(F).cursor();do _(ae.node);while(ae.next())}function w(F){return/\s/.test(F)?`"${F}"`:F}const K=[O.dataSource,O.nameSpace,O.label,O.group,O.rule,O.state,O.type,O.health];var z=(F=>(F.Ok="ok",F.Error="error",F.NoData="nodata",F.Unknown="unknown",F))(z||{});function G(F){const k={labels:[],freeFormWords:[],dataSourceNames:[]},_={[o]:Y=>k.dataSourceNames.push(Y),[m]:Y=>k.namespace=Y,[u]:Y=>k.groupName=Y,[i]:Y=>k.ruleName=Y,[d]:Y=>k.labels.push(Y),[f]:Y=>k.ruleState=j(Y),[c]:Y=>(0,a.Wd)(Y)?k.ruleType=Y:void 0,[E]:Y=>k.ruleHealth=(0,a.vU)(Y),[p]:Y=>k.freeFormWords.push(Y)};return A(F,K,_),k}function Q(F,k){const _=[];return k.dataSourceNames&&_.push(...k.dataSourceNames.map(Y=>({type:o,value:Y}))),k.namespace&&_.push({type:m,value:k.namespace}),k.groupName&&_.push({type:u,value:k.groupName}),k.ruleName&&_.push({type:i,value:k.ruleName}),k.ruleState&&_.push({type:f,value:k.ruleState}),k.ruleType&&_.push({type:c,value:k.ruleType}),k.ruleHealth&&_.push({type:E,value:k.ruleHealth}),k.labels&&_.push(...k.labels.map(Y=>({type:d,value:Y}))),k.freeFormWords&&_.push(...k.freeFormWords.map(Y=>({type:p,value:Y}))),W(F,K,_)}function j(F){if(F==="normal")return n.x_.Inactive;if((0,n.I9)(F))return F}},79493:(J,R,e)=>{"use strict";e.d(R,{QY:()=>te,Nc:()=>ye,r0:()=>ue,X4:()=>fe,hS:()=>Y,oE:()=>_,S6:()=>Te,yO:()=>oe,mS:()=>me,ei:()=>j,dV:()=>G,lB:()=>F,dB:()=>De,on:()=>k,zy:()=>b,wE:()=>W,vL:()=>ge,sw:()=>he,Ms:()=>ce,Vj:()=>ae,dn:()=>w,y6:()=>B,UR:()=>V,IA:()=>z,nw:()=>Q,je:()=>K,iH:()=>Ue,wy:()=>Z,D8:()=>Oe,mM:()=>q,hv:()=>at,tg:()=>Ne});var n=e(77960),a=e(86832),l=e(13601),r=e(17330),o=e(20367),g=e(79517),m=e(41272),d=e(37546),u=e(4148);function i(Ke){return(0,u.i)().get("/api/annotations",{alertId:Ke}).then(et=>et?.sort(f))}function f(Ke,et){const ze=(We,ke)=>We>ke?-1:ke>We?1:0,je=ze(Ke.timeEnd,et.timeEnd);if(je)return je;const Qe=ze(Ke.time,et.time);return Qe||ze(Ke.id,et.id)}var c=e(78313),E=e(32490),p=e(32735),h=e(98301),y=e(10235),s=e(14949),v=e(95712),C=e(76716),D=e(57675),M=e(30391),P=e(90839),x=e(15032);function S(Ke){const et=async lt=>{if((0,x.Kl)(lt)){const Ct=await(0,h.m6)(Ke);for(const[wt,Lt]of Object.entries(Ct))for(const Ye of Lt){const Be=Ye.rules.find(Le=>(0,x.Pc)(Le)&&Le.grafana_alert?.uid===lt.uid);if(Be)return{group:Ye,ruleSourceName:v.GC,namespace:wt,rule:Be}}}if((0,x.E4)(lt)){const{ruleSourceName:Ct,namespace:wt,groupName:Lt}=lt,Ye=await(0,h.jJ)(Ke,wt,Lt);if(!Ye)return null;const Be=Ye.rules.find(Le=>{const le=M.Zk(Ct,wt,Ye.name,Le);return M.Dg(le,lt)});return Be?{group:Ye,ruleSourceName:Ct,namespace:wt,rule:Be}:null}if((0,x.qE)(lt))throw new Error("Native prometheus rules can not be edited in grafana.");return null},ze=async lt=>{const{namespace:Ct,group:wt,rule:Lt}=lt;if(wt.rules.length===1){await(0,h.BC)(Ke,Ct,wt.name);return}await(0,h.P4)(Ke,Ct,{...wt,rules:wt.rules.filter(Ye=>Ye!==Lt)})},je=async(lt,Ct,wt)=>{const{dataSourceName:Lt,group:Ye,namespace:Be}=lt,Le=(0,P.yh)(lt);if(Lt&&Ye&&Be){if(wt){const X=await et(M.CK(wt));if(!X)throw new Error("Rule not found.");if(X.namespace!==Be||X.group.name!==Ye)await ze(X);else{const se={...X.group,rules:X.group.rules.map(re=>re===X.rule?Le:re),evaluateEvery:Ct};return await(0,h.P4)(Ke,Be,se),M.Zk(Lt,Be,Ye,Le)}}const le=await(0,h.jJ)(Ke,Be,Ye),de=le?{...le,rules:[...le.rules,Le]}:{name:Ye,rules:[Le]};return await(0,h.P4)(Ke,Be,de),M.Zk(Lt,Be,Ye,Le)}else throw new Error("Data source and location must be specified")},Qe=async(lt,Ct,wt)=>{const{folder:Lt,group:Ye}=lt;if(!Lt)throw new Error("Folder must be specified");const Be=(0,P.mI)(lt),Le=Lt.title,le={name:Ye,interval:Ct};if(!wt)return We(Le,le,Be);const de=await et(M.CK(wt));if(!de)throw new Error("Rule not found.");const X=de.namespace===Le,se=de.group.name===lt.group;return X&&se?ot(de,Be,Ct):ke(Le,le,de,Be)},We=async(lt,Ct,wt)=>{const Lt=await(0,h.jJ)(Ke,lt,Ct.name);if(!Lt)throw new Error(`No group found with name "${Ct.name}"`);const Ye={name:Ct.name,interval:Ct.interval,rules:(Lt.rules??[]).concat(wt)};return await(0,h.P4)(Ke,lt,Ye),{uid:wt.grafana_alert.uid??"",ruleSourceName:v.GC}},ke=async(lt,Ct,wt,Lt)=>(I(wt,Lt),await We(lt,Ct,Lt)),ot=async(lt,Ct,wt)=>{I(lt,Ct);const Lt=lt.group.rules.map(Ye=>(0,x.Pc)(Ye)&&Ye.grafana_alert.uid===lt.rule.grafana_alert.uid?Ct:Ye);return await(0,h.P4)(Ke,lt.namespace,{name:lt.group.name,interval:wt,rules:Lt}),{uid:lt.rule.grafana_alert.uid,ruleSourceName:v.GC}};return{findEditableRule:et,deleteRule:ze,saveLotexRule:je,saveGrafanaRule:Qe}}function I(Ke,et){if(!(0,x.Pc)(Ke.rule))throw new Error("The rule is not a Grafana managed rule");const ze=Ke.rule.grafana_alert.uid;et.grafana_alert.uid=ze}var T=e(66793);function O(Ke,et){const je=Ke().unifiedAlerting.dataSources[et]?.result;if(!je)throw new Error(`Data source configuration is not available for "${et}" data source`);return je}function A(Ke,et){const ze=O(Ke,et);if(!ze.rulerConfig)throw new Error(`Ruler API is not available for ${et}`);return ze.rulerConfig}const B=(0,n.hg)("unifiedalerting/fetchPromRules",async({rulesSourceName:Ke,filter:et,limitAlerts:ze,matcher:je,state:Qe,identifier:We},ke)=>{await ke.dispatch(Q({rulesSourceName:Ke}));const ot=(0,g.pM)(p.j,`[${Ke}] Prometheus rules loaded`,{dataSourceName:Ke,thunk:"unifiedalerting/fetchPromRules"});return await(0,D.$b)(ot(Ke,et,ze,je,Qe,We))}),b=(0,n.hg)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,D.$b)((0,m.$l)())),W=(0,n.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,D.$b)((0,m.Zo)())),V=(0,n.hg)("unifiedalerting/fetchRulerRules",async({rulesSourceName:Ke,filter:et},{dispatch:ze,getState:je})=>{await ze(Q({rulesSourceName:Ke}));const Qe=A(je,Ke),We=(0,g.pM)(h.m6,`[${Ke}] Ruler rules loaded`,{dataSourceName:Ke,thunk:"unifiedalerting/fetchRulerRules"});return await(0,D.$b)(We(Qe,et))});function w({rulesSourceName:Ke,identifier:et,filter:ze,limitAlerts:je,matcher:Qe,state:We}){return async(ke,ot)=>{await ke(Q({rulesSourceName:Ke}));const lt=O(ot,Ke);await ke(B({rulesSourceName:Ke,identifier:et,filter:ze,limitAlerts:je,matcher:Qe,state:We})),lt.rulerConfig&&await ke(V({rulesSourceName:Ke}))}}const K=(0,n.hg)("unifiedalerting/fetchSilences",Ke=>{const et=(0,g.pM)(m.U7,`[${Ke}] Silences loaded`,{dataSourceName:Ke,thunk:"unifiedalerting/fetchSilences"});return(0,D.$b)(et(Ke))});function z(Ke){return(et,ze)=>{const{rulerRules:je}=ze().unifiedAlerting,Qe=je[Ke];(0,a.isEmpty)(Qe?.result)&&!(Qe&&(0,x.m$)(Qe))&&!Qe?.loading&&et(V({rulesSourceName:Ke}))}}function G(){return async Ke=>{const et=(0,v.mA)().map(ze=>Ke(Q({rulesSourceName:ze})));await Promise.allSettled(et)}}const Q=(0,n.hg)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:Ke})=>(0,D.$b)((async()=>{if(Ke===v.GC)return{name:v.GC,id:v.GC,rulerConfig:{dataSourceName:v.GC,apiVersion:"legacy"}};const et=(0,v.VX)(Ke);if(!et)throw new Error(`Missing data source configuration for ${Ke}`);const{id:ze,name:je}=et,We=await(0,g.pM)(c.C$,`[${Ke}] Rules source features discovered`,{dataSourceName:Ke,thunk:"unifiedalerting/fetchPromBuildinfo"})(je),ke=We.features.rulerApiEnabled?{dataSourceName:je,apiVersion:We.application===r.T8.Cortex?"legacy":"config"}:void 0;return{name:je,id:ze,rulerConfig:ke}})()),{condition:({rulesSourceName:Ke},{getState:et})=>{const ze=et().unifiedAlerting.dataSources,je=!!ze[Ke]?.result,Qe=!!ze[Ke]?.error;return!(je||Qe)}});function j(Ke=!1,et={}){return async(ze,je)=>{const Qe=performance.now();await Promise.allSettled((0,v.mA)().map(async We=>{await ze(Q({rulesSourceName:We}));const{promRules:ke,rulerRules:ot,dataSources:lt}=je().unifiedAlerting,Ct=lt[We].result;if(!Ct)return;const wt=Ke||!ke[We]?.loading,Lt=(Ke||!ot[We]?.loading)&&!!Ct.rulerConfig;await Promise.allSettled([wt&&ze(B({rulesSourceName:We,...et})),Lt&&ze(V({rulesSourceName:We}))])})),(0,g.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-Qe).toFixed(0)})}}function F(Ke=!1){return async(et,ze)=>{const{promRules:je}=ze().unifiedAlerting;(0,v.mA)().map(Qe=>{(Ke||!je[Qe]?.loading)&&et(B({rulesSourceName:Qe}))})}}const k=(0,n.hg)("unifiedalerting/fetchEditableRule",(Ke,et)=>{const ze=A(et.getState,Ke.ruleSourceName);return(0,D.$b)(S(ze).findEditableRule(Ke))});function _(Ke,et){return async(ze,je)=>{(0,D.Ez)((async()=>{const Qe=(0,v.EG)(Ke.rulesSource),We=A(je,Qe);await(0,h.BC)(We,Ke.name,et.name),await ze(w({rulesSourceName:Qe}))})(),{successMessage:"Group deleted"})}}function Y(Ke,et={}){return async(ze,je)=>{await ze(Q({rulesSourceName:Ke.ruleSourceName})),(0,D.Ez)((async()=>{const Qe=A(je,Ke.ruleSourceName),We=S(Qe),ke=await We.findEditableRule(Ke);if(!ke)throw new Error("Rule not found.");await We.deleteRule(ke),await ze(w({rulesSourceName:ke.ruleSourceName})),et.navigateTo&&l.E1.replace(et.navigateTo)})(),{successMessage:"Rule deleted."})}}const Z=(0,n.hg)("unifiedalerting/saveRuleForm",({values:Ke,existing:et,redirectOnSave:ze,evaluateEvery:je},Qe)=>(0,D.Ez)((0,D.$b)((async()=>{const{type:We}=Ke;let ke;if(We===y.$.cloudAlerting||We===y.$.cloudRecording){if(!Ke.dataSourceName)throw new Error("The Data source has not been defined.");const ot=A(Qe.getState,Ke.dataSourceName);ke=await S(ot).saveLotexRule(Ke,je,et),await Qe.dispatch(V({rulesSourceName:Ke.dataSourceName}))}else if(We===y.$.grafana){const ot=A(Qe.getState,v.GC);ke=await S(ot).saveGrafanaRule(Ke,je,et),await Qe.dispatch(V({rulesSourceName:v.GC}))}else throw new Error("Unexpected rule form type");if((0,g.PN)(g.z7.successSavingAlertRule,{type:We,isNew:(!et).toString()}),ze)l.E1.push(ze);else{const ot=M.$V(ke);if(!ot){l.E1.push("/alerting/list");return}const lt=`/alerting/${encodeURIComponent(ot)}/edit`;l.E1.getLocation().pathname!==lt?l.E1.replace(lt):Qe.dispatch(k(ke))}})()),{successMessage:et?`Rule "${Ke.name}" updated.`:`Rule "${Ke.name}" saved.`,errorMessage:"Failed to save rule"})),ae=(0,n.hg)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,D.$b)((0,E.i9)())),ce=(0,n.hg)("unifiedalerting/fetchGrafanaAnnotations",Ke=>(0,D.$b)(i(Ke))),q=(0,n.hg)("unifiedalerting/updateAMConfig",({alertManagerSourceName:Ke,oldConfig:et,newConfig:ze,successMessage:je,redirectPath:Qe,redirectSearch:We},ke)=>(0,D.Ez)((0,D.$b)((async()=>{const ot=await ke.dispatch(d.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(Ke)).unwrap(),lt=(0,a.isEmpty)(ot.alertmanager_config)&&(0,a.isEmpty)(ot.template_files),Ct=JSON.stringify(ot)!==JSON.stringify(et);if(!lt&&Ct)throw new Error("A newer Alertmanager configuration is available. Please reload the page and try again to not overwrite recent changes.");if(await(0,m.oy)(Ke,(0,s.X4)(ze)),ke.dispatch(d.alertmanagerApi.util.invalidateTags(["AlertmanagerConfiguration"])),Qe){const wt=new URLSearchParams(We??"");l.E1.push((0,C.eQ)(Qe,Ke,wt))}})()),{successMessage:je})),De=(0,n.hg)("unifiedalerting/fetchAmAlerts",Ke=>(0,D.$b)((0,m.QK)(Ke,[],!0,!0,!0))),oe=(Ke,et)=>async ze=>{await(0,D.Ez)((0,m.iT)(Ke,et),{successMessage:"Silence expired."}),ze(K(Ke)),ze(De(Ke))},te=(0,n.hg)("unifiedalerting/updateSilence",({alertManagerSourceName:Ke,payload:et,exitOnSave:ze,successMessage:je})=>(0,D.Ez)((0,D.$b)((async()=>{await(0,m.dx)(Ke,et),ze&&l.E1.push("/alerting/silences")})()),{successMessage:je})),fe=(Ke,et)=>async ze=>{const je=await ze(d.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(et)).unwrap();if(!je)throw new Error(`Config for ${et} not found`);if(!je.alertmanager_config.receivers?.find(We=>We.name===Ke))throw new Error(`Cannot delete receiver ${Ke}: not found in config.`);const Qe={...je,alertmanager_config:{...je.alertmanager_config,receivers:je.alertmanager_config.receivers.filter(We=>We.name!==Ke)}};return ze(q({newConfig:Qe,oldConfig:je,alertManagerSourceName:et,successMessage:"Contact point deleted."}))},Te=(Ke,et)=>async ze=>{const je=await ze(d.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(et)).unwrap();if(!je)throw new Error(`Config for ${et} not found`);if(typeof je.template_files?.[Ke]!="string")throw new Error(`Cannot delete template ${Ke}: not found in config.`);const Qe={...je.template_files};delete Qe[Ke];const We={...je,alertmanager_config:{...je.alertmanager_config,templates:je.alertmanager_config.templates?.filter(ke=>ke!==Ke)},template_files:Qe};return ze(q({newConfig:We,oldConfig:je,alertManagerSourceName:et,successMessage:"Template deleted."}))},ge=(0,n.hg)("unifiedalerting/fetchFolder",Ke=>(0,D.$b)(o.ae.getFolderByUid(Ke,{withAccessControl:!0}))),he=Ke=>(et,ze)=>{ze().unifiedAlerting.folders[Ke]?.dispatched||et(ge(Ke))},me=(0,n.hg)("unifiedalerting/fetchAlertGroups",Ke=>(0,D.$b)((0,m.XK)(Ke))),ye=(0,n.hg)("unifiedalerting/deleteAlertManagerConfig",async(Ke,et)=>(0,D.Ez)((0,D.$b)((async()=>{await(0,m.CN)(Ke),await et.dispatch(d.alertmanagerApi.util.invalidateTags(["AlertmanagerConfiguration"]))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),ue=(Ke,et)=>async ze=>{const je=await ze(d.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(Ke)).unwrap(),Qe=je?.alertmanager_config?.mute_time_intervals?.filter(({name:We})=>We!==et)??[];je&&(0,D.Ez)(ze(q({alertManagerSourceName:Ke,oldConfig:je,newConfig:{...je,alertmanager_config:{...je.alertmanager_config,route:je.alertmanager_config.route?(0,s.rU)(et,je.alertmanager_config?.route):void 0,mute_time_intervals:Qe}}})),{successMessage:`Deleted "${et}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},Oe=(0,n.hg)("unifiedalerting/testReceivers",({alertManagerSourceName:Ke,receivers:et,alert:ze})=>(0,D.Ez)((0,D.$b)((0,m.Bp)(Ke,et,ze)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),Ue=(Ke,et)=>Ke.filter(ze=>{const{forDuration:je}=(0,x.qd)(ze,et),Qe=(0,T.Bg)(je),We=(0,T.Bg)(et);return Qe!==0&&Qe<We}),at=(0,n.hg)("unifiedalerting/updateLotexNamespaceAndGroup",async(Ke,et)=>(0,D.Ez)((0,D.$b)((async()=>{const{rulesSourceName:ze,namespaceName:je,groupName:Qe,newNamespaceName:We,newGroupName:ke,groupInterval:ot}=Ke,lt=A(et.getState,ze),Ct=await(0,h.m6)(lt);if(!!!Ct[je])throw new Error(`Namespace "${je}" not found.`);const Lt=Ct[je].find(Le=>Le.name===Qe);if(!Lt)throw new Error(`Group "${Qe}" not found.`);const Ye=!!Ct[je].find(Le=>Le.name===ke);if(ke!==Qe&&Ye)throw new Error(`Group "${ke}" already exists in namespace "${je}".`);const Be=!!Ct[We];if(We!==je&&Be)throw new Error(`Namespace "${We}" already exists.`);if(We===je&&Qe===ke&&ot===Lt.interval)throw new Error("Nothing changed.");if(ot!==Lt.interval){const Le=Ue(Lt.rules,ot??"1m");if(Le.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${Le.map(le=>{const{alertName:de}=(0,x.qd)(le,ot??"");return de}).join(",")}`)}if(We!==je){for(const Le of Ct[je])await(0,h.P4)(lt,We,Le.name===Qe?{...Le,name:ke,interval:ot}:Le);await(0,h.sz)(lt,je)}else await(0,h.P4)(lt,je,{...Lt,name:ke,interval:ot}),ke!==Qe&&await(0,h.BC)(lt,je,Qe);await et.dispatch(V({rulesSourceName:ze}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Ne=(0,n.hg)("unifiedalerting/updateRulesOrderForGroup",async(Ke,et)=>(0,D.Ez)((0,D.$b)((async()=>{const{rulesSourceName:ze,namespaceName:je,groupName:Qe,newRules:We}=Ke,ke=A(et.getState,ze),lt=(await(0,h.m6)(ke))[je].find(wt=>wt.name===Qe);if(!lt)throw new Error(`Group "${Qe}" not found.`);const Ct={name:lt.name,interval:lt.interval,rules:We};await(0,h.P4)(ke,je,Ct),await et.dispatch(V({rulesSourceName:ze}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),_e=(0,n.hg)("unifiedAlerting/addExternalAlertmanagers",async(Ke,et)=>(0,D.Ez)((0,D.$b)((async()=>{await(0,m.tK)(Ke),et.dispatch(W())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},57716:(J,R,e)=>{"use strict";e.d(R,{r:()=>l});var n=e(41407),a=e(47858);const l=r=>({[a.Z9.Active]:(0,n.css)`
    color: ${r.colors.error.text};
  `,[a.Z9.Suppressed]:(0,n.css)`
    color: ${r.colors.primary.text};
  `,[a.Z9.Unprocessed]:(0,n.css)`
    color: ${r.colors.secondary.text};
  `})},3128:(J,R,e)=>{"use strict";e.d(R,{Z:()=>a});var n=e(41407);const a=l=>(0,n.css)`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${l.spacing(2,0)};
  `},11272:(J,R,e)=>{"use strict";e.d(R,{W:()=>n});var n=(a=>(a.Incident="grafana-incident-app",a.OnCall="grafana-oncall-app",a.MachineLearning="grafana-ml-app",a))(n||{})},10235:(J,R,e)=>{"use strict";e.d(R,{$:()=>n});var n=(a=>(a.grafana="grafana",a.cloudAlerting="cloud-alerting",a.cloudRecording="cloud-recording",a))(n||{})},54637:(J,R,e)=>{"use strict";e.d(R,{t:()=>n});var n=(a=>(a.seconds="s",a.minutes="m",a.hours="h",a.days="d",a.weeks="w",a))(n||{})},60703:(J,R,e)=>{"use strict";e.d(R,{Bz:()=>f,Fo:()=>g,Ko:()=>i,Ob:()=>o,QX:()=>u,Rv:()=>E,ql:()=>c});var n=e(97125),a=e(57721),l=e(95712);function r(p){return(0,l.HY)(p)?"grafana":"external"}const o={read:{grafana:a.AccessControlAction.AlertingInstanceRead,external:a.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:a.AccessControlAction.AlertingInstanceCreate,external:a.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:a.AccessControlAction.AlertingInstanceUpdate,external:a.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:a.AccessControlAction.AlertingInstanceUpdate,external:a.AccessControlAction.AlertingInstancesExternalWrite}},g={read:{grafana:a.AccessControlAction.AlertingNotificationsRead,external:a.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:a.AccessControlAction.AlertingNotificationsWrite,external:a.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:a.AccessControlAction.AlertingNotificationsWrite,external:a.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:a.AccessControlAction.AlertingNotificationsWrite,external:a.AccessControlAction.AlertingNotificationsExternalWrite}},m={read:a.AccessControlAction.AlertingProvisioningRead,readSecrets:a.AccessControlAction.AlertingProvisioningReadSecrets,write:a.AccessControlAction.AlertingProvisioningWrite},d={read:{grafana:a.AccessControlAction.AlertingRuleRead,external:a.AccessControlAction.AlertingRuleExternalRead},create:{grafana:a.AccessControlAction.AlertingRuleCreate,external:a.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:a.AccessControlAction.AlertingRuleUpdate,external:a.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:a.AccessControlAction.AlertingRuleDelete,external:a.AccessControlAction.AlertingRuleExternalWrite}};function u(p){const h=r(p);return{read:o.read[h],create:o.create[h],update:o.update[h],delete:o.delete[h]}}function i(p){const h=r(p);return{read:g.read[h],create:g.create[h],update:g.update[h],delete:g.delete[h],provisioning:m}}function f(p){const h=r(p);return{read:d.read[h],create:d.create[h],update:d.update[h],delete:d.delete[h]}}function c(p){return()=>n.contextSrv.evaluatePermission(p)}function E(){return{canCreateGrafanaRules:n.contextSrv.hasPermission(a.AccessControlAction.FoldersRead)&&n.contextSrv.hasPermission(d.create.grafana),canCreateCloudRules:n.contextSrv.hasPermission(a.AccessControlAction.DataSourcesRead)&&n.contextSrv.hasPermission(d.create.external),canEditRules:p=>n.contextSrv.hasPermission(f(p).update)}}},14949:(J,R,e)=>{"use strict";e.d(R,{FM:()=>d,J8:()=>O,X4:()=>g,Xy:()=>x,Zh:()=>v,_J:()=>p,cm:()=>E,eD:()=>D,m8:()=>A,nv:()=>i,qw:()=>B,rU:()=>m,tA:()=>y,u6:()=>I,uK:()=>S,v7:()=>T,vB:()=>M,xz:()=>s,zy:()=>f});var n=e(86832),a=e.n(n),l=e(47858),r=e(73895),o=e(95712);function g(b){return b.alertmanager_config.receivers||(b.alertmanager_config.receivers=[{name:"default "}]),b.alertmanager_config.route||(b.alertmanager_config.route={receiver:b.alertmanager_config.receivers[0].name}),b.template_files||(b.template_files={}),b}function m(b,W){return{...W,mute_time_intervals:W.mute_time_intervals?.filter(w=>w!==b)??[],routes:W.routes?.map(w=>m(b,w))}}function d(b,W,V){return{...V,mute_time_intervals:V.mute_time_intervals?.map(w=>w===W?b:w),routes:V.routes?.map(w=>d(b,W,w))}}function u(b,W){return(W.receiver===b||W.routes?.some(V=>u(b,V)))??!1}function i(b,W){return(W.alertmanager_config.route&&u(b,W.alertmanager_config.route))??!1}function f(b){return b.isEqual?b.isRegex?l._M.regex:l._M.equal:b.isRegex?l._M.notRegex:l._M.notEqual}function c(b){switch(b){case l._M.equal:return{isEqual:!0,isRegex:!1};case l._M.notEqual:return{isEqual:!1,isRegex:!1};case l._M.regex:return{isEqual:!0,isRegex:!0};case l._M.notRegex:return{isEqual:!1,isRegex:!0}}}function E(b){return{name:b.name,value:b.value,operator:f(b)}}function p(b){return{name:b.name,value:b.value,...c(b.operator)}}function h(b){return`{${b.map(E).reduce((w,K)=>{const z=`${K.name}${K.operator}"${K.value}"`;return w?`${w},${z}`:z},"")}}`}const y=[{label:l._M.equal,description:"Equals",value:l._M.equal},{label:l._M.notEqual,description:"Does not equal",value:l._M.notEqual},{label:l._M.regex,description:"Matches regex",value:l._M.regex},{label:l._M.notRegex,description:"Does not match regex",value:l._M.notRegex}];function s(b){const W=f(b);return[b.name,W,b.value]}function v(b){const W=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,}]*)"?/g,V=[];return b.replace(W,(w,K,z,G)=>{const Q=z===l._M.equal||z===l._M.regex,j=z===l._M.regex||z===l._M.notRegex;return V.push({name:K,value:j?C(G.trim()):G.trim(),isEqual:Q,isRegex:j}),""}),V}function C(b){try{return new RegExp(b),b}catch{return""}}function D(b,W){return W.every(({name:V,value:w,isRegex:K,isEqual:z})=>Object.entries(b).some(([G,Q])=>{const j=V===G;let F;return z&&!K&&(F=w===Q),!z&&!K&&(F=w!==Q),z&&K&&(F=new RegExp(w).test(Q)),!z&&K&&(F=!new RegExp(w).test(Q)),j&&F}))}function M(...b){const W=b.map(v).flat(),V=(0,n.uniqWith)(W,n.isEqual);return h(V)}function P(){return(0,r.x)().filter(b=>b.type===o.ye.Alertmanager)}function x(b){return P().find(W=>b===W.uid)}function S(b){const{times:W,weekdays:V,days_of_month:w,months:K,years:z,location:G}=b,Q=I(W,G),j=T(V),F=O(w),k=A(K),_=B(z);return[Q,j,F,k,_].join(", ")}function I(b,W){return"Times: "+(b?b?.map(({start_time:V,end_time:w})=>`${V} - ${w} [${W??"UTC"}]`).join(" and "):"All")}function T(b){return"Weekdays: "+(b?.map(W=>{if(W.includes(":"))return W.split(":").map(V=>{const w=V.slice(0,3);return w[0].toLocaleUpperCase()+w.slice(1)}).join("-");{const V=W.slice(0,3);return V[0].toLocaleUpperCase()+V.slice(1)}}).join(", ")??"All")}function O(b){return"Days of the month: "+(b?.join(", ")??"All")}function A(b){return"Months: "+(b?.join(", ")??"All")}function B(b){return"Years: "+(b?.join(", ")??"All")}},50287:(J,R,e)=>{"use strict";e.d(R,{$9:()=>o,XW:()=>g});var n=e(39953),a=e(63483),l=e(76716);function r(m){return{dashboardUID:m.find(([d])=>d===a.q6.dashboardUID)?.[1],panelId:m.find(([d])=>d===a.q6.panelID)?.[1]}}function o(m){return(0,n.useMemo)(()=>Object.entries(m||{}).filter(([d,u])=>!!u.trim()),[m])}function g(m){const d=new Map,{panelId:u,dashboardUID:i}=r(m);return i&&d.set(a.q6.dashboardUID,(0,l.RQ)(i)),i&&u&&d.set(a.q6.panelID,(0,l.yM)(i,u)),d}},73895:(J,R,e)=>{"use strict";e.d(R,{f:()=>r,x:()=>l});var n=e(32688),a=e(66793);function l(){return Object.values(n.config.datasources)}function r(o){if(!(0,a.wd)(n.config.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const g=(0,a.nd)(n.config.unifiedAlerting.minInterval);if(!o||!(0,a.wd)(o))return{globalLimit:g,exceedsLimit:!1};const m=(0,a.nd)(o),d=g>m&&m>0;return{globalLimit:g,exceedsLimit:d}}},63483:(J,R,e)=>{"use strict";e.d(R,{_y:()=>E,c4:()=>l,cm:()=>o,de:()=>r,eY:()=>p,iF:()=>g,jZ:()=>n,m4:()=>m,p4:()=>a,q6:()=>f,vY:()=>c});const n="ruler not supported",a=2e4,l="alertmanager",r="alerting-alertmanager",o=2e4,g=2e4,m=2e4,d="timeseries",u="table",i="stat";var f=(h=>(h.description="description",h.summary="summary",h.runbookURL="runbook_url",h.alertId="__alertId__",h.dashboardUID="__dashboardUid__",h.panelID="__panelId__",h))(f||{});const c={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"},E={description:"Description of what the alert rule does.",summary:"Short summary of what happened and why.",runbook_url:"Webpage where you keep your runbook for the alert.",__dashboardUid__:"",__panelId__:"",__alertId__:""},p=[{key:"summary",value:""},{key:"description",value:""},{key:"runbook_url",value:""}]},95712:(J,R,e)=>{"use strict";e.d(R,{EG:()=>M,EQ:()=>O,Eu:()=>f,GC:()=>m,G_:()=>w,HY:()=>I,JY:()=>d,LE:()=>s,P:()=>V,RY:()=>S,Rz:()=>p,VX:()=>c,aM:()=>E,c$:()=>T,gt:()=>b,h_:()=>D,jq:()=>x,mA:()=>C,o_:()=>A,v_:()=>P,ye:()=>u,z3:()=>y});var n=e(26205),a=e(97125),l=e(47858),r=e(57721),o=e(60703),g=e(73895);const m="grafana",d="-- Grafana --";var u=(K=>(K.Alertmanager="alertmanager",K.Loki="loki",K.Prometheus="prometheus",K))(u||{});const i=["loki","prometheus"];function f(){return a.contextSrv.hasPermission(r.AccessControlAction.AlertingRuleExternalRead)?(0,g.x)().filter(K=>i.includes(K.type)&&K.jsonData.manageAlerts!==!1).sort((K,z)=>K.name.localeCompare(z.name)):[]}function c(K){return f().find(z=>z.name===K)}function E(){return(0,g.x)().filter(K=>K.type==="alertmanager").sort((K,z)=>K.name.localeCompare(z.name))}function p(){return E().filter(K=>K.jsonData.handleGrafanaManagedAlerts)}const h={name:m,imgUrl:"public/img/grafana_icon.svg"};function y(){return[h,...E().map(K=>({name:K.name,displayName:K.name,imgUrl:K.meta.info.logos.small,meta:K.meta}))]}function s(K){const z=[],G={instance:o.Ob.read,notification:o.Fo.read};if(a.contextSrv.hasPermission(G[K].grafana)&&z.push(h),a.contextSrv.hasPermission(G[K].external)){const Q=E().map(j=>({name:j.name,displayName:j.name,imgUrl:j.meta.info.logos.small,meta:j.meta}));z.push(...Q)}return z}function v(K){const z=T(K);if(!z)throw new Error(`Data source ${K} not found`);if(z.type!=="loki"&&z.type!=="prometheus")throw new Error(`Unexpected data source type ${z.type}`);return z}function C(){const K=f().map(z=>z.name);return a.contextSrv.hasPermission(r.AccessControlAction.AlertingRuleRead)&&K.push(m),K}function D(){const K=f();return a.contextSrv.hasPermission(r.AccessControlAction.AlertingRuleRead)&&K.push(m),K}function M(K){return x(K)?K.name:K}function P(K){return x(K)?K.uid:m}function x(K){return K!==m}function S(K){return K!==m&&O(K)?.jsonData?.implementation===l.sK.prometheus}function I(K){return K===m}function T(K){return(0,g.x)().find(z=>z.name===K)}function O(K){return(0,g.x)().find(z=>z.name===K&&z.type==="alertmanager")}function A(K){return K===m?m:T(K)}function B(K){if(K===m)return m;const z=T(K);if(!z)throw new Error(`Datasource "${K}" not found`);return String(z.id)}function b(K){if(K===m)return m;const z=T(K);if(!z)throw new Error(`Datasource "${K}" not found`);return z.uid}function W(){return(0,n.F)().getList({alerting:!0})[0]}function V(){const K=(0,n.F)().getInstanceSettings("default");return K?.meta.alerting??!1?K:W()}function w(K){return K.jsonData.manageAlerts!==!1}},68694:(J,R,e)=>{"use strict";e.d(R,{P3:()=>n,bR:()=>r,cH:()=>a,nW:()=>l});function n(o){return Object.entries(o).map(([g,m])=>`${g}=${m}`).sort()}function a(o){return Object.entries(o).map(([g,m])=>[g,m])}function l(o){const g={};return o.forEach(m=>{g[m[0]]=m[1]}),g}function r(o){const g={};return o.forEach(m=>{m.key&&(g[m.key]=m.value)}),g}},75404:(J,R,e)=>{"use strict";e.d(R,{QO:()=>d,RT:()=>g,rz:()=>m,tC:()=>o});var n=e(86832),a=e.n(n),l=e(47858);const r=[l._M.regex,l._M.notRegex,l._M.notEqual,l._M.equal];function o(c){if(c.startsWith("{")&&c.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${c}`);const E=r.map(v=>[v,c.indexOf(v)]).filter(([v,C])=>C>-1).sort((v,C)=>v[1]-C[1]);if(!E.length)throw new Error(`Invalid matcher: ${c}`);const[p,h]=E[0],y=c.slice(0,h).trim(),s=c.slice(h+p.length);if(!y)throw new Error(`Invalid matcher: ${c}`);return{name:y,value:s,isRegex:p===l._M.regex||p===l._M.notRegex,isEqual:p===l._M.equal||p===l._M.regex}}function g(c){const E=c.filter(p=>!!p.trim()).map(p=>o(p));return(0,n.uniqBy)(E,p=>p.name)}const m=c=>{const E=Object.entries(c).filter(([h])=>!(h.startsWith("__")&&h.endsWith("__"))),p=new URLSearchParams;return E.forEach(([h,y])=>p.append("matcher",`${h}=${y}`)),p},d=c=>{const E=[];return c.matchers&&c.matchers.forEach(p=>{const{name:h,value:y,isEqual:s,isRegex:v}=o(p);let C=l._M.equal;s&&v&&(C=l._M.regex),!s&&v&&(C=l._M.notRegex),s&&!v&&(C=l._M.equal),!s&&!v&&(C=l._M.notEqual),E.push([h,C,y])}),c.object_matchers&&E.push(...c.object_matchers),c.match_re&&Object.entries(c.match_re).forEach(([p,h])=>{E.push([p,l._M.regex,h])}),c.match&&Object.entries(c.match).forEach(([p,h])=>{E.push([p,l._M.equal,h])}),E},u={[l._M.equal]:(c,E)=>c===E,[l._M.notEqual]:(c,E)=>c!==E,[l._M.regex]:(c,E)=>new RegExp(E).test(c),[l._M.notRegex]:(c,E)=>!new RegExp(E).test(c)};function i(c,E){const[p,h]=E,[y,s,v]=c;if(p!==y)return!1;const C=u[s];if(!C)throw new Error(`no such operator: ${s}`);return C(h,v)}function f(c,E){return c.every(p=>E.some(h=>i(p,h)))}},76716:(J,R,e)=>{"use strict";e.d(R,{ET:()=>y,GV:()=>h,HV:()=>B,J8:()=>P,RQ:()=>W,S0:()=>v,V2:()=>E,VN:()=>O,Vj:()=>G,Vv:()=>T,Zl:()=>z,__:()=>A,aH:()=>b,eQ:()=>x,fm:()=>w,lC:()=>C,mH:()=>p,mt:()=>Q,pF:()=>M,sM:()=>I,t6:()=>s,yM:()=>V});var n=e(86832),a=e.n(n),l=e(70929),r=e(32688),o=e(30391),g=e(15032),m=e(3),d=e(17330),u=e(63483),i=e(95712),f=e(75404),c=e(24597);function E(j,F,k){const _=(0,i.EG)(j),Y=o.Yd(_,F),Z=encodeURIComponent(o.$V(Y)),ae=encodeURIComponent(_);return(0,c.u)(`/alerting/${ae}/${Z}/view`,{returnTo:k})}function p(j,F){const{uid:k,type:_}=j;return(0,c.u)("/explore",{left:JSON.stringify({datasource:j.uid,queries:[{refId:"A",datasource:{uid:k,type:_},expr:F}],range:{from:"now-1h",to:"now"}})})}function h(j,F=""){return(0,c.u)(`/alerting/notifications/receivers/${encodeURIComponent(j)}/edit`,{alertmanager:F})}function y(j,F=""){return(0,c.u)("/alerting/routes/mute-timing/edit",{muteName:j,alertmanager:F})}function s(j,F){return(0,i.jq)(j)?(0,c._)(`/alerting/${encodeURIComponent(j.name)}/${encodeURIComponent((0,o.GV)(F.name))}/find`):window.location.href.split("?")[0]}function v(j){return j.reduce((F,{key:k,value:_})=>(F[k]=_,F),{})}const C=j=>{const F=j.queryString===void 0?void 0:String(j.queryString),k=j.alertState===void 0?void 0:String(j.alertState),_=j.dataSource===void 0?void 0:String(j.dataSource),Y=j.ruleType===void 0?void 0:String(j.ruleType),Z=j.groupBy===void 0?void 0:String(j.groupBy).split(",");return{queryString:F,alertState:k,dataSource:_,groupBy:Z,ruleType:Y}},D=j=>({queryString:j.get("queryString")??void 0,contactPoint:j.get("contactPoint")??void 0}),M=j=>{const F=j.queryString===void 0?void 0:String(j.queryString),k=j.silenceState===void 0?void 0:String(j.silenceState);return{queryString:F,silenceState:k}};function P(j){return Object.entries(j).map(([F,k])=>({key:F,value:k}))}function x(j,F,k){const _=new URLSearchParams(k);return F&&_.append(u.c4,F),`${j}?${_.toString()}`}const S=j=>j.replace(/\"/g,'\\"');function I(j){return j.startsWith('"')&&j.endsWith('"')?S(j):`"${S(j)}"`}function T(j,F){const k={alertname:F.name,...F.labels};return O(j,k)}function O(j,F){const k=new URLSearchParams;return k.append("alertmanager",j),(0,f.rz)(F).forEach((Y,Z)=>k.append(Z,Y)),(0,c.u)("/alerting/silence/new",k)}function A(j){return(0,c.u)(`/datasources/edit/${j.uid}`)}function B(j){return(0,c.u)(`/dashboards/f/${j}`)}function b(j){return(0,c.u)(`/dashboards/f/${j.uid}/${j.title}/settings`)}function W(j){return(0,c.u)(`/d/${encodeURIComponent(j)}`)}function V(j,F){return(0,c.u)(`/d/${encodeURIComponent(j)}`,{viewPanel:F})}function w(j,F,k,_=1e3){const Y=new Date().getTime(),Z=()=>j().catch(ae=>{if(F(ae)&&new Date().getTime()-Y<k)return new Promise(ce=>setTimeout(ce,_)).then(Z);throw ae});return Z()}const K={[d.bj.Alerting]:1,[d.x_.Firing]:1,[d.bj.Error]:1,[d.bj.Pending]:2,[d.x_.Pending]:2,[d.x_.Inactive]:2,[d.bj.NoData]:3,[d.bj.Normal]:4};function z(j,F){if(j===m.As.Importance)return(0,n.sortBy)(F,_=>[K[(0,d.ED)(_.state)],(0,g.pB)(_).toLocaleLowerCase()]);if(j===m.As.TimeAsc)return(0,n.sortBy)(F,_=>[new Date(_.activeAt)||new Date,(0,g.pB)(_).toLocaleLowerCase()]);if(j===m.As.TimeDesc)return(0,n.sortBy)(F,_=>[new Date(_.activeAt)||new Date,(0,g.pB)(_).toLocaleLowerCase()]).reverse();const k=(0,n.sortBy)(F,_=>(0,g.pB)(_).toLocaleLowerCase());return j===m.As.AlphaDesc&&k.reverse(),k}function G(){return r.config.buildInfo.edition===l.e.OpenSource}function Q(){return r.config.buildInfo.env==="development"}},57675:(J,R,e)=>{"use strict";e.d(R,{$b:()=>i,Ez:()=>f,I7:()=>D,PE:()=>p,i6:()=>d,jK:()=>u,kk:()=>E,op:()=>M,oq:()=>g,wt:()=>C,yR:()=>v});var n=e(77960),a=e(71519),l=e(4148),r=e(21308),o=e(79517);const g=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function m(P,x=g,S){if(P.pending.match(S))return{result:x.result,loading:!0,error:x.error,dispatched:!0,requestId:S.meta.requestId};if(P.fulfilled.match(S)){if(x.requestId===void 0||x.requestId===S.meta.requestId)return{...x,result:S.payload,loading:!1,error:void 0}}else if(P.rejected.match(S)&&x.requestId===S.meta.requestId)return{...x,loading:!1,error:S.error};return x}function d(P,x){return(0,n.oM)({name:P,initialState:g,reducers:{},extraReducers:S=>S.addDefaultCase((I,T)=>m(x,I,T))})}function u(P,x,S){return(0,n.oM)({name:P,initialState:{},reducers:{},extraReducers:I=>I.addDefaultCase((T,O)=>{if((0,n.Gx)(x)(O)){const A=O,B=S(A.meta.arg);return{...T,[B]:m(x,T[B],A)}}return T})})}function i(P){return P.catch(x=>{throw{message:E(x),code:x.statusCode}})}function f(P,x){return P.then(S=>(x.successMessage&&r.h$.emit(a.SI.alertSuccess,[x.successMessage]),S)).catch(S=>{const I=E(S);throw r.h$.emit(a.SI.alertError,[`${x.errorMessage??"Error"}: ${I}`]),S})}const c="Unknown Error";function E(P){if((0,l.kW)(P))if(P.data?.message){let S=P.data?.message;return typeof P.data?.error=="string"&&(S+=`; ${P.data.error}`),S}else{if(Array.isArray(P.data)&&P.data.length&&P.data[0]?.message)return P.data.map(S=>S?.message).filter(S=>!!S).join(" ");if(P.statusText)return P.statusText}const x=P?.message;return x||((0,o.PN)(o.z7.unknownMessageFromError,{error:JSON.stringify(P)}),c)}function p(P){return Object.values(P).every(h)}function h(P){return P.dispatched&&!P.loading}function y(P){return Object.values(P).every(s)}function s(P){return P.dispatched&&!P.loading&&!P.error}function v(P){return Object.values(P).some(M)}function C(P){return Object.values(P).some(x=>x.dispatched)}function D(P){return Object.values(P).some(s)}function M(P){return P?P.dispatched&&P.loading:!1}},90839:(J,R,e)=>{"use strict";e.d(R,{DQ:()=>S,EB:()=>v,QN:()=>G,TN:()=>P,WL:()=>I,aR:()=>W,eZ:()=>Q,lN:()=>T,mI:()=>x,s0:()=>O,tO:()=>z,uZ:()=>C,yh:()=>D});var n=e(86832),a=e.n(n),l=e(54554),r=e(81626),o=e(26205),g=e(92743),m=e(78354),d=e(29409),u=e(17330),i=e(5026),f=e(10235),c=e(60703),E=e(63483),p=e(95712),h=e(76716),y=e(15032),s=e(66793);const v="1m",C=()=>{const{canCreateGrafanaRules:j,canCreateCloudRules:F}=(0,c.Rv)();return Object.freeze({name:"",uid:"",labels:[{key:"",value:""}],annotations:E.eY,dataSourceName:null,type:j?f.$.grafana:F?f.$.cloudAlerting:void 0,group:"",folder:null,queries:[],recordingRulesQueries:[],condition:"",noDataState:u.g0.NoData,execErrState:u.g0.Error,evaluateFor:"5m",evaluateEvery:v,namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function D(j){const{name:F,expression:k,forTime:_,forTimeUnit:Y,keepFiringForTime:Z,keepFiringForTimeUnit:ae,type:ce}=j;if(ce===f.$.cloudAlerting){let q;return Z&&ae&&(q=`${Z}${ae}`),{alert:F,for:`${_}${Y}`,keep_firing_for:q,annotations:(0,h.S0)(j.annotations||[]),labels:(0,h.S0)(j.labels||[]),expr:k}}else if(ce===f.$.cloudRecording)return{record:F,labels:(0,h.S0)(j.labels||[]),expr:k};throw new Error(`unexpected rule type: ${ce}`)}function M(j,F){const k=[...(0,h.J8)(j||{})];return F&&k.push({key:"",value:""}),k}function P(j){const F=[...j];return E.eY.map(_=>_.key).forEach((_,Y)=>{const Z=F.findIndex(ae=>ae.key===_);if(Z===-1){const ae={key:_,value:""};F.splice(Y,0,ae)}else Z!==Y&&F.splice(Y,0,F.splice(Z,1)[0])}),F}function x(j){const{name:F,condition:k,noDataState:_,execErrState:Y,evaluateFor:Z,queries:ae,isPaused:ce}=j;if(k)return{grafana_alert:{title:F,condition:k,no_data_state:_,exec_err_state:Y,data:ae.map(w),is_paused:!!ce},for:Z,annotations:(0,h.S0)(j.annotations||[]),labels:(0,h.S0)(j.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function S(j){const{ruleSourceName:F,namespace:k,group:_,rule:Y}=j,Z=C();if((0,p.HY)(F))if((0,y.Pc)(Y)){const ae=Y.grafana_alert;return{...Z,name:ae.title,type:f.$.grafana,group:_.name,evaluateEvery:_.interval||Z.evaluateEvery,evaluateFor:Y.for||"0",noDataState:ae.no_data_state,execErrState:ae.exec_err_state,queries:ae.data,condition:ae.condition,annotations:P(M(Y.annotations,!1)),labels:M(Y.labels,!0),folder:{title:k,uid:ae.namespace_uid},isPaused:ae.is_paused}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,y.cG)(Y)){const ce={refId:"A",datasourceUid:(0,o.F)().getInstanceSettings(F)?.uid??"",queryType:"",relativeTimeRange:(0,l.Rr)(),expr:Y.expr,model:{refId:"A",hide:!1,expr:Y.expr}},q=I(Y);return{...Z,...q,queries:[ce],annotations:P(M(Y.annotations,!1)),type:f.$.cloudAlerting,dataSourceName:F,namespace:k,group:_.name}}else if((0,y.yF)(Y)){const ae=T(Y);return{...Z,...ae,type:f.$.cloudRecording,dataSourceName:F,namespace:k,group:_.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function I(j){const F=C(),[k,_]=j.for?(0,s.bG)(j.for):[F.forTime,F.forTimeUnit],[Y,Z]=j.keep_firing_for?(0,s.bG)(j.keep_firing_for):[F.keepFiringForTime,F.keepFiringForTimeUnit];return{name:j.alert,expression:j.expr,forTime:k,forTimeUnit:_,keepFiringForTime:Y,keepFiringForTimeUnit:Z,annotations:M(j.annotations,!1),labels:M(j.labels,!0)}}function T(j){return{name:j.record,expression:j.expr,labels:M(j.labels,!0)}}const O=()=>{const j=(0,p.P)();if(!j)return[...B("A","B")];const F=(0,l.Rr)();return[{refId:"A",datasourceUid:j.uid,queryType:"",relativeTimeRange:F,model:{refId:"A"}},...B("B","C")]},A=j=>{const F=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:j[0]?.uid||"",queryType:"",relativeTimeRange:F,model:{refId:"A"}}]},B=(...j)=>{const F=j[0],k=j[1],_={refId:j[0],type:d.Us.reduce,datasource:{uid:d.Yq,type:g.hr.type},conditions:[{type:"query",evaluator:{params:[],type:i.$.IsAbove},operator:{type:"and"},query:{params:[F]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},Y={refId:k,type:d.Us.threshold,datasource:{uid:d.Yq,type:g.hr.type},conditions:[{type:"query",evaluator:{params:[0],type:i.$.IsAbove},operator:{type:"and"},query:{params:[k]},reducer:{params:[],type:"last"}}],expression:F};return[{refId:F,datasourceUid:d.Yq,queryType:"",model:_},{refId:k,datasourceUid:d.Yq,queryType:"",model:Y}]},b=async(j,F,k,_,Y,Z)=>{const ae=[];for(const ce of j){const q=await(0,o.F)().get(ce.datasource?.uid?ce.datasource:_),De={uid:q.uid,type:q.type},oe=r.relativeToTimeRange(F),{interval:te,intervalMs:fe}=V(oe,Z??q.interval,Y),Te={__interval:{text:te,value:te},__interval_ms:{text:fe,value:fe},...k},ge=q.interpolateVariablesInQueries?await q.interpolateVariablesInQueries([ce],Te)[0]:ce;if(De.uid===d.Yq){const he={refId:ge.refId,queryType:"",relativeTimeRange:F,datasourceUid:d.Yq,model:ge};ae.push(he)}else{const he=(0,o.F)().getInstanceSettings(De);if(he&&he.meta.alerting){const me={refId:ge.refId,queryType:ge.queryType??"",relativeTimeRange:F,datasourceUid:he.uid,model:{...ge,maxDataPoints:Y,intervalMs:fe}};ae.push(me)}}}return ae},W=async(j,F)=>{const{targets:k}=j;if(!j.id||!F.uid)return;const _=r.timeRangeToRelative(r.convertRawToRange(F.time)),Y=await b(k,_,j.scopedVars||{},j.datasource??void 0,j.maxDataPoints??void 0,j.interval??void 0);if(!Y.length||!Y.find(q=>q.datasourceUid!==d.Yq))return;if(!Y.find(q=>q.datasourceUid===d.Yq)){const[q,De]=B((0,m.Hs)(Y),"-");Y.push(q);const[oe,te]=B(q.refId,(0,m.Hs)(Y));Y.push(te)}const{folderTitle:Z,folderUid:ae}=F.meta;return{type:f.$.grafana,folder:ae&&Z?{uid:ae,title:Z}:void 0,queries:Y,name:j.title,condition:Y[Y.length-1].refId,annotations:[{key:E.q6.dashboardUID,value:F.uid},{key:E.q6.panelID,value:String(j.id)}]}};function V(j,F,k){return k?r.calculateInterval(j,k,F):F&&r.intervalToMs(F)>1e3?{interval:F,intervalMs:r.intervalToMs(F)}:{interval:"1s",intervalMs:1e3}}function w(j){const F=j.model;return K(F)&&F.instant&&F.range?{...j,model:{...F,range:!0,instant:!1}}:j}function K(j){return"expr"in j&&"instant"in j&&"range"in j}function z(j){return"expr"in j}const G=j=>({...j,queries:j.queries?.map(F=>(0,n.omit)(F,"model.hide"))});function Q(j){return G(S(j))}},30391:(J,R,e)=>{"use strict";e.d(R,{$V:()=>y,CK:()=>g,Dg:()=>m,GV:()=>c,OA:()=>h,Om:()=>v,Qc:()=>p,Yd:()=>o,Zk:()=>l,d3:()=>E,s0:()=>M});var n=e(95712),a=e(15032);function l(P,x,S,I){return(0,a.Pc)(I)?{uid:I.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:P,namespace:x,groupName:S,ruleName:(0,a.cG)(I)?I.alert:I.record,rulerRuleHash:v(I)}}function r(P,x,S,I){return{ruleSourceName:P,namespace:x,groupName:S,ruleName:I.name,ruleHash:C(I)}}function o(P,x){const S=x.namespace.name,I=x.group.name;if(x.rulerRule)return l(P,S,I,x.rulerRule);if(x.promRule)return r(P,S,I,x.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function g(P){return l(P.ruleSourceName,P.namespace,P.group.name,P.rule)}function m(P,x){return(0,a.Kl)(P)&&(0,a.Kl)(x)?P.uid===x.uid:(0,a.E4)(P)&&(0,a.E4)(x)?P.groupName===x.groupName&&P.namespace===x.namespace&&P.ruleName===x.ruleName&&P.rulerRuleHash===x.rulerRuleHash&&P.ruleSourceName===x.ruleSourceName:(0,a.qE)(P)&&(0,a.qE)(x)?P.groupName===x.groupName&&P.namespace===x.namespace&&P.ruleName===x.ruleName&&P.ruleHash===x.ruleHash&&P.ruleSourceName===x.ruleSourceName:!1}const d="cri",u="pri";function i(P){return P.replace(/\$/g,"_DOLLAR_")}function f(P){return P.replace(/\_DOLLAR\_/g,"$")}function c(P){return P.replace(/\//g,"").replace(/\\/g,"")}function E(P){return P.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function p(P,x=!1){const I=(x?decodeURIComponent(P):P).split("$");if(I.length===1)return{uid:P,ruleSourceName:"grafana"};if(I.length===6){const[T,O,A,B,b,W]=I.map(f).map(E);if(T===d)return{ruleSourceName:O,namespace:A,groupName:B,ruleName:b,rulerRuleHash:W};if(T===u)return{ruleSourceName:O,namespace:A,groupName:B,ruleName:b,ruleHash:W}}throw new Error(`Failed to parse rule location: ${P}`)}function h(P,x=!1){if(P)try{return p(P,x)}catch{return}}function y(P){return(0,a.Kl)(P)?P.uid:(0,a.E4)(P)?[d,P.ruleSourceName,P.namespace,P.groupName,P.ruleName,P.rulerRuleHash].map(String).map(i).map(c).join("$"):[u,P.ruleSourceName,P.namespace,P.groupName,P.ruleName,P.ruleHash].map(String).map(i).map(c).join("$")}function s(P){let x=0;if(P.length===0)return x;for(let S=0;S<P.length;S++){const I=P.charCodeAt(S);x=(x<<5)-x+I,x=x&x}return x}function v(P){if((0,a.yF)(P))return s(JSON.stringify([P.record,P.expr,D(P.labels)])).toString();if((0,a.cG)(P))return s(JSON.stringify([P.alert,P.expr,D(P.annotations),D(P.labels)])).toString();if((0,a.Pc)(P))return P.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function C(P){if((0,a.OP)(P))return s(JSON.stringify([P.type,P.query,D(P.labels)])).toString();if((0,a.x_)(P))return s(JSON.stringify([P.type,P.query,D(P.annotations),D(P.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function D(P){return JSON.stringify(Object.entries(P||{}).sort((x,S)=>x[0].localeCompare(S[0])))}function M(P){return(0,a.Kl)(P)?n.GC:P.ruleSourceName}},15032:(J,R,e)=>{"use strict";e.d(R,{Aq:()=>T,C7:()=>I,E:()=>p,E4:()=>v,Jq:()=>B,Kl:()=>s,OP:()=>i,PW:()=>b,Pc:()=>E,Re:()=>S,SS:()=>P,Wd:()=>C,cG:()=>f,m$:()=>y,pB:()=>h,qE:()=>D,qd:()=>W,ub:()=>A,vU:()=>M,x_:()=>u,yF:()=>c});var n=e(86832),a=e.n(n),l=e(41560),r=e(17330),o=e(90659),g=e(63483),m=e(95712),d=e(66793);function u(w){return typeof w=="object"&&w.type===r.pz.Alerting}function i(w){return typeof w=="object"&&w.type===r.pz.Recording}function f(w){return typeof w=="object"&&"alert"in w}function c(w){return typeof w=="object"&&"record"in w}function E(w){return typeof w=="object"&&"grafana_alert"in w}function p(w){return w.rulerRule&&E(w.rulerRule)&&!!w.rulerRule.grafana_alert.is_paused}function h(w){return JSON.stringify(w.labels)}function y(w){return w.error&&w.error?.message?.includes(g.jZ)}function s(w){return"uid"in w}function v(w){return"rulerRuleHash"in w}function C(w){return Object.values(r.pz).includes(w)}function D(w){return"ruleHash"in w}function M(w){switch(w){case"ok":return o.VG.Ok;case"nodata":return o.VG.NoData;case"error":case"err":return o.VG.Error;case"unknown":return o.VG.Unknown;default:return}}function P(w){return w===r.x_.Inactive?"Normal":(0,n.capitalize)(w)}const x=w=>w.reduce((K,{dataSourceName:z,name:G,groups:Q})=>(Q.forEach(({name:j,rules:F})=>{F.forEach(k=>{u(k)&&K.push({dataSourceName:z,namespaceName:G,groupName:j,rule:k})})}),K),[]),S=w=>u(w.promRule)?w.promRule:null,I=w=>w.reduce((K,{rulesSource:z,name:G,groups:Q})=>(Q.forEach(({name:j,rules:F})=>{F.forEach(k=>{k.promRule&&u(k.promRule)&&K.push({dataSourceName:(0,m.EG)(z),namespaceName:G,groupName:j,...k})})}),K),[]);function T(w){let K;return Object.values(l.Z).includes(w)?K=w:K=(0,r.ED)(w),O[K]}const O={[r.x_.Inactive]:"good",[r.x_.Firing]:"bad",[r.x_.Pending]:"warning",[r.bj.Alerting]:"bad",[r.bj.Error]:"bad",[r.bj.NoData]:"info",[r.bj.Normal]:"good",[r.bj.Pending]:"warning",[l.Z.NoData]:"info",[l.Z.Paused]:"warning",[l.Z.Alerting]:"bad",[l.Z.OK]:"good",[l.Z.Pending]:"warning",[l.Z.Unknown]:"info"};function A(w){return w?.alerts?w.alerts.reduce((K,z)=>{const G=(0,r.ED)(z.state)!==r.bj.Normal;if(z.activeAt&&G){const Q=new Date(z.activeAt);if(K===null||K.getTime()>Q.getTime())return Q}return K},null):null}function B(w){return Array.isArray(w.source_tenants)}function b(w){return E(w)?w.grafana_alert.title:f(w)?w.alert:c(w)?w.record:""}const W=(w,K)=>{const z={alertName:"",forDuration:"0s",evaluationsToFire:0};return E(w)?{alertName:w.grafana_alert.title,forDuration:w.for,evaluationsToFire:V(w.for,K)}:f(w)?{alertName:w.alert,forDuration:w.for??"1m",evaluationsToFire:V(w.for??"1m",K)}:z},V=(w,K)=>{const z=(0,d.Bg)(K),G=(0,d.Bg)(w);return G===0&&z!==0?1:z===0||G/z<1?0:Math.ceil(G/z)+1}},66793:(J,R,e)=>{"use strict";e.d(R,{Bg:()=>i,bG:()=>a,gS:()=>c,gV:()=>f,nd:()=>u,qr:()=>r,wd:()=>o});var n=e(54637);function a(E){const p=E.match(/(\d+)(\w+)/);if(p)return[Number(p[1]),p[2]];throw new Error(`Invalid interval description: ${E}`)}function l(E){const{sec:p,count:h}=describeInterval(E);return p*h}const r=Object.entries(n.t).map(([E,p])=>({label:E[0].toUpperCase()+E.slice(1),value:p}));function o(E){try{return u(E),!0}catch{return!1}}const g={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},m=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),d=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(n.t).join(", ")}`);function u(E){let p=E,h=[];function y(v){const C=m.exec(v),D=C?.groups?.value&&C?.groups?.type;if(!C||!D)throw d;C&&C.groups?.value&&C.groups?.type&&(p=p.replace(C[0],""),h.push([Number(C.groups.value),C.groups.type])),p&&y(p)}if(y(E),!h.length)throw d;return h.reduce((v,[C,D])=>{const M=C*g[D];return v+M},0)}const i=E=>{try{return u(E)}catch{return 0}},f=E=>E.includes("0001-01-01T00");function c(E){return E%(1e3*60*60)===0?E/(1e3*60*60)+"h":E%(1e3*60)===0?E/(1e3*60)+"m":E%1e3===0?E/1e3+"s":E.toFixed()+"ms"}},24597:(J,R,e)=>{"use strict";e.d(R,{_:()=>l,u:()=>a});var n=e(32688);function a(r,o){const m=new URLSearchParams(o).toString();return`${n.config.appSubUrl}${r}${m?`?${m}`:""}`}function l(r,o){const m=new URLSearchParams(o).toString();try{const d=new URL(n.config.appSubUrl,n.config.appUrl);return d.pathname=r,`${d.href}${m?`?${m}`:""}`}catch{return a(r,o)}}},7376:(J,R,e)=>{"use strict";e.d(R,{Dl:()=>r,_E:()=>l,lK:()=>o,xD:()=>a});var n=e(4148);function a(g){return(0,n.i)().post("/api/annotations",g)}function l(g){return(0,n.i)().put(`/api/annotations/${g.id}`,g)}function r(g){return(0,n.i)().delete(`/api/annotations/${g.id}`)}async function o(){return(await(0,n.i)().get("/api/annotations/tags")).result.tags.map(({tag:m,count:d})=>({term:m,count:d}))}},3101:(J,R,e)=>{"use strict";e.d(R,{r:()=>i});var n=e(63302),a=e(84289),l=e(71476),r=e(81626),o=e(96083),g=e(34110),m=e(47967);let d=100;function u(){return"AQ"+d++}function i(f,c,E){const p={...m.yA,...c.annotations},h={...p.getDefaultQuery?.(),...E},y=p.prepareAnnotation(h);if(!y)return(0,n.of)({});const s=p.prepareQuery(y);if(!s)return(0,n.of)({});const v=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,C=r.calculateInterval(f.range,v,c.interval),D={__interval:{text:C.interval,value:C.interval},__interval_ms:{text:C.intervalMs.toString(),value:C.intervalMs},__annotation:{text:y.name,value:y}},M={startTime:Date.now(),requestId:u(),range:f.range,maxDataPoints:v,scopedVars:D,...C,app:o.zj.Dashboard,timezone:f.dashboard.timezone,targets:[{...s,refId:"Anno"}]};return(0,g.v7)(c,M).pipe((0,a.z)(P=>{const x=P?.series.length?P.series:P.annotations;return x?.length?p.processEvents(y,x).pipe((0,l.U)(S=>({panelData:P,events:S}))):(0,n.of)({panelData:P,events:[]})}))}},47967:(J,R,e)=>{"use strict";e.d(R,{$w:()=>v,r0:()=>E,yA:()=>f,yr:()=>C});var n=e(86832),a=e.n(n),l=e(63302),r=e(84289),o=e(71476),g=e(31049),m=e(89591),d=e(69330),u=e(19353),i=e(50820);const f={prepareAnnotation:D=>{if((0,n.isString)(D?.query)){const{query:M,...P}=D;return{...P,target:{refId:"annotation_query",query:M},mappings:{}}}return D},prepareQuery:D=>D.target,processEvents:(D,M)=>y(M,D.mappings)};function c(){return D=>D.pipe((0,r.z)(M=>{if(!M?.length)return(0,l.of)(void 0);if(M.length===1)return(0,l.of)(M[0]);const P={interpolate:x=>x};return(0,l.of)(M).pipe(g.Y.mergeTransformer.operator({},P),(0,o.U)(x=>x[0]))}))}const E=[{key:"time",field:D=>D.fields.find(M=>M.type===m.fS.time),placeholder:"time, or the first time field"},{key:"timeEnd",label:"end time",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:D=>D.fields.find(M=>M.type===m.fS.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],p=[{key:"color"},{key:"isRegion"},{key:"source"}],h=[...i.config.publicDashboardAccessToken?p:[],...E,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function y(D,M){return(0,l.of)(D).pipe(c(),(0,o.U)(P=>{if(!P?.length)return[];let x=!1,S=!1;const I={};for(const A of P.fields){const B=(0,d.CZ)(A,P);I[B.toLowerCase()]=A}M||(M={});const T=[];for(const A of h){const B=M[A.key]||{};if(B.source===u.L.Skip)continue;const b={key:A.key,split:A.split};if(B.source===u.L.Text)b.text=B.value;else{const W=(B.value||A.key).toLowerCase();b.field=I[W],!b.field&&A.field&&(b.field=A.field(P))}(b.field||b.text)&&(T.push(b),b.key==="time"?x=!0:b.key==="text"&&(S=!0))}if(!x||!S)return console.error("Cannot process annotation fields. No time or text present."),[];const O=[];for(let A=0;A<P.length;A++){const B={type:"default",color:"red"};for(const b of T){let W;if(b.text)W=b.text;else if(b.field&&(W=b.field.values[A],W!==void 0&&b.regex)){const V=b.regex.exec(W);V&&(W=V[1]?V[1]:V[0])}W!=null&&(b.split&&typeof W=="string"&&(W=W.split(",")),B[b.key]=W)}O.push(B)}return O}))}const s=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function v(D){const{type:M}=D;return!(M==="datasource"||s.includes(M))}function C(D){const{type:M}=D;return s.includes(M)}},80358:(J,R,e)=>{"use strict";e.d(R,{ZP:()=>i,dF:()=>g,iK:()=>r,j4:()=>o,nQ:()=>d,ql:()=>m});var n=e(77960);const a={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",migrationResult:{total:0,migrated:0,failed:0,failedApikeyIDs:[0],failedDetails:[]}},l=(0,n.oM)({name:"apiKeys",initialState:a,reducers:{apiKeysLoaded:(f,c)=>{const{keys:E,keysIncludingExpired:p}=c.payload,h=c.payload.keys.length===0&&c.payload.keysIncludingExpired.length>0?!0:f.includeExpired;return{...f,hasFetched:!0,keys:E,keysIncludingExpired:p,includeExpired:h}},setSearchQuery:(f,c)=>({...f,searchQuery:c.payload}),includeExpiredToggled:f=>({...f,includeExpired:!f.includeExpired}),isFetching:f=>({...f,hasFetched:!1}),setMigrationResult:(f,c)=>({...f,migrationResult:c.payload})}}),{apiKeysLoaded:r,includeExpiredToggled:o,isFetching:g,setSearchQuery:m,setMigrationResult:d}=l.actions,i={apiKeys:l.reducer}},35045:(J,R,e)=>{"use strict";e.d(R,{getAuthProviderStatus:()=>i,getRegisteredAuthProviders:()=>m,initAuthConfig:()=>f});var n=e(21308),a=e(20367),l=e(57721);const r=[],o={};function g(E,p){r.find(h=>h.id===E.id)||(r.push(E),p&&(o[E.id]=p))}function m(){return r}function d(E){return r.find(p=>p.id===E)}function u(E){const p=[];for(const[h,y]of Object.entries(E)){const s=r.find(v=>`auth.${v.id}`===h);if(s){const v={...y,providerId:s.id,displayName:y.name||s.displayName};p.push(v)}}return p}async function i(E){if(o[E]){const p=o[E];return p()}return{configured:!1,enabled:!1}}function f(){g({id:"ldap",type:"LDAP",protocol:"LDAP",displayName:"LDAP",configPath:"ldap"},c)}async function c(){if(n.Vt.hasPermission(l.AccessControlAction.SettingsRead)){const p=(await(0,a.i)().get("/api/admin/settings"))["auth.ldap"]||{};return{configured:p.enabled==="true",enabled:p.enabled==="true",hide:p.enabled!=="true"}}return{configured:!1,enabled:!1}}},26071:(J,R,e)=>{"use strict";e.d(R,{AB:()=>o,AW:()=>r,ZP:()=>E,_E:()=>m,uX:()=>g});var n=e(77960);const a={settings:{},providerStatuses:{},isLoading:!1},l=(0,n.oM)({name:"authConfig",initialState:a,reducers:{settingsUpdated:(p,h)=>({...p,settings:h.payload}),providerStatusesLoaded:(p,h)=>({...p,providerStatuses:h.payload}),loadingBegin:p=>({...p,isLoading:!0}),loadingEnd:p=>({...p,isLoading:!1}),setError:(p,h)=>({...p,updateError:h.payload}),resetError:p=>({...p,updateError:void 0}),setWarning:(p,h)=>({...p,warning:h.payload}),resetWarning:p=>({...p,warning:void 0})}}),{settingsUpdated:r,providerStatusesLoaded:o,loadingBegin:g,loadingEnd:m,setError:d,resetError:u,setWarning:i,resetWarning:f}=l.actions,E={authConfig:l.reducer}},46347:(J,R,e)=>{"use strict";e.d(R,{CN:()=>E.CN,Hv:()=>y,OH:()=>M,Zi:()=>h,jL:()=>P,t4:()=>D,vN:()=>I,wo:()=>x,yC:()=>s,yF:()=>S,zs:()=>C,zu:()=>v});var n=e(91986),a=e(31312),l=e(57837),r=e(10694),o=e(4148),g=e(13601),m=e(97316),d=e(90634),u=e(21308),i=e(3654),f=e(8099),c=e(13540),E=e(60952);function p({baseURL:T}){async function O(A){try{const{data:B,...b}=await(0,a.n)((0,o.i)().fetch({...A,url:T+A.url,showErrorAlert:A.showErrorAlert}));return{data:B,meta:b}}catch(B){return A.manageError?A.manageError(B):{error:B}}}return O}const h=(0,n.LC)({tagTypes:["getFolder"],reducerPath:"browseDashboardsAPI",baseQuery:p({baseURL:"/api"}),endpoints:T=>({getFolder:T.query({providesTags:(O,A,B)=>[{type:"getFolder",id:B}],query:O=>({url:`/folders/${O}`,params:{accesscontrol:!0}})}),newFolder:T.mutation({query:({title:O,parentUid:A})=>({method:"POST",url:"/folders",data:{title:O,parentUid:A}}),onQueryStarted:({parentUid:O},{queryFulfilled:A,dispatch:B})=>{A.then(async({data:b})=>{await u.Vt.fetchUserPermissions(),B((0,m.$l)((0,d.AT)("Folder created"))),B((0,f.it)({parentUID:O,pageSize:c.IV})),g.E1.push(l.u.stripBaseFromUrl(b.url))})}}),saveFolder:T.mutation({invalidatesTags:["getFolder"],query:({uid:O,title:A,version:B})=>({method:"PUT",url:`/folders/${O}`,data:{title:A,version:B}}),onQueryStarted:({parentUid:O},{queryFulfilled:A,dispatch:B})=>{A.then(()=>{B((0,f.it)({parentUID:O,pageSize:c.IV}))})}}),moveFolder:T.mutation({invalidatesTags:["getFolder"],query:({folder:O,destinationUID:A})=>({url:`/folders/${O.uid}/move`,method:"POST",data:{parentUID:A}}),onQueryStarted:({folder:O,destinationUID:A},{queryFulfilled:B,dispatch:b})=>{const{parentUid:W}=O;B.then(()=>{b((0,f.it)({parentUID:W,pageSize:c.IV})),b((0,f.it)({parentUID:A,pageSize:c.IV}))})}}),deleteFolder:T.mutation({query:({uid:O})=>({url:`/folders/${O}`,method:"DELETE",params:{forceDeleteRules:!1}}),onQueryStarted:({parentUid:O},{queryFulfilled:A,dispatch:B})=>{A.then(()=>{B((0,f.it)({parentUID:O,pageSize:c.IV}))})}}),getAffectedItems:T.query({queryFn:async O=>{const B=Object.keys(O.folder).filter(V=>O.folder[V]).map(V=>(0,o.i)().get(`/api/folders/${V}/counts`)),b=await Promise.all(B),W={folder:Object.values(O.folder).filter(r.fQ).length,dashboard:Object.values(O.dashboard).filter(r.fQ).length,libraryPanel:0,alertRule:0};for(const V of b)W.folder+=V.folder??0,W.dashboard+=V.dashboard,W.alertRule+=V.alertrule,W.libraryPanel+=V.librarypanel;return{data:W}}}),moveItems:T.mutation({invalidatesTags:["getFolder"],queryFn:async({selectedItems:O,destinationUID:A},B,b,W)=>{const V=Object.keys(O.dashboard).filter(K=>O.dashboard[K]),w=Object.keys(O.folder).filter(K=>O.folder[K]);for(const K of w)await W({url:`/folders/${K}/move`,method:"POST",data:{parentUID:A}});for(const K of V){const G={dashboard:(await(0,o.i)().get(`/api/dashboards/uid/${K}`)).dashboard,folderUid:A,overwrite:!1,message:""};await W({url:"/dashboards/db",method:"POST",data:G})}return{data:void 0}},onQueryStarted:({destinationUID:O,selectedItems:A},{queryFulfilled:B,dispatch:b})=>{const W=Object.keys(A.dashboard).filter(w=>A.dashboard[w]),V=Object.keys(A.folder).filter(w=>A.folder[w]);B.then(()=>{b((0,f.it)({parentUID:O,pageSize:c.IV})),b((0,f.Nc)([...V,...W]))})}}),deleteItems:T.mutation({queryFn:async({selectedItems:O},A,B,b)=>{const W=Object.keys(O.dashboard).filter(w=>O.dashboard[w]),V=Object.keys(O.folder).filter(w=>O.folder[w]);for(const w of V)await b({url:`/folders/${w}`,method:"DELETE",params:{forceDeleteRules:!1}});for(const w of W)await b({url:`/dashboards/uid/${w}`,method:"DELETE"});return{data:void 0}},onQueryStarted:({selectedItems:O},{queryFulfilled:A,dispatch:B})=>{const b=Object.keys(O.dashboard).filter(V=>O.dashboard[V]),W=Object.keys(O.folder).filter(V=>O.folder[V]);A.then(()=>{B((0,f.Nc)([...W,...b]))})}}),saveDashboard:T.mutation({query:({dashboard:O,folderUid:A,message:B,overwrite:b})=>({url:"/dashboards/db",method:"POST",data:{dashboard:O,folderUid:A,message:B??"",overwrite:!!b}}),onQueryStarted:({folderUid:O},{queryFulfilled:A,dispatch:B})=>{i.H.ignoreNextSave(),A.then(async()=>{await u.Vt.fetchUserPermissions(),B((0,f.it)({parentUID:O,pageSize:c.IV}))})}})})}),{endpoints:y,useDeleteFolderMutation:s,useDeleteItemsMutation:v,useGetAffectedItemsQuery:C,useGetFolderQuery:D,useMoveFolderMutation:M,useMoveItemsMutation:P,useNewFolderMutation:x,useSaveDashboardMutation:S,useSaveFolderMutation:I}=h},13540:(J,R,e)=>{"use strict";e.d(R,{IV:()=>d,ry:()=>u,xH:()=>i});var n=e(32688),a=e(4148),l=e(9738),r=e(17231),o=e(39971),g=e(21308),m=e(57721);const d=50;async function u(f,c,E=1,p=d){if(f&&!n.config.featureToggles.nestedFolders)return[];const h=(0,a.i)();let y=[];return g.Vt.hasPermission(m.AccessControlAction.FoldersRead)&&(y=await h.get("/api/folders",{parentUid:f,page:E,limit:p})),y.map(s=>({kind:"folder",uid:s.uid,title:s.title,parentTitle:c,parentUID:f,url:`/dashboards/f/${s.uid}/`}))}async function i(f,c=1,E=d){const h=await(0,r.getGrafanaSearcher)().search({kind:["dashboard"],query:"*",location:f||"general",from:(c-1)*E,limit:E});return h.view.map(y=>{const s=(0,o.f9)(y,h.view);return s.parentUID===l.YQ&&(s.parentUID=void 0),s})}},83408:(J,R,e)=>{"use strict";e.d(R,{X:()=>d});var n=e(39953),a=e(15166),l=e(98632),r=e(33155),o=e(46347),g=e(62679);function m(u,i,f,c){const E=u+i+f+c,p=[];u&&p.push((0,g.t)("browse-dashboards.counts.folder","{{count}} folder",{count:u})),i&&p.push((0,g.t)("browse-dashboards.counts.dashboard","{{count}} dashboard",{count:i})),f&&p.push((0,g.t)("browse-dashboards.counts.libraryPanel","{{count}} library panel",{count:f})),c&&p.push((0,g.t)("browse-dashboards.counts.alertRule","{{count}} alert rule",{count:c}));let h=(0,g.t)("browse-dashboards.counts.total","{{count}} item",{count:E});return p.length>0&&(h+=`: ${p.join(", ")}`),h}const d=({selectedItems:u})=>{const{data:i,isFetching:f,isLoading:c,error:E}=(0,o.zs)(u);return n.createElement(n.Fragment,null,n.createElement(l.x,{element:"p",color:"secondary"},i&&m(i.folder,i.dashboard,i.libraryPanel,i.alertRule),(f||c)&&n.createElement(a.Z,{width:200})),E&&n.createElement(r.b,{severity:"error",title:"Unable to retrieve descendant information"}))}},23334:(J,R,e)=>{"use strict";e.d(R,{v:()=>a});var n=e(32688);function a(){return n.config.featureToggles.nestedFolders||n.config.featureToggles.newBrowseDashboards}},68410:(J,R,e)=>{"use strict";e.d(R,{Nc:()=>o,it:()=>g,si:()=>m});var n=e(9738),a=e(57721),l=e(13540),r=e(99432);const o=(0,a.createAsyncThunk)("browseDashboards/refreshParents",async(d,{getState:u,dispatch:i})=>{const{browseDashboards:f}=u(),{rootItems:c,childrenByParentUID:E}=f,p=new Set;for(const h of d){const y=(0,r.i)(c?.items??[],E,h);p.add(y?.parentUID)}for(const h of p)i(g({parentUID:h,pageSize:l.IV}))}),g=(0,a.createAsyncThunk)("browseDashboards/refetchChildren",async({parentUID:d,pageSize:u})=>{const i=d===n.YQ?void 0:d;let f=1,c="folder",E=await(0,l.ry)(i,void 0,f,u),p=E.length<u;if(c==="folder"&&p){c="dashboard",f=1;const h=await(0,l.xH)(i,f,u);p=h.length<u,E=E.concat(h)}return{children:E,lastPageOfKind:p,page:f,kind:c}}),m=(0,a.createAsyncThunk)("browseDashboards/fetchNextChildrenPage",async({parentUID:d,excludeKinds:u=[],pageSize:i},f)=>{const c=!u.includes("dashboard"),E=d===n.YQ?void 0:d,p=f.getState().browseDashboards,h=E?p.childrenByParentUID[E]:p.rootItems;let y=1,s;if(h?h.lastFetchedKind==="dashboard"&&!h.lastKindHasMoreItems?console.warn(`fetchNextChildrenPage called for ${E} but that collection is fully loaded`):h.lastFetchedKind==="folder"&&h.lastKindHasMoreItems?(y=h.lastFetchedPage+1,s="folder"):c&&(y=h.lastFetchedKind==="folder"?1:h.lastFetchedPage+1,s="dashboard"):(y=1,s="folder"),!s)return;let v=s==="folder"?await(0,l.ry)(E,void 0,y,i):await(0,l.xH)(E,y,i),C=v.length<i;if(s==="folder"&&C&&c){s="dashboard",y=1;const D=await(0,l.xH)(E,y,i);C=D.length<i,v=v.concat(D)}return{children:v,lastPageOfKind:C,page:y,kind:s}})},8099:(J,R,e)=>{"use strict";e.d(R,{MH:()=>u,qO:()=>P,si:()=>a.si,it:()=>a.it,Nc:()=>a.Nc,hO:()=>d,u6:()=>n.u6,xm:()=>n.xm,wk:()=>n.wk,m2:()=>D,zw:()=>h,aw:()=>v,$H:()=>C,Sk:()=>y,QD:()=>s,D$:()=>M});var n=e(65158),a=e(68410),l=e(39953),r=e(38874),o=e(57721),g=e(13540),m=e(99432);const d=x=>x.browseDashboards.rootItems,u=x=>x.browseDashboards.childrenByParentUID,i=x=>x.browseDashboards.openFolders,f=x=>x.browseDashboards.selectedItems,c=(0,r.P1)(d,u,i,(x,S)=>S,(x,S,I,T)=>P(T,x,S,I)),E=(0,r.P1)(f,x=>Object.values(x).some(S=>Object.values(S).some(I=>I))),p=(0,r.P1)(f,u,(x,S)=>{const I={dashboard:{...x.dashboard},folder:{...x.folder}};for(const T of Object.keys(x.folder))if(x.folder[T]){const A=S[T];if(A)for(const B of A.items)B.kind==="dashboard"&&(I.dashboard[B.uid]=!1),B.kind==="folder"&&(I.folder[B.uid]=!1)}return I});function h(x){return(0,o.useSelector)(S=>(x?S.browseDashboards.childrenByParentUID[x]:S.browseDashboards.rootItems)?"fulfilled":"pending")}function y(x){return(0,o.useSelector)(S=>c(S,x))}function s(){return(0,o.useSelector)(x=>E(x))}function v(){return(0,o.useSelector)(f)}function C(){return(0,o.useSelector)(x=>x.browseDashboards.childrenByParentUID)}function D(){return(0,o.useSelector)(x=>p(x))}function M(x=[]){const S=(0,o.useDispatch)(),I=(0,l.useRef)(!1);return(0,l.useCallback)(O=>{if(I.current)return Promise.resolve();I.current=!0;const A=S((0,a.si)({parentUID:O,excludeKinds:x,pageSize:g.IV}));return A.finally(()=>I.current=!1),A},[S,x])}function P(x,S,I,T,O=0,A=[],B=[]){function b(Q,j,F){if(A.includes(Q.kind)||B.includes(Q.uid))return[];const k=P(Q.uid,S,I,T,F+1,A,B),_=!!T[Q.uid],Y=I[Q.uid]?.items.length===0;return _&&Y&&!A.includes("empty-folder")&&k.push({isOpen:!1,level:F+1,item:{kind:"ui",uiKind:"empty-folder",uid:Q.uid+"empty-folder"},parentUID:j}),[{item:Q,parentUID:j,level:F,isOpen:_},...k]}const W=x&&T[x]||O===0,V=x?I[x]:S;let K=((x?W&&V?.items:V?.items)||[]).flatMap(Q=>b(Q,x,O));const z=A.includes("dashboard")&&V?.lastFetchedKind==="dashboard";return(O===0&&!V||W&&V&&!(V.isFullyLoaded||z))&&(K=K.concat((0,m.k)(g.IV,x,O))),K}},65158:(J,R,e)=>{"use strict";e.d(R,{ZP:()=>C,u6:()=>v,xm:()=>y,wk:()=>s});var n={};e.r(n),e.d(n,{fetchNextChildrenPageFulfilled:()=>g,refetchChildrenFulfilled:()=>o,setAllSelection:()=>u,setFolderOpenState:()=>m,setItemSelectionState:()=>d});var a=e(77960),l=e(68410),r=e(99432);function o(D,M){const{children:P,page:x,kind:S,lastPageOfKind:I}=M.payload,{parentUID:T}=M.meta.arg,O={items:P,lastFetchedKind:S,lastFetchedPage:x,lastKindHasMoreItems:!I,isFullyLoaded:S==="dashboard"&&I};T?D.childrenByParentUID[T]=O:D.rootItems=O}function g(D,M){const P=M.payload;if(!P)return;const{children:x,page:S,kind:I,lastPageOfKind:T}=P,{parentUID:O,excludeKinds:A=[]}=M.meta.arg,W={items:((O?D.childrenByParentUID[O]:D.rootItems)?.items??[]).concat(x),lastFetchedKind:I,lastFetchedPage:S,lastKindHasMoreItems:!T,isFullyLoaded:(A.includes("dashboard")||I==="dashboard")&&T};if(!O){D.rootItems=W;return}if(D.childrenByParentUID[O]=W,D.selectedItems.folder[O])for(const w of x)D.selectedItems[w.kind][w.uid]=!0}function m(D,M){const{folderUID:P,isOpen:x}=M.payload;D.openFolders[P]=x}function d(D,M){const{item:P,isSelected:x}=M.payload;function S(T,O){if(D.selectedItems[T][O]=x,T!=="folder")return;let A=D.childrenByParentUID[O];for(const B of A?.items??[])S(B.kind,B.uid)}S(P.kind,P.uid);let I=P.parentUID;for(;I;){const T=(0,r.i)(D.rootItems?.items??[],D.childrenByParentUID,I);if(!T)break;x||(D.selectedItems[T.kind][T.uid]=!1),I=T.parentUID}D.selectedItems.$all=D.rootItems?.items?.every(T=>D.selectedItems[T.kind][T.uid])??!1}function u(D,M){const{isSelected:P,folderUID:x}=M.payload;if(D.selectedItems.$all=P,P){let I=function(T){const O=T?D.childrenByParentUID[T]:D.rootItems;if(O)for(const A of O.items)D.selectedItems[A.kind][A.uid]=P,A.kind==="folder"&&I(A.uid)};var S=I;I(x)}else for(const I in D.selectedItems){if(!(I==="dashboard"||I==="panel"||I==="folder"))continue;const T=D.selectedItems[I];for(const O in T)T[O]=P}}const{fetchNextChildrenPageFulfilled:i,refetchChildrenFulfilled:f,...c}=n,E={rootItems:void 0,childrenByParentUID:{},openFolders:{},selectedItems:{dashboard:{},folder:{},panel:{},$all:!1}},p=(0,a.oM)({name:"browseDashboards",initialState:E,reducers:c,extraReducers:D=>{D.addCase(l.si.fulfilled,i),D.addCase(l.it.fulfilled,f)}}),h=p.reducer,{setFolderOpenState:y,setItemSelectionState:s,setAllSelection:v}=p.actions,C={browseDashboards:h}},99432:(J,R,e)=>{"use strict";e.d(R,{i:()=>n,k:()=>a});function n(l,r,o){for(const g of l)if(g.uid===o)return g;for(const g in r){const m=r[g];if(m){for(const d of m.items)if(d.uid===o)return d}}}function a(l,r,o){return new Array(l).fill(null).map((g,m)=>({parentUID:r,level:o,isOpen:!1,item:{kind:"ui",uiKind:"pagination-placeholder",uid:`${r}-pagination-${m}`}}))}},91473:(J,R,e)=>{"use strict";e.d(R,{D:()=>n,Z:()=>a});const n="connections",a={Base:`/${n}`,DataSources:`/${n}/datasources`,DataSourcesNew:`/${n}/datasources/new`,DataSourcesEdit:`/${n}/datasources/edit/:uid`,DataSourcesDashboards:`/${n}/datasources/edit/:uid/dashboards`,AddNewConnection:`/${n}/add-new-connection`,DataSourcesDetails:`/${n}/datasources/:id`,ConnectDataOutdated:`/${n}/connect-data`,YourConnectionsOutdated:`/${n}/your-connections`}},65458:(J,R,e)=>{"use strict";e.d(R,{I0:()=>m,K:()=>u,Yu:()=>d});var n=e(65489),a=e(31312),l=e(26205),r=e(61205);const o=({sourceUID:i,targetUID:f,...c})=>{const E=(0,l.F)().getInstanceSettings(i),p=(0,l.F)().getInstanceSettings(f);if(E&&E?.uid!==void 0&&p&&p.uid!==void 0)return{...c,source:E,target:p}},g=i=>!!i,m=i=>({...i,correlations:i.correlations.map(o).filter(g)});function d(i){return i.data}const u=()=>{const{backend:i}=(0,r.p)(),[f,c]=(0,n.Z)(C=>(0,a.n)(i.fetch({url:"/api/datasources/correlations",params:{page:C.page},method:"GET",showErrorAlert:!1})).then(d).then(m),[i]),[E,p]=(0,n.Z)(({sourceUID:C,...D})=>i.post(`/api/datasources/uid/${C}/correlations`,D).then(M=>{const P=o(M.result);if(P!==void 0)return P;throw new Error("invalid sourceUID")}),[i]),[h,y]=(0,n.Z)(({sourceUID:C,uid:D})=>i.delete(`/api/datasources/uid/${C}/correlations/${D}`),[i]),[s,v]=(0,n.Z)(({sourceUID:C,uid:D,...M})=>i.patch(`/api/datasources/uid/${C}/correlations/${D}`,M).then(P=>{const x=o(P.result);if(x!==void 0)return x;throw new Error("invalid sourceUID")}),[i]);return{create:{execute:p,...E},update:{execute:v,...s},get:{execute:c,...f},remove:{execute:y,...h}}}},46349:(J,R,e)=>{"use strict";e.d(R,{NO:()=>u,nh:()=>g,r_:()=>d});var n=e(31312),a=e(69733),l=e(4148),r=e(66981),o=e(65458);const g=(i,f,c)=>(i.forEach(E=>{const p=E.refId;if(!p)return;let h=c[p];if(h===void 0&&E.meta?.preferredVisualisationType==="rawPrometheus"){const s=(0,r.a)(p);h=c[s]}const y=f.filter(s=>s.source.uid===h);m(E,y)}),i),m=(i,f)=>{i.fields.forEach(c=>{c.config.links=c.config.links?.filter(E=>E.origin!==a.n1.Correlations)||[],f.map(E=>{E.config?.field===c.name&&c.config.links.push({internal:{query:E.config?.target,datasourceUid:E.target.uid,datasourceName:E.target.name,transformations:E.config?.transformations},url:"",title:E.label||E.target.name,origin:a.n1.Correlations})})})},d=async i=>(0,n.n)((0,l.i)().fetch({url:"/api/datasources/correlations",method:"GET",showErrorAlert:!1,params:{sourceUID:i}})).then(o.Yu).then(o.I0),u=async(i,f)=>(0,l.i)().post(`/api/datasources/uid/${i}/correlations`,f)},27587:(J,R,e)=>{"use strict";e.d(R,{Bl:()=>C,FJ:()=>h,Mi:()=>c,RS:()=>s,Rh:()=>u,WJ:()=>p,Ym:()=>i,bS:()=>E,jI:()=>v,r5:()=>y,zZ:()=>f});var n=e(91986),a=e(31312),l=e(4148),r=e(97316),o=e(90634);function g(D){return typeof D=="object"&&D!=null&&"error"in D}const m=({baseUrl:D})=>async M=>{try{const{data:P,...x}=await(0,a.n)((0,l.i)().fetch({...M,url:D+M.url,showErrorAlert:M.showErrorAlert}));return{data:P,meta:x}}catch(P){return M.manageError?M.manageError(P):{error:P}}},d=D=>({error:(0,l.kW)(D)&&D.status!==404?D:null}),u=(0,n.LC)({reducerPath:"publicDashboardApi",baseQuery:m({baseUrl:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"],refetchOnMountOrArgChange:!0,endpoints:D=>({getPublicDashboard:D.query({query:M=>({url:`/dashboards/uid/${M}/public-dashboards`,manageError:d,showErrorAlert:!1}),async onQueryStarted(M,{dispatch:P,queryFulfilled:x}){try{await x}catch(S){g(S)&&(0,l.kW)(S.error)&&P((0,r.$l)((0,o.t_)(S.error.data.message)))}},providesTags:(M,P,x)=>[{type:"PublicDashboard",id:x}]}),createPublicDashboard:D.mutation({query:M=>({url:`/dashboards/uid/${M.dashboard.uid}/public-dashboards`,method:"POST",data:M.payload}),async onQueryStarted({dashboard:M,payload:P},{dispatch:x,queryFulfilled:S}){const{data:I}=await S;x((0,r.$l)((0,o.AT)("Dashboard is public!"))),M.updateMeta({publicDashboardUid:I.uid,publicDashboardEnabled:I.isEnabled})},invalidatesTags:(M,P,{dashboard:x})=>[{type:"PublicDashboard",id:x.uid}]}),updatePublicDashboard:D.mutation({query:M=>({url:`/dashboards/uid/${M.dashboard.uid}/public-dashboards/${M.payload.uid}`,method:"PATCH",data:M.payload}),async onQueryStarted({dashboard:M,payload:P},{dispatch:x,queryFulfilled:S}){const{data:I}=await S;x((0,r.$l)((0,o.AT)("Public dashboard updated!"))),M.updateMeta&&M.updateMeta({publicDashboardUid:I.uid,publicDashboardEnabled:I.isEnabled})},invalidatesTags:(M,P,{payload:x})=>[{type:"PublicDashboard",id:x.dashboardUid},"AuditTablePublicDashboard"]}),addRecipient:D.mutation({query:()=>({url:""})}),deleteRecipient:D.mutation({query:()=>({url:""})}),reshareAccessToRecipient:D.mutation({query:()=>({url:""})}),getActiveUsers:D.query({query:()=>({url:"/"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:D.query({query:()=>({url:""}),providesTags:(M,P,x)=>[{type:"ActiveUserDashboards",id:x}]}),listPublicDashboards:D.query({query:(M=1)=>({url:`/dashboards/public-dashboards?page=${M}&perpage=8`}),transformResponse:M=>({...M,totalPages:Math.ceil(M.totalCount/M.perPage)}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:D.mutation({query:M=>({url:`/dashboards/uid/${M.dashboardUid}/public-dashboards/${M.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:M,uid:P},{dispatch:x,queryFulfilled:S}){await S,x((0,r.$l)((0,o.AT)("Public dashboard deleted!"))),M?.updateMeta({publicDashboardUid:P,publicDashboardEnabled:!1})},invalidatesTags:(M,P,{dashboardUid:x})=>[{type:"PublicDashboard",id:x},"AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"]})})}),{useGetPublicDashboardQuery:i,useCreatePublicDashboardMutation:f,useUpdatePublicDashboardMutation:c,useDeletePublicDashboardMutation:E,useListPublicDashboardsQuery:p,useAddRecipientMutation:h,useDeleteRecipientMutation:y,useReshareAccessToRecipientMutation:s,useGetActiveUsersQuery:v,useGetActiveUserDashboardsQuery:C}=u},98140:(J,R,e)=>{"use strict";e.d(R,{E:()=>i});var n=e(86832),a=e(26205),l=e(50820),r=e(64840),o=e(33784),g=e(84796),m=e(92101),d=e(68734);function u(f){return f.libraryPanel&&typeof f.libraryPanel.name=="string"&&typeof f.libraryPanel.uid=="string"}class i{async makeExportable(c){c.cleanUpRepeats();const E=c.getSaveModelCloneOld();E.id=null,c.processRepeats();const p=[],h={},y={},s={},v=new Map;for(const P of E.getVariables())s[P.name]=P;const C=(P,x)=>{if(P.datasource===void 0){P.datasource=x;return}let S=P.datasource,I=null;const T=S?.uid;return T&&T.indexOf("$")===0&&(I=s[T.substring(1)],I&&I.current&&(S=I.current.value)),(0,a.F)().get(S).then(O=>{if(O.meta?.builtIn||(h["datasource"+O.meta?.id]={type:"datasource",id:O.meta.id,name:O.meta.name,version:O.meta.info.version||"1.0.0"},I))return;const A=P.libraryPanel,B=A?"-for-library-panel":"";let b="DS_"+O.name.replace(" ","_").toUpperCase()+B.toUpperCase();if(y[b]={name:b,label:O.name,description:"",type:"datasource",pluginId:O.meta?.id,pluginName:O.meta?.name,usage:y[b]?.usage},A){const W=y[b]?.usage?.libraryPanels||[];W.push({name:A.name,uid:A.uid}),y[b].usage={libraryPanels:W}}P.datasource={type:O.meta.id,uid:"${"+b+"}"}})},D=async P=>{if(P.type!=="row"){if(await C(P),P.targets)for(const S of P.targets)await C(S,P.datasource);const x=l.default.panels[P.type];x&&(h["panel"+x.id]={type:"panel",id:x.id,name:x.name,version:x.info.version})}},M=async P=>{if((0,o.V)(P)){const{name:x,uid:S}=P.libraryPanel;let I=P.libraryPanel.model;I||(I=(await(0,r.Mh)(S,!0)).model),await C(I);const{gridPos:T,id:O,...A}=I;v.has(S)||v.set(S,{name:x,uid:S,kind:g.V.Panel,model:A})}};try{for(const S of E.panels)if(await D(S),S.collapsed!==void 0&&S.collapsed===!0&&S.panels)for(const I of S.panels)await D(I);for(const S of E.getVariables())(0,m.Xh)(S)&&(await C(S),S.options=[],S.current={},S.refresh=S.refresh!==d.Bd.never?S.refresh:d.Bd.onDashboardLoad);for(const S of E.annotations.list)await C(S);h.grafana={type:"grafana",id:"grafana",name:"Grafana",version:l.default.buildInfo.version};for(const S of E.panels)if(await M(S),S.collapsed!==void 0&&S.collapsed===!0&&S.panels)for(const I of S.panels)await M(I);(0,n.each)(y,S=>{p.push(S)});for(const S of E.getVariables())if((0,m.VC)(S)){const I="VAR_"+S.name.replace(" ","_").toUpperCase();p.push({name:I,type:"constant",label:S.label||S.name,value:S.query,description:""}),S.query="${"+I+"}",S.current={value:S.query,text:S.query,selected:!1},S.options=[S.current]}const P=[...v.entries()].reduce((S,[I,T])=>(S[I]=T,S),{}),x=(0,n.defaults)({__inputs:p,__elements:P,__requires:(0,n.sortBy)(h,["id"])},E);for(let S=0;S<x.panels.length;S++){const I=x.panels[S];u(I)&&(x.panels[S]={gridPos:I.gridPos,id:I.id,libraryPanel:{uid:I.libraryPanel.uid,name:I.libraryPanel.name}})}return x}catch(P){return console.error("Export failed:",P),{error:P}}}}},86276:(J,R,e)=>{"use strict";e.d(R,{u:()=>o});var n=e(41407),a=e(39953),l=e(82803),r=e(68497);const o=({icon:m,iconType:d,iconSize:u,tooltip:i,onClick:f,children:c})=>{const E=(0,l.wW)(g);return a.createElement("div",{className:E.noBorderContainer},m&&a.createElement(r.h,{name:m,size:u,iconType:d,tooltip:i,tooltipPlacement:"bottom",onClick:f}),c)},g=m=>({noBorderContainer:(0,n.css)`
    padding: 0 ${m.spacing(.5)};
    display: flex;
  `})},33620:(J,R,e)=>{"use strict";e.d(R,{C:()=>f});var n=e(39953),a=e(77877),l=e(77014),r=e(82563),o=e(74480),g=e(21308),m=e(62679),d=e(97125),u=e(6278),i=e(73431);class f extends n.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=E=>{(0,u.$t)().setAutoRefresh(E),this.forceUpdate()},this.onRefresh=()=>((0,u.$t)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{g.h$.publish(new i.Qt({direction:i.Im.Left}))},this.onMoveForward=()=>{g.h$.publish(new i.Qt({direction:i.Im.Right}))},this.onChangeTimePicker=E=>{const{dashboard:p}=this.props,h=p.timepicker,y=h.nowDelay&&E.raw.to==="now",s=a.isMathString(E.raw.from)?E.raw.from:E.from,v=a.isMathString(E.raw.to)?E.raw.to:E.to,C={from:s,to:y?"now-"+h.nowDelay:v};(0,u.$t)().setTime(C)},this.onChangeTimeZone=E=>{this.props.dashboard.timezone=E,this.props.onChangeTimeZone(E),this.onRefresh()},this.onChangeFiscalYearStartMonth=E=>{this.props.dashboard.fiscalYearStartMonth=E,this.onRefresh()},this.onZoom=()=>{g.h$.publish(new i.p8({scale:2}))}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(l.md,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:E,isOnCanvas:p}=this.props,{refresh_intervals:h}=E.timepicker,y=(0,u.$t)().getValidIntervals(h||r.o5),s=(0,u.$t)().timeRange(),v=E.getTimezone(),C=E.fiscalYearStartMonth,D=E.panelInEdit?.isEditing;let M;return E.refresh===d.Wg&&(M=(0,u.$t)().getAutoRefreshInteval().interval),n.createElement(n.Fragment,null,n.createElement(o.a,{value:s,onChange:this.onChangeTimePicker,timeZone:v,fiscalYearStartMonth:C,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:p}),n.createElement(r.dP,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:E.refresh,intervals:y,isOnCanvas:p,tooltip:(0,m.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:D,showAutoInterval:!0,text:M}))}}},47499:(J,R,e)=>{"use strict";e.d(R,{t:()=>ue});var n=e(41407),a=e(39953),l=e(89772),r=e(53721),o=e(28425),g=e(28888),m=e(13601),d=e(55356),u=e(32840),i=e(51064),f=e(48824),c=e(3839),E=e(39106),p=e(7258),h=e(16924),y=e(82618),s=e(50820),v=e(90634),C=e(21308);function D(Ue,at){const[Ne,_e]=(0,a.useState)();return(0,a.useEffect)(()=>{const Ke=Ue.subscribe(at,_e);return()=>Ke.unsubscribe()},[Ue,at]),Ne}var M=e(62679),P=e(71707),x=e(82803),S=e(58047),I=e(4919),T=e(12190),O=e(72639),A=e(32688),B=e(13767),b=e(57428),W=e(57721),V=e(795);const K=({dashboard:Ue})=>{const at=(0,a.useMemo)(()=>(0,b.uZ)(),[]),Ne=(0,W.useDispatch)(),_e=(0,W.useSelector)(Ke=>Ke.dashboard.initialDatasource);return a.createElement(B.v,null,a.createElement(B.v.Item,{key:"add-visualisation",testId:g.wl.pages.AddDashboard.itemButton("Add new visualization menu item"),label:(0,M.t)("dashboard.add-menu.visualization","Visualization"),onClick:()=>{const Ke=(0,b.LU)(Ue,_e);(0,O.ff)("dashboards_toolbar_add_clicked",{item:"add_visualization"}),m.E1.partial({editPanel:Ke}),Ne((0,V.Rd)(void 0))}}),A.config.featureToggles.vizAndWidgetSplit&&a.createElement(B.v.Item,{key:"add-widget",testId:g.wl.pages.AddDashboard.itemButton("Add new widget menu item"),label:(0,M.t)("dashboard.add-menu.widget","Widget"),onClick:()=>{(0,O.ff)("dashboards_toolbar_add_clicked",{item:"add_widget"}),m.E1.partial({addWidget:!0})}}),a.createElement(B.v.Item,{key:"add-row",testId:g.wl.pages.AddDashboard.itemButton("Add new row menu item"),label:(0,M.t)("dashboard.add-menu.row","Row"),onClick:()=>{(0,O.ff)("dashboards_toolbar_add_clicked",{item:"add_row"}),(0,b.L_)(Ue)}}),a.createElement(B.v.Item,{key:"add-panel-lib",testId:g.wl.pages.AddDashboard.itemButton("Add new panel from panel library menu item"),label:(0,M.t)("dashboard.add-menu.import","Import from library"),onClick:()=>{(0,O.ff)("dashboards_toolbar_add_clicked",{item:"import_from_library"}),(0,b.RB)(Ue)}}),a.createElement(B.v.Item,{key:"add-panel-clipboard",testId:g.wl.pages.AddDashboard.itemButton("Add new panel from clipboard menu item"),label:(0,M.t)("dashboard.add-menu.paste-panel","Paste panel"),onClick:()=>{(0,O.ff)("dashboards_toolbar_add_clicked",{item:"paste_panel"}),(0,b.Dh)(Ue,at)},disabled:!at}))},G=({dashboard:Ue})=>{const at=Q((0,x.l4)()),[Ne,_e]=(0,a.useState)(!1);return a.createElement(S.L,{overlay:()=>a.createElement(K,{dashboard:Ue}),placement:"bottom",offset:[0,6],onVisibleChange:_e},a.createElement(I.zx,{icon:"panel-add",size:"lg",fill:"text",className:(0,n.cx)(at.button,at.buttonIcon,at.buttonText),"data-testid":g.wl.components.PageToolbar.itemButton("Add button")},a.createElement(M.cC,{i18nKey:"dashboard.toolbar.add"},"Add"),a.createElement(T.J,{name:Ne?"angle-up":"angle-down",size:"lg"})))};function Q(Ue){return{button:(0,n.css)({label:"add-panel-button",padding:Ue.spacing(.5,.5,.5,.75),height:Ue.spacing((Ue.components.height.sm+Ue.components.height.md)/2),borderRadius:Ue.shape.radius.default}),buttonIcon:(0,n.css)({svg:{margin:0}}),buttonText:(0,n.css)({label:"add-panel-button-text",fontSize:Ue.typography.body.fontSize,span:{marginLeft:Ue.spacing(.67)}})}}var j=e(99874),F=e(97433),k=e(8213),_=e(16920),Y=e(73431),Z=e(86276),ae=e(33620),ce=e(67650),q=e(98928);const De=({dashboard:Ue})=>{const[at]=(0,ce.K)(),{showModal:Ne,hideModal:_e}=(0,a.useContext)(E.kr);return(0,a.useEffect)(()=>(at.shareView&&Ne(q.ShareModal,{dashboard:Ue,onDismiss:_e,activeTab:String(at.shareView)}),()=>{_e()}),[Ne,_e,Ue,at.shareView]),a.createElement(Z.u,{tooltip:(0,M.t)("dashboard.toolbar.share","Share dashboard"),icon:"share-alt",iconSize:"lg",onClick:()=>{Ne(q.ShareModal,{dashboard:Ue,onDismiss:_e})}})},oe={setStarred:P.OQ,updateTimeZoneForSession:_.YT},te=(0,l.connect)(null,oe),fe=g.wl.pages.Dashboard.DashNav,Te=[],ge=[];function he(Ue){Te.push(Ue)}function me(Ue){ge.push(Ue)}const ye=a.memo(Ue=>{(0,r.TH)();const at=(0,d.N)();D(Ue.dashboard.events,Y.hS);const Ne=Ue.dashboard.snapshot?.originalUrl??"",_e=()=>{window.location.href=o.QX.sanitizeUrl(Ue.dashboard.snapshot.originalUrl)},Ke=(0,v.iG)(),et=()=>{try{const Be=new URL(o.QX.sanitizeUrl(Ne),s.default.appUrl),Le=new URL(s.default.appUrl);Be.host!==Le.host?C.h$.publish(new Y.Dn({component:u.s,props:{title:"Proceed to external site?",modalClass:Oe,body:a.createElement(a.Fragment,null,a.createElement("p",null,"This link connects to an external website at"," ",a.createElement("code",null,Ne)),a.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:_e}})):_e()}catch(Be){Ke.error("Invalid URL",Be instanceof Error?Be.message:void 0)}},ze=()=>{const Be=(0,F.h4)(),{dashboard:Le,setStarred:le}=Ue;Be.starDashboard(Le.uid,!!Le.meta.isStarred).then(de=>{le({id:Le.uid,title:Le.title,url:Le.meta.url??"",isStarred:de}),Le.meta.isStarred=de,at()})},je=()=>{m.E1.partial({editview:"settings"})},Qe=()=>{k.r0.prev()},We=()=>{k.r0.next()},ke=()=>{k.r0.stop(),at()},ot=(Be,Le)=>{Be.map((le,de)=>{const X=le.component,se=a.createElement(X,{...Ue,key:`button-custom-${de}`});typeof le.index=="number"?Le.splice(le.index,0,se):Le.push(se)})},lt=()=>k.r0.isPlaying,Ct=()=>{const{dashboard:Be,kioskMode:Le}=Ue,{canStar:le,canShare:de,isStarred:X}=Be.meta,se=[];if(Le||lt())return[];if(le){let re=X?(0,M.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,M.t)("dashboard.toolbar.mark-favorite","Mark as favorite");se.push(a.createElement(Z.u,{tooltip:re,icon:X?"favorite":"star",iconType:X?"mono":"default",iconSize:"lg",onClick:ze,key:"button-star"}))}return de&&se.push(a.createElement(De,{key:"button-share",dashboard:Be})),Be.meta.publicDashboardEnabled&&se.push(a.createElement(i.V,{key:"public-dashboard",name:"Public",colorIndex:5,"data-testid":fe.publicDashboardTag})),s.default.featureToggles.scenes&&se.push(a.createElement(Z.u,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>{const re=m.E1.getLocation();m.E1.push(`/scenes/dashboard/${Be.uid}${re.search}`)}})),ot(Te,se),se},wt=()=>a.createElement(f.h,{key:"playlist-buttons"},a.createElement(c.h,{tooltip:(0,M.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:Qe,narrow:!0}),a.createElement(c.h,{onClick:ke},a.createElement(M.cC,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),a.createElement(c.h,{tooltip:(0,M.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:We,narrow:!0})),Lt=()=>{const{dashboard:Be,updateTimeZoneForSession:Le,hideTimePicker:le}=Ue;return le?null:a.createElement(ae.C,{dashboard:Be,onChangeTimeZone:Le,key:"time-controls"})},Ye=()=>{const{dashboard:Be,onAddPanel:Le,isFullscreen:le,kioskMode:de}=Ue,{canSave:X,canEdit:se,showSettings:re}=Be.meta,{snapshot:pe}=Be,be=pe&&pe.originalUrl,xe=[];return lt()?[wt(),Lt()]:de===W.KioskMode.TV?[Lt()]:(se&&!le&&(s.default.featureToggles.emptyDashboardPage?xe.push(a.createElement(G,{dashboard:Be,key:"panel-add-dropdown"})):xe.push(a.createElement(c.h,{tooltip:(0,M.t)("dashboard.toolbar.add-panel","Add panel"),icon:"panel-add",iconSize:"xl",onClick:Le,key:"button-panel-add"}))),X&&!le&&xe.push(a.createElement(E.JY,{key:"button-save"},({showModal:Pe,hideModal:we})=>a.createElement(c.h,{tooltip:(0,M.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{Pe(j.d,{dashboard:Be,onDismiss:we})}}))),be&&xe.push(a.createElement(c.h,{tooltip:(0,M.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:et,icon:"link",key:"button-snapshot"})),re&&xe.push(a.createElement(c.h,{tooltip:(0,M.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:je,key:"button-settings"})),ot(ge,xe),xe.push(Lt()),xe)};return a.createElement(h.A,{actions:a.createElement(a.Fragment,null,Ct(),a.createElement(y.M,{leftActionsSeparator:!0}),a.createElement(p.R,{alignment:"right"},Ye()))})});ye.displayName="DashNav";const ue=te(ye),Oe=(0,n.css)({width:"max-content",maxWidth:"80vw"})},30265:(J,R,e)=>{"use strict";e.d(R,{P:()=>s});var n=e(86832),a=e(39953),l=e(81626),r=e(28888),o=e(4516),g=e(96227),m=e(87783),d=e(76843),u=e(38637),i=e(26286),f=e(62679),c=e(82563),E=e(6278);const p=({refreshIntervals:v,onRefreshIntervalChange:C,getIntervalsFunc:D=y,validateIntervalsFunc:M=h})=>{const[P,x]=(0,a.useState)(D(v??c.o5)),[S,I]=(0,a.useState)(null);(0,a.useEffect)(()=>{const B=D(v??c.o5);x(B)},[D,v]);const T=(0,a.useMemo)(()=>Array.isArray(P)?P.join(","):"",[P]),O=(0,a.useCallback)(B=>{const b=B.currentTarget.value?B.currentTarget.value.split(","):[];x(b)},[x]),A=(0,a.useCallback)(B=>{const b=M(P);b===null&&C(D(P)),I(b)},[D,P,C,M]);return a.createElement(g.g,{label:(0,f.t)("dashboard-settings.general.auto-refresh-label","Auto refresh"),description:(0,f.t)("dashboard-settings.general.auto-refresh-description","Define the auto refresh intervals that should be available in the auto refresh list."),error:S,invalid:!!S},a.createElement(u.I,{id:"auto-refresh-input",invalid:!!S,value:T,onChange:O,onBlur:A}))},h=(v,C={getTimeSrv:E.$t})=>{try{return y(v,C),null}catch(D){return D instanceof Error?D.message:"Invalid intervals"}},y=(v,C={getTimeSrv:E.$t})=>{const D=v.filter(M=>M.trim()!=="").map(M=>M.replace(/\s+/g,""));return[...new Set(C.getTimeSrv().getValidIntervals(D))]};class s extends a.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=C=>{const D=C.currentTarget.value;if((0,n.isEmpty)(D))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(D);if(l.isValidTimeSpan(D))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(D);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=C=>{typeof C=="string"&&this.props.onTimeZoneChange(C)},this.onWeekStartChange=C=>{this.props.onWeekStartChange(C)}}render(){return a.createElement(o.s,{label:(0,f.t)("dashboard-settings.time-picker.time-options-label","Time options"),isOpen:!0},a.createElement(g.g,{label:(0,f.t)("dashboard-settings.time-picker.time-zone-label","Time zone"),"data-testid":r.wl.components.TimeZonePicker.containerV2},a.createElement(m.O,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),a.createElement(g.g,{label:(0,f.t)("dashboard-settings.time-picker.week-start-label","Week start"),"data-testid":r.wl.components.WeekStartPicker.containerV2},a.createElement(d.z,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),a.createElement(p,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),a.createElement(g.g,{label:(0,f.t)("dashboard-settings.time-picker.now-delay-label","Now delay"),description:(0,f.t)("dashboard-settings.time-picker.now-delay-description","Exclude recent data that may be incomplete.")},a.createElement(u.I,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),a.createElement(g.g,{label:(0,f.t)("dashboard-settings.time-picker.hide-time-picker","Hide time picker")},a.createElement(i.r,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),a.createElement(g.g,{label:(0,f.t)("dashboard-settings.time-picker.refresh-live-dashboards-label","Refresh live dashboards"),description:(0,f.t)("dashboard-settings.time-picker.refresh-live-dashboards-description","Continuously re-draw panels where the time range references 'now'")},a.createElement(i.r,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},6869:(J,R,e)=>{"use strict";e.d(R,{D:()=>eo});var n=e(39953),a=e(53721),l=e(57837),r=e(28888),o=e(13601),g=e(4919),m=e(7258),d=e(16924),u=e(13253),i=e(50820),f=e(62679),c=e(97125),E=e(57721),p=e(73431),h=e(89772),y=e(44722),s=e(32688),v=e(41407),C=e(20653),D=e(72639),M=e(82803),P=e(4516),x=e(12223),S=e(28409),I=e(69865),T=e(12190),O=e(68497),A=e(73075);const B=({nodes:vt,edges:Et,direction:Qt,width:Yt,height:rn,onDoubleClick:fn})=>{const xn=(0,n.useRef)(null),wn=(0,n.useRef)(null),yn=(0,n.useCallback)(Ea=>{fn&&fn(Ea.nodes[0])},[fn]);return(0,n.useEffect)(()=>((async()=>{const sa=await e.e(8271).then(e.t.bind(e,4822,23)),Un={nodes:b(sa,vt),edges:W(sa,Et)},ya={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:Qt??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};xn.current=new sa.Network(wn.current,Un,ya),xn.current?.on("doubleClick",yn)})(),()=>{xn.current&&xn.current.off("doubleClick")}),[Qt,Et,vt,yn]),n.createElement("div",null,n.createElement("div",{ref:wn,style:{width:Yt??"100%",height:rn??"60vh"}}))};function b(vt,Et){const Qt=Et.map(Yt=>({...Yt,shape:"box"}));return new vt.DataSet(Qt)}function W(vt,Et){const Qt=Et.map(Yt=>({...Yt,arrows:"to",dashes:!0}));return new vt.DataSet(Qt)}function V({edges:vt,nodes:Et,show:Qt,title:Yt,children:rn}){const[fn,xn]=(0,n.useState)(Qt),wn=(0,n.useCallback)(()=>xn(!0),[xn]),yn=(0,n.useCallback)(()=>xn(!1),[xn]);return n.createElement(n.Fragment,null,n.createElement(A.u,{isOpen:fn,title:Yt,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:yn,onDismiss:yn},n.createElement(B,{nodes:Et,edges:vt})),rn({showModal:wn}))}const w=({id:vt,usages:Et})=>{const Qt=(0,n.useMemo)(()=>Et.find(rn=>rn.variable.id===vt),[vt,Et]);if(!Qt)return null;const Yt=Qt.nodes.map(rn=>rn.label.includes(`$${vt}`)?{...rn,color:"#FB7E81"}:rn);return n.createElement(V,{show:!1,title:`Showing usages for: $${vt}`,nodes:Yt,edges:Qt.edges},({showModal:rn})=>n.createElement(O.h,{onClick:()=>rn(),name:"code-branch",tooltip:"Show usages","data-testid":"VariablesUnknownButton"}))};var K=e(3415);const z=1e3;function G({variables:vt,dashboard:Et}){const[Qt,Yt]=(0,n.useState)(!1),[rn,fn]=(0,n.useState)(0),[xn,wn]=(0,n.useState)([]),yn=(0,M.wW)(k);(0,n.useEffect)(()=>fn(Un=>Un+1),[vt,Et]);const{loading:Ea}=(0,C.Z)(async()=>{if(Qt&&rn>0){const Un=Date.now(),ya=await(0,K.Yg)(vt,Et),ps=Date.now()-Un;return ps>=z&&(0,D.ff)("Slow unknown variables expansion",{elapsed:ps}),fn(0),wn(ya),ya}return[]},[vt,Et,Qt,rn]),sa=Un=>{Un&&(0,D.ff)("Unknown variables section expanded"),Yt(Un)};return n.createElement("div",{className:yn.container},n.createElement(P.s,{label:n.createElement(Q,null),isOpen:Qt,onToggle:sa},Ea&&n.createElement(x.wc,{justify:"center"},n.createElement(x.Lh,{justify:"center"},n.createElement("span",null,"Loading..."),n.createElement(S.$,{size:16}))),!Ea&&xn&&n.createElement(n.Fragment,null,xn.length===0&&n.createElement(j,null),xn.length>0&&n.createElement(F,{usages:xn}))))}function Q(){const vt=(0,M.wW)(k);return n.createElement("h5",null,"Renamed or missing variables",n.createElement(I.u,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},n.createElement(T.J,{name:"info-circle",className:vt.infoIcon})))}function j(){return n.createElement("span",null,"No renamed or missing variables found.")}function F({usages:vt}){const Et=(0,M.wW)(k);return n.createElement("table",{className:"filter-table filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Variable"),n.createElement("th",{colSpan:5}))),n.createElement("tbody",null,vt.map(Qt=>{const{variable:Yt}=Qt,{id:rn,name:fn}=Yt;return n.createElement("tr",{key:rn},n.createElement("td",{className:Et.firstColumn},n.createElement("span",null,fn)),n.createElement("td",{className:Et.defaultColumn}),n.createElement("td",{className:Et.defaultColumn}),n.createElement("td",{className:Et.defaultColumn}),n.createElement("td",{className:Et.lastColumn},n.createElement(w,{id:Yt.id,usages:vt})))})))}const k=vt=>({container:(0,v.css)`
    margin-top: ${vt.spacing(4)};
    padding-top: ${vt.spacing(4)};
  `,infoIcon:(0,v.css)`
    margin-left: ${vt.spacing(1)};
  `,defaultColumn:(0,v.css)`
    width: 1%;
  `,firstColumn:(0,v.css)`
    width: 1%;
    vertical-align: top;
    color: ${vt.colors.text.maxContrast};
  `,lastColumn:(0,v.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var _=e(17174),Y=e(45882),Z=e(52471),ae=e(49955),ce=e(32840);function q({varName:vt,isOpen:Et=!1,onConfirm:Qt,onDismiss:Yt}){return n.createElement(ce.s,{title:"Delete variable",isOpen:Et,onConfirm:Qt,onDismiss:Yt,body:`
      Are you sure you want to delete variable "${vt}"?
    `,modalClass:De.modal,confirmText:"Delete"})}const De={modal:(0,v.css)({width:"max-content",maxWidth:"80vw"})};var oe=e(10694),te=e(16261),fe=e(92101),Te=e(87863),ge=e(12699),he=e(96227),me=e(20454);const ye=[{label:"Label and value",value:ge.bU.dontHide},{label:"Value",value:ge.bU.hideLabel},{label:"Nothing",value:ge.bU.hideVariable}];function ue({onChange:vt,hide:Et,type:Qt}){const Yt=(0,n.useMemo)(()=>ye.find(rn=>rn.value===Et)?.value??ye[0].value,[Et]);return Qt==="constant"?null:n.createElement(he.g,{label:"Show on dashboard"},n.createElement(me.S,{options:ye,onChange:vt,value:Yt}))}var Oe=e(4778),Ue=e(54014),at=e(72396),Ne=e(96134);function _e({onChange:vt,type:Et}){const Qt=(0,n.useMemo)(()=>(0,ae.bi)(),[]),Yt=(0,n.useMemo)(()=>Qt.find(rn=>rn.value===Et)??Qt[0],[Qt,Et]);return n.createElement(Ne.u,{name:"Select variable type",value:Yt,options:Qt,onChange:vt,testId:r.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var Ke=e(74661),et=e(99491);const ze=({variable:{options:vt}})=>{const[Et,Qt]=(0,n.useState)(20),[Yt,rn]=(0,n.useState)([]),fn=(0,n.useCallback)(wn=>{wn.preventDefault(),Qt(Et+20)},[Et,Qt]),xn=(0,M.wW)(je);return(0,n.useEffect)(()=>rn(vt.slice(0,Et)),[Et,vt]),Yt.length?n.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},n.createElement("h5",null,"Preview of values"),n.createElement(Ke.Z,null,Yt.map((wn,yn)=>n.createElement(Ke.Z,{key:`${wn.value}-${yn}`,className:xn.optionContainer},n.createElement(et.W,{"aria-label":r.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},n.createElement("div",{className:xn.label},wn.text))))),vt.length>Et&&n.createElement(Ke.Z,{className:xn.optionContainer},n.createElement(g.zx,{onClick:fn,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};ze.displayName="VariableValuesPreview";function je(vt){return{wrapper:(0,v.css)({display:"flex",flexDirection:"column",marginTop:vt.spacing(2)}),optionContainer:(0,v.css)({marginLeft:vt.spacing(.5),marginBottom:vt.spacing(.5)}),label:(0,v.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}var Qe=e(86832),We=e(24568),ke=e(331);const ot=vt=>async Et=>{const{rootStateKey:Qt}=vt;Et((0,_.mb)(Qt,(0,ke.wJ)({name:(0,Y.E0)(vt).name,id:vt.id})))},lt=vt=>async(Et,Qt)=>{const{rootStateKey:Yt}=vt;Et((0,_.mb)(Yt,(0,ke.qe)((0,ae.Y6)(vt))))},Ct=(vt,Et)=>(Qt,Yt)=>{const{id:rn,rootStateKey:fn}=vt;let xn=null;if(Et.match(/^(?!__).*$/)||(xn="Template names cannot begin with '__', that's reserved for Grafana's global variables"),Et.match(/^\w+$/)||(xn="Only word characters are allowed in variable names"),(0,Y.gt)(fn,Yt()).filter(Ea=>Ea.name===Et&&Ea.id!==rn).length&&(xn="Variable with the same name already exists"),xn){Qt((0,_.mb)(fn,(0,ke.y8)({newName:Et,errorText:xn})));return}Qt(wt(vt,Et))},wt=(vt,Et)=>(Qt,Yt)=>{const{rootStateKey:rn}=vt,fn=(0,Y.E0)(vt,Yt());if(fn.name===Et){Qt((0,_.mb)(rn,(0,ke.Yo)((0,ae.Y6)(vt,{newName:Et}))));return}const xn={...(0,Qe.cloneDeep)(fn),name:Et,id:Et},wn=fn.global,yn=fn.index,Ea=(0,ae.yQ)(xn);Qt((0,_.mb)(rn,(0,Z.VN)((0,ae.Y6)(Ea,{global:wn,index:yn,model:xn})))),Qt((0,_.mb)(rn,(0,ke.Yo)((0,ae.Y6)(Ea,{newName:Et})))),Qt((0,_.mb)(rn,(0,Z.mZ)((0,ae.Y6)(vt,{reIndex:!1}))))},Lt=(vt,Et="query")=>(Qt,Yt)=>{const rn=(0,ae.mn)(vt),fn=(0,Y.gt)(rn,Yt()),xn=Be(Et,fn),wn={type:Et,id:xn},yn=!1,Ea=(0,Y.Eo)(rn,Yt()),sa=(0,Qe.cloneDeep)(te.z.get(Et).initialState);sa.id=xn,sa.name=xn,sa.rootStateKey=rn,Qt((0,_.mb)(rn,(0,Z.VN)((0,ae.Y6)(wn,{global:yn,model:sa,index:Ea})))),o.E1.partial({editIndex:fn.length})},Ye=vt=>(Et,Qt)=>{const Yt=(0,ae.mn)(vt),rn=Qt(),fn=(0,Y.xD)(Yt,rn),xn=rn.dashboard.getModel(),{usages:wn}=(0,K.V)(fn,xn),yn=(0,K.vI)(wn);Et((0,_.mb)(Yt,(0,We.j4)({usages:wn,usagesNetwork:yn})))};function Be(vt,Et){let Qt=0,Yt=`${vt}${Qt}`;for(;Et.find(rn=>rn.id===Yt);)Yt=`${vt}${++Qt}`;return Yt}var Le=(vt=>(vt[vt.MaxSize=50]="MaxSize",vt))(Le||{});const le=(vt,Et)=>({editor:(0,Y.AE)(Et.identifier.rootStateKey,vt).editor,variable:(0,Y.E0)(Et.identifier,vt)}),de=vt=>({...(0,y.bindActionCreators)({variableEditorMount:ot,variableEditorUnMount:lt,changeVariableName:Ct,updateOptions:Te.Rk},vt),changeVariableProp:(Et,Qt,Yt)=>vt((0,_.mb)(Et.rootStateKey,(0,Z.Pl)((0,ae.Y6)(Et,{propName:Qt,propValue:Yt})))),changeVariableType:(Et,Qt)=>vt((0,_.mb)(Et.rootStateKey,(0,Z.Be)((0,ae.Y6)(Et,{newType:Qt})))),removeVariable:Et=>{vt((0,_.mb)(Et.rootStateKey,(0,Z.mZ)((0,ae.Y6)(Et,{reIndex:!0}))))}}),X=(0,h.connect)(le,de);class se extends n.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=Et=>{Et.preventDefault(),this.props.changeVariableName(this.props.identifier,Et.currentTarget.value)},this.onTypeChange=Et=>{Et.value&&this.props.changeVariableType(this.props.identifier,Et.value)},this.onLabelChange=Et=>{Et.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",Et.currentTarget.value)},this.onDescriptionChange=Et=>{this.props.changeVariableProp(this.props.identifier,"description",Et.currentTarget.value)},this.onHideChange=Et=>{this.props.changeVariableProp(this.props.identifier,"hide",Et)},this.onPropChanged=({propName:Et,propValue:Qt,updateOptions:Yt=!1})=>{this.props.changeVariableProp(this.props.identifier,Et,Qt),Yt&&this.props.updateOptions((0,ae.yQ)(this.props.variable))},this.onHandleSubmit=async Et=>{Et.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,ae.yQ)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),o.E1.partial({editIndex:null})},this.onApply=()=>{o.E1.partial({editIndex:null})}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:Et}=this.props,Qt=te.z.get(this.props.variable.type).editor;if(!Qt)return null;const Yt=Et.state===oe.Gu.Loading;return n.createElement(n.Fragment,null,n.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},n.createElement(_e,{onChange:this.onTypeChange,type:this.props.variable.type}),n.createElement(Oe.e,null,"General"),n.createElement(at.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:r.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:Le.MaxSize,required:!0}),n.createElement(at.V,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:r.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),n.createElement(Ue.W,{name:"Description",value:Et.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),n.createElement(ue,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),Qt&&n.createElement(Qt,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,fe.eL)(this.props.variable)?n.createElement(ze,{variable:this.props.variable}):null,n.createElement("div",{style:{marginTop:"16px"}},n.createElement(x.Lh,{spacing:"md",height:"inherit"},n.createElement(g.zx,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),n.createElement(g.zx,{type:"submit","aria-label":r.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:Yt,variant:"secondary"},"Run query",Yt&&n.createElement(T.J,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),n.createElement(g.zx,{variant:"primary",onClick:this.onApply,"data-testid":r.wl.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),n.createElement(q,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const re=X(se);var pe=e(24058),be=e(27366),xe=e(11906),Pe=e(74600);const we=({variables:vt})=>{const Et=(0,n.useMemo)(()=>(0,K.GQ)(vt),[vt]),Qt=(0,n.useMemo)(()=>(0,K.MJ)(vt),[vt]);return Qt.length?n.createElement(V,{show:!1,title:"Dependencies",nodes:(0,K.Of)(Et,Qt),edges:Qt},({showModal:Yt})=>n.createElement(g.zx,{onClick:()=>{(0,D.ff)("Show variable dependencies"),Yt()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},Fe=vt=>n.createElement(h.Provider,{store:Pe.h},n.createElement(we,{...vt})),He=({id:vt,usages:Et,isAdhoc:Qt})=>{const Yt=(0,n.useMemo)(()=>Et.find(fn=>fn.variable.id===vt),[Et,vt]);if(Et.length===0||Qt||!Yt)return null;const rn=Yt.nodes.map(fn=>fn.label.includes(`$${vt}`)?{...fn,color:"#FB7E81"}:fn);return n.createElement(V,{show:!1,title:`Showing usages for: $${vt}`,nodes:rn,edges:Yt.edges},({showModal:fn})=>n.createElement(O.h,{onClick:()=>{(0,D.ff)("Show variable usages"),fn()},name:"code-branch",tooltip:"Show usages"}))};function Xe({index:vt,variable:Et,usageTree:Qt,usagesNetwork:Yt,onEdit:rn,onDuplicate:fn,onDelete:xn}){const wn=(0,M.l4)(),yn=(0,M.wW)(At),Ea=dt(Et),Un=(0,K.Rv)(Et.id,Qt)>0||(0,fe.Kn)(Et),ya=(0,ae.yQ)(Et);return n.createElement(pe._l,{draggableId:JSON.stringify(ya),index:vt},(os,ps)=>n.createElement("tr",{ref:os.innerRef,...os.draggableProps,style:{userSelect:ps.isDragging?"none":"auto",background:ps.isDragging?wn.colors.background.secondary:void 0,...os.draggableProps.style}},n.createElement("td",{role:"gridcell",className:yn.column},n.createElement(g.zx,{size:"xs",fill:"text",onClick:Is=>{Is.preventDefault(),rn(ya)},className:yn.nameLink,"aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(Et.name)},Et.name)),n.createElement("td",{role:"gridcell",className:yn.definitionColumn,onClick:Is=>{Is.preventDefault(),rn(ya)},"aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(Et.name)},Ea),n.createElement("td",{role:"gridcell",className:yn.column},n.createElement("div",{className:yn.icons},n.createElement(ct,{passed:Un}),n.createElement(He,{id:Et.id,isAdhoc:(0,fe.Kn)(Et),usages:Yt}),n.createElement(O.h,{onClick:Is=>{Is.preventDefault(),(0,D.ff)("Duplicate variable"),fn(ya)},name:"copy",tooltip:"Duplicate variable","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(Et.name)}),n.createElement(O.h,{onClick:Is=>{Is.preventDefault(),(0,D.ff)("Delete variable"),xn(ya)},name:"trash-alt",tooltip:"Remove variable","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(Et.name)}),n.createElement("div",{...os.dragHandleProps,className:yn.dragHandle},n.createElement(T.J,{name:"draggabledots",size:"lg"}))))))}function dt(vt){let Et="";return(0,fe.Xh)(vt)?vt.definition?Et=vt.definition:typeof vt.query=="string"&&(Et=vt.query):(0,fe.eL)(vt)&&(Et=vt.query),Et}function ct({passed:vt}){const Et=(0,M.wW)(At);return vt?n.createElement(T.J,{name:"check",className:Et.iconPassed,title:"This variable is referenced by other variables or dashboard."}):n.createElement(T.J,{name:"exclamation-triangle",className:Et.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function At(vt){return{dragHandle:(0,v.css)`
      cursor: grab;
      margin-left: ${vt.spacing(1)};
    `,column:(0,v.css)`
      width: 1%;
    `,nameLink:(0,v.css)`
      cursor: pointer;
      color: ${vt.colors.primary.text};
    `,definitionColumn:(0,v.css)`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:(0,v.css)`
      color: ${vt.v1.palette.greenBase};
      margin-right: ${vt.spacing(2)};
    `,iconFailed:(0,v.css)`
      color: ${vt.v1.palette.orange};
      margin-right: ${vt.spacing(2)};
    `,icons:(0,v.css)`
      display: flex;
      gap: ${vt.spacing(2)};
      align-items: center;
    `}}function Ie({variables:vt,usages:Et,usagesNetwork:Qt,onChangeOrder:Yt,onAdd:rn,onEdit:fn,onDelete:xn,onDuplicate:wn}){const yn=(0,M.wW)(ut),Ea=sa=>{if(!sa.destination||!sa.source)return;(0,D.ff)("Variable drag and drop");const Un=JSON.parse(sa.draggableId);Yt(Un,vt[sa.source.index].index,vt[sa.destination.index].index)};return n.createElement("div",null,n.createElement("div",null,vt.length===0&&n.createElement(Ze,{onAdd:rn}),vt.length>0&&n.createElement(be.K,{direction:"column",gap:4},n.createElement("div",{className:yn.tableContainer},n.createElement("table",{className:"filter-table filter-table--hover","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Variable"),n.createElement("th",null,"Definition"),n.createElement("th",{colSpan:5}))),n.createElement(pe.Z5,{onDragEnd:Ea},n.createElement(pe.bK,{droppableId:"variables-list",direction:"vertical"},sa=>n.createElement("tbody",{ref:sa.innerRef,...sa.droppableProps},vt.map((Un,ya)=>n.createElement(Xe,{index:ya,key:`${Un.name}-${ya}`,variable:Un,usageTree:Et,usagesNetwork:Qt,onDelete:xn,onDuplicate:wn,onEdit:fn})),sa.placeholder))))),n.createElement(be.K,null,n.createElement(Fe,{variables:vt}),n.createElement(g.zx,{"aria-label":r.wl.pages.Dashboard.Settings.Variables.List.newButton,onClick:rn,icon:"plus"},"New variable")))))}function Ze({onAdd:vt}){return n.createElement("div",null,n.createElement(xe.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:Et=>{Et.preventDefault(),vt()}}))}const ut=()=>({tableContainer:(0,v.css)`
    overflow: scroll;
    width: 100%;
  `}),rt=(vt,Et)=>{const{uid:Qt}=Et.dashboard,Yt=(0,Y.AE)(Qt,vt);return{variables:(0,Y.xD)(Qt,vt),idInEditor:Yt.editor.id,usagesNetwork:Yt.inspect.usagesNetwork,usages:Yt.inspect.usages}},St=vt=>({...(0,y.bindActionCreators)({createNewVariable:Lt,initListMode:Ye},vt),changeVariableOrder:(Et,Qt,Yt)=>vt((0,_.mb)(Et.rootStateKey,(0,Z.gE)((0,ae.Y6)(Et,{fromIndex:Qt,toIndex:Yt})))),duplicateVariable:Et=>vt((0,_.mb)(Et.rootStateKey,(0,Z.Y9)((0,ae.Y6)(Et,{newId:void 0})))),removeVariable:Et=>{vt((0,_.mb)(Et.rootStateKey,(0,Z.mZ)((0,ae.Y6)(Et,{reIndex:!0}))))}}),st=(0,h.connect)(rt,St);class tt extends n.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=Et=>{const Qt=this.props.variables.findIndex(Yt=>Yt.id===Et.id);o.E1.partial({editIndex:Qt})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(Et,Qt,Yt)=>{this.props.changeVariableOrder(Et,Qt,Yt)},this.onDuplicateVariable=Et=>{this.props.duplicateVariable(Et)},this.onModalOpen=Et=>{this.setState({variableId:Et})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:Et,variables:Qt,sectionNav:Yt}=this.props,rn=Et!=null?Qt[Et]:void 0,fn=Yt.node,xn=s.config.featureToggles.dockedMegaMenu&&fn.parentItem?{...fn.parentItem,url:fn.url}:void 0,wn=rn?{text:rn.name,parentItem:xn}:xn;return n.createElement(u.T,{navModel:this.props.sectionNav,pageNav:wn},!rn&&n.createElement(Ie,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!rn&&this.props.variables.length>0&&n.createElement(G,{variables:this.props.variables,dashboard:this.props.dashboard}),rn&&n.createElement(re,{identifier:(0,ae.yQ)(rn)}),n.createElement(q,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const ft=st(tt);var $t=e(88206),Ht=e(21308);const Zt=({dashboard:vt,sectionNav:Et})=>{const Qt=Ht.Vt.hasPermission(E.AccessControlAction.DashboardsPermissionsWrite),Yt=s.config.featureToggles.dockedMegaMenu?Et.node.parentItem:void 0;return n.createElement(u.T,{navModel:Et,pageNav:Yt},n.createElement($t.P,{resource:"dashboards",resourceId:vt.uid,canSetPermissions:Qt}))};var tn=e(75406),on=e(47635),qt=e(26205),pn=e(2827),Cn=e(38637),Rt=e(13026),mt=e(9558),xt=e(83851),Ft=e(31312),zt=e(34265),Jt=e(97433),ln=e(6278),Pt=e(75397),Gt=e(3101),Kt=e(47967),kt=e(69330),dn=e(19353),nn=e(83502);class mn extends n.PureComponent{constructor(Et){super(Et),this.updateFields=()=>{const Qt=this.props.response?.panelData,Yt=Qt?.series?.[0]??Qt?.annotations?.[0];if(Yt&&Yt.fields){const rn=Yt.fields.map(fn=>{const xn=(0,kt.CZ)(fn,Yt);let wn="";for(let yn=0;yn<Yt.length;yn++){if(yn>0&&(wn+=", "),yn>2){wn+="...";break}wn+=fn.values[yn]}return wn.length>50&&(wn=wn.substring(0,50)+"..."),{label:`${xn} (${fn.type})`,value:xn,description:wn}});this.setState({fieldNames:rn})}},this.onFieldSourceChange=(Qt,Yt)=>{const rn=this.props.mappings||{},fn=rn[Qt]||{};this.props.change({...rn,[Qt]:{...fn,source:Yt.value||dn.L.Field}})},this.onFieldNameChange=(Qt,Yt)=>{const rn=this.props.mappings||{};if(!Yt){const xn={...this.props.mappings};delete xn[Qt],this.props.change(xn);return}const fn=rn[Qt]||{};this.props.change({...rn,[Qt]:{...fn,value:Yt.value,source:dn.L.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(Et){Et.response!==this.props.response&&this.updateFields()}renderRow(Et,Qt,Yt){const{fieldNames:rn}=this.state;let fn=[...rn];const xn=Qt.value;let wn=rn.find(Ea=>xn===Ea.value);xn&&!wn&&fn.push({label:xn,value:xn});let yn=Yt?Yt[Et.key]:"";if(yn&&Et.key.startsWith("time")){const Ea=(0,nn.Cf)("dateTimeAsIso");yn=(0,nn.zc)(Ea(yn))}return yn==null&&(yn=""),n.createElement("tr",{key:Et.key},n.createElement("td",null,Et.label||Et.key," ",Et.help&&n.createElement(I.u,{content:Et.help},n.createElement(T.J,{name:"info-circle"}))),n.createElement("td",null,n.createElement(mt.Ph,{value:wn,options:fn,placeholder:Et.placeholder||Et.key,onChange:Ea=>{this.onFieldNameChange(Et.key,Ea)},noOptionsMessage:"Unknown field names",allowCustomValue:!0,isClearable:!0})),n.createElement("td",null,`${yn}`))}render(){const Et=this.props.response?.events?.[0],Qt=this.props.mappings||{};return n.createElement("table",{className:"filter-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Annotation"),n.createElement("th",null,"From"),n.createElement("th",null,"First Value"))),n.createElement("tbody",null,Kt.r0.map(Yt=>this.renderRow(Yt,Qt[Yt.key]||{},Et))))}}class Mn extends n.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:Et,annotation:Qt}=this.props;if((0,Kt.yr)(Et))return;const Yt=(0,Jt.h4)().getCurrent();if(!Yt)return;this.setState({running:!0});const rn=await(0,Ft.n)((0,Gt.r)({range:(0,ln.$t)().timeRange(),panel:new Pt.r({}),dashboard:Yt},Et,Qt));this.setState({running:!1,response:rn})},this.onQueryChange=Et=>{this.props.onChange({...this.props.annotation,target:Et})},this.onMappingChange=Et=>{this.props.onChange({...this.props.annotation,mappings:Et})},this.onAnnotationChange=Et=>{this.props.onChange(Et)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(Et){this.props.annotation!==Et.annotation&&!(0,Kt.yr)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:Et,annotation:Qt}=this.props,rn={...Kt.yA,...Et.annotations}.prepareAnnotation(Qt);rn!==Qt?this.props.onChange(rn):this.onRunQuery()}renderStatus(){const{response:Et,running:Qt}=this.state;let Yt="alert-info",rn="...",fn;if(Qt||Et?.panelData?.state===oe.Gu.Loading||!Et)rn="loading...";else{const{events:xn,panelData:wn}=Et;if(wn?.error)Yt="alert-error",fn="exclamation-triangle",rn=wn.error.message??"error";else if(!xn?.length)Yt="alert-warning",fn="exclamation-triangle",rn="No events found";else{const yn=wn?.series?.[0]??wn?.annotations?.[0];rn=`${xn.length} events (from ${yn?.fields.length} fields)`}}return n.createElement("div",{className:(0,v.cx)(Yt,(0,v.css)`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `)},n.createElement("div",null,fn&&n.createElement(n.Fragment,null,n.createElement(T.J,{name:fn}),"\xA0"),rn),n.createElement("div",null,Qt?n.createElement(S.$,null):n.createElement(g.zx,{variant:"secondary",size:"xs",onClick:this.onRunQuery},"TEST")))}render(){const{datasource:Et,annotation:Qt,datasourceInstanceSettings:Yt}=this.props,{response:rn}=this.state;let fn=Et.annotations?.QueryEditor||Et.components?.QueryEditor;if(!fn)return n.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const xn={...Et.annotations?.getDefaultQuery?.(),...Qt.target??{refId:"Anno"}};return n.createElement(n.Fragment,null,n.createElement(zt.n,{instanceSettings:Yt},n.createElement(fn,{key:Et?.name,query:xn,datasource:Et,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:rn?.panelData,range:(0,ln.$t)().timeRange(),annotation:Qt,onAnnotationChange:this.onAnnotationChange})),(0,Kt.$w)(Et)&&n.createElement(n.Fragment,null,this.renderStatus(),n.createElement(mn,{response:rn,mappings:Qt.mappings,change:this.onMappingChange})))}}var Gn=e(92811),$n=e(52275);class Fn extends n.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(Et){Et.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const Et=(0,$n.w)(),Qt='<plugin-component type="annotations-query-ctrl"> </plugin-component>',Yt={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=Et.load(this.ref,Yt,Qt),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(Yt.ctrl.ignoreNextWatcherFiring){Yt.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(Yt.ctrl.currentAnnotation)}),this.scopeProps=Yt}render(){return n.createElement("div",{ref:Et=>this.ref=Et})}}const Yn="New annotation",ua=({editIdx:vt,dashboard:Et})=>{const Qt=(0,M.wW)(wa),[Yt,rn]=(0,n.useState)(Et.annotations.list[vt]),fn=(0,n.useMemo)(()=>Yt.filter?Yt.filter.exclude?2:1:0,[Yt.filter]),{value:xn}=(0,C.Z)(()=>(0,qt.F)().get(Yt.datasource),[Yt.datasource]),wn=(0,qt.F)().getInstanceSettings(Yt.datasource),yn=Ma=>{const is=[...Et.annotations.list];is.splice(vt,1,Ma),rn(Ma),Et.annotations.list=is},Ea=Ma=>{yn({...Yt,name:Ma.currentTarget.value})},sa=Ma=>{yn({...Yt,datasource:(0,on.iU)(Ma)})},Un=Ma=>{const is=Ma.currentTarget;yn({...Yt,[is.name]:is.type==="checkbox"?is.checked:is.value})},ya=Ma=>{yn({...Yt,iconColor:Ma})},os=Ma=>{let is=Ma.value===0?void 0:{exclude:Ma.value===2,ids:Yt.filter?.ids??[]};yn({...Yt,filter:is})},ps=Ma=>{if(!Array.isArray(Ma))return;const is={exclude:fn===2,ids:[]};Ma.forEach(ao=>ao.value&&is.ids.push(ao.value)),yn({...Yt,filter:is})},Is=ga,ur=()=>{o.E1.partial({editview:null,editIndex:null})},po=()=>{const Ma=Et.annotations.list;Et.annotations.list=[...Ma.slice(0,vt),...Ma.slice(vt+1)],ga()},Hr=Yt.name===Yn,to=(Ma,is)=>Ma.label&&is.label?Ma.label.toLowerCase().localeCompare(is.label.toLowerCase()):-1,no=(0,n.useMemo)(()=>Et?.panels.filter(Ma=>i.default.panels[Ma.type]).map(Ma=>({value:Ma.id,label:Ma.title??`Panel ${Ma.id}`,description:Ma.description,imgUrl:i.default.panels[Ma.type].info.logos.small})).sort(to)??[],[Et]);return n.createElement("div",null,n.createElement(pn.C,{className:Qt.settingsForm},n.createElement(he.g,{label:"Name"},n.createElement(Cn.I,{"aria-label":r.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:Hr,value:Yt.name,onChange:Ea})),n.createElement(he.g,{label:"Data source",htmlFor:"data-source-picker"},n.createElement(Gn.q,{annotations:!0,variables:!0,current:Yt.datasource,onChange:sa})),n.createElement(he.g,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},n.createElement(Rt.X,{name:"enable",id:"enable",value:Yt.enable,onChange:Un})),n.createElement(he.g,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},n.createElement(Rt.X,{name:"hide",id:"hide",value:Yt.hide,onChange:Un})),n.createElement(he.g,{label:"Color",description:"Color to use for the annotation event markers"},n.createElement(x.Lh,null,n.createElement(xt.B,{value:Yt?.iconColor,onChange:ya}))),n.createElement(he.g,{label:"Show in","aria-label":r.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel},n.createElement(n.Fragment,null,n.createElement(mt.Ph,{options:Ra,value:fn,onChange:os,"aria-label":r.wl.components.Annotations.annotationsTypeInput}),fn!==0&&n.createElement(mt.NU,{options:no,value:no.filter(Ma=>Yt.filter?.ids.includes(Ma.value)),onChange:ps,isClearable:!0,placeholder:"Choose panels",width:100,closeMenuOnSelect:!1,className:Qt.select,"aria-label":r.wl.components.Annotations.annotationsChoosePanelInput})))),n.createElement(pn.C,null,n.createElement("h3",{className:"page-heading"},"Query"),xn?.annotations&&wn&&n.createElement(Mn,{datasource:xn,datasourceInstanceSettings:wn,annotation:Yt,onChange:yn}),xn&&!xn.annotations&&n.createElement(Fn,{datasource:xn,annotation:Yt,onChange:yn})),n.createElement(be.K,null,!Yt.builtIn&&n.createElement(g.zx,{variant:"destructive",onClick:po},"Delete"),n.createElement(g.zx,{variant:"secondary",onClick:ur,"data-testid":r.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.previewInDashboard},"Preview in dashboard"),n.createElement(g.zx,{variant:"primary",onClick:Is},"Apply")))},wa=vt=>({settingsForm:(0,v.css)({maxWidth:vt.spacing(60),marginBottom:vt.spacing(2)}),select:(0,v.css)`
      margin-top: 8px;
    `});function ga(){o.E1.partial({editIndex:null})}var ca=(vt=>(vt[vt.AllPanels=0]="AllPanels",vt[vt.IncludePanels=1]="IncludePanels",vt[vt.ExcludePanels=2]="ExcludePanels",vt))(ca||{});const Ra=[{label:"All panels",value:0,description:"Send the annotation data to all panels that support annotations"},{label:"Selected panels",value:1,description:"Send the annotations to the explicitly listed panels"},{label:"All panels except",value:2,description:"Do not send annotation data to the following panels"}];var va=e(24571),Sa=e(51932);const es=({children:vt,...Et})=>{const Qt=(0,M.wW)(yt);return n.createElement("div",{className:Qt.buttonWrapper},n.createElement(g.zx,{icon:"plus",variant:"secondary",...Et},vt))},yt=vt=>({buttonWrapper:(0,v.css)`
    padding: ${vt.spacing(3)} 0;
  `}),bt=({dashboard:vt,onNew:Et,onEdit:Qt})=>{const Yt=(0,M.wW)(Dt),[rn,fn]=(0,n.useState)(vt.annotations.list),xn=(Un,ya)=>{vt.annotations.list=va.moveItemImmutably(rn,Un,Un+ya),fn(vt.annotations.list)},wn=Un=>{vt.annotations.list=[...rn.slice(0,Un),...rn.slice(Un+1)],fn(vt.annotations.list)},yn=rn.length===0||rn.length===1&&rn[0].builtIn,Ea=Un=>Un.enable===!1?n.createElement(n.Fragment,null,n.createElement("em",{className:"muted"},"(Disabled) \xA0 ",Un.name)):Un.builtIn?n.createElement(n.Fragment,null,n.createElement("em",{className:"muted"},Un.name," \xA0 (Built-in)")):n.createElement(n.Fragment,null,Un.name),sa=(0,qt.F)();return n.createElement(x.wc,null,rn.length>0&&n.createElement("div",{className:Yt.table},n.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Query name"),n.createElement("th",null,"Data source"),n.createElement("th",{colSpan:3}))),n.createElement("tbody",null,vt.annotations.list.map((Un,ya)=>n.createElement("tr",{key:`${Un.name}-${ya}`},Un.builtIn?n.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>Qt(ya)},n.createElement(g.zx,{size:"sm",fill:"text",variant:"secondary"},Ea(Un))):n.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Qt(ya)},n.createElement(g.zx,{size:"sm",fill:"text",variant:"secondary"},Ea(Un))),n.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Qt(ya)},sa.getInstanceSettings(Un.datasource)?.name||Un.datasource?.uid),n.createElement("td",{role:"gridcell",style:{width:"1%"}},ya!==0&&n.createElement(O.h,{name:"arrow-up",onClick:()=>xn(ya,-1),tooltip:"Move up"})),n.createElement("td",{role:"gridcell",style:{width:"1%"}},vt.annotations.list.length>1&&ya!==vt.annotations.list.length-1?n.createElement(O.h,{name:"arrow-down",onClick:()=>xn(ya,1),tooltip:"Move down"}):null),n.createElement("td",{role:"gridcell",style:{width:"1%"}},!Un.builtIn&&n.createElement(Sa.m,{size:"sm",onConfirm:()=>wn(ya),"aria-label":`Delete query with title "${Un.name}"`}))))))),yn&&n.createElement(xe.Z,{onClick:Et,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!yn&&n.createElement(es,{onClick:Et},"New query"))},Dt=()=>({table:(0,v.css)`
    width: 100%;
    overflow-x: scroll;
  `});function Wt({dashboard:vt,editIndex:Et,sectionNav:Qt}){const Yt=()=>{const xn={name:Yn,enable:!0,datasource:(0,on.iU)((0,qt.F)().getInstanceSettings(null)),iconColor:"red"};vt.annotations.list=[...vt.annotations.list,{...xn}],o.E1.partial({editIndex:vt.annotations.list.length-1})},rn=xn=>{o.E1.partial({editIndex:xn})},fn=Et!=null&&Et<vt.annotations.list.length;return n.createElement(u.T,{navModel:Qt,pageNav:cn(vt,Et,Qt.node)},!fn&&n.createElement(bt,{dashboard:vt,onNew:Yt,onEdit:rn}),fn&&n.createElement(ua,{dashboard:vt,editIdx:Et}))}function cn(vt,Et,Qt){const Yt=s.config.featureToggles.dockedMegaMenu?Qt.parentItem:void 0;if(Et==null)return Yt;const rn=vt.annotations.list[Et];if(rn)return{text:rn.name,parentItem:Yt&&{...Yt,url:Qt.url}}}var en=e(36495),En=e(68421),Rn=e(97250),Dn=e(71974),Tn=e(15296),jn=e(34401),ra=e(39106),Jn=e(95681),Xn=e(65489),oa=e(90634),Qn=e(44622);const ts=(vt,Et)=>{const[Qt,Yt]=(0,Xn.Z)(()=>(0,Qn.iM)(vt,!1),[]),rn=(0,oa.iG)();return(0,n.useEffect)(()=>{Qt.value&&(Et(),o.E1.replace("/"),rn.success("Dashboard Deleted",`${Qt.value.title} has been deleted`))},[Qt,rn,Et]),{state:Qt,onDeleteDashboard:Yt}},La={cleanUpDashboardAndVariables:jn.lw},Xa=(0,h.connect)(null,La),bs=({hideModal:vt,cleanUpDashboardAndVariables:Et,dashboard:Qt})=>{const Yt=Qt.meta.provisioned,{onDeleteDashboard:rn}=ts(Qt.uid,Et),[,fn]=(0,Jn.default)(async()=>{await rn(),vt()},[vt]),xn=ia(Qt.panels,Qt.title);return Yt?n.createElement(ls,{hideModal:vt,provisionedId:Qt.meta.provisionedExternalId}):n.createElement(ce.s,{isOpen:!0,body:xn,onConfirm:fn,onDismiss:vt,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},ia=(vt,Et)=>{const Qt=(0,Qe.sumBy)(vt,Yt=>Yt.alert?1:0);return Qt>0&&!i.config.unifiedAlertingEnabled?n.createElement(n.Fragment,null,n.createElement("p",null,"Do you want to delete this dashboard?"),n.createElement("p",null,"This dashboard contains ",Qt," alert",Qt>1?"s":"",". Deleting this dashboard also deletes those alerts.")):n.createElement(n.Fragment,null,n.createElement("p",null,"Do you want to delete this dashboard?"),n.createElement("p",null,Et))},ls=({hideModal:vt,provisionedId:Et})=>n.createElement(A.u,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:vt,className:(0,v.css)`
      width: 500px;
    `},n.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),n.createElement("p",null,n.createElement("i",null,"See"," ",n.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),n.createElement("br",null),"File path: ",Et),n.createElement(A.u.ButtonRow,null,n.createElement(g.zx,{variant:"primary",onClick:vt},"OK"))),As=Xa(bs),ss=({dashboard:vt})=>n.createElement(ra.JY,null,({showModal:Et,hideModal:Qt})=>n.createElement(g.zx,{variant:"destructive",onClick:()=>{Et(As,{dashboard:vt,hideModal:Qt})},"aria-label":"Dashboard settings page delete dashboard button"},n.createElement(f.cC,{i18nKey:"dashboard-settings.dashboard-delete-button"},"Delete Dashboard")));var rs=e(91992),Ba=e(98081),Aa=e(30265);const Zs=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function Wa({dashboard:vt,updateTimeZone:Et,updateWeekStart:Qt,sectionNav:Yt}){const[rn,fn]=(0,n.useState)(0),[xn,wn]=(0,n.useState)(vt.title),[yn,Ea]=(0,n.useState)(vt.description),sa=s.config.featureToggles.dockedMegaMenu?Yt.node.parentItem:void 0,Un=(Fa,ho)=>{vt.meta.folderUid=Fa,vt.meta.folderTitle=ho,vt.meta.hasUnsavedFolderChange=!0,fn(rn+1)},ya=n.useCallback(Fa=>{vt.title=Fa,wn(Fa)},[wn,vt]),os=n.useCallback(Fa=>{vt.description=Fa,Ea(Fa)},[Ea,vt]),ps=Fa=>{vt.graphTooltip=Fa,fn(rn+1)},Is=Fa=>{vt.timepicker.refresh_intervals=Fa.filter(ho=>ho.trim()!=="")},ur=Fa=>{vt.timepicker.nowDelay=Fa},po=Fa=>{vt.timepicker.hidden=Fa,fn(rn+1)},Hr=Fa=>{vt.liveNow=Fa,fn(rn+1)},to=Fa=>{vt.timezone=Fa,fn(rn+1),Et(Fa)},no=Fa=>{vt.weekStart=Fa,fn(rn+1),Qt(Fa)},Ma=Fa=>{vt.tags=Fa,fn(rn+1)},is=Fa=>{vt.editable=Fa,fn(rn+1)},ao=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return n.createElement(u.T,{navModel:Yt,pageNav:sa},n.createElement("div",{style:{maxWidth:"600px"}},n.createElement(Dn.x,{marginBottom:5},n.createElement(he.g,{label:n.createElement(x.Lh,{justify:"space-between"},n.createElement(en._,{htmlFor:"title-input"},n.createElement(f.cC,{i18nKey:"dashboard-settings.general.title-label"},"Title")),s.config.featureToggles.dashgpt&&n.createElement(Ba.n,{onGenerate:ya,dashboard:vt}))},n.createElement(Cn.I,{id:"title-input",name:"title",value:xn,onChange:Fa=>ya(Fa.target.value)})),n.createElement(he.g,{label:n.createElement(x.Lh,{justify:"space-between"},n.createElement(en._,{htmlFor:"description-input"},(0,f.t)("dashboard-settings.general.description-label","Description")),s.config.featureToggles.dashgpt&&n.createElement(rs._,{onGenerate:os,dashboard:vt}))},n.createElement(En.K,{id:"description-input",name:"description",value:yn,onChange:Fa=>os(Fa.target.value)})),n.createElement(he.g,{label:(0,f.t)("dashboard-settings.general.tags-label","Tags")},n.createElement(Rn.B,{id:"tags-input",tags:vt.tags,onChange:Ma,width:40})),n.createElement(he.g,{label:(0,f.t)("dashboard-settings.general.folder-label","Folder")},n.createElement(Tn.E,{value:vt.meta.folderUid,onChange:Un,initialTitle:vt.meta.folderTitle,inputId:"dashboard-folder-input",enableCreateNew:!0,dashboardId:vt.id,skipInitialLoad:!0})),n.createElement(he.g,{label:(0,f.t)("dashboard-settings.general.editable-label","Editable"),description:(0,f.t)("dashboard-settings.general.editable-description","Set to read-only to disable all editing. Reload the dashboard for changes to take effect")},n.createElement(me.S,{value:vt.editable,options:ao,onChange:is}))),n.createElement(Aa.P,{onTimeZoneChange:to,onWeekStartChange:no,onRefreshIntervalChange:Is,onNowDelayChange:ur,onHideTimePickerChange:po,onLiveNowChange:Hr,refreshIntervals:vt.timepicker.refresh_intervals,timePickerHidden:vt.timepicker.hidden,nowDelay:vt.timepicker.nowDelay,timezone:vt.timezone,weekStart:vt.weekStart,liveNow:vt.liveNow}),n.createElement(P.s,{label:(0,f.t)("dashboard-settings.general.panel-options-label","Panel options"),isOpen:!0},n.createElement(he.g,{label:(0,f.t)("dashboard-settings.general.panel-options-graph-tooltip-label","Graph tooltip"),description:(0,f.t)("dashboard-settings.general.panel-options-graph-tooltip-description","Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect")},n.createElement(me.S,{onChange:ps,options:Zs,value:vt.graphTooltip}))),n.createElement(Dn.x,{marginTop:3},vt.meta.canDelete&&n.createElement(ss,{dashboard:vt}))))}const qa={updateTimeZone:jn.tM,updateWeekStart:jn.f4},Bt=(0,h.connect)(null,qa)(Wa);var Qs=e(84541),kn=e(3654);function ma({dashboard:vt,sectionNav:Et}){const[Qt,Yt]=(0,n.useState)(JSON.stringify(vt.getSaveModelClone(),null,2)),rn=s.config.featureToggles.dockedMegaMenu?Et.node.parentItem:void 0,fn=async()=>{await(0,Jt.h4)().saveJSONDashboard(Qt),kn.H.reloadPage()},xn=(0,M.wW)(ha);return n.createElement(u.T,{navModel:Et,pageNav:rn},n.createElement("div",{className:xn.wrapper},n.createElement(f.cC,{i18nKey:"dashboard-settings.json-editor.subtitle"},"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."),n.createElement(Qs.p,{value:Qt,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:Yt,containerStyles:xn.codeEditor}),vt.meta.canSave&&n.createElement("div",null,n.createElement(g.zx,{type:"submit",onClick:fn},n.createElement(f.cC,{i18nKey:"dashboard-settings.json-editor.save-button"},"Save changes")))))}const ha=vt=>({wrapper:(0,v.css)({display:"flex",height:"100%",flexDirection:"column",gap:vt.spacing(2)}),codeEditor:(0,v.css)({flexGrow:1})});var Pa=e(34593),$s=e(3532);const Js=({dashboard:vt,onNew:Et,onEdit:Qt})=>{const Yt=(0,M.wW)(ar),[rn,fn]=(0,n.useState)(vt.links),xn=(sa,Un)=>{vt.links=va.moveItemImmutably(rn,sa,sa+Un),fn(vt.links)},wn=(sa,Un)=>{vt.links=[...rn,{...sa}],fn(vt.links)},yn=sa=>{vt.links=[...rn.slice(0,sa),...rn.slice(sa+1)],fn(vt.links)};return vt.links.length===0?n.createElement("div",null,n.createElement(xe.Z,{onClick:Et,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):n.createElement(n.Fragment,null,n.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Type"),n.createElement("th",null,"Info"),n.createElement("th",{colSpan:3}))),n.createElement("tbody",null,rn.map((sa,Un)=>n.createElement("tr",{key:`${sa.title}-${Un}`},n.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Qt(Un)},n.createElement(T.J,{name:"external-link-alt"})," \xA0 ",sa.type),n.createElement("td",{role:"gridcell"},n.createElement(x.Lh,null,sa.title&&n.createElement("span",{className:Yt.titleWrapper},sa.title),sa.type==="link"&&n.createElement("span",{className:Yt.urlWrapper},sa.url),sa.type==="dashboards"&&n.createElement($s.P,{tags:sa.tags??[]}))),n.createElement("td",{style:{width:"1%"},role:"gridcell"},Un!==0&&n.createElement(O.h,{name:"arrow-up",onClick:()=>xn(Un,-1),tooltip:"Move link up"})),n.createElement("td",{style:{width:"1%"},role:"gridcell"},rn.length>1&&Un!==rn.length-1?n.createElement(O.h,{name:"arrow-down",onClick:()=>xn(Un,1),tooltip:"Move link down"}):null),n.createElement("td",{style:{width:"1%"},role:"gridcell"},n.createElement(O.h,{name:"copy",onClick:()=>wn(sa,Un),tooltip:"Copy link"})),n.createElement("td",{style:{width:"1%"},role:"gridcell"},n.createElement(Sa.m,{"aria-label":`Delete link with title "${sa.title}"`,size:"sm",onConfirm:()=>yn(Un)})))))),n.createElement(es,{onClick:Et},"New link"))},ar=()=>({titleWrapper:(0,v.css)`
    width: 20vw;
    text-overflow: ellipsis;
    overflow: hidden;
  `,urlWrapper:(0,v.css)`
    width: 40vw;
    text-overflow: ellipsis;
    overflow: hidden;
  `});function ws({dashboard:vt,sectionNav:Et,editIndex:Qt}){const[Yt,rn]=(0,n.useState)(!1),fn=()=>{rn(!1),o.E1.partial({editIndex:void 0})},xn=()=>{vt.links=[...vt.links,{...Pa.zA}],rn(!0),o.E1.partial({editIndex:vt.links.length-1})},wn=sa=>{rn(!1),o.E1.partial({editIndex:sa})},yn=Qt!==void 0;let Ea;if(s.config.featureToggles.dockedMegaMenu&&(Ea=Et.node.parentItem),yn&&(Ea={text:Yt?"New link":"Edit link",subTitle:Yt?"Create a new link on your dashboard":"Edit a specific link of your dashboard"},s.config.featureToggles.dockedMegaMenu)){const ya=Et.node.url;Ea.parentItem=Et.node.parentItem&&{...Et.node.parentItem,url:ya}}return n.createElement(u.T,{navModel:Et,pageNav:Ea},!yn&&n.createElement(Js,{dashboard:vt,onNew:xn,onEdit:wn}),yn&&n.createElement(Pa.fD,{dashboard:vt,editLinkIdx:Qt,onGoBack:fn}))}var Qa=e(11353);const sr=10;class Pr extends n.PureComponent{constructor(Et){super(Et),this.getVersions=(Qt=!1)=>{this.setState({isAppending:Qt}),Qa.K8.getHistoryList(this.props.dashboard,{limit:this.limit,start:this.start}).then(Yt=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(Yt)]}),this.start+=this.limit}).catch(Yt=>console.log(Yt)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const Qt=this.state.versions.filter(yn=>yn.checked),[Yt,rn]=Qt,fn=Yt.version===this.props.dashboard.version;this.setState({isLoading:!0});const xn=await Qa.K8.getDashboardVersion(this.props.dashboard.uid,rn.version),wn=await Qa.K8.getDashboardVersion(this.props.dashboard.uid,Yt.version);this.setState({baseInfo:rn,isLoading:!1,isNewLatest:fn,newInfo:Yt,viewMode:"compare",diffData:{lhs:xn.data,rhs:wn.data}})},this.decorateVersions=Qt=>Qt.map(Yt=>({...Yt,createdDateString:this.props.dashboard.formatDate(Yt.created),ageString:this.props.dashboard.getRelativeTime(Yt.created),checked:!1})),this.onCheck=(Qt,Yt)=>{this.setState({versions:this.state.versions.map(rn=>rn.id===Yt?{...rn,checked:Qt.currentTarget.checked}:rn)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(Qt=>({...Qt,checked:!1})),viewMode:"list"})},this.limit=sr,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(Et=>Et.version===1)}render(){const{versions:Et,viewMode:Qt,baseInfo:Yt,newInfo:rn,isNewLatest:fn,isLoading:xn,diffData:wn}=this.state,yn=Et.filter(ya=>ya.checked).length===2,Ea=Et.length>1,sa=Et.length>=this.limit,Un=s.config.featureToggles.dockedMegaMenu?this.props.sectionNav.node.parentItem:void 0;return Qt==="compare"?n.createElement(u.T,{navModel:this.props.sectionNav,pageNav:Un},n.createElement(Qa.Cs,{onClick:this.reset,baseVersion:Yt?.version,newVersion:rn?.version,isNewLatest:fn}),xn?n.createElement(Xs,{msg:"Fetching changes\u2026"}):n.createElement(Qa.U$,{newInfo:rn,baseInfo:Yt,isNewLatest:fn,diffData:wn})):n.createElement(u.T,{navModel:this.props.sectionNav,pageNav:Un},xn?n.createElement(Xs,{msg:"Fetching history list\u2026"}):n.createElement(Qa.Sd,{versions:Et,onCheck:this.onCheck,canCompare:yn}),this.state.isAppending&&n.createElement(Xs,{msg:"Fetching more entries\u2026"}),Ea&&n.createElement(Qa.R1,{hasMore:sa,canCompare:yn,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const Xs=({msg:vt})=>n.createElement(x.Lh,null,n.createElement(S.$,null),n.createElement("em",null,vt)),_r=()=>o.E1.partial({editview:null,editIndex:null});function eo({dashboard:vt,editview:Et,pageNav:Qt,sectionNav:Yt}){const[rn,fn]=(0,n.useState)(0);(0,n.useEffect)(()=>{vt.events.subscribe(p.hS,()=>fn(ur=>ur+1))},[vt]);const xn=(0,n.useMemo)(()=>zr(vt),[vt,rn]),wn=()=>{vt.meta.hasUnsavedFolderChange=!1},yn=xn.find(ur=>ur.id===Et)??xn[0],Ea=c.contextSrv.hasEditPermissionInFolders,sa=vt.meta.canSave,Un=(0,a.TH)(),ya=Ta(Un),os=rr(Qt,Yt,xn,yn,Un),ps="sm",Is=[n.createElement(g.zx,{"data-testid":r.wl.pages.Dashboard.Settings.Actions.close,variant:"secondary",key:"close",fill:"outline",size:ps,onClick:_r},"Close"),Ea&&n.createElement(tn.t,{dashboard:vt,onSaveSuccess:wn,variant:"secondary",key:"save as",size:ps}),sa&&n.createElement(tn.i,{dashboard:vt,onSaveSuccess:wn,key:"Save",size:ps})];return n.createElement(n.Fragment,null,n.createElement(d.A,{actions:n.createElement(m.R,{alignment:"right"},Is)}),n.createElement(yn.component,{sectionNav:os,dashboard:vt,editIndex:ya}))}function zr(vt){const Et=[],Qt=(0,f.t)("dashboard-settings.general.title","General");vt.meta.canEdit&&(Et.push({title:Qt,id:"settings",icon:"sliders-v-alt",component:Bt}),Et.push({title:(0,f.t)("dashboard-settings.annotations.title","Annotations"),id:"annotations",icon:"comment-alt",component:Wt,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),Et.push({title:(0,f.t)("dashboard-settings.variables.title","Variables"),id:"templating",icon:"calculator-alt",component:ft,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),Et.push({title:(0,f.t)("dashboard-settings.links.title","Links"),id:"links",icon:"link",component:ws})),vt.meta.canMakeEditable&&Et.push({title:Qt,icon:"sliders-v-alt",id:"settings",component:Ar}),vt.id&&vt.meta.canSave&&Et.push({title:(0,f.t)("dashboard-settings.versions.title","Versions"),id:"versions",icon:"history",component:Pr});const Yt=(0,f.t)("dashboard-settings.permissions.title","Permissions");return vt.id&&vt.meta.canAdmin&&c.contextSrv.hasPermission(E.AccessControlAction.DashboardsPermissionsRead)&&Et.push({title:Yt,id:"permissions",icon:"lock",component:Zt}),Et.push({title:(0,f.t)("dashboard-settings.json-editor.title","JSON Model"),id:"dashboard_json",icon:"arrow",component:ma}),Et}function Ws(vt,Et){return{...vt,parentItem:vt.parentItem?Ws(vt.parentItem,Et):Et}}function rr(vt,Et,Qt,Yt,rn){const fn={text:(0,f.t)("dashboard-settings.settings.title","Settings"),children:[],icon:"apps",hideFromBreadcrumbs:!0};i.default.featureToggles.dockedMegaMenu&&(fn.hideFromBreadcrumbs=!1,fn.url=l.u.getUrlForPartial(rn,{editview:"settings",editIndex:null})),fn.children=Qt.map(wn=>({text:wn.title,icon:wn.icon,id:wn.id,url:l.u.getUrlForPartial(rn,{editview:wn.id,editIndex:null}),active:wn===Yt,parentItem:fn,subTitle:wn.subTitle}));const xn=Ws(vt,Et.node);return fn.parentItem=xn,{main:fn,node:fn.children.find(wn=>wn.active)}}function Ar({dashboard:vt,sectionNav:Et}){return n.createElement(u.T,{navModel:Et},n.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),n.createElement(g.zx,{type:"submit",onClick:()=>vt.makeEditable()},"Make editable"))}function Ta(vt){const Et=new URLSearchParams(vt.search).get("editIndex");if(Et!=null)return parseInt(Et,10)}},11769:(J,R,e)=>{"use strict";e.d(R,{v:()=>K});var n=e(41407),a=e(39953),l=e(82803),r=e(4919),o=e(98632),g=e(36884),m=e(28409),d=e(69865),u=e(33155),i=e(12223),f=e(38637),c=e(68497),E=e(12190),p=e(66729),h=e(11267);const y=({currentPage:G,numberOfPages:Q,onNavigate:j,hideWhenSinglePage:F,className:k})=>{const _=(0,l.wW)(s);return F&&Q<=1?null:a.createElement("div",{className:(0,n.cx)(_.wrapper,k)},a.createElement(c.h,{name:"angle-left",size:"md",tooltip:"Previous",onClick:()=>j(G-1),disabled:G===1}),G," of ",Q,a.createElement(c.h,{name:"angle-right",size:"md",tooltip:"Next",onClick:()=>j(G+1),disabled:G===Q}))},s=G=>({wrapper:(0,n.css)({display:"flex",flexDirection:"row",gap:16})});var v=e(20653),C=e(54538),D=e(90634),M=e(24976),P=e(4811),x=(G=>(G.IDLE="idle",G.GENERATING="generating",G.COMPLETED="completed",G))(x||{});const S=1e4;function I(G=P.L,Q=1){const[j,F]=(0,a.useState)([]),[k,_]=(0,a.useState)(""),[Y,Z]=(0,a.useState)("idle"),[ae,ce]=(0,a.useState)(),{error:q}=(0,D.iG)(),De=(0,a.useCallback)(ge=>{Z("idle"),F([]),ce(ge),q("Failed to generate content using OpenAI","Please try again or if the problem persists, contact your organization admin."),console.error(ge),(0,C.H)(ge,{messages:JSON.stringify(j),model:G,temperature:String(Q)})},[j,G,Q,q]),{error:oe,value:te}=(0,v.Z)(async()=>await(0,P.K_)(),[P.K_]),{error:fe,value:Te}=(0,v.Z)(async()=>{if(!te||!j.length)return{enabled:te};Z("generating"),ce(void 0);const ge=M.f.streamChatCompletions({model:G,temperature:Q,messages:j}).pipe(M.f.accumulateContent());return{enabled:te,stream:ge.subscribe({next:_,error:De,complete:()=>{Z("completed"),setTimeout(()=>{Z("idle")}),F([]),ce(void 0)}})}},[j,te]);return(0,a.useEffect)(()=>()=>{Te?.stream&&Te.stream.unsubscribe()},[Te]),(0,a.useEffect)(()=>{let ge;return Y==="generating"&&k===""&&(ge=setTimeout(()=>{De(new Error(`OpenAI stream timed out after ${S}ms`))},S)),()=>{ge&&clearTimeout(ge)}},[Y,k,De]),(fe||oe)&&ce(fe||oe),{setMessages:F,messages:j,reply:k,streamStatus:Y,error:ae,value:Te}}const T=({history:G,index:Q,reply:j,streamStatus:F,onNavigate:k})=>{const _=(0,l.wW)(O),Y=G.length,Z=()=>j&&F!==x.IDLE?j:G[Q-1];return a.createElement(a.Fragment,null,a.createElement(y,{currentPage:Q,numberOfPages:Y,onNavigate:k,hideWhenSinglePage:!0,className:_.paginationWrapper}),a.createElement("div",{className:_.contentWrapper},a.createElement(o.x,{element:"p",color:"secondary"},Z())))},O=G=>({paginationWrapper:(0,n.css)({display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:15}),contentWrapper:(0,n.css)({display:"flex",flexBasis:"100%",flexGrow:3,whiteSpace:"pre-wrap",marginTop:20})}),A=({onSuggestionClick:G,isGenerating:Q})=>{const j=(0,l.wW)(B);return a.createElement("div",{className:j.quickSuggestionsWrapper},a.createElement(r.zx,{onClick:()=>G(P.VN.Shorter),size:"sm",variant:"secondary",disabled:Q},P.VN.Shorter),a.createElement(r.zx,{onClick:()=>G(P.VN.MoreDescriptive),size:"sm",variant:"secondary",disabled:Q},P.VN.MoreDescriptive),a.createElement(r.zx,{onClick:()=>G(P.VN.Regenerate),size:"sm",variant:"secondary",disabled:Q},P.VN.Regenerate))},B=G=>({quickSuggestionsWrapper:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",flexGrow:1,gap:8,paddingTop:10})});var b=e(4041);const W=.5,V=({eventTrackingSrc:G,history:Q,messages:j,onApplySuggestion:F,updateHistory:k})=>{const _=(0,l.wW)(w),[Y,Z]=(0,a.useState)(1),[ae,ce]=(0,a.useState)(!1),[q,De]=(0,a.useState)(""),{setMessages:oe,reply:te,streamStatus:fe,error:Te}=I(P.L,W),ge=fe===x.GENERATING,he=(Ke,et)=>(0,b.TU)(G,Ke,et);(0,a.useEffect)(()=>{!ge&&te!==""&&Z(1)},[ge,te]),(0,a.useEffect)(()=>{fe===x.COMPLETED&&k((0,P.Is)(te))},[fe,te,k]),(0,a.useEffect)(()=>{Te&&ce(!0),fe===x.GENERATING&&ce(!1)},[Te,fe]);const me=Ke=>{Oe(Ke),he(b.k_.customFeedback,{customFeedback:Ke})},ye=()=>{F(Q[Y-1])},ue=Ke=>{Z(Ke),he(Ke>Y?b.k_.backHistoryItem:b.k_.forwardHistoryItem)},Oe=Ke=>{Ke!==P.VN.Regenerate&&(j=[...j,...(0,h.K)(Q[Y],Ke)]),oe(j),Ke in P.VN&&he(b.k_.quickFeedback,{quickFeedbackItem:Ke})},Ue=Ke=>Ke.key==="Enter"&&me(q),at=Ke=>De(Ke.currentTarget.value),Ne=()=>me(q),_e=()=>he(b.k_.linkToDocs);return a.createElement("div",{className:_.container},ae&&a.createElement("div",null,a.createElement(u.b,{title:""},a.createElement(i.wc,null,a.createElement("div",null,"Sorry, I was unable to complete your request. Please try again.")))),a.createElement(f.I,{placeholder:"Tell AI what to do next...",suffix:a.createElement(c.h,{name:"corner-down-right-alt",variant:"secondary","aria-label":"Send custom feedback",onClick:Ne,disabled:q===""}),value:q,onChange:at,onKeyDown:Ue}),a.createElement("div",{className:_.actions},a.createElement(A,{onSuggestionClick:Oe,isGenerating:ge}),a.createElement(T,{history:Q,index:Y,onNavigate:ue,reply:(0,P.Is)(te),streamStatus:fe})),a.createElement("div",{className:_.applySuggestion},a.createElement(i.Lh,{justify:"flex-end"},ge&&a.createElement(m.$,null),a.createElement(r.zx,{onClick:ye,disabled:ge},"Apply"))),a.createElement("div",{className:_.footer},a.createElement(E.J,{name:"exclamation-circle","aria-label":"exclamation-circle",className:_.infoColor}),a.createElement(o.x,{variant:"bodySmall",color:"secondary"},"This content is AI-generated."," ",a.createElement(p.h,{variant:"bodySmall",href:"https://grafana.com/grafana/dashboards/",external:!0,onClick:_e},"Learn more"))))},w=G=>({container:(0,n.css)({display:"flex",flexDirection:"column",width:520,paddingBottom:35}),applySuggestion:(0,n.css)({marginTop:G.spacing(1)}),actions:(0,n.css)({display:"flex",flexDirection:"row",flexWrap:"wrap"}),footer:(0,n.css)({position:"absolute",bottom:0,left:0,width:"100%",display:"flex",flexDirection:"row",margin:0,padding:G.spacing(1),paddingLeft:G.spacing(2),alignItems:"center",gap:G.spacing(1),borderTop:`1px solid ${G.colors.border.weak}`,marginTop:G.spacing(2)}),infoColor:(0,n.css)({color:G.colors.info.main})}),K=({text:G="Auto-generate",loadingText:Q="Generating",toggleTipTitle:j="",onClick:F,messages:k,onGenerate:_,temperature:Y=1,eventTrackingSrc:Z,disabled:ae})=>{const ce=(0,l.wW)(z),{messages:q,setMessages:De,reply:oe,value:te,error:fe,streamStatus:Te}=I(P.L,Y),[ge,he]=(0,a.useState)([]),[me,ye]=(0,a.useState)(!0),ue=ge.length>0,Oe=Te===x.GENERATING&&!ue,Ue=ae||Oe||te&&!te.enabled&&!fe,at=We=>(0,b.TU)(Z,We),Ne=We=>{ue?ye&&ye(!0):(F?.(We),De(typeof k=="function"?k():k));const ke=fe?b.k_.erroredRetryButton:ue?b.k_.improveButton:b.k_.autoGenerateButton;at(ke)},_e=(0,a.useCallback)(We=>{ge.indexOf(We)===-1&&he([We,...ge])},[ge]);if((0,a.useEffect)(()=>{Oe&&oe&&_((0,P.Is)(oe))},[Te,oe,_,Oe]),(0,a.useEffect)(()=>{Te===x.COMPLETED&&_e((0,P.Is)(oe))},[ge,Te,oe,_e]),!te?.enabled)return null;const Ke=We=>{at(b.k_.applySuggestion),_(We),ye(!1)},et=()=>{if(!Oe)return fe||te&&!te?.enabled?"exclamation-circle":"ai"},ze=()=>{let We=G;return fe&&(We="Retry"),Oe&&(We=Q),ue&&(We="Improve"),We},je=a.createElement(r.zx,{icon:et(),onClick:Ne,fill:"text",size:"sm",disabled:Ue,variant:fe?"destructive":"primary"},ze()),Qe=()=>{if(ue){const We=a.createElement(o.x,{element:"p"},j);return a.createElement(g.P,{title:We,content:a.createElement(V,{history:ge,messages:q,onApplySuggestion:Ke,updateHistory:_e,eventTrackingSrc:Z}),placement:"bottom-start",fitContent:!0,show:me?void 0:!1},je)}return je};return a.createElement("div",{className:ce.wrapper},Oe&&a.createElement(m.$,{size:14}),!ue&&a.createElement(d.u,{show:fe?void 0:!1,interactive:!0,content:"Failed to generate content using OpenAI. Please try again or if the problem persist, contact your organization admin."},je),ue&&Qe())},z=G=>({wrapper:(0,n.css)({display:"flex"})})},91992:(J,R,e)=>{"use strict";e.d(R,{_:()=>g});var n=e(39953),a=e(11769),l=e(4041),r=e(4811);const o=`You are an expert in creating Grafana Dashboards.
Your goal is to write a descriptive and concise dashboard description.
You will be given the title and description of the dashboard's panels.
The dashboard description is meant to explain the purpose of the dashboard and what its panels show.
If the dashboard has no panels, the description should be "Empty dashboard"
There should be no numbers in the description except where they are important.
The dashboard description should not have the dashboard title or any quotation marks in it.
The description should be, at most, 140 characters.
Respond with only the description of the dashboard.`,g=({onGenerate:d,dashboard:u})=>{const i=n.useMemo(()=>m(u),[u]);return n.createElement(a.v,{messages:i,onGenerate:d,loadingText:"Generating description",eventTrackingSrc:l.dG.dashboardDescription,toggleTipTitle:"Improve your dashboard description"})};function m(d){const u=(0,r._v)(d);return[{content:o,role:r.uU.system},{content:`The title of the dashboard is "${d.title}"
${u}`,role:r.uU.system}]}},98081:(J,R,e)=>{"use strict";e.d(R,{n:()=>g});var n=e(39953),a=e(11769),l=e(4041),r=e(4811);const o=`You are an expert in creating Grafana Dashboards.
Your goal is to write a concise dashboard title.
You will be given the title and description of the dashboard's panels.
The dashboard title is meant to say what it shows on one line for users to navigate to it.
If the dashboard has no panels, the title should be "Empty dashboard"
There should be no numbers in the title.
The dashboard title should not have quotation marks in it.
The title should be, at most, 50 characters.
Respond with only the title of the dashboard.`,g=({onGenerate:d,dashboard:u})=>{const i=n.useMemo(()=>m(u),[u]);return n.createElement(a.v,{messages:i,onGenerate:d,loadingText:"Generating title",eventTrackingSrc:l.dG.dashboardTitle,toggleTipTitle:"Improve your dashboard title"})};function m(d){return[{content:o,role:r.uU.system},{content:`The panels in the dashboard are: ${(0,r._v)(d)}`,role:r.uU.system}]}},11267:(J,R,e)=>{"use strict";e.d(R,{K:()=>u,j:()=>m});var n=e(39953),a=e(97433),l=e(11769),r=e(4041),o=e(4811);const g="You are an expert in creating Grafana Panels.Your goal is to write short, descriptive, and concise panel title for a panel.The title should be shorter than 50 characters.",m=({onGenerate:i,panel:f})=>{const c=n.useMemo(()=>d(f),[f]);return n.createElement(l.v,{messages:c,onGenerate:i,loadingText:"Generating title",eventTrackingSrc:r.dG.panelTitle,toggleTipTitle:"Improve your panel title"})};function d(i){const f=(0,a.h4)().getCurrent();return[{content:g,role:o.uU.system},{content:`The panel is part of a dashboard with the title: ${f.title}`,role:o.uU.system},{content:`The panel is part of a dashboard with the description: ${f.title}`,role:o.uU.system},{content:`Use this JSON object which defines the panel: ${JSON.stringify(i.getSaveModel())}`,role:o.uU.user}]}const u=(i,f)=>[{role:o.uU.system,content:`Your previous response was: ${i}. The user has provided the following feedback: ${f}. Re-generate your response according to the provided feedback.`}]},24976:(J,R,e)=>{"use strict";e.d(R,{f:()=>n});var n={};e.r(n),e.d(n,{accumulateContent:()=>P,chatCompletions:()=>x,enabled:()=>T,extractContent:()=>M,isContentMessage:()=>v,isDoneMessage:()=>C,isErrorResponse:()=>D,streamChatCompletions:()=>S});var a=e(15056),l=e(81595),r=e(71476),o=e(68040),g=e(82696),m=e(84698),d=e(48614),u=e(4148),i=e(16843),f=e(54538),c=e(64912);const E="grafana-llm-app",p=`/api/plugins/${E}`;let h=new c.SemVer("0.2.0");function y(O){try{h=new c.SemVer(O)}catch{(0,f.KE)("Failed to parse version of grafana-llm-app; assuming old version is present.")}}const s="openai/v1/chat/completions";function v(O){return typeof O=="object"&&O!==null&&"content"in O}function C(O){return typeof O=="object"&&O!==null&&"done"in O}function D(O){return typeof O=="object"&&O!==null&&"error"in O}function M(){return(0,a.z)((0,l.h)(O=>v(O.choices[0].delta)),(0,r.U)(O=>O.choices[0].delta.content))}function P(){return(0,a.z)(M(),(0,o.R)((O,A)=>O+A,""))}async function x(O){return await(0,u.i)().post("/api/plugins/grafana-llm-app/resources/openai/v1/chat/completions",O,{headers:{"Content-Type":"application/json"}})}function S(O){const A={scope:d.z.Plugin,namespace:E,path:s+"/"+self.crypto.randomUUID(),data:O};return(0,i.gj)().getStream(A).pipe((0,l.h)(b=>(0,d.RL)(b))).pipe((0,g.b)(b=>{if(D(b.message))throw new Error(b.message.error)}),(0,m.o)(b=>D(b.message)||!C(b.message.choices[0].delta)),(0,r.U)(b=>b.message))}let I=!1;const T=async()=>{try{const O=await(0,u.i)().get(`${p}/settings`,void 0,void 0,{showSuccessAlert:!1,showErrorAlert:!1});return y(O.info.version),O.enabled??!1}catch(O){return I||((0,f.o7)(String(O)),(0,f.o7)("Failed to check if OpenAI is enabled. This is expected if the Grafana LLM plugin is not installed, and the above error can be ignored."),I=!0),!1}}},4041:(J,R,e)=>{"use strict";e.d(R,{TU:()=>o,dG:()=>l,k_:()=>r});var n=e(72639);const a="dashboards_autogenerate_clicked";var l=(g=>(g.panelDescription="panel-description",g.panelTitle="panel-title",g.dashboardChanges="dashboard-changes",g.dashboardTitle="dashboard-title",g.dashboardDescription="dashboard-description",g.unknown="unknown",g))(l||{}),r=(g=>(g.autoGenerateButton="auto-generate-button",g.erroredRetryButton="errored-retry-button",g.improveButton="improve-button",g.backHistoryItem="back-history-item",g.forwardHistoryItem="forward-history-item",g.quickFeedback="quick-feedback",g.linkToDocs="link-to-docs",g.customFeedback="custom-feedback",g.applySuggestion="apply-suggestion",g))(r||{});function o(g,m,d){(0,n.ff)(a,{src:g,item:m,...d})}},4811:(J,R,e)=>{"use strict";e.d(R,{L:()=>E,VN:()=>c,uU:()=>f,xm:()=>h,_v:()=>s,K_:()=>y,Is:()=>p});var n=e(57953),a=e(75397);function l(v,C){return v===C?C:Array.isArray(v)&&Array.isArray(C)?g(v,C):r(v)&&r(C)?o(v,C):C}function r(v){return typeof v=="object"&&!Array.isArray(v)&&v!==null}function o(v,C){const D=Object.keys(v),M={};for(const P of D)C.hasOwnProperty(P)&&(Array.isArray(v[P])&&Array.isArray(C[P])||typeof v[P]=="object"&&typeof C[P]=="object"?M[P]=l(v[P],C[P]):M[P]=C[P]);return M}function g(v,C){const D=new Array(v.length).fill(void 0),M=new Set([...Array(v.length).keys()]),P=new Set([...Array(C.length).keys()]);for(let x=0;x<v.length&&P.size!==0;x++){let S=v[x];for(let I=0;I<C.length;I++){if(!P.has(I))continue;let T=C[I];T=l(S,T),JSON.stringify(S)===JSON.stringify(T)&&(M.delete(x),P.delete(I),D[x]=T)}}return m(v,C,D,M,P),D.filter(x=>x!==void 0)}function m(v,C,D,M,P){let x={};P.forEach(I=>{let T=C[I];if(typeof T!="object"||Array.isArray(T)){D.push(T),P.delete(I);return}M.forEach(O=>{let A=v[O];if(typeof A!="object"||Array.isArray(A)){M.delete(O);return}let B=0;for(const b in A){let W=A[b];if(!T.hasOwnProperty(b))continue;let V=T[b];typeof W!="string"&&typeof W!="number"||typeof W!=typeof V||W===V&&B++}B!==0&&(x[B]===void 0&&(x[B]=[]),x[B].push([O,I]))})});const S=Object.keys(x).map(Number);S.sort((I,T)=>T-I);for(const I of S){let T=x[I];for(const O of T){const[A,B]=O;M.has(A)&&P.has(B)&&(D[A]=C[B],M.delete(A),P.delete(B))}}for(const I of P)D.push(C[I])}function d(v){return JSON.parse(JSON.stringify(v,null,2))}function u(v){const C=d(v.getOriginalDashboard());let D=d(new a.f(C).getSaveModelClone()),M=d(v.getSaveModelClone());D=l(C,D),M=l(D,M);let P=(0,n.ym)(C.title??"Before migration changes",D.title??"After migration changes",JSON.stringify(C,null,2),JSON.stringify(D,null,2),"","",{context:5}),x=(0,n.ym)(D.title??"Before user changes",M.title??"After user changes",JSON.stringify(D,null,2),JSON.stringify(M,null,2),"","",{context:5});return{migrationDiff:P,userDiff:x}}var i=e(24976),f=(v=>(v.system="system",v.user="user",v))(f||{}),c=(v=>(v.Shorter="Even shorter",v.MoreDescriptive="More descriptive",v.Regenerate="Regenerate",v))(c||{});const E="gpt-4",p=v=>v.replace(/^"|"$/g,"");function h(v){const{migrationDiff:C,userDiff:D}=u(v);return{userChanges:D,migrationChanges:C}}async function y(){return await i.f.enabled()}function s(v){const C=(P,x)=>`
  - Panel ${x}

  - Title: ${P.title}

  ${P.description?`- Description: ${P.description}`:""}
  `,D=v.panels.map(C);let M;if(D.length<=10)M=`The panels in the dashboard are:
${D.join(`
`)}`;else{const P=v.panels.filter(I=>I.description),x=v.panels.filter(I=>!I.description);let S;P.length>=10?S=P.slice(10).map(C).join(`
`):(S=P.map(C).join(`
`),S+=`
`,S+=x.slice(10-P.length).map(C).join("n")),M=`There are ${D.length} panels.
Due to space constraints, only the information for ten of them is presented.
These ten are not necessarily the first ten, but prioritized to those with descriptions.
The panels in the dashboard are:
${S}`}return M}},34593:(J,R,e)=>{"use strict";e.d(R,{fD:()=>E,xy:()=>f,zA:()=>u});var n=e(39953),a=e(96227),l=e(38637),r=e(9558),o=e(97250),g=e(4516),m=e(13026),d=e(4919);const u={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},i=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],f={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},c=Object.keys(f).map(p=>({label:p,value:p})),E=({editLinkIdx:p,dashboard:h,onGoBack:y})=>{const[s,v]=(0,n.useState)(p!==null?h.links[p]:u),C=I=>{const T=[...h.links];T.splice(p,1,I),h.links=T,v(I)},D=I=>{C({...s,tags:I})},M=I=>{const T={...s,type:I.value};T.type==="dashboards"?(T.url="",T.tooltip=""):T.tags=[],C(T)},P=I=>{C({...s,icon:I.value})},x=I=>{const T=I.currentTarget;C({...s,[T.name]:T.type==="checkbox"?T.checked:T.value})},S=s.title===u.title;return n.createElement("div",{style:{maxWidth:"600px"}},n.createElement(a.g,{label:"Title"},n.createElement(l.I,{name:"title",id:"title",value:s.title,onChange:x,autoFocus:S})),n.createElement(a.g,{label:"Type"},n.createElement(r.Ph,{inputId:"link-type-input",value:s.type,options:i,onChange:M})),s.type==="dashboards"&&n.createElement(n.Fragment,null,n.createElement(a.g,{label:"With tags"},n.createElement(o.B,{tags:s.tags,onChange:D}))),s.type==="link"&&n.createElement(n.Fragment,null,n.createElement(a.g,{label:"URL"},n.createElement(l.I,{name:"url",value:s.url,onChange:x})),n.createElement(a.g,{label:"Tooltip"},n.createElement(l.I,{name:"tooltip",value:s.tooltip,onChange:x,placeholder:"Open dashboard"})),n.createElement(a.g,{label:"Icon"},n.createElement(r.Ph,{value:s.icon,options:c,onChange:P}))),n.createElement(g.s,{label:"Options",isOpen:!0},s.type==="dashboards"&&n.createElement(a.g,null,n.createElement(m.X,{label:"Show as dropdown",name:"asDropdown",value:s.asDropdown,onChange:x})),n.createElement(a.g,null,n.createElement(m.X,{label:"Include current time range",name:"keepTime",value:s.keepTime,onChange:x})),n.createElement(a.g,null,n.createElement(m.X,{label:"Include current template variable values",name:"includeVars",value:s.includeVars,onChange:x})),n.createElement(a.g,null,n.createElement(m.X,{label:"Open link in new tab",name:"targetBlank",value:s.targetBlank,onChange:x}))),n.createElement(d.zx,{onClick:y},"Apply"))}},8376:(J,R,e)=>{"use strict";e.d(R,{u:()=>f});var n=e(41407),a=e(39953),l=e(973),r=e(28888),o=e(82803),g=e(54951),m=e(4919),d=e(67650),u=e(91507);const i="showCategory",f=a.memo(({id:p,title:h,children:y,forceOpen:s,isOpenDefault:v,renderTitle:C,className:D,itemsCount:M,isNested:P=!1,sandboxId:x})=>{const S=v!==!1,[I,T]=(0,l.Z)(E(p),{isExpanded:S}),O=(0,o.wW)(c),[A,B]=(0,d.K)(),[b,W]=(0,a.useState)(I?.isExpanded??S),V=(0,a.useRef)(0),w=(0,a.useRef)(null),K=A[i]===p;(0,a.useEffect)(()=>{V.current&&Date.now()-V.current<200||(K||s)&&(b||W(!0),K&&w.current?.scrollIntoView())},[s,b,K]);const z=(0,a.useCallback)(()=>{V.current=Date.now(),B({[i]:b?void 0:p},!0),T({isExpanded:!b}),W(!b)},[T,W,B,b,p]);C||(C=function(k){return k||M===void 0||M===0?h:a.createElement("span",null,h," ",a.createElement(g.A,{value:M}))});const G=(0,n.cx)({[O.box]:!0,[O.boxNestedExpanded]:P&&b},D,"options-group"),Q=(0,n.cx)(O.header,{[O.headerExpanded]:b,[O.headerNested]:P}),j=(0,n.cx)(O.body,{[O.bodyNested]:P});return a.createElement("div",{className:G,"data-testid":"options-category","data-plugin-sandbox":x,"aria-label":r.wl.components.OptionsGroup.group(p),ref:w},a.createElement("div",{className:Q,onClick:z},a.createElement(m.zx,{"aria-label":r.wl.components.OptionsGroup.toggle(p),type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":b,className:O.toggleButton,icon:b?"angle-down":"angle-right",onClick:z}),a.createElement("h6",{id:`button-${p}`,className:O.title},C(b))),b&&a.createElement("div",{className:j,id:p,"aria-labelledby":`button-${p}`},y))});f.displayName="OptionsPaneCategory";const c=p=>({box:(0,n.css)`
      border-top: 1px solid ${p.colors.border.weak};
    `,boxNestedExpanded:(0,n.css)`
      margin-bottom: ${p.spacing(2)};
    `,title:(0,n.css)`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${p.typography.fontWeightMedium};
      margin: 0;
    `,header:(0,n.css)`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${p.spacing(.5)};
      color: ${p.colors.text.primary};
      font-weight: ${p.typography.fontWeightMedium};

      &:hover {
        background: ${p.colors.emphasize(p.colors.background.primary,.03)};
      }
    `,toggleButton:(0,n.css)`
      align-self: baseline;
    `,headerExpanded:(0,n.css)`
      color: ${p.colors.text.primary};
    `,headerNested:(0,n.css)`
      padding: ${p.spacing(.5,0,.5,0)};
    `,body:(0,n.css)`
      padding: ${p.spacing(1,2,1,4)};
    `,bodyNested:(0,n.css)`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${p.colors.border.weak};
      }
    `}),E=p=>`${u.jy}.optionGroup[${p}]`},2148:(J,R,e)=>{"use strict";e.d(R,{j:()=>l});var n=e(39953),a=e(8376);class l{constructor(o){this.props=o,this.items=[],this.categories=[]}addItem(o){return o.parent=this,this.items.push(o),this}addCategory(o){return o.props.isNested=!0,o.parent=this,this.categories.push(o),this}getCategory(o){let g=this.categories.find(m=>m.props.id===o);return g||(g=new l({title:o,id:o}),this.addCategory(g),g)}render(o){return this.props.customRender?this.props.customRender():n.createElement(a.u,{key:this.props.title,...this.props},this.items.map(g=>g.render(o)),this.categories.map(g=>g.render(o)))}}},79311:(J,R,e)=>{"use strict";e.d(R,{a:()=>c});var n=e(41407),a=e(39953),l=e(90135),r=e.n(l),o=e(28888),g=e(36495),m=e(96227),d=e(82803),u=e(69865);function i({overrides:h}){const y=(0,d.wW)(f);return a.createElement("div",{className:y.wrapper},h.map((s,v)=>a.createElement(u.u,{content:s.tooltip,key:v.toString(),placement:"top"},a.createElement("div",{"aria-label":s.description,className:y[s.type]}))))}const f=h=>{const y={width:8,height:8,borderRadius:h.shape.radius.circle,marginLeft:h.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,n.css)({display:"flex"}),rule:(0,n.css)({...y,backgroundColor:h.colors.primary.main}),data:(0,n.css)({...y,backgroundColor:h.colors.warning.main})}};class c{constructor(y){this.props=y}getLabel(y){const{title:s,description:v,overrides:C,addon:D}=this.props;if(!y)return this.parent.props.title===s&&!C?.length?null:a.createElement(E,{title:s,description:v,overrides:C,addon:D});const M=[];return this.parent.parent&&M.push(this.highlightWord(this.parent.parent.props.title,y)),this.parent.props.title!==s&&M.push(this.highlightWord(this.parent.props.title,y)),a.createElement(g._,{description:v&&this.highlightWord(v,y),category:M},this.highlightWord(s,y),C&&C.length>0&&a.createElement(i,{overrides:C}))}highlightWord(y,s){return a.createElement(r(),{textToHighlight:y,searchWords:[s],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:y}=this.props;!y||y.length}render(y){const{title:s,description:v,render:C,showIf:D,skipField:M}=this.props,P=`${this.parent.props.id} ${s}`;return D&&!D()?null:M?C():a.createElement(m.g,{label:this.getLabel(y),description:v,key:P,"aria-label":o.wl.components.PanelEditor.OptionsPane.fieldLabel(P)},C())}}function E({title:h,description:y,overrides:s,addon:v}){const C=(0,d.wW)(p);return a.createElement("div",{className:C.container},a.createElement(g._,{description:y},h,s&&s.length>0&&a.createElement(i,{overrides:s})),v)}function p(h){return{container:(0,n.css)`
      display: flex;
      justify-content: space-between;
    `}}},2978:(J,R,e)=>{"use strict";e.d(R,{HZ:()=>E,AL:()=>c});var n=e(86832),a=e(39953),l=e(98458),r=e(84278),o=e(2148),g=e(79311);const m="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",d="An override rule exists for this property";function u(p,h,y){const s=[];if(y){for(const C of y)for(const D of C.fields)if((0,n.get)(D.config,p.path)!=null){s.push({type:"data",description:m,tooltip:m});break}}return h.overrides.some(C=>C.properties.some(D=>D.id===p.id))&&s.push({type:"rule",description:d,tooltip:d}),s}var i=e(82247);function f({data:p,replaceVariables:h,options:y,eventBus:s,instanceState:v}){const C=p?.series??[];return{data:C,replaceVariables:h,options:y,eventBus:s,getSuggestions:M=>(0,r.PW)(C,M),instanceState:v}}function c(p){const{plugin:h,panel:y,onPanelOptionsChanged:s,onFieldConfigsChange:v,data:C,dashboard:D,instanceState:M}=p,P=y.getOptions(),x=y.fieldConfig,S={},I=f({data:C,replaceVariables:y.replaceVariables,options:P,eventBus:D.events,instanceState:M}),T=A=>{const B=(A&&A[0])??`${h.meta.name}`,b=S[B];return b||(S[B]=new o.j({title:B,id:B,sandboxId:h.meta.id}))},O={getValue:A=>(0,n.get)(P,A),onChange:(A,B)=>{const b=(0,i.hs)(P,A,B);s(b)}};E(h.getPanelOptionsSupplier(),O,T,I);for(const A of h.fieldConfigRegistry.list()){if(A.isCustom){if(A.showIf&&!A.showIf(x.defaults.custom,C?.series))continue}else if(A.showIf&&!A.showIf(x.defaults,C?.series))continue;if(A.hideFromDefaults)continue;const B=T(A.category),b=A.editor,W=x.defaults,V=A.isCustom?W.custom?(0,n.get)(W.custom,A.path):void 0:(0,n.get)(W,A.path);A.getItemsCount&&(B.props.itemsCount=A.getItemsCount(V)),B.addItem(new g.a({title:A.name,description:A.description,overrides:u(A,x,C?.series),render:function(){const K=z=>{v((0,i.uJ)(x,A.path,z,A.isCustom))};return a.createElement(b,{value:V,onChange:K,item:A,context:I,id:A.id})}}))}return Object.values(S)}function E(p,h,y,s,v){const C=new l.rt;p(C,s);for(const D of C.getItems()){if(D.showIf&&!D.showIf(s.options,s.data))continue;let M=v;if(M?D.category?.[0]?.length&&(M=M.getCategory(D.category[0])):M=y(D.category),(0,l.j)(D)){const x=D.getNestedValueAccess(h),S=x.getContext?x.getContext(s):{...s,options:h.getValue(D.path)};E(D.getBuilder(),x,y,S,M);continue}const P=D.editor;M.addItem(new g.a({title:D.name,description:D.description,render:function(){return a.createElement(P,{value:h.getValue(D.path),onChange:S=>{h.onChange(D.path,S)},item:D,context:s,id:D.id})}}))}}},91507:(J,R,e)=>{"use strict";e.d(R,{Hl:()=>f,K9:()=>h,OT:()=>s,ZP:()=>C,g_:()=>y,jy:()=>m,my:()=>p,yi:()=>E});var n=e(77960),a=e(10694),l=e(54554),r=e(23062),o=e(6947),g=e(47864);const m="grafana.dashboard.editor.ui",d={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:g.d1.Fill},u=()=>{const D=r.Z.getObject(m,d);let M={...D};return typeof D.topPaneSize=="string"&&(M={...D,topPaneSize:parseFloat(D.topPaneSize)/100}),{getPanel:()=>new o.rY({}),getSourcePanel:()=>new o.rY({}),getData:()=>({state:a.Gu.NotStarted,series:[],timeRange:(0,l.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...d,...M}}},i=(0,n.oM)({name:"panelEditor",initialState:u(),reducers:{updateEditorInitState:(D,M)=>{D.getPanel=()=>M.payload.panel,D.getSourcePanel=()=>M.payload.sourcePanel,D.initDone=!0,D.isOpen=!0,D.shouldDiscardChanges=!1},setEditorPanelData:(D,M)=>{D.getData=()=>M.payload},setDiscardChanges:(D,M)=>{D.shouldDiscardChanges=M.payload},setPanelEditorUIState:(D,M)=>{D.ui={...D.ui,...M.payload},!D.ui.isPanelOptionsVisible&&D.isVizPickerOpen&&(D.isVizPickerOpen=!1)},toggleVizPicker:(D,M)=>{D.isVizPickerOpen=M.payload,D.isVizPickerOpen&&(D.ui.isPanelOptionsVisible=!0)},toggleTableView(D){D.tableViewEnabled=!D.tableViewEnabled},closeEditor:D=>{D.getPanel=()=>new o.rY({}),D.getSourcePanel=()=>new o.rY({}),D.isOpen=!1,D.initDone=!1,D.isVizPickerOpen=!1,D.tableViewEnabled=!1}}}),{updateEditorInitState:f,setEditorPanelData:c,setDiscardChanges:E,closeEditor:p,setPanelEditorUIState:h,toggleVizPicker:y,toggleTableView:s}=i.actions,C={panelEditor:i.reducer}},47864:(J,R,e)=>{"use strict";e.d(R,{Ip:()=>n,Ok:()=>g,d1:()=>a,d7:()=>r});var n=(m=>(m.Query="query",m.Transform="transform",m.Visualize="visualize",m.Alert="alert",m))(n||{}),a=(m=>(m[m.Fill=0]="Fill",m[m.Fit=1]="Fit",m[m.Exact=2]="Exact",m))(a||{}),l=(m=>(m[m.Off=0]="Off",m[m.Table=1]="Table",m))(l||{});const r=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],o=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var g=(m=>(m[m.Visualizations=0]="Visualizations",m[m.LibraryPanels=1]="LibraryPanels",m[m.Suggestions=2]="Suggestions",m[m.Widgets=3]="Widgets",m))(g||{})},82247:(J,R,e)=>{"use strict";e.d(R,{hs:()=>d,jF:()=>o,sY:()=>g,uJ:()=>m});var n=e(86832),a=e.n(n),l=e(74602),r=e(47864);function o(u,i,f,c){if(u===r.d1.Fill)return{width:i,height:f};const E=8*6,p=60,y=(window.innerWidth-p-l.hD*4)/l.cz*c.gridPos.w,s=l.K3*c.gridPos.h+E,v=Math.min(i/y,f/s);return y<=i&&s<=f?{width:y,height:s}:{width:y*v,height:s*v}}function g(u){return u?.meta.skipDataQuery===!1}const m=(u,i,f,c)=>{let E={...u.defaults};const p=f==null||f==="";return c?E.custom?p?E.custom=(0,n.omit)(E.custom,i):E.custom=d(E.custom,i,f):p||(E.custom=d(E.custom,i,f)):p?E=(0,n.omit)(E,i):E=d(E,i,f),{...u,defaults:E}};function d(u,i,f){const c=Array.isArray(i)?i:i.split("."),E=c.shift();if(E.endsWith("]")){const h=E.lastIndexOf("["),y=+E.substring(h+1,E.length-1),s=E.substring(0,h);let v=u[s];const C=Array.isArray(v)?[...v]:[];return c.length&&(v=C[y],(v==null||typeof v!="object")&&(v={}),f=d(v,c,f)),C[y]=f,{...u,[s]:C}}if(!c.length)return{...u,[E]:f};let p=u[E];return(p==null||typeof p!="object")&&(p={}),{...u,[E]:d(p,c,f)}}},61527:(J,R,e)=>{"use strict";e.d(R,{Z:()=>u});var n=e(41407),a=e(39953),l=e(20653),r=e(82803),o=e(33155),g=e(20367);function m({dashboard:i}){const f=(0,r.wW)(d),{loading:c,value:E,error:p}=(0,l.Z)(async()=>{const y=i.getSaveModelCloneOld();return g.ae.validateDashboard(y).catch(v=>{if(v.status>=500)throw v;return v.data})},[i]);let h;if(c)h=a.createElement(o.b,{severity:"info",title:"Checking dashboard validity"});else if(E)E.isValid||(h=a.createElement(o.b,{severity:"warning",title:"Dashboard failed schema validation"},a.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),a.createElement("div",{className:f.error},E.message)));else{const y=p?.message??"Unknown error";h=a.createElement(o.b,{severity:"info",title:"Error checking dashboard validity"},a.createElement("p",{className:f.error},y))}return h?a.createElement("div",{className:f.root},h):null}const d=i=>({root:(0,n.css)({marginTop:i.spacing(1)}),error:(0,n.css)({fontFamily:i.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),u=m},75406:(J,R,e)=>{"use strict";e.d(R,{i:()=>m,t:()=>d});var n=e(39953),a=e(28888),l=e(72639),r=e(39106),o=e(4919),g=e(99874);const m=({dashboard:u,onSaveSuccess:i,size:f})=>n.createElement(r.JY,null,({showModal:c,hideModal:E})=>n.createElement(o.zx,{size:f,onClick:()=>{c(g.d,{dashboard:u,onSaveSuccess:i,onDismiss:E})},"aria-label":a.wl.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),d=({dashboard:u,onSaveSuccess:i,variant:f,size:c})=>n.createElement(r.JY,null,({showModal:E,hideModal:p})=>n.createElement(o.zx,{size:c,onClick:()=>{(0,l.ff)("grafana_dashboard_save_as_clicked"),E(g.d,{dashboard:u,onSaveSuccess:i,onDismiss:p,isCopy:!0})},variant:f,"aria-label":a.wl.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},94112:(J,R,e)=>{"use strict";e.d(R,{_:()=>d});var n=e(41407),a=e(39953),l=e(20653),r=e(82803),o=e(28409),g=e(19770),m=e(78854);const d=({diff:i,oldValue:f,newValue:c})=>{const E=(0,r.wW)(u),p=(0,l.Z)(async()=>{const y=JSON.stringify(f??{},null,2),s=JSON.stringify(c??{},null,2);let v;const C=[];let D=0;if(i)for(const[M,P]of Object.entries(i)){const x=a.createElement(g.B,{diffs:P,key:M,title:M});M==="schemaVersion"?v=x:C.push(x),D+=P.length}return{schemaChange:v,diffs:C,count:D,showDiffs:D<15,jsonView:a.createElement(m.Z,{oldValue:y,newValue:s})}},[i,f,c]),{value:h}=p;return!h||!f?a.createElement(o.$,null):h.count<1?a.createElement("div",null,"No changes in this dashboard"):a.createElement("div",null,h.schemaChange&&a.createElement("div",{className:E.spacer},h.schemaChange),h.showDiffs&&a.createElement("div",{className:E.spacer},h.diffs),a.createElement("h4",null,"JSON Model"),h.jsonView)},u=i=>({spacer:(0,n.css)`
    margin-bottom: ${i.v1.spacing.xl};
  `})},99874:(J,R,e)=>{"use strict";e.d(R,{d:()=>je});var n=e(39953),a=e(4148),l=e(32688),r=e(87722),o=e(22784),g=e(77804),m=e(14768),d=e(61527),u=e(94112),i=e(41407),f=e(32840),c=e(82803),E=e(73075),p=e(4919),h=e(75406),y=e(65489),s=e(57837),v=e(72639),C=e(13601),D=e(28833),M=e(90634),P=e(21308),x=e(71707),S=e(46347),I=e(23334),T=e(44622),O=e(57721),A=e(73431),B=e(57428);const b=async(Qe,We,ke,ot)=>{if((0,I.v)()){const lt=await ot({dashboard:Qe,folderUid:We.folderUid??ke.meta.folderUid??Qe.meta.folderUid,message:We.message,overwrite:We.overwrite});if("error"in lt)throw lt.error;return lt.data}else{let lt=We.folderUid;lt===void 0&&(lt=ke.meta.folderUid??Qe.folderUid);const Ct=await(0,T.uC)({...We,folderUid:lt,dashboard:Qe});return await P.Vt.fetchUserPermissions(),Ct}},W=(Qe=!1)=>{const We=(0,O.useDispatch)(),ke=(0,M.iG)(),[ot]=(0,S.yF)(),[lt,Ct]=(0,y.Z)(async(wt,Lt,Ye)=>{try{const Be=await b(wt,Lt,Ye,ot);Ye.version=Be.version,wt.version=Be.version,Ye.clearUnsavedChanges(wt,Lt),D.Z.publish(new A.Jd),ke.success("Dashboard saved"),(0,B.AX)(Be.uid),Qe?(0,v.ff)("grafana_dashboard_copied",{name:Ye.title,url:Be.url}):(0,v.ff)(`grafana_dashboard_${Ye.id?"saved":"created"}`,{name:Ye.title,url:Be.url});const Le=C.E1.getLocation().pathname,le=s.u.stripBaseFromUrl(Be.url);return le!==Le&&setTimeout(()=>C.E1.replace(le)),Ye.meta.isStarred&&We((0,x.gd)({id:Ye.uid,title:Ye.title,url:le})),Be}catch(Be){throw Be instanceof Error&&ke.error(Be.message??"Error saving dashboard"),Be}},[We,ke]);return{state:lt,onDashboardSave:Ct}},V=({dashboard:Qe,dashboardSaveModel:We,error:ke,onDismiss:ot})=>{const{onDashboardSave:lt}=W();return(0,n.useEffect)(()=>{ke.data&&K(ke.data.status)&&(ke.isHandled=!0)},[ke]),n.createElement(n.Fragment,null,ke.data&&ke.data.status==="version-mismatch"&&n.createElement(f.s,{isOpen:!0,title:"Conflict",body:n.createElement("div",null,"Someone else has updated this dashboard ",n.createElement("br",null)," ",n.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await lt(We,{overwrite:!0},Qe),ot()},onDismiss:ot}),ke.data&&ke.data.status==="name-exists"&&n.createElement(f.s,{isOpen:!0,title:"Conflict",body:n.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",n.createElement("br",null),n.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await lt(We,{overwrite:!0},Qe),ot()},onDismiss:ot}),ke.data&&ke.data.status==="plugin-dashboard"&&n.createElement(w,{dashboard:Qe,onDismiss:ot}))},w=({onDismiss:Qe,dashboard:We})=>{const{onDashboardSave:ke}=W(),ot=(0,c.wW)(z);return n.createElement(E.u,{className:ot.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:Qe},n.createElement("div",{className:ot.modalText},"Your changes will be lost when you update the plugin.",n.createElement("br",null),n.createElement("small",null,"Use ",n.createElement("strong",null,"Save As")," to create custom version.")),n.createElement(E.u.ButtonRow,null,n.createElement(p.zx,{variant:"secondary",onClick:Qe,fill:"outline"},"Cancel"),n.createElement(h.t,{dashboard:We,onSaveSuccess:Qe}),n.createElement(p.zx,{variant:"destructive",onClick:async()=>{await ke(We.getSaveModelClone(),{overwrite:!0},We),Qe()}},"Overwrite")))},K=Qe=>{switch(Qe){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},z=Qe=>({modal:(0,i.css)`
    width: 500px;
  `,modalText:(0,i.css)`
    font-size: ${Qe.typography.h4.fontSize};
    color: ${Qe.colors.text.primary};
    margin-bottom: ${Qe.spacing(4)}
    padding-top: ${Qe.spacing(2)};
  `,modalButtonRow:(0,i.css)`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${Qe.spacing(2)};
    }
  `});var G=e(85830),Q=e(9006),j=e(96227),F=e(12223),k=e(36495),_=e(38637),Y=e(68421),Z=e(26286),ae=e(15296),ce=e(17712),q=e(91992),De=e(98081);const oe=Qe=>{const We=Qe.getSaveModelClone();return We.id=null,We.uid="",We.title+=" Copy",We.editable=!0,Qe.id>0&&We.panels&&We.panels.forEach(ke=>{ke.type==="graph"&&ke.alert&&delete ke.thresholds,delete ke.alert}),We},te=({dashboard:Qe,isLoading:We,isNew:ke,onSubmit:ot,onCancel:lt,onSuccess:Ct})=>{const wt={title:ke?Qe.title:`${Qe.title} Copy`,description:Qe.description,$folder:{uid:Qe.meta.folderUid,title:Qe.meta.folderTitle},copyTags:!1},Lt=Ye=>async Be=>{if(Be&&Be===Ye().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await ce.t.validateNewDashboardName(Ye().$folder.uid??"general",Be),!0}catch(Le){return Le instanceof Error?Le.message:"Dashboard name is invalid"}};return n.createElement(G.l,{defaultValues:wt,onSubmit:async Ye=>{if(!ot)return;const Be=oe(Qe);Be.title=Ye.title,Be.description=Ye.description,!ke&&!Ye.copyTags&&(Be.tags=[]),(await ot(Be,{folderUid:Ye.$folder.uid},Qe)).status==="success"&&Ct()}},({register:Ye,control:Be,errors:Le,getValues:le})=>n.createElement(n.Fragment,null,n.createElement(Q.g,{render:({field:{ref:de,...X}})=>n.createElement(j.g,{label:n.createElement(F.Lh,{justify:"space-between"},n.createElement(k._,{htmlFor:"title"},"Title"),l.config.featureToggles.dashgpt&&ke&&n.createElement(De.n,{onGenerate:se=>X.onChange(se),dashboard:Qe})),invalid:!!Le.title,error:Le.title?.message},n.createElement(_.I,{...X,onChange:se=>X.onChange(se.target.value),"aria-label":"Save dashboard title field",autoFocus:!0})),control:Be,name:"title",rules:{validate:Lt(le)}}),n.createElement(Q.g,{render:({field:{ref:de,...X}})=>n.createElement(j.g,{label:n.createElement(F.Lh,{justify:"space-between"},n.createElement(k._,{htmlFor:"description"},"Description"),l.config.featureToggles.dashgpt&&ke&&n.createElement(q._,{onGenerate:se=>X.onChange(se),dashboard:Qe})),invalid:!!Le.description,error:Le.description?.message},n.createElement(Y.K,{...X,onChange:se=>X.onChange(se.target.value),"aria-label":"Save dashboard description field",autoFocus:!0})),control:Be,name:"description"}),n.createElement(j.g,{label:"Folder"},n.createElement(Q.g,{render:({field:{ref:de,...X}})=>n.createElement(ae.E,{...X,onChange:(se,re)=>X.onChange({uid:se,title:re}),value:X.value?.uid,initialTitle:Qe.meta.folderTitle,dashboardId:Qe.id,enableCreateNew:!0}),control:Be,name:"$folder"})),!ke&&n.createElement(j.g,{label:"Copy tags"},n.createElement(Z.r,{...Ye("copyTags")})),n.createElement(F.Lh,null,n.createElement(p.zx,{type:"button",variant:"secondary",onClick:lt,fill:"outline"},"Cancel"),n.createElement(p.zx,{disabled:We,type:"submit","aria-label":"Save dashboard button"},We?"Saving...":"Save"))))};var fe=e(28888),Te=e(27366),ge=e(13026),he=e(11769),me=e(4041),ye=e(4811);const ue=["You are an expert in Grafana Dashboards","Your goal is to write a description of the changes for a dashboard","When referring to panel changes, use the panel title","When using panel title, wrap it with double quotes","When the panel changes the position, just mention the panel has changed position and not the specific change","When an entire panel is added or removed, use the panel title and only say it was added or removed and disregard the rest of the changes for that panel","Group changes when all panels are affected","Do not mention line number","Refer to templating elements as variables","Ignore and never mention changes about plugin version","Try to make the response as short as possible"].join(`.
`),Oe=({dashboard:Qe,onGenerate:We,disabled:ke})=>{const ot=(0,n.useCallback)(()=>Ue(Qe),[Qe]);return n.createElement(he.v,{messages:ot,onGenerate:We,loadingText:"Generating changes summary",temperature:0,eventTrackingSrc:me.dG.dashboardChanges,toggleTipTitle:"Improve your dashboard changes summary",disabled:ke})};function Ue(Qe){const{userChanges:We,migrationChanges:ke}=(0,ye.xm)(Qe);return[{content:ue,role:ye.uU.system},{content:`This is the list of panel names, when referring to a panel, please use the title: ${JSON.stringify(Qe.panels.map(ot=>ot.title))}`,role:ye.uU.system},{content:`Summarize the following user changes diff under a "User changes" heading with no special formatting as a bulleted list:
${We}`,role:ye.uU.system},{content:'Be sure to only include substantial user changes, such as adding or removing entire panels, changing panel titles or descriptions, etc. Ignore other changes and do not include them in the summary. Do not include "User Changes" section if there are no substantial user changes to report.',role:ye.uU.system},{content:'Threshold step changes of value being removed and replaced with color "green" should always be ignored',role:ye.uU.system},{content:`In addition to summarizing the user diff changes, add the following sentence at the end of the response "Some autogenerated changes are included to update the dashboard to the latest valid schema version." Only add this sentence if the following migrations diff has substantial changes. Ignore any threshold step changes, templating list changes, and ignore the entire migration diff if it is less than 10 lines long. 
 This is the migrations diff:
${ke}`,role:ye.uU.system}]}const at=({dashboard:Qe,isLoading:We,saveModel:ke,options:ot,onSubmit:lt,onCancel:Ct,onSuccess:wt,onOptionsChange:Lt})=>{const Ye=(0,n.useMemo)(()=>Qe.hasTimeChanged(),[Qe]),Be=(0,n.useMemo)(()=>Qe.hasVariablesChanged(),[Qe]),[Le,le]=(0,n.useState)(!1),[de,X]=(0,n.useState)(ot.message),se=(0,c.wW)(Ne);return n.createElement(G.l,{onSubmit:async re=>{if(!lt)return;le(!0),ot={...ot,message:de},(await lt(ke.clone,ot,Qe)).status==="success"?wt():le(!1)}},({register:re,errors:pe})=>n.createElement(Te.K,{gap:2,direction:"column",alignItems:"flex-start"},Ye&&n.createElement(ge.X,{checked:!!ot.saveTimerange,onChange:()=>Lt({...ot,saveTimerange:!ot.saveTimerange}),label:"Save current time range as dashboard default","aria-label":fe.wl.pages.SaveDashboardModal.saveTimerange}),Be&&n.createElement(ge.X,{checked:!!ot.saveVariables,onChange:()=>Lt({...ot,saveVariables:!ot.saveVariables}),label:"Save current variable values as dashboard default","aria-label":fe.wl.pages.SaveDashboardModal.saveVariables}),n.createElement("div",{className:se.message},l.config.featureToggles.dashgpt&&n.createElement(Oe,{dashboard:Qe,onGenerate:be=>{Lt({...ot,message:be}),X(be)},disabled:!ke.hasChanges}),n.createElement(Y.K,{"aria-label":"message",value:de,onChange:be=>{Lt({...ot,message:be.currentTarget.value}),X(be.currentTarget.value)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5})),n.createElement(Te.K,{alignItems:"center"},n.createElement(p.zx,{variant:"secondary",onClick:Ct,fill:"outline"},"Cancel"),n.createElement(p.zx,{type:"submit",disabled:!ke.hasChanges||We,icon:Le?"fa fa-spinner":void 0,"aria-label":fe.wl.pages.SaveDashboardModal.save},We?"Saving...":"Save"),!ke.hasChanges&&n.createElement("div",null,"No changes to save"))))};function Ne(Qe){return{message:(0,i.css)`
      display: flex;
      align-items: end;
      flex-direction: column;
      width: 100%;
    `}}var _e=e(22160),Ke=e(36210);const et=({dashboard:Qe,onCancel:We})=>{const[ke,ot]=(0,n.useState)(()=>{const Ct=Qe.getSaveModelClone();return delete Ct.id,JSON.stringify(Ct,null,2)}),lt=(0,n.useCallback)(()=>{const Ct=new Blob([ke],{type:"application/json;charset=utf-8"});(0,_e.saveAs)(Ct,Qe.title+"-"+new Date().getTime()+".json")},[Qe.title,ke]);return n.createElement(n.Fragment,null,n.createElement(Te.K,{direction:"column",gap:2},n.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",n.createElement("br",null),n.createElement("i",null,"See"," ",n.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),n.createElement("br",null)," ",n.createElement("br",null),n.createElement("strong",null,"File path: ")," ",Qe.meta.provisionedExternalId),n.createElement(Y.K,{spellCheck:!1,value:ke,onChange:Ct=>{ot(Ct.currentTarget.value)},className:ze.json}),n.createElement(F.Lh,null,n.createElement(p.zx,{variant:"secondary",onClick:We,fill:"outline"},"Cancel"),n.createElement(Ke.m,{icon:"copy",getText:()=>ke},"Copy JSON to clipboard"),n.createElement(p.zx,{type:"submit",onClick:lt},"Save JSON to file"))))},ze={json:(0,i.css)`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `},je=({dashboard:Qe,onDismiss:We,onSaveSuccess:ke,isCopy:ot})=>{const[lt,Ct]=(0,n.useState)({}),wt=Qe.getOriginalDashboard(),Lt=Qe.meta.provisioned,Ye=Qe.version===0,Be=(0,n.useMemo)(()=>{const be=Qe.getSaveModelClone({saveTimerange:!!lt.saveTimerange,saveVariables:!!lt.saveVariables});if(!wt)return{clone:be,diff:{},diffCount:0,hasChanges:!1};const xe=(0,m.Q$)(wt,be);let Pe=0;for(const we of Object.values(xe))Pe+=we.length;return{clone:be,diff:xe,diffCount:Pe,hasChanges:Pe>0&&!Ye}},[Qe,wt,lt,Ye]),[Le,le]=(0,n.useState)(!1),{state:de,onDashboardSave:X}=W(ot),se=ke?()=>{We(),ke()}:We,re=()=>Le?n.createElement(u._,{diff:Be.diff,oldValue:wt,newValue:Be.clone}):Ye||ot?n.createElement(te,{dashboard:Qe,isLoading:de.loading,onCancel:We,onSuccess:se,onSubmit:X,isNew:Ye}):Lt?n.createElement(et,{dashboard:Qe,onCancel:We,onSuccess:se}):n.createElement(at,{dashboard:Qe,isLoading:de.loading,saveModel:Be,onCancel:We,onSuccess:se,onSubmit:X,options:lt,onOptionsChange:Ct});if(de.error&&(0,a.kW)(de.error)&&!de.error.isHandled&&K(de.error.data.status))return n.createElement(V,{error:de.error,dashboard:Qe,dashboardSaveModel:Be.clone,onDismiss:We});let pe="Save dashboard";return ot?pe="Save dashboard copy":Lt&&(pe="Provisioned dashboard"),n.createElement(r.d,{title:pe,onClose:We,subtitle:Qe.title,tabs:n.createElement(o.J,null,n.createElement(g.O,{label:"Details",active:!Le,onChangeTab:()=>le(!1)}),Be.hasChanges&&n.createElement(g.O,{label:"Changes",active:Le,onChangeTab:()=>le(!0),counter:Be.diffCount}))},re(),l.config.featureToggles.showDashboardValidationWarnings&&n.createElement(d.Z,{dashboard:Qe}))}},94939:(J,R,e)=>{"use strict";e.d(R,{Jd:()=>g,_H:()=>m,Ez:()=>f,_M:()=>i,ek:()=>u,Gt:()=>d,C2:()=>c});var n=e(92743),a=e(50820),l=e(52436),r=e(20230);const o=new Set(["__expr__","apache-iotdb-datasource","aquaqanalytics-kdbbackend-datasource","axiomhq-axiom-datasource","cnos-cnosdb-datasource","datasource","dlopes7-appdynamics-datasource","dvelop-odata-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-db2-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-falconlogscale-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-looker-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdata-flightsql-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","marcusolsson-csv-datasource","marcusolsson-ynab-datasource","mssql","mysql","nagasudhirpulla-api-datasource","needleinajaystack-haystack-datasource","opentsdb","postgres","prometheus","quickwit-quickwit-datasource","redis-datasource","sentinelone-dataset-datasource","sneller-sneller-datasource","spiceai-spicexyz-datasource","stackdriver","tdengine-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","ydbtech-ydb-datasource","yesoreyeram-infinity-datasource"]);var g=(E=>(E.PUBLIC="public",E.EMAIL="email",E))(g||{});const m=E=>E.length>0,d=E=>E?.uid!==""&&E?.uid!==void 0,u=async E=>{let p=new Set;for(const h of E)for(const y of h.targets){const s=y?.datasource?.type;s&&(o.has(s)&&await(0,l.ak)().get(y.datasource)instanceof n.CK||p.add(s))}return Array.from(p).sort()},i=E=>`${(0,a.iE)().appUrl}public-dashboards/${E}`,f=E=>`/d/${E}?shareView=${r.Ax.publicDashboard}`,c=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i},12781:(J,R,e)=>{"use strict";e.d(R,{J:()=>o});var n=e(39953),a=e(96227),l=e(20454),r=e(62679);const o=({selectedTheme:g="current",onChange:m})=>{const d=[{label:(0,r.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,r.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,r.t)("share-modal.theme-picker.light","Light"),value:"light"}];return n.createElement(a.g,{label:(0,r.t)("share-modal.theme-picker.field-name","Theme")},n.createElement(l.S,{options:d,value:g,onChange:m}))}},87295:(J,R,e)=>{"use strict";e.d(R,{PJ:()=>r,s_:()=>l});var n=e(72639);const a={sharingCategoryClicked:"dashboards_sharing_category_clicked",sharingActionClicked:"dashboards_sharing_actions_clicked"};function l(o){(0,n.ff)(a.sharingCategoryClicked,{item:o})}function r(o,g){(0,n.ff)(a.sharingActionClicked,{item:o,sharing_category:g})}},98928:(J,R,e)=>{"use strict";e.d(R,{ShareModal:()=>ln});var n=e(39953),a=e(35823),l=e(73075),r=e(90201),o=e(82803),g=e(50820),m=e(21308),d=e(62679),u=e(41407),i=e(28409),f=e(27587),c=e(94939),E=e(30862),p=e(14058),h=e(28888),y=e(32688),s=e(13475),v=e(39106),C=e(96227),D=e(38637),M=e(36210),P=e(26286),x=e(36495),S=e(12223),I=e(20111),T=e(97125),O=e(57721),A=e(41987),B=e(29721);const b=()=>{const{width:Pt}=(0,B.Z)();return Pt>1024};var W=e(87295),V=e(20230),w=e(33155);const K=h.wl.pages.ShareDashboardModal.PublicDashboard,z=({mode:Pt})=>n.createElement(w.b,{severity:"info",title:`You don\u2019t have permission to ${Pt} a public dashboard`,"data-testid":K.NoUpsertPermissionsWarningAlert,bottomSpacing:0},"Contact your admin to get permission to ",Pt," create public dashboards"),G=()=>n.createElement(w.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning",bottomSpacing:0});var Q=e(77814),j=e.n(Q);const F=h.wl.pages.ShareDashboardModal.PublicDashboard,k=({unsupportedDataSources:Pt})=>{const Gt=(0,o.wW)(_);return n.createElement(w.b,{severity:"warning",title:"Unsupported data sources","data-testid":F.UnsupportedDataSourcesWarningAlert,bottomSpacing:0},n.createElement("p",{className:Gt.unsupportedDataSourceDescription},"There are data sources in this dashboard that are unsupported for public dashboards. Panels that use these data sources may not function properly: ",Pt,"."),n.createElement("a",{href:"https://grafana.com/docs/grafana/next/dashboards/dashboard-public/",className:j()("text-link",Gt.unsupportedDataSourceDescription)},"Read more about supported data sources"))},_=Pt=>({unsupportedDataSourceDescription:(0,u.css)`
    color: ${Pt.colors.text.secondary};
    margin-bottom: ${Pt.spacing(1)};
  `}),Y=h.wl.pages.ShareDashboardModal.PublicDashboard,Z=()=>n.createElement(w.b,{severity:"warning",title:"Template variables are not supported","data-testid":Y.TemplateVariablesWarningAlert,bottomSpacing:0},"This public dashboard may not work since it uses template variables"),ae=Pt=>{const[Gt,Kt]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(async()=>await(0,c.ek)(Pt.panels))().then(dn=>{Kt(dn)})},[Pt.panels]),{unsupportedDataSources:Gt}};var ce=e(2827),q=e(88252);const De=h.wl.pages.ShareDashboardModal.PublicDashboard,oe=({disabled:Pt,onChange:Gt,register:Kt,timeRange:kt})=>n.createElement(n.Fragment,null,n.createElement(ce.C,{disabled:Pt},n.createElement(S.wc,{spacing:"md"},n.createElement(S.Ar,{orientation:1,spacing:"xs",justify:"space-between"},n.createElement(x._,{description:"The public dashboard uses the default time range settings of the dashboard"},"Default time range"),n.createElement(q.K,{value:kt,disabled:!0,onChange:()=>{}})),n.createElement(S.Ar,{orientation:0,spacing:"sm"},n.createElement(P.r,{...Kt("isTimeSelectionEnabled"),"data-testid":De.EnableTimeRangeSwitch,onChange:dn=>{(0,W.PJ)(dn.currentTarget.checked?"enable_time":"disable_time",V.Ax.publicDashboard),Gt("isTimeSelectionEnabled",dn.currentTarget.checked)}}),n.createElement(x._,{description:"Allow viewers to change time range"},"Time range picker enabled")),n.createElement(S.Ar,{orientation:0,spacing:"sm"},n.createElement(P.r,{...Kt("isAnnotationsEnabled"),onChange:dn=>{(0,W.PJ)(dn.currentTarget.checked?"enable_annotations":"disable_annotations",V.Ax.publicDashboard),Gt("isAnnotationsEnabled",dn.currentTarget.checked)},"data-testid":De.EnableAnnotationsSwitch}),n.createElement(x._,{description:"Show annotations on public dashboard"},"Show annotations")))));var te=e(48824),fe=e(4919),Te=e(9006),ge=e(20454);const he=[{label:"Anyone with a link",value:c.Jd.PUBLIC},{label:"Only specified people",value:c.Jd.EMAIL}],me=h.wl.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,ye=({recipients:Pt,dashboardUid:Gt,publicDashboardUid:Kt})=>{const kt=(0,o.wW)(Oe),[dn,{isLoading:nn}]=(0,f.r5)(),[mn,{isLoading:Mn}]=(0,f.RS)(),Gn=nn||Mn,$n=Yn=>{(0,W.PJ)("delete_email",V.Ax.publicDashboard),dn({recipientUid:Yn,dashboardUid:Gt,uid:Kt})},Fn=Yn=>{(0,W.PJ)("reshare_email",V.Ax.publicDashboard),mn({recipientUid:Yn,uid:Kt})};return n.createElement("table",{className:kt.table,"data-testid":me.EmailSharingList},n.createElement("tbody",null,Pt.map((Yn,ua)=>n.createElement("tr",{key:Yn.uid},n.createElement("td",null,Yn.recipient),n.createElement("td",null,n.createElement(te.h,{className:kt.tableButtonsContainer},n.createElement(fe.zx,{type:"button",variant:"destructive",fill:"text","aria-label":"Revoke",title:"Revoke",size:"sm",disabled:Gn,onClick:()=>$n(Yn.uid),"data-testid":`${me.DeleteEmail}-${ua}`},"Revoke"),n.createElement(fe.zx,{type:"button",variant:"primary",fill:"text","aria-label":"Resend",title:"Resend",size:"sm",disabled:Gn,onClick:()=>Fn(Yn.uid),"data-testid":`${me.ReshareLink}-${ua}`},"Resend")))))))},ue=()=>{const{width:Pt}=(0,B.Z)(),Gt=(0,o.wW)(Oe),kt=(0,O.useSelector)(Sa=>Sa.dashboard).getModel(),{data:dn}=(0,f.Ym)(kt.uid),[nn]=(0,f.Mi)(),[mn,{isLoading:Mn}]=(0,f.FJ)(),Gn=T.contextSrv.hasPermission(O.AccessControlAction.DashboardsPublicWrite),{register:$n,setValue:Fn,control:Yn,watch:ua,handleSubmit:wa,formState:{errors:ga},reset:ca}=(0,p.cI)({defaultValues:{shareType:dn?.share||c.Jd.PUBLIC,email:""},mode:"onSubmit"}),Ra=Sa=>{const es={dashboard:kt,payload:{...dn,share:Sa}};nn(es)},va=async Sa=>{(0,W.PJ)("invite_email",V.Ax.publicDashboard),await mn({recipient:Sa.email,uid:dn.uid,dashboardUid:kt.uid}).unwrap(),ca({email:"",shareType:c.Jd.EMAIL})};return n.createElement("form",{onSubmit:wa(va)},n.createElement(ce.C,{disabled:!Gn,"data-testid":me.Container,className:Gt.container},n.createElement(C.g,{label:"Can view dashboard",className:Gt.field},n.createElement(Te.g,{name:"shareType",control:Yn,render:({field:Sa})=>{const{ref:es,...yt}=Sa;return n.createElement(ge.S,{...yt,size:Pt<480?"sm":"md",options:he,onChange:bt=>{(0,W.PJ)(`share_type_${bt===c.Jd.EMAIL?"email":"public"}`,V.Ax.publicDashboard),Fn("shareType",bt),Ra(bt)}})}})),ua("shareType")===c.Jd.EMAIL&&n.createElement(n.Fragment,null,n.createElement(C.g,{label:"Invite",description:"Invite people by email",error:ga.email?.message,invalid:!!ga.email?.message||void 0,className:Gt.field},n.createElement("div",{className:Gt.emailContainer},n.createElement(D.I,{className:Gt.emailInput,placeholder:"email",autoCapitalize:"none",...$n("email",{required:"Email is required",pattern:{value:c.C2,message:"Invalid email"}}),"data-testid":me.EmailSharingInput}),n.createElement(fe.zx,{type:"submit",variant:"primary",disabled:Mn,"data-testid":me.EmailSharingInviteButton},"Invite ",Mn&&n.createElement(i.$,null)))),!!dn?.recipients?.length&&n.createElement(ye,{recipients:dn.recipients,dashboardUid:kt.uid,publicDashboardUid:dn.uid}))))},Oe=Pt=>({container:(0,u.css)`
    label: emailConfigContainer;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${Pt.spacing(3)};
  `,field:(0,u.css)`
    label: field-noMargin;
    margin-bottom: 0;
  `,emailContainer:(0,u.css)`
    label: emailContainer;
    display: flex;
    gap: ${Pt.spacing(1)};
  `,emailInput:(0,u.css)`
    label: emailInput;
    flex-grow: 1;
  `,table:(0,u.css)`
    label: table;
    display: flex;
    max-height: 220px;
    overflow-y: scroll;

    & tbody {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    & tr {
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${Pt.spacing(.5,1)};

      :nth-child(odd) {
        background: ${Pt.colors.background.secondary};
      }
    }
  `,tableButtonsContainer:(0,u.css)`
    display: flex;
    justify-content: end;
  `});var Ue=e(82360),at=e(68497);function Ne({headerElement:Pt,isContentVisible:Gt=!1,onRowToggle:Kt,title:kt,...dn}){const nn=(0,o.wW)(_e),mn=Pt&&Ue.renderOrCallToRender(Pt,{className:nn.summaryWrapper});return n.createElement("div",{className:nn.wrapper},n.createElement("div",{className:nn.header},n.createElement(at.h,{name:Gt?"angle-down":"angle-right",tooltip:Gt?"Collapse settings":"Expand settings",className:nn.collapseIcon,onClick:Kt,"aria-expanded":Gt,...dn}),kt&&n.createElement("div",{className:nn.titleWrapper,onClick:Kt},n.createElement("span",{className:nn.title},kt)),mn))}Ne.displayName="SettingsBarHeader";function _e(Pt){return{wrapper:(0,u.css)({label:"header",padding:Pt.spacing(.5,.5),borderRadius:Pt.shape.radius.default,background:Pt.colors.background.secondary,minHeight:Pt.spacing(4),"&:focus":{outline:"none"}}),header:(0,u.css)({label:"column",display:"flex",alignItems:"center",whiteSpace:"nowrap"}),collapseIcon:(0,u.css)({marginLeft:Pt.spacing(.5),color:Pt.colors.text.disabled}),titleWrapper:(0,u.css)({display:"flex",alignItems:"center",cursor:"pointer",overflow:"hidden",marginRight:`${Pt.spacing(.5)}`,[Pt.breakpoints.down("sm")]:{flex:"1 1"}}),title:(0,u.css)({fontWeight:Pt.typography.fontWeightBold,marginLeft:Pt.spacing(.5),overflow:"hidden",textOverflow:"ellipsis"}),summaryWrapper:(0,u.css)({display:"flex",flexWrap:"wrap",[Pt.breakpoints.down("sm")]:{flex:"2 2"}})}}function Ke({children:Pt,title:Gt,headerElement:Kt,...kt}){const dn=(0,o.wW)(et),[nn,mn]=(0,n.useState)(!1);function Mn(){mn(Gn=>!Gn)}return n.createElement(n.Fragment,null,n.createElement(Ne,{onRowToggle:Mn,isContentVisible:nn,title:Gt,headerElement:Kt,...kt}),nn&&n.createElement("div",{className:dn.content},Pt))}Ke.displayName="SettingsBar";const et=Pt=>({content:(0,u.css)({marginTop:Pt.spacing(1),marginLeft:Pt.spacing(4)})});var ze=e(48408);function je({className:Pt,isDataLoading:Gt=!1,timeRange:Kt,timeSelectionEnabled:kt,annotationsEnabled:dn}){const nn=(0,o.wW)(Qe);return Gt?n.createElement("div",{className:(0,u.cx)(nn.summaryWrapper,Pt)},n.createElement(i.$,{className:nn.summary,inline:!0,size:14})):n.createElement("div",{className:(0,u.cx)(nn.summaryWrapper,Pt)},n.createElement("span",{className:nn.summary},"Time range = ",n.createElement(ze.q,{className:nn.timeRange,value:Kt})),n.createElement("span",{className:nn.summary},`Time range picker = ${kt?"enabled":"disabled"}`),n.createElement("span",{className:nn.summary},`Annotations = ${dn?"show":"hide"}`))}je.displayName="SettingsSummary";const Qe=Pt=>({summaryWrapper:(0,u.css)({display:"flex"}),summary:(0,u.css)`
      label: collapsedText;
      margin-left: ${Pt.spacing.gridSize*2}px;
      font-size: ${Pt.typography.bodySmall.fontSize};
      color: ${Pt.colors.text.secondary};
    `,timeRange:(0,u.css)({display:"inline-block"})}),We=h.wl.pages.ShareDashboardModal.PublicDashboard,ke=()=>{const Pt=(0,o.wW)(ot),Gt=b(),{showModal:Kt,hideModal:kt}=(0,n.useContext)(v.kr),dn=T.contextSrv.hasPermission(O.AccessControlAction.DashboardsPublicWrite),nn=!!y.config.featureToggles.publicDashboardsEmailSharing&&(0,s.v)("publicDashboardsEmailSharing"),Mn=(0,O.useSelector)(cn=>cn.dashboard).getModel(),Gn=Mn.getVariables(),{unsupportedDataSources:$n}=ae(Mn),{data:Fn,isFetching:Yn}=(0,f.Ym)(Mn.uid),[ua,{isLoading:wa}]=(0,f.Mi)(),ga=wa||Yn,ca=!dn||ga,Ra=(0,I.O)(Mn.getDefaultTime(),Mn),{handleSubmit:va,setValue:Sa,register:es}=(0,p.cI)({defaultValues:{isAnnotationsEnabled:Fn?.annotationsEnabled,isTimeSelectionEnabled:Fn?.timeSelectionEnabled,isPaused:!Fn?.isEnabled}}),yt=async cn=>{const{isAnnotationsEnabled:en,isTimeSelectionEnabled:En,isPaused:Rn}=cn,Dn={dashboard:Mn,payload:{...Fn,annotationsEnabled:en,timeSelectionEnabled:En,isEnabled:!Rn}};ua(Dn)},bt=async(cn,en)=>{Sa(cn,en),await va(En=>yt(En))()},Dt=()=>{Kt(ln,{dashboard:Mn,onDismiss:kt,activeTab:V.Ax.publicDashboard})};function Wt(){(0,W.PJ)("copy_public_url",V.Ax.publicDashboard)}return n.createElement("div",{className:Pt.configContainer},dn&&Mn.hasUnsavedChanges()&&n.createElement(G,null),!dn&&n.createElement(z,{mode:"edit"}),(0,c._H)(Gn)&&n.createElement(Z,null),!!$n.length&&n.createElement(k,{unsupportedDataSources:$n.join(", ")}),nn&&n.createElement(ue,null),n.createElement(C.g,{label:"Dashboard URL",className:Pt.fieldSpace},n.createElement(D.I,{value:(0,c._M)(Fn.accessToken),readOnly:!0,disabled:!Fn?.isEnabled,"data-testid":We.CopyUrlInput,addonAfter:n.createElement(M.m,{"data-testid":We.CopyUrlButton,variant:"primary",disabled:!Fn?.isEnabled,getText:()=>(0,c._M)(Fn.accessToken),onClipboardCopy:Wt},"Copy")})),n.createElement(C.g,{className:Pt.fieldSpace},n.createElement(S.Ar,null,n.createElement(P.r,{...es("isPaused"),disabled:ca,onChange:cn=>{(0,W.PJ)(cn.currentTarget.checked?"disable_sharing":"enable_sharing",V.Ax.publicDashboard),bt("isPaused",cn.currentTarget.checked)},"data-testid":We.PauseSwitch}),n.createElement(x._,{className:(0,u.css)`
              margin-bottom: 0;
            `},"Pause sharing dashboard"))),n.createElement(C.g,{className:Pt.fieldSpace},n.createElement(Ke,{title:"Settings",headerElement:({className:cn})=>n.createElement(je,{className:cn,isDataLoading:ga,timeRange:Ra,timeSelectionEnabled:Fn?.timeSelectionEnabled,annotationsEnabled:Fn?.annotationsEnabled}),"data-testid":We.SettingsDropdown},n.createElement(oe,{disabled:ca,onChange:bt,register:es,timeRange:Ra}))),n.createElement(S.Ar,{orientation:Gt?0:1,justify:Gt?"flex-end":"flex-start",align:Gt?"center":"normal"},n.createElement(S.Lh,{justify:"flex-end"},n.createElement(A.H,{type:"button",disabled:ca,"data-testid":We.DeleteButton,onDismiss:Dt,variant:"destructive",fill:"outline",dashboard:Mn,publicDashboard:{uid:Fn.uid,dashboardUid:Mn.uid,title:Mn.title}},"Revoke public URL"))))},ot=Pt=>({configContainer:(0,u.css)`
    label: config container;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${Pt.spacing(3)};
  `,fieldSpace:(0,u.css)`
    label: field space;
    width: 100%;
    margin-bottom: 0;
  `,timeRange:(0,u.css)({display:"inline-block"})}),lt=ke;var Ct=e(85830),wt=e(13026);const Lt=h.wl.pages.ShareDashboardModal.PublicDashboard,Ye=[{type:"publicAcknowledgment",description:"Your entire dashboard will be public*",testId:Lt.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:"Learn more about public dashboards"}},{type:"dataSourcesAcknowledgment",description:"Publishing currently only works with a subset of data sources*",testId:Lt.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:"Learn more about public datasources"}},{type:"usageAcknowledgment",description:"Making a dashboard public will cause queries to run each time is viewed, which may increase costs*",testId:Lt.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:"Learn more about query caching"}}],Be=({disabled:Pt,register:Gt})=>{const Kt=(0,o.wW)(Le);return n.createElement(n.Fragment,null,n.createElement("p",{className:Kt.title},"Before you make the dashboard public, acknowledge the following:"),n.createElement(ce.C,{disabled:Pt},n.createElement(S.wc,{spacing:"md"},Ye.map(kt=>n.createElement(S.Lh,{key:kt.type,spacing:"none",align:"center"},n.createElement(wt.X,{...Gt(kt.type,{required:!0}),label:kt.description,"data-testid":kt.testId}),n.createElement(fe.Qj,{variant:"primary",href:kt.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:kt.info.tooltip}))))))},Le=Pt=>({title:(0,u.css)`
    font-weight: ${Pt.typography.fontWeightBold};
  `}),le=h.wl.pages.ShareDashboardModal.PublicDashboard,de=({isError:Pt})=>{const Gt=(0,o.wW)(X),Kt=T.contextSrv.hasPermission(O.AccessControlAction.DashboardsPublicWrite),dn=(0,O.useSelector)(Fn=>Fn.dashboard).getModel(),{unsupportedDataSources:nn}=ae(dn),[mn,{isLoading:Mn}]=(0,f.zZ)(),Gn=!Kt||Mn||Pt,$n=async()=>{(0,W.PJ)("generate_public_url",V.Ax.publicDashboard),mn({dashboard:dn,payload:{isEnabled:!0}})};return n.createElement("div",{className:Gt.container},n.createElement("div",null,n.createElement("p",{className:Gt.title},"Welcome to public dashboards!"),n.createElement("p",{className:Gt.description},"Currently, we don\u2019t support template variables or frontend data sources")),!Kt&&n.createElement(z,{mode:"create"}),(0,c._H)(dn.getVariables())&&n.createElement(Z,null),!!nn.length&&n.createElement(k,{unsupportedDataSources:nn.join(", ")}),n.createElement(Ct.l,{onSubmit:$n,validateOn:"onChange",maxWidth:"none"},({register:Fn,formState:{isValid:Yn}})=>n.createElement(n.Fragment,null,n.createElement("div",{className:Gt.checkboxes},n.createElement(Be,{disabled:Gn,register:Fn})),n.createElement("div",{className:Gt.buttonContainer},n.createElement(fe.zx,{type:"submit",disabled:Gn||!Yn,"data-testid":le.CreateButton},"Generate public URL ",Mn&&n.createElement(i.$,{className:Gt.loadingSpinner}))))))},X=Pt=>({container:(0,u.css)`
    display: flex;
    flex-direction: column;
    gap: ${Pt.spacing(4)};
  `,title:(0,u.css)`
    font-size: ${Pt.typography.h4.fontSize};
    margin: ${Pt.spacing(0,0,2)};
  `,description:(0,u.css)`
    color: ${Pt.colors.text.secondary};
    margin-bottom: ${Pt.spacing(0)};
  `,checkboxes:(0,u.css)`
    margin: ${Pt.spacing(0,0,4)};
  `,buttonContainer:(0,u.css)`
    display: flex;
    justify-content: end;
  `,loadingSpinner:(0,u.css)`
    margin-left: ${Pt.spacing(1)};
  `}),se=de,re=()=>{const Pt=(0,o.wW)(be);return n.createElement(E.L,{className:Pt.loadingContainer},n.createElement(n.Fragment,null,"Loading configuration",n.createElement(i.$,{size:20,className:Pt.spinner})))},pe=Pt=>{const{data:Gt,isLoading:Kt,isError:kt}=(0,f.Ym)(Pt.dashboard.uid);return n.createElement(n.Fragment,null,Kt?n.createElement(re,null):(0,c.Gt)(Gt)?n.createElement(lt,null):n.createElement(se,{isError:kt}))},be=Pt=>({loadingContainer:(0,u.css)`
    height: 280px;
    align-items: center;
    justify-content: center;
    gap: ${Pt.spacing(1)};
  `,spinner:(0,u.css)`
    margin-bottom: ${Pt.spacing(0)};
  `});var xe=e(33784),Pe=e(72639),we=e(68421),Fe=e(12781);class He extends n.PureComponent{constructor(Gt){super(Gt),this.buildIframeHtml=()=>{const{panel:Kt,dashboard:kt}=this.props,{useCurrentTimeRange:dn,selectedTheme:nn}=this.state,mn=(0,V.S_)(dn,kt.uid,nn,Kt);this.setState({iframeHtml:mn})},this.onIframeHtmlChange=Kt=>{this.setState({iframeHtml:Kt.currentTarget.value})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)},this.onThemeChange=Kt=>{this.setState({selectedTheme:Kt},this.buildIframeHtml)},this.getIframeHtml=()=>this.state.iframeHtml,this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){(0,Pe.ff)("grafana_dashboards_embed_share_viewed"),this.buildIframeHtml()}render(){const{useCurrentTimeRange:Gt,selectedTheme:Kt,iframeHtml:kt}=this.state,nn=(this.props.dashboard?this.props.dashboard.time.to==="now":!1)?(0,d.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(d.cC,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),n.createElement(C.g,{label:(0,d.t)("share-modal.embed.time-range","Current time range"),description:nn},n.createElement(P.r,{id:"share-current-time-range",value:Gt,onChange:this.onUseCurrentTimeRangeChange})),n.createElement(Fe.J,{selectedTheme:Kt,onChange:this.onThemeChange}),n.createElement(C.g,{label:(0,d.t)("share-modal.embed.html","Embed HTML"),description:(0,d.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},n.createElement(we.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:kt,onChange:this.onIframeHtmlChange})),n.createElement(l.u.ButtonRow,null,n.createElement(M.m,{icon:"copy",variant:"primary",getText:this.getIframeHtml},n.createElement(d.cC,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}}var Xe=e(22160),dt=e(20367),ct=e(98140),At=e(73431),Ie=e(19977),Ze=e(84541);function ut({json:Pt,onDismiss:Gt}){const Kt=(0,n.useCallback)(()=>Pt,[Pt]);return n.createElement(l.u,{title:"JSON",onDismiss:Gt,onClickBackdrop:Gt,isOpen:!0},n.createElement(Ie.Z,{disableHeight:!0},({width:kt})=>n.createElement(Ze.p,{value:Pt,language:"json",showMiniMap:!1,height:"500px",width:kt})),n.createElement(l.u.ButtonRow,null,n.createElement(M.m,{icon:"copy",getText:Kt},n.createElement(d.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class rt extends n.PureComponent{constructor(Gt){super(Gt),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onTrimDefaultsChange=()=>{this.setState({trimDefaults:!this.state.trimDefaults})},this.onSaveAsFile=()=>{const{dashboard:Kt}=this.props,{shareExternally:kt}=this.state,{trimDefaults:dn}=this.state;kt?this.exporter.makeExportable(Kt).then(nn=>{dn?(0,dt.i)().post("/api/dashboards/trim",{dashboard:nn}).then(mn=>{this.openSaveAsDialog(mn.dashboard)}):this.openSaveAsDialog(nn)}):dn?(0,dt.i)().post("/api/dashboards/trim",{dashboard:Kt.getSaveModelClone()}).then(nn=>{this.openSaveAsDialog(nn.dashboard)}):this.openSaveAsDialog(Kt.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:Kt}=this.props,{shareExternally:kt}=this.state,{trimDefaults:dn}=this.state;kt?this.exporter.makeExportable(Kt).then(nn=>{dn?(0,dt.i)().post("/api/dashboards/trim",{dashboard:nn}).then(mn=>{this.openJsonModal(mn.dashboard)}):this.openJsonModal(nn)}):dn?(0,dt.i)().post("/api/dashboards/trim",{dashboard:Kt.getSaveModelClone()}).then(nn=>{this.openJsonModal(nn.dashboard)}):this.openJsonModal(Kt.getSaveModelClone())},this.openSaveAsDialog=Kt=>{const kt=JSON.stringify(Kt,null,2),dn=new Blob([kt],{type:"application/json;charset=utf-8"}),nn=new Date().getTime();(0,Xe.saveAs)(dn,`${Kt.title}-${nn}.json`),(0,W.PJ)("save_export",V.Ax.export)},this.openJsonModal=Kt=>{m.h$.publish(new At.Dn({props:{json:JSON.stringify(Kt,null,2)},component:ut})),this.props.onDismiss?.()},this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new ct.E}render(){const{onDismiss:Gt}=this.props,{shareExternally:Kt}=this.state,{trimDefaults:kt}=this.state,dn=(0,d.t)("share-modal.export.share-externally-label","Export for sharing externally"),nn=(0,d.t)("share-modal.export.share-default-label","Export with default values removed");return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(d.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),n.createElement(C.g,{label:dn},n.createElement(P.r,{id:"share-externally-toggle",value:Kt,onChange:this.onShareExternallyChange})),y.config.featureToggles.trimDefaults&&n.createElement(C.g,{label:nn},n.createElement(P.r,{id:"trim-defaults-toggle",value:kt,onChange:this.onTrimDefaultsChange})),n.createElement(l.u.ButtonRow,null,n.createElement(fe.zx,{variant:"secondary",onClick:Gt,fill:"outline"},n.createElement(d.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),n.createElement(fe.zx,{variant:"secondary",onClick:this.onViewJson},n.createElement(d.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),n.createElement(fe.zx,{variant:"primary",onClick:this.onSaveAsFile},n.createElement(d.cC,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var St=e(78288);const st=({panel:Pt,initialFolderUid:Gt,onDismiss:Kt})=>((0,n.useEffect)(()=>{(0,Pe.ff)("grafana_dashboards_library_panel_share_viewed")},[]),Pt?n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(d.cC,{i18nKey:"share-modal.library.info"},"Create library panel.")),n.createElement(St.T,{panel:Pt,initialFolderUid:Gt,onDismiss:Kt})):null);var tt=e(12190);class ft extends n.PureComponent{constructor(Gt){super(Gt),this.buildUrl=async()=>{const{panel:Kt,dashboard:kt}=this.props,{useCurrentTimeRange:dn,useShortUrl:nn,selectedTheme:mn}=this.state,Mn=await(0,V.bl)(dn,mn,Kt,nn),Gn=(0,V.Sc)(dn,kt.uid,mn,Kt);this.setState({shareUrl:Mn,imageUrl:Gn})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=Kt=>{this.setState({selectedTheme:Kt})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){this.buildUrl()}componentDidUpdate(Gt,Kt){const{useCurrentTimeRange:kt,useShortUrl:dn,selectedTheme:nn}=this.state;(Kt.useCurrentTimeRange!==kt||Kt.selectedTheme!==nn||Kt.useShortUrl!==dn)&&this.buildUrl()}onCopy(){(0,W.PJ)("copy_link",V.Ax.link)}render(){const{panel:Gt,dashboard:Kt}=this.props,kt=Kt?Kt.time.to==="now":!1,{useCurrentTimeRange:dn,useShortUrl:nn,selectedTheme:mn,shareUrl:Mn,imageUrl:Gn}=this.state,$n=h.wl.pages.SharePanelModal,Fn=!!Kt.id,Yn=(0,d.t)("share-modal.link.time-range-label","Lock time range"),ua=(0,d.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),wa=(0,d.t)("share-modal.link.shorten-url","Shorten URL"),ga=(0,d.t)("share-modal.link.link-url","Link URL");return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(d.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),n.createElement(ce.C,null,n.createElement(C.g,{label:Yn,description:kt?ua:""},n.createElement(P.r,{id:"share-current-time-range",value:dn,onChange:this.onUseCurrentTimeRangeChange})),n.createElement(Fe.J,{selectedTheme:mn,onChange:this.onThemeChange}),n.createElement(C.g,{label:wa},n.createElement(P.r,{id:"share-shorten-url",value:nn,onChange:this.onUrlShorten})),n.createElement(C.g,{label:ga},n.createElement(D.I,{id:"link-url-input",value:Mn,readOnly:!0,addonAfter:n.createElement(M.m,{icon:"copy",variant:"primary",getText:this.getShareUrl,onClipboardCopy:this.onCopy},n.createElement(d.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),Gt&&g.default.rendererAvailable&&n.createElement(n.Fragment,null,Fn&&n.createElement("div",{className:"gf-form"},n.createElement("a",{href:Gn,target:"_blank",rel:"noreferrer","aria-label":$n.linkToRenderedImage},n.createElement(tt.J,{name:"camera"}),"\xA0",n.createElement(d.cC,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!Fn&&n.createElement(w.b,{severity:"info",title:(0,d.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},n.createElement(d.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),Gt&&!g.default.rendererAvailable&&n.createElement(w.b,{severity:"info",title:(0,d.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},n.createElement(d.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the",n.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var $t=e(69084),Ht=e(4148),Zt=e(9558),tn=e(6278),on=e(68734);const qt="/api/snapshots";class pn extends n.PureComponent{constructor(Gt){super(Gt),this.createSnapshot=Kt=>()=>{const{timeoutSeconds:kt}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,Kt)},kt*1e3)},this.saveSnapshot=async(Kt,kt)=>{const{snapshotExpires:dn}=this.state,nn=this.dashboard.getSaveModelCloneOld();this.scrubDashboard(nn);const mn={dashboard:nn,name:nn.title,expires:dn,external:kt};try{const Mn=await(0,Ht.i)().post(qt,mn);this.setState({deleteUrl:Mn.deleteUrl,snapshotUrl:Mn.url,step:2})}finally{(0,W.PJ)(kt?"publish_snapshot":"local_snapshot",V.Ax.snapshot),this.setState({isLoading:!1})}},this.scrubDashboard=Kt=>{const{panel:kt}=this.props,{snapshotName:dn}=this.state;Kt.title=dn,Kt.time=(0,tn.$t)().timeRange(),Kt.links=[],Kt.panels.forEach(mn=>{mn.targets=[],mn.links=[],mn.datasource=null});const nn=Kt.annotations.list.filter(mn=>mn.enable);if(Kt.annotations.list=nn.map(mn=>({name:mn.name,enable:mn.enable,iconColor:mn.iconColor,snapshotData:mn.snapshotData,type:mn.type,builtIn:mn.builtIn,hide:mn.hide})),Kt.getVariables().forEach(mn=>{"query"in mn&&(mn.query=""),"options"in mn&&(mn.options=mn.current&&!(0,$t.Q)(mn.current)?[mn.current]:[]),"refresh"in mn&&(mn.refresh=on.Bd.never)}),kt){const mn=kt.getSaveModel();mn.gridPos.w=24,mn.gridPos.x=0,mn.gridPos.y=0,mn.gridPos.h=20,Kt.panels=[mn]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(mn=>{delete mn.snapshotData}),this.dashboard.annotations.list.forEach(mn=>{delete mn.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:Kt}=this.state;await(0,Ht.i)().get(Kt),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=Kt=>{this.setState({snapshotName:Kt.target.value})},this.onTimeoutChange=Kt=>{this.setState({timeoutSeconds:Number(Kt.target.value)})},this.onExpireChange=Kt=>{this.setState({selectedExpireOption:Kt,snapshotExpires:Kt.value})},this.dashboard=Gt.dashboard,this.expireOptions=[{label:(0,d.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,d.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,d.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,d.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:Gt.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const Gt=await(0,Ht.i)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:Gt.externalSnapshotName,externalEnabled:Gt.externalEnabled})}renderStep1(){const{onDismiss:Gt}=this.props,{snapshotName:Kt,selectedExpireOption:kt,timeoutSeconds:dn,isLoading:nn,sharingButtonText:mn,externalEnabled:Mn}=this.state,Gn=(0,d.t)("share-modal.snapshot.name","Snapshot name"),$n=(0,d.t)("share-modal.snapshot.expire","Expire"),Fn=(0,d.t)("share-modal.snapshot.timeout","Timeout (seconds)"),Yn=(0,d.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(d.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),n.createElement("p",{className:"share-modal-info-text"},n.createElement(d.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",n.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),n.createElement(C.g,{label:Gn},n.createElement(D.I,{id:"snapshot-name-input",width:30,value:Kt,onChange:this.onSnapshotNameChange})),n.createElement(C.g,{label:$n},n.createElement(Zt.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:kt,onChange:this.onExpireChange})),n.createElement(C.g,{label:Fn,description:Yn},n.createElement(D.I,{id:"timeout-input",type:"number",width:21,value:dn,onChange:this.onTimeoutChange})),n.createElement(l.u.ButtonRow,null,n.createElement(fe.zx,{variant:"secondary",onClick:Gt,fill:"outline"},n.createElement(d.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),Mn&&n.createElement(fe.zx,{variant:"secondary",disabled:nn,onClick:this.createSnapshot(!0)},mn),n.createElement(fe.zx,{variant:"primary",disabled:nn,onClick:this.createSnapshot()},n.createElement(d.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:Gt}=this.state;return n.createElement(n.Fragment,null,n.createElement(C.g,{label:(0,d.t)("share-modal.snapshot.url-label","Snapshot URL")},n.createElement(D.I,{id:"snapshot-url-input",value:Gt,readOnly:!0,addonAfter:n.createElement(M.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},n.createElement(d.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),n.createElement("div",{className:"pull-right",style:{padding:"5px"}},n.createElement(d.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",n.createElement(fe.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},n.createElement(d.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return n.createElement("div",{className:"share-modal-header"},n.createElement("p",{className:"share-modal-info-text"},n.createElement(d.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:Gt,step:Kt}=this.state;return n.createElement(n.Fragment,null,Kt===1&&this.renderStep1(),Kt===2&&this.renderStep2(),Kt===3&&this.renderStep3(),Gt&&n.createElement(i.$,{inline:!0}))}}const Cn=[],Rt=[];function mt(Pt){Cn.push(Pt)}function xt(Pt){Rt.push(Pt)}function Ft(Pt,Gt){const kt=[{label:(0,d.t)("share-modal.tab-title.link","Link"),value:V.Ax.link,component:ft}];if(m.Vt.isSignedIn&&g.config.snapshotEnabled){const nn=(0,d.t)("share-modal.tab-title.snapshot","Snapshot");kt.push({label:nn,value:V.Ax.snapshot,component:pn})}if(Pt){const nn=(0,d.t)("share-modal.tab-title.embed","Embed");if(kt.push({label:nn,value:V.Ax.embed,component:He}),!(0,xe.V)(Pt)){const mn=(0,d.t)("share-modal.tab-title.library-panel","Library panel");kt.push({label:mn,value:V.Ax.libraryPanel,component:st})}kt.push(...Rt)}else{const nn=(0,d.t)("share-modal.tab-title.export","Export");kt.push({label:nn,value:V.Ax.export,component:rt}),kt.push(...Cn)}g.config.featureToggles.publicDashboards&&kt.push({label:"Public dashboard",value:V.Ax.publicDashboard,component:pe});const dn=kt.find(nn=>nn.value===Gt);return{tabs:kt,activeTab:dn?.value??kt[0].value}}function zt(Pt){const{tabs:Gt,activeTab:Kt}=Ft(Pt.panel,Pt.activeTab);return{tabs:Gt,activeTab:Kt}}class Jt extends n.Component{constructor(Gt){super(Gt),this.onSelectTab=Kt=>{this.setState(kt=>({...kt,activeTab:Kt.value})),(0,W.s_)(Kt.value)},this.state=zt(Gt)}getActiveTab(){const{tabs:Gt,activeTab:Kt}=this.state;return Gt.find(kt=>kt.value===Kt)}renderTitle(){const{panel:Gt}=this.props,{activeTab:Kt}=this.state,kt=Gt?(0,d.t)("share-modal.panel.title","Share Panel"):(0,d.t)("share-modal.dashboard.title","Share"),dn=Ft(this.props.panel,this.state.activeTab).tabs;return n.createElement(a.H,{title:kt,icon:"share-alt",tabs:dn,activeTab:Kt,onChangeTab:this.onSelectTab})}render(){const{dashboard:Gt,panel:Kt}=this.props,dn=this.getActiveTab().component;return n.createElement(l.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},n.createElement(r.I,null,n.createElement(dn,{dashboard:Gt,panel:Kt,onDismiss:this.props.onDismiss})))}}const ln=(0,o.HE)(Jt)},20230:(J,R,e)=>{"use strict";e.d(R,{Ax:()=>h,OS:()=>u,S_:()=>E,Sc:()=>c,bl:()=>i});var n=e(81626),a=e(69307),l=e(57837),r=e(92403),o=e(32688),g=e(37965),m=e(6278);function d({useCurrentTimeRange:y,selectedTheme:s,panel:v,search:C=window.location.search,range:D=(0,m.$t)().timeRange(),orgId:M=o.config.bootData.user.orgId}){const P=new URLSearchParams(C),x=v?.timeFrom;if(x){const{from:S,to:I}=n.describeTextRange(x);P.set("from",S),P.set("to",I)}else P.set("from",String(D.from.valueOf())),P.set("to",String(D.to.valueOf()));return P.set("orgId",String(M)),y||(P.delete("from"),P.delete("to")),s!=="current"&&P.set("theme",s),v&&!P.has("editPanel")&&P.set("viewPanel",String(v.id)),P}function u(){let y=window.location.href;const s=y.indexOf("?");return s!==-1&&(y=y.substring(0,s)),y}async function i(y,s,v,C){const D=u(),M=d({useCurrentTimeRange:y,selectedTheme:s,panel:v}),P=a.Cj.appendQueryToUrl(D,M.toString());return C?await(0,g.D)(P):P}function f(y,s,v,C){const D=u(),M=d({useCurrentTimeRange:y,selectedTheme:v,panel:C});let P=D.replace(o.config.appSubUrl+"/dashboard/",o.config.appSubUrl+"/dashboard-solo/");P=P.replace(o.config.appSubUrl+"/d/",o.config.appSubUrl+"/d-solo/"),l.u.stripBaseFromUrl(D)==="/"&&(P=`${o.config.appUrl}d-solo/${s}`);const S=M.get("editPanel")??M.get("viewPanel")??"";return M.set("panelId",S),M.delete("editPanel"),M.delete("viewPanel"),a.Cj.appendQueryToUrl(P,M.toString())}function c(y,s,v,C){let M=f(y,s,v,C).replace(o.config.appSubUrl+"/dashboard-solo/",o.config.appSubUrl+"/render/dashboard-solo/");return M=M.replace(o.config.appSubUrl+"/d-solo/",o.config.appSubUrl+"/render/d-solo/"),M+="&width=1000&height=500"+p(),M}function E(y,s,v,C){return'<iframe src="'+f(y,s,v,C)+'" width="450" height="200" frameborder="0"></iframe>'}function p(){const y="&tz=UTC"+encodeURIComponent((0,r.CQ)().format("Z"));if(!window.Intl)return y;const s=window.Intl.DateTimeFormat();if(!s.resolvedOptions)return y;const v=s.resolvedOptions();return v.timeZone?"&tz="+encodeURIComponent(v.timeZone):y}const h={link:"link",snapshot:"snapshot",export:"export",embed:"embed",libraryPanel:"library_panel",pdf:"pdf",report:"report",publicDashboard:"public_dashboard"}},19770:(J,R,e)=>{"use strict";e.d(R,{B:()=>c});var n=e(41407),a=e(86832),l=e(39953),r=e(82803),o=e(12190);const g=({diff:p})=>{const h=(0,r.wW)(m),y=!(0,a.isUndefined)(p.originalValue)&&!(0,a.isArray)(p.originalValue)&&!(0,a.isObject)(p.originalValue),s=!(0,a.isUndefined)(p.value)&&!(0,a.isArray)(p.value)&&!(0,a.isObject)(p.value);return l.createElement(l.Fragment,null,y&&l.createElement("span",{className:h},String(p.originalValue)),y&&s?l.createElement(o.J,{name:"arrow-right"}):null,s&&l.createElement("span",{className:h},String(p.value)))},m=p=>(0,n.css)`
  background-color: ${p.colors.action.hover};
  border-radius: ${p.shape.radius.default};
  color: ${p.colors.text.primary};
  font-size: ${p.typography.body.fontSize};
  margin: 0 ${p.spacing(.5)};
  padding: ${p.spacing(.5,1)};
`;var d=e(14768);const u={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},i=({diff:p,title:h})=>{const y=(0,r.wW)(f);return p?l.createElement(l.Fragment,null,l.createElement(o.J,{type:"mono",name:"circle",className:y[p.op]})," ",l.createElement("span",{className:y.embolden},h)," ",l.createElement("span",null,(0,d.dW)(p,p.path.length>1))," ",l.createElement(g,{diff:p})):l.createElement("div",{className:y.withoutDiff},l.createElement(o.J,{type:"mono",name:"circle",className:y.replace})," ",l.createElement("span",{className:y.embolden},h)," ",l.createElement("span",null,(0,d.dW)(u,!1)))},f=p=>({embolden:(0,n.css)`
    font-weight: ${p.typography.fontWeightBold};
  `,add:(0,n.css)`
    color: ${p.colors.success.main};
  `,replace:(0,n.css)`
    color: ${p.colors.success.main};
  `,move:(0,n.css)`
    color: ${p.colors.success.main};
  `,copy:(0,n.css)`
    color: ${p.colors.success.main};
  `,_get:(0,n.css)`
    color: ${p.colors.success.main};
  `,test:(0,n.css)`
    color: ${p.colors.success.main};
  `,remove:(0,n.css)`
    color: ${p.colors.success.main};
  `,withoutDiff:(0,n.css)`
    margin-bottom: ${p.spacing(2)};
  `}),c=({diffs:p,title:h})=>{const y=(0,r.wW)(E);return p.length===1?l.createElement("div",{className:y.container,"data-testid":"diffGroup"},l.createElement(i,{title:h,diff:p[0]})):l.createElement("div",{className:y.container,"data-testid":"diffGroup"},l.createElement(i,{title:h}),l.createElement("ul",{className:y.list},p.map((s,v)=>l.createElement("li",{className:y.listItem,key:`${(0,a.last)(s.path)}__${v}`},l.createElement("span",null,(0,d.dW)(s))," ",l.createElement(g,{diff:s})))))},E=p=>({container:(0,n.css)`
    background-color: ${p.colors.background.secondary};
    font-size: ${p.typography.h6.fontSize};
    margin-bottom: ${p.spacing(2)};
    padding: ${p.spacing(2)};
  `,list:(0,n.css)`
    margin-left: ${p.spacing(4)};
  `,listItem:(0,n.css)`
    margin-bottom: ${p.spacing(1)};
  `})},78854:(J,R,e)=>{"use strict";e.d(R,{Z:()=>m});var n=e(41407),a=e(39953),l=e(14031),r=e.n(l),o=e(63374),g=e(82803);const m=({oldValue:d,newValue:u})=>{const i=(0,g.l4)(),f={variables:{dark:{diffViewerBackground:i.colors.background.canvas,diffViewerColor:i.colors.text.primary,addedBackground:(0,o.Z)(i.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:(0,o.Z)(i.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:(0,o.Z)(i.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:(0,o.Z)(i.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:(0,o.Z)(i.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:(0,o.Z)(i.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:i.colors.background.primary,gutterBackgroundDark:i.colors.background.primary,highlightBackground:(0,o.Z)(i.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:(0,o.Z)(i.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:i.colors.background.secondary,codeFoldBackground:i.colors.background.secondary,emptyLineBackground:i.colors.background.secondary,gutterColor:i.colors.text.disabled,addedGutterColor:i.colors.text.primary,removedGutterColor:i.colors.text.primary,codeFoldContentColor:i.colors.text.disabled,diffViewerTitleBackground:i.colors.background.secondary,diffViewerTitleColor:i.colors.text.disabled,diffViewerTitleBorderColor:i.colors.border.strong}},codeFold:{fontSize:i.typography.bodySmall.fontSize},gutter:`
      pre {
        color: ${(0,o.Z)(i.colors.text.disabled).setAlpha(1).toString()};
        opacity: 0.61;
      }
    `};return a.createElement("div",{className:(0,n.css)`
        font-size: ${i.typography.bodySmall.fontSize};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `},a.createElement(r(),{styles:f,oldValue:d,newValue:u,splitView:!1,compareMethod:l.DiffMethod.CSS,useDarkTheme:i.isDark}))}},11353:(J,R,e)=>{"use strict";e.d(R,{U$:()=>z,Cs:()=>I,Sd:()=>M,R1:()=>B,K8:()=>r});var n=e(86832),a=e(4148);class l{getHistoryList(j,F){const k=j&&j.uid?j.uid:void 0;return k?(0,a.i)().get(`api/dashboards/uid/${k}/versions`,F):Promise.resolve([])}getDashboardVersion(j,F){return(0,a.i)().get(`api/dashboards/uid/${j}/versions/${F}`)}restoreDashboard(j,F){const k=j&&j.uid?j.uid:void 0,_=`api/dashboards/uid/${k}/restore`;return k&&(0,n.isNumber)(F)?(0,a.i)().post(_,{version:F}):Promise.resolve({})}}const r=new l;var o=e(41407),g=e(39953),m=e(13026),d=e(51064),u=e(39106),i=e(4919),f=e(32840),c=e(65489),E=e(57837),p=e(13601),h=e(90634),y=e(57721),s=e(3654);const v=async(Q,j)=>(s.H.ignoreNextSave(),await r.restoreDashboard(j,Q)),C=Q=>{const j=(0,y.useSelector)(Y=>Y.dashboard.getModel()),[F,k]=(0,c.Z)(async()=>await v(Q,j),[]),_=(0,h.iG)();return(0,g.useEffect)(()=>{if(F.value){const Y=p.E1.getLocation(),Z=E.u.stripBaseFromUrl(F.value.url),ae=Y.state?.routeReloadCounter;p.E1.replace({...Y,pathname:Z,state:{routeReloadCounter:ae?ae+1:1}}),_.success("Dashboard restored",`Restored from version ${Q}`)}},[F,Q,_]),{state:F,onRestoreDashboard:k}},D=({hideModal:Q,version:j})=>{const{state:F,onRestoreDashboard:k}=C(j);return(0,g.useEffect)(()=>{!F.loading&&F.value&&Q()},[F,Q]),g.createElement(f.s,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:Q,onConfirm:k,body:g.createElement("p",null,"Are you sure you want to restore the dashboard to version ",j,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${j}`})},M=({versions:Q,canCompare:j,onCheck:F})=>g.createElement("table",{className:"filter-table gf-form-group"},g.createElement("thead",null,g.createElement("tr",null,g.createElement("th",{className:"width-4"}),g.createElement("th",{className:"width-4"},"Version"),g.createElement("th",{className:"width-14"},"Date"),g.createElement("th",{className:"width-10"},"Updated by"),g.createElement("th",null,"Notes"),g.createElement("th",null))),g.createElement("tbody",null,Q.map((k,_)=>g.createElement("tr",{key:k.id},g.createElement("td",null,g.createElement(m.X,{"aria-label":`Toggle selection of version ${k.version}`,className:(0,o.css)`
                display: inline;
              `,checked:k.checked,onChange:Y=>F(Y,k.id),disabled:!k.checked&&j})),g.createElement("td",null,k.version),g.createElement("td",null,k.createdDateString),g.createElement("td",null,k.createdBy),g.createElement("td",null,k.message),g.createElement("td",{className:"text-right"},_===0?g.createElement(d.V,{name:"Latest",colorIndex:17}):g.createElement(u.JY,null,({showModal:Y,hideModal:Z})=>g.createElement(i.zx,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{Y(D,{version:k.version,hideModal:Z})}},"Restore")))))));var P=e(82803),x=e(68497),S=e(12190);const I=({onClick:Q=n.noop,baseVersion:j=0,newVersion:F=0,isNewLatest:k=!1})=>{const _=(0,P.wW)(T);return g.createElement("h3",{className:_.header},g.createElement(x.h,{name:"arrow-left",size:"xl",onClick:Q,tooltip:"Reset version"}),g.createElement("span",null,"Comparing ",j," ",g.createElement(S.J,{name:"arrows-h"})," ",F," ",k&&g.createElement("cite",{className:"muted"},"(Latest)")))},T=Q=>({header:(0,o.css)`
    font-size: ${Q.typography.h3.fontSize};
    display: flex;
    gap: ${Q.spacing(2)};
    margin-bottom: ${Q.spacing(3)};
  `});var O=e(27366),A=e(69865);const B=({hasMore:Q,canCompare:j,getVersions:F,getDiff:k,isLastPage:_})=>g.createElement(O.K,null,Q&&g.createElement(i.zx,{type:"button",onClick:()=>F(!0),variant:"secondary",disabled:_},"Show more versions"),g.createElement(A.u,{content:"Select two versions to start comparing",placement:"bottom"},g.createElement(i.zx,{type:"button",disabled:!j,onClick:k,icon:"code-branch"},"Compare versions")));var b=e(12223),W=e(4516),V=e(19770),w=e(78854),K=e(14768);const z=({baseInfo:Q,newInfo:j,diffData:F,isNewLatest:k})=>{const _=(0,K.Q$)(F.lhs,F.rhs),Y=(0,P.wW)(G);return g.createElement("div",null,g.createElement("div",{className:Y.spacer},g.createElement(b.Lh,{justify:"space-between",align:"center"},g.createElement("div",null,g.createElement("p",{className:Y.versionInfo},g.createElement("strong",null,"Version ",j.version)," updated by ",j.createdBy," ",j.ageString," -"," ",j.message),g.createElement("p",{className:(0,o.cx)(Y.versionInfo,Y.noMarginBottom)},g.createElement("strong",null,"Version ",Q.version)," updated by ",Q.createdBy," ",Q.ageString," -"," ",Q.message)),k&&g.createElement(u.JY,null,({showModal:Z,hideModal:ae})=>g.createElement(i.zx,{variant:"destructive",icon:"history",onClick:()=>{Z(D,{version:Q.version,hideModal:ae})}},"Restore to version ",Q.version)))),g.createElement("div",{className:Y.spacer},Object.entries(_).map(([Z,ae])=>g.createElement(V.B,{diffs:ae,key:Z,title:Z}))),g.createElement(W.s,{isOpen:!1,label:"View JSON Diff"},g.createElement(w.Z,{oldValue:JSON.stringify(F.lhs,null,2),newValue:JSON.stringify(F.rhs,null,2)})))},G=Q=>({spacer:(0,o.css)`
    margin-bottom: ${Q.spacing(4)};
  `,versionInfo:(0,o.css)`
    color: ${Q.colors.text.secondary};
    font-size: ${Q.typography.bodySmall.fontSize};
  `,noMarginBottom:(0,o.css)`
    margin-bottom: 0;
  `})},14768:(J,R,e)=>{"use strict";e.d(R,{Q$:()=>o,dW:()=>g});var n=e(29440),a=e(71315),l=e(86832),r=e.n(l);const o=(u,i)=>{const f=(0,n.qu)(u,i),c=a.stringify(u,null,2),E=a.stringify(i,null,2),p=s=>s.map(v=>{let C,D,M=0;const P=(0,l.tail)(v.path.split("/"));return v.op==="replace"&&E.pointers[v.path]&&(C=(0,l.get)(u,P),D=v.value,M=E.pointers[v.path].value.line),v.op==="add"&&E.pointers[v.path]&&(D=v.value,M=E.pointers[v.path].value.line),v.op==="remove"&&c.pointers[v.path]&&(C=(0,l.get)(u,P),M=c.pointers[v.path].value.line),{op:v.op,value:D,path:P,originalValue:C,startLineNumber:M}}),h=s=>(0,l.sortBy)(s,"startLineNumber"),y=s=>s.reduce((v,C)=>{const D=C.path[0];return v[D]||(v[D]=[]),v[D].push(C),v},{});return(0,l.flow)([p,h,y])(f)},g=(u,i=!0)=>{const f=(0,l.last)(u.path),c=m(f),E=u.op==="remove"?u.originalValue:u.value;let p=d(u.op);return i&&(c?p+=` item ${f}`:(0,l.isArray)(E)&&!(0,l.isEmpty)(E)?p+=` ${E.length} ${f}`:p+=` ${f}`),p},m=u=>!(0,l.isNaN)((0,l.toNumber)(u)),d=u=>u==="add"?"added":u==="remove"?"deleted":"changed"},74482:(J,R,e)=>{"use strict";e.d(R,{A:()=>d});var n=e(86261),a=e(92403),l=e(77877);const r=100;class o{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new n.X(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const i=Date.now();this.budget=(i-this.lastUpdate)/r;const f=this.ok.getValue(),c=this.budget<=this.threshold;if(f!==c&&this.ok.next(c),this.lastUpdate=i,this.isLive&&this.ok.getValue()&&this.timeRange){let E;for(const p of this.listeners){if(!p.panel.props.isInView)continue;if(i-p.last>=p.intervalMs){if(!E){const{raw:y}=this.timeRange;E={raw:y,from:(0,a.CQ)(i-this.liveTimeOffset),to:(0,a.CQ)(i)}}p.panel.liveTimeChanged(E),p.last=i}}}}}setLiveTimeRange(i){if(this.timeRange=i,this.isLive=i?.raw?.to==="now",this.isLive){const f=l.parse(i.raw.from,!1)?.valueOf(),c=l.parse(i.raw.to,!0)?.valueOf();this.liveTimeOffset=c-f;for(const E of this.listeners)E.intervalMs=m(this.liveTimeOffset,E.panel.props.width)}}listen(i){this.listeners.push({last:this.lastUpdate,panel:i,intervalMs:m(6e4,i.props.width)})}remove(i){this.listeners=this.listeners.filter(f=>f.panel!==i)}updateInterval(i){if(!(!this.timeRange||!this.isLive)){for(const f of this.listeners)if(f.panel===i){f.intervalMs=m(this.liveTimeOffset,f.panel.props.width);return}}}}const g=5*60*1e3;function m(u,i){const f=Math.ceil(u/i/100)*100;return f>g?g:f}const d=new o;setInterval(d.measure,r)},36861:(J,R,e)=>{"use strict";e.d(R,{Bg:()=>s,pD:()=>v});var n=e(6033),a=e.n(n),l=e(86832),r=e.n(l),o=e(52291),g=e.n(o),m=e(71519),d=e(77877),u=e(4148),i=e(13601),f=e(20367),c=e(81583),E=e(8741),p=e(52436),h=e(21308),y=e(97433);class s{constructor(){}_dashboardLoadFailed(M,P){return P=P||!1,{meta:{canStar:!1,isSnapshot:P,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:M}}}loadDashboard(M,P,x){let S;if(M==="script"&&P)S=this._loadScriptedDashboard(P);else if(M==="snapshot"&&P)S=f.ae.get("/api/snapshots/"+P).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0));else if(M==="ds"&&P)S=this._loadFromDatasource(P);else if(M==="public"&&x)S=f.ae.getPublicDashboardByUid(x).then(I=>I).catch(I=>{const T=I.data.statusCode===403&&I.data.messageId==="publicdashboards.notEnabled",O=I.data.statusCode===404&&I.data.messageId==="publicdashboards.notFound",A=this._dashboardLoadFailed(T?"Public Dashboard paused":"Public Dashboard Not found",!0);return{...A,meta:{...A.meta,publicDashboardEnabled:O?void 0:!T,dashboardNotFound:O}}});else if(x)S=f.ae.getDashboardByUid(x).then(I=>{if(I.meta.isFolder)throw h.h$.emit(m.SI.alertError,["Dashboard not found"]),new Error("Dashboard not found");return I}).catch(()=>this._dashboardLoadFailed("Not found",!0));else throw new Error("Dashboard uid or slug required");return S.then(I=>(I.meta.dashboardNotFound!==!0&&c.Z.addDashboardImpression(I.dashboard.uid),I)),S}_loadScriptedDashboard(M){const P="public/dashboards/"+M.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,u.i)().get(P).then(this._executeScript.bind(this)).then(x=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:x.data}),x=>(console.error("Script dashboard error "+x),h.h$.emit(m.SI.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(M){const P=await(0,p.ak)().get(M);if(!P)return Promise.reject("can not find datasource: "+M);const x=new URLSearchParams(window.location.search),S=x.get("path");if(!S)return Promise.reject("expecting path parameter");const I={};return x.forEach((T,O)=>{I[O]=T}),(0,u.i)().get(`/api/datasources/uid/${P.uid}/resources/${S}`,I).then(T=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:T}))}_executeScript(M){const P={dashboardSrv:(0,y.h4)(),datasourceSrv:(0,p.ak)()},S=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",M)(i.E1.getSearchObject(),E.Z,d,r(),g(),window,document,a(),a(),P);return(0,l.isFunction)(S)?new Promise(I=>{S(T=>{I({data:T})})}):{data:S}}}let v=new s;const C=D=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},97433:(J,R,e)=>{"use strict";e.d(R,{h4:()=>E});var n=e(31312),a=e(71519),l=e(28833),r=e(62679),o=e(20367),g=e(44622),m=e(73431),d=e(52002),u=e(30093);class i{constructor(){this.onRemovePanel=h=>{const y=this.getCurrent();y&&(0,u.WJ)(y,y.getPanelById(h),!0)},l.h.subscribe(m.Eb,h=>this.onRemovePanel(h.payload))}create(h,y){return new d.f(h,y)}setCurrent(h){this.dashboard=h}getCurrent(){return this.dashboard}saveJSONDashboard(h){const y=JSON.parse(h);return(0,g.uC)({dashboard:y,folderUid:this.dashboard?.meta.folderUid||y.folderUid})}saveDashboard(h,y){return(0,n.n)((0,o.i)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...h,dashboard:h.dashboard.getSaveModelClone()},...y}))}starDashboard(h,y){const s=(0,o.i)(),v={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+h,method:y?"DELETE":"POST"};return s.request(v).then(()=>{const C=!y;this.dashboard?.uid===h&&(this.dashboard.meta.isStarred=C);const D=C?(0,r.t)("notifications.starred-dashboard","Dashboard starred"):(0,r.t)("notifications.unstarred-dashboard","Dashboard unstarred");return l.h.emit(a.SI.alertSuccess,[D]),C})}}let f;function c(p){f=p}function E(){return f||(f=new i),f}},6278:(J,R,e)=>{"use strict";e.d(R,{$t:()=>C});var n=e(86832),a=e(92403),l=e(54554),r=e(81626),o=e(77877),g=e(13601),m=e(74502),d=e(28833),u=e(50820),i=e(97125),f=e(56858),c=e(20111),E=e(73431),p=e(82563);function h({urlRefresh:D,currentRefresh:M,isAllowedIntervalFn:P,minRefreshInterval:x,refreshIntervals:S=p.o5}){if(!D)return M;const I=P(D),T=S.find(O=>O===D);if(!I||!T){const O=x?S.find(B=>B===x):void 0,A=S?.length?S[0]:void 0;return O??A??M}return D||M}class y{constructor(M){this.contextSrv=M,this.timeRangeForUrl=()=>{const P=this.timeRange().raw;return(0,a.v9)(P.from)&&(P.from=P.from.valueOf().toString()),(0,a.v9)(P.to)&&(P.to=P.to.valueOf().toString()),P},this.time=(0,l.JK)().raw,this.timeAtLoad=(0,l.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),d.Z.subscribe(E.p8,P=>{this.zoomOut(P.payload.scale,P.payload.updateUrl)}),d.Z.subscribe(E.Qt,P=>{this.shiftTime(P.payload.direction,P.payload.updateUrl)}),d.Z.subscribe(E.QI,P=>{this.makeAbsoluteTime(P.payload.updateUrl)}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(M){this.timeModel=M,this.time=M.time,this.refresh=M.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,n.cloneDeep)(this.time);const P=r.convertRawToRange(this.time,this.timeModel?.getTimezone(),this.timeModel?.fiscalYearStartMonth);P.to.isBefore(P.from)&&this.setTime({from:P.raw.to,to:P.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(M){return this.contextSrv.getValidIntervals(M)}parseTime(){(0,n.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,a.CQ)(this.time.from).utc()),(0,n.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,a.CQ)(this.time.to).utc())}parseUrlParam(M){if(M.indexOf("now")!==-1)return M;if(M.length===8){const P=(0,a.zh)(M,"YYYYMMDD");if(P.isValid())return P}else if(M.length===15){const P=(0,a.zh)(M,"YYYYMMDDTHHmmss");if(P.isValid())return P}if(!isNaN(Number(M))){const P=parseInt(M,10);return(0,a.zh)(P)}return null}getTimeWindow(M,P){const x=parseInt(M,10);let S;return P.match(/^\d+$/)&&parseInt(P,10)?S=parseInt(P,10):S=r.intervalToMs(P),{from:(0,a.zh)(x-S/2),to:(0,a.zh)(x+S/2)}}initTimeFromUrl(){if(u.config.publicDashboardAccessToken&&this.timeModel?.timepicker?.hidden)return;const M=g.E1.getSearch();M.get("time")&&M.get("time.window")&&(this.time=this.getTimeWindow(M.get("time"),M.get("time.window"))),M.get("from")&&(this.time.from=this.parseUrlParam(M.get("from"))||this.time.from),M.get("to")&&(this.time.to=this.parseUrlParam(M.get("to"))||this.time.to),M.get("to")&&M.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=h({urlRefresh:M.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:u.config.minRefreshInterval})}updateTimeRangeFromUrl(){const M=g.E1.getSearch();if(M.get("left"))return;const P=this.timeRangeForUrl(),x=M.get("from"),S=M.get("to");x&&S?(x!==P.from||S!==P.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(M){this.timeModel&&(this.timeModel.refresh=M),this.stopAutoRefresh();const P=g.E1.getSearchObject();if(!M){P.refresh&&g.E1.partial({refresh:null},!0);return}let x=M,S=60*1e3;M===i.Wg?S=this.getAutoRefreshInteval().intervalMs:(x=this.contextSrv.getValidInterval(M),S=r.intervalToMs(x)),this.refreshMS=S,this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(S),this.refreshTimeModel()},S),P.refresh!==x&&g.E1.partial({refresh:x},!0)}getAutoRefreshInteval(){const M=window?.innerWidth??2e3;return r.calculateInterval(this.timeRange(),M,u.config.minRefreshInterval)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(M){this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(M),this.contextSrv.isGrafanaVisible()?this.refreshTimeModel():this.autoRefreshBlocked=!0},M)}stopAutoRefresh(){clearTimeout(this.refreshTimer),this.refreshTimer=void 0,this.refreshMS=void 0}resumeAutoRefresh(){this.timeModel?.refresh&&this.setAutoRefresh(this.timeModel.refresh)}setTime(M,P=!0){if((0,n.extend)(this.time,M),(0,a.v9)(M.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=void 0),P===!0){const x=this.timeRangeForUrl(),S=g.E1.getSearchObject();if(S.from===x.from.toString()&&S.to===x.to.toString())return;S.from=x.from.toString(),S.to=x.to.toString(),g.E1.partial(S)}this.timeModel?.refresh===i.Wg&&this.getAutoRefreshInteval().intervalMs!==this.refreshMS&&this.setAutoRefresh(i.Wg),this.refreshTimeModel()}timeRange(){return window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?m.ep.getTimeRange(window.__grafanaSceneContext).state.value:(0,c.O)(this.time,this.timeModel)}zoomOut(M,P=!0){const x=this.timeRange(),{from:S,to:I}=(0,f.h)(x,M);this.setTime({from:(0,a.zh)(S),to:(0,a.zh)(I)},P)}shiftTime(M,P=!0){const x=this.timeRange(),{from:S,to:I}=(0,f.e)(M,x);this.setTime({from:(0,a.zh)(S),to:(0,a.zh)(I)},P)}makeAbsoluteTime(M){const{from:P,to:x}=this.timeRange();this.setTime({from:P,to:x},M)}isRefreshOutsideThreshold(M,P=.05){const x=this.timeRange();if(o.isMathString(x.raw.from)){const S=x.to.diff(x.from),I=Date.now()-M,T=S*P;return I>=T}return!1}}let s;function v(D){s=D}function C(){return s||(s=new y(i.contextSrv)),s}},39724:(J,R,e)=>{"use strict";e.d(R,{o:()=>K,p:()=>k});var n=e(86832),a=e(18985),l=e(69084),r=e(47635),o=e(69307),g=e(24824),m=e(23955),d=e(49231),u=e(86981),i=e(89591),f=e(20788),c=e(55971),E=e(26205),p=e(34547),h=e(900),y=e(92756),s=e(50820),v=e(74602);function C(oe){return Array.from(new Array(oe+1),(te,fe)=>fe).filter(te=>oe%te===0)}var D=e(8741),M=e(52436),P=e(92101),x=e(84096),S=e(24677),I=e(45587),T=e(88294),O=e(78354),A=e(8130);function B(oe,te){const fe=[];if(oe?.statistics&&oe?.statistics.length){oe.statistic=oe.statistics[0];for(const Te of oe.statistics.splice(1))fe.push({...oe,statistic:Te})}for(const Te of fe)Te.refId=(0,O.Hs)(te),delete Te.statistics,te.push(Te);return delete oe.statistics,fe}function b(oe){const te=[];if(oe&&"statistics"in oe&&oe?.statistics?.length){for(const fe of oe.statistics.splice(1)){const{statistics:Te,name:ge,...he}=oe;te.push({...he,statistic:fe,name:`${ge} - ${fe}`})}oe.statistic=oe.statistics[0],te.length!==0&&(oe.name=`${oe.name} - ${oe.statistic}`),delete oe.statistics}return te}function W(oe){oe.hasOwnProperty("metricQueryType")||(oe.metricQueryType=A.$5.Search),oe.hasOwnProperty("metricEditorMode")||(oe.metricQueryType===A.$5.Query?oe.metricEditorMode=A.MQ.Code:oe.metricEditorMode=oe.expression?A.MQ.Code:A.MQ.Builder)}var V=e(68734),w=e(6947);a.S.setInit(y.u),a.N.setInit(y.l);class K{constructor(te){this.dashboard=te,(0,E.F)()||(0,E.w)(new M.ND)}updateSchema(te){let fe,Te,ge,he;const me=this.dashboard.schemaVersion,ye=[];if(this.dashboard.schemaVersion=38,me!==this.dashboard.schemaVersion){if(me<2&&(te.services&&te.services.filter&&(this.dashboard.time=te.services.filter.time,this.dashboard.templating.list=te.services.filter.list||[]),ye.push(ue=>(ue.type==="graphite"&&(ue.type="graph"),ue.type!=="graph"||((0,n.isBoolean)(ue.legend)&&(ue.legend={show:ue.legend}),ue.grid&&(ue.grid.min&&(ue.grid.leftMin=ue.grid.min,delete ue.grid.min),ue.grid.max&&(ue.grid.leftMax=ue.grid.max,delete ue.grid.max)),ue.y_format&&(ue.y_formats||(ue.y_formats=[]),ue.y_formats[0]=ue.y_format,delete ue.y_format),ue.y2_format&&(ue.y_formats||(ue.y_formats=[]),ue.y_formats[1]=ue.y2_format,delete ue.y2_format)),ue))),me<3){let ue=this.dashboard.getNextPanelId();ye.push(Oe=>(Oe.id||(Oe.id=ue,ue+=1),Oe))}if(me<4&&ye.push(ue=>(ue.type!=="graph"||((0,n.each)(ue.aliasYAxis,(Oe,Ue)=>{ue.seriesOverrides=[{alias:Ue,yaxis:Oe}]}),delete ue.aliasYAxis),ue)),me<6){const ue=(0,n.find)(te.pulldowns,{type:"annotations"});for(ue&&(this.dashboard.annotations={list:ue.annotations||[]}),fe=0;fe<this.dashboard.templating.list.length;fe++){const Oe=this.dashboard.templating.list[fe];Oe.datasource===void 0&&(Oe.datasource=null),Oe.type==="filter"&&(Oe.type="query"),Oe.type===void 0&&(Oe.type="query"),Oe.allFormat===void 0&&delete Oe.allFormat}}if(me<7&&(te.nav&&te.nav.length&&(this.dashboard.timepicker=te.nav[0]),ye.push(ue=>((0,n.each)(ue.targets,Oe=>{Oe.refId||(Oe.refId=ue.getNextQueryLetter&&ue.getNextQueryLetter())}),ue))),me<8&&ye.push(ue=>((0,n.each)(ue.targets,Oe=>{Oe.fields&&Oe.tags&&Oe.groupBy&&(Oe.rawQuery?(delete Oe.fields,delete Oe.fill):(Oe.select=(0,n.map)(Oe.fields,Ue=>{const at=[];return at.push({type:"field",params:[Ue.name]}),at.push({type:Ue.func,params:[]}),Ue.mathExpr&&at.push({type:"math",params:[Ue.mathExpr]}),Ue.asExpr&&at.push({type:"alias",params:[Ue.asExpr]}),at}),delete Oe.fields,(0,n.each)(Oe.groupBy,Ue=>{Ue.type==="time"&&Ue.interval&&(Ue.params=[Ue.interval],delete Ue.interval),Ue.type==="tag"&&Ue.key&&(Ue.params=[Ue.key],delete Ue.key)}),Oe.fill&&(Oe.groupBy.push({type:"fill",params:[Oe.fill]}),delete Oe.fill)))}),ue)),me<9&&ye.push(ue=>{if(ue.type!=="singlestat"&&ue.thresholds!=="")return ue;if(ue.thresholds){const Oe=ue.thresholds.split(",");Oe.length>=3&&(Oe.shift(),ue.thresholds=Oe.join(","))}return ue}),me<10&&ye.push(ue=>(ue.type!=="table"||(0,n.each)(ue.styles,Oe=>{if(Oe.thresholds&&Oe.thresholds.length>=3){const Ue=Oe.thresholds;Ue.shift(),Oe.thresholds=Ue}}),ue)),me<12&&(0,n.each)(this.dashboard.getVariables(),ue=>{ue.refresh&&(ue.refresh=1),ue.refresh||(ue.refresh=0),ue.hideVariable?ue.hide=2:ue.hideLabel&&(ue.hide=1)}),me<12&&ye.push(ue=>(ue.type!=="graph"||!ue.grid||ue.yaxes||(ue.yaxes=[{show:ue["y-axis"],min:ue.grid.leftMin,max:ue.grid.leftMax,logBase:ue.grid.leftLogBase,format:ue.y_formats[0],label:ue.leftYAxisLabel},{show:ue["y-axis"],min:ue.grid.rightMin,max:ue.grid.rightMax,logBase:ue.grid.rightLogBase,format:ue.y_formats[1],label:ue.rightYAxisLabel}],ue.xaxis={show:ue["x-axis"]},delete ue.grid.leftMin,delete ue.grid.leftMax,delete ue.grid.leftLogBase,delete ue.grid.rightMin,delete ue.grid.rightMax,delete ue.grid.rightLogBase,delete ue.y_formats,delete ue.leftYAxisLabel,delete ue.rightYAxisLabel,delete ue["y-axis"],delete ue["x-axis"]),ue)),me<13&&ye.push(ue=>{if(ue.type!=="graph"||!ue.grid)return ue;ue.thresholds||(ue.thresholds=[]);const Oe={},Ue={};return ue.grid.threshold1!==null&&(Oe.value=ue.grid.threshold1,ue.grid.thresholdLine?(Oe.line=!0,Oe.lineColor=ue.grid.threshold1Color,Oe.colorMode="custom"):(Oe.fill=!0,Oe.fillColor=ue.grid.threshold1Color,Oe.colorMode="custom")),ue.grid.threshold2!==null&&(Ue.value=ue.grid.threshold2,ue.grid.thresholdLine?(Ue.line=!0,Ue.lineColor=ue.grid.threshold2Color,Ue.colorMode="custom"):(Ue.fill=!0,Ue.fillColor=ue.grid.threshold2Color,Ue.colorMode="custom")),(0,n.isNumber)(Oe.value)&&((0,n.isNumber)(Ue.value)?Oe.value>Ue.value?(Oe.op=Ue.op="lt",ue.thresholds.push(Oe),ue.thresholds.push(Ue)):(Oe.op=Ue.op="gt",ue.thresholds.push(Oe),ue.thresholds.push(Ue)):(Oe.op="gt",ue.thresholds.push(Oe))),delete ue.grid.threshold1,delete ue.grid.threshold1Color,delete ue.grid.threshold2,delete ue.grid.threshold2Color,delete ue.grid.thresholdLine,ue}),me<14&&(this.dashboard.graphTooltip=te.sharedCrosshair?1:0),me<16&&this.upgradeToGridLayout(te),me<17&&ye.push(ue=>{if(ue.minSpan){const Oe=v.cz/ue.minSpan,Ue=C(v.cz);ue.maxPerRow=Ue[(0,n.findIndex)(Ue,at=>at>Oe)-1]}return delete ue.minSpan,ue}),me<18&&ye.push(ue=>(ue["options-gauge"]&&(ue.options=ue["options-gauge"],ue.options.valueOptions={unit:ue.options.unit,stat:ue.options.stat,decimals:ue.options.decimals,prefix:ue.options.prefix,suffix:ue.options.suffix},ue.options.thresholds&&ue.options.thresholds.reverse(),delete ue.options.options,delete ue.options.unit,delete ue.options.stat,delete ue.options.decimals,delete ue.options.prefix,delete ue.options.suffix,delete ue["options-gauge"]),ue)),me<19&&ye.push(ue=>(ue.links&&(0,n.isArray)(ue.links)&&(ue.links=ue.links.map(Q)),ue)),me<20){const ue=Oe=>({...Oe,url:j(Oe.url)});ye.push(Oe=>(Oe.options&&Oe.options.dataLinks&&(0,n.isArray)(Oe.options.dataLinks)&&(Oe.options.dataLinks=Oe.options.dataLinks.map(ue)),Oe.options&&Oe.options.fieldOptions&&Oe.options.fieldOptions.defaults&&(Oe.options.fieldOptions.defaults.links&&(0,n.isArray)(Oe.options.fieldOptions.defaults.links)&&(Oe.options.fieldOptions.defaults.links=Oe.options.fieldOptions.defaults.links.map(ue)),Oe.options.fieldOptions.defaults.title&&(Oe.options.fieldOptions.defaults.title=j(Oe.options.fieldOptions.defaults.title))),Oe))}if(me<21){const ue=Oe=>({...Oe,url:Oe.url.replace(/__series.labels/g,"__field.labels")});ye.push(Oe=>(Oe.options&&Oe.options.dataLinks&&(0,n.isArray)(Oe.options.dataLinks)&&(Oe.options.dataLinks=Oe.options.dataLinks.map(ue)),Oe.options&&Oe.options.fieldOptions&&Oe.options.fieldOptions.defaults&&Oe.options.fieldOptions.defaults.links&&(0,n.isArray)(Oe.options.fieldOptions.defaults.links)&&(Oe.options.fieldOptions.defaults.links=Oe.options.fieldOptions.defaults.links.map(ue)),Oe))}if(me<22&&ye.push(ue=>(ue.type!=="table"||(0,n.each)(ue.styles,Oe=>{Oe.align="auto"}),ue)),me<23)for(const ue of this.dashboard.templating.list){if(!(0,P.U4)(ue))continue;const{multi:Oe,current:Ue}=ue;(0,l.Q)(Ue)||(ue.current=(0,x.x)(Ue,Oe))}if(me<24&&ye.push(ue=>{const Oe=ue.type==="table";if(Oe&&!ue.styles)return ue;const Ue=ue.table==="table2";return!Oe||Ue||(ue.type=Oe?"table-old":"table"),ue}),me<25,me<26&&ye.push(ue=>(ue.type==="text2"&&(ue.type="text",delete ue.options.angular),ue)),me<27&&(this.removeRepeatedPanels(),this.dashboard.templating.list=this.dashboard.templating.list.map(ue=>{if(!(0,P.VC)(ue))return ue;const Oe={...ue};return Oe.current={selected:!0,text:Oe.query??"",value:Oe.query??""},Oe.options=[Oe.current],Oe.hide===V.bU.dontHide||Oe.hide===V.bU.hideLabel?{...Oe,type:"textbox"}:Oe})),me<28){ye.push(ue=>ue.type==="singlestat"?F(ue):ue);for(const ue of this.dashboard.templating.list)ue.tags&&delete ue.tags,ue.tagsQuery&&delete ue.tagsQuery,ue.tagValuesQuery&&delete ue.tagValuesQuery,ue.useTags&&delete ue.useTags}if(me<29)for(const ue of this.dashboard.templating.list)ue.type==="query"&&(ue.refresh!==1&&ue.refresh!==2&&(ue.refresh=1),ue.options?.length&&(ue.options=[]));if(me<30&&(ye.push(Y),ye.push(q)),me<31&&ye.push(ue=>{if(ue.transformations){for(const Oe of ue.transformations)if(Oe.id===f.r.id)return _(ue,f.r.id,{id:c.R.id,options:{}})}return ue}),me<32,me<33&&ye.push(ue=>{if(ue.datasource=k(ue.datasource,{returnDefaultAsNull:!0}),!ue.targets)return ue;for(const Oe of ue.targets){const Ue=k(Oe.datasource,{returnDefaultAsNull:!0});Ue!=null&&(Oe.datasource=Ue)}return ue}),me<34&&(ye.push(ue=>(this.migrateCloudWatchQueries(ue),ue)),this.migrateCloudWatchAnnotationQuery()),me<35&&ye.push(De),me<36){for(const Oe of this.dashboard.annotations.list)Oe.datasource=k(Oe.datasource,{returnDefaultAsNull:!1});const ue=(0,E.F)().getInstanceSettings(null);if(ue){for(const Oe of this.dashboard.templating.list)Oe.type==="query"&&Oe.datasource===null&&(Oe.datasource=(0,r.iU)(ue));ye.push(Oe=>{if(Oe.targets){let Ue=!1;Oe.datasource==null&&Oe.targets.length>0&&(Oe.datasource=(0,r.iU)(ue),Ue=!0);for(const at of Oe.targets)(at.datasource==null||at.datasource.uid==null)&&(Oe.datasource?.uid!==S.D?at.datasource={...Oe.datasource}:at.datasource=k(at.datasource,{returnDefaultAsNull:!1})),Ue&&at.datasource?.uid!=="__expr__"&&(Oe.datasource=at.datasource)}return Oe})}}if(me<37&&ye.push(ue=>(ue.options?.legend&&(ue.options.legend.displayMode==="hidden"||ue.options.legend.showLegend===!1)?(ue.options.legend.displayMode="list",ue.options.legend.showLegend=!1):ue.options?.legend&&(ue.options.legend={...ue.options?.legend,showLegend:!0}),ue)),me<38&&ye.push(ue=>{if(ue.type==="table"&&ue.fieldConfig!==void 0){const Oe=ue.fieldConfig.defaults?.custom?.displayMode;if(Oe!==void 0&&(ue.fieldConfig.defaults.custom.cellOptions=(0,h.q7)(Oe),delete ue.fieldConfig.defaults.custom.displayMode),ue.fieldConfig?.overrides)for(const Ue of ue.fieldConfig.overrides)for(let at=0;at<Ue.properties?.length;at++){let Ne=Ue.properties[at].value;Ue.properties[at].id==="custom.displayMode"&&(Ue.properties[at].id="custom.cellOptions",Ue.properties[at].value=(0,h.q7)(Ne))}}return ue}),ye.length!==0)for(Te=0;Te<this.dashboard.panels.length;Te++)for(ge=0;ge<ye.length;ge++){this.dashboard.panels[Te]=ye[ge].call(this,this.dashboard.panels[Te]);const ue=this.dashboard.panels[Te].panels;if(ue)for(he=0;he<ue.length;he++)ue[he]=ye[ge].call(this,ue[he])}}}removeRepeatedPanels(){const te=[];for(const fe of this.dashboard.panels)fe.repeatPanelId||fe.repeatByRow||(fe.type==="row"&&Array.isArray(fe.panels)&&(fe.panels=fe.panels.filter(Te=>!Te.repeatPanelId)),te.push(fe));this.dashboard.panels=te}migrateCloudWatchQueries(te){for(const fe of te.targets||[])if(Z(fe)&&(W(fe),fe.hasOwnProperty("statistics"))){const Te=B(fe,[...te.targets]);for(const ge of Te)te.targets.push(ge)}}migrateCloudWatchAnnotationQuery(){for(const te of this.dashboard.annotations.list)if(ae(te)){const fe=b(te);for(const Te of fe)this.dashboard.annotations.list.push(Te)}}upgradeToGridLayout(te){let fe=0;const Te=v.cz/12;let he=(0,n.max)((0,n.flattenDeep)((0,n.map)(te.rows,ye=>(0,n.map)(ye.panels,"id"))))+1;if(!te.rows)return;const me=(0,n.some)(te.rows,ye=>ye.collapse||ye.showTitle||ye.repeat);for(const ye of te.rows){if(ye.repeatIteration)continue;const ue=ye.height||v.b0,Oe=z(ue),Ue={};let at;me&&(Ue.id=he,Ue.type="row",Ue.title=ye.title,Ue.collapsed=ye.collapse,Ue.repeat=ye.repeat,Ue.panels=[],Ue.gridPos={x:0,y:fe,w:v.cz,h:Oe},at=new w.rY(Ue),he++,fe++);const Ne=new G(Oe,v.cz,fe);for(const _e of ye.panels){_e.span=_e.span||v.kh,_e.minSpan&&(_e.minSpan=Math.min(v.cz,v.cz/12*_e.minSpan));const Ke=Math.floor(_e.span)*Te,et=_e.height?z(_e.height):Oe,ze=Ne.getPanelPosition(et,Ke);fe=Ne.yPos,_e.gridPos={x:ze.x,y:fe+ze.y,w:Ke,h:et},Ne.addPanel(_e.gridPos),delete _e.span,at&&Ue.collapsed?at.panels?.push(_e):this.dashboard.panels.push(new w.rY(_e))}at&&this.dashboard.panels.push(at),at&&Ue.collapsed||(fe+=Oe)}}}function z(oe){return(0,n.isString)(oe)&&(oe=parseInt(oe.replace("px",""),10)),oe<v.AV&&(oe=v.AV),Math.ceil(oe/(v.K3+v.hD))}class G{constructor(te,fe=v.cz,Te=0){this.area=new Array(fe).fill(0),this.yPos=Te,this.height=te}reset(){this.area.fill(0)}addPanel(te){for(let fe=te.x;fe<te.x+te.w;fe++)(!this.area[fe]||te.y+te.h-this.yPos>this.area[fe])&&(this.area[fe]=te.y+te.h-this.yPos);return this.area}getPanelPosition(te,fe,Te=!1){let ge,he,me;for(let ye=this.area.length-1;ye>=0&&this.height-this.area[ye]>0;ye--)if(he===void 0)he=ye;else if(ye<this.area.length-1&&this.area[ye]<=this.area[ye+1])ge=ye;else break;if(ge!==void 0&&he!==void 0&&he-ge>=fe-1){const ye=(0,n.max)(this.area.slice(ge));me={x:ge,y:ye}}else return Te?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(te,fe,!0));return me}}function Q(oe){let te=oe.url;return!te&&oe.dashboard&&(te=`dashboard/db/${D.Z.slugifyForUrl(oe.dashboard)}`),!te&&oe.dashUri&&(te=`dashboard/${oe.dashUri}`),te||(te="/"),oe.keepTime&&(te=o.Cj.appendQueryToUrl(te,`$${g.W.keepTime}`)),oe.includeVars&&(te=o.Cj.appendQueryToUrl(te,`$${g.W.includeVars}`)),oe.params&&(te=o.Cj.appendQueryToUrl(te,oe.params)),{url:te,title:oe.title,targetBlank:oe.targetBlank}}function j(oe){const te=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return oe.replace(te,(fe,Te,ge,he,me,ye)=>Te?"__series.name":ge?"${__series.name}":he?"__value.time":me?"__field.name":ye?"${__field.name}":fe)}function F(oe){if(s.config.panels["grafana-singlestat-panel"])return oe.type="grafana-singlestat-panel",oe;let te=!1;return oe.changePlugin||(te=!0,oe=new w.rY(oe)),oe.plugin={angularPanelCtrl:{}},oe.gauge?.show?(I.plugin.meta=s.config.panels.gauge,oe.changePlugin(I.plugin)):(T.plugin.meta=s.config.panels.stat,oe.changePlugin(T.plugin)),te?oe.getSaveModel():oe}function k(oe,te){if(te.returnDefaultAsNull&&(oe==null||oe==="default"))return null;if((0,r.cv)(oe))return oe;const fe=(0,E.F)().getInstanceSettings(oe);return fe?(0,r.iU)(fe):{uid:oe||void 0}}function _(oe,te,fe){if(oe.transformations){const Te=[];for(const ge of oe.transformations)Te.push(ge),ge.id===te&&Te.push({...fe});oe.transformations=Te}return oe}function Y(oe){const te=oe.fieldConfig;if(!te)return oe;if(te.defaults&&te.defaults.mappings&&(te.defaults.mappings=ce(te.defaults.mappings,te.defaults.thresholds)),Array.isArray(te.overrides))for(const fe of te.overrides)for(const Te of fe.properties)Te.id==="mappings"&&(Te.value=ce(Te.value));return oe}function Z(oe){return oe.hasOwnProperty("dimensions")&&oe.hasOwnProperty("namespace")&&oe.hasOwnProperty("region")&&oe.hasOwnProperty("metricName")}function ae(oe){return oe.hasOwnProperty("dimensions")&&oe.hasOwnProperty("namespace")&&oe.hasOwnProperty("region")&&oe.hasOwnProperty("prefixMatching")&&oe.hasOwnProperty("statistics")}function ce(oe,te){if(!oe)return;const fe={type:m.H.ValueToText,options:{}},Te=[];for(const ge of oe){if(ge.type&&ge.options){ge.type===m.H.ValueToText?fe.options={...fe.options,...ge.options}:Te.push(ge);continue}let he;const me=parseFloat(ge.text);if(te&&!isNaN(me)){const ye=(0,d.m1)(me,te.steps);ye&&ye.color&&(he=ye.color)}switch(ge.type){case 1:ge.value!=null&&(ge.value==="null"?Te.push({type:m.H.SpecialValue,options:{match:m.e.Null,result:{text:ge.text,color:he}}}):fe.options[String(ge.value)]={text:ge.text,color:he});break;case 2:Te.push({type:m.H.RangeToText,options:{from:+ge.from,to:+ge.to,result:{text:ge.text,color:he}}});break}}return Object.keys(fe.options).length>0&&Te.unshift(fe),Te}function q(oe){return(oe.type==="timeseries"||oe.type==="xychart")&&oe.options.tooltipOptions&&(oe.options={...oe.options,tooltip:oe.options.tooltipOptions},delete oe.options.tooltipOptions),oe}function De(oe){return oe.type==="timeseries"&&oe.fieldConfig?.defaults.custom?.axisPlacement===p.LB.Hidden&&(oe.fieldConfig={...oe.fieldConfig,overrides:[...oe.fieldConfig.overrides,{matcher:{id:u.mi.byType,options:i.fS.time},properties:[{id:"custom.axisPlacement",value:p.LB.Auto}]}]}),oe}},52002:(J,R,e)=>{"use strict";e.d(R,{f:()=>w});var n=e(86832),a=e(31544),l=e(91395),r=e(48069),o=e(92403),g=e(32688),m=e(77014),d=e(14312),u=e(74602),i=e(97125),f=e(27554),c=e(2106),E=e(16261),p=e(87863),h=e(45882),y=e(57721),s=e(73431),v=e(21308),C=e(74600),D=e(68734),M=e(49955),P=e(6278),x=e(75397);const S=new Set(["gridPos","title","description","transparent"]);function I(G,Q){const j=[],F={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:j};let k=0;const _=new Map;for(let Y of Q){let{id:Z}=Y;Z||(k||(k=O([G,Q])),Z=k++,Y={...Y,id:Z}),_.set(Z,Y)}for(const Y of G){const Z=_.get(Y.id);if(!Z){F.changed=!0,F.actions.remove.push(Y.id),Y.destroy();continue}if(_.delete(Y.id),Z===Y){j.push(Y),F.actions.noop.push(Y.id);continue}if(Y.type===Z.type){const ce=Y.getSaveModel();let q=!0,De=!1;for(const[oe,te]of Object.entries(Z))if(!(0,n.isEqualWith)(te,ce[oe],T))if(F.changed=!0,q=!1,S.has(oe))Y[oe]=te,De=!0;else{De=!1;break}if(q){j.push(Y),F.actions.noop.push(Y.id);continue}if(De){j.push(Y),F.actions.update.push(Y.id);continue}}Y.destroy();const ae=new x.r(Z);ae.key=`${ae.id}-update-${Date.now()}`,j.push(ae),F.changed=!0,F.actions.replace.push(Y.id)}for(const Y of _.values())j.push(new x.r(Y)),F.changed=!0,F.actions.add.push(Y.id);return F}function T(G,Q){if(G==null&&(Q===1/0||Q===-1/0||Q==null)||Q==null&&(G===1/0||G===-1/0||G==null))return!0}function O(G){let Q=0;for(const j of G)for(const F of j)F.id>Q&&(Q=F.id);return Q+1}var A=e(39724),B=e(6947);function b(G,Q){return G.repeatDirection===u.yM?!1:Q.gridPos.x>=G.gridPos.x+G.gridPos.w&&Q.gridPos.y===G.gridPos.y}function W(G){for(const Q of G)if(delete Q.scopedVars,Q.panels?.length)for(const j of Q.panels)delete j.scopedVars}const V=class{constructor(G,Q,j){if(this.timeRangeUpdatedDuringEdit=!1,this.originalDashboard=null,this.getVariablesFromState=j?.getVariablesFromState??h.gt,this.events=new l.F,this.id=G.id||null,this.uid=G.uid||null,this.revision=G.revision??void 0,this.title=G.title??"No Title",this.description=G.description,this.tags=G.tags??[],this.timezone=G.timezone??"",this.weekStart=G.weekStart??"",this.editable=G.editable!==!1,this.graphTooltip=G.graphTooltip||0,this.time=G.time??{from:"now-6h",to:"now"},this.timepicker=G.timepicker??{},this.liveNow=!!G.liveNow,this.templating=this.ensureListExist(G.templating),this.annotations=this.ensureListExist(G.annotations),this.refresh=G.refresh||"",this.snapshot=G.snapshot,this.schemaVersion=G.schemaVersion??0,this.fiscalYearStartMonth=G.fiscalYearStartMonth??0,this.version=G.version??0,this.links=G.links??[],this.gnetId=G.gnetId||null,this.panels=(0,n.map)(G.panels??[],F=>new B.rY(F)),this.originalDashboard=(0,n.cloneDeep)(G),this.originalTemplating=(0,n.cloneDeep)(this.templating),this.originalTime=(0,n.cloneDeep)(this.time),this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.initMeta(Q),this.updateSchema(G),j?.autoMigrateOldPanels||!g.config.angularSupportEnabled||g.config.featureToggles.autoMigrateOldPanels)for(const F of this.panelIterator()){const k=B.G7[F.type];!F.autoMigrateFrom&&k&&(F.autoMigrateFrom=F.type,F.type=k)}this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new a.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(v.h$.subscribe(D.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(v.h$.subscribe(D.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(v.h$.subscribe(D.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(Q=>Q.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:d.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(G){G=G||{},G.canShare=G.canShare!==!1,G.canSave=G.canSave!==!1,G.canStar=G.canStar!==!1,G.canEdit=G.canEdit!==!1,G.canDelete=G.canDelete!==!1,G.showSettings=G.canEdit,G.canMakeEditable=G.canSave&&!this.editable,G.hasUnsavedFolderChange=!1,this.editable||(G.canEdit=!1,G.canDelete=!1,G.canSave=!1),this.meta=G}getSaveModelCloneOld(G){const Q=(0,n.defaults)(G||{},{saveVariables:!0,saveTimerange:!0});let j={};for(const F in this)V.nonPersistedProperties[F]||!this.hasOwnProperty(F)||(j[F]=(0,n.cloneDeep)(this[F]));return j.templating=this.getTemplatingSaveModel(Q),Q.saveTimerange||(j.time=this.originalTime),j.panels=this.getPanelSaveModels(),j=(0,f.M)(j),j.getVariables=()=>j.templating.list,j}getSaveModelClone(G){const Q=this.getSaveModelCloneOld(G),j=JSON.stringify(Q);return JSON.parse(j)}updatePanels(G){const Q=I(this.panels,G??[]);return Q.changed&&(this.panels=Q.panels??[],this.sortPanelsByGridPos(),this.events.publish(new s._B)),Q}getPanelSaveModels(){return this.panels.filter(G=>this.isSnapshotTruthy()||!(G.type==="add-panel"||G.repeatPanelId||G.repeatedByRow)).map(G=>{if(G.libraryPanel){const{id:Q,title:j,libraryPanel:F,gridPos:k}=G;return{id:Q,title:j,gridPos:k,libraryPanel:{uid:F.uid,name:F.name}}}return this.panelInEdit&&this.panelInEdit.id===G.id?this.panelInEdit.getSaveModel():G.getSaveModel()}).map(G=>(this.isSnapshotTruthy()||(delete G.scopedVars,G.type==="row"&&G.panels&&G.panels.length>0&&(G.panels=G.panels.filter(Q=>!Q.repeatPanelId).map(Q=>(delete Q.scopedVars,Q)))),G))}getTemplatingSaveModel(G){const Q=this.originalTemplating?.list??[],F=this.getVariablesFromState(this.uid).map(_=>{const Y=E.z.get(_.type).getSaveModel(_,G.saveVariables);if(!G.saveVariables){const Z=Q.find(({name:ae,type:ce})=>ae===_.name&&ce===_.type);if(!Z)return Y;_.type==="adhoc"?Y.filters=Z.filters:(Y.current=Z.current,Y.options=Z.options)}return Y});return{list:(0,f.M)(F)}}timeRangeUpdated(G){this.events.publish(new m.md(G)),(0,C.WI)((0,p.DU)(this.uid,G)),this.panelInEdit&&(this.timeRangeUpdatedDuringEdit=!0)}startRefresh(G={refreshAll:!0,panelIds:[]}){if(this.events.publish(new m.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(G.refreshAll||G.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const Q of this.panels)!this.otherPanelInFullscreen(Q)&&(G.refreshAll||G.panelIds.includes(Q.id))&&Q.refresh()}render(){this.events.publish(new s._z);for(const G of this.panels)G.render()}panelInitialized(G){const Q=G.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(G)&&!Q&&G.refresh()}otherPanelInFullscreen(G){return(this.panelInEdit||this.panelInView)&&!(G.isViewing||G.isEditing)}initEditPanel(G){return(0,P.$t)().stopAutoRefresh(),this.panelInEdit=G.getEditClone(),this.timeRangeUpdatedDuringEdit=!1,this.panelInEdit}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,P.$t)().resumeAutoRefresh(),(this.panelsAffectedByVariableChange||this.timeRangeUpdatedDuringEdit)&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange??[],refreshAll:this.timeRangeUpdatedDuringEdit}),this.panelsAffectedByVariableChange=null,this.timeRangeUpdatedDuringEdit=!1)}initViewPanel(G){this.panelInView=G,G.setIsViewing(!0)}exitViewPanel(G){this.panelInView=void 0,G.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveUniqueIds(){const G=new Set;let Q=this.getNextPanelId();for(const j of this.panelIterator())(!j.id||G.has(j.id))&&(j.id=Q++),G.add(j.id)}ensureListExist(G={}){return G.list??=[],G}getNextPanelId(){let G=0;for(const Q of this.panelIterator())Q.id>G&&(G=Q.id);return G+1}*panelIterator(){for(const G of this.panels){yield G;const Q=G.panels??[];for(const j of Q)yield j}}forEachPanel(G){for(let Q=0;Q<this.panels.length;Q++)G(this.panels[Q],Q)}getPanelById(G){return this.panelInEdit&&this.panelInEdit.id===G?this.panelInEdit:this.panels.find(Q=>Q.id===G)??null}canEditPanel(G){return!!(this.meta.canEdit&&G&&!G.repeatPanelId&&G.type!=="row")}canEditPanelById(G){return this.canEditPanel(this.getPanelById(G))}addPanel(G){G.id=this.getNextPanelId(),this.panels.unshift(new B.rY(G)),this.sortPanelsByGridPos(),this.events.publish(new s._B)}updateMeta(G){this.meta={...this.meta,...G},this.events.publish(new s.hS)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((G,Q)=>G.gridPos.y===Q.gridPos.y?G.gridPos.x-Q.gridPos.x:G.gridPos.y-Q.gridPos.y)}clearUnsavedChanges(G,Q){for(const j of this.panels)j.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0),this.originalDashboard=G,this.originalTemplating=G.templating,Q.saveTimerange&&(this.originalTime=G.time)}hasUnsavedChanges(){return!!this.panels.find(Q=>Q.hasChanged)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;W(this.panels);const G=this.panels.filter(Q=>(!Q.repeat||Q.repeatedByRow)&&Q.repeatPanelId);(0,n.pull)(this.panels,...G),G.map(Q=>Q.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables()||this.panelInView)){this.cleanUpRepeats();for(let G=0;G<this.panels.length;G++){const Q=this.panels[G];Q.repeat&&this.repeatPanel(Q,G)}this.sortPanelsByGridPos(),this.events.publish(new s._B)}}cleanUpRowRepeats(G){const Q=G.map(F=>F.id),j=G.filter(F=>!F.repeat&&F.repeatPanelId&&Q.includes(F.repeatPanelId));(0,n.pull)(G,...j),(0,n.pull)(this.panels,...j)}processRowRepeats(G){if(this.isSnapshotTruthy()||!this.hasVariables())return;let Q=G.panels??[];if(!G.collapsed){const j=this.panels.findIndex(F=>F.id===G.id);Q=this.getRowPanels(j)}this.cleanUpRowRepeats(Q);for(const j of Q)if(j.repeat){const F=this.panels.findIndex(k=>k.id===j.id);this.repeatPanel(j,F)}}getPanelRepeatClone(G,Q,j){if(Q===0)return G;const F=G.getSaveModel();F.id=this.getNextPanelId();const k=new B.rY(F);return this.panels.splice(j+Q,0,k),k.repeatPanelId=G.id,k.repeat=void 0,this.panelInView?.id===k.id&&(k.setIsViewing(!0),this.panelInView=k),k}getRowRepeatClone(G,Q,j){if(Q===0){if(!G.collapsed){const Y=this.getRowPanels(j);G.panels=Y}return G}const F=new B.rY(G.getSaveModel());let k,_;return G.collapsed?(k=(0,n.cloneDeep)(G.panels)??[],F.panels=k,_=j+Q):(k=this.getRowPanels(j),F.panels=k.map(Y=>Y.getSaveModel()),_=j+(k.length+1)*Q),this.panels.splice(_,0,F),this.updateRepeatedPanelIds(F),F}repeatPanel(G,Q){const j=this.getPanelRepeatVariable(G);if(!j)return;if(G.type==="row"){this.repeatRow(G,Q,j);return}const F=this.getSelectedVariableOptions(j),k=G.maxPerRow||4;let _=0,Y=G.gridPos.y;for(let ae=0;ae<F.length;ae++){const ce=F[ae];let q;q=this.getPanelRepeatClone(G,ae,Q),q.scopedVars??={},q.scopedVars[j.name]=ce,G.repeatDirection===u.OA?(ae>0&&(Y+=q.gridPos.h),q.gridPos.y=Y):(q.gridPos.w=Math.max(u.cz/F.length,u.cz/k),q.gridPos.x=_,q.gridPos.y=Y,_+=q.gridPos.w,_+q.gridPos.w>u.cz&&(_=0,Y+=q.gridPos.h))}const Z=Y-G.gridPos.y;if(Z>0){const ae=Q+F.length;for(const ce of this.panels.slice(ae))b(G,ce)||(ce.gridPos.y+=Z)}}repeatRow(G,Q,j){const F=this.getSelectedVariableOptions(j);for(let k=0;k<F.length;k++){const _=F[k],Y=this.getRowRepeatClone(G,k,Q);z(Y,j,_);const Z=this.getRowHeight(Y),ae=Y.panels||[];let ce;if(G.collapsed){for(const q of ae)z(q,j,_),k>0&&this.updateRepeatedPanelIds(q,!0);Y.gridPos.y+=k,ce=Q+k+1}else{const q=Q+(ae.length+1)*k+1;ae.forEach((De,oe)=>{if(z(De,j,_),k>0){const te=new B.rY(De);this.updateRepeatedPanelIds(te,!0),te.gridPos.y+=Z*k,this.panels.splice(q+oe,0,te)}}),Y.panels=[],Y.gridPos.y+=Z*k,ce=q+ae.length}if(F.length>1)for(const q of this.panels.slice(ce))q.gridPos.y+=Z}}updateRepeatedPanelIds(G,Q){return G.repeatPanelId=G.id,G.id=this.getNextPanelId(),Q?G.repeatedByRow=!0:G.repeat=void 0,G}getSelectedVariableOptions(G){let Q;return(0,M.HY)(G)?Q=G.options.slice(1,G.options.length):Q=(0,n.filter)(G.options,{selected:!0}),Q}getRowHeight(G){if(!G.panels||G.panels.length===0)return 0;if(G.collapsed)return 1;const Q=(0,n.maxBy)(G.panels,({gridPos:j})=>j.y+j.h).gridPos;return Q.y+Q.h-G.gridPos.y}removePanel(G){this.panels=this.panels.filter(Q=>Q!==G),this.events.publish(new s._B)}removeRow(G,Q){(!Q&&G.collapsed||Q&&!G.collapsed)&&this.toggleRow(G),this.removePanel(G)}expandRows(){const G=this.panels.filter(Q=>Q.type==="row"&&Q.collapsed);for(const Q of G)this.toggleRow(Q)}collapseRows(){const G=this.panels.filter(Q=>Q.type==="row"&&!Q.collapsed);for(const Q of G)this.toggleRow(Q)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(G=>G.hide!==2)||this.annotations.list.some(G=>!G.hide)}getPanelInfoById(G){const Q=this.panels.findIndex(j=>j.id===G);return Q>=0?{panel:this.panels[Q],index:Q}:null}duplicatePanel(G){const Q=G.getSaveModel();return Q.id=this.getNextPanelId(),delete Q.repeat,delete Q.repeatIteration,delete Q.repeatPanelId,delete Q.scopedVars,Q.alert&&delete Q.thresholds,delete Q.alert,G.gridPos.x+G.gridPos.w*2<=u.cz?Q.gridPos.x+=G.gridPos.w:Q.gridPos.y+=G.gridPos.h,this.addPanel(Q),Q}formatDate(G,Q){return(0,r.dq)(G,{format:Q,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const G of this.panels)G.destroy()}toggleRow(G){const Q=(0,n.indexOf)(this.panels,G);if(!G.collapsed){const _=this.getRowPanels(Q);(0,n.pull)(this.panels,..._),G.panels=_.map(Y=>Y.getSaveModel()),G.collapsed=!0,_.some(Y=>Y.hasChanged)&&G.configRev++,this.events.publish(new s._B);return}G.collapsed=!1;const j=G.panels??[],F=j.some(_=>_.repeat),k=G.repeat;if(j.length>0){const Y=(j[0].gridPos.y??G.gridPos.y)-(G.gridPos.y+G.gridPos.h);let Z=Q+1,ae=G.gridPos.y;for(const q of j){if(k){const De=this.getPanelRepeatVariable(G);if(q.scopedVars??={},De){const oe=this.getSelectedVariableOptions(De);q.scopedVars={...q.scopedVars,[De.name]:oe[0]}}}q.gridPos.y??(q.gridPos.y=G.gridPos.y),q.gridPos.y-=Y,this.panels.splice(Z,0,new B.rY(q)),Z+=1,ae=Math.max(ae,q.gridPos.y+q.gridPos.h)}const ce=ae-G.gridPos.y-1;for(const q of this.panels.slice(Z))q.gridPos.y+=ce;G.panels=[],F&&this.processRowRepeats(G)}this.sortPanelsByGridPos(),this.events.publish(new s._B)}getRowPanels(G){const Q=this.panels.slice(G+1),j=Q.findIndex(k=>k.type==="row");return Q.slice(0,j>=0?j:this.panels.length)}on(G,Q){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(G,Q)}off(G,Q){console.log("DashboardModel.off is deprecated"),this.events.off(G,Q)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(G){return(0,r.E8)(G,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:i.contextSrv?.user?.timezone}updateSchema(G){new A.o(this).updateSchema(G)}hasTimeChanged(){const{time:G,originalTime:Q}=this;return!((0,n.isEqual)(G,Q)||(0,n.isEqual)((0,o.CQ)(G?.from),(0,o.CQ)(Q?.from))&&(0,n.isEqual)((0,o.CQ)(G?.to),(0,o.CQ)(Q?.to)))}autoFitPanels(G,Q){const j=Math.max(...this.panels.map(ae=>ae.gridPos.h+ae.gridPos.y)),F=55,k=20;let _=G-F-k;Q&&Q!==y.KioskMode.TV&&(_+=F);const Y=Math.floor(_/(u.K3+u.hD)),Z=j/Y;for(const ae of this.panels)ae.gridPos.y=Math.round(ae.gridPos.y/Z)||1,ae.gridPos.h=Math.round(ae.gridPos.h/Z)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(y.CoreEvents.nq)}getPanelByUrlId(G){const Q=parseInt(G??"0",10),j=this.panels.filter(F=>F.collapsed);for(const F of j)F.panels?.some(_=>_.id===Q)&&this.toggleRow(F);return this.getPanelById(Q)}toggleLegendsForAll(){const G=this.panels.filter(K),Q=G.filter(k=>k.legend.show).length,j=G.length-Q,F=Q>=j;for(const k of G)k.legend.show=!F,k.render()}toggleExemplarsForAll(){for(const G of this.panels)for(const Q of G.targets){if(!(Q.datasource&&Q.datasource.type==="prometheus"))continue;const j=Q;j.exemplar=!j.exemplar}this.startRefresh()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(G){let Q=!0;return G?Q=!!this.meta.annotationsPermissions?.dashboard.canEdit:Q=!!this.meta.annotationsPermissions?.organization.canEdit,this.canEditDashboard()&&Q}canDeleteAnnotations(G){let Q=!0;return G?Q=!!this.meta.annotationsPermissions?.dashboard.canDelete:Q=!!this.meta.annotationsPermissions?.organization.canDelete,Q&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(Q=>Q.builtIn===1)?.enable===!1||!this.canEditDashboard()?!1:!!this.meta.annotationsPermissions?.dashboard.canAdd}canEditDashboard(){return!!(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(G,Q){!(0,n.isEqual)(G?.gridPos,Q?.gridPos)&&this.events.publish(new s._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(G){return this.getVariablesFromState(this.uid).find(Q=>Q.name===G.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(){const G=this.originalTemplating?.list??[],Q=this.getTemplatingSaveModel({saveVariables:!0}).list;return G.length!==Q.length?!1:!(0,n.isEqual)(Q,G)}variablesTimeRangeProcessDoneHandler(G){const Q=G.payload.variableIds.length>0;this.variablesChangedHandler(new D.x9({panelIds:[],refreshAll:!0}),Q)}variablesChangedHandler(G,Q=!0){if(Q&&this.processRepeats(),G.payload.refreshAll||(0,P.$t)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=G.payload.panelIds.filter(j=>j!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(G.payload)}variablesChangedInUrlHandler(G){this.templateVariableValueUpdated(),this.startRefresh(G.payload)}getOriginalDashboard(){return this.originalDashboard}hasAngularPlugins(){return this.panels.some(G=>G.isAngularPlugin()||(G.datasource?.uid?(0,c.e)(G.datasource?.uid):!1))}};let w=V;w.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0,timeRangeUpdatedDuringEdit:!0,originalDashboard:!0};function K(G){return!!G.legend}function z(G,Q,j){G.scopedVars??={},G.scopedVars[Q.name]=j}},6947:(J,R,e)=>{"use strict";e.d(R,{G7:()=>s,Jg:()=>M,rY:()=>C});var n=e(86832),a=e.n(n),l=e(34032),r=e(91395),o=e(96083),g=e(58103),m=e(77014),d=e(79059),u=e(50820),i=e(44951),f=e(78354),c=e(73431),E=e(74277);const p={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0,isNew:!0,refreshWhenInView:!0},h={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},y={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:""},s={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap"},v={"heatmap-new":"heatmap"};class C{constructor(x){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.refreshWhenInView=!1,this.cachedPluginOptions={},this.events=new r.F,this.restoreModel(x),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,l.Z)()}restoreModel(x){for(const I in this)p[I]||!this.hasOwnProperty(I)||x[I]||typeof this[I]!="function"&&typeof this[I]!="symbol"&&delete this[I];for(const I in x)this[I]=x[I];const S=v[this.type];S&&(this.autoMigrateFrom=this.type,this.type=S),(0,n.defaultsDeep)(this,(0,n.cloneDeep)(y)),this.ensureQueryIds()}generateNewKey(){this.key=(0,l.Z)()}ensureQueryIds(){if(this.targets&&(0,n.isArray)(this.targets))for(const x of this.targets)x.refId||(x.refId=(0,f.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(x){this.options=x,this.configRev++,this.events.publish(new c.Wj),this.render()}updateFieldConfig(x){this.fieldConfig=x,this.configRev++,this.events.publish(new c.Wj),this.resendLastResult(),this.render()}getSaveModel(){const x={};for(const S in this)p[S]||!this.hasOwnProperty(S)||(0,n.isEqual)(this[S],y[S])||(x[S]=(0,n.cloneDeep)(this[S]));return this.type==="row"&&this.panels&&this.panels.length>0&&(x.panels=this.panels.map(S=>{if(S.libraryPanel){const{id:I,title:T,libraryPanel:O,gridPos:A}=S;return{id:I,title:T,gridPos:A,libraryPanel:{uid:O.uid,name:O.name}}}return S})),x}setIsViewing(x){this.isViewing=x}updateGridPos(x,S=!0){x.x===this.gridPos.x&&x.y===this.gridPos.y&&x.h===this.gridPos.h&&x.w===this.gridPos.w||(this.gridPos.x=x.x,this.gridPos.y=x.y,this.gridPos.w=x.w,this.gridPos.h=x.h,S&&this.configRev++,this.render())}runAllPanelQueries({dashboardUID:x,dashboardTimezone:S,timeData:I,width:T}){this.type!=="row"&&this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardUID:x,timezone:S,timeRange:I.timeRange,timeInfo:I.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(T),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?o.zj.PanelEditor:this.isViewing?o.zj.PanelViewer:o.zj.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new m.U5)}render(){this.hasRefreshed?this.events.publish(new c._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((x,S)=>p[S]||h[S]?x:{...x,[S]:this[S]},{})}restorePanelOptions(x){const S=this.cachedPluginOptions[x];S&&(Object.keys(S.properties).map(I=>{this[I]=S.properties[I]}),this.fieldConfig=(0,g.__)(this.fieldConfig,S.fieldConfig))}applyPluginOptionDefaults(x,S){const I=(0,g.d4)({plugin:x,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:S});this.fieldConfig=I.fieldConfig,this.options=I.options}async pluginLoaded(x){this.plugin=x;const S=D(x);if(this.autoMigrateFrom){const I=s[this.autoMigrateFrom]!=null,T=this.getOptionsToRemember(),O=this.autoMigrateFrom,A=this.type;this.clearPropertiesBeforePluginChange(),this.type=A,this.plugin=x,this.callPanelTypeChangeHandler(x,O,T,I)}if(x.onPanelMigration&&S!==this.pluginVersion){const I=x.onPanelMigration(this);this.options=await I,this.pluginVersion=S}this.applyPluginOptionDefaults(x,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const x in this)h[x]||delete this[x];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,g.aS)(this.fieldConfig.overrides,g._k)}}callPanelTypeChangeHandler(x,S,I,T){if(x.onPanelTypeChanged){const O=T?{angular:I}:I.options;Object.assign(this.options,x.onPanelTypeChanged(this,S,O,this.fieldConfig))}}changePlugin(x){const S=x.meta.id,I=this.getOptionsToRemember(),T=this.fieldConfig,O=this.type,A=this.isAngularPlugin()||!!s[O];this.cachedPluginOptions[O]={properties:I,fieldConfig:T},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(S),this.callPanelTypeChangeHandler(x,O,I,A),this.type=S,this.plugin=x,this.configRev++,this.applyPluginOptionDefaults(x,!0),x.onPanelMigration&&(this.pluginVersion=D(x))}updateQueries(x){const{dataSource:S}=x;this.datasource={uid:S.uid,type:S.type},this.cacheTimeout=x.cacheTimeout,this.queryCachingTTL=x.queryCachingTTL,this.timeFrom=x.timeRange?.from,this.timeShift=x.timeRange?.shift,this.hideTimeOverride=x.timeRange?.hide,this.interval=x.minInterval,this.maxDataPoints=x.maxDataPoints,this.targets=x.queries,this.configRev++,this.events.publish(new c.pO)}addQuery(x){x=x||{refId:"A"},x.refId=(0,f.Hs)(this.targets),this.targets.push(x),this.configRev++}changeQuery(x,S){x.refId=this.targets[S].refId,this.configRev++,this.targets=this.targets.map((I,T)=>T===S?x:I)}getEditClone(){const x=this.getSaveModel(),S=new C(x);S.isEditing=!0,S.plugin=this.plugin;const I=this.getQueryRunner();return S.getQueryRunner().useLastResultFrom(I),S}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:u.default.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new E.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0||(this.plugin?.meta?.angularDetected??!1)}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(x){this.transformations=x,this.resendLastResult(),this.configRev++,this.events.publish(new c.Xw)}setProperty(x,S){this[x]=S,this.configRev++,x==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(x,S,I){const T=this.getQueryRunner().getLastRequest(),O=Object.assign({},this.scopedVars,T?.scopedVars,S);return(0,d.J)().replace(x,O,I)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(x){for(const[S,I]of Object.entries(x.model)){switch(S){case"id":case"gridPos":case"libraryPanel":continue}this[S]=I}this.libraryPanel=x}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function D(P){return P&&P.meta.info.version?P.meta.info.version:u.default.buildInfo.version}function M(P){const x={};return Object.entries(P).filter(([S,I])=>!p[S]&&P.hasOwnProperty(S)&&!(0,n.isEqual)(I,y[S])).forEach(([S,I])=>{x[S]=I}),(0,i.Xh)(x)}},34401:(J,R,e)=>{"use strict";e.d(R,{$j:()=>s,f4:()=>M,fG:()=>v,lw:()=>C,tM:()=>D});var n=e(4148),a=e(97316),l=e(90634),r=e(3654),o=e(33567),g=e(16920),m=e(31063),d=e(87863),u=e(97433),i=e(6278),f=e(795);function c(P){return async x=>{const S=await getBackendSrv().get(`/api/dashboards/id/${P}/permissions`);x(loadDashboardPermissions(S))}}function E(P){return{userId:P.userId,teamId:P.teamId,role:P.role,permission:P.permission}}function p(P,x,S){return async(I,T)=>{const{dashboard:O}=T(),A=[];for(const B of O.permissions){if(B.inherited)continue;const b=E(B);x===B&&(b.permission=S),A.push(b)}await getBackendSrv().post(`/api/dashboards/id/${P}/permissions`,{items:A}),await I(c(P))}}function h(P,x){return async(S,I)=>{const T=I().dashboard,O=[];for(const A of T.permissions)A.inherited||A===x||O.push(E(A));await getBackendSrv().post(`/api/dashboards/id/${P}/permissions`,{items:O}),await S(c(P))}}function y(P,x){return async(S,I)=>{const{dashboard:T}=I(),O=[];for(const A of T.permissions)A.inherited||O.push(E(A));O.push({userId:x.userId,teamId:x.teamId,role:x.role,permission:x.permission}),await getBackendSrv().post(`/api/dashboards/id/${P}/permissions`,{items:O}),await S(c(P))}}function s(P,x){return async S=>{await(0,n.i)().post("/api/dashboards/import",P),S((0,a.$l)((0,l.AT)("Dashboard Imported",x))),S((0,m.m3)())}}function v(P){return async x=>{await(0,n.i)().delete(`/api/dashboards/uid/${P}`),x((0,m.m3)())}}const C=()=>(P,x)=>{const I=x().dashboard.getModel();I&&(I.destroy(),P((0,d.wX)(I.uid))),(0,i.$t)().stopAutoRefresh(),P((0,f.sG)()),P((0,o.Vl)()),r.H.leave(),(0,u.h4)().setCurrent(void 0)},D=P=>x=>{x((0,g.YT)(P)),(0,i.$t)().refreshTimeModel()},M=P=>x=>{x((0,g.zW)(P)),(0,i.$t)().refreshTimeModel()}},75397:(J,R,e)=>{"use strict";e.d(R,{f:()=>n.f,r:()=>a.rY});var n=e(52002),a=e(6947)},35260:(J,R,e)=>{"use strict";e.d(R,{ZQ:()=>K,mV:()=>w,f1:()=>Q,$M:()=>G});var n=e(57837),a=e(92403),l=e(36316),r=e(13601),o=e(4148),g=e(32688),m=e(97316),d=e(28833),u=e(90634),i=e(20367),f=e(23062),c=e(23334),E=e(36861),p=e(97433),h=e(6278),y=e(83600),s=e(3654),v=e(8213),C=e(49955),D=e(57721),M=e(32627),P=e(87863),x=e(45882),S=e(72639);function I(j,F){const k=j.templating.list.map(_=>_.type).reduce((_,Y)=>(_[T(Y)]=1+_[T(Y)]||1,_),{});(0,S.ff)("dashboards_init_dashboard_completed",{uid:j.uid,title:j.title,theme:j.style,schemaVersion:j.schemaVersion,version_before_migration:F,panels_count:j.panels.length,...k})}const T=j=>`variable_type_${j}_count`;var O=e(52002),A=e(4651);function B(j){const F={dashboardId:j.id,dashboardName:j.title,dashboardUid:j.uid,folderName:j.meta.folderTitle,eventName:A.ct.DashboardView};(0,S.r_)(F)}var b=e(795);async function W(j,F,k){const _=f.Z.getObject(z);if(_)return Q(),_;try{switch(j.routeName){case D.DashboardRoutes.Home:{const Y=await i.ae.get("/api/dashboards/home");if(Y.redirectUri){const Z=n.u.stripBaseFromUrl(Y.redirectUri);return r.E1.replace(Z),null}return Y.meta.canSave=!1,Y.meta.canShare=!1,Y.meta.canStar=!1,Y}case D.DashboardRoutes.Public:return await E.pD.loadDashboard("public",j.urlSlug,j.accessToken);case D.DashboardRoutes.Embedded:if(j.dashboardDto)return j.dashboardDto;case D.DashboardRoutes.Normal:{const Y=await E.pD.loadDashboard(j.urlType,j.urlSlug,j.urlUid);if((0,c.v)()&&Y.meta.folderUid)try{await F((0,y.Pb)(Y.meta.folderUid))}catch(Z){console.warn("Error fetching parent folder",Y.meta.folderUid,"for dashboard",Z)}if(j.fixUrl&&Y.meta.url&&!v.r0.isPlaying){const Z=n.u.stripBaseFromUrl(Y.meta.url),ae=r.E1.getLocation().pathname;Z!==ae&&(r.E1.replace({...r.E1.getLocation(),pathname:Z}),console.log("not correct url correcting",Z,ae))}return Y}case D.DashboardRoutes.New:return(0,c.v)()&&j.urlFolderUid&&await F((0,y.Pb)(j.urlFolderUid)),K(j.urlFolderUid,j.panelType);case D.DashboardRoutes.Path:{const Y=j.urlSlug??"";return await E.pD.loadDashboard(D.DashboardRoutes.Path,Y,Y)}default:throw{message:"Unknown route "+j.routeName}}}catch(Y){return(0,o.kW)(Y)&&Y.cancelled||(F((0,b.jA)({message:"Failed to fetch dashboard",error:Y})),console.error(Y)),null}}const V=(j,F={})=>(j.forEach(k=>{k.panels?V(k.panels,F):k.targets&&k.targets.forEach(_=>{_.datasource?.type&&(F[_.datasource.type]?F[_.datasource.type].push(_):F[_.datasource.type]=[_])})}),F);function w(j){return async(F,k)=>{F((0,b.sf)());const _=await W(j,F,k),Y=_?.dashboard?.version;if(!_)return;F((0,b.Nv)());let Z;try{Z=new O.f(_.dashboard,_.meta)}catch(fe){F((0,b.jA)({message:"Failed create dashboard model",error:fe})),console.error(fe);return}const ae=k(),ce=r.E1.getSearchObject();ce.orgId||r.E1.partial({orgId:ae.user.orgId},!0);const q=(0,h.$t)();(0,p.h4)().setCurrent(Z),q.init(Z);const oe=(0,C.mn)(j.urlUid??Z.uid);if(await F((0,P.LX)(oe,Z)),(0,M.Tl)({dashboard:Z,timeSrv:q}).run({dashboard:Z,range:q.timeRange()}),(0,x.cp)(k())===oe&&k().dashboard.initPhase===D.DashboardInitPhase.Services){try{Z.processRepeats(),ce.autofitpanels&&Z.autoFitPanels(window.innerHeight,ce.kiosk),j.keybindingSrv.setupDashboardBindings(Z)}catch(fe){fe instanceof Error&&F((0,m.$l)((0,u.t_)("Dashboard init failed",fe))),console.error(fe)}j.routeName!==D.DashboardRoutes.New?(B(Z),s.H.watch(Z.uid)):s.H.leave(),Z.weekStart!==""?(0,a.Ls)(Z.weekStart):(0,a.Ls)(g.config.bootData.user.weekStart),d.Z.publish(new l.Pl({dashboardId:Z.uid,orgId:ae.user.orgId,userId:ae.user.user?.id,grafanaVersion:g.config.buildInfo.version,queries:V(Z.panels)})),I(Z,Y),F((0,b.dS)(Z))}}}function K(j,F){const k=g.config.featureToggles.emptyDashboardPage?[]:[{type:F??"add-panel",gridPos:{x:0,y:0,w:12,h:9},title:"Panel Title"}],_={meta:{canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderUid:""},dashboard:{title:"New dashboard",panels:k}};return j&&(_.meta.folderUid=j),_}const z="DASHBOARD_FROM_LS_KEY";function G(j){f.Z.setObject(z,j)}function Q(){f.Z.delete(z)}},795:(J,R,e)=>{"use strict";e.d(R,{Nv:()=>c,Rd:()=>h,ZP:()=>s,dS:()=>f,jA:()=>i,sG:()=>E,sf:()=>u,tq:()=>p});var n=e(77960),a=e(61606),l=e(17653),r=e(57721),o=e(52002);const g={initPhase:r.DashboardInitPhase.NotStarted,getModel:()=>null,permissions:[],initError:null,initialDatasource:void 0},m=(0,n.oM)({name:"dashboard",initialState:g,reducers:{loadDashboardPermissions:(v,C)=>{v.permissions=(0,l.A)(C.payload)},dashboardInitFetching:v=>{v.initPhase=r.DashboardInitPhase.Fetching},dashboardInitServices:v=>{v.initPhase=r.DashboardInitPhase.Services},dashboardInitCompleted:(v,C)=>{v.getModel=()=>C.payload,v.initPhase=r.DashboardInitPhase.Completed},dashboardInitFailed:(v,C)=>{v.initPhase=r.DashboardInitPhase.Failed,v.initError=C.payload,v.getModel=()=>new o.f({...a.Ql,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:v=>{v.initPhase=r.DashboardInitPhase.NotStarted,v.initError=null,v.getModel=()=>null},addPanel:(v,C)=>{},setInitialDatasource:(v,C)=>{v.initialDatasource=C.payload}}}),{loadDashboardPermissions:d,dashboardInitFetching:u,dashboardInitFailed:i,dashboardInitCompleted:f,dashboardInitServices:c,cleanUpDashboard:E,addPanel:p,setInitialDatasource:h}=m.actions,s={dashboard:m.reducer}},57428:(J,R,e)=>{"use strict";e.d(R,{$0:()=>v,$N:()=>y,AI:()=>u,AX:()=>s,Dh:()=>E,LU:()=>d,L_:()=>i,RB:()=>c,rm:()=>f,uZ:()=>p,yQ:()=>C});var n=e(86832),a=e.n(n),l=e(13601),r=e(50820),o=e(74602),g=e(23062),m=e(30093);function d(M,P){const x={type:"timeseries",title:"Panel Title",gridPos:(0,m.lg)(M),datasource:P?{uid:P}:null,isNew:!0};return M.addPanel(x),x.id}function u(M,P){const x={type:P,title:"Widget title",gridPos:(0,m.lg)(M),datasource:null,isNew:!0};return M.addPanel(x),x.id}function i(M){const P={type:"row",title:"Row title",gridPos:{x:0,y:0}};M.addPanel(P)}function f(){l.E1.push("/dashboard/import")}function c(M){const P={type:"add-library-panel",gridPos:(0,m.lg)(M)};M.addPanel(P)}function E(M,P){if(!P)return;const x=(0,m.lg)(M),S={type:P.id,title:"Panel Title",gridPos:{x:x.x,y:x.y,w:P.defaults.gridPos.w,h:P.defaults.gridPos.h}};P.defaults&&((0,n.defaults)(S,P.defaults),S.title=P.defaults.title,g.Z.delete(o.zF)),M.addPanel(S)}function p(){const M=(0,n.chain)(r.default.panels).filter({hideFromList:!1}).map(x=>x).value(),P=g.Z.get(o.zF);if(P){const x=JSON.parse(P),S=(0,n.find)(M,{id:x.type});if(S){const I=(0,n.cloneDeep)(S);return I.name=x.title,I.sort=-1,{...I,defaults:{...x}}}}}const h="grafana.dashboards.panelEdit.lastUsedDatasource";function y(M){if(g.Z.exists(h)){const P=g.Z.getObject(h);if(P?.dashboardUid===M)return P}}function s(M){if(!g.Z.exists(h))return;const x=g.Z.getObject(h)?.datasourceUid??"";D(M,x)}function v(M){g.Z.setObject(h,{dashboardUid:M,datasourceUid:""})}function C(M,P){const x=y(M);if(!x)D(M,P);else{const S=x?.dashboardUid??"";D(S,P)}}function D(M,P){g.Z.setObject(h,{dashboardUid:M,datasourceUid:P})}},30093:(J,R,e)=>{"use strict";e.d(R,{Kq:()=>x,Po:()=>P,W1:()=>O,WJ:()=>C,bY:()=>M,jN:()=>D,lg:()=>b,oe:()=>S,qw:()=>T});var n=e(86832),a=e.n(n),l=e(71519),r=e(81626),o=e(92403),g=e(77877),m=e(79059),d=e(28833),u=e(50820),i=e(74602),f=e(23062),c=e(98928),E=e(6947),p=e(78288),h=e(46714),y=e(51201),s=e(74600),v=e(73431);const C=(W,V,w)=>{if(w!==!1){const K=V.alert&&!u.default.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,z=V.alert?"YES":void 0;d.Z.publish(new v.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:K,icon:"trash-alt",confirmText:z,yesText:"Remove",onConfirm:()=>C(W,V,!1)}));return}W.removePanel(V),(0,s.WI)((0,y.qj)(V.key))},D=(W,V)=>{W.duplicatePanel(V)},M=W=>{let V=W;W instanceof E.rY&&(V=W.getSaveModel()),f.Z.set(i.zF,JSON.stringify(V)),d.Z.emit(l.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},P=(W,V)=>{d.Z.publish(new v.Dn({component:c.ShareModal,props:{dashboard:W,panel:V}}))},x=(W,V)=>{d.Z.publish(new v.Dn({component:p.c,props:{panel:V,initialFolderUid:W.meta.folderUid,isOpen:!0}}))},S=W=>{d.Z.publish(new v.Dn({component:h.i,props:{onConfirm:()=>W.unlinkLibraryPanel(),isOpen:!0}}))},I=W=>{W.refresh()},T=W=>{const V={...W.options};V.legend.showLegend===!0?V.legend.showLegend=!1:V.legend.showLegend=!0,W.updateOptions(V)};function O(W,V){const w={timeInfo:"",timeRange:V};if(W.timeFrom){const K=(0,m.J)().replace(W.timeFrom,W.scopedVars),z=r.describeTextRange(K);if(z.invalid)return w.timeInfo="invalid time override",w;if((0,n.isString)(V.raw.from)){const G=(0,o.C_)(V.from).tz(),Q=(0,o.C_)(V.to).tz(),j=g.parse(z.from,void 0,G);w.timeInfo=z.display,w.timeRange={from:j,to:g.parse(z.to,void 0,Q),raw:{from:z.from,to:z.to}}}}if(W.timeShift){const K=(0,m.J)().replace(W.timeShift,W.scopedVars);if(r.describeTextRange(K).invalid)return w.timeInfo="invalid timeshift",w;const G="-"+K;w.timeInfo+=" timeshift "+G;const Q=g.parseDateMath(G,w.timeRange.from,!1),j=g.parseDateMath(G,w.timeRange.to,!0);w.timeRange={from:Q,to:j,raw:{from:Q,to:j}}}return W.hideTimeOverride&&(w.timeInfo=""),w}function A(W){const w=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return W.maxDataPoints?W.maxDataPoints:Math.ceil(w*(W.gridPos.w/24))}function B(W,V){const w=W.plugin&&W.plugin.noPadding?0:config.theme.panelPadding*2,K=W.hasTitle()?config.theme.panelHeaderHeight:0;return V-K-w-PANEL_BORDER}function b(W){for(const w of W.panelIterator())w.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},20111:(J,R,e)=>{"use strict";e.d(R,{O:()=>l});var n=e(92403),a=e(77877);const l=(r,o)=>{const g={from:(0,n.v9)(r.from)?(0,n.CQ)(r.from):r.from,to:(0,n.v9)(r.to)?(0,n.CQ)(r.to):r.to},m=o?o.getTimezone():void 0;return{from:a.parse(g.from,!1,m,o?.fiscalYearStartMonth),to:a.parse(g.to,!0,m,o?.fiscalYearStartMonth),raw:g}}},7635:(J,R,e)=>{"use strict";e.d(R,{DK:()=>g,eM:()=>o,dg:()=>m});var n=e(36497),a=e(53305);function l(d){const u=new Set;return Object.keys(d).forEach(i=>{d[i].forEach(f=>{u.add(f)})}),u}function r(d){const u=Array.from(l(d));return u.length===1?u[0]:`${u.slice(0,-1).join(", ")} or ${u.slice(-1)}`}function o(d){return new n.y(u=>{let i=0;Promise.all([e.e(7452),e.e(4833)]).then(e.bind(e,47452)).then(f=>{d.forEach(c=>{const E=new FileReader;E.readAsArrayBuffer(c),E.onload=()=>{const p=E.result;if(p&&p instanceof ArrayBuffer){if(c.type==="application/json"){const h=new TextDecoder("utf-8"),y=JSON.parse(h.decode(p));u.next({dataFrames:[(0,a.g0)(y)],file:c})}else u.next({dataFrames:f.readSpreadsheet(p),file:c});++i>=d.length&&u.complete()}}})}).catch(()=>{throw"Failed to load sheets module"})})}const g={"text/plain":[".csv",".txt"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"],"application/vnd.apple.numbers":[".numbers"],"application/vnd.oasis.opendocument.spreadsheet":[".ods"],"application/json":[".json"]},m=5e5},90517:(J,R,e)=>{"use strict";e.d(R,{P:()=>m});var n=e(39953),a=e(4919),l=e(21308),r=e(62679),o=e(91473),g=e(57721);function m({variant:d,onClick:u}){const i=l.Vt.hasPermission(g.AccessControlAction.DataSourcesCreate),f=o.Z.DataSourcesNew;return n.createElement(a.Qj,{variant:d||"primary",href:f,disabled:!i,tooltip:i?void 0:"You do not have permission to configure new data sources",onClick:u,target:"_blank"},n.createElement(r.cC,{i18nKey:"data-source-picker.add-new-data-source"},"Configure a new data source"))}},95625:(J,R,e)=>{"use strict";e.d(R,{F:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(4236),o=e(3532);function g({ds:d,onClick:u,selected:i,description:f,...c}){const E=(0,l.l4)(),p=m(E,d.meta.builtIn);return a.createElement(r.Z,{key:d.uid,onClick:u,className:(0,n.cx)(p.card,i?p.selected:void 0),...c},a.createElement(r.Z.Heading,{className:p.heading},a.createElement("div",{className:p.headingContent},a.createElement("span",{className:p.name},d.name," ",d.isDefault?a.createElement(o.P,{tags:["default"]}):null),a.createElement("small",{className:p.type},f||d.meta.name))),a.createElement(r.Z.Figure,{className:p.logo},a.createElement("img",{src:d.meta.info.logos.small,alt:`${d.meta.name} Logo`})))}function m(d,u=!1){return{card:(0,n.css)`
      cursor: pointer;
      background-color: ${d.colors.background.primary};
      border-bottom: 1px solid ${d.colors.border.weak};
      // Move to list component
      margin-bottom: 0;
      border-radius: 0;
      padding: ${d.spacing(1)};
    `,heading:(0,n.css)`
      width: 100%;
      overflow: hidden;
      // This is needed to enable ellipsis when text overlfows
      > button {
        width: 100%;
      }
    `,headingContent:(0,n.css)`
      color: ${d.colors.text.secondary};
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      justify-content: space-between;
    `,logo:(0,n.css)`
      width: 32px;
      height: 32px;
      padding: ${d.spacing(0,1)};
      display: flex;
      align-items: center;

      > img {
        max-height: 100%;
        min-width: 24px;
        filter: invert(${u&&d.isLight?1:0});
      }
    `,name:(0,n.css)`
      color: ${d.colors.text.primary};
      display: flex;
      gap: ${d.spacing(2)};
    `,type:(0,n.css)`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      align-items: center;
    `,separator:(0,n.css)`
      margin: 0 ${d.spacing(1)};
      color: ${d.colors.border.weak};
    `,selected:(0,n.css)`
      background-color: ${d.colors.background.secondary};
    `,meta:(0,n.css)`
      display: block;
      overflow-wrap: unset;
      white-space: nowrap;
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
    `}}},17105:(J,R,e)=>{"use strict";e.d(R,{K:()=>i});var n=e(41407),a=e(39953),l=e(79059),r=e(82803),o=e(62679),g=e(17250),m=e(90517),d=e(95625),u=e(51996);function i(h){const y=(0,a.useRef)(null),[s,v]=(0,g.wv)({keyboardEvents:h.keyboardEvents,containerRef:y}),C=(0,r.l4)(),D=p(C,v),{className:M,current:P,onChange:x,enableKeyboardNavigation:S,onClickEmptyStateCTA:I}=h,T=(0,g.Hq)({alerting:h.alerting,annotations:h.annotations,dashboard:h.dashboard,logs:h.logs,metrics:h.metrics,mixed:h.mixed,pluginId:h.pluginId,tracing:h.tracing,type:h.type,variables:h.variables}),[O,A]=(0,g.BM)(),B=h.filter?T.filter(h.filter):T;return a.createElement("div",{ref:y,className:(0,n.cx)(M,D.container),"data-testid":"data-sources-list"},B.length===0&&a.createElement(f,{className:D.emptyState,onClickCTA:I}),B.sort((0,u.Tw)(P,O,E())).map(b=>a.createElement(d.F,{"data-testid":"data-source-card",key:b.uid,ds:b,onClick:()=>{A(b),x(b)},selected:(0,u.TX)(b,P),...S?s:{}})))}function f({className:h,onClickCTA:y}){const s=(0,r.wW)(c);return a.createElement("div",{className:(0,n.cx)(h,s.container)},a.createElement("p",{className:s.message},a.createElement(o.cC,{i18nKey:"data-source-picker.list.no-data-source-message"},"No data sources found")),a.createElement(m.P,{onClick:y}))}function c(h){return{container:(0,n.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    `,message:(0,n.css)`
      margin-bottom: ${h.spacing(3)};
    `}}function E(){return(0,l.J)().getVariables().filter(y=>y.type==="datasource").map(y=>`\${${y.id}}`)}function p(h,y){return{container:(0,n.css)`
      display: flex;
      flex-direction: column;
      ${y} {
        background-color: ${h.colors.background.secondary};
      }
    `,emptyState:(0,n.css)`
      height: 100%;
      flex: 1;
    `}}},12675:(J,R,e)=>{"use strict";e.d(R,{a:()=>S});var n=e(41407),a=e(86832),l=e(39953),r=e(72639),o=e(32688),g=e(82803),m=e(73075),d=e(38637),u=e(12190),i=e(64447),f=e(17789),c=e(62679),E=e(7635),p=e(65355),h=e(17250),y=e(90517),s=e(95625),v=e(51996);const C={grafana:(0,c.t)("data-source-picker.built-in-list.description-grafana","Discover visualizations using mock data"),"-- Mixed --":(0,c.t)("data-source-picker.built-in-list.description-mixed","Use multiple data sources"),"-- Dashboard --":(0,c.t)("data-source-picker.built-in-list.description-dashboard","Reuse query results from other visualizations")};function D({className:T,current:O,onChange:A,tracing:B,dashboard:b,mixed:W,metrics:V,type:w,annotations:K,variables:z,alerting:G,pluginId:Q,logs:j,filter:F}){const _=(0,h.Hq)({tracing:B,dashboard:b,mixed:W,metrics:V,type:w,annotations:K,variables:z,alerting:G,pluginId:Q,logs:j}).filter(Y=>(F?F?.(Y):!0)&&!!Y.meta.builtIn);return l.createElement("div",{className:T,"data-testid":"built-in-data-sources-list"},_.map(Y=>l.createElement(s.F,{key:Y.uid,ds:Y,description:C[Y.uid],selected:(0,v.TX)(Y,O),onClick:()=>A(Y)})))}var M=e(17105);const P="dashboards_dspickermodal_clicked",x={SELECT_DS:"select_ds",UPLOAD_FILE:"upload_file",CONFIG_NEW_DS:"config_new_ds",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state",SEARCH:"search",DISMISS:"dismiss"};function S({tracing:T,dashboard:O,mixed:A,metrics:B,type:b,annotations:W,variables:V,alerting:w,pluginId:K,logs:z,uploadFile:G,filter:Q,onChange:j,current:F,onDismiss:k,reportedInteractionFrom:_}){const Y=(0,g.wW)(I),[Z,ae]=(0,l.useState)(""),ce=_||"modal",q=()=>{k(),(0,r.ff)(P,{item:x.DISMISS,src:ce})},De=ge=>{j(ge),(0,r.ff)(P,{item:x.SELECT_DS,ds_type:ge.type,src:ce})},oe=l.useMemo(()=>(0,a.once)(()=>{(0,r.ff)(P,{item:"search",src:ce})}),[ce]),te=(0,h.wP)("-- Grafana --"),fe=(0,p.k)((ge,he)=>{te&&(j(te,[ge]),(0,r.ff)(P,{item:x.UPLOAD_FILE,src:ce}),he.length<1&&k())}),Te=({className:ge})=>l.createElement(D,{className:ge,onChange:De,current:F,filter:Q,variables:V,tracing:T,metrics:B,type:b,annotations:W,alerting:w,pluginId:K,logs:z,dashboard:O,mixed:A});return l.createElement(m.u,{title:(0,c.t)("data-source-picker.modal.title","Select data source"),closeOnEscape:!0,closeOnBackdropClick:!0,isOpen:!0,className:Y.modal,contentClassName:Y.modalContent,onClickBackdrop:q,onDismiss:q},l.createElement("div",{className:Y.leftColumn},l.createElement(d.I,{type:"search",autoFocus:!0,className:Y.searchInput,value:Z,prefix:l.createElement(u.J,{name:"search"}),placeholder:(0,c.t)("data-source-picker.modal.input-placeholder","Select data source"),onChange:ge=>{ae(ge.currentTarget.value),oe()}}),l.createElement(i.$,null,l.createElement(M.K,{onChange:De,current:F,onClickEmptyStateCTA:()=>(0,r.ff)(P,{item:x.CONFIG_NEW_DS_EMPTY_STATE,src:ce}),filter:ge=>(Q?Q?.(ge):!0)&&(0,v.qW)(ge,Z)&&!ge.meta.builtIn,variables:V,tracing:T,metrics:B,type:b,annotations:W,alerting:w,pluginId:K,logs:z,dashboard:O,mixed:A}),l.createElement(Te,{className:Y.appendBuiltInDataSourcesList}))),l.createElement("div",{className:Y.rightColumn},l.createElement("div",{className:Y.builtInDataSources},l.createElement(i.$,{className:Y.builtInDataSourcesList},l.createElement(Te,null)),G&&o.config.featureToggles.editPanelCSVDragAndDrop&&l.createElement(f.Yo,{readAs:"readAsArrayBuffer",fileListRenderer:()=>{},options:{maxSize:E.dg,multiple:!1,accept:E.DK,onDrop:fe}},l.createElement(f.A_,null))),l.createElement("div",{className:Y.newDSSection},l.createElement("span",{className:Y.newDSDescription},l.createElement(c.cC,{i18nKey:"data-source-picker.modal.configure-new-data-source"},"Open a new tab and configure a data source")),l.createElement(y.P,{variant:"secondary",onClick:()=>{(0,r.ff)(P,{item:x.CONFIG_NEW_DS,src:ce}),k()}}))))}function I(T){return{modal:(0,n.css)`
      width: 80%;
      height: 80%;
      max-width: 1200px;
      max-height: 900px;

      ${T.breakpoints.down("md")} {
        width: 100%;
      }
    `,modalContent:(0,n.css)`
      display: flex;
      flex-direction: row;
      height: 100%;

      ${T.breakpoints.down("md")} {
        flex-direction: column;
      }
    `,leftColumn:(0,n.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      padding-right: ${T.spacing(4)};
      border-right: 1px solid ${T.colors.border.weak};

      ${T.breakpoints.down("md")} {
        width: 100%;
        border-right: 0;
        padding-right: 0;
        flex: 1;
        overflow-y: auto;
      }
    `,rightColumn:(0,n.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      justify-items: space-evenly;
      align-items: stretch;
      padding-left: ${T.spacing(4)};

      ${T.breakpoints.down("md")} {
        width: 100%;
        padding-left: 0;
        flex: 0;
      }
    `,builtInDataSources:(0,n.css)`
      flex: 1 1;
      margin-bottom: ${T.spacing(4)};

      ${T.breakpoints.down("md")} {
        flex: 0;
      }
    `,builtInDataSourcesList:(0,n.css)`
      ${T.breakpoints.down("md")} {
        display: none;
        margin-bottom: 0;
      }

      margin-bottom: ${T.spacing(4)};
    `,appendBuiltInDataSourcesList:(0,n.css)`
      ${T.breakpoints.up("md")} {
        display: none;
      }
    `,newDSSection:(0,n.css)`
      display: flex;
      flex-direction: row;
      width: 100%;
      justify-content: space-between;
      align-items: center;
    `,newDSDescription:(0,n.css)`
      flex: 1 0;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      color: ${T.colors.text.secondary};
    `,searchInput:(0,n.css)`
      width: 100%;
      min-height: 32px;
      margin-bottom: ${T.spacing(1)};
    `}}},92811:(J,R,e)=>{"use strict";e.d(R,{q:()=>_});var n=e(39953),a=e(39458),l=e(50820),r=e(41407),o=e(41056),g=e(30064),m=e(17037),d=e(76941),u=e(28888),i=e(72639),f=e(82803),c=e(38637),E=e(12190),p=e(70393),h=e(64447),y=e(39106),s=e(4919),v=e(62679),C=e(26967),D=e(39064),M=e(17250),P=e(17105);function x(Y){const{dataSource:Z}=Y,ae=(0,f.l4)(),ce=I(ae,Z?.meta.builtIn);return Z?n.createElement("img",{className:ce.pickerDSLogo,alt:`${Z.meta.name} logo`,src:Z.meta.info.logos.small}):S()}function S(){const Y=(0,f.wW)(I);return n.createElement("div",{className:Y.pickerDSLogo})}function I(Y,Z=!1){return{pickerDSLogo:(0,r.css)`
      height: 20px;
      width: 20px;
      filter: invert(${Z&&Y.isLight?1:0});
    `}}var T=e(12675),O=e(87115);const A=20,B=200,b={name:"maxSize",enabled:!0,phase:"main",requires:["offset","preventOverflow","flip"],fn({state:Y,name:Z,options:ae}){const ce=(0,O.Z)(Y,ae),{x:q,y:De}=Y.modifiersData.preventOverflow||{x:0,y:0},{width:oe,height:te}=Y.rects.popper,{width:fe}=Y.rects.reference,[Te]=Y.placement.split("-"),ge=Te==="left"?"left":"right",he=Te==="top"?"top":"bottom";Y.modifiersData[Z]={maxWidth:oe-ce[ge]-q,maxHeight:te-ce[he]-De,minWidth:fe}}},W={name:"applyMaxSize",enabled:!0,phase:"beforeWrite",requires:["maxSize"],fn({state:Y}){const{maxHeight:Z,maxWidth:ae,minWidth:ce}=Y.modifiersData.maxSize;Y.styles.popper.maxHeight??=`${Z-A}px`,Y.styles.popper.minHeight??=`${B}px`,Y.styles.popper.maxWidth??=ae,Y.styles.popper.minWidth??=ce}};var V=e(51996);const w="dashboards_dspicker_clicked",K={OPEN_DROPDOWN:"open_dspicker",SELECT_DS:"select_ds",ADD_FILE:"add_file",OPEN_ADVANCED_DS_PICKER:"open_advanced_ds_picker",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state"};function z(Y){const{current:Z,onChange:ae,hideTextValue:ce=!1,width:q,inputId:De,noDefault:oe=!1,disabled:te=!1,placeholder:fe="Select data source",...Te}=Y,ge=(0,f.wW)(G,Y),[he,me]=(0,n.useState)(!1),[ye,ue]=(0,n.useState)(!1),[Oe,Ue]=(0,n.useState)(""),{onKeyDown:at,keyboardEvents:Ne}=(0,C.A)(),_e=(0,n.useRef)(null),[Ke,et]=(0,n.useState)(),[ze,je]=(0,n.useState)(),[Qe,We]=(0,n.useState)(),ke=(0,M.wP)(Z),ot=(0,M.wP)("-- Grafana --"),lt=!Z&&oe?void 0:ke,Ct=Oe&&he?n.createElement(S,null):n.createElement(x,{dataSource:lt}),wt=(0,d.D)(Ke,ze,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}},b,W]}),Lt=(0,n.useCallback)(()=>{Ue(""),me(!1),Ke?.focus()},[me,Ke]),{overlayProps:Ye,underlayProps:Be}=(0,m.Ir)({onClose:Lt,isDismissable:!0,isOpen:he,shouldCloseOnInteractOutside:re=>Ke?!Ke.isSameNode(re):!1},_e),{dialogProps:Le}=(0,o.R)({"aria-label":"Opened data source picker list"},_e);function le(){(0,i.ff)(w,{item:K.OPEN_DROPDOWN}),me(!0),Ke?.focus()}function de(){ot&&ae(ot,[D.ip])}function X(re){re.key==="Tab"&&!re.shiftKey&&he&&(re.preventDefault(),Qe?.focus()),re.key==="Tab"&&re.shiftKey&&he&&Lt(),at(re)}function se(re){re.shiftKey?(re.preventDefault(),Ke?.focus()):Lt()}return(0,n.useEffect)(()=>{const re=Ne.subscribe({next:pe=>{switch(pe?.code){case"ArrowDown":le(),pe.preventDefault();break;case"ArrowUp":le(),pe.preventDefault();break;case"Escape":Lt(),pe.preventDefault();break}}});return()=>re.unsubscribe()}),n.createElement("div",{className:ge.container,"data-testid":u.wl.components.DataSourcePicker.container},n.createElement("div",{className:ge.trigger,onClick:le},n.createElement(c.I,{id:De||"data-source-picker",className:ye?void 0:ge.input,"data-testid":u.wl.components.DataSourcePicker.inputV2,"aria-label":"Select a data source",autoComplete:"off",prefix:lt?Ct:void 0,suffix:n.createElement(E.J,{name:he?"search":"angle-down"}),placeholder:ce?"":(0,V.Ve)(lt)||fe,onFocus:()=>{ue(!0)},onBlur:()=>{ue(!1)},onKeyDown:X,value:Oe,onChange:re=>{le(),Ue(re.currentTarget.value)},ref:et,disabled:te})),he?n.createElement(p.h_,null,n.createElement("div",{...Be}),n.createElement("div",{ref:_e,...Ye,...Le},n.createElement(Q,{...Te,...wt.attributes.popper,style:wt.styles.popper,ref:je,footerRef:We,current:lt,filterTerm:Oe,keyboardEvents:Ne,onChange:(re,pe)=>{Lt(),re.uid!==lt?.uid&&(ae(re,pe),(0,i.ff)(w,{item:K.SELECT_DS,ds_type:re.type}))},onClose:Lt,onClickAddCSV:de,onDismiss:Lt,onNavigateOutsiteFooter:se}))):null)}function G(Y,Z){return{container:(0,r.css)`
      position: relative;
      cursor: ${Z.disabled?"not-allowed":"pointer"};
      width: ${Y.spacing(Z.width||"auto")};
    `,trigger:(0,r.css)`
      cursor: pointer;
      ${Z.disabled&&"pointer-events: none;"}
    `,input:(0,r.css)`
      input::placeholder {
        color: ${Z.disabled?Y.colors.action.disabledText:Y.colors.text.primary};
      }
    `}}const Q=n.forwardRef((Y,Z)=>{const{filterTerm:ae,onChange:ce,onClose:q,onClickAddCSV:De,current:oe,filter:te}=Y,fe=(0,n.useCallback)(he=>{ce(he)},[ce]),Te=(0,n.useCallback)(()=>{De?.(),q(),(0,i.ff)(w,{item:K.ADD_FILE})},[De,q]),ge=(0,f.wW)(j);return n.createElement("div",{style:Y.style,ref:Z,className:ge.container},n.createElement(h.$,null,n.createElement(P.K,{...Y,enableKeyboardNavigation:!0,className:ge.dataSourceList,current:oe,onChange:fe,filter:he=>(te?te?.(he):!0)&&(0,V.qW)(he,ae),onClickEmptyStateCTA:()=>(0,i.ff)(w,{item:K.CONFIG_NEW_DS_EMPTY_STATE})})),n.createElement(g.MT,null,n.createElement(F,{...Y,onClickAddCSV:Te,onChange:fe,onNavigateOutsiteFooter:Y.onNavigateOutsiteFooter})))});Q.displayName="PickerContent";function j(Y){return{container:(0,r.css)`
      display: flex;
      flex-direction: column;
      background: ${Y.colors.background.primary};
      box-shadow: ${Y.shadows.z3};
    `,picker:(0,r.css)`
      background: ${Y.colors.background.secondary};
    `,dataSourceList:(0,r.css)`
      flex: 1;
    `,footer:(0,r.css)`
      flex: 0;
      display: flex;
      flex-direction: row-reverse;
      justify-content: space-between;
      padding: ${Y.spacing(1.5)};
      border-top: 1px solid ${Y.colors.border.weak};
      background-color: ${Y.colors.background.secondary};
    `}}function F({onClose:Y,onChange:Z,onClickAddCSV:ae,...ce}){const q=(0,f.wW)(k),De=ce.uploadFile&&l.default.featureToggles.editPanelCSVDragAndDrop,oe=fe=>{fe.key==="Tab"&&ce.onNavigateOutsiteFooter(fe)},te=fe=>{fe.key==="Tab"&&fe.shiftKey&&ce.onNavigateOutsiteFooter(fe)};return n.createElement("div",{className:q.footer},n.createElement(y.JY,null,({showModal:fe,hideModal:Te})=>n.createElement(s.zx,{size:"sm",variant:"secondary",fill:"text",onClick:()=>{Y(),fe(T.a,{reportedInteractionFrom:"ds_picker",tracing:ce.tracing,dashboard:ce.dashboard,mixed:ce.mixed,metrics:ce.metrics,type:ce.type,annotations:ce.annotations,variables:ce.variables,alerting:ce.alerting,pluginId:ce.pluginId,logs:ce.logs,filter:ce.filter,uploadFile:ce.uploadFile,current:ce.current,onDismiss:Te,onChange:(ge,he)=>{Z(ge,he),Te()}}),(0,i.ff)(w,{item:K.OPEN_ADVANCED_DS_PICKER})},ref:ce.footerRef,onKeyDown:De?te:oe},n.createElement(v.cC,{i18nKey:"data-source-picker.open-advanced-button"},"Open advanced data source picker"),n.createElement(E.J,{name:"arrow-right"}))),De&&n.createElement(s.zx,{variant:"secondary",size:"sm",onClick:ae,onKeyDown:oe},"Add csv or spreadsheet"))}function k(Y){return{footer:(0,r.css)`
      flex: 0;
      display: flex;
      flex-direction: row-reverse;
      justify-content: space-between;
      padding: ${Y.spacing(1.5)};
      border-top: 1px solid ${Y.colors.border.weak};
      background-color: ${Y.colors.background.secondary};
    `}}function _(Y){return l.config.featureToggles.advancedDataSourcePicker?n.createElement(z,{...Y}):n.createElement(a.q,{...Y})}},51996:(J,R,e)=>{"use strict";e.d(R,{TX:()=>n,Tw:()=>l,Ve:()=>a,qW:()=>r});function n(o,g){return!o||!g?!1:typeof g=="string"?o.uid===g:o.uid===g.uid}function a(o){if(o){if(typeof o=="string")return`${o} - not found`;if("name"in o)return o.name;if(o.uid)return`${o.uid} - not found`}}function l(o,g,m){return(u,i)=>{const f=u.name.toUpperCase(),c=i.name.toUpperCase();if(o&&n(u,o))return-1;if(o&&n(i,o))return 1;const E=g.indexOf(u.uid),p=g.indexOf(i.uid);if(E>-1&&E>p)return-1;if(p>-1&&p>E)return 1;const h=m.includes(u.uid),y=m.includes(i.uid);return h&&!y?-1:y&&!h||u.meta.builtIn&&!i.meta.builtIn?1:i.meta.builtIn&&!u.meta.builtIn||f<c?-1:1}}function r(o,g=""){return o.name.toLowerCase().includes(g.toLowerCase())}},6697:(J,R,e)=>{"use strict";e.d(R,{n:()=>n});const n={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},17250:(J,R,e)=>{"use strict";e.d(R,{BM:()=>o,Hq:()=>g,wP:()=>m,wv:()=>d});var n=e(39953),a=e(973),l=e(26205);const r="grafana.features.datasources.components.picker.DataSourceDropDown.history";function o(){const[u=[],i]=(0,a.Z)(r,[]),f=(0,n.useCallback)(c=>{c.meta.builtIn||(u.includes(c.uid)?(u.splice(u.findIndex(E=>c.uid===E),1),i([...u,c.uid])):i([...u,c.uid].slice(1,6)))},[u,i]);return[u,f]}function g(u){return(0,l.F)().getList(u)}function m(u){const i=(0,l.F)();return i.getInstanceSettings(u)}function d(u){const{keyboardEvents:i,containerRef:f}=u,c=(0,n.useRef)(0),E="data-role",p="keyboardSelectableItem",h={[E]:p},y=`[${E}="${p}"`,s="data-selectedItem",v=`[${s}="true"]`,C=(0,n.useCallback)(M=>{const P=f?.current?.querySelectorAll(y),x=P?.item(M%P?.length);P?.forEach(S=>S.setAttribute(s,"false")),x&&(x.scrollIntoView({block:"center"}),x.setAttribute(s,"true"))},[f,y]),D=(0,n.useCallback)(()=>{f?.current?.querySelector(v)?.querySelector("button")?.click()},[f,v]);return(0,n.useEffect)(()=>{if(!i)return;const M=i.subscribe({next:P=>{switch(P?.code){case"ArrowDown":{C(++c.current),P.preventDefault();break}case"ArrowUp":c.current=c.current>0?c.current-1:c.current,C(c.current),P.preventDefault();break;case"Enter":D();break}}});return()=>M.unsubscribe()},[i,C,D]),(0,n.useEffect)(()=>{const M=new MutationObserver(P=>{P.some(S=>S.addedNodes&&S.addedNodes.length>0||S.removedNodes&&S.removedNodes.length>0)&&C(0)});return f.current&&M.observe(f.current,{childList:!0}),()=>{M.disconnect()}},[f,y,C]),[h,v]}},16314:(J,R,e)=>{"use strict";e.d(R,{J_:()=>ae,F5:()=>De,M9:()=>F,Kj:()=>ce,bZ:()=>_,kY:()=>k,oe:()=>q});var n=e(36316),a=e(57837),l=e(92743),r=e(4148),o=e(32688),g=e(13601),m=e(97316),d=e(21308),u=e(20367),i=e(91473),f=e(52436),c=e(33558),E=e(56586),p=e(31312),h=e(26893);const y=async()=>await(0,u.i)().get("/api/datasources"),s=async oe=>{const te=await(0,p.n)((0,u.i)().fetch({method:"GET",url:`/api/datasources/${oe}`,params:(0,h.y)(),showErrorAlert:!1}));if(te.ok)return te.data;throw Error(`Could not find data source by ID: "${oe}"`)},v=async oe=>{const te=await(0,p.n)((0,u.i)().fetch({method:"GET",url:`/api/datasources/uid/${oe}`,params:(0,h.y)(),showErrorAlert:!1}));if(te.ok)return te.data;throw Error(`Could not find data source by UID: "${oe}"`)},C=async oe=>{try{return await v(oe)}catch{console.log(`Failed to lookup data source using UID "${oe}"`)}try{return await s(oe)}catch{console.log(`Failed to lookup data source using ID "${oe}"`)}throw Error("Could not find data source")},D=oe=>(0,u.i)().post("/api/datasources",oe),M=()=>(0,u.i)().get("/api/plugins",{enabled:1,type:"datasource"}),P=oe=>(0,u.i)().put(`/api/datasources/uid/${oe.uid}`,oe,{showErrorAlert:!1,showSuccessAlert:!1}),x=oe=>(0,u.i)().delete(`/api/datasources/uid/${oe}`);var S=e(6697),I=e(45558),T=e(71592),O=e(30670),A=e(13475);function B(oe){const te=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter(he=>he),fe={},Te={},ge=W();for(const he of te)fe[he.id]=he;for(const he of oe){const me=ge.find(ue=>ue.id===he.id);if((he.enterprise||me)&&(he.category="enterprise",he.unlicensed=!(0,A.v)("enterprise.plugins"),he.info.links=me?.info?.links||he.info.links),he.info.links)for(const ue of he.info.links)ue.name="Learn more";(te.find(ue=>ue.id===he.category)||fe.other).plugins.push(he),Te[he.id]=he}for(const he of te){if(he.id==="cloud"&&he.plugins.push(V()),he.id==="enterprise")for(const me of ge)Te[me.id]||he.plugins.push(me);b(he.plugins)}return te.filter(he=>he.plugins.length>0)}function b(oe){const te={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};oe.sort((fe,Te)=>{const ge=te[fe.id]||0,he=te[Te.id]||0;return ge>he?-1:ge<he||fe.name>Te.name?1:-1})}function W(){return[w({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),w({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),w({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),w({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),w({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),w({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),w({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),w({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),w({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),w({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),w({id:"grafana-saphana-datasource",description:"SAP HANA\xAE integration and data source",name:"SAP HANA\xAE",imgUrl:"public/img/plugins/sap_hana.png"}),w({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),w({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),w({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),w({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),w({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),w({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"}),w({id:"grafana-sumologic-datasource",description:"SumoLogic integration and datasource",name:"SumoLogic",imgUrl:"public/img/plugins/sumo.svg"})]}function V(){return{id:"gcloud",name:"Grafana Cloud",type:O.zV.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}function w(oe){return{id:oe.id,name:oe.name,type:O.zV.datasource,module:"phantom",baseUrl:"",info:{description:oe.description,logos:{small:oe.imgUrl,large:oe.imgUrl},author:{name:"Grafana Labs"},links:[{url:"/plugins/"+oe.id,name:"Install now",target:"_self"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var K=e(1602),z=e(96483),G=e(53539);const Q=oe=>{let te,fe;return oe.error&&oe.error instanceof l.ZA?(te=oe.error.message,fe=oe.error.details):(0,r.kW)(oe)?te=oe.data.message??`HTTP error ${oe.statusText}`:oe instanceof Error&&(te=oe.message),{message:te,details:fe}},j=oe=>{const{details:te,message:fe,status:Te}=oe;return{status:Te,message:fe,details:te}},F=(oe,te={loadDataSource:Y,loadDataSourceMeta:Z,getDataSource:G.f6,getDataSourceMeta:G.G4,importDataSourcePlugin:E.nL})=>async(fe,Te)=>{if(!oe){fe((0,z.CT)(new Error("Invalid UID")));return}try{const ge=await fe(te.loadDataSource(oe));await fe(te.loadDataSourceMeta(ge));const he=te.getDataSource(Te().dataSources,oe),me=te.getDataSourceMeta(Te().dataSources,he.type),ye=await te.importDataSourcePlugin(me);fe((0,z.iZ)(ye))}catch(ge){ge instanceof Error&&fe((0,z.CT)(ge))}},k=(oe,te=S.n.Edit,fe={getDatasourceSrv:f.ak,getBackendSrv:u.i})=>async(Te,ge)=>{const he=await fe.getDatasourceSrv().get(oe),me=te.replace(/:uid/gi,oe);he.testDatasource&&(Te((0,z.j_)()),fe.getBackendSrv().withNoBackendCache(async()=>{try{const ye=await he.testDatasource(),ue=j({...ye,details:{...ye.details}});Te((0,z.ng)(ue)),(0,I.Rw)({grafana_version:o.config.buildInfo.version,plugin_id:he.type,datasource_uid:he.uid,success:!0,path:me}),d.h$.publish(new n.U6)}catch(ye){const ue=Q(ye);Te((0,z.Aq)({...ue})),(0,I.Rw)({grafana_version:o.config.buildInfo.version,plugin_id:he.type,datasource_uid:he.uid,success:!1,path:me}),d.h$.publish(new n._m)}}))};function _(){return async oe=>{oe((0,z.MP)());const te=await y();oe((0,z.be)(te))}}function Y(oe){return async te=>{let fe=await C(oe);return oe!==fe.uid&&(window.location.href=a.u.assureBaseUrl(`/datasources/edit/${fe.uid}`),fe={}),te((0,z.rl)(fe)),fe}}function Z(oe){return async te=>{const fe=await(0,c.a)(oe.type),Te=await(0,E.nL)(fe),ge=Te.DataSourceClass.prototype instanceof l.CK,he={...fe,isBackend:fe.backend||ge};te((0,z.jS)(he)),Te.meta=he,te((0,m.RL)((0,K.B1)(oe,Te)))}}function ae(oe,te=S.n.Edit){return async(fe,Te)=>{const ge=await y();fe((0,z.be)(ge));const he=Te().dataSources.dataSources,me=he.length===0,ye={name:oe.name,type:oe.id,access:"proxy",isDefault:me};(0,T.NV)(he,ye.name)&&(ye.name=(0,T.eM)(he,ye.name));const ue=await D(ye),Oe=te.replace(/:uid/gi,ue.datasource.uid);await(0,f.ak)().reload(),await d.Vt.fetchUserPermissions(),(0,I.Er)({grafana_version:o.config.buildInfo.version,plugin_id:oe.id,datasource_uid:ue.datasource.uid,plugin_version:ue.meta?.info?.version,path:Oe}),g.E1.push(Oe)}}function ce(){return async oe=>{oe((0,z.Ww)());const te=await M(),fe=B(te);oe((0,z.wZ)({plugins:te,categories:fe}))}}function q(oe){return async te=>{try{await P(oe)}catch(fe){const Te=Q(fe);return te((0,z.Aq)(Te)),Promise.reject(oe)}return await(0,f.ak)().reload(),te(Y(oe.uid))}}function De(){return async(oe,te)=>{const{uid:fe}=te().dataSources.dataSource;try{await x(fe),await(0,f.ak)().reload();const Te=i.Z.DataSources;g.E1.push(Te)}catch(Te){const ge=Q(Te);oe((0,z.Aq)(ge))}}}},49993:(J,R,e)=>{"use strict";e.d(R,{V:()=>l});var n=e(39953),a=e(6697);const l=(0,n.createContext)(a.n)},45880:(J,R,e)=>{"use strict";e.d(R,{E:()=>c,IA:()=>M,OU:()=>y,Qs:()=>P,YY:()=>S,_l:()=>x,d7:()=>I,hw:()=>E,nH:()=>s,q6:()=>C,qj:()=>v,wl:()=>D,zJ:()=>p});var n=e(39953),a=e(43686),l=e(28833),r=e(21308),o=e(57721),g=e(73431),m=e(71592),d=e(16314),u=e(49993),i=e(96483),f=e(53539);const c=T=>{const O=(0,o.useDispatch)();(0,n.useEffect)(()=>(O((0,d.M9)(T)),function(){O((0,a.e)({cleanupAction:B=>B.dataSourceSettings=i.fk}))}),[T,O])},E=T=>{const O=(0,o.useDispatch)(),A=I();return()=>O((0,d.kY)(T,A.Edit))},p=()=>{const T=(0,o.useDispatch)(),O=(0,o.useSelector)(B=>B.dataSources.isLoadingDataSources),A=(0,o.useSelector)(B=>B.dataSources.dataSources);return(0,n.useEffect)(()=>{T((0,d.bZ)())},[T]),{isLoading:O,dataSources:A}},h=T=>{const O=useDispatch();useEffect(()=>{O(loadDataSource(T))},[O,T])},y=()=>{const T=(0,o.useDispatch)();(0,n.useEffect)(()=>{T((0,d.Kj)())},[T])},s=()=>{const T=(0,o.useDispatch)(),O=I();return A=>{T((0,d.J_)(A,O.Edit))}},v=()=>{const T=(0,o.useDispatch)();return async O=>T((0,d.oe)(O))},C=()=>{const T=(0,o.useDispatch)(),{name:O}=(0,o.useSelector)(A=>A.dataSources.dataSource);return()=>{l.Z.publish(new g.VJ({title:"Delete",text:`Are you sure you want to delete the "${O}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>T((0,d.F5)())}))}},D=T=>(0,o.useSelector)(O=>(0,f.f6)(O.dataSources,T)),M=T=>{const O=D(T);return(0,m.iU)(O)},P=T=>(0,o.useSelector)(O=>(0,f.G4)(O.dataSources,T)),x=()=>(0,o.useSelector)(T=>T.dataSourceSettings),S=T=>{const O=D(T),A=O.readOnly===!0,B=r.Vt.hasPermissionInMetadata(o.AccessControlAction.DataSourcesWrite,O),b=r.Vt.hasPermissionInMetadata(o.AccessControlAction.DataSourcesDelete,O);return{readOnly:A,hasWriteRights:B,hasDeleteRights:b}},I=()=>(0,n.useContext)(u.V)},60998:(J,R,e)=>{"use strict";e.d(R,{BX:()=>o.BX,E:()=>l.E,Ht:()=>o.Ht,I5:()=>g.I5,IA:()=>g.IA,IO:()=>g.IO,J_:()=>n.J_,Nu:()=>o.Nu,OU:()=>l.OU,Qs:()=>l.Qs,Rz:()=>l.IA,Vj:()=>a.V,YY:()=>l.YY,_l:()=>l._l,d7:()=>l.d7,hw:()=>l.hw,mt:()=>g.mt,nH:()=>l.nH,q6:()=>l.q6,qj:()=>l.qj,r7:()=>g.r7,rl:()=>o.rl,wl:()=>l.wl,yr:()=>o.yr,zJ:()=>l.zJ,zT:()=>o.zT});var n=e(16314),a=e(49993),l=e(45880),r=e(1602),o=e(96483),g=e(53539)},1602:(J,R,e)=>{"use strict";e.d(R,{B1:()=>u,nI:()=>i,xG:()=>f});var n=e(30670),a=e(13475),l=e(42367),r=e(50820),o=e(21308),g=e(22001),m=e(57721);const d="Loading";function u(E,p){const h=p.meta,y=r.default.featureToggles.featureHighlights,s=r.default.featureToggles.dataSourcePageHeader,v={img:h.info.logos.large,id:"datasource-"+E.uid,url:"",text:E.name,children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${E.uid}`,text:"Settings",url:`datasources/edit/${E.uid}/`}]};if(s||(v.subTitle=`Type: ${h.name}`),p.configPages)for(const T of p.configPages)v.children.push({active:!1,text:T.title,icon:T.icon,url:`datasources/edit/${E.uid}/?page=${T.id}`,id:`datasource-page-${T.id}`});h.includes&&c(h.includes)&&o.Vt.hasRole("Admin")&&v.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${E.uid}`,text:"Dashboards",url:`datasources/edit/${E.uid}/dashboards`});const C=E.type===d,D="feature-highlights-data-source-permissions-badge",M={active:!1,icon:"lock",id:`datasource-permissions-${E.uid}`,text:"Permissions",url:`datasources/edit/${E.uid}/permissions`};(0,g.d5)()&&!C&&(M.tabSuffix=()=>(0,l.Z)({experimentId:D,eventVariant:"trial"})),(0,a.v)("dspermissions.enforcement")?o.Vt.hasPermission(m.AccessControlAction.DataSourcesPermissionsRead)&&v.children.push(M):y&&!C&&v.children.push({...M,url:M.url+"/upgrade",tabSuffix:()=>(0,l.Z)({experimentId:D})});const P="feature-highlights-data-source-insights-badge",x={active:!1,icon:"info-circle",id:`datasource-insights-${E.uid}`,text:"Insights",url:`datasources/edit/${E.uid}/insights`};(0,g.d5)()&&!C&&(x.tabSuffix=()=>(0,l.Z)({experimentId:P,eventVariant:"trial"})),(0,a.v)("analytics")?o.Vt.hasPermission(m.AccessControlAction.DataSourcesInsightsRead)&&v.children.push(x):y&&!C&&v.children.push({...x,url:x.url+"/upgrade",tabSuffix:()=>(0,l.Z)({experimentId:P})});const S="feature-highlights-query-caching-badge",I={active:!1,icon:"database",id:`datasource-cache-${E.uid}`,text:"Cache",url:`datasources/edit/${E.uid}/cache`,hideFromTabs:!h.isBackend||!r.default.caching.enabled};return(0,g.d5)()&&!C&&(I.tabSuffix=()=>(0,l.Z)({experimentId:S,eventVariant:"trial"})),(0,a.v)("caching")?o.Vt.hasPermissionInMetadata(m.AccessControlAction.DataSourcesCachingRead,E)&&v.children.push(I):y&&!C&&v.children.push({...I,url:I.url+"/upgrade",tabSuffix:()=>(0,l.Z)({experimentId:S})}),v}function i(E,p){let h={text:""};for(const y of E.children)if(y.id.indexOf(p)>0){y.active=!0,h=y;break}return{main:E,node:h}}function f(E){const p=u({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:d,typeName:d,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:n.zV.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return i(p,E)}function c(E){return E.find(p=>p.type==="dashboard")!==void 0}},96483:(J,R,e)=>{"use strict";e.d(R,{Aq:()=>P,BX:()=>E,CT:()=>C,Ht:()=>c,MP:()=>o,Nu:()=>h,Ww:()=>d,ZP:()=>S,be:()=>g,fk:()=>s,iZ:()=>v,jS:()=>m,j_:()=>D,ng:()=>M,rl:()=>r,wZ:()=>u,yr:()=>p,zT:()=>i});var n=e(77960),a=e(94562);const l={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:a.l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},r=(0,n.PH)("dataSources/dataSourceLoaded"),o=(0,n.PH)("dataSources/dataSourcesLoad"),g=(0,n.PH)("dataSources/dataSourcesLoaded"),m=(0,n.PH)("dataSources/dataSourceMetaLoaded"),d=(0,n.PH)("dataSources/dataSourcePluginsLoad"),u=(0,n.PH)("dataSources/dataSourcePluginsLoaded"),i=(0,n.PH)("dataSources/setDataSourcesSearchQuery"),f=(0,n.PH)("dataSources/setDataSourcesLayoutMode"),c=(0,n.PH)("dataSources/setDataSourceTypeSearchQuery"),E=(0,n.PH)("dataSources/setDataSourceName"),p=(0,n.PH)("dataSources/setIsDefault"),h=(0,n.PH)("dataSources/setIsSortAscending"),y=(I=l,T)=>o.match(T)?{...I,isLoadingDataSources:!0}:g.match(T)?{...I,isLoadingDataSources:!1,dataSources:T.payload,dataSourcesCount:T.payload.length}:r.match(T)?{...I,dataSource:T.payload}:i.match(T)?{...I,searchQuery:T.payload}:f.match(T)?{...I,layoutMode:T.payload}:d.match(T)?{...I,plugins:[],isLoadingDataSourcePlugins:!0}:u.match(T)?{...I,plugins:T.payload.plugins,categories:T.payload.categories,isLoadingDataSourcePlugins:!1}:c.match(T)?{...I,dataSourceTypeSearchQuery:T.payload}:m.match(T)?{...I,dataSourceMeta:T.payload}:E.match(T)?{...I,dataSource:{...I.dataSource,name:T.payload}}:p.match(T)?{...I,dataSource:{...I.dataSource,isDefault:T.payload}}:h.match(T)?{...I,isSortAscending:T.payload}:I,s={testingStatus:{},loadError:null,loading:!0,plugin:null},v=(0,n.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),C=(0,n.PH)("dataSourceSettings/initDataSourceSettingsFailed"),D=(0,n.PH)("dataSourceSettings/testDataSourceStarting"),M=(0,n.PH)("dataSourceSettings/testDataSourceSucceeded"),P=(0,n.PH)("dataSourceSettings/testDataSourceFailed"),S={dataSources:y,dataSourceSettings:(I=s,T)=>v.match(T)?{...I,plugin:T.payload,loadError:null,loading:!1}:C.match(T)?{...I,plugin:null,loadError:T.payload.message,loading:!1}:D.match(T)?{...I,testingStatus:{message:"Testing... this could take up to a couple of minutes",status:"info"}}:M.match(T)?{...I,testingStatus:{status:T.payload?.status,message:T.payload?.message,details:T.payload?.details}}:P.match(T)?{...I,testingStatus:{status:"error",message:T.payload?.message,details:T.payload?.details}}:I}},53539:(J,R,e)=>{"use strict";e.d(R,{G4:()=>r,I5:()=>a,IA:()=>d,IO:()=>o,f6:()=>l,mt:()=>n,r7:()=>m});const n=u=>{const i=new RegExp(u.searchQuery,"i");return u.dataSources.filter(c=>i.test(c.name)||i.test(c.database)||i.test(c.type)).sort((c,E)=>u.isSortAscending?c.name.localeCompare(E.name):E.name.localeCompare(c.name))},a=u=>{const i=new RegExp(u.dataSourceTypeSearchQuery,"i");return u.plugins.filter(f=>i.test(f.name))},l=(u,i)=>u.dataSource.uid===i?u.dataSource:{},r=(u,i)=>u.dataSourceMeta.id===i?u.dataSourceMeta:{},o=u=>u.searchQuery,g=u=>u.layoutMode,m=u=>u.dataSourcesCount,d=u=>u.isSortAscending},45558:(J,R,e)=>{"use strict";e.d(R,{Er:()=>a,Rw:()=>l,U4:()=>r,aL:()=>d,dF:()=>g,hJ:()=>o,ij:()=>m});var n=e(72639);const a=u=>{(0,n.ff)("grafana_ds_add_datasource_clicked",u)},l=u=>{(0,n.ff)("grafana_ds_test_datasource_clicked",u)},r=u=>{(0,n.ff)("grafana_ds_explore_datasource_clicked",u)},o=u=>{(0,n.ff)("grafana_ds_create_dashboard_clicked",u)},g=u=>{(0,n.ff)("grafana_ds_datasources_list_viewed",u)},m=u=>{(0,n.ff)("connections_datasources_settings_clicked",{item:u})},d=u=>{(0,n.ff)("connections_datasources_ds_configured",u)}},71592:(J,R,e)=>{"use strict";e.d(R,{NV:()=>l,eM:()=>r,iU:()=>u});var n=e(69307),a=e(57837);function l(i,f){return i.filter(c=>c.name.toLowerCase()===f.toLowerCase()).length>0}function r(i,f){for(;l(i,f);)o(f)?f=`${d(f)}${m(g(f))}`:f=`${f}-1`;return f}function o(i){return i.endsWith("-",i.length-1)}function g(i){return parseInt(i.slice(-1),10)}function m(i){return isNaN(i)?1:i+1}function d(i){return i.slice(0,i.length-1)}const u=i=>{const f=JSON.stringify({datasource:i.name,context:"explore"});return n.Cj.renderUrl(a.u.assureBaseUrl("/explore"),{left:f})}},23482:()=>{"use strict"},29080:(J,R,e)=>{"use strict";e.d(R,{L:()=>d});var n=e(41407),a=e(39953),l=e(82803),r=e(9558),o=e(69360),g=e(29711);const m={label:"Fixed color",value:"_____fixed_____"},d=i=>{const{value:f,context:c,onChange:E}=i,p="dark-green",h=(0,l.wW)(u),y=f?.field,s=!y,v=(0,g.IX)(c.data),C=(0,g.nw)(v,y,m),D=(0,a.useCallback)(x=>{const S=x.value;if(S&&S!==m.value)E({...f,field:S});else{const I=f?.fixed??p;E({...f,field:void 0,fixed:I})}},[E,f]),M=(0,a.useCallback)(x=>{E({field:void 0,fixed:x??p})},[E]),P=s?m:C.find(x=>x.value===y);return a.createElement(a.Fragment,null,a.createElement("div",{className:h.container},a.createElement(r.Ph,{value:P,options:C,onChange:D,noOptionsMessage:"No fields found"}),s&&a.createElement("div",{className:h.picker},a.createElement(o.zH,{color:f?.fixed??p,onChange:M,enableNamedColors:!0}))))},u=i=>({container:(0,n.css)`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:(0,n.css)`
    padding-left: 8px;
  `})},57346:(J,R,e)=>{"use strict";e.d(R,{E:()=>h});var n=e(41407),a=e(39953),l=e(82803),r=e(4919),o=e(74661),g=e(69171),m=e(38637),d=e(66557),u=e(55407),i=e(58842),f=e(65132),c=e(47850),E=e(11925),p=e(44207);const h=v=>{const{value:C,src:D,name:M,placeholder:P,onChange:x,onClear:S,mediaType:I,folderName:T,size:O,color:A}=v,B=(0,l.wW)(s),b=(0,l.l4)(),W=(0,a.createRef)(),V=a.createElement(p.Y,{onChange:x,value:C,mediaType:I,folderName:T});let w=D;!w&&C&&(w=(0,c.t)(C));const K=A&&{fill:b.visualization.getColorByName(A)},z=()=>C&&w?a.createElement(f.V,{src:w,className:B.icon,style:{...K}}):a.createElement(r.Qj,{variant:"primary",fill:"text",size:"sm"},"Set icon"),G=()=>a.createElement(o.Z,null,a.createElement(g._,{label:null,grow:!0},a.createElement(m.I,{value:y(D,M),placeholder:P,readOnly:!0,prefix:w&&a.createElement(f.V,{src:w,className:B.icon,style:{...K}}),suffix:a.createElement(r.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:S})})));return a.createElement(d.D,{content:V},(Q,j,F)=>a.createElement(a.Fragment,null,W.current&&a.createElement(u.J,{...F,referenceElement:W.current,onMouseEnter:Q,onKeyDown:k=>{(0,i.i)(k,j)}}),a.createElement("div",{ref:W,className:B.pointer,onClick:Q,onKeyDown:k=>{k.key==="Enter"&&Q()},role:"button",tabIndex:0},O===E.zc.SMALL&&z(),O===E.zc.NORMAL&&G())))};function y(v,C){if(v?.startsWith("public/img/icons")){const D=C?.lastIndexOf(".svg")??0;if(D>0)return C.substring(0,D)}return C}const s=v=>({pointer:(0,n.css)`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:(0,n.css)`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},44207:(J,R,e)=>{"use strict";e.d(R,{Y:()=>z});var n=e(41407),a=e(41056),l=e(30064),r=e(17037),o=e(39953),g=e(4148),m=e(82803),d=e(4919),u=e(50820),i=e(11925),f=e(96227),c=e(17789),E=e(65132);function p({secondaryText:Q="Drag and drop here or browse"}){const j=(0,m.wW)(y);return o.createElement("div",{className:j.iconWrapper},o.createElement("small",{className:j.small},Q),o.createElement(d.zx,{type:"button",icon:"upload"},"Upload"))}const h=({mediaType:Q,setFormData:j,setUpload:F,error:k})=>{const _=(0,m.wW)(y),[Y,Z]=(0,o.useState)(!1),[ae,ce]=(0,o.useState)(""),q=()=>o.createElement(f.g,{label:"Preview"},o.createElement("div",{className:_.iconPreview},Q===i.DD.Icon&&o.createElement(E.V,{src:ae,className:_.img}),Q===i.DD.Image&&o.createElement("img",{src:ae,alt:"Preview of the uploaded file",className:_.img}))),De=te=>{fetch(`/api/storage/delete/upload/${te.file.name}`,{method:"DELETE"}).catch(fe=>console.error("cannot delete file",fe))},oe=Q==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return o.createElement(c.Yo,{readAs:"readAsBinaryString",onFileRemove:De,options:{accept:oe,multiple:!1,onDrop:te=>{let fe=new FormData;fe.append("file",te[0]),ce(URL.createObjectURL(te[0])),Z(!0),j(fe),F(!0)}}},k.message!==""&&Y?o.createElement("p",null,k.message):Y?o.createElement(q,null):o.createElement(p,null))};function y(Q,j){return{container:(0,n.css)`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:(0,n.css)`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${Q.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${Q.colors.border.medium};
      background-color: ${j?Q.colors.background.secondary:Q.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:(0,n.css)`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:(0,n.css)`
      margin: ${Q.spacing(2,0,1)};
    `,small:(0,n.css)`
      color: ${Q.colors.text.secondary};
      margin-bottom: ${Q.spacing(2)};
    `,iconContainer:(0,n.css)`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:(0,n.css)`
      width: 238px;
      height: 198px;
      border: 1px solid ${Q.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:(0,n.css)`
      width: 147px;
      height: 147px;
      fill: ${Q.colors.text.primary};
    `}}var s=e(9558),v=e(41245),C=e(52436),D=e(19977),M=e(68084),P=e(64084);const x=(0,o.memo)(function(j){const{columnIndex:F,rowIndex:k,style:_,data:Y}=j,{cards:Z,columnCount:ae,onChange:ce,selected:q}=Y,De=F+k*ae,oe=Z[De],te=(0,m.l4)(),fe=S(te);return o.createElement("div",{style:_},oe&&o.createElement("div",{key:oe.value,className:q===oe.value?(0,n.cx)(fe.card,fe.selected):fe.card,onClick:()=>ce(oe.value),onKeyDown:Te=>{Te.key==="Enter"&&ce(oe.value)},role:"button",tabIndex:0},oe.imgUrl.endsWith(".svg")?o.createElement(E.V,{src:oe.imgUrl,className:fe.img}):o.createElement("img",{src:oe.imgUrl,alt:"",className:fe.img}),o.createElement("h6",{className:fe.text},oe.label.slice(0,-4))))},M.wy),S=(0,P.B)(Q=>({card:(0,n.css)`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${Q.colors.action.hover};
        box-shadow: ${Q.shadows.z2};
      }
    `,selected:(0,n.css)`
      border: 2px solid ${Q.colors.primary.main};
      :hover {
        border-color: ${Q.colors.primary.main};
      }
    `,img:(0,n.css)`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${Q.colors.text.primary};
    `,text:(0,n.css)`
      color: ${Q.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:(0,n.css)`
      border: 1px solid ${Q.colors.border.medium};
    `})),I=Q=>{const{onChange:j,cards:F,value:k}=Q,_=(0,m.l4)(),Y=S(_);return o.createElement(D.Z,{defaultWidth:680},({width:Z,height:ae})=>{const De=Math.floor(Z/90),oe=Math.ceil(F.length/De);return o.createElement(M.Ym,{width:Z,height:ae,columnCount:De,columnWidth:90,rowCount:oe,rowHeight:90,itemData:{cards:F,columnCount:De,onChange:j,selected:k},className:Y.grid},x)})},T=Q=>Q===i.DD.Icon?[i.QS.Icon,i.QS.IOT,i.QS.Marker]:[i.QS.BG],O=(Q,j)=>Q.find(F=>j.startsWith(F.value))??Q[0],A=Q=>{const{value:j,mediaType:F,folderName:k,newValue:_,setNewValue:Y}=Q,Z=(0,m.wW)(B),ae=T(F).map(me=>({label:me,value:me})),[ce,q]=(0,o.useState)(),[De,oe]=(0,o.useState)(O(ae,j?.length?j:k)),[te,fe]=(0,o.useState)([]),[Te,ge]=(0,o.useState)([]),he=me=>{me?(me=me.toLowerCase(),ge(te.filter(ye=>ye.search.includes(me)))):ge(te)};return(0,o.useEffect)(()=>{const me=De?.value;if(me){const ye=F===i.DD.Icon?ue=>ue.name.endsWith(".svg"):ue=>ue.name.endsWith(".png")||ue.name.endsWith(".gif");(0,C.ak)().get("-- Grafana --").then(ue=>{ue.listFiles(me).subscribe({next:Oe=>{const Ue=[];Oe.forEach(at=>{if(ye(at)){const Ne=at.name.lastIndexOf(".");Ue.push({value:`${me}/${at.name}`,label:at.name,search:(Ne?at.name.substring(0,Ne):at.name).toLowerCase(),imgUrl:`public/${me}/${at.name}`})}}),fe(Ue),ge(Ue)}})})}},[F,De]),o.createElement(o.Fragment,null,o.createElement(f.g,null,o.createElement(s.Ph,{options:ae,onChange:oe,value:De,menuShouldPortal:!1})),o.createElement(f.g,null,o.createElement(v.H,{value:ce??"",placeholder:"Search",onChange:me=>{he(me),q(me)}})),Te&&o.createElement("div",{className:Z.cardsWrapper},o.createElement(I,{cards:Te,onChange:me=>Y(me),value:_})))},B=Q=>({cardsWrapper:(0,n.css)`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var b=e(38637),W=e(36495),V=e(47850);const w=Q=>{const{newValue:j,setNewValue:F,mediaType:k}=Q,_=(0,m.wW)(K),Y=(0,V.t)(j);let Z=j?.substring(j.lastIndexOf("/")+1,j.lastIndexOf("."));return Z.length>20&&(Z=Z.substring(0,20)+"..."),o.createElement(o.Fragment,null,o.createElement(f.g,null,o.createElement(b.I,{onChange:ae=>F(ae.currentTarget.value),value:j})),o.createElement("div",{className:_.iconContainer},o.createElement(f.g,{label:"Preview"},o.createElement("div",{className:_.iconPreview},k===i.DD.Icon&&o.createElement(E.V,{src:Y,className:_.img}),k===i.DD.Image&&j&&o.createElement("img",{src:Y,alt:"Preview of the selected URL",className:_.img}))),o.createElement(W._,null,Z)))},K=Q=>({iconContainer:(0,n.css)`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:(0,n.css)`
    width: 238px;
    height: 198px;
    border: 1px solid ${Q.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:(0,n.css)`
    width: 147px;
    height: 147px;
    fill: ${Q.colors.text.primary};
  `}),z=Q=>{const{value:j,onChange:F,mediaType:k,folderName:_}=Q,Y=(0,m.wW)(G),Z=()=>{F(j)},ae=(0,o.createRef)(),{dialogProps:ce}=(0,a.R)({},ae),{overlayProps:q}=(0,r.Ir)({onClose:Z,isDismissable:!0,isOpen:!0},ae),De=j&&j.includes("://"),[oe,te]=(0,o.useState)(j??""),[fe,Te]=(0,o.useState)(De?i.hQ.URL:i.hQ.Folder),[ge,he]=(0,o.useState)(new FormData),[me,ye]=(0,o.useState)(!1),[ue,Oe]=(0,o.useState)({message:""}),Ue=et=>`${Y.resourcePickerPopoverTab} ${fe===et&&Y.resourcePickerPopoverActiveTab}`,at=()=>o.createElement(A,{value:j,mediaType:k,folderName:_,newValue:oe,setNewValue:te}),Ne=()=>o.createElement(w,{newValue:oe,setNewValue:te,mediaType:k}),_e=()=>o.createElement(h,{mediaType:k,setFormData:he,setUpload:ye,newValue:oe,error:ue}),Ke=()=>{switch(fe){case i.hQ.Folder:return at();case i.hQ.URL:return Ne();case i.hQ.Upload:return _e();default:return at()}};return o.createElement(l.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},o.createElement("section",{ref:ae,...q,...ce},o.createElement("div",{className:Y.resourcePickerPopover},o.createElement("div",{className:Y.resourcePickerPopoverTabs},o.createElement("button",{className:Ue(i.hQ.Folder),onClick:()=>Te(i.hQ.Folder)},"Folder"),o.createElement("button",{className:Ue(i.hQ.URL),onClick:()=>Te(i.hQ.URL)},"URL")),o.createElement("div",{className:Y.resourcePickerPopoverContent},Ke(),o.createElement("div",{className:Y.buttonRow},o.createElement(d.zx,{variant:"secondary",onClick:()=>Z(),fill:"outline"},"Cancel"),o.createElement(d.zx,{variant:oe&&oe!==j?"primary":"secondary",onClick:()=>{me?fetch("/api/storage/upload",{method:"POST",body:ge}).then(et=>{if(et.status>=400){et.json().then(ze=>Oe(ze));return}else return et.json()}).then(et=>{(0,g.i)().get(`api/storage/read/${et.path}`).then(()=>te(`${u.config.appUrl}api/storage/read/${et.path}`)).then(()=>F(`${u.config.appUrl}api/storage/read/${et.path}`))}).catch(et=>console.error(et)):F(oe)}},"Select"))))))},G=Q=>({resourcePickerPopover:(0,n.css)`
    border-radius: ${Q.shape.radius.default};
    box-shadow: ${Q.shadows.z3};
    background: ${Q.colors.background.primary};
    border: 1px solid ${Q.colors.border.weak};
  `,resourcePickerPopoverTab:(0,n.css)`
    width: 50%;
    text-align: center;
    padding: ${Q.spacing(1,0)};
    background: ${Q.colors.background.secondary};
    color: ${Q.colors.text.secondary};
    font-size: ${Q.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:(0,n.css)`
    color: ${Q.colors.text.primary};
    font-weight: ${Q.typography.fontWeightMedium};
    background: ${Q.colors.background.primary};
  `,resourcePickerPopoverContent:(0,n.css)`
    width: 315px;
    font-size: ${Q.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${Q.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:(0,n.css)`
    display: flex;
    width: 100%;
    border-radius: ${Q.shape.radius.default} ${Q.shape.radius.default} 0 0;
  `,buttonRow:(0,n.css)({display:"flex",justifyContent:"center",gap:Q.spacing(2),padding:Q.spacing(1)})})},19226:(J,R,e)=>{"use strict";e.d(R,{$:()=>c});var n=e(39953),a=e(34547),l=e(74661),r=e(69171),o=e(20454),g=e(4919),m=e(57669),d=e(40866);const u=[{label:"Fixed",value:a.xy.Fixed,description:"Fixed value"},{label:"Field",value:a.xy.Field,description:"Display field value"}],i={settings:{}},f={settings:{}},c=({value:E,context:p,onChange:h})=>{const s=(0,n.useCallback)(P=>{h({...E,mode:P})},[h,E]),v=(0,n.useCallback)(P=>{h({...E,field:P})},[h,E]),C=(0,n.useCallback)((P="")=>{h({...E,fixed:P})},[h,E]),D=()=>{C("")},M=E?.mode??a.xy.Fixed;return n.createElement(n.Fragment,null,n.createElement(l.Z,null,n.createElement(r._,{label:"Source",labelWidth:9,grow:!0},n.createElement(o.S,{value:M,options:u,onChange:s,fullWidth:!0}))),M!==a.xy.Fixed&&n.createElement(l.Z,null,n.createElement(r._,{label:"Field",labelWidth:9,grow:!0},n.createElement(m.b,{context:p,value:E.field??"",onChange:v,item:i}))),M===a.xy.Fixed&&n.createElement(l.Z,{key:E?.fixed},n.createElement(r._,{label:"Value",labelWidth:9,grow:!0},n.createElement(d.A,{context:p,value:E?.fixed,onChange:C,item:f,suffix:E?.fixed&&n.createElement(g.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:D})}))),M===a.xy.Template&&n.createElement(l.Z,null,n.createElement(r._,{label:"Template",labelWidth:9,grow:!0},n.createElement(d.A,{context:p,value:E?.fixed,onChange:C,item:f}))))}},473:(J,R,e)=>{"use strict";e.d(R,{Lm:()=>n.L,Lv:()=>h,k9:()=>B,cL:()=>S,$2:()=>W.$});var n=e(29080),a=e(39953);const l=({value:V,onChange:w})=>{const[K,z]=useState(V?[{value:V,label:V}]:[]),[G,Q]=useState(),j=window.__grafana_public_path__+"img/icons/unicons/",F=k=>{w(k),Q(k)};return useEffect(()=>{getBackendSrv().get(`${j}/index.json`).then(k=>{z(k.files.map(_=>({value:_,label:_})))})},[j]),React.createElement(Select,{options:K,value:G,onChange:k=>{F(k.value)}})},r=null;var o=e(34547),g=e(74661),m=e(69171),d=e(20454),u=e(57669),i=e(85256),f=e(11925),c=e(57346);const E=[{label:"Fixed",value:o.Q8.Fixed,description:"Fixed value"},{label:"Field",value:o.Q8.Field,description:"Use a string field result"}],p={settings:{}},h=V=>{const{value:w,context:K,onChange:z,item:G}=V,Q=9,j=(0,a.useCallback)(De=>{z({...w,mode:De})},[z,w]),F=(0,a.useCallback)((De="")=>{z({...w,field:De})},[z,w]),k=(0,a.useCallback)(De=>{z({...w,fixed:De??""})},[z,w]),_=De=>{De.stopPropagation(),z({mode:o.Q8.Fixed,fixed:"",field:""})},Y=w?.mode??o.Q8.Fixed,Z=G.settings?.showSourceRadio??!0,ae=G.settings?.resourceType??f.DD.Icon,ce=G.settings?.folderName??i.ResourceFolderName.Icon;let q="";return ae===f.DD.Icon&&(w?.fixed?q=(0,i.getPublicOrAbsoluteUrl)(w.fixed):G.settings?.placeholderValue&&(q=(0,i.getPublicOrAbsoluteUrl)(G.settings.placeholderValue))),a.createElement(a.Fragment,null,Z&&a.createElement(g.Z,null,a.createElement(m._,{label:"Source",labelWidth:Q,grow:!0},a.createElement(d.S,{value:Y,options:E,onChange:j,fullWidth:!0}))),Y!==o.Q8.Fixed&&a.createElement(g.Z,null,a.createElement(m._,{label:"Field",labelWidth:Q,grow:!0},a.createElement(u.b,{context:K,value:w.field??"",onChange:F,item:p}))),Y===o.Q8.Fixed&&a.createElement(c.E,{onChange:k,onClear:_,value:w?.fixed,src:q,placeholder:G.settings?.placeholderText??"Select a value",name:y(w?.fixed)??"",mediaType:ae,folderName:ce,size:f.zc.NORMAL}),Y===o.Q8.Mapping&&a.createElement(g.Z,null,a.createElement(m._,{label:"Mappings",labelWidth:Q,grow:!0},a.createElement("div",null,"TODO mappings editor!"))))};function y(V){if(!V)return;const w=V.lastIndexOf("/");return w>0?V.substring(w+1):V}var s=e(41407),v=e(82803),C=e(9558),D=e(29711),M=e(30359),P=e(11155);const x={label:"Fixed value",value:"_____fixed_____"},S=V=>{const{value:w,context:K,onChange:z,item:G}=V,{settings:Q}=G,j=(0,v.wW)(I),F=w?.field,k=!F,_=(0,D.IX)(K.data),Y=(0,D.nw)(_,F,x),Z=(0,a.useMemo)(()=>(0,P.x5)(Q),[Q]),ae=(0,a.useCallback)(Te=>{z((0,P.C)(Te,Z))},[z,Z]),ce=(0,a.useCallback)(Te=>{const ge=Te.value;ge&&ge!==x.value?ae({...w,field:ge}):ae({...w,field:void 0})},[ae,w]),q=(0,a.useCallback)(Te=>{Te!==void 0&&ae({...w,min:Te})},[ae,w]),De=(0,a.useCallback)(Te=>{Te!==void 0&&ae({...w,max:Te})},[ae,w]),oe=(0,a.useCallback)(Te=>{Te!==void 0&&ae({...w,fixed:Te})},[ae,w]),te=w??{},fe=k?x:Y.find(Te=>Te.value===F);return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(C.Ph,{value:fe,options:Y,onChange:ce,noOptionsMessage:"No fields found"})),a.createElement("div",{className:j.range},k&&a.createElement(g.Z,null,a.createElement(m._,{label:"Value",labelWidth:8,grow:!0},a.createElement(M.Y,{value:te.fixed,...Z,onChange:oe}))),!k&&!Z.hideRange&&a.createElement(a.Fragment,null,a.createElement(g.Z,null,a.createElement(m._,{label:"Min",labelWidth:8,grow:!0},a.createElement(M.Y,{value:te.min,...Z,onChange:q}))),a.createElement(g.Z,null,a.createElement(m._,{label:"Max",labelWidth:8,grow:!0},a.createElement(M.Y,{value:te.max,...Z,onChange:De}))))))},I=V=>({range:(0,s.css)`
    padding-top: 8px;
  `});var T=e(89591);const O={label:"Fixed value",value:"_____fixed_____"},A=[{label:"Mod",value:o.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:o.eK.Clamped,description:"Use field values, clamped to max and min"}],B=({value:V,context:w,onChange:K,item:z})=>{const{settings:G}=z,Q=0,j=V?.field,F=!j,k=(0,D.IX)(w.data),_=(0,D.nw)(k,j,O,T.fS.number),Y=(0,v.wW)(b),Z=(0,a.useCallback)(te=>{const fe=te.value;if(fe&&fe!==O.value)K({...V,field:fe});else{const Te=V.fixed??Q;K({...V,field:void 0,fixed:Te})}},[K,V]),ae=(0,a.useCallback)(te=>{K({...V,mode:te})},[K,V]),ce=(0,a.useCallback)(te=>{K({...V,field:void 0,fixed:te??Q})},[K,V]),q=V??{},De=V?.mode??o.eK.Mod,oe=F?O:_.find(te=>te.value===j);return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(g.Z,null,a.createElement(m._,{label:"Limit",labelWidth:8,grow:!0},a.createElement(d.S,{value:De,options:A,onChange:ae,fullWidth:!0}))),a.createElement(C.Ph,{value:oe,options:_,onChange:Z,noOptionsMessage:"No fields found"})),a.createElement("div",{className:Y.range},F&&a.createElement(g.Z,null,a.createElement(m._,{label:"Value",labelWidth:8,grow:!0},a.createElement(M.Y,{value:q?.fixed??Q,onChange:ce,max:G?.max,min:G?.min})))))},b=V=>({range:(0,s.css)`
    padding-top: 8px;
  `});var W=e(19226)},85256:(J,R,e)=>{"use strict";e.d(R,{MediaType:()=>n.DD,ResourceFolderName:()=>n.QS,findField:()=>o.PI,findFieldIndex:()=>o.rj,getColorDimension:()=>g,getPublicOrAbsoluteUrl:()=>p.t,getResourceDimension:()=>p.I,getScalarDimension:()=>y.y,getScaledDimension:()=>d.W8,getScaledDimensionForField:()=>d.A,getTextDimension:()=>c});var n=e(11925),a=e(73254),l=e(10124),r=e(94123),o=e(56501);function g(s,v,C){return m((0,o.PI)(s,v.field),v,C)}function m(s,v,C){if(!s){const P=C.visualization.getColorByName(v.fixed??"grey");return{isAssumed:!!v.field?.length||!v.fixed,fixed:P,value:()=>P,get:x=>P}}const D=(0,a.fD)(s);if(D.isByValue||s.config.mappings?.length){const P=(0,l.xD)(s,!0);P!==s.config&&(s={...s,config:P},s.state=void 0);const x=(0,r.U)({field:s,theme:C}),S=I=>x(I).color??"#ccc";return{field:s,get:I=>S(s.values[I]),value:()=>S((0,o.cR)(s))}}const M=D.getCalculator(s,C)(0,0);return{fixed:M,value:()=>M,get:P=>M,field:s}}var d=e(11155),u=e(89591),i=e(83502),f=e(34547);function c(s,v){const C=v.field?(0,o.PI)(s,v.field):s?.fields.find(D=>D.type===u.fS.string);return E(C,v)}function E(s,v){let C=v.fixed;const D=v.mode??f.xy.Fixed;if(D===f.xy.Fixed)return{isAssumed:!C,fixed:C,value:()=>C,get:P=>C};if(D===f.xy.Template){const P=x=>`TEMPLATE[${v.fixed} // ${x}]`;return s?{field:s,get:x=>P(s.values[x]),value:()=>P((0,o.cR)(s))}:(C=P(""),{isAssumed:!0,fixed:C,value:()=>C,get:x=>C})}if(!s)return{isAssumed:!0,fixed:C,value:()=>C,get:P=>C};let M=P=>(0,i.zc)(s.display(P));return{field:s,get:P=>M(s.values[P]),value:()=>M((0,o.cR)(s))}}var p=e(47850),h=e(23482),y=e(6348)},47850:(J,R,e)=>{"use strict";e.d(R,{I:()=>r,t:()=>l});var n=e(34547),a=e(56501);function l(o){return o?o.indexOf(":/")>0?o:window.__grafana_public_path__+o:""}function r(o,g){const m=g.mode??n.Q8.Fixed;if(m===n.Q8.Fixed){const i=l(g.fixed);return{isAssumed:!i,fixed:i,value:()=>i,get:f=>i}}const d=(0,a.PI)(o,g.field);if(!d){const i="";return{isAssumed:!0,fixed:i,value:()=>i,get:f=>i}}if(m===n.Q8.Mapping){const i=f=>l(`${f}`);return{field:d,get:f=>i(d.values[f]),value:()=>i((0,a.cR)(d))}}const u=i=>{if(d&&d.display){const f=d.display(i).icon;return l(f??"")}return""};return{field:d,get:i=>u(d.values[i]),value:()=>u((0,a.cR)(d))}}},6348:(J,R,e)=>{"use strict";e.d(R,{y:()=>l});var n=e(34547),a=e(56501);function l(o,g){return r((0,a.PI)(o,g?.field),g)}function r(o,g){if(!o){const u=g.fixed??0;return{isAssumed:!!g.field?.length||!g.fixed,fixed:u,value:()=>u,get:()=>u}}let m=u=>u%g.max;return g.mode===n.eK.Clamped&&(m=u=>u<g.min?g.min:u>g.max?g.max:u),{field:o,get:u=>{const i=o.values[u];return i===null||typeof i!="number"?0:m(i)},value:()=>(0,a.cR)(o)}}},11155:(J,R,e)=>{"use strict";e.d(R,{A:()=>o,C:()=>m,W8:()=>r,x5:()=>g});var n=e(10124),a=e(34547),l=e(56501);function r(d,u){return o((0,l.PI)(d,u?.field),u)}function o(d,u,i){if(!d){const y=u.fixed??0;return{isAssumed:!!u.field?.length||!u.fixed,fixed:y,value:()=>y,get:()=>y}}const f=(0,n.dz)(d),c=u.max-u.min;if(d.values.length<1||c<=0||f.delta<=0)return{fixed:u.min,value:()=>u.min,get:()=>u.min};let p=y=>u.min+y*c;if(i===a.B5.Quad){const y=Math.PI*(u.max/2)**2,s=Math.PI*(u.min/2)**2,v=y-s;p=C=>{let D=s+v*C;return Math.sqrt(D/Math.PI)*2}}const h=y=>{const s=d.values[y];let v=0;return s!==-1/0&&(v=(s-f.min)/f.delta),v>1?v=1:v<0&&(v=0),p(v)};return{get:h,value:()=>h((0,l.cR)(d)),field:d}}function g(d){return d||(d={min:0,max:1}),d.min==null&&(d.min=0),d.max==null&&(d.max=1),d}function m(d,u){let{min:i,max:f}=g(u);if(d||(d={}),d.max==null&&(d.max=f),d.min==null&&(d.min=i),d.min>d.max){const c=d.max;d.max=d.min,d.min=c}return d.min<i&&(d.min=i),d.max>f&&(d.max=f),d.fixed==null&&(d.fixed=d.min+(d.max-d.min)/2),d.field||(d.fixed>f?d.fixed=f:d.fixed<i&&(d.fixed=i)),d}},11925:(J,R,e)=>{"use strict";e.d(R,{DD:()=>r,QS:()=>l,hQ:()=>o,qj:()=>a,zc:()=>g});var n=e(34547);const a=Object.freeze({fixed:"",mode:n.xy.Field,field:""});var l=(m=>(m.Icon="img/icons/unicons",m.IOT="img/icons/iot",m.Marker="img/icons/marker",m.BG="img/bg",m))(l||{}),r=(m=>(m.Icon="icon",m.Image="image",m))(r||{}),o=(m=>(m.Folder="folder",m.URL="url",m.Upload="upload",m))(o||{}),g=(m=>(m.SMALL="small",m.NORMAL="normal",m))(g||{})},56501:(J,R,e)=>{"use strict";e.d(R,{FP:()=>g,PI:()=>f,Qz:()=>u,WO:()=>i,cR:()=>E,pb:()=>m,rj:()=>c,z2:()=>d});var n=e(69330),a=e(3181),l=e(32688),r=e(85256),o=e(6348);function g(p,h){if(p?.series&&h.field)for(const y of p.series){const s=(0,r.getColorDimension)(y,h,l.config.theme2);if(!s.isAssumed||p.series.length===1)return s}return(0,r.getColorDimension)(void 0,h,l.config.theme2)}function m(p,h){if(p?.series&&h.field)for(const y of p.series){const s=(0,r.getScaledDimension)(y,h);if(!s.isAssumed||p.series.length===1)return s}return(0,r.getScaledDimension)(void 0,h)}function d(p,h){if(p?.series&&h.field)for(const y of p.series){const s=(0,o.y)(y,h);if(!s.isAssumed||p.series.length===1)return s}return(0,o.y)(void 0,h)}function u(p,h){if(p?.series&&h.field)for(const y of p.series){const s=(0,r.getResourceDimension)(y,h);if(!s.isAssumed||p.series.length===1)return s}return(0,r.getResourceDimension)(void 0,h)}function i(p,h){if(p?.series&&h.field)for(const y of p.series){const s=(0,r.getTextDimension)(y,h);if(!s.isAssumed||p.series.length===1)return s}return(0,r.getTextDimension)(void 0,h)}function f(p,h){const y=c(p,h);return y==null?void 0:p.fields[y]}function c(p,h){if(!(!p||!h?.length))for(let y=0;y<p.fields.length;y++){const s=p.fields[y];if(h===s.name)return y;const v=(0,n.CZ)(s,p);if(h===v)return y}}function E(p){const h=p.state?.calcs;if(h){const v=h[a.gz.lastNotNull];if(v!=null)return v}const y=p.values;let s=y.length-1;for(;s>=0;){const v=y[s--];if(v!=null)return v}}},66981:(J,R,e)=>{"use strict";e.d(R,{I:()=>d,a:()=>m});var n=e(41407),a=e(39953),l=e(82803),r=e(52583),o=e(64979);const g=(u,i)=>({valueNavigation:(0,n.css)`
      width: ${o.vl};
      font-weight: bold;
    `,valueNavigationWrapper:(0,n.css)`
      display: flex;
      justify-content: flex-end;
    `,itemLabelsWrap:(0,n.css)`
      ${i?"":`border-bottom: 1px solid ${u.colors.border.medium}`};
    `}),m=u=>u.includes(r.QG)?u.replace(r.QG,""):u,d=({valueLabels:u,expanded:i})=>{const f=(0,l.wW)(g,i);return a.createElement("div",{className:f.itemLabelsWrap},a.createElement("div",{className:f.valueNavigationWrapper},u.map((c,E)=>a.createElement("span",{className:f.valueNavigation,key:c.name},m(c.name)))))}},64979:(J,R,e)=>{"use strict";e.d(R,{ZP:()=>D,vl:()=>h,Cw:()=>y});var n=e(41407),a=e(39953),l=e(69537),r=e(72639),o=e(82803),g=e(68497),m=e(66981),d=e(5989);const u=(M,P)=>({rowWrapper:(0,n.css)`
    position: relative;
    min-width: ${h};
    padding-right: 5px;
  `,rowValue:(0,n.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    display: block;
    padding-right: 10px;

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:before {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(to right, transparent calc(100% - 25px), ${M.colors.background.primary});
    }
  `,rowValuesWrap:(0,n.css)`
    padding-left: ${y};
    width: calc(${P} * ${h});
    display: flex;
  `}),i=({totalNumberOfValues:M,values:P,hideFieldsWithoutValues:x})=>{const S=(0,o.wW)(u,M);return a.createElement("div",{role:"cell",className:S.rowValuesWrap},P?.map(I=>x&&(I.value===void 0||I.value===d.T)?null:a.createElement("span",{key:I.key,className:S.rowWrapper},a.createElement("span",{className:S.rowValue},I.value))))},f=M=>{const P=M.isDark?"#ce9178":"#a31515",x=M.isDark?"#73bf69":"#56a64b";return{metricName:(0,n.css)`
      color: ${x};
    `,metricValue:(0,n.css)`
      color: ${P};
    `,expanded:(0,n.css)`
      display: block;
      text-indent: 1em;
    `}},E=({value:M,index:P,length:x,isExpandedView:S})=>{const I=(0,o.wW)(f),T=M.key,O=M.value;return a.createElement("span",{className:S?I.expanded:"",key:P},a.createElement("span",{className:I.metricName},T),a.createElement("span",null,"="),a.createElement("span",null,'"'),a.createElement("span",{className:I.metricValue},O),a.createElement("span",null,'"'),P<x-1&&a.createElement("span",null,", "))},p="20px",h="80px",y="25px",s=(M,P,x)=>({rowWrapper:(0,n.css)`
    border-bottom: 1px solid ${M.colors.border.medium};
    display: flex;
    position: relative;
    padding-left: 22px;
    ${x?"":"align-items: center;"}
    ${x?"":"height: 100%;"}
  `,copyToClipboardWrapper:(0,n.css)`
    position: absolute;
    left: 0;
    ${x?"":"bottom: 0;"}
    ${x?"top: 4px;":"top: 0;"}
    margin: auto;
    z-index: 1;
    height: 16px;
    width: 16px;
  `,rowLabelWrapWrap:(0,n.css)`
    position: relative;
    width: calc(100% - (${P} * ${h}) - ${y});
  `,rowLabelWrap:(0,n.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    padding-right: ${p};

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:after {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(
        to right,
        transparent calc(100% - ${p}),
        ${M.colors.background.primary}
      );
    }
  `});function v(M){let P=[],x=[];for(const S in M)S in M&&M[S]&&!S.includes("Value")?P.push({key:S,value:M[S]}):S in M&&M[S]&&S.includes("Value")&&x.push({key:S,value:M[S]});return{values:x,attributeValues:P}}const D=({listItemData:M,listKey:P,totalNumberOfValues:x,valueLabels:S,isExpandedView:I})=>{const{__name__:T,...O}=M,[A,B]=(0,l.Z)(),b=S?.length??x,W=(0,o.wW)(s,b,I),{values:V,attributeValues:w}=v(O),K=Q=>Q==="\u221E"||Q==="Infinity"?"+Inf":Q,z=`${T}{${w.map(Q=>`${Q.key}="${K(Q.value)}"`)}}`,G=!!(S&&S?.length);return a.createElement(a.Fragment,null,S!==void 0&&I&&a.createElement(m.I,{valueLabels:S,expanded:I}),a.createElement("div",{key:P,className:W.rowWrapper},a.createElement("span",{className:W.copyToClipboardWrapper},a.createElement(g.h,{tooltip:"Copy to clipboard",onClick:()=>{(0,r.ff)("grafana_explore_prometheus_instant_query_ui_raw_toggle_expand"),B(z)},name:"copy"})),a.createElement("span",{role:"cell",className:W.rowLabelWrapWrap},a.createElement("div",{className:W.rowLabelWrap},a.createElement("span",null,T),a.createElement("span",null,"{"),a.createElement("span",null,w.map((Q,j)=>a.createElement(E,{isExpandedView:I,value:Q,key:j,index:j,length:w.length}))),a.createElement("span",null,"}"))),a.createElement(i,{hideFieldsWithoutValues:G,totalNumberOfValues:b,values:V})))}},32566:(J,R,e)=>{"use strict";e.d(R,{q:()=>l});var n=e(39953),a=e(92403);const l=({timeInMs:o,className:g,humanize:m})=>n.createElement("span",{className:g},r(o,m)),r=(o,g=!1)=>{const m=o/1e3;if(!g)return`${m.toFixed(1)}s`;const d=(0,a.Ks)(m,"seconds"),u=d.hours(),i=d.minutes(),f=d.seconds();return u?`${u}h ${i}m ${f}s`:i?`${i}m ${f}s`:`${f}s`}},87923:(J,R,e)=>{"use strict";e.d(R,{m:()=>le});var n=e(41407),a=e(39953),l=e(948),r=e(96083),o=e(24824),g=e(79059),m=e(82803),d=e(36516),u=e(52436),i=e(2190),f=e(57721),c=e(89394),E=e(84598),p=e(77814),h=e.n(p),y=e(16360),s=e(51752),v=e(64084),C=e(77896),D=e(27523);const M=.8,P=2,x=200,S=10,I=60,T=6;function O(X,se,re,pe,be){const xe=new Map,Pe=se.length<I?I:Math.min(se.length,x),we=window.innerWidth*2;X.width=we,X.height=Pe;const Fe=Math.min(T,Math.max(P,Pe/se.length)),He=Pe/se.length,Xe=X.getContext("2d",{alpha:!1});if(Xe){Xe.fillStyle=be,Xe.fillRect(0,0,we,Pe);for(let dt=0;dt<se.length;dt++){const{valueWidth:ct,valueOffset:At,serviceName:Ie}=se[dt],Ze=At/re*we;let ut=ct/re*we;ut<S&&(ut=S);let rt=xe.get(Ie);rt||(rt=`rgba(${pe(Ie).concat(M).join()})`,xe.set(Ie,rt)),Xe.fillStyle=rt,Xe.fillRect(Ze,dt*He,ut,Fe)}}}const A=(0,v.B)(X=>({CanvasSpanGraph:(0,n.css)`
      label: CanvasSpanGraph;
      background: ${(0,C.h)(X,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class B extends a.PureComponent{constructor(se){super(se),this.getColor=re=>(0,D.e6)(re,this.props.theme),this._setCanvasRef=re=>{this._canvasElm=re},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:se,items:re}=this.props;O(this._canvasElm,re,se,this.getColor,(0,C.h)(this.props.theme,"#fff"))}}render(){return a.createElement("canvas",{className:A(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const b=(0,m.HE)(B);var W=e(81355);const V=()=>({TickLabels:(0,n.css)`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:(0,n.css)`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function w(X){const{numTicks:se,duration:re}=X,pe=(0,m.wW)(V),be=[];for(let xe=0;xe<se+1;xe++){const Pe=xe/se,we=Pe===1?{right:"0%"}:{left:`${Pe*100}%`};be.push(a.createElement("div",{key:Pe,className:pe.TickLabelsLabel,style:we,"data-testid":"tick"},(0,W.LU)(re*Pe)))}return a.createElement("div",{className:pe.TickLabels,"data-testid":"TickLabels"},be)}var K=e(4919),z=e(80185);const G=()=>({GraphTick:(0,n.css)`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function Q(X){const{numTicks:se}=X,re=(0,m.wW)(G),pe=[];for(let be=1;be<se;be++){const xe=`${be/se*100}%`;pe.push(a.createElement("line",{className:re.GraphTick,x1:xe,y1:"0%",x2:xe,y2:"100%",key:be/se}))}return a.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},pe)}const j=()=>({ScrubberHandleExpansion:h()((0,n.css)`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:h()((0,n.css)`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:h()((0,n.css)`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:(0,n.css)`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:(0,n.css)`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function F({isDragging:X,onMouseDown:se,onMouseEnter:re,onMouseLeave:pe,position:be}){const xe=`${be*100}%`,Pe=(0,m.wW)(j),we=h()({[Pe.ScrubberDragging]:X});return a.createElement("g",{className:we,"data-testid":"scrubber-component"},a.createElement("g",{"data-testid":"scrubber-component-g",className:Pe.ScrubberHandles,onMouseDown:se,onMouseEnter:re,onMouseLeave:pe},a.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:xe,className:Pe.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),a.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:xe,className:Pe.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),a.createElement("line",{className:Pe.ScrubberLine,y2:"100%",x1:xe,x2:xe,"data-testid":"scrubber-component-line"}))}const k=(0,v.B)(X=>{const se="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",re=(0,n.css)`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:(0,n.css)`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${se} {
        display: unset;
      }
    `,ViewingLayerGraph:(0,n.css)`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,C.h)(X,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:(0,n.css)`
      label: ViewingLayerInactive;
      fill: ${(0,C.h)(X,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:(0,n.css)`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,C.h)(X,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:(0,n.css)`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:(0,n.css)`
      label: ViewingLayerDrag;
      fill: ${(0,C.h)(X,"#44f")};
    `,ViewingLayerFullOverlay:(0,n.css)`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:re,ViewingLayerResetZoomHoverClassName:se}}),_={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function Y(X,se){const[re,pe]=X<se?[X,se]:[se,X];return{x:`${re*100}%`,width:`${(pe-re)*100}%`,leadingX:`${se*100}%`}}class Z extends a.PureComponent{constructor(se){super(se),this._setRoot=re=>{this._root=re},this._getDraggingBounds=re=>{if(!this._root)throw new Error("invalid state");const{left:pe,width:be}=this._root.getBoundingClientRect(),[xe,Pe]=this.props.viewRange.time.current;let we=1,Fe=0;return re===_.SHIFT_START?we=Pe:re===_.SHIFT_END&&(Fe=xe),{clientXLeft:pe,maxValue:we,minValue:Fe,width:be}},this._handleReframeMouseMove=({value:re})=>{this.props.updateNextViewRangeTime({cursor:re})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:re})=>{const pe=re,{time:be}=this.props.viewRange,Pe={reframe:{anchor:be.reframe?be.reframe.anchor:pe,shift:pe}};this.props.updateNextViewRangeTime(Pe)},this._handleReframeDragEnd=({manager:re,value:pe})=>{const{time:be}=this.props.viewRange,xe=be.reframe?be.reframe.anchor:pe,[Pe,we]=pe<xe?[pe,xe]:[xe,pe];re.resetBounds(),this.props.updateViewRangeTime(Pe,we,"minimap")},this._handleScrubberEnterLeave=({type:re})=>{const pe=re===z.EUpdateTypes.MouseEnter;this.setState({preventCursorLine:pe})},this._handleScrubberDragUpdate=({event:re,tag:pe,type:be,value:xe})=>{be===z.EUpdateTypes.DragStart&&re.stopPropagation(),pe===_.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:xe}):pe===_.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:xe})},this._handleScrubberDragEnd=({manager:re,tag:pe,value:be})=>{const[xe,Pe]=this.props.viewRange.time.current;let we;if(pe===_.SHIFT_START)we=[be,Pe];else if(pe===_.SHIFT_END)we=[xe,be];else throw new Error("bad state");re.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(we[0],we[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new z.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:_.REFRAME}),this._draggerStart=new z.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:_.SHIFT_START}),this._draggerEnd=new z.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:_.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(se,re){const pe=k(this.props.theme),be=Y(se,re);return[a.createElement("rect",{key:"fill",className:h()(pe.ViewingLayerDraggedShift,pe.ViewingLayerDrag),x:be.x,y:"0",width:be.width,height:this.props.height-2}),a.createElement("rect",{key:"edge",className:h()(pe.ViewingLayerDrag),x:be.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:se,viewRange:re,numTicks:pe,theme:be}=this.props,{preventCursorLine:xe}=this.state,{current:Pe,cursor:we,shiftStart:Fe,shiftEnd:He,reframe:Xe}=re.time,dt=Fe!=null||He!=null||Xe!=null,[ct,At]=Pe;let Ie=0;ct&&(Ie=ct*100);let Ze=100;At&&(Ze=100-At*100);let ut;!dt&&we!=null&&!xe&&(ut=`${we*100}%`);const rt=k(be);return a.createElement("div",{"aria-hidden":!0,className:rt.ViewingLayer,style:{height:se}},(ct!==0||At!==1)&&a.createElement(K.zx,{onClick:this._resetTimeZoomClickHandler,className:h()(rt.ViewingLayerResetZoom,rt.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),a.createElement("svg",{height:se,className:rt.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},Ie>0&&a.createElement("rect",{x:0,y:0,height:"100%",width:`${Ie}%`,className:rt.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),Ze>0&&a.createElement("rect",{x:`${100-Ze}%`,y:0,height:"100%",width:`${Ze}%`,className:rt.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),a.createElement(Q,{numTicks:pe}),ut&&a.createElement("line",{className:rt.ViewingLayerCursorGuide,x1:ut,y1:"0",x2:ut,y2:se-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),Fe!=null&&this._getMarkers(ct,Fe),He!=null&&this._getMarkers(At,He),a.createElement(F,{isDragging:Fe!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:ct||0}),a.createElement(F,{isDragging:He!=null,position:At||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),Xe!=null&&this._getMarkers(Xe.anchor,Xe.shift)),dt&&a.createElement("div",{className:rt.ViewingLayerFullOverlay}))}}const ae=(0,m.HE)(Z),ce=60,q=4;function De(X){return{valueOffset:X.relativeStartTime,valueWidth:X.duration,serviceName:X.process.serviceName}}function oe(X){return X.spans.map(De)}const te=(0,y.Z)(oe);class fe extends a.PureComponent{render(){const{height:se,trace:re,viewRange:pe,updateNextViewRangeTime:be,updateViewRangeTime:xe}=this.props;if(!re)return a.createElement("div",null);const Pe=te(re);return a.createElement("div",{className:h()(s.GL,s.H3)},a.createElement(w,{numTicks:q,duration:re.duration}),a.createElement("div",{className:s.WW},a.createElement(b,{valueWidth:re.duration,items:Pe}),a.createElement(ae,{viewRange:pe,numTicks:q,height:se||ce,updateViewRangeTime:xe,updateNextViewRangeTime:be})))}}fe.defaultProps={height:ce};var Te=e(81626),ge=e(92403),he=e(12190),me=e(42512),ye=e(83568);function ue({splitOpenFn:X,traceToLogsOptions:se,traceToMetricsOptions:re,dataFrame:pe,createFocusSpanLink:be,trace:xe}){if(!pe)return;let Pe=We(xe);const we=pe.fields.some(He=>!!He.config.links?.length),Fe=Ue(X,pe.fields[0],se,re,be,Pe);return function(Xe){let dt=Fe(Xe);if(we){Pe={...Pe,...ke(Xe)};const ct=pe.fields.filter(At=>!!At.config.links?.length);try{let At=[];ct.forEach(Ze=>{const ut=(0,me.a_)({field:Ze,rowIndex:Xe.dataFrameRowIndex,splitOpenFn:X,range:je(Xe),dataFrame:pe,vars:Pe});At=At.concat(ut)});const Ie=At.map(Ze=>({title:Ze.title,href:Ze.href,onClick:Ze.onClick,content:a.createElement(he.J,{name:"link",title:Ze.title||"Link"}),field:Ze.origin,type:ye.u.Unknown}));dt.push.apply(dt,Ie)}catch(At){return console.error(At),dt}}return dt}}const Oe=["cluster","hostname","namespace","pod","service.name","service.namespace"].map(X=>({key:X,value:X.includes(".")?X.replace(".","_"):void 0}));function Ue(X,se,re,pe,be,xe){let Pe;re?.datasourceUid&&(Pe=(0,u.ak)().getInstanceSettings(re.datasourceUid));const we=Pe?.type==="grafana-splunk-datasource";let Fe;return pe?.datasourceUid&&(Fe=(0,u.ak)().getInstanceSettings(pe.datasourceUid)),function(Xe){xe={...xe,...ke(Xe)};const dt=[];let ct,At="";if(Pe&&re){const Ie=re.customQuery?re.query:void 0,Ze=re.tags&&re.tags.length>0?re.tags:Oe;switch(Pe?.type){case"loki":At=ze(Xe,Ze),ct=at(Xe,re,At,Ie);break;case"grafana-splunk-datasource":At=ze(Xe,Ze,{joinBy:" "}),ct=_e(Xe,re,At,Ie);break;case"elasticsearch":case"grafana-opensearch-datasource":At=ze(Xe,Ze,{labelValueSign:":",joinBy:" AND "}),ct=Ne(Xe,re,At,Ie);break;case"grafana-falconlogscale-datasource":At=ze(Xe,Ze,{joinBy:" OR "}),ct=et(Xe,re,At,Ie);break;case"googlecloud-logging-datasource":At=ze(Xe,Ze,{joinBy:" AND "}),ct=Ke(Xe,re,At,Ie)}if(ct){const ut={title:Pe.name,url:"",internal:{datasourceUid:Pe.uid,datasourceName:Pe.name,query:ct}};if(xe={...xe,__tags:{text:"Tags",value:At}},(0,me.lt)(ut.internal.query,xe).allVariablesDefined){const rt=(0,o._)({link:ut,internalLink:ut.internal,scopedVars:xe,range:je(Xe,{startMs:re.spanStartTimeShift?Te.intervalToMs(re.spanStartTimeShift):0,endMs:re.spanEndTimeShift?Te.intervalToMs(re.spanEndTimeShift):0},we),field:{},onClickFn:X,replaceVariables:(0,g.J)().replace.bind((0,g.J)())});dt.push({href:rt.href,title:"Related logs",onClick:rt.onClick,content:a.createElement(he.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:se,type:ye.u.Logs})}}}if(Fe&&pe?.queries)for(const Ie of pe.queries){const Ze=Qe(Ie,pe?.tags||[],Xe),ut={title:Fe.name,url:"",internal:{datasourceUid:Fe.uid,datasourceName:Fe.name,query:{expr:Ze,refId:"A"}}},rt=(0,o._)({link:ut,internalLink:ut.internal,scopedVars:{},range:je(Xe,{startMs:pe.spanStartTimeShift?Te.intervalToMs(pe.spanStartTimeShift):-12e4,endMs:pe.spanEndTimeShift?Te.intervalToMs(pe.spanEndTimeShift):12e4}),field:{},onClickFn:X,replaceVariables:(0,g.J)().replace.bind((0,g.J)())});dt.push({title:Ie?.name,href:rt.href,onClick:rt.onClick,content:a.createElement(he.J,{name:"chart-line",title:"Explore metrics for this span"}),field:se,type:ye.u.Metrics})}if(Xe.references&&be)for(const Ie of Xe.references){if(Ie.refType==="CHILD_OF")continue;const Ze=be(Ie.traceID,Ie.spanID);dt.push({href:Ze.href,title:Ie.span?Ie.span.operationName:"View linked span",content:a.createElement(he.J,{name:"link",title:"View linked span"}),onClick:Ze.onClick,field:Ze.origin,type:ye.u.Traces})}if(Xe.subsidiarilyReferencedBy&&be)for(const Ie of Xe.subsidiarilyReferencedBy){const Ze=be(Ie.traceID,Ie.spanID);dt.push({href:Ze.href,title:Ie.span?Ie.span.operationName:"View linked span",content:a.createElement(he.J,{name:"link",title:"View linked span"}),onClick:Ze.onClick,field:Ze.origin,type:ye.u.Traces})}return dt}}function at(X,se,re,pe){const{filterByTraceID:be,filterBySpanID:xe}=se;if(pe)return{expr:pe,refId:""};if(!re)return;let Pe="{${__tags}}";return be&&X.traceID&&(Pe+=' |="${__span.traceId}"'),xe&&X.spanID&&(Pe+=' |="${__span.spanId}"'),{expr:Pe,refId:""}}function Ne(X,se,re,pe){const{filterByTraceID:be,filterBySpanID:xe}=se;if(pe)return{query:pe,refId:"",metrics:[{id:"1",type:"logs"}]};let Pe=[];return xe&&X.spanID&&Pe.push('"${__span.spanId}"'),be&&X.traceID&&Pe.push('"${__span.traceId}"'),re&&Pe.push("${__tags}"),{query:Pe.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function _e(X,se,re,pe){const{filterByTraceID:be,filterBySpanID:xe}=se;if(pe)return{query:pe,refId:""};let Pe="";return re&&(Pe+="${__tags}"),be&&X.traceID&&(Pe+=' "${__span.traceId}"'),xe&&X.spanID&&(Pe+=' "${__span.spanId}"'),{query:Pe,refId:""}}function Ke(X,se,re,pe){const{filterByTraceID:be,filterBySpanID:xe}=se;if(pe)return{query:pe,refId:""};let Pe=[];return xe&&X.spanID&&Pe.push('"${__span.spanId}"'),be&&X.traceID&&Pe.push('"${__span.traceId}"'),re&&Pe.push("${__tags}"),{query:Pe.join(" AND "),refId:""}}function et(X,se,re,pe){const{filterByTraceID:be,filterBySpanID:xe}=se;if(pe)return{lsql:pe,refId:""};if(!re)return;let Pe="${__tags}";return be&&X.traceID&&(Pe+=' or "${__span.traceId}"'),xe&&X.spanID&&(Pe+=' or "${__span.spanId}"'),{lsql:Pe,refId:""}}function ze(X,se,{labelValueSign:re="=",joinBy:pe=", "}={}){return[...X.process.tags,...X.tags,{key:"spanId",value:X.spanID},{key:"traceId",value:X.traceID},{key:"name",value:X.operationName},{key:"duration",value:X.duration}].map(be=>{const xe=se.find(Pe=>Pe.key===be.key);if(xe)return`${xe.value?xe.value:xe.key}${re}"${be.value}"`}).filter(be=>!!be).join(pe)}function je(X,se={startMs:0,endMs:0},re=!1){const pe=Math.floor(X.startTime/1e3+se.startMs),be=(0,ge.CQ)(pe),xe=(X.startTime+X.duration)/1e3;let Pe=Math.floor(xe+se.endMs);re&&Pe-pe<1e3?Pe=pe+1e3:pe===Pe&&Pe++;const we=(0,ge.CQ)(Pe);return{from:be,to:we,raw:{from:be,to:we}}}function Qe(X,se=[],re){if(!X.query)return`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${re.process.serviceName}"}[5m])) by (le))`;let pe=X.query;if(se.length&&pe.indexOf("$__tags")!==-1){const be=[...re.process.tags,...re.tags],Pe=se.reduce((we,Fe)=>{const He=be.find(Xe=>Xe.key===Fe.key)?.value;return He&&we.push(`${Fe.value?Fe.value:Fe.key}="${He}"`),we},[])?.join(", ");pe=pe.replace(/\$__tags/g,Pe)}return pe}function We(X){return{__trace:{text:"Trace",value:{duration:X.duration,name:X.traceName,traceId:X.traceID}}}}function ke(X){const se={};for(const re of X.process.tags)se[re.key]=re.value;for(const re of X.tags)se[re.key]=re.value;return{__span:{text:"Span",value:{spanId:X.spanID,traceId:X.traceID,duration:X.duration,name:X.operationName,tags:se}}}}function ot(){const[X,se]=(0,a.useState)(new Set),re=(0,a.useCallback)(function(Fe){if(X.size===0)return;let He=-1,Xe=!0;const dt=Fe.reduce((ct,At)=>(At.depth<=He&&(Xe=!0),Xe&&ct.has(At.spanID)&&(ct.delete(At.spanID),Xe=!1,He=At.depth),ct),new Set(X));se(dt)},[X]),pe=(0,a.useCallback)(function(Fe){if(lt(Fe,X))return;let He;const Xe=Fe.reduce((dt,ct)=>(He&&ct.depth<=He.depth?(dt.add(He.spanID),ct.hasChildren&&(He=ct)):ct.hasChildren&&!dt.has(ct.spanID)&&(He=ct),dt),new Set(X));He&&Xe.add(He.spanID),se(Xe)},[X]),be=(0,a.useCallback)(function(){se(new Set)},[]),xe=(0,a.useCallback)(function(Fe){if(lt(Fe,X))return;const He=Fe.reduce((Xe,dt)=>(dt.hasChildren&&Xe.add(dt.spanID),Xe),new Set);se(He)},[X]),Pe=(0,a.useCallback)(function(Fe){const He=new Set(X);X.has(Fe)?He.delete(Fe):He.add(Fe),se(He)},[X]);return{childrenHiddenIDs:X,expandOne:re,collapseOne:pe,expandAll:be,collapseAll:xe,childrenToggle:Pe}}function lt(X,se){return X.filter(pe=>pe.hasChildren).length===se.size}function Ct(X){const[se,re]=(0,a.useState)(new Map);(0,a.useEffect)(()=>{re(new Map)},[X,re]);const pe=(0,a.useCallback)(function(we){const Fe=new Map(se);Fe.has(we)?Fe.delete(we):Fe.set(we,new E.DetailState),re(Fe)},[se]),be=(0,a.useCallback)(function(we,Fe){const He=se.get(we);if(!He)return;const Xe=He.toggleLogItem(Fe),dt=new Map(se);return dt.set(we,Xe),re(dt)},[se]),xe=(0,a.useCallback)(function(we,Fe){const He=se.get(we);if(!He)return;const Xe=He.toggleReferenceItem(Fe),dt=new Map(se);return dt.set(we,Xe),re(dt)},[se]);return{detailStates:se,toggleDetail:pe,detailLogItemToggle:be,detailLogsToggle:(0,a.useCallback)(Pe=>wt("logs",se,re)(Pe),[se]),detailWarningsToggle:(0,a.useCallback)(Pe=>wt("warnings",se,re)(Pe),[se]),detailStackTracesToggle:(0,a.useCallback)(Pe=>wt("stackTraces",se,re)(Pe),[se]),detailReferenceItemToggle:xe,detailReferencesToggle:(0,a.useCallback)(Pe=>wt("references",se,re)(Pe),[se]),detailProcessToggle:(0,a.useCallback)(Pe=>wt("process",se,re)(Pe),[se]),detailTagsToggle:(0,a.useCallback)(Pe=>wt("tags",se,re)(Pe),[se])}}function wt(X,se,re){return pe=>{const be=se.get(pe);if(!be)return;let xe;X==="tags"?xe=be.toggleTags():X==="process"?xe=be.toggleProcess():X==="warnings"?xe=be.toggleWarnings():X==="references"?xe=be.toggleReferences():X==="stackTraces"?xe=be.toggleStackTraces():xe=be.toggleLogs();const Pe=new Map(se);Pe.set(pe,xe),re(Pe)}}function Lt(){const[X,se]=(0,a.useState)(new Set),re=(0,a.useCallback)(function(xe){se(Pe=>{const we=new Set(Pe);return we.add(xe),we})},[]),pe=(0,a.useCallback)(function(xe){se(Pe=>{const we=new Set(Pe);return we.delete(xe),we})},[]);return{hoverIndentGuideIds:X,addHoverIndentGuideId:re,removeHoverIndentGuideId:pe}}var Ye=e(33914);function Be(){const[X,se]=(0,a.useState)({time:{current:[0,1]}}),re=(0,a.useCallback)(function(xe){se(Pe=>{const we={...Pe.time,...xe};return{...Pe,time:we}})},[]),pe=(0,a.useCallback)(function(xe,Pe){const Fe={current:[xe,Pe]};se(He=>({...He,time:Fe}))},[]);return{viewRange:X,updateViewRangeTime:pe,updateNextViewRangeTime:re}}const Le=X=>({noDataMsg:(0,n.css)`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${X.typography.h4.fontSize};
    color: ${X.colors.text.secondary};
  `});function le(X){const{traceProp:se,datasource:re,topOfViewRef:pe,topOfViewRefType:be,exploreId:xe,createSpanLink:Pe}=X,{detailStates:we,toggleDetail:Fe,detailLogItemToggle:He,detailLogsToggle:Xe,detailProcessToggle:dt,detailReferencesToggle:ct,detailReferenceItemToggle:At,detailTagsToggle:Ie,detailWarningsToggle:Ze,detailStackTracesToggle:ut}=Ct(X.dataFrames[0]),{removeHoverIndentGuideId:rt,addHoverIndentGuideId:St,hoverIndentGuideIds:st}=Lt(),{viewRange:tt,updateViewRangeTime:ft,updateNextViewRangeTime:$t}=Be(),{expandOne:Ht,collapseOne:Zt,childrenToggle:tn,collapseAll:on,childrenHiddenIDs:qt,expandAll:pn}=ot(),{search:Cn,setSearch:Rt,spanFilterMatches:mt}=(0,Ye.Rx)(se?.spans),[xt,Ft]=(0,a.useState)(""),[zt,Jt]=(0,l.Z)(!1),[ln,Pt]=(0,a.useState)(!1),[Gt,Kt]=(0,a.useState)(100),kt=(0,m.wW)(Le),[dn,nn]=(0,a.useState)(.4),[mn,Mn]=de({refId:X.dataFrames[0]?.refId,exploreId:X.exploreId,datasource:re,splitOpenFn:X.splitOpenFn}),Gn=(0,a.useMemo)(()=>({childrenHiddenIDs:qt,detailStates:we,hoverIndentGuideIds:st,spanNameColumnWidth:dn,traceID:X.traceProp?.traceID}),[qt,we,st,dn,X.traceProp?.traceID]),$n=(0,u.ak)().getInstanceSettings(re?.name),Fn=(0,d.p1)($n?.jsonData),ua=$n?.jsonData?.tracesToMetrics,wa=$n?.jsonData,ga=(0,a.useMemo)(()=>Pe??ue({splitOpenFn:X.splitOpenFn,traceToLogsOptions:Fn,traceToMetricsOptions:ua,dataFrame:X.dataFrames[0],createFocusSpanLink:Mn,trace:se}),[X.splitOpenFn,Fn,ua,X.dataFrames,Mn,se,Pe]),ca=(0,f.useSelector)(Sa=>(0,i.Z)(Sa.user)),Ra=re?re?.type:"unknown",va=X.scrollElement?X.scrollElement:document.getElementsByClassName(X.scrollElementClass??"")[0];return a.createElement(a.Fragment,null,X.dataFrames?.length&&se?a.createElement(a.Fragment,null,a.createElement(E.TracePageHeader,{trace:se,data:X.dataFrames[0],timeZone:ca,search:Cn,setSearch:Rt,showSpanFilters:zt,setShowSpanFilters:Jt,showSpanFilterMatchesOnly:ln,setShowSpanFilterMatchesOnly:Pt,setFocusedSpanIdForSearch:Ft,spanFilterMatches:mt,datasourceType:Ra,setHeaderHeight:Kt,app:xe?r.zj.Explore:r.zj.Unknown}),a.createElement(fe,{trace:se,viewRange:tt,updateNextViewRangeTime:$t,updateViewRangeTime:ft}),a.createElement(E.TraceTimelineViewer,{findMatchesIDs:mt,trace:se,datasourceType:Ra,spanBarOptions:wa?.spanBar,traceTimeline:Gn,updateNextViewRangeTime:$t,updateViewRangeTime:ft,viewRange:tt,timeZone:ca,setSpanNameColumnWidth:nn,collapseAll:on,collapseOne:Zt,expandAll:pn,expandOne:Ht,childrenToggle:tn,detailLogItemToggle:He,detailLogsToggle:Xe,detailWarningsToggle:Ze,detailStackTracesToggle:ut,detailReferencesToggle:ct,detailReferenceItemToggle:At,detailProcessToggle:dt,detailTagsToggle:Ie,detailToggle:Fe,addHoverIndentGuideId:St,removeHoverIndentGuideId:rt,linksGetter:()=>[],createSpanLink:ga,scrollElement:va,focusedSpanId:mn,focusedSpanIdForSearch:xt,showSpanFilterMatchesOnly:ln,createFocusSpanLink:Mn,topOfViewRef:pe,topOfViewRefType:be,headerHeight:Gt})):a.createElement("div",{className:kt.noDataMsg},"No data"))}function de(X){const se=(0,f.useSelector)(we=>we.explore.panes[X.exploreId]?.panelsState.trace),re=se?.spanId,pe=(0,f.useDispatch)(),be=we=>pe((0,c.km)(X.exploreId,"trace",{...se,spanId:we})),xe=(0,f.useSelector)(we=>we.explore.panes[X.exploreId]?.queries.find(Fe=>Fe.refId===X.refId));return[re,(we,Fe)=>{const He={title:"Deep link to this span",url:"",internal:{datasourceUid:X.datasource?.uid,datasourceName:X.datasource?.name,query:{...xe,query:we},panelsState:{trace:{spanId:Fe}}}},Xe=xe?.queryType==="traceql"&&xe.query===we;return(0,o._)({link:He,internalLink:He.internal,scopedVars:{},field:{},onClickFn:Xe?()=>be(re===Fe?void 0:Fe):X.splitOpenFn?()=>X.splitOpenFn({datasourceUid:X.datasource?.uid,queries:[{...xe,query:we}],panelsState:{trace:{spanId:Fe}}}):void 0,replaceVariables:(0,g.J)().replace.bind((0,g.J)())})}]}},77896:(J,R,e)=>{"use strict";e.d(R,{h:()=>a});var n=e(63374);function a(l,r,o){if(l.isLight)return r;{if(o){const d=(0,n.Z)(r);return n.Z.mostReadable(o,[d.clone().lighten(25),d.clone().lighten(10),d,d.clone().darken(10),d.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const g=(0,n.Z)(r).toHsl();g.l=1-g.l;const m=(0,n.Z)(g);return m.isLight()?m.darken(5).toHex8String():m.lighten(5).toHex8String()}}},29016:(J,R,e)=>{"use strict";e.d(R,{Z:()=>u});var n=e(41407),a=e(77814),l=e.n(a),r=e(39953),o=e(82803),g=e(77896),m=e(57339);const d=i=>({Ticks:(0,n.css)`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:(0,n.css)`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,g.h)(i,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:(0,n.css)`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:(0,n.css)`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function u(i){const{endTime:f,numTicks:c,showLabels:E,startTime:p}=i;let h;if(E){h=[];const v=(f||0)-(p||0);for(let C=0;C<c;C++){const D=(p||0)+C/(c-1)*v;h.push((0,m.LU)(D))}}const y=(0,o.wW)(d),s=[];for(let v=0;v<c;v++){const C=v/(c-1);s.push(r.createElement("div",{"data-testid":"TicksID",key:C,className:y.TicksTick,style:{left:`${C*100}%`}},h&&r.createElement("span",{className:l()(y.TicksTickLabel,{[y.TicksTickLabelEndAnchor]:C>=1})},h[v])))}return r.createElement("div",{className:y.Ticks},s)}u.defaultProps={endTime:null,showLabels:null,startTime:null}},71369:(J,R,e)=>{"use strict";e.d(R,{Z:()=>d});var n=e(41407),a=e(77814),l=e.n(a),r=e(39953),o=e(82803),g=e(51752);const m=()=>({flexRow:(0,n.css)`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function d(i){const{children:f,className:c="",...E}=i,p=(0,o.wW)(m);return r.createElement("div",{className:l()(p.flexRow,c),...E},f)}d.defaultProps={className:""};function u(i){const{children:f,className:c="",width:E,style:p,...h}=i,y=`${E*100}%`,s={...p,flexBasis:y,maxWidth:y};return r.createElement("div",{className:l()(g.WW,c),style:s,"data-testid":"TimelineRowCell",...h},f)}u.defaultProps={className:"",style:{}},d.Cell=u},42583:(J,R,e)=>{"use strict";e.d(R,{l4:()=>St,ZP:()=>Cn});var n=e(41407),a=e(86832),l=e(16360),r=e(39953),o=e(72639),g=e(32688),m=e(64084),d=e(3839),u=e(82803);const i="peer.service";var f=e(27523);class c{constructor(mt){this.ys=[],this.heights=[],this.bufferLen=mt,this.dataLen=-1,this.lastI=-1}profileData(mt){mt!==this.dataLen&&(this.dataLen=mt,this.ys.length=mt,this.heights.length=mt,this.lastI>=mt&&(this.lastI=mt-1))}calcHeights(mt,xt,Ft){Ft!=null&&(this.lastI=Ft);let zt=mt+this.bufferLen;if(zt<=this.lastI)return;zt>=this.heights.length&&(zt=this.heights.length-1);let Jt=this.lastI;for(this.lastI===-1&&(Jt=0,this.ys[0]=0);Jt<=zt;){const ln=this.heights[Jt]=xt(Jt);this.ys[Jt+1]=this.ys[Jt]+ln,Jt++}this.lastI=zt}calcYs(mt,xt){for(;(this.ys[this.lastI]==null||mt>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,xt)}confirmHeight(mt,xt){let Ft=mt;if(Ft>this.lastI){this.calcHeights(Ft,xt);return}const zt=xt(Ft);if(zt===this.heights[Ft])return;const Jt=zt-this.heights[Ft];for(this.heights[Ft]=zt;++Ft<=this.lastI;)this.ys[Ft]+=Jt;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=Jt)}findFloorIndex(mt,xt){this.calcYs(mt,xt);let Ft=0,zt=this.lastI;if(this.ys.length<2||mt<this.ys[1])return 0;if(mt>this.ys[zt])return zt;let Jt;for(;Ft<zt;)if(Jt=Ft+.5*(zt-Ft)|0,mt>this.ys[Jt]){if(mt<=this.ys[Jt+1])return Jt;Ft=Jt}else if(mt<this.ys[Jt]){if(mt>=this.ys[Jt-1])return Jt-1;zt=Jt}else return Jt;throw new Error(`unable to find floor index for y=${mt}`)}getRowPosition(mt,xt){return this.confirmHeight(mt,xt),{height:this.heights[mt],y:this.ys[mt]}}getEstimatedHeight(){const mt=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?mt|0:mt/(this.lastI+1)*this.heights.length|0}}const E=100;class p extends r.Component{constructor(mt){super(mt),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const xt=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(xt,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=xt=>this._yPositions.getRowPosition(xt,this._getHeight),this.scrollToIndex=(xt,Ft)=>{const{scrollElement:zt}=this.props,Jt=zt?.getBoundingClientRect().top||0,Pt=(zt?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-Jt,Gt=this.getRowPosition(xt).y;this.props.scrollElement?.scrollTo({top:Gt+Pt-Ft-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const xt=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,Ft=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(xt<this._startIndexDrawn||Ft>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=xt=>{this.props.windowScroller&&(this._wrapperElm=xt,xt&&(this._viewHeight=xt.clientHeight))},this._initItemHolder=xt=>{this._itemHolderElm=xt,this._scanItemHeights()},this._scanItemHeights=()=>{const xt=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let Ft=null,zt=null,Jt=!1;const ln=this._itemHolderElm.childNodes,Pt=ln.length;for(let Gt=0;Gt<Pt;Gt++){const Kt=ln[Gt];if(Kt instanceof HTMLElement){const kt=Kt.getAttribute("data-item-key");if(!kt){console.warn("itemKey not found");continue}const nn=(Kt.firstElementChild||Kt).clientHeight,mn=this._knownHeights.get(kt);nn!==mn&&(this._knownHeights.set(kt,nn),Jt?zt=kt:(Jt=!0,Ft=zt=kt))}}if(Ft!=null&&zt!=null){const Gt=xt(Ft),Kt=zt===Ft?Gt:xt(zt);this._yPositions.calcHeights(Kt,this._getHeight,Gt),this.forceUpdate()}},this._getHeight=xt=>{const Ft=this.props.getKeyFromIndex(xt),zt=this._knownHeights.get(Ft);return zt!=null&&zt===zt?zt:this.props.itemHeightGetter(xt,Ft)},this._yPositions=new c(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:mt}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=mt+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(mt){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&mt.scrollElement!==this.props.scrollElement&&(mt.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const mt=this.props.windowScroller,xt=mt?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,Ft=mt?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return xt!==this._viewHeight||Ft!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const xt=this._scrollTop,Ft=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(xt,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(Ft,this._getHeight)}render(){const{dataLength:mt,getKeyFromIndex:xt,initialDraw:Ft=E,itemRenderer:zt,viewBuffer:Jt,viewBufferMin:ln}=this.props,Pt=this._getHeight,Gt=[];let Kt,kt;if(this._yPositions.profileData(mt),!this._wrapperElm)Kt=0,kt=(Ft<mt?Ft:mt)-1;else{this._isViewChanged()&&this._calcViewIndexes();const mn=ln>this._startIndex?0:this._startIndex-ln,Mn=ln<mt-this._endIndex?this._endIndex+ln:mt-1;mn<this._startIndexDrawn||Mn>this._endIndexDrawn?(Kt=Jt>this._startIndex?0:this._startIndex-Jt,kt=this._endIndex+Jt,kt>=mt&&(kt=mt-1)):(Kt=this._startIndexDrawn>mt-1?0:this._startIndexDrawn,kt=this._endIndexDrawn>mt-1?mt-1:this._endIndexDrawn)}this._yPositions.calcHeights(kt,Pt,Kt||-1),this._startIndexDrawn=Kt,this._endIndexDrawn=kt,Gt.length=kt-Kt+1;for(let mn=Kt;mn<=kt;mn++){const{y:Mn,height:Gn}=this._yPositions.getRowPosition(mn,Pt),$n={height:Gn,top:Mn,position:"absolute"},Fn=xt(mn),Yn={"data-item-key":Fn};Gt.push(zt(Fn,$n,mn,Yn))}const dn={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(dn.onScroll=this._onScroll,dn.style.height="100%",dn.style.overflowY="auto");const nn={position:"relative",height:this._yPositions.getEstimatedHeight()};return r.createElement("div",{...dn,"data-testid":"ListView"},r.createElement("div",{style:nn},r.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},Gt)))}}p.defaultProps={initialDraw:E,itemsWrapperClassName:"",windowScroller:!1};var h=e(77814),y=e.n(h),s=e(12190),v=e(77896),C=e(95577),D=e(28888),M=e(66557),P=e(55407);function x({children:Rt,content:mt,overlayClassName:xt}){const Ft=(0,r.useRef)(null);return r.createElement(M.D,{content:mt,hideAfter:300},(zt,Jt,ln)=>r.createElement(r.Fragment,null,Ft.current&&r.createElement(P.J,{...ln,referenceElement:Ft.current,wrapperClassName:xt,onMouseLeave:Jt,onMouseEnter:zt}),r.cloneElement(Rt,{ref:Ft,onMouseEnter:zt,onMouseLeave:Jt})))}var S=e(51752),I=e(57339);const T="label";var O=e(69865),A=e(4919);const B=()=>({CopyIcon:(0,n.css)`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function b(Rt){const mt=(0,u.wW)(B),[xt,Ft]=(0,r.useState)(!1),zt=()=>{navigator.clipboard.writeText(Rt.copyText),Ft(!0)};return r.createElement(O.u,{content:xt?"Copied":Rt.tooltipTitle},r.createElement(A.zx,{className:y()(mt.CopyIcon),type:"button",icon:Rt.icon,onClick:zt}))}b.defaultProps={icon:"copy",className:void 0};var W=e(23932),V=e.n(W);const w="copyIcon",K=Rt=>({KeyValueTable:(0,n.css)`
      label: KeyValueTable;
      background: ${(0,v.h)(Rt,"#fff")};
      border: 1px solid ${(0,v.h)(Rt,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:(0,n.css)`
      label: body;
      vertical-align: baseline;
    `,row:(0,n.css)`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,v.h)(Rt,"#f5f5f5")};
      }
      &:not(:hover) .${w} {
        visibility: hidden;
      }
    `,keyColumn:(0,n.css)`
      label: keyColumn;
      color: ${(0,v.h)(Rt,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:(0,n.css)`
      label: copyColumn;
      text-align: right;
    `,linkIcon:(0,n.css)`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),z=/^(\[|\{)/;function G(Rt){if(typeof Rt=="string"&&z.test(Rt))try{return JSON.parse(Rt)}catch{}return Rt}const Q=Rt=>r.createElement("a",{href:Rt.href,title:Rt.title,target:"_blank",rel:"noopener noreferrer"},Rt.children," ",r.createElement(s.J,{name:"external-link-alt"}));Q.defaultProps={title:""};function j(Rt){const{data:mt,linksGetter:xt}=Rt,Ft=(0,u.wW)(K);return r.createElement("div",{className:y()(Ft.KeyValueTable),"data-testid":"KeyValueTable"},r.createElement("table",{className:S.K9},r.createElement("tbody",{className:Ft.body},mt.map((zt,Jt)=>{const ln={__html:V()(G(zt.value))},Pt=r.createElement("div",{className:S.b$,dangerouslySetInnerHTML:ln}),Gt=xt?xt(mt,Jt):null;let Kt;return Gt&&Gt.length?Kt=r.createElement("div",null,r.createElement(Q,{href:Gt[0].url,title:Gt[0].text},Pt)):Kt=Pt,r.createElement("tr",{className:Ft.row,key:`${zt.key}-${Jt}`},r.createElement("td",{className:Ft.keyColumn,"data-testid":"KeyValueTable--keyColumn"},zt.key),r.createElement("td",null,Kt),r.createElement("td",{className:Ft.copyColumn},r.createElement(b,{className:w,copyText:JSON.stringify(zt,null,2),tooltipTitle:"Copy JSON"})))}))))}const F=Rt=>({header:(0,n.css)`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,v.h)(Rt,"#e8e8e8")};
      }
    `,headerEmpty:(0,n.css)`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:(0,n.css)`
      label: headerHighContrast;
      &:hover {
        background: ${(0,v.h)(Rt,"#ddd")};
      }
    `,emptyIcon:(0,n.css)`
      label: emptyIcon;
      color: ${(0,v.h)(Rt,"#aaa")};
    `,summary:(0,n.css)`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:(0,n.css)`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,v.h)(Rt,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:(0,n.css)`
      label: summaryLabel;
      color: ${(0,v.h)(Rt,"#777")};
    `,summaryDelim:(0,n.css)`
      label: summaryDelim;
      color: ${(0,v.h)(Rt,"#bbb")};
      padding: 0 0.2em;
    `});function k(Rt){const{data:mt}=Rt,xt=(0,u.wW)(F);return!Array.isArray(mt)||!mt.length?null:r.createElement("ul",{className:xt.summary},mt.map((Ft,zt)=>r.createElement("li",{className:xt.summaryItem,key:`${Ft.key}-${zt}`},r.createElement("span",{className:xt.summaryLabel},Ft.key),r.createElement("span",{className:xt.summaryDelim},"="),String(Ft.value))))}k.defaultProps={data:null};function _(Rt){const{className:mt,data:xt,highContrast:Ft,interactive:zt,isOpen:Jt,label:ln,linksGetter:Pt,onToggle:Gt}=Rt,Kt=!Array.isArray(xt)||!xt.length,kt=(0,u.wW)(F),dn=y()(S.Im,{[kt.emptyIcon]:Kt});let nn=null,mn=null;return zt&&(nn=Jt?r.createElement(s.J,{name:"angle-down",className:dn}):r.createElement(s.J,{name:"angle-right",className:dn}),mn={"aria-checked":Jt,onClick:Kt?null:Gt,role:"switch"}),r.createElement("div",{className:y()(mt,S.ty)},r.createElement("div",{className:y()(kt.header,{[kt.headerEmpty]:Kt,[kt.headerHighContrast]:Ft&&!Kt}),...mn,"data-testid":"AccordianKeyValues--header"},nn,r.createElement("strong",{"data-test":T},ln,Jt||":"),!Jt&&r.createElement(k,{data:xt})),Jt&&r.createElement(j,{data:xt,linksGetter:Pt}))}_.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const Y=Rt=>({AccordianLogs:(0,n.css)`
      label: AccordianLogs;
      border: 1px solid ${(0,v.h)(Rt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:(0,n.css)`
      label: AccordianLogsHeader;
      background: ${(0,v.h)(Rt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,v.h)(Rt,"#dadada")};
      }
    `,AccordianLogsContent:(0,n.css)`
      label: AccordianLogsContent;
      background: ${(0,v.h)(Rt,"#f0f0f0")};
      border-top: 1px solid ${(0,v.h)(Rt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:(0,n.css)`
      label: AccordianLogsFooter;
      color: ${(0,v.h)(Rt,"#999")};
    `});function Z(Rt){const{interactive:mt,isOpen:xt,linksGetter:Ft,logs:zt,openedItems:Jt,onItemToggle:ln,onToggle:Pt,timestamp:Gt}=Rt;let Kt=null,kt="span",dn=null;mt&&(Kt=xt?r.createElement(s.J,{name:"angle-down",className:S.Im}):r.createElement(s.J,{name:"angle-right",className:"u-align-icon"}),kt="a",dn={"aria-checked":xt,onClick:Pt,role:"switch"});const nn=(0,u.wW)(Y);return r.createElement("div",{className:nn.AccordianLogs},r.createElement(kt,{className:nn.AccordianLogsHeader,...dn},Kt," ",r.createElement("strong",null,"Events")," (",zt.length,")"),xt&&r.createElement("div",{className:nn.AccordianLogsContent},(0,a.sortBy)(zt,"timestamp").map((mn,Mn)=>r.createElement(_,{key:`${mn.timestamp}-${Mn}`,className:Mn<zt.length-1?S.bi:null,data:mn.fields||[],highContrast:!0,interactive:mt,isOpen:Jt?Jt.has(mn):!1,label:`${(0,I.LU)(mn.timestamp-Gt)}`,linksGetter:Ft,onToggle:mt&&ln?()=>ln(mn):null})),r.createElement("small",{className:nn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}Z.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const ae=Rt=>({wrapper:(0,n.css)`
      label: wrapper;
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      overflow: hidden;
      z-index: 0;
    `,bar:(0,n.css)`
      label: bar;
      border-radius: 3px;
      min-width: 2px;
      position: absolute;
      height: 36%;
      top: 32%;
    `,rpc:(0,n.css)`
      label: rpc;
      position: absolute;
      top: 35%;
      bottom: 35%;
      z-index: 1;
    `,label:(0,n.css)`
      label: label;
      color: #aaa;
      font-size: 12px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1em;
      white-space: nowrap;
      padding: 0 0.5em;
      position: absolute;
    `,logMarker:(0,n.css)`
      label: logMarker;
      background-color: ${(0,v.h)(Rt,"#2c3235")};
      cursor: pointer;
      height: 60%;
      min-width: 1px;
      position: absolute;
      top: 20%;
      &:hover {
        background-color: ${(0,v.h)(Rt,"#464c54")};
      }
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        border: 1px solid transparent;
      }
      &::after {
        left: 0;
      }
    `});function ce(Rt){return`${(Rt*100).toFixed(1)}%`}function q({viewEnd:Rt,viewStart:mt,getViewedBounds:xt,color:Ft,shortLabel:zt,longLabel:Jt,onClick:ln,rpc:Pt,traceStartTime:Gt,span:Kt,className:kt,labelClassName:dn}){const[nn,mn]=(0,r.useState)(zt),Mn=()=>mn(zt),Gn=()=>mn(Jt),$n=(0,a.groupBy)(Kt.logs,Yn=>{const ua=xt(Yn.timestamp,Yn.timestamp).start;return ce(Math.round(ua*500)/500)}),Fn=(0,u.wW)(ae);return r.createElement("div",{className:y()(Fn.wrapper,kt),onBlur:Mn,onClick:ln,onFocus:Gn,onMouseOut:Mn,onMouseOver:Gn,"aria-hidden":!0,"data-testid":D.wl.components.TraceViewer.spanBar},r.createElement("div",{"aria-label":nn,className:Fn.bar,style:{background:Ft,left:ce(mt),width:ce(Rt-mt)}},r.createElement("div",{className:y()(Fn.label,dn),"data-testid":"SpanBar--label"},nn)),r.createElement("div",null,Object.keys($n).map(Yn=>r.createElement(x,{key:Yn,content:r.createElement(Z,{interactive:!1,isOpen:!0,logs:$n[Yn],timestamp:Gt})},r.createElement("div",{"data-testid":"SpanBar--logMarker",className:Fn.logMarker,style:{left:Yn}})))),Pt&&r.createElement("div",{className:Fn.rpc,style:{background:Pt.color,left:ce(Pt.viewStart),width:ce(Pt.viewEnd-Pt.viewStart)}}))}const De=r.memo(q);var oe=e(85001),te=e(53790);const fe=(Rt,mt,xt,Ft)=>(Rt.sort(function(zt,Jt){return(zt.title||"link").toLowerCase().localeCompare((Jt.title||"link").toLowerCase())}),Rt.map((zt,Jt)=>r.createElement(oe.s,{key:Jt,label:zt.title||"Link",onClick:zt.onClick?ln=>{(0,o.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Ft,grafana_version:g.config.buildInfo.version,type:zt.type,location:"menu"}),ln?.preventDefault(),zt.onClick(ln),xt()}:void 0,url:zt.href,className:mt.menuItem}))),Te=({links:Rt,datasourceType:mt,color:xt})=>{const Ft=(0,u.wW)(()=>ge(xt)),[zt,Jt]=(0,r.useState)(!1),[ln,Pt]=(0,r.useState)({x:0,y:0}),Gt=()=>Jt(!1);return r.createElement("div",{"data-testid":"SpanLinksMenu",className:Ft.wrapper},r.createElement("button",{onClick:Kt=>{Jt(!0),Pt({x:Kt.pageX,y:Kt.pageY})},className:Ft.button},r.createElement(s.J,{name:"link",className:Ft.icon})),zt?r.createElement(te.x,{onClose:()=>Jt(!1),renderMenuItems:()=>fe(Rt,Ft,Gt,mt),focusOnOpen:!1,x:ln.x,y:ln.y}):null)},ge=Rt=>({wrapper:(0,n.css)`
      border: none;
      background: ${Rt}10;
      border-bottom: 1px solid ${Rt}CF;
      padding-right: 4px;
    `,button:(0,n.css)`
      background: transparent;
      border: none;
      padding: 0;
    `,icon:(0,n.css)`
      background: transparent;
      border: none;
      padding: 0;
    `,menuItem:(0,n.css)`
      max-width: 60ch;
      overflow: hidden;
    `});function he(Rt){return(0,a.get)((0,a.find)(Rt.references,({span:mt,refType:xt})=>mt&&mt.spanID&&(xt==="CHILD_OF"||xt==="FOLLOWS_FROM")),"span")}function me(Rt){const mt=[];if(!Rt)return mt;let xt=he(Rt);for(;xt;)mt.push(xt.spanID),xt=he(xt);return mt}const ye=(0,m.B)(Rt=>({SpanTreeOffset:(0,n.css)`
      label: SpanTreeOffset;
      color: ${(0,v.h)(Rt,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:(0,n.css)`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:(0,n.css)`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: 1rem;
      height: 100%;
      display: inline-flex;
      transition: padding 300ms ease-out;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,v.h)(Rt,"lightgrey")};
      }
    `,indentGuideActive:(0,n.css)`
      label: indentGuideActive;
      &::before {
        background-color: ${(0,v.h)(Rt,"#777")};
      }
    `,indentGuideThin:(0,n.css)`
      padding-right: 0.3rem;
    `,iconWrapper:(0,n.css)`
      label: iconWrapper;
      position: absolute;
      right: 0;
    `}));class ue extends r.PureComponent{constructor(mt){super(mt),this.handleMouseLeave=(xt,Ft)=>{(!(xt.relatedTarget instanceof HTMLSpanElement)||(0,a.get)(xt,"relatedTarget.dataset.ancestorId")!==Ft)&&this.props.removeHoverIndentGuideId(Ft)},this.handleMouseEnter=(xt,Ft)=>{(!(xt.relatedTarget instanceof HTMLSpanElement)||(0,a.get)(xt,"relatedTarget.dataset.ancestorId")!==Ft)&&this.props.addHoverIndentGuideId(Ft)},this.ancestorIds=me(mt.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:mt,onClick:xt,showChildrenIcon:Ft,span:zt,theme:Jt,visibleSpanIds:ln}=this.props,{hasChildren:Pt,spanID:Gt}=zt,Kt=Pt?{onClick:xt,role:"switch","aria-checked":mt}:null,kt=Ft&&Pt&&(mt?r.createElement(s.J,{name:"angle-down","data-testid":"icon-arrow-down",size:"sm"}):r.createElement(s.J,{name:"angle-right","data-testid":"icon-arrow-right",size:"sm"})),dn=ye(Jt);return r.createElement("span",{className:y()(dn.SpanTreeOffset,{[dn.SpanTreeOffsetParent]:Pt}),...Kt},this.ancestorIds.map((nn,mn)=>r.createElement("span",{key:nn,className:y()(dn.indentGuide,{[dn.indentGuideActive]:this.props.hoverIndentGuideIds.has(nn),[dn.indentGuideThin]:mn!==this.ancestorIds.length-1&&nn!=="root"&&!ln.includes(nn)}),"data-ancestor-id":nn,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:Mn=>this.handleMouseEnter(Mn,nn),onMouseLeave:Mn=>this.handleMouseLeave(Mn,nn)})),kt&&r.createElement("span",{className:dn.iconWrapper,onMouseEnter:nn=>this.handleMouseEnter(nn,Gt),onMouseLeave:nn=>this.handleMouseLeave(nn,Gt),"data-testid":"icon-wrapper"},kt))}}ue.displayName="UnthemedSpanTreeOffset",ue.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const Oe=(0,u.HE)(ue);var Ue=e(29016),at=e(71369);const Ne="spanBar",_e="spanBarLabel",Ke="nameWrapper",et="nameWrapperMatchingFilter",ze="jaegerView",je="nameColumn",Qe=(0,m.B)((Rt,mt)=>{const xt={label:"flash",flash:(0,n.keyframes)`
    from {
      background-color: ${(0,v.h)(Rt,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `},Ft=mt?"":(0,v.h)(Rt,"#fffce4");return{nameWrapper:(0,n.css)`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:(0,n.css)`
      label: nameWrapperMatchingFilter;
      background-color: ${Ft};
    `,nameColumn:(0,n.css)`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:(0,n.css)`
      label: endpointName;
      color: ${(0,v.h)(Rt,"#484848")};
      font-size: 0.9em;
    `,view:(0,n.css)`
      label: view;
      position: relative;
    `,viewExpanded:(0,n.css)`
      label: viewExpanded;
      background: ${(0,v.h)(Rt,"#f8f8f8")};
      outline: 1px solid ${(0,v.h)(Rt,"#ddd")};
    `,viewExpandedAndMatchingFilter:(0,n.css)`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,v.h)(Rt,"#fff3d7")};
      outline: 1px solid ${(0,v.h)(Rt,"#ddd")};
    `,row:(0,n.css)`
      label: row;
      font-size: 0.9em;
      &:hover .${Ne} {
        opacity: 1;
      }
      &:hover .${_e} {
        color: ${(0,v.h)(Rt,"#000")};
      }
      &:hover .${Ke} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,v.h)(Rt,"#fafafa")},
          ${(0,v.h)(Rt,"#f8f8f8")} 75%,
          ${(0,v.h)(Rt,"#eee")}
        );
      }
      &:hover .${ze} {
        background-color: ${(0,v.h)(Rt,"#f5f5f5")};
        outline: 1px solid ${(0,v.h)(Rt,"#ddd")};
      }
    `,rowClippingLeft:(0,n.css)`
      label: rowClippingLeft;
      & .${je}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,v.h)(Rt,"rgba(25, 25, 25, 0.25)")},
          ${(0,v.h)(Rt,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:(0,n.css)`
      label: rowClippingRight;
      & .${ze}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,v.h)(Rt,"rgba(25, 25, 25, 0.25)")},
          ${(0,v.h)(Rt,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:(0,n.css)`
      label: rowExpanded;
      & .${Ne} {
        opacity: 1;
      }
      & .${_e} {
        color: ${(0,v.h)(Rt,"#000")};
      }
      & .${Ke}, &:hover .${Ke} {
        background: ${(0,v.h)(Rt,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,v.h)(Rt,"#ddd")};
      }
      & .${et} {
        background: ${(0,v.h)(Rt,"#fff3d7")};
      }
      &:hover .${ze} {
        background: ${(0,v.h)(Rt,"#eee")};
      }
    `,rowMatchingFilter:(0,n.css)`
      label: rowMatchingFilter;
      // background-color: ${(0,v.h)(Rt,"#fffbde")};
      &:hover .${Ke} {
        background: linear-gradient(
          90deg,
          ${(0,v.h)(Rt,"#fffbde")},
          ${(0,v.h)(Rt,"#fffbde")} 75%,
          ${(0,v.h)(Rt,"#f7f1c6")}
        );
      }
      &:hover .${ze} {
        background-color: ${(0,v.h)(Rt,"#f7f1c6")};
        outline: 1px solid ${(0,v.h)(Rt,"#ddd")};
      }
    `,rowFocused:(0,n.css)`
      label: rowFocused;
      background-color: ${(0,v.h)(Rt,"#cbe7ff")};
      animation: ${xt.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${Ke}, .${ze}, .${et} {
        background-color: ${(0,v.h)(Rt,"#cbe7ff")};
        animation: ${xt.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${Ne} {
        opacity: 1;
      }
      & .${_e} {
        color: ${(0,v.h)(Rt,"#000")};
      }
      &:hover .${Ke}, :hover .${ze} {
        background: ${(0,v.h)(Rt,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,v.h)(Rt,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:(0,n.css)`
      label: rowExpandedAndMatchingFilter;
      &:hover .${ze} {
        background: ${(0,v.h)(Rt,"#ffeccf")};
      }
    `,name:(0,n.css)`
      label: name;
      color: ${(0,v.h)(Rt,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > span {
        color: ${(0,v.h)(Rt,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
      border-bottom-width: 1px;
      border-bottom-style: solid;
    `,nameDetailExpanded:(0,n.css)`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:(0,n.css)`
      label: svcName;
      font-size: 0.9em;
      font-weight: bold;
      margin-right: 0.25rem;
    `,svcNameChildrenCollapsed:(0,n.css)`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:(0,n.css)`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,v.h)(Rt,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:(0,n.css)`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:(0,n.css)`
      label: labelRight;
      left: 100%;
    `,labelLeft:(0,n.css)`
      label: labelLeft;
      right: 100%;
    `}});class We extends r.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(mt,xt,Ft)=>{const zt=xt?.type??"";if(zt===C.Hn)return"";if(zt===""||zt===C.th)return`(${Ft})`;if(zt===C.Kg){const Jt=xt?.tag?.trim()??"";if(Jt!==""&&mt.tags){const ln=mt.tags?.find(Gt=>Gt.key===Jt);if(ln)return`(${ln.value})`;const Pt=mt.process?.tags?.find(Gt=>Gt.key===Jt);if(Pt)return`(${Pt.value})`}}return""}}render(){const{className:mt,color:xt,spanBarOptions:Ft,columnDivision:zt,isChildrenExpanded:Jt,isDetailExpanded:ln,isMatchingFilter:Pt,showSpanFilterMatchesOnly:Gt,isFocused:Kt,numTicks:kt,rpc:dn,noInstrumentedServer:nn,showErrorIcon:mn,getViewedBounds:Mn,traceStartTime:Gn,span:$n,hoverIndentGuideIds:Fn,addHoverIndentGuideId:Yn,removeHoverIndentGuideId:ua,clippingLeft:wa,clippingRight:ga,theme:ca,createSpanLink:Ra,datasourceType:va,showServiceName:Sa,visibleSpanIds:es}=this.props,{duration:yt,hasChildren:bt,operationName:Dt,process:{serviceName:Wt}}=$n,cn=(0,I.LU)(yt),en=Mn($n.startTime,$n.startTime+$n.duration),En=en.start,Rn=en.end,Dn=Qe(ca,Gt),Tn=`${Wt}::${Dt}`;let jn,ra;return En>1-Rn?(jn=`${Tn} | ${cn}`,ra=Dn.labelLeft):(jn=`${cn} | ${Tn}`,ra=Dn.labelRight),r.createElement(at.Z,{className:y()(Dn.row,{[Dn.rowExpanded]:ln,[Dn.rowMatchingFilter]:Pt,[Dn.rowExpandedAndMatchingFilter]:Pt&&ln,[Dn.rowFocused]:Kt,[Dn.rowClippingLeft]:wa,[Dn.rowClippingRight]:ga},mt)},r.createElement(at.Z.Cell,{className:y()(Dn.nameColumn,je),width:zt},r.createElement("div",{className:y()(Dn.nameWrapper,Ke,{[Dn.nameWrapperMatchingFilter]:Pt,nameWrapperMatchingFilter:Pt})},r.createElement(Oe,{onClick:bt?this._childrenToggle:void 0,childrenVisible:Jt,span:$n,hoverIndentGuideIds:Fn,addHoverIndentGuideId:Yn,removeHoverIndentGuideId:ua,visibleSpanIds:es}),r.createElement("button",{type:"button",className:y()(Dn.name,{[Dn.nameDetailExpanded]:ln}),"aria-checked":ln,title:Tn,onClick:this._detailToggle,role:"switch",style:{background:`${xt}10`,borderBottomColor:`${xt}CF`},tabIndex:0},mn&&r.createElement(s.J,{name:"exclamation-circle",style:{backgroundColor:$n.errorIconColor?(0,v.h)(ca,$n.errorIconColor):(0,v.h)(ca,"#db2828")},className:Dn.errorIcon}),Sa&&r.createElement("span",{className:y()(Dn.svcName,{[Dn.svcNameChildrenCollapsed]:bt&&!Jt})},`${Wt} `),dn&&r.createElement("span",null,r.createElement(s.J,{name:"arrow-right"})," ",r.createElement("i",{className:Dn.rpcColorMarker,style:{background:dn.color}}),dn.serviceName),nn&&r.createElement("span",null,r.createElement(s.J,{name:"arrow-right"})," ",r.createElement("i",{className:Dn.rpcColorMarker,style:{background:nn.color}}),nn.serviceName),r.createElement("span",{className:Dn.endpointName},dn?dn.operationName:Dt),r.createElement("span",{className:Dn.endpointName}," ",this.getSpanBarLabel($n,Ft,cn))),Ra&&(()=>{const Jn=Ra($n),Xn=Jn?.length||0;return Jn&&Xn===1?Jn[0]?r.createElement("a",{href:Jn[0].href,target:"_blank",style:{background:`${xt}10`,borderBottom:`1px solid ${xt}CF`,paddingRight:"4px"},rel:"noopener noreferrer",onClick:Jn[0].onClick?oa=>{!(oa.ctrlKey||oa.metaKey||oa.shiftKey)&&Jn[0].onClick&&(oa.preventDefault(),Jn[0].onClick(oa))}:void 0},Jn[0].content):null:Jn&&Xn>1?r.createElement(Te,{links:Jn,datasourceType:va,color:xt}):null})())),r.createElement(at.Z.Cell,{className:y()(Dn.view,ze,{[Dn.viewExpanded]:ln,[Dn.viewExpandedAndMatchingFilter]:Pt&&ln}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-zt,onClick:this._detailToggle},r.createElement(Ue.Z,{numTicks:kt}),r.createElement(De,{rpc:dn,viewStart:En,viewEnd:Rn,getViewedBounds:Mn,color:xt,shortLabel:cn,longLabel:jn,traceStartTime:Gn,span:$n,labelClassName:`${_e} ${ra}`,className:Ne})))}}We.displayName="UnthemedSpanBarRow",We.defaultProps={className:"",rpc:null};const ke=(0,u.HE)(We);var ot=e(99114),lt=e(48069),Ct=e(13601),wt=e(39960),Lt=e(68421);const Ye=Rt=>({Divider:(0,n.css)`
      background: ${(0,v.h)(Rt,"#ddd")};
    `,DividerVertical:(0,n.css)`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:(0,n.css)`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function Be({className:Rt,style:mt,type:xt}){const Ft=(0,u.wW)(Ye);return r.createElement("div",{style:mt,className:(0,n.cx)(Ft.Divider,xt==="horizontal"?Ft.DividerHorizontal:Ft.DividerVertical,Rt)})}const Le=Rt=>mt=>({LabeledList:(0,n.css)`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${Rt&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:(0,n.css)`
      label: LabeledListItem;
      display: inline-block;
      ${Rt&&`
        border-right: 1px solid ${(0,v.h)(mt,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:(0,n.css)`
      label: LabeledListLabel;
      color: ${mt.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:(0,n.css)`
      label: LabeledListValue;
      ${!Rt&&"margin-right: 0.55rem;"}
    `});function le(Rt){const{className:mt,divider:xt=!1,items:Ft}=Rt,zt=(0,u.wW)(Le(xt));return r.createElement("ul",{className:y()(zt.LabeledList,mt)},Ft.map(({key:Jt,label:ln,value:Pt})=>r.createElement("li",{className:zt.LabeledListItem,key:`${Jt}`},r.createElement("span",{className:zt.LabeledListLabel},ln),r.createElement("strong",{className:zt.LabeledListValue},Pt))))}var de=e(96150),X=e(83568);function se(Rt){const{reference:mt,children:xt,createFocusSpanLink:Ft}=Rt,zt=Ft(mt.traceID,mt.spanID);return r.createElement("a",{href:zt.href,target:zt.target,rel:"noopener noreferrer",onClick:zt.onClick?Jt=>{Jt.preventDefault(),zt.onClick(Jt)}:void 0},xt)}const re=Rt=>({AccordianReferenceItem:(0,n.css)`
      border-bottom: 1px solid ${(0,v.h)(Rt,"#d8d8d8")};
    `,AccordianKeyValues:(0,n.css)`
      margin-left: 10px;
    `,AccordianReferences:(0,n.css)`
      label: AccordianReferences;
      border: 1px solid ${(0,v.h)(Rt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:(0,n.css)`
      label: AccordianReferencesHeader;
      background: ${(0,v.h)(Rt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,v.h)(Rt,"#dadada")};
      }
    `,AccordianReferencesContent:(0,n.css)`
      label: AccordianReferencesContent;
      background: ${(0,v.h)(Rt,"#f0f0f0")};
      border-top: 1px solid ${(0,v.h)(Rt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:(0,n.css)`
      label: AccordianReferencesFooter;
      color: ${(0,v.h)(Rt,"#999")};
    `,ReferencesList:(0,n.css)`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:(0,n.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:(0,n.css)`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:(0,n.css)`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:(0,n.css)`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:(0,n.css)`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:(0,n.css)`
      margin-right: 8px;
    `,title:(0,n.css)`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function pe(Rt){const{data:mt,createFocusSpanLink:xt,openedItems:Ft,onItemToggle:zt,interactive:Jt}=Rt,ln=(0,u.wW)(re);return r.createElement("div",{className:ln.AccordianReferencesContent},mt.map((Pt,Gt)=>r.createElement("div",{className:Gt<mt.length-1?ln.AccordianReferenceItem:void 0,key:Gt},r.createElement("div",{className:ln.item,key:`${Pt.spanID}`},r.createElement(se,{reference:Pt,createFocusSpanLink:xt},r.createElement("span",{className:ln.itemContent},Pt.span?r.createElement("span",null,r.createElement("span",{className:(0,n.cx)("span-svc-name",ln.serviceName)},Pt.span.process.serviceName),r.createElement("small",{className:"endpoint-name"},Pt.span.operationName)):r.createElement("span",{className:(0,n.cx)("span-svc-name",ln.title)},"View Linked Span ",r.createElement(s.J,{name:"external-link-alt"})),r.createElement("small",{className:ln.debugInfo},r.createElement("span",{className:ln.debugLabel,"data-label":"TraceID:"},Pt.traceID),r.createElement("span",{className:ln.debugLabel,"data-label":"SpanID:"},Pt.spanID))))),!!Pt.tags?.length&&r.createElement("div",{className:ln.AccordianKeyValues},r.createElement(_,{className:Gt<mt.length-1?S.bi:null,data:Pt.tags||[],highContrast:!0,interactive:Jt,isOpen:Ft?Ft.has(Pt):!1,label:"attributes",linksGetter:null,onToggle:Jt&&zt?()=>zt(Pt):null})))))}const be=({data:Rt,interactive:mt=!0,isOpen:xt,onToggle:Ft,onItemToggle:zt,openedItems:Jt,createFocusSpanLink:ln})=>{const Pt=!Array.isArray(Rt)||!Rt.length;let Gt=null,Kt="span",kt=null;mt&&(Gt=xt?r.createElement(s.J,{name:"angle-down",className:S.Im}):r.createElement(s.J,{name:"angle-right",className:S.Im}),Kt="a",kt={"aria-checked":xt,onClick:Pt?null:Ft,role:"switch"});const dn=(0,u.wW)(re);return r.createElement("div",{className:dn.AccordianReferences},r.createElement(Kt,{className:dn.AccordianReferencesHeader,...kt},Gt,r.createElement("strong",null,r.createElement("span",null,"References"))," ","(",Rt.length,")"),xt&&r.createElement(pe,{data:Rt,openedItems:Jt,createFocusSpanLink:ln,onItemToggle:zt,interactive:mt}))},xe=r.memo(be),Pe=()=>({TextList:(0,n.css)`
      max-height: 450px;
      overflow: auto;
    `,List:(0,n.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:(0,n.css)`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function we(Rt){const{data:mt}=Rt,xt=(0,u.wW)(Pe);return r.createElement("div",{className:y()(xt.TextList),"data-testid":"TextList"},r.createElement("ul",{className:xt.List},mt.map((Ft,zt)=>r.createElement("li",{className:xt.item,key:`${zt}`},Ft))))}const Fe=Rt=>({header:(0,n.css)`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,v.h)(Rt,"#e8e8e8")};
      }
    `});function He({data:Rt}){return r.createElement(we,{data:Rt})}function Xe(Rt){const{className:mt,data:xt,headerClassName:Ft,interactive:zt,isOpen:Jt,label:ln,onToggle:Pt,TextComponent:Gt=He}=Rt,Kt=!Array.isArray(xt)||!xt.length,kt=(0,u.wW)(F),dn=y()(S.Im,{[kt.emptyIcon]:Kt});let nn=null,mn=null;zt&&(nn=Jt?r.createElement(s.J,{name:"angle-down",className:dn}):r.createElement(s.J,{name:"angle-right",className:dn}),mn={"aria-checked":Jt,onClick:Kt?null:Pt,role:"switch"});const Mn=(0,u.wW)(Fe);return r.createElement("div",{className:mt||""},r.createElement("div",{className:y()(Mn.header,Ft),...mn,"data-testid":"AccordianText--header"},nn,r.createElement("strong",null,ln)," (",xt.length,")"),Jt&&r.createElement(Gt,{data:xt}))}Xe.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const dt=Rt=>({header:(0,n.css)`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:(0,n.css)`
      overflow: hidden;
    `,debugInfo:(0,n.css)`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:(0,n.css)`
      label: debugLabel;
      &::before {
        color: ${(0,v.h)(Rt,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:(0,n.css)`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,v.h)(Rt,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,v.h)(Rt,"#333")};
      }
    `,AccordianWarnings:(0,n.css)`
      label: AccordianWarnings;
      background: ${(0,v.h)(Rt,"#fafafa")};
      border: 1px solid ${(0,v.h)(Rt,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:(0,n.css)`
      label: AccordianWarningsHeader;
      background: ${(0,v.h)(Rt,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,v.h)(Rt,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:(0,n.css)`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,v.h)(Rt,"#e8e8e8")};
    `,AccordianWarningsLabel:(0,n.css)`
      label: AccordianWarningsLabel;
      color: ${(0,v.h)(Rt,"#d36c08")};
    `,Textarea:(0,n.css)`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:(0,n.css)`
      font-size: 1.5em;
    `});function ct(Rt){const{detailState:mt,linksGetter:xt,logItemToggle:Ft,logsToggle:zt,processToggle:Jt,span:ln,tagsToggle:Pt,traceStartTime:Gt,warningsToggle:Kt,stackTracesToggle:kt,referencesToggle:dn,referenceItemToggle:nn,createSpanLink:mn,createFocusSpanLink:Mn,topOfViewRefType:Gn,datasourceType:$n}=Rt,{isTagsOpen:Fn,isProcessOpen:Yn,logs:ua,isWarningsOpen:wa,references:ga,isStackTracesOpen:ca}=mt,{operationName:Ra,process:va,duration:Sa,relativeStartTime:es,startTime:yt,traceID:bt,spanID:Dt,logs:Wt,tags:cn,warnings:en,references:En,stackTraces:Rn}=ln,{timeZone:Dn}=Rt;let Tn=[{key:"svc",label:"Service:",value:va.serviceName},{key:"duration",label:"Duration:",value:(0,I.LU)(Sa)},{key:"start",label:"Start Time:",value:(0,I.LU)(es)+At(yt,Dn)},...ln.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:ln.childSpanCount}]:[]];ln.kind&&Tn.push({key:de.TO,label:"Kind:",value:ln.kind}),ln.statusCode!==void 0&&Tn.push({key:de.Q_,label:"Status:",value:ot.Q[ln.statusCode].toLowerCase()}),ln.statusMessage&&Tn.push({key:de.S2,label:"Status Message:",value:ln.statusMessage}),ln.instrumentationLibraryName&&Tn.push({key:de.cG,label:"Library Name:",value:ln.instrumentationLibraryName}),ln.instrumentationLibraryVersion&&Tn.push({key:de.gc,label:"Library Version:",value:ln.instrumentationLibraryVersion}),ln.traceState&&Tn.push({key:de.vB,label:"Trace State:",value:ln.traceState});const jn=(0,u.wW)(dt);let ra;if(mn){const Xn=mn(ln),oa=Xn?.filter(Qn=>Qn.type===X.u.Logs);Xn&&oa&&oa.length>0&&(ra=r.createElement(wt.k,{link:{...oa[0],title:"Logs for this span",target:"_blank",origin:oa[0].field,onClick:Qn=>{(0,o.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:$n,grafana_version:g.config.buildInfo.version,type:"log",location:"spanDetails"}),oa?.[0].onClick?oa?.[0].onClick?.(Qn):Ct.E1.push(oa?.[0].href)}},buttonProps:{icon:"gf-logs"}}))}const Jn=Mn(bt,Dt);return r.createElement("div",{"data-testid":"span-detail-component"},r.createElement("div",{className:jn.header},r.createElement("h2",{className:y()(S.h2)},Ra),r.createElement("div",{className:jn.listWrapper},r.createElement(le,{className:S.xb,divider:!0,items:Tn}))),ra,r.createElement(Be,{className:S.im,type:"horizontal"}),r.createElement("div",null,r.createElement("div",null,r.createElement(_,{data:cn,label:"Span Attributes",linksGetter:xt,isOpen:Fn,onToggle:()=>Pt(Dt)}),va.tags&&r.createElement(_,{className:S.bi,data:va.tags,label:"Resource Attributes",linksGetter:xt,isOpen:Yn,onToggle:()=>Jt(Dt)})),Wt&&Wt.length>0&&r.createElement(Z,{linksGetter:xt,logs:Wt,isOpen:ua.isOpen,openedItems:ua.openedItems,onToggle:()=>zt(Dt),onItemToggle:Xn=>Ft(Dt,Xn),timestamp:Gt}),en&&en.length>0&&r.createElement(Xe,{className:jn.AccordianWarnings,headerClassName:jn.AccordianWarningsHeader,label:r.createElement("span",{className:jn.AccordianWarningsLabel},"Warnings"),data:en,isOpen:wa,onToggle:()=>Kt(Dt)}),Rn?.length?r.createElement(Xe,{label:"Stack trace",data:Rn,isOpen:ca,TextComponent:Xn=>{let oa;return Xn.data?.length>1?oa=Xn.data.map((Qn,ts)=>`StackTrace ${ts+1}:
${Qn}`).join(`
`):oa=Xn.data?.[0],r.createElement(Lt.K,{className:jn.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:oa})},onToggle:()=>kt(Dt)}):null,En&&En.length>0&&(En.length>1||En[0].refType!=="CHILD_OF")&&r.createElement(xe,{data:En,isOpen:ga.isOpen,openedItems:ga.openedItems,onToggle:()=>dn(Dt),onItemToggle:Xn=>nn(Dt,Xn),createFocusSpanLink:Mn}),Gn===St.Explore&&r.createElement("small",{className:jn.debugInfo},r.createElement("a",{...Jn,onClick:Xn=>{Jn.onClick&&Xn.button===0&&(!Xn.currentTarget.target||Xn.currentTarget.target==="_self")&&!(Xn.metaKey||Xn.altKey||Xn.ctrlKey||Xn.shiftKey)&&(Xn.preventDefault(),Jn.onClick(Xn))}},r.createElement(s.J,{name:"link",className:y()(S.Im,jn.LinkIcon)})),r.createElement("span",{className:jn.debugLabel,"data-label":"SpanID:"})," ",Dt)))}const At=(Rt,mt)=>{const xt=(0,lt.dq)(Rt/1e3,{timeZone:mt,defaultWithMS:!0}),Ft=xt.split(" ");return` (${Ft[1]?Ft[1]:xt})`},Ie=(0,m.B)(Rt=>({expandedAccent:(0,n.css)`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 1px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:(0,n.css)`
      label: infoWrapper;
      border: 1px solid ${(0,v.h)(Rt,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class Ze extends r.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(mt,xt)=>{const{linksGetter:Ft,span:zt}=this.props;return Ft(zt,mt,xt)}}render(){const{color:mt,columnDivision:xt,detailState:Ft,logItemToggle:zt,logsToggle:Jt,processToggle:ln,referenceItemToggle:Pt,referencesToggle:Gt,warningsToggle:Kt,stackTracesToggle:kt,span:dn,timeZone:nn,tagsToggle:mn,traceStartTime:Mn,hoverIndentGuideIds:Gn,addHoverIndentGuideId:$n,removeHoverIndentGuideId:Fn,theme:Yn,createSpanLink:ua,focusedSpanId:wa,createFocusSpanLink:ga,topOfViewRefType:ca,datasourceType:Ra,visibleSpanIds:va}=this.props,Sa=Ie(Yn);return r.createElement(at.Z,null,r.createElement(at.Z.Cell,{width:xt,style:{overflow:"hidden"}},r.createElement(Oe,{span:dn,showChildrenIcon:!1,hoverIndentGuideIds:Gn,addHoverIndentGuideId:$n,removeHoverIndentGuideId:Fn,visibleSpanIds:va}),r.createElement(A.zx,{fill:"text",onClick:this._detailToggle,className:y()(Sa.expandedAccent,(0,A.gN)(Yn)),style:{borderColor:mt},"data-testid":"detail-row-expanded-accent"})),r.createElement(at.Z.Cell,{width:1-xt},r.createElement("div",{className:Sa.infoWrapper,style:{borderTopColor:mt}},r.createElement(ct,{detailState:Ft,linksGetter:this._linksGetter,logItemToggle:zt,logsToggle:Jt,processToggle:ln,referenceItemToggle:Pt,referencesToggle:Gt,warningsToggle:Kt,stackTracesToggle:kt,span:dn,timeZone:nn,tagsToggle:mn,traceStartTime:Mn,createSpanLink:ua,focusedSpanId:wa,createFocusSpanLink:ga,topOfViewRefType:ca,datasourceType:Ra}))))}}const ut=(0,u.HE)(Ze),rt=(0,m.B)(Rt=>{const{topOfViewRefType:mt}=Rt,xt=mt==="Explore"?"fixed":"absolute";return{rowsWrapper:(0,n.css)`
      width: 100%;
    `,row:(0,n.css)`
      width: 100%;
    `,scrollToTopButton:(0,n.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: ${xt};
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `}});var St=(Rt=>(Rt.Explore="Explore",Rt.Panel="Panel",Rt))(St||{});const st={bar:28,detail:161,detailWithLogs:197},tt=5,ft=33;function $t(Rt,mt,xt,Ft,zt){if(!Rt)return[];zt&&Ft&&(Rt=Rt.filter(Pt=>Ft.has(Pt.spanID)));let Jt=null;const ln=[];for(let Pt=0;Pt<Rt.length;Pt++){const Gt=Rt[Pt],{spanID:Kt,depth:kt}=Gt;let dn=!1;Jt!=null&&(kt>=Jt?dn=!0:Jt=null),!dn&&(mt.has(Kt)&&(Jt=kt+1),ln.push({span:Gt,isDetail:!1,spanIndex:Pt}),xt.has(Kt)&&ln.push({span:Gt,isDetail:!0,spanIndex:Pt}))}return ln}function Ht(Rt){const[mt,xt]=Rt;return{left:mt>0,right:xt<1}}function Zt(Rt,mt,xt,Ft,zt){return Rt?$t(Rt.spans,mt,xt,Ft,zt):[]}const tn=(0,l.Z)(Zt),on=(0,l.Z)(I._h,a.isEqual),qt=(0,l.Z)(Ht,a.isEqual);class pn extends r.Component{constructor(){super(...arguments),this.hasScrolledToSpan=!1,this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=mt=>this.getRowStates()[mt].spanIndex,this.mapSpanIndexToRowIndex=mt=>{const xt=this.getRowStates().length;for(let Ft=0;Ft<xt;Ft++){const{spanIndex:zt}=this.getRowStates()[Ft];if(zt===mt)return Ft}throw new Error(`unable to find row for span index: ${mt}`)},this.setListView=mt=>{this.listView=mt},this.getKeyFromIndex=mt=>{const{isDetail:xt,span:Ft}=this.getRowStates()[mt];return`${Ft.traceID}--${Ft.spanID}--${xt?"detail":"bar"}`},this.getIndexFromKey=mt=>{const xt=mt.split("--"),Ft=xt[0],zt=xt[1],Jt=xt[2]==="detail",ln=this.getRowStates().length;for(let Pt=0;Pt<ln;Pt++){const{span:Gt,isDetail:Kt}=this.getRowStates()[Pt];if(Gt.spanID===zt&&Gt.traceID===Ft&&Kt===Jt)return Pt}return-1},this.getRowHeight=mt=>{const{span:xt,isDetail:Ft}=this.getRowStates()[mt];return Ft?Array.isArray(xt.logs)&&xt.logs.length?st.detailWithLogs:st.detail:st.bar},this.renderRow=(mt,xt,Ft,zt)=>{const{isDetail:Jt,span:ln,spanIndex:Pt}=this.getRowStates()[Ft],Gt=Math.max((this.listView?.getTopVisibleIndex()||0)-ft,0),Kt=(this.listView?.getBottomVisibleIndex()||0)+ft,kt=this.getVisibleSpanIds(Gt,Kt);return Jt?this.renderSpanDetailRow(ln,mt,xt,zt,kt):this.renderSpanBarRow(ln,Pt,mt,xt,zt,kt)},this.scrollToSpan=(mt,xt)=>{if(xt==null)return;const Ft=this.getRowStates().findIndex(zt=>zt.span.spanID===xt);Ft>=0&&this.listView?.scrollToIndex(Ft,mt)},this.scrollToTop=()=>{const{topOfViewRef:mt,datasourceType:xt,trace:Ft}=this.props;mt?.current?.scrollIntoView({behavior:"smooth"}),(0,o.ff)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:xt,grafana_version:g.config.buildInfo.version,numServices:Ft.services.length,numSpans:Ft.spans.length})},this.getVisibleSpanIds=(0,l.Z)((mt,xt)=>{const Ft=[];for(let zt=mt;zt<xt;zt++){const Jt=this.getRowStates()[zt];Jt?.span&&Ft.push(Jt.span.spanID)}return Ft})}componentDidMount(){this.scrollToSpan(this.props.headerHeight,this.props.focusedSpanId)}shouldComponentUpdate(mt){let xt;for(xt in mt)if(mt[xt]!==this.props[xt])return!0;return!1}componentDidUpdate(mt){const{headerHeight:xt,focusedSpanId:Ft,focusedSpanIdForSearch:zt}=this.props;this.hasScrolledToSpan||(this.scrollToSpan(xt,Ft),this.hasScrolledToSpan=!0),Ft!==mt.focusedSpanId&&this.scrollToSpan(xt,Ft),zt!==mt.focusedSpanIdForSearch&&this.scrollToSpan(xt,zt)}getRowStates(){const{childrenHiddenIDs:mt,detailStates:xt,trace:Ft,findMatchesIDs:zt,showSpanFilterMatchesOnly:Jt}=this.props;return tn(Ft,mt,xt,zt,Jt)}getClipping(){const{currentViewRangeTime:mt}=this.props;return qt(mt)}getViewedBounds(){const{currentViewRangeTime:mt,trace:xt}=this.props,[Ft,zt]=mt;return on({min:xt.startTime,max:xt.endTime,viewStart:Ft,viewEnd:zt})}getAccessors(){const mt=this.listView;if(!mt)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:mt.getViewHeight,getBottomRowIndexVisible:mt.getBottomVisibleIndex,getTopRowIndexVisible:mt.getTopVisibleIndex,getRowPosition:mt.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(mt,xt,Ft,zt,Jt,ln){const{spanID:Pt}=mt,{serviceName:Gt}=mt.process,{childrenHiddenIDs:Kt,childrenToggle:kt,detailStates:dn,detailToggle:nn,findMatchesIDs:mn,spanNameColumnWidth:Mn,trace:Gn,spanBarOptions:$n,hoverIndentGuideIds:Fn,addHoverIndentGuideId:Yn,removeHoverIndentGuideId:ua,createSpanLink:wa,focusedSpanId:ga,focusedSpanIdForSearch:ca,showSpanFilterMatchesOnly:Ra,theme:va,datasourceType:Sa}=this.props;if(!Gn)return null;const es=(0,f._K)(Gt,va),yt=Kt.has(Pt),bt=dn.has(Pt),Dt=mn?mn.has(Pt):!1,Wt=Pt===ga||Pt===ca,cn=(0,I.yM)(mt)||yt&&(0,I.Qx)(Gn.spans,xt);let en=null;if(yt){const jn=(0,I.s2)(Gn.spans.slice(xt));if(jn){const ra=this.getViewedBounds()(jn.startTime,jn.startTime+jn.duration);en={color:(0,f._K)(jn.process.serviceName,va),operationName:jn.operationName,serviceName:jn.process.serviceName,viewEnd:ra.end,viewStart:ra.start}}}const En=mt.tags.find(jn=>jn.key===i);let Rn=null;!mt.hasChildren&&En&&(0,I.JE)(mt)&&(Rn={serviceName:En.value,color:(0,f._K)(En.value,va)});const Dn=xt>0?Gn.spans[xt-1]:null,Tn=rt(this.props);return r.createElement("div",{className:Tn.row,key:Ft,style:zt,...Jt},r.createElement(ke,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:es,spanBarOptions:$n,columnDivision:Mn,isChildrenExpanded:!yt,isDetailExpanded:bt,isMatchingFilter:Dt,isFocused:Wt,showSpanFilterMatchesOnly:Ra,numTicks:tt,onDetailToggled:nn,onChildrenToggled:kt,rpc:en,noInstrumentedServer:Rn,showErrorIcon:cn,getViewedBounds:this.getViewedBounds(),traceStartTime:Gn.startTime,span:mt,hoverIndentGuideIds:Fn,addHoverIndentGuideId:Yn,removeHoverIndentGuideId:ua,createSpanLink:wa,datasourceType:Sa,showServiceName:Dn===null||Dn.process.serviceName!==mt.process.serviceName,visibleSpanIds:ln}))}renderSpanDetailRow(mt,xt,Ft,zt,Jt){const{spanID:ln}=mt,{serviceName:Pt}=mt.process,{detailLogItemToggle:Gt,detailLogsToggle:Kt,detailProcessToggle:kt,detailReferencesToggle:dn,detailReferenceItemToggle:nn,detailWarningsToggle:mn,detailStackTracesToggle:Mn,detailStates:Gn,detailTagsToggle:$n,detailToggle:Fn,spanNameColumnWidth:Yn,trace:ua,timeZone:wa,hoverIndentGuideIds:ga,addHoverIndentGuideId:ca,removeHoverIndentGuideId:Ra,linksGetter:va,createSpanLink:Sa,focusedSpanId:es,createFocusSpanLink:yt,topOfViewRefType:bt,theme:Dt,datasourceType:Wt}=this.props,cn=Gn.get(ln);if(!ua||!cn)return null;const en=(0,f._K)(Pt,Dt),En=rt(this.props);return r.createElement("div",{className:En.row,key:xt,style:{...Ft,zIndex:1},...zt},r.createElement(ut,{color:en,columnDivision:Yn,onDetailToggled:Fn,detailState:cn,linksGetter:va,logItemToggle:Gt,logsToggle:Kt,processToggle:kt,referenceItemToggle:nn,referencesToggle:dn,warningsToggle:mn,stackTracesToggle:Mn,span:mt,timeZone:wa,tagsToggle:$n,traceStartTime:ua.startTime,hoverIndentGuideIds:ga,addHoverIndentGuideId:ca,removeHoverIndentGuideId:Ra,createSpanLink:Sa,focusedSpanId:es,createFocusSpanLink:yt,topOfViewRefType:bt,datasourceType:Wt,visibleSpanIds:Jt}))}render(){const mt=rt(this.props),{scrollElement:xt}=this.props;return r.createElement(r.Fragment,null,r.createElement(p,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:ft,viewBufferMin:ft,itemsWrapperClassName:mt.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:xt}),r.createElement(d.h,{className:mt.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const Cn=(0,u.HE)(pn)},57339:(J,R,e)=>{"use strict";e.d(R,{JE:()=>y,LU:()=>n.LU,Qx:()=>p,_h:()=>a,s2:()=>h,yM:()=>E});var n=e(81355);function a(s){const{min:v,max:C,viewStart:D,viewEnd:M}=s,P=C-v,x=v+D*P,I=C-(1-M)*P-x;return(T,O)=>({start:(T-x)/I,end:(O-x)/I})}function l(s,v,C){return!Array.isArray(C.tags)||!C.tags.length?!1:C.tags.some(D=>D.key===s&&D.value===v)}const r=s=>s.kind==="client",o=l.bind(null,"span.kind","client"),g=s=>r(s)||o(s),m=s=>s.kind==="server",d=l.bind(null,"span.kind","server"),u=s=>m(s)||d(s),i=s=>s.statusCode===2,f=l.bind(null,"error",!0),c=l.bind(null,"error","true"),E=s=>i(s)||f(s)||c(s);function p(s,v){const{depth:C}=s[v];let D=v+1;for(;D<s.length&&s[D].depth>C;D++)if(E(s[D]))return!0;return!1}function h(s){if(s.length<=1||!g(s[0]))return!1;const C=s[0].depth+1;let D=1;for(;D<s.length&&s[D].depth===C;){if(u(s[D]))return s[D];D++}return null}const y=s=>s.kind?s.kind==="client":s.tags.some(({key:v,value:C})=>v==="span.kind"&&C==="client")},96150:(J,R,e)=>{"use strict";e.d(R,{ID:()=>m,Q_:()=>a,S2:()=>l,TO:()=>n,cG:()=>r,gc:()=>o,vB:()=>g});const n="kind",a="status",l="status.message",r="library.name",o="library.version",g="trace.state",m="id"},84598:(J,R,e)=>{"use strict";e.d(R,{DetailState:()=>nn,TracePageHeader:()=>Gt,TraceTimelineViewer:()=>k,filterSpans:()=>tn,transformTraceData:()=>es});var n=e(41407),a=e(39953),l=e(72639),r=e(32688),o=e(64084),g=e(82803),m=e(77896),d=e(9665),u=e.n(d);const f={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let c;function E(){if(c)return c;const yt=new(u())(document.body);return c=yt,yt}function p(yt){const bt=E();Object.keys(yt).forEach(Dt=>{const Wt=yt[Dt];Wt&&bt.bind(f[Dt].binding,Wt)})}function h(){E().reset()}var y=e(77814),s=e.n(y),v=e(51752),C=e(29016),D=e(71369),M=e(68497);const P=()=>({TimelineCollapser:(0,n.css)`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function x(yt){const{onExpandAll:bt,onExpandOne:Dt,onCollapseAll:Wt,onCollapseOne:cn}=yt,en=(0,g.wW)(P);return a.createElement("div",{className:en.TimelineCollapser,"data-testid":"TimelineCollapser"},a.createElement(M.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:Dt}),a.createElement(M.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:cn}),a.createElement(M.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:bt}),a.createElement(M.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:Wt}))}var S=e(80185);const I=(0,o.B)(()=>({TimelineColumnResizer:(0,n.css)`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:(0,n.css)`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:(0,n.css)`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:(0,n.css)`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:(0,n.css)`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:(0,n.css)`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:(0,n.css)`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:(0,n.css)`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `}));class T extends a.PureComponent{constructor(bt){super(bt),this._setRootElm=Dt=>{this._rootElm=Dt},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:Dt,width:Wt}=this._rootElm.getBoundingClientRect(),{min:cn,max:en}=this.props;return{clientXLeft:Dt,width:Wt,maxValue:en,minValue:cn}},this._handleDragUpdate=({value:Dt})=>{this.setState({dragPosition:Dt})},this._handleDragEnd=({manager:Dt,value:Wt})=>{Dt.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(Wt)},this._dragManager=new S.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let bt,Dt;const{position:Wt,columnResizeHandleHeight:cn}=this.props,{dragPosition:en}=this.state;bt=`${Wt*100}%`;const En={left:bt};let Rn=!1,Dn=!1;const Tn=I();if(this._dragManager.isDragging()&&this._rootElm&&en!=null){Rn=en<Wt,Dn=en>Wt;const ra=`${Math.min(Wt,en)*100}%`,Jn=`calc(${(1-Math.max(Wt,en))*100}% - 1px)`;Dt={left:ra,right:Jn}}else Dt=En;Dt.height=cn;const jn=Rn||Dn;return a.createElement("div",{className:Tn.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},a.createElement("div",{className:s()(Tn.gripIcon,jn&&Tn.gripIconDragging),style:En,"data-testid":"TimelineColumnResizer--gripIcon"}),a.createElement("div",{"aria-hidden":!0,className:s()(Tn.dragger,jn&&Tn.draggerDragging,Dn&&Tn.draggerDraggingRight,Rn&&Tn.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:Dt,"data-testid":"TimelineColumnResizer--dragger"}))}}const O=(0,o.B)(()=>({TimelineViewingLayer:(0,n.css)`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:(0,n.css)`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:(0,n.css)`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:(0,n.css)`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:(0,n.css)`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:(0,n.css)`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:(0,n.css)`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:(0,n.css)`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function A(yt){return Reflect.has(yt,"isOutOfView")}function B(yt,bt,Dt){return yt+Dt*(bt-yt)}function b(yt,bt,Dt){return(Dt-yt)/(bt-yt)}function W(yt,bt){let[Dt,Wt]=yt<bt?[yt,bt]:[bt,yt];return Dt>=1||Wt<=0?{isOutOfView:!0}:(Dt<0&&(Dt=0),Wt>1&&(Wt=1),{isDraggingLeft:yt>bt,left:`${Dt*100}%`,width:`${(Wt-Dt)*100}%`})}function V(yt,bt,Dt,Wt,cn){const en=b(yt,bt,Dt),En=b(yt,bt,Wt),Rn=W(en,En);if(A(Rn))return null;const{isDraggingLeft:Dn,left:Tn,width:jn}=Rn,ra=O(),Jn=(0,n.cx)({[ra.TimelineViewingLayerDraggedDraggingRight]:!Dn,[ra.TimelineViewingLayerDraggedReframeDrag]:!cn,[ra.TimelineViewingLayerDraggedShiftDrag]:cn});return a.createElement("div",{className:(0,n.cx)(ra.TimelineViewingLayerDragged,ra.TimelineViewingLayerDraggedDraggingLeft,Jn),style:{left:Tn,width:jn},"data-testid":"Dragged"})}class w extends a.PureComponent{constructor(bt){super(bt),this._setRoot=Dt=>{this._root=Dt},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:Dt,width:Wt}=this._root.getBoundingClientRect();return{clientXLeft:Dt,width:Wt}},this._handleReframeMouseMove=({value:Dt})=>{const[Wt,cn]=this.props.viewRangeTime.current,en=B(Wt,cn,Dt);this.props.updateNextViewRangeTime({cursor:en})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:Dt})=>{const{current:Wt,reframe:cn}=this.props.viewRangeTime,[en,En]=Wt,Rn=B(en,En,Dt),Tn={reframe:{anchor:cn?cn.anchor:Rn,shift:Rn}};this.props.updateNextViewRangeTime(Tn)},this._handleReframeDragEnd=({manager:Dt,value:Wt})=>{const{current:cn,reframe:en}=this.props.viewRangeTime,[En,Rn]=cn,Dn=B(En,Rn,Wt),Tn=en?en.anchor:Dn,[jn,ra]=Dn<Tn?[Dn,Tn]:[Tn,Dn];Dt.resetBounds(),this.props.updateViewRangeTime(jn,ra,"timeline-header")},this._draggerReframe=new S.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(bt){const{boundsInvalidator:Dt}=this.props;Dt!==bt.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:bt}=this.props,{current:Dt,cursor:Wt,reframe:cn,shiftEnd:en,shiftStart:En}=bt,[Rn,Dn]=Dt,Tn=cn!=null||en!=null||En!=null;let jn;!Tn&&Wt!=null&&Wt>=Rn&&Wt<=Dn&&(jn=`${b(Rn,Dn,Wt)*100}%`);const ra=O();return a.createElement("div",{"aria-hidden":!0,className:ra.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},jn!=null&&a.createElement("div",{className:ra.TimelineViewingLayerCursorGuide,style:{left:jn},"data-testid":"TimelineViewingLayer--cursorGuide"}),cn!=null&&V(Rn,Dn,cn.anchor,cn.shift,!1),en!=null&&V(Rn,Dn,Dn,en,!0),En!=null&&V(Rn,Dn,Rn,En,!0))}}const K=yt=>({TimelineHeaderRow:(0,n.css)`
      label: TimelineHeaderRow;
      background: ${(0,m.h)(yt,"#ececec")};
      border-bottom: 1px solid ${(0,m.h)(yt,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:(0,n.css)`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:(0,n.css)`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function z(yt){const{duration:bt,nameColumnWidth:Dt,numTicks:Wt,onCollapseAll:cn,onCollapseOne:en,onColummWidthChange:En,onExpandAll:Rn,onExpandOne:Dn,updateViewRangeTime:Tn,updateNextViewRangeTime:jn,viewRangeTime:ra,columnResizeHandleHeight:Jn}=yt,[Xn,oa]=ra.current,Qn=(0,g.wW)(K);return a.createElement(D.Z,{className:Qn.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},a.createElement(D.Z.Cell,{className:s()(v.oD,v.H3,Qn.TimelineHeaderWrapper),width:Dt},a.createElement("h4",{className:Qn.TimelineHeaderRowTitle},"Service & Operation"),a.createElement(x,{onCollapseAll:cn,onExpandAll:Rn,onCollapseOne:en,onExpandOne:Dn})),a.createElement(D.Z.Cell,{width:1-Dt},a.createElement(w,{boundsInvalidator:Dt,updateNextViewRangeTime:jn,updateViewRangeTime:Tn,viewRangeTime:ra}),a.createElement(C.Z,{numTicks:Wt,startTime:Xn*bt,endTime:oa*bt,showLabels:!0})),a.createElement(T,{columnResizeHandleHeight:Jn,position:Dt,onChange:En,min:.2,max:.85}))}var G=e(42583);const Q=(0,o.B)(yt=>({TraceTimelineViewer:(0,n.css)`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,m.h)(yt,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,m.h)(yt,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,m.h)(yt,"teal")};
      }

      & .json-markup-null {
        color: ${(0,m.h)(yt,"teal")};
      }

      & .json-markup-number {
        color: ${(0,m.h)(yt,"blue","black")};
      }
    `})),j=5;class F extends a.PureComponent{constructor(bt){super(bt),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,l.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:r.config.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,l.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:r.config.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,l.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:r.config.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,l.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:r.config.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){p({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:bt,updateNextViewRangeTime:Dt,updateViewRangeTime:Wt,viewRange:cn,traceTimeline:en,theme:En,topOfViewRef:Rn,focusedSpanIdForSearch:Dn,...Tn}=this.props,{trace:jn}=Tn,ra=Q(En);return a.createElement("div",{className:ra.TraceTimelineViewer,ref:Jn=>Jn&&this.setState({height:Jn.getBoundingClientRect().height})},a.createElement(z,{duration:jn.duration,nameColumnWidth:en.spanNameColumnWidth,numTicks:j,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:bt,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:cn.time,updateNextViewRangeTime:Dt,updateViewRangeTime:Wt,columnResizeHandleHeight:this.state.height}),a.createElement(G.ZP,{...Tn,...en,setSpanNameColumnWidth:bt,currentViewRangeTime:cn.time.current,topOfViewRef:Rn,focusedSpanIdForSearch:Dn,datasourceType:this.props.datasourceType}))}}const k=(0,g.HE)(F);var _=e(48069),Y=e(69865),Z=e(12608),ae=e(12190);const ce=()=>({NewWindowIconLarge:(0,n.css)`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function q(yt){const{isLarge:bt,className:Dt,...Wt}=yt,cn=(0,g.wW)(ce),en=s()({[cn.NewWindowIconLarge]:bt},Dt);return a.createElement(ae.J,{className:en,name:"anchor",...Wt})}q.defaultProps={isLarge:!1};const De=yt=>a.createElement("a",{href:yt.href,title:yt.title,target:"_blank",rel:"noopener noreferrer",className:yt.className},yt.children," ",a.createElement(q,null));function oe(yt){const{links:bt}=yt;return a.createElement(De,{href:bt[0].url,title:bt[0].text,className:yt.className})}const te=100,fe="<trace-without-root-span>",Te=()=>({BreakableText:(0,n.css)`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),ge=/\W*\w+\W*/g;function he(yt){const{className:bt,text:Dt,wordRegexp:Wt=ge}=yt,cn=(0,g.wW)(Te);if(!Dt)return null;const en=[];Wt.exec("");let En=Wt.exec(Dt)||[Dt];for(;En;)en.push(a.createElement("span",{key:`${Dt}-${en.length}`,className:bt||cn.BreakableText},En[0])),En=Wt.exec(Dt);return a.createElement(a.Fragment,null,en)}he.defaultProps={wordRegexp:ge};const me=yt=>({TraceName:(0,n.css)`
      label: TraceName;
      font-size: ${yt.typography.size.lg};
    `});function ye(yt){const{className:bt,traceName:Dt}=yt,Wt=(0,g.wW)(me),cn=String(Dt||fe),en=a.createElement(he,{text:cn});return a.createElement("span",{className:s()(Wt.TraceName,bt)},en)}var ue=e(86832),Oe=e(61950);const Ue=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:te,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function at(){return Ue}function Ne(yt){return(0,ue.get)(at(),yt)}function _e(yt){const bt=yt.references?yt.references.find(Dt=>Dt.refType==="CHILD_OF"):null;return bt?bt.span:null}const Ke=/#\{([^{}]*)\}/g;function et(yt){const bt=new Set;return yt.replace(Ke,(Dt,Wt)=>(bt.add(Wt),Dt)),Array.from(bt)}function ze(yt,bt,Dt){return yt.replace(Ke,(Wt,cn)=>{const en=Dt[cn];return en==null?"":bt(en)})}function je(yt,bt){if(typeof yt!="string")throw new Error("Invalid template");return{parameters:et(yt),template:ze.bind(null,yt,bt)}}function Qe(yt){if(typeof yt=="string")return bt=>bt===yt;if(Array.isArray(yt))return bt=>yt.indexOf(bt)>-1;if(yt==null)return()=>!0;throw new Error(`Invalid value: ${yt}`)}const We=yt=>yt;function ke(yt){try{const bt=je(yt.url,encodeURIComponent),Dt=je(yt.text,We);return{object:yt,type:Qe(yt.type),key:Qe(yt.key),value:Qe(yt.value),url:bt,text:Dt,parameters:(0,ue.uniq)(bt.parameters.concat(Dt.parameters))}}catch(bt){return console.error(`Ignoring invalid link pattern: ${bt}`,yt),null}}function ot(yt,bt){if(bt)return bt.find(Dt=>Dt.key===yt)}function lt(yt,bt){let Dt=bt;for(;Dt;){const Wt=ot(yt,Dt.tags)||ot(yt,Dt.process.tags);if(Wt)return Wt;Dt=_e(Dt)}}function Ct(yt,bt){return yt.template(bt)}function wt(yt,bt){const Dt=[],Wt=Object.keys(bt).filter(cn=>typeof bt[cn]=="string"||bt[cn]==="number");return yt?.filter(cn=>cn?.type("traces")).forEach(cn=>{const en={};cn?.parameters.every(Rn=>{const Dn=Rn;return Wt.includes(Dn)?(en[Rn]=bt[Dn],!0):!1})&&Dt.push({url:Ct(cn.url,en),text:Ct(cn.text,en)})}),Dt}function Lt(yt,bt,Dt,Wt){const cn=Dt[Wt];let en="logs";const En=bt.process.tags===Dt;En&&(en="process"),bt.tags===Dt&&(en="tags");const Dn=[];return yt.forEach(Tn=>{if(Tn.type(en)&&Tn.key(cn.key)&&Tn.value(cn.value)){const jn={};Tn.parameters.every(Jn=>{let Xn=ot(Jn,Dt);return!Xn&&!En&&(Xn=lt(Jn,bt)),Xn?(jn[Jn]=Xn.value,!0):(console.warn(`Skipping link pattern, missing parameter ${Jn} for key ${cn.key} in ${en}.`,Tn.object),!1)})&&Dn.push({url:Ct(Tn.url,jn),text:Ct(Tn.text,jn)})}}),Dn}function Ye(yt,bt){return(Dt,Wt,cn)=>{if(yt.length===0)return[];const en=Wt[cn];let En=bt.get(en);return En||(En=Lt(yt,Dt,Wt,cn),bt.set(en,En)),En}}const Be=(Ne("linkPatterns")||[]).map(ke).filter(yt=>!!yt),Le=(0,Oe.Z)(10)(yt=>{const bt=[];return yt?wt(Be,yt):bt}),le=Ye(Be,new WeakMap);function de(yt){let bt;const Dt=new Set(yt.map(({spanID:Wt})=>Wt));for(let Wt=0;Wt<yt.length;Wt++){if(yt[Wt].references&&yt[Wt].references.some(({traceID:Rn,spanID:Dn})=>Rn===yt[Wt].traceID&&Dt.has(Dn)))continue;if(!bt){bt=yt[Wt];continue}const en=yt[Wt].references&&yt[Wt].references.length||0,En=bt.references&&bt.references.length||0;(en<En||en===En&&yt[Wt].startTime<bt.startTime)&&(bt=yt[Wt])}return bt?`${bt.process.serviceName}: ${bt.operationName}`:""}const X=(0,ue.memoize)(de,yt=>yt.length?yt[0].traceID:0);function se(yt){for(let bt=0;bt<yt.length;bt++){const Dt=yt[bt].tags.filter(en=>en.key==="http.method"),Wt=yt[bt].tags.filter(en=>en.key==="http.status_code"),cn=yt[bt].tags.filter(en=>en.key==="http.url"||en.key==="http.target"||en.key==="http.path");if(Dt.length>0||Wt.length>0||cn.length>0)return{method:Dt,status:Wt,url:cn}}return{}}const re=(0,ue.memoize)(se,yt=>yt.length?yt[0].traceID:0);var pe=e(81355),be=e(50820),xe=e(85465),Pe=e(4919);const we=yt=>({ActionButton:(0,n.css)`
      label: ActionButton;
      overflow: hidden;
      position: relative;
      &:after {
        content: '';
        background: ${yt.colors.primary.main};
        display: block;
        position: absolute;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: all 0.8s;
      }
      &:active:after {
        margin: 0;
        opacity: 0.3;
        transition: 0s;
      }
    `});function Fe(yt){const{onClick:bt,ariaLabel:Dt,label:Wt,icon:cn}=yt,en=(0,g.wW)(we);return a.createElement(Pe.zx,{className:en.ActionButton,size:"sm",variant:"secondary",fill:"outline",type:"button",icon:cn,"aria-label":Dt,onClick:bt},Wt)}const He=yt=>({TracePageActions:(0,n.css)`
      label: TracePageActions;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    `,feedback:(0,n.css)`
      margin: 6px;
      color: ${yt.colors.text.secondary};
      font-size: ${yt.typography.bodySmall.fontSize};
      &:hover {
        color: ${yt.colors.text.link};
      }
    `});function Xe(yt){const{traceId:bt,data:Dt,app:Wt}=yt,cn=(0,g.l4)(),en=He(cn),[En,Rn]=(0,a.useState)(!1),Dn=()=>{navigator.clipboard.writeText(bt),Rn(!0),setTimeout(()=>{Rn(!1)},5e3)},Tn=()=>{const jn=(0,xe.gb)(Dt,"Trace-"+bt.substring(bt.length-6));(0,l.ff)("grafana_traces_download_traces_clicked",{app:Wt,grafana_version:be.config.buildInfo.version,trace_format:jn,location:"trace-view"})};return a.createElement("div",{className:en.TracePageActions},a.createElement("a",{href:"https://forms.gle/RZDEx8ScyZNguDoC8",className:en.feedback,title:"Share your thoughts about tracing in Grafana.",target:"_blank",rel:"noreferrer noopener"},a.createElement(ae.J,{name:"comment-alt-message"})," Give feedback"),a.createElement(Fe,{onClick:Dn,ariaLabel:"Copy Trace ID",label:En?"Copied!":"Trace ID",icon:"copy"}),a.createElement(Fe,{onClick:Tn,ariaLabel:"Export Trace",label:"Export",icon:"save"}))}var dt=e(99114),ct=e(99456),At=e(81803),Ie=e(62818),Ze=e(74661),ut=e(69171),rt=e(12223),St=e(9558),st=e(13273),tt=e(33914),ft=e(96150);const $t=(0,a.memo)(function(bt){const{trace:Dt,spanFilterMatches:Wt,setFocusedSpanIdForSearch:cn,focusedSpanIndexForSearch:en,setFocusedSpanIndexForSearch:En,datasourceType:Rn,showSpanFilters:Dn}=bt,Tn=Ht((0,g.l4)(),Dn);(0,a.useEffect)(()=>{if(Wt&&en!==-1){const ia=Array.from(Wt);cn(ia[en])}},[en,cn,Wt]);const jn=(ia,ls)=>{if(ia.preventDefault(),ia.stopPropagation(),ls){if((0,l.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:Rn,grafana_version:r.config.buildInfo.version,direction:"next"}),en===-1||Wt&&en===Wt.size-1){En(0);return}En(en+1)}},ra=(ia,ls)=>{if(ia.preventDefault(),ia.stopPropagation(),ls){if((0,l.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:Rn,grafana_version:r.config.buildInfo.version,direction:"prev"}),Wt&&(en===-1||en===0)){En(Wt.size-1);return}En(en-1)}},Jn=(ia,ls)=>{ia.key==="Enter"&&jn(ia,ls)},Xn=(ia,ls)=>{ia.key==="Enter"&&ra(ia,ls)},oa=(Wt&&Wt?.size>0)??!1,Qn=oa?Tn.button:(0,n.cx)(Tn.button,Tn.buttonDisabled),ts=(0,a.useCallback)(ia=>a.createElement(Y.u,{content:ia,placement:"top"},a.createElement("span",{className:Tn.tooltip},a.createElement(ae.J,{name:"info-circle",size:"md"}))),[Tn.tooltip]),La=(0,a.useCallback)((ia,ls)=>{const As=[],ss=[];let rs=a.createElement(a.Fragment,null,a.createElement("span",null,`${Dt.spans.length} spans`),ts(a.createElement(a.Fragment,null,a.createElement("div",null,"Services: ",ls),a.createElement("div",null,"Depth: ",ia))));if(Wt)if(Wt.forEach(Ba=>{Dt.processes[Ba]&&(As.push(Dt.processes[Ba].serviceName),ss.push(Dt.spans.find(Aa=>Aa.spanID===Ba)?.depth||0))}),Wt.size===0)rs=a.createElement(a.Fragment,null,a.createElement("span",null,"0 matches"),ts("There are 0 span matches for the filters selected. Please try removing some of the selected filters."));else{const Ba=Wt.size===1?"match":"matches",Aa=en!==-1?`${en+1}/${Wt.size} ${Ba}`:`${Wt.size} ${Ba}`;rs=a.createElement(a.Fragment,null,a.createElement("span",null,Aa),ts(a.createElement(a.Fragment,null,a.createElement("div",null,"Services: ",new Set(As).size,"/",ls),a.createElement("div",null,"Depth: ",new Set(ss).size,"/",ia))))}return rs},[en,ts,Wt,Dt.processes,Dt.spans]),Xa=new Set((0,ue.values)(Dt.processes).map(ia=>ia.serviceName)).size,bs=(0,ue.get)((0,ue.maxBy)(Dt.spans,"depth"),"depth",0)+1;return a.createElement(a.Fragment,null,a.createElement("span",{className:Tn.matches},La(bs,Xa)),a.createElement("div",{className:oa?Tn.buttons:(0,n.cx)(Tn.buttons,Tn.buttonsDisabled)},a.createElement("div",{"aria-label":"Prev result button",className:Qn,onClick:ia=>ra(ia,oa),onKeyDown:ia=>Xn(ia,oa),role:"button",tabIndex:oa?0:-1},"Prev"),a.createElement("div",{"aria-label":"Next result button",className:Qn,onClick:ia=>jn(ia,oa),onKeyDown:ia=>Jn(ia,oa),role:"button",tabIndex:oa?0:-1},"Next")))}),Ht=(yt,bt)=>{const Dt=(0,Pe.fW)({theme:yt,variant:"secondary",size:bt?"md":"sm",iconOnly:!1,fill:"outline"});return{buttons:(0,n.css)`
      display: inline-flex;
      gap: 4px;
    `,buttonsDisabled:(0,n.css)`
      cursor: not-allowed;
    `,button:(0,n.css)`
      ${Dt.button};
    `,buttonDisabled:(0,n.css)`
      ${Dt.disabled};
      pointer-events: none;
    `,matches:(0,n.css)`
      margin-right: ${yt.spacing(2)};
    `,tooltip:(0,n.css)`
      color: #aaa;
      margin: 0 0 0 5px;
    `}};var Zt=e(26286);function tn(yt,bt){if(!bt)return;let Dt=!1;yt.serviceName&&(bt=Rt(bt,yt),Dt=!0),yt.spanName&&(bt=mt(bt,yt),Dt=!0),(yt.from||yt.to)&&(bt=xt(bt,yt),Dt=!0);const Wt=on(bt,yt.tags);return Wt&&(bt=Wt,Dt=!0),Dt?new Set(bt.map(cn=>cn.spanID)):void 0}const on=(yt,bt)=>{if(bt=bt.filter(Dt=>Dt.key&&Dt.key!==""||Dt.value),bt.length>0)return yt.filter(Dt=>bt.every(Wt=>{if(Wt.key&&Wt.value){if(Dt.tags.some(cn=>pn(Wt,cn))||Dt.process.tags.some(cn=>pn(Wt,cn))||Dt.logs&&Dt.logs.some(cn=>cn.fields.some(en=>pn(Wt,en)))||Dt.kind&&Wt.key===ft.TO&&Wt.value===Dt.kind||Dt.statusCode!==void 0&&Wt.key===ft.Q_&&Wt.value===dt.Q[Dt.statusCode].toLowerCase()||Dt.statusMessage&&Wt.key===ft.S2&&Wt.value===Dt.statusMessage||Dt.instrumentationLibraryName&&Wt.key===ft.cG&&Wt.value===Dt.instrumentationLibraryName||Dt.instrumentationLibraryVersion&&Wt.key===ft.gc&&Wt.value===Dt.instrumentationLibraryVersion||Dt.traceState&&Wt.key===ft.vB&&Wt.value===Dt.traceState||Wt.key===ft.ID&&Wt.value===Dt.spanID)return Cn(Wt.operator,!0)}else if(Wt.key&&(Dt.tags.some(cn=>qt(Wt.key,cn.key))||Dt.process.tags.some(cn=>qt(Wt.key,cn.key))||Dt.logs&&Dt.logs.some(cn=>cn.fields.some(en=>qt(Wt.key,en.key)))||Dt.kind&&Wt.key===ft.TO||Dt.statusCode!==void 0&&Wt.key===ft.Q_||Dt.statusMessage&&Wt.key===ft.S2||Dt.instrumentationLibraryName&&Wt.key===ft.cG||Dt.instrumentationLibraryVersion&&Wt.key===ft.gc||Dt.traceState&&Wt.key===ft.vB||Wt.key===ft.ID))return Cn(Wt.operator,!0);return Cn(Wt.operator,!1)}))},qt=(yt,bt)=>yt===bt.toString(),pn=(yt,bt)=>yt.key===bt.key.toString()&&yt.value===bt.value.toString(),Cn=(yt,bt)=>yt==="="?bt:!bt,Rt=(yt,bt)=>yt.filter(Dt=>bt.serviceNameOperator==="="?Dt.process.serviceName===bt.serviceName:Dt.process.serviceName!==bt.serviceName),mt=(yt,bt)=>yt.filter(Dt=>bt.spanNameOperator==="="?Dt.operationName===bt.spanName:Dt.operationName!==bt.spanName),xt=(yt,bt)=>{const Dt=Ft(bt?.from||""),Wt=Ft(bt?.to||"");let cn=[];if(Dt&&(cn=yt.filter(en=>bt.fromOperator===">"?en.duration>Dt:en.duration>=Dt)),Wt){const en=En=>bt.toOperator==="<"?En.duration<Wt:En.duration<=Wt;cn=cn.length>0?cn.filter(En=>en(En)):yt.filter(En=>en(En))}return cn},Ft=yt=>{if(yt.includes("ns"))return parseFloat(yt.split("ns")[0])/1e3;if(yt.includes("us"))return parseFloat(yt.split("us")[0]);if(yt.includes("\xB5s"))return parseFloat(yt.split("\xB5s")[0]);if(yt.includes("ms"))return parseFloat(yt.split("ms")[0])*1e3;if(yt.includes("s"))return parseFloat(yt.split("s")[0])*1e3*1e3;if(yt.includes("m"))return parseFloat(yt.split("m")[0])*1e3*1e3*60;if(yt.includes("h"))return parseFloat(yt.split("h")[0])*1e3*1e3*60*60},zt=(0,a.memo)(function(bt){const{trace:Dt,search:Wt,spanFilterMatches:cn,showSpanFilterMatchesOnly:en,setShowSpanFilterMatchesOnly:En,focusedSpanIndexForSearch:Rn,setFocusedSpanIndexForSearch:Dn,setFocusedSpanIdForSearch:Tn,datasourceType:jn,clear:ra,showSpanFilters:Jn}=bt,Xn=(0,g.wW)(Jt),oa=(0,a.useMemo)(()=>Wt.serviceName&&Wt.serviceName!==""||Wt.spanName&&Wt.spanName!==""||Ft(Wt.from||"")||Ft(Wt.to||"")||Wt.tags.length>1||Wt.tags.some(Qn=>Qn.key)||en,[Wt.serviceName,Wt.spanName,Wt.from,Wt.to,Wt.tags,en]);return a.createElement("div",{className:Xn.container},a.createElement("div",{className:Xn.controls},a.createElement(a.Fragment,null,a.createElement("div",{className:Xn.clearButton},a.createElement(Pe.zx,{variant:"destructive",disabled:!oa,type:"button",fill:"outline","aria-label":"Clear filters button",onClick:ra},"Clear"),a.createElement("div",{className:Xn.matchesOnly},a.createElement(Zt.r,{value:en,onChange:Qn=>En(Qn.currentTarget.checked??!1),label:"Show matches only switch",disabled:!cn?.size}),a.createElement(Pe.zx,{onClick:()=>En(!en),className:Xn.clearMatchesButton,variant:"secondary",fill:"text",disabled:!cn?.size},"Show matches only"))),a.createElement("div",{className:Xn.nextPrevResult},a.createElement($t,{trace:Dt,spanFilterMatches:cn,setFocusedSpanIdForSearch:Tn,focusedSpanIndexForSearch:Rn,setFocusedSpanIndexForSearch:Dn,datasourceType:jn,showSpanFilters:Jn})))))}),Jt=yt=>{const bt=(0,Pe.fW)({theme:yt,variant:"secondary",size:"md",iconOnly:!1,fill:"outline"});return{button:(0,n.css)(bt.button),buttonDisabled:(0,n.css)(bt.disabled,{pointerEvents:"none",cursor:"not-allowed"}),container:(0,n.css)`
      display: inline;
    `,controls:(0,n.css)`
      display: flex;
      justify-content: flex-end;
      margin: 5px 0 0 0;
    `,clearButton:(0,n.css)`
      order: 1;
    `,matchesOnly:(0,n.css)`
      display: inline-flex;
      margin: 0 0 0 25px;
      vertical-align: middle;
      align-items: center;
    `,clearMatchesButton:(0,n.css)`
      color: ${yt.colors.text.primary};

      &:hover {
        background: inherit;
      }
    `,nextPrevResult:(0,n.css)`
      margin-left: auto;
      order: 2;
    `}},ln=(0,a.memo)(yt=>{const{trace:bt,search:Dt,setSearch:Wt,showSpanFilters:cn,setShowSpanFilters:en,showSpanFilterMatchesOnly:En,setShowSpanFilterMatchesOnly:Rn,setFocusedSpanIdForSearch:Dn,spanFilterMatches:Tn,datasourceType:jn}=yt,ra={...(0,g.wW)(Pt)},[Jn,Xn]=(0,a.useState)(),[oa,Qn]=(0,a.useState)(),[ts,La]=(0,a.useState)(),[Xa,bs]=(0,a.useState)({}),[ia,ls]=(0,a.useState)(-1),As=/^\d+(?:\.\d)?\d*(?:ns|us|µs|ms|s|m|h)$/,ss=(0,a.useCallback)(()=>{Xn(void 0),Qn(void 0),La(void 0),bs({}),Wt(tt.js),Rn(!1)},[Wt,Rn]);if((0,a.useEffect)(()=>{ss()},[ss,bt]),!bt)return null;const rs=kn=>{ls(-1),Dn(""),Wt(kn)},Ba=()=>{if(!Jn){const kn=bt.spans.map(ma=>ma.process.serviceName);Xn((0,ue.uniq)(kn).sort().map(ct.E))}},Aa=()=>{if(!oa){const kn=bt.spans.map(ma=>ma.operationName);Qn((0,ue.uniq)(kn).sort().map(ct.E))}},Zs=()=>{if(!ts){let kn=[],ma=[];bt.spans.forEach(ha=>{ha.tags.forEach(Pa=>{kn.push(Pa.key)}),ha.process.tags.forEach(Pa=>{kn.push(Pa.key)}),ha.logs!==null&&ha.logs.forEach(Pa=>{Pa.fields.forEach($s=>{ma.push($s.key)})}),ha.kind&&kn.push(ft.TO),ha.statusCode!==void 0&&kn.push(ft.Q_),ha.statusMessage&&kn.push(ft.S2),ha.instrumentationLibraryName&&kn.push(ft.cG),ha.instrumentationLibraryVersion&&kn.push(ft.gc),ha.traceState&&kn.push(ft.vB),kn.push(ft.ID)}),kn=(0,ue.uniq)(kn).sort(),ma=(0,ue.uniq)(ma).sort(),La([...kn,...ma].map(ct.E))}},Wa=async kn=>{const ma=[];return bt.spans.forEach(ha=>{const Pa=ha.tags.find(Js=>Js.key===kn)?.value;Pa&&ma.push(Pa.toString());const $s=ha.process.tags.find(Js=>Js.key===kn)?.value;switch($s&&ma.push($s.toString()),ha.logs!==null&&ha.logs.forEach(Js=>{const ar=Js.fields.find(ws=>ws.key===kn)?.value;ar&&ma.push(ar.toString())}),kn){case ft.TO:ha.kind&&ma.push(ha.kind);break;case ft.Q_:ha.statusCode!==void 0&&ma.push(dt.Q[ha.statusCode].toLowerCase());break;case ft.S2:ha.statusMessage&&ma.push(ha.statusMessage);break;case ft.cG:ha.instrumentationLibraryName&&ma.push(ha.instrumentationLibraryName);break;case ft.gc:ha.instrumentationLibraryVersion&&ma.push(ha.instrumentationLibraryVersion);break;case ft.vB:ha.traceState&&ma.push(ha.traceState);break;case ft.ID:ma.push(ha.spanID);break;default:break}}),(0,ue.uniq)(ma).sort().map(ct.E)},qa=(kn,ma)=>{Wt({...Dt,tags:Dt.tags?.map(Pa=>Pa.id===kn.id?{...Pa,key:ma?.value||"",value:void 0}:Pa)}),(async()=>{if(ma?.value)bs({...Xa,[kn.id]:await Wa(ma.value)});else{const Pa={...Xa};Pa[kn.id]&&delete Pa[kn.id],bs(Pa)}})()},zn=()=>{const kn={id:(0,tt.kb)(),operator:"="};Wt({...Dt,tags:[...Dt.tags,kn]})},Bt=kn=>{let ma=Dt.tags.filter(ha=>ha.id!==kn);ma.length===0&&(ma=[{id:(0,tt.kb)(),operator:"="}]),Wt({...Dt,tags:ma})},Qs=a.createElement(a.Fragment,null,a.createElement(Y.u,{content:"Filter your spans below. You can continue to apply filters until you have narrowed down your resulting spans to the select few you are most interested in.",placement:"right"},a.createElement("span",{className:ra.collapseLabel},"Span Filters",a.createElement(ae.J,{size:"md",name:"info-circle"}))),!cn&&a.createElement("div",{className:ra.nextPrevResult},a.createElement($t,{trace:bt,spanFilterMatches:Tn,setFocusedSpanIdForSearch:Dn,focusedSpanIndexForSearch:ia,setFocusedSpanIndexForSearch:ls,datasourceType:jn,showSpanFilters:cn})));return a.createElement("div",{className:ra.container},a.createElement(Ie.U,{label:Qs,collapsible:!0,isOpen:cn,onToggle:en},a.createElement(Ze.Z,null,a.createElement(ut._,{label:"Service Name",labelWidth:16},a.createElement(rt.Lh,{spacing:"xs"},a.createElement(St.Ph,{"aria-label":"Select service name operator",onChange:kn=>rs({...Dt,serviceNameOperator:kn.value}),options:[(0,ct.E)("="),(0,ct.E)("!=")],value:Dt.serviceNameOperator}),a.createElement(St.Ph,{"aria-label":"Select service name",isClearable:!0,onChange:kn=>rs({...Dt,serviceName:kn?.value||""}),onOpenMenu:Ba,options:Jn,placeholder:"All service names",value:Dt.serviceName||null})))),a.createElement(Ze.Z,null,a.createElement(ut._,{label:"Span Name",labelWidth:16},a.createElement(rt.Lh,{spacing:"xs"},a.createElement(St.Ph,{"aria-label":"Select span name operator",onChange:kn=>rs({...Dt,spanNameOperator:kn.value}),options:[(0,ct.E)("="),(0,ct.E)("!=")],value:Dt.spanNameOperator}),a.createElement(St.Ph,{"aria-label":"Select span name",isClearable:!0,onChange:kn=>rs({...Dt,spanName:kn?.value||""}),onOpenMenu:Aa,options:oa,placeholder:"All span names",value:Dt.spanName||null})))),a.createElement(Ze.Z,null,a.createElement(ut._,{label:"Duration",labelWidth:16,tooltip:"Filter by duration. Accepted units are ns, us, ms, s, m, h"},a.createElement(rt.Lh,{spacing:"xs",align:"flex-start"},a.createElement(St.Ph,{"aria-label":"Select min span operator",onChange:kn=>rs({...Dt,fromOperator:kn.value}),options:[(0,ct.E)(">"),(0,ct.E)(">=")],value:Dt.fromOperator}),a.createElement("div",{className:ra.intervalInput},a.createElement(st.w,{ariaLabel:"Select min span duration",onChange:kn=>rs({...Dt,from:kn}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:Dt.from||"",validationRegex:As})),a.createElement(St.Ph,{"aria-label":"Select max span operator",onChange:kn=>rs({...Dt,toOperator:kn.value}),options:[(0,ct.E)("<"),(0,ct.E)("<=")],value:Dt.toOperator}),a.createElement(st.w,{ariaLabel:"Select max span duration",onChange:kn=>rs({...Dt,to:kn}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:Dt.to||"",validationRegex:As})))),a.createElement(Ze.Z,{className:ra.tagsRow},a.createElement(ut._,{label:"Tags",labelWidth:16,tooltip:"Filter by tags, process tags or log fields in your spans."},a.createElement("div",null,Dt.tags.map((kn,ma)=>a.createElement("div",{key:ma},a.createElement(rt.Lh,{spacing:"xs",width:"auto"},a.createElement(St.Ph,{"aria-label":"Select tag key",isClearable:!0,key:kn.key,onChange:ha=>qa(kn,ha),onOpenMenu:Zs,options:ts,placeholder:"Select tag",value:kn.key||null}),a.createElement(St.Ph,{"aria-label":"Select tag operator",onChange:ha=>{rs({...Dt,tags:Dt.tags?.map(Pa=>Pa.id===kn.id?{...Pa,operator:ha.value}:Pa)})},options:[(0,ct.E)("="),(0,ct.E)("!=")],value:kn.operator}),a.createElement("span",{className:ra.tagValues},a.createElement(St.Ph,{"aria-label":"Select tag value",isClearable:!0,key:kn.value,onChange:ha=>{rs({...Dt,tags:Dt.tags?.map(Pa=>Pa.id===kn.id?{...Pa,value:ha?.value||""}:Pa)})},options:Xa[kn.id]?Xa[kn.id]:[],placeholder:"Select value",value:kn.value})),a.createElement(At._,{"aria-label":"Remove tag",variant:"secondary",icon:"times",onClick:()=>Bt(kn.id),title:"Remove tag"}),a.createElement("span",{className:ra.addTag},Dt?.tags?.length&&ma===Dt.tags.length-1&&a.createElement(At._,{"aria-label":"Add tag",variant:"secondary",icon:"plus",onClick:zn,title:"Add tag"})))))))),a.createElement(zt,{trace:bt,search:Dt,spanFilterMatches:Tn,showSpanFilterMatchesOnly:En,setShowSpanFilterMatchesOnly:Rn,setFocusedSpanIdForSearch:Dn,focusedSpanIndexForSearch:ia,setFocusedSpanIndexForSearch:ls,datasourceType:jn,clear:ss,showSpanFilters:cn})))});ln.displayName="SpanFilters";const Pt=yt=>({container:(0,n.css)`
      margin: 0.5em 0 -${yt.spacing(1)} 0;
      z-index: 5;

      & > div {
        border-left: none;
        border-right: none;
      }
    `,collapseLabel:(0,n.css)`
      svg {
        color: #aaa;
        margin: -2px 0 0 10px;
      }
    `,addTag:(0,n.css)`
      margin: 0 0 0 10px;
    `,intervalInput:(0,n.css)`
      margin: 0 -4px 0 0;
    `,tagsRow:(0,n.css)`
      margin: -4px 0 0 0;
    `,tagValues:(0,n.css)`
      max-width: 200px;
    `,nextPrevResult:(0,n.css)`
      flex: 1;
      align-items: center;
      display: flex;
      justify-content: flex-end;
      margin-right: ${yt.spacing(1)};
    `}),Gt=(0,a.memo)(yt=>{const{trace:bt,data:Dt,app:Wt,timeZone:cn,search:en,setSearch:En,showSpanFilters:Rn,setShowSpanFilters:Dn,showSpanFilterMatchesOnly:Tn,setShowSpanFilterMatchesOnly:jn,setFocusedSpanIdForSearch:ra,spanFilterMatches:Jn,datasourceType:Xn,setHeaderHeight:oa}=yt,Qn=(0,g.wW)(Kt);(0,a.useEffect)(()=>{oa(document.querySelector("."+Qn.header)?.scrollHeight??0)},[oa,Rn,Qn.header]);const ts=(0,a.useMemo)(()=>bt?Le(bt):[],[bt]);if(!bt)return null;const La=(ss,rs)=>{const Ba=(0,_.dq)(ss.startTime/1e3,{timeZone:rs,defaultWithMS:!0}),Aa=Ba.match(/^(.+)(:\d\d\.\d+)$/);return Aa?a.createElement("span",{className:Qn.TracePageHeaderOverviewItemValue},Aa[1],a.createElement("span",{className:Qn.TracePageHeaderOverviewItemValueDetail},Aa[2])):Ba},Xa=a.createElement("h1",{className:s()(Qn.title)},a.createElement(ye,{traceName:X(bt.spans)}),a.createElement("small",{className:Qn.duration},(0,pe.LU)(bt.duration))),{method:bs,status:ia,url:ls}=re(bt.spans);let As="green";return ia&&ia.length>0&&(ia[0].value.toString().charAt(0)==="4"?As="orange":ia[0].value.toString().charAt(0)==="5"&&(As="red")),a.createElement("header",{className:Qn.header},a.createElement("div",{className:Qn.titleRow},ts&&ts.length>0&&a.createElement(oe,{links:ts,className:Qn.TracePageHeaderBack}),Xa,a.createElement(Xe,{traceId:bt.traceID,data:Dt,app:Wt})),a.createElement("div",{className:Qn.subtitle},a.createElement("span",{className:Qn.timestamp},La(bt,cn)),a.createElement("span",{className:Qn.tagMeta},bs&&bs.length>0&&a.createElement(Y.u,{content:"http.method",interactive:!0},a.createElement("span",{className:Qn.tag},a.createElement(Z.C,{text:bs[0].value,color:"blue"}))),ia&&ia.length>0&&a.createElement(Y.u,{content:"http.status_code",interactive:!0},a.createElement("span",{className:Qn.tag},a.createElement(Z.C,{text:ia[0].value,color:As}))),ls&&ls.length>0&&a.createElement(Y.u,{content:"http.url or http.target or http.path",interactive:!0},a.createElement("span",{className:Qn.url},ls[0].value)))),a.createElement(ln,{trace:bt,showSpanFilters:Rn,setShowSpanFilters:Dn,showSpanFilterMatchesOnly:Tn,setShowSpanFilterMatchesOnly:jn,search:en,setSearch:En,spanFilterMatches:Jn,setFocusedSpanIdForSearch:ra,datasourceType:Xn}))});Gt.displayName="TracePageHeader";const Kt=yt=>({TracePageHeaderBack:(0,n.css)`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderOverviewItemValueDetail:s()((0,n.css)`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:(0,n.css)`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,header:(0,n.css)`
      label: TracePageHeader;
      background-color: ${yt.colors.background.primary};
      padding: 0.5em 0 0 0;
      position: sticky;
      top: 0;
      z-index: 5;
    `,titleRow:(0,n.css)`
      align-items: flex-start;
      display: flex;
      padding: 0 8px;
    `,title:(0,n.css)`
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
    `,subtitle:(0,n.css)`
      flex: 1;
      line-height: 1em;
      margin: -0.5em 0.5em 0.75em 0.5em;
    `,tag:(0,n.css)`
      margin: 0 0.5em 0 0;
    `,duration:(0,n.css)`
      color: #aaa;
      margin: 0 0.75em;
    `,timestamp:(0,n.css)`
      vertical-align: middle;
    `,tagMeta:(0,n.css)`
      margin: 0 0.75em;
      vertical-align: text-top;
    `,url:(0,n.css)`
      margin: -2.5px 0.3em;
      height: 15px;
      overflow: hidden;
      word-break: break-all;
      line-height: 20px;
    `,TracePageHeaderTraceId:(0,n.css)`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 30%;
      display: inline-block;
    `});var kt=e(95577),dn=e(83568);class nn{constructor(bt){const{isTagsOpen:Dt,isProcessOpen:Wt,isReferencesOpen:cn,isWarningsOpen:en,isStackTracesOpen:En,logs:Rn,references:Dn}=bt||{};this.isTagsOpen=!!Dt,this.isProcessOpen=!!Wt,this.isReferencesOpen=!!cn,this.isWarningsOpen=!!en,this.isStackTracesOpen=!!En,this.logs={isOpen:!!(Rn&&Rn.isOpen),openedItems:Rn&&Rn.openedItems?new Set(Rn.openedItems):new Set},this.references={isOpen:!!(Dn&&Dn.isOpen),openedItems:Dn&&Dn.openedItems?new Set(Dn.openedItems):new Set}}toggleTags(){const bt=new nn(this);return bt.isTagsOpen=!this.isTagsOpen,bt}toggleProcess(){const bt=new nn(this);return bt.isProcessOpen=!this.isProcessOpen,bt}toggleReferences(){const bt=new nn(this);return bt.references.isOpen=!this.references.isOpen,bt}toggleReferenceItem(bt){const Dt=new nn(this);return Dt.references.openedItems.has(bt)?Dt.references.openedItems.delete(bt):Dt.references.openedItems.add(bt),Dt}toggleWarnings(){const bt=new nn(this);return bt.isWarningsOpen=!this.isWarningsOpen,bt}toggleStackTraces(){const bt=new nn(this);return bt.isStackTracesOpen=!this.isStackTracesOpen,bt}toggleLogs(){const bt=new nn(this);return bt.logs.isOpen=!this.logs.isOpen,bt}toggleLogItem(bt){const Dt=new nn(this);return Dt.logs.openedItems.has(bt)?Dt.logs.openedItems.delete(bt):Dt.logs.openedItems.add(bt),Dt}}var mn=e(38874);class Mn{static iterFunction(bt,Dt=0){return Wt=>bt(Wt.value,Wt,Dt)}static searchFunction(bt){return typeof bt=="function"?bt:(Dt,Wt)=>bt instanceof Mn?Wt===bt:Dt===bt}constructor(bt,Dt=[]){this.value=bt,this.children=Dt}get depth(){return this.children?.reduce((bt,Dt)=>Math.max(Dt.depth+1,bt),1)}get size(){let bt=0;return this.walk(()=>bt++),bt}addChild(bt){return this.children?.push(bt instanceof Mn?bt:new Mn(bt)),this}find(bt){if(Mn.iterFunction(Mn.searchFunction(bt))(this))return this;for(let Wt=0;Wt<this.children.length;Wt++){const cn=this.children[Wt].find(bt);if(cn)return cn}return null}getPath(bt){const Dt=Mn.iterFunction(Mn.searchFunction(bt)),Wt=(cn,en)=>{const En=en.concat([cn]);if(Dt(cn))return En;for(let Rn=0;Rn<cn.children.length;Rn++){const Dn=cn.children[Rn],Tn=Wt(Dn,En);if(Tn)return Tn}return null};return Wt(this,[])}walk(bt,Dt=0){const Wt=[];let cn=Dt;for(Wt.push({node:this,depth:cn});Wt.length;){const en=Wt.pop();if(en){const{node:En,depth:Rn}=en;bt(En.value,En,Rn),cn=(Rn||0)+1;let Dn=En.children.length-1;for(;Dn>=0;)Wt.push({node:En.children[Dn],depth:cn}),Dn--}}}}const Gn=yt=>yt.spanID,$n=yt=>yt.references||[],Fn=(0,mn.P1)((0,mn.P1)(({span:yt})=>yt,$n),({type:yt})=>yt,(yt,bt)=>yt.find(Dt=>Dt.refType===bt)),Yn=(0,mn.P1)(yt=>Fn({span:yt,type:"CHILD_OF"}),yt=>yt?yt.spanID:null),ua=yt=>yt.spans,wa=(0,mn.P1)(ua,yt=>yt.reduce((bt,Dt)=>bt.set(Gn(Dt),Dt),new Map)),ga="__root__";function ca(yt){const bt=new Map(yt.spans.map(en=>[en.spanID,new Mn(en.spanID)])),Dt=new Map(yt.spans.map(en=>[en.spanID,en])),Wt=new Mn(ga);yt.spans.forEach(en=>{const En=bt.get(en.spanID);if(Array.isArray(en.references)&&en.references.length){const{refType:Rn,spanID:Dn}=en.references[0];if(Rn==="CHILD_OF"||Rn==="FOLLOWS_FROM")(bt.get(Dn)||Wt).children?.push(En);else throw new Error(`Unrecognized ref type: ${Rn}`)}else Wt.children.push(En)});const cn=(en,En)=>{const Rn=en?.value?Dt.get(en.value.toString()):void 0,Dn=En?.value?Dt.get(En.value.toString()):void 0;return+(Rn?.startTime>Dn?.startTime)||+(Rn?.startTime===Dn?.startTime)-1};return yt.spans.forEach(en=>{const En=bt.get(en.spanID);En.children.length>1&&En?.children.sort(cn)}),Wt.children.sort(cn),Wt}const Ra=(0,mn.P1)(({spans:yt})=>yt,(0,mn.P1)(({trace:yt})=>yt,ca),({collapsed:yt})=>yt,(yt,bt,Dt)=>{const Wt=Dt.reduce((cn,en)=>(bt.find(en).walk(En=>En!==en&&cn.add(En)),cn),new Set);return Wt.size>0?yt.filter(cn=>!Wt.has(Gn(cn))):yt});function va(yt){const bt=new Map,Dt=yt.reduce((cn,en)=>(cn.some(En=>En.key===en.key&&En.value===en.value)?bt.set(`${en.key}:${en.value}`,`Duplicate tag "${en.key}:${en.value}"`):cn.push(en),cn),[]),Wt=Array.from(bt.values());return{dedupedTags:Dt,warnings:Wt}}function Sa(yt,bt){const Dt=yt?.slice()??[],Wt=(bt||[]).map(cn=>cn.toLowerCase());return Dt.sort((cn,en)=>{const En=cn.key.toLowerCase(),Rn=en.key.toLowerCase();for(let Dn=0;Dn<Wt.length;Dn++){const Tn=Wt[Dn];if(En.startsWith(Tn)&&!Rn.startsWith(Tn))return-1;if(!En.startsWith(Tn)&&Rn.startsWith(Tn))return 1}return En>Rn?1:En<Rn?-1:0}),Dt}function es(yt){if(!yt?.traceID)return null;const bt=yt.traceID.toLowerCase();let Dt=0,Wt=Number.MAX_SAFE_INTEGER;const cn=new Map,en=new Map;yt.spans=yt.spans.filter(Jn=>!!Jn.startTime),yt.processes=Object.entries(yt.processes).reduce((Jn,[Xn,oa])=>(Jn[Xn]={...oa,tags:Sa(oa.tags)},Jn),{});const En=yt.spans.length;for(let Jn=0;Jn<En;Jn++){const Xn=yt.spans[Jn],{startTime:oa,duration:Qn,processID:ts}=Xn;let La=Xn.spanID;oa<Wt&&(Wt=oa),oa+Qn>Dt&&(Dt=oa+Qn);const Xa=cn.get(La);Xa!=null?(console.warn(`Dupe spanID, ${Xa+1} x ${La}`,Xn,en.get(La)),(0,ue.isEqual)(Xn,en.get(La))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),cn.set(La,Xa+1),La=`${La}_${Xa}`,Xn.spanID=La):cn.set(La,1),Xn.process=yt.processes[ts],en.set(La,Xn)}const Rn=ca(yt),Dn=[],Tn={};Rn.walk((Jn,Xn,oa=0)=>{if(Jn==="__root__"||typeof Jn!="string")return;const Qn=en.get(Jn);if(!Qn)return;const{serviceName:ts}=Qn.process;Tn[ts]=(Tn[ts]||0)+1,Qn.relativeStartTime=Qn.startTime-Wt,Qn.depth=oa-1,Qn.hasChildren=Xn.children.length>0,Qn.childSpanCount=Xn.children.length,Qn.warnings=Qn.warnings||[],Qn.tags=Qn.tags||[],Qn.references=Qn.references||[];const La=va(Qn.tags);Qn.tags=Sa(La.dedupedTags,Ne("topTagPrefixes")),Qn.warnings=Qn.warnings.concat(La.warnings),Qn.references.forEach((Xa,bs)=>{const ia=en.get(Xa.spanID);ia&&(Xa.span=ia,bs>0&&(ia.subsidiarilyReferencedBy=ia.subsidiarilyReferencedBy||[],ia.subsidiarilyReferencedBy.push({spanID:Jn,traceID:bt,span:Qn,refType:Xa.refType})))}),Dn.push(Qn)});const jn=X(Dn);return{services:Object.keys(Tn).map(Jn=>({name:Jn,numberOfSpans:Tn[Jn]})),spans:Dn,traceID:bt,traceName:jn,processes:yt.processes,duration:Dt-Wt,startTime:Wt,endTime:Dt}}},95577:(J,R,e)=>{"use strict";e.d(R,{Hn:()=>c,Kg:()=>p,th:()=>E,vc:()=>y});var n=e(41407),a=e(39953),l=e(99456),r=e(47635),o=e(99242),g=e(82803),m=e(74661),d=e(69171),u=e(9558),i=e(38637),f=e(43997);const c="None",E="Duration",p="Tag";function h({options:v,onOptionsChange:C}){const D=(0,g.wW)(s),M=[c,E,p].map(l.E);return a.createElement("div",{className:(0,n.css)({width:"100%"})},a.createElement(m.Z,{className:D.row},a.createElement(d._,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},a.createElement(u.Ph,{inputId:"label",options:M,value:v.jsonData.spanBar?.type||"",onChange:P=>{(0,r.tp)({onOptionsChange:C,options:v},"spanBar",{...v.jsonData.spanBar,type:P?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),v.jsonData.spanBar?.type===p&&a.createElement(m.Z,{className:D.row},a.createElement(d._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},a.createElement(i.I,{type:"text",placeholder:"Enter tag key",onChange:P=>(0,r.tp)({onOptionsChange:C,options:v},"spanBar",{...v.jsonData.spanBar,tag:P.currentTarget.value}),value:v.jsonData.spanBar?.tag||"",width:40}))))}const y=({options:v,onOptionsChange:C})=>a.createElement(o._,{title:"Span bar",description:a.createElement(f.W,{description:"Add additional info next to the service and operation on a span bar row in the trace view.",suffix:`${v.type}/#span-bar`,feature:"the span bar"})},a.createElement(h,{options:v,onOptionsChange:C})),s=v=>({infoText:(0,n.css)`
    label: infoText;
    padding-bottom: ${v.spacing(2)};
    color: ${v.colors.text.secondary};
  `,row:(0,n.css)`
    label: row;
    align-items: baseline;
  `})},83568:(J,R,e)=>{"use strict";e.d(R,{u:()=>n});var n=(a=>(a.Logs="log",a.Traces="trace",a.Metrics="metric",a.Unknown="unknown",a))(n||{})},51752:(J,R,e)=>{"use strict";e.d(R,{GL:()=>m,H3:()=>g,Im:()=>p,K9:()=>y,WW:()=>a,b$:()=>E,bi:()=>l,h2:()=>o,im:()=>r,oD:()=>d,ty:()=>h,xb:()=>c});var n=e(41407);const a=(0,n.css)`
  position: relative;
`,l=(0,n.css)`
  margin-bottom: 0.25rem;
`,r=(0,n.css)`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,o=(0,n.css)`
  margin: 0;
`,g=(0,n.css)`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,m=(0,n.css)`
  padding-bottom: 0.5rem;
`,d=(0,n.css)`
  display: flex;
`,u=(0,n.css)`
  align-items: center;
`,i=(0,n.css)`
  align-items: start;
`,f=(0,n.css)`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`,c=(0,n.css)`
  text-align: right;
`,E=(0,n.css)`
  display: inline-block;
`,p=(0,n.css)`
  margin: -0.2rem 0.25rem 0 0;
`,h=(0,n.css)`
  text-overflow: ellipsis;
`,y=(0,n.css)`
  width: 100%;
`,s=(0,n.css)`
  color: #aaa;
`,v=(0,n.css)`
  justify-content: flex-end;
`},80185:(J,R,e)=>{"use strict";e.d(R,{EUpdateTypes:()=>a,default:()=>o});var n=(g=>(g.DragEnd="DragEnd",g.DragMove="DragMove",g.DragStart="DragStart",g.MouseEnter="MouseEnter",g.MouseLeave="MouseLeave",g.MouseMove="MouseMove",g))(n||{});const a=n;var l=e(86832);const r=0;class o{constructor({getBounds:m,tag:d,resetBoundsOnResize:u=!0,...i}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=f=>{const{button:c,clientX:E,type:p}=f;if(this._isDragging||c!==r)return;let h=null,y;if(p==="mouseenter")h=a.MouseEnter,y=this._onMouseEnter;else if(p==="mouseleave")h=a.MouseLeave,y=this._onMouseLeave;else if(p==="mousemove")h=a.MouseMove,y=this._onMouseMove;else throw new Error(`invalid event type: ${p}`);if(!y)return;const{value:s,x:v}=this._getPosition(E);y({event:f,type:h,value:s,x:v,manager:this,tag:this.tag})},this._handleDragEvent=f=>{const{button:c,clientX:E,type:p}=f;let h=null,y;if(p==="mousedown"){if(this._isDragging||c!==r)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const C=(0,l.get)(document,"body.style");C&&(C.userSelect="none"),this._isDragging=!0,h=a.DragStart,y=this._onDragStart}else if(p==="mousemove"){if(!this._isDragging)return;h=a.DragMove,y=this._onDragMove}else if(p==="mouseup"){if(!this._isDragging)return;this._stopDragging(),h=a.DragEnd,y=this._onDragEnd}else throw new Error(`invalid event type: ${p}`);if(!y)return;const{value:s,x:v}=this._getPosition(E);y({event:f,type:h,value:s,x:v,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=m,this.tag=d,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=!!u,this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=i.onMouseEnter,this._onMouseLeave=i.onMouseLeave,this._onMouseMove=i.onMouseMove,this._onDragStart=i.onDragStart,this._onDragMove=i.onDragMove,this._onDragEnd=i.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(m){const{clientXLeft:d,maxValue:u,minValue:i,width:f}=this._getBounds();let c=m-d,E=c/f;return i!=null&&E<i?(E=i,c=i*f):u!=null&&E>u&&(E=u,c=u*f),{value:E,x:c}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const m=(0,l.get)(document,"body.style");m&&(m.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}},27523:(J,R,e)=>{"use strict";e.d(R,{_K:()=>d,e6:()=>u});var n=e(16360),a=e(63374),l=e(14312);function r(f){if(f.length!==7)return[0,0,0];const c=f.slice(1,3),E=f.slice(3,5),p=f.slice(5);return[parseInt(c,16),parseInt(E,16),parseInt(p,16)]}class o{constructor(c,E){const p=i(c,E);this.colorsHex=p,this.colorsRgb=p.map(r),this.cache=new Map,this.prevColorIndex=void 0}_getColorIndex(c){let E=this.cache.get(c);if(E==null){const p=this.hashCode(c.toLowerCase());if(E=Math.abs(p%this.colorsHex.length),this.prevColorIndex!==void 0){this.prevColorIndex===E&&(E=this.getNextIndex(E));const h=this.colorsHex[this.prevColorIndex];if(a.Z.readability(h,this.colorsHex[E])<1.5){let y=E;for(let s=0;s<this.colorsHex.length;s++)if(y=this.getNextIndex(y),a.Z.readability(h,this.colorsHex[y])>1.5){E=y;break}}}this.cache.set(c,E),this.prevColorIndex=E}return E}getNextIndex(c){return c+1<this.colorsHex.length?c+1:0}hashCode(c){let E=0,p,h;for(p=0;p<c.length;p++)h=c.charCodeAt(p),E=(E<<5)-E+h;return E}getColorByKey(c){const E=this._getColorIndex(c);return this.colorsHex[E]}getRgbColorByKey(c){const E=this._getColorIndex(c);return this.colorsRgb[E]}clear(){this.cache.clear()}}const g=(0,n.Z)((f,c)=>new o(f,c));function m(f){g([],f)}function d(f,c){return g(l.O9,c).getColorByKey(f)}function u(f,c){return g(l.O9,c).getRgbColorByKey(f)}function i(f,c){const E=[...f],p=E.indexOf("#E24D42");p>-1&&E.splice(p,1);const h=f.indexOf("#BF1B00");h>-1&&E.splice(h,1);let y=[];for(const s of E)a.Z.readability(c.colors.background.primary,s)>=3&&y.push(s);return y}},81355:(J,R,e)=>{"use strict";e.d(R,{LU:()=>C});var n=e(86832),a=e.n(n),l=e(21306),r=e.n(l);const o="YYYY-MM-DD",g="HH:mm",m=1e3,d=1e3*m,u=60*d,i=60*u,f=24*i,c=Math.log10(m),E=[{unit:"d",microseconds:f,ofPrevious:24},{unit:"h",microseconds:i,ofPrevious:60},{unit:"m",microseconds:u,ofPrevious:60},{unit:"s",microseconds:d,ofPrevious:1e3},{unit:"ms",microseconds:m,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],p=(D,M,P)=>toFloatPrecision(D/P,M)*P;function h(D){return moment(D/m).format(o)}function y(D){return moment(D/m).format(g)}function s(D){const M=p(D,c,m);return`${moment.duration(M/m).asMilliseconds()}ms`}function v(D){const M=p(D,c,d);return`${moment.duration(M/m).asSeconds()}s`}function C(D){const[M,P]=(0,n.dropWhile)(E,({microseconds:O},A)=>A<E.length-1&&O>D);if(M.ofPrevious===1e3)return`${(0,n.round)(D/M.microseconds,2)}${M.unit}`;const S=`${Math.floor(D/M.microseconds)}${M.unit}`,I=Math.round(D/P.microseconds%M.ofPrevious),T=`${I}${P.unit}`;return I===0?S:`${S} ${T}`}},33914:(J,R,e)=>{"use strict";e.d(R,{Rx:()=>m,js:()=>g,kb:()=>r});var n=e(39953),a=e(34032),l=e(84598);const r=()=>(0,a.Z)().slice(0,12),g={spanNameOperator:"=",serviceNameOperator:"=",fromOperator:">",toOperator:"<",tags:[{id:r(),operator:"="}]};function m(d){const[u,i]=(0,n.useState)(g),f=(0,n.useMemo)(()=>d&&(0,l.filterSpans)(u,d),[u,d]);return{search:u,setSearch:i,spanFilterMatches:f}}},53073:(J,R,e)=>{"use strict";e.d(R,{N:()=>l});var n=e(98579),a=e(84598);function l(o){if(!o)return null;let g=o.fields.length===1?o.fields[0].values[0]:r(o);return(0,a.transformTraceData)(g)}function r(o){const g=new n.U(o),m={};for(let d=0;d<g.length;d++){const u=g.get(d);m[u.spanID]||(m[u.spanID]={serviceName:u.serviceName,tags:u.serviceTags})}return{traceID:g.get(0).traceID,processes:m,spans:g.toArray().map((d,u)=>{const i=[];return d.parentSpanID&&i.push({refType:"CHILD_OF",spanID:d.parentSpanID,traceID:d.traceID}),d.references&&i.push(...d.references.map(f=>({refType:"FOLLOWS_FROM",...f}))),{...d,duration:d.duration*1e3,startTime:d.startTime*1e3,processID:d.spanID,flags:0,references:i,logs:d.logs?.map(f=>({...f,timestamp:f.timestamp*1e3}))||[],dataFrameRowIndex:u}})}}},53779:(J,R,e)=>{"use strict";e.d(R,{U:()=>b});var n=e(86832),a=e(39953),l=e(14058),r=e(57837),o=e(72639),g=e(13601),m=e(32688),d=e(9006),u=e(96227),i=e(20454),f=e(33155),c=e(73075),E=e(4919),p=e(56516),h=e(97125),y=e(35260),s=e(57721),v=e(99022),C=e(20367),D=(W=>(W.FETCH_DASHBOARD="fetch-dashboard",W.SET_DASHBOARD_LS="set-dashboard-ls-error",W))(D||{});function M(){const W=(0,y.ZQ)();return W.dashboard.panels=[],W}async function P(W){const V=I(W.queries,W.queryResponse),w={targets:W.queries,type:V,title:"New Panel",gridPos:{x:0,y:0,w:12,h:8},datasource:W.datasource};let K;if(W.dashboardUid)try{K=await C.ae.getDashboardByUid(W.dashboardUid)}catch{throw"fetch-dashboard"}else K=M();K.dashboard.panels=[w,...K.dashboard.panels??[]];try{(0,y.$M)(K)}catch{throw"set-dashboard-ls-error"}}const x=W=>!W.hide,S=W=>V=>V.refId===W;function I(W,V){for(const{refId:w}of W.filter(x)){const K=S(w);if(V.flameGraphFrames.some(K))return"flamegraph";if(V.graphFrames.some(K))return"timeseries";if(V.logsFrames.some(K))return"logs";if(V.nodeGraphFrames.some(K))return"nodeGraph";if(V.traceFrames.some(K))return"traces";if(V.customFrames.some(K))return V.customFrames.find(K)?.meta?.preferredVisualisationPluginId??"table"}return"table"}var T=(W=>(W.NewDashboard="new-dashboard",W.ExistingDashboard="existing-dashboard",W))(T||{});function O(W){}function A(W){return W?`d/${W}`:"dashboard/new"}var B=(W=>(W.UNKNOWN="unknown-error",W.NAVIGATION="navigation-error",W))(B||{});function b(W){const{exploreId:V,onClose:w}=W,K=(0,s.useSelector)((0,v.F9)(V)),[z,G]=(0,a.useState)(),{handleSubmit:Q,control:j,formState:{errors:F},watch:k}=(0,l.cI)({defaultValues:{saveTarget:"new-dashboard"}}),_=h.contextSrv.hasPermission(s.AccessControlAction.DashboardsCreate),Y=h.contextSrv.hasPermission(s.AccessControlAction.DashboardsWrite),Z=[];_&&Z.push({label:"New dashboard",value:"new-dashboard"}),Y&&Z.push({label:"Existing dashboard",value:"existing-dashboard"});const ae=Z.length>1?k("saveTarget"):Z[0].value,ce=async(q,De)=>{G(void 0);const oe=De.saveTarget==="existing-dashboard"?De.dashboardUid:void 0;(0,o.ff)("e_2_d_submit",{newTab:q,saveTarget:De.saveTarget,queries:K.queries.length});try{await P({dashboardUid:oe,datasource:K.datasourceInstance?.getRef(),queries:K.queries,queryResponse:K.queryResponse})}catch(Te){switch(Te){case D.FETCH_DASHBOARD:G({error:Te,message:"Could not fetch dashboard information. Please try again."});break;case D.SET_DASHBOARD_LS:G({error:Te,message:"Could not add panel to dashboard. Please try again."});break;default:G({error:"unknown-error",message:"Something went wrong. Please try again."})}return}const te=A(oe);if(!q){w(),g.E1.push(r.u.stripBaseFromUrl(te));return}if(!!!e.g.open(m.config.appUrl+te,"_blank")){G({error:"navigation-error",message:"Could not navigate to the selected dashboard. Please try again."}),(0,y.f1)();return}w()};return(0,a.useEffect)(()=>{(0,o.ff)("e_2_d_open")},[]),a.createElement("form",null,Z.length>1&&a.createElement(d.g,{control:j,render:({field:{ref:q,...De}})=>a.createElement(u.g,{label:"Target dashboard",description:"Choose where to add the panel."},a.createElement(i.S,{options:Z,...De,id:"e2d-save-target"})),name:"saveTarget"}),ae==="existing-dashboard"&&(()=>a.createElement(d.g,{render:({field:{ref:q,value:De,onChange:oe,...te}})=>a.createElement(u.g,{label:"Dashboard",description:"Select in which dashboard the panel will be created.",error:F.dashboardUid?.message,invalid:!!F.dashboardUid},a.createElement(p.o,{...te,inputId:"e2d-dashboard-picker",defaultOptions:!0,onChange:fe=>oe(fe?.uid)})),control:j,name:"dashboardUid",shouldUnregister:!0,rules:{required:{value:!0,message:"This field is required."}}}))(),z&&a.createElement(f.b,{severity:"error",title:"Error adding the panel"},z.message),a.createElement(c.u.ButtonRow,null,a.createElement(E.zx,{type:"reset",onClick:w,fill:"outline",variant:"secondary"},"Cancel"),a.createElement(E.zx,{type:"submit",variant:"secondary",onClick:Q((0,n.partial)(ce,!0)),icon:"external-link-alt"},"Open in new tab"),a.createElement(E.zx,{type:"submit",variant:"primary",onClick:Q((0,n.partial)(ce,!1)),icon:"apps"},"Open dashboard")))}},71475:(J,R,e)=>{"use strict";e.d(R,{k:()=>l});var n=e(97125),a=e(57721);function l(){const r=n.contextSrv.hasPermission(a.AccessControlAction.DashboardsCreate),o=n.contextSrv.hasPermission(a.AccessControlAction.DashboardsWrite);return r&&!o?"Add panel to new dashboard":o&&!r?"Add panel to existing dashboard":"Add panel to dashboard"}},61708:(J,R,e)=>{"use strict";e.d(R,{L:()=>f,Q:()=>E});var n=e(36497),a=e(26205),l=e(72639),r=e(97316),o=e(90634),g=e(46349),m=e(74600),d=e(89394),u=e(60930),i=e(43759);const f=p=>new n.y(h=>{const y=m.h.getState().explore.panes[p]?.correlations;if(y)h.next(y),h.complete();else{const s=m.h.subscribe(()=>{const v=m.h.getState().explore.panes[p]?.correlations;v&&(s(),h.next(v),h.complete())})}});function c(p){return async(h,y)=>{const s=y().explore.panes[p];if(s.datasourceInstance?.uid!==void 0){let v=s.datasourceInstance.meta.mixed?s.queries.map(D=>D.datasource?.uid).filter(D=>D!==null):[s.datasourceInstance.uid];const C=await(0,g.r_)(v);h((0,d.CL)({exploreId:p,correlations:C.correlations||[]}))}}}function E(p,h){return async(y,s)=>{const v=Object.keys(s().explore?.panes),C=s().explore?.panes[v[0]],D=s().explore?.panes[v[1]];if(!C||!D)return;const M=C.datasourceInstance?.meta.mixed?C.queries[0].datasource:C.datasourceInstance?.getRef(),P=D.datasourceInstance?.meta.mixed?D.queries[0].datasource:D.datasourceInstance?.getRef(),[x,S]=await Promise.all([(0,a.F)().get(M),(0,a.F)().get(P)]);if(x?.uid&&S?.uid&&D.correlationEditorHelperData?.resultField){const I={sourceUID:x.uid,targetUID:S.uid,label:p||`${x?.name} to ${S.name}`,description:h,config:{field:D.correlationEditorHelperData.resultField,target:D.queries[0],type:"query"}};await(0,g.NO)(x.uid,I).then(async()=>{y((0,u.YV)(v[1])),await y(c(v[0])),await y((0,i.aA)({exploreId:v[0]})),(0,l.ff)("grafana_explore_correlation_editor_saved",{sourceDatasourceType:x.type,targetDataSourceType:S.type})}).catch(T=>{y((0,r.$l)((0,o.t_)("Error creating correlation",T))),console.error(T)})}}}},76152:(J,R,e)=>{"use strict";e.d(R,{eX:()=>E,zU:()=>c});var n=e(77960),a=e(72639),l=e(82563),r=e(44951),o=e(46349),g=e(86936),m=e(89394),d=e(43759),u=e(21141),i=e(47203);const f=(0,n.PH)("explore/updateDatasourceInstance");function c(p,h,y){return async(s,v)=>{const C=v().user.orgId,{history:D,instance:M}=await(0,i.r_)(C,h),P=v().explore.panes[p].datasourceInstance;(0,a.ff)("explore_change_ds",{from:(P?.meta?.mixed?"mixed":P?.type)||"unknown",to:M.meta.mixed?"mixed":M.type,exploreId:p}),s(f({exploreId:p,datasourceInstance:M,history:D}));const x=v().explore.panes[p].queries,S=(0,i.e1)(M.uid,x),I=await(0,o.r_)(S);s((0,m.CL)({exploreId:p,correlations:I.correlations||[]})),y?.importQueries&&await s((0,d.GJ)(p,x,P,M)),v().explore.panes[p].isLive&&s((0,u.oz)({exploreId:p,refreshInterval:l.dP.offOption.value})),y?.importQueries&&s((0,d.aA)({exploreId:p}))}}const E=(p,h)=>{if(f.match(h)){const{datasourceInstance:y,history:s}=h.payload;return(0,r.RZ)(p.querySubscription),{...p,datasourceInstance:y,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,g.DK)(),queryResponse:(0,i.lp)(),queryKeys:[],history:s}}return p}},89394:(J,R,e)=>{"use strict";e.d(R,{CK:()=>D,CL:()=>v,Oj:()=>h,iz:()=>M,km:()=>p,qN:()=>C});var n=e(77960),a=e(44951),l=e(46349),r=e(2190),o=e(57721),g=e(76152),m=e(80471),d=e(60930),u=e(43759),i=e(21141),f=e(47203);const c=(0,n.PH)("explore/changeSize"),E=(0,n.PH)("explore/changePanels");function p(P,x,S){return async(I,T)=>{const O=T().explore.panes[P];if(O===void 0)return;const{panelsState:A}=O;I(E({exploreId:P,panelsState:{...A,[x]:S}}))}}const h=(0,n.PH)("explore/changeCorrelationHelperData"),y=(0,n.PH)("explore/initializeExploreAction"),s=(0,n.PH)("explore/setUrlReplaced"),v=(0,n.PH)("explore/saveCorrelationsAction");function C(P,{width:x}){return c({exploreId:P,width:x})}const D=(0,o.createAsyncThunk)("explore/initializeExplore",async({exploreId:P,datasource:x,queries:S,range:I,panelsState:T,correlationHelperData:O,eventBridge:A},{dispatch:B,getState:b,fulfillWithValue:W})=>{let V,w=[];if(x){const K=b().user.orgId,z=await(0,f.r_)(K,x);V=z.instance,w=z.history}if(B(y({exploreId:P,queries:S,range:(0,f.rx)(I,(0,r.Z)(b().user)),datasourceInstance:V,history:w,eventBridge:A})),T!==void 0&&B(E({exploreId:P,panelsState:T})),B((0,i.b3)({exploreId:P})),V){const K=(0,f.e1)(V.uid,S),z=await(0,l.r_)(K);B(v({exploreId:P,correlations:z.correlations||[]})),B((0,u.aA)({exploreId:P}))}return O!==void 0&&b().explore.correlationEditorDetails?.editorMode&&B(h({exploreId:P,correlationEditorHelperData:O})),W({exploreId:P,state:b().explore.panes[P]})}),M=(P=(0,f.t5)(),x)=>{if(P=(0,u.Y)(P,x),P=(0,g.eX)(P,x),P=(0,i.ok)(P,x),P=(0,m.Oo)(P,x),d.ZU.match(x)){const{richHistory:S,total:I}=x.payload.richHistoryResults;return{...P,richHistory:S,richHistoryTotal:I}}if(d.Zy.match(x)){const S=x.payload.filters;return{...P,richHistorySearchFilters:S}}if(c.match(x)){const S=x.payload.width;return{...P,containerWidth:S}}if(E.match(x)){const{panelsState:S}=x.payload;return{...P,panelsState:S}}if(h.match(x)){const{correlationEditorHelperData:S}=x.payload;return{...P,correlationEditorHelperData:S}}if(v.match(x))return{...P,correlations:x.payload.correlations};if(y.match(x)){const{queries:S,range:I,datasourceInstance:T,history:O,eventBridge:A}=x.payload;return{...P,range:I,queries:S,initialized:!0,eventBridge:A,queryKeys:(0,a.$$)(S),datasourceInstance:T,history:O,queryResponse:(0,f.lp)(),cache:[],correlations:[]}}return P}},80471:(J,R,e)=>{"use strict";e.d(R,{Cs:()=>y,Ff:()=>f,KZ:()=>C,NV:()=>c,Oo:()=>D,TV:()=>p,WY:()=>u,ch:()=>v,ev:()=>i,fM:()=>g,ik:()=>E,io:()=>h,sO:()=>s});var n=e(77960),a=e(25999),l=e(55284),r=e(60930),o=e(99022);const g=(0,n.PH)("explore/historyUpdated"),m=({updatedQuery:M,deletedId:P})=>async(x,S)=>{d(S().explore,(I,T)=>{const O=I.richHistory.map(B=>B.id===M?.id?M:B).filter(B=>B.id!==P),A=I.richHistory.length-O.length;x((0,r.ZU)({richHistoryResults:{richHistory:O,total:I.richHistoryTotal-A},exploreId:T}))})},d=(M,P)=>{Object.entries(M.panes).forEach(([x,S])=>{S&&P(S,x)})},u=(M,P,x)=>async(S,I)=>{const{richHistoryStorageFull:T,limitExceeded:O}=await(0,a.au)(M,P,x,!1,"",!I().explore.richHistoryStorageFull,!I().explore.richHistoryLimitExceededWarningShown);T&&S((0,r.fm)()),O&&S((0,r.QN)())},i=(M,P)=>async(x,S)=>{const I=await(0,a.VI)(M,P);x(m({updatedQuery:I}))},f=(M,P)=>async x=>{const S=await(0,a.gt)(M,P);x(m({updatedQuery:S}))},c=M=>async P=>{const x=await(0,a.y9)(M);P(m({deletedId:x}))},E=()=>async(M,P)=>{await(0,a.HK)(),(0,o.M)(P()).forEach(([x])=>{M((0,r.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:x})),M((0,r.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:x}))})},p=M=>async(P,x)=>{const S=x().explore.panes[M].richHistorySearchFilters;if(S){const I=await(0,a.ub)(S);P((0,r.ZU)({richHistoryResults:I,exploreId:M}))}},h=M=>async(P,x)=>{const S=x().explore.panes[M]?.richHistorySearchFilters,I=x().explore.panes[M]?.richHistory;if(S&&I){const T={...S,page:(S?.page||1)+1},O=await(0,a.ub)(T),A=[...I,...O.richHistory];P((0,r.Zy)({filters:T,exploreId:M})),P((0,r.ZU)({richHistoryResults:{richHistory:A,total:O.total},exploreId:M}))}},y=M=>async P=>{P((0,r.Zy)({filters:void 0,exploreId:M})),P((0,r.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:M}))},s=()=>async(M,P)=>{let x=P().explore.richHistorySettings;x||(x=await(0,a.di)(),M((0,r.e8)(x)))},v=M=>async P=>{P((0,r.e8)(M)),await(0,a.kg)(M)},C=(M,P)=>async(x,S)=>{await x((0,r.Zy)({exploreId:M,filters:{...P}}));const I=S().explore.richHistorySettings;(0,l.X)().lastUsedDataSourcesAvailable&&await x(v({...I,lastUsedDatasourceFilters:P.datasourceFilters}))},D=(M,P)=>g.match(P)?{...M,history:P.payload.history}:M},60930:(J,R,e)=>{"use strict";e.d(R,{AP:()=>s,Hg:()=>x,QN:()=>c,Sx:()=>h,VY:()=>D,YV:()=>v,ZP:()=>A,ZU:()=>i,Zy:()=>p,bW:()=>M,e8:()=>E,fm:()=>f,m$:()=>S,nL:()=>y,tl:()=>u});var n=e(77960),a=e(91395),l=e(13601),r=e(44951),o=e(57721),g=e(44673),m=e(89394),d=e(47203);const u=(0,n.PH)("explore/syncTimes"),i=(0,n.PH)("explore/richHistoryUpdated"),f=(0,n.PH)("explore/richHistoryStorageFullAction"),c=(0,n.PH)("explore/richHistoryLimitExceededAction"),E=(0,n.PH)("explore/richHistorySettingsUpdated"),p=(0,n.PH)("explore/richHistorySearchFiltersUpdatedAction"),h=(0,n.PH)("explore/splitSizeUpdateAction"),y=(0,n.PH)("explore/maximizePaneAction"),s=(0,n.PH)("explore/evenPaneResizeAction"),v=(0,n.PH)("explore/splitClose"),C=(0,n.PH)("explore/setPaneState"),D=(0,n.PH)("explore/clearPanes"),M=(0,o.createAsyncThunk)("explore/splitOpen",async(B,{getState:b,dispatch:W,requestId:V})=>{const w=Object.values(b().explore.panes)[0],K=B?.queries??(B?.query?[B?.query]:w?.queries||[]);Object.keys(b().explore.panes).forEach((z,G)=>{G>=1&&W(v(z))}),await W(P({exploreId:V,datasource:B?.datasourceUid||w?.datasourceInstance?.getRef(),queries:(0,g.Z)(K),range:B?.range||w?.range.raw||d.UI,panelsState:B?.panelsState||w?.panelsState,correlationHelperData:B?.correlationHelperData,eventBridge:new a.F}))},{idGenerator:r.z0}),P=(0,o.createAsyncThunk)("explore/createNewSplitOpen",async(B,{dispatch:b})=>{await b((0,m.CK)(B))}),x=(0,n.PH)("explore/changeCorrelationEditorDetails"),S=(B,b)=>async W=>{const{timeRange:V,getExploreUrl:w,openInNewWindow:K}=b,z=await w({queries:B.targets,dsRef:B.datasource,scopedVars:B.scopedVars,timeRange:V});if(K&&z){K(z);return}l.E1.push(z)},I=(0,d.t5)(),T={syncedTimes:!1,panes:{},correlationEditorDetails:{editorMode:!1,dirty:!1,isExiting:!1},richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},A={explore:(B=T,b)=>{if(v.match(b)){const{[b.payload]:V,...w}={...B.panes};return{...B,panes:w,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(h.match(b)){const{largerExploreId:V}=b.payload;return{...B,largerExploreId:V,maxedExploreId:void 0,evenSplitPanes:V===void 0}}if(y.match(b)){const{exploreId:V}=b.payload;return{...B,largerExploreId:V,maxedExploreId:V,evenSplitPanes:!1}}if(s.match(b))return{...B,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(u.match(b))return{...B,syncedTimes:b.payload.syncedTimes};if(f.match(b))return{...B,richHistoryStorageFull:!0};if(c.match(b))return{...B,richHistoryLimitExceededWarningShown:!0};if(E.match(b)){const V=b.payload;return{...B,richHistorySettings:V}}if(P.pending.match(b))return{...B,panes:{...B.panes,[b.meta.arg.exploreId]:I}};if(m.CK.pending.match(b)){const V=Object.entries(B.panes),w=V.slice(0,b.meta.arg.position),K=V.slice(w.length),z=[...w,[b.meta.arg.exploreId,I],...K].reduce((G,[Q,j])=>({...G,[Q]:j}),{});return{...B,panes:z}}if(D.match(b))return{...B,panes:{}};if(x.match(b)){const{editorMode:V,label:w,description:K,canSave:z,dirty:G,isExiting:Q,postConfirmAction:j}=b.payload;return{...B,correlationEditorDetails:{editorMode:!!(V??B.correlationEditorDetails?.editorMode),canSave:!!(z??B.correlationEditorDetails?.canSave),label:w??B.correlationEditorDetails?.label,description:K??B.correlationEditorDetails?.description,dirty:!!(G??B.correlationEditorDetails?.dirty),isExiting:!!(Q??B.correlationEditorDetails?.isExiting),postConfirmAction:j}}}const W=b.payload?.exploreId;return typeof W=="string"?{...B,panes:Object.entries(B.panes).reduce((V,[w,K])=>({...V,[w]:w===W?(0,m.iz)(K,b):K}),{})}:B}}},43759:(J,R,e)=>{"use strict";e.d(R,{CS:()=>Lt,K8:()=>Fe,ci:()=>Ye,qV:()=>le,LK:()=>He,Sv:()=>ke,GJ:()=>de,W1:()=>Xe,sK:()=>X,Y:()=>ct,aA:()=>re,EA:()=>we,P4:()=>lt,$9:()=>ge,sQ:()=>We,KO:()=>Pe,SE:()=>je,z0:()=>dt});var n=e(77960),a=e(89162),l=e.n(a),r=e(86832),o=e(53323),g=e(63302),m=e(93105),d=e(84289),u=e(63646),i=e(10694),f=e(30976),c=e(69323),E=e(54721),p=e(71519),h=e(53305),y=e(26205),s=e(72639),v=e(32688),C=e(44951),D=e(56858),M=e(46349),P=e(2190),x=e(24677),S=e(57721),I=e(97316),T=e(90634),O=e(34110),A=e(71476),B=e(94123),b=e(69733),W=e(31049),V=e(89591),w=e(41891),K=e(20810),z=e(13090);const G=Ie=>{const Ze=[],ut=[],rt=[],St=[],st=[],tt=[],ft=[],$t=[];for(const Ht of Ie.series){if(ae(Ht)){$t.push(Ht);continue}switch(Ht.meta?.preferredVisualisationType){case"logs":St.push(Ht);break;case"graph":Ze.push(Ht);break;case"trace":st.push(Ht);break;case"table":ut.push(Ht);break;case"rawPrometheus":rt.push(Ht);break;case"nodeGraph":tt.push(Ht);break;case"flamegraph":ft.push(Ht);break;default:Z(Ht)&&Ze.push(Ht),ut.push(Ht)}}return{...Ie,graphFrames:Ze,tableFrames:ut,logsFrames:St,traceFrames:st,nodeGraphFrames:tt,customFrames:$t,flameGraphFrames:ft,rawPrometheusFrames:rt,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},Q=({showCorrelationEditorLinks:Ie,queries:Ze,correlations:ut,defaultTargetDatasource:rt})=>St=>{if(Ie&&rt)for(const st of St.series)for(const tt of st.fields){tt.config.links=[],tt.display=tt.display||(0,B.g)();const ft={};st.fields.map($t=>{ft[`${$t.name}`]=`\${__data.fields.['${$t.name}']}`}),tt.config.links.push({url:"",origin:b.n1.ExploreCorrelationsEditor,title:`Correlate with ${tt.name}`,internal:{datasourceUid:rt.uid,datasourceName:rt.name,query:{datasource:{uid:rt.uid}},meta:{correlationData:{resultField:tt.name,vars:ft}}}})}else if(Ze?.length&&ut?.length){const st=(0,r.mapValues)((0,r.groupBy)(Ze,"refId"),"0.datasource.uid");(0,M.nh)(St.series,ut,st)}return St},j=Ie=>Ie.graphFrames.length?{...Ie,graphResult:Ie.graphFrames}:{...Ie,graphResult:null},F=Ie=>{if(Ie.tableFrames.length===0)return(0,g.of)({...Ie,tableResult:null});Ie.tableFrames.sort((St,st)=>{const tt=St.refId,ft=st.refId;return tt>ft?1:tt<ft?-1:0});const Ze=Ie.tableFrames.every(St=>Z(St)),ut={interpolate:St=>St};return(Ze?(0,g.of)(Ie.tableFrames).pipe(W.Y.joinByFieldTransformer.operator({},ut)):(0,g.of)(Ie.tableFrames).pipe(W.Y.mergeTransformer.operator({},ut))).pipe((0,A.U)(St=>{for(const st of St)for(const tt of st.fields)tt.display=tt.display??(0,B.U)({field:tt,theme:v.config.theme2,timeZone:Ie.request?.timezone??"browser"});return{...Ie,tableResult:St}}))},k=Ie=>{const Ze=Ie.rawPrometheusFrames;if(!Ze||Ze.length===0)return(0,g.of)({...Ie,tableResult:null});Ze.sort((st,tt)=>{const ft=st.refId,$t=tt.refId;return ft>$t?1:ft<$t?-1:0});const ut=Ze.every(st=>Z(st)),rt={interpolate:st=>st};return(ut?(0,g.of)(Ze).pipe(W.Y.joinByFieldTransformer.operator({},rt)):(0,g.of)(Ze).pipe(W.Y.mergeTransformer.operator({},rt))).pipe((0,A.U)(st=>{const tt=st[0];for(const ft of tt.fields)ft.display=ft.display??(0,B.U)({field:ft,theme:v.config.theme2,timeZone:Ie.request?.timezone??"browser"});return{...Ie,rawPrometheusResult:tt}}))},_=(Ie={})=>Ze=>{if(Ze.logsFrames.length===0)return{...Ze,logsResult:null};const ut=Ze.request?.intervalMs,rt=(0,w.aB)(Ze.logsFrames,ut,Ie.absoluteRange,Ie.queries),St=(0,C.Oy)(Ie.refreshInterval),st=(0,K.j0)(rt,St),tt=st.rows,ft=st.series,$t={...st,rows:tt,series:ft};return{...Ze,logsResult:$t}};function Y(Ie,Ze,ut,rt,St,st,tt,ft){return(0,g.of)(Ie).pipe((0,A.U)($t=>(0,h.zR)($t,Ze)),(0,A.U)(Q({defaultTargetDatasource:ft,showCorrelationEditorLinks:tt,queries:St,correlations:st})),(0,A.U)(G),(0,A.U)(j),(0,A.U)(_({absoluteRange:ut,refreshInterval:rt,queries:St})),(0,d.z)(k),(0,d.z)(F))}function Z(Ie){const Ze=(0,r.groupBy)(Ie.fields,ut=>ut.type);return!!(Object.keys(Ze).length===2&&Ze[V.fS.time]?.length===1&&Ze[V.fS.number])}function ae(Ie){return Ie.meta?.preferredVisualisationPluginId?(0,z.eD)(Ie.meta?.preferredVisualisationPluginId):!1}var ce=e(86936),q=e(61708),De=e(89394),oe=e(80471),te=e(60930),fe=e(21141),Te=e(47203);const ge=Ie=>Ze=>{const ut=Ze.explore.panes[Ie];return ut&&ut.queryResponse?ut.queryResponse.state===i.Gu.Loading||ut.queryResponse.state===i.Gu.Streaming:!1},he=(0,n.PH)("explore/addQueryRow"),me=(0,n.PH)("explore/changeQueries"),ye=(0,n.PH)("explore/cancelQueries"),ue=(0,n.PH)("explore/queriesImported"),Oe=(0,n.PH)("explore/queryStoreSubscription"),Ue=(0,n.PH)("explore/setSupplementaryQueryEnabledAction"),at=(0,n.PH)("explore/storeSupplementaryQueryDataProviderAction"),Ne=(0,n.PH)("explore/cleanSupplementaryQueryDataProviderAction"),_e=(0,n.PH)("explore/cleanSupplementaryQueryAction"),Ke=(0,n.PH)("explore/storeSupplementaryQueryDataSubscriptionAction"),et=(0,n.PH)("explore/updateSupplementaryQueryDataAction"),ze=(0,n.PH)("explore/queryStreamUpdated"),je=(0,n.PH)("explore/setQueries"),Qe=(0,n.PH)("changeLoadingState"),We=(0,n.PH)("explore/setPausedState"),ke=(0,n.PH)("explore/clearLogs"),ot=(0,n.PH)("explore/scanStart"),lt=(0,n.PH)("explore/scanStop"),Ct=(0,n.PH)("explore/addResultsToCache"),wt=(0,n.PH)("explore/clearCache");function Lt(Ie,Ze){return async(ut,rt)=>{const St=rt().explore.panes[Ie];let st;St.datasourceInstance?.meta.mixed?st=(0,r.findLast)(St.queries,ft=>!!ft.datasource)?.datasource||void 0:st=St.datasourceInstance?.getRef();const tt=await(0,C.Xk)(St.queries,Ze,st);ut(he({exploreId:Ie,index:Ze,query:tt}))}}function Ye(Ie){return(Ze,ut)=>{Ze(lt({exploreId:Ie})),Ze(ye({exploreId:Ie}));const rt=ut().explore.panes[Ie].supplementaryQueries;for(const St of ce.SY)Ze(Ne({exploreId:Ie,type:St})),rt[St]?.data?.state!==i.Gu.Done&&Ze(_e({exploreId:Ie,type:St}))}}const Be=(Ie,Ze)=>{const ut=Ie.getRef();return Ze.map(rt=>({...rt,datasource:ut}))},Le=async(Ie,Ze,ut)=>{let rt=[];if(Ze.meta?.id===Ie.meta?.id)rt=ut;else if((0,f.p)(Ze)&&(0,f.CZ)(Ie)){const St=await Ze.exportToAbstractQueries(ut);rt=await Ie.importFromAbstractQueries(St)}else Ie.importQueries&&(rt=await Ie.importQueries(ut,Ze));return Be(Ie,rt)},le=(0,S.createAsyncThunk)("explore/changeQueries",async({queries:Ie,exploreId:Ze},{getState:ut,dispatch:rt})=>{let St=!1;const st=ut().explore.panes[Ze].queries,tt=ut().explore.panes[Ze].datasourceInstance?.uid,ft=ut().explore.correlationEditorDetails,$t=ft?.editorMode||!1;!(Object.keys(ut().explore.panes)[0]===Ze)&&$t&&!ft?.dirty&&rt((0,te.Hg)({dirty:!0}));for(const Zt of Ie)for(const tn of st){if(Zt.refId===tn.refId&&Zt.datasource?.type!==tn.datasource?.type){const on=await(0,y.F)().get(tn.datasource),qt=await(0,y.F)().get({uid:Zt.datasource?.uid});await rt(de(Ze,st,on,qt,Zt.refId)),St=!0}if(tt===x.D&&Zt.refId===tn.refId&&Zt.datasource?.uid!==tn.datasource?.uid){const on=(0,Te.e1)(x.D,Ie),qt=await(0,M.r_)(on);rt((0,De.CL)({exploreId:Ze,correlations:qt.correlations||[]}))}}St||rt(me({queries:Ie,exploreId:Ze})),Ie.length<st.length&&rt(re({exploreId:Ze}))}),de=(Ie,Ze,ut,rt,St)=>async st=>{if(!ut){st(ue({exploreId:Ie,queries:Ze}));return}let tt=Ze;if(rt.uid===x.D)tt=Ze.map($t=>({...$t,datasource:ut.getRef()}));else if(ut.uid===x.D){const $t=(0,r.groupBy)(Ze,Zt=>Zt.datasource?.uid),Ht=await Promise.all(Object.keys($t).map(async Zt=>{const tn=await(0,y.F)().get({uid:Zt});return await Le(rt,tn,$t[Zt])}));tt=(0,r.flatten)(Ht.filter(Zt=>Zt.length>0))}else{let $t=Ze;if(St!==void 0){const Ht=Ze.find(Zt=>Zt.refId===St);Ht&&($t=[Ht])}tt=await Le(rt,ut,$t)}let ft=await(0,C.Z8)(tt,rt.getRef());if(St!==void 0){tt.length===0&&(tt=[await(0,C.Xk)([],void 0,rt.getRef())]);const $t=Ze.findIndex(Zt=>Zt.refId===St),Ht={...ft[0],refId:Ze[$t].refId};ft=[...Ze],ft[$t]=Ht}return st(ue({exploreId:Ie,queries:ft})),ft};function X(Ie,Ze,ut){return async(rt,St)=>{const st=St().explore.panes[Ie],{queries:tt}=st,$t=(await Promise.all(tt.map(Ht=>ut({...Ht},Ze)))).map((Ht,Zt)=>(0,C.fR)(Ht,tt,Zt));rt(je({exploreId:Ie,queries:$t})),Ze.preventSubmit||rt(re({exploreId:Ie}))}}async function se(Ie,Ze,ut,rt,St,st){const tt=rt.meta.id,ft=(0,C._Q)(ut,tt,St);Ie((0,oe.fM)({exploreId:st,history:ft})),Ie((0,oe.WY)(rt.uid,rt.name,St));for(const $t in Ze.panes)await Ie((0,oe.TV)($t))}const re=(0,S.createAsyncThunk)("explore/runQueries",async({exploreId:Ie,preserveCache:Ze},{dispatch:ut,getState:rt})=>{ut((0,fe.b3)({exploreId:Ie}));const St=(0,q.L)(Ie);Ze!==!0&&ut(He(Ie));const st=rt().explore.panes[Ie],{datasourceInstance:tt,containerWidth:ft,isLive:$t,range:Ht,scanning:Zt,queryResponse:tn,querySubscription:on,refreshInterval:qt,absoluteRange:pn,cache:Cn,supplementaryQueries:Rt,correlationEditorHelperData:mt}=st,xt=rt().explore.correlationEditorDetails?.editorMode||!1,Ft=Object.keys(rt().explore.panes)[0]===Ie,zt=xt&&Ft,Jt=zt?await(0,y.F)().get():void 0,ln=xt&&!Ft&&mt!==void 0;let Pt,Gt;const Kt=st.queries.map(dn=>({...dn,datasource:dn.datasource||tt?.getRef()}));tt!=null&&se(ut,rt().explore,st.history,tt,Kt,Ie);const kt=(0,Te.M0)(Cn,pn);if(kt)Pt=(0,o.a)([(0,g.of)(kt),St]).pipe((0,d.z)(([dn,nn])=>Y(dn,tn,pn,qt,Kt,nn,zt,Jt))),Gt=Pt.subscribe(dn=>{ut(ze({exploreId:Ie,response:dn}))});else{if(!(0,C.z_)(Kt)||!tt)return;const dn=tt?.interval;(0,C.RZ)(on);const nn={minInterval:dn,maxDataPoints:ft,liveStreaming:$t};let mn={};ln&&mt!==void 0&&Object.entries(mt?.vars).forEach($n=>{mn[$n[0]]={value:$n[1]}});const Mn=(0,P.Z)(rt().user),Gn=(0,C.Zf)(Ie,Kt,nn,Ht,Zt,Mn,mn);if(ut(Qe({exploreId:Ie,loadingState:i.Gu.Loading})),Pt=(0,o.a)([(0,O.v7)(tt,Gn.request).pipe($t?(0,u.p)(500):m.y),St]).pipe((0,d.z)(([$n,Fn])=>Y($n,tn,pn,qt,Kt,Fn,zt,Jt))),Gt=Pt.subscribe({next($n){if($n.logsResult!==null&&$n.state===i.Gu.Done&&(0,s.ff)("grafana_explore_logs_result_displayed",{datasourceType:tt.type}),ut(ze({exploreId:Ie,response:$n})),rt().explore.panes[Ie].scanning)if($n.state===i.Gu.Done&&$n.series.length===0){const Fn=(0,D.e)(-1,rt().explore.panes[Ie].range);ut((0,fe.b3)({exploreId:Ie,absoluteRange:Fn})),ut(re({exploreId:Ie}))}else ut(lt({exploreId:Ie}))},error($n){ut((0,I.$l)((0,T.t_)("Query processing error",$n))),ut(Qe({exploreId:Ie,loadingState:i.Gu.Error})),console.error($n)},complete(){rt().explore.panes[Ie].queryResponse.state===i.Gu.Loading&&ut(Qe({exploreId:Ie,loadingState:i.Gu.Done}))}}),$t)for(const $n of ce.SY)ut(Ne({exploreId:Ie,type:$n})),ut(_e({exploreId:Ie,type:$n}));else ut(be({exploreId:Ie,datasourceInstance:tt,transaction:Gn,newQuerySource:Pt,supplementaryQueries:Rt,queries:Kt,absoluteRange:pn}))}ut(Oe({exploreId:Ie,querySubscription:Gt}))}),pe=async(Ie,Ze)=>{const ut=Ie.filter(St=>St.datasource?.uid!==x.D),rt=(0,r.groupBy)(ut,"datasource.uid");return await Promise.all(Object.values(rt).map(async St=>({datasource:await(0,y.F)().get(St[0].datasource,Ze),targets:St})))},be=(0,S.createAsyncThunk)("explore/handleSupplementaryQueries",async({datasourceInstance:Ie,exploreId:Ze,transaction:ut,newQuerySource:rt,supplementaryQueries:St,queries:st,absoluteRange:tt},{dispatch:ft})=>{let $t;Ie.meta.mixed?$t=await pe(ut.request.targets,ut.request.scopedVars):$t=[{datasource:Ie,targets:ut.request.targets}];for(const Ht of ce.SY){const Zt=(0,ce.Z9)($t,Ht,{...ut.request,requestId:`${ut.request.requestId}_${(0,r.snakeCase)(Ht)}`},rt);Zt?(ft(at({exploreId:Ze,type:Ht,dataProvider:Zt})),xe(St[Ht].data,st,tt)||(ft(_e({exploreId:Ze,type:Ht})),St[Ht].enabled&&ft(Xe(Ze,Ht)))):ft(Ne({exploreId:Ze,type:Ht}))}});function xe(Ie,Ze,ut){if(!Ie)return!1;const rt=(0,r.zipObject)((0,r.map)(Ze,"refId"),Ze),St=(0,r.mapValues)((0,r.groupBy)(Ie.data.map($t=>$t.meta?.custom?.sourceQuery),"refId"),r.head),st=Ie.data.every($t=>$t.meta?.custom?.logsVolumeType===c.o8.FullRange),tt=l()(rt,St),ft=Ie.data.every($t=>{const Ht=$t.meta?.custom?.absoluteRange;return Ht?Ht&&Ht.from<=ut.from&&ut.to<=Ht.to:!0});return st&&tt&&ft}function Pe(Ie,Ze){return(ut,rt)=>{const St=rt().explore.panes[Ie].queries,st=Ze.map((tt,ft)=>(0,C.fR)(tt,St,ft));ut(je({exploreId:Ie,queries:st})),ut(re({exploreId:Ie}))}}function we(Ie){return(Ze,ut)=>{Ze(ot({exploreId:Ie}));const rt=(0,D.e)(-1,ut().explore.panes[Ie].range);Ze((0,fe.b3)({exploreId:Ie,absoluteRange:rt})),Ze(re({exploreId:Ie}))}}function Fe(Ie){return(Ze,ut)=>{const rt=ut().explore.panes[Ie].queryResponse,St=ut().explore.panes[Ie].absoluteRange,st=(0,Te.M7)(St);rt.state===i.Gu.Done&&Ze(Ct({exploreId:Ie,cacheKey:st,queryResponse:rt}))}}function He(Ie){return(Ze,ut)=>{Ze(wt({exploreId:Ie}))}}function Xe(Ie,Ze){return(ut,rt)=>{const{supplementaryQueries:St}=rt().explore.panes[Ie],st=St[Ze].dataProvider;if(st){const tt=st.subscribe({next:ft=>{ut(et({exploreId:Ie,type:Ze,data:ft}))}});ut(Ke({exploreId:Ie,type:Ze,dataSubscription:tt}))}}}function dt(Ie,Ze,ut){return(rt,St)=>{rt(Ue({exploreId:Ie,enabled:Ze,type:ut})),(0,ce.B9)(Ze,ut),Ze&&rt(Xe(Ie,ut))}}const ct=(Ie,Ze)=>{if(he.match(Ze)){const{queries:ut}=Ie,{index:rt,query:St}=Ze.payload,st=[...ut.slice(0,rt+1),{...St},...ut.slice(rt+1)];return{...Ie,queries:st,queryKeys:(0,C.$$)(st)}}if(me.match(Ze)){const{queries:ut}=Ze.payload;return{...Ie,queries:ut}}if(ye.match(Ze))return(0,C.RZ)(Ie.querySubscription),{...Ie,queryResponse:{...Ie.queryResponse,state:i.Gu.Done}};if(je.match(Ze)){const{queries:ut}=Ze.payload;return{...Ie,queries:ut.slice(),queryKeys:(0,C.$$)(ut)}}if(Oe.match(Ze)){const{querySubscription:ut}=Ze.payload;return{...Ie,querySubscription:ut}}if(Ue.match(Ze)){const{enabled:ut,type:rt}=Ze.payload,{supplementaryQueries:St}=Ie,st=St[rt].dataSubscription;!ut&&st&&st.unsubscribe();const tt={...St,[rt]:{...St[rt],enabled:ut,data:void 0}};return{...Ie,supplementaryQueries:tt}}if(at.match(Ze)){const{dataProvider:ut,type:rt}=Ze.payload,{supplementaryQueries:St}=Ie,st=St[rt];st?.dataSubscription&&st.dataSubscription.unsubscribe();const tt={...St,[rt]:{...st,dataProvider:ut,dataSubscription:void 0}};return{...Ie,supplementaryQueries:tt}}if(Ne.match(Ze)){const{type:ut}=Ze.payload,{supplementaryQueries:rt}=Ie,St=rt[ut];St?.dataSubscription&&St.dataSubscription.unsubscribe();const st={...rt,[ut]:{...St,dataProvider:void 0,dataSubscription:void 0}};return{...Ie,supplementaryQueries:st}}if(_e.match(Ze)){const{type:ut}=Ze.payload,{supplementaryQueries:rt}=Ie,St={...rt,[ut]:{...rt[ut],data:void 0}};return{...Ie,supplementaryQueries:St}}if(Ke.match(Ze)){const{dataSubscription:ut,type:rt}=Ze.payload,{supplementaryQueries:St}=Ie,st={...St,[rt]:{...St[rt],dataSubscription:ut}};return{...Ie,supplementaryQueries:st}}if(et.match(Ze)){let{data:ut,type:rt}=Ze.payload;const{supplementaryQueries:St}=Ie,st={...St,[rt]:{...St[rt],data:ut}};return{...Ie,supplementaryQueries:st}}if(ze.match(Ze))return At(Ie,Ze);if(ue.match(Ze)){const{queries:ut}=Ze.payload;return{...Ie,queries:ut,queryKeys:(0,C.$$)(ut)}}if(Qe.match(Ze)){const{loadingState:ut}=Ze.payload;return{...Ie,queryResponse:{...Ie.queryResponse,state:ut}}}if(We.match(Ze)){const{isPaused:ut}=Ze.payload;return{...Ie,isPaused:ut}}if(ot.match(Ze))return{...Ie,scanning:!0};if(lt.match(Ze))return{...Ie,scanning:!1,scanRange:void 0};if(Ct.match(Ze)){const{cache:rt}=Ie,{queryResponse:St,cacheKey:st}=Ze.payload;let tt=[...rt];return tt.some($t=>$t.key===st)||(tt=[{key:st,value:St},...tt].slice(0,5)),{...Ie,cache:tt}}if(wt.match(Ze))return{...Ie,cache:[]};if(ke.match(Ze)){if(!Ie.logsResult)return{...Ie,clearedAtIndex:null};if(Ie.queryResponse.state===i.Gu.Loading)return{...Ie,clearedAtIndex:null,logsResult:{...Ie.logsResult,rows:[]}};const ut=Ie.clearedAtIndex?Ie.clearedAtIndex+Ie.logsResult.rows.length:Ie.logsResult.rows.length-1;return{...Ie,clearedAtIndex:ut,logsResult:{...Ie.logsResult,rows:[]}}}return Ie},At=(Ie,Ze)=>{const{response:ut}=Ze.payload,{request:rt,series:St,error:st,graphResult:tt,logsResult:ft,tableResult:$t,rawPrometheusResult:Ht,traceFrames:Zt,nodeGraphFrames:tn,flameGraphFrames:on,rawPrometheusFrames:qt,customFrames:pn}=ut;if(st){if(st.type===E.eA.Timeout||st.type===E.eA.Cancelled)return{...Ie};v.config.angularSupportEnabled&&Ie.datasourceInstance?.components?.QueryCtrl&&Ie.eventBridge.emit(p.Kh.dataError,st)}if(!rt)return{...Ie};if(v.config.angularSupportEnabled&&Ie.datasourceInstance?.components?.QueryCtrl){const Cn=St.map(Rt=>(0,h.Zr)(Rt));Ie.eventBridge.emit(p.Kh.dataReceived,Cn)}return{...Ie,queryResponse:ut,graphResult:tt,tableResult:$t,rawPrometheusResult:Ht,logsResult:Ie.isLive&&ft?{...ft,rows:(0,Te.bG)(Ie.clearedAtIndex,ft.rows)}:ft,showLogs:!!ft,showMetrics:!!tt,showTable:!!$t?.length,showTrace:!!Zt.length,showNodeGraph:!!tn.length,showRawPrometheus:!!qt.length,showFlameGraph:!!on.length,showCustom:!!pn?.length,clearedAtIndex:Ie.isLive?Ie.clearedAtIndex:null}}},99022:(J,R,e)=>{"use strict";e.d(R,{F9:()=>m,Ky:()=>a,M:()=>r,aM:()=>g,pd:()=>o,z7:()=>d});var n=e(38874);const a=u=>u.explore.panes,l=u=>u.explore,r=(0,n.P1)(a,Object.entries),o=(0,n.P1)(r,u=>u.length>1),g=u=>(0,n.P1)(a,i=>Object.keys(i)[0]===u),m=u=>(0,n.P1)(a,i=>i[u]),d=(0,n.P1)(l,u=>u.correlationEditorDetails)},21141:(J,R,e)=>{"use strict";e.d(R,{F9:()=>C,a1:()=>D,b3:()=>y,cD:()=>h,mG:()=>s,oW:()=>E,ok:()=>P,oz:()=>p,vG:()=>M});var n=e(77960),a=e(92403),l=e(10694),r=e(79059),o=e(82563),g=e(44951),m=e(56858),d=e(6278),u=e(20810),i=e(2190),f=e(60930),c=e(43759);const E=(0,n.PH)("explore/changeRange"),p=(0,n.PH)("explore/changeRefreshInterval"),h=x=>(S,I)=>{const{syncedTimes:T}=I().explore;T?Object.keys(I().explore.panes).forEach(O=>{S(y({...x,exploreId:O})),S((0,c.aA)({exploreId:O,preserveCache:!0}))}):(S(y({...x})),S((0,c.aA)({exploreId:x.exploreId,preserveCache:!0})))},y=x=>(S,I)=>{const{exploreId:T,absoluteRange:O,rawRange:A}=x,B=I().explore.panes[T],b=(0,i.Z)(I().user),W=(0,i.i)(I().user),{range:V}=B;let w=V.raw;O&&(w={from:(0,a.GY)(b,O.from),to:(0,a.GY)(b,O.to)}),A&&(w=A);const K=(0,g.OQ)(b,w,W),z={from:K.from.valueOf(),to:K.to.valueOf()};(0,d.$t)().init({timepicker:{},getTimezone:()=>b,timeRangeUpdated(G){},time:K.raw}),(0,r.J)().updateTimeRange(K),S(E({exploreId:T,range:K,absoluteRange:z}))};function s(x){return(S,I)=>{const T=I().explore.panes[x].range.raw;Object.keys(I().explore.panes).filter(A=>A!==x).forEach(A=>{S(h({exploreId:A,rawRange:T}))});const O=I().explore.syncedTimes;S((0,f.tl)({syncedTimes:!O}))}}function v(x){return(S,I)=>{const T=(0,i.Z)(I().user),O=(0,i.i)(I().user);Object.entries(I().explore.panes).forEach(([A,B])=>{const b=(0,g.OQ)(T,B.range.raw,O);x(A,B,b,S)})}}function C(){return v((x,S,I,T)=>{const O={from:I.from.valueOf(),to:I.to.valueOf()};T(h({exploreId:x,absoluteRange:O}))})}function D(x){return v((S,I,T,O)=>{const A=(0,m.e)(x,T);O(h({exploreId:S,absoluteRange:A}))})}function M(x){return v((S,I,T,O)=>{const A=(0,m.h)(T,x);O(h({exploreId:S,absoluteRange:A}))})}const P=(x,S)=>{if(p.match(S)){const{refreshInterval:I}=S.payload,T=o.dP.isLive(I),O=(0,g.Oy)(I),A=(0,u.j0)(x.logsResult,O);return o.dP.isLive(x.refreshInterval)&&!T&&(0,g.RZ)(x.querySubscription),{...x,refreshInterval:I,queryResponse:{...x.queryResponse,state:T?l.Gu.Streaming:l.Gu.Done},isLive:T,isPaused:T?!1:x.isPaused,logsResult:A}}if(E.match(S)){const{range:I,absoluteRange:T}=S.payload;return{...x,range:I,absoluteRange:T}}return x}},47203:(J,R,e)=>{"use strict";e.d(R,{FG:()=>p,M0:()=>C,M7:()=>v,UI:()=>c,bG:()=>x,dc:()=>M,e1:()=>S,lp:()=>y,r_:()=>s,rx:()=>D,t5:()=>h});var n=e(86832),a=e.n(n),l=e(10694),r=e(54554),o=e(77877),g=e(92403),m=e(24677),d=e(23062),u=e(44951),i=e(52436),f=e(86936);const c={from:"now-6h",to:"now"},E="grafana.explore.style.graph",p=I=>{d.Z.set(E,I)},h=I=>({containerWidth:0,datasourceInstance:null,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:c},absoluteRange:{from:null,to:null},scanning:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:y(),tableResult:null,graphResult:null,logsResult:null,clearedAtIndex:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,f.DK)(),panelsState:{},correlations:void 0,...I}),y=()=>({state:l.Gu.NotStarted,series:[],timeRange:(0,r.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],customFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function s(I,T){let O;try{O=await(0,i.ak)().get(T)}catch{O=await(0,i.ak)().get()}if(O.init)try{O.init()}catch(b){console.error(b)}const A=`grafana.explore.history.${O.meta?.id}`,B=d.Z.getObject(A,[]);return(0,u.ET)(I,O.uid),{history:B,instance:O}}function v(I){const T={from:I.from,to:I.to};return Object.entries(T).map(([A,B])=>`${encodeURIComponent(A)}=${encodeURIComponent(B.toString())}`).join("&")}function C(I,T){const O=v(T),A=I.findIndex(b=>b.key===O);return A>=0?I[A].value:void 0}function D(I,T){return{from:o.parse(I.from,!1,T),to:o.parse(I.to,!0,T),raw:I}}function M(I){let T=c,O={from:P(I.from),to:P(I.to)};return O.from!==null&&O.to!==null&&(T={from:O.from,to:O.to}),T}function P(I){if(I===null)return null;if((0,g.v9)(I))return I;if(typeof I!="string")return null;const T=I;if(T.indexOf("now")!==-1)return T;if(T.length===8)return(0,g.zh)(T,"YYYYMMDD");if(T.length===15)return(0,g.zh)(T,"YYYYMMDDTHHmmss");if(T.length===19)return(0,g.zh)(T,"YYYY-MM-DD HH:mm:ss");if(T.match(/^\d+$/)){const A=parseInt(T,10);return(0,g.zh)(A)}const O=(0,g.zh)(T);return O.isValid()?O:null}const x=(I,T)=>T?I?T.slice(I+1):T:[],S=(I,T)=>I===m.D?(0,n.uniq)(T.map(O=>O.datasource?.uid).filter(O=>!!O)):[I]},5989:(J,R,e)=>{"use strict";e.d(R,{T:()=>a,u:()=>l});var n=e(83502);const a=" ",l=r=>{const o={},g=[],m=r.fields.filter(i=>!["Time"].includes(i.name));let d=m.find(i=>i.name==="__name__")?.values??[];!d.length&&m.length&&m[0].values.length&&(d=Array(m[0].values.length).fill(""));const u=r.fields.filter(i=>!["__name__"].includes(i.name));return d.forEach(function(i,f){o[i]={};const c=o[i][f]??{};for(const E of u){const p=E.name;if(p!=="Time")if(typeof E?.display=="function"){const h=E?.display(E.values[f]);if(!isNaN(h.numeric))c[p]=h.numeric.toString(10);else{const y=(0,n.zc)(h);y?c[p]=y:p.includes("Value #")&&(c[p]=a)}}else console.warn("Field display method is missing!")}g.push({...c,__name__:i})}),g}},42512:(J,R,e)=>{"use strict";e.d(R,{qQ:()=>v,a_:()=>C,Rb:()=>D,lt:()=>x,u8:()=>M});var n=e(86832),a=e(39953),l=e(86127),r=e(69733),o=e(96083),g=e(24824),m=e(79059),d=e(72639),u=e(97125),i=e(49036),f=e.n(i),c=e(44951);const E=(I,T,O)=>{let A={},B={};if(I.type===r.sN.Regex&&I.expression){const b=new RegExp(I.expression,"gi"),V=(typeof T=="string"?T:(0,c.Xh)(T)).matchAll(b);for(const w of V)w.groups?B=w.groups:B[I.mapValue||O]=w[1]||w[0]}else I.type===r.sN.Logfmt&&(B=f().parse(T));return Object.keys(B).forEach(b=>{const W=typeof B[b]=="string"?B[b]:(0,c.Xh)(B[b]);A[b]={value:W}}),A};var p=e(84278);const y=[I=>!I.internal||u.contextSrv.hasAccessToExplore()],s="grafana_data_link_clicked",v=(I,T)=>A=>{const{field:B,dataLinkScopedVars:b,frame:W,link:V,linkModel:w}=A,{valueRowIndex:K}=A.config;if(!V.internal||K===void 0)return w;const z=C({field:B,rowIndex:K,splitOpenFn:I,range:T,vars:b,dataFrame:W,linksToProcess:[V]});return z.length?(0,n.first)(z):void 0},C=I=>{const{field:T,vars:O,splitOpenFn:A,range:B,rowIndex:b,dataFrame:W}=I,V={...O||{}};V.__value={value:{raw:T.values[b]},text:"Raw value"};let w;W&&(w=(0,l.z)({frame:W,rowIndex:b}),V.__data={value:{name:W.name,refId:W.refId,fields:w},text:"Data"},W.fields.forEach(z=>{w&&w[z.name]&&(V[z.name]={value:w[z.name]})}),V.__targetField={value:w[T.name]});const K=I.linksToProcess||T.config.links;return K?K.filter(Q=>y.every(j=>j(Q,V))).map(Q=>{if(Q.internal){let j={};Q.internal?.transformations&&Q.internal?.transformations.forEach(Z=>{let ae;Z.field?ae=W?.fields.find(q=>q.name===Z.field)?.values[b]:ae=T.values[b],j={...j,...E(Z,ae,T.name)}});const F={...V,...j},k=x(Q,F);let _=[];if(k.variables.length===0){const Z=T.name.toString();_.push({variableName:Z,value:"",match:""})}else _=k.variables;const Y=Z=>{(0,d.ff)(s,{origin:Q.origin||r.n1.Datasource,app:o.zj.Explore,internal:!0}),A?.(Z)};return k.allVariablesDefined?{...(0,g._)({link:Q,internalLink:Q.internal,scopedVars:F,range:B,field:T,onClickFn:I.splitOpenFn?ae=>Y(ae):void 0,replaceVariables:(0,m.J)().replace.bind((0,m.J)())}),variables:_}:void 0}else{const j=(k,_)=>(0,m.J)().replace(k,{..._,...V}),F=(0,p.Bq)().getDataLinkUIModel(Q,j,T);return F.title||(F.title=D(F.href)),F}}).filter(Q=>!!Q):[]};function D(I){I.indexOf("://")<0&&(I=`http://${I}`);let T;try{T=new URL(I).hostname}catch{T=I}return T}function M(I,T){return(0,a.useCallback)((O,A)=>O.fields.flatMap(B=>B.config?.links&&B.config?.links.length?C({field:B,rowIndex:A,range:I,dataFrame:O,splitOpenFn:T}):[]),[I,T])}const P=["__from","__to","__interval","__interval_ms","__org","__user","__range","__rate_interval","__timeFilter","timeFilter"];function x(I,T){let O=[];return(0,m.J)().replace.bind((0,m.J)())(S(I),T,void 0,O),O=(0,n.uniqBy)(O,"variableName"),{variables:O,allVariablesDefined:O.filter(B=>!P.includes(B.variableName)).every(B=>B.found)}}function S(I){let T="",O;for(O in I)typeof I[O]=="string"?T+=" "+I[O]:typeof I[O]=="object"&&(T+=" "+S(I[O]));return T}},44673:(J,R,e)=>{"use strict";e.d(R,{Z:()=>a});var n=e(78354);function a(l){const r=new Set(l.map(o=>o.refId).filter(Boolean));return r.size===l.length?l:(r.clear(),l.map(o=>{if(o.refId&&!r.has(o.refId))return r.add(o.refId),o;const g=(0,n.Hs)(l);return r.add(g),{...o,refId:g}}))}},86936:(J,R,e)=>{"use strict";e.d(R,{B9:()=>E,DK:()=>p,SY:()=>f,Z9:()=>s});var n=e(86832),a=e.n(n),l=e(36497),r=e(3195),o=e(38947),g=e(68040),m=e(69323),d=e(10694),u=e(23062),i=e(41891);const f=[m.v8.LogsVolume,m.v8.LogsSample],c=v=>`grafana.explore.logs.enable${v}`,E=(v,C)=>{u.Z.set(c(C),v?"true":"false")},p=()=>{let v={[m.v8.LogsVolume]:{enabled:!0},[m.v8.LogsSample]:{enabled:!1}};for(const C of f){if(C===m.v8.LogsSample)continue;u.Z.get(c(C))==="false"&&(v[C]={enabled:!1})}return v},h=(v,C,D)=>new l.y(M=>v.subscribe(P=>{if(P.logsResult&&P.logsResult.rows&&P.logsResult.visibleRange&&P.logsResult.bucketSize!==void 0&&P.state===d.Gu.Done){const x=P.logsResult.bucketSize,S=C.map(O=>O.refId),I=(0,n.groupBy)(P.logsResult.rows,"dataFrame.refId");let T=[];S.forEach(O=>{if(I[O]?.length){const A=(0,i.Nw)(I[O],x);T=[...T,...A];const B={logsVolumeType:m.o8.Limited,absoluteRange:P.logsResult?.visibleRange,datasourceName:D,sourceQuery:C.find(b=>b.refId===O)};M.next({data:T.map(b=>{const W=b.meta?.custom||{};return{...b,meta:{custom:{...W,...B}}}}),state:P.state})}}),M.complete()}})),y=(v,C,D,M)=>{if(v===m.v8.LogsVolume)return h(C,D,M)},s=(v,C,D,M)=>{const x=v.map(({datasource:S,targets:I},T)=>{const O=(0,n.cloneDeep)(D);return O.requestId=`${O.requestId||""}_${T}`,O.targets=I,(0,m.mN)(S,C)?S.getDataProvider(C,O):y(C,M,I,S.name)}).filter(d.fQ);if(x.length!==0)return x.length===1?x[0]:(0,r.T)(...x).pipe((0,g.R)((S,I)=>S.errors&&S.errors.length||I.state===d.Gu.NotStarted?S:I.state===d.Gu.Loading&&S.state===d.Gu.NotStarted?{...S,state:d.Gu.Loading}:I.state&&I.state!==d.Gu.Done?S:{...S,data:[...S.data,...I.data],state:d.Gu.Done},{data:[],state:d.Gu.NotStarted}),(0,o.E)())}},1464:(J,R,e)=>{"use strict";e.d(R,{mV:()=>P,bE:()=>M});var n=e(22605),a=e(84289),l=e(30670),r=e(92743),o=e(79059),g=e(26205),m=e(39953),d=e(69171),u=e(9558),i=e(40273),f=e(47970),c=e(56170),E=e(24753),p=e(87007),h=e(29409),y=e(96841);const s=15;function v(){const x=(0,m.useRef)({}),S=(0,m.useCallback)(T=>{switch(T){case h.Us.math:case h.Us.reduce:case h.Us.resample:case h.Us.threshold:return x.current[T];case h.Us.classic:return}},[]),I=(0,m.useCallback)((T,O)=>{switch(T){case h.Us.math:x.current.math=O;break;case h.Us.reduce:case h.Us.resample:case h.Us.resample:x.current.reduce=O,x.current.resample=O,x.current.threshold=O;break}},[]);return{getCachedExpression:S,setCachedExpression:I}}function C(x){const{query:S,queries:I,onRunQuery:T,onChange:O}=x,{getCachedExpression:A,setCachedExpression:B}=v();(0,m.useEffect)(()=>{B(S.type,S.expression)},[S.expression,S.type,B]);const b=(0,m.useCallback)(w=>{const K=A(w.value),z=(0,y.J)({...S,type:w.value});O({...z,expression:K??z.expression})},[S,O,A]),W=()=>{const w=I.filter(K=>S.refId!==K.refId).map(K=>({value:K.refId,label:K.refId}));switch(S.type){case h.Us.math:return m.createElement(f.Z,{onChange:O,query:S,labelWidth:s,onRunQuery:T});case h.Us.reduce:return m.createElement(c.v,{refIds:w,onChange:O,labelWidth:s,query:S});case h.Us.resample:return m.createElement(E.p,{query:S,labelWidth:s,onChange:O,refIds:w});case h.Us.classic:return m.createElement(i.I,{onChange:O,query:S,refIds:w});case h.Us.threshold:return m.createElement(p.M,{onChange:O,query:S,labelWidth:s,refIds:w})}},V=h.EJ.find(w=>w.value===S.type);return m.createElement("div",null,m.createElement(d._,{label:"Operation",labelWidth:s},m.createElement(u.Ph,{options:h.EJ,value:V,onChange:b,width:25})),W())}class D extends r.CK{constructor(S){super(S),this.instanceSettings=S}applyTemplateVariables(S,I){const T=(0,o.J)();return{...S,expression:T.replace(S.expression,I),window:T.replace(S.window,I)}}getCollapsedText(S){return`Expression: ${S.type}`}query(S){let I=S.targets.map(async O=>{const A=await(0,g.F)().get(O.datasource);return A.interpolateVariablesInQueries?A?.interpolateVariablesInQueries([O],S.scopedVars,S.filters)[0]:O});return(0,n.D)(Promise.all(I)).pipe((0,a.z)(O=>super.query({...S,targets:O})))}newQuery(S){return{refId:"--",datasource:r.hr,type:S?.type??h.Us.math,...S}}}const M={id:-100,uid:h.Yq,name:r.hr.name,type:r.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:l.zV.datasource,name:r.hr.type,id:r.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},P=new D(M);P.meta={id:r.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},P.components={QueryEditor:C}},40273:(J,R,e)=>{"use strict";e.d(R,{I:()=>C});var n=e(39953),a=e(74661),l=e(69171),r=e(4919),o=e(12190),g=e(96841),m=e(41407),d=e(27366),u=e(82803),i=e(5222),f=e(9558),c=e(38637),E=e(5026);const p=E.Z.reducerTypes.map(D=>({label:D.text,value:D.value})),h=E.Z.evalOperators.map(D=>({label:D.text,value:D.value})),y=E.Z.evalFunctions.map(D=>({label:D.text,value:D.value})),s=({condition:D,index:M,onChange:P,onRemoveCondition:x,refIds:S})=>{const I=(0,u.wW)(v),T=w=>{P({...D,operator:{type:w.value}})},O=w=>{P({...D,reducer:{type:w.value,params:[]}})},A=w=>{P({...D,query:{params:[w.value]}})},B=w=>{P({...D,evaluator:{params:D.evaluator.params,type:w.value}})},b=(w,K)=>{const z=parseFloat(w.currentTarget.value),G=[...D.evaluator.params];G[K]=z,P({...D,evaluator:{...D.evaluator,params:G}})},W=(0,m.css)`
    width: 60px;
  `,V=D.evaluator.type===E.$.IsWithinRange||D.evaluator.type===E.$.IsOutsideRange;return n.createElement(d.K,{direction:"row"},n.createElement("div",{style:{flex:1}},n.createElement(a.Z,null,M===0?n.createElement("div",{className:(0,m.cx)(I.button,W)},"WHEN"):n.createElement(i.d,{className:(0,m.cx)(I.buttonSelectText,W),options:h,onChange:T,value:h.find(w=>w.value===D.operator.type)}),n.createElement(f.Ph,{options:p,onChange:O,width:20,value:p.find(w=>w.value===D.reducer.type)}),n.createElement("div",{className:I.button},"OF"),n.createElement(f.Ph,{onChange:A,options:S,width:"auto",value:S.find(w=>w.value===D.query.params[0])})),n.createElement(a.Z,null,n.createElement(i.d,{className:I.buttonSelectText,options:y,onChange:B,value:y.find(w=>w.value===D.evaluator.type)}),V?n.createElement(n.Fragment,null,n.createElement(c.I,{type:"number",width:10,onChange:w=>b(w,0),value:D.evaluator.params[0]}),n.createElement("div",{className:I.button},"TO"),n.createElement(c.I,{type:"number",width:10,onChange:w=>b(w,1),value:D.evaluator.params[1]})):D.evaluator.type!==E.$.HasNoValue?n.createElement(c.I,{type:"number",width:10,onChange:w=>b(w,0),value:D.evaluator.params[0]}):null)),n.createElement(r.zx,{variant:"secondary",type:"button",onClick:()=>x(M)},n.createElement(o.J,{name:"trash-alt"})))},v=D=>{const M=(0,m.css)`
    color: ${D.colors.primary.text};
    font-size: ${D.typography.bodySmall.fontSize};
  `;return{buttonSelectText:M,button:(0,m.cx)((0,m.css)`
        display: flex;
        align-items: center;
        border-radius: ${D.shape.radius.default};
        font-weight: ${D.typography.fontWeightMedium};
        border: 1px solid ${D.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${D.spacing(1)};
        background-color: ${D.colors.background.canvas};
      `,M)}},C=({onChange:D,query:M,refIds:P})=>{const x=(T,O)=>{M.conditions&&D({...M,conditions:[...M.conditions.slice(0,O),T,...M.conditions.slice(O+1)]})},S=()=>{if(M.conditions){const T=M.conditions.at(-1)?.query?.params??[],O={...g.R,query:{params:T}};D({...M,conditions:M.conditions.length>0?[...M.conditions,O]:[O]})}},I=T=>{if(M.conditions){const O=M.conditions[T],A=M.conditions.filter(B=>B!==O).map((B,b)=>b===0?{...B,operator:{type:"when"}}:B);D({...M,conditions:A})}};return n.createElement("div",null,n.createElement(a.Z,null,n.createElement(l._,{label:"Conditions",labelWidth:14},n.createElement("div",null,M.conditions?.map((T,O)=>{if(T)return n.createElement(s,{key:O,index:O,condition:T,onChange:A=>x(A,O),onRemoveCondition:I,refIds:P})})))),n.createElement(r.zx,{variant:"secondary",type:"button",onClick:S},n.createElement(o.J,{name:"plus-circle"})))}},47970:(J,R,e)=>{"use strict";e.d(R,{Z:()=>f});var n=e(41407),a=e(39953),l=e(27366),r=e(82803),o=e(69171),g=e(99491),m=e(36884),d=e(12190),u=e(68421);const i="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",f=({labelWidth:h,onChange:y,query:s,onRunQuery:v})=>{const C=P=>{y({...s,expression:P.target.value})},D=(0,r.wW)(E),M=()=>{s.expression&&v()};return a.createElement(l.K,{direction:"row"},a.createElement(o._,{label:a.createElement(g.W,{width:"auto"},a.createElement(m.P,{fitContent:!0,content:a.createElement("div",{className:D.documentationContainer},a.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",a.createElement("br",null),"Example: ",a.createElement("code",null,"$A + $B")),a.createElement("header",{className:D.documentationHeader},"Available Math functions"),a.createElement("div",{className:D.documentationFunctions},a.createElement(c,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),a.createElement(c,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),a.createElement(c,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),a.createElement(c,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),a.createElement(c,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),a.createElement(c,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),a.createElement(c,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),a.createElement(c,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),a.createElement(c,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),a.createElement(c,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."}))),title:a.createElement(l.K,{gap:1,direction:"row"},a.createElement(d.J,{name:"book-open"})," Math operator"),footer:a.createElement("div",null,"See our additional documentation on"," ",a.createElement("a",{className:D.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},a.createElement(d.J,{size:"xs",name:"external-link-alt"})," Math expressions"),"."),closeButton:!0,placement:"bottom-start"},a.createElement("div",{className:D.info},"Expression ",a.createElement(d.J,{name:"info-circle"})))),labelWidth:h,grow:!0,shrink:!0},a.createElement(u.K,{value:s.expression,onChange:C,rows:1,placeholder:i,onBlur:M,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},c=({name:h,description:y})=>{const s=(0,r.wW)(p);return a.createElement(a.Fragment,null,a.createElement("span",{className:s.name},h),a.createElement("span",{className:s.description},y))},E=h=>({documentationHeader:(0,n.css)`
    font-size: ${h.typography.h5.fontSize};
    font-weight: ${h.typography.h5.fontWeight};
  `,documentationLink:(0,n.css)`
    color: ${h.colors.text.link};
  `,documentationContainer:(0,n.css)`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${h.spacing(2)};

    padding: ${h.spacing(1)} ${h.spacing(2)};
  `,documentationFunctions:(0,n.css)`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${h.spacing(2)};
  `,info:(0,n.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    cursor: pointer;
    gap: ${h.spacing(1)};
  `}),p=h=>({name:(0,n.css)`
    font-weight: ${h.typography.fontWeightBold};
  `,description:(0,n.css)`
    font-size: ${h.typography.bodySmall.fontSize};
    color: ${h.colors.text.disabled};
  `})},56170:(J,R,e)=>{"use strict";e.d(R,{v:()=>m});var n=e(39953),a=e(69171),l=e(38637),r=e(74661),o=e(9558),g=e(29409);const m=({labelWidth:d="auto",onChange:u,refIds:i,query:f})=>{const c=g.SQ.find(D=>D.value===f.reducer),E=D=>{u({...f,expression:D.value})},p=D=>{u({...f,reducer:D.value})},h=D=>{u({...f,settings:D})},y=D=>{let M;switch(D.value){case g.kN.ReplaceNonNumbers:let P=0;f.settings?.mode===g.kN.ReplaceNonNumbers&&(P=f.settings?.replaceWithValue??0),M={mode:g.kN.ReplaceNonNumbers,replaceWithValue:P};break;default:M={mode:D.value}}h(M)},s=D=>{const M=D.currentTarget.valueAsNumber;h({mode:g.kN.ReplaceNonNumbers,replaceWithValue:M??0})},v=f.settings?.mode??g.kN.Strict,C=()=>{if(v===g.kN.ReplaceNonNumbers)return n.createElement(a._,{label:"Replace With",labelWidth:d},n.createElement(l.I,{type:"number",width:10,onChange:s,value:f.settings?.replaceWithValue??0}))};return n.createElement(n.Fragment,null,n.createElement(r.Z,null,n.createElement(a._,{label:"Input",labelWidth:d},n.createElement(o.Ph,{onChange:E,options:i,value:f.expression,width:"auto"}))),n.createElement(r.Z,null,n.createElement(a._,{label:"Function",labelWidth:d},n.createElement(o.Ph,{options:g.SQ,value:c,onChange:p,width:20})),n.createElement(a._,{label:"Mode",labelWidth:d},n.createElement(o.Ph,{onChange:y,options:g.YM,value:v,width:25})),C()))}},24753:(J,R,e)=>{"use strict";e.d(R,{p:()=>m});var n=e(39953),a=e(74661),l=e(69171),r=e(9558),o=e(38637),g=e(29409);const m=({labelWidth:d="auto",onChange:u,refIds:i,query:f})=>{const c=g.Fr.find(v=>v.value===f.downsampler),E=g.r8.find(v=>v.value===f.upsampler),p=v=>{u({...f,window:v.target.value})},h=v=>{u({...f,expression:v.value})},y=v=>{u({...f,downsampler:v.value})},s=v=>{u({...f,upsampler:v.value})};return n.createElement(n.Fragment,null,n.createElement(a.Z,null,n.createElement(l._,{label:"Input",labelWidth:d},n.createElement(r.Ph,{onChange:h,options:i,value:f.expression,width:20}))),n.createElement(a.Z,null,n.createElement(l._,{label:"Resample to",labelWidth:d,tooltip:"10s, 1m, 30m, 1h"},n.createElement(o.I,{onChange:p,value:f.window,width:15})),n.createElement(l._,{label:"Downsample"},n.createElement(r.Ph,{options:g.Fr,value:c,onChange:y,width:25})),n.createElement(l._,{label:"Upsample"},n.createElement(r.Ph,{options:g.r8,value:E,onChange:s,width:25}))))}},87007:(J,R,e)=>{"use strict";e.d(R,{M:()=>c});var n=e(41407),a=e(39953),l=e(82803),r=e(74661),o=e(69171),g=e(9558),m=e(5222),d=e(38637),u=e(5026),i=e(29409);const f=u.$.IsAbove,c=({labelWidth:h,onChange:y,refIds:s,query:v})=>{const C=(0,l.wW)(p),D={type:"query",evaluator:{type:f,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},M=v.conditions?.length?v.conditions:[D],P=M[0],x=i.Mi.find(A=>A.value===M[0].evaluator?.type),S=A=>{y({...v,expression:A.value})},I=A=>{const B=A.value??f;y({...v,conditions:E(M,{type:B})})},T=(A,B)=>{const b=parseFloat(A.currentTarget.value),W=[...P.evaluator.params];W[B]=b,y({...v,conditions:E(M,{params:W})})},O=P.evaluator.type===u.$.IsWithinRange||P.evaluator.type===u.$.IsOutsideRange;return a.createElement(a.Fragment,null,a.createElement(r.Z,null,a.createElement(o._,{label:"Input",labelWidth:h},a.createElement(g.Ph,{onChange:S,options:s,value:v.expression,width:20}))),a.createElement(r.Z,null,a.createElement(m.d,{className:C.buttonSelectText,options:i.Mi,onChange:I,value:x}),O?a.createElement(a.Fragment,null,a.createElement(d.I,{type:"number",width:10,onChange:A=>T(A,0),defaultValue:P.evaluator.params[0]}),a.createElement("div",{className:C.button},"TO"),a.createElement(d.I,{type:"number",width:10,onChange:A=>T(A,1),defaultValue:P.evaluator.params[1]})):a.createElement(d.I,{type:"number",width:10,onChange:A=>T(A,0),defaultValue:M[0].evaluator.params[0]||0})))};function E(h,y){return[{...h[0],evaluator:{...h[0].evaluator,...y}}]}const p=h=>({buttonSelectText:(0,n.css)`
    color: ${h.colors.primary.text};
    font-size: ${h.typography.bodySmall.fontSize};
    text-transform: uppercase;
  `,button:(0,n.css)`
    height: 32px;

    color: ${h.colors.primary.text};
    font-size: ${h.typography.bodySmall.fontSize};
    text-transform: uppercase;

    display: flex;
    align-items: center;
    border-radius: ${h.shape.radius.default};
    font-weight: ${h.typography.fontWeightBold};
    border: 1px solid ${h.colors.border.medium};
    white-space: nowrap;
    padding: 0 ${h.spacing(1)};
    background-color: ${h.colors.background.primary};
  `})},29409:(J,R,e)=>{"use strict";e.d(R,{EJ:()=>g,Fr:()=>i,Mi:()=>c,SQ:()=>m,Us:()=>r,YM:()=>u,Yq:()=>l,hF:()=>o,kN:()=>d,r8:()=>f});var n=e(3181),a=e(5026);const l="__expr__";var r=(E=>(E.math="math",E.reduce="reduce",E.resample="resample",E.classic="classic_conditions",E.threshold="threshold",E))(r||{});const o=E=>{switch(E){case"math":return"Math";case"reduce":return"Reduce";case"resample":return"Resample";case"classic_conditions":return"Classic condition";case"threshold":return"Threshold"}},g=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition. Disables multi-dimensional alerts for this rule."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],m=[{value:n.gz.min,label:"Min",description:"Get the minimum value"},{value:n.gz.max,label:"Max",description:"Get the maximum value"},{value:n.gz.mean,label:"Mean",description:"Get the average value"},{value:n.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:n.gz.count,label:"Count",description:"Get the number of values"},{value:n.gz.last,label:"Last",description:"Get the last value"}];var d=(E=>(E.Strict="",E.ReplaceNonNumbers="replaceNN",E.DropNonNumbers="dropNN",E))(d||{});const u=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],i=[{value:n.gz.last,label:"Last",description:"Fill with the last value"},{value:n.gz.min,label:"Min",description:"Fill with the minimum value"},{value:n.gz.max,label:"Max",description:"Fill with the maximum value"},{value:n.gz.mean,label:"Mean",description:"Fill with the average value"},{value:n.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],f=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],c=[{value:a.$.IsAbove,label:"Is above"},{value:a.$.IsBelow,label:"Is below"},{value:a.$.IsWithinRange,label:"Is within range"},{value:a.$.IsOutsideRange,label:"Is outside range"}]},96841:(J,R,e)=>{"use strict";e.d(R,{J:()=>r,R:()=>o});var n=e(3181),a=e(5026),l=e(29409);const r=g=>{switch(g.type){case l.Us.reduce:g.reducer||(g.reducer=n.gz.mean);break;case l.Us.resample:g.downsampler||(g.downsampler=n.gz.mean),g.upsampler||(g.upsampler="fillna"),g.reducer=void 0;break;case l.Us.math:g.expression=void 0;break;case l.Us.classic:g.conditions||(g.conditions=[o]);break;default:g.reducer=void 0}return g},o={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:a.$.IsAbove}}},83600:(J,R,e)=>{"use strict";e.d(R,{Go:()=>c,OD:()=>f,Pb:()=>i,W7:()=>C});var n=e(57837),a=e(13601),l=e(4148),r=e(97316),o=e(90634),g=e(21308),m=e(20367),d=e(82744),u=e(347);function i(D){return async M=>{const P=await m.ae.getFolderByUid(D);return M((0,u.G3)(P)),M((0,r.RL)((0,d.B1)(P))),P}}function f(D){return async M=>{const P=await m.ae.put(`/api/folders/${D.uid}`,{title:D.title,version:D.version});M((0,r.$l)((0,o.AT)("Folder saved"))),M((0,u.G3)(P)),a.E1.push(n.u.stripBaseFromUrl(`${P.url}/settings`))}}function c(D){return async()=>{await m.ae.delete(`/api/folders/${D}?forceDeleteRules=false`),a.E1.push("/dashboards")}}function E(D){return async M=>{const P=await backendSrv.get(`/api/folders/${D}/permissions`);M(loadFolderPermissions(P))}}function p(D){return async M=>{try{await lastValueFrom(backendSrv.fetch({method:"GET",showErrorAlert:!1,showSuccessAlert:!1,url:`/api/folders/${D}/permissions`})),M(setCanViewFolderPermissions(!0))}catch(P){isFetchError(P)&&P.status!==403&&M(notifyApp(createWarningNotification("Error checking folder permissions",P.data?.message))),M(setCanViewFolderPermissions(!1))}}}function h(D){return{userId:D.userId,teamId:D.teamId,role:D.role,permission:D.permission}}function y(D,M){return async(P,x)=>{const S=x().folder,I=[];for(const T of S.permissions){if(T.inherited)continue;const O=h(T);D===T&&(O.permission=M),I.push(O)}await backendSrv.post(`/api/folders/${S.uid}/permissions`,{items:I}),await P(E(S.uid))}}function s(D){return async(M,P)=>{const x=P().folder,S=[];for(const I of x.permissions)I.inherited||I===D||S.push(h(I));await backendSrv.post(`/api/folders/${x.uid}/permissions`,{items:S}),await M(E(x.uid))}}function v(D){return async(M,P)=>{const x=P().folder,S=[];for(const I of x.permissions)I.inherited||S.push(h(I));S.push({userId:D.userId,teamId:D.teamId,role:D.role,permission:D.permission}),await backendSrv.post(`/api/folders/${x.uid}/permissions`,{items:S}),await M(E(x.uid))}}function C(D,M){return async P=>{const x=await(0,l.i)().post("/api/folders",{title:D,parentUid:M});await g.Vt.fetchUserPermissions(),P((0,r.$l)((0,o.AT)("Folder Created","OK"))),a.E1.push(n.u.stripBaseFromUrl(x.url))}}},82744:(J,R,e)=>{"use strict";e.d(R,{AZ:()=>u,B1:()=>E,Pr:()=>d,W3:()=>i,_l:()=>p,y3:()=>m});var n=e(32688),a=e(62679),l=e(97125),r=e(20305),o=e(23334),g=e(57721);const m="manage-folder",d=h=>`folder-dashboards-${h}`,u=h=>`folder-library-panels-${h}`,i=h=>`folder-alerting-${h}`,f=h=>`folder-permissions-${h}`,c=h=>`folder-settings-${h}`;function E(h,y=h.parents){const s={icon:"folder",id:m,subTitle:(0,r.L)("manage-folder"),url:h.url,text:h.title,children:[{active:!1,icon:"apps",id:d(h.uid),text:(0,a.t)("browse-dashboards.manage-folder-nav.dashboards","Dashboards"),url:h.url}]};if(y&&y.length>0){const v=y[y.length-1],C=y.slice(0,y.length-1);s.parentItem=E(v,C)}return s.children.push({active:!1,icon:"library-panel",id:u(h.uid),text:(0,a.t)("browse-dashboards.manage-folder-nav.panels","Panels"),url:`${h.url}/library-panels`}),l.contextSrv.hasPermission(g.AccessControlAction.AlertingRuleRead)&&n.config.unifiedAlertingEnabled&&s.children.push({active:!1,icon:"bell",id:i(h.uid),text:(0,a.t)("browse-dashboards.manage-folder-nav.alert-rules","Alert rules"),url:`${h.url}/alerting`}),(0,o.v)()||(h.canAdmin&&s.children.push({active:!1,icon:"lock",id:f(h.uid),text:(0,a.t)("browse-dashboards.manage-folder-nav.permissions","Permissions"),url:`${h.url}/permissions`}),h.canSave&&s.children.push({active:!1,icon:"cog",id:c(h.uid),text:(0,a.t)("browse-dashboards.manage-folder-nav.settings","Settings"),url:`${h.url}/settings`})),s}function p(h){const y=E({created:"",createdBy:"",hasAcl:!1,updated:"",updatedBy:"",id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return y.children[h].active=!0,{main:y,node:y.children[h]}}},347:(J,R,e)=>{"use strict";e.d(R,{G3:()=>d,Ss:()=>u,ZP:()=>c});var n=e(77960),a=e(17653),l=e(46347);const r={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},o=(E,p)=>({...E,...p.payload,hasChanged:!1}),g=(0,n.oM)({name:"folder",initialState:r,reducers:{loadFolder:o,setFolderTitle:(E,p)=>({...E,title:p.payload,hasChanged:p.payload.trim().length>0}),loadFolderPermissions:(E,p)=>({...E,permissions:(0,a.A)(p.payload)}),setCanViewFolderPermissions:(E,p)=>(E.canViewFolderPermissions=p.payload,E)},extraReducers:E=>{E.addMatcher(l.Hv.getFolder.matchFulfilled,o)}}),{loadFolderPermissions:m,loadFolder:d,setFolderTitle:u,setCanViewFolderPermissions:i}=g.actions,c={folder:g.reducer}},62198:(J,R,e)=>{"use strict";e.d(R,{Q:()=>u});var n=e(41407),a=e(39953),l=e(82803),r=e(9558),o=e(33155),g=e(64084),m=e(90348);const d=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:m.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],u=({value:f,onChange:c,context:E,item:p})=>{const h=i((0,l.l4)()),[y,s]=(0,a.useState)(),v=p.settings;(0,a.useEffect)(()=>{async function M(){const P=await(0,m.so)(f);s(P)}M()},[f,s]);const{current:C,options:D}=(0,a.useMemo)(()=>{let M=v?.options?[...v.options]:[...d],P=M?.find(x=>x.value===y?.path);return!P&&y&&(P={label:y.path,value:y.path},M.push(P)),{options:M,current:P}},[y,v?.options]);return a.createElement(a.Fragment,null,a.createElement(r.Ph,{value:C,options:D,onChange:M=>c(M.value),allowCustomValue:!0,formatCreateLabel:M=>`Load from URL: ${M}`}),y&&a.createElement(a.Fragment,null,y.error&&a.createElement(o.b,{title:y.error,severity:"warning"}),y.count&&a.createElement("div",{className:h.keys},a.createElement("b",null,"(",y.count,")"),y.examples(10).map(M=>a.createElement("span",{key:M},M,",")),y.count>10&&" ...")))},i=(0,g.B)(f=>({keys:(0,n.css)`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `}))},54519:(J,R,e)=>{"use strict";e.d(R,{C:()=>s});var n=e(89591),a=e(34547),l=e(62198),r=e(41407),o=e(39953),g=e(28888),m=e(82803),d=e(33155),u=e(12190),i=e(9558),f=e(12223),c=e(46303);const E=[{value:a.q1.Auto,label:"Auto",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:a.q1.Coords,label:"Coords",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:a.q1.Geohash,label:"Geohash",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:a.q1.Lookup,label:"Lookup",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],p="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",h=({value:v,onChange:C,context:D,item:M})=>{const[P,x]=(0,o.useState)();(0,o.useEffect)(()=>{M.settings?.source&&M.settings?.data?.length&&M.settings.data[0]&&(0,c.cJ)(M.settings.source).then(T=>{M.settings&&M.settings.data&&x((0,c.g6)(M.settings.data[0],T))})},[M.settings]);const S=(0,m.wW)(y),I=()=>{if(P){if(P.warning)return o.createElement(d.b,{title:P.warning,severity:"warning",buttonContent:o.createElement(u.J,{name:"question-circle",size:"xl"}),className:S.alert,onRemove:()=>{const T=window.open(p,"_blank","noopener,noreferrer");T&&(T.opener=null)}});if(v===a.q1.Auto&&P.description)return o.createElement("span",null,P.description)}return null};return o.createElement(o.Fragment,null,o.createElement(i.Ph,{options:E,value:v,onChange:T=>{C(T.value)}}),o.createElement(f.Lh,{className:S.hGroup},I()))},y=v=>({alert:(0,r.css)`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:(0,r.css)`
      & div {
        width: 100%;
      }
    `});function s(v,C,D,M,P){switch(D.addCustomEditor({id:"modeEditor",path:`${C}mode`,name:"Location Mode",editor:h,settings:{data:P,source:M}}),M?.mode){case a.q1.Coords:D.addFieldNamePicker({path:`${C}latitude`,name:"Latitude field",settings:{filter:x=>x.type===n.fS.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${C}longitude`,name:"Longitude field",settings:{filter:x=>x.type===n.fS.number,noFieldsMessage:"No numeric fields found"}});break;case a.q1.Geohash:D.addFieldNamePicker({path:`${C}geohash`,name:"Geohash field",settings:{filter:x=>x.type===n.fS.string,noFieldsMessage:"No strings fields found"}});break;case a.q1.Lookup:D.addFieldNamePicker({path:`${C}lookup`,name:"Lookup field",settings:{filter:x=>x.type===n.fS.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${C}gazetteer`,name:"Gazetteer",editor:l.Q})}}},82783:(J,R,e)=>{"use strict";e.d(R,{EK:()=>c,Fh:()=>E,ie:()=>f,uZ:()=>u,zS:()=>i});var n=e(36665),a=e(20955),l=e(39583),r=e(65268),o=e(89591),g=e(10154);function m(h){if(!h?.length)return;const y=[16,8,4,2,1],s="0123456789bcdefghjkmnpqrstuvwxyz";let v=!0;const C=[],D=[];C[0]=-90,C[1]=90,D[0]=-180,D[1]=180;let M;h.split("").forEach(S=>{M=s.indexOf(S),y.forEach(I=>{d(v?D:C,M,I),v=!v})});const P=(C[0]+C[1])/2;return[(D[0]+D[1])/2,P]}function d(h,y,s){y&s?h[0]=(h[0]+h[1])/2:h[1]=(h[0]+h[1])/2}function u(h){return{name:h.name??"Point",type:o.fS.geo,values:h.values.map(y=>{const s=m(y);if(s)return new n.Z((0,r.mi)(s))}),config:p}}function i(h,y){const s=new Array(h.values.length);for(let v=0;v<h.values.length;v++){const C=h.values[v],D=y.values[v];C===null||D===null||(s[v]=new n.Z((0,r.mi)([C,D])))}return{name:"Point",type:o.fS.geo,values:s,config:p}}function f(h,y){const s=y.values.length,v=new Array(s);for(let C=0;C<s;C++)v[C]=h.find(y.values[C])?.geometry();return{name:"Geometry",type:o.fS.geo,values:v,config:p}}function c(h,y){const s=h.values,v=y.values;if(!s||!v)throw"missing src/dest";if(s.length!==v.length)throw"Source and destination field lengths do not match";const C=h.values.length,D=new Array(C);for(let M=0;M<C;M++){const P=s[M],x=v[M];P&&x?D[M]=new a.Z([P,x]):P?D[M]=P:x&&(D[M]=x)}return{name:"Geometry",type:o.fS.geo,values:D,config:p}}function E(h,y){const s=h.values,v=y.values;if(!s||!v)throw"missing src/dest";if(s.length!==v.length)throw"Source and destination field lengths do not match";const C=h.values.length,D=new Array(C);for(let M=0;M<C;M++){const P=s[M],x=v[M];P&&x&&(D[M]=new l.Z([(0,g.Lb)(P),(0,g.Lb)(x)]))}return{name:"Geometry",type:o.fS.geo,values:D,config:p}}const p=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},90348:(J,R,e)=>{"use strict";e.d(R,{LI:()=>h,so:()=>y});var n=e(88300),a=e(36665),l=e(53305),r=e(89591),o=e(4148),g=e(37813);function m(s){const v=new g.Z().readFeatures(s,{featureProjection:"EPSG:3857"}),C=v.length,D=new Array(C).fill(null),M=[],P=new Map,x=O=>{let A=P.get(O);return A||(A={types:new Set,values:new Array(C).fill(null),count:0},M.push(O),P.set(O,A)),A},S=(...O)=>{for(const A of O)if(!P.has(A))return A;return"___"+O[0]},I={types:new Set,values:new Array(C).fill(null),count:0};for(let O=0;O<C;O++){const A=v[O];D[O]=A.getGeometry();const B=A.getId();B!=null&&(I.values[O]=B,I.types.add((0,l.DP)(B)),I.count++);for(const b of A.getKeys()){const W=A.get(b);if(W===D[O]||W==null)continue;const V=x(b);V.values[O]=W,V.types.add((0,l.DP)(W)),V.count++}}const T=[];if(I.count>0){const O=d(I);T.push({name:S("id","_id","__id"),type:O,values:I.values,config:{}})}T.push({name:S("geo","geometry"),type:r.fS.geo,values:D,config:{}});for(const O of M){const A=P.get(O);if(!A)continue;const B=d(A);T.push({name:O,type:B,values:A.values,config:{}})}return{fields:T,length:C}}function d(s){return s.count<1?r.fS.other:s.types.size>1?(s.values=s.values.map(v=>v!=null?`${v}`:v),r.fS.string):s.types.values().next().value}var u=e(82783),i=e(65268);function f(s,v){let C=0;const D=new Map;for(const M of v){const P=new a.Z((0,i.mi)([M.longitude,M.latitude])),x={point:()=>P,geometry:()=>P};if(M.name&&(D.set(M.name,x),D.set(M.name.toUpperCase(),x)),M.key&&(D.set(M.key,x),D.set(M.key.toUpperCase(),x)),M.keys)for(const S of M.keys)D.set(S,x),D.set(S.toUpperCase(),x);C++}return{path:s,find:M=>{let P=D.get(M);return!P&&typeof M=="string"&&(P=D.get(M.toUpperCase())),P},count:C,examples:M=>{const P=[];if(D.size<1)P.push("no values found");else for(const x of D.keys())if(P.push(x),P.length>=M)break;return P}}}function c(s,v){let C;if(Array.isArray(v)){const D=v[0];if(D.latitude&&D.longitude&&(D.key||D.keys))return f(s,v)}else Array.isArray(v?.features)&&v?.type==="FeatureCollection"&&(C=m(v));if(!C)try{C=(0,l.g0)(v)}catch(D){return{path:s,error:`${D}`,find:M=>{},examples:M=>[]}}return E(C,{path:s})}function E(s,v){const C=[];let D,M,P,x,S;for(const O of s.fields)if(O.type===r.fS.geo&&(D=O),!S&&O.type===r.fS.string&&(S=O),O.name){v.keys&&v.keys.includes(O.name)&&C.push(O);const A=O.name.toUpperCase();switch(A){case"LAT":case"LATITUTE":M=O;break;case"LON":case"LNG":case"LONG":case"LONGITUE":P=O;break;case"GEOHASH":x=O;break;case"ID":case"UID":case"KEY":case"CODE":v.keys||C.push(O);break;default:v.keys||(A.endsWith("_ID")||A.endsWith("_CODE"))&&C.push(O)}}!C.length&&S&&C.push(S);let I=!1;D?I=D.values[0]?.getType()==="Point":x?(D=(0,u.uZ)(x),I=!0):M&&P&&(D=(0,u.zS)(P,M),I=!0);const T=new Map;return C.forEach(O=>{O.values.forEach((A,B)=>{const b=`${A}`;T.set(b.toUpperCase(),B),T.set(b,B)})}),{path:v.path,find:O=>{const A=T.get(O);if(A!=null){const B=D?.values[A];return{frame:s,index:A,point:()=>!B||I?B:new a.Z((0,n.qg)(B.getExtent())),geometry:()=>B}}},examples:O=>{const A=[];for(let B of T.keys())if(A.push(B),A.length>O)break;return A},frame:()=>s,count:s.length}}const p={},h="public/gazetteer/countries.json";async function y(s){s||(s=h);let v=p[s];if(!v){try{const C=await(0,o.i)().get(s);v=c(s,C)}catch(C){console.warn("Error loading placename lookup",s,C),v={path:s,error:"Error loading URL",find:D=>{},examples:D=>[]}}p[s]=v}return v}},46303:(J,R,e)=>{"use strict";e.d(R,{cJ:()=>f,g6:()=>E});var n=e(69330),a=e(89591),l=e(36085),r=e(86981),o=e(34547),g=e(82783),m=e(90348);function d(p){return h=>{for(const y of h.fields)if(p(y,h,[]))return y}}function u(p){return h=>{for(const y of h.fields){if(p.has(y.name.toLowerCase()))return y;const s=(0,n.CZ)(y,h);if(p.has(s))return y}}}const i={mode:o.q1.Auto,geohash:u(new Set(["geohash"])),latitude:u(new Set(["latitude","lat"])),longitude:u(new Set(["longitude","lon","lng"])),h3:u(new Set(["h3"])),wkt:u(new Set(["wkt"])),lookup:u(new Set(["lookup"])),geo:p=>p.fields.find(h=>h.type===a.fS.geo)};async function f(p){const h={...i,mode:p?.mode??o.q1.Auto};switch(h.gazetteer=await(0,m.so)(p?.gazetteer),h.mode){case o.q1.Geohash:p?.geohash?h.geohash=d((0,l.sq)({id:r.mi.byName,options:p.geohash})):h.geohash=()=>{};break;case o.q1.Lookup:const y=p?.lookup?.length?(0,l.sq)({id:r.mi.byName,options:p.lookup}):(0,l.sq)({id:r.mi.byType,options:a.fS.string});h.lookup=d(y);break;case o.q1.Coords:p?.latitude?h.latitude=d((0,l.sq)({id:r.mi.byName,options:p.latitude})):h.latitude=()=>{},p?.longitude?h.longitude=d((0,l.sq)({id:r.mi.byName,options:p.longitude})):h.longitude=()=>{};break}return h}function c(p,h){const y={mode:h.mode??o.q1.Auto};if(y.mode===o.q1.Auto){if(y.geo=h.geo(p),y.geo)return y;if(y.latitude=h.latitude(p),y.longitude=h.longitude(p),y.latitude&&y.longitude)return y.mode=o.q1.Coords,y;if(y.geohash=h.geohash(p),y.geohash)return y.mode=o.q1.Geohash,y;if(y.lookup=h.lookup(p),y.lookup)return y.mode=o.q1.Lookup,y}switch(y.mode){case o.q1.Coords:y.latitude=h.latitude(p),y.longitude=h.longitude(p);break;case o.q1.Geohash:y.geohash=h.geohash(p);break;case o.q1.Lookup:y.lookup=h.lookup(p);break}return y}function E(p,h){const y=c(p,h);switch(y.mode){case o.q1.Auto:return y.geo?{field:y.geo}:{warning:"Unable to find location fields"};case o.q1.Coords:return y.latitude&&y.longitude?{field:(0,g.zS)(y.longitude,y.latitude),derived:!0,description:`${y.mode}: ${y.latitude.name}, ${y.longitude.name}`}:{warning:"Select latitude/longitude fields"};case o.q1.Geohash:return y.geohash?{field:(0,g.uZ)(y.geohash),derived:!0,description:`${y.mode}`}:{warning:"Select geohash field"};case o.q1.Lookup:return y.lookup?h.gazetteer?{field:(0,g.ie)(h.gazetteer,y.lookup),derived:!0,description:`${y.mode}: ${h.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},85465:(J,R,e)=>{"use strict";e.d(R,{Fc:()=>i,KO:()=>c,gb:()=>E,gv:()=>f});var n=e(22160),a=e.n(n),l=e(48069),r=e(7959),o=e(29710),g=e(7906),m=e(26923),d=e(94776),u=e(66820);function i(p,h){let y="";p.meta?.forEach(C=>{const D=`${C.label}: ${JSON.stringify(C.value)}
`;y=y+D}),y=y+`

`,p.rows.forEach(C=>{const D=(0,l.dq)(C.timeEpochMs,{defaultWithMS:!0})+"	"+C.entry+`
`;y=y+D});const s=new Blob([y],{type:"text/plain;charset=utf-8"}),v=`${h}-logs-${(0,l.dq)(new Date)}.txt`;a()(s,v)}function f(p,h,y,s=r.W.noop){const v=(0,o.MJ)([p],y),C=new Blob([String.fromCharCode(65279),v],{type:"text/csv;charset=utf-8"}),D=s!==r.W.noop?"-as-"+s.toLocaleLowerCase():"",M=`${h}-data${D}-${(0,l.dq)(new Date)}.csv`;a()(C,M)}function c(p,h){const y=new Blob([JSON.stringify(p)],{type:"application/json"}),s=`${h}-${(0,l.dq)(new Date)}.json`;a()(y,s)}function E(p,h){let y="otlp";switch(p.meta?.custom?.traceFormat){case"jaeger":{let s=(0,m.c6)(new g.v(p));c(s,h),y="jaeger";break}case"zipkin":{let s=(0,u.H)(new g.v(p));c(s,h),y="zipkin";break}case"otlp":default:{let s=(0,d.g9)(new g.v(p));c(s,h);break}}return y}},65531:(J,R,e)=>{"use strict";e.d(R,{GY:()=>g,MA:()=>o,nW:()=>r});var n=e(4148),a=e(21308),l=e(57721);const r=(0,l.createAsyncThunk)("users/fetchInvitees",async()=>a.Vt.hasPermission(l.AccessControlAction.OrgUsersAdd)?await(0,n.i)().get("/api/org/invites"):[]),o=(0,l.createAsyncThunk)("users/addInvitee",async(m,{dispatch:d})=>{await(0,n.i)().post("/api/org/invites",m),await d(r())}),g=(0,l.createAsyncThunk)("users/revokeInvite",async m=>(await(0,n.i)().patch(`/api/org/invites/${m}/revoke`,{}),m))},91969:(J,R,e)=>{"use strict";e.d(R,{ZP:()=>d,selectors:()=>r});var n=e(77960),a=e(65531);const l=(0,n.HF)({selectId:u=>u.code}),r=l.getSelectors(),o=l.getInitialState({status:"idle"}),d={invites:(0,n.oM)({name:"invites",initialState:o,reducers:{},extraReducers:u=>{u.addCase(a.nW.pending,i=>{i.status="loading"}).addCase(a.nW.fulfilled,(i,{payload:f})=>{l.setAll(i,f),i.status="succeeded"}).addCase(a.nW.rejected,i=>{i.status="failed"}).addCase(a.GY.fulfilled,(i,{payload:f})=>{l.removeOne(i,f),i.status="succeeded"})}}).reducer}},78288:(J,R,e)=>{"use strict";e.d(R,{T:()=>E,c:()=>p});var n=e(39953),a=e(48993),l=e(20653),r=e(4148),o=e(96227),g=e(38637),m=e(73075),d=e(4919),u=e(67979),i=e(62679),f=e(64840),c=e(38365);const E=({panel:h,initialFolderUid:y,onDismiss:s})=>{const[v,C]=(0,n.useState)(y),[D,M]=(0,n.useState)(h.title),[P,x]=(0,n.useState)(h.title),[S,I]=(0,n.useState)(!1);(0,n.useEffect)(()=>I(!0),[D]),(0,a.Z)(()=>x(D),350,[D]);const{saveLibraryPanel:T}=(0,c.E)(),O=(0,n.useCallback)(()=>{h.libraryPanel={uid:"",name:D},T(h,v).then(b=>{b instanceof Error||s()})},[h,D,v,s,T]),A=(0,l.Z)(async()=>{try{return!(await(0,f.jh)(D)).some(b=>b.folderUid===v)}catch(b){return(0,r.kW)(b)&&(b.isHandled=!0),!0}finally{I(!1)}},[P,v]),B=!A?.value&&A.value!==void 0&&D===P&&!S;return n.createElement(n.Fragment,null,n.createElement(o.g,{label:(0,i.t)("library-panel.add-modal.name","Library panel name"),invalid:B,error:B?(0,i.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},n.createElement(g.I,{id:"share-panel-library-panel-name-input",name:"name",value:D,onChange:b=>M(b.currentTarget.value)})),n.createElement(o.g,{label:(0,i.t)("library-panel.add-modal.folder","Save in folder"),description:(0,i.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},n.createElement(u.Fz,{onChange:({uid:b})=>C(b),initialFolderUid:y,inputId:"share-panel-library-panel-folder-picker"})),n.createElement(m.u.ButtonRow,null,n.createElement(d.zx,{variant:"secondary",onClick:s,fill:"outline"},n.createElement(i.cC,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),n.createElement(d.zx,{onClick:O,disabled:B},n.createElement(i.cC,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},p=({isOpen:h=!1,panel:y,initialFolderUid:s,...v})=>n.createElement(m.u,{title:"Create library panel",isOpen:h,onDismiss:v.onDismiss},n.createElement(E,{panel:y,initialFolderUid:s,onDismiss:v.onDismiss}))},46714:(J,R,e)=>{"use strict";e.d(R,{i:()=>l});var n=e(39953),a=e(32840);const l=({isOpen:r,onConfirm:o,onDismiss:g})=>n.createElement(a.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{o(),g()},onDismiss:g,isOpen:r})},33784:(J,R,e)=>{"use strict";e.d(R,{V:()=>n});function n(a){return!!a.libraryPanel?.uid}},64840:(J,R,e)=>{"use strict";e.d(R,{E8:()=>E,Ef:()=>c,Kq:()=>u,Mh:()=>m,Ob:()=>i,Pq:()=>g,UO:()=>f,jh:()=>d});var n=e(31312),a=e(61606),l=e(75397),r=e(20367),o=e(84796);async function g({searchString:p="",perPage:h=100,page:y=1,excludeUid:s="",sortDirection:v="",typeFilter:C=[],folderFilterUIDs:D=[]}={}){const M=new URLSearchParams;M.append("searchString",p),M.append("sortDirection",v),M.append("typeFilter",C.join(",")),M.append("folderFilterUIDs",D.join(",")),M.append("excludeUid",s),M.append("perPage",h.toString(10)),M.append("page",y.toString(10)),M.append("kind",o.V.Panel.toString(10));const{result:P}=await(0,r.i)().get(`/api/library-elements?${M.toString()}`);return P}async function m(p,h=!1){const y=await(0,n.n)((0,r.i)().fetch({method:"GET",url:`/api/library-elements/${p}`,showSuccessAlert:!h,showErrorAlert:!h})),{result:s}=y.data,v=new l.f({...a.Ql,schemaVersion:35,panels:[s.model]}),{scopedVars:C,...D}=v.panels[0].getSaveModel();return v.destroy(),{...s,model:D}}async function d(p){const{result:h}=await(0,r.i)().get(`/api/library-elements/name/${p}`);return h}async function u(p,h){const{result:y}=await(0,r.i)().post("/api/library-elements",{folderUid:h,name:p.libraryPanel.name,model:p,kind:o.V.Panel});return y}async function i(p){const{libraryPanel:h,...y}=p,{uid:s,name:v,version:C,folderUid:D}=h,M=o.V.Panel,{result:P}=await(0,r.i)().patch(`/api/library-elements/${s}`,{folderUid:D,name:v,model:y,version:C,kind:M});return P}function f(p){return(0,r.i)().delete(`/api/library-elements/${p}`)}async function c(p){const{result:h}=await(0,r.i)().get(`/api/library-elements/${p}/connections`);return h}async function E(p){const h=await c(p);return h.length===0?[]:await(0,r.i)().search({dashboardUIDs:h.map(s=>s.connectionUid)})}},84796:(J,R,e)=>{"use strict";e.d(R,{V:()=>n});var n=(l=>(l[l.Panel=1]="Panel",l))(n||{}),a=(l=>(l[l.Dashboard=1]="Dashboard",l))(a||{})},38365:(J,R,e)=>{"use strict";e.d(R,{E:()=>i});var n=e(95681),a=e(4148),l=e(90634),r=e(62679),o=e(64840);async function g(f,c){const E=m(f),p=await u(E,c);return d(f,p),p}function m(f){let{scopedVars:c,...E}=f.getSaveModel();return E={libraryPanel:{name:f.title,uid:void 0},...E},E}function d(f,c){f.restoreModel({...c.model,configRev:0,libraryPanel:c,title:f.title}),f.hasSavedPanelEditChange=!0,f.refresh()}function u(f,c){return f.libraryPanel?f.libraryPanel&&f.libraryPanel.uid===""?(0,o.Kq)(f,c):(0,o.Ob)(f):Promise.reject()}const i=()=>{const f=(0,l.iG)(),[c,E]=(0,n.default)(async(p,h)=>{try{const y=await g(p,h);return f.success((0,r.t)("library-panels.save.success","Library panel saved")),y}catch(y){throw(0,a.kW)(y)&&(y.isHandled=!0,f.error((0,r.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:y.message??y.data.message}))),y}},[]);return{state:c,saveLibraryPanel:E}}},3654:(J,R,e)=>{"use strict";e.d(R,{H:()=>D});var n=e(34032),a=e(48614),l=e(71519),r=e(16843),o=e(13601),g=e(21308),m=e(73431),d=e(97433),u=e(41407),i=e(39953),f=e(82803),c=e(73075),E=e(4919),p=e(64084),h=(M=>(M.Saved="saved",M.EditingStarted="editing-started",M.EditingCanceled="editing-cancelled",M.Deleted="deleted",M))(h||{});function y({onDismiss:M,event:P}){const x=(0,f.wW)(s),S=()=>{if(P?.action===h.Deleted){o.E1.push("/");return}D.reloadPage(),M()};return i.createElement(c.u,{isOpen:!0,title:"Dashboard changed",icon:"copy",onDismiss:M,onClickBackdrop:()=>{},className:x.modal},i.createElement("div",{className:x.description},"The dashboad has been updated by another session. Do you want to continue editing or discard your local changes?"),i.createElement(c.u.ButtonRow,null,i.createElement(E.zx,{onClick:M,variant:"secondary",fill:"outline"},"Continue editing"),i.createElement(E.zx,{onClick:S,variant:"destructive"},"Discard local changes")))}const s=(0,p.B)(M=>({modal:(0,u.css)({width:"600px"}),description:(0,u.css)({color:M.colors.text.secondary,paddingBottom:M.spacing(1)})})),v=(0,n.Z)();class C{constructor(){this.editing=!1,this.observer={next:P=>{if((0,a.se)(P)&&this.editing&&P.state===a.yS.Connected&&this.sendEditingState(),(0,a.RL)(P)){if(P.message.sessionId===v)return;const{action:x}=P.message;switch(x){case h.EditingStarted:case h.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const S=(0,d.h4)().getCurrent();if(S?.uid!==P.message.uid){console.log("dashboard event for different dashboard?",P,S);return}const I=this.editing||S.hasUnsavedChanges();if(x===h.Saved)I?g.h$.publish(new m.Dn({component:y,props:{event:P}})):(g.h$.emit(l.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(I&&x===h.EditingStarted&&!this.hasSeenNotice){const T=P.message,O=this.getRecentEditingEvent();(!O||O.message!==T.message)&&(this.hasSeenNotice=!0,g.h$.emit(l.SI.alertWarning,["Another session is editing this dashboard",T.message])),this.lastEditing=T}return}}}}}}setEditingState(P){const x=this.editing=P;this.editing=P,this.hasSeenNotice=!1,x&&g.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:P,uid:x}=this;P&&x&&(0,r.gj)().publish(P,{sessionId:v,uid:x,action:this.editing?h.EditingStarted:h.EditingCanceled,timestamp:Date.now()})}watch(P){const x=(0,r.gj)();x&&P!==this.uid&&(this.channel={scope:a.z.Grafana,namespace:"dashboard",path:`uid/${P}`},this.leave(),P&&(this.subscription=x.getStream(this.channel).subscribe(this.observer)),this.uid=P)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){o.E1.reload()}}const D=new C},14191:(J,R,e)=>{"use strict";e.d(R,{A1:()=>l,g0:()=>a,iL:()=>g});var n=e(53305),a=(m=>(m.NewValuesSameSchema="NewValuesSameSchema",m.FullFrame="FullFrame",m))(a||{});const l=(m,d)=>"type"in m&&m.type===d,r=Object.values(a),o=m=>"type"in m&&r.includes(m.type),g=m=>(0,n.aY)(m)&&"packetInfo"in m},62577:(J,R,e)=>{"use strict";e.d(R,{j:()=>o});var n=e(41407),a=e(39953),l=e(82803);const r=["level","lvl","filename"],o=({labels:m})=>{const d=(0,l.wW)(g),u=Object.keys(m).filter(i=>!i.startsWith("_")&&!r.includes(i));return u.length===0?a.createElement("span",{className:(0,n.cx)([d.logsLabels])},a.createElement("span",{className:(0,n.cx)([d.logsLabel])},"(no unique labels)")):a.createElement("span",{className:(0,n.cx)([d.logsLabels])},u.sort().map(i=>{const f=m[i];if(!f)return;const c=`${i}: ${f}`;return a.createElement("span",{key:i,className:(0,n.cx)([d.logsLabel])},a.createElement("span",{className:(0,n.cx)([d.logsLabelValue]),title:c},f))}))},g=m=>({logsLabels:(0,n.css)`
      display: flex;
      flex-wrap: wrap;
      font-size: ${m.typography.size.xs};
    `,logsLabel:(0,n.css)`
      label: logs-label;
      display: flex;
      padding: ${m.spacing(0,.25)};
      background-color: ${m.colors.background.secondary};
      border-radius: ${m.shape.radius.default};
      margin: ${m.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:(0,n.css)`
      label: logs-label__value;
      display: inline-block;
      max-width: ${m.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},64128:(J,R,e)=>{"use strict";e.d(R,{Q:()=>u});var n=e(48996),a=e(39953),l=e(90135),r=e.n(l),o=e(68495),g=e(82803);function m(i,f){return f.split(/;\s*/).reduce((c,E)=>{if(E==="color:rgba(0,0,0,0.5)")return{color:i.colors.text.secondary};const p=E.match(/([^:\s]+)\s*:\s*(.+)/);if(p&&p[1]&&p[2]){const h=p[1].replace(/-([a-z])/g,(y,s)=>s.toUpperCase());c[h]=p[2]}return c},{})}class d extends a.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(f,c){return f.value===c.prevValue?null:{chunks:n.ZP.parse(f.value).spans.map(p=>p.css?{style:m(f.theme,p.css),text:p.text}:{text:p.text}),prevValue:f.value}}render(){const{chunks:f}=this.state;return f.map((c,E)=>{const p=this.props.highlight?.searchWords?a.createElement(r(),{key:E,textToHighlight:c.text,searchWords:this.props.highlight.searchWords,findChunks:o.Xt,highlightClassName:this.props.highlight.highlightClassName}):c.text;return c.style?a.createElement("span",{key:E,style:c.style,"data-testid":"ansiLogLine"},p):p})}}const u=(0,g.HE)(d);u.displayName="LogMessageAnsi"},56781:(J,R,e)=>{"use strict";e.d(R,{t:()=>r});var n=e(39953),a=e(68497),l=e(36210);const r=n.memo(({logText:o,onOpenContext:g,onPermalinkClick:m,onPinLine:d,onUnpinLine:u,pinned:i,row:f,showContextToggle:c,styles:E,mouseIsOver:p,onBlur:h})=>{const y=c?c(f):!1,s=(0,n.useCallback)(M=>{M.stopPropagation()},[]),v=(0,n.useCallback)(M=>{M.stopPropagation(),g(f)},[g,f]),C=(0,n.useCallback)(M=>{!M.currentTarget.contains(M.relatedTarget)&&h&&h()},[h]),D=(0,n.useCallback)(()=>o,[o]);return n.createElement("span",{className:`log-row-menu ${E.rowMenu}`,onClick:s,onBlur:C},i&&!p&&n.createElement(a.h,{className:E.unPinButton,size:"md",name:"gf-pin",onClick:()=>u&&u(f),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),p&&n.createElement(n.Fragment,null,y&&n.createElement(a.h,{size:"md",name:"gf-show-context",onClick:v,tooltip:"Show context",tooltipPlacement:"top","aria-label":"Show context",tabIndex:0}),n.createElement(l.m,{className:E.copyLogButton,icon:"copy",variant:"secondary",fill:"text",size:"md",getText:D,tooltip:"Copy to clipboard",tooltipPlacement:"top",tabIndex:0}),i&&u&&n.createElement(a.h,{className:E.unPinButton,size:"md",name:"gf-pin",onClick:()=>u&&u(f),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),!i&&d&&n.createElement(a.h,{className:E.unPinButton,size:"md",name:"gf-pin",onClick:()=>d&&d(f),tooltip:"Pin line",tooltipPlacement:"top","aria-label":"Pin line",tabIndex:0}),m&&f.rowId!==void 0&&f.uid&&n.createElement(a.h,{tooltip:"Copy shortlink","aria-label":"Copy shortlink",tooltipPlacement:"top",size:"md",name:"share-alt",onClick:()=>m(f),tabIndex:0})))});r.displayName="LogRowMenuCell"},81084:(J,R,e)=>{"use strict";e.d(R,{n:()=>m,r:()=>i});var n=e(39953),a=e(90135),l=e.n(a),r=e(68495),o=e(64128),g=e(56781);const m=1e5,d=({hasAnsi:f,entry:c,highlights:E,styles:p})=>{const h=E&&E.length>0&&E[0]&&E[0].length>0&&c.length<m,y=E??[];if(f){const s=h?{searchWords:y,highlightClassName:p.logsRowMatchHighLight}:void 0;return n.createElement(o.Q,{value:c,highlight:s})}else if(h)return n.createElement(l(),{textToHighlight:c,searchWords:y,findChunks:r.Xt,highlightClassName:p.logsRowMatchHighLight});return n.createElement(n.Fragment,null,c)},u=(f,c)=>{if(c)try{return JSON.stringify(JSON.parse(f),void 0,2)}catch{return f}return f},i=n.memo(f=>{const{row:c,wrapLogMessage:E,prettifyLogMessage:p,showContextToggle:h,styles:y,onOpenContext:s,onPermalinkClick:v,onUnpinLine:C,onPinLine:D,pinned:M,mouseIsOver:P,onBlur:x}=f,{hasAnsi:S,raw:I}=c,T=(0,n.useMemo)(()=>u(I,p),[I,p]),O=(0,n.useMemo)(()=>P||M,[P,M]);return n.createElement(n.Fragment,null,n.createElement("td",{className:y.logsRowMessage},n.createElement("div",{className:E?y.positionRelative:y.horizontalScroll},n.createElement("button",{className:`${y.logLine} ${y.positionRelative}`},n.createElement(d,{hasAnsi:S,entry:T,highlights:c.searchWords,styles:y})))),n.createElement("td",{className:`log-row-menu-cell ${y.logRowMenuCell}`},O&&n.createElement(g.t,{logText:T,row:c,showContextToggle:h,onOpenContext:s,onPermalinkClick:v,onPinLine:D,onUnpinLine:C,pinned:M,styles:y,mouseIsOver:P,onBlur:x})))});i.displayName="LogRowMessage"},83617:(J,R,e)=>{"use strict";e.d(R,{w:()=>_});var n=e(41407),a=e(16360),l=e(39953),r=e(34547),o=e(82803);class g{constructor(){this.seen=new Set,this.count=0}getKey(Z){this.count+=1;const ae=`k_${Z}`;return this.seen.has(ae)?`i_${this.count}`:(this.seen.add(ae),ae)}}var m=e(20810),d=e(86832),u=e(48069),i=e(72639),f=e(69865),c=e(12190),E=e(32688),p=e(36210),h=e(68497),y=e(39960),s=e(64084);const v=Y=>({logsStatsRow:(0,n.css)`
    label: logs-stats-row;
    margin: ${parseInt(Y.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:(0,n.css)`
    label: logs-stats-row--active;
    color: ${Y.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:(0,n.css)`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:(0,n.css)`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:(0,n.css)`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${Y.spacing(.75)};
  `,logsStatsRowPercent:(0,n.css)`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${Y.spacing(.75)};
    width: ${Y.spacing(4.5)};
  `,logsStatsRowBar:(0,n.css)`
    label: logs-stats-row__bar;
    height: ${Y.spacing(.5)};
    overflow: hidden;
    background: ${Y.colors.text.disabled};
  `,logsStatsRowInnerBar:(0,n.css)`
    label: logs-stats-row__innerbar;
    height: ${Y.spacing(.5)};
    overflow: hidden;
    background: ${Y.colors.primary.main};
  `}),C=({active:Y,count:Z,proportion:ae,value:ce})=>{const q=(0,o.wW)(v),De=`${Math.round(ae*100)}%`,oe={width:De},te=Y?(0,n.cx)([q.logsStatsRow,q.logsStatsRowActive]):(0,n.cx)([q.logsStatsRow]);return l.createElement("div",{className:te},l.createElement("div",{className:(0,n.cx)([q.logsStatsRowLabel])},l.createElement("div",{className:(0,n.cx)([q.logsStatsRowValue]),title:ce},ce),l.createElement("div",{className:(0,n.cx)([q.logsStatsRowCount])},Z),l.createElement("div",{className:(0,n.cx)([q.logsStatsRowPercent])},De)),l.createElement("div",{className:(0,n.cx)([q.logsStatsRowBar])},l.createElement("div",{className:(0,n.cx)([q.logsStatsRowInnerBar]),style:oe})))};C.displayName="LogLabelStatsRow";const D=5,M=(0,s.B)(Y=>({logsStats:(0,n.css)`
      label: logs-stats;
      background: inherit;
      color: ${Y.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:(0,n.css)`
      label: logs-stats__header;
      border-bottom: 1px solid ${Y.colors.border.medium};
      display: flex;
    `,logsStatsTitle:(0,n.css)`
      label: logs-stats__title;
      font-weight: ${Y.typography.fontWeightMedium};
      padding-right: ${Y.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:(0,n.css)`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:(0,n.css)`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class P extends l.PureComponent{render(){const{label:Z,rowCount:ae,stats:ce,value:q,theme:De,isLabel:oe}=this.props,te=M(De),fe=ce.slice(0,D);let Te=fe.find(Ue=>Ue.value===q),ge=ce.slice(D);const he=!Te;he&&(Te=ge.find(Ue=>Ue.value===q),ge=ge.filter(Ue=>Ue.value!==q));const me=ge.reduce((Ue,at)=>Ue+at.count,0),ue=fe.reduce((Ue,at)=>Ue+at.count,0)+me,Oe=me/ue;return l.createElement("div",{className:te.logsStats,"data-testid":"logLabelStats"},l.createElement("div",{className:te.logsStatsHeader},l.createElement("div",{className:te.logsStatsTitle},Z,": ",ue," of ",ae," rows have that ",oe?"label":"field")),l.createElement("div",{className:te.logsStatsBody},fe.map(Ue=>l.createElement(C,{key:Ue.value,...Ue,active:Ue.value===q})),he&&Te&&l.createElement(C,{key:Te.value,...Te,active:!0}),me>0&&l.createElement(C,{key:"__OTHERS__",count:me,value:"Other",proportion:Oe})))}}const x=(0,o.HE)(P);x.displayName="LogLabelStats";var S=e(6275);const I=(0,a.Z)(Y=>({wordBreakAll:(0,n.css)`
      label: wordBreakAll;
      word-break: break-all;
    `,copyButton:(0,n.css)`
      & > button {
        color: ${Y.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: ${Y.shape.radius.circle};
        height: ${Y.spacing(Y.components.height.sm)};
        width: ${Y.spacing(Y.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${Y.colors.success.main};
          }
        }
      }
    `,adjoiningLinkButton:(0,n.css)`
      margin-left: ${Y.spacing(1)};
    `,wrapLine:(0,n.css)`
      label: wrapLine;
      white-space: pre-wrap;
    `,logDetailsStats:(0,n.css)`
      padding: 0 ${Y.spacing(1)};
    `,logDetailsValue:(0,n.css)`
      display: flex;
      align-items: center;
      line-height: 22px;

      .log-details-value-copy {
        visibility: hidden;
      }
      &:hover {
        .log-details-value-copy {
          visibility: visible;
        }
      }
    `,buttonRow:(0,n.css)`
      display: flex;
      flex-direction: row;
      gap: ${Y.spacing(.5)};
      margin-left: ${Y.spacing(.5)};
    `}));class T extends l.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:Z,parsedKeys:ae,row:ce}=this.props;Z&&Z(ae[0]),(0,i.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ce.datasourceType,logRowUid:ce.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:Z,parsedKeys:ae,row:ce}=this.props;Z&&Z(ae[0]),(0,i.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ce.datasourceType,logRowUid:ce.uid,type:"disable"})},this.isFilterLabelActive=async()=>{const{isFilterLabelActive:Z,parsedKeys:ae,parsedValues:ce,row:q}=this.props;return Z?await Z(ae[0],ce[0],q.dataFrame?.refId):!1},this.filterLabel=()=>{const{onClickFilterLabel:Z,parsedKeys:ae,parsedValues:ce,row:q}=this.props;Z&&Z(ae[0],ce[0],q.dataFrame?.refId),(0,i.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:q.datasourceType,filterType:"include",logRowUid:q.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:Z,parsedKeys:ae,parsedValues:ce,row:q}=this.props;Z&&Z(ae[0],ce[0],q.dataFrame?.refId),(0,i.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:q.datasourceType,filterType:"exclude",logRowUid:q.uid})},this.updateStats=()=>{const{getStats:Z}=this.props,ae=Z(),ce=ae?ae.reduce((q,De)=>q+De.count,0):0;(!(0,d.isEqual)(this.state.fieldStats,ae)||ce!==this.state.fieldCount)&&this.setState({fieldStats:ae,fieldCount:ce})},this.showStats=()=>{const{isLabel:Z,row:ae,app:ce}=this.props,{showFieldsStats:q}=this.state;q||this.updateStats(),this.toggleFieldsStats(),(0,i.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:ae.datasourceType,fieldType:Z?"label":"detectedField",type:q?"close":"open",logRowUid:ae.uid,app:ce})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(Z=>({showFieldsStats:!Z.showFieldsStats}))}generateClipboardButton(Z){const{theme:ae}=this.props,ce=I(ae);return l.createElement("div",{className:`log-details-value-copy ${ce.copyButton}`},l.createElement(p.m,{getText:()=>Z,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"}))}generateMultiVal(Z,ae){return l.createElement("table",null,l.createElement("tbody",null,Z?.map((ce,q)=>l.createElement("tr",{key:`${ce}-${q}`},l.createElement("td",null,ce,ae&&ce!==""&&this.generateClipboardButton(ce))))))}render(){const{theme:Z,parsedKeys:ae,parsedValues:ce,isLabel:q,links:De,displayedFields:oe,wrapLogMessage:te,onClickFilterLabel:fe,onClickFilterOutLabel:Te,disableActions:ge,row:he}=this.props,{showFieldsStats:me,fieldStats:ye,fieldCount:ue}=this.state,Oe=I(Z),Ue=(0,S.h)(Z),at=ae==null?!1:ae.length===1,Ne=ce==null?!1:ce.length===1,_e=!ge&&fe&&Te,Ke=E.config.featureToggles.toggleLabelsInLogsUI&&he.dataFrame?.refId?` in query ${he.dataFrame?.refId}`:"",et=!Ne&&ce!=null&&!ce.every(je=>je===""),ze=oe&&ae!=null&&oe.includes(ae[0])?l.createElement(h.h,{variant:"primary",tooltip:"Hide this field",name:"eye",onClick:this.hideField}):l.createElement(h.h,{tooltip:"Show this field instead of the message",name:"eye",onClick:this.showField});return l.createElement(l.Fragment,null,l.createElement("tr",{className:Ue.logDetailsValue},l.createElement("td",{className:Ue.logsDetailsIcon},l.createElement("div",{className:Oe.buttonRow},_e&&l.createElement(l.Fragment,null,E.config.featureToggles.toggleLabelsInLogsUI?l.createElement(O,{name:"search-plus",onClick:this.filterLabel,isActive:this.isFilterLabelActive,tooltipSuffix:Ke}):l.createElement(h.h,{name:"search-plus",onClick:this.filterLabel,tooltip:"Filter for value"}),l.createElement(h.h,{name:"search-minus",tooltip:`Filter out value${Ke}`,onClick:this.filterOutLabel})),!ge&&oe&&ze,!ge&&l.createElement(h.h,{variant:me?"primary":"secondary",name:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",disabled:!at,onClick:this.showStats}))),l.createElement("td",{className:Ue.logDetailsLabel},at?ae[0]:this.generateMultiVal(ae)),l.createElement("td",{className:(0,n.cx)(Oe.wordBreakAll,te&&Oe.wrapLine)},l.createElement("div",{className:Oe.logDetailsValue},Ne?ce[0]:this.generateMultiVal(ce,!0),Ne&&this.generateClipboardButton(ce[0]),l.createElement("div",{className:(0,n.cx)((Ne||et)&&Oe.adjoiningLinkButton)},De?.map((je,Qe)=>l.createElement("span",{key:`${je.title}-${Qe}`},l.createElement(y.k,{link:je}))))))),me&&at&&Ne&&l.createElement("tr",null,l.createElement("td",null,l.createElement(h.h,{variant:me?"primary":"secondary",name:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats})),l.createElement("td",{colSpan:2},l.createElement("div",{className:Oe.logDetailsStats},l.createElement(x,{stats:ye,label:ae[0],value:ce[0],rowCount:ue,isLabel:q})))))}}const O=({isActive:Y,tooltipSuffix:Z,...ae})=>{const[ce,q]=(0,l.useState)(!1),De=ce?"Remove filter":"Filter for value";return Y().then(q),l.createElement(h.h,{...ae,variant:ce?"primary":void 0,tooltip:De+Z})},A=(0,o.HE)(T);A.displayName="LogDetailsRow";var B=e(19087);class b extends l.PureComponent{render(){const{app:Z,row:ae,theme:ce,hasError:q,onClickFilterOutLabel:De,onClickFilterLabel:oe,getRows:te,showDuplicates:fe,className:Te,onClickShowField:ge,onClickHideField:he,displayedFields:me,getFieldLinks:ye,wrapLogMessage:ue,styles:Oe}=this.props,Ue=(0,S.p)(ce,ae.logLevel),at=ae.labels?ae.labels:{},Ne=Object.keys(at).length>0,_e=(0,B.YD)(ae,ye);let Ke=_e.filter(lt=>lt.links?.length);const et=Ke.filter(lt=>lt.fieldIndex!==ae.entryFieldIndex).sort(),ze=Ke.filter(lt=>lt.fieldIndex===ae.entryFieldIndex).sort(),je=(0,B.DC)(ze),Qe=_e.filter(lt=>lt.links?.length===0&&lt.fieldIndex!==ae.entryFieldIndex).sort(),We=Qe&&Qe.length>0,ke=et&&et.length>0||je&&je.length>0,ot=q?"":`${Ue.logsRowLevelColor} ${Oe.logsRowLevel} ${Oe.logsRowLevelDetails}`;return l.createElement("tr",{className:(0,n.cx)(Te,Oe.logDetails)},fe&&l.createElement("td",null),l.createElement("td",{className:ot,"aria-label":"Log level"}),l.createElement("td",{colSpan:4},l.createElement("div",{className:Oe.logDetailsContainer},l.createElement("table",{className:Oe.logDetailsTable},l.createElement("tbody",null,(Ne||We)&&l.createElement("tr",null,l.createElement("td",{colSpan:100,className:Oe.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(at).sort().map((lt,Ct)=>{const wt=at[lt];return l.createElement(A,{key:`${lt}=${wt}-${Ct}`,parsedKeys:[lt],parsedValues:[wt],isLabel:!0,getStats:()=>(0,m.lL)(te(),lt),onClickFilterOutLabel:De,onClickFilterLabel:oe,onClickShowField:ge,onClickHideField:he,row:ae,app:Z,wrapLogMessage:ue,displayedFields:me,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),Qe.map((lt,Ct)=>{const{keys:wt,values:Lt,fieldIndex:Ye}=lt;return l.createElement(A,{key:`${wt[0]}=${Lt[0]}-${Ct}`,parsedKeys:wt,parsedValues:Lt,onClickShowField:ge,onClickHideField:he,onClickFilterOutLabel:De,onClickFilterLabel:oe,getStats:()=>(0,m.i6)(ae.dataFrame.fields[Ye].values),displayedFields:me,wrapLogMessage:ue,row:ae,app:Z,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),ke&&l.createElement("tr",null,l.createElement("td",{colSpan:100,className:Oe.logDetailsHeading,"aria-label":"Data Links"},"Links")),et.map((lt,Ct)=>{const{keys:wt,values:Lt,links:Ye,fieldIndex:Be}=lt;return l.createElement(A,{key:`${wt[0]}=${Lt[0]}-${Ct}`,parsedKeys:wt,parsedValues:Lt,links:Ye,onClickShowField:ge,onClickHideField:he,getStats:()=>(0,m.i6)(ae.dataFrame.fields[Be].values),displayedFields:me,wrapLogMessage:ue,row:ae,app:Z,disableActions:!1})}),je?.map((lt,Ct)=>{const{keys:wt,values:Lt,links:Ye,fieldIndex:Be}=lt;return l.createElement(A,{key:`${wt[0]}=${Lt[0]}-${Ct}`,parsedKeys:wt,parsedValues:Lt,links:Ye,onClickShowField:ge,onClickHideField:he,getStats:()=>(0,m.i6)(ae.dataFrame.fields[Be].values),displayedFields:me,wrapLogMessage:ue,row:ae,app:Z,disableActions:!0})}),!We&&!Ne&&!ke&&l.createElement("tr",null,l.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const W=(0,o.HE)(b);W.displayName="LogDetails";var V=e(62577),w=e(81084),K=e(56781);const z=l.memo(Y=>{const{row:Z,detectedFields:ae,getFieldLinks:ce,wrapLogMessage:q,styles:De,mouseIsOver:oe,pinned:te,...fe}=Y,Te=(0,B.YD)(Z,ce),ge=q?"":G.noWrap,he=(0,l.useMemo)(()=>ae.map(ye=>{const ue=Te.find(Oe=>{const{keys:Ue}=Oe;return Ue[0]===ye});return ue!=null?`${ye}=${ue.values}`:Z.labels[ye]!==void 0&&Z.labels[ye]!==null?`${ye}=${Z.labels[ye]}`:null}).filter(ye=>ye!==null).join(" "),[ae,Te,Z.labels]),me=(0,l.useMemo)(()=>oe||te,[oe,te]);return l.createElement(l.Fragment,null,l.createElement("td",{className:De.logsRowMessage},l.createElement("div",{className:ge},he)),l.createElement("td",{className:`log-row-menu-cell ${De.logRowMenuCell}`},me&&l.createElement(K.t,{logText:he,row:Z,styles:De,pinned:te,mouseIsOver:oe,...fe})))}),G={noWrap:(0,n.css)`
    white-space: nowrap;
  `};z.displayName="LogRowMessageDisplayedFields";class Q extends l.PureComponent{constructor(Z){super(Z),this.state={permalinked:!1,showingContext:!1,showDetails:!1,mouseIsOver:!1},this.debouncedContextClose=(0,d.debounce)(()=>{this.setState({showingContext:!1})},3e3),this.onOpenContext=ae=>{this.setState({showingContext:!0}),this.props.onOpenContext(ae,this.debouncedContextClose)},this.toggleDetails=()=>{this.props.enableLogDetails&&((0,i.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(ae=>({showDetails:!ae.showDetails})))},this.onMouseEnter=()=>{this.setState({mouseIsOver:!0}),this.props.onLogRowHover&&this.props.onLogRowHover(this.props.row)},this.onMouseLeave=()=>{this.setState({mouseIsOver:!1}),this.props.onLogRowHover&&this.props.onLogRowHover(void 0)},this.scrollToLogRow=(ae,ce=!1)=>{const{row:q,permalinkedRowId:De,scrollIntoView:oe,containerRendered:te}=this.props;if(De!==q.uid){(ae.permalinked||ce)&&this.setState({permalinked:!1});return}!this.state.permalinked&&te&&this.logLineRef.current&&oe&&(oe(this.logLineRef.current),(0,i.ff)("grafana_explore_logs_permalink_opened",{datasourceType:q.datasourceType??"unknown",logRowUid:q.uid}),this.setState({permalinked:!0}))},this.escapeRow=(0,a.Z)((ae,ce)=>ae.hasUnescapedContent&&ce?{...ae,entry:(0,m.l3)(ae.entry),raw:(0,m.l3)(ae.raw)}:ae),this.logLineRef=l.createRef()}renderTimeStamp(Z){return(0,u.dq)(Z,{timeZone:this.props.timeZone,defaultWithMS:!0})}componentDidMount(){this.scrollToLogRow(this.state,!0)}componentDidUpdate(Z,ae){this.scrollToLogRow(ae)}render(){const{getRows:Z,onClickFilterLabel:ae,onClickFilterOutLabel:ce,onClickShowField:q,onClickHideField:De,enableLogDetails:oe,row:te,showDuplicates:fe,showContextToggle:Te,showLabels:ge,showTime:he,displayedFields:me,wrapLogMessage:ye,prettifyLogMessage:ue,theme:Oe,getFieldLinks:Ue,forceEscape:at,app:Ne,styles:_e}=this.props,{showDetails:Ke,showingContext:et,permalinked:ze}=this.state,je=(0,S.p)(Oe,te.logLevel),{errorMessage:Qe,hasError:We}=(0,m.Mi)(te),ke=(0,n.cx)(_e.logsRow,{[_e.errorLogRow]:We,[_e.highlightBackground]:et||ze}),ot=(0,n.cx)(_e.logsRow,{[_e.errorLogRow]:We,[_e.highlightBackground]:ze&&!this.state.showDetails}),lt=this.escapeRow(te,at);return l.createElement(l.Fragment,null,l.createElement("tr",{ref:this.logLineRef,className:ke,onClick:this.toggleDetails,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:this.onMouseEnter},fe&&l.createElement("td",{className:_e.logsRowDuplicates},lt.duplicates&&lt.duplicates>0?`${lt.duplicates+1}x`:null),l.createElement("td",{className:We?"":`${je.logsRowLevelColor} ${_e.logsRowLevel}`},We&&l.createElement(f.u,{content:`Error: ${Qe}`,placement:"right",theme:"error"},l.createElement(c.J,{className:_e.logIconError,name:"exclamation-triangle",size:"xs"}))),oe&&l.createElement("td",{title:Ke?"Hide log details":"See log details",className:_e.logsRowToggleDetails},l.createElement(c.J,{className:_e.topVerticalAlign,name:Ke?"angle-down":"angle-right"})),he&&l.createElement("td",{className:_e.logsRowLocalTime},this.renderTimeStamp(te.timeEpochMs)),ge&&lt.uniqueLabels&&l.createElement("td",{className:_e.logsRowLabels},l.createElement(V.j,{labels:lt.uniqueLabels})),me&&me.length>0?l.createElement(z,{row:lt,showContextToggle:Te,detectedFields:me,getFieldLinks:Ue,wrapLogMessage:ye,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,styles:_e,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave}):l.createElement(w.r,{row:lt,showContextToggle:Te,wrapLogMessage:ye,prettifyLogMessage:ue,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,app:Ne,styles:_e,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave})),this.state.showDetails&&l.createElement(W,{className:ot,showDuplicates:fe,getFieldLinks:Ue,onClickFilterLabel:ae,onClickFilterOutLabel:ce,onClickShowField:q,onClickHideField:De,getRows:Z,row:lt,wrapLogMessage:ye,hasError:We,displayedFields:me,app:Ne,styles:_e,isFilterLabelActive:this.props.isFilterLabelActive}))}}const j=(0,o.HE)(Q);j.displayName="LogRow";const F=100;class k extends l.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1},this.openContext=(Z,ae)=>{this.props.onOpenContext&&this.props.onOpenContext(Z,ae)},this.makeGetRows=(0,a.Z)(Z=>()=>Z),this.sortLogs=(0,a.Z)((Z,ae)=>(0,m.$u)(Z,ae))}componentDidMount(){const{logRows:Z,previewLimit:ae}=this.props,q=(Z?Z.length:0)<=ae*2;q?this.setState({renderAll:q}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{deduplicatedRows:Z,logRows:ae,dedupStrategy:ce,theme:q,logsSortOrder:De,previewLimit:oe,...te}=this.props,{renderAll:fe}=this.state,Te=(0,S.h)(q),ge=Z||ae,he=ae&&ae.length>0,me=ge?ge.reduce((Ke,et)=>et.duplicates?Ke+et.duplicates:Ke,0):0,ye=ce!==r.Y4.none&&me>0,ue=ge||[],Oe=De?this.sortLogs(ue,De):ue,Ue=Oe.slice(0,oe),at=Oe.slice(oe,Oe.length),Ne=this.makeGetRows(Oe),_e=new g;return l.createElement("table",{className:(0,n.cx)(Te.logsRowsTable,this.props.overflowingContent?"":Te.logsRowsTableContain)},l.createElement("tbody",null,he&&Ue.map(Ke=>l.createElement(j,{key:_e.getKey(Ke.uid),getRows:Ne,row:Ke,showDuplicates:ye,logsSortOrder:De,onOpenContext:this.openContext,styles:Te,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===Ke.uid,isFilterLabelActive:this.props.isFilterLabelActive,...te})),he&&fe&&at.map(Ke=>l.createElement(j,{key:_e.getKey(Ke.uid),getRows:Ne,row:Ke,showDuplicates:ye,logsSortOrder:De,onOpenContext:this.openContext,styles:Te,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===Ke.uid,isFilterLabelActive:this.props.isFilterLabelActive,...te})),he&&!fe&&l.createElement("tr",null,l.createElement("td",{colSpan:5},"Rendering ",Oe.length-oe," rows..."))))}}k.defaultProps={previewLimit:F};const _=(0,o.HE)(k);_.displayName="LogsRows"},6275:(J,R,e)=>{"use strict";e.d(R,{h:()=>u,p:()=>d});var n=e(41407),a=e(16360),l=e(63374),r=e(69323),o=e(91249),g=e(32688),m=e(53039);const d=(i,f)=>{let c=i.isLight?i.v1.palette.gray5:i.v1.palette.gray2;switch(f){case r.in.crit:case r.in.critical:c="#705da0";break;case r.in.error:case r.in.err:c="#e24d42";break;case r.in.warning:case r.in.warn:c=i.colors.warning.main;break;case r.in.info:c="#7eb26d";break;case r.in.debug:c="#1f78c1";break;case r.in.trace:c="#6ed0e0";break}return{logsRowLevelColor:(0,n.css)`
      &::after {
        background-color: ${c};
      }
    `}},u=(0,a.Z)(i=>{const f=m.hoverColor(i.colors.background.secondary,i),c=(0,l.Z)(i.components.dashboard.background).setAlpha(.7).toRgbString(),E=g.config.featureToggles.exploreScrollableLogsContainer;return{logsRowLevel:(0,n.css)`
      label: logs-row__level;
      max-width: ${i.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${i.spacing(.5)};
      }
    `,logsRowMatchHighLight:(0,n.css)`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${i.components.textHighlight.text}
      background-color: ${i.components.textHighlight};
    `,logsRowsTable:(0,n.css)`
      label: logs-rows;
      font-family: ${i.typography.fontFamilyMonospace};
      font-size: ${i.typography.bodySmall.fontSize};
      width: 100%;
      ${!E&&`margin-bottom: ${i.spacing(2.25)};`}
    `,logsRowsTableContain:(0,n.css)`
      contain: strict;
    `,highlightBackground:(0,n.css)`
      background-color: ${(0,l.Z)(i.colors.info.transparent).setAlpha(.25).toString()};
    `,logsRow:(0,n.css)`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          z-index: 1;
        }

        background: ${f};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${i.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:(0,n.css)`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logIconError:(0,n.css)`
      color: ${i.colors.warning.main};
    `,logsRowToggleDetails:(0,n.css)`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:(0,n.css)`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:(0,n.css)`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:(0,n.css)`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,copyLogButton:(0,n.css)`
      padding: 0 0 0 ${i.spacing(.5)};
      height: ${i.spacing(3)};
      width: ${i.spacing(3.25)};
      line-height: ${i.spacing(2.5)};
      overflow: hidden;
      &:hover {
          background-color: ${o.alpha(i.colors.text.primary,.12)};
        }
      }
    `,logDetailsContainer:(0,n.css)`
      label: logs-row-details-table;
      border: 1px solid ${i.colors.border.medium};
      padding: 0 ${i.spacing(1)} ${i.spacing(1)};
      border-radius: ${i.shape.radius.default};
      margin: ${i.spacing(2.5)} ${i.spacing(1)} ${i.spacing(2.5)} ${i.spacing(2)};
      cursor: default;
    `,logDetailsTable:(0,n.css)`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:(0,n.css)`
      label: logs-row-details__icon;
      position: relative;
      color: ${i.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${i.spacing(.75)};
    `,logDetailsLabel:(0,n.css)`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${i.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:(0,n.css)`
      label: logs-row-details__heading;
      font-weight: ${i.typography.fontWeightBold};
      padding: ${i.spacing(1)} 0 ${i.spacing(.5)};
    `,logDetailsValue:(0,n.css)`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${f};
      }
    `,topVerticalAlign:(0,n.css)`
      label: topVerticalAlign;
      margin-top: -${i.spacing(.9)};
      margin-left: -${i.spacing(.25)};
    `,detailsOpen:(0,n.css)`
      &:hover {
        background-color: ${m.hoverColor(i.colors.background.primary,i)};
      }
    `,errorLogRow:(0,n.css)`
      label: erroredLogRow;
      color: ${i.colors.text.secondary};
    `,positionRelative:(0,n.css)`
      label: positionRelative;
      position: relative;
    `,rowWithContext:(0,n.css)`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${c};
      display: inherit;
    `,horizontalScroll:(0,n.css)`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:(0,n.css)`
      display: block;
      margin-left: 0px;
    `,rowMenu:(0,n.css)`
      label: rowMenu;
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      background: ${i.colors.background.primary};
      box-shadow: ${i.shadows.z3};
      padding: ${i.spacing(.5,1,.5,1)};
      z-index: 100;
      gap: ${i.spacing(.5)};

      & > button {
        margin: 0;
      }
    `,logRowMenuCell:(0,n.css)`
      position: sticky;
      z-index: ${i.zIndex.dropdown};
      margin-top: -${i.spacing(.125)};
      right: 0px;

      & > span {
        transform: translateX(-100%);
      }
    `,logLine:(0,n.css)`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${i.typography.fontFamilyMonospace};
      font-size: ${i.typography.bodySmall.fontSize};
      letter-spacing: ${i.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `,logsRowLevelDetails:(0,n.css)`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:(0,n.css)`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${i.colors.background.primary};
      }
    `,visibleRowMenu:(0,n.css)`
      label: visibleRowMenu;
      aspect-ratio: 1/1;
      z-index: 90;
    `,linkButton:(0,n.css)`
      label: linkButton;
      > button {
        padding-top: ${i.spacing(.5)};
      }
    `,hidden:(0,n.css)`
      label: hidden;
      visibility: hidden;
    `,unPinButton:(0,n.css)`
      height: ${i.spacing(3)};
      line-height: ${i.spacing(2.5)};
    `}})},19087:(J,R,e)=>{"use strict";e.d(R,{B2:()=>d,DC:()=>m,YD:()=>g,i2:()=>i});var n=e(86832),a=e.n(n),l=e(16360),r=e(44951),o=e(90355);const g=(0,l.Z)((f,c)=>{const E=d(f,c);return Object.values(E)}),m=(0,l.Z)(f=>{let c=[];return f.forEach(E=>{E.links?.forEach(p=>{if(p.variables){const h=p.variables.map(s=>{const v=s.variableName,C=s.fieldPath?`.${s.fieldPath}`:"";return`${v}${C}`}),y=p.variables.map(s=>s.found?s.value:"");c.push({keys:h,values:y,links:[p],fieldIndex:E.fieldIndex})}})}),c}),d=(0,l.Z)((f,c)=>i(f.dataFrame).visible.filter(h=>h.values[f.rowIndex]!=null).map(h=>{const y=c?c(h,f.rowIndex,f.dataFrame):[],s=h.values[f.rowIndex],v=typeof s=="string"||typeof s=="number"?s.toString():(0,r.Xh)(s);return{keys:[h.name],values:[v],links:y,fieldIndex:h.index}}));function u(f,c){const E=(0,o.L)(f);if(E===null)return new Set;const p=new Set(E.extraFields.map(h=>h.index));return E.severityField!==null&&p.add(E.severityField.index),c.keepBody&&p.add(E.bodyField.index),c.keepTimestamp&&p.add(E.timeField.index),p}function i(f,c){const E=f.fields.map((s,v)=>({...s,index:v})),p=u(f,c??{}),[h,y]=(0,n.partition)(E,s=>s.config.custom?.hidden?!1:(s.config.links??[]).length>0?!0:p.has(s.index));return{visible:h,hidden:y}}},90355:(J,R,e)=>{"use strict";e.d(R,{m:()=>E,L:()=>h});var n=e(76892),a=e(89591),l=e(51226);function r(y,s){const v=y.labels;if(v!==void 0){const C=new Array(s);return C.fill(v),C}else return null}function o(y,s,v){const C=y.getFieldByName("labels");if(C!==void 0&&C.type===a.fS.other){const D=C.values.map(E);return[C,()=>D]}else return[null,()=>r(s,v.length)]}function g(y){const s=new n.N(y),v=s.getFirstFieldOfType(a.fS.time),C=s.getFirstFieldOfType(a.fS.string);if(v===void 0||C===void 0)return null;const D=s.getFieldByName("tsNs")??null,M=s.getFieldByName("level")??null,P=s.getFieldByName("id")??null,[x,S]=o(s,C,y),I=s.fields.filter((T,O)=>O!==v.index&&O!==C.index&&O!==D?.index&&O!==M?.index&&O!==P?.index&&O!==x?.index);return{timeField:v,bodyField:C,timeNanosecondField:D,severityField:M,idField:P,getLogFrameLabels:S,getLogFrameLabelsAsLabels:S,extraFields:I}}function m(y,s,v){const C=y.getFieldByName(s);if(C!==void 0)return C.type===v?C:void 0}const d="timestamp",u="body",i="severity",f="id",c="labels";function E(y){const s={};return Object.entries(y).forEach(([v,C])=>{s[v]=typeof C=="string"?C:JSON.stringify(C)}),s}function p(y){const s=new n.N(y),v=m(s,d,a.fS.time),C=m(s,u,a.fS.string);if(v===void 0||C===void 0)return null;const D=m(s,i,a.fS.string)??null,M=m(s,f,a.fS.string)??null,P=m(s,c,a.fS.other)??null,x=P===null?null:P.values,S=s.fields.filter((I,T)=>T!==v.index&&T!==C.index&&T!==D?.index&&T!==M?.index&&T!==P?.index);return{timeField:v,bodyField:C,severityField:D,idField:M,getLogFrameLabels:()=>x,timeNanosecondField:null,getLogFrameLabelsAsLabels:()=>x!==null?x.map(E):null,extraFields:S}}function h(y){return y.meta?.type===l.P.LogLines?p(y):g(y)}},41891:(J,R,e)=>{"use strict";e.d(R,{Qp:()=>I,aB:()=>j,UW:()=>K,nu:()=>z,Nw:()=>G,Ce:()=>De,Bz:()=>q});var n=e(86832),a=e(36497),l=e(84254),r=e(22605),o=e(69323),g=e(34547),m=e(53305),d=e(76892),u=e(89591),i=e(97898),f=e(92403),c=e(36822),E=e(28425),p=e(48069),h=e(81626),y=e(10694),s=e(6787),v=e(14312),C=e(48996),D=e(50820);function M(te,fe){return D.default.bootData.user.lightTheme?fe:te}var P=e(90355),x=e(20810);const S="Line limit",I="Common labels",T={[o.in.critical]:v.O9[7],[o.in.warning]:v.O9[1],[o.in.error]:v.O9[4],[o.in.info]:v.O9[0],[o.in.debug]:v.O9[5],[o.in.trace]:v.O9[2],[o.in.unknown]:M("#8e8e8e","#bdc4cd")},O=1,A=1e3*O,B=60*A,b=60*B,W=24*b,V=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function w(te,fe,Te){switch(Te){case g.Y4.exact:return te.entry.replace(V,"")===fe.entry.replace(V,"");case g.Y4.numbers:return te.entry.replace(/\d/g,"")===fe.entry.replace(/\d/g,"");case g.Y4.signature:return te.entry.replace(/\w/g,"")===fe.entry.replace(/\w/g,"");default:return!1}}function K(te,fe){return fe===g.Y4.none?te:te.reduce((Te,ge,he)=>{const me={...ge},ye=Te[Te.length-1];return he>0&&w(ge,ye,fe)?ye.duplicates++:(me.duplicates=0,Te.push(me)),Te},[])}function z(te,fe){return fe.size===0?te:te.filter(Te=>!fe.has(Te.logLevel))}function G(te,fe){const Te={},ge=[];for(const he of te){let me=Te[he.logLevel];me||(Te[he.logLevel]=me={lastTs:null,datapoints:[],target:he.logLevel,color:T[he.logLevel]},ge.push(me));const ye=Math.floor(he.timeEpochMs/fe)*fe;ye===me.lastTs?me.datapoints[me.datapoints.length-1][0]++:(me.datapoints.push([1,ye]),me.lastTs=ye);for(const ue of ge)ue!==me&&ue.lastTs!==ye&&(ue.datapoints.push([0,ye]),ue.lastTs=ye)}return ge.map((he,me)=>{he.datapoints.sort((Ue,at)=>Ue[1]-at[1]);const ye=(0,m.g0)(he),Oe=new d.N(ye).getFirstFieldOfType(u.fS.number);return ye.fields[Oe.index].config.min=0,ye.fields[Oe.index].config.decimals=0,ye.fields[Oe.index].config.color={mode:i.S.Fixed,fixedColor:he.color},ye.fields[Oe.index].config.custom={drawStyle:g.l8.Bars,barAlignment:g.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:he.color,pointColor:he.color,fillColor:he.color,lineWidth:0,fillOpacity:100,stacking:{mode:g.o0.Normal,group:"A"}},ye})}function Q(te){return te.fields.some(fe=>fe.type===u.fS.time)&&te.fields.some(fe=>fe.type===u.fS.string)}function j(te,fe,Te,ge){const{logSeries:he}=k(te),me=Y(he,ge);if(me){if(fe&&me.rows.length>0){const ye=me.rows.sort(x.DA),{visibleRange:ue,bucketSize:Oe,visibleRangeMs:Ue,requestedRangeMs:at}=F(ye,fe,Te);me.visibleRange=ue,me.bucketSize=Oe,me.series=G(ye,Oe),me.meta&&(me.meta=Z(me,Ue,at))}else me.series=[];return me.queries=ge,me}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:ge}}function F(te,fe,Te,ge=20,he=1e3){let me=Te,ye=fe,ue=Math.max(ye*ge,he),Oe,Ue;if(Te){const at=te[0].timeEpochMs;if(Ue=Te.to-Te.from,Oe=Te.to-at,Oe>0){const Ne=Oe/Ue;ye*=Ne,ue=Math.max(Math.ceil(ye*ge),he),me={from:Math.floor(at/ue)*ue,to:Te.to}}else Oe=1}return{bucketSize:ue,visibleRange:me,visibleRangeMs:Oe,requestedRangeMs:Ue}}function k(te){const fe=[],Te=[];for(const ge of te){if(Q(ge)||!ge.fields.length){Te.push(ge);continue}ge.length>0&&fe.push(ge)}return{logSeries:Te,metricSeries:fe}}function _(te,fe,Te){const ge=te.values[Te],me=(0,f.zh)(ge).valueOf();if(fe)return{ts:ge,timeEpochMs:me,timeEpochNs:fe.values[Te]};if(te.nanos!==void 0){const ye=te.nanos[Te].toString().padStart(6,"0"),ue=`${me}${ye}`;return{ts:ge,timeEpochMs:me,timeEpochNs:ue}}return{ts:ge,timeEpochMs:me,timeEpochNs:me+"000000"}}function Y(te,fe=[]){if(te.length===0)return;const Te=[];let ge=[];const he=te.filter(je=>je.fields.length);he.length&&he.forEach(je=>{const Qe=(0,P.L)(je);if(Qe!=null){const We=Qe.getLogFrameLabelsAsLabels()??void 0,ke={rawFrame:je,logsFrame:Qe,frameLabels:We};ge.push(ke),We&&We.length>0&&Te.push(We)}});const me=Te.flat(),ye=me.length>0?(0,c.FT)(me):{},ue=[];let Oe=!1;for(const je of ge){const{logsFrame:Qe,rawFrame:We,frameLabels:ke}=je,{timeField:ot,timeNanosecondField:lt,bodyField:Ct,severityField:wt,idField:Lt}=Qe;for(let Ye=0;Ye<We.length;Ye++){const{ts:Be,timeEpochMs:Le,timeEpochNs:le}=_(ot,lt??void 0,Ye),de=Ct.values[Ye]??"",X=typeof de=="string"?de:JSON.stringify(de),se=E.QX.hasAnsiCodes(X),re=!!X.match(/\\n|\\t|\\r/),pe=We.meta?.custom?.searchWords??We.meta?.searchWords??[],be=se?C._J.strip(X):X,xe=ke?.[Ye],Pe=(0,c.IU)(xe,ye);Object.keys(Pe).length>0&&(Oe=!0);let we=o.in.unknown;const Fe=wt&&wt.values[Ye]||xe&&xe.level;Fe?we=(0,x.jx)(Fe):we=(0,x.ZO)(be);const He=fe.find(dt=>dt.refId===We.refId)?.datasource?.type,Xe={entryFieldIndex:Ct.index,rowIndex:Ye,dataFrame:We,logLevel:we,timeFromNow:(0,p.E8)(Be),timeEpochMs:Le,timeEpochNs:le,timeLocal:(0,p.dq)(Be,{timeZone:"browser"}),timeUtc:(0,p.dq)(Be,{timeZone:"utc"}),uniqueLabels:Pe,hasAnsi:se,hasUnescapedContent:re,searchWords:pe,entry:be,raw:X,labels:xe||{},uid:`${We.refId}_${Lt?Lt.values[Ye]:Ye.toString()}`,datasourceType:He};Lt!==null&&(Xe.rowId=Lt.values[Ye]),ue.push(Xe)}}const Ue=[];(0,n.size)(ye)>0&&Ue.push({label:I,value:ye,kind:o.Ku.LabelsMap});const Ne=te.filter(je=>je?.meta?.custom?.limit??je?.meta?.limit).reduce((je,Qe)=>(je[Qe.refId??""]=Qe.meta?.custom?.limit??Qe.meta?.limit??0,je),{}),_e=Object.values(Ne).reduce((je,Qe)=>je+=Qe,0);_e>0&&Ue.push({label:S,value:_e,kind:o.Ku.Number});let Ke=0;const et={};let ze=!1;for(const je of te){const Qe=je.meta?.custom?.lokiQueryStatKey,{refId:We}=je;if(!ze&&je.meta?.custom?.error&&(Ue.push({label:"",value:je.meta?.custom.error,kind:o.Ku.Error}),ze=!0),We&&!et[We]){if(Qe&&je.meta?.stats){const ke=je.meta.stats.find(ot=>ot.displayName===Qe);ke&&(Ke+=ke.value)}et[We]=!0}}if(Ke>0){const{text:je,suffix:Qe}=(0,s.i7)("B")(Ke);Ue.push({label:"Total bytes processed",value:`${je} ${Qe}`,kind:o.Ku.String})}return{hasUniqueLabels:Oe,meta:Ue,rows:ue}}function Z(te,fe,Te){let ge=[...te.meta];const he=ge.findIndex(ye=>ye.label===S),me=he>=0&&ge[he]?.value;if(me&&me>0){let ye;if(me===te.rows.length&&fe&&Te){const ue=(fe/Te*100).toFixed(2);ye=`${me} reached, received logs cover ${ue}% (${h.msRangeToTimeString(fe)}) of your selected time range (${h.msRangeToTimeString(Te)})`}else ye=`${me} (${te.rows.length} returned)`;ge[he]={label:S,value:ye,kind:o.Ku.String}}return ge}function ae(te,fe){const Te=fe&&te===o.in.unknown?"logs":te,ge=T[te];return{displayNameFromDS:Te,color:{mode:i.S.Fixed,fixedColor:ge},custom:{drawStyle:g.l8.Bars,barAlignment:g.pu.Center,lineColor:ge,pointColor:ge,fillColor:ge,lineWidth:1,fillOpacity:100,stacking:{mode:g.o0.Normal,group:"A"}}}}const ce=(te,fe,Te)=>(te.fields=te.fields.map(ge=>(ge.type===u.fS.number&&(ge.config={...ge.config,...ae(fe(te),Te)}),ge)),te);function q(te,fe,Te){const ge=Te.range.to.valueOf()-Te.range.from.valueOf(),he=oe(fe.scopedVars,ge);return fe.interval=he.interval,fe.scopedVars.__interval={value:he.interval,text:he.interval},he.intervalMs!==void 0&&(fe.intervalMs=he.intervalMs,fe.scopedVars.__interval_ms={value:he.intervalMs,text:he.intervalMs}),fe.hideFromInspector=!0,new a.y(me=>{let ye=[];me.next({state:y.Gu.Loading,error:void 0,data:[]});const ue=te.query(fe),Ue=((0,l.b)(ue)?ue:(0,r.D)(ue)).subscribe({complete:()=>{me.complete()},next:at=>{const{error:Ne}=at;if(Ne!==void 0)me.next({state:y.Gu.Error,error:Ne,data:[]}),me.error(Ne);else{const _e=(0,n.groupBy)(at.data,"refId");ye=at.data.map(Ke=>{let et=Ke.refId||"";et.startsWith("log-volume-")&&(et=et.substr(11));const ze={logsVolumeType:o.o8.FullRange,absoluteRange:{from:Te.range.from.valueOf(),to:Te.range.to.valueOf()},datasourceName:te.name,sourceQuery:Te.targets.find(je=>je.refId===et)};return Ke.meta={...Ke.meta,custom:{...Ke.meta?.custom,...ze}},ce(Ke,Te.extractLevel,_e[Ke.refId].length===1)}),me.next({state:at.state,error:void 0,data:ye})}},error:at=>{me.next({state:y.Gu.Error,error:at,data:[]}),me.error(at)}});return()=>{Ue?.unsubscribe()}})}function De(te,fe){return fe.hideFromInspector=!0,new a.y(Te=>{let ge=[];Te.next({state:y.Gu.Loading,error:void 0,data:[]});const he=te.query(fe),ye=((0,l.b)(he)?he:(0,r.D)(he)).subscribe({complete:()=>{Te.next({state:y.Gu.Done,error:void 0,data:ge}),Te.complete()},next:ue=>{const{error:Oe}=ue;Oe!==void 0?(Te.next({state:y.Gu.Error,error:Oe,data:[]}),Te.error(Oe)):ge=ue.data.map(Ue=>{const at=(0,m.g0)(Ue),{timeIndex:Ne}=(0,m.sV)(at);return(0,m.aK)(at,Ne)})},error:ue=>{Te.next({state:y.Gu.Error,error:ue,data:[]}),Te.error(ue)}});return()=>{ye?.unsubscribe()}})}function oe(te,fe){if(te.__interval_ms){let Te=te.__interval_ms.value,ge="";return fe<A*5?(Te=O,ge="1ms"):Te>b?(Te=W,ge="1d"):Te>B?(Te=b,ge="1h"):Te>A?(Te=B,ge="1m"):(Te=A,ge="1s"),{interval:ge,intervalMs:Te}}else return{interval:"$__interval"}}},20810:(J,R,e)=>{"use strict";e.d(R,{$u:()=>s,DA:()=>p,Di:()=>D,FP:()=>S,Js:()=>x,Mi:()=>v,ZO:()=>u,_c:()=>P,hY:()=>M,i6:()=>c,j0:()=>y,jx:()=>i,l3:()=>C,lL:()=>f});var n=e(86832),a=e.n(n),l=e(69323),r=e(34547),o=e(76892),g=e(89591),m=e(7906),d=e(19087);function u(I){if(!I)return l.in.unknown;let T=l.in.unknown,O;for(const[A,B]of Object.entries(l.in)){const W=new RegExp(`\\b${A}\\b`,"i").exec(I);W&&(O===void 0||W.index<O)&&(T=B,O=W.index)}return T}function i(I){const T=l.in[I.toString().toLowerCase()];return T||l.in.unknown}function f(I,T){const O=I.filter(b=>b.labels[T]!==void 0),A=O.length,B=(0,n.countBy)(O,b=>b.labels[T]);return E(B,A)}function c(I){const T=I.filter(A=>A!=null),O=(0,n.countBy)(T);return E(O,T.length)}const E=(I,T)=>(0,n.chain)(I).map((O,A)=>({count:O,value:A,proportion:O/T})).sortBy("count").reverse().value(),p=(I,T)=>I.timeEpochMs<T.timeEpochMs?-1:I.timeEpochMs>T.timeEpochMs?1:I.timeEpochNs<T.timeEpochNs?-1:I.timeEpochNs>T.timeEpochNs?1:0,h=(I,T)=>I.timeEpochMs>T.timeEpochMs?-1:I.timeEpochMs<T.timeEpochMs?1:I.timeEpochNs>T.timeEpochNs?-1:I.timeEpochNs<T.timeEpochNs?1:0,y=(I,T)=>{const O=I?s(I.rows,T):[];return I?{...I,rows:O}:{hasUniqueLabels:!1,rows:O}},s=(I,T)=>T===r.UV.Ascending?I.sort(p):I.sort(h),v=I=>I.labels.__error__?{hasError:!0,errorMessage:I.labels.__error__}:{hasError:!1},C=I=>I.replace(/\\r\\n|\\n|\\t|\\r/g,T=>T.slice(1)==="t"?"	":`
`);function D(I){return I.map(T=>{const O=(0,d.B2)(T).reduce((A,B)=>{const b=B.keys[0];return A[b]=B.values[0],A},{});return{line:T.entry,timestamp:T.timeEpochNs,fields:{...O,...T.labels}}})}const M=I=>{let T={from:1/0,to:-1/0};return I.forEach(O=>{const A=O.meta?.custom||{};A.absoluteRange?.from&&A.absoluteRange?.to&&(T={from:Math.min(T.from,A.absoluteRange.from),to:Math.max(T.to,A.absoluteRange.to)})}),T},P=I=>{if(I.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const T={},O={};let A=-1/0;const B={};let b=[];return I.forEach(W=>{const V=new o.N(W),w=V.getFirstFieldOfType(g.fS.time),K=V.getFirstFieldOfType(g.fS.number);if(!w)throw new Error("Missing time field");if(!K)throw new Error("Missing value field");const z=K.config.displayNameFromDS||W.name||"logs",G=K.values.length;B[z]={meta:W.meta,valueFieldConfig:K.config,timeFieldConfig:w.config};for(let Q=0;Q<G;Q++){const j=w.values[Q],F=K.values[Q];T[z]??={},T[z][j]=(T[z][j]||0)+F,O[j]=(O[j]||0)+F,A=Math.max(O[j],A)}}),Object.keys(T).forEach(W=>{const V=new m.v,{meta:w,timeFieldConfig:K,valueFieldConfig:z}=B[W];V.name=W,V.meta=w,V.addField({name:"Time",type:g.fS.time,config:K}),V.addField({name:"Value",type:g.fS.number,config:z}),Object.entries(T[W]).sort((G,Q)=>Number(G[0])-Number(Q[0])).forEach(([G,Q])=>{V.add({Time:Number(G),Value:Q})}),b.push(V)}),{dataFrames:b,maximum:A}},x=I=>{const T=I[0]?.meta?.custom;return T&&T.datasourceName?{name:T.datasourceName}:null},S=I=>I[0]?.meta?.custom?.logsVolumeType===l.o8.Limited},41987:(J,R,e)=>{"use strict";e.d(R,{H:()=>f});var n=e(39953),a=e(39106),l=e(4919),r=e(27587),o=e(41407),g=e(82803),m=e(32840);const d=({title:c})=>{const E=(0,g.wW)(i);return n.createElement("p",{className:E.description},c?"Are you sure you want to revoke this URL? The dashboard will no longer be public.":"Orphaned public dashboard will no longer be public.")},u=({dashboardTitle:c,onConfirm:E,onDismiss:p})=>n.createElement(m.s,{isOpen:!0,body:n.createElement(d,{title:c}),onConfirm:E,onDismiss:p,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL"}),i=c=>({title:(0,o.css)`
    margin-bottom: ${c.spacing(1)};
  `,description:(0,o.css)`
    font-size: ${c.typography.body.fontSize};
  `}),f=({dashboard:c,publicDashboard:E,loader:p,children:h,onDismiss:y,...s})=>{const[v,{isLoading:C}]=(0,r.bS)(),D=(M,P)=>{v({dashboard:c,uid:M.uid,dashboardUid:M.dashboardUid}),P()};return n.createElement(a.JY,null,({showModal:M,hideModal:P})=>n.createElement(l.zx,{"aria-label":"Revoke public URL",title:"Revoke public URL",onClick:()=>M(u,{dashboardTitle:E.title,onConfirm:()=>D(E,P),onDismiss:()=>{y?y():P()}}),...s},C&&p?p:h))}},17712:(J,R,e)=>{"use strict";e.d(R,{t:()=>r});var n=e(17231);class a extends Error{constructor(g,m){super(m),this.type=g}}class l{constructor(){this.rootName="general"}validateNewDashboardName(g,m){return this.validate(g,m,"A dashboard or a folder with the same name already exists")}validateNewFolderName(g){return this.validate(this.rootName,g,"A folder or dashboard in the general folder with the same name already exists")}async validate(g,m,d){m=(m||"").trim();const u=m.toLowerCase();if(m.length===0)throw new a("REQUIRED","Name is required");if(u===this.rootName)throw new a("EXISTING","This is a reserved name and cannot be used for a folder.");const f=await(0,n.getGrafanaSearcher)().search({kind:["dashboard"],query:m,location:g||"general"});for(const c of f.view)if(u===c.name.toLowerCase())throw new a("EXISTING",d)}}const r=new l},44622:(J,R,e)=>{"use strict";e.d(R,{$j:()=>P,EW:()=>Q,Fd:()=>B,Jx:()=>I,L6:()=>V,Pb:()=>G,ZL:()=>z,ct:()=>T,iM:()=>j,nQ:()=>E,q_:()=>c,uC:()=>b,ys:()=>M});var n=e(57837),a=e(4148),l=e(13601),r=e(26205),o=e(97316),g=e(90634),m=e(3654),d=e(57721),u=e(64840),i=e(84796),f=e(81813);function c(k){return async _=>{try{_((0,f.AK)());const Y=await(0,a.i)().get(`/api/gnet/dashboards/${k}`);await _(C(Y.json)),await _(y(Y)),_(v())}catch(Y){_((0,f.eh)()),(0,a.kW)(Y)&&_((0,o.$l)((0,g.t_)(Y.data.message||Y)))}}}function E(k){return async _=>{await _(C(k)),await _(s(k)),_(v())}}const p=(k,_)=>k?.usage?.libraryPanels?.filter(Y=>_.inputs.libraryPanels.some(Z=>Z.state!==f.KQ.Exists&&Z.model.uid===Y.uid));function h(k,_){let Y=k.__inputs;if(_.inputs.libraryPanels?.length){const Z=[];k.__inputs?.forEach(ae=>{if(!ae?.usage?.libraryPanels){Z.push(ae);return}const ce=p(ae,_);ae.usage={libraryPanels:ce},!!ce?.length&&Z.push(ae)}),Y=Z}return{...k,__inputs:Y}}function y(k){return(_,Y)=>{const Z=Y().importDashboard,ae=h(k.json,Z);_((0,f.S9)({...k,json:ae}))}}function s(k){return(_,Y)=>{const Z=Y().importDashboard,ae=h(k,Z);_((0,f.Nw)(ae))}}function v(){return(k,_)=>{const Y=_().importDashboard.dashboard;if(Y&&Y.__inputs){const Z=[];Y.__inputs.forEach(ae=>{const ce={name:ae.name,label:ae.label,info:ae.description,value:ae.value,type:ae.type,pluginId:ae.pluginId,options:[]};ce.description=S(ae),ae.type===f.n$.DataSource?x(ae,ce):ce.info||(ce.info="Specify a string constant"),Z.push(ce)}),k((0,f.Zc)(Z))}}}function C(k){return async function(_){const Y=await D(k);_((0,f.C2)(Y))}}async function D(k){if(!k||!k.__elements)return[];const _=[];for(const Y of Object.values(k.__elements)){if(Y.kind!==i.V.Panel)continue;const Z=Y.model,{type:ae,description:ce}=Z,{uid:q,name:De}=Y,oe={model:{model:Z,uid:q,name:De,version:0,type:ae,kind:i.V.Panel,description:ce},state:f.KQ.New};try{const te=await(0,u.Mh)(q,!0);oe.state=f.KQ.Exists,oe.model=te}catch(te){if(te.status!==404)throw te}_.push(oe)}return _}function M(){return k=>{k((0,f.MO)())}}function P(k){return async(_,Y)=>{const Z=Y().importDashboard.dashboard,ae=Y().importDashboard.inputs;let ce=[];k.dataSources?.forEach((oe,te)=>{const fe=ae.dataSources[te];ce.push({name:fe.name,type:fe.type,pluginId:fe.pluginId,value:oe.uid})}),k.constants?.forEach((oe,te)=>{const fe=ae.constants[te];ce.push({value:oe,name:fe.name,type:fe.type})});const q=await(0,a.i)().post("api/dashboards/import",{dashboard:{...Z,title:k.title,uid:k.uid||Z.uid},overwrite:!0,inputs:ce,folderUid:k.folder.uid}),De=n.u.stripBaseFromUrl(q.importedUrl);l.E1.push(De)}}const x=(k,_)=>{(0,r.F)().getList({pluginId:k.pluginId}).length===0?_.info="No data sources of type "+k.pluginName+" found":_.info||(_.info="Select a "+k.pluginName+" data source")},S=k=>{if(k.usage&&k.usage.libraryPanels)return`List of affected library panels: ${k.usage.libraryPanels.reduce((Y,Z,ae)=>ae===0?Z.name:`${Y}, ${Z.name}`,"")}`};async function I(k,_){const Y={totalCount:k.length,successCount:0};for(const Z of k)try{await w(Z,_)!==null&&(Y.successCount+=1)}catch(ae){console.error("Failed to move a folder",ae)}return Y}function T(k,_){const Y=[];for(const Z of k)Y.push(A(O,!0,Z,_));return F(Y).then(Z=>({totalCount:Z.length,successCount:Z.filter(ae=>ae.succeeded).length,alreadyInFolderCount:Z.filter(ae=>ae.alreadyInFolder).length}))}async function O(k,_){const Y=await(0,a.i)().get(`/api/dashboards/uid/${k}`);if((Y.meta.folderUid===void 0||Y.meta.folderUid===null)&&_.uid===""||Y.meta.folderUid===_.uid)return{alreadyInFolder:!0};const Z={dashboard:Y.dashboard,folderUid:_.uid,overwrite:!1};try{return await b(Z),{succeeded:!0}}catch(ae){if((0,a.kW)(ae)){if(ae.data?.status!=="plugin-dashboard")return{succeeded:!1};ae.isHandled=!0}Z.overwrite=!0;try{return await b(Z),{succeeded:!0}}catch{return{succeeded:!1}}}}function A(k,_,...Y){return async Z=>{try{const ae=await k(...Y);return Array.prototype.concat(Z,[ae])}catch(ae){if(_)return Z;throw ae}}}function B(k,_){const Y=[];for(const Z of k)Y.push(A(W,!0,Z,!0));for(const Z of _)Y.push(A(j,!0,Z,!0));return F(Y)}function b(k){return m.H.ignoreNextSave(),(0,a.i)().post("/api/dashboards/db/",{dashboard:k.dashboard,message:k.message??"",overwrite:k.overwrite??!1,folderUid:k.folderUid})}function W(k,_){return(0,a.i)().delete(`/api/folders/${k}?forceDeleteRules=false`,void 0,{showSuccessAlert:_})}function V(k){return(0,a.i)().post("/api/folders",k)}function w(k,_){const Y={parentUid:_.uid};return(0,a.i)().post(`/api/folders/${k}/move`,Y,{showErrorAlert:!1})}const K=1e3;function z(k,_,Y=d.SearchQueryType.Folder){return(0,a.i)().get("/api/search",{query:k,type:Y,permission:_,limit:K})}function G(k){return(0,a.i)().get(`/api/folders/${k}`)}function Q(k){return(0,a.i)().get(`/api/folders/id/${k}`)}function j(k,_){return(0,a.i)().delete(`/api/dashboards/uid/${k}`,{showSuccessAlert:_})}function F(k){return k.reduce((_,Y)=>Promise.resolve(_).then(Y),[])}},81813:(J,R,e)=>{"use strict";e.d(R,{AK:()=>p,C2:()=>c,G7:()=>l,KQ:()=>o,MO:()=>d,Nw:()=>f,S9:()=>i,ZP:()=>y,Zc:()=>u,eh:()=>E,n$:()=>r,wg:()=>g});var n=e(77960),a=e(10694),l=(s=>(s[s.Gcom=0]="Gcom",s[s.Json=1]="Json",s))(l||{}),r=(s=>(s.DataSource="datasource",s.Constant="constant",s.LibraryPanel="libraryPanel",s))(r||{}),o=(s=>(s.New="new",s.Exists="exists",s.Different="different",s))(o||{});const g={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:a.Gu.NotStarted},m=(0,n.oM)({name:"manageDashboards",initialState:g,reducers:{setGcomDashboard:(s,v)=>{s.dashboard={...v.payload.json,id:null},s.meta={updatedAt:v.payload.updatedAt,orgName:v.payload.orgName},s.source=0,s.state=a.Gu.Done},setJsonDashboard:(s,v)=>{s.dashboard={...v.payload,id:null},s.meta=g.meta,s.source=1,s.state=a.Gu.Done},clearDashboard:s=>{s.dashboard={},s.state=a.Gu.NotStarted},setInputs:(s,v)=>{s.inputs={dataSources:v.payload.filter(C=>C.type==="datasource"),constants:v.payload.filter(C=>C.type==="constant"),libraryPanels:s.inputs.libraryPanels||[]}},setLibraryPanelInputs:(s,v)=>{s.inputs.libraryPanels=v.payload},fetchFailed:s=>{s.dashboard={},s.state=a.Gu.Error},fetchDashboard:s=>{s.state=a.Gu.Loading}}}),{clearDashboard:d,setInputs:u,setGcomDashboard:i,setJsonDashboard:f,setLibraryPanelInputs:c,fetchFailed:E,fetchDashboard:p}=m.actions,y={importDashboard:m.reducer}},72700:(J,R,e)=>{"use strict";e.d(R,{FV:()=>o,JE:()=>d,Q$:()=>g,RF:()=>r,Yi:()=>m});var n=e(4148),a=e(97316),l=e(25430);function r(u={getBackendSrv:n.i}){return async i=>{const f=await u.getBackendSrv().get("/api/org");return i((0,l.jR)(f)),f}}function o(u={getBackendSrv:n.i}){return async(i,f)=>{const c=f().organization.organization;await u.getBackendSrv().put("/api/org",{name:c.name}),i((0,a.H7)(c.name)),i(r(u))}}function g(u,i={getBackendSrv:n.i}){return async f=>{const c=await i.getBackendSrv().post("/api/user/using/"+u);f((0,a.H7)(c.name))}}function m(u,i={getBackendSrv:n.i}){return async f=>{const c=await i.getBackendSrv().post("/api/orgs/",u);f(g(c.orgId))}}function d(u={getBackendSrv:n.i}){return async i=>{const f=await u.getBackendSrv().get("/api/user/orgs");return i((0,l.IM)(f)),f}}},25430:(J,R,e)=>{"use strict";e.d(R,{IM:()=>g,ZP:()=>d,jR:()=>o,xR:()=>r});var n=e(77960);const a={organization:{},userOrgs:[]},l=(0,n.oM)({name:"organization",initialState:a,reducers:{organizationLoaded:(u,i)=>({...u,organization:i.payload}),setOrganizationName:(u,i)=>({...u,organization:{...u.organization,name:i.payload}}),userOrganizationsLoaded:(u,i)=>({...u,userOrgs:i.payload})}}),{setOrganizationName:r,organizationLoaded:o,userOrganizationsLoaded:g}=l.actions,d={organization:l.reducer}},56584:(J,R,e)=>{"use strict";e.d(R,{Z:()=>y});var n=e(41407),a=e(39953),l=e(64943),r=e(96083),o=e(13601),g=e(82803),m=e(31276),d=e(18330),u=e(74602),i=e(23062),f=e(91507),c=e(47864),E=e(97433),p=e(57721),h=e(51201);function y(C){const D=(0,g.wW)(v),M=(0,m.R9)(),P=new l.mi(C.data),{dataSummary:x}=P,S=s(C,x),I=(0,p.useDispatch)(),T=(0,E.h4)().getCurrent()?.getPanelById(C.panelId),O=()=>{i.Z.setObject(u.FL,c.Ok.Suggestions),I((0,f.g_)(!0))},A=()=>{T&&I((0,h.Kc)({panel:T,pluginId:"table"}))},B=b=>{T&&(I((0,h.Kc)({...b,panel:T})),b.transformations&&setTimeout(()=>{o.E1.partial({tab:"transform"})},100))};return a.createElement("div",{className:D.wrapper},a.createElement("div",{className:D.message},S),M.app===r.zj.PanelEditor&&x.hasData&&T&&a.createElement("div",{className:D.actions},C.suggestions&&a.createElement(a.Fragment,null,C.suggestions.map(b=>a.createElement(d.x,{key:b.name,icon:"process",onClick:()=>B(b)},b.name))),a.createElement(d.x,{icon:"table",onClick:A},"Switch to table"),a.createElement(d.x,{icon:"chart-line",onClick:O},"Open visualization suggestions")))}function s({data:C,fieldConfig:D,message:M,needsNumberField:P,needsTimeField:x,needsStringField:S},I){return M||(!C.series||C.series.length===0||C.series.every(T=>T.length===0)?D?.defaults.noValue??"No data":S&&!I.hasStringField?"Data is missing a string field":P&&!I.hasNumberField?"Data is missing a number field":x&&!I.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const v=C=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,n.css)({textAlign:"center",color:C.colors.text.secondary,fontSize:C.typography.size.lg,width:"100%"}),actions:(0,n.css)({marginTop:C.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:C.spacing(1),rowGap:C.spacing(1),width:"100%",maxWidth:"600px"})})},11818:(J,R,e)=>{"use strict";e.d(R,{F:()=>m,X:()=>d});var n=e(39953),a=e(40530),l=e(30670),r=e(33155),o=e(57721);class g extends n.PureComponent{constructor(i){super(i)}render(){const i={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return n.createElement("div",{style:i},n.createElement(r.b,{severity:o.AppNotificationSeverity.Error,...this.props}))}}function m(u,i){const f=class extends n.PureComponent{render(){const p=n.createElement(n.Fragment,null,"Check the server startup logs for more information. ",n.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return n.createElement(g,{title:`Error loading: ${u.id}`,text:p})}},c=new a.c(f);return c.meta=u,c.loadError=!0,c}function d(u,i){const f=class extends n.PureComponent{render(){return n.createElement(g,{title:`Panel plugin not found: ${u}`})}},c=new a.c(i?()=>null:f);return c.meta={id:u,name:u,sort:100,type:l.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},c}},95430:(J,R,e)=>{"use strict";e.d(R,{$:()=>E});var n=e(39953),a=e(73),l=e(52716),r=e(8651),o=e(58103),g=e(79059),m=e(82803),d=e(31276),u=e(41393),i=e(21308),f=e(13090);const c={defaults:{},overrides:[]};function E(h){const{pluginId:y,data:s,timeZone:v=(0,a.Z)(),options:C={},width:D,height:M,title:P,onOptionsChange:x=()=>{},onChangeTimeRange:S=()=>{},onFieldConfigChange:I=()=>{},fieldConfig:T=c}=h,O=(0,m.l4)(),A=(0,g.J)(),B=(0,n.useMemo)(()=>A.replace.bind(A),[A]),[b,W]=(0,n.useState)((0,f.q1)(y)),[V,w]=(0,n.useState)(),K=p(b,C,T),{dataLinkPostProcessor:z}=(0,d.R9)(),G=(0,l.Cc)(b,K?.fieldConfig,s,v,O,B,z);if((0,n.useEffect)(()=>{b&&b.hasPluginId(y)||(0,f.Ub)(y).then(j=>W(j)).catch(j=>{w(j.message)})},[y,b]),V)return n.createElement("div",null,"Failed to load plugin: ",V);if(!b||!b.hasPluginId(y))return n.createElement("div",null,"Loading plugin panel...");if(!b.panel)return n.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!G)return n.createElement("div",null,"No panel data");const Q=b.panel;return n.createElement(u.z4,{dependencies:[b,s]},n.createElement(r.b,{meta:b.meta},n.createElement(Q,{id:1,data:G,title:P,timeRange:G.timeRange,timeZone:v,options:K.options,fieldConfig:T,transparent:!1,width:D,height:M,renderCounter:0,replaceVariables:j=>j,onOptionsChange:x,onFieldConfigChange:I,onChangeTimeRange:S,eventBus:i.h$})))}function p(h,y,s){return(0,n.useMemo)(()=>{if(h)return(0,o.d4)({plugin:h,currentOptions:y,currentFieldConfig:s,isAfterPluginChange:!1})},[h,s,y])}},84278:(J,R,e)=>{"use strict";e.d(R,{Bq:()=>A,PR:()=>D,PW:()=>x});var n=e(86832),a=e.n(n),l=e(24824),r=e(69733),o=e(69330),g=e(89591),m=e(57837),d=e(28425),u=e(69307),i=e(14255),f=e(79059),c=e(34547),E=e(50820),p=e(6278),h=e(38361);const y=[{value:`${l.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:r.L8.BuiltIn},{value:`${l.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:r.L8.BuiltIn},{value:`${l.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:r.L8.BuiltIn}],s=[{value:`${l.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:r.L8.Series}],v=[{value:`${l.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:r.L8.Value},{value:`${l.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:r.L8.Value},{value:`${l.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:r.L8.Value}],C=B=>B.includes(".")||B.trim().includes(" ")?`["${B}"]`:`.${B}`,D=()=>[...(0,f.J)().getVariables().map(B=>({value:B.name,label:B.name,origin:r.L8.Template})),{value:`${l.W.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:r.L8.Template},...y],M=B=>{const b=[];for(const V of B)for(const w of V.fields)if(w.labels)for(const K of Object.keys(w.labels))b.push(K);const W=(0,n.chain)(b).flatten().uniq().value();return[{value:`${l.W.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:r.L8.Field},...W.map(V=>({value:`__field.labels${C(V)}`,label:`labels.${V}`,documentation:`${V} label value`,origin:r.L8.Field}))]},P=B=>{let b,W;const V=[],w={};if(B.length!==1)return[];const K=B[0];for(const z of K.fields){const G=(0,o.CZ)(z,K,B);w[G]||(V.push({value:`__data.fields${C(G)}`,label:`${G}`,documentation:`Formatted value for ${G} on the same row`,origin:r.L8.Fields}),w[G]=!0,!b&&z.type===g.fS.number&&(b={...z,name:G}),!W&&z.config.displayName&&z.config.displayName!==z.name&&(W={...z,name:G}))}return V.length&&V.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:r.L8.Fields}),b&&(V.push({value:`__data.fields${C(b.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:r.L8.Fields}),V.push({value:`__data.fields${C(b.name)}.text`,label:"Show text value",documentation:"the text value",origin:r.L8.Fields})),W&&V.push({value:`__data.fields${C(W.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:r.L8.Fields}),V},x=(B,b)=>{const W={value:`${l.W.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:r.L8.Value};return b===r.o3.Values?[...s,...M(B),...v,W,...P(B),...D()]:[...s,...M(B),...P(B),...D()]},S=B=>{const b=M(B),W={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...s,...b,...v,W,...D()]};class I{constructor(){this.getDataLinkUIModel=(b,W,V)=>{let w=b.url;b.onBuildUrl&&(w=b.onBuildUrl({origin:V,replaceVariables:W}));const K={href:m.u.assureBaseUrl(w.replace(/\n/g,"")),title:b.title??"",target:b.targetBlank?"_blank":void 0,origin:V};return W&&(K.href=W(K.href,void 0,c.b8.UriEncode),K.title=W(b.title)),b.onClick&&(K.onClick=z=>{b.onClick({origin:V,replaceVariables:W,e:z})}),K.href=(0,E.iE)().disableSanitizeHtml?K.href:d.QX.sanitizeUrl(K.href),K}}getLinkUrl(b){let W=m.u.assureBaseUrl((0,f.J)().replace(b.url||"")),V={};if(b.keepTime){const w=(0,p.$t)().timeRangeForUrl();V.from=w.from,V.to=w.to}return b.includeVars&&(V={...V,...(0,h.c)()}),W=u.Cj.appendQueryToUrl(W,u.Cj.toUrlParams(V)),(0,E.iE)().disableSanitizeHtml?W:d.QX.sanitizeUrl(W)}getAnchorInfo(b){const W=(0,f.J)();return{href:this.getLinkUrl(b),title:W.replace(b.title||""),tooltip:W.replace(b.tooltip||"")}}getPanelLinkAnchorInfo(b,W){(0,i.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const V=(w,K,z)=>(0,f.J)().replace(w,{...W,...K},z);return this.getDataLinkUIModel(b,V,{})}}let T;function O(B){T=B}function A(){return T||(T=new I),T}},51201:(J,R,e)=>{"use strict";e.d(R,{JI:()=>m,Kc:()=>u,ih:()=>i,qj:()=>d});var n=e(58103),a=e(64840),l=e(11818),r=e(31063),o=e(73431),g=e(33567);function m(c){return async(E,p)=>{if(c.libraryPanel?.uid&&!("model"in c.libraryPanel)){E(f(c));return}let h=c.type,y=p().plugins.panels[h];if(!y)try{y=await E((0,r.Ro)(h))}catch{y=(0,l.X)(h,h==="row")}c.plugin||await c.pluginLoaded(y),E((0,g.bc)({key:c.key,plugin:y}))}}function d(c){return E=>{E((0,g.WJ)({key:c}))}}function u({panel:c,pluginId:E,options:p,fieldConfig:h,transformations:y}){return async(s,v)=>{if(c.type===E&&!p&&!h&&!y)return;let D=v().plugins.panels[E];if(D||(D=await s((0,r.Ro)(E))),c.type!==E&&c.changePlugin(D),p||h||y){const M=(0,n.d4)({plugin:D,currentOptions:p||c.options,currentFieldConfig:h||c.fieldConfig,isAfterPluginChange:!1});c.options=M.options,c.fieldConfig=M.fieldConfig,c.transformations=y||c.transformations,c.configRev++}c.generateNewKey(),s((0,g.bc)({key:c.key,plugin:D}))}}function i(c,E){return async(p,h)=>{const y=E.model.type,s=c.type;if(c.restoreModel({...E.model,gridPos:c.gridPos,id:c.id,libraryPanel:E}),c.getQueryRunner().clearLastResult(),s!==y){let C=h().plugins.panels[y];C||(C=await p((0,r.Ro)(y))),await c.pluginLoaded(C),c.generateNewKey(),await p((0,g.bc)({key:c.key,plugin:C}))}else{const v=c.key;c.generateNewKey(),p((0,g.mr)({oldKey:v,newKey:c.key}))}c.configRev=0,c.hasSavedPanelEditChange=!0,c.refresh(),c.events.publish(o.pO),c.events.publish(o.Wj)}}function f(c){return async(E,p)=>{const h=c.libraryPanel.uid;try{const y=await(0,a.Mh)(h,!0);c.initLibraryPanel(y),await E(m(c));const s=p().dashboard.getModel();if(c.repeat&&s){const v=s.panels.findIndex(C=>C.id===c.id);s.repeatPanel(c,v),s.sortPanelsByGridPos(),s.events.publish(new o._B)}}catch(y){console.log("ERROR: ",y),E((0,g.bc)({key:c.key,plugin:(0,l.X)("Unable to load library panel: "+h,!1)}))}}}},33567:(J,R,e)=>{"use strict";e.d(R,{Vl:()=>u,WJ:()=>d,ZP:()=>f,bc:()=>r,mr:()=>m,o8:()=>o,pC:()=>g});var n=e(77960);const a={},l=(0,n.oM)({name:"panels",initialState:a,reducers:{panelModelAndPluginReady:(c,E)=>{c[E.payload.key]={plugin:E.payload.plugin}},changePanelKey:(c,E)=>{c[E.payload.newKey]=c[E.payload.oldKey],delete c[E.payload.oldKey]},removePanel:(c,E)=>{delete c[E.payload.key]},removeAllPanels:c=>{Object.keys(c).forEach(E=>delete c[E])},setPanelInstanceState:(c,E)=>{c[E.payload.key].instanceState=E.payload.value},setPanelAngularComponent:(c,E)=>{const p=c[E.payload.key];p.angularComponent=E.payload.angularComponent}}}),{panelModelAndPluginReady:r,setPanelAngularComponent:o,setPanelInstanceState:g,changePanelKey:m,removePanel:d,removeAllPanels:u}=l.actions,f={panels:l.reducer}},8213:(J,R,e)=>{"use strict";e.d(R,{r0:()=>i});var n=e(86832),a=e.n(n),l=e(57837),r=e(69307),o=e(81626),g=e(13601),m=e(89633);const d={kiosk:!0,autofitpanels:!0,orgId:!0};class u{constructor(){this.urls=[],this.index=0,this.numberOfLoops=0,this.isPlaying=!1,this.locationUpdated=this.locationUpdated.bind(this),this.api=(0,m.K9)()}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const E=this.urls[this.index],p=g.E1.getSearchObject(),h=(0,n.pickBy)(p,(s,v)=>d[v]),y=l.u.stripBaseFromUrl(E);this.index++,this.validPlaylistUrl=y,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),g.E1.push(y+"?"+r.Cj.toUrlParams(h))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(c){c.pathname!==this.validPlaylistUrl&&this.stop()}async start(c){this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=g.E1.getHistory().listen(this.locationUpdated);const E=[];let p=await this.api.getPlaylist(c);if(!p.items?.length)return;this.interval=o.intervalToMs(p.interval);const h=await(0,m.jc)(p.items);for(const y of h)if(y.dashboards)for(const s of y.dashboards)E.push(s.url);E.length&&(this.urls=E,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),g.E1.getSearchObject().kiosk&&g.E1.partial({kiosk:null}))}}const i=new u},89633:(J,R,e)=>{"use strict";e.d(R,{Ds:()=>C,K9:()=>D,d5:()=>v,jc:()=>s});var n=e(31312),a=e(98579),l=e(4148),r=e(32688),o=e(97316),g=e(90634),m=e(97125),d=e(55623),u=e(39064),i=e(74600),f=e(17231);class c{async getAllPlaylist(){return(0,l.i)().get("/api/playlists/")}async getPlaylist(P){const x=await(0,l.i)().get(`/api/playlists/${P}`);return await h(x),x}async createPlaylist(P){await y(()=>(0,l.i)().post("/api/playlists",P))}async updatePlaylist(P){await y(()=>(0,l.i)().put(`/api/playlists/${P.uid}`,P))}async deletePlaylist(P){await y(()=>(0,l.i)().delete(`/api/playlists/${P}`),"Playlist deleted")}}class E{constructor(){const P=m.contextSrv.user.orgId===1?"default":`org-${m.contextSrv.user.orgId}`;this.url=`/apis/playlist.x.grafana.com/v0alpha1/namespaces/${P}/playlists`,this.legacy=new c}async getAllPlaylist(){return(await(0,l.i)().get(this.url)).playlists.map(p)}async getPlaylist(P){const x=await(0,l.i)().get(this.url+"/"+P),S=p(x);return await h(S),S}async createPlaylist(P){if(this.legacy)return this.legacy.createPlaylist(P);await y(()=>(0,l.i)().post(this.url,{apiVersion:"playlists.grafana.com/v0alpha1",kind:"Playlist",metadata:{name:P.uid},spec:P}))}async updatePlaylist(P){if(this.legacy)return this.legacy.updatePlaylist(P);await y(()=>(0,l.i)().put(`${this.url}/${P.uid}`,{apiVersion:"playlists.grafana.com/v0alpha1",kind:"Playlist",metadata:{name:P.uid},spec:{...P,title:P.name}}))}async deletePlaylist(P){if(this.legacy)return this.legacy.deletePlaylist(P);await y(()=>(0,l.i)().delete(`${this.url}/${P}`),"Playlist deleted")}}function p(M){const{spec:P,metadata:x}=M;return{uid:x.name,name:P.title,interval:P.interval,items:P.items}}async function h(M){if(M?.items){for(const P of M.items)if(P.type==="dashboard_by_id"){P.type="dashboard_by_uid";const x=await(0,l.i)().get(`/api/dashboards/ids/${P.value}`);x?.length&&(P.value=x[0])}}}async function y(M,P="Playlist saved"){try{await M(),(0,i.WI)((0,o.$l)((0,g.AT)(P)))}catch(x){x instanceof Error&&(0,i.WI)((0,o.$l)((0,g.t_)("Unable to save playlist",x)))}}async function s(M){let P=0;if(!M?.length)return[];const x=[];for(const T of M){const O={query:"*",kind:["dashboard"],limit:1e3};switch(T.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":O.uid=[T.value];break;case"dashboard_by_tag":O.tags=[T.value];break}x.push({refId:`${P++}`,queryType:u.hR.Search,search:O})}if(!r.config.featureToggles.panelTitleSearch){const T=(0,f.getGrafanaSearcher)(),O=[];for(let A=0;A<x.length;A++){const B=(await T.search(x[A].search)).view;O.push({...M[A],dashboards:B.map(b=>({...b}))})}return O}const S=await(0,d.e)(),I=await(0,n.n)(S.query({targets:x}));if(I.data.length!==M.length)throw new Error("unexpected result size");return M.map((T,O)=>{const A=new a.U(I.data[O]);return{...T,dashboards:A.map(B=>({...B}))}})}function v(){return{items:[],interval:"5m",name:"",uid:""}}function C(M,P){return P?.length?(P=P.toLowerCase(),M.filter(x=>x.name.toLowerCase().includes(P))):M}function D(){return r.config.featureToggles.kubernetesPlaylists?new E:new c}},5811:(J,R,e)=>{"use strict";e.d(R,{$F:()=>m,E1:()=>c,GP:()=>p,GV:()=>g,P6:()=>h,Tk:()=>E,jL:()=>d});var n=e(52807),a=e(4148),l=e(26893),r=e(14776),o=e(51411);async function g(s){const v=await u(s),C=!!v,[D,M,P]=await Promise.all([c(),i(s,C),f(s)]),x=D.find(I=>I.id===s),S=x?.dependencies||v?.json?.dependencies;return{grafanaDependency:S?.grafanaDependency??S?.grafanaVersion??"",pluginDependencies:S?.plugins||[],links:x?.info.links||v?.json?.info.links||[],readme:P||v?.readme,versions:M,statusContext:v?.statusContext??""}}async function m(){try{const{items:s}=await(0,a.i)().get(`${r.tB}/plugins`,{includeDeprecated:!0});return s.filter(o.Ok)}catch(s){if((0,a.kW)(s))return s.isHandled=!0,console.error("Failed to fetch plugins from catalog (default https://grafana.com/api/plugins)"),[];throw s}}async function d(){try{return await(0,a.i)().get(`${r.O2}/errors`)}catch{return[]}}async function u(s){try{return await(0,a.i)().get(`${r.tB}/plugins/${s}`,{})}catch(v){(0,a.kW)(v)&&(v.isHandled=!0);return}}async function i(s,v){try{return v?((await(0,a.i)().get(`${r.tB}/plugins/${s}/versions`)).items||[]).map(D=>({version:D.version,createdAt:D.createdAt,isCompatible:D.isCompatible,grafanaDependency:D.grafanaDependency})):[]}catch(C){return(0,a.kW)(C)&&(C.isHandled=!0),[]}}async function f(s){try{const v=await(0,a.i)().get(`${r.O2}/${s}/markdown/README`);return v?(0,n.a)(v):""}catch(v){return(0,a.kW)(v)&&(v.isHandled=!0),""}}async function c(){return(await(0,a.i)().get(`${r.O2}`,(0,l.y)({embedded:0}))).filter(o.W5)}async function E(s){return await(0,a.i)().post(`${r.O2}/${s}/install`,void 0,{showErrorAlert:!1})}async function p(s){return await(0,a.i)().post(`${r.O2}/${s}/uninstall`)}async function h(s,v){return(await(0,a.i)().datasourceRequest({url:`/api/plugins/${s}/settings`,method:"POST",data:v}))?.data}const y={getRemotePlugins:m,getInstalledPlugins:c,installPlugin:E,uninstallPlugin:p}},30862:(J,R,e)=>{"use strict";e.d(R,{L:()=>r});var n=e(41407),a=e(39953),l=e(82803);const r=({children:g,wrap:m,className:d})=>{const u=(0,l.l4)(),i=o(u,m);return a.createElement("div",{className:(0,n.cx)(i.container,d)},g)},o=(g,m)=>({container:(0,n.css)`
    display: flex;
    flex-direction: row;
    flex-wrap: ${m?"wrap":"no-wrap"};
    & > * {
      margin-bottom: ${g.spacing()};
      margin-right: ${g.spacing()};
    }
    & > *:last-child {
      margin-right: 0;
    }
  `})},14776:(J,R,e)=>{"use strict";e.d(R,{O2:()=>n,tB:()=>a,uJ:()=>l});const n="/api/plugins",a="/api/gnet",l="plugins"},51411:(J,R,e)=>{"use strict";e.d(R,{AA:()=>y,HT:()=>P,Nh:()=>h,Ok:()=>S,RU:()=>D,Uj:()=>p,W5:()=>x,XB:()=>C,ZG:()=>c,fG:()=>M,uR:()=>u});var n=e(30670),a=e(26234),l=e(32688),r=e(13475),o=e(21308),g=e(20367),m=e(57721),d=e(31931);function u(A=[],B=[],b){const W=[],V=s(b);return A.forEach(w=>{const K=B.find(G=>G.slug===w.id),z=V[w.id];K||W.push(i(w,void 0,z))}),B.forEach(w=>{const K=A.find(Q=>Q.id===w.slug),z=V[w.slug];w.status===d.Bs.Deprecated&&!K||W.push(i(K,w,z))}),W}function i(A,B,b){return!A&&B?f(B,b):A&&!B?c(A,b):E(A,B,b)}function f(A,B){const{name:b,slug:W,description:V,version:w,orgName:K,popularity:z,downloads:G,typeCode:Q,updatedAt:j,createdAt:F,status:k,angularDetected:_}=A,Y=!!B||T(Q);return{description:V,downloads:G,id:W,info:{logos:{small:`https://grafana.com/api/plugins/${W}/versions/${w}/logos/small`,large:`https://grafana.com/api/plugins/${W}/versions/${w}/logos/large`}},name:b,orgName:K,popularity:z,publishedAt:F,signature:v({remote:A,error:B}),updatedAt:j,hasUpdate:!1,isPublished:!0,isInstalled:Y,isDisabled:Y,isDeprecated:k===d.Bs.Deprecated,isCore:A.internal,isDev:!1,isEnterprise:k===d.Bs.Enterprise,type:Q,error:B?.errorCode,angularDetected:_}}function c(A,B){const{name:b,info:{description:W,version:V,logos:w,updated:K,author:z},id:G,dev:Q,type:j,signature:F,signatureOrg:k,signatureType:_,hasUpdate:Y,accessControl:Z,angularDetected:ae}=A,ce=!!B||T(j);return{description:W,downloads:0,id:G,info:{logos:w},name:b,orgName:z.name,popularity:0,publishedAt:"",signature:v({local:A,error:B}),signatureOrg:k,signatureType:_,updatedAt:K,installedVersion:V,hasUpdate:Y,isInstalled:!0,isDisabled:ce,isCore:F==="internal",isPublished:!1,isDeprecated:!1,isDev:!!Q,isEnterprise:!1,type:j,error:B?.errorCode,accessControl:Z,angularDetected:ae}}function E(A,B,b){const W=A?.info.version,V=B?.slug||A?.id||"",w=A?.type||B?.typeCode,K=!!b||T(w);let z={small:`/public/img/icn-${w}.svg`,large:`/public/img/icn-${w}.svg`};return B?z={small:`https://grafana.com/api/plugins/${V}/versions/${B.version}/logos/small`,large:`https://grafana.com/api/plugins/${V}/versions/${B.version}/logos/large`}:A&&A.info.logos&&(z=A.info.logos),{description:A?.info.description||B?.description||"",downloads:B?.downloads||0,hasUpdate:A?.hasUpdate||!1,id:V,info:{logos:z},isCore:!!(B?.internal||A?.signature===n.Xy.internal),isDev:!!A?.dev,isEnterprise:B?.status===d.Bs.Enterprise,isInstalled:!!A||K,isDisabled:K,isDeprecated:B?.status===d.Bs.Deprecated,isPublished:!0,name:B?.name||A?.name||"",orgName:B?.orgName||A?.info.author.name||"",popularity:B?.popularity||0,publishedAt:B?.createdAt||"",type:w,signature:v({local:A,remote:B,error:b}),signatureOrg:A?.signatureOrg||B?.versionSignedByOrgName,signatureType:A?.signatureType||B?.versionSignatureType||B?.signatureType||void 0,updatedAt:B?.updatedAt||A?.info.updated||"",installedVersion:W,error:b?.errorCode,accessControl:A?.accessControl,angularDetected:A?.angularDetected||B?.angularDetected}}const p=A=>`${l.config.pluginCatalogURL}${A}`;var h=(A=>(A.nameAsc="nameAsc",A.nameDesc="nameDesc",A.updated="updated",A.published="published",A.downloads="downloads",A))(h||{});const y=(A,B)=>{const b={nameAsc:(W,V)=>W.name.localeCompare(V.name),nameDesc:(W,V)=>V.name.localeCompare(W.name),updated:(W,V)=>(0,a.J)(V.updatedAt).valueOf()-(0,a.J)(W.updatedAt).valueOf(),published:(W,V)=>(0,a.J)(V.publishedAt).valueOf()-(0,a.J)(W.publishedAt).valueOf(),downloads:(W,V)=>V.downloads-W.downloads};return b[B]?A.sort(b[B]):A};function s(A=[]){return A.reduce((B,b)=>(B[b.pluginId]=b,B),{})}function v(A){const{error:B,local:b,remote:W}=A;if(B)switch(B.errorCode){case n.w2.invalidSignature:return n.Xy.invalid;case n.w2.missingSignature:return n.Xy.missing;case n.w2.modifiedSignature:return n.Xy.modified}return b?.signature?b.signature:W?.signatureType&&W?.versionSignatureType?n.Xy.valid:n.Xy.missing}const C=()=>(0,g.i)().get("/api/frontend/settings").then(A=>{l.config.panels=A.panels});function D(A){if(!A)return;const[B]=A.filter(b=>!!b.isCompatible);return B}const M=()=>l.config.pluginAdminEnabled,P=(A,B,b)=>{const W=l.config.pluginAdminExternalManageEnabled,V=o.Vt.hasPermission(m.AccessControlAction.PluginsInstall),w=!!b;return A.type===n.zV.renderer||A.type===n.zV.secretsmanager||A.isEnterprise&&!(0,r.v)("enterprise.plugins")||A.isDev||!V&&!W||!A.isPublished||!w||!B},x=A=>I(A.id),S=A=>I(A.slug);function I(A){const{pluginCatalogHiddenPlugins:B}=l.config;return!B.includes(A)}function T(A){return A===n.zV.secretsmanager&&!l.config.secretsManagerPluginEnabled}function O(A){return A?.signature==="internal"}},31063:(J,R,e)=>{"use strict";e.d(R,{DD:()=>s,LP:()=>T,N9:()=>P,Qd:()=>p,Ro:()=>O,Tz:()=>S,bQ:()=>x,bp:()=>h,m3:()=>I,tQ:()=>y,wx:()=>v});var n=e(77960),a=e(22605),l=e(10752),r=e(63302),o=e(74539),g=e(77830),m=e(31312),d=e(4148),u=e(13090),i=e(12700),f=e(5811),c=e(14776),E=e(51411);const p=(0,n.hg)(`${c.uJ}/fetchAll`,async(A,B)=>{try{B.dispatch({type:`${c.uJ}/fetchLocal/pending`}),B.dispatch({type:`${c.uJ}/fetchRemote/pending`});const b=500,W=(0,a.D)((0,f.jL)()),V=(0,a.D)((0,f.E1)()),w=(0,a.D)((0,f.$F)()).pipe((0,l.K)(K=>(B.dispatch({type:`${c.uJ}/fetchRemote/rejected`}),console.error(K),(0,r.of)([]))));return(0,o.D)({local:V,remote:w,pluginErrors:W}).pipe((0,g.V)({each:b,with:()=>(w.subscribe(async K=>{if(B.dispatch({type:`${c.uJ}/fetchRemote/fulfilled`}),K.length>0){const z=await(0,m.n)(V),G=await(0,m.n)(W);B.dispatch(v((0,E.uR)(z,K,G)))}}),(0,o.D)({local:V,pluginErrors:W}))})).subscribe(({local:K,remote:z,pluginErrors:G})=>{K&&z?(B.dispatch({type:`${c.uJ}/fetchLocal/fulfilled`}),B.dispatch({type:`${c.uJ}/fetchRemote/fulfilled`}),B.dispatch(v((0,E.uR)(K,z,G)))):K&&(B.dispatch({type:`${c.uJ}/fetchLocal/fulfilled`}),B.dispatch(v((0,E.uR)(K,[],G))))},K=>(console.error(K),B.dispatch({type:`${c.uJ}/fetchLocal/rejected`}),B.dispatch({type:`${c.uJ}/fetchRemote/rejected`}),B.rejectWithValue("Unknown error."))),null}catch{return B.rejectWithValue("Unknown error.")}}),h=(0,n.hg)(`${c.uJ}/fetchAllLocal`,async(A,B)=>{try{return(await(0,f.E1)()).map(W=>(0,E.ZG)(W))}catch{return B.rejectWithValue("Unknown error.")}}),y=(0,n.hg)(`${c.uJ}/fetchRemotePlugins`,async(A,B)=>{try{return await(0,f.$F)()}catch(b){return(0,d.kW)(b)&&(b.isHandled=!0),B.rejectWithValue([])}}),s=(0,n.hg)(`${c.uJ}/fetchDetails`,async(A,B)=>{try{const b=await(0,f.GV)(A);return{id:A,changes:{details:b}}}catch{return B.rejectWithValue("Unknown error.")}}),v=(0,n.PH)(`${c.uJ}/addPlugins`),C=(0,n.PH)(`${c.uJ}/addLocalPlugins`),D=(0,n.PH)(`${c.uJ}/addLocalPlugins`),M=(0,n.PH)(`${c.uJ}/addLocalPlugins`),P=(0,n.hg)(`${c.uJ}/install`,async({id:A,version:B,isUpdating:b=!1},W)=>{const V=b?{isInstalled:!0,installedVersion:B,hasUpdate:!1}:{isInstalled:!0,installedVersion:B};try{return await(0,f.Tk)(A),await(0,E.XB)(),b&&(0,i.Hl)(A),{id:A,changes:V}}catch(w){return console.error(w),(0,d.kW)(w)?W.rejectWithValue(w.data):W.rejectWithValue("Unknown error.")}}),x=(0,n.hg)(`${c.uJ}/install`,async()=>({})),S=(0,n.hg)(`${c.uJ}/uninstall`,async(A,B)=>{try{return await(0,f.GP)(A),await(0,E.XB)(),(0,i.Hl)(A),{id:A,changes:{isInstalled:!1,installedVersion:void 0}}}catch(b){return console.error(b),B.rejectWithValue("Unknown error.")}}),I=(0,n.hg)(`${c.uJ}/loadPluginDashboards`,async(A,B)=>{const V=`api/plugins/${B.getState().dataSources.dataSource.type}/dashboards`;return(0,d.i)().get(V)}),T=(0,n.PH)(`${c.uJ}/panelPluginLoaded`),O=A=>async(B,b)=>{let W=b().plugins.panels[A];return W||(W=await(0,u.Ub)(A),b().plugins.panels[A]||B(T(W))),W}},2263:(J,R,e)=>{"use strict";e.d(R,{CD:()=>o,I6:()=>E,UC:()=>c});var n=e(77960),a=e(14776),l=e(31931),r=e(31063);const o=(0,n.HF)(),g=p=>new RegExp(`${a.uJ}/(.*)/pending`).test(p.type),m=p=>new RegExp(`${a.uJ}/(.*)/fulfilled`).test(p.type),d=p=>new RegExp(`${a.uJ}/(.*)/rejected`).test(p.type),u=p=>{const h=p.lastIndexOf("/");return p.substring(0,h)},i={items:o.getInitialState(),requests:{},settings:{displayMode:l.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},f=(0,n.oM)({name:"plugins",initialState:i,reducers:{setDisplayMode(p,h){p.settings.displayMode=h.payload}},extraReducers:p=>p.addCase(r.wx,(h,y)=>{o.upsertMany(h.items,y.payload)}).addCase(r.bp.fulfilled,(h,y)=>{o.upsertMany(h.items,y.payload)}).addCase(r.DD.fulfilled,(h,y)=>{o.updateOne(h.items,y.payload)}).addCase(r.N9.fulfilled,(h,y)=>{o.updateOne(h.items,y.payload)}).addCase(r.Tz.fulfilled,(h,y)=>{o.updateOne(h.items,y.payload)}).addCase(r.LP,(h,y)=>{h.panels[y.payload.meta.id]=y.payload}).addCase(r.m3.pending,(h,y)=>{h.isLoadingPluginDashboards=!0,h.dashboards=[]}).addCase(r.m3.fulfilled,(h,y)=>{h.isLoadingPluginDashboards=!1,h.dashboards=y.payload}).addMatcher(g,(h,y)=>{h.requests[u(y.type)]={status:l.eE.Pending}}).addMatcher(m,(h,y)=>{h.requests[u(y.type)]={status:l.eE.Fulfilled}}).addMatcher(d,(h,y)=>{h.requests[u(y.type)]={status:l.eE.Rejected,error:y.payload}})}),{setDisplayMode:c}=f.actions,E=f.reducer},31931:(J,R,e)=>{"use strict";e.d(R,{Bs:()=>r,Co:()=>l,cd:()=>a,eE:()=>d,lL:()=>n,tu:()=>m,vF:()=>o,xc:()=>g});var n=(u=>(u.Grid="grid",u.List="list",u))(n||{}),a=(u=>(u.Home="plugins-home",u.Browse="plugins-browse",u.Details="plugins-details",u))(a||{}),l=(u=>(u.app="apps",u.datasource="database",u.panel="credit-card",u.renderer="capture",u.secretsmanager="key-skeleton-alt",u))(l||{}),r=(u=>(u.Deleted="deleted",u.Active="active",u.Pending="pending",u.Deprecated="deprecated",u.Enterprise="enterprise",u))(r||{}),o=(u=>(u.INSTALL="INSTALL",u.UNINSTALL="UNINSTALL",u.UPDATE="UPDATE",u.REINSTALL="REINSTALL",u))(o||{}),g=(u=>(u.OVERVIEW="Overview",u.VERSIONS="Version history",u.CONFIG="Config",u.DASHBOARDS="Dashboards",u.USAGE="Usage",u))(g||{}),m=(u=>(u.OVERVIEW="overview",u.VERSIONS="version-history",u.CONFIG="config",u.DASHBOARDS="dashboards",u.USAGE="usage",u))(m||{}),d=(u=>(u.Pending="Pending",u.Fulfilled="Fulfilled",u.Rejected="Rejected",u))(d||{})},2106:(J,R,e)=>{"use strict";e.d(R,{e:()=>a});var n=e(32688);function a(l){return Object.entries(n.config.datasources).some(([r,o])=>o.uid===l&&o.angularDetected)}},48474:(J,R,e)=>{"use strict";e.d(R,{a:()=>r,v:()=>a});var n=e(39953);const a=n.createContext(l());a.displayName="PluginPageContext";function l(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function r(o){return{sectionNav:o??l().sectionNav}}},52436:(J,R,e)=>{"use strict";e.d(R,{ND:()=>h,ak:()=>v});var n=e(86832),a=e.n(n),l=e(54721),r=e(71519),o=e(79059),g=e(12384),m=e(4148),d=e(26205),u=e(92743),i=e(28833),f=e(50820),c=e(1464),E=e(29409),p=e(56586);class h{constructor(D=(0,o.J)()){this.templateSrv=D,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(D,M){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=D,this.defaultName=M;for(const P of Object.values(D))P.uid||(P.uid=P.name),this.settingsMapByUid[P.uid]=P,this.settingsMapById[P.id]=P;this.datasources[u.hr.type]=c.mV,this.datasources[E.Yq]=c.mV,this.settingsMapByUid[u.hr.uid]=c.bE,this.settingsMapByUid[E.Yq]=c.bE}getDataSourceSettingsByUid(D){return this.settingsMapByUid[D]}getInstanceSettings(D,M){let P=y(D);if((0,u.Pr)(P))return c.bE;if(P==="default"||P==null)return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName];if(P[0]==="$"){const x=this.templateSrv.replace(P,M,s);let S;return x==="default"?S=this.settingsMapByName[this.defaultName]:S=this.settingsMapByUid[x]??this.settingsMapByName[x],S?{...S,isDefault:!1,name:P,uid:P,rawRef:{type:S.type,uid:S.uid}}:void 0}return this.settingsMapByUid[P]??this.settingsMapByName[P]??this.settingsMapById[P]}get(D,M){let P=y(D);if(!P)return this.get(this.defaultName);if((0,u.Pr)(D))return Promise.resolve(this.datasources[E.Yq]);const x=this.settingsMapByName[P];return x&&(P=x.uid),this.datasources[P]?Promise.resolve(this.datasources[P]):(P=this.templateSrv.replace(P,M,s),P==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[P]?Promise.resolve(this.datasources[P]):this.loadDatasource(P))}async loadDatasource(D){if(this.datasources[D])return Promise.resolve(this.datasources[D]);const M=this.getInstanceSettings(D);if(!M)return Promise.reject({message:`Datasource ${D} was not found`});try{const P=await(0,p.nL)(M.meta);if(this.datasources[D])return this.datasources[D];const x=P.DataSourceClass.length!==1;let S;if(x?S=(0,g.V)().instantiate(P.DataSourceClass,{instanceSettings:M}):S=new P.DataSourceClass(M),S.components=P.components,!(S instanceof l.MF)){const I=S;I.name=M.name,I.id=M.id,I.type=M.type,I.meta=M.meta,I.uid=M.uid,S.getRef=l.MF.prototype.getRef}return this.datasources[D]=S,this.datasources[S.uid]=S,S}catch(P){return P instanceof Error&&i.Z.emit(r.SI.alertError,[M.name+" plugin failed",P.toString()]),Promise.reject({message:`Datasource: ${D} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(D={}){const M=Object.values(this.settingsMapByName).filter(x=>!(x.meta.id==="grafana"||x.meta.id==="mixed"||x.meta.id==="dashboard"||D.metrics&&!x.meta.metrics||D.tracing&&!x.meta.tracing||D.logs&&x.meta.category!=="logging"&&!x.meta.logs||D.annotations&&!x.meta.annotations||D.alerting&&!x.meta.alerting||D.pluginId&&!(x.meta.id===D.pluginId||(0,n.some)(x.meta.aliasIDs,S=>S===D.pluginId))||D.filter&&!D.filter(x)||D.type&&(Array.isArray(D.type)?!D.type.includes(x.type):D.type!==x.type)||!D.all&&x.meta.metrics!==!0&&x.meta.annotations!==!0&&x.meta.tracing!==!0&&x.meta.logs!==!0&&x.meta.alerting!==!0));if(D.variables)for(const x of this.templateSrv.getVariables()){if(x.type!=="datasource")continue;let S=x.current.value==="default"?this.defaultName:x.current.value;Array.isArray(S)&&S.length===1&&(S=S[0]);const I=!Array.isArray(S)&&(this.settingsMapByName[S]||this.settingsMapByUid[S]);if(I){const T=`\${${x.name}}`;M.push({...I,isDefault:!1,name:T,uid:T})}}const P=M.sort((x,S)=>x.name.toLowerCase()>S.name.toLowerCase()?1:x.name.toLowerCase()<S.name.toLowerCase()?-1:0);if(!D.pluginId&&!D.alerting){if(D.mixed){const x=this.getInstanceSettings("-- Mixed --");x&&M.push(x)}if(D.dashboard){const x=this.getInstanceSettings("-- Dashboard --");x&&M.push(x)}if(!D.tracing){const x=this.getInstanceSettings("-- Grafana --");x&&M.push(x)}}return P}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(D=>({name:D.name,value:D.name,meta:D.meta}))}getMetricSources(D){return this.getList({metrics:!0,variables:!D?.skipVariables}).map(M=>({name:M.name,value:M.name,meta:M.meta}))}async reload(){const D=await(0,m.i)().get("/api/frontend/settings");f.default.datasources=D.datasources,f.default.defaultDatasource=D.defaultDatasource,this.init(D.datasources,D.defaultDatasource)}}function y(C){return(0,u.Pr)(C)?u.hr.uid:typeof C=="string"?C:C?.uid}function s(C){return Array.isArray(C)?C[0]:C}const v=()=>(0,d.F)()},72137:(J,R,e)=>{"use strict";e.d(R,{CR:()=>M,Ch:()=>E,IX:()=>i,KE:()=>u,_A:()=>h,eP:()=>f,ew:()=>x,fD:()=>v,lu:()=>y});var n=e(41407),a=e(86832),l=e.n(a),r=e(39953),o=e(41175),g=e(73075),m=e(28833),d=e(73431);function u(S){console.warn(`[Plugin Extensions] ${S}`)}function i(S){return typeof S=="object"&&"type"in S&&S.type===o.D.link}function f(S){return typeof S=="object"&&"type"in S&&S.type===o.D.component}function c(S,I=""){return(...T)=>{try{return S(...T)}catch(O){O instanceof Error&&console.warn(`${I}${O.message}`)}}}function E(S){return{openModal:T=>{const{title:O,body:A,width:B,height:b}=T;m.Z.publish(new d.Dn({component:p({title:O,body:A,width:B,height:b})}))},context:S}}const p=({title:S,body:I,width:T,height:O})=>{const A=(0,n.css)({width:T,height:O});return({onDismiss:b})=>r.createElement(g.u,{title:S,className:A,isOpen:!0,onDismiss:b,onClickBackdrop:b},r.createElement(I,{onDismiss:b}))};function h(S,I=new Map){if(!S||typeof S!="object"||Object.isFrozen(S))return S;const T=Array.isArray(S)?[...S]:{...S};if(I.has(S))return I.get(S);I.set(S,T);const O=Reflect.ownKeys(T);for(const A of O){const B=Array.isArray(T)?T[Number(A)]:T[A];B&&(typeof B=="object"||typeof B=="function")&&(Array.isArray(T)?T[Number(A)]=h(B,I):T[A]=h(B,I))}return Object.freeze(T)}function y(S,I){const T=`${S}${I.extensionPointId}${I.title}`;return Array.from(T).reduce((O,A)=>Math.imul(31,O)+A.charCodeAt(0)|0,0).toString()}const s=Symbol("isReadOnlyProxy");function v(S){if(!S||typeof S!="object"||D(S))return S;const I=new WeakMap;return new Proxy(S,{defineProperty:()=>!1,deleteProperty:()=>!1,isExtensible:()=>!1,set:()=>!1,get(T,O,A){if(O===s)return!0;const B=Reflect.get(T,O,A);return(0,a.isObject)(B)||(0,a.isArray)(B)?(I.has(B)||I.set(B,v(B)),I.get(B)):B}})}function C(S){return typeof S=="object"&&S!==null}function D(S){return C(S)&&S[s]===!0}function M(S){const I={type:o.D.link,...S};return P(I),I}function P(S){if(S.type!==o.D.link)throw Error("config is not a extension link")}function x(S,I){return S.length<I?S:`${S.slice(0,I-3).trimEnd()}...`}},13090:(J,R,e)=>{"use strict";e.d(R,{Ub:()=>m,_2:()=>i,eD:()=>d,pv:()=>u,q1:()=>f,wG:()=>p});var n=e(40530),a=e(50820),l=e(11818),r=e(56586);const o={},g={};function m(h){const y=o[h];if(y)return y;const s=u(h);if(!s)throw new Error(`Plugin ${h} not found`);return o[h]=c(s),h!==s.type&&(o[s.type]=o[h]),o[h]}function d(h){return!!u(h)}function u(h){const y=a.default.panels[h];if(!y){for(const s of Object.values(a.default.panels))if(s.aliasIDs?.includes(h))return s}return y}function i(h){return c(h)}function f(h){return g[h]}function c(h){return(0,r.N$)({path:h.module,version:h.info?.version,isAngular:h.angularDetected,pluginId:h.id}).then(y=>{if(y.plugin)return y.plugin;if(y.PanelCtrl){const s=new n.c(null);return s.angularPanelCtrl=y.PanelCtrl,s}throw new Error("missing export: plugin or PanelCtrl")}).then(y=>(y.meta=h,g[h.id]=y,!y.panel&&y.angularPanelCtrl&&(y.panel=E(y)),y)).catch(y=>(console.warn("Error loading panel plugin: "+h.id,y),(0,l.F)(h,y)))}let E=h=>null;function p(h){E=h}},12700:(J,R,e)=>{"use strict";e.d(R,{Hl:()=>o,Vf:()=>r,u0:()=>g});var n=e(33558);const a={},l=Date.now();function r({path:d,version:u}){const i=m(d);i&&!a[i]&&(a[i]=encodeURI(u))}function o(d){const u=`plugins/${d}/module`;a[u]&&delete a[u],(0,n.Z)(d)}function g(d,u=l){const i=m(d);if(!i)return`${d}?_cache=${u}`;const c=a[i]||u;return`${d}?_cache=${c}`}function m(d){const u=/\/.+\/(plugins\/.+\/module)\.js/i.exec(d);if(!u)return;const[i,f]=u;if(f)return f}},86118:(J,R,e)=>{"use strict";e.d(R,{Nr:()=>l,OY:()=>n,YB:()=>r,xm:()=>a});const n="package",a=/^plugins.+\.css$/i,l=/^(text|application)\/(x-)?javascript(;|$)/,r=/(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF.])define\s*\(\s*("[^"]+"\s*,\s*|'[^']+'\s*,\s*)?\s*(\[(\s*(("[^"]+"|'[^']+')\s*,|\/\/.*\r?\n))*(\s*("[^"]+"|'[^']+')\s*,?)?(\s*(\/\/.*\r?\n|\/\*\/))*\s*\]|function\s*|{|[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*\))/},37860:(J,R,e)=>{"use strict";e.d(R,{t:()=>i,g:()=>f});var n=e(32688),a=e(2292),l=e(63495),r=e(86118),o=e(54538);const g=new WeakMap,m={};function d(c,E,p){const h={get(y,s){if(document.currentScript===null&&typeof s!="symbol"&&s.toString()!=="__useDefault"){const C=`${E}.${String(s)}`,D=`${C}`;m[D]||(m[D]=!0,(0,o.PN)(`Plugin using ${C}`,{key:String(s),parent:E,packageName:p}))}const v=Reflect.get(y,s);return v!==null&&typeof v=="object"&&!(v instanceof RegExp)?(g.has(v)||g.set(v,d(v,`${E}.${String(s)}`,p)),g.get(v)):v}};return typeof c=="object"&&c!==null?new Proxy(c,h):c}function u(c,E){return d(c,E,E)}function i(c){return Object.keys(c).reduce((E,p)=>{const h=`${r.OY}:${p}`,y=n.config.featureToggles.pluginsAPIMetrics?u(c[p],p):c[p];return a.i3.set(h,y),l.g.set(p,c[p]),E[p]=h,E},{})}function f(c){return!!n.config.pluginsCDNBaseURL&&c.startsWith(n.config.pluginsCDNBaseURL)}},33558:(J,R,e)=>{"use strict";e.d(R,{Z:()=>r,a:()=>l});var n=e(4148);const a={};function l(o,g){const m=a[o];return m?Promise.resolve(m):(0,n.i)().get(`/api/plugins/${o}/settings`,void 0,void 0,g).then(d=>(a[o]=d,d)).catch(d=>Promise.reject(new Error("Unknown Plugin")))}const r=o=>o?delete a[o]:Object.keys(a).forEach(g=>delete a[g])},56586:(J,R,e)=>{"use strict";e.d(R,{Av:()=>bp,nL:()=>Cp,N$:()=>Fl});var n={};e.r(n),e.d(n,{plugin:()=>Ue});var a={};e.r(a),e.d(a,{plugin:()=>en});var l={};e.r(l),e.d(l,{plugin:()=>rs});var r={};e.r(r),e.d(r,{plugin:()=>uu});var o={};e.r(o),e.d(o,{plugin:()=>pu});var g={};e.r(g),e.d(g,{plugin:()=>uc});var m={};e.r(m),e.d(m,{plugin:()=>Fu});var d={};e.r(d),e.d(d,{plugin:()=>im});var u={};e.r(u),e.d(u,{plugin:()=>um});var i={};e.r(i),e.d(i,{plugin:()=>fm});var f={};e.r(f),e.d(f,{plugin:()=>Cm});var c={};e.r(c),e.d(c,{plugin:()=>xm});var E={};e.r(E),e.d(E,{plugin:()=>ks});var p={};e.r(p),e.d(p,{plugin:()=>zc});var h={};e.r(h),e.d(h,{plugin:()=>Um});var y={};e.r(y),e.d(y,{plugin:()=>Vm});var s={};e.r(s),e.d(s,{plugin:()=>ef});var v={};e.r(v),e.d(v,{plugin:()=>sf});var C={};e.r(C),e.d(C,{plugin:()=>of});var D={};e.r(D),e.d(D,{plugin:()=>Wo});var M={};e.r(M),e.d(M,{plugin:()=>Sf});var P={};e.r(P),e.d(P,{plugin:()=>Ff});var x={};e.r(x),e.d(x,{plugin:()=>$f});var S={};e.r(S),e.d(S,{plugin:()=>jp});var I={};e.r(I),e.d(I,{plugin:()=>kf});var T={};e.r(T),e.d(T,{plugin:()=>rg});var O=e(54721),A=e(96083),B=e(2292),b=e(39953),W=e(40530),V=e(95712),w=e(32688),K=e(64447),z=e(26544),G=e(79493),Q=e(14949),j=e(63483),F=e(57675),k=e(57721),_=e(41407),Y=e(5195),Z=e(82803),ae=e(4919),ce=e(4353),q=e(98934),De=e(66706),oe=e(57716),te=e(76716),fe=e(47858);const Te=({alertManagerSourceName:U,group:ee,expandAll:ie})=>{const[Ee,Se]=(0,b.useState)(ie),Ae=(0,Z.wW)(ge),Ce=(0,Z.wW)(oe.r);return(0,b.useEffect)(()=>Se(ie),[ie]),b.createElement("div",{className:Ae.group,"data-testid":"alert-group"},Object.keys(ee.labels).length>0?b.createElement(ce.s,{labels:ee.labels,size:"sm"}):b.createElement("div",{className:Ae.noGroupingText},"No grouping"),b.createElement("div",{className:Ae.row},b.createElement(q.U,{isCollapsed:!Ee,onToggle:()=>Se(!Ee)})," ",b.createElement(De.Z,{group:ee})),Ee&&b.createElement("div",{className:Ae.alerts},ee.alerts.map((Ve,Je)=>{const qe=Ve.status.state.toUpperCase(),it=(0,Y.vT)({start:new Date(Ve.startsAt),end:Date.now()});return b.createElement("div",{"data-testid":"alert-group-alert",className:Ae.alert,key:`${Ve.fingerprint}-${Je}`},b.createElement("div",null,b.createElement("span",{className:Ce[Ve.status.state]},qe," "),"for ",it),b.createElement("div",null,b.createElement(ce.s,{labels:Ve.labels,size:"sm"})),b.createElement("div",{className:Ae.actionsRow},Ve.status.state===fe.Z9.Suppressed&&b.createElement(ae.Qj,{href:`${(0,te.eQ)("/alerting/silences",U)}&silenceIds=${Ve.status.silencedBy.join(",")}`,className:Ae.button,icon:"bell",size:"sm"},"Manage silences"),Ve.status.state===fe.Z9.Active&&b.createElement(ae.Qj,{href:(0,te.VN)(U,Ve.labels),className:Ae.button,icon:"bell-slash",size:"sm"},"Silence"),Ve.generatorURL&&b.createElement(ae.Qj,{className:Ae.button,href:Ve.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},ge=U=>({noGroupingText:(0,_.css)`
    height: ${U.spacing(4)};
  `,group:(0,_.css)`
    background-color: ${U.colors.background.secondary};
    margin: ${U.spacing(.5,1,.5,1)};
    padding: ${U.spacing(1)};
  `,row:(0,_.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${U.spacing(1)};
  `,alerts:(0,_.css)`
    margin: ${U.spacing(0,2,0,4)};
  `,alert:(0,_.css)`
    padding: ${U.spacing(1,0)};
    & + & {
      border-top: 1px solid ${U.colors.border.medium};
    }
  `,button:(0,_.css)`
    & + & {
      margin-left: ${U.spacing(1)};
    }
  `,actionsRow:(0,_.css)`
    padding: ${U.spacing(1,0)};
  `}),he=(U,ee)=>(0,b.useMemo)(()=>U.filter(ie=>(0,Q.eD)(ie.labels,ee)||ie.alerts.some(Ee=>(0,Q.eD)(Ee.labels,ee))),[U,ee]),me=U=>{const ee=(0,k.useDispatch)(),ie=w.config.unifiedAlertingEnabled,Ee=U.options.expandAll,Se=U.options.alertmanager,Ce=((0,z._)(it=>it.amAlertGroups)||F.oq)[Se||""]?.result||[],Ve=U.options.labels?(0,Q.Zh)(U.options.labels):[],Je=he(Ce,Ve);(0,b.useEffect)(()=>{function it(){Se&&ee((0,G.mS)(Se))}it();const gt=setInterval(it,j.iF);return()=>{clearInterval(gt)}},[ee,Se]);const qe=Je.length>0;return b.createElement(K.$,{autoHeightMax:"100%",autoHeightMin:"100%"},ie&&b.createElement("div",null,qe&&Je.map(it=>b.createElement(Te,{alertManagerSourceName:Se,key:JSON.stringify(it.labels),group:it,expandAll:Ee})),!qe&&"No alerts"))};var ye=e(9558);function ue(U){return U.name===V.GC?"Grafana":U.name.slice(0,37)}const Oe=({onChange:U,current:ee,dataSources:ie})=>{const Ee=(0,b.useMemo)(()=>ie.map(Se=>({label:ue(Se),value:Se.name,imgUrl:Se.imgUrl,meta:Se.meta})),[ie]);return b.createElement(ye.Ph,{"aria-label":"Choose Alertmanager",width:29,backspaceRemovesValue:!1,onChange:Se=>Se.value&&U(Se.value),options:Ee,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:ee,getOptionLabel:Se=>Se.label})},Ue=new W.c(me).setPanelOptions(U=>U.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:V.GC,category:["Options"],editor:function(ie){const Ee=(0,b.useMemo)(V.z3,[]);return b.createElement(Oe,{current:ie.value,onChange:Se=>ie.onChange(Se),dataSources:Ee})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var at=e(97250),Ne=e(67979),_e=e(97368),Ke=e.n(_e),et=e(28888),ze=e(9738),je=e(44622);async function Qe({query:U,permissionLevel:ee}){return(await(0,je.ZL)(U,ee)).map(Se=>({id:Se.id,title:Se.title,url:Se.url}))}async function We({query:U,permissionLevel:ee,extraFolders:ie}){const Ee=await Qe({query:U,permissionLevel:ee}),Se=ie??[],Ae=U?Se.filter(Ce=>Ce.title?.toLowerCase().includes(U.toLowerCase())):Se;return Ee?Ae.concat(Ee):Ae}async function ke({query:U,permissionLevel:ee=k.PermissionLevelString.View,extraFolders:ie=[]}){return(await We({query:U,permissionLevel:ee,extraFolders:ie})).map(Se=>({value:Se,label:Se.title}))}function ot(U,ee){return U?.find(ie=>ie.value?.id===ee)}async function lt(U){if(U!=null)try{const{id:ee,title:ie}=await(0,je.EW)(U);return{value:{id:ee,title:ie},label:ie}}catch{console.error(`Could not find folder with id:${U}`)}}const Ct={id:void 0,title:"All"},wt={id:ze.pW,title:ze.fy};function Lt({onChange:U,extraFolders:ee=[],initialFolderId:ie,permissionLevel:Ee=k.PermissionLevelString.View}){const[Se,Ae]=(0,b.useState)(!1),[Ce,Ve]=(0,b.useState)(void 0),[Je,qe]=(0,b.useState)(void 0),it=(0,b.useCallback)(async Tt=>{let Ut=ot(Tt,ie);Ut||(Ut=await lt(ie)??Tt[0],U(Ut.value)),Ae(!0),qe(Tt),Ve(Ut)},[ie,U]),gt=(0,b.useCallback)(async Tt=>{const Ut=await ke({query:Tt,permissionLevel:Ee,extraFolders:ee});return Se||await it(Ut),Ut},[Ee,ee,Se,it]),Ot=Ke()(gt,300,{leading:!0}),pt=(0,b.useCallback)(({value:Tt})=>{const Ut=ot(Je,Tt?.id);Ve(Ut),U(Tt)},[Je,U]);return b.createElement("div",{"data-testid":et.wl.components.ReadonlyFolderPicker.container},b.createElement(ye.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:Ce,value:Ce,loadOptions:Ot,onChange:pt}))}var Ye=e(92811),Be=e(86832),Le=e.n(Be),le=e(20653),de=e(92403),X=e(77877),se=e(4148),re=e(4236),pe=e(12190),be=e(5026),xe=e(97433),Pe=e(3);function we(U){const[ee,ie]=(0,b.useState)(""),Ee=(0,le.Z)(async()=>{if(U.options.showOptions!==Pe.kx.Current)return;const Ce={state:He(U.options.stateFilter)};U.options.alertName&&(Ce.query=U.replaceVariables(U.options.alertName)),U.options.folderId>=0&&(Ce.folderId=U.options.folderId),U.options.dashboardTitle&&(Ce.dashboardQuery=U.options.dashboardTitle),U.options.dashboardAlerts&&(Ce.dashboardId=(0,xe.h4)().getCurrent()?.id),U.options.tags&&(Ce.dashboardTag=U.options.tags);const Ve=await(0,se.i)().get("/api/alerts",Ce,`alert-list-get-current-alert-state-${U.id}`);let Je=Fe(U.options.sortOrder,Ve.map(qe=>({...qe,stateModel:be.Z.getStateDisplayModel(qe.state),newStateDateAgo:(0,de.CQ)(qe.newStateDate).locale("en").fromNow(!0)})));return Je.length>U.options.maxItems&&(Je=Je.slice(0,U.options.maxItems)),ie(Je.length===0?"No alerts":""),Je},[U.options.showOptions,U.options.stateFilter.alerting,U.options.stateFilter.execution_error,U.options.stateFilter.no_data,U.options.stateFilter.ok,U.options.stateFilter.paused,U.options.stateFilter.pending,U.options.maxItems,U.options.tags,U.options.dashboardAlerts,U.options.dashboardTitle,U.options.folderId,U.options.alertName,U.options.sortOrder,U.timeRange]),Se=(0,le.Z)(async()=>{if(U.options.showOptions!==Pe.kx.RecentChanges)return;const Ce={limit:U.options.maxItems,type:"alert",newState:He(U.options.stateFilter)},Ve=(0,xe.h4)().getCurrent();U.options.dashboardAlerts&&(Ce.dashboardId=Ve?.id),Ce.from=X.parse(Ve?.time.from).unix()*1e3,Ce.to=X.parse(Ve?.time.to).unix()*1e3;const Je=await(0,se.i)().get("/api/annotations",Ce,`alert-list-get-state-changes-${U.id}`),qe=Fe(U.options.sortOrder,Je.map(it=>({...it,time:Ve?.formatDate(it.time,"MMM D, YYYY HH:mm:ss"),stateModel:be.Z.getStateDisplayModel(it.newState),info:be.Z.getAlertAnnotationInfo(it)})));return ie(qe.length===0?"No alerts in current time range":""),qe},[U.options.showOptions,U.options.maxItems,U.options.stateFilter.alerting,U.options.stateFilter.execution_error,U.options.stateFilter.no_data,U.options.stateFilter.ok,U.options.stateFilter.paused,U.options.stateFilter.pending,U.options.dashboardAlerts,U.options.sortOrder]),Ae=(0,Z.wW)(Xe);return b.createElement(K.$,{autoHeightMin:"100%",autoHeightMax:"100%"},b.createElement("div",{className:Ae.container},ee&&b.createElement("div",{className:Ae.noAlertsMessage},ee),b.createElement("section",null,b.createElement("ol",{className:Ae.alertRuleList},U.options.showOptions===Pe.kx.Current?!Ee.loading&&Ee.value&&Ee.value.map(Ce=>b.createElement("li",{className:Ae.alertRuleItem,key:`alert-${Ce.id}`},b.createElement(re.Z,{href:`${Ce.url}?viewPanel=${Ce.panelId}`,className:Ae.cardContainer},b.createElement(re.Z.Heading,null,Ce.name),b.createElement(re.Z.Figure,{className:(0,_.cx)(Ae.alertRuleItemIcon,Ce.stateModel.stateClass)},b.createElement(pe.J,{name:Ce.stateModel.iconClass,size:"xl",className:Ae.alertIcon})),b.createElement(re.Z.Meta,null,b.createElement("div",{className:Ae.alertRuleItemText},b.createElement("span",{className:Ce.stateModel.stateClass},Ce.stateModel.text),b.createElement("span",{className:Ae.alertRuleItemTime}," for ",Ce.newStateDateAgo)))))):!Se.loading&&Se.value&&Se.value.map(Ce=>b.createElement("li",{className:Ae.alertRuleItem,key:`alert-${Ce.id}`},b.createElement(re.Z,{className:Ae.cardContainer},b.createElement(re.Z.Heading,null,Ce.alertName),b.createElement(re.Z.Figure,{className:(0,_.cx)(Ae.alertRuleItemIcon,Ce.stateModel.stateClass)},b.createElement(pe.J,{name:Ce.stateModel.iconClass,size:"xl"})),b.createElement(re.Z.Meta,null,b.createElement("span",{className:(0,_.cx)(Ae.alertRuleItemText,Ce.stateModel.stateClass)},Ce.stateModel.text),b.createElement("span",null,Ce.time),Ce.info&&b.createElement("span",{className:Ae.alertRuleItemInfo},Ce.info)))))))))}function Fe(U,ee){if(U===Pe.As.Importance)return(0,Be.sortBy)(ee,Ee=>be.Z.alertStateSortScore[Ee.state||Ee.newState]);if(U===Pe.As.TimeAsc)return(0,Be.sortBy)(ee,Ee=>new Date(Ee.newStateDate||Ee.time));if(U===Pe.As.TimeDesc)return(0,Be.sortBy)(ee,Ee=>new Date(Ee.newStateDate||Ee.time)).reverse();const ie=(0,Be.sortBy)(ee,Ee=>(Ee.name||Ee.alertName).toLowerCase());return U===Pe.As.AlphaDesc&&ie.reverse(),ie}function He(U){return Object.entries(U).filter(([ee,ie])=>ie).map(([ee,ie])=>ee)}const Xe=U=>({cardContainer:(0,_.css)`
    padding: ${U.spacing(.5)} 0 ${U.spacing(.25)} 0;
    line-height: ${U.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,_.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,_.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,_.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${U.colors.background.secondary};
    padding: ${U.spacing(.5)} ${U.spacing(1)};
    border-radius: ${U.shape.radius.default};
    margin-bottom: ${U.spacing(.5)};
  `,alertRuleItemIcon:(0,_.css)`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${U.spacing(4)};
    padding: 0 ${U.spacing(.5)} 0 ${U.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:(0,_.css)`
    font-weight: ${U.typography.fontWeightBold};
    font-size: ${U.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:(0,_.css)`
    color: ${U.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,_.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,_.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,_.css)`
    margin-right: ${U.spacing(.5)};
  `}),dt=U=>{const ee={showOptions:U.options.showOptions??U.show??Pe.kx.Current,maxItems:U.options.maxItems??U.limit??10,sortOrder:U.options.sortOrder??U.sortOrder??Pe.As.AlphaAsc,dashboardAlerts:U.options.dashboardAlerts??U.onlyAlertsOnDashboard??!1,alertName:U.options.alertName??U.nameFilter??"",dashboardTitle:U.options.dashboardTitle??U.dashboardFilter??"",folderId:U.options.folderId??U.folderId,tags:U.options.tags??U.dashboardTags??[],stateFilter:U.options.stateFilter??U.stateFilter?.reduce((Ee,Se)=>({...Ee,[Se]:!0}),{})??{}};return parseFloat(U.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(Se=>delete U[Se]),ee};var ct=e(17330),At=e(70751);function Ie(U,ee){const ie=(0,Q.Zh)(U);return(0,Q.eD)(ee,ie)}function Ze(U,ee){const{stateFilter:ie,alertInstanceLabelFilter:Ee}=U;return(0,Be.isEmpty)(ie)?ee:ee.filter(Se=>(ie.firing&&((0,At.j)(Se,ct.bj.Alerting)||(0,At.j)(Se,ct.x_.Firing))||ie.pending&&((0,At.j)(Se,ct.bj.Pending)||(0,At.j)(Se,ct.x_.Pending))||ie.noData&&(0,At.j)(Se,ct.bj.NoData)||ie.normal&&(0,At.j)(Se,ct.bj.Normal)||ie.error&&(0,At.j)(Se,ct.bj.Error)||ie.inactive&&(0,At.j)(Se,ct.x_.Inactive))&&(Ee?Ie(U.alertInstanceLabelFilter,Se.labels):!0))}function ut(U){return!(U.startsWith("__")&&U.endsWith("__"))}const rt=U=>{const{onChange:ee,id:ie,defaultValue:Ee,dataSource:Se}=U,Ae=(0,k.useDispatch)();(0,b.useEffect)(()=>{Se?Se&&Ae((0,G.y6)({rulesSourceName:Se})):Ae((0,G.lB)())},[Ae,Se]);const Ce=(0,z._)(it=>it.promRules),Ve=(0,F.PE)(Ce),Je=(0,F.yR)(Ce),qe=(0,b.useMemo)(()=>{if((0,Be.isEmpty)(Ce))return[];if(!Ve)return[];const it=Object.keys(Ce).flatMap(gt=>Ce[gt].result??[]).flatMap(gt=>gt.groups).flatMap(gt=>gt.rules.filter(Ot=>Ot.type===ct.pz.Alerting)).flatMap(gt=>gt.alerts??[]).map(gt=>Object.keys(gt.labels??{})).flatMap(gt=>gt.filter(ut));return(0,Be.uniq)(it)},[Ve,Ce]);return b.createElement(ye.NU,{id:ie,isLoading:Je,defaultValue:Ee,"aria-label":"group by label keys",placeholder:"Group by",prefix:b.createElement(pe.J,{name:"tag-alt"}),onChange:it=>{ee(it.map(gt=>gt.value??""))},options:qe.map(it=>({label:it,value:it}))})};var St=e(948),st=e(45580),tt=e(77014),ft=e(33155),$t=e(84766),Ht=e(26753),Zt=e(50820),tn=e(97125),on=e(26516),qt=e(61403),pn=e(52106),Cn=e(15032),Rt=e(91085),mt=e(71757),xt=e.n(mt),Ft=e(20850),zt=e(74602);const Jt=({alerts:U,options:ee,grafanaTotalInstances:ie,handleInstancesLimit:Ee,limitInstances:Se,grafanaFilteredInstancesTotal:Ae})=>{const Ce=ee.groupMode===Pe.LM.Custom?!0:ee.showInstances,[Ve,Je]=(0,b.useState)(Ce),qe=(0,Z.wW)(ln),it=(0,Z.wW)(ae.gN),gt=(0,b.useCallback)(()=>{Je(la=>!la)},[]),Ot=(0,b.useMemo)(()=>Ze(ee,(0,te.Zl)(ee.sortOrder,U))??[],[U,ee]),pt=ie!==void 0,Tt=ie&&Ae?ie-Ae:0,Ut=U.length-Ot.length,Mt=pt?Tt:Ut,_t=Ot.length>0,an=_t?gt:Be.noop;(0,b.useEffect)(()=>{Ot.length===0&&Je(!1)},[Ot]);const un=async()=>{Ee&&(Ee(!1),Je(!0))},jt=async()=>{Ee&&(Ee(!0),Je(!0))},bn=Se?Ae:Ot.length,Xt=Ot.length,vn=pt?bn:Xt,An=Se?`Showing ${qt.gr} of ${ie} instances`:`Showing all ${ie} instances`,Nn=Se?"View all instances":`Limit the result to ${qt.gr} instances`,In=ie&&qt.gr===Ot.length&&ie>Ot.length,_n=ie&&qt.gr<Ot.length&&!Se,Wn=In||_n?b.createElement("div",{className:qe.footerRow},b.createElement("div",null,An),b.createElement(ae.zx,{size:"sm",variant:"secondary",onClick:Se?un:jt},Nn)):void 0;return b.createElement("div",null,ee.groupMode===Pe.LM.Default&&b.createElement("button",{className:(0,_.cx)(it,_t?qe.clickable:""),onClick:()=>an()},_t&&b.createElement(pe.J,{name:Ve?"angle-down":"angle-right",size:"md"}),b.createElement("span",null,`${vn} ${xt()("instance",vn)}`),Mt>0&&b.createElement("span",null,", ",`${Mt} hidden by filters`)),Ve&&b.createElement(Ft.o,{instances:Ot,pagination:{itemsPerPage:2*zt.gN},footerRow:Wn}))},ln=U=>({clickable:(0,_.css)`
    cursor: pointer;
  `,footerRow:(0,_.css)`
    display: flex;
    flex-direction: column;
    gap: ${U.spacing(1)};
    justify-content: space-between;
    align-items: center;
    width: 100%;
  `}),Pt="__ungrouped__",Gt=({rules:U,options:ee})=>{const ie=(0,Z.wW)(yt),Ee=ee.groupBy,Se=(0,b.useMemo)(()=>{const Ae=new Map,Ce=qe=>Ee?dn(qe,Ee):!0;U.forEach(qe=>{const it=(0,Cn.Re)(qe),gt=Ce(qe);(it?.alerts??[]).forEach(Ot=>{const pt=gt?Kt(Ee,Ot.labels):Pt,Tt=Ae.get(pt)??[];Ae.set(pt,[...Tt,Ot])})});const Ve=Ae.get(Pt)??[];return Ae.delete(Pt),Ae.set(Pt,Ve),Array.from(Ae.entries()).reduce((qe,[it,gt])=>{const Ot=Ze(ee,gt);return Ot.length>0&&qe.set(it,Ot),qe},new Map)},[Ee,U,ee]);return b.createElement(b.Fragment,null,Array.from(Se).map(([Ae,Ce])=>b.createElement("li",{className:ie.alertRuleItem,key:Ae,"data-testid":Ae},b.createElement("div",null,b.createElement("div",{className:ie.customGroupDetails},b.createElement("div",{className:ie.alertLabels},Ae!==Pt&&kt(Ae).map(([Ve,Je])=>b.createElement(Rt.i,{key:Ve,labelKey:Ve,value:Je})),Ae===Pt&&"No grouping")),b.createElement(Jt,{alerts:Ce,options:ee})))))};function Kt(U,ee){return new URLSearchParams(U.map(ie=>[ie,ee[ie]])).toString()}function kt(U){return[...new URLSearchParams(U)]}function dn(U,ee){const ie=(0,Cn.Re)(U);return ee.every(Ee=>(ie?.alerts??[]).some(Se=>Se.labels[Ee]))}const nn=Gt;var mn=e(12573),Mn=e(27366),Gn=e(67111),$n=e(30391),Fn=e(24597);function Yn(U){return Object.values(U).filter(ee=>ee!==void 0).reduce((ee,ie)=>ee+ie,0)}const ua=({rules:U,options:ee,handleInstancesLimit:ie,limitInstances:Ee,hideViewRuleLinkText:Se})=>{const Ae=(0,Z.wW)(yt),Ce=(0,Z.wW)(wa),{href:Ve}=(0,mn.Z)(),Je=U.length<=ee.maxItems?U:U.slice(0,ee.maxItems);return b.createElement(b.Fragment,null,b.createElement("ol",{className:Ae.alertRuleList},Je.map((qe,it)=>{const{namespaceName:gt,groupName:Ot,dataSourceName:pt}=qe,Tt=(0,Cn.x_)(qe.promRule)?qe.promRule:void 0,Ut=(0,Cn.ub)(Tt),Mt=(0,$n.Yd)(qe.dataSourceName,qe),_t=(0,$n.$V)(Mt),an=qe.dataSourceName===V.GC?Yn(qe.instanceTotals):void 0,un=qe.dataSourceName===V.GC?Yn(qe.filteredInstanceTotals):void 0,jt=(0,Fn.u)(`/alerting/${encodeURIComponent(pt)}/${encodeURIComponent(_t)}/view`,{returnTo:Ve??""});return Tt?b.createElement("li",{className:Ae.alertRuleItem,key:`alert-${gt}-${Ot}-${qe.name}-${it}`},b.createElement("div",{className:Ce.icon},b.createElement(pe.J,{name:be.Z.getStateDisplayModel(Tt.state).iconClass,className:Ce[(0,Cn.Aq)(Tt.state)],size:"lg"})),b.createElement("div",{className:Ae.alertNameWrapper},b.createElement("div",{className:Ae.instanceDetails},b.createElement(Mn.K,{direction:"row",gap:1,wrap:!1},b.createElement("div",{className:Ae.alertName,title:qe.name},qe.name),b.createElement(Gn.L,null),jt&&b.createElement("a",{href:jt,target:"__blank",className:Ae.link,rel:"noopener","aria-label":"View alert rule"},b.createElement("span",{className:(0,_.cx)({[Ae.hidden]:Se})},"View alert rule"),b.createElement(pe.J,{name:"external-link-alt",size:"sm"}))),b.createElement("div",{className:Ae.alertDuration},b.createElement("span",{className:Ce[(0,Cn.Aq)(Tt.state)]},(0,Cn.SS)(Tt.state))," ",Ut&&Tt.state!==ct.x_.Inactive&&b.createElement(b.Fragment,null,"for"," ",b.createElement("span",null,(0,Y.vT)({start:Ut,end:Date.now()}))))),b.createElement(Jt,{alerts:Tt.alerts??[],options:ee,grafanaTotalInstances:an,grafanaFilteredInstancesTotal:un,handleInstancesLimit:ie,limitInstances:Ee}))):null})))},wa=U=>({common:(0,_.css)`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${U.shape.radius.default};
    font-size: ${U.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:(0,_.css)`
    margin-top: ${U.spacing(2.5)};
    align-self: flex-start;
  `,good:(0,_.css)`
    color: ${U.colors.success.main};
  `,bad:(0,_.css)`
    color: ${U.colors.error.main};
  `,warning:(0,_.css)`
    color: ${U.colors.warning.main};
  `,neutral:(0,_.css)`
    color: ${U.colors.secondary.main};
  `,info:(0,_.css)`
    color: ${U.colors.primary.main};
  `}),ga=ua;function ca(U){const ee=(ie,[Ee,Se])=>Se?[...ie,Ee]:ie;return Object.entries(U).reduce(ee,[])}const Ra=({dispatch:U,limitInstances:ee,matcherList:ie,dataSourceName:Ee,stateList:Se})=>{U(Ee?(0,G.dn)({rulesSourceName:Ee,limitAlerts:ee?qt.gr:void 0,matcher:ie,state:Se}):(0,G.ei)(!1,{limitAlerts:ee?qt.gr:void 0,matcher:ie,state:Se}))};function va(U){const ee=(0,k.useDispatch)(),[ie,Ee]=(0,St.Z)(!0),{usePrometheusRulesByNamespaceQuery:Se}=on.alertRuleApi,Ae=(0,z._)(Sn=>Sn.promRules),Ce=(0,z._)(Sn=>Sn.rulerRules),Ve=(0,F.wt)(Ae),Je=U.width<320;(0,b.useEffect)(()=>{U.options.stateFilter.inactive===!0&&(U.options.stateFilter.normal=!0),U.options.stateFilter.inactive=void 0},[U.options.stateFilter]);let qe;(0,st.Z)(()=>{qe=(0,xe.h4)().getCurrent()});const it=(0,b.useMemo)(()=>ca(U.options.stateFilter),[U.options.stateFilter]),{options:gt,replaceVariables:Ot}=U,pt=gt.datasource===V.JY?V.GC:gt.datasource,Tt={...U.options,alertName:Ot(gt.alertName),alertInstanceLabelFilter:Ot(gt.alertInstanceLabelFilter)},Ut=(0,b.useMemo)(()=>(0,Q.Zh)(Tt.alertInstanceLabelFilter),[Tt.alertInstanceLabelFilter]),Mt=!pt||pt===V.GC,{currentData:_t=[],isLoading:an,refetch:un}=Se({limitAlerts:ie?qt.gr:void 0,matcher:Ut,state:it},{skip:!Mt});(0,b.useEffect)(()=>{Ae.loading||Ra({dispatch:ee,limitInstances:ie,matcherList:Ut,dataSourceName:pt,stateList:it});const Sn=qe?.events.subscribe(tt.md,()=>{Mt&&un(),(!pt||pt!==V.GC)&&Ra({dispatch:ee,limitInstances:ie,matcherList:Ut,dataSourceName:pt,stateList:it})});return()=>{Sn?.unsubscribe()}},[ee,qe,Ut,it,ie,pt,un,Mt,Ae.loading]);const jt=Sn=>{Sn?(Ra({dispatch:ee,limitInstances:ie,matcherList:Ut,dataSourceName:pt,stateList:it}),Ee(!0)):(Ra({dispatch:ee,limitInstances:!1,matcherList:Ut,dataSourceName:pt,stateList:it}),Ee(!1))},bn=(0,pn.Zo)(void 0,_t),Xt=(0,F.wt)(Ce),vn=(0,F.I7)(Ae),An=Ve||Xt,Nn=(0,F.yR)(Ae),In=(0,Z.wW)(yt),_n=(0,Cn.C7)(bn),Wn=U.options.sortOrder,la=(0,b.useMemo)(()=>es(U,Sa(Wn,_n)),[_n,Wn,U]),Hn=la.length===0?"No alerts matching filters":void 0;return!tn.contextSrv.hasPermission(k.AccessControlAction.AlertingRuleRead)&&!tn.contextSrv.hasPermission(k.AccessControlAction.AlertingRuleExternalRead)?b.createElement(ft.b,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):b.createElement(K.$,{autoHeightMin:"100%",autoHeightMax:"100%"},b.createElement("div",{className:In.container},(an||An&&Nn&&!vn)&&b.createElement($t.u,{text:"Loading..."}),Hn&&b.createElement("div",{className:In.noAlertsMessage},Hn),b.createElement("section",null,U.options.viewMode===Pe.wO.Stat&&vn&&b.createElement(Ht.w6,{width:U.width,height:U.height,graphMode:Ht.IG.None,textMode:Ht.jG.Auto,justifyMode:Ht.ap.Auto,theme:Zt.config.theme2,value:{text:`${la.length}`,numeric:la.length}}),U.options.viewMode===Pe.wO.List&&U.options.groupMode===Pe.LM.Custom&&vn&&b.createElement(nn,{rules:la,options:Tt}),U.options.viewMode===Pe.wO.List&&U.options.groupMode===Pe.LM.Default&&vn&&b.createElement(ga,{rules:la,options:Tt,handleInstancesLimit:jt,limitInstances:ie,hideViewRuleLinkText:Je}))))}function Sa(U,ee){if(U===Pe.As.Importance)return(0,Be.sortBy)(ee,Ee=>be.Z.alertStateSortScore[Ee.state]);if(U===Pe.As.TimeAsc)return(0,Be.sortBy)(ee,Ee=>{const Se=(0,Cn.Re)(Ee)??void 0;return(0,Cn.ub)(Se)||new Date});if(U===Pe.As.TimeDesc)return(0,Be.sortBy)(ee,Ee=>{const Se=(0,Cn.Re)(Ee)??void 0;return(0,Cn.ub)(Se)||new Date}).reverse();const ie=(0,Be.sortBy)(ee,Ee=>Ee.name.toLowerCase());return U===Pe.As.AlphaDesc&&ie.reverse(),ie}function es(U,ee){const{options:ie,replaceVariables:Ee}=U;let Se=[...ee];if(ie.dashboardAlerts){const Ae=(0,xe.h4)().getCurrent()?.uid;Se=Se.filter(({annotations:Ce={}})=>Object.entries(Ce).some(([Ve,Je])=>Ve===j.q6.dashboardUID&&Je===Ae))}if(ie.alertName){const Ae=Ee(ie.alertName);Se=Se.filter(({name:Ce})=>Ce.toLocaleLowerCase().includes(Ae.toLocaleLowerCase()))}if(Se=Se.filter(Ae=>{const Ce=(0,Cn.Re)(Ae);return Ce?ie.stateFilter.firing&&Ce.state===ct.x_.Firing||ie.stateFilter.pending&&Ce.state===ct.x_.Pending||ie.stateFilter.normal&&Ce.state===ct.x_.Inactive:!1}),ie.folder&&(Se=Se.filter(Ae=>Ae.namespaceName===ie.folder.title)),ie.datasource){const Ae=ie.datasource===V.JY;Se=Se.filter(Ae?({dataSourceName:Ce})=>Ce===V.GC:({dataSourceName:Ce})=>Ce===ie.datasource)}return Se=Se.reduce((Ae,Ce)=>{const Ve=(0,Cn.Re)(Ce);return(Ve?Ze({stateFilter:ie.stateFilter,alertInstanceLabelFilter:Ee(ie.alertInstanceLabelFilter)},Ve.alerts??[]):[]).length&&Ae.push(Ce),Ae},[]),Se}const yt=U=>({cardContainer:(0,_.css)`
    padding: ${U.spacing(.5)} 0 ${U.spacing(.25)} 0;
    line-height: ${U.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,_.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,_.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,_.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${U.colors.background.secondary};
    padding: ${U.spacing(.5)} ${U.spacing(1)};
    border-radius: ${U.shape.radius.default};
    margin-bottom: ${U.spacing(.5)};

    gap: ${U.spacing(2)};
  `,alertName:(0,_.css)`
    font-size: ${U.typography.h6.fontSize};
    font-weight: ${U.typography.fontWeightBold};

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,alertNameWrapper:(0,_.css)`
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    flex-direction: column;

    min-width: 100px;
  `,alertLabels:(0,_.css)`
    > * {
      margin-right: ${U.spacing(.5)};
    }
  `,alertDuration:(0,_.css)`
    font-size: ${U.typography.bodySmall.fontSize};
  `,alertRuleItemText:(0,_.css)`
    font-weight: ${U.typography.fontWeightBold};
    font-size: ${U.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:(0,_.css)`
    color: ${U.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,_.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,_.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,_.css)`
    margin-right: ${U.spacing(.5)};
  `,instanceDetails:(0,_.css)`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:(0,_.css)`
    margin-bottom: ${U.spacing(.5)};
  `,link:(0,_.css)`
    word-break: break-all;
    color: ${U.colors.primary.text};
    display: flex;
    align-items: center;
    gap: ${U.spacing(1)};
  `,hidden:(0,_.css)`
    display: none;
  `});class bt{getSuggestionsForData(ee){const{dataSummary:ie}=ee;if(ie.hasData)return;ee.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function Dt(U){return U.showOptions===Pe.kx.Current}const Wt=new W.c(we).setPanelOptions(U=>{U.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:Pe.kx.Current},{label:"Recent state changes",value:Pe.kx.RecentChanges}]},defaultValue:Pe.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:Pe.As.AlphaAsc},{label:"Alphabetical (desc)",value:Pe.As.AlphaDesc},{label:"Importance",value:Pe.As.Importance},{label:"Time (asc)",value:Pe.As.TimeAsc},{label:"Time (desc)",value:Pe.As.TimeDesc}]},defaultValue:Pe.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:Dt}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:Dt}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:ie,onChange:Ee}){return b.createElement(Lt,{initialFolderId:ie,onChange:Se=>Ee(Se?.id),extraFolders:[Ct,wt]})},category:["Filter"],showIf:Dt}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(ee){return b.createElement(at.B,{tags:ee.value,onChange:ee.onChange})},category:["Filter"],showIf:Dt}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:Dt}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:Dt}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:Dt}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:Dt}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:Dt}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:Dt})}).setMigrationHandler(dt).setSuggestionsSupplier(new bt),cn=new W.c(va).setPanelOptions(U=>{U.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:Pe.wO.List,settings:{options:[{label:"List",value:Pe.wO.List},{label:"Stat",value:Pe.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:Pe.LM.Default,settings:{options:[{value:Pe.LM.Default,label:"Default grouping"},{value:Pe.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:ee=>ee.groupMode===Pe.LM.Custom,category:["Options"],editor:ee=>b.createElement(rt,{id:ee.id??"groupBy",defaultValue:ee.value.map(ie=>({label:ie,value:ie})),onChange:ee.onChange,dataSource:ee.context.options.datasource})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:Pe.As.AlphaAsc},{label:"Alphabetical (desc)",value:Pe.As.AlphaDesc},{label:"Importance",value:Pe.As.Importance},{label:"Time (asc)",value:Pe.As.TimeAsc},{label:"Time (desc)",value:Pe.As.TimeDesc}]},defaultValue:Pe.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(ie){return b.createElement(Ye.q,{...ie,type:["prometheus","loki","grafana"],noDefault:!0,current:ie.value,onChange:Ee=>ie.onChange(Ee.name),onClear:()=>ie.onChange(null)})},category:["Filter"]}).addCustomEditor({showIf:ee=>ee.datasource===V.JY||!ee.datasource,path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(ie){return b.createElement(Ne.Fz,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:ie.value?.title,initialFolderUid:ie.value?.uid,permissionLevel:k.PermissionLevelString.View,onClear:()=>ie.onChange(""),...ie})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),en=w.config.unifiedAlertingEnabled?cn:Wt;var En=e(31544),Rn=e(57837),Dn=e(71519),Tn=e(36316),jn=e(13601),ra=e(3532),Jn=e(64084),Xn=e(25870),oa=e(28833),Qn=e(18328),ts=e(69865);const La=({options:U,annotation:ee,formatDate:ie,onClick:Ee,onAvatarClick:Se,onTagClick:Ae})=>{const Ce=(0,Z.wW)(ia),{showUser:Ve,showTags:Je,showTime:qe}=U,{text:it="",login:gt,email:Ot,avatarUrl:pt,tags:Tt,time:Ut,timeEnd:Mt}=ee,_t=()=>{Ee(ee)},an=()=>{Se(ee)},un=gt&&Ve,jt=Ut&&qe,bn=Mt&&Mt!==Ut&&qe;return b.createElement(re.Z,{className:Ce.card,onClick:_t},b.createElement(re.Z.Heading,null,b.createElement(Qn.D,{className:Ce.heading,onClick:Xt=>{Xt.stopPropagation()},content:it})),jt&&b.createElement(re.Z.Description,{className:Ce.timestamp},b.createElement(bs,{formatDate:ie,time:Ut}),bn&&b.createElement(b.Fragment,null,b.createElement("span",{className:Ce.time},"-"),b.createElement(bs,{formatDate:ie,time:Mt})," ")),un&&b.createElement(re.Z.Meta,{className:Ce.meta},b.createElement(Xa,{email:Ot,login:gt,avatarUrl:pt,onClick:an})),Je&&Tt&&b.createElement(re.Z.Tags,null,b.createElement(ra.P,{tags:Tt,onClick:Xt=>Ae(Xt,!1)})))},Xa=({onClick:U,avatarUrl:ee,login:ie,email:Ee})=>{const Se=(0,Z.wW)(ia),Ae=Ve=>{Ve.stopPropagation(),U()},Ce=b.createElement("span",null,"Created by:",b.createElement("br",null)," ",Ee);return b.createElement(ts.u,{content:Ce,theme:"info",placement:"top"},b.createElement("button",{onClick:Ae,className:Se.avatar,"aria-label":`Created by ${Ee}`},b.createElement("img",{src:ee,alt:"avatar icon"})))},bs=({time:U,formatDate:ee})=>{const ie=(0,Z.wW)(ia);return b.createElement("span",{className:ie.time},b.createElement("span",null,ee(U)))};function ia(U){return{card:(0,_.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:U.spacing(1),margin:U.spacing(.5),width:"inherit"}),heading:(0,_.css)({a:{zIndex:1,position:"relative",color:U.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,_.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,_.css)({margin:0,alignSelf:"center"}),time:(0,_.css)({marginLeft:U.spacing(1),marginRight:U.spacing(1),fontSize:U.typography.bodySmall.fontSize,color:U.colors.text.secondary}),avatar:(0,_.css)({border:"none",background:"inherit",margin:0,padding:U.spacing(.5),img:{borderRadius:U.shape.radius.circle,width:U.spacing(2),height:U.spacing(2)}})}}class ls extends b.PureComponent{constructor(ee){super(ee),this.style=As(w.config.theme2),this.subs=new En.w0,this.tagListRef=b.createRef(),this.onAnnoClick=async ie=>{if(!ie.time)return;const{options:Ee}=this.props,Ae=(0,xe.h4)().getCurrent(),Ce={from:this._timeOffset(ie.time,Ee.navigateBefore,!0),to:this._timeOffset(ie.timeEnd??ie.time,Ee.navigateAfter,!1)};if(Ee.navigateToPanel&&(Ce.viewPanel=ie.panelId),Ae?.uid===ie.dashboardUID){jn.E1.partial(Ce);return}const Ve=await(0,se.i)().get("/api/search",{dashboardUIDs:ie.dashboardUID});if(Ve&&Ve.length&&Ve[0].uid===ie.dashboardUID){const Je=Ve[0],qe=new URL(Je.url,window.location.origin);qe.searchParams.set("from",Ce.from),qe.searchParams.set("to",Ce.to),jn.E1.push(Rn.u.stripBaseFromUrl(qe.toString()));return}oa.Z.emit(Dn.SI.alertWarning,["Unknown Dashboard: "+ie.dashboardUID])},this.onTagClick=(ie,Ee)=>{if(!Ee&&this.state.queryTags.includes(ie))return;const Se=Ee?this.state.queryTags.filter(Ce=>Ce!==ie):[...this.state.queryTags,ie];let Ae;if(Ee){const Ce=document.activeElement,Ve=Ce?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(Ce)&&Ve){const Je=Number.parseInt(Ve,10),qe=this.tagListRef.current.querySelector(`[data-tag-id="${Je+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${Je-1}"]`);qe instanceof HTMLElement&&(Ae=qe)}}this.setState({queryTags:Se},()=>Ae?.focus())},this.onUserClick=ie=>{this.setState({queryUser:{id:ie.userId,login:ie.login,email:ie.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(ie,Ee)=>{const{options:Se}=this.props,Ae=(0,xe.h4)().getCurrent();return Ae?b.createElement(La,{annotation:ie,formatDate:Ae.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:Se}):b.createElement(b.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(Tn.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(ee,ie){const{options:Ee,timeRange:Se}=this.props;(Ee!==ee.options||this.state.queryTags!==ie.queryTags||this.state.queryUser!==ie.queryUser||ee.renderCounter!==this.props.renderCounter||Ee.onlyInTimeRange&&Se!==ee.timeRange)&&this.doSearch()}async doSearch(){const{options:ee}=this.props,{queryUser:ie,queryTags:Ee}=this.state,Se={tags:ee.tags,limit:ee.limit,type:"annotation"};ee.onlyFromThisDashboard&&(Se.dashboardUID=(0,xe.h4)().getCurrent()?.uid);let Ae="";if(ee.onlyInTimeRange){const{timeRange:Ve}=this.props;Se.from=Ve.from.valueOf(),Se.to=Ve.to.valueOf()}else Ae="All Time";ie&&(Se.userId=ie.id),ee.tags&&ee.tags.length&&(Se.tags=ee.tags.map(Ve=>this.props.replaceVariables(Ve))),Ee.length&&(Se.tags=Se.tags?[...Se.tags,...Ee]:Ee);const Ce=await(0,se.i)().get("/api/annotations",Se,`anno-list-panel-${this.props.id}`);this.setState({annotations:Ce,timeInfo:Ae,loaded:!0})}_timeOffset(ee,ie,Ee=!1){let Se=5,Ae="m";const Ce=/^(\d+)(\w)/.exec(ie);Ce&&Ce.length===3&&(Se=parseInt(Ce[1],10),Ae=Ce[2]);const Ve=(0,de.CQ)(ee);return Ee&&(Se*=-1),Ve.add(Se,Ae).valueOf()}render(){const{loaded:ee,annotations:ie,queryUser:Ee,queryTags:Se}=this.state;if(!ee)return b.createElement("div",null,"loading...");const Ae=Ee||Se.length>0;return b.createElement(K.$,{autoHeightMin:"100%"},Ae&&b.createElement("div",{className:this.style.filter},b.createElement("b",null,"Filter:"),Ee&&b.createElement(ae.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${Ee.email}`},Ee.email),Se.length>0&&b.createElement(ra.P,{icon:"times",tags:Se,onClick:Ce=>this.onTagClick(Ce,!0),getAriaLabel:Ce=>`Remove ${Ce} tag`,className:this.style.tagList,ref:this.tagListRef})),ie.length<1&&b.createElement("div",{className:this.style.noneFound},"No Annotations Found"),b.createElement(Xn.L,{items:ie,renderItem:this.renderItem,getItemKey:Ce=>`${Ce.id}`}))}}const As=(0,Jn.B)(U=>({noneFound:(0,_.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,_.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:U.spacing(.5),padding:U.spacing(.5)}),tagList:(0,_.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),ss={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},rs=new W.c(ls).setPanelOptions(U=>{U.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:ss.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:ss.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(ee){return b.createElement(at.B,{tags:ee.value,onChange:ee.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:ss.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:ss.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:ss.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:ss.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:ss.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:ss.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:ss.navigateAfter,description:""})}).setPanelChangeHandler((U,ee,ie)=>ee==="ryantxu-annolist-panel"?ie:U.options);var Ba=e(82909),Aa=e(97898),Zs=e(63671),Wa=e(69330),qa=e(64943),zn=e(89591),Bt=e(34547),Qs=e(39480),kn=e(41456),ma=e(86246),ha=e(61729),Pa=e(57827),$s=e(40723),Js=e(58650),ar=e(99977),ws=e(30639),Qa=e(31276),sr=e(76297),Pr=e(59208),Xs=e(96248),_r=e(78832),eo=e(98419),zr=e(42626),Ws=e(70393),rr=e(41013),Ar=e(40793),Ta=e(18577);const vt=({config:U,onUPlotClick:ee,setFocusedSeriesIdx:ie,setFocusedPointIdx:Ee,setCoords:Se,setHover:Ae,isToolTipOpen:Ce,isActive:Ve,setIsActive:Je,sync:qe})=>{Ce.current=!1;const it=()=>{Je&&Je(!0)},gt=()=>{Ce.current||(Se(null),Je&&Je(!1))};let Ot=null,pt=null;U.addHook("init",_t=>{Ot=_t.root.parentElement,pt=_t.over,Ot?.addEventListener("click",ee),pt.addEventListener("mouseleave",gt),pt.addEventListener("mouseenter",it),qe&&qe()===Ar.m.Crosshair&&_t.root.classList.add("shared-crosshair")});const Tt=()=>{Ce.current&&(Se(null),ee())};U.addHook("drawClear",Tt),U.addHook("destroy",()=>{Ot?.removeEventListener("click",ee),pt?.removeEventListener("mouseleave",gt),pt?.removeEventListener("mouseenter",it),Tt()});let Ut;U.addHook("syncRect",(_t,an)=>{Ut=an});const Mt=U.getTooltipInterpolator();return Mt&&U.addHook("setCursor",_t=>{Ce.current||Mt(ie,Ee,an=>{if(an){Se(null);return}if(!Ut)return;const{x:un,y:jt}=(0,Ta._)(_t,Ut);un!==void 0&&jt!==void 0&&Se({canvas:{x:_t.cursor.left,y:_t.cursor.top},viewport:{x:un,y:jt}})},_t)}),U.addHook("setLegend",_t=>{if(!Ce.current&&!Mt&&Ee(_t.legend.idx),_t.cursor.idxs!=null)for(let an=0;an<_t.cursor.idxs.length;an++){const un=_t.cursor.idxs[an];if(un!=null){const jt={xIndex:un,yIndex:0,pageX:Ut.left+_t.cursor.left,pageY:Ut.top+_t.cursor.top};(!Ce.current||!jt)&&Ae(jt);return}}}),U.addHook("setSeries",(_t,an)=>{Ce.current||ie(an)}),U};var Et=e(80583),Qt=e(80047),Yt=e(80854),rn=e(79527),fn=e(83502),xn=e(73254),wn=e(82837),yn=e(94123),Ea=e(80115),sa=e(95966),Un=e(85256),ya=e(91249),os=e(50342),ps=e(14197);const Is=os.Gj,ur=os.Gj,po=8,Hr=30,to=.65,no=.1,Ma=.15,is=5,ao=10,Fa=.1;function ho(U,ee,ie,Ee,Se){const Ae=(0,sr.X1)(U,14),Ce=ee/(Ae.width+2)*14,Ve=ie/Ee,Je=Math.min(Ve,Ce);return{fontSize:Math.min(Je,Se??Je),textMetrics:Ae}}function kl(U,ee){const{xOri:ie,xDir:Ee,rawValue:Se,getColor:Ae,formatValue:Ce,formatShortValue:Ve,fillOpacity:Je=1,showValue:qe,xSpacing:it=0}=U,gt=ie===Bt.wN.Horizontal,Ot=!U.text?.valueSize,pt=U.stacking!==Bt.o0.None,Tt=U.stacking===Bt.o0.Percent;let{groupWidth:Ut,barWidth:Mt,barRadius:_t=0}=U;pt&&([Ut,Mt]=[Mt,Ut]);let an,un;const jt=On=>Array.from(On.data[0].map((Ln,Kn)=>Kn)),bn=it===0?void 0:(On,Ln)=>{const Kn=On.bbox.width,da=Ee*(gt?1:-1);let aa=Ln.length,Ca=aa-1,xa=0,hs=Kn/rn.Z.pxRatio,cs=Math.abs(Math.floor(hs/it));xa=aa<cs?0:Math.ceil(aa/cs);let dr=Ln.map((Ts,Vr)=>xa!==0&&(it>0?Vr:Ca-Vr)%xa>0?null:Ts);return da===1?dr:dr.reverse()},Xt=(On,Ln,Kn,da,aa)=>{if(U.xTimeAuto){let Ca=On.scales.x,xa=Ca.min,hs=Ca.max;Ca.min=On.data[0][0],Ca.max=On.data[0][On.data[0].length-1];let cs=(0,Pr.mr)(On,Ln,Kn,da,aa);return Ca.min=xa,Ca.max=hs,cs}return Ln.map(Ca=>gt?Ve(0,Ca):Ce(0,Ca))},vn=(On,Ln,Kn)=>{Ln=0,Kn=Math.max(1,On.data[0].length-1);let da=0;(0,os.Qm)(On.data[0].length,Ut,Is,0,(Ca,xa,hs)=>{da=xa+hs/2});let aa=Kn-Ln;if(da===.5)Ln-=aa;else{let xa=(1/(1-da*2)*aa-aa)/2;Ln-=xa,Kn+=xa}return[Ln,Kn]};let An=(On,Ln)=>{let Kn=Array.from({length:Ln},()=>({offs:Array(On).fill(0),size:Array(On).fill(0)}));return(0,os.Qm)(On,Ut,Is,null,(da,aa,Ca)=>{(0,os.Qm)(Ln,Mt,ur,null,(xa,hs,cs)=>{Kn[xa].offs[da]=aa+Ca*hs,Kn[xa].size[da]=Ca*cs})}),Kn},Nn=(On,Ln)=>{let Kn=Array.from({length:Ln},()=>({offs:Array(On).fill(0),size:Array(On).fill(0)}));return(0,os.Qm)(On,Ut,Is,null,(da,aa,Ca)=>{(0,os.Qm)(Ln,Mt,ur,null,(xa,hs,cs)=>{Kn[xa].offs[da]=aa,Kn[xa].size[da]=Ca})}),Kn};const In=gt?no:Ma,_n=gt?is:ao;let Wn=[],la=[],Hn=1,Sn,na=U.text?.valueSize??Hr,pa=_n,_a=1/0,Za=1/0,Va=Ae!=null,ka=Va?{fill:{unit:3,values:(On,Ln)=>la[Ln].fill},stroke:{unit:3,values:(On,Ln)=>la[Ln].stroke}}:{},qn=rn.Z.paths.bars({radius:Tt?0:pt?(On,Ln)=>Ln===On.data.length-1?[_t,0]:[0,0]:_t,disp:{x0:{unit:2,values:(On,Ln)=>Wn[Ln].offs},size:{unit:2,values:(On,Ln)=>Wn[Ln].size},...ka},each:(On,Ln,Kn,da,aa,Ca,xa)=>{da-=On.bbox.left,aa-=On.bbox.top;let hs=On.data[Ln][Kn];gt?(_a=Math.min(_a,hs<0?On.bbox.height-(aa+xa):aa),Za=Ca):(_a=xa,Za=Math.min(Za,hs<0?da:On.bbox.width-(da+Ca)));let cs={x:da,y:aa,w:Ca,h:xa,sidx:Ln,didx:Kn};if(U.fullHighlight&&(U.xOri===Bt.wN.Horizontal?(cs.y=0,cs.h=On.bbox.height):(cs.x=0,cs.w=On.bbox.width)),an.add(cs),qe!==Bt.Jp.Never){const dr=Se(Ln,Kn);let Ts=1;Tt&&Ja[Ln][Kn]&&(Ts=Ja[Ln][Kn]);const Vr=Ts===0?0:dr/Ts,tr=Ce(Ln,Vr);if(pa=Math.min(pa,Math.round(In*(gt?Ca:xa))),Sn[Kn]===void 0&&(Sn[Kn]={}),Sn[Kn][Ln]={text:tr,value:Se(Ln,Kn),hidden:!1},Ot){const{fontSize:nr,textMetrics:Rs}=ho(Sn[Kn][Ln].text,Za*(gt?to:1)-(gt?0:pa),_a*(gt?1:to)-(gt?pa:0),1);Sn[Kn][Ln].textMetrics=Rs;let as=Math.round(Math.min(na,Hr,nr));Hn=as/na*(as/14),na=as}else Sn[Kn][Ln].textMetrics=(0,sr.X1)(Sn[Kn][Ln].text,na);let uo=gt?0:-Math.round(Fa*na),js=Se(Ln,Kn);if(U.negY?.[Ln]&&js!=null&&(js*=-1),js!=null){const nr=On.bbox.left+(gt?da+Ca/2:js<0?da-pa:da+Ca+pa),Rs=On.bbox.top+(gt?js<0?aa+xa+pa:aa-pa:aa+xa/2-uo),{textMetrics:as={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=Sn[Kn][Ln];let Er=0,yr=0;gt?(Er=as.width*Hn/2,yr=js>0?(as.actualBoundingBoxAscent+as.actualBoundingBoxDescent)*Hn:0):(yr=(as.actualBoundingBoxAscent+as.actualBoundingBoxDescent)*Hn/2,Er=js<0?as.width*Hn:0),Sn[Kn][Ln].x=nr,Sn[Kn][Ln].y=Rs,Sn[Kn][Ln].bbox={x:nr-Er,y:Rs-yr,w:as.width*Hn,h:(as.actualBoundingBoxAscent+as.actualBoundingBoxDescent)*Hn}}}}});const Bn=On=>{let Ln=On.over;Ln.style.overflow="hidden",On.root.querySelectorAll(".u-cursor-pt").forEach(Kn=>{Kn.style.borderRadius="0",U.fullHighlight&&(Kn.style.zIndex="-1")})},Zn={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(On,Ln)=>{if(Ln===1){un=null;let Kn=On.cursor.left*rn.Z.pxRatio,da=On.cursor.top*rn.Z.pxRatio;an.get(Kn,da,1,1,aa=>{(0,ps.Pn)(Kn,da,aa.x,aa.y,aa.x+aa.w,aa.y+aa.h)&&(pt?(un==null||aa.h*aa.w<un.h*un.w)&&(un=aa):un=aa)})}return un&&Ln===un.sidx?un.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(On,Ln)=>{let Kn=un&&Ln===un.sidx,da=0,aa=0;if(pt&&Kn){const Ca=un&&un.sidx>1&&(0,ps.zZ)(an,un.sidx-1,un.didx);Ca&&(gt?da=Ca.h:aa=Ca.w)}return{left:Kn?(un.x+aa)/rn.Z.pxRatio:-10,top:Kn?un.y/rn.Z.pxRatio:-10,width:Kn?(un.w-aa)/rn.Z.pxRatio:0,height:Kn?(un.h-da)/rn.Z.pxRatio:0}}}},ea=On=>{if(an=an||new ps.lW(0,0,On.bbox.width,On.bbox.height),an.clear(),On.series.forEach(Ln=>{Ln._paths=null}),pt?Wn=[null,...Nn(On.data[0].length,On.data.length-1)]:Wn=[null,...An(On.data[0].length,On.data.length-1)],Va){la=[null];for(let Ln=1;Ln<On.data.length;Ln++){let Kn=On.data[Ln].map((da,aa)=>da!=null?Ae(Ln,aa,da):null);la.push({fill:Je<1?Kn.map(da=>da!=null?(0,ya.alpha)(da,Je):null):Kn,stroke:Kn})}}Sn={},na=U.text?.valueSize??Hr,pa=_n,_a=Za=1/0},fa=On=>{if(qe===Bt.Jp.Never||na<po)return;On.ctx.save(),On.ctx.fillStyle=ee.colors.text.primary,On.ctx.font=`${na}px ${ee.typography.fontFamily}`;let Ln,Kn;for(const da in Sn){let aa=!0;for(const Ca in Sn[da]){const xa=Sn[da][Ca],{text:hs,x:cs=0,y:dr=0}=xa;let{value:Ts}=xa;U.negY?.[Ca]&&Ts!=null&&(Ts*=-1);let Vr=gt?"center":Ts!==null&&Ts<0?"right":"left",tr=gt?Ts!==null&&Ts<0?"top":"alphabetic":"middle";if(Vr!==Ln&&(On.ctx.textAlign=Ln=Vr),tr!==Kn&&(On.ctx.textBaseline=Kn=tr),qe===Bt.Jp.Always)On.ctx.fillText(hs,cs,dr);else if(qe===Bt.Jp.Auto){let{bbox:uo}=xa,js=!1;if(uo==null)js=!0,xa.hidden=!0;else if(!aa)for(const nr in Sn[da]){if(nr===Ca)continue;const Rs=Sn[da][nr],{bbox:as,hidden:Er}=Rs;if(!Er&&as&&(0,ps.kK)(uo,as)){js=!0,xa.hidden=!0;break}}aa=!1,!js&&On.ctx.fillText(hs,cs,dr)}}}On.ctx.restore()},Oa=(On,Ln,Kn,da)=>{un?(On(un.sidx),Ln(un.didx),Kn()):Kn(!0)};let Ja=null;function Ia(On,Ln){return Ja=null,(0,sa.Bj)(On[0],Ln,({totals:Kn})=>{Ja=Kn})}return{cursor:Zn,xRange:vn,xValues:Xt,xSplits:jt,hFilter:bn,barsBuilder:qn,init:Bn,drawClear:ea,draw:fa,interpolateTooltip:Oa,prepData:Ia}}const Cr={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:Bt.wm.Auto,showValue:Bt.Jp.Auto,stacking:Bt.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},Ii={fillOpacity:80,gradientMode:Bt.FI.None,lineWidth:1};function Gl(U){return U===qa.wm.Vertical?{xOri:Bt.wN.Horizontal,xDir:Bt.bQ.Right,yOri:Bt.wN.Vertical,yDir:Bt.bQ.Up}:{xOri:Bt.wN.Vertical,xDir:Bt.bQ.Down,yOri:Bt.wN.Horizontal,yDir:Bt.bQ.Right}}const iu=({frame:U,theme:ee,orientation:ie,showValue:Ee,groupWidth:Se,barWidth:Ae,barRadius:Ce=0,stacking:Ve,text:Je,rawValue:qe,getColor:it,fillOpacity:gt,allFrames:Ot,xTickLabelRotation:pt,xTickLabelMaxLength:Tt,xTickLabelSpacing:Ut=0,legend:Mt,timeZone:_t,fullHighlight:an})=>{const un=new Ea.U,jt=(Hn,Sn)=>(0,fn.zc)(U.fields[Hn].display(Sn)),bn=(Hn,Sn)=>_o(jt(Hn,Sn),Tt),Xt=Gl(ie);U.fields.length===2&&(Se=Ae,Ae=1);const vn={xOri:Xt.xOri,xDir:Xt.xDir,groupWidth:Se,barWidth:Ae,barRadius:Ce,stacking:Ve,rawValue:qe,getColor:it,fillOpacity:gt,formatValue:jt,formatShortValue:bn,timeZone:_t,text:Je,showValue:Ee,legend:Mt,xSpacing:Ut,xTimeAuto:U.fields[0]?.type===zn.fS.time&&!U.fields[0].config.unit?.startsWith("time:"),negY:U.fields.map(Hn=>Hn.config.custom?.transform===Bt.pR.NegativeY),fullHighlight:an},An=kl(vn,ee);if(un.setCursor(An.cursor),un.addHook("init",An.init),un.addHook("drawClear",An.drawClear),un.addHook("draw",An.draw),un.setTooltipInterpolator(An.interpolateTooltip),pt!==0){let Hn=50,Sn=Xt.xOri===Bt.wN.Horizontal?14:5;un.setPadding(lu(U,pt,Tt,Hn,Sn))}un.setPrepData(An.prepData),un.addScale({scaleKey:"x",isTime:!1,range:An.xRange,distribution:Bt.wf.Ordinal,orientation:Xt.xOri,direction:Xt.xDir});const Nn=U.fields[0].config.custom?.axisPlacement!==Bt.LB.Hidden?Xt.xOri===Bt.wN.Horizontal?Bt.LB.Bottom:Bt.LB.Left:Bt.LB.Hidden,In=U.fields[0].config.custom?.axisPlacement!==Bt.LB.Hidden;un.addAxis({scaleKey:"x",isTime:!1,placement:Nn,label:U.fields[0].config.custom?.axisLabel,splits:An.xSplits,filter:Xt.xOri===0?An.hFilter:void 0,values:An.xValues,timeZone:_t,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:Xt.xOri===0?pt*-1:0,theme:ee,show:In});let _n=0;const Wn=or(Mt);for(let Hn=1;Hn<U.fields.length;Hn++){const Sn=U.fields[Hn];_n++;const na={...Ii,...Sn.config.custom},pa=Sn.config.unit||zr.j,_a=(0,xn.fD)(Sn),Va=(0,xn.YO)(Sn,ee).color;let ka=na.axisSoftMin,qn=na.axisSoftMax;if(ka==null&&Sn.config.min==null&&(ka=0),qn==null&&Sn.config.max==null&&(qn=0),na.thresholdsStyle&&Sn.config.thresholds&&(na.thresholdsStyle.mode??Bt.i3.Off)!==Bt.i3.Off&&un.addThresholds({config:na.thresholdsStyle,thresholds:Sn.config.thresholds,scaleKey:pa,theme:ee,hardMin:Sn.config.min,hardMax:Sn.config.max,softMin:na.axisSoftMin,softMax:na.axisSoftMax}),un.addSeries({scaleKey:pa,pxAlign:!0,lineWidth:na.lineWidth,lineColor:Va,fillOpacity:na.fillOpacity,theme:ee,colorMode:_a,pathBuilder:An.barsBuilder,show:!na.hideFrom?.viz,gradientMode:na.gradientMode,thresholds:Sn.config.thresholds,hardMin:Sn.config.min,hardMax:Sn.config.max,softMin:na.axisSoftMin,softMax:na.axisSoftMax,dataFrameFieldIndex:{fieldIndex:Wn?Hn:Ot[0].fields.findIndex(Bn=>Bn.type===zn.fS.number&&Bn.state?.seriesIndex===_n-1),frameIndex:0}}),un.addScale({scaleKey:pa,min:Sn.config.min,max:Sn.config.max,softMin:ka,softMax:qn,centeredZero:na.axisCenteredZero,orientation:Xt.yOri,direction:Xt.yDir,distribution:na.scaleDistribution?.type,log:na.scaleDistribution?.log}),na.axisPlacement!==Bt.LB.Hidden){let Bn=na.axisPlacement;(!Bn||Bn===Bt.LB.Auto)&&(Bn=Bt.LB.Left),Xt.xOri===1&&(Bn===Bt.LB.Left&&(Bn=Bt.LB.Bottom),Bn===Bt.LB.Right&&(Bn=Bt.LB.Top));let Zn={scaleKey:pa,label:na.axisLabel,size:na.axisWidth,placement:Bn,formatValue:(ea,fa)=>(0,fn.zc)(Sn.display(ea,fa)),filter:Xt.yOri===0?An.hFilter:void 0,tickLabelRotation:Xt.xOri===1?pt*-1:0,theme:ee,grid:{show:na.axisGridShow}};na.axisBorderShow&&(Zn.border={show:!0}),na.axisColorMode===Bt.yK.Series&&(Zn.color=Va),un.addAxis(Zn)}}let la=(0,sa.i7)(U);return un.setStackingGroups(la),un};function _o(U,ee){return U.length>ee?U.substring(0,ee).concat("..."):U}function lu(U,ee,ie,Ee=0,Se=0){const Ae=U.fields[0].values,Ce=Pr.gD,Ve=U.fields[0].display,Je=pt=>Ve?Ve(Ae[pt]):Ae[pt];let qe=0;for(let pt=0;pt<Ae.length;pt++){let Tt=(0,sr.X1)(_o((0,fn.zc)(Je(pt)),ie),Ce);qe=Tt.width>qe?Tt.width:qe}const it=ee>0?Math.cos(ee*Math.PI/180)*(0,sr.X1)(_o((0,fn.zc)(Je(Ae.length-1)),ie),Ce).width:0,gt=ee<0?Math.cos(ee*-1*Math.PI/180)*(0,sr.X1)(_o((0,fn.zc)(Je(0)),ie),Ce).width:0,Ot=Math.sin((ee>=0?ee:ee*-1)*Math.PI/180)*qe-Se;return[Math.round(Pr.gD*rn.Z.pxRatio),it,Ot,Math.max(0,gt-Ee)]}function jl(U,ee,ie){if(!U?.length)return{warn:"No data in response"};(0,Wa.UY)(U);const Ee=U.length===1?(0,wn.Y3)(U[0],U[0].fields.findIndex(gt=>gt.type===zn.fS.time)):(0,wn._9)({frames:U});if(!Ee)return{warn:"Unable to join data"};let Se;if(ie.colorByField&&(Se=(0,Un.findField)(Ee,ie.colorByField),!Se))return{warn:"Color field not found"};let Ae;if(ie.xField&&(Ae=(0,Un.findField)(Ee,ie.xField),!Ae))return{warn:"Configured x field not found"};let Ce,Ve,Je=[];for(const gt of Ee.fields)if(gt!==Ae)switch(gt.type){case zn.fS.string:Ce||(Ce=gt);break;case zn.fS.time:Ve||(Ve=gt);break;case zn.fS.number:{const Ot={...gt,state:{...gt.state,seriesIndex:Je.length},config:{...gt.config,custom:{...gt.config.custom,stacking:{group:"_",mode:ie.stacking}}},values:gt.values.map(pt=>Number.isFinite(pt)||pt==null?pt:null)};ie.stacking===Bt.o0.Percent&&(Ot.config.unit="percentunit",Ot.display=(0,yn.U)({field:Ot,theme:ee})),Je.push(Ot)}}let qe=Ae;if(qe||(qe=Ce||Ve),!qe)return{warn:"Bar charts requires a string or time field"};if(!Je.length)return{warn:"No numeric fields found"};if(Se&&Je.length>1){const gt=Je.find(Ot=>Ot!==Se);gt&&(Je=[gt])}let it=Je;return ie.stacking===Bt.o0.Percent&&(it=Je.map(gt=>{const Ot=Ee.fields.find(Tt=>Tt.state?.displayName===gt.state?.displayName),pt={...gt,config:{...Ot.config},values:gt.values};return pt.display=(0,yn.U)({field:pt,theme:ee}),pt}),it.unshift(qe)),Je.unshift(qe),{aligned:Ee,colorByField:Se,viz:[{length:qe.values.length,fields:Je}],legend:{fields:it,length:qe.values.length}}}const or=U=>!!(U?.sortBy&&U.sortDesc!==null),zo=10,vo=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(U,ee)=>ee.text?.valueSize===U.text?.valueSize],cu=({data:U,options:ee,fieldConfig:ie,width:Ee,height:Se,timeZone:Ae,id:Ce})=>{const Ve=(0,Z.l4)(),{eventBus:Je}=(0,Qa.R9)(),qe=(0,b.useRef)(void 0),it=(0,b.useRef)(!1),[gt,Ot]=(0,b.useState)(void 0),[pt,Tt]=(0,b.useState)(null),[Ut,Mt]=(0,b.useState)(null),[_t,an]=(0,b.useState)(null),[un,jt]=(0,b.useState)(!1),[bn,Xt]=(0,b.useState)(!1),vn=()=>{it.current=!1,Tt(null),Xt(!1)},An=()=>{it.current=!it.current,Xt(it.current)},Nn=(0,b.useRef)(),In=(0,b.useRef)(),_n=(0,b.useMemo)(()=>jl(U.series,Ve,ee),[U.series,Ve,ee]),Wn="viz"in _n?_n:null;In.current=Wn?.colorByField;const la=(0,b.useRef)(1e4);(0,b.useMemo)(()=>{la.current++},[ee]);const Hn=(0,b.useMemo)(()=>{const Bn=Wn?.viz[0],Zn=Nn.current;return Bn&&Zn&&(0,ar.Ch)(Bn,Zn,!0)||la.current++,Nn.current=Bn,(U.structureRev??0)+la.current},[Wn,U.structureRev]),Sn=(0,b.useMemo)(()=>!ee.orientation||ee.orientation===qa.wm.Auto?Ee<Se?qa.wm.Horizontal:qa.wm.Vertical:ee.orientation,[Ee,Se,ee.orientation]),na=(0,b.useMemo)(()=>{if(ee.xTickLabelMaxLength)return ee.xTickLabelMaxLength;{const Bn=ee.xTickLabelRotation,Zn=(0,sr.X1)("M",Pr.gD).width;return Se/2/(Math.sin((Bn>=0?Bn:Bn*-1)*Math.PI/180)*Zn)-3}},[Se,ee.xTickLabelRotation,ee.xTickLabelMaxLength]);if("warn"in _n)return b.createElement(ws.Z,{panelId:Ce,fieldConfig:ie,data:U,message:_n.warn,needsNumberField:!0});const pa=(Bn,Zn,ea)=>{const fa=Zn==null?null:Bn.fields[Zn];if(fa){const Ia=(0,Wa.CZ)(fa,Bn);Zn=_n.aligned.fields.findIndex(On=>Ia===(0,Wa.CZ)(On,_n.aligned))}const Oa=ee.fullHighlight&&ee.stacking!==Bt.o0.None?Bt.f3.Multi:ee.tooltip.mode,Ja=ee.tooltip.mode===Bt.f3.Multi?ee.tooltip.sort:Bt.As.None;return b.createElement(b.Fragment,null,bn&&b.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},b.createElement(Et.P,{onClick:vn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),b.createElement(Yt.H,{data:_n.aligned,rowIndex:ea,columnIndex:Zn,sortOrder:Ja,mode:Oa}))},_a=Bn=>{const{legend:Zn}=ee;if(!Bn||Zn.showLegend===!1)return null;if(_n.colorByField){const ea=(0,Qt.$m)([_n.colorByField],Ve);if(ea?.length)return b.createElement(Xs.AY.Legend,{placement:Zn.placement},b.createElement(_r.l,{placement:Zn.placement,items:ea,displayMode:Zn.displayMode}))}return b.createElement(eo.l,{data:[_n.legend],config:Bn,maxHeight:"35%",maxWidth:"60%",...ee.legend})},Za=(Bn,Zn)=>Nn.current.fields[Bn].values[Zn];let Va,ka=1;if(_n.colorByField){const Bn=_n.colorByField,Zn=Bn.display;ka=(Bn.config.custom.fillOpacity??100)/100,Va=(ea,fa)=>Zn(In.current?.values[fa]).color}else Nn.current.fields.some(Zn=>Zn.config.custom?.gradientMode===Bt.FI.Scheme&&Zn.config.color?.mode===Aa.S.Thresholds||Zn.config.mappings?.some(fa=>fa.type==="value"?Object.values(fa.options).some(Oa=>Oa.color!=null):fa.options.result.color!=null))&&(ka=(Nn.current.fields.find(ea=>ea.type===zn.fS.number).config.custom.fillOpacity??100)/100,Va=(ea,fa)=>{let Oa=Nn.current.fields[ea];return Oa.display(Oa.values[fa]).color});const qn=(Bn,Zn,ea)=>{const{barWidth:fa,barRadius:Oa=0,showValue:Ja,groupWidth:Ia,stacking:On,legend:Ln,tooltip:Kn,text:da,xTickLabelRotation:aa,xTickLabelSpacing:Ca,fullHighlight:xa}=ee;return iu({frame:Bn,getTimeRange:ea,timeZone:Ae,theme:Ve,timeZones:[Ae],eventBus:Je,orientation:Sn,barWidth:fa,barRadius:Oa,showValue:Ja,groupWidth:Ia,xTickLabelRotation:aa,xTickLabelMaxLength:na,xTickLabelSpacing:Ca,stacking:On,legend:Ln,tooltip:Kn,text:da,rawValue:Za,getColor:Va,fillOpacity:ka,allFrames:_n.viz,fullHighlight:xa})};return b.createElement(zr.d,{theme:Ve,frames:_n.viz,prepConfig:qn,propsToDiff:vo,preparePlotFrame:Bn=>Bn[0],renderLegend:_a,legend:ee.legend,timeZone:Ae,timeRange:{from:1,to:1},structureRev:Hn,width:Ee,height:Se},Bn=>(qe.current!==Bn&&(qe.current=vt({config:Bn,onUPlotClick:An,setFocusedSeriesIdx:Mt,setFocusedPointIdx:an,setCoords:Tt,setHover:Ot,isToolTipOpen:it,isActive:un,setIsActive:jt})),ee.tooltip.mode===Bt.f3.None?null:b.createElement(Ws.h_,null,gt&&pt&&Ut&&b.createElement(rr.S,{position:{x:pt.viewport.x,y:pt.viewport.y},offset:{x:zo,y:zo},allowPointerEvents:it.current},pa(_n.viz[0],Ut,_t)))))};var br=e(12223),Ho=e(20454),du=e(13026);const Ri=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],Eo=U=>{let ee=U.value??0;const ie=ee<0;ie&&(ee*=-1);let Ee=Ri[0];for(const Ce of Ri)if(Ee=Ce,ee<=Ee.value)break;const Se=Ce=>{U.onChange(Ce*(ie?-1:1))},Ae=()=>{U.onChange(U.value*-1)};return b.createElement(br.Lh,null,b.createElement(Ho.S,{value:Ee.value,options:Ri,onChange:Se}),ee!==0&&b.createElement(ts.u,{content:"Require space from the right side",placement:"top"},b.createElement("div",null,b.createElement(du.X,{value:ie,onChange:Ae,label:"RTL"}))))};var Da=e(43419);class Ql{getListWithDefaults(ee){return ee.getListAppender({name:Da.y.BarChart,pluginId:"barchart",options:{showValue:Bt.Jp.Never,legend:{calcs:[],displayMode:Bt.jK.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:ie=>{ie.options.barWidth=.8}}})}getSuggestionsForData(ee){const ie=this.getListWithDefaults(ee),{dataSummary:Ee}=ee;Ee.frameCount===1&&(!Ee.hasNumberField||!Ee.hasStringField||Ee.rowCountTotal>50||(ie.append({name:Da.y.BarChart}),Ee.numberFieldCount>1&&(ie.append({name:Da.y.BarChartStacked,options:{stacking:Bt.o0.Normal}}),ie.append({name:Da.y.BarChartStackedPercent,options:{stacking:Bt.o0.Percent}})),ie.append({name:Da.y.BarChartHorizontal,options:{orientation:qa.wm.Horizontal}}),Ee.numberFieldCount>1&&(ie.append({name:Da.y.BarChartHorizontalStacked,options:{stacking:Bt.o0.Normal,orientation:qa.wm.Horizontal}}),ie.append({name:Da.y.BarChartHorizontalStackedPercent,options:{orientation:qa.wm.Horizontal,stacking:Bt.o0.Percent}}))))}}const uu=new W.c(cu).useFieldConfig({standardOptions:{[Ba.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Aa.S.PaletteClassic}}},useCustomConfig:U=>{const ee=Ii;U.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:ee.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:ee.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:Qs.q.fillGradient[0].value,settings:{options:Qs.q.fillGradient}}),U.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:Bt.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:Bt.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),U.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:Bt.i3.Off},settings:{options:Qs.q.thresholdsDisplayModes},editor:Js.F,override:Js.F,process:Zs.kG,shouldApply:()=>!0}),kn.r(U,ee,!1),ma.B(U)}}).setPanelOptions((U,ee)=>{const ie=jl(ee.data,w.config.theme2,ee.options??{});let Ee="First string or time field";const Se="viz"in ie?ie.viz[0]:void 0;if(Se?.fields?.length){const Ae=Se.fields[0];Ee+=` (${(0,Wa.CZ)(Ae,Se)})`}U.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:Ee}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:qa.wm.Auto,label:"Auto"},{value:qa.wm.Horizontal,label:"Horizontal"},{value:qa.wm.Vertical,label:"Vertical"}]},defaultValue:Cr.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Cr.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:Ae=>Ae.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Cr.xTickLabelSpacing,editor:Eo}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Bt.Jp.Auto,label:"Auto"},{value:Bt.Jp.Always,label:"Always"},{value:Bt.Jp.Never,label:"Never"}]},defaultValue:Cr.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:Qs.q.stacking},defaultValue:Cr.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Cr.groupWidth,settings:{min:0,max:1,step:.01},showIf:(Ae,Ce)=>Ae.stacking&&Ae.stacking!==Bt.o0.None?!1:mu(Ce)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Cr.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Cr.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Cr.fullHighlight}),U.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!ee.options?.fullHighlight||ee.options?.stacking===Bt.o0.None)&&ha.L(U),Pa.J(U),$s.Z(U,!1)}).setSuggestionsSupplier(new Ql);function mu(U){let ee=0;if(U)for(const ie of U)for(const Ee of ie.fields)Ee.type===zn.fS.number&&ee++;return ee}var Yl=e(86609),Ai=e(86085);const fu=U=>(0,Yl.rD)(U);var gu=e(2104);const so={displayMode:Bt.QH.Gradient,minVizHeight:10,minVizWidth:0,namePlacement:Bt.L3.Auto,showUnfilled:!0,valueMode:Bt.M8.Color};class Zl{getSuggestionsForData(ee){const{dataSummary:ie}=ee;if(!ie.hasData||!ie.hasNumberField)return;const Ee=ee.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});ie.numberFieldCount>50||(ie.hasStringField&&ie.frameCount===1&&ie.rowCountTotal<30?(Ee.append({name:Da.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Bt.QH.Basic,orientation:qa.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ee.append({name:Da.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Bt.QH.Lcd,orientation:qa.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(Ee.append({name:Da.y.BarGaugeBasic,options:{displayMode:Bt.QH.Basic,orientation:qa.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ee.append({name:Da.y.BarGaugeLCD,options:{displayMode:Bt.QH.Lcd,orientation:qa.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const pu=new W.c(gu.M).useFieldConfig().setPanelOptions(U=>{(0,Ai.j)(U),(0,Ai.h)(U),$s.Z(U),U.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:Bt.QH.Gradient,label:"Gradient"},{value:Bt.QH.Lcd,label:"Retro LCD"},{value:Bt.QH.Basic,label:"Basic"}]},defaultValue:so.displayMode}).addRadio({path:"valueMode",name:"Value display",settings:{options:[{value:Bt.M8.Color,label:"Value color"},{value:Bt.M8.Text,label:"Text color"},{value:Bt.M8.Hidden,label:"Hidden"}]},defaultValue:so.valueMode}).addRadio({path:"namePlacement",name:"Name placement",settings:{options:[{value:Bt.L3.Auto,label:"Auto"},{value:Bt.L3.Top,label:"Top"},{value:Bt.L3.Left,label:"Left"}]},defaultValue:so.namePlacement,showIf:ee=>ee.orientation!==qa.wm.Vertical}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:so.showUnfilled,showIf:ee=>ee.displayMode!=="lcd"}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:so.minVizWidth,showIf:ee=>ee.orientation===qa.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:so.minVizHeight,showIf:ee=>ee.orientation===qa.wm.Horizontal})}).setPanelChangeHandler(Yl.ZH).setMigrationHandler(fu).setSuggestionsSupplier(new Zl);var Mr=e(71237),ko=e(52716),Li=e(12569),Go=e(37437),hu=e(87786),jo=e(76941),ro=e(14312);const Bi=U=>ee=>{const ie=U.visualization.getColorByName(ee?.color||ro.Jx);return{markerTriangle:(0,_.css)`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${ie};
      `,markerBar:(0,_.css)`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${ie};
      `}};var Jl=e(95681),vu=e(67814),oo=e(85830),Ls=e(96227),Eu=e(68421),io=e(9006),yu=e(40835),Xl=e(7376);const Ui=b.forwardRef(({annotation:U,onSave:ee,onDismiss:ie,timeFormatter:Ee,className:Se,...Ae},Ce)=>{const Ve=(0,Z.wW)(yo),Je=(0,Qa.R9)(),qe=(0,b.useRef)(null);(0,vu.Z)(qe,()=>{ie()});const[it,gt]=(0,Jl.default)(async bn=>{const Xt=await Je.onAnnotationCreate(bn);return ee&&ee(),Xt}),[Ot,pt]=(0,Jl.default)(async bn=>{const Xt=await Je.onAnnotationUpdate(bn);return ee&&ee(),Xt}),Tt=U.id!==void 0,Ut=U.time!==U.timeEnd,Mt=Tt?pt:gt,_t=Tt?Ot:it,an=Ut?`${Ee(U.time)} - ${Ee(U.timeEnd)}`:Ee(U.time),un=({tags:bn,description:Xt})=>{Mt({id:U.id,tags:bn,description:Xt,from:Math.round(U.time),to:Math.round(U.timeEnd)})},jt=b.createElement("div",{ref:Ce,className:(0,_.cx)(Ve.editor,Se),...Ae},b.createElement("div",{className:Ve.header},b.createElement(br.Lh,{justify:"space-between",align:"center"},b.createElement("div",{className:Ve.title},"Add annotation"),b.createElement("div",{className:Ve.ts},an))),b.createElement("div",{className:Ve.editorForm},b.createElement(oo.l,{onSubmit:un,defaultValues:{description:U?.text,tags:U?.tags||[]}},({register:bn,errors:Xt,control:vn})=>b.createElement(b.Fragment,null,b.createElement(Ls.g,{label:"Description",invalid:!!Xt.description,error:Xt?.description?.message},b.createElement(Eu.K,{...bn("description",{required:"Annotation description is required"})})),b.createElement(Ls.g,{label:"Tags"},b.createElement(io.g,{control:vn,name:"tags",render:({field:{ref:An,onChange:Nn,...In}})=>b.createElement(yu.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:Nn,tagOptions:Xl.lK,tags:In.value})})),b.createElement(br.Lh,{justify:"flex-end"},b.createElement(ae.zx,{size:"sm",variant:"secondary",onClick:ie,fill:"outline"},"Cancel"),b.createElement(ae.zx,{size:"sm",type:"submit",disabled:_t?.loading},_t?.loading?"Saving":"Save"))))));return b.createElement(b.Fragment,null,b.createElement("div",{className:Ve.backdrop}),b.createElement("div",{ref:qe},jt))});Ui.displayName="AnnotationEditorForm";const yo=U=>({backdrop:(0,_.css)`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${U.zIndex.navbarFixed};
    `,editorContainer:(0,_.css)`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:(0,_.css)`
      background: ${U.colors.background.primary};
      box-shadow: ${U.shadows.z3};
      z-index: ${U.zIndex.dropdown};
      border: 1px solid ${U.colors.border.weak};
      border-radius: ${U.shape.radius.default};
      width: 460px;
    `,editorForm:(0,_.css)`
      padding: ${U.spacing(1)};
    `,header:(0,_.css)`
      border-bottom: 1px solid ${U.colors.border.weak};
      padding: ${U.spacing(1.5,1)};
    `,title:(0,_.css)`
      font-weight: ${U.typography.fontWeightMedium};
    `,ts:(0,_.css)`
      font-size: ${U.typography.bodySmall.fontSize};
      color: ${U.colors.text.secondary};
    `}),Du=({onDismiss:U,onSave:ee,timeZone:ie,data:Ee,selection:Se,annotation:Ae,style:Ce})=>{const Ve=(0,Z.l4)(),Je=(0,Z.wW)(Pu),qe=(0,Z.wW)(Bi),[it,gt]=(0,b.useState)(null),[Ot,pt]=(0,b.useState)(null),Tt=(0,jo.D)(it,Ot,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let Ut=Ee.fields[0];if(!Ut)return null;const Mt=Ut.display||(0,yn.U)({field:Ut,timeZone:ie,theme:Ve}),_t=Se.min!==Se.max;return b.createElement(Ws.h_,null,b.createElement(b.Fragment,null,b.createElement("div",{style:Ce},b.createElement("div",{className:(0,_.cx)((0,_.css)`
                position: absolute;
                top: ${Se.bbox.top}px;
                left: ${Se.bbox.left}px;
                width: ${Se.bbox.width}px;
                height: ${Se.bbox.height}px;
              `,_t?Je.overlayRange(Ae):Je.overlay(Ae))},b.createElement("div",{ref:gt,className:_t?(0,_.cx)(qe(Ae).markerBar,Je.markerBar):(0,_.cx)(qe(Ae).markerTriangle,Je.markerTriangle)}))),b.createElement(Ui,{annotation:Ae||{time:Se.min,timeEnd:Se.max},timeFormatter:an=>Mt(an).text,onSave:ee,onDismiss:U,ref:pt,style:Tt.styles.popper,...Tt.attributes.popper})))},Pu=U=>({overlay:ee=>{const ie=U.visualization.getColorByName(ee?.color||ro.Jx);return(0,_.css)`
        border-left: 1px dashed ${ie};
      `},overlayRange:ee=>{const ie=U.visualization.getColorByName(ee?.color||ro.Jx);return(0,_.css)`
        background: ${ya.alpha(ie,.1)};
        border-left: 1px dashed ${ie};
        border-right: 1px dashed ${ie};
      `},markerTriangle:(0,_.css)`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:(0,_.css)`
      top: 100%;
      left: 0;
      position: absolute;
    `}),Ni=({data:U,timeZone:ee,config:ie,children:Ee})=>{const Se=(0,b.useRef)(),[Ae,Ce]=(0,b.useState)(),[Ve,Je]=(0,b.useState)(!1),[qe,it]=(0,b.useState)(null),gt=(0,hu.Z)(),Ot=(0,b.useCallback)(()=>{it(null),Se.current&&Se.current.setSelect({top:0,left:0,width:0,height:0}),Je(!1)},[Je,it]);(0,b.useLayoutEffect)(()=>{let Tt=!1;ie.addHook("init",Mt=>{Se.current=Mt;const _t=Mt.hooks.setSelect;if(_t)for(let an=0;an<_t.length;an++){const un=_t[an];un!==Ut&&(_t[an]=(...jt)=>{!Tt&&un(...jt)})}}),ie.addHook("syncRect",(Mt,_t)=>{gt()&&Ce(_t)});const Ut=Mt=>{Tt&&(Je(!0),it({min:Mt.posToVal(Mt.select.left,"x"),max:Mt.posToVal(Mt.select.left+Mt.select.width,"x"),bbox:{left:Mt.select.left,top:0,height:Mt.select.height,width:Mt.select.width}}),Tt=!1)};ie.addHook("setSelect",Ut),ie.setCursor({bind:{mousedown:(Mt,_t,an)=>un=>(Tt=un.button===0&&(un.metaKey||un.ctrlKey),an(un),null),mouseup:(Mt,_t,an)=>un=>(Tt&&Mt.select.width===0&&(Mt.select.left=Mt.cursor.left,Mt.select.height=Mt.bbox.height/window.devicePixelRatio),an(un),null)}})},[ie,Ce,gt]);const pt=(0,b.useCallback)(({coords:Tt})=>{if(!Se.current||!Ae||!Tt)return;const Ut=Se.current.posToVal(Tt.plotCanvas.x,"x");Ut&&(it({min:Ut,max:Ut,bbox:{left:Tt.plotCanvas.x,top:0,height:Ae.height,width:0}}),Je(!0))},[Ae]);return b.createElement(b.Fragment,null,Ve&&qe&&Ae&&b.createElement(Du,{selection:qe,onDismiss:Ot,onSave:Ot,data:U,timeZone:ee,style:{position:"absolute",top:`${Ae.top}px`,left:`${Ae.left}px`,width:`${Ae.width}px`,height:`${Ae.height}px`}}),Ee?Ee({startAnnotating:pt}):null)};var kr=e(98579),ql=e(33582),ec=e(48069),tc=e(47330),Do=e(53039),wi=e(28425),Lr=e(68497),Cu=e(51064);const nc=({annotation:U,timeFormatter:ee,canEdit:ie,canDelete:Ee,onEdit:Se,onDelete:Ae})=>{const Ce=(0,Z.wW)(ac),Ve=ee(U.time),Je=ee(U.timeEnd);let qe=U.text;const it=U.tags;let gt="",Ot,pt,Tt=null;const Ut=b.createElement("span",{className:Ce.time},U.isRegion?`${Ve} - ${Je}`:Ve);if(U.login&&U.avatarUrl&&(Ot=b.createElement("img",{className:Ce.avatar,alt:"Annotation avatar",src:U.avatarUrl})),U.alertId!==void 0&&U.newState){const Mt=be.Z.getStateDisplayModel(U.newState);Tt=b.createElement("div",{className:Ce.alertState},b.createElement("i",{className:Mt.stateClass},Mt.text)),gt=be.Z.getAlertAnnotationInfo(U)}else U.title&&(qe=U.title+"<br />"+(typeof qe=="string"?qe:""));return(ie||Ee)&&(pt=b.createElement("div",{className:Ce.editControls},ie&&b.createElement(Lr.h,{name:"pen",size:"sm",onClick:Se,tooltip:"Edit"}),Ee&&b.createElement(Lr.h,{name:"trash-alt",size:"sm",onClick:Ae,tooltip:"Delete"}))),b.createElement("div",{className:Ce.wrapper},b.createElement("div",{className:Ce.header},b.createElement(br.Lh,{justify:"space-between",align:"center",spacing:"md"},b.createElement("div",{className:Ce.meta},b.createElement("span",null,Ot,Tt),Ut),pt)),b.createElement("div",{className:Ce.body},qe&&b.createElement("div",{dangerouslySetInnerHTML:{__html:wi.QX.sanitize(qe)}}),gt,b.createElement(b.Fragment,null,b.createElement(br.Lh,{spacing:"xs",wrap:!0},it?.map((Mt,_t)=>b.createElement(Cu.V,{name:Mt,key:`${Mt}-${_t}`}))))))};nc.displayName="AnnotationTooltip";const ac=U=>({wrapper:(0,_.css)`
      max-width: 400px;
    `,commentWrapper:(0,_.css)`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:(0,_.css)`
      padding: ${U.spacing(.5,1)};
      border-bottom: 1px solid ${U.colors.border.weak};
      font-size: ${U.typography.bodySmall.fontSize};
      display: flex;
    `,meta:(0,_.css)`
      display: flex;
      justify-content: space-between;
    `,editControls:(0,_.css)`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:(0,_.css)`
      border-radius: ${U.shape.radius.circle};
      width: 16px;
      height: 16px;
      margin-right: ${U.spacing(1)};
    `,alertState:(0,_.css)`
      padding-right: ${U.spacing(1)};
      font-weight: ${U.typography.fontWeightMedium};
    `,time:(0,_.css)`
      color: ${U.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:(0,_.css)`
      padding: ${U.spacing(1)};

      a {
        color: ${U.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),Wi=6,vs={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function sc({annotation:U,timeZone:ee,width:ie}){const{canAddAnnotations:Ee,canEditAnnotations:Se,canDeleteAnnotations:Ae,...Ce}=(0,Qa.R9)(),Ve=(0,Z.wW)(Bi),Je=(0,Z.wW)(Po),[qe,it]=(0,b.useState)(!1),[gt,Ot]=(0,b.useState)(!1),[pt,Tt]=(0,b.useState)(null),[Ut,Mt]=(0,b.useState)(null),[_t,an]=(0,b.useState)(null),un=(0,b.useRef)(),jt=(0,jo.D)(pt,Ut,vs),bn=(0,jo.D)(pt,_t,vs),Xt=(0,b.useCallback)(()=>{Ot(!0),it(!1)},[Ot,it]),vn=(0,b.useCallback)(()=>{Ce.onAnnotationDelete&&Ce.onAnnotationDelete(U.id)},[U,Ce]),An=(0,b.useCallback)(()=>{un.current&&clearTimeout(un.current),it(!0)},[it]),Nn=(0,b.useCallback)(()=>{un.current&&clearTimeout(un.current)},[]),In=(0,b.useCallback)(()=>{un.current=setTimeout(()=>{it(!1)},100)},[it]),_n=(0,b.useCallback)(na=>(0,ec.dq)(na,{format:tc.U6.fullDate,timeZone:ee}),[ee]),Wn=(0,b.useCallback)(()=>b.createElement(nc,{annotation:U,timeFormatter:_n,onEdit:Xt,onDelete:vn,canEdit:Se(U.dashboardUID),canDelete:Ae(U.dashboardUID)}),[Se,Ae,vn,Xt,_n,U]),la=!!U.isRegion&&ie>Wi;let Hn=`${ie/2}px`,Sn=b.createElement("div",{className:Ve(U).markerTriangle,style:{left:Hn,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return la&&(Sn=b.createElement("div",{className:Ve(U).markerBar,style:{width:`${ie}px`,transform:"translate3d(0,-50%, 0)"}})),b.createElement(b.Fragment,null,b.createElement("div",{ref:Tt,onMouseEnter:An,onMouseLeave:In,className:la?void 0:Je.markerWrapper,"data-testid":et.wl.pages.Dashboard.Annotations.marker},Sn),qe&&b.createElement(Ws.h_,null,b.createElement("div",{ref:Mt,style:jt.styles.popper,...jt.attributes.popper,className:Je.tooltip,onMouseEnter:Nn,onMouseLeave:In},Wn())),gt&&b.createElement(Ws.h_,null,b.createElement(Ui,{onDismiss:()=>Ot(!1),onSave:()=>Ot(!1),timeFormatter:_n,annotation:U,ref:an,style:bn.styles.popper,...bn.attributes.popper})))}const Po=U=>({markerWrapper:(0,_.css)`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:(0,_.css)`
      max-width: 400px;
    `,tooltip:(0,_.css)`
      ${(0,Do.getTooltipContainerStyles)(U)};
      padding: 0;
    `}),Qo=({annotations:U,timeZone:ee,config:ie})=>{const Ee=(0,Z.l4)(),Se=(0,b.useRef)(),Ae=(0,b.useRef)();(0,b.useEffect)(()=>{const Je=[];for(const qe of U)Je.push(new kr.U(qe));return Ae.current=Je,()=>{Ae.current=[]}},[U]),(0,b.useLayoutEffect)(()=>{ie.addHook("init",Je=>{Se.current=Je}),ie.addHook("draw",Je=>{if(!Ae.current)return null;const qe=Je.ctx;if(!qe)return;qe.save(),qe.beginPath(),qe.rect(Je.bbox.left,Je.bbox.top,Je.bbox.width,Je.bbox.height),qe.clip();const it=(gt,Ot)=>{qe.beginPath(),qe.lineWidth=2,qe.strokeStyle=Ot,qe.setLineDash([5,5]),qe.moveTo(gt,Je.bbox.top),qe.lineTo(gt,Je.bbox.top+Je.bbox.height),qe.stroke(),qe.closePath()};for(let gt=0;gt<Ae.current.length;gt++){const Ot=Ae.current[gt];for(let pt=0;pt<Ot.length;pt++){const Tt=Ot.get(pt);if(!Tt.time)continue;let Ut=Je.valToPos(Tt.time,"x",!0);const Mt=Ee.visualization.getColorByName(Tt.color);if(it(Ut,Mt),Tt.isRegion&&Tt.timeEnd){let _t=Je.valToPos(Tt.timeEnd,"x",!0);it(_t,Mt),qe.fillStyle=ya.alpha(Mt,.1),qe.rect(Ut,Je.bbox.top,_t-Ut,Je.bbox.height),qe.fill()}}}qe.restore()})},[ie,Ee]);const Ce=(0,b.useCallback)((Je,qe)=>{const gt=new kr.U(Je).get(qe.fieldIndex);if(!gt.time||!Se.current)return;let Ot=Se.current.valToPos(gt.time,"x");return Ot<0&&(Ot=0),{x:Ot,y:Se.current.bbox.height/window.devicePixelRatio+4}},[]),Ve=(0,b.useCallback)((Je,qe)=>{let it=0;const Ot=new kr.U(Je).get(qe.fieldIndex);if(!!Ot.isRegion&&Se.current){let Tt=Se.current.valToPos(Ot.time,"x"),Ut=Se.current.valToPos(Ot.timeEnd,"x");Tt<0&&(Tt=0),Ut>Se.current.bbox.width/window.devicePixelRatio&&(Ut=Se.current.bbox.width/window.devicePixelRatio),it=Ut-Tt}return b.createElement(sc,{annotation:Ot,timeZone:ee,width:it})},[ee]);return b.createElement(ql.T,{id:"annotations",config:ie,events:U,renderEventMarker:Ve,mapEventToXYCoords:Ce})};var Fi=e(17639),rc=e(84415),oc=e(43078),Bs=e(85001),ic=e(53790);const Yo=({data:U,config:ee,onClose:ie,timeZone:Ee,replaceVariables:Se,...Ae})=>{const[Ce,Ve]=(0,b.useState)(null),[Je,qe]=(0,b.useState)(null),[it,gt]=(0,b.useState)(!1);(0,b.useLayoutEffect)(()=>{let pt=null;ee.addHook("init",Tt=>{Tt.over.addEventListener("click",Ut=>{pt!=null&&!Ut.metaKey&&!Ut.ctrlKey&&!Ut.shiftKey&&(Ve({viewport:{x:Ut.clientX,y:Ut.clientY},plotCanvas:{x:Ut.clientX-Tt.rect.left,y:Ut.clientY-Tt.rect.top}}),qe({seriesIdx:pt,dataIdx:Tt.cursor.idxs[pt]}),gt(!0))})}),ee.addHook("setSeries",(Tt,Ut)=>{pt=Ut})},[ee]);const Ot=(0,b.useMemo)(()=>Ae.defaultItems?Ae.defaultItems.map(pt=>({...pt,items:pt.items.map(Tt=>({...Tt,onClick:Ut=>{Ce&&Tt.onClick?.(Ut,{coords:Ce})}}))})):[],[Ce,Ae.defaultItems]);return b.createElement(b.Fragment,null,it&&Ce&&b.createElement(bu,{data:U,frames:Ae.frames,defaultItems:Ot,timeZone:Ee,selection:{point:Je,coords:Ce},replaceVariables:Se,onClose:()=>{qe(null),gt(!1),ie&&ie()}}))},bu=({selection:U,timeZone:ee,defaultItems:ie,replaceVariables:Ee,data:Se,...Ae})=>{const Ce=(0,b.useRef)(null),Ve=()=>{Ae.onClose&&Ae.onClose()};(0,Fi.Z)(Ce,()=>{Ve()});const Je=Se.fields[0];if(!Je)return null;const qe=ie?[...ie]:[];let it=()=>null;if(U.point){const{seriesIdx:Ot,dataIdx:pt}=U.point,Tt=Je.display;if(Ot&&pt!==null){const Ut=Se.fields[Ot],Mt=Ut.display(Ut.values[pt]);Ut.config.links&&Ut.config.links.length>0&&Ut.getLinks&&qe.push({items:Ut.getLinks({valueRowIndex:pt}).map(an=>({label:an.title,ariaLabel:an.title,url:an.href,target:an.target,icon:an.target==="_self"?"link":"external-link-alt",onClick:an.onClick}))}),it=()=>b.createElement(rc.b,{timestamp:Tt(Je.values[pt]).text,displayValue:Mt,seriesColor:Mt.color,displayName:(0,Wa.CZ)(Ut,Se,Ae.frames)})}}const gt=()=>qe?.map((Ot,pt)=>b.createElement(oc.k,{key:`${Ot.label}${pt}`,label:Ot.label},(Ot.items||[]).map(Tt=>b.createElement(Bs.s,{key:Tt.label,url:Tt.url,label:Tt.label,target:Tt.target,icon:Tt.icon,active:Tt.active,onClick:Tt.onClick}))));return b.createElement(ic.x,{renderMenuItems:gt,renderHeader:it,x:U.coords.viewport.x,y:U.coords.viewport.y,onClose:Ve})};var lc=e(63544),Zo=e(61068);const Mu=({timeZone:U,dataFrame:ee,dataFrameFieldIndex:ie,config:Ee,exemplarColor:Se,clickedExemplarFieldIndex:Ae,setClickedExemplarFieldIndex:Ce})=>{const Ve=(0,Z.wW)(xu),[Je,qe]=(0,b.useState)(!1),[it,gt]=(0,b.useState)(!1),[Ot,pt]=b.useState(null),[Tt,Ut]=b.useState(null),{styles:Mt,attributes:_t}=(0,jo.D)(Ot,Tt,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),an=(0,b.useRef)();(0,b.useEffect)(()=>{Ae?.fieldIndex===ie.fieldIndex&&Ae?.frameIndex===ie.frameIndex||gt(!1)},[Ae,ie]);const un=()=>{const In=[b.createElement("rect",{fill:Se,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),b.createElement("path",{fill:Se,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),b.createElement("path",{fill:Se,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),b.createElement("rect",{fill:Se,key:"rectangle",width:"5",height:"5"}),b.createElement("path",{fill:Se,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),b.createElement("path",{fill:Se,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return In[ie.frameIndex%In.length]},jt=(0,b.useCallback)(()=>{Ae===void 0&&(an.current&&clearTimeout(an.current),qe(!0))},[qe,Ae]),bn=()=>{gt(!0)},Xt=(0,b.useCallback)(()=>{an.current=setTimeout(()=>{qe(!1)},150)},[qe]),vn=(0,b.useCallback)(()=>{const In=ee.fields.filter(Hn=>Hn.config.links?.length&&Hn.config.links?.length>0)||[],_n=[...In,...ee.fields.filter(Hn=>!In.includes(Hn))],Wn=Hn=>(0,ec.dq)(Hn,{format:tc.U6.fullDate,timeZone:U}),la=()=>{gt(!1),qe(!1),Ce(void 0)};return b.createElement("div",{onMouseEnter:jt,onMouseLeave:Xt,className:Ve.tooltip,ref:Ut,style:Mt.popper,..._t.popper},b.createElement("div",{className:Ve.wrapper},it&&b.createElement(Zo.o,{onClick:la}),b.createElement("div",{className:Ve.body},b.createElement("div",{className:Ve.header},b.createElement("span",{className:Ve.title},"Exemplars")),b.createElement("div",null,b.createElement("table",{className:Ve.exemplarsTable},b.createElement("tbody",null,_n.map((Hn,Sn)=>{const na=Hn.values[ie.fieldIndex],pa=Hn.config.links?.length?Hn.getLinks?.({valueRowIndex:ie.fieldIndex}):void 0;return b.createElement("tr",{key:Sn},b.createElement("td",{valign:"top"},Hn.name),b.createElement("td",null,b.createElement("div",{className:Ve.valueWrapper},b.createElement("span",null,Hn.type===zn.fS.time?Wn(na):na),pa&&b.createElement(lc.Z,{links:pa}))))})))))))},[_t.popper,ee.fields,ie,jt,Xt,Mt.popper,Ve,U,it,Ce]),An=Ee.getSeries().find(In=>In.props.dataFrameFieldIndex?.frameIndex===ie.frameIndex)?.props.lineColor,Nn=()=>{Ce(ie),bn()};return b.createElement(b.Fragment,null,b.createElement("div",{ref:pt,onClick:Nn,onKeyDown:In=>{In.key==="Enter"&&Nn()},onMouseEnter:jt,onMouseLeave:Xt,className:Ve.markerWrapper,"aria-label":et.wl.components.DataSource.Prometheus.exemplarMarker,role:"button",tabIndex:0},b.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:An},className:(0,_.cx)(Ve.marble,(Je||it)&&Ve.activeMarble)},un())),(Je||it)&&b.createElement(Ws.h_,null,vn()))},xu=U=>{const ee=U.isDark?U.v1.palette.dark2:U.v1.palette.white,ie=U.isDark?U.v1.palette.dark9:U.v1.palette.gray5,Ee=U.isDark?U.v1.palette.black:U.v1.palette.white,Se=U.isDark?U.v1.palette.dark3:U.v1.palette.gray6;return{markerWrapper:(0,_.css)`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:(0,_.css)`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${U.v1.palette.red};
      pointer-events: none;
    `,wrapper:(0,_.css)`
      background: ${ee};
      border: 1px solid ${ie};
      border-radius: ${U.shape.borderRadius(2)};
      box-shadow: 0 0 20px ${Ee};
      padding: ${U.spacing(1)};
    `,exemplarsTable:(0,_.css)`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${U.components.panel.background};
      }

      tr {
        background-color: ${U.colors.background.primary};

        &:nth-child(even) {
          background-color: ${Se};
        }
      }
    `,valueWrapper:(0,_.css)`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${U.spacing(1)};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:(0,_.css)`
      background: none;
      padding: 0;
      overflow-y: auto;
      max-height: 95vh;
    `,header:(0,_.css)`
      background: ${ie};
      padding: 6px 10px;
      display: flex;
    `,title:(0,_.css)`
      font-weight: ${U.typography.fontWeightMedium};
      padding-right: ${U.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:(0,_.css)`
      font-weight: ${U.typography.fontWeightMedium};
      border-radius: ${U.shape.borderRadius(2)};
      overflow: hidden;
    `,marble:(0,_.css)`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:(0,_.css)`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},cc=({exemplars:U,timeZone:ee,config:ie,visibleSeries:Ee})=>{const Se=(0,b.useRef)(),[Ae,Ce]=(0,b.useState)();(0,b.useLayoutEffect)(()=>{ie.addHook("init",qe=>{Se.current=qe})},[ie]);const Ve=(0,b.useCallback)((qe,it)=>{const gt=qe.fields.find(_t=>_t.name===zn.Ls),Ot=qe.fields.find(_t=>_t.name===zn.M5);if(!gt||!Ot||!Se.current)return;const pt=Object.keys(Se.current.scales).find(_t=>!["x","y"].some(an=>an===_t))??zr.j,Tt=Se.current.scales[pt].min,Ut=Se.current.scales[pt].max;let Mt=Ot.values[it.fieldIndex];return Tt!=null&&Mt<Tt&&(Mt=Tt),Ut!=null&&Mt>Ut&&(Mt=Ut),{x:Se.current.valToPos(gt.values[it.fieldIndex],"x"),y:Se.current.valToPos(Mt,pt)}},[]),Je=(0,b.useCallback)((qe,it)=>{const gt=Ee!==void 0?Ou(Ee,qe,it):!0,Ot=Ee!==void 0?Tu(qe,it,Ee):void 0;return gt?b.createElement(Mu,{setClickedExemplarFieldIndex:Ce,clickedExemplarFieldIndex:Ae,timeZone:ee,dataFrame:qe,dataFrameFieldIndex:it,config:ie,exemplarColor:Ot}):b.createElement(b.Fragment,null)},[ie,ee,Ee,Ce,Ae]);return b.createElement(ql.T,{config:ie,id:"exemplars",events:U,renderEventMarker:Je,mapEventToXYCoords:Ve})},Su=(U,ee)=>{const ie=U.series.filter(Se=>Se.props.show),Ee=[];return ee?.length&&ie.forEach(Se=>{const Ae=Se.props?.dataFrameFieldIndex?.frameIndex,Ce=Se.props?.dataFrameFieldIndex?.fieldIndex;if(Ae!==void 0&&Ce!==void 0){const Ve=ee[Ae]?.fields[Ce];Ve?.labels&&Ee.push({labels:Ve.labels,color:Se.props?.lineColor??""})}}),{labels:Ee,totalSeriesCount:U.series.length}},Tu=(U,ee,ie)=>{let Ee;return ie.labels.some(Se=>{const Ae=Object.keys(Se.labels),Ce=U.fields.filter(Ve=>Ae.find(Je=>Je===Ve.name));return Ce.length&&Ce.every((Je,qe,it)=>{const gt=Je.values[ee.fieldIndex];return Se.labels[Je.name]===gt})?(Ee=Se.color,!0):!1}),Ee},Ou=(U,ee,ie)=>{let Ee=!1;return U.labels.length===U.totalSeriesCount?Ee=!0:U.labels.some(Se=>{const Ae=Object.keys(Se.labels);if(Object.keys(Se.labels).length===0)Ee=!0;else{const Ce=ee.fields.filter(Ve=>Ae.find(Je=>Je===Ve.name));Ce.length&&(Ee=U.labels.some(Ve=>Object.keys(Ve.labels).every(Je=>{const qe=Ve.labels[Je];return Ce.find(it=>it.values[ie.fieldIndex]===qe)})))}return Ee}),Ee},Co=({config:U,onChangeTimeRange:ee})=>{const ie=(0,b.useRef)(),[Ee,Se]=(0,b.useState)([]),[Ae,Ce]=(0,b.useState)();if((0,b.useLayoutEffect)(()=>{U.addHook("init",pt=>{ie.current=pt}),U.addHook("setScale",pt=>{Se(pt.data?.[0]??[]),Ce(pt.scales.x??void 0)})},[U]),Ee.length<2||!ee||!Ae||!Ae.time||!Ae.min||!Ae.max)return null;let Ve=0,Je=Ee.length-1;for(;Ve<=Je&&Ee[Ve]==null;)Ve++;for(;Je>=0&&Ee[Je]==null;)Je--;const qe=Ee[Ve],it=Ee[Je],gt=Ae.min,Ot=Ae.max;return qe==null||it==null||qe<=Ot&&it>=gt?null:b.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},b.createElement("div",null,b.createElement("div",null,"Data outside time range"),b.createElement(ae.zx,{onClick:pt=>ee({from:qe,to:it}),variant:"secondary","data-testid":"time-series-zoom-to-data"},"Zoom to data")))};Co.displayName="OutsideRangePlugin";var us=e(76685),ir=e(28118),Ms=e.n(ir);const Ki=({step:U,y:ee,dragBounds:ie,mapPositionToValue:Ee,formatValue:Se,onChange:Ae})=>{const Ce=(0,Z.l4)();let Ve=ee,Je="none";ee<(ie.top??0)&&(Je="top"),ee>(ie.bottom??0)+22&&(Je="bottom"),Je==="bottom"&&(Ve=ie.bottom??ee),Je==="top"&&(Ve=ie.top??ee);const qe=typeof Ae!="function",it=(0,Z.wW)(lr,U,Je,qe),[gt,Ot]=(0,b.useState)(U.value),pt=(0,b.useMemo)(()=>Ce.colors.getContrastText(Ce.visualization.getColorByName(U.color)),[U.color,Ce]);return b.createElement(Ms(),{axis:"y",grid:[1,1],disabled:qe,onStop:qe?Be.noop:(Tt,Ut)=>(Ae(Ee(Ut.lastY)),!1),onDrag:(Tt,Ut)=>Ot(Ee(Ut.lastY)),position:{x:0,y:Ve},bounds:ie},b.createElement("div",{className:it.handle,style:{color:pt}},b.createElement("span",{className:it.handleText},Se(gt))))};Ki.displayName="ThresholdDragHandle";const lr=(U,ee,ie,Ee)=>{const Se=U.visualization.getColorByName(ee.color),Ae=dc(ie),Ce=ie!=="none";return{handle:(0,_.css)`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${Se};
      cursor: ${Ee?"initial":"grab"};
      border-top-right-radius: ${U.shape.radius.default};
      border-bottom-right-radius: ${U.shape.radius.default};
      ${Ce&&(0,_.css)`
        margin-top: 0;
        border-radius: ${U.shape.radius.default};
      `}
      background: ${Se};
      font-size: ${U.typography.bodySmall.fontSize};
      &:before {
        ${Ae};
      }
    `,handleText:(0,_.css)`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function dc(U){const ee=U==="none",ie=Ee=>(0,_.css)`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${Ee}px;
    border-right-color: inherit;
    border-top: ${Ee}px solid transparent;
    border-bottom: ${Ee}px solid transparent;
  `;return ee?(0,_.css)`
      ${ie(9)};
      left: -9px;
    `:U==="top"?(0,_.css)`
      ${ie(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:U==="bottom"?(0,_.css)`
      ${ie(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const bo=60,Vi=({config:U,fieldConfig:ee,onThresholdsChange:ie})=>{const Ee=(0,b.useRef)(),[Se,Ae]=(0,b.useState)(0);(0,b.useLayoutEffect)(()=>{U.setPadding([0,bo,0,0]),U.addHook("init",Ve=>{Ee.current=Ve}),U.addHook("draw",()=>{Ae(Ve=>Ve+1)})},[U]);const Ce=(0,b.useMemo)(()=>{const Ve=Ee.current;if(!Ve)return null;const Je=ee.defaults.thresholds;if(!Je)return null;const qe=(0,us.z1)(ee.defaults,zn.fS.number),it=ee.defaults.decimals,gt=[];for(let Ot=0;Ot<Je.steps.length;Ot++){const pt=Je.steps[Ot],Tt=Ve.valToPos(pt.value,qe);if(Number.isNaN(Tt)||!Number.isFinite(Tt))continue;const Ut=Ve.bbox.height/window.devicePixelRatio,_t=typeof ie=="function"?un=>{const jt=[...Je.steps.slice(0,Ot),...Je.steps.slice(Ot+1),{...Je.steps[Ot],value:un}].sort((bn,Xt)=>bn.value-Xt.value);ie({...Je,steps:jt})}:void 0,an=b.createElement(Ki,{key:`${pt.value}-${Ot}`,step:pt,y:Tt,dragBounds:{top:0,bottom:Ut},mapPositionToValue:un=>Ve.posToVal(un,qe),formatValue:un=>(0,fn.Cf)(qe)(un,it).text,onChange:_t});gt.push(an)}return gt},[Se,ee,ie]);return Ee.current?b.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(Ee.current.bbox.left+Ee.current.bbox.width)/window.devicePixelRatio}px`,top:`${Ee.current.bbox.top/window.devicePixelRatio}px`,width:`${bo}px`,height:`${Ee.current.bbox.height/window.devicePixelRatio}px`}},Ce):null};Vi.displayName="ThresholdControlsPlugin";var Iu=e(86756),Es=e(88350),Jo=e(26204),Ua=e(12714),Ru=e(69994);function Au(U){let ee=new Map;return U.map(Ee=>({...Ee,fields:Ee.fields.map(Se=>{if(Se.type===zn.fS.enum){let Ae=(0,us.z1)(Se.config,Se.type),Ce=ee.get(Ae);Ce||(Ce=[],ee.set(Ae,Ce));let Ve=Se.values.toArray().slice(),Je=Se.config.type.enum.text;if(Ce.length>0)for(let qe=0;qe<Ve.length;qe++)Ve[qe]+=Ce.length;return Ce.push(...Je),Se.config.type.enum.text=Ce,{...Se,values:new Iu.G(Ve)}}return Se})}))}function $i(U,ee,ie,Ee){if(!U?.length)return null;let Se=Ee!=null;Ee!=null&&Ee>0&&(U=[{...U[0],fields:[U[0].fields[Ee],...U[0].fields.filter((Je,qe)=>qe!==Ee)]}]);for(let Je of U)for(let qe of Je.fields)qe.type===zn.fS.time&&typeof qe.values[0]!="number"&&(qe.values=(0,Jo.p8)(qe,{destinationType:zn.fS.time}).values);let Ae=0;e:for(let Je of U)for(let qe of Je.fields)if(qe.type===zn.fS.enum&&++Ae>1){U=Au(U);break e}let Ce;const Ve=[];for(let Je of U){const qe=[];let it=!1,gt=!1,Ot=Se?Je:(0,Ua.w)({frame:Je,refFieldPseudoMin:ie?.from.valueOf(),refFieldPseudoMax:ie?.to.valueOf()});const pt=(0,Ru.I)(Ot).fields;for(let Tt=0;Tt<pt?.length;Tt++){const Ut=pt[Tt];switch(Ut.type){case zn.fS.time:it=!0,qe.push(Ut);break;case zn.fS.number:gt=Se?Tt>0:!0,Ce={...Ut,values:Ut.values.map(an=>Number.isFinite(an)||an==null?an:null)},qe.push(Ce);break;case zn.fS.enum:gt=!0;case zn.fS.string:Ce={...Ut,values:Ut.values},qe.push(Ce);break;case zn.fS.boolean:gt=!0;const Mt=Ut.config?.custom??{},_t={...Ut.config,max:1,min:0,custom:Mt};Mt.lineInterpolation!==Bt.KC.StepBefore&&(Mt.lineInterpolation=Bt.KC.StepAfter),Ce={...Ut,config:_t,type:zn.fS.number,values:Ut.values.map(an=>an==null?an:an?1:0)},(0,fn.br)(_t.unit)||(_t.unit="bool",Ce.display=(0,yn.U)({field:Ce,theme:ee})),qe.push(Ce);break}}(Se||it)&&gt&&Ve.push({...Je,length:Ot.length,fields:qe})}return Ve.length?(Lu(Ve,ee,0),_i(Ve,ee),Ve):null}const _i=(U,ee)=>{const{palette:ie}=ee.visualization;for(const Ee of U)for(const Se of Ee.fields)if(Se.type===zn.fS.enum){const Ae=ie[Se.state?.seriesIndex%ie.length],Ce=ee.visualization.getColorByName(Ae),Ve=Se.config.type.enum;Ve.color=Array(Ve.text.length).fill(Ce),Se.display=(0,yn.U)({field:Se,theme:ee})}},Lu=(U,ee,ie)=>{let Ee=0;U.forEach(Se=>{Se.fields.forEach((Ae,Ce)=>{Ce!==ie&&(Ae.type===zn.fS.number||Ae.type===zn.fS.boolean||Ae.type===zn.fS.enum)&&(Ae.state={...Ae.state,seriesIndex:Ee++},Ae.display=(0,yn.U)({field:Ae,theme:ee}))})})};function zi(U,ee){return!U||!U.length?[ee]:U.map(ie=>ie?.length?ie:ee)}function Hi(U,ee,ie,Ee,Se){return U.fields.forEach(Ae=>{if(Ae.state?.origin?.frameIndex===void 0||ee[Ae.state?.origin?.frameIndex]===void 0)return;const Ce=[];for(const Je of ee[Ae.state?.origin?.frameIndex].fields)if(Je.type===zn.fS.string)if(Ae.values instanceof Es.o){const qe={...Je};qe.values=new Es.o(Je.values,Ae.values.getOrderArray()),Ce.push(qe)}else Ce.push(Je);const Ve={fields:[...U.fields,...Ce],length:U.fields.length+Ce.length};Ae.getLinks=(0,ko.oB)(Ve,Ae,Ae.state.scopedVars,ie,Ee,Se)}),U}var _s=(U=>(U.Candles="candles",U.CandlesVolume="candles+volume",U.Volume="volume",U))(_s||{}),Xo=(U=>(U.Candles="candles",U.OHLCBars="ohlcbars",U))(Xo||{}),Br=(U=>(U.CloseClose="close-close",U.OpenClose="open-close",U))(Br||{});const ki={down:"red",flat:"gray",up:"green"},Gr={...{candleStyle:"candles",colorStrategy:"open-close",colors:{down:"red",up:"green",flat:"gray"},fields:{},includeAllFields:!1,mode:"candles+volume"},legend:{displayMode:Bt.jK.List,showLegend:!0,placement:"bottom",calcs:[]}},jr={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function Fs(U,ee,ie){const Ee=(0,Un.findField)(U,ie[ee.key]);if(!Ee)for(const Se of U.fields){const Ae=(0,Wa.CZ)(Se,U).toLowerCase();if(ee.defaults.includes(Ae)||ee.defaults.includes(Se.name))return Se}return Ee}function Gi(U,ee,ie,Ee){if(!U?.length)return null;const Se=ee.fields??{},Ae=U.length===1?(0,wn.Y3)(U[0],U[0].fields.findIndex(pt=>pt.type===zn.fS.time)):(0,wn._9)({frames:U});if(!Ae?.length)return null;const Ce={aligned:Ae,frame:Ae,names:{}},Ve=$i([Ae],ie,Ee);if(!Ve)return null;const Je=Ce.frame=Ve[0],qe=Je.fields.findIndex(pt=>pt.type===zn.fS.time);if(qe<0)return null;const it=new Set;for(const pt of Object.values(jr)){const Tt=Fs(Je,pt,Se);Tt&&(Ce[pt.key]=Tt,it.add(Tt))}if(!Ce.open&&!Ce.close&&(Ce.open=Je.fields.find(pt=>pt.type===zn.fS.number),Ce.open&&it.add(Ce.open)),Ce.open&&!Ce.close&&!Se.close){const pt=Ce.open.values.slice(1);pt.push(pt[pt.length-1]),Ce.close={...Ce.open,values:pt,name:"Next open",state:void 0},it.add(Ce.close),Je.fields.push(Ce.close),Ce.autoOpenClose=!0}if(Ce.close&&!Ce.open&&!Se.open){const pt=Ce.close.values.slice();pt.unshift(pt[0]),pt.length=Je.length,Ce.open={...Ce.close,values:pt,name:"Previous close",state:void 0},it.add(Ce.open),Je.fields.push(Ce.open),Ce.autoOpenClose=!0}!Ce.high&&!Se.high&&(Ce.high=Ce.open),!Ce.low&&!Se.low&&(Ce.low=Ce.open),ee.mode===_s.Volume?(Ce.high&&(Ce.high!==Ce.open&&it.delete(Ce.high),Ce.high=void 0),Ce.low&&(Ce.low!==Ce.open&&it.delete(Ce.low),Ce.low=void 0)):ee.mode===_s.Candles&&Ce.volume&&(it.delete(Ce.volume),Ce.volume=void 0);for(const pt of Object.values(jr)){const Tt=Ce[pt.key];Tt&&(Ce.names[pt.key]=(0,Wa.CZ)(Tt,Ce.frame))}const gt=Je.fields[qe],Ot=[gt];ee.includeAllFields?Ot.push(...Je.fields.filter(pt=>pt!==gt)):Ot.push(...it),Ce.frame={...Ce.frame,fields:Ot};for(let pt=0;pt<Ce.frame.fields.length;pt++){const Tt=Ce.frame.fields[pt];Tt.state={...Tt.state,seriesIndex:pt-1,origin:{fieldIndex:pt,frameIndex:0}}}return Ce}const{alpha:Mo}=ya;function Bu(U){let{mode:ee,candleStyle:ie,fields:Ee,colorStrategy:Se,upColor:Ae,downColor:Ce,flatColor:Ve,volumeAlpha:Je,flatAsUp:qe=!0}=U;const it=ee!==_s.Volume&&Ee.high!=null&&Ee.low!=null,gt=it&&ie===Xo.Candles,Ot=ee!==_s.Candles&&Ee.volume!=null;function pt(jt,bn,Xt,vn,An){return jt>0?Xt:jt<0?vn:An?Xt:bn}let Tt=0,Ut=Ee.open,Mt=Ee.high,_t=Ee.low,an=Ee.close,un=Ee.volume;return jt=>{let bn,Xt,vn,An,Nn,In;it&&(vn=new Path2D,Xt=new Path2D,bn=new Path2D),Ot&&(An=new Path2D,Nn=new Path2D,In=new Path2D);let _n=new Path2D,Wn=jt.ctx,la=jt.data[Tt],Hn=jt.data[Ut],Sn=jt.data[an],na=it?jt.data[Mt]:null,pa=it?jt.data[_t]:null,_a=Ot?jt.data[un]:null,Za=un!=null?Math.round(jt.valToPos(0,jt.series[un].scale,!0)):null,[Va,ka]=jt.series[0].idxs,qn=jt.data[0],Bn=Hn,Zn=jt.bbox.width;if(qn.length>1){let Ia=null;for(let On=0,Ln=1/0;On<qn.length;On++)if(Bn[On]!==void 0){if(Ia!=null){let Kn=Math.abs(qn[On]-qn[Ia]);Kn<Ln&&(Ln=Kn,Zn=Math.abs(jt.valToPos(qn[On],"x",!0)-jt.valToPos(qn[Ia],"x",!0)))}Ia=On}}let ea=Math.round(.6*Zn),fa=2,Oa=2;ea<=12&&(fa=Oa=1);let Ja=Math.floor(ea/2);for(let Ia=Va;Ia<=ka;Ia++){let On=Math.round(jt.valToPos(la[Ia],"x",!0)),Ln=Ia===Va?0:Math.sign(Sn[Ia]-Sn[Ia-1]),Kn=Math.sign(Sn[Ia]-Hn[Ia]);if(Ot&&In&&Nn&&An){let da=pt(Se===Br.CloseClose?Ln:Kn,In,Nn,An,Ia===Va&&Br.CloseClose?!1:qe),aa=Math.round(jt.valToPos(_a[Ia],jt.series[un].scale,!0));da.rect(On-Ja,aa,ea,Za-aa)}if(it&&vn&&Xt&&bn){let da=pt(Se===Br.CloseClose?Ln:Kn,vn,Xt,bn,Ia===Va&&Br.CloseClose?!1:qe),aa=Math.round(jt.valToPos(na[Ia],jt.series[Mt].scale,!0)),Ca=Math.round(jt.valToPos(pa[Ia],jt.series[_t].scale,!0));da.rect(On-Math.floor(fa/2),aa,fa,Ca-aa);let xa=Math.round(jt.valToPos(Hn[Ia],jt.series[Ut].scale,!0)),hs=Math.round(jt.valToPos(Sn[Ia],jt.series[an].scale,!0));if(gt){let cs=Math.min(xa,hs),dr=Math.max(xa,hs),Ts=Math.max(1,dr-cs);da.rect(On-Ja,cs,ea,Ts),Se===Br.CloseClose&&Kn>=0&&Ts>Oa*2&&_n.rect(On-Ja+Oa,cs+Oa,ea-Oa*2,Ts-Oa*2)}else da.rect(On-Ja,xa,Ja,fa),da.rect(On,hs,Ja,fa)}}Wn.save(),Wn.rect(jt.bbox.left,jt.bbox.top,jt.bbox.width,jt.bbox.height),Wn.clip(),Ot&&In&&Nn&&An&&(Wn.fillStyle=Mo(Ae,Je),Wn.fill(Nn),Wn.fillStyle=Mo(Ce,Je),Wn.fill(An),Wn.fillStyle=Mo(Ve,Je),Wn.fill(In)),it&&vn&&Xt&&bn&&(Wn.fillStyle=Ae,Wn.fill(Xt),Wn.fillStyle=Ce,Wn.fill(bn),Wn.fillStyle=Ve,Wn.fill(vn),Wn.globalCompositeOperation="destination-out",Wn.fill(_n)),Wn.restore()}}const Uu=({data:U,id:ee,timeRange:ie,timeZone:Ee,width:Se,height:Ae,options:Ce,fieldConfig:Ve,onChangeTimeRange:Je,replaceVariables:qe})=>{const{sync:it,canAddAnnotations:gt,onThresholdsChange:Ot,canEditThresholds:pt,showThresholds:Tt}=(0,Qa.R9)(),Ut=(0,Z.l4)(),Mt=(0,b.useMemo)(()=>Gi(U.series,Ce,Ut,ie),[U.series,Ce,Ut,ie]),{renderers:_t,tweakScale:an,tweakAxis:un,shouldRenderPrice:jt}=(0,b.useMemo)(()=>{let Xt=(ea,fa)=>ea,vn=(ea,fa)=>ea,An={renderers:[],tweakScale:Xt,tweakAxis:vn,shouldRenderPrice:!1};if(!Mt)return An;const Nn=Mt.names;if(!Object.keys(Nn).length)return An;const{mode:In,candleStyle:_n,colorStrategy:Wn}=Ce,la={...ki,...Ce.colors};let{open:Hn,high:Sn,low:na,close:pa,volume:_a}=Nn;if(Hn==null||pa==null)return An;let Za=.5,Va=-1,ka=!1;if(_a!=null&&In!==_s.Candles){let ea=Mt.volume;if(ea!=null){ka=!0;let{fillOpacity:fa}=ea.config.custom;fa&&(Za=fa/100),In!==_s.Volume&&(ea.config={...ea.config},ea.config.unit="short",ea.display=(0,yn.U)({field:ea,theme:Zt.config.theme2}),vn=(Oa,Ja)=>{if(Ja.name===Mt.volume?.name){let Ia=(On,Ln)=>{let Kn=[],da=On.series[Va].max;for(let aa=0;aa<Ln.length&&(Kn.push(Ln[aa]),!(da&&Ln[aa]>da));aa++);return Kn};Oa.space=20,Oa.filter=Ia,Oa.ticks={...Oa.ticks,filter:Ia}}return Oa},Xt=(Oa,Ja)=>(Ja.name===Mt.volume?.name&&(Oa.range=(Ia,On,Ln)=>[0,Ln*7]),Oa))}}let qn=In!==_s.Volume&&Sn!=null&&na!=null;if(!qn&&!ka)return An;let Bn={},Zn=[];return qn?Bn={open:Hn,high:Sn,low:na,close:pa}:Zn.push(Hn,pa),ka&&(Bn.volume=_a,Bn.open=Hn,Bn.close=pa),{shouldRenderPrice:qn,renderers:[{fieldMap:Bn,indicesOnly:Zn,init:(ea,fa)=>{Va=fa.volume,ea.addHook("drawAxes",Bu({mode:In,fields:fa,upColor:Zt.config.theme2.visualization.getColorByName(la.up),downColor:Zt.config.theme2.visualization.getColorByName(la.down),flatColor:Zt.config.theme2.visualization.getColorByName(la.flat),volumeAlpha:Za,colorStrategy:Wn,candleStyle:_n,flatAsUp:!0}))}}],tweakScale:Xt,tweakAxis:vn}},[Ce,U.structureRev,U.series.length]);if(!Mt)return b.createElement(ws.Z,{panelId:ee,fieldConfig:Ve,data:U,needsTimeField:!0,needsNumberField:!0});if(jt)for(let Xt in _t[0].fieldMap){let vn=Mt[Xt];vn.config={...vn.config,custom:{...vn.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const bn=!!(gt&&gt());return b.createElement(Li.p,{frames:[Mt.frame],structureRev:U.structureRev,timeRange:ie,timeZone:Ee,width:Se,height:Ae,legend:Ce.legend,renderers:_t,tweakAxis:un,tweakScale:an,options:Ce},(Xt,vn)=>(vn.fields.forEach(An=>{An.getLinks=(0,ko.oB)(vn,An,An.state.scopedVars,qe,Ee)}),b.createElement(b.Fragment,null,b.createElement(Go.R,{config:Xt,onZoom:Je,withZoomY:!0}),b.createElement(Ta.i,{data:vn,config:Xt,mode:Bt.f3.Multi,sync:it,timeZone:Ee}),U.annotations&&b.createElement(Qo,{annotations:U.annotations,config:Xt,timeZone:Ee}),bn?b.createElement(Ni,{data:vn,timeZone:Ee,config:Xt},({startAnnotating:An})=>b.createElement(Yo,{data:vn,config:Xt,timeZone:Ee,replaceVariables:qe,defaultItems:bn?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Nn,In)=>{In&&An({coords:In.coords})}}]}]:[]})):b.createElement(Yo,{data:vn,config:Xt,timeZone:Ee,replaceVariables:qe,defaultItems:[]}),U.annotations&&b.createElement(cc,{config:Xt,exemplars:U.annotations,timeZone:Ee}),(pt&&Ot||Tt)&&b.createElement(Vi,{config:Xt,fieldConfig:Ve,onThresholdsChange:pt?Ot:void 0}),b.createElement(Co,{config:Xt,onChangeTimeRange:Je}))))};class Ur{getSuggestionsForData(ee){const{dataSummary:ie}=ee;if(!ee.data?.series||!ie.hasData||ie.timeFieldCount<1||ie.numberFieldCount<2||ie.numberFieldCount>10)return;const Ee=Gi(ee.data.series,Gr,w.config.theme2);if(!Ee||Ee.open===Ee.high&&Ee.open===Ee.low)return;ee.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Da.y.Candlestick,options:Gr,fieldConfig:{defaults:{},overrides:[]},score:Ee.autoOpenClose?qa._.Good:qa._.Best})}}const Nu=[{label:"Candles",value:_s.Candles},{label:"Volume",value:_s.Volume},{label:"Both",value:_s.CandlesVolume}],xo=[{label:"Candles",value:Xo.Candles},{label:"OHLC Bars",value:Xo.OHLCBars}],wu=[{label:"Since Open",value:Br.OpenClose},{label:"Since Prior Close",value:Br.CloseClose}],Wu=U=>U.type===zn.fS.number;function Ha(U,ee,ie){let Ee="Auto ";if(ie){const Se=ie[ee.key];Se?.config?(Ee+="= "+(0,Wa.CZ)(Se),Se===ie?.open&&ee.key!=="open"&&(Ee+=` (${ee.defaults.join(",")})`)):Ee+=`(${ee.defaults.join(",")})`}U.addFieldNamePicker({path:`fields.${ee.key}`,name:ee.name,description:ee.description,settings:{filter:Wu,placeholderText:Ee}})}const uc=new W.c(Uu).useFieldConfig((0,Mr.F)(Mr.r)).setPanelOptions((U,ee)=>{const ie=ee.options??Gr,Ee=Gi(ee.data,ie,w.config.theme2);U.addRadio({path:"mode",name:"Mode",description:"",defaultValue:Gr.mode,settings:{options:Nu}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:Gr.candleStyle,settings:{options:xo},showIf:Se=>Se.mode!==_s.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:Gr.colorStrategy,settings:{options:wu}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:ki.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:ki.down}),Ha(U,jr.open,Ee),ie.mode!==_s.Volume&&(Ha(U,jr.high,Ee),Ha(U,jr.low,Ee)),Ha(U,jr.close,Ee),ie.mode!==_s.Candles&&Ha(U,jr.volume,Ee),U.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:Gr.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),Pa.J(U)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new Ur);var Na=e(15296),hn=e(69307),mc=e(71707),Nr=e(20367),fc=e(81583),gc=e(6278),So=e(38361);const To=U=>({dashlistSectionHeader:(0,_.css)`
    padding: ${U.spacing(.25,1)};
    margin-right: ${U.spacing(1)};
  `,dashlistSection:(0,_.css)`
    margin-bottom: ${U.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:(0,_.css)`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${U.colors.border.weak};
    margin-right: ${U.spacing(1)};
    padding: ${U.spacing(1)};
    align-items: center;

    &:hover {
      a {
        color: ${U.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistFolder:(0,_.css)`
    color: ${U.colors.text.secondary};
    font-size: ${U.typography.bodySmall.fontSize};
    line-height: ${U.typography.body.lineHeight};
  `,dashlistTitle:(0,_.css)`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:(0,_.css)`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:(0,_.css)`
    position: relative;
    list-style: none;
  `});async function pc(U,ee){let ie=Promise.resolve([]);if(U.showStarred){const it={limit:U.maxItems,starred:"true"};ie=(0,Nr.i)().search(it)}let Ee=Promise.resolve([]),Se=[];if(U.showRecentlyViewed){let it=await fc.Z.getDashboardOpened();Se=(0,Be.take)(it,U.maxItems),Ee=(0,Nr.i)().search({dashboardUIDs:Se,limit:U.maxItems})}let Ae=Promise.resolve([]);if(U.showSearch){const it=U.folderUID===""?"general":U.folderUID,gt={limit:U.maxItems,query:ee(U.query,{},"text"),folderUIDs:it,tag:U.tags.map(Ot=>ee(Ot,{},"text")),type:"dash-db"};Ae=(0,Nr.i)().search(gt)}const[Ce,Ve,Je]=await Promise.all([ie,Ae,Ee]);let qe=new Map;for(const it of Se){const gt=Je.find(Ot=>Ot.uid===it);gt&&qe.set(it,{...gt,isRecent:!0})}return Ve.forEach(it=>{it.uid&&(qe.has(it.uid)?qe.get(it.uid).isSearchResult=!0:qe.set(it.uid,{...it,isSearchResult:!0}))}),Ce.forEach(it=>{it.uid&&(qe.has(it.uid)?qe.get(it.uid).isStarred=!0:qe.set(it.uid,{...it,isStarred:!0}))}),qe}function Qr(U){const[ee,ie]=(0,b.useState)(new Map),Ee=(0,k.useDispatch)();(0,b.useEffect)(()=>{pc(U.options,U.replaceVariables).then(Ut=>{ie(Ut)})},[U.options,U.replaceVariables,U.renderCounter]);const Se=async(Ut,Mt)=>{const{uid:_t,title:an,url:un}=Mt;Ut.preventDefault(),Ut.stopPropagation();const jt=await(0,xe.h4)().starDashboard(Mt.uid,Mt.isStarred),bn=new Map(ee);bn.set(Mt?.uid??"",{...Mt,isStarred:jt}),ie(bn),Ee((0,mc.OQ)({id:_t??"",title:an,url:un,isStarred:jt}))},[Ae,Ce,Ve]=(0,b.useMemo)(()=>{const Ut=[...ee.values()];return[Ut.filter(Mt=>Mt.isStarred).sort((Mt,_t)=>Mt.title.localeCompare(_t.title)),Ut.filter(Mt=>Mt.isRecent),Ut.filter(Mt=>Mt.isSearchResult).sort((Mt,_t)=>Mt.title.localeCompare(_t.title))]},[ee]),{showStarred:Je,showRecentlyViewed:qe,showHeadings:it,showSearch:gt}=U.options,Ot=[{header:"Starred dashboards",dashboards:Ae,show:Je},{header:"Recently viewed dashboards",dashboards:Ce,show:qe},{header:"Search",dashboards:Ve,show:gt}],pt=(0,Z.wW)(To),Tt=Ut=>b.createElement("ul",null,Ut.map(Mt=>{let _t=Mt.url,an={};if(U.options.keepTime){const un=(0,gc.$t)().timeRangeForUrl();an.from=un.from,an.to=un.to}return U.options.includeVars&&(an={...an,...(0,So.c)()}),_t=hn.Cj.appendQueryToUrl(_t,hn.Cj.toUrlParams(an)),_t=(0,Zt.iE)().disableSanitizeHtml?_t:wi.QX.sanitizeUrl(_t),b.createElement("li",{className:pt.dashlistItem,key:`dash-${Mt.uid}`},b.createElement("div",{className:pt.dashlistLink},b.createElement("div",{className:pt.dashlistLinkBody},b.createElement("a",{className:pt.dashlistTitle,href:_t},Mt.title),Mt.folderTitle&&b.createElement("div",{className:pt.dashlistFolder},Mt.folderTitle)),b.createElement(Lr.h,{tooltip:Mt.isStarred?`Unmark "${Mt.title}" as favorite`:`Mark "${Mt.title}" as favorite`,name:Mt.isStarred?"favorite":"star",iconType:Mt.isStarred?"mono":"default",onClick:un=>Se(un,Mt)})))}));return b.createElement(K.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Ot.map(({show:Ut,header:Mt,dashboards:_t},an)=>Ut&&b.createElement("div",{className:pt.dashlistSection,key:`dash-group-${an}`},it&&b.createElement("h6",{className:pt.dashlistSectionHeader},Mt),Tt(_t))))}async function hc(U){return U===0?"":(await(0,se.i)().get(`/api/folders/id/${U}`,void 0,void 0,{showErrorAlert:!1})).uid}async function ji(U){const ee={...U.options,showStarred:U.options.showStarred??U.starred,showRecentlyViewed:U.options.showRecentlyViewed??U.recent,showSearch:U.options.showSearch??U.search,showHeadings:U.options.showHeadings??U.headings,maxItems:U.options.maxItems??U.limit,query:U.options.query??U.query,folderId:U.options.folderId??U.folderId,tags:U.options.tags??U.tags};if(parseFloat(U.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(Se=>delete U[Se]),ee.folderId!==void 0){const Ee=ee.folderId;try{const Se=await hc(Ee);ee.folderUID=Se,delete ee.folderId}catch(Se){console.warn("Dashlist: Error migrating folder ID to UID",Se)}}return ee}const xr={includeVars:!1,keepTime:!1,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},Fu=new W.c(Qr).setPanelOptions(U=>{U.addBooleanSwitch({path:"keepTime",name:"Include current time range",defaultValue:xr.keepTime}).addBooleanSwitch({path:"includeVars",name:"Include current template variable values",defaultValue:xr.includeVars}).addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:xr.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:xr.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:xr.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:xr.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:xr.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:xr.query}).addCustomEditor({path:"folderUID",name:"Folder",id:"folderUID",defaultValue:void 0,editor:function({value:ie,onChange:Ee}){return b.createElement(Na.E,{value:ie,onChange:Se=>Ee(Se)})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:xr.tags,editor(ee){return b.createElement(at.B,{tags:ee.value,onChange:ee.onChange})}})}).setMigrationHandler(ji);var Ys=e(25161),Ya=e(72639),_p=e(40201);const Ku=({onBlur:U,placeholder:ee})=>{const ie=(0,b.useRef)(null);(0,b.useEffect)(()=>{ie.current&&ie.current.focus()});const Ee=Se=>{Se.key==="Enter"&&Se.currentTarget.blur()};return b.createElement("input",{type:"text",placeholder:ee,onBlur:U,ref:ie,onKeyDown:Ee,"data-testid":"column-input"})},Vu=({divStyle:U,onColumnInputBlur:ee})=>{const[ie,Ee]=(0,b.useState)(!1),Se=()=>{Ee(!0)},Ae=Ce=>{const Ve=Ce.target.value;Ve&&ee(Ve),Ee(!1)};return b.createElement("div",{className:U},ie?b.createElement(Ku,{placeholder:"Column Name",onBlur:Ae}):b.createElement("button",{onClick:Se},"+"))};var qo=e(12727);const ys=()=>w.config.featureToggles.enableDatagridEditing,$u="600 13px Inter",_u="400 13px Inter",vc=document.createElement("canvas"),zu=20,Hu=300,ku=65,Gu="both",ei="number",Ec={isContextMenuOpen:!1},ju={isInputOpen:!1},ms="datagrid_panel",ns={EDIT_CELL:"edit_cell",GRID_SELECTED:"grid_selected",APPEND_ROW:"append_row",APPEND_COLUMN:"append_column",DELETE_BTN_PRESSED:"delete_btn_pressed",COLUMN_RESIZE:"column_resize",COLUMN_REORDER:"column_reorder",ROW_REORDER:"row_reorder",CONTEXT_MENU_ACTION:"context_menu_action",HEADER_MENU_ACTION:"header_menu_action"},Qu={name:"A",fields:[],length:0},Yu={kind:Ys.p6.Text,data:"",allowOverlay:!0,readonly:!1,displayData:""},yc={columns:Ys.EV.empty(),rows:Ys.EV.empty()},xs={sticky:!1,tint:!0},Zu={fill:!0,sticky:!1};async function mr(U,ee){if(ee&&ys()){for(let ie=0;ie<U.fields.length;ie++)delete U.fields[ie].config.displayName,delete U.fields[ie].config.displayNameFromDS;return await ee([U])}return!1}const Dc=(U,ee=!1)=>{const ie=vc.getContext("2d");return ie.font=ee?$u:_u,ie.measureText(U).width},zp=U=>Math.max(Dc(U.name,!0)+ku,Math.min(Hu,U.values.toArray().reduce((ee,ie)=>{const Ee=Dc(ie?.toString()??"");return Ee>ee?Ee:ee},0)+zu)),ti=(U,ee,ie=!1)=>{const Ee={...U,fields:U.fields.map(Se=>({...Se,values:Se.values.slice()}))};for(const Se of Ee.fields){const Ae=Se.values.toArray();for(let Ce=ee.length-1;Ce>=0;Ce--)ie?Ae.splice(ee[Ce],1):Ae.splice(ee[Ce],1,null);Se.values=[...Ae]}return{...Ee,length:Ee.fields[0]?.values.length??0}},Ju=(U,ee)=>{const ie=ee.x,Ee=ee.y,Se=ee.x+ee.width-1,Ae={...U,fields:U.fields.map(Ce=>({...Ce,values:Ce.values.slice()}))};for(let Ce=ie;Ce<=Se;Ce++){const Ve=Ae.fields[Ce],Je=Ve.values.toArray();Je.splice(Ee,ee.height,...new Array(ee.height).fill(null)),Ve.values=[...Je]}return{...Ae,length:Ae.fields[0]?.values.length??0}},Xu=U=>{const ee=U.values.toArray();U.values=ee.map(ie=>ie==="undefined"||ie==="null"?null:ie)};function qu(U){return{accentColor:U.colors.primary.main,accentFg:U.colors.secondary.main,textDark:U.colors.text.primary,textMedium:U.colors.text.secondary,textLight:U.colors.text.secondary,textBubble:U.colors.text.primary,textHeader:U.colors.text.primary,bgCell:U.colors.background.primary,bgCellMedium:U.colors.background.primary,bgHeader:U.colors.background.primary,bgHeaderHasFocus:U.colors.background.secondary,bgHeaderHovered:U.colors.background.secondary,linkColor:U.colors.text.link,fontFamily:U.typography.fontFamily,headerFontStyle:`${U.typography.fontWeightMedium} ${U.typography.fontSize}px`,fgIconHeader:U.colors.secondary.contrastText,bgIconHeader:U.colors.secondary.main}}const Pc=(U,ee,ie=!1)=>{const Ee=U.values.get(ee);switch(U.type){case zn.fS.boolean:return{kind:Ys.p6.Boolean,data:Ee||!1,allowOverlay:!1,readonly:!1};case zn.fS.number:return{kind:Ys.p6.Number,data:Ee||0,allowOverlay:ys()&&!ie,readonly:!1,displayData:Ee!=null?Ee.toString():""};case zn.fS.string:return{kind:Ys.p6.Text,data:Ee||"",allowOverlay:ys()&&!ie,readonly:!1,displayData:Ee!=null?Ee.toString():""};default:return{kind:Ys.p6.Text,data:Ee||"",allowOverlay:ys()&&!ie,readonly:!1,displayData:Ee!=null?Ee.toString():""}}},em=(U,ee)=>({dataEditor:(0,_.css)`
      .dvn-scroll-inner > div:nth-child(2) {
        pointer-events: none !important;
      }
      scrollbar-color: ${U.colors.background.secondary} ${U.colors.background.primary};
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: ${U.colors.background.primary};
      }
      ::-webkit-scrollbar-thumb {
        border-radius: 10px;
      }
      ::-webkit-scrollbar-corner {
        display: none;
      }
    `,addColumnDiv:(0,_.css)`
      width: 120px;
      display: flex;
      flex-direction: column;
      background-color: ${U.colors.background.primary};
      button {
        pointer-events: ${ee?"none":"auto"};
        border: none;
        outline: none;
        height: 37px;
        font-size: 20px;
        background-color: ${U.colors.background.primary};
        color: ${U.colors.text.primary};
        border-right: 1px solid ${U.components.panel.borderColor};
        border-bottom: 1px solid ${U.components.panel.borderColor};
        transition: background-color 200ms;
        cursor: pointer;
        :hover {
          background-color: ${U.colors.background.secondary};
        }
      }
      input {
        height: 37px;
        border: 1px solid ${U.colors.primary.main};
        :focus {
          outline: none;
        }
      }
    `,renameColumnInput:(0,_.css)`
      height: 37px;
      border: 1px solid ${U.colors.primary.main};
      :focus {
        outline: none;
      }
    `}),Cc=U=>U.rows.length||U.columns.length?!0:U.current===void 0?!1:U.current.range&&!(U.current.range.height===1&&U.current.range.width===1);var Ds=(U=>(U.columnResizeStart="columnResizeStart",U.columnResizeEnd="columnResizeEnd",U.columnMove="columnMove",U.updateColumns="updateColumns",U.showColumnRenameInput="showColumnRenameInput",U.hideColumnRenameInput="hideColumnRenameInput",U.openCellContextMenu="openCellContextMenu",U.openHeaderContextMenu="openHeaderContextMenu",U.openHeaderDropdownMenu="openHeaderDropdownMenu",U.closeContextMenu="closeContextMenu",U.multipleCellsSelected="multipleCellsSelected",U.gridSelectionCleared="gridSelectionCleared",U.columnFreezeReset="columnFreezeReset",U.columnFreezeChanged="columnFreezeChanged",U.openSearch="openSearch",U.closeSearch="closeSearch",U))(Ds||{});const tm={columns:[],contextMenuData:Ec,renameColumnInputData:ju,gridSelection:yc,columnFreezeIndex:0,toggleSearch:!1,isResizeInProgress:!1},nm=new Map([[zn.fS.number,Ys.PE.HeaderNumber],[zn.fS.string,Ys.PE.HeaderTextTemplate],[zn.fS.boolean,Ys.PE.HeaderBoolean],[zn.fS.time,Ys.PE.HeaderDate],[zn.fS.other,Ys.PE.HeaderReference]]),am=(U,ee)=>{let ie=[];switch(ee.type){case"columnResizeStart":ie=[...U.columns];const Ee=ee.payload;return ie[Ee.columnIndex]={...U.columns[Ee.columnIndex],width:Ee.width},{...U,columns:ie,isResizeInProgress:!0};case"columnMove":ie=[...U.columns];const Se=ee.payload,Ae=U.columns[Se.from].width;let Ce=ie.splice(Se.from,1)[0];return Ce={...Ce,width:Ae},ie.splice(Se.to,0,Ce),{...U,columns:ie};case"columnResizeEnd":return{...U,isResizeInProgress:!1};case"updateColumns":const Ve=ee.payload;return ie=[...Ve.frame.fields.map((_t,an)=>{const un=U.columns.find(bn=>bn.title===_t.name)?.width;return{title:(0,Wa.CZ)(_t,Ve.frame),width:un??zp(_t),icon:nm.get(_t.type),hasMenu:ys(),trailingRowOptions:{targetColumn:--an}}})],{...U,columns:ie};case"showColumnRenameInput":return{...U,renameColumnInputData:{...U.renameColumnInputData,isInputOpen:!0}};case"hideColumnRenameInput":return{...U,renameColumnInputData:{...U.renameColumnInputData,isInputOpen:!1}};case"openCellContextMenu":const Je=ee.payload,qe=Je.event,it=Je.cell;return{...U,contextMenuData:{x:qe.bounds.x+qe.localEventX,y:qe.bounds.y+qe.localEventY,column:it[0]===-1?void 0:it[0],row:it[1],isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderContextMenu":const gt=ee.payload,Ot=gt.event;return{...U,contextMenuData:{x:Ot.bounds.x+Ot.localEventX,y:Ot.bounds.y+Ot.localEventY,column:gt.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderDropdownMenu":const pt=ee.payload,Tt=pt.screenPosition;return{...U,contextMenuData:{x:Tt.x+Tt.width,y:Tt.y+Tt.height,column:pt.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!0},renameColumnInputData:{x:Tt.x,y:Tt.y,width:Tt.width,height:Tt.height,columnIdx:pt.columnIndex,isInputOpen:!1,inputValue:pt.value}};case"closeContextMenu":return{...U,contextMenuData:{isContextMenuOpen:!1}};case"closeSearch":return{...U,toggleSearch:!1};case"openSearch":return{...U,toggleSearch:!0};case"multipleCellsSelected":const Ut=ee.payload;return{...U,gridSelection:Ut.selection};case"gridSelectionCleared":return{...U,gridSelection:yc};case"columnFreezeReset":return{...U,columnFreezeIndex:0};case"columnFreezeChanged":const Mt=ee.payload;return{...U,columnFreezeIndex:Mt.columnIndex};default:return U}},sm=({menuData:U,data:ee,saveData:ie,closeContextMenu:Ee,dispatch:Se,gridSelection:Ae,columnFreezeIndex:Ce,renameColumnClicked:Ve})=>{let Je=[],qe=[];const{row:it,column:gt,x:Ot,y:pt,isHeaderMenu:Tt}=U;Ae.rows&&(Je=Ae.rows.toArray()),Ae.columns&&(qe=Ae.columns.toArray());let Ut="Delete row";Je.length&&Je.length>1&&(Ut=`Delete ${Je.length} rows`);let Mt="Delete column";qe.length&&qe.length>1&&(Mt=`Delete ${qe.length} columns`);const _t=it!==void 0&&it>=0||Je.length,an=gt!==void 0&&gt>=0&&it!==void 0||qe.length,un=it!==void 0&&it>=0&&!Je.length,jt=gt!==void 0&&gt>=0&&it!==void 0&&!qe.length,bn=()=>b.createElement(b.Fragment,null,_t?b.createElement(Bs.s,{label:Ut,onClick:()=>{if(Je.length){ie(ti(ee,Je,!0)),Se({type:Ds.gridSelectionCleared});return}it!==void 0&&it>=0&&((0,Ya.ff)(ms,{item:ns.CONTEXT_MENU_ACTION,menu_action:"row_delete"}),ie(ti(ee,[it],!0)))}}):null,an?b.createElement(Bs.s,{label:Mt,onClick:()=>{if(qe.length){ie({...ee,fields:ee.fields.filter((vn,An)=>!qe.includes(An))}),Se({type:Ds.gridSelectionCleared});return}gt!==void 0&&gt>=0&&((0,Ya.ff)(ms,{item:ns.CONTEXT_MENU_ACTION,menu_action:"column_delete"}),ie({...ee,fields:ee.fields.filter((vn,An)=>An!==gt)}))}}):null,an||_t?b.createElement(qo.R,null):null,un?b.createElement(Bs.s,{label:"Clear row",onClick:()=>{(0,Ya.ff)(ms,{item:ns.CONTEXT_MENU_ACTION,menu_action:"row_clear"}),ie(ti(ee,[it]))}}):null,jt?b.createElement(Bs.s,{label:"Clear column",onClick:()=>{const vn=ee.fields[gt];vn.values=vn.values.map(()=>null),(0,Ya.ff)(ms,{item:ns.CONTEXT_MENU_ACTION,menu_action:"column_clear"}),ie({...ee})}}):null,un||jt?b.createElement(qo.R,null):null,b.createElement(Bs.s,{label:"Remove all data",onClick:()=>{(0,Ya.ff)(ms,{item:ns.CONTEXT_MENU_ACTION,menu_action:"remove_all"}),ie(Qu)}}),b.createElement(Bs.s,{label:"Search...",onClick:()=>{(0,Ya.ff)(ms,{item:ns.CONTEXT_MENU_ACTION,menu_action:"open_search"}),Se({type:Ds.openSearch})}})),Xt=()=>{if(gt==null)return null;const vn=ee.fields[gt].type,An=[],Nn=Wn=>{An.push({label:(0,Be.capitalize)(Wn),options:{targetField:ee.fields[gt].name,destinationType:Wn}})};vn===zn.fS.string?(Nn(zn.fS.number),Nn(zn.fS.boolean)):vn===zn.fS.number?(Nn(zn.fS.string),Nn(zn.fS.boolean)):vn===zn.fS.boolean?(Nn(zn.fS.number),Nn(zn.fS.string)):(Nn(zn.fS.string),Nn(zn.fS.number),Nn(zn.fS.boolean));let In="Set column freeze position";const _n=gt+1;return Ce===_n&&(In="Unset column freeze"),b.createElement(b.Fragment,null,An.length?b.createElement(oc.k,{label:"Set field type"},An.map((Wn,la)=>b.createElement(Bs.s,{key:la,label:Wn.label,onClick:()=>{const Hn=(0,Jo.p8)(ee.fields[gt],Wn.options);Wn.options.destinationType===zn.fS.string&&Xu(Hn);const Sn={name:ee.name,fields:[...ee.fields],length:ee.length};Sn.fields[gt]=Hn,(0,Ya.ff)(ms,{item:ns.HEADER_MENU_ACTION,menu_action:"convert_field"}),ie(Sn)}}))):null,b.createElement(qo.R,null),b.createElement(Bs.s,{label:In,onClick:()=>{(0,Ya.ff)(ms,{item:ns.HEADER_MENU_ACTION,menu_action:"column_freeze"}),Se(Ce===_n?{type:Ds.columnFreezeReset}:{type:Ds.columnFreezeChanged,payload:{columnIndex:_n}})}}),b.createElement(Bs.s,{label:"Rename column",onClick:Ve}),b.createElement(qo.R,null),b.createElement(Bs.s,{label:"Delete column",onClick:()=>{(0,Ya.ff)(ms,{item:ns.HEADER_MENU_ACTION,menu_action:"delete_column"}),ie({...ee,fields:ee.fields.filter((Wn,la)=>la!==gt)}),Se({type:Ds.gridSelectionCleared})}}),b.createElement(Bs.s,{label:"Clear column",onClick:()=>{const Wn=ee.fields[gt];Wn.values=Wn.values.map(()=>null),(0,Ya.ff)(ms,{item:ns.HEADER_MENU_ACTION,menu_action:"clear_column"}),ie({...ee})}}))};return b.createElement(ic.x,{renderMenuItems:Tt?Xt:bn,x:Ot,y:pt,onClose:Ee})},rm=({renameColumnData:U,onColumnInputBlur:ee,classStyle:ie})=>{const{x:Ee,y:Se,width:Ae,height:Ce,inputValue:Ve,columnIdx:Je}=U,[qe,it]=(0,b.useState)({}),[gt,Ot]=(0,b.useState)(Ve),pt=(0,b.useRef)(null);(0,b.useLayoutEffect)(()=>{pt.current?.focus();const _t=pt.current?.getBoundingClientRect();if(_t){const an={right:window.innerWidth<Ee+_t.width,bottom:window.innerHeight<Se+_t.height};it({position:"fixed",left:an.right?Ee-_t.width:Ee,top:an.bottom?Se-_t.height:Se,width:Ae,height:Ce})}},[Ce,Ae,Ee,Se]);const Tt=_t=>{const an=_t.target.value;an&&ee(an,Je)},Ut=_t=>{Ot(_t.target.value)},Mt=_t=>{_t.key==="Enter"&&_t.currentTarget.blur()};return b.createElement(Ws.h_,null,b.createElement("input",{type:"text",className:ie,value:gt,onBlur:Tt,ref:pt,style:qe,onChange:Ut,onKeyDown:Mt}))};function om({options:U,data:ee,id:ie,fieldConfig:Ee,width:Se,height:Ae}){const[Ce,Ve]=(0,b.useReducer)(am,tm),{onUpdateData:Je}=(0,Qa.R9)(),{columns:qe,contextMenuData:it,renameColumnInputData:gt,gridSelection:Ot,columnFreezeIndex:pt,toggleSearch:Tt,isResizeInProgress:Ut}=Ce,Mt=ee.series[U.selectedSeries??0],_t=(0,Z.l4)(),an=qu(_t);(0,b.useEffect)(()=>{Mt&&Ve({type:Ds.updateColumns,payload:{frame:Mt}})},[Mt]);const un=([qn,Bn])=>{const Zn=Mt.fields[qn];return!Zn||Bn>Mt.length?Yu:Pc(Zn,Bn,Cc(Ot))},jt=(qn,Bn)=>{if(Cc(Ot))return;const[Zn,ea]=qn,fa={...Mt,fields:Mt.fields.map(Ia=>({...Ia,values:[...Ia.values]}))},Oa=fa.fields[Zn];if(!Oa)return;const Ja=Oa.values.toArray();Ja[ea]=Bn.data,Oa.values=[...Ja],(0,Ya.ff)(ms,{item:ns.EDIT_CELL}),mr(fa,Je)},bn=qn=>{const Bn=Mt.length??0;(0,Ya.ff)(ms,{item:ns.APPEND_COLUMN}),mr({...Mt,fields:[...Mt.fields,{name:qn,type:zn.fS.string,config:{},values:new Array(Bn).fill("")}]},Je)},Xt=()=>{const qn=Mt.fields.map(Bn=>{const Zn=Bn.values.slice();return Zn.push(null),{...Bn,values:Zn}});(0,Ya.ff)(ms,{item:ns.APPEND_ROW}),mr({...Mt,fields:qn,length:Mt.length+1},Je)},vn=(qn,Bn,Zn,ea)=>{(0,Ya.ff)(ms,{item:ns.COLUMN_RESIZE}),Ve({type:Ds.columnResizeStart,payload:{columnIndex:Zn,width:Bn}})},An=(qn,Bn,Zn,ea)=>{Ve({type:Ds.columnResizeEnd})},Nn=()=>{Ve({type:Ds.closeContextMenu})},In=qn=>{if(qn.current&&qn.current.range)return(0,Ya.ff)(ms,{item:ns.DELETE_BTN_PRESSED,selection:"grid-cell"}),mr(Ju(Mt,qn.current.range),Je),!0;const Bn=qn.rows.toArray(),Zn=qn.columns.toArray();if(Bn.length)return(0,Ya.ff)(ms,{item:ns.DELETE_BTN_PRESSED,selection:"rows"}),mr(ti(Mt,Bn),Je),!0;if(Zn.length){const ea={...Mt,fields:Mt.fields.map((fa,Oa)=>Zn.includes(Oa)?{...fa,values:new Array(Mt.length).fill(null)}:fa)};return(0,Ya.ff)(ms,{item:ns.DELETE_BTN_PRESSED,selection:"columns"}),mr(ea,Je),!0}return!1},_n=(qn,Bn)=>{Bn.preventDefault(),Ve({type:Ds.openCellContextMenu,payload:{event:Bn,cell:qn}})},Wn=(qn,Bn)=>{Bn.preventDefault(),Ve({type:Ds.openHeaderContextMenu,payload:{event:Bn,columnIndex:qn}})},la=(qn,Bn)=>{Ve({type:Ds.openHeaderDropdownMenu,payload:{screenPosition:Bn,columnIndex:qn,value:Ce.columns[qn].title}})},Hn=async(qn,Bn)=>{const Zn=Mt.fields.map(Oa=>Oa),ea=Zn[qn];Zn.splice(qn,1),Zn.splice(Bn,0,ea),await mr({...Mt,fields:Zn},Je)&&((0,Ya.ff)(ms,{item:ns.COLUMN_REORDER}),Ve({type:Ds.columnMove,payload:{from:qn,to:Bn}}))},Sn=(qn,Bn)=>{const Zn=Mt.fields.map(ea=>({...ea,values:ea.values.slice()}));for(const ea of Zn){const fa=ea.values[qn];ea.values.splice(qn,1),ea.values.splice(Bn,0,fa)}(0,Ya.ff)(ms,{item:ns.ROW_REORDER}),mr({...Mt,fields:Zn},Je)},na=()=>{(0,Ya.ff)(ms,{item:ns.HEADER_MENU_ACTION,menu_action:"rename_column"}),Ve({type:Ds.showColumnRenameInput})},pa=(qn,Bn)=>{const Zn=Mt.fields.map(ea=>ea);Zn[Bn].name=qn,Ve({type:Ds.hideColumnRenameInput}),mr({...Mt,fields:Zn},Je)},_a=()=>{Ve({type:Ds.closeSearch})},Za=qn=>{(0,Ya.ff)(ms,{item:ns.GRID_SELECTED}),Ve({type:Ds.multipleCellsSelected,payload:{selection:qn}})},Va=qn=>{mr(qn,Je)};if(!Mt)return b.createElement(ws.Z,{panelId:ie,fieldConfig:Ee,data:ee});if(!ys())return b.createElement(ws.Z,{panelId:ie,message:"Datagrid is not enabled",fieldConfig:Ee,data:ee});if(!document.getElementById("portal")){const qn=document.createElement("div");qn.id="portal",document.body.appendChild(qn)}const ka=em(_t,Ut);return b.createElement(b.Fragment,null,b.createElement(Ys.ZP,{className:ka.dataEditor,getCellContent:un,columns:qe,rows:Mt.length,width:Se,height:Ae,initialSize:[Se,Ae],theme:an,smoothScrollX:!0,smoothScrollY:!0,overscrollY:50,onCellEdited:ys()?jt:void 0,getCellsForSelection:ys()?!0:void 0,showSearch:ys()?Tt:!1,onSearchClose:_a,gridSelection:Ot,onGridSelectionChange:ys()?Za:void 0,onRowAppended:ys()?Xt:void 0,onDelete:ys()?In:void 0,rowMarkers:ys()?Gu:ei,onColumnResize:vn,onColumnResizeEnd:An,onCellContextMenu:ys()?_n:void 0,onHeaderContextMenu:ys()?Wn:void 0,onHeaderMenuClick:ys()?la:void 0,trailingRowOptions:xs,rightElement:ys()?b.createElement(Vu,{onColumnInputBlur:bn,divStyle:ka.addColumnDiv}):null,rightElementProps:Zu,freezeColumns:pt,onRowMoved:ys()?Sn:void 0,onColumnMoved:ys()?Hn:void 0}),it.isContextMenuOpen&&b.createElement(sm,{menuData:it,data:Mt,saveData:Va,closeContextMenu:Nn,dispatch:Ve,gridSelection:Ot,columnFreezeIndex:pt,renameColumnClicked:na}),gt.isInputOpen?b.createElement(rm,{onColumnInputBlur:pa,renameColumnData:gt,classStyle:ka.renameColumnInput}):null)}const bc={selectedSeries:0},im=new W.c(om).setPanelOptions((U,ee)=>{const ie=ee.data.map((Ee,Se)=>({value:Se,label:Ee.refId}));return ee.options&&!ie.map(Ee=>Ee.value).includes(ee.options.selectedSeries??0)&&(ee.options.selectedSeries=bc.selectedSeries),U.addSelect({path:"selectedSeries",name:"Select series",defaultValue:bc.selectedSeries,settings:{options:ie}})});class Hp extends b.Component{constructor(){super(...arguments),this.subscription=new En.w0,this.state={}}componentDidMount(){const{eventBus:ee}=this.props;this.subscription.add(ee.subscribe(Tn.es,ie=>{this.setState({event:ie})})),this.subscription.add(ee.subscribe(Tn.xH,ie=>{this.setState({event:ie})})),this.subscription.add(ee.subscribe(Dn.IA,ie=>{this.setState({event:ie})})),this.subscription.add(ee.subscribe(Dn.oi,ie=>{this.setState({event:ie})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:ee}=this.state;if(!ee)return b.createElement("div",null,"no events yet");const{type:ie,payload:Ee,origin:Se}=ee;return b.createElement(K.$,{autoHeightMin:"100%",autoHeightMax:"100%"},b.createElement("h3",null,"Origin: ",Se?.path),b.createElement("span",null,"Type: ",ie),!!Ee&&b.createElement(b.Fragment,null,b.createElement("pre",null,JSON.stringify(Ee.point,null,"  ")),Ee.data&&b.createElement(Yt.H,{data:Ee.data,rowIndex:Ee.rowIndex,columnIndex:Ee.columnIndex})))}}var lm=e(68016);let Pn=100;class Ss extends b.PureComponent{constructor(ee){super(ee),this.history=new lm.d({capacity:40,append:"head"}),this.eventObserver={next:Ee=>{const Se=Ee.origin;this.history.add({key:Pn++,type:Ee.type,path:Se?.path,payload:Ee.payload}),this.setState({counter:Pn})}},this.state={counter:Pn};const ie=[];ie.push(ee.eventBus.getStream(Tn.es).subscribe(this.eventObserver)),ie.push(ee.eventBus.getStream(Tn.xH).subscribe(this.eventObserver)),ie.push(ee.eventBus.getStream(Tn.v9).subscribe(this.eventObserver)),this.subs=ie}componentWillUnmount(){for(const ee of this.subs)ee.unsubscribe()}render(){return b.createElement(K.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((ee,ie)=>b.createElement("div",{key:ee.key},JSON.stringify(ee.path)," ",ee.type," / X:",JSON.stringify(ee.payload.x)," / Y:",JSON.stringify(ee.payload.y))))}}var Ks=e(3181);class Mc extends b.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(ee){const{data:ie,options:Ee}=this.props;if(ee.data!==ie&&(this.counters.dataChanged++,Ee.counters?.schemaChanged)){const Se=ee.data?.series,Ae=ie.series;Ae&&Se&&((0,ar.nl)(Ae,Se,ar.Ch)||this.counters.schemaChanged++)}return!0}render(){const{data:ee,options:ie}=this.props,Ee=ie.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const Se=Date.now(),Ae=Se-this.lastRender;this.lastRender=Se;const Ce=Ks.TB.get(Ks.gz.lastNotNull);return b.createElement("div",null,b.createElement("div",null,b.createElement(Lr.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters,tooltip:"Step back"}),b.createElement("span",null,Ee.render&&b.createElement("span",null,"Render: ",this.counters.render,"\xA0"),Ee.dataChanged&&b.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),Ee.schemaChanged&&b.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),b.createElement("span",null,"TIME: ",Ae,"ms"))),ee.series&&ee.series.map((Ve,Je)=>b.createElement("div",{key:`${Je}/${Ve.refId}`},b.createElement("h4",null,(0,Wa.nf)(Ve,Je)," (",Ve.length,")"),b.createElement("table",{className:"filter-table"},b.createElement("thead",null,b.createElement("tr",null,b.createElement("td",null,"Field"),b.createElement("td",null,"Type"),b.createElement("td",null,"Last"))),b.createElement("tbody",null,Ve.fields.map((qe,it)=>{const gt=Ce.reduce(qe,!1,!1)[Ce.id];return b.createElement("tr",{key:`${it}/${qe.name}`},b.createElement("td",null,(0,Wa.CZ)(qe,Ve,ee.series)),b.createElement("td",null,qe.type),b.createElement("td",null,`${gt}`))}))))))}}var xc=e(38637);function cm(U){const ee=(0,Qa.R9)(),ie=Ee=>{ee.onInstanceStateChange({name:Ee.currentTarget.value})};return b.createElement(b.Fragment,null,b.createElement(Ls.g,{label:"State name"},b.createElement(xc.I,{value:ee.instanceState?.name??"",onChange:ie})))}function ni({value:U,context:ee,onChange:ie,item:Ee}){return b.createElement("div",null,"Current value: ",ee.instanceState?.name," ")}var fs=(U=>(U.Cursor="cursor",U.Events="events",U.Render="render",U.State="State",U.ThrowError="ThrowError",U))(fs||{});class dm extends b.Component{render(){const{options:ee}=this.props;switch(ee.mode){case fs.Events:return b.createElement(Ss,{eventBus:this.props.eventBus});case fs.Cursor:return b.createElement(Hp,{eventBus:this.props.eventBus});case fs.State:return b.createElement(cm,{...this.props});case fs.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return b.createElement(Mc,{...this.props})}}}const um=new W.c(dm).useFieldConfig().setPanelOptions(U=>{U.addSelect({path:"mode",name:"Mode",defaultValue:fs.Render,settings:{options:[{label:"Render",value:fs.Render},{label:"Events",value:fs.Events},{label:"Cursor",value:fs.Cursor},{label:"Cursor",value:fs.Cursor},{label:"Share state",value:fs.State},{label:"Throw error",value:fs.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:ee})=>ee===fs.State,editor:ni}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:ee})=>ee===fs.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:ee})=>ee===fs.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:ee})=>ee===fs.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var Qi=e(20836),ai=e(56626);function lo(U,ee={}){(0,Ya.ff)(`grafana_flamegraph_${U}`,{app:A.zj.Unknown,grafana_version:w.config.buildInfo.version,...ee})}const mm=U=>{const ee=(0,Qi.d6)(U.data.series[0]);return ee?b.createElement(ws.Z,{panelId:U.id,data:U.data,message:(0,Qi.cN)(ee)}):b.createElement(ai.Z,{data:U.data.series[0],stickyHeader:!1,getTheme:()=>w.config.theme2,onTableSymbolClick:()=>lo("table_item_selected"),onViewSelected:ie=>lo("view_selected",{view:ie}),onTextAlignSelected:ie=>lo("text_align_selected",{align:ie}),onTableSort:ie=>lo("table_sort_selected",{sort:ie})})};class Yi{getListWithDefaults(ee){return ee.getListAppender({name:Da.y.FlameGraph,pluginId:"flamegraph"})}getSuggestionsForData(ee){if(!ee.data)return;const ie=ee.data.series[0];!ie||(0,Qi.d6)(ie)||this.getListWithDefaults(ee).append({name:Da.y.FlameGraph})}}const fm=new W.c(mm).setSuggestionsSupplier(new Yi);var gm=e(45587),wr=e(28409),Sr=e(21308);const Sc=(U,ee)=>{const ie="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",Ee=ee?ie:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",Se=ee?ie:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",Ae=U.isDark?Ee:Se;return`
      background-color: ${U.colors.background.secondary};
      margin-right: ${U.spacing(4)};
      border: 1px solid ${U.colors.border.weak};
      border-bottom-left-radius: ${U.shape.borderRadius(2)};
      border-bottom-right-radius: ${U.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${U.breakpoints.down("xxl")} {
        margin-right: ${U.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${Ae};
      }
`},Wr=(U,ee)=>(0,_.css)`
  color: ${ee?U.v1.palette.blue95:U.colors.text.secondary};

  ${U.breakpoints.down("sm")} {
    display: none;
  }
`,pm=(0,_.css)`
  padding: 16px;
`,hm=({card:U})=>{const ee=(0,Z.wW)(si,U.done),ie=(0,Z.wW)(Wr,U.done);return b.createElement("div",{className:ee.card},b.createElement("div",{className:pm},b.createElement("a",{href:`${U.href}?utm_source=grafana_gettingstarted`,className:ee.url},b.createElement("div",{className:ee.heading},U.done?"complete":U.heading),b.createElement("h4",{className:ee.title},U.title),b.createElement("div",null,b.createElement(pe.J,{className:ie,name:U.icon,size:"xxl"})))),b.createElement("a",{href:`${U.learnHref}?utm_source=grafana_gettingstarted`,className:ee.learnUrl,target:"_blank",rel:"noreferrer"},"Learn how in the docs ",b.createElement(pe.J,{name:"external-link-alt"})))},si=(U,ee)=>({card:(0,_.css)`
      ${Sc(U,ee)}

      min-width: 230px;

      ${U.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:(0,_.css)`
      text-transform: uppercase;
      color: ${ee?U.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${U.spacing(2)};
    `,title:(0,_.css)`
      margin-bottom: ${U.spacing(2)};
    `,url:(0,_.css)`
      display: inline-block;
    `,learnUrl:(0,_.css)`
      border-top: 1px solid ${U.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var ri=e(23062);const Zi=({card:U})=>{const ee=(0,Z.wW)(Ji,U.done),ie=(0,Z.wW)(Wr,U.done);return b.createElement("a",{className:ee.card,target:"_blank",rel:"noreferrer",href:`${U.href}?utm_source=grafana_gettingstarted`,onClick:Ee=>vm(Ee,U)},b.createElement("div",{className:pm},b.createElement("div",{className:ee.type},U.type),b.createElement("div",{className:ee.heading},U.done?"complete":U.heading),b.createElement("h4",{className:ee.cardTitle},U.title),b.createElement("div",{className:ee.info},U.info),b.createElement(pe.J,{className:ie,name:U.icon,size:"xxl"})))},vm=(U,ee)=>{U.preventDefault(),ri.Z.get(ee.key)||ri.Z.set(ee.key,!0)},Ji=(U,ee)=>({card:(0,_.css)`
      ${Sc(U,ee)}
      width: 460px;
      min-width: 460px;

      ${U.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${U.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:(0,_.css)`
      color: ${U.colors.primary.text};
      text-transform: uppercase;
    `,heading:(0,_.css)`
      text-transform: uppercase;
      color: ${U.colors.primary.text};
      margin-bottom: ${U.spacing(1)};
    `,cardTitle:(0,_.css)`
      margin-bottom: ${U.spacing(2)};
    `,info:(0,_.css)`
      margin-bottom: ${U.spacing(2)};
    `,status:(0,_.css)`
      display: flex;
      justify-content: flex-end;
    `}),Tc=({step:U})=>{const ee=(0,Z.wW)(Em);return b.createElement("div",{className:ee.setup},b.createElement("div",{className:ee.info},b.createElement("h2",{className:ee.title},U.title),b.createElement("p",null,U.info)),b.createElement("div",{className:ee.cards},U.cards.map((ie,Ee)=>{const Se=`${ie.title}-${Ee}`;return ie.type==="tutorial"?b.createElement(Zi,{key:Se,card:ie}):b.createElement(hm,{key:Se,card:ie})})))},Em=U=>({setup:(0,_.css)`
      display: flex;
      width: 95%;
    `,info:(0,_.css)`
      width: 172px;
      margin-right: 5%;

      ${U.breakpoints.down("xxl")} {
        margin-right: ${U.spacing(4)};
      }
      ${U.breakpoints.down("sm")} {
        display: none;
      }
    `,title:(0,_.css)`
      color: ${U.v1.palette.blue95};
    `,cards:(0,_.css)`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${U.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var Oo=e(52436);const Oc="Grafana fundamentals",ym="Create users and teams",Xi="getting.started.",Ka=`${Xi}${Oc.replace(" ","-").trim().toLowerCase()}`,Ic=`${Xi}${ym.replace(" ","-").trim().toLowerCase()}`,Rc=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:Oc,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(ri.Z.get(Ka)),key:Ka,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(U=>{U((0,Oo.ak)().getMetricSources().filter(ee=>ee.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Nr.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:Ic,check:()=>Promise.resolve(ri.Z.get(Ic)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const U=await(0,Nr.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(U.length>0)},done:!1}]}];class Dm extends b.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:Rc()},this.onForwardClick=()=>{this.setState(ee=>({currentStep:ee.currentStep+1}))},this.onPreviousClick=()=>{this.setState(ee=>({currentStep:ee.currentStep-1}))},this.dismiss=()=>{const{id:ee}=this.props,ie=(0,xe.h4)().getCurrent(),Ee=ie?.getPanelById(ee);ie?.removePanel(Ee),Nr.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(Se=>{Sr.Vt.user.helpFlags1=Se.helpFlags1})}}async componentDidMount(){const{steps:ee}=this.state,ie=ee.map(async Se=>{const Ae=Se.cards.map(async Ve=>Ve.check().then(Je=>({...Ve,done:Je}))),Ce=await Promise.all(Ae);return{...Se,done:Ce.every(Ve=>Ve.done),cards:Ce}}),Ee=await Promise.all(ie);this.setState({currentStep:Ee[0].done?1:0,steps:Ee,checksDone:!0})}render(){const{checksDone:ee,currentStep:ie,steps:Ee}=this.state,Se=Pm(),Ae=Ee[ie];return b.createElement("div",{className:Se.container},ee?b.createElement(b.Fragment,null,b.createElement(ae.zx,{variant:"secondary",fill:"text",className:Se.dismiss,onClick:this.dismiss},"Remove this panel"),ie===Ee.length-1&&b.createElement(ae.zx,{className:(0,_.cx)(Se.backForwardButtons,Se.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),b.createElement("div",{className:Se.content},b.createElement(Tc,{step:Ae})),ie<Ee.length-1&&b.createElement(ae.zx,{className:(0,_.cx)(Se.backForwardButtons,Se.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})):b.createElement("div",{className:Se.loading},b.createElement("div",{className:Se.loadingText},"Checking completed setup steps"),b.createElement(wr.$,{size:24,inline:!0})))}}const Pm=(0,Jn.B)(()=>{const U=w.config.theme2;return{container:(0,_.css)`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${U.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${U.spacing(4)} ${U.spacing(2)} 0;
    `,content:(0,_.css)`
      label: content;
      display: flex;
      justify-content: center;

      ${U.breakpoints.down("xxl")} {
        margin-left: ${U.spacing(3)};
        justify-content: flex-start;
      }
    `,header:(0,_.css)`
      label: header;
      margin-bottom: ${U.spacing(3)};
      display: flex;
      flex-direction: column;

      ${U.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:(0,_.css)`
      height: 58px;
      padding-right: ${U.spacing(2)};
      display: none;

      ${U.breakpoints.up("md")} {
        display: block;
      }
    `,heading:(0,_.css)`
      label: heading;
      margin-right: ${U.spacing(3)};
      margin-bottom: ${U.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${U.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:(0,_.css)`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:(0,_.css)`
      left: 10px;

      ${U.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:(0,_.css)`
      right: 10px;

      ${U.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:(0,_.css)`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${U.spacing(1)};
    `,loading:(0,_.css)`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:(0,_.css)`
      margin-right: ${U.spacing(1)};
    `}}),Cm=new W.c(Dm).setNoPadding();var zs=e(80742),Ac=e(79469);const qi={bucketOffset:0},Lc={fillOpacity:80,gradientMode:Bt.FI.None,lineWidth:1};function el(U,ee){return Math.floor(U/ee)*ee}function Tr(U,ee){return Math.ceil(U/ee)*ee}function Bc(U){return U.fields[1].values[0]-U.fields[0].values[0]}const Uc=(U,ee)=>{let{min:ie,max:Ee}=U.fields[2].config,Se=new Ea.U,Ae=Bc(U),Ce=(pt,Tt,Ut,Mt,_t,an)=>{let un=pt.axes[Tt]._space,jt=pt.valToPos(pt.data[0][0]+Ae,"x")-pt.valToPos(pt.data[0][0],"x"),bn=el(ie??pt.data[0][0],Ae),Xt=Tr(Ee??pt.data[0][pt.data[0].length-1]+Ae,Ae),vn=[],An=Math.ceil(un/jt);for(let Nn=0,In=bn;In<=Xt;Nn++,In+=Ae)!(Nn%An)&&vn.push(In);return vn};Se.addScale({scaleKey:"x",isTime:!1,distribution:Bt.wf.Linear,orientation:Bt.wN.Horizontal,direction:Bt.bQ.Right,range:(pt,Tt,Ut)=>{ie!=null&&(Tt=ie),Ee!=null&&(Ut=Ee);let Mt=pt.data[0][0],_t=pt.data[0][pt.data[0].length-1];return Ut===_t?Ut+=Ae:Ut=Tr(Ut,Ae),Tt>Mt&&(Tt=el(Tt,Ae)),[Tt,Ut]}}),Se.addScale({scaleKey:"y",isTime:!1,distribution:Bt.wf.Linear,orientation:Bt.wN.Vertical,direction:Bt.bQ.Up});const Ve=U.fields[0].display,Je=pt=>(0,fn.zc)(Ve(pt));Se.addAxis({scaleKey:"x",isTime:!1,placement:Bt.LB.Bottom,incrs:zs.Zi,splits:Ce,values:(pt,Tt)=>{const Ut=Tt.map(Je),Mt=Ut.reduce((jt,bn)=>Math.max((0,sr.X1)(bn,Pr.gD).width,jt),0),_t=10,an=pt.bbox.width/((Mt+_t)*devicePixelRatio),un=Math.ceil(Ut.length/an);return Ut.map((jt,bn)=>bn%un===0?jt:null)},theme:ee});let it=U.fields[2].display;Se.addAxis({scaleKey:"y",isTime:!1,placement:Bt.LB.Left,formatValue:(pt,Tt)=>(0,fn.zc)(it(pt,Tt)),theme:ee}),Se.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let gt=rn.Z.paths.bars({align:1,size:[1,1/0]}),Ot=0;for(let pt=2;pt<U.fields.length;pt++){const Tt=U.fields[pt];Tt.state=Tt.state??{},Tt.state.seriesIndex=Ot++;const Ut={...Lc,...Tt.config.custom},Mt="y",_t=(0,xn.fD)(Tt),un=(0,xn.YO)(Tt,ee).color;Se.addSeries({scaleKey:Mt,lineWidth:Ut.lineWidth,lineColor:un,fillOpacity:Ut.fillOpacity,theme:ee,colorMode:_t,pathBuilder:gt,show:!Ut.hideFrom?.viz,gradientMode:Ut.gradientMode,thresholds:Tt.config.thresholds,hardMin:Tt.config.min,hardMax:Tt.config.max,softMin:Ut.axisSoftMin,softMax:Ut.axisSoftMax,dataFrameFieldIndex:Tt.state.origin})}return Se},Yr=U=>{let ee=[];for(const ie of U.fields)ie.name!==zs.cO&&ee.push(ie.values);for(let ie=1;ie<ee.length;ie++){let Ee=ee[ie];for(let Se=0;Se<Ee.length;Se++)Ee[Se]===0&&(Ee[Se]=null)}return ee};class bm extends b.Component{constructor(ee){super(ee),this.state=this.prepState(ee)}prepState(ee,ie=!0){let Ee=null;const{alignedFrame:Se}=ee;return Se&&(Ee={alignedData:Yr(Se)},ie&&(Ee.config=Uc(Se,this.props.theme))),Ee}renderLegend(ee){const{legend:ie}=this.props;return!ee||ie.showLegend===!1?null:b.createElement(eo.l,{data:this.props.rawSeries,config:ee,maxHeight:"35%",maxWidth:"60%",...ie})}componentDidUpdate(ee){const{structureRev:ie,alignedFrame:Ee,bucketSize:Se}=this.props;if(Ee!==ee.alignedFrame){let Ae=this.prepState(this.props,!1);Ae&&(Se!==ee.bucketSize||this.props.options!==ee.options||this.state.config===void 0||ie!==ee.structureRev||!ie)&&(Ae.config=Uc(Ee,this.props.theme)),Ae&&this.setState(Ae)}}render(){const{width:ee,height:ie,children:Ee,alignedFrame:Se}=this.props,{config:Ae}=this.state;return Ae?b.createElement(Xs.AY,{width:ee,height:ie,legend:this.renderLegend(Ae)},(Ce,Ve)=>b.createElement(Ac.N,{config:this.state.config,data:this.state.alignedData,width:Ce,height:Ve},Ee?Ee(Ae,Se):null)):null}}const Mm=({data:U,options:ee,width:ie,height:Ee})=>{const Se=(0,Z.l4)(),Ae=(0,b.useMemo)(()=>{if(!U.series.length)return;if(U.series.forEach((Je,qe)=>{Je.fields.forEach((it,gt)=>{it.state={...it.state,origin:{frameIndex:qe,fieldIndex:gt}}})}),U.series.length===1){const Je=(0,zs.qr)(U.series[0]);if(Je)return(0,zs.zM)(Je)}const Ve=(0,zs.gY)(U.series,ee);if(Ve)return(0,zs.zM)(Ve,Se)},[U.series,ee,Se]);if(!Ae||!Ae.fields.length)return b.createElement("div",{className:"panel-empty"},b.createElement("p",null,"No histogram found in response"));const Ce=Bc(Ae);return b.createElement(bm,{options:ee,theme:Se,legend:ee.legend,rawSeries:U.series,structureRev:U.structureRev,width:ie,height:Ee,alignedFrame:Ae,bucketSize:Ce},(Ve,Je)=>null)};function oi(U){if(U?.length!==1)return!1;const ee=U[0];if(ee.fields.length<3||!(0,zs.Ok)(ee.fields[0].name)||!(0,zs.kl)(ee.fields[1].name))return!1;for(const ie of ee.fields)if(ie.type!==zn.fS.number)return!1;return!0}const xm=new W.c(Mm).setPanelOptions(U=>{U.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(ee,ie)=>oi(ie)}).addNumberInput({path:"bucketSize",name:zs.py.bucketSize.name,description:zs.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:qi.bucketSize,showIf:(ee,ie)=>!oi(ie)}).addNumberInput({path:"bucketOffset",name:zs.py.bucketOffset.name,description:zs.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:qi.bucketOffset,showIf:(ee,ie)=>!oi(ie)}).addBooleanSwitch({path:"combine",name:zs.py.combine.name,description:zs.py.combine.description,defaultValue:qi.combine,showIf:(ee,ie)=>!oi(ie)}),Pa.J(U)}).useFieldConfig({standardOptions:{[Ba.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Aa.S.PaletteClassic}}},useCustomConfig:U=>{const ee=Lc;U.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:ee.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:ee.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:Qs.q.fillGradient[0].value,settings:{options:Qs.q.fillGradient}}),ma.B(U)}});var Hs=e(48614),Io=e(36495);const ii=[{label:"Grafana",value:Hs.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:Hs.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:Hs.z.Plugin,description:"Plugins with live support"}];class Ro extends b.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=ee=>{ee.value&&this.props.onChange({scope:ee.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=ee=>{this.props.onChange({scope:this.props.value?.scope,namespace:ee.value,path:void 0})},this.onPathChanged=ee=>{const{value:ie,onChange:Ee}=this.props;Ee({scope:ie.scope,namespace:ie.namespace,path:ee.value})}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(ee){this.props.value!==ee.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:ee,paths:ie}=this.state,{scope:Ee,namespace:Se,path:Ae}=this.props.value,Ce=Sm(Zt.config.theme2);return b.createElement(b.Fragment,null,b.createElement(ft.b,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),b.createElement("div",null,b.createElement("div",{className:Ce.dropWrap},b.createElement(Io._,null,"Scope"),b.createElement(ye.Ph,{options:ii,value:ii.find(Ve=>Ve.value===Ee),onChange:this.onScopeChanged})),Ee&&b.createElement("div",{className:Ce.dropWrap},b.createElement(Io._,null,"Namespace"),b.createElement(ye.Ph,{options:ee,value:ee.find(Ve=>Ve.value===Se)??(Se?{label:Se,value:Se}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),Ee&&Se&&b.createElement("div",{className:Ce.dropWrap},b.createElement(Io._,null,"Path"),b.createElement(ye.Ph,{options:ie,value:Nc(ie,Ae),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function Nc(U,ee){const ie=U.find(Ee=>Ee.value===ee);if(ie)return ie;if(ee)return{label:ee,value:ee}}const Sm=(0,Jn.B)(U=>({dropWrap:(0,_.css)`
    margin-bottom: ${U.spacing(1)};
  `}));var Ao=e(26058),wc=e(10694),li=e(16843),Tm=e(19649),tl=e(84541),Fr=e(86981),Om=e(23968),Lo=e(80977);const Bo="table_panel_usage",Uo={COLUMN_RESIZE:"column_resize",SORT_BY:"sort_by",TABLE_SELECTION_CHANGE:"table_selection_change",ERROR_VIEW:"error_view",CELL_TYPE_CHANGE:"cell_type_change"};function Wc(U){const{data:ee,height:ie,width:Ee,options:Se,fieldConfig:Ae,id:Ce,timeRange:Ve}=U,Je=(0,Z.l4)(),qe=(0,Qa.R9)(),it=(0,Lo.yR)(ee.series)?(0,Lo.Bc)(ee.series):ee.series,gt=it?.length,Ot=it[0]?.fields.length,pt=nl(it,Se),Tt=it[pt];let Ut=ie;if(!gt||!Ot)return(0,Ya.ff)(Bo,{item:Uo.ERROR_VIEW}),b.createElement(ws.Z,{panelId:Ce,fieldConfig:Ae,data:ee});if(gt>1){const an=Je.spacing.gridSize*Je.components.height.md,un=Je.spacing.gridSize;Ut=ie-an-un}const Mt=b.createElement(Om.i,{height:Ut,width:Ee,data:Tt,noHeader:!Se.showHeader,showTypeIcons:Se.showTypeIcons,resizable:!0,initialSortBy:Se.sortBy,onSortByChange:an=>Rm(an,U),onColumnResize:(an,un)=>Im(an,un,U),onCellFilterAdded:qe.onAddAdHocFilter,footerOptions:Se.footer,enablePagination:Se.footer?.enablePagination,cellHeight:Se.cellHeight,timeRange:Ve});if(gt===1)return Mt;const _t=it.map((an,un)=>({label:(0,Wa.nf)(an),value:un}));return b.createElement("div",{className:Kc.wrapper},Mt,b.createElement("div",{className:Kc.selectWrapper},b.createElement(ye.Ph,{options:_t,value:_t[pt],onChange:an=>Fc(an,U)})))}function nl(U,ee){return ee.frameIndex>0&&ee.frameIndex<U.length?ee.frameIndex:0}function Im(U,ee,ie){const{fieldConfig:Ee}=ie,{overrides:Se}=Ee,Ae=Fr.mi.byName,Ce="custom.width",Ve=Se.find(Je=>Je.matcher.id===Ae&&Je.matcher.options===U);if(Ve){const Je=Ve.properties.find(qe=>qe.id===Ce);Je?Je.value=ee:Ve.properties.push({id:Ce,value:ee})}else Se.push({matcher:{id:Ae,options:U},properties:[{id:Ce,value:ee}]});(0,Ya.ff)(Bo,{item:Uo.COLUMN_RESIZE}),ie.onFieldConfigChange({...Ee,overrides:Se})}function Rm(U,ee){(0,Ya.ff)(Bo,{item:Uo.SORT_BY}),ee.onOptionsChange({...ee.options,sortBy:U})}function Fc(U,ee){(0,Ya.ff)(Bo,{item:Uo.TABLE_SELECTION_CHANGE}),ee.onOptionsChange({...ee.options,frameIndex:U.value||0})}const Kc={wrapper:(0,_.css)`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,selectWrapper:(0,_.css)`
    padding: 8px 8px 0px 8px;
  `};var fr=(U=>(U.Raw="raw",U.JSON="json",U.Auto="auto",U.None="none",U))(fr||{});class Am extends b.PureComponent{constructor(ee){super(ee),this.styles=Lm(w.config.theme2),this.streamObserver={next:ie=>{(0,Hs.se)(ie)?this.setState({status:ie,changed:Date.now()}):(0,Hs.RL)(ie)?this.setState({message:ie.message,changed:Date.now()}):console.log("ignore",ie)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=ie=>{const{options:Ee,onOptionsChange:Se}=this.props;try{const Ae=JSON.parse(ie);Se({...Ee,json:Ae})}catch(Ae){console.log("Error reading JSON",Ae)}},this.onPublishClicked=async()=>{const{addr:ie}=this.state;if(!ie){console.log("invalid address");return}const Ee=this.props.options?.json;if(!Ee){console.log("nothing to publish");return}const Se=await(0,li.gj)().publish(ie,Ee);console.log("onPublishClicked (response from publish)",Se)},this.isValid=!!(0,li.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(ee){this.props.options?.channel!==ee.options?.channel&&this.loadChannel()}async loadChannel(){const ee=this.props.options?.channel;if(!(0,Hs.nU)(ee)){console.log("INVALID",ee),this.unsubscribe(),this.setState({addr:void 0});return}if((0,Be.isEqual)(ee,this.state.addr)){console.log("Same channel",this.state.addr);return}const ie=(0,li.gj)();if(!ie){console.log("INVALID",ee),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",ee);try{this.subscription=ie.getStream(ee).subscribe(this.streamObserver),this.setState({addr:ee,error:void 0})}catch(Ee){this.setState({addr:void 0,error:Ee})}}renderNotEnabled(){const ee=`[feature_toggles]
    enable = live`;return b.createElement(ft.b,{title:"Grafana Live",severity:"info"},b.createElement("p",null,"Grafana live requires a feature flag to run"),b.createElement("b",null,"custom.ini:"),b.createElement("pre",null,ee))}renderMessage(ee){const{options:ie}=this.props,{message:Ee}=this.state;if(!Ee)return b.createElement("div",null,b.createElement("h4",null,"Waiting for data:"),ie.channel?.scope,"/",ie.channel?.namespace,"/",ie.channel?.path);if(ie.message===fr.JSON)return b.createElement(Tm.g,{json:Ee,open:5});if(ie.message===fr.Auto&&Ee instanceof Ao.Av){const Se={series:(0,ko.SM)({data:[Ee],theme:w.config.theme2,replaceVariables:Ce=>Ce,fieldConfig:{defaults:{},overrides:[]}}),state:wc.Gu.Streaming},Ae={...this.props,options:{frameIndex:0,showHeader:!0}};return b.createElement(Wc,{...Ae,data:Se,height:ee})}return b.createElement("pre",null,JSON.stringify(Ee))}renderPublish(ee){const{options:ie}=this.props;return b.createElement(b.Fragment,null,b.createElement(tl.p,{height:ee-32,language:"json",value:ie.json?JSON.stringify(ie.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),b.createElement("div",{style:{height:32}},b.createElement(ae.zx,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:ee}=this.state;if(ee?.state===Hs.yS.Connected)return;let ie="";return ee&&(ie=this.styles.status[ee.state]),b.createElement("div",{className:(0,_.cx)(ie,this.styles.statusWrap)},ee?.state)}renderBody(){const{status:ee}=this.state,{options:ie,height:Ee}=this.props;if(ie.publish){if(ie.message===fr.None)return b.createElement("div",null,this.renderPublish(Ee));const Se=Ee/2;return b.createElement("div",null,b.createElement("div",{style:{height:Se,overflow:"hidden"}},b.createElement(K.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Se))),b.createElement("div",null,this.renderPublish(Se)))}return ie.message===fr.None?b.createElement("pre",null,JSON.stringify(ee)):b.createElement("div",{style:{overflow:"hidden",height:Ee}},b.createElement(K.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Ee)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:ee,error:ie}=this.state;return ee?ie?b.createElement("div",null,b.createElement("h2",null,"ERROR"),b.createElement("div",null,JSON.stringify(ie))):b.createElement(b.Fragment,null,this.renderStatus(),this.renderBody()):b.createElement(ft.b,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const Lm=(0,Jn.B)(U=>({statusWrap:(0,_.css)`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${U.components.panel.background};
    padding: 10px;
    z-index: ${U.zIndex.modal};
  `,status:{[Hs.yS.Pending]:(0,_.css)`
      border: 1px solid ${U.v1.palette.orange};
    `,[Hs.yS.Connected]:(0,_.css)`
      border: 1px solid ${U.colors.success.main};
    `,[Hs.yS.Connecting]:(0,_.css)`
      border: 1px solid ${U.v1.palette.brandWarning};
    `,[Hs.yS.Disconnected]:(0,_.css)`
      border: 1px solid ${U.colors.warning.main};
    `,[Hs.yS.Shutdown]:(0,_.css)`
      border: 1px solid ${U.colors.error.main};
    `,[Hs.yS.Invalid]:(0,_.css)`
      border: 1px solid red;
    `}})),ks=new W.c(Am).setPanelOptions(U=>{U.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:Ro,defaultValue:{}}),U.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:fr.Raw,label:"Raw Text"},{value:fr.JSON,label:"JSON"},{value:fr.Auto,label:"Auto"},{value:fr.None,label:"None"}]},defaultValue:fr.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var gs=e(69323),al=e(42512),Vc=e(56584),$c=e(62577),sl=e(83617),rl=e(41891);const ol=({data:U,timeZone:ee,fieldConfig:ie,options:{showLabels:Ee,showTime:Se,wrapLogMessage:Ae,showCommonLabels:Ce,prettifyLogMessage:Ve,sortOrder:Je,dedupStrategy:qe,enableLogDetails:it},title:gt,id:Ot})=>{const pt=Je===Bt.UV.Ascending,Tt=(0,Z.wW)(ci),[Ut,Mt]=(0,b.useState)(0),_t=(0,b.useRef)(null),{eventBus:an}=(0,Qa.R9)(),un=(0,b.useCallback)(Nn=>{Nn?an.publish(new Tn.es({point:{time:Nn.timeEpochMs}})):an.publish(new Tn.xH)},[an]),[jt,bn,Xt]=(0,b.useMemo)(()=>{const Nn=U?(0,rl.aB)(U.series,U.request?.intervalMs,void 0,U.request?.targets):null,In=Nn?.rows||[],_n=Nn?.meta?.find(la=>la.label===rl.Qp),Wn=(0,rl.UW)(In,qe);return[In,Wn,_n]},[U,qe]);(0,b.useLayoutEffect)(()=>{pt&&_t.current?Mt(_t.current.offsetHeight):Mt(0)},[pt,jt]);const vn=(0,b.useCallback)((Nn,In)=>(0,al.a_)({field:Nn,rowIndex:In,range:U.timeRange}),[U]);if(!U||jt.length===0)return b.createElement(Vc.Z,{fieldConfig:ie,panelId:Ot,data:U,needsStringField:!0});const An=()=>b.createElement("div",{className:(0,_.cx)(Tt.labelContainer,pt&&Tt.labelContainerAscending)},b.createElement("span",{className:Tt.label},"Common labels:"),b.createElement($c.j,{labels:Xt?Xt.value:{labels:"(no common labels)"}}));return b.createElement(K.$,{autoHide:!0,scrollTop:Ut},b.createElement("div",{className:Tt.container,ref:_t},Ce&&!pt&&An(),b.createElement(sl.w,{logRows:jt,deduplicatedRows:bn,dedupStrategy:qe,showLabels:Ee,showTime:Se,wrapLogMessage:Ae,prettifyLogMessage:Ve,timeZone:ee,getFieldLinks:vn,logsSortOrder:Je,enableLogDetails:it,previewLimit:pt?jt.length:void 0,onLogRowHover:un,app:A.zj.Dashboard}),Ce&&pt&&An()))},ci=U=>({container:(0,_.css)({marginBottom:U.spacing(1.5)}),labelContainer:(0,_.css)({margin:U.spacing(0,0,.5,.5),display:"flex",alignItems:"center"}),labelContainerAscending:(0,_.css)({margin:U.spacing(.5,0,.5,0)}),label:(0,_.css)({marginRight:U.spacing(.5),fontSize:U.typography.bodySmall.fontSize,fontWeight:U.typography.fontWeightMedium})});class _c{getSuggestionsForData(ee){const ie=ee.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:Ee}=ee;!Ee.hasData||!Ee.hasTimeField||!Ee.hasStringField||(Ee.preferredVisualisationType==="logs"?ie.append({name:Da.y.Logs,score:qa._.Best}):ie.append({name:Da.y.Logs}))}}const zc=new W.c(ol).setPanelOptions(U=>{U.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:Bt.Y4.none,label:"None",description:gs.Uv[Bt.Y4.none]},{value:Bt.Y4.exact,label:"Exact",description:gs.Uv[Bt.Y4.exact]},{value:Bt.Y4.numbers,label:"Numbers",description:gs.Uv[Bt.Y4.numbers]},{value:Bt.Y4.signature,label:"Signature",description:gs.Uv[Bt.Y4.signature]}]},defaultValue:Bt.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:Bt.UV.Descending,label:"Newest first"},{value:Bt.UV.Ascending,label:"Oldest first"}]},defaultValue:Bt.UV.Descending})}).setSuggestionsSupplier(new _c);var Bm=e(39599),No=e(57718),Hc=e(42335);function kc(U){const{width:ee,options:{feedUrl:ie=No.k,showImage:Ee}}=U,{state:Se,getNews:Ae}=(0,Hc.j)(ie);return(0,b.useEffect)(()=>{const Ce=U.eventBus.subscribe(tt.U5,Ae);return()=>{Ce.unsubscribe()}},[Ae,U.eventBus]),(0,b.useEffect)(()=>{Ae()},[Ae]),Se.error?b.createElement(ft.b,{title:"Error loading RSS feed"},"Make sure that the feed URL is correct and that CORS is configured correctly on the server. See"," ",b.createElement("a",{style:{textDecoration:"underline"},href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/news/"},"News panel documentation. ",b.createElement(pe.J,{name:"external-link-alt"}))):Se.loading?b.createElement("div",null,"Loading..."):Se.value?b.createElement(K.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Se.value.map((Ce,Ve)=>b.createElement(Bm.S,{key:Ve,index:Ve,width:ee,showImage:Ee,data:Se.value}))):null}const Gc={showImage:!0},Um=new W.c(kc).setPanelOptions(U=>{U.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:No.k},defaultValue:Gc.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:Gc.showImage})});var Nm=e(16360),jc=e(9272),il=e(30697);const wm=({width:U,height:ee,data:ie,options:Ee})=>{const Se=(0,al.u8)(ie.timeRange);if(!ie||!ie.series.length)return b.createElement("div",{className:"panel-empty"},b.createElement("p",null,"No data found in response"));const Ae=(0,Nm.Z)(il.Ee);return b.createElement("div",{style:{width:U,height:ee}},b.createElement(jc.E,{dataFrames:Ae(ie.series,Ee),getLinks:Se}))};var Wm=e(69360),ll=e(57669);const Fm=({value:U,onChange:ee,context:ie})=>{const Ee=(0,Z.wW)(Km),Se=()=>{const Ve={field:"",color:""};ee(U?[...U,Ve]:[Ve])},Ae=Ve=>{const Je=U?.slice();Je.splice(Ve,1),ee(Je)},Ce=(Ve,Je,qe)=>{let it=U?.slice()??[];it[Ve][Je]=qe,ee(it)};return b.createElement(b.Fragment,null,U?.map((Ve,Je)=>b.createElement("div",{className:Ee.section,key:Je},b.createElement(ll.b,{context:ie,value:Ve.field??"",onChange:qe=>{Ce(Je,"field",qe)},item:{settings:{filter:qe=>qe.name.includes("arc__")},id:`arc-field-${Je}`,name:`arc-field-${Je}`,editor:()=>null}}),b.createElement(Wm.zH,{color:Ve.color||"#808080",onChange:qe=>{Ce(Je,"color",qe)}}),b.createElement(ae.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>Ae(Je),title:"Remove arc"}))),b.createElement(ae.zx,{size:"sm",icon:"plus",onClick:Se,variant:"secondary"},"Add arc"))},Km=()=>({section:(0,_.css)`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),Vm=new W.c(wm).setPanelOptions((U,ee)=>{U.addNestedOptions({category:["Nodes"],path:"nodes",build:ie=>{ie.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),ie.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),ie.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:Fm})}}),U.addNestedOptions({category:["Edges"],path:"edges",build:ie=>{ie.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),ie.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})});var Qc=e(52366),di=e(75881),cl=e(97852),$m=e(41792),dl=e(62884),_m=e(39749),ui=e(44911),zm=e(88155),ul=e(63374),Hm=e(22785),mi=e(55987);let Yc=0;const km=()=>Yc++;function kp(U){const ee=(0,b.useRef)(null);return ee.current===null&&(ee.current=U+km()),ee.current.toString()}var gr=(U=>(U.Donut="donut",U.Pie="pie",U))(gr||{}),cr=(U=>(U.Name="name",U.Percent="percent",U.Value="value",U))(cr||{}),pr=(U=>(U.Percent="percent",U.Value="value",U))(pr||{});const ml={values:[]},Gm={displayLabels:[]};function fl(U){return!U.field.custom?.hideFrom?.viz&&!isNaN(U.display.numeric)}function Zc(U,ee){return ee.display.numeric+U}const jm=({fieldDisplayValues:U,pieType:ee,width:ie,height:Ee,highlightedTitle:Se,displayLabels:Ae=[],tooltipOptions:Ce})=>{const Ve=(0,Z.l4)(),Je=kp("PieChart"),qe=(0,Z.wW)(El),it=(0,ui.Z)(),{containerRef:gt,TooltipInPortal:Ot}=(0,zm.Z)({detectBounds:!0,scroll:!0}),pt=U.filter(fl),Tt=Xt=>Xt.display.numeric,Ut=Xt=>`${Je}-${(0,ul.Z)(Xt).toHex()}`,Mt=Xt=>`url(#${Ut(Xt)})`,_t=Ae.length>0,an=Ce.mode!=="none"&&it.tooltipOpen,un=pt.reduce(Zc,0),jt=vl(ie,Ee,ee),bn=[...new Set(pt.map(Xt=>Xt.display.color??Aa.R))];return b.createElement("div",{className:qe.container},b.createElement("svg",{width:jt.size,height:jt.size,ref:gt,style:{overflow:"visible"}},b.createElement(dl.Z,{top:jt.position,left:jt.position},bn.map(Xt=>b.createElement($m.Z,{key:Xt,id:Ut(Xt),from:hl(Xt,Ve),to:Ym(Xt,Ve),fromOffset:jt.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:jt.outerRadius})),b.createElement(_m.Z,{data:pt,pieValue:Tt,outerRadius:jt.outerRadius,innerRadius:jt.innerRadius,cornerRadius:3,padAngle:.005},Xt=>b.createElement(b.Fragment,null,Xt.arcs.map(vn=>{const An=vn.data.display.color??Aa.R,Nn=fi(Se,vn);return vn.data.hasLinks&&vn.data.getLinks?b.createElement(Hm.V,{key:vn.index,links:vn.data.getLinks},In=>b.createElement(gl,{tooltip:it,highlightState:Nn,arc:vn,pie:Xt,fill:Mt(An),openMenu:In.openMenu,tooltipOptions:Ce})):b.createElement(gl,{key:vn.index,highlightState:Nn,tooltip:it,arc:vn,pie:Xt,fill:Mt(An),tooltipOptions:Ce})}),_t&&Xt.arcs.map(vn=>{const An=fi(Se,vn);return b.createElement(Qm,{arc:vn,key:vn.index,highlightState:An,outerRadius:jt.outerRadius,innerRadius:jt.innerRadius,displayLabels:Ae,total:un,color:Ve.colors.text.primary})}))))),an?b.createElement(Ot,{key:Math.random(),top:it.tooltipTop,className:qe.tooltipPortal,left:it.tooltipLeft,unstyled:!0,applyPositionStyle:!0},b.createElement(mi.c,{series:it.tooltipData})):null)};function gl({arc:U,pie:ee,highlightState:ie,openMenu:Ee,fill:Se,tooltip:Ae,tooltipOptions:Ce}){const Ve=(0,Z.l4)(),Je=(0,Z.wW)(El),{eventBus:qe}=(0,Qa.R9)(),it=(0,b.useCallback)(pt=>{qe?.publish({type:Tn.xH.type,payload:{raw:pt,x:0,y:0,dataId:U.data.display.title}}),Ae.hideTooltip()},[qe,U,Ae]),gt=(0,b.useCallback)(pt=>{qe?.publish({type:Tn.es.type,payload:{raw:pt,x:0,y:0,dataId:U.data.display.title}});const Tt=pt.currentTarget.ownerSVGElement;if(Tt){const Ut=(0,cl.Z)(Tt,pt);Ae.showTooltip({tooltipLeft:Ut.x,tooltipTop:Ut.y,tooltipData:Jc(ee,U,Ce)})}},[qe,U,Ae,ee,Ce]),Ot=Xc(ie,Je);return b.createElement("g",{key:U.data.display.title,className:Ot,onMouseMove:Ce.mode!=="none"?gt:void 0,onMouseOut:it,onClick:Ee,"aria-label":et.wl.components.Panels.Visualization.PieChart.svgSlice},b.createElement("path",{d:ee.path({...U}),fill:Se,stroke:Ve.colors.background.primary,strokeWidth:1}))}function Qm({arc:U,outerRadius:ee,innerRadius:ie,displayLabels:Ee,total:Se,color:Ae,highlightState:Ce}){const Ve=(0,Z.wW)(El),Je=ie===0?ee/6:ie,[qe,it]=pl(U,ee,Je);if(!(U.endAngle-U.startAngle>=.3))return null;let Ot=Ee.includes(cr.Name)?Math.min(Math.max(ee/150*14,12),30):Math.min(Math.max(ee/100*14,12),36);return b.createElement("g",{className:Xc(Ce,Ve)},b.createElement("text",{fill:Ae,x:qe,y:it,dy:".33em",fontSize:Ot,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},Ee.includes(cr.Name)&&b.createElement("tspan",{x:qe,dy:"1.2em"},U.data.display.title),Ee.includes(cr.Value)&&b.createElement("tspan",{x:qe,dy:"1.2em"},(0,fn.zc)(U.data.display)),Ee.includes(cr.Percent)&&b.createElement("tspan",{x:qe,dy:"1.2em"},(U.data.display.numeric/Se*100).toFixed(U.data.field.decimals??0)+"%")))}function Jc(U,ee,ie){return ie.mode==="multi"?U.arcs.filter(Ee=>{const Se=Ee.data.field;return Se&&!Se.custom?.hideFrom?.tooltip&&!Se.custom?.hideFrom?.viz}).map(Ee=>({color:Ee.data.display.color??Aa.R,label:Ee.data.display.title,value:(0,fn.zc)(Ee.data.display),isActive:Ee.index===ee.index})):[{color:ee.data.display.color??Aa.R,label:ee.data.display.title,value:(0,fn.zc)(ee.data.display)}]}function pl(U,ee,ie){const Ee=(ee+ie)/2,Se=(+U.startAngle+ +U.endAngle)/2-Math.PI/2;return[Math.cos(Se)*Ee,Math.sin(Se)*Ee]}function hl(U,ee){return(0,ul.Z)(U).darken(20*(ee.isDark?1:-.7)).spin(4).toRgbString()}function Ym(U,ee){return(0,ul.Z)(U).darken(10*(ee.isDark?1:-.7)).spin(-4).toRgbString()}function vl(U,ee,ie,Ee=16){const Se=Math.min(ee,U),Ae=(Se-Ee*2)/2,Ce=ie===gr.Pie?Ae:Math.max(Ae/3,20),Ve=Ae-Ce,Je=(Se-Ee*2)/2,qe=1-(Ae-Ve)/Ae;return{position:Je+Ee,size:Se,outerRadius:Ae,innerRadius:Ve,gradientFromOffset:qe}}var Zr=(U=>(U[U.Highlighted=0]="Highlighted",U[U.Deemphasized=1]="Deemphasized",U[U.Normal=2]="Normal",U))(Zr||{});function fi(U,ee){return U?U===ee.data.display.title?0:1:2}function Xc(U,ee){switch(U){case 0:return ee.svgArg.highlighted;case 1:return ee.svgArg.deemphasized;case 2:default:return ee.svgArg.normal}}const El=U=>({container:(0,_.css)`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:(0,_.css)`
        transition: all 200ms ease-in-out;
      `,highlighted:(0,_.css)`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:(0,_.css)`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:(0,_.css)`
      ${(0,Do.getTooltipContainerStyles)(U)}
    `}),Zm={displayMode:Bt.jK.List,showLegend:!0,placement:"right",calcs:[],values:[pr.Percent]};function Jm(U){const{data:ee,timeZone:ie,fieldConfig:Ee,replaceVariables:Se,width:Ae,height:Ce,options:Ve,id:Je}=U,qe=(0,Z.l4)(),it=qs(),gt=(0,Qc.nG)({fieldConfig:Ee,reduceOptions:Ve.reduceOptions,data:ee.series,theme:qe,replaceVariables:Se,timeZone:ie});return qm(gt)?b.createElement(Xs.AY,{width:Ae,height:Ce,legend:Xm(U,gt)},(Ot,pt)=>b.createElement(jm,{width:Ot,height:pt,highlightedTitle:it,fieldDisplayValues:gt,tooltipOptions:Ve.tooltip,pieType:Ve.pieType,displayLabels:Ve.displayLabels})):b.createElement(ws.Z,{panelId:Je,fieldConfig:Ee,data:ee})}function Xm(U,ee){const ie=U.options.legend??Zm;if(ie.showLegend===!1)return;const Ee=ee.filter(fl).reduce(Zc,0),Se=ee.sort((Ae,Ce)=>isNaN(Ae.display.numeric)?1:isNaN(Ce.display.numeric)?-1:Ce.display.numeric-Ae.display.numeric).map((Ae,Ce)=>{const Ve=Ae.field.custom?.hideFrom??{};if(Ve.legend)return;const Je=!!Ve.viz,qe=Ae.display;return{label:qe.title??"",color:qe.color??Aa.R,yAxis:1,disabled:Je,getItemKey:()=>(qe.title??"")+Ce,getDisplayValues:()=>{const it=ie.values??[];let gt=[];if(it.includes(pr.Value)&&gt.push({numeric:qe.numeric,text:(0,fn.zc)(qe),title:"Value"}),it.includes(pr.Percent)){const Ot=Je?0:qe.numeric/Ee,pt=Ot*100;gt.push({numeric:Ot,percent:pt,text:Je||isNaN(Ot)?U.fieldConfig.defaults.noValue??"-":pt.toFixed(Ae.field.decimals??0)+"%",title:it.length>1?"Percent":""})}return gt}}}).filter(Ae=>!!Ae);return b.createElement(Xs.AY.Legend,{placement:ie.placement,width:ie.width},b.createElement(_r.l,{items:Se,seriesVisibilityChangeBehavior:di.Y.Hide,placement:ie.placement,displayMode:ie.displayMode}))}function qm(U){return U.some(ee=>ee.view?.dataFrame.length)}function qs(){const[U,ee]=(0,b.useState)(),{eventBus:ie}=(0,Qa.R9)();return(0,b.useEffect)(()=>{const Ee=Ce=>{ee(Ce.payload.dataId)},Se=Ce=>{ee(void 0)},Ae=new En.w0;return Ae.add(ie.getStream(Tn.es).subscribe({next:Ee})),Ae.add(ie.getStream(Tn.xH).subscribe({next:Se})),()=>{Ae.unsubscribe()}},[ee,ie]),U}const qc=(U,ee,ie)=>{if(ee==="grafana-piechart-panel"&&ie.angular){const Ee=ie.angular,Se=[];let Ae=U.options;if(Ee.aliasColors)for(const Ce of Object.keys(Ee.aliasColors)){const Ve=Ee.aliasColors[Ce];Ve&&Se.push({matcher:{id:Fr.mi.byName,options:Ce},properties:[{id:Ba.qb.Color,value:{mode:Aa.S.Fixed,fixedColor:Ve}}]})}if(U.fieldConfig={overrides:Se,defaults:{unit:Ee.format,decimals:Ee.decimals?Ee.decimals:0}},Ae.legend={placement:"right",values:[],displayMode:Bt.jK.Table,showLegend:!0,calcs:[]},Ee.valueName)switch(Ae.reduceOptions={calcs:[]},Ee.valueName){case"current":Ae.reduceOptions.calcs=["lastNotNull"];break;case"min":Ae.reduceOptions.calcs=["min"];break;case"max":Ae.reduceOptions.calcs=["max"];break;case"avg":Ae.reduceOptions.calcs=["mean"];break;case"total":Ae.reduceOptions.calcs=["sum"];break}switch(Ee.legendType){case"Under graph":Ae.legend.placement="bottom";break;case"Right side":Ae.legend.placement="right";break}switch(Ee.pieType){case"pie":Ae.pieType=gr.Pie;break;case"donut":Ae.pieType=gr.Donut;break}return Ee.legend&&(Ee.legend.show||(Ae.legend.showLegend=!1),Ee.legend.values&&Ae.legend.values.push(pr.Value),Ee.legend.percentage&&Ae.legend.values.push(pr.Percent)),Ee.legendType==="On graph"&&(Ae.legend.showLegend=!1,Ae.displayLabels=[cr.Name],Ee.legend.values&&Ae.displayLabels.push(cr.Value),Ee.legend.percentage&&Ae.displayLabels.push(cr.Percent)),Ae}return{}};class ed{getSuggestionsForData(ee){const ie=ee.getListAppender({name:Da.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[cr.Percent],legend:{calcs:[],displayMode:Bt.jK.Hidden,placement:"right",values:[],showLegend:!1}}}),{dataSummary:Ee}=ee;if(Ee.hasNumberField){if(Ee.hasStringField&&Ee.frameCount===1){if(Ee.rowCountTotal>30||Ee.rowCountTotal<2)return;ie.append({name:Da.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),ie.append({name:Da.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:gr.Donut}});return}Ee.numberFieldCount>30||Ee.numberFieldCount<2||(ie.append({name:Da.y.PieChart}),ie.append({name:Da.y.PieChartDonut,options:{pieType:gr.Donut}}))}}}const ef=new W.c(Jm).setPanelChangeHandler(qc).useFieldConfig({disableStandardOptions:[Ba.qb.Thresholds],standardOptions:{[Ba.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Aa.S.PaletteClassic}}},useCustomConfig:U=>{ma.B(U)}}).setPanelOptions(U=>{(0,Ai.j)(U),U.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:gr.Pie,label:"Pie"},{value:gr.Donut,label:"Donut"}]},defaultValue:gr.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:cr.Percent,label:"Percent"},{value:cr.Name,label:"Name"},{value:cr.Value,label:"Value"}]}}),ha.L(U),Pa.J(U,!1),U.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:pr.Percent,label:"Percent"},{value:pr.Value,label:"Value"}]},showIf:ee=>ee.legend.showLegend!==!1})}).setSuggestionsSupplier(new ed);var tf=e(88294),td=e(70450),nd=e(64555),ad=e(56386);const gi=({data:U,alignedData:ee,seriesIdx:ie,datapointIdx:Ee,timeZone:Se,onAnnotationAdd:Ae})=>{const Ce=(0,Z.l4)();if(!U||Ee==null)return null;const Ve=ee.fields[ie],Je=[],qe=new Set;if(Ve.getLinks){const Xt=Ve.values[Ee],vn=Ve.display?Ve.display(Xt):{text:`${Xt}`,numeric:+Xt};Ve.getLinks({calculatedValue:vn,valueRowIndex:Ee}).forEach(An=>{const Nn=`${An.title}/${An.href}`;qe.has(Nn)||(Je.push(An),qe.add(Nn))})}const it=ee.fields[0],gt=it.display||(0,yn.U)({field:it,timeZone:Se,theme:Ce}),Ot=Ve.state?.origin,pt=Ve.display||(0,yn.U)({field:Ve,timeZone:Se,theme:Ce}),Tt=Ve.values[Ee],Ut=pt(Tt),Mt=Ot?(0,Wa.CZ)(U[Ot.frameIndex].fields[Ot.fieldIndex],U[Ot.frameIndex],U):null,_t=(0,Qt.iK)(Ve,Ee);let an;_t&&(an=it.values[_t]);const un=it.values[Ee];let jt=null,bn=null;if(an){const Xt=an&&(0,Qt.Y)(an-un);bn=b.createElement(b.Fragment,null,b.createElement("br",null),b.createElement("strong",null,"Duration:")," ",Xt),jt=b.createElement(b.Fragment,null," to"," ",b.createElement("strong",null,gt(it.values[_t]).text))}return b.createElement("div",null,b.createElement("div",{style:{fontSize:Ce.typography.bodySmall.fontSize}},Mt,b.createElement("br",null),b.createElement(mi.V,{label:Ut.text,color:Ut.color||Aa.R,isActive:!0}),"From ",b.createElement("strong",null,gt(it.values[Ee]).text),jt,bn),b.createElement("div",{style:{margin:Ce.spacing(1,-1,-1,-1),borderTop:`1px solid ${Ce.colors.border.weak}`}},Ae&&b.createElement(Bs.s,{label:"Add annotation",icon:"comment-alt",onClick:Ae}),Je.length>0&&Je.map((Xt,vn)=>b.createElement(Bs.s,{key:vn,icon:"external-link-alt",target:Xt.target,label:Xt.title,url:Xt.href,onClick:Xt.onClick}))))};gi.displayName="StateTimelineTooltip";const pi=10,nf=({data:U,timeRange:ee,timeZone:ie,options:Ee,width:Se,height:Ae,replaceVariables:Ce,onChangeTimeRange:Ve})=>{const Je=(0,Z.l4)(),qe=(0,b.useRef)(void 0),it=(0,b.useRef)(!1),[gt,Ot]=(0,b.useState)(void 0),[pt,Tt]=(0,b.useState)(null),[Ut,Mt]=(0,b.useState)(null),[_t,an]=(0,b.useState)(null),[un,jt]=(0,b.useState)(!1),[bn,Xt]=(0,b.useState)(!1),{sync:vn,canAddAnnotations:An}=(0,Qa.R9)(),Nn=()=>{it.current=!1,Tt(null),Xt(!1)},In=()=>{it.current=!it.current,Xt(it.current)},{frames:_n,warn:Wn}=(0,b.useMemo)(()=>(0,Qt.AR)(U.series,Ee.mergeValues??!0,ee,Je),[U.series,Ee.mergeValues,ee,Je]),la=(0,b.useMemo)(()=>(0,Qt.SA)(_n,Ee.legend,Je),[_n,Ee.legend,Je]),Hn=(0,b.useMemo)(()=>zi(Ee.timezone,ie),[Ee.timezone,ie]),Sn=(0,b.useCallback)((pa,_a,Za,Va)=>{const ka=_n??[],qn=ka.reduce((Bn,Zn)=>Bn+Zn.fields.filter(ea=>ea.type!==zn.fS.time).length,0);return _a===null||Za===null||!pa.meta?.transformations?.length&&pa.fields.length-1!==qn||!pa.fields[_a]?null:b.createElement(b.Fragment,null,bn&&b.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},b.createElement(Et.P,{onClick:Nn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),b.createElement(gi,{data:ka,alignedData:pa,seriesIdx:_a,datapointIdx:Za,timeZone:ie,onAnnotationAdd:Va}))},[ie,_n,bn]);if(!_n||Wn)return b.createElement("div",{className:"panel-empty"},b.createElement("p",null,Wn??"No data found in response"));if(_n.length===1){const pa=(0,Ao.MB)(_n[0])}const na=!!(An&&An());return b.createElement(ad.K,{theme:Je,frames:_n,structureRev:U.structureRev,timeRange:ee,timeZone:Hn,width:Se,height:Ae,legendItems:la,...Ee,mode:Qt.KN.Changes},(pa,_a)=>(qe.current!==pa&&(qe.current=vt({config:pa,onUPlotClick:In,setFocusedSeriesIdx:Mt,setFocusedPointIdx:an,setCoords:Tt,setHover:Ot,isToolTipOpen:it,isActive:un,setIsActive:jt,sync:vn})),b.createElement(b.Fragment,null,b.createElement(Go.R,{config:pa,onZoom:Ve}),b.createElement(Co,{config:pa,onChangeTimeRange:Ve}),U.annotations&&b.createElement(Qo,{annotations:U.annotations,config:pa,timeZone:ie}),na?b.createElement(Ni,{data:_a,timeZone:ie,config:pa},({startAnnotating:Za})=>Ee.tooltip.mode===Bt.f3.None||_t===null||!un&&vn&&vn()===Ar.m.Crosshair?null:b.createElement(Ws.h_,null,gt&&pt&&Ut&&b.createElement(rr.S,{position:{x:pt.viewport.x,y:pt.viewport.y},offset:{x:pi,y:pi},allowPointerEvents:it.current},Sn(_a,Ut,_t,()=>{Za({coords:{plotCanvas:pt.canvas,viewport:pt.viewport}}),Nn()})))):b.createElement(Ws.h_,null,Ee.tooltip.mode!==Bt.f3.None&&gt&&pt&&b.createElement(rr.S,{position:{x:pt.viewport.x,y:pt.viewport.y},offset:{x:pi,y:pi},allowPointerEvents:it.current},Sn(_a,Ut,_t))))))};var sd=e(23955);const af=(U,ee,ie)=>{let Ee=U.options??{};if(ee==="natel-discrete-panel"&&ie.angular){const Se=ie.angular,Ae=U.fieldConfig??{defaults:{},overrides:[]};Se.units&&(Ae.defaults.unit=Se.units);const Ce={fillOpacity:100,lineWidth:0};Ae.defaults.custom=Ce,Ee.mergeValues=!0;const Ve={type:sd.H.ValueToText,options:{}};if(Ae.defaults.mappings=[Ve],(0,Be.isArray)(Se.colorMaps))for(const Je of Se.colorMaps){const qe=Je.color;qe&&(Ve.options[Je.text]={color:qe})}if((0,Be.isArray)(Se.valueMaps))for(const Je of Se.valueMaps){const qe=Je.text,it=Je.value;if(qe&&it){let gt=Ve.options[it];gt?gt.text=qe:Ve.options[it]={text:qe}}}if((0,Be.isArray)(Se.rangeMaps))for(const Je of Se.rangeMaps){let qe=+Je.from,it=+Je.to;const gt=Je.text;gt&&Ae.defaults.mappings.push({type:sd.H.RangeToText,options:{from:qe,to:it,result:{text:gt}}})}U.fieldConfig=Ae}return Ee},hi={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:Bt.Jp.Auto},rd={fillOpacity:70,lineWidth:0};class od{getSuggestionsForData(ee){const{dataSummary:ie}=ee;if(!ie.hasData||!ie.hasTimeField||!ie.hasStringField&&!ie.hasNumberField||ie.numberFieldCount>=30||ie.preferredVisualisationType==="logs")return;ee.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Da.y.StateTimeline})}}const sf=new W.c(nf).setPanelChangeHandler(af).useFieldConfig({standardOptions:{[Ba.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Aa.S.ContinuousGrYlRd}}},useCustomConfig:U=>{U.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:rd.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:rd.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:nd.c,override:nd.c,shouldApply:ee=>ee.type!==zn.fS.time,process:Zs.kG,settings:{isTime:!0}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",defaultValue:!1,editor:td.M,override:td.M,shouldApply:ee=>ee.type!==zn.fS.time,process:Zs.kG,settings:{isTime:!0}}),ma.B(U)}}).setPanelOptions(U=>{U.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:hi.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Bt.Jp.Auto,label:"Auto"},{value:Bt.Jp.Always,label:"Always"},{value:Bt.Jp.Never,label:"Never"}]},defaultValue:hi.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:hi.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:hi.rowHeight}),Pa.J(U,!1),ha.L(U,!0)}).setSuggestionsSupplier(new od).setDataSupport({annotations:!0}),id=({data:U,alignedData:ee,seriesIdx:ie,datapointIdx:Ee,timeZone:Se})=>{const Ae=(0,Z.l4)();if(!U||Ee==null)return null;const Ce=ee.fields[ie],Ve=[],Je=new Set;if(Ce.getLinks){const Mt=Ce.values[Ee],_t=Ce.display?Ce.display(Mt):{text:`${Mt}`,numeric:+Mt};Ce.getLinks({calculatedValue:_t,valueRowIndex:Ee}).forEach(an=>{const un=`${an.title}/${an.href}`;Je.has(un)||(Ve.push(an),Je.add(un))})}const qe=ee.fields[0],it=qe.display||(0,yn.U)({field:qe,timeZone:Se,theme:Ae}),gt=Ce.state?.origin,Ot=Ce.display||(0,yn.U)({field:Ce,timeZone:Se,theme:Ae}),pt=Ce.values[Ee],Tt=Ot(pt),Ut=gt?(0,Wa.CZ)(U[gt.frameIndex].fields[gt.fieldIndex],U[gt.frameIndex],U):null;return b.createElement("div",null,b.createElement("div",{style:{fontSize:Ae.typography.bodySmall.fontSize}},b.createElement("strong",null,it(qe.values[Ee]).text),b.createElement("br",null),b.createElement(mi.V,{label:Tt.text,color:Tt.color||Aa.R,isActive:!0}),Ut),Ve.length>0&&b.createElement("div",{style:{margin:Ae.spacing(1,-1,-1,-1),borderTop:`1px solid ${Ae.colors.border.weak}`}},Ve.map((Mt,_t)=>b.createElement(Bs.s,{key:_t,icon:"external-link-alt",target:Mt.target,label:Mt.title,url:Mt.href,onClick:Mt.onClick}))))};id.displayName="StatusHistoryTooltip";const ld=10,cd=({data:U,timeRange:ee,timeZone:ie,options:Ee,width:Se,height:Ae,onChangeTimeRange:Ce})=>{const Ve=(0,Z.l4)(),Je=(0,b.useRef)(void 0),qe=(0,b.useRef)(!1),[it,gt]=(0,b.useState)(void 0),[Ot,pt]=(0,b.useState)(null),[Tt,Ut]=(0,b.useState)(null),[Mt,_t]=(0,b.useState)(null),[an,un]=(0,b.useState)(!1),[jt,bn]=(0,b.useState)(!1),{sync:Xt}=(0,Qa.R9)(),vn=()=>{qe.current=!1,pt(null),bn(!1)},An=()=>{qe.current=!qe.current,bn(qe.current)},{frames:Nn,warn:In}=(0,b.useMemo)(()=>(0,Qt.AR)(U.series,!1,ee,Ve),[U.series,ee,Ve]),_n=(0,b.useMemo)(()=>(0,Qt.SA)(Nn,Ee.legend,Ve),[Nn,Ee.legend,Ve]),Wn=(0,b.useCallback)((Sn,na,pa)=>{const _a=Nn??[],Za=_a.reduce((Va,ka)=>Va+ka.fields.filter(qn=>qn.type!==zn.fS.time).length,0);return na===null||pa===null||!Sn.meta?.transformations?.length&&Sn.fields.length-1!==Za||!Sn.fields[na]?null:b.createElement(b.Fragment,null,jt&&b.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},b.createElement(Et.P,{onClick:vn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),b.createElement(id,{data:_a,alignedData:Sn,seriesIdx:na,datapointIdx:pa,timeZone:ie}))},[ie,Nn,jt]),la=Sn=>Ee.tooltip.mode===Bt.f3.None||Mt===null||!an&&Xt&&Xt()===Ar.m.Crosshair?null:b.createElement(Ws.h_,null,it&&Ot&&Tt&&b.createElement(rr.S,{position:{x:Ot.viewport.x,y:Ot.viewport.y},offset:{x:ld,y:ld},allowPointerEvents:qe.current},Wn(Sn,Tt,Mt))),Hn=(0,b.useMemo)(()=>zi(Ee.timezone,ie),[Ee.timezone,ie]);return!Nn||In?b.createElement("div",{className:"panel-empty"},b.createElement("p",null,In??"No data found in response")):Nn[0].length>Se/2?b.createElement("div",{className:"panel-empty"},b.createElement("p",null,"Too many points to visualize properly. ",b.createElement("br",null),"Update the query to return fewer points. ",b.createElement("br",null),"(",Nn[0].length," points received)")):b.createElement(ad.K,{theme:Ve,frames:Nn,structureRev:U.structureRev,timeRange:ee,timeZone:Hn,width:Se,height:Ae,legendItems:_n,...Ee,mode:Qt.KN.Samples},(Sn,na)=>(Je.current!==Sn&&(Je.current=vt({config:Sn,onUPlotClick:An,setFocusedSeriesIdx:Ut,setFocusedPointIdx:_t,setCoords:pt,setHover:gt,isToolTipOpen:qe,isActive:an,setIsActive:un})),b.createElement(b.Fragment,null,b.createElement(Go.R,{config:Sn,onZoom:Ce}),la(na),b.createElement(Co,{config:Sn,onChangeTimeRange:Ce}))))},dd={colWidth:.9,rowHeight:.9,showValue:Bt.Jp.Auto},yl={fillOpacity:70,lineWidth:1};class rf{getSuggestionsForData(ee){const{dataSummary:ie}=ee;if(!ie.hasData||!ie.hasTimeField||!ie.hasStringField&&!ie.hasNumberField||ie.numberFieldCount>=30||ie.rowCountMax>100||ie.preferredVisualisationType==="logs")return;ee.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:Aa.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:Se=>{Se.options.colWidth=.7}}}).append({name:Da.y.StatusHistory})}}const of=new W.c(cd).useFieldConfig({standardOptions:{[Ba.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Aa.S.Thresholds}}},useCustomConfig:U=>{U.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:yl.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:yl.fillOpacity,settings:{min:0,max:100,step:1}}),ma.B(U)}}).setPanelOptions(U=>{U.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Bt.Jp.Auto,label:"Auto"},{value:Bt.Jp.Always,label:"Always"},{value:Bt.Jp.Never,label:"Never"}]},defaultValue:Bt.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),Pa.J(U,!1),ha.L(U,!0)}).setSuggestionsSupplier(new rf);var ud=e(18985),wo=e(50821),md=e(26286);function fd({onChange:U,value:ee,context:ie}){const Ee=Se=>{Se?.currentTarget.checked&&(ie.options.footer.show=!1),U(Se?.currentTarget.checked)};return b.createElement(md.r,{value:!!ee,onChange:Ee})}function lf({cellOptions:U,onChange:ee}){const ie=Se=>{U.mode=Se,ee(U)},Ee=Se=>{U.valueDisplayMode=Se,ee(U)};return b.createElement(Mn.K,{direction:"column",gap:0},b.createElement(Ls.g,{label:"Gauge display mode"},b.createElement(Ho.S,{value:U?.mode??Bt.QH.Gradient,onChange:ie,options:gd})),b.createElement(Ls.g,{label:"Value display"},b.createElement(Ho.S,{value:U?.valueDisplayMode??Bt.M8.Text,onChange:Ee,options:cf})))}const gd=[{value:Bt.QH.Basic,label:"Basic"},{value:Bt.QH.Gradient,label:"Gradient"},{value:Bt.QH.Lcd,label:"Retro LCD"}],cf=[{value:Bt.M8.Color,label:"Value color"},{value:Bt.M8.Text,label:"Text color"},{value:Bt.M8.Hidden,label:"Hidden"}],df=[{value:Bt.v7.Basic,label:"Basic"},{value:Bt.v7.Gradient,label:"Gradient"}],uf=({cellOptions:U,onChange:ee})=>{const ie=Ee=>{U.mode=Ee,ee(U)};return b.createElement(Ls.g,{label:"Background display mode"},b.createElement(Ho.S,{value:U?.mode??Bt.v7.Gradient,onChange:ie,options:df}))};var mf=e(51761),vi=e(80857);const Dl=["hideValue","drawStyle","lineInterpolation","barAlignment","lineWidth","fillOpacity","gradientMode","lineStyle","spanNulls","showPoints","pointSize"];function ff(U){const ee=(0,Mr.F)(U);return{...ee,useCustomConfig:ie=>{ee.useCustomConfig?.(ie),ie.addBooleanSwitch({path:"hideValue",name:"Hide value"})}}}const gf=U=>{const{cellOptions:ee,onChange:ie}=U,Ee=(0,b.useMemo)(()=>{const Ce=ff(vi.U);return(0,mf.j)(Ce,"ChartCell")},[]),Se=(0,Z.wW)(hf),Ae={...vi.U,...ee};return b.createElement(br.wc,null,Ee.list(Dl.map(Ce=>`custom.${Ce}`)).map(Ce=>{if(Ce.showIf&&!Ce.showIf(Ae))return null;const Ve=Ce.editor,Je=Ce.path;return b.createElement(Ls.g,{label:Ce.name,key:Ce.id,className:Se.field},b.createElement(Ve,{onChange:qe=>ie({...ee,[Je]:qe}),value:(pf(Je,Ae)?Ae[Je]:void 0)??Ce.defaultValue,item:Ce,context:{data:[]}}))}))};function pf(U,ee){return U in ee}const hf=()=>({field:(0,_.css)`
    width: 100%;

    // @TODO don't show "scheme" option for custom gradient mode.
    // it needs thresholds to work, which are not supported
    // for area chart cell right now
    [title='Use color scheme to define gradient'] {
      display: none;
    }
  `}),Pl=({value:U,onChange:ee})=>{const ie=U.type,Ee=(0,Z.wW)(vf),Se=pd.find(qe=>qe.value.type===ie);let[Ae,Ce]=(0,b.useState)({});const Ve=qe=>{qe.value!==void 0&&(U=qe.value,Ae[U.type]!==void 0&&Object.keys(Ae[U.type]).length>1&&(U=(0,Be.merge)(U,Ae[U.type])),(0,Ya.ff)(Bo,{item:Uo.CELL_TYPE_CHANGE,type:U.type}),ee(U))},Je=qe=>{Ae[U.type]=(0,Be.merge)(U,qe),Ce(Ae),ee(Ae[U.type])};return b.createElement("div",{className:Ee.fixBottomMargin},b.createElement(Ls.g,null,b.createElement(ye.Ph,{options:pd,value:Se,onChange:Ve})),ie===Bt.h2.Gauge&&b.createElement(lf,{cellOptions:U,onChange:Je}),ie===Bt.h2.ColorBackground&&b.createElement(uf,{cellOptions:U,onChange:Je}),ie===Bt.h2.Sparkline&&b.createElement(gf,{cellOptions:U,onChange:Je}))},pd=[{value:{type:Bt.h2.Auto},label:"Auto"},{value:{type:Bt.h2.Sparkline},label:"Sparkline"},{value:{type:Bt.h2.ColorText},label:"Colored text"},{value:{type:Bt.h2.ColorBackground},label:"Colored background"},{value:{type:Bt.h2.Gauge},label:"Gauge"},{value:{type:Bt.h2.JSONView},label:"JSON View"},{value:{type:Bt.h2.Image},label:"Image"}],vf=U=>({fixBottomMargin:(0,_.css)({marginBottom:U.spacing(-2)})}),Ei={cellHeight:Bt.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};class Ef{getSuggestionsForData(ee){const ie=ee.getListAppender({name:Da.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ee=>{Ee.fieldConfig.defaults.custom.minWidth=50}}});ee.dataSummary.fieldCount===0?ie.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):ie.append({})}}const yi="Table footer",hd=["Cell options"],Wo=new W.c(Wc).setPanelChangeHandler(Lo.I0).setMigrationHandler(Lo.OF).useFieldConfig({useCustomConfig:U=>{U.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:wo.OA.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:wo.OA.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:wo.OA.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell type",editor:Pl,override:Pl,defaultValue:wo.OA.cellOptions,process:Zs.kG,category:hd,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:hd,showIf:ee=>ee.cellOptions.type===Bt.h2.Auto||ee.cellOptions.type===Bt.h2.JSONView||ee.cellOptions.type===Bt.h2.ColorText||ee.cellOptions.type===Bt.h2.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:wo.OA.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(U=>{U.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:Ei.showHeader}).addRadio({path:"cellHeight",name:"Cell height",defaultValue:Ei.cellHeight,settings:{options:[{value:Bt.Ss.Sm,label:"Small"},{value:Bt.Ss.Md,label:"Medium"},{value:Bt.Ss.Lg,label:"Large"}]}}).addBooleanSwitch({path:"footer.show",category:[yi],name:"Show table footer",defaultValue:Ei.footer?.show}).addCustomEditor({id:"footer.reducer",category:[yi],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:ud.S.get("stats-picker").editor,defaultValue:[Ks.gz.sum],showIf:ee=>ee.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[yi],name:"Count rows",description:"Display a single count for all data rows",defaultValue:Ei.footer?.countRows,showIf:ee=>ee.footer?.reducer?.length===1&&ee.footer?.reducer[0]===Ks.gz.count}).addMultiSelect({path:"footer.fields",category:[yi],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async ee=>{const ie=[];if(ee&&ee.data&&ee.data.length>0){const Ee=ee.data[0];for(const Se of Ee.fields)if(Se.type===zn.fS.number){const Ae=(0,Wa.CZ)(Se,Ee,ee.data),Ce=Se.name;ie.push({value:Ce,label:Ae})}}return ie}},defaultValue:"",showIf:ee=>ee.footer?.show&&!ee.footer?.countRows||ee.footer?.reducer?.length===1&&ee.footer?.reducer[0]!==Ks.gz.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:fd})}).setSuggestionsSupplier(new Ef);var vd=e(79937),yf=e(48993),Df=e(52807),Us=(U=>(U.Code="code",U.HTML="html",U.Markdown="markdown",U))(Us||{}),Ed=(U=>(U.Go="go",U.Html="html",U.Json="json",U.Markdown="markdown",U.Plaintext="plaintext",U.Sql="sql",U.Typescript="typescript",U.Xml="xml",U.Yaml="yaml",U))(Ed||{});const Gp="plaintext",Jr={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},Cl={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function Pf(U){const ee=(0,Z.wW)(Cf),[ie,Ee]=(0,b.useState)({mode:U.options.mode,content:yd(U.options,U.replaceVariables,Zt.default.disableSanitizeHtml)});if((0,yf.Z)(()=>{const{options:Se,replaceVariables:Ae}=U,Ce=yd(Se,Ae,Zt.default.disableSanitizeHtml);(Ce!==ie.content||Se.mode!==ie.mode)&&Ee({mode:Se.mode,content:Ce})},100,[U]),ie.mode===Us.Code){const Se=U.options.code??Jr;return b.createElement(tl.p,{key:`${Se.showLineNumbers}/${Se.showMiniMap}`,value:ie.content,language:Se.language??Jr.language,width:U.width,height:U.height,containerStyles:ee.codeEditorContainer,showMiniMap:Se.showMiniMap,showLineNumbers:Se.showLineNumbers,readOnly:!0})}return b.createElement(K.$,{autoHeightMin:"100%",className:ee.containStrict},b.createElement(vd.Z,{html:ie.content,className:ee.markdown,"data-testid":"TextPanel-converted-content"}))}function yd(U,ee,ie){let{mode:Ee,content:Se}=U;if(!Se)return"";switch(Se=ee(Se,{},U.code?.language==="json"?"json":"html"),Ee){case Us.Code:break;case Us.HTML:ie||(Se=wi.QX.sanitizeTextPanelContent(Se));break;case Us.Markdown:default:Se=(0,Df.x)(Se,{noSanitize:ie})}return Se}const Cf=U=>({codeEditorContainer:(0,_.css)`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${U.colors.background.primary};
    }
  `,markdown:(0,_.cx)("markdown-html",(0,_.css)`
      height: 100%;
    `),containStrict:(0,_.css)({contain:"strict"})});var bf=e(19977),Dd=e(74317);const Pd=({value:U,onChange:ee,context:ie})=>{const Ee=(0,b.useMemo)(()=>ie.options?.mode??Us.Markdown,[ie]),Se=(0,Z.wW)(Mf),Ae=()=>ie.getSuggestions?ie.getSuggestions().map(Ce=>(0,Dd.T)(Ce)):[];return b.createElement("div",{className:(0,_.cx)(Se.editorBox)},b.createElement(bf.Z,{disableHeight:!0},({width:Ce})=>Ce===0?null:b.createElement(tl.p,{value:U,onBlur:ee,onSave:ee,language:Ee,width:Ce,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:Ae})))},Mf=U=>({editorBox:(0,_.css)`
    label: editorBox;
    border: 1px solid ${U.colors.border.medium};
    border-radius: ${U.shape.radius.default};
    margin: ${U.spacing(.5)} 0;
    width: 100%;
  `}),xf=U=>{const ee=parseFloat(U.pluginVersion||"6.1");let ie=U.options;if(U.hasOwnProperty("content")&&U.hasOwnProperty("mode")){const Se=U,Ae=Se.content,Ce=Se.mode;delete Se.content,delete Se.mode,ee<7.1&&(ie={content:Ae,mode:Ce})}return[Us.Code,Us.HTML,Us.Markdown].find(Se=>Se===ie.mode)||(ie={...ie,mode:Us.Markdown}),ie},Sf=new W.c(Pf).setPanelOptions(U=>{U.addRadio({path:"mode",name:"Mode",settings:{options:[{value:Us.Markdown,label:"Markdown"},{value:Us.HTML,label:"HTML"},{value:Us.Code,label:"Code"}]},defaultValue:Cl.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(Ed).map(ee=>({value:ee,label:ee}))},defaultValue:Jr.language,showIf:ee=>ee.mode===Us.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:Jr.showLineNumbers,showIf:ee=>ee.mode===Us.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:Jr.showMiniMap,showIf:ee=>ee.mode===Us.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:Pd,defaultValue:Cl.content})}).setMigrationHandler(xf);var Tf=e(51226),Cd=e(62806),Of=e(7959);class bl{getSuggestionsForData(ee){const{dataSummary:ie}=ee;if(!ie.hasTimeField||!ie.hasNumberField||ie.rowCountTotal<2)return;const Ee=ee.getListAppender({name:Da.y.LineChart,pluginId:"timeseries",options:{legend:{calcs:[],displayMode:Bt.jK.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ae=>{Ae.fieldConfig?.defaults.custom?.drawStyle!==Bt.l8.Bars&&(Ae.fieldConfig.defaults.custom.lineWidth=Math.max(Ae.fieldConfig.defaults.custom.lineWidth??1,2))}}}),Se=100;if(Ee.append({name:Da.y.LineChart}),ie.rowCountMax<200&&Ee.append({name:Da.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:Bt.KC.Smooth}},overrides:[]}}),ie.numberFieldCount===1){Ee.append({name:Da.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),Ee.append({name:Da.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Aa.S.ContinuousGrYlRd},custom:{gradientMode:Bt.FI.Scheme,lineInterpolation:Bt.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),ie.rowCountMax<Se&&(Ee.append({name:Da.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:Bt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Bt.FI.Hue}},overrides:[]}}),Ee.append({name:Da.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Aa.S.ContinuousGrYlRd},custom:{drawStyle:Bt.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:Bt.FI.Scheme}},overrides:[]}}));return}Ee.append({name:Da.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Bt.o0.Normal,group:"A"}}},overrides:[]}}),Ee.append({name:Da.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Bt.o0.Percent,group:"A"}}},overrides:[]}}),ie.rowCountTotal/ie.numberFieldCount<Se&&(Ee.append({name:Da.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:Bt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Bt.FI.Hue,stacking:{mode:Bt.o0.Normal,group:"A"}}},overrides:[]}}),Ee.append({name:Da.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:Bt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Bt.FI.Hue,stacking:{mode:Bt.o0.Percent,group:"A"}}},overrides:[]}}))}}function If(U){const ee=(0,xe.h4)().getCurrent()?.getPanelById(U);if(ee){const ie=ee.transformations?[...ee.transformations]:[];return ie.push({id:Of.W.prepareTimeSeries,options:{format:"wide"}}),{name:"Transform to wide time series format",pluginId:"timeseries",transformations:ie}}}const Rf=({data:U,timeRange:ee,timeZone:ie,width:Ee,height:Se,options:Ae,fieldConfig:Ce,onChangeTimeRange:Ve,replaceVariables:Je,id:qe})=>{const{sync:it,canAddAnnotations:gt,onThresholdsChange:Ot,canEditThresholds:pt,showThresholds:Tt,dataLinkPostProcessor:Ut}=(0,Qa.R9)(),Mt=(0,b.useMemo)(()=>$i(U.series,Zt.config.theme2,ee),[U.series,ee]),_t=(0,b.useMemo)(()=>zi(Ae.timezone,ie),[Ae.timezone,ie]),an=(0,b.useMemo)(()=>{if(Mt?.length&&Mt.every(jt=>jt.meta?.type===Tf.P.TimeSeriesLong)){const jt=If(qe);return{message:"Long data must be converted to wide",suggestions:jt?[jt]:void 0}}},[Mt,qe]);if(!Mt||an)return b.createElement(ws.Z,{panelId:qe,message:an?.message,fieldConfig:Ce,data:U,needsTimeField:!0,needsNumberField:!0,suggestions:an?.suggestions});const un=!!(gt&&gt());return b.createElement(Li.p,{frames:Mt,structureRev:U.structureRev,timeRange:ee,timeZone:_t,width:Ee,height:Se,legend:Ae.legend,options:Ae},(jt,bn)=>(bn.fields.some(Xt=>!!Xt.config.links?.length)&&(bn=Hi(bn,Mt,Je,ie,Ut)),b.createElement(b.Fragment,null,b.createElement(Cd.C,{config:jt}),b.createElement(Go.R,{config:jt,onZoom:Ve,withZoomY:!0}),Ae.tooltip.mode===Bt.f3.None||b.createElement(Ta.i,{frames:Mt,data:bn,config:jt,mode:Ae.tooltip.mode,sortOrder:Ae.tooltip.sort,sync:it,timeZone:ie}),U.annotations&&b.createElement(Qo,{annotations:U.annotations,config:jt,timeZone:ie}),un?b.createElement(Ni,{data:bn,timeZone:ie,config:jt},({startAnnotating:Xt})=>b.createElement(Yo,{data:bn,config:jt,timeZone:ie,replaceVariables:Je,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(vn,An)=>{An&&Xt({coords:An.coords})}}]}]})):b.createElement(Yo,{data:bn,frames:Mt,config:jt,timeZone:ie,replaceVariables:Je,defaultItems:[]}),U.annotations&&b.createElement(cc,{visibleSeries:Su(jt,Mt),config:jt,exemplars:U.annotations,timeZone:ie}),(pt&&Ot||Tt)&&b.createElement(Vi,{config:jt,fieldConfig:Ce,onThresholdsChange:pt?Ot:void 0}),b.createElement(Co,{config:jt,onChangeTimeRange:Ve}))))};var Ml=e(36602),Af=e(87783);const Lf=({value:U,onChange:ee})=>{const ie=(0,Z.wW)(Di);(!U||U.length<1)&&(U=[""]);const Ee=()=>{ee([...U,Ml.RQ.default])},Se=Ce=>{const Ve=U.slice();Ve.splice(Ce,1),ee(Ve)},Ae=(Ce,Ve)=>{const Je=U.slice();Je[Ce]=Ve??Ml.RQ.default,Je.length===0||Je.length===1&&Je[0]===""?ee(void 0):ee(Je)};return b.createElement("div",null,U.map((Ce,Ve)=>b.createElement("div",{className:ie.wrapper,key:`${Ve}.${Ce}`},b.createElement("span",{className:ie.first},b.createElement(Af.O,{onChange:Je=>Ae(Ve,Je),includeInternal:!0,value:Ce??Ml.RQ.default})),Ve===U.length-1?b.createElement(Lr.h,{name:"plus",onClick:Ee,tooltip:"Add timezone"}):b.createElement(Lr.h,{name:"times",onClick:()=>Se(Ve),tooltip:"Remove timezone"}))))},Di=U=>({wrapper:(0,_.css)`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:(0,_.css)`
    margin-right: 8px;
    flex-grow: 2;
  `});var bd=e(60695),xl=e(39064);let Sl=null;const Bf=(U,ee,ie,Ee)=>{if(ee==="graph"&&ie.angular){const{fieldConfig:Se,options:Ae,annotations:Ce}=Uf({...ie.angular,fieldConfig:Ee,panel:U}),Ve=(0,xe.h4)().getCurrent();return Ve&&Ce?.length>0&&(Ve.annotations.list=[...Ve.annotations.list,...Ce],Sl==null&&(Sl=setTimeout(()=>{Sl=null,(0,gc.$t)().refreshTimeModel()}))),U.fieldConfig=Se,U.alert=ie.angular.alert,Ae}return wf(U),{}};function Uf(U){let ee=[];const ie=U.fieldConfig?.overrides??[],Ee=U.yaxes??[];let Se=Md(Ee[0]);U.fieldConfig?.defaults&&(Se={...U.fieldConfig?.defaults,...Se});const Ae={fill:U.dashes?"dash":"solid",dash:[U.dashLength??10,U.spaceLength??10]};if(U.aliasColors)for(const gt of Object.keys(U.aliasColors)){const Ot=U.aliasColors[gt];Ot&&ie.push({matcher:{id:Fr.mi.byName,options:gt},properties:[{id:Ba.qb.Color,value:{mode:Aa.S.Fixed,fixedColor:Ot}}]})}let Ce=!1;if(U.seriesOverrides?.length)for(const gt of U.seriesOverrides){if(!gt.alias)continue;const pt={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(gt.alias)?Fr.mi.byRegexp:Fr.mi.byName,options:gt.alias},properties:[]};let Tt;for(const Ut of Object.keys(gt)){const Mt=gt[Ut];switch(Ut){case"alias":case"$$hashKey":break;case"yaxis":if(Mt===2){const _t=Md(Ee[1]);Nf(Se,_t,pt.properties)}break;case"fill":pt.properties.push({id:"custom.fillOpacity",value:Mt*10});break;case"fillBelowTo":Ce=!0,pt.properties.push({id:"custom.fillBelowTo",value:Mt});break;case"fillGradient":Mt&&(pt.properties.push({id:"custom.fillGradient",value:"opacity"}),pt.properties.push({id:"custom.fillOpacity",value:Mt*10}));break;case"points":pt.properties.push({id:"custom.showPoints",value:Mt?Bt.Jp.Always:Bt.Jp.Never});break;case"bars":Mt?(pt.properties.push({id:"custom.drawStyle",value:Bt.l8.Bars}),pt.properties.push({id:"custom.fillOpacity",value:100})):pt.properties.push({id:"custom.drawStyle",value:Bt.l8.Line});break;case"lines":Mt?pt.properties.push({id:"custom.drawStyle",value:"line"}):pt.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":pt.properties.push({id:"custom.lineWidth",value:Mt});break;case"pointradius":pt.properties.push({id:"custom.pointSize",value:2+Mt*2});break;case"dashLength":case"spaceLength":case"dashes":switch(Tt||(Tt={fill:Ae.fill,dash:[...Ae.dash]}),Ut){case"dashLength":Tt.dash[0]=Mt;break;case"spaceLength":Tt.dash[1]=Mt;break;case"dashes":Tt.fill=Mt?"dash":"solid";break}break;case"stack":pt.properties.push({id:"custom.stacking",value:Wf(Mt)});break;case"color":pt.properties.push({id:"color",value:{fixedColor:Mt,mode:Aa.S.Fixed}});break;case"transform":pt.properties.push({id:"custom.transform",value:Mt==="negative-Y"?Bt.pR.NegativeY:Bt.pR.Constant});break;default:console.log("Ignore override migration:",gt.alias,Ut,Mt)}}Tt&&pt.properties.push({id:"custom.lineStyle",value:Tt}),pt.properties.length&&ie.push(pt)}const Ve=Se.custom??{};Ve.drawStyle=U.bars?Bt.l8.Bars:U.lines?Bt.l8.Line:Bt.l8.Points,U.points?(Ve.showPoints=Bt.Jp.Always,(0,Be.isNumber)(U.pointradius)&&(Ve.pointSize=2+U.pointradius*2)):Ve.drawStyle!==Bt.l8.Points&&(Ve.showPoints=Bt.Jp.Never),Ve.lineWidth=U.linewidth,Ae.fill!=="solid"&&(Ve.lineStyle=Ae),Ce?Ve.fillOpacity=35:(0,Be.isNumber)(U.fill)&&(Ve.fillOpacity=U.fill*10),(0,Be.isNumber)(U.fillGradient)&&U.fillGradient>0&&(Ve.gradientMode=Bt.FI.Opacity,Ve.fillOpacity=U.fillGradient*10),Ve.spanNulls=U.nullPointMode===wc.Gl.Ignore,U.steppedLine&&(Ve.lineInterpolation=Bt.KC.StepAfter),Ve.drawStyle===Bt.l8.Bars&&(Ve.fillOpacity=100),U.stack&&(Ve.stacking={mode:Bt.o0.Normal,group:Mr.r.stacking.group}),Se.custom=(0,Be.omitBy)(Ve,Be.isNil),Se.nullValueMode=U.nullPointMode;const Je={legend:{displayMode:Bt.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:Bt.f3.Single,sort:Bt.As.None}},qe=U.legend;if(qe){if(qe.show?Je.legend.displayMode=qe.alignAsTable?Bt.jK.Table:Bt.jK.List:Je.legend.showLegend=!1,qe.rightSide&&(Je.legend.placement="right"),U.legend.values){const gt=(0,Be.pickBy)(U.legend);Je.legend.calcs=xd(gt)}U.legend.sideWidth&&(Je.legend.width=U.legend.sideWidth),qe.hideZero&&ie.push(Sd(Ks.gz.allIsZero)),qe.hideEmpty&&ie.push(Sd(Ks.gz.allIsNull))}U.timeRegions?.length&&U.timeRegions.map((Ot,pt)=>({name:`T${pt+1}`,color:Ot.colorMode!=="custom"?Ot.colorMode:Ot.fillColor,line:Ot.line,fill:Ot.fill,fromDayOfWeek:Ot.fromDayOfWeek,toDayOfWeek:Ot.toDayOfWeek,from:Ot.from,to:Ot.to})).forEach((Ot,pt)=>{const Tt={datasource:{type:"datasource",uid:"grafana"},enable:!0,hide:!0,filter:{exclude:!1,ids:[U.panel.id]},iconColor:Ot.fillColor??Ot.color,name:`T${pt+1}`,target:{queryType:xl.hR.TimeRegions,refId:"Anno",timeRegion:{fromDayOfWeek:Ot.fromDayOfWeek,toDayOfWeek:Ot.toDayOfWeek,from:Ot.from,to:Ot.to,timezone:"utc"}}};Ot.fill?ee.push(Tt):Ot.line&&(Tt.iconColor=Ot.lineColor??"white",ee.push(Tt))});const it=U.tooltip;if(it&&(it.shared!==void 0&&(Je.tooltip.mode=it.shared?Bt.f3.Multi:Bt.f3.Single),it.sort!==void 0&&it.shared))switch(it.sort){case 1:Je.tooltip.sort=Bt.As.Ascending;break;case 2:Je.tooltip.sort=Bt.As.Descending;break;default:Je.tooltip.sort=Bt.As.None}if(U.thresholds&&U.thresholds.length>0){let gt=[],Ot=!1,pt=!1;const Tt=U.thresholds.sort((Mt,_t)=>Mt.value>_t.value?1:-1);for(let Mt=0;Mt<Tt.length;Mt++){const _t=Tt[Mt],an=Tt.length>Mt+1?Tt[Mt+1]:null;_t.fill&&(Ot=!0),_t.line&&(pt=!0),_t.op==="gt"&&gt.push({value:_t.value,color:Tl(_t)}),_t.op==="lt"&&(gt.length===0&&gt.push({value:-1/0,color:Tl(_t)}),an&&an.op==="gt"&&an.value>_t.value?gt.push({value:_t.value,color:"transparent"}):an&&an.op==="lt"?gt.push({value:_t.value,color:Tl(an)}):gt.push({value:_t.value,color:"transparent"}))}gt.length>0&&gt[0].value!==-1/0&&gt.unshift({color:"transparent",value:-1/0});let Ut=Ot?Bt.i3.Area:Bt.i3.Line;pt&&Ot&&(Ut=Bt.i3.LineAndArea),Se.custom.thresholdsStyle={mode:Ut},Se.thresholds={mode:bd.H.Absolute,steps:gt}}return U.xaxis&&U.xaxis.show===!1&&U.xaxis.mode==="time"&&ie.push({matcher:{id:Fr.mi.byType,options:zn.fS.time},properties:[{id:"custom.axisPlacement",value:Bt.LB.Hidden}]}),{fieldConfig:{defaults:(0,Be.omitBy)(Se,Be.isNil),overrides:ie},options:Je,annotations:ee}}function Tl(U){return U.colorMode==="critical"?"red":U.colorMode==="warning"?"orange":U.colorMode==="custom"?U.fillColor||U.lineColor:"red"}function Md(U){if(!U)return{};const ee={axisPlacement:U.show?Bt.LB.Auto:Bt.LB.Hidden};if(U.label&&(ee.axisLabel=U.label),U.logBase){const ie=U.logBase;(ie===2||ie===10)&&(ee.scaleDistribution={type:Bt.wf.Log,log:ie})}return(0,Be.omitBy)({unit:U.format,decimals:Ol(U.decimals),min:Ol(U.min),max:Ol(U.max),custom:ee},Be.isNil)}function Nf(U,ee,ie){for(const[Ae,Ce]of Object.entries(ee))Ae!=="custom"&&Ce!==U[Ae]&&ie.push({id:Ae,value:Ce});const Ee=U.custom??{},Se=ee.custom??{};for(const[Ae,Ce]of Object.entries(Se))Ce!==Ee[Ae]&&ie.push({id:`custom.${Ae}`,value:Ce})}function Ol(U){if((0,Be.isNumber)(U))return U;if((0,Be.isString)(U)){const ee=Number(U);if(!isNaN(ee))return ee}}function xd(U){const ee=[];for(const ie of Object.keys(U)){const Ee=Ks.TB.getIfExists(ie);Ee&&ee.push(Ee.id)}return ee}function wf(U){U.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(U.fieldConfig.defaults.custom.hideFrom.viz=U.fieldConfig.defaults.custom.hideFrom.graph,delete U.fieldConfig.defaults.custom.hideFrom.graph),U.fieldConfig?.overrides&&(U.fieldConfig.overrides=U.fieldConfig.overrides.map(ee=>(ee.properties=ee.properties.map(ie=>(ie.id==="custom.hideFrom"&&ie.value.graph&&(ie.value.viz=ie.value.graph,delete ie.value.graph),ie)),ee)))}function Sd(U){return{matcher:{id:Fr.mi.byValue,options:{reducer:U,op:Bt.Bd.GTE,value:0}},properties:[{id:"custom.hideFrom",value:{tooltip:!0,viz:!1,legend:!0}}]}}function Wf(U){const ee=Mr.r.stacking?.group;return{mode:U?Bt.o0.Normal:Bt.o0.None,group:(0,Be.isString)(U)?U:ee}}const Ff=new W.c(Rf).setPanelChangeHandler(Bf).useFieldConfig((0,Mr.F)(Mr.r)).setPanelOptions(U=>{ha.L(U),Pa.J(U),U.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:Lf,defaultValue:void 0})}).setSuggestionsSupplier(new bl).setDataSupport({annotations:!0,alertStates:!0});var Kf=e(26205),Vf=e(87923),Td=e(42583),Od=e(53073);const Pi={wrapper:(0,_.css)`
    height: 100%;
    overflow: scroll;
  `},Id=({data:U,options:ee})=>{const ie=(0,b.createRef)(),Ee=(0,b.useMemo)(()=>(0,Od.N)(U.series[0]),[U.series]),Se=(0,le.Z)(async()=>await(0,Kf.F)().get(U.request?.targets[0].datasource?.uid));return!U||!U.series.length||!Ee?b.createElement("div",{className:"panel-empty"},b.createElement("p",null,"No data found in response")):b.createElement("div",{className:Pi.wrapper},b.createElement("div",{ref:ie}),b.createElement(Vf.m,{dataFrames:U.series,scrollElementClass:Pi.wrapper,traceProp:Ee,queryResponse:U,datasource:Se.value,topOfViewRef:ie,topOfViewRefType:Td.l4.Panel,createSpanLink:ee.createSpanLink}))},$f=new W.c(Id);var _f=e(36085);const Rd=({data:U,timeRange:ee,timeZone:ie,width:Ee,height:Se,options:Ae,fieldConfig:Ce,replaceVariables:Ve,id:Je})=>{const{sync:qe,dataLinkPostProcessor:it}=(0,Qa.R9)(),gt=Ae.xField??U.series[0].fields.find(Tt=>Tt.type===zn.fS.number)?.name,Ot=(Tt,Ut,Mt)=>(Ut={...Ut,x:_f.Ls.get(Fr.mi.byName).get(gt)},(0,us.Rn)(Tt,Ut)),pt=(0,b.useMemo)(()=>{if(U.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:U.series};let Tt=U.series,Ut;if(Ae.xField){if(Ut=(0,Un.findFieldIndex)(Tt[0],Ae.xField),Ut==null)return{warning:"Unable to find field: "+Ae.xField,frames:U.series}}else if(Ut=Tt[0].fields.findIndex(Mt=>Mt.type===zn.fS.number),Ut===-1)return{warning:"No numeric fields found for X axis",frames:Tt};if(Ut!=null){const Mt=Tt[0].fields[Ut];if(Mt.type===zn.fS.number&&!(0,wn.lP)(Mt.values))return{warning:"Values must be in ascending order",frames:Tt}}return{frames:$i(Tt,w.config.theme2,void 0,Ut)}},[U.series,Ae.xField]);return pt.warning||!pt.frames?b.createElement(ws.Z,{panelId:Je,fieldConfig:Ce,data:U,message:pt.warning,needsNumberField:!0}):b.createElement(Li.p,{frames:pt.frames,structureRev:U.structureRev,timeRange:ee,timeZone:ie,width:Ee,height:Se,legend:Ae.legend,options:Ae,preparePlotFrame:Ot},(Tt,Ut)=>(Ut.fields.some(Mt=>!!Mt.config.links?.length)&&(Ut=Hi(Ut,pt.frames,Ve,ie,it)),b.createElement(b.Fragment,null,b.createElement(Cd.C,{config:Tt}),Ae.tooltip.mode===Bt.f3.None||b.createElement(Ta.i,{frames:pt.frames,data:Ut,config:Tt,mode:Ae.tooltip.mode,sortOrder:Ae.tooltip.sort,sync:qe,timeZone:ie}))))};class Ad{getSuggestionsForData(ee){const{dataSummary:ie}=ee;return ie.numberFieldCount<2||ie.rowCountTotal<2||ie.rowCountTotal<2?void 0:ee.getListAppender({name:Da.y.LineChart,pluginId:"trend",options:{legend:{calcs:[],displayMode:Bt.jK.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Se=>{Se.fieldConfig?.defaults.custom?.drawStyle!==Bt.l8.Bars&&(Se.fieldConfig.defaults.custom.lineWidth=Math.max(Se.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const jp=new W.c(Rd).useFieldConfig((0,Mr.F)(Mr.r,!1)).setPanelOptions(U=>{const ee=["X Axis"];U.addFieldNamePicker({path:"xField",name:"X Field",description:"An increasing numeric value",category:ee,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:ie=>ie.type===zn.fS.number}}),ha.L(U),Pa.J(U)}).setSuggestionsSupplier(new Ad),Qp=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],zf=()=>{const U=(0,Z.wW)(Hf);return b.createElement("div",{className:U.container},b.createElement("h1",{className:U.title},"Welcome to Grafana"),b.createElement("div",{className:U.help},b.createElement("h3",{className:U.helpText},"Need help?"),b.createElement("div",{className:U.helpLinks},Qp.map((ee,ie)=>b.createElement("a",{key:`${ee.label}-${ie}`,className:U.helpLink,href:`${ee.href}?utm_source=grafana_gettingstarted`},ee.label)))))},Hf=U=>({container:(0,_.css)`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${U.spacing(3)};

      ${U.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${U.breakpoints.down("sm")} {
        padding: 0 ${U.spacing(1)};
      }
    `,title:(0,_.css)`
      margin-bottom: 0;

      ${U.breakpoints.down("lg")} {
        margin-bottom: ${U.spacing(1)};
      }

      ${U.breakpoints.down("md")} {
        font-size: ${U.typography.h2.fontSize};
      }
      ${U.breakpoints.down("sm")} {
        font-size: ${U.typography.h3.fontSize};
      }
    `,help:(0,_.css)`
      display: flex;
      align-items: baseline;
    `,helpText:(0,_.css)`
      margin-right: ${U.spacing(2)};
      margin-bottom: 0;

      ${U.breakpoints.down("md")} {
        font-size: ${U.typography.h4.fontSize};
      }

      ${U.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:(0,_.css)`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:(0,_.css)`
      margin-right: ${U.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${U.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),kf=new W.c(zf).setNoPadding();var Ci=(U=>(U[U.NoData=0]="NoData",U[U.BadFrameSelection=1]="BadFrameSelection",U[U.XNotFound=2]="XNotFound",U))(Ci||{});function bi(U){return U.type===zn.fS.number}function Ld(U,ee){if(!ee||!ee.length)return{error:0};U||(U={frame:0});let ie=ee[U.frame??0];if(!ie)return{error:1};let Ee=-1;for(let Ve=0;Ve<ie.fields.length;Ve++){const Je=ie.fields[Ve];if(U.x&&U.x===(0,Wa.CZ)(Je,ie,ee)){Ee=Ve;break}if(bi(Je)&&!U.x){Ee=Ve;break}}let Se=!1;const Ae=ie.fields[Ee],Ce=[Ae];for(const Ve of ie.fields)if(Ve.type===zn.fS.time&&(Se=!0),!(Ve===Ae||!bi(Ve))){if(U.exclude){const Je=(0,Wa.CZ)(Ve,ie,ee);if(U.exclude.includes(Je))continue}Ce.push(Ve)}return{x:Ae,fields:{x:Bd(Ae),y:Il(Ae)},frame:{...ie,fields:Ce},hasData:ie.fields.length>0,hasTime:Se}}function Bd(U){return U?ee=>U===ee||!!(U.state&&U.state===ee.state):()=>!1}function Il(U){if(!U)return()=>!1;const ee=Bd(U);return ie=>!ee(ie,void 0,void 0)}const Ud=({value:U,onChange:ee,context:ie})=>{const Ee=(0,b.useMemo)(()=>ie?.data?.length?ie.data.map((Ve,Je)=>({value:Je,label:(0,Wa.nf)(Ve,Je)})):[{value:0,label:"First result"}],[ie.data]),Se=(0,b.useMemo)(()=>Ld(U,ie.data),[ie.data,U]),Ae=(0,b.useMemo)(()=>{const Ve={label:"?",value:void 0},Je={numberFields:[Ve],yFields:[],xAxis:U?.x?{label:`${U.x} (Not found)`,value:U.x}:Ve},qe=ie.data?ie.data[U?.frame??0]:void 0;if(qe){const it=Se.x?(0,Wa.CZ)(Se.x,Se.frame,ie.data):void 0;for(let gt of qe.fields)if(bi(gt)){const Ot=(0,Wa.CZ)(gt,qe,ie.data),pt={label:Ot,value:Ot};Je.numberFields.push(pt),Ve.label==="?"&&(Ve.label=`${Ot} (First)`),U?.x&&Ot===U.x&&(Je.xAxis=pt),it!==Ot&&Je.yFields.push({label:Ot,value:U?.exclude?.includes(Ot)})}}return Je},[Se,ie.data,U]),Ce=(0,Z.wW)(Gf);return ie.data?b.createElement("div",null,b.createElement(Ls.g,{label:"Data"},b.createElement(ye.Ph,{options:Ee,value:Ee.find(Ve=>Ve.value===U?.frame)??Ee[0],onChange:Ve=>{ee({...U,frame:Ve.value})}})),b.createElement(Ls.g,{label:"X Field"},b.createElement(ye.Ph,{options:Ae.numberFields,value:Ae.xAxis,onChange:Ve=>{ee({...U,x:Ve.value})}})),b.createElement(Ls.g,{label:"Y Fields"},b.createElement("div",null,Ae.yFields.map(Ve=>b.createElement("div",{key:Ve.label,className:Ce.row},b.createElement(Lr.h,{name:Ve.value?"eye-slash":"eye",onClick:()=>{const Je=U?.exclude?[...U.exclude]:[];let qe=Je.indexOf(Ve.label);qe<0?Je.push(Ve.label):Je.splice(qe,1),ee({...U,exclude:Je})},tooltip:Ve.value?"Disable":"Enable"}),Ve.label))))):b.createElement("div",null,"No data...")},Gf=U=>({sorter:(0,_.css)`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:(0,_.css)`
    padding: ${U.spacing(.5,1)};
    border-radius: ${U.shape.radius.default};
    background: ${U.colors.background.secondary};
    min-height: ${U.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${U.components.input.borderColor};
  `});var jf=e(93114),Nd=e(473),Rl=(U=>(U.Auto="auto",U.Manual="manual",U))(Rl||{}),Or=(U=>(U.Lines="lines",U.Points="points",U.PointsAndLines="points+lines",U))(Or||{});const Yp={exclude:[]},Al={label:Bt.Jp.Auto,show:"points"},Zp={series:[]},Qf=({value:U,onChange:ee,context:ie})=>{const[Ee,Se]=(0,b.useState)(0),Ae=(0,Z.wW)(Yf),Ce=(it,gt,Ot)=>{ee(U.map((pt,Tt)=>Tt===gt?{...pt,[Ot]:it}:pt))},Ve=()=>{ee([...U,{pointColor:{},pointSize:Al.pointSize}]),Se(U.length)};(0,b.useEffect)(()=>{U?.length||Ve()},[]);const Je=it=>{ee(U.filter((gt,Ot)=>Ot!==it))},qe=it=>it===Ee?`${Ae.row} ${Ae.sel}`:Ae.row;return b.createElement(b.Fragment,null,b.createElement(ae.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:Ve,className:Ae.marginBot},"Add series"),b.createElement("div",{className:Ae.marginBot},U.map((it,gt)=>b.createElement("div",{key:`series/${gt}`,className:qe(gt),onMouseDown:()=>Se(gt)},b.createElement(jf.X,{name:it.name??`Series ${gt+1}`,onChange:Ot=>Ce(Ot,gt,"name")}),b.createElement(Lr.h,{name:"trash-alt",title:"remove",className:(0,_.cx)(Ae.actionIcon),onClick:()=>Je(gt),tooltip:"Delete series"})))),Ee>=0&&U[Ee]&&b.createElement(b.Fragment,null,b.createElement("div",{key:`series/${Ee}`},b.createElement(Ls.g,{label:"X Field"},b.createElement(ll.b,{value:U[Ee].x??"",context:ie,onChange:it=>Ce(it,Ee,"x"),item:{}})),b.createElement(Ls.g,{label:"Y Field"},b.createElement(ll.b,{value:U[Ee].y??"",context:ie,onChange:it=>Ce(it,Ee,"y"),item:{}})),b.createElement(Ls.g,{label:"Point color"},b.createElement(Nd.Lm,{value:U[Ee].pointColor,context:ie,onChange:it=>Ce(it,Ee,"pointColor"),item:{}})),b.createElement(Ls.g,{label:"Point size"},b.createElement(Nd.cL,{value:U[Ee].pointSize,context:ie,onChange:it=>Ce(it,Ee,"pointSize"),item:{settings:{min:1,max:100}}})))))},Yf=U=>({marginBot:(0,_.css)`
    margin-bottom: 20px;
  `,row:(0,_.css)`
    padding: ${U.spacing(.5,1)};
    border-radius: ${U.shape.radius.default};
    background: ${U.colors.background.secondary};
    min-height: ${U.spacing(4)};
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${U.components.input.borderColor};
    &:hover {
      border: 1px solid ${U.components.input.borderHover};
    }
  `,sel:(0,_.css)`
    border: 1px solid ${U.colors.primary.border};
    &:hover {
      border: 1px solid ${U.colors.primary.border};
    }
  `,actionIcon:(0,_.css)`
    color: ${U.colors.text.secondary};
    &:hover {
      color: ${U.colors.text};
    }
  `});var wd=e(7763);const Zf=({allSeries:U,data:ee,manualSeriesConfigs:ie,seriesMapping:Ee,rowIndex:Se,hoveredPointIndex:Ae,options:Ce})=>{const Ve=(0,Z.wW)(Jf);if(!U||Se==null)return null;const Je=U[Ae],qe=Je.frame(ee),it=Je.x(qe),gt=Je.y(qe);let Ot;if(gt.getLinks){const Mt=gt.values[Se],_t=gt.display?gt.display(Mt):{text:`${Mt}`,numeric:+Mt};Ot=gt.getLinks({calculatedValue:_t,valueRowIndex:Se}).map(an=>(an.title||(an.title=(0,al.Rb)(an.href)),an))}let pt=qe.fields.filter(Mt=>Mt!==it&&Mt!==gt),Tt=null,Ut=null;if(Ee===Rl.Manual&&ie){const Mt=ie[Ae]?.pointColor?.field??"",_t=ie[Ae]?.pointSize?.field??"",an=Mt?(0,Un.findField)(qe,Mt):void 0,un=_t?(0,Un.findField)(qe,_t):void 0;Ut={colorFacetFieldName:Mt,sizeFacetFieldName:_t,colorFacetValue:an?.values[Se],sizeFacetValue:un?.values[Se]},pt=pt.filter(jt=>jt!==an&&jt!==un)}return Tt={name:(0,Wa.CZ)(gt,qe),val:gt.values[Se],field:gt,color:Je.pointColor(qe)},b.createElement(b.Fragment,null,b.createElement("table",{className:Ve.infoWrap},b.createElement("tr",null,b.createElement("th",{colSpan:2,style:{backgroundColor:Tt.color}})),b.createElement("tbody",null,b.createElement("tr",null,b.createElement("th",null,(0,Wa.CZ)(it,qe)),b.createElement("td",null,Ll(it,it.values[Se]))),b.createElement("tr",null,b.createElement("th",null,Tt.name,":"),b.createElement("td",null,Ll(Tt.field,Tt.val))),Ut!==null&&Ut.colorFacetFieldName&&b.createElement("tr",null,b.createElement("th",null,Ut.colorFacetFieldName,":"),b.createElement("td",null,Ut.colorFacetValue)),Ut!==null&&Ut.sizeFacetFieldName&&b.createElement("tr",null,b.createElement("th",null,Ut.sizeFacetFieldName,":"),b.createElement("td",null,Ut.sizeFacetValue)),pt.map((Mt,_t)=>b.createElement("tr",{key:_t},b.createElement("th",null,(0,Wa.CZ)(Mt,qe),":"),b.createElement("td",null,Ll(Mt,Mt.values[Se])))),Ot&&Ot.length>0&&b.createElement("tr",null,b.createElement("td",{colSpan:2},b.createElement(br.wc,null,Ot.map((Mt,_t)=>b.createElement(ae.Qj,{key:_t,icon:"external-link-alt",target:Mt.target,href:Mt.href,onClick:Mt.onClick,fill:"text",style:{width:"100%"}},Mt.title))))))))};function Ll(U,ee){return U.display?(0,fn.zc)(U.display(ee)):`${ee}`}const Jf=U=>({infoWrap:(0,_.css)`
    padding: 8px;
    width: 100%;
    th {
      font-weight: ${U.typography.fontWeightMedium};
      padding: ${U.spacing(.25,2)};
    }
  `,highlight:(0,_.css)`
    background: ${U.colors.action.hover};
  `,xVal:(0,_.css)`
    font-weight: ${U.typography.fontWeightBold};
  `,icon:(0,_.css)`
    margin-right: ${U.spacing(1)};
    vertical-align: middle;
  `});var Wd=e(73310);const Fd=5;function Xf(U){return{standardOptions:{[Ba.qb.Min]:{hideFromDefaults:!0},[Ba.qb.Max]:{hideFromDefaults:!0},[Ba.qb.Unit]:{hideFromDefaults:!0},[Ba.qb.Decimals]:{hideFromDefaults:!0},[Ba.qb.NoValue]:{hideFromDefaults:!0},[Ba.qb.DisplayName]:{hideFromDefaults:!0},[Ba.qb.Thresholds]:{hideFromDefaults:!0},[Ba.qb.Mappings]:{hideFromDefaults:!0},[Ba.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Aa.S.PaletteClassic}}},useCustomConfig:ee=>{ee.addRadio({path:"show",name:"Show",defaultValue:U.show,settings:{options:[{label:"Points",value:Or.Points},{label:"Lines",value:Or.Lines},{label:"Both",value:Or.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:U.pointSize?.fixed??Fd,settings:{min:1,max:100,step:1},showIf:ie=>ie.show!==Or.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:ie=>ie.show!==Or.Points,editor:Wd.j,override:Wd.j,process:Zs.kG,shouldApply:ie=>ie.type===zn.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:U.lineWidth,settings:{min:0,max:10,step:1},showIf:ie=>ie.show!==Or.Points}),kn.r(ee,U),ma.B(ee)}}}function qf(U,ee,ie,Ee,Se,Ae){let Ce,Ve;try{Ce=eg(U,ee()),Ve=tg(ee,Ce,ie,Ee,Se,Ae)}catch(Je){let qe="Unknown error in prepScatter";return typeof Je=="string"?qe=Je:Je instanceof Error&&(qe=Je.message),{error:qe,series:[]}}return{series:Ce,builder:Ve}}function Kd(U,ee,ie,Ee,Se,Ae){const Ce=ee[ie],Ve=Ce.fields[Se];let Je=Ve.state??{};Je.seriesIndex=U,Ve.state=Je;let qe=Ae.pointColorFixed?w.config.theme2.visualization.getColorByName(Ae.pointColorFixed):(0,xn.YO)(Ve,w.config.theme2).color,it=()=>qe;const gt={...Al,...Ve.config.custom};let Ot=xn.WO.get(Aa.S.PaletteClassic);if(Ae.pointColorIndex){const _t=ee[ie].fields[Ae.pointColorIndex];if(_t)if(Ot=(0,xn.fD)(Ve),Ot.isByValue){const an=Ae.pointColorIndex;it=un=>{const jt=un.fields[an];return jt.state?.range&&(jt.state.range=void 0),jt.display=(0,yn.U)({field:jt,theme:w.config.theme2}),jt.values.map(bn=>jt.display(bn).color)}}else qe=Ot.getCalculator(_t,w.config.theme2)(_t.values[0],1),it=()=>qe}let pt=Ae.pointSizeConfig,Tt=Ae.pointSizeConfig?.fixed??Ve.config.custom?.pointSize?.fixed??Fd,Ut=()=>Tt;Ae.pointSizeIndex?Ut=_t=>{const an=(0,Un.getScaledDimensionForField)(_t.fields[Ae.pointSizeIndex],Ae.pointSizeConfig,Bt.B5.Quad),un=Array(_t.length);for(let jt=0;jt<_t.length;jt++)un[jt]=an.get(jt);return un}:pt={fixed:Tt,min:Tt,max:Tt};const Mt=(0,Wa.CZ)(Ve,Ce,ee);return{name:Mt,frame:_t=>_t[ie],x:_t=>_t.fields[Ee],y:_t=>_t.fields[Se],legend:()=>[{label:Mt,color:qe,getItemKey:()=>Mt,yAxis:Se}],showLine:gt.show!==Or.Points,lineWidth:gt.lineWidth??2,lineStyle:gt.lineStyle,lineColor:()=>qe,showPoints:gt.show!==Or.Lines?Bt.Jp.Always:Bt.Jp.Never,pointSize:Ut,pointColor:it,pointSymbol:(_t,an)=>"circle",label:Bt.Jp.Never,labelValue:()=>"",show:!Ce.fields[Se].config.custom.hideFrom?.viz,hints:{pointSize:pt,pointColor:{mode:Ot}}}}function eg(U,ee){let ie=0;if(!ee.length)throw"Missing data";if(U.seriesMapping==="manual"){if(!U.series?.length)throw"Missing series config";const Je=[];for(const qe of U.series){if(!qe?.x)throw"Select X dimension";if(!qe?.y)throw"Select Y dimension";for(let it=0;it<ee.length;it++){const gt=ee[it],Ot=(0,Un.findFieldIndex)(gt,qe.x);if(Ot!=null){const pt=(0,Un.findFieldIndex)(gt,qe.y);if(pt==null)throw"Y must be in the same frame as X";const Tt={pointColorFixed:qe.pointColor?.fixed,pointColorIndex:(0,Un.findFieldIndex)(gt,qe.pointColor?.field),pointSizeConfig:qe.pointSize,pointSizeIndex:(0,Un.findFieldIndex)(gt,qe.pointSize?.field)};Je.push(Kd(ie++,ee,it,Ot,pt,Tt))}}}return Je}const Ee=U.dims??{},Se=Ee.frame??0,Ae=ee[Se],Ce=[];let Ve=(0,Un.findFieldIndex)(Ae,Ee.x);for(let Je=0;Je<Ae.fields.length;Je++)if(bi(Ae.fields[Je])){if(Ve==null||Je===Ve){Ve=Je;continue}if(Ee.exclude&&Ee.exclude.includes((0,Wa.CZ)(Ae.fields[Je],Ae,ee)))continue;Ce.push(Je)}if(Ve==null)throw"Missing X dimension";if(!Ce.length)throw"No Y values";return Ce.map(Je=>Kd(ie++,ee,Se,Ve,Je,{}))}const tg=(U,ee,ie,Ee,Se,Ae)=>{let Ce,Ve;function Je(jt){return(Xt,vn,An,Nn)=>(rn.Z.orient(Xt,vn,(In,_n,Wn,la,Hn,Sn,na,pa,_a,Za,Va,ka,qn,Bn,Zn)=>{const ea=rn.Z.pxRatio,fa=ee[vn-1];let Oa=Xt.data[vn],Ja=fa.showLine,Ia=fa.showPoints===Bt.Jp.Always;!Ia&&fa.showPoints===Bt.Jp.Auto&&(Ia=Oa[0].length<1e3),!Ia&&!Ja&&(Ja=!0);let On=1;Xt.ctx.save(),Xt.ctx.rect(Xt.bbox.left,Xt.bbox.top,Xt.bbox.width,Xt.bbox.height),Xt.ctx.clip(),Xt.ctx.fillStyle=In.fill(),Xt.ctx.strokeStyle=In.stroke(),Xt.ctx.lineWidth=On;let Ln=2*Math.PI,Kn=la.key,da=Hn.key,aa=fa.hints.pointSize;const Ca=fa.hints.pointColor.mode.isByValue;let xa=(aa.max??aa.fixed)*ea,hs=Xt.posToVal(-xa/2,Kn),cs=Xt.posToVal(Xt.bbox.width/ea+xa/2,Kn),dr=Xt.posToVal(Xt.bbox.height/ea+xa/2,da),Ts=Xt.posToVal(-xa/2,da),Vr=jt.disp.size.values(Xt,vn),tr=jt.disp.color.values(Xt,vn),uo=jt.disp.color.alpha,js=Ja?new Path2D:null,nr=null;for(let Rs=0;Rs<Oa[0].length;Rs++){let as=Oa[0][Rs],Er=Oa[1][Rs],yr=Vr[Rs]*ea;if(as>=hs&&as<=cs&&Er>=dr&&Er<=Ts){let mo=Sn(as,la,Za,pa),Si=na(Er,Hn,Va,_a);Ja&&js.lineTo(mo,Si),Ia&&(Xt.ctx.moveTo(mo+yr/2,Si),Xt.ctx.beginPath(),Xt.ctx.arc(mo,Si,yr/2,0,Ln),Ca&&tr[Rs]!==nr&&(nr=tr[Rs],Xt.ctx.fillStyle=(0,ya.alpha)(nr,uo),Xt.ctx.strokeStyle=nr),Xt.ctx.fill(),Xt.ctx.stroke(),jt.each(Xt,vn,Rs,mo-yr/2-On/2,Si-yr/2-On/2,yr+On,yr+On))}}if(Ja){let Rs=fa.frame(U());Xt.ctx.strokeStyle=fa.lineColor(Rs),Xt.ctx.lineWidth=fa.lineWidth*ea;const{lineStyle:as}=fa;as&&as.fill!=="solid"&&(as.fill==="dot"&&(Xt.ctx.lineCap="round"),Xt.ctx.setLineDash(as.dash??[10,10])),Xt.ctx.stroke(js)}Xt.ctx.restore()}),null)}let qe=Je({disp:{size:{values:(jt,bn)=>jt.data[bn][2]},color:{values:(jt,bn)=>jt.data[bn][3],alpha:.5}},each:(jt,bn,Xt,vn,An,Nn,In)=>{vn-=jt.bbox.left,An-=jt.bbox.top,Ce.add({x:vn,y:An,w:Nn,h:In,sidx:bn,didx:Xt})}});const it=new Ea.U;it.setCursor({drag:{setScale:!0},dataIdx:(jt,bn)=>{if(bn===1){const Xt=rn.Z.pxRatio;Ve=null;let vn=1/0,An=jt.cursor.left*Xt,Nn=jt.cursor.top*Xt;Ce.get(An,Nn,1,1,In=>{if((0,ps.Pn)(An,Nn,In.x,In.y,In.x+In.w,In.y+In.h)){let _n=In.x+In.w/2,Wn=In.y+In.h/2,la=_n-An,Hn=Wn-Nn,Sn=Math.sqrt(la**2+Hn**2);Sn<=In.w/2&&Sn<=vn&&(vn=Sn,Ve=In)}})}return Ve&&bn===Ve.sidx?Ve.didx:null},points:{size:(jt,bn)=>Ve&&bn===Ve.sidx?Ve.w/rn.Z.pxRatio:0,fill:(jt,bn)=>"rgba(255,255,255,0.4)"}});const gt=()=>{Ae.current&&(Ee(void 0),Se&&Se())};let Ot=null;it.addHook("init",(jt,bn)=>{jt.over.style.overflow="hidden",Ot=jt.root.parentElement,Se&&Ot?.addEventListener("click",Se)}),it.addHook("destroy",jt=>{Se&&(Ot?.removeEventListener("click",Se),gt())});let pt;it.addHook("syncRect",(jt,bn)=>{pt=bn}),it.addHook("setLegend",jt=>{if(jt.cursor.idxs!=null)for(let bn=0;bn<jt.cursor.idxs.length;bn++){const Xt=jt.cursor.idxs[bn];if(Xt!=null&&!Ae.current){Ee({scatterIndex:bn-1,xIndex:Xt,pageX:pt.left+jt.cursor.left,pageY:pt.top+jt.cursor.top});return}}Ae.current||Ee(void 0)}),it.addHook("drawClear",jt=>{gt(),Ce=Ce||new ps.lW(0,0,jt.bbox.width,jt.bbox.height),Ce.clear(),jt.series.forEach((bn,Xt)=>{Xt>0&&(bn._paths=null)})}),it.setMode(2);const Tt=U();let Ut=ee[0].x(ee[0].frame(Tt)),Mt=Ut.config,_t=Mt.custom,an=_t?.scaleDistribution;it.addScale({scaleKey:"x",isTime:!1,orientation:Bt.wN.Horizontal,direction:Bt.bQ.Right,distribution:an?.type,log:an?.log,linearThreshold:an?.linearThreshold,min:Mt.min,max:Mt.max,softMin:_t?.axisSoftMin,softMax:_t?.axisSoftMax,centeredZero:_t?.axisCenteredZero,decimals:Mt.decimals});let un=_t.axisLabel;return it.addAxis({scaleKey:"x",placement:_t?.axisPlacement!==Bt.LB.Hidden?Bt.LB.Bottom:Bt.LB.Hidden,show:_t?.axisPlacement!==Bt.LB.Hidden,grid:{show:_t?.axisGridShow},border:{show:_t?.axisBorderShow},theme:ie,label:un==null||un===""?(0,Wa.CZ)(Ut,ee[0].frame(Tt),Tt):un,formatValue:(jt,bn)=>(0,fn.zc)(Ut.display(jt,bn))}),ee.forEach((jt,bn)=>{let Xt=jt.frame(Tt),vn=jt.y(Xt);const An=jt.lineColor(Xt),Nn=ag(Xt,jt.pointColor);let In=vn.config.unit??"y",_n=vn.config,Wn=_n.custom,la=Wn?.scaleDistribution;it.addScale({scaleKey:In,orientation:Bt.wN.Vertical,direction:Bt.bQ.Up,distribution:la?.type,log:la?.log,linearThreshold:la?.linearThreshold,min:_n.min,max:_n.max,softMin:Wn?.axisSoftMin,softMax:Wn?.axisSoftMax,centeredZero:Wn?.axisCenteredZero,decimals:_n.decimals});let Hn=Wn?.axisLabel;it.addAxis({scaleKey:In,theme:ie,placement:Wn?.axisPlacement===Bt.LB.Auto?Bt.LB.Left:Wn?.axisPlacement,show:Wn?.axisPlacement!==Bt.LB.Hidden,grid:{show:Wn?.axisGridShow},border:{show:Wn?.axisBorderShow},size:Wn?.axisWidth,label:Hn==null||Hn===""?(0,Wa.CZ)(vn,ee[bn].frame(Tt),Tt):Hn,formatValue:(Sn,na)=>(0,fn.zc)(vn.display(Sn,na))}),it.addSeries({facets:[{scale:"x",auto:!0},{scale:In,auto:!0}],pathBuilder:qe,theme:ie,scaleKey:"",lineColor:An,fillColor:(0,ya.alpha)(Nn,.5),show:!Wn.hideFrom?.viz})}),it};function Vd(U,ee,ie){return U.error||!ee.length?[null]:[null,...U.series.map((Ee,Se)=>{const Ae=Ee.frame(ee);let Ce;const Ve=Ee.pointColor(Ae);return Array.isArray(Ve)?Ce=Ve:Ce=Array(Ae.length).fill(Ve),[Ee.x(Ae).values,Ee.y(Ae).values,ng(Ae,Ee.pointSize),Ce]})]}function ng(U,ee){const ie=ee(U);return Array.isArray(ie)?ie:Array(U.length).fill(ie)}function ag(U,ee){const ie=ee(U);return Array.isArray(ie)?ie[0]:ie}const $d=10,sg=U=>{const[ee,ie]=(0,b.useState)(),[Ee,Se]=(0,b.useState)([]),[Ae,Ce]=(0,b.useState)(),[Ve,Je]=(0,b.useState)(),[qe,it]=(0,b.useState)(),[gt,Ot]=(0,b.useState)(!1),pt=(0,b.useRef)(!1),Tt=(0,wd.Z)(U.options),Ut=(0,wd.Z)(U.data),Mt=()=>{pt.current=!1,Ot(!1),an(void 0)},_t=()=>{pt.current=!pt.current,Ot(pt.current)},an=Xt=>{it(Xt)},un=(0,b.useCallback)(()=>{const Xt=()=>U.data.series,vn=qf(U.options,Xt,w.config.theme2,an,_t,pt);vn.error?ie(vn.error):vn.series.length&&U.data.series&&(Ce(vn.builder),Se(vn.series),Je(()=>Vd(vn,U.data.series)),ie(void 0))},[U.data.series,U.options]),jt=(0,b.useCallback)(()=>{Je(()=>Vd({error:ee,series:Ee},U.data.series))},[U.data.series,ee,Ee]);(0,b.useEffect)(()=>{Tt!==U.options||Ut?.structureRev!==U.data.structureRev?un():Ut?.series!==U.data.series&&jt()},[U]);const bn=()=>{const Xt=[],vn=In=>In==null?"-":In.toFixed(1),An=w.config.theme2;for(let In=0;In<Ee.length;In++){const _n=Ee[In],Wn=_n.frame(U.data.series);if(Wn)for(const la of _n.legend())la.getDisplayValues=()=>{const Hn=U.options.legend.calcs;if(!Hn?.length)return[];const Sn=_n.y(Wn),na=Sn.display??vn;let pa=null;const _a=(0,Ks.Kx)({field:Sn,reducers:Hn});return Hn.map(Za=>{const Va=Ks.TB.get(Za);let ka=na;return Va.id===Ks.gz.diffperc&&(ka=(0,yn.U)({field:{...Sn,config:{...Sn.config,unit:"percent"}},theme:An})),(Va.id===Ks.gz.count||Va.id===Ks.gz.changeCount||Va.id===Ks.gz.distinctCount)&&(pa||(pa=(0,yn.U)({field:{...Sn,config:{...Sn.config,unit:"none"}},theme:An})),ka=pa),{...ka(_a[Za]),title:Va.name,description:Va.description}})},la.disabled=!(_n.show??!0),U.options.seriesMapping===Rl.Manual&&(la.label=U.options.series?.[In]?.name??`Series ${In+1}`),Xt.push(la)}if(!U.options.legend.showLegend)return null;const Nn={flexStart:(0,_.css)`
        div {
          justify-content: flex-start !important;
        }
      `};return b.createElement(Xs.AY.Legend,{placement:U.options.legend.placement,width:U.options.legend.width},b.createElement(_r.l,{className:Nn.flexStart,placement:U.options.legend.placement,items:Xt,displayMode:U.options.legend.displayMode}))};return ee||!Ae||!Ve?b.createElement("div",{className:"panel-empty"},b.createElement("p",null,ee)):b.createElement(b.Fragment,null,b.createElement(Xs.AY,{width:U.width,height:U.height,legend:bn()},(Xt,vn)=>b.createElement(Ac.N,{config:Ae,data:Ve,width:Xt,height:vn})),b.createElement(Ws.h_,null,qe&&U.options.tooltip.mode!==Bt.f3.None&&b.createElement(rr.S,{position:{x:qe.pageX,y:qe.pageY},offset:{x:$d,y:$d},allowPointerEvents:pt.current},gt&&b.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},b.createElement(Et.P,{onClick:Mt,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),b.createElement(Zf,{options:U.options.tooltip,allSeries:Ee,manualSeriesConfigs:U.options.series,seriesMapping:U.options.seriesMapping,rowIndex:qe.xIndex,hoveredPointIndex:qe.scatterIndex,data:U.data.series}))))},rg=new W.c(sg).useFieldConfig(Xf(Al)).setPanelOptions(U=>{U.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto",description:"No changes to saved model since 8.0"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:Ud,showIf:ee=>ee.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:Qf,showIf:ee=>ee.seriesMapping==="manual"}),ha.L(U),Pa.J(U)}),og={"core:plugin/graphite":async()=>await e.e(7494).then(e.bind(e,92741)),"core:plugin/cloudwatch":async()=>await Promise.all([e.e(7275),e.e(8831)]).then(e.bind(e,51595)),"core:plugin/dashboard":async()=>await e.e(1080).then(e.bind(e,31080)),"core:plugin/elasticsearch":async()=>await Promise.all([e.e(1300),e.e(9897)]).then(e.bind(e,51300)),"core:plugin/opentsdb":async()=>await e.e(3168).then(e.bind(e,82367)),"core:plugin/grafana":async()=>await e.e(7537).then(e.bind(e,69808)),"core:plugin/influxdb":async()=>await Promise.all([e.e(4755),e.e(8873),e.e(5783)]).then(e.bind(e,19007)),"core:plugin/loki":async()=>await Promise.all([e.e(1569),e.e(829),e.e(6934),e.e(1598)]).then(e.bind(e,46934)),"core:plugin/jaeger":async()=>await e.e(890).then(e.bind(e,99330)),"core:plugin/zipkin":async()=>await e.e(4023).then(e.bind(e,62969)),"core:plugin/mixed":async()=>await e.e(2001).then(e.bind(e,15768)),"core:plugin/mysql":async()=>await Promise.all([e.e(4755),e.e(4251)]).then(e.bind(e,469)),"core:plugin/postgres":async()=>await Promise.all([e.e(4755),e.e(534)]).then(e.bind(e,67711)),"core:plugin/mssql":async()=>await Promise.all([e.e(4755),e.e(5032)]).then(e.bind(e,72792)),"core:plugin/prometheus":async()=>await Promise.all([e.e(829),e.e(7004)]).then(e.bind(e,58919)),"core:plugin/grafana-testdata-datasource":async()=>await e.e(319).then(e.bind(e,75118)),"core:plugin/cloud-monitoring":async()=>await Promise.all([e.e(2231),e.e(9868),e.e(3549)]).then(e.bind(e,49868)),"core:plugin/azuremonitor":async()=>await Promise.all([e.e(5422),e.e(2910),e.e(2364)]).then(e.bind(e,42910)),"core:plugin/tempo":async()=>await Promise.all([e.e(5254),e.e(295)]).then(e.bind(e,5254)),"core:plugin/alertmanager":async()=>await Promise.all([e.e(5422),e.e(6795)]).then(e.bind(e,63805)),"core:plugin/grafana-pyroscope-datasource":async()=>await e.e(8693).then(e.bind(e,31479)),"core:plugin/parca":async()=>await e.e(2015).then(e.bind(e,70001)),"core:plugin/text":M,"core:plugin/timeseries":P,"core:plugin/trend":S,"core:plugin/state-timeline":v,"core:plugin/status-history":C,"core:plugin/candlestick":g,"core:plugin/graph":async()=>await Promise.all([e.e(8342),e.e(1260)]).then(e.bind(e,12634)),"core:plugin/xychart":T,"core:plugin/geomap":async()=>await Promise.all([e.e(5005),e.e(8096)]).then(e.bind(e,79644)),"core:plugin/canvas":async()=>await Promise.all([e.e(7751),e.e(3330)]).then(e.bind(e,98008)),"core:plugin/dashlist":m,"core:plugin/alertlist":a,"core:plugin/annolist":l,"core:plugin/heatmap":async()=>await e.e(6987).then(e.bind(e,14121)),"core:plugin/table":D,"core:plugin/table-old":async()=>await e.e(6784).then(e.bind(e,61228)),"core:plugin/news":h,"core:plugin/live":E,"core:plugin/stat":tf,"core:plugin/datagrid":d,"core:plugin/debug":u,"core:plugin/flamegraph":i,"core:plugin/gettingstarted":f,"core:plugin/gauge":gm,"core:plugin/piechart":s,"core:plugin/bargauge":o,"core:plugin/barchart":r,"core:plugin/logs":p,"core:plugin/traces":x,"core:plugin/welcome":I,"core:plugin/nodeGraph":y,"core:plugin/histogram":c,"core:plugin/alertGroups":n};var Bl=e(12700),ig=e(76889),lg=e(39228),cg=e(20463),dg=e(6033),ug=e.n(dg),mg=e(52291),fg=e.n(mg),gg=e(10963),_d=e.n(gg),pg=e(49065),hg=e(66883),vg=e(89772),Eg=e(17716),yg=e(13196),Dg=e(44722),Pg=e(16919),Cg=e(90174),bg=e(20399),Mg=e(76485),zd=e(19661),xh=e(89377),Sh=e(4027),Th=e(59554),Oh=e(65103),Ih=e(85095),Rh=e(28844),Ah=e(26189),Lh=e(47825),Bh=e(7540),xg=e(9744),Sg=e(90354),Tg=e(41730),Og=e(94162),Hd=e(24796),Ig=e(57804),Rg=e(8741),Ag=e(38533);const Fo=Tg;Fo.PanelPlugin=W.c,Fo.DataSourcePlugin=O.hf,Fo.AppPlugin=A.k8,Fo.DataSourceApi=O.MF;const Lg=["jquery.flot.crosshair","jquery.flot.events","jquery.flot.fillbelow","jquery.flot.gauge","jquery.flot.pie","jquery.flot.selection","jquery.flot.stack","jquery.flot.stackpercent","jquery.flot.time","jquery.flot"].reduce((U,ee)=>({...U,[ee]:{fakeDep:1}}),{}),Bg={"@emotion/css":_,"@emotion/react":ig,"@grafana/data":xg,"@grafana/runtime":Sg,"@grafana/slate-react":zd.ZP,"@grafana/ui":Fo,"app/core/app_events":{default:Sr.h$,__useDefault:!0},"app/core/config":{default:Zt.default,__useDefault:!0},"app/core/core":{appEvents:Sr.h$,contextSrv:Sr.Vt},"app/core/services/backend_srv":{BackendSrv:Nr.y$,getBackendSrv:Nr.i},"app/core/table_model":{default:Og.Z,__useDefault:!0},"app/core/time_series":{default:Hd.Z,__useDefault:!0},"app/core/time_series2":{default:Hd.Z,__useDefault:!0},"app/core/utils/datemath":X,"app/core/utils/flatten":Ig,"app/core/utils/kbn":{default:Rg.Z,__useDefault:!0},"app/core/utils/ticks":Ag,"app/features/dashboard/impression_store":{impressions:fc.Z},d3:lg,emotion:_,i18next:cg,jquery:{default:ug(),__useDefault:!0},...Lg,lodash:{default:Le(),__useDefault:!0},moment:{default:fg(),__useDefault:!0},prismjs:_d(),react:b,"react-dom":pg,"react-inlinesvg":hg,"react-redux":vg,"react-router-dom":Eg,"react-router":yg,redux:Dg,rxjs:Pg,"rxjs/operators":Cg,slate:bg.ZP,"slate-plain-serializer":Mg.Z,"slate-react":zd.ZP};function Ko({url:U,source:ee,transformSourceMapURL:ie=!1,transformAssets:Ee=!0}){const Se=U.split("/public/plugins/"),Ae=Se[0],Ce=Se[1].split("/")[0];let Ve=ee;return Ee&&(Ve=Ve.replace(/(\/?)(public\/plugins)/g,`${Ae}/$2`),Ve=Ve.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${Ae}/public/$2$3`)),ie&&(Ve=Ve.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${Ae}/public/plugins/${Ce}/$2.map`)),Ve}var Mi=e(86118),Vo=e(37860);async function Ug(U,ee,ie){const Ee=await U(ee,ie),Se=Ee.headers.get("content-type")||"";if(Mi.Nr.test(Se)){const Ae=await Ee.text();let Ce=Ae;if(Mi.YB.test(Ce)&&(Ce=Fg(Ae)),(0,Vo.g)(Ee.url)){const Ve=Ko({url:Ee.url,source:Ce});return new Response(new Blob([Ve],{type:"text/javascript"}))}return new Response(new Blob([Ce],{type:"text/javascript"}))}return Ee}function Ng(U,ee,ie){const Ee=ee.endsWith("module.js")&&!(0,Vo.g)(ee);try{const Se=U.apply(this,[ee,ie]),Ae=Wg(Se);return Ee?(0,Bl.u0)(Ae):Ae}catch{return Mi.xm.test(ee)?`${w.config.appSubUrl??""}/public/${ee}`:(console.log(`SystemJS: failed to resolve '${ee}'`),ee)}}function wg(U,ee){if(ee.endsWith(".css")&&!U){const Ee=B.i3.get(ee)?.default;Ee&&(document.adoptedStyleSheets=[...document.adoptedStyleSheets,Ee])}}function Wg(U){return U.startsWith(`${Mi.OY}:`)?U:(U.endsWith("!")&&(U=U.slice(0,-1)),["css","js","json","wasm"].some(Ee=>U.endsWith(Ee))?U:U+".js")}function Fg(U){return`(function(define) {
  ${U}
})(window.__grafana_amd_define);`}var Kg=e(36525),Ul=e(54538),Vg=e(21712),$g=e(33558),kd=e(11574);function _g(U){const ee=new URL(window.location.href),ie=new URL(U);return ee.host===ie.host}async function zg(U,ee,ie){let Ee="";if(_g(U)?(Ee=await(await fetch(U)).text(),Ee=Ko({url:U,source:Ee,transformSourceMapURL:!0,transformAssets:!1})):(0,Vo.g)(U)&&(Ee=await(await fetch(U)).text(),Ee=Ko({url:U,source:Ee,transformSourceMapURL:!0,transformAssets:!0})),Ee.length===0)throw new Error("Only same domain scripts are allowed in sandboxed plugins");Ee=Gd(Ee),ie.evaluate(Ee)}async function Hg(U){if((0,Vo.g)(U.module)){const ee=U.module;let Ee=await(await fetch(ee)).text();return Ee=Ko({url:ee,source:Ee,transformSourceMapURL:!0,transformAssets:!0}),Ee}else{const ee=(0,Bl.u0)(U.module);let Ee=await(await fetch(ee)).text();return Ee=Ko({url:ee,source:Ee,transformSourceMapURL:!0,transformAssets:!1}),Ee=Gd(Ee),Ee}}function Gd(U){return U.replace(/window\.location/gi,"window.locationSandbox")}function kg(U){U.evaluate(`${kd.X.toString()};${kd.X.name}()`)}const Kr=["iframe"];var jd=e(27937);const Qd=!!w.config.featureToggles.frontendSandboxMonitorOnly;function Gg(U){return!!U&&typeof U=="object"&&U?.hasOwnProperty("plugin")}function Uh(U){throw new Error(`Unexpected object: ${U}. This should never happen.`)}function jg(U){return U instanceof b.Component}function hr(U,ee){ee={...ee,source:"sandbox",monitorOnly:String(Qd)},(0,Ul.KE)(U,ee)}function Nl(U,ee){ee={...ee,source:"sandbox",monitorOnly:String(Qd)},(0,Ul.H)(U,ee)}function Qg({isAngular:U,pluginId:ee}){const ie=location.search.includes("nosandbox")&&w.config.buildInfo.env==="development",Ee=w.config.disableFrontendSandboxForPlugins.includes(ee);return!U&&!!w.config.featureToggles.pluginsFrontendSandbox&&!0&&!Ee&&!ie}function Yg(U){return U?.constructor?.name==="RegExp"}function wl(U){return U&&(Yg(U)&&(0,jd.qD)(U)?new RegExp(U):Array.isArray(U)?U.map(wl):typeof U=="object"?Object.keys(U).reduce((ee,ie)=>(Reflect.set(ee,ie,wl(Reflect.get(U,ie))),ee),{}):U)}const Gs=new Map,vr=!!w.config.featureToggles.frontendSandboxMonitorOnly,Yd=Symbol.for("@SANDBOX_LIVE_API_PATCHED");function Zg(){return Gs.size===0&&(Jg(Gs),Xg(Gs),qg(Gs),ap(Gs),np(Gs),ep(Gs),tp(Gs),sp(Gs),rp(Gs),Zd(Gs),op(Gs)),Gs}function xi(U,ee){return hr(`Plugin ${ee.id} tried to set a sandboxed property`,{pluginId:ee.id,attrOrMethod:String(U),entity:"window"}),vr?U:()=>{throw new Error("Plugins are not allowed to set sandboxed properties")}}function Jg(U){const ee=["contentDocument","contentWindow","src","srcdoc","srcObject","srcset"];for(const Ee of ee){const Se=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,Ee);if(Se){let Ae=function(Ce,Ve){const Je=Ve.id;return hr(`Plugin ${Je} tried to access iframe.${Ee}`,{pluginId:Je,attrOrMethod:Ee,entity:"iframe"}),vr?Ce:()=>{throw new Error("iframe."+Ee+" is not allowed in sandboxed plugins")}};var ie=Ae;Se.value&&U.set(Se.value,Ae),Se.set&&U.set(Se.set,Ae),Se.get&&U.set(Se.get,Ae)}}}function Xg(U){const ee=Object.getOwnPropertyDescriptor(window,"console");if(ee?.value){let Ee=function(Se,Ae){const Ce=Ae.id;if(vr)return Se;function Ve(...Je){console.log(`[plugin ${Ce}]`,...Je)}return{log:Ve,warn:Ve,error:Ve,info:Ve,debug:Ve,table:Ve}};var ie=Ee;U.set(ee.value,Ee)}ee?.set&&U.set(ee.set,xi)}function qg(U){function ee(Ee,Se){const Ae=Se.id;return hr(`Plugin ${Ae} accessed window.alert`,{pluginId:Ae,attrOrMethod:"alert",entity:"window"}),vr?Ee:function(...Ce){console.log(`[plugin ${Ae}]`,...Ce)}}const ie=Object.getOwnPropertyDescriptor(window,"alert");ie?.value&&U.set(ie.value,ee),ie?.set&&U.set(ie.set,xi)}function ep(U){function ee(Ee,Se){const Ae=Se.id;return function(...Ve){for(const Je of Ve){const qe=Je?.toLowerCase()||"";for(const it of Kr)if(qe.includes("<"+it)){if(hr(`Plugin ${Ae} tried to set ${it} in innerHTML`,{pluginId:Ae,attrOrMethod:"innerHTML",param:it,entity:"HTMLElement"}),vr)continue;throw new Error("<"+it+"> is not allowed in sandboxed plugins")}}(0,Be.isFunction)(Ee)&&Ee.apply(this,Ve)}}const ie=[Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"outerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentHTML"),Object.getOwnPropertyDescriptor(DOMParser.prototype,"parseFromString")];for(const Ee of ie)Ee?.set&&U.set(Ee.set,ee),Ee?.value&&U.set(Ee.value,ee)}function tp(U){function ee(Ee,Se){const Ae=Se.id;return function(Ve,Je){if(Ve&&Kr.includes(Ve)&&(hr(`Plugin ${Ae} tried to create ${Ve}`,{pluginId:Ae,attrOrMethod:"createElement",param:Ve,entity:"document"}),!vr))return document.createDocumentFragment();if((0,Be.isFunction)(Ee))return Ee.apply(this,[Ve,Je])}}const ie=Object.getOwnPropertyDescriptor(Document.prototype,"createElement");ie?.value&&U.set(ie.value,ee)}function np(U){function ee(Ae,Ce){const Ve=Ce.id;return function(qe,it){const gt=qe?.nodeName?.toLowerCase()||"";if(qe&&Kr.includes(gt)&&(hr(`Plugin ${Ve} tried to insert ${gt}`,{pluginId:Ve,attrOrMethod:"insertChild",param:gt,entity:"HTMLElement"}),!vr))return document.createDocumentFragment();if((0,Be.isFunction)(Ae))return Ae.call(this,qe,it)}}function ie(Ae,Ce){const Ve=Ce.id;return function(qe,it){const gt=it?.nodeName?.toLowerCase()||"";if(it&&Kr.includes(gt)&&(hr(`Plugin ${Ve} tried to insert ${gt}`,{pluginId:Ve,attrOrMethod:"insertAdjacentElement",param:gt,entity:"HTMLElement"}),!vr))return document.createDocumentFragment();if((0,Be.isFunction)(Ae))return Ae.call(this,qe,it)}}const Ee=[Object.getOwnPropertyDescriptor(Node.prototype,"insertBefore"),Object.getOwnPropertyDescriptor(Node.prototype,"replaceChild")];for(const Ae of Ee)Ae?.value&&U.set(Ae.set,ee);const Se=Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentElement");Se?.value&&U.set(Se.set,ie)}function ap(U){function ee(Ae,Ce){const Ve=Ce.id;return function(...qe){let it=qe;const gt=qe?.filter(Ot=>!Kr.includes(Ot.nodeName.toLowerCase()));vr||(it=gt),it.length!==gt.length&&hr(`Plugin ${Ve} tried to append fobiddenElements`,{pluginId:Ve,attrOrMethod:"append",param:qe?.filter(Ot=>Kr.includes(Ot.nodeName.toLowerCase()))?.join(",")||"",entity:"HTMLElement"}),(0,Be.isFunction)(Ae)&&Ae.apply(this,it)}}function ie(Ae,Ce,Ve){const Je=Ce.id;return function(it){const gt=it?.nodeName?.toLowerCase()||"";if(it&&Kr.includes(gt)&&(hr(`Plugin ${Je} tried to append ${gt}`,{pluginId:Je,attrOrMethod:"appendChild",param:gt,entity:"HTMLElement"}),!vr))return document.createDocumentFragment();if(Ve&&it&&gt==="script"&&it instanceof HTMLScriptElement){zg(it.src,Ce,Ve).then(()=>{it.onload?.call(it,new Event("load"))}).catch(Ot=>{it.onerror?.call(it,new ErrorEvent("error",{error:Ot}))});return}if((0,Be.isFunction)(Ae))return Ae.call(this,it)}}const Ee=[Object.getOwnPropertyDescriptor(Element.prototype,"append"),Object.getOwnPropertyDescriptor(Element.prototype,"prepend"),Object.getOwnPropertyDescriptor(Element.prototype,"after"),Object.getOwnPropertyDescriptor(Element.prototype,"before"),Object.getOwnPropertyDescriptor(Document.prototype,"append"),Object.getOwnPropertyDescriptor(Document.prototype,"prepend")];for(const Ae of Ee)Ae?.value&&U.set(Ae.value,ee);const Se=Object.getOwnPropertyDescriptor(Node.prototype,"appendChild");Se?.value&&U.set(Se.value,ie)}function sp(U){const ee=Object.getOwnPropertyDescriptor(Worker.prototype,"postMessage");function ie(Ee){return function(...Ae){try{const Ce=(0,Be.cloneDeep)(Ae);(0,Be.isFunction)(Ee)&&Ee.apply(this,Ce)}catch{throw new Error("postMessage arguments are invalid objects")}}}ee?.value&&U.set(ee.value,ie)}function rp(U){const ee=Object.getOwnPropertyDescriptor(Document.prototype,"defaultView");ee?.get&&U.set(ee.get,()=>()=>window);const ie=["write"];for(const Ee of ie){const Se=Object.getOwnPropertyDescriptor(Document.prototype,Ee);Se?.set&&U.set(Se.set,xi),Se?.value&&U.set(Se.value,xi)}}async function Zd(U){const ee=Reflect.get(window,"monaco");if(!ee||Object.hasOwn(ee,Yd))return;const ie=ee.languages.setMonarchTokensProvider;function Ee(){return function(...Se){return Se.length!==2?ie.apply(ee,Se):ie.call(ee,Se[0],wl(Se[1]))}}U.set(ee.languages.setMonarchTokensProvider,Ee),Reflect.set(ee,Yd,{})}async function op(U){const ee=Object.getOwnPropertyDescriptor(window,"postMessage");function ie(Ee){return function(...Ae){try{const Ce=(0,Be.cloneDeep)(Ae);(0,Be.isFunction)(Ee)&&Ee.apply(this,Ce)}catch{throw new Error("postMessage arguments are invalid objects")}}}ee?.value&&U.set(ee.value,ie)}function ip(U){if(Zd(Gs),U instanceof Function&&U.name==="replace"&&U.prototype.constructor.length===2)return function(...ie){if(ie&&ie[0]&&typeof ie[0]=="string"&&ie[1]&&!(ie[1]instanceof Function)){const Ee=(0,Be.cloneDeep)(ie);return Reflect.apply(U,this,Ee)}return Reflect.apply(U,this,ie)}}const co=Symbol.for("@@SANDBOX_LIVE_VALUE"),Jd=!!w.config.featureToggles.frontendSandboxMonitorOnly;function lp(U,ee){const ie=Reflect.get(U,"nodeName");if(ie==="body"||U===document.body)return document.body;if(ie==="head"||U===document.head||U===document.documentElement)return U;if(Kr.includes(ie)&&(hr("<"+ie+"> is not allowed in sandboxed plugins",{pluginId:ee,param:ie}),!Jd))throw new Error("<"+ie+"> is not allowed in sandboxed plugins");if(fp(U,ee)||U.parentNode===document.body||U.closest("#reactRoot")===null||Jd)return U;{const Ee=document.createElement(ie);return Ee.dataset.grafanaPluginSandboxElement="true",Ee}}function cp(U){if(typeof U=="object"&&U instanceof Element)try{return U.nodeName!==void 0}catch{return!1}return!1}function dp(U){const ee=Reflect.get(U,"style");Object.hasOwn(ee,co)||Reflect.defineProperty(ee,co,{})}function up(U){U&&(Object.hasOwn(U,co)||((0,jd.qD)(U)&&!(U instanceof Function)&&(jg(U)||U instanceof O.MF)?Reflect.defineProperty(U,co,{}):U===_d().languages&&Object.defineProperty(U,co,{})))}function mp(U){return Object.hasOwn(U,co)}function fp(U,ee){return!document.contains(U)||U.closest(`[data-plugin-sandbox=${ee}]`)!==null}let er;function Nh(){return er||(er=document.createElement("div"),er.setAttribute("id","grafana-plugin-sandbox-body"),er.setAttribute("data-plugin-sandbox","true"),er.dataset.pluginSandbox="sandboxed-plugin",er.style.width="100%",er.style.height="0%",er.style.overflow="hidden",er.style.top="0",er.style.left="0",document.body.appendChild(er)),er}var gp=e(63495),Xd=e(30670);async function pp(U,ee){if(!Gg(U))return U;const ie=await Promise.resolve(U.plugin);if(Reflect.has(ie,"panel")&&Reflect.set(ie,"panel",$o(Reflect.get(ie,"panel"),ee)),Reflect.has(ie,"components")){const Ee=Reflect.get(ie,"components");Object.entries(Ee).forEach(([Se,Ae])=>{Reflect.set(Ee,Se,$o(Ae,ee))}),Reflect.set(ie,"components",Ee)}if(Reflect.has(ie,"root")&&Reflect.set(ie,"root",$o(Reflect.get(ie,"root"),ee)),Reflect.has(ie,"extensionConfigs")){const Ee=Reflect.get(ie,"extensionConfigs");for(const Se of Ee)Reflect.has(Se,"component")&&Reflect.set(Se,"component",$o(Reflect.get(Se,"component"),ee));Reflect.set(ie,"extensionConfigs",Ee)}if(Reflect.has(ie,"configPages")){const Ee=Reflect.get(ie,"configPages");for(const[Se,Ae]of Object.entries(Ee))!Ae.body||!(0,Be.isFunction)(Ae.body)||Reflect.set(Ee,Se,{...Ae,body:$o(Ae.body,ee)});Reflect.set(ie,"configPages",Ee)}return U}const $o=(U,ee)=>{const ie=b.memo(Ee=>b.createElement("div",{"data-plugin-sandbox":ee.id,style:{height:ee.type===Xd.zV.app||ee.type===Xd.zV.panel?"100%":"auto"}},b.createElement(U,{...Ee})));return ie.displayName=`GrafanaSandbox(${U.displayName||U.name||"Component"})`,ie},Wl=new Map,qd={};async function hp({pluginId:U}){try{const ee=await(0,$g.a)(U);return Wl.has(U)||Wl.set(U,vp(ee)),Wl.get(U)}catch(ee){const ie=new Error(`Could not import plugin ${U} inside sandbox: `+ee);throw Nl(ie,{pluginId:U,error:String(ee)}),ie}}async function vp(U){return new Promise(async(ee,ie)=>{const Ee=Zg();let Se;function Ae(Ve){if(cp(Ve)){const it=lp(Ve,U.id);return dp(it),it}else up(Ve);const Je=Ee.get(Ve);if(Je)return Je(Ve,U,Se);const qe=ip(Ve);return qe||Ve}Se=(0,Kg.Z)(window,{distortionCallback:Ae,defaultPolicy:Vg.k,liveTargetCallback:mp,endowments:Object.getOwnPropertyDescriptors({locationSandbox:window.location,get monaco(){return Reflect.get(window,"monaco")},get Prism(){return Reflect.get(window,"Prism")},get jQuery(){return Reflect.get(window,"jQuery")},get $(){return Reflect.get(window,"jQuery")},get grafanaBootData(){if(qd[U.id+"-grafanaBootData"]||(qd[U.id+"-grafanaBootData"]=!0,(0,Ul.PN)("Plugin using window.grafanaBootData",{sandbox:"true",pluginId:U.id,guessedPluginName:U.id,parent:"window",packageName:"window",key:"grafanaBootData"})),w.config.buildInfo.env==="development")throw new Error(`Error in ${U.id}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`);return console.error(`${U.id.toUpperCase()}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`),w.config.bootData},async define(Ve,Je,qe){let it,gt;Array.isArray(Ve)?(it=Ve,gt=Je):(it=Je,gt=qe);try{const Ot=Ep(it),pt=gt.apply(null,Ot),Tt=await pp(pt,U);ee(Tt)}catch(Ot){const pt=new Error(`Could not execute plugin's define ${U.id}: `+Ot);Nl(pt,{pluginId:U.id,error:String(Ot)}),ie(pt)}}})}),kg(Se);let Ce="";try{Ce=await Hg(U)}catch(Ve){ie(new Error(`Could not load plugin code ${U.id}: `+Ve))}try{Se.evaluate(Ce)}catch(Ve){const Je=new Error(`Could not run plugin ${U.id} inside sandbox: `+Ve);Nl(Je,{pluginId:U.id,error:String(Ve)}),ie(Je)}})}function Ep(U){const ee=[];for(const ie of U){let Ee=gp.g.get(ie);if(Ee?.__useDefault&&(Ee=Ee.default),!Ee)throw new Error(`[sandbox] Could not resolve dependency ${ie}`);ee.push(Ee)}return ee}const yp=(0,Vo.t)(Bg);B.i3.addImportMap({imports:yp});const Xr=B.i3.constructor.prototype;Xr.shouldFetch=()=>!0;const Dp=Xr.fetch;Xr.fetch=function(U,ee){return Ug(Dp,U,ee)};const Pp=Xr.resolve;Xr.resolve=Ng.bind(Xr,Pp),Xr.onload=wg;async function Fl({path:U,version:ee,isAngular:ie,pluginId:Ee}){ee&&(0,Bl.Vf)({path:U,version:ee});const Se=og[U];return Se?typeof Se=="function"?await Se():Se:Qg({isAngular:ie,pluginId:Ee})?hp({pluginId:Ee}):B.i3.import(U)}function Cp(U){return Fl({path:U.module,version:U.info?.version,isAngular:U.angularDetected,pluginId:U.id}).then(ee=>{if(ee.plugin){const ie=ee.plugin;return ie.meta=U,ie}if(ee.Datasource){const ie=new O.hf(ee.Datasource);return ie.setComponentsFromLegacyExports(ee),ie.meta=U,ie}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function bp(U){return Fl({path:U.module,version:U.info?.version,isAngular:U.angularDetected,pluginId:U.id}).then(ee=>{const ie=ee.plugin?ee.plugin:new A.k8;return ie.init(U),ie.meta=U,ie.setComponentsFromLegacyExports(ee),ie})}},63495:(J,R,e)=>{"use strict";e.d(R,{g:()=>n});const n=new Map([])},82433:(J,R,e)=>{"use strict";e.d(R,{O:()=>o,d:()=>g});var n=e(30670),a=e(13090),l=e(33558),r=e(56586);async function o(m){const d=await(0,l.a)(m);let u;if(d.type===n.zV.app&&(u=await(0,r.Av)(d)),d.type===n.zV.datasource&&(u=await(0,r.nL)(d)),d.type===n.zV.panel&&(u=await(0,a._2)(d)),d.type===n.zV.renderer&&(u={meta:d}),!u)throw new Error("Unknown Plugin type: "+d.type);return u}function g(m,d,u){let f={...m},c;function E(h,y){return!y.startsWith(h.url??"")||c&&(c.url?.length??0)>(h.url?.length??0)?h:(c&&(c.active=!1),c={...h,active:!0},c)}function p(h,y=0){if(y>10)return h;if(h.children){const s=h.children.map(v=>p(v,y+1));return{...E(h,u),children:s}}return E(h,u)}return f.children=(f?.children??[]).map(p),{main:f,node:c??f}}},16920:(J,R,e)=>{"use strict";e.d(R,{$S:()=>p,Ns:()=>h,PL:()=>s,Uk:()=>D,YT:()=>f,ZP:()=>T,aw:()=>v,p$:()=>C,qD:()=>y,rf:()=>i,z0:()=>M,zW:()=>c,zc:()=>E});var n=e(77960),a=e(86832),l=e.n(a),r=e(48069),o=e(92403),g=e(50820),m=e(21308);const d={orgId:g.default.bootData.user.orgId,timeZone:g.default.bootData.user.timezone,weekStart:g.default.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},u=(0,n.oM)({name:"user/profile",initialState:d,reducers:{updateTimeZone:(O,A)=>{O.timeZone=A.payload.timeZone},updateWeekStart:(O,A)=>{O.weekStart=A.payload.weekStart},updateFiscalYearStartMonth:(O,A)=>{O.fiscalYearStartMonth=A.payload.fiscalYearStartMonth},setUpdating:(O,A)=>{O.isUpdating=A.payload.updating},userLoaded:(O,A)=>{O.user=A.payload.user},initLoadTeams:(O,A)=>{O.teamsAreLoading=!0},teamsLoaded:(O,A)=>{O.teams=A.payload.teams,O.teamsAreLoading=!1},initLoadOrgs:(O,A)=>{O.orgsAreLoading=!0},orgsLoaded:(O,A)=>{O.orgs=A.payload.orgs,O.orgsAreLoading=!1},initLoadSessions:(O,A)=>{O.sessionsAreLoading=!0},sessionsLoaded:(O,A)=>{const B=A.payload.sessions.sort((b,W)=>Number(W.isActive)-Number(b.isActive));O.sessions=B.map(b=>({id:b.id,isActive:b.isActive,seenAt:(0,r.E8)(b.seenAt),createdAt:b.createdAt,clientIp:b.clientIp,browser:b.browser,browserVersion:b.browserVersion,os:b.os,osVersion:b.osVersion,device:b.device})),O.sessionsAreLoading=!1},userSessionRevoked:(O,A)=>{O.sessions=O.sessions.filter(B=>B.id!==A.payload.tokenId),O.isUpdating=!1}}}),i=O=>async A=>{(0,a.set)(m.Vt,"user.fiscalYearStartMonth",O),A(S({fiscalYearStartMonth:O}))},f=O=>async A=>{(!(0,a.isString)(O)||(0,a.isEmpty)(O))&&(O=g.default?.bootData?.user?.timezone),(0,a.set)(m.Vt,"user.timezone",O),A(P({timeZone:O}))},c=O=>async A=>{(!(0,a.isString)(O)||(0,a.isEmpty)(O))&&(O=g.default?.bootData?.user?.weekStart),(0,a.set)(m.Vt,"user.weekStart",O),A(x({weekStart:O})),(0,o.Ls)(O)},{setUpdating:E,initLoadOrgs:p,orgsLoaded:h,initLoadTeams:y,teamsLoaded:s,userLoaded:v,userSessionRevoked:C,initLoadSessions:D,sessionsLoaded:M,updateTimeZone:P,updateWeekStart:x,updateFiscalYearStartMonth:S}=u.actions,I=u.reducer,T={user:u.reducer}},2190:(J,R,e)=>{"use strict";e.d(R,{Z:()=>n,i:()=>a});const n=l=>l.timeZone,a=l=>l.fiscalYearStartMonth},65649:(J,R,e)=>{"use strict";e.d(R,{S:()=>a,f:()=>l});class n{constructor(){this.extraRenderActions=[]}addExtraRenderAction(o){this.extraRenderActions=this.extraRenderActions.concat(o)}getAllExtraRenderAction(){return this.extraRenderActions}}const a=new n,l=new n},29581:(J,R,e)=>{"use strict";e.d(R,{x:()=>z,t:()=>Q});var n=e(77814),a=e.n(n),l=e(86832),r=e(71757),o=e.n(r),g=e(39953),m=e(96083),d=e(34265),u=e(91395),i=e(10694),f=e(53305),c=e(71519),E=e(28888),p=e(26205),h=e(52275),y=e(12608),s=e(41393),v=e(98347),C=e(78209),D=e(98324),M=e(6278),P=e(6947),x=e(65649),S=e(41407),I=e(82803),T=e(12190),O=e(38637),A=e(43324),B=e(92811);const b=j=>{const{query:F,queries:k,onChange:_,collapsedText:Y,renderExtras:Z,disabled:ae}=j,ce=(0,I.wW)(V),[q,De]=(0,g.useState)(!1),[oe,te]=(0,g.useState)(null),fe=ue=>{De(!0)},Te=ue=>{if(De(!1),oe){te(null);return}F.refId!==ue&&_({...F,refId:ue})},ge=ue=>{const Oe=ue.currentTarget.value.trim();if(Oe.length===0){te("An empty query name is not allowed");return}for(const Ue of k)if(Ue!==F&&Oe===Ue.refId){te("Query name already exists");return}oe&&te(null)},he=ue=>{Te(ue.currentTarget.value.trim())},me=ue=>{ue.key==="Enter"&&Te(ue.currentTarget.value)},ye=ue=>{ue.target.select()};return g.createElement(g.Fragment,null,g.createElement("div",{className:ce.wrapper},!q&&g.createElement("button",{className:ce.queryNameWrapper,"aria-label":E.wl.components.QueryEditorRow.title(F.refId),title:"Edit query name",onClick:fe,"data-testid":"query-name-div",type:"button"},g.createElement("span",{className:ce.queryName},F.refId),g.createElement(T.J,{name:"pen",className:ce.queryEditIcon,size:"sm"})),q&&g.createElement(g.Fragment,null,g.createElement(O.I,{type:"text",defaultValue:F.refId,onBlur:he,autoFocus:!0,onKeyDown:me,onFocus:ye,invalid:oe!==null,onChange:ge,className:ce.queryNameInput,"data-testid":"query-name-input"}),oe&&g.createElement(A.S,{horizontal:!0},oe)),W(j,ce),Z&&g.createElement("div",{className:ce.itemWrapper},Z()),ae&&g.createElement("em",{className:ce.contextInfo},"Disabled")),Y&&g.createElement("div",{className:ce.collapsedText},Y))},W=(j,F)=>{const{alerting:k,dataSource:_,onChangeDataSource:Y}=j;return Y?g.createElement("div",{className:F.itemWrapper},g.createElement(B.q,{variables:!0,alerting:k,current:_.name,onChange:Y})):g.createElement("em",{className:F.contextInfo},"(",_.name,")")},V=j=>({wrapper:(0,S.css)`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${j.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:(0,S.css)`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${j.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${j.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${j.colors.action.hover};
        border: 1px dashed ${j.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${j.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:(0,S.css)`
      font-weight: ${j.typography.fontWeightMedium};
      color: ${j.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${j.spacing(.5)};
    `,queryEditIcon:(0,S.cx)((0,S.css)`
        margin-left: ${j.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:(0,S.css)`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:(0,S.css)`
      font-weight: ${j.typography.fontWeightRegular};
      font-size: ${j.typography.bodySmall.fontSize};
      color: ${j.colors.text.secondary};
      padding-left: ${j.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:(0,S.css)`
      font-size: ${j.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${j.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:(0,S.css)`
      display: flex;
      margin-left: 4px;
    `});function w({error:j}){const F=(0,I.wW)(K),k=j?.message??j?.data?.message??"Query error";return g.createElement("div",{className:F.wrapper},g.createElement("div",{className:F.icon},g.createElement(T.J,{name:"exclamation-triangle"})),g.createElement("div",{className:F.message},k,j.traceId!=null&&g.createElement(g.Fragment,null,g.createElement("br",null)," ",g.createElement("span",null,"(Trace ID: ",j.traceId,")"))))}const K=j=>({wrapper:(0,S.css)({marginTop:j.spacing(.5),background:j.colors.background.secondary,display:"flex"}),icon:(0,S.css)({background:j.colors.error.main,color:j.colors.error.contrastText,padding:j.spacing(1)}),message:(0,S.css)({fontSize:j.typography.bodySmall.fontSize,fontFamily:j.typography.fontFamilyMonospace,padding:j.spacing(1)})});class z extends g.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.dataSourceSrv=(0,p.F)(),this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const F=(0,h.w)(),k='<plugin-component type="query-ctrl" />',_={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=F.load(this.element,_,k),this.angularScope=_.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:F,onChange:k,queries:_,onRunQuery:Y,onAddQuery:Z,app:ae=m.zj.PanelEditor,history:ce}=this.props,{datasource:q,data:De}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(q?.components?.QueryCtrl)return g.createElement("div",{ref:oe=>this.element=oe});if(q){let oe=this.getReactQueryEditor(q);if(oe)return g.createElement(d.n,{instanceSettings:this.props.dataSource},g.createElement(oe,{key:q?.name,query:F,datasource:q,onChange:k,onRunQuery:Y,onAddQuery:Z,data:De,range:(0,M.$t)().timeRange(),queries:_,app:ae,history:ce}))}return g.createElement("div",null,"Data source plugin does not export any Query Editor component")},this.onToggleEditMode=(F,k)=>{F.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),k.isOpen||k.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:F,query:k,onQueryRemoved:_}=this.props;F(k),_&&_()},this.onCopyQuery=()=>{const{query:F,onAddQuery:k,onQueryCopied:_}=this.props,Y=(0,l.cloneDeep)(F);k(Y),_&&_()},this.onDisableQuery=()=>{const{query:F,onChange:k,onRunQuery:_,onQueryToggled:Y}=this.props;k({...F,hide:!F.hide}),_(),Y&&Y(F.hide)},this.onToggleHelp=()=>{this.setState(F=>({showingHelp:!F.showingHelp}))},this.onClickExample=F=>{F.datasource===void 0&&(F.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...F,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:F,query:k}=this.props,Y=(Q(F,k.refId)?.series??[]).reduce((q,De)=>{if(!De.meta?.notices)return q;const oe=(0,l.filter)(De.meta.notices,{severity:"warning"})??[];return q.concat(oe)},[]),Z=(0,l.uniqBy)(Y,"text");if(!(Z.length>0))return null;const ce=Z.map(q=>q.text).join(`
`);return g.createElement(y.C,{color:"orange",icon:"exclamation-triangle",text:g.createElement(g.Fragment,null,Z.length," ",o()("warning",Z.length)),tooltip:ce})},this.renderExtraActions=()=>{const{query:F,queries:k,data:_,onAddQuery:Y,dataSource:Z}=this.props,ae=x.f.getAllExtraRenderAction().map((ce,q)=>ce({query:F,queries:k,timeRange:_.timeRange,onAddQuery:Y,dataSource:Z,key:q})).filter(Boolean);return ae.push(this.renderWarnings()),ae},this.renderActions=F=>{const{query:k,hideDisableQuery:_=!1}=this.props,{hasTextEditMode:Y,datasource:Z,showingHelp:ae}=this.state,ce=!!k.hide,q=Z?.components?.QueryEditorHelp;return g.createElement(g.Fragment,null,q&&g.createElement(C.V,{title:"Show data source help",icon:"question-circle",onClick:this.onToggleHelp,active:ae}),Y&&g.createElement(C.y,{title:"Toggle text edit mode",icon:"pen",onClick:De=>{this.onToggleEditMode(De,F)}}),this.renderExtraActions(),g.createElement(C.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),_?null:g.createElement(C.V,{title:"Disable query",icon:ce?"eye-slash":"eye",active:ce,onClick:this.onDisableQuery}),g.createElement(C.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=F=>{const{alerting:k,query:_,dataSource:Y,onChangeDataSource:Z,onChange:ae,queries:ce,renderHeaderExtras:q}=this.props;return g.createElement(b,{query:_,queries:ce,onChangeDataSource:Z,dataSource:Y,disabled:_.hide,onClick:De=>this.onToggleEditMode(De,F),onChange:ae,collapsedText:F.isOpen?null:this.renderCollapsedText(),renderExtras:q,alerting:k})}}componentDidMount(){const{data:F,query:k,id:_}=this.props,Y=Q(F,k.refId);this.id=(0,l.uniqueId)(_+"_"),this.setState({data:Y}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:F,queries:k}=this.props,{datasource:_}=this.state,Y=new P.rY({targets:k}),Z={},ae=this;return{datasource:_,target:F,panel:Y,dashboard:Z,refresh:()=>{F.hide!==ae.props.query.hide&&(F.hide=ae.props.query.hide),this.props.onChange(F),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new u.F,range:(0,M.$t)().timeRange()}}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const F=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return F?.rawRef?.uid??F?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let F;const k=this.getInterpolatedDataSourceUID();try{F=await this.dataSourceSrv.get(k)}catch{F=await this.dataSourceSrv.get()}typeof this.props.onDataSourceLoaded=="function"&&this.props.onDataSourceLoaded(F),this.setState({datasource:F,queriedDataSourceIdentifier:k,hasTextEditMode:(0,l.has)(F,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(F){const{datasource:k,queriedDataSourceIdentifier:_}=this.state,{data:Y,query:Z}=this.props;if(F.id!==this.props.id&&(this.id=(0,l.uniqueId)(this.props.id+"_")),Y!==F.data){const ae=Q(Y,Z.refId);this.setState({data:ae}),this.angularScope&&(this.angularScope.range=(0,M.$t)().timeRange()),this.angularQueryEditor&&ae&&G(this.angularScope,ae,this.angularQueryEditor)}if(k&&_!==this.getInterpolatedDataSourceUID()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(F){if(F)switch(this.props.app){case m.zj.Explore:return F.components?.ExploreMetricsQueryField||F.components?.ExploreLogsQueryField||F.components?.ExploreQueryField||F.components?.QueryEditor;case m.zj.PanelEditor:case m.zj.Dashboard:default:return F.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:F}=this.state;return F?.getQueryDisplayText?F.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:F,index:k,visualization:_,collapsable:Y}=this.props,{datasource:Z,showingHelp:ae,data:ce}=this.state,q=F.hide,De=a()("query-editor-row",{"query-editor-row--disabled":q,"gf-form-disabled":q});if(!Z)return null;const oe=this.renderPluginEditor(),te=Z.components?.QueryEditorHelp;return g.createElement("div",{"data-testid":"query-editor-row","aria-label":E.wl.components.QueryEditorRows.rows},g.createElement(D.t,{id:this.id,draggable:!0,collapsable:Y,index:k,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},g.createElement("div",{className:De,id:this.id},g.createElement(s.z4,null,ae&&te&&g.createElement(v.h,null,g.createElement(te,{onClickExample:fe=>this.onClickExample(fe),query:this.props.query,datasource:Z})),oe),ce?.error&&ce.error.refId===F.refId&&g.createElement(w,{error:ce.error}),_)))}}function G(j,F,k){if(F.state===i.Gu.Done){const _=F.series.map(Y=>(0,f.Zr)(Y));j.events.emit(c.Kh.dataReceived,_)}else F.state===i.Gu.Error&&j.events.emit(c.Kh.dataError,F.error);setTimeout(k.digest)}function Q(j,F){const k=j.series.filter(ae=>ae.refId===F);if(j.state!==i.Gu.Loading&&(j.error||j.errors?.length)&&!j.series.length)return{...j,state:i.Gu.Error};let _=j.state,Y=j.errors?.find(ae=>ae.refId===F);!Y&&j.error&&(Y=j.error.refId===F?j.error:void 0),_!==i.Gu.Loading&&(Y?_=i.Gu.Error:j.state===i.Gu.Error&&(_=i.Gu.Done));const Z=j.timeRange;return{...j,state:_,series:k,error:Y,errors:Y?[Y]:void 0,timeRange:Z}}},32627:(J,R,e)=>{"use strict";e.d(R,{Tl:()=>Te,kt:()=>oe});var n=e(56989),a=e(23997),l=e(31544),r=e(3195),o=e(46514),g=e(71476),m=e(79947),d=e(53143),u=e(41858),i=e(81698),f=e(52325),c=e(66453),E=e(77014),p=e(50820),h=e(86832);function y(ge){let he=[];const me=(0,h.partition)(ge,"id"),ye=(0,h.groupBy)(me[0],"id");return he=(0,h.map)(ye,ue=>ue.length>1&&!(0,h.every)(ue,s)?(0,h.find)(ue,Oe=>Oe.eventType!=="panel-alert"):(0,h.head)(ue)),he=(0,h.concat)(he,me[1]),he}function s(ge){return ge.eventType==="panel-alert"}var v=e(6278),C=e(22605),D=e(10752),M=e(4148),P=e(35802);class x{canWork({dashboard:he,range:me}){return!(!he.id||me.raw.to!=="now"||!he.panels.find(ye=>!!ye.alert))}work(he){if(!this.canWork(he))return(0,P.H_)();const{dashboard:me}=he;return(0,C.D)((0,M.i)().get("/api/alerts/states-for-dashboard",{dashboardId:me.id},`dashboard-query-runner-alert-states-${me.id}`)).pipe((0,g.U)(ye=>({alertStates:ye,annotations:[]})),(0,D.K)(P.Rc))}}var S=e(63302),I=e(84289),T=e(81595),O=e(32688),A=e(26205),B=e(50383),b=e(73431),W=e(3101);class V{canRun(he){return he?!!(!he.annotationQuery||he.annotations):!1}run({annotation:he,datasource:me,dashboard:ye,range:ue}){if(!this.canRun(me))return(0,S.of)([]);const Oe={};return(0,W.r)({dashboard:ye,range:ue,panel:Oe},me,he).pipe((0,g.U)(Ue=>Ue.events??[]),(0,D.K)(P.h1))}}var w=e(47967);class K{canRun(he){return he?(0,w.yr)(he)?!0:!!(he.annotationQuery&&!he.annotations):!1}run({annotation:he,datasource:me,dashboard:ye,range:ue}){return this.canRun(me)?(0,C.D)(me.annotationQuery({range:ue,rangeRaw:ue.raw,annotation:he,dashboard:ye})).pipe((0,D.K)(P.h1)):(0,S.of)([])}}class z{constructor(he=[new K,new V]){this.runners=he}canWork({dashboard:he}){return!!he.annotations.list.find(z.getAnnotationsToProcessFilter)}work(he){if(!this.canWork(he))return(0,P.H_)();const{dashboard:me,range:ye}=he;let ue=me.annotations.list.filter(z.getAnnotationsToProcessFilter);O.config.publicDashboardAccessToken&&ue.length>0&&(ue=[ue[0]]);const Oe=ue.map(Ue=>{let at;if(O.config.publicDashboardAccessToken){const Ne=new B.k;at=(0,S.of)(Ne).pipe((0,D.K)(P.hs))}else at=(0,C.D)((0,A.F)().get(Ue.datasource)).pipe((0,D.K)(P.hs));return at.pipe((0,I.z)(Ne=>{const _e=this.runners.find(Ke=>Ke.canRun(Ne));return _e?(me.events.publish(new b.z(Ue)),_e.run({annotation:Ue,datasource:Ne,dashboard:me,range:ye}).pipe((0,m.R)(oe().cancellations().pipe((0,T.h)(Ke=>Ke===Ue))),(0,g.U)(Ke=>(me.snapshot&&(Ue.snapshotData=(0,h.cloneDeep)(Ke)),O.config.publicDashboardAccessToken?Ke:(0,P.pG)(Ue,Ke))),(0,i.x)(()=>{me.events.publish(new b.RB(Ue))}))):(0,S.of)([])}))});return(0,r.T)(Oe).pipe((0,d.J)(),(0,u.u)((Ue,at)=>Ue.concat(at)),(0,g.U)(Ue=>({annotations:Ue,alertStates:[]})))}static getAnnotationsToProcessFilter(he){return he.enable&&!he.snapshotData}}var G=e(68556),Q=e(41560),j=e(97125),F=e(63483),k=e(15032),_=e(57721),Y=e(17330);class Z{constructor(){this.hasAlertRules={}}canWork({dashboard:he,range:me}){return!(!he.uid||O.config.publicDashboardAccessToken||me.raw.to!=="now"||this.hasAlertRules[he.uid]===!1||!(j.contextSrv.hasPermission(_.AccessControlAction.AlertingRuleRead)&&j.contextSrv.hasPermission(_.AccessControlAction.AlertingRuleExternalRead)))}work(he){if(!this.canWork(he))return(0,P.H_)();const{dashboard:me}=he;return(0,C.D)((0,M.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:me.uid},`dashboard-query-runner-unified-alert-states-${me.id}`)).pipe((0,g.U)(ye=>{if(ye.status==="success"){this.hasAlertRules[me.uid]=!1;const ue={};return ye.data.groups.forEach(Oe=>Oe.rules.forEach(Ue=>{if((0,k.x_)(Ue)&&Ue.annotations&&Ue.annotations[F.q6.panelID]){this.hasAlertRules[me.uid]=!0;const at=Number(Ue.annotations[F.q6.panelID]),Ne=ae(Ue.state);ue[at]?Ne===Q.Z.Alerting&&ue[at].state!==Q.Z.Alerting?ue[at].state=Q.Z.Alerting:Ne===Q.Z.Pending&&ue[at].state!==Q.Z.Alerting&&ue[at].state!==Q.Z.Pending&&(ue[at].state=Q.Z.Pending):ue[at]={state:Ne,id:Object.keys(ue).length,panelId:at,dashboardId:me.id}}})),{alertStates:Object.values(ue),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,D.K)(P.Rc))}}function ae(ge){return ge===Y.x_.Firing?Q.Z.Alerting:ge===Y.x_.Pending?Q.Z.Pending:Q.Z.OK}class ce{constructor(he,me=(0,v.$t)(),ye=[p.config.unifiedAlertingEnabled?new Z:new x,new G.g,new z]){this.dashboard=he,this.timeSrv=me,this.workers=ye,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new n.t(1),this.runs=new a.x,this.cancellationStream=new a.x,this.runsSubscription=this.runs.subscribe(ue=>this.executeRun(ue)),this.eventsSubscription=he.events.subscribe(E.U5,ue=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(he){this.runs.next(he)}getResult(he){return this.results.asObservable().pipe((0,g.U)(me=>{const ye=(0,P.tD)(me.annotations,he),ue=me.alertStates.find(Oe=>!!he&&Oe.panelId===he);return{annotations:y(ye),alertState:ue}}))}executeRun(he){const ye=this.workers.filter(Ne=>Ne.canWork(he)).map(Ne=>Ne.work(he)),ue=new l.w0,Oe=(0,r.T)(ye).pipe((0,m.R)(this.runs.asObservable()),(0,d.J)(),(0,u.u)((Ne,_e)=>(Ne.annotations=Ne.annotations.concat(_e.annotations),Ne.alertStates=Ne.alertStates.concat(_e.alertStates),Ne)),(0,i.x)(()=>{ue.unsubscribe()}),(0,f.B)()),Ue=new l.w0,at=(0,o.H)(200).pipe((0,c.h)({annotations:[],alertStates:[]}),(0,m.R)(Oe),(0,i.x)(()=>{Ue.unsubscribe()}));Ue.add(at.subscribe(Ne=>{this.results.next(Ne)})),ue.add(Oe.subscribe(Ne=>{this.results.next(Ne)}))}cancel(he){this.cancellationStream.next(he)}cancellations(){return this.cancellationStream.asObservable().pipe((0,f.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let q;function De(ge){q&&q.destroy(),q=ge}function oe(){if(!q)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return q}let te;function fe(ge){te=ge}function Te(ge){te||(te=({dashboard:me,timeSrv:ye,workers:ue})=>new ce(me,ye,ue));const he=te(ge);return De(he),he}},50383:(J,R,e)=>{"use strict";e.d(R,{k:()=>i});var n=e(63302),a=e(22605),l=e(54721),r=e(53305),o=e(4148),g=e(32688),m=e(95712),d=e(39064);const u="-- Public --";class i extends l.MF{constructor(){let c={};super({name:"public-ds",id:0,type:"public-ds",meta:c,uid:u,jsonData:{},access:"proxy",readOnly:!0}),this.annotations={prepareQuery(E){return{...E,queryType:d.hR.Annotations,refId:"anno"}}}}query(c){return c.targets.length?c.targets[0]?.datasource?.uid===m.JY?(0,a.D)(this.getAnnotations(c)):(0,n.of)({data:[]}):(0,n.of)({data:[]})}async getAnnotations(c){const{range:{to:E,from:p}}=c,h={from:p.valueOf(),to:E.valueOf()},y=await(0,o.i)().get(`/api/public/dashboards/${g.config.publicDashboardAccessToken}/annotations`,h);return{data:[(0,r.g0)(y)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}},68556:(J,R,e)=>{"use strict";e.d(R,{g:()=>l});var n=e(63302),a=e(35802);class l{canWork({dashboard:o}){return o?.annotations?.list?.some(g=>g.enable&&!!g.snapshotData)}work(o){if(!this.canWork(o))return(0,a.H_)();const g=this.getAnnotationsFromSnapshot(o.dashboard);return(0,n.of)({annotations:g,alertStates:[]})}getAnnotationsFromSnapshot(o){return(o?.annotations?.list?.filter(u=>u.enable)).filter(u=>!!u.snapshotData).reduce((u,i)=>u.concat((0,a.pG)(i,i.snapshotData)),[])}getAnnotationsInSnapshot(o,g){const m=this.getAnnotationsFromSnapshot(o);return(0,a.tD)(m,g)}}},35802:(J,R,e)=>{"use strict";e.d(R,{H_:()=>c,Rc:()=>E,em:()=>s,h1:()=>i,hs:()=>f,pG:()=>y,tD:()=>h});var n=e(86832),a=e.n(n),l=e(63302),r=e(98579),o=e(43882),g=e(32688),m=e(74600),d=e(90634),u=e(59138);function i(v){return v.cancelled?(0,l.of)([]):(p("AnnotationQueryRunner failed",v),(0,l.of)([]))}function f(v){return p("Failed to retrieve datasource",v),(0,l.of)(void 0)}const c=()=>(0,l.of)({annotations:[],alertStates:[]});function E(v){return v.cancelled||p("DashboardQueryRunner failed",v),c()}function p(v,C){const D=(0,o.P)(C);console.error("handleAnnotationQueryRunnerError",D);const M=(0,d.t_)(v,D.message);(0,m.WI)((0,u.$l)(M))}function h(v,C){return C==null?v:v.filter(D=>{let M;if(M=D.source,!M)return!0;if(M.filter){const P=(M.filter.ids??[]).includes(C);if(M.filter.exclude){if(P)return!1}else if(!P)return!1}return D.panelId&&D.source.type==="dashboard"?D.panelId===C:!0})}function y(v,C){v.snapshotData&&(v=(0,n.cloneDeep)(v),delete v.snapshotData);for(const D of C)switch(D.source=v,D.color=g.config.theme2.visualization.getColorByName(v.iconColor),D.type=v.name,D.isRegion=!!(D.timeEnd&&D.time!==D.timeEnd),D.newState?.toLowerCase()){case"pending":D.color="yellow";break;case"alerting":D.color="red";break;case"ok":D.color="green";break;case"normal":D.color="green";break;case"no_data":D.color="gray";break;case"nodata":D.color="gray";break}return C}function s(v){if(!v||!v.length)return[];const C=[];for(const D of v){const M=new r.U(D);for(let P=0;P<D.length;P++){const x=(0,n.cloneDeep)(M.get(P));C.push(x)}}return C}},74277:(J,R,e)=>{"use strict";e.d(R,{o:()=>A,t:()=>O});var n=e(86832),a=e(56989),l=e(63302),r=e(84289),o=e(71476),g=e(10752),m=e(10694),d=e(53305),u=e(54554),i=e(52716),f=e(99977),c=e(60593),E=e(96083),p=e(81626),h=e(43882),y=e(92743),s=e(14191),v=e(52436),C=e(41182),D=e(70451),M=e(32627),P=e(53323),x=e(33975);function S(b,W){return(0,P.a)([b,W]).pipe((0,r.z)(V=>{const[w,K]=V;if(K.annotations?.length||K.alertState){w.annotations||(w.annotations=[]);const z=w.annotations.concat(new x.i(K.annotations)),G=K.alertState;return(0,l.of)({...w,annotations:z,alertState:G})}return(0,l.of)(w)}))}var I=e(34110);let T=100;function O(){return"Q"+T++}class A{constructor(W){this.templateSrv=(0,C.J)(),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new a.t(1),this.dataConfigSource=W}getData(W){const{withFieldConfig:V,withTransforms:w}=W;let K=1,z,G=[],Q=[],j,F=!0,k=-1;if(this.dataConfigSource.snapshotData){const _={state:m.Gu.Done,series:this.dataConfigSource.snapshotData.map(Y=>(0,d.g0)(Y)),timeRange:(0,u.JK)(),structureRev:K};return(0,l.of)(_)}return this.subject.pipe((0,r.z)(_=>{let Y=this.dataConfigSource.getFieldOverrideOptions(),Z=this.dataConfigSource.getTransformations();if(_.series===Q&&z?.fieldConfig===Y?.fieldConfig&&j===Z)return(0,l.of)({..._,structureRev:K,series:G});z=Y,j=Z,Q=_.series;let ae=(0,l.of)(_);return w&&(ae=this.applyTransformations(_)),ae.pipe((0,o.U)(ce=>{let q=ce,De=!1;if(V&&ce.series?.length){if(k===this.dataConfigSource.configRev){const oe=ce.series.find(te=>(0,s.iL)(te));oe&&!oe.packetInfo.schemaChanged&&G[0].fields.length===oe.fields.length&&(q={...q,series:G.map((te,fe)=>({...te,length:ce.series[fe].length,fields:te.fields.map((Te,ge)=>({...Te,values:ce.series[fe].fields[ge].values,state:{...Te.state,calcs:void 0,range:void 0}}))}))},De=!0)}Y!=null&&(F||!De)&&(k=this.dataConfigSource.configRev,q={...q,series:(0,i.SM)({timeZone:ce.request?.timezone??"browser",data:q.series,...Y})},q.annotations&&(q.annotations=(0,i.SM)({data:q.annotations,...Y,fieldConfig:{defaults:{},overrides:[]}})),F=!1)}return!De&&!(0,f.nl)(G,q.series,f.Ch)&&K++,G=q.series,{...q,structureRev:K}}))}))}applyTransformations(W){const V=this.dataConfigSource.getTransformations();if(!V||V.length===0)return(0,l.of)(W);const w={interpolate:K=>this.templateSrv.replace(K,W?.request?.scopedVars)};return(0,c.H)(V,W.series,w).pipe((0,o.U)(K=>({...W,series:K})),(0,g.K)(K=>(console.warn("Error running transformation:",K),(0,l.of)({...W,state:m.Gu.Error,errors:[(0,h.P)(K)]}))))}async run(W){const{queries:V,timezone:w,datasource:K,panelId:z,dashboardUID:G,timeRange:Q,timeInfo:j,cacheTimeout:F,queryCachingTTL:k,maxDataPoints:_,scopedVars:Y,minInterval:Z,app:ae}=W;if((0,D.yl)(K)){this.pipeToSubject((0,D.AK)(W,V[0]),z,!0);return}const ce={app:ae??E.zj.Dashboard,requestId:O(),timezone:w,panelId:z,dashboardUID:G,range:Q,timeInfo:j,interval:"",intervalMs:0,targets:(0,n.cloneDeep)(V),maxDataPoints:_,scopedVars:Y||{},cacheTimeout:F,queryCachingTTL:k,startTime:Date.now(),rangeRaw:Q.raw};try{const q=await B(K,ce.scopedVars),De=q.meta?.mixed;ce.targets=ce.targets.map(fe=>{const Te=fe.datasource?.type===y.hr.type;return(!fe.datasource||fe.datasource.uid!==q.uid&&!De&&!Te)&&(fe.datasource=q.getRef()),fe});const oe=Z?this.templateSrv.replace(Z,ce.scopedVars):q.interval,te=p.calculateInterval(Q,_,oe);ce.scopedVars=Object.assign({},ce.scopedVars,{__interval:{text:te.interval,value:te.interval},__interval_ms:{text:te.intervalMs.toString(),value:te.intervalMs}}),ce.interval=te.interval,ce.intervalMs=te.intervalMs,ce.filters=this.templateSrv.getAdhocFilters(q.name),this.lastRequest=ce,this.pipeToSubject((0,I.v7)(q,ce),z)}catch(q){this.pipeToSubject((0,l.of)({state:m.Gu.Error,error:(0,h.P)(q),series:[],timeRange:ce.range}),z)}}pipeToSubject(W,V,w=!1){this.subscription&&this.subscription.unsubscribe();let K=W;const z=this.dataConfigSource.getDataSupport();if(z.alertStates||z.annotations){const G=this.dataConfigSource;K=S(W,(0,M.kt)().getResult(G.id))}this.subscription=K.subscribe({next:G=>{this.lastResult=w?G:(0,d.zR)(G,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===m.Gu.Loading||this.lastResult.state===m.Gu.Streaming)&&this.subject.next({...this.lastResult,state:m.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new a.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(W){this.lastResult=W.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(W){this.lastResult=W}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function B(b,W){return b&&typeof b=="object"&&"query"in b?b:await(0,v.ak)().get(b,W)}},49135:(J,R,e)=>{"use strict";e.d(R,{V:()=>a});var n=e(81698);function a(l,r){return(0,n.x)(()=>{r&&l.resolveCancelerIfExists(r)})}},21853:(J,R,e)=>{"use strict";e.d(R,{C:()=>a});var n=e(99977);const a=(l,r)=>{let o=1;return r?.structureRev&&r.series&&(o=r.structureRev,(0,n.nl)(l.series,r.series,n.Ch)||o++),l.structureRev=o,l}},34110:(J,R,e)=>{"use strict";e.d(R,{v7:()=>V});var n=e(86832),a=e(63302),l=e(3195),r=e(46514),o=e(22605),g=e(71476),m=e(10752),d=e(82696),u=e(52325),i=e(66453),f=e(79947),c=e(10694),E=e(30976),p=e(77877),h=e(96083),y=e(54538),s=e(43882),v=e(32688),C=e(92743),D=e(20367),M=e(78354),P=e(1464),x=e(49135),S=e(69307),I=e(4651),T=e(72639),O=e(97433);function A(K){let z=!1;return Q=>{if(!Q.request||z||S.Cj.getUrlSearchParams().editPanel!=null||Q.state!==c.Gu.Done&&Q.state!==c.Gu.Error)return;const F={eventName:I.ct.DataRequest,source:Q.request.app,datasourceName:K.name,datasourceId:K.id,datasourceUid:K.uid,datasourceType:K.type,dataSize:0,duration:Q.request.endTime-Q.request.startTime};G(F,Q),Q.request.app!==h.zj.Explore&&Q.request.app!==h.zj.Correlations&&B(F,Q),Q.series&&Q.series.length>0&&(F.dataSize=Q.series.length),(0,T.r_)(F),z=!0};function G(Q,j){const F={};for(let _=0;_<j.series.length;_++){const Y=j.series[_].refId;Y&&!F[Y]&&(F[Y]=j.series[_].meta?.isCachedResponse??!1)}Q.totalQueries=Object.keys(F).length,Q.cachedQueries=Object.values(F).filter(_=>_===!0).length,Q.panelId=j.request.panelId;const k=(0,O.h4)().getCurrent();k&&(Q.dashboardId=k.id,Q.dashboardName=k.title,Q.dashboardUid=k.uid,Q.folderName=k.meta.folderTitle)}}function B(K,z){z.errors?.length?K.error=z.errors.join(", "):z.error&&(K.error=z.error.message)}function b(K,z){const G=z.panelData.request,Q={...z.packets},j=K.key??K.data?.[0]?.refId??"A";Q[j]=K;let F=K.state||c.Gu.Done,k,_;const Y=[],Z=[];for(const De in Q){const oe=Q[De];if((oe.error||oe.errors?.length)&&(F=c.Gu.Error,k=oe.error,_=oe.errors),oe.data&&oe.data.length)for(const te of oe.data){if(te.meta?.dataTopic===E.w5.Annotations){Z.push(te);continue}Y.push(te)}}const ae=W(G,F),ce={state:F,series:Y,annotations:Z,error:k,errors:_,request:G,timeRange:ae},q=new Set([...z.panelData.traceIds??[],...K.traceIds??[]]);return q.size>0&&(ce.traceIds=Array.from(q)),{packets:Q,panelData:ce}}function W(K,z){const G=K.range;return!(0,n.isString)(G.raw.from)||z!==c.Gu.Streaming?G:{...G,from:p.parse(G.raw.from,!1),to:p.parse(G.raw.to,!0)}}function V(K,z,G){let Q={panelData:{state:c.Gu.Loading,series:[],request:z,timeRange:z.range},packets:{}};if(!z.targets.length)return z.endTime=Date.now(),Q.panelData.state=c.Gu.Done,(0,a.of)(Q.panelData);const j=w(K,z,G).pipe((0,g.U)(F=>{if(!(0,n.map)(F.data))throw new Error(`Expected response data to be array, got ${typeof F.data}.`);return z.endTime=Date.now(),Q=b(F,Q),Q.panelData}),(0,m.K)(F=>(console.error("runRequest.catchError",F),(0,y.H)(F),(0,a.of)({...Q.panelData,state:c.Gu.Error,error:(0,s.P)(F)}))),(0,d.b)(A(K)),(0,x.V)(D.ae,z.requestId),(0,u.B)());return(0,l.T)((0,r.H)(200).pipe((0,i.h)(Q.panelData),(0,f.R)(j)),j)}function w(K,z,G){if(z.targets=z.targets.map(j=>(0,M.vH)(j)?{...K?.getDefaultQuery?.(h.zj.PanelEditor),...j}:j),v.config.publicDashboardAccessToken)return(0,o.D)(K.query(z));for(const j of z.targets)if((0,C.Pr)(j.datasource))return P.mV.query(z);const Q=G?G(z):K.query(z);return(0,o.D)(Q)}},9738:(J,R,e)=>{"use strict";e.d(R,{CN:()=>l,E_:()=>h,YQ:()=>u,__:()=>m,fy:()=>i,pW:()=>d,qb:()=>E,qi:()=>g,rh:()=>c,to:()=>f,xb:()=>p,yw:()=>o});var n=e(6868);const a=null,l=58,r=8,o={label:"A\u2013Z",value:"alpha-asc"},g="search.sections",m="grafana.search.expanded-folder",d=0,u="general",i="General",f="grafana.search.include.panels",c="grafana.search.layout",E="grafana.search.sort",p={dashboard:n.o.DashDB,folder:n.o.DashFolder,home:n.o.DashHome},h=1e3},26967:(J,R,e)=>{"use strict";e.d(R,{A:()=>o,v:()=>g});var n=e(39953),a=e(23997),l=e(57837),r=e(13601);function o(){const m=(0,n.useRef)(new a.x);return{keyboardEvents:m.current,onKeyDown:d=>{switch(d.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":m.current.next(d);default:}}}}function g(m,d,u){const i=(0,n.useRef)({x:0,y:-1}),[f,c]=(0,n.useState)({x:0,y:-1}),E=(0,n.useRef)();return(0,n.useEffect)(()=>{E.current=u.view.fields.url,i.current.x=0,i.current.y=-1,c({...i.current})},[u]),(0,n.useEffect)(()=>{const p=m.subscribe({next:h=>{switch(h?.code){case"ArrowDown":{i.current.y++,c({...i.current});break}case"ArrowUp":i.current.y=Math.max(0,i.current.y-1),c({...i.current});break;case"ArrowRight":{d>0&&(i.current.x=Math.min(d,i.current.x+1),c({...i.current}));break}case"ArrowLeft":{d>0&&(i.current.x=Math.max(0,i.current.x-1),c({...i.current}));break}case"Enter":if(!E.current)break;const y=i.current.x*d+i.current.y;if(y<0){i.current.x=0,i.current.y=0,c({...i.current});break}const s=E.current.values?.[y];s&&r.E1.push(l.u.stripBaseFromUrl(s))}}});return()=>p.unsubscribe()},[m,d]),f}},17231:(J,R,e)=>{"use strict";e.d(R,{getGrafanaSearcher:()=>n.O});var n=e(74681)},74681:(J,R,e)=>{"use strict";e.d(R,{O:()=>I});var n=e(32688),a=e(98579),l=e(53305),r=e(94123),o=e(4148),g=e(39971);const m="Loading",d="api/search-v2",u="name_sort";class i{constructor(O){this.fallbackSearcher=O}async search(O){if(O.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(O)}async starred(O){if(O.facet?.length)throw new Error("facets not supported!");const A=await(0,o.i)().get("api/user/stars");return A?.length?this.doSearchQuery({uid:A,query:O.query??"*"}):{view:new a.U({length:0,fields:[]}),totalRows:0,loadMoreItems:async(B,b)=>{},isItemLoaded:B=>!0}}async tags(O){const A={...O,query:O.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},b=(await(0,o.i)().post(d,A)).frames.map(W=>(0,l.g0)(W));if(b[0]?.name===m)return this.fallbackSearcher.tags(O);for(const W of b)if(W.fields[0].name==="tag")return E(W);return[]}getSortOptions(){const O=[{value:u,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(n.config.licenseInfo.enabledFeatures.analytics){for(const A of p)O.push({value:`-${A.name}`,label:`${A.display} (most)`}),O.push({value:`${A.name}`,label:`${A.display} (least)`});for(const A of h)O.push({value:`-${A.name}`,label:`${A.display} (recent)`}),O.push({value:`${A.name}`,label:`${A.display} (oldest)`})}return Promise.resolve(O)}async doSearchQuery(O){O=await(0,g.Sd)(O);const A={...O,query:O.query??"*",limit:O.limit??f},b=(await(0,o.i)().post(d,A)).frames.map(Q=>(0,l.g0)(Q)),W=b.length?(0,l.g0)(b[0]):{fields:[],length:0};if(W.name===m)return this.fallbackSearcher.search(O);for(const Q of W.fields)Q.display=(0,r.U)({field:Q,theme:n.config.theme2});W.meta?.custom||(W.meta={...W.meta,custom:{count:W.length,max_score:1}});const V=W.meta.custom;if(V.locationInfo||(V.locationInfo={}),V.sortBy?.length){const Q=W.fields.find(j=>j.name===V.sortBy);if(Q){const j=y(Q.name);V.sortBy=j,Q.name=j}}let w=0,K;const z=async()=>{for(;w>G.dataFrame.length;){const Q=G.dataFrame.length;if(Q>=V.count)return;const j=await(0,o.i)().post(d,{...A??{},from:Q,limit:c}),F=(0,l.g0)(j.frames[0]);if(!F){console.log("no results",F);return}if(F.fields.length!==G.dataFrame.fields.length){console.log("invalid shape",F,G.dataFrame);return}const k=F.length+G.dataFrame.length;for(let Y=0;Y<F.fields.length;Y++)G.dataFrame.fields[Y].values.push(...F.fields[Y].values);G.dataFrame.length=k;const _=F.meta?.custom;if(_?.locationInfo&&V)for(const[Y,Z]of Object.entries(_.locationInfo))V.locationInfo[Y]=Z}K=void 0},G=new a.U(W);return{totalRows:V.count??W.length,view:G,loadMoreItems:async(Q,j)=>(w=Math.max(w,j),K||(K=z()),K),isItemLoaded:Q=>Q<G.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const f=50,c=100;function E(T){const O=T.fields[0].values,A=T.fields[1].values,B=[];for(let b=0;b<T.length;b++)B.push({term:O[b],count:A[b]});return B}const p=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],h=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function y(T){for(const O of p)if(O.name===T)return O.display;for(const O of h)if(O.name===T)return O.display;return T}var s=e(5135);class v{constructor(O){this.parent=O,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(O){if(O.facet?.length)throw new Error("facets not supported!");if(O.sort!=null)throw new Error("custom sorting is not supported yet");if(O.tags?.length||O.ds_uid?.length)return this.parent.search(O);const B=(await this.getCache(O.kind)).search(O.query);return{isItemLoaded:()=>!0,loadMoreItems:async(b,W)=>{},totalRows:B.length,view:B}}async getCache(O){const A=O?O.sort().join(","):"*",B=this.cache.get(A);if(B)try{return await B}catch{return this.cache.delete(A),new C(new a.U({name:"error",fields:[],length:0}))}const b=this.parent.search({kind:O,limit:5e3}).then(W=>new C(W.view));return this.cache.set(A,b),b}async starred(O){return this.parent.starred(O)}async getSortOptions(){return this.parent.getSortOptions()}async tags(O){return this.parent.tags(O)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class C{constructor(O){this.full=O,this.ufuzzy=new s.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values,this.empty=new a.U({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(A=>({...A,values:[]})),length:0})}search(O){if(!O?.length||O==="*")return this.full;const A=this.full.dataFrame.fields,B=this.names,b=A.map(K=>[]);let[W,V,w]=this.ufuzzy.search(B,O,!0);for(let K=0;K<A.length;K++){let z=A[K].values,G=b[K];if(V&&w)for(let Q=0;Q<w.length;Q++){let j=V.idx[w[Q]];G.push(z[j])}else if(W)for(let Q=0;Q<W.length;Q++){let j=W[Q];G.push(z[j])}}return this.empty.dataFrame.fields.forEach((K,z)=>{K.values=b[z]}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var D=e(89591),M=e(20367),P=e(9738);class x{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},this.getFolderViewSort=()=>""}async composeQuery(O,A){const B=await(0,g.Sd)(A);return B.query?.length&&B.query!=="*"&&(O.query=B.query),B.kind?.length===1&&P.xb[B.kind[0]]&&(O.type=P.xb[B.kind[0]]),B.uid?O.dashboardUID=B.uid:B.location?.length&&(O.folderUIDs=[B.location]),O}async search(O){if(O.facet?.length)throw new Error("facets not supported!");if(O.from!==void 0){if(!O.limit)throw new Error("Must specify non-zero limit parameter when using from");if(O.from/O.limit%1!==0)throw new Error("From parameter must be a multiple of limit")}const A=O.limit??(O.from!==void 0?1:P.E_),B=O.from!==void 0?O.from/A+1:void 0,b=await this.composeQuery({limit:A,tag:O.tags,sort:O.sort,page:B},O);return this.doAPIQuery(b)}async starred(O){if(O.facet?.length)throw new Error("facets not supported!");const A=await this.composeQuery({limit:O.limit??P.E_,tag:O.tags,sort:O.sort,starred:O.starred},O);return this.doAPIQuery(A)}async getSortOptions(){return(await M.ae.get("/api/search/sorting")).sortOptions.map(A=>({value:A.name,label:A.displayName}))}async tags(O){return(await M.ae.get("/api/dashboards/tags")).sort((B,b)=>b.count-B.count)}async doAPIQuery(O){const A=await M.ae.get("/api/search",O),B=[],b=[],W=[],V=[],w=[],K=[],z=[];let G;for(let F of A){const k=F.type==="dash-folder"?"folder":"dashboard";B.push(k),b.push(F.title),W.push(F.uid),V.push(F.url),w.push(F.tags),z.push(F.sortMeta);let _=F.folderUid;!_&&k==="dashboard"&&(_="general"),K.push(_),F.sortMetaName?.length&&(G=F.sortMetaName),F.folderUid&&F.folderTitle?this.locationInfo[F.folderUid]={kind:"folder",name:F.folderTitle,url:F.folderUrl,folderId:F.folderId}:k==="folder"&&(this.locationInfo[F.uid]={kind:k,name:F.title,url:F.url,folderId:F.id})}const Q={fields:[{name:"kind",type:D.fS.string,config:{},values:B},{name:"name",type:D.fS.string,config:{},values:b},{name:"uid",type:D.fS.string,config:{},values:W},{name:"url",type:D.fS.string,config:{},values:V},{name:"tags",type:D.fS.other,config:{},values:w},{name:"location",type:D.fS.string,config:{},values:K}],length:b.length,meta:{custom:{count:b.length,max_score:1,locationInfo:this.locationInfo}}};G?.length&&z.length&&(Q.meta.custom.sortBy=G,Q.fields.push({name:G,type:D.fS.number,config:{},values:z}));for(const F of Q.fields)F.display=(0,r.U)({field:F,theme:n.config.theme2});const j=new a.U(Q);return{totalRows:Q.length,view:j,loadMoreItems:async(F,k)=>{},isItemLoaded:F=>!0}}}let S;function I(){if(!S){const T=new x,O=n.config.featureToggles.panelTitleSearch;S=O?new i(T):T,O&&location.search.includes("do-frontend-query")&&(S=new v(S))}return S}},39971:(J,R,e)=>{"use strict";e.d(R,{J6:()=>o,Sd:()=>a,f9:()=>m});var n=e(97433);async function a(d){return d.query&&d.query.indexOf("folder:current")>=0&&(d={...d,location:await l(),query:d.query.replace("folder:current","").trim()},d.query?.length||(d.query="*")),Promise.resolve(d)}async function l(){try{let d=(0,n.h4)().getCurrent();return d||(await r(500),d=(0,n.h4)().getCurrent()),Promise.resolve(d?.meta?.folderUid)}catch(d){console.error(d)}}function r(d){return new Promise(u=>setTimeout(u,d))}function o(d,u){return d==="dashboard"?"apps":d==="folder"?u?"folder-open":"folder":"question-circle"}function g(d){switch(d){case"dashboard":case"folder":case"panel":return d;default:return"dashboard"}}function m(d,u){const i=u?.dataFrame.meta?.custom,f={kind:g(d.kind),uid:d.uid,title:d.name,url:d.url,tags:d.tags??[]},c=i?.sortBy;if(c){const E=d[c];(typeof E=="string"||typeof E=="number")&&(f.sortMetaName=c,f.sortMeta=E)}if(d.location){const E=d.location.split("/"),p=E[E.length-1],h=i?.locationInfo[p];h&&(f.parentTitle=h.name,f.parentKind=h.kind,f.parentUID=p)}return f}},6868:(J,R,e)=>{"use strict";e.d(R,{A:()=>a,o:()=>n});var n=(l=>(l.DashDB="dash-db",l.DashHome="dash-home",l.DashFolder="dash-folder",l))(n||{}),a=(l=>(l.List="list",l.Folders="folders",l))(a||{})},91344:(J,R,e)=>{"use strict";e.d(R,{rb:()=>l,vj:()=>o});var n=e(9738);const a=g=>g?!!(g.query||g.tag?.length>0||g.starred||g.sort):!1,l=()=>{const g=n.qi+".";for(let m=0;m<window.localStorage.length;m++){const d=window.localStorage.key(m);d?.startsWith(g)&&window.localStorage.removeItem(d)}},r=(g="General")=>`${SECTION_STORAGE_KEY}.${g.toLowerCase()}`,o=g=>{const m=Object.entries(g).reduce((d,[u,i])=>{if(i){if(u==="tag"&&!Array.isArray(i))return{...d,tag:[i]}}else return d;return{...d,[u]:i}},{});if(g.folder){const d=`folder:${g.folder}`;return{...m,query:`${d} ${(m.query??"").replace(d,"")}`}}return{...m}}},2322:(J,R,e)=>{"use strict";e.d(R,{BR:()=>f,Dn:()=>v,Fy:()=>i,LA:()=>u,M4:()=>D,P4:()=>g,Ub:()=>s,ZP:()=>P,aj:()=>M,dt:()=>y,e7:()=>m,pN:()=>h,s3:()=>d});var n=e(77960),a=e(57721);const l={serviceAccount:{},isLoading:!0,tokens:[]},r=(0,n.oM)({name:"serviceaccount",initialState:l,reducers:{serviceAccountFetchBegin:x=>({...x,isLoading:!0}),serviceAccountFetchEnd:x=>({...x,isLoading:!1}),serviceAccountLoaded:(x,S)=>({...x,serviceAccount:S.payload,isLoading:!1}),serviceAccountTokensLoaded:(x,S)=>({...x,tokens:S.payload,isLoading:!1}),rolesFetchBegin:x=>({...x,rolesLoading:!0}),rolesFetchEnd:x=>({...x,rolesLoading:!1})}}),o=r.reducer,{serviceAccountLoaded:g,serviceAccountTokensLoaded:m,serviceAccountFetchBegin:d,serviceAccountFetchEnd:u,rolesFetchBegin:i,rolesFetchEnd:f}=r.actions,c={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:a.ServiceAccountStateFilter.All},E=(0,n.oM)({name:"serviceaccounts",initialState:c,reducers:{serviceAccountsFetched:(x,S)=>{const{totalCount:I,perPage:T,...O}=S.payload,A=Math.ceil(I/T);return{...x,...O,totalPages:A,perPage:T,showPaging:A>1,isLoading:!1}},serviceAccountsFetchBegin:x=>({...x,isLoading:!0}),serviceAccountsFetchEnd:x=>({...x,isLoading:!1}),acOptionsLoaded:(x,S)=>({...x,roleOptions:S.payload}),queryChanged:(x,S)=>({...x,query:S.payload,page:0}),pageChanged:(x,S)=>({...x,page:S.payload}),stateFilterChanged:(x,S)=>({...x,serviceAccountStateFilter:S.payload})}}),p=E.reducer,{serviceAccountsFetchBegin:h,serviceAccountsFetchEnd:y,serviceAccountsFetched:s,acOptionsLoaded:v,pageChanged:C,stateFilterChanged:D,queryChanged:M}=E.actions,P={serviceAccountProfile:o,serviceAccounts:p}},92258:(J,R,e)=>{"use strict";e.d(R,{Ii:()=>o,UW:()=>u,ZP:()=>E,cD:()=>m,fT:()=>f,ik:()=>d,ki:()=>g,rI:()=>i,rW:()=>r});var n=e(77960);const a={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},l=(0,n.oM)({name:"supportBundles",initialState:a,reducers:{supportBundlesLoaded:(p,h)=>({...p,supportBundles:h.payload,isLoading:!1}),fetchBegin:p=>({...p,isLoading:!0}),fetchEnd:p=>({...p,isLoading:!1}),collectorsFetchBegin:p=>({...p,createBundlePageLoading:!0}),collectorsFetchEnd:p=>({...p,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(p,h)=>({...p,supportBundleCollectors:h.payload,createBundlePageLoading:!1}),setLoadBundleError:(p,h)=>({...p,loadBundlesError:h.payload,supportBundleCollectors:[]}),setCreateBundleError:(p,h)=>({...p,createBundleError:h.payload})}}),{supportBundlesLoaded:r,fetchBegin:o,fetchEnd:g,supportBundleCollectorsLoaded:m,collectorsFetchBegin:d,collectorsFetchEnd:u,setLoadBundleError:i,setCreateBundleError:f}=l.actions,E={supportBundles:l.reducer}},98557:(J,R,e)=>{"use strict";e.d(R,{BR:()=>u,Fy:()=>d,PJ:()=>g,PL:()=>r,UL:()=>m,ZP:()=>v,aj:()=>o,iI:()=>p,y$:()=>E});var n=e(77960);const a={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},l=(0,n.oM)({name:"teams",initialState:a,reducers:{teamsLoaded:(C,D)=>{const{totalCount:M,perPage:P,...x}=D.payload,S=Math.ceil(M/P);return{...C,...x,totalPages:S,perPage:P,hasFetched:!0}},queryChanged:(C,D)=>({...C,page:1,query:D.payload}),pageChanged:(C,D)=>({...C,page:D.payload}),sortChanged:(C,D)=>({...C,sort:D.payload,page:1}),rolesFetchBegin:C=>({...C,rolesLoading:!0}),rolesFetchEnd:C=>({...C,rolesLoading:!1})}}),{teamsLoaded:r,queryChanged:o,pageChanged:g,sortChanged:m,rolesFetchBegin:d,rolesFetchEnd:u}=l.actions,i=l.reducer,f={team:{},members:[],groups:[],searchMemberQuery:""},c=(0,n.oM)({name:"team",initialState:f,reducers:{teamLoaded:(C,D)=>({...C,team:D.payload}),teamMembersLoaded:(C,D)=>({...C,members:D.payload}),setSearchMemberQuery:(C,D)=>({...C,searchMemberQuery:D.payload}),teamGroupsLoaded:(C,D)=>({...C,groups:D.payload})}}),{teamLoaded:E,teamGroupsLoaded:p,teamMembersLoaded:h,setSearchMemberQuery:y}=c.actions,s=c.reducer,v={teams:i,team:s}},41182:(J,R,e)=>{"use strict";e.d(R,{J:()=>q});var n=e(86832),a=e(14255),l=e(26205),r=e(79059),o=e(74502),g=e(34547),m=e(16261),d=e(87842),u=e(92101),i=e(45882),f=e(49955);let c={};function E(De){const oe=c[De];return oe||(c[De]=(0,n.property)(De))}class p{constructor(oe,te,fe){this.state={name:oe.name,value:te,text:fe,type:oe.type}}getValue(oe){let{value:te}=this.state;return te==="string"||te==="number"||te==="boolean"?te:String(te)}getValueText(){const{value:oe,text:te}=this.state;return typeof te=="string"?oe===d.r2?d.xk:te:Array.isArray(te)?te.join(" + "):(console.log("value",te),String(te))}}let h;function y(De,oe,te){return h?(h.state.name=De.name,h.state.type=De.type,h.state.value=oe,h.state.text=te):h=new p(De,oe,te),h}function s(De,oe,te,fe){if(te=te||{},De==null||(0,u.Kn)(te)&&oe!==g.b8.QueryParam)return"";if(!Array.isArray(De)&&typeof De=="object"&&(De=`${De}`),typeof oe=="function")return oe(De,te,s);oe||(oe=g.b8.Glob);let Te=oe.split(":");Te.length>1?(oe=Te[0],Te=Te.slice(1)):Te=[];let ge=o.Vl.getIfExists(oe);ge||(console.error(`Variable format ${oe} not found. Using glob format as fallback.`),ge=o.Vl.get(g.b8.Glob));const he=y(te,De,fe??De);return ge.formatter(De,Te,he)}var v=e(21306),C=e.n(v),D=e(24824),M=e(69307),P=e(73),x=e(6278),S=e(38361),I=e(83502),T=e(89591),O=e(86127),A=e(94123),B=e(69330),b=e(36822);function W(De,oe,te){return new Proxy({},{get:(fe,Te)=>{if(Te==="name")return De.name;if(Te==="displayName")return(0,B.CZ)(De,oe,te);if(Te==="labels"||Te==="formattedLabels")return De.labels?{...De.labels,__values:Object.values(De.labels).sort().join(", "),toString:()=>(0,b.aA)(De.labels,"",!0)}:""}})}function V(De,oe,te,fe){const Te=w(De,oe,te);return s(Te,fe)}function w(De,oe,te){const fe=te?.__dataContext;if(!fe)return De;const{frame:Te,rowIndex:ge,field:he,calculatedValue:me}=fe.value;if(me)switch(oe){case"numeric":return me.numeric.toString();case"raw":return me.numeric;case"time":return"";case"text":default:return(0,I.zc)(me)}if(ge===void 0)return De;if(oe==="time"){const Ue=Te.fields.find(at=>at.type===T.fS.time);return Ue?Ue.values[ge]:void 0}const ye=he.values[ge];if(oe==="raw")return ye;const Oe=(he.display??G())(ye);switch(oe){case"numeric":return Oe.numeric;case"text":return Oe.text;default:return(0,I.zc)(Oe)}}function K(De,oe,te,fe){const Te=te?.__dataContext;if(!Te||!oe)return De;const{frame:ge,rowIndex:he}=Te.value;if(he===void 0||oe===void 0)return De;const me={name:ge.name,refId:ge.refId,fields:(0,O.z)({frame:ge,rowIndex:he})},ye=E(oe)(me)??"";return s(ye,fe)}let z;function G(){return z||(z=(0,A.U)()),z}function Q(De,oe,te,fe){const Te=te?.__dataContext;if(!Te||oe!=="name")return De;const{frame:ge,frameIndex:he}=Te.value,me=(0,B.nf)(ge,he);return s(me,fe)}function j(De,oe,te,fe){const Te=te?.__dataContext;if(!Te||oe===void 0||oe==="")return De;const{frame:ge,field:he,data:me}=Te.value,ye=W(he,ge,me),ue=E(oe)(ye)??"";return s(ue,fe)}const F={__value:V,__data:K,__series:Q,__field:j,[D.W.includeVars]:k,[D.W.keepTime]:_,__timezone:Y};function k(De,oe,te){const fe=(0,S.c)(te);return M.Cj.toUrlParams(fe)}function _(){return M.Cj.toUrlParams((0,x.$t)().timeRangeForUrl())}function Y(){const De=(0,P.Z)({timeZone:(0,x.$t)().timeModel?.getTimezone()});return De==="browser"?C().tz.guess():De}const Z={getFilteredVariables:i.Q4,getVariables:i.ng,getVariableWithName:i._K};class ae{constructor(oe=Z){this.dependencies=oe,this.regex=f.J7,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this._adhocFiltersDeprecationWarningLogged=new Map,this._variables=[]}init(oe,te){this._variables=oe,this.timeRange=te,this.updateIndex()}get variables(){return(0,a.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){const oe=te=>te||te==="";if(this.index=this._variables.reduce((te,fe)=>(fe.current&&(fe.current.isNone||oe(fe.current.value))&&(te[fe.name]=fe),te),{}),this.timeRange){const te=this.timeRange.from.valueOf().toString(),fe=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:te,text:te}},__to:{current:{value:fe,text:fe}}}}}updateTimeRange(oe){this.timeRange=oe,this.updateIndex()}variableInitialized(oe){this.index[oe.name]=oe}getAdhocFilters(oe){let te=[],fe=(0,l.F)().getInstanceSettings(oe);if(!fe)return[];this._adhocFiltersDeprecationWarningLogged.get(fe.type)||((0,a.d)(`DataSource ${fe.type}`,"templateSrv.getAdhocFilters","filters property on the request (DataQueryRequest). Or if this is called from interpolateVariablesInQueries or applyTemplateVariables it is passed as a new argument"),this._adhocFiltersDeprecationWarningLogged.set(fe.type,!0));for(const Te of this.getAdHocVariables()){const ge=Te.datasource?.uid;(ge===fe.uid||ge?.indexOf("$")===0&&this.replace(ge)===fe.uid)&&(te=te.concat(Te.filters))}return te}setGrafanaVariable(oe,te){this.grafanaVariables.set(oe,te)}setGlobalVariable(oe,te){(0,a.d)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[oe]:{current:te}}}getVariableName(oe){this.regex.lastIndex=0;const te=this.regex.exec(oe);return te?te.slice(1).find(Te=>Te!==void 0):null}containsTemplate(oe){if(!oe)return!1;const te=this.getVariableName(oe),fe=te&&this.getVariableAtIndex(te);return fe!=null}variableExists(oe){return(0,a.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(oe)}highlightVariablesAsHtml(oe){return!oe||!(0,n.isString)(oe)?oe:(oe=(0,n.escape)(oe),this._replaceWithVariableRegex(oe,void 0,(te,fe)=>this.getVariableAtIndex(fe)?'<span class="template-variable">'+te+"</span>":te))}getAllValue(oe){if(oe.allValue)return oe.allValue;const te=[];for(let fe=1;fe<oe.options.length;fe++)te.push(oe.options[fe].value);return te}getVariableValue(oe,te){return te?E(te)(oe.value):oe.value}getVariableText(oe,te){return oe.value===te||typeof te!="string"?oe.text:te}replace(oe,te,fe,Te){return te&&te.__sceneObject?o.ep.interpolate(te.__sceneObject.value,oe,te,fe):window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?o.ep.interpolate(window.__grafanaSceneContext,oe,te,fe):oe?(this.regex.lastIndex=0,this._replaceWithVariableRegex(oe,fe,(ge,he,me,ye)=>{const ue=this._evaluateVariableExpression(ge,he,me,ye,te);return Te&&Te.push({match:ge,variableName:he,fieldPath:me,format:ye,value:ue,found:ue!==ge}),ue})):oe??""}_evaluateVariableExpression(oe,te,fe,Te,ge){const he=this.getVariableAtIndex(te),me=ge?.[te];if(me){const Ue=this.getVariableValue(me,fe),at=this.getVariableText(me,Ue);if(Ue!=null)return s(Ue,Te,he,at)}if(!he){const Ue=F[te];return Ue?Ue(oe,fe,ge,Te):oe}if(Te===g.b8.QueryParam||(0,u.Kn)(he)){const Ue=m.z.get(he.type).getValueForUrl(he),at=(0,u.Kn)(he)?he.id:he.current.text;return s(Ue,Te,he,at)}const ye=this.grafanaVariables.get(he.current.value);if(ye)return s(ye,Te,he);let ue=he.current.value,Oe=he.current.text;if(this.isAllValue(ue)&&(ue=this.getAllValue(he),Oe=d.xk,he.allValue&&Te!==g.b8.Text&&Te!==g.b8.PercentEncode))return this.replace(ue);if(fe){const Ue=this.getVariableValue({value:ue,text:Oe},fe);if(Ue!=null)return s(Ue,Te,he,Oe)}return s(ue,Te,he,Oe)}_replaceWithVariableRegex(oe,te,fe){return this.regex.lastIndex=0,oe.replace(this.regex,(Te,ge,he,me,ye,ue,Oe)=>fe(Te,ge||he||ye,ue,me||Oe||te))}isAllValue(oe){return oe===d.r2||Array.isArray(oe)&&oe[0]===d.r2}replaceWithText(oe,te){return(0,a.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(oe,te,"text")}getVariableAtIndex(oe){if(oe)return this.index[oe]?this.index[oe]:this.dependencies.getVariableWithName(oe)}getAdHocVariables(){return this.dependencies.getFilteredVariables(u.Kn)}}const ce=new ae;(0,r.l)(ce);const q=()=>ce},78181:(J,R,e)=>{"use strict";e.d(R,{J:()=>h});var n=e(34547),a=e(41456),l=e(39953),r=e(69733),o=e(79059),g=e(32688),m=e(12223),d=e(20454),u=e(38637),i=e(78533),f=e(34484);const c=[{label:"Size",value:n.kW.Size,description:"Split the buckets based on size"},{label:"Count",value:n.kW.Count,description:"Split the buckets based on count"}],E=[{label:"Split",value:n.kW.Size,description:"Split the buckets based on size"}],p=({value:y,onChange:s,item:v})=>{const[C,D]=(0,l.useState)(!1),M=S=>{D(!(0,f.f6)(S)),s({...y,value:S})},x=(0,o.J)().getVariables().map(S=>({value:S.name,label:S.label||S.name,origin:r.L8.Template}));return l.createElement(m.Lh,null,l.createElement(d.S,{value:y?.mode||n.kW.Size,options:y?.scale?.type===n.wf.Log?E:c,onChange:S=>{s({...y,mode:S})}}),g.config.featureToggles.transformationsVariableSupport?l.createElement(i.X,{invalid:C,error:"Value needs to be an integer or a variable",value:y?.value??"",placeholder:"Auto",onChange:M,suggestions:x}):l.createElement(u.I,{value:y?.value??"",placeholder:"Auto",onChange:S=>{s({...y,value:S.currentTarget.value})}}))};function h(y,s,v,C){s.addCustomEditor({id:"xBuckets",path:`${y}xBuckets`,name:"X Bucket",editor:p,category:C,defaultValue:{mode:n.kW.Size}}),s.addCustomEditor({id:"yBuckets",path:`${y}yBuckets`,name:"Y Bucket",editor:p,category:C,defaultValue:{mode:n.kW.Size}}),s.addCustomEditor({id:"yBuckets-scale",path:`${y}yBuckets.scale`,name:"Y Bucket scale",category:C,editor:a.Y,defaultValue:{type:n.wf.Linear}})}},70394:(J,R,e)=>{"use strict";e.d(R,{xf:()=>j,Oy:()=>W,qJ:()=>z,d8:()=>K,Cj:()=>G});var n=e(71476),a=e(7959),l=e(36604),r=e(89591),o=e(69330),g=e(83502),m=e(51226),d=e(5195),u=e(80742),i=e(82837),f=e(32688),c=e(34547),E=e(99331);const{abs:p,pow:h}=Math,y=new Map;function s(Y,Z,ae,ce){let q=[],De=ce.map(E.d);for(let oe=Z;oe<ae;oe++){let te=p(oe),fe=(0,E.O)(h(Y,oe),te);for(let Te=0;Te<ce.length;Te++){let ge=ce[Te]*fe,he=(ge>=0&&oe>=0?0:te)+(oe>=De[Te]?0:De[Te]),me=(0,E.O)(ge,he);q.push(me),y.set(me,he)}}return q}const v=Y=>Y%1===0,C=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],D=s(10,-16,0,C),M=s(10,0,16,C),P=M.filter(v),x=D.concat(M),S=D.concat(P),I=1*1e3,T=60*I,O=60*T,A=24*O,B=365*A,b=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,I,2*I,4*I,5*I,10*I,15*I,20*I,30*I,T,2*T,4*T,5*T,10*T,15*T,20*T,30*T,O,2*O,4*O,6*O,8*O,12*O,18*O,A,2*A,3*A,4*A,5*A,6*A,7*A,10*A,15*A,30*A,45*A,60*A,90*A,180*A,B,2*B,3*B,4*B,5*B,6*B,7*B,8*B,9*B,10*B],W={id:a.W.heatmap,name:"Create heatmap",description:"Generate heatmap data from source data.",defaultOptions:{},isApplicable:Y=>{const{xField:Z,yField:ae,xs:ce,ys:q}=F(Y);return Z||ae||!ce.length||!q.length?l.s.NotPossible:l.s.Applicable},isApplicableDescription:"The Heatmap transformation requires fields with Heatmap compatible data. No fields with Heatmap data could be found.",operator:(Y,Z)=>ae=>ae.pipe((0,n.U)(ce=>{if(f.config.featureToggles.transformationsVariableSupport){const q={...Y,xBuckets:{...Y.xBuckets},yBuckets:{...Y.yBuckets}};return q.xBuckets?.value&&(q.xBuckets.value=Z.interpolate(q.xBuckets.value)),q.yBuckets?.value&&(q.yBuckets.value=Z.interpolate(q.yBuckets.value)),W.transformer(q,Z)(ce)}else return W.transformer(Y,Z)(ce)})),transformer:Y=>Z=>{const ae=j(Z,Y);return Y.keepOriginalData?[ae,...Z]:[ae]}};function V(Y){return Y==="+Inf"?1/0:Y==="-Inf"?-1/0:+(Y??0)}function w(Y,Z){return V(Y)-V(Z)}function K(Y){return Y?.meta?.custom??{}}function z(Y){let Z=!1;for(let ae of Y.fields)switch(ae.name){case"y":case"yMin":case"yMax":if(Z)return!1;Z=!0}return Z}function G(Y){const Z=Y.frame.fields[0],ae=Z.values,ce=Y.frame.fields.filter((ye,ue)=>ye.type===r.fS.number&&ue>0),q=ae.length*ce.length,De=new Array(q),oe=new Array(q),te=new Array(q),fe=ce.map(ye=>ye.values.slice());fe.forEach((ye,ue)=>{for(let Oe=0;Oe<ye.length;Oe++)te[fe.length*Oe+ue]=ye[Oe]});const Te=Array.from({length:ce.length},(ye,ue)=>ue);for(let ye=0,ue=0,Oe=0;ye<q;ue=++ye%Te.length)oe[ye]=Te[ue],ue===0&&ye>=Te.length&&Oe++,De[ye]=ae[Oe];let ge=ce[0].labels?.le!=null?"yMax":"y";switch(Y.layout){case c.kv.le:ge="yMax";break;case c.kv.ge:ge="yMin";break;case c.kv.unknown:ge="y";break}const he={yOrdinalDisplay:ce.map(ye=>(0,o.CZ)(ye,Y.frame)),yMatchWithLabel:Object.keys(ce[0].labels??{})[0]};if(he.yMatchWithLabel&&(he.yOrdinalLabel=ce.map(ye=>ye.labels?.[he.yMatchWithLabel]??""),he.yMatchWithLabel==="le"&&(he.yMinDisplay="0.0")),Y.unit?.length||Y.decimals!=null){const ye=(0,g.Cf)(Y.unit??"short");he.yMinDisplay&&(he.yMinDisplay=(0,g.zc)(ye(0,Y.decimals))),he.yOrdinalDisplay=he.yOrdinalDisplay.map(ue=>{let Oe=+ue;return Number.isNaN(Oe)?ue:(0,g.zc)(ye(Oe,Y.decimals))})}const me={...ce[0].config};return me.displayNameFromDS&&delete me.displayNameFromDS,{length:De.length,refId:Y.frame.refId,meta:{type:m.P.HeatmapCells,custom:he},fields:[{name:Z.type===r.fS.time?"xMax":"x",type:Z.type,values:De,config:Z.config},{name:ge,type:r.fS.number,values:oe,config:{unit:"short"}},{name:Y.value?.length?Y.value:"Value",type:r.fS.number,values:te,config:me,display:ce[0].display}]}}function Q(Y){Y=Y.slice(),Y.sort((ae,ce)=>w(ae.name,ce.name));const Z=Y.map(ae=>ae.fields[1].values.slice());return Z.reverse(),Z.forEach((ae,ce)=>{if(ce<Z.length-1)for(let q=0;q<ae.length;q++)ae[q]-=Z[ce+1][q]}),Z.reverse(),Y.map((ae,ce)=>({...ae,fields:[ae.fields[0],{...ae.fields[1],values:Z[ce]}]}))}function j(Y,Z){const{xField:ae,yField:ce,xs:q,ys:De}=F(Y);if(!ae||!ce)throw"no heatmap fields found";if(!q.length||!De.length)throw"no values found";const oe=Z.xBuckets??{},te=Z.yBuckets??{};if(oe.scale?.type===c.wf.Log)throw"X axis only supports linear buckets";const fe=Z.yBuckets?.scale??{type:c.wf.Linear},Te=k(q,De,{xSorted:(0,i.lP)(q),xTime:ae.type===r.fS.time,xMode:oe.mode,xSize:oe.mode===c.kW.Size?(0,d.iX)((0,d.RA)(oe.value??"")):oe.value?+oe.value:void 0,yMode:te.mode,ySize:te.value?+te.value:void 0,yLog:fe?.type===c.wf.Log?fe?.log:void 0});return{length:Te.x.length,name:(0,o.CZ)(ce),meta:{type:m.P.HeatmapCells},fields:[{name:"xMin",type:ae.type,values:Te.x,config:ae.config},{name:"yMin",type:r.fS.number,values:Te.y,config:{...ce.config,custom:{scaleDistribution:fe}}},{name:"Count",type:r.fS.number,values:Te.count,config:{unit:"short"}}]}}function F(Y){let Z,ae,ce=0;for(let te of Y)te.fields.find(Te=>Te.type===r.fS.time)&&(ce+=te.length);let q=Array(ce),De=Array(ce),oe=0;for(let te of Y){const fe=te.fields.find(ge=>ge.type===r.fS.time);if(!fe)continue;Z||(Z=fe);const Te=fe.values;for(let ge of te.fields)if(ge!==fe&&ge.type===r.fS.number){const he=ge.values;for(let me=0;me<Te.length;me++,oe++)q[oe]=Te[me],De[oe]=he[me];ae||(ae=ge)}}return{xField:Z,yField:ae,xs:q,ys:De}}function k(Y,Z,ae){let ce=Y.length,q=ae?.xSorted??!1,De=ae?.ySorted??!1,oe=q?Y[0]:1/0,te=De?Z[0]:1/0,fe=q?Y[ce-1]:-1/0,Te=De?Z[ce-1]:-1/0,ge=ae?.yLog;for(let ke=0;ke<ce;ke++)q||(oe=Math.min(oe,Y[ke]),fe=Math.max(fe,Y[ke])),De||(!ge||Z[ke]>0)&&(te=Math.min(te,Z[ke]),Te=Math.max(Te,Z[ke]));let he=ae?.xSize??0,me=ae?.ySize??0,ye=ae?.xMode,ue=ae?.yMode;if((!Number.isFinite(he)||he<=0)&&(ye=c.kW.Count,he=20),(!Number.isFinite(me)||me<=0)&&(ue=c.kW.Count,me=10),ye===c.kW.Count){let ke=(fe-oe)/Math.max(he-1,1),ot=ae?.xTime?b:S,lt=ot.findIndex(Ct=>Ct>ke)-1;he=ot[Math.max(lt,0)]}if(ue===c.kW.Count){let ke=(Te-te)/Math.max(me-1,1),ot=ae?.yTime?b:S,lt=ot.findIndex(Ct=>Ct>ke)-1;me=ot[Math.max(lt,0)]}let Oe=ae?.xCeil?ke=>(0,u.UO)(ke,he):ke=>(0,u.mB)(ke,he),Ue=ae?.yCeil?ke=>(0,u.UO)(ke,me):ke=>(0,u.mB)(ke,me);if(ge){me=1/(ae?.ySize??1);let ke=ge===2?Math.log2:Math.log10;Ue=ae?.yCeil?ot=>(0,u.UO)(ke(ot),me):ot=>(0,u.mB)(ke(ot),me)}let at=Oe(oe),Ne=Oe(fe),_e=Ue(te),Ke=Ue(Te),et=Math.round((Ne-at)/he)+1,ze=Math.round((Ke-_e)/me)+1,[je,Qe,We]=_(et,ze,at,he,_e,me,ge);for(let ke=0;ke<ce;ke++){if(ge&&Z[ke]<=0)continue;const ot=(Oe(Y[ke])-at)/he,lt=(Ue(Z[ke])-_e)/me,Ct=ot*ze+lt;We[Ct]++}return{x:je,y:Qe,count:We}}function _(Y,Z,ae,ce,q,De,oe){const te=Y*Z,fe=new Array(te),Te=new Array(te),ge=new Array(te);for(let he=0,me=0,ye=ae;he<te;me=++he%Z)ge[he]=0,oe?Te[he]=oe**(q+me*De):Te[he]=q+me*De,me===0&&he>=Z&&(ye+=ce),fe[he]=ye;return[fe,Te,ge]}},2213:(J,R,e)=>{"use strict";e.d(R,{Ii:()=>l,JJ:()=>a,ac:()=>r});var n=e(34547),a=(g=>(g.Prepare="prepare",g.Calculate="calculate",g.Modify="modify",g))(a||{}),l=(g=>(g.Heading="heading",g.Distance="distance",g.Area="area",g))(l||{}),r=(g=>(g.AsLine="asLine",g.LineBuilder="lineBuilder",g))(r||{});const o={action:"prepare",source:{mode:n.q1.Auto}}},10154:(J,R,e)=>{"use strict";e.d(R,{Lb:()=>i,Lp:()=>d,N7:()=>c});var n=e(88300),a=e(39583),l=e(36665),r=e(65268),o=e(88508),g=e(89591),m=e(2213);function d(E){const p=[];for(const h of E.values)h&&p.push(i(h));return new a.Z(p)}function u(E){const p=new Array(E.length);if(E.length>1){let h=f(E[0]);for(let y=1;y<E.length;y++){let s=f(E[y]);if(h&&s){let v=Math.atan2(s[0]-h[0],s[1]-h[1])*180/Math.PI;v<0&&(v+=360),p[y-1]=p[y]=v}}}else p.fill(0);return p}function i(E){return E instanceof l.Z?E.getCoordinates():(0,n.qg)(E.getExtent())}function f(E){if(E)return(0,r.bU)(i(E))}function c(E,p){const h=E.values,y=new Array(E.values.length),s=p.calc??m.Ii.Heading,v=p.field??s;switch(s){case m.Ii.Area:{for(let C=0;C<h.length;C++){const D=h[C];D&&(y[C]=(0,o.bg)(D))}return{name:v,type:g.fS.number,config:{unit:"areaM2"},values:y}}case m.Ii.Distance:{for(let C=0;C<h.length;C++){const D=h[C];D&&(y[C]=(0,o.xA)(D))}return{name:v,type:g.fS.number,config:{unit:"lengthm"},values:y}}case m.Ii.Heading:default:return{name:v,type:g.fS.number,config:{unit:"degree"},values:u(h)}}}},78533:(J,R,e)=>{"use strict";e.d(R,{X:()=>E});var n=e(41407),a=e(39953),l=e(46378),r=e(82803),o=e(70393),g=e(64447),m=e(43324),d=e(38637),u=e(71718);const i=(h,y)=>h-y*Math.floor(h/y),f=8,c=(h,y)=>({suggestionsWrapper:(0,n.css)({boxShadow:h.shadows.z2}),errorTooltip:(0,n.css)({position:"absolute",top:y+f+"px",zIndex:h.zIndex.tooltip}),inputWrapper:(0,n.css)({position:"relative"})}),E=({value:h="",onChange:y,suggestions:s,placeholder:v,error:C,invalid:D})=>{const[M,P]=(0,a.useState)(!1),[x,S]=(0,a.useState)(0),[I,T]=(0,a.useState)(h.toString()),[O,A]=(0,a.useState)(0),[B,b]=(0,a.useState)(0),[W,V]=(0,a.useState)(0),w=(0,r.l4)(),K=c(w,B),z=(0,a.useRef)(null),G=(0,a.useRef)(null);(0,a.useEffect)(()=>{A(p(G.current,x))},[x]);const Q=a.useCallback((_,Y=z.current)=>{const Z=Y.selectionStart,ae=Y.value;ae[W-1]==="$"?Y.value=ae.slice(0,W)+_.value+ae.slice(Z):Y.value=ae.slice(0,W)+"$"+_.value+ae.slice(Z),T(Y.value),P(!1),S(0),y(Y.value)},[y,W]),j=a.useCallback(_=>{if(!M){if(_.key==="$"||_.key===" "&&_.ctrlKey){V(z.current.selectionStart||0),P(!0);return}return}switch(_.key){case"Backspace":case"Escape":case"ArrowLeft":case"ArrowRight":return P(!1),S(0);case"Enter":return _.preventDefault(),Q(s[x]);case"ArrowDown":case"ArrowUp":_.preventDefault();const Y=_.key==="ArrowDown"?1:-1;return S(Z=>i(Z+Y,s.length));default:return}},[M,s,x,Q]),F=a.useCallback(_=>{T(_.currentTarget.value)},[]),k=a.useCallback(_=>{y(_.currentTarget.value)},[y]);return(0,a.useEffect)(()=>{b(z.current.clientHeight)},[]),a.createElement("div",{className:K.inputWrapper},M&&a.createElement(o.h_,null,a.createElement(l.r,{referenceElement:z.current,placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[0,0]}}]},({ref:_,style:Y,placement:Z})=>a.createElement("div",{ref:_,style:Y,"data-placement":Z,className:K.suggestionsWrapper},a.createElement(g.$,{scrollTop:O,autoHeightMax:"300px",setScrollTop:({scrollTop:ae})=>A(ae)},a.createElement(u.T,{activeRef:G,suggestions:s,onSuggestionSelect:Q,onClose:()=>P(!1),activeIndex:x}))))),D&&C&&a.createElement("div",{className:K.errorTooltip},a.createElement(m.S,null,C)),a.createElement(d.I,{placeholder:v,invalid:D,ref:z,value:I,onChange:F,onBlur:k,onKeyDown:j}))};E.displayName="SuggestionsInput";function p(h,y){return(h?.clientHeight??0)*y}},34484:(J,R,e)=>{"use strict";e.d(R,{Hg:()=>o,Vx:()=>m,f6:()=>d,jY:()=>g,rm:()=>u});var n=e(39953),a=e(69330),l=e(36602),r=e(32688);function o(i){return(0,n.useMemo)(()=>Array.isArray(i)?Object.keys(i.reduce((f,c)=>!c||!Array.isArray(c.fields)?f:c.fields.reduce((E,p)=>{const h=(0,a.CZ)(p,c,i);return E[h]=!0,E},f),{})):[],[i])}function g(i){const f=new Set;for(const c of i)for(const E of c.fields)if(E.labels)for(const p of Object.keys(E.labels))f.add(p);return f}const m={combine:"Combine",calculateNewFields:"Calculate new fields",createNewVisualization:"Create new visualization",filter:"Filter",performSpatialOperations:"Perform spatial operations",reformat:"Reformat",reorderAndRename:"Reorder and rename"},d=i=>!!(typeof i=="number"||!Number.isNaN(Number(i))||/^\$[A-Za-z0-9_]+$/.test(i)&&r.config.featureToggles.transformationsVariableSupport);function u(i){const f=[];i&&(f.push({label:"Browser",value:"browser"}),f.push({label:"UTC",value:"utc"}));const c=(0,l.ZV)();for(const E of c)f.push({label:E,value:E});return f}},74311:(J,R,e)=>{"use strict";e.d(R,{BR:()=>E,Fy:()=>c,PJ:()=>i,UL:()=>f,ZP:()=>h,eT:()=>m,k7:()=>u,tZ:()=>d,w4:()=>o});var n=e(77960),a=e(50820);const l={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,externalUserMngInfo:a.default.externalUserMngInfo,externalUserMngLinkName:a.default.externalUserMngLinkName,externalUserMngLinkUrl:a.default.externalUserMngLinkUrl,isLoading:!1,rolesLoading:!1},r=(0,n.oM)({name:"users",initialState:l,reducers:{usersLoaded:(y,s)=>{const{totalCount:v,perPage:C,page:D,orgUsers:M}=s.payload,P=Math.ceil(v/C);return{...y,isLoading:!0,users:M,perPage:C,page:D,totalPages:P}},searchQueryChanged:(y,s)=>({...y,searchQuery:s.payload,page:l.page}),setUsersSearchPage:(y,s)=>({...y,page:s.payload}),pageChanged:(y,s)=>({...y,page:s.payload}),sortChanged:(y,s)=>({...y,sort:s.payload}),usersFetchBegin:y=>({...y,isLoading:!0}),usersFetchEnd:y=>({...y,isLoading:!1}),rolesFetchBegin:y=>({...y,rolesLoading:!0}),rolesFetchEnd:y=>({...y,rolesLoading:!1})}}),{searchQueryChanged:o,setUsersSearchPage:g,usersLoaded:m,usersFetchBegin:d,usersFetchEnd:u,pageChanged:i,sortChanged:f,rolesFetchBegin:c,rolesFetchEnd:E}=r.actions,h={users:r.reducer}},16261:(J,R,e)=>{"use strict";e.d(R,{z:()=>a});var n=e(77663);const a=new n.B},12741:(J,R,e)=>{"use strict";e.d(R,{KJ:()=>y,M6:()=>p,Ue:()=>s,Z$:()=>v,ku:()=>h,m2:()=>E});var n=e(86832),a=e.n(n),l=e(52436),r=e(331),o=e(92101),g=e(87863),m=e(17174),d=e(45882),u=e(52471),i=e(49955),f=e(10171);const c="Filters",E=M=>async(P,x)=>{let S=D(M,x());if(!S&&(P(C(M)),S=D(M,x()),!S))return;const I=S.filters.findIndex(O=>O.key===M.key&&O.value===M.value);if(I===-1){const{value:O,key:A,operator:B}=M,b={value:O,key:A,operator:B};return await P(y((0,i.yQ)(S),b))}const T={...S.filters[I],operator:M.operator};return await P(p((0,i.yQ)(S),{index:I,filter:T}))},p=(M,P)=>async(x,S)=>{const I=(0,d.E0)(M,S());x((0,m.mb)(M.rootStateKey,(0,f.e_)((0,i.Y6)(I,P)))),await x((0,g.MB)((0,i.yQ)(I),!0))},h=(M,P)=>async(x,S)=>{const I=(0,d.E0)(M,S());x((0,m.mb)(M.rootStateKey,(0,f.DO)((0,i.Y6)(I,P)))),await x((0,g.MB)((0,i.yQ)(I),!0))},y=(M,P)=>async(x,S)=>{const I=(0,d.E0)(M,S());x((0,m.mb)(M.rootStateKey,(0,f.QL)((0,i.Y6)(I,P)))),await x((0,g.MB)((0,i.yQ)(I),!0))},s=(M,P)=>async(x,S)=>{const I=(0,d.E0)(M,S());x((0,m.mb)(M.rootStateKey,(0,f.aM)((0,i.Y6)(I,P)))),await x((0,g.MB)((0,i.yQ)(I),!0))},v=(M,P)=>async(x,S)=>{const I=(0,d.E0)(M,S());x((0,m.mb)(M.rootStateKey,(0,u.Pl)((0,i.Y6)(I,{propName:"datasource",propValue:P}))));const O=(await(0,l.ak)().get(P))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";x((0,m.mb)(M.rootStateKey,(0,r.z7)({infoText:O})))},C=M=>(P,x)=>{const S=(0,d.S_)(x()),I={...(0,n.cloneDeep)(f.Js),datasource:M.datasource,name:c,id:c,rootStateKey:S},T=!1,O=(0,d.Eo)(S,x()),A={type:"adhoc",id:I.id,rootStateKey:S};P((0,m.mb)(S,(0,u.VN)((0,i.Y6)(A,{global:T,model:I,index:O}))))},D=(M,P)=>{const x=(0,d.S_)(P),S=(0,d.AE)(x,P);return Object.values(S.variables).find(I=>(0,o.Kn)(I)&&I.datasource?.uid===M.datasource.uid)}},24524:(J,R,e)=>{"use strict";e.d(R,{F:()=>P});var n=e(39953),a=e(26005),l=e(62679),r=e(60314),o=e(12190),g=e(52436);const m=90,d=({datasource:x,onChange:S,disabled:I,filterKey:T,allFilters:O})=>{const A=()=>c(x,T,O),B=()=>E(x,T,O);return T===null?n.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},n.createElement(r.V,{disabled:I,className:"query-segment-key",Component:f,value:T,onChange:S,loadOptions:A,inputMinWidth:m})):n.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},n.createElement(r.V,{disabled:I,className:"query-segment-key",value:T,onChange:S,loadOptions:B,inputMinWidth:m}))},u="-- remove filter --",i={label:u,value:u},f=n.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},n.createElement(o.J,{name:"plus"})),c=async(x,S,I)=>{const T=await(0,g.ak)().get(x);if(!T||!T.getTagKeys)return[];const O=I.filter(B=>B.key!==S);return(await T.getTagKeys({filters:O})).map(B=>({label:B.text,value:B.text}))},E=async(x,S,I)=>{const T=await c(x,S,I);return[i,...T]};var p=e(6278);const h=({datasource:x,disabled:S,onChange:I,filterKey:T,filterValue:O,placeHolder:A,allFilters:B})=>{const b=()=>y(x,T,B);return n.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},n.createElement(r.V,{className:"query-segment-value",disabled:S,placeholder:A,value:O,onChange:I,loadOptions:b}))},y=async(x,S,I)=>{const T=await(0,g.ak)().get(x);if(!T||!T.getTagValues)return[];const O=(0,p.$t)().timeRange(),A=I.filter(b=>b.key!==S);return(await T.getTagValues({key:S,filters:A,timeRange:O})).map(b=>({label:b.text,value:b.text}))},s=["=","!=","<",">","=~","!~"].map(x=>({label:x,value:x})),v=({value:x,disabled:S,onChange:I})=>n.createElement(a.X,{className:"query-segment-operator",value:x,disabled:S,options:s,onChange:I}),C=({datasource:x,filter:{key:S,operator:I,value:T},onKeyChange:O,onOperatorChange:A,onValueChange:B,placeHolder:b,allFilters:W,disabled:V})=>n.createElement(n.Fragment,null,n.createElement(d,{disabled:V,datasource:x,filterKey:S,onChange:O,allFilters:W}),n.createElement("div",{className:"gf-form"},n.createElement(v,{disabled:V,value:I,onChange:A})),n.createElement(h,{disabled:V,datasource:x,filterKey:S,filterValue:T,allFilters:W,onChange:B,placeHolder:b})),D=({datasource:x,appendBefore:S,onCompleted:I,allFilters:T})=>{const[O,A]=(0,n.useState)(null),[B,b]=(0,n.useState)("="),W=(0,n.useCallback)(K=>{if(K.value!==u){A(K.value??"");return}A(null)},[A]),V=(0,n.useCallback)(K=>b(K.value??""),[b]),w=(0,n.useCallback)(K=>{I({value:K.value??"",operator:B,key:O}),A(null),b("=")},[I,B,O]);return O===null?n.createElement(d,{datasource:x,filterKey:O,onChange:W,allFilters:T}):n.createElement(n.Fragment,{key:"filter-builder"},S,n.createElement(C,{datasource:x,filter:{key:O,value:"",operator:B},placeHolder:(0,l.t)("variable.adhoc.placeholder","Select value"),onKeyChange:W,onOperatorChange:V,onValueChange:w,allFilters:T}))},M=({label:x})=>n.createElement("div",{className:"gf-form"},n.createElement("span",{className:"gf-form-label query-keyword"},x));class P extends n.PureComponent{constructor(){super(...arguments),this.onChange=(S,I)=>T=>{const{filters:O}=this.props,{value:A}=T;return T.value===u?this.props.removeFilter(S):this.props.changeFilter(S,{...O[S],[I]:A})},this.appendFilterToVariable=S=>{this.props.addFilter(S)}}render(){const{filters:S,disabled:I}=this.props;return n.createElement("div",{className:"gf-form-inline"},this.renderFilters(S,I),!I&&n.createElement(D,{datasource:this.props.datasource,appendBefore:S.length>0?n.createElement(M,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,allFilters:this.getAllFilters()}))}getAllFilters(){return this.props.baseFilters?this.props.baseFilters.concat(this.props.filters):this.props.filters}renderFilters(S,I){return S.length===0&&I?n.createElement(a.X,{disabled:I,value:"No filters",options:[],onChange:()=>{}}):S.reduce((T,O,A)=>(T.length>0&&T.push(n.createElement(M,{label:"AND",key:`condition-${A}`})),T.push(this.renderFilterSegments(O,A,I)),T),[])}renderFilterSegments(S,I,T){return n.createElement(n.Fragment,{key:`filter-${I}`},n.createElement(C,{disabled:T,datasource:this.props.datasource,filter:S,onKeyChange:this.onChange(I,"key"),onOperatorChange:this.onChange(I,"operator"),onValueChange:this.onChange(I,"value"),allFilters:this.getAllFilters()}))}}},10171:(J,R,e)=>{"use strict";e.d(R,{DO:()=>d,Js:()=>o,QL:()=>m,aM:()=>i,e_:()=>u,jo:()=>f});var n=e(77960),a=e(68734),l=e(45882),r=e(18266);const o={...a.Eg,type:"adhoc",datasource:null,filters:[]},g=(0,n.oM)({name:"templating/adhoc",initialState:r.s,reducers:{filterAdded:(c,E)=>{const p=(0,l.ir)(c,E.payload.id);p.type==="adhoc"&&p.filters.push(E.payload.data)},filterRemoved:(c,E)=>{const p=(0,l.ir)(c,E.payload.id);if(p.type!=="adhoc")return;const h=E.payload.data;p.filters.splice(h,1)},filterUpdated:(c,E)=>{const p=(0,l.ir)(c,E.payload.id);if(p.type!=="adhoc")return;const{filter:h,index:y}=E.payload.data;p.filters[y]=h},filtersRestored:(c,E)=>{const p=(0,l.ir)(c,E.payload.id);p.type==="adhoc"&&(p.filters=E.payload.data)}}}),{filterAdded:m,filterRemoved:d,filterUpdated:u,filtersRestored:i}=g.actions,f=g.reducer},87842:(J,R,e)=>{"use strict";e.d(R,{BH:()=>r,IG:()=>g,QX:()=>o,UY:()=>n,r2:()=>l,xk:()=>a});const n="00000000-0000-0000-0000-000000000000",a="All",l="$__all",r="None",o="",g="var-"},49812:(J,R,e)=>{"use strict";e.d(R,{R:()=>d,z:()=>m});var n=e(53461),a=e(39953),l=e(28888),r=e(82803),o=e(68421),g=e(54014);const m="Grafana-LegacyVariableQueryEditor",d=({onChange:u,query:i})=>{const f=(0,r.wW)(g.w),[c,E]=(0,a.useState)(i),p=s=>{E(s.currentTarget.value)},h=(0,a.useCallback)(s=>{u(s.currentTarget.value,s.currentTarget.value)},[u]),y=(0,n.Me)();return a.createElement(o.K,{id:y,rows:2,value:c,onChange:p,onBlur:h,placeholder:"Metric name or tags query",required:!0,"aria-label":l.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:f.textarea})};d.displayName=m},4778:(J,R,e)=>{"use strict";e.d(R,{e:()=>o});var n=e(41407),a=e(39953),l=e(82803),r=e(96276);function o({className:m,...d}){const u=(0,l.wW)(g);return a.createElement(r.D,{...d,className:(0,n.cx)(u.legend,m)})}function g(m){return{legend:(0,n.css)({marginTop:m.spacing(3),marginBottom:m.spacing(1)})}}},96134:(J,R,e)=>{"use strict";e.d(R,{u:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(96227),o=e(9558);function g({name:d,description:u,value:i,options:f,onChange:c,testId:E,width:p}){const h=(0,l.wW)(m),y=(0,a.useId)(),s=`variable-select-input-${d}-${y}`;return a.createElement(r.g,{label:d,description:u,htmlFor:s},a.createElement("div",{"data-testid":E},a.createElement(o.Ph,{inputId:s,onChange:c,value:i,width:p??30,options:f,className:h.selectContainer})))}function m(d){return{selectContainer:(0,n.css)`
      margin-right: ${d.spacing(.5)};
    `}}},54014:(J,R,e)=>{"use strict";e.d(R,{W:()=>m,w:()=>d});var n=e(41407),a=e(53461),l=e(39953),r=e(82803),o=e(96227),g=e(68421);function m({value:u,name:i,description:f,placeholder:c,onChange:E,onBlur:p,ariaLabel:h,required:y,width:s,testId:v}){const C=(0,r.wW)(d),D=(0,a.Me)();return l.createElement(o.g,{label:i,description:f,htmlFor:D},l.createElement(g.K,{id:D,rows:2,value:u,onChange:E,onBlur:p,placeholder:c,required:y,"aria-label":h,cols:s,className:C.textarea,"data-testid":v}))}function d(u){return{textarea:(0,n.css)`
      white-space: pre-wrap;
      min-height: ${u.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${u.spacing(.75,1)};
      width: inherit;

      ${u.breakpoints.down("sm")} {
        width: 100%;
      }
    `}}},72396:(J,R,e)=>{"use strict";e.d(R,{V:()=>o});var n=e(53461),a=e(39953),l=e(96227),r=e(38637);function o({value:g,name:m,placeholder:d="",onChange:u,testId:i,width:f,required:c,onBlur:E,grow:p,description:h,invalid:y,error:s,maxLength:v}){const C=(0,n.Me)(m);return a.createElement(l.g,{label:m,description:h,invalid:y,error:s,htmlFor:C},a.createElement(r.I,{type:"text",id:C,placeholder:d,value:g,onChange:u,onBlur:E,width:p?void 0:f??30,"data-testid":i,maxLength:v,required:c}))}},331:(J,R,e)=>{"use strict";e.d(R,{PF:()=>a,PV:()=>f,QR:()=>c,Sg:()=>i,Yo:()=>o,gl:()=>r,qe:()=>d,wJ:()=>m,y8:()=>g,z7:()=>u});var n=e(77960);const a={id:"",isValid:!0,errors:{},name:"",extended:null},l=(0,n.oM)({name:"templating/editor",initialState:a,reducers:{variableEditorMounted:(E,p)=>{E.name=p.payload.name,E.id=p.payload.id},variableEditorUnMounted:(E,p)=>a,changeVariableNameSucceeded:(E,p)=>{E.name=p.payload.data.newName,delete E.errors.name,E.isValid=Object.keys(E.errors).length===0},changeVariableNameFailed:(E,p)=>{E.name=p.payload.newName,E.errors.name=p.payload.errorText,E.isValid=Object.keys(E.errors).length===0},addVariableEditorError:(E,p)=>{E.errors[p.payload.errorProp]=p.payload.errorText,E.isValid=Object.keys(E.errors).length===0},removeVariableEditorError:(E,p)=>{delete E.errors[p.payload.errorProp],E.isValid=Object.keys(E.errors).length===0},changeVariableEditorExtended:(E,p)=>{E.extended={...E.extended,...p.payload}},cleanEditorState:()=>a}}),r=l.reducer,{changeVariableNameSucceeded:o,changeVariableNameFailed:g,variableEditorMounted:m,variableEditorUnMounted:d,changeVariableEditorExtended:u,addVariableEditorError:i,removeVariableEditorError:f,cleanEditorState:c}=l.actions},38361:(J,R,e)=>{"use strict";e.d(R,{c:()=>r});var n=e(79059),a=e(16261),l=e(87842);function r(o){const g={},m=(0,n.J)().getVariables();for(let d=0;d<m.length;d++){const u=m[d],i=o&&o[u.name];u.skipUrlSync||(i?g[l.IG+u.name]=i.value:g[l.IG+u.name]=a.z.get(u.type).getValueForUrl(u))}return g}},92101:(J,R,e)=>{"use strict";e.d(R,{$7:()=>h,Ju:()=>f,Kn:()=>r,Kr:()=>d,NX:()=>p,R:()=>i,U4:()=>g,VC:()=>o,X7:()=>E,Xh:()=>l,d7:()=>c,eL:()=>m});var n=e(95405),a=e(49812);const l=y=>y.type==="query",r=y=>y.type==="adhoc",o=y=>y.type==="constant",g=y=>"multi"in y,m=y=>"options"in y,d=y=>"current"in y;function u(y){return y===null?!1:typeof y=="string"}const i=y=>!!y.metricFindQuery&&!y.variables,f=y=>{if(!y.variables||y.variables.getType()!==n.j2.Standard)return!1;const s=y.variables;return"toDataQuery"in s&&!!s.toDataQuery},c=y=>{if(!y.variables||y.variables.getType()!==n.j2.Custom)return!1;const s=y.variables;return"query"in s&&"editor"in s&&!!s.query&&!!s.editor},E=y=>y.variables?y.variables.getType()===n.j2.Datasource:!1;function p(y,s){return y?y.displayName===a.z||i(s):!1}function h(y,s){return y?y.displayName!==a.z&&(E(s)||f(s)||c(s)):!1}},24568:(J,R,e)=>{"use strict";e.d(R,{Kf:()=>a,iV:()=>r,j4:()=>o});var n=e(77960);const a={usages:[],usagesNetwork:[]},l=(0,n.oM)({name:"templating/inspect",initialState:a,reducers:{initInspect:(g,m)=>{const{usages:d,usagesNetwork:u}=m.payload;g.usages=d,g.usagesNetwork=u}}}),r=l.reducer,{initInspect:o}=l.actions},3415:(J,R,e)=>{"use strict";e.d(R,{MJ:()=>f,GQ:()=>u,V:()=>y,Of:()=>i,PQ:()=>C,dH:()=>T,Yg:()=>s,Rv:()=>S,vI:()=>P});var n=e(24824);function a(O,A){const B=new Set;for(const b of O)B.add(A(b));return B}var l=e(6947),r=e(44951),o=e(75397),g=e(16261),m=e(92101),d=e(49955);const u=O=>{const A=[];for(const B of O)A.push({id:B.id,label:`${B.id}`});return A},i=(O,A)=>O.filter(B=>A.some(b=>b.from===B.id||b.to===B.id)),f=O=>{const A=[];for(const B of O)for(const b of O){if(B===b)continue;g.z.get(B.type).dependsOn(B,b)&&A.push({from:B.id,to:b.id})}return A};function c(O){const A=(0,d.a9)(O);return A?A.slice(1).find(b=>b!==void 0):void 0}const E=(O,A)=>{d.J7.lastIndex=0;const B=[],W=(0,r.Xh)(A,2).match(d.J7);if(!W)return B;for(const V of W){if(!V||V.indexOf("$__")!==-1||V.indexOf("${__")!==-1||V.indexOf("$hashKey")!==-1)continue;const w=c(V);O.some(K=>K.id===w)||B.find(K=>K===w)||w&&B.push(w)}return B},p={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},h=(O,A,B)=>{const b=Object.keys(A.value).reduce((V,w)=>{const K=A.value[w];if(!K||typeof K!="string")return V;const z=p[w]?p[w].find(Q=>Q.test(O)):void 0;let G=(0,d.QI)(K,O);return w==="repeat"&&K===O&&(G=!0),!z&&G&&(V={...V,[w]:K}),V},{}),W=Object.keys(A.value).reduce((V,w)=>{const K=A.value[w];if(K&&typeof K=="object"&&Object.keys(K).length){let z=K.title||K.name||K.id||w;Array.isArray(A.value)&&A.key==="panels"&&(z=`${z}[${K.id}]`);const G=h(O,{key:w,value:K},{});Object.keys(G).length&&(V={...V,[z]:G})}return V},{});return(Object.keys(b).length||Object.keys(W).length)&&(B={...B,...b,...W}),B},y=(O,A)=>{if(!A)return{unUsed:[],usages:[]};const B=[];let b=[];const W=A.getSaveModelCloneOld();for(const V of O){const w=V.id,K=h(w,{key:"model",value:W},{});!Object.keys(K).length&&!(0,m.Kn)(V)&&B.push(V),Object.keys(K).length&&b.push({variable:V,tree:K})}return{unUsed:B,usages:b}};async function s(O,A){return new Promise((B,b)=>{setTimeout(()=>{try{const W=v(O,A);B(P(W))}catch(W){b(W)}},200)})}function v(O,A){if(!A)return[];let B=[];const b=A.getSaveModelCloneOld(),W=E(O,b);for(const V of W){const w=h(V,{key:"model",value:b},{});if(Object.keys(w).length){const K={id:V,name:V};B.push({variable:K,tree:w})}}return B}function C(O,A,B){const b=a(A.descendants(O),V=>V.name);b.add(n.W.includeVars);for(const V of O)b.add(V);return D([...b],B)}function D(O,A){const B=[];for(const b of O)A[b]&&B.push(...A[b]);return new Set(B)}const M=(O,A)=>{const{id:B,value:b}=A,{nodes:W,edges:V}=O;if(b&&typeof b=="string"){const w=`${A.id}-${b}`;return W.push({id:w,label:b}),V.push({from:w,to:B}),O}if(b&&typeof b=="object"){const w=Object.keys(b);for(const K of w){const z=`${A.id}-${K}`;W.push({id:z,label:K}),V.push({from:z,to:B}),O=M(O,{id:z,value:b[K]})}return O}return O},P=O=>{const A=[];for(const B of O){const{variable:b,tree:W}=B,V={variable:b,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};A.push(M(V,{id:"dashboard",value:W}))}return A},x=O=>Object.values(O).reduce((B,b)=>typeof b=="object"?B+x(b):B+1,0),S=(O,A)=>{const B=A.find(b=>b.variable.id===O);return B?x(B.tree):0};function I(O){const A=[];for(const B of O)A.push(B),B.panels?.length&&A.push(...I(B.panels.map(b=>new PanelModel(b))));return A}function T(O){const A={};for(const B of O){const b=(0,l.Jg)(B),W=[...b.matchAll(/"repeat":"([^"]+)"/g)].map(K=>K[1]),V=b.match(d.J7)?.map(K=>c(K))??[],w=[...W,...V];for(const K of w)K in A?A[K].add(B.id):A[K]=new Set([B.id])}return A}},91482:(J,R,e)=>{"use strict";e.d(R,{T6:()=>m,kv:()=>i,vH:()=>u});var n=e(77960),a=e(86832),l=e.n(a),r=e(45882),o=e(18266),g=e(68734);const m={...g.Eg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:g.Bd.onTimeRangeChanged,current:{}},d=(0,n.oM)({name:"templating/interval",initialState:o.s,reducers:{createIntervalOptions:(f,c)=>{const E=(0,r.ir)(f,c.payload.id);if(E.type!=="interval")return;const p=(0,a.map)(E.query.match(/(["'])(.*?)\1|\w+/g),h=>(h=h.replace(/["']+/g,""),{text:h.trim(),value:h.trim(),selected:!1}));E.auto&&p.length&&p[0].text!=="auto"&&p.unshift({text:"auto",value:"$__auto_interval_"+E.name,selected:!1}),E.options=p}}}),u=d.reducer,{createIntervalOptions:i}=d.actions},74557:(J,R,e)=>{"use strict";e.d(R,{XJ:()=>S,nn:()=>v,yy:()=>m,Ew:()=>C,cv:()=>I,aN:()=>s,iQ:()=>D,_M:()=>y,ss:()=>P,wF:()=>x,Ug:()=>M});var n=e(77960),a=e(86832),l=e(40729);const r=(T,...O)=>O.reduce((A,B)=>B(A),T);var o=e(87842),g=e(92101);const m={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},d=1e3,u=T=>Array.isArray(T)?T.reduce((O,A)=>((0,a.isString)(A.value)&&(O[A.value]=A),O),{}):{},i=T=>{if(!Array.isArray(T.options))return T.options=[],T;const O=u(T.selectedValues);return T.selectedValues=Object.values(O),T.options=T.options.map(A=>{if(!(0,a.isString)(A.value))return A;const B=!!O[A.value];return A.selected===B?A:{...A,selected:B}}),T.options=f(T.options),T},f=T=>Array.isArray(T)?T.length<=d?T:T.slice(0,d):[],c=T=>{const{options:O,selectedValues:A}=T;return O.length===0||A.length>0||!O[0]||O[0].value!==o.r2||(T.selectedValues=[{...O[0],selected:!0}]),T},E=T=>{const{selectedValues:O}=T;return O.length>1&&(T.selectedValues=O.filter(A=>A.value!==o.r2)),T},p=T=>T.filter(O=>O.value!==o.r2).map(O=>({...O,selected:!0})),h=(0,n.oM)({name:"templating/optionsPicker",initialState:m,reducers:{showOptions:(T,O)=>{const{query:A,options:B}=O.payload;if(T.highlightIndex=-1,T.options=(0,a.cloneDeep)(B),T.id=O.payload.id,T.queryValue="",T.multi=!1,(0,g.U4)(O.payload)&&(T.multi=O.payload.multi??!1),(0,g.Xh)(O.payload)){const{queryValue:b}=O.payload,W=(0,l.b)(A);T.queryValue=W&&b?b:""}return T.selectedValues=T.options.filter(b=>b.selected),r(T,c,i)},hideOptions:(T,O)=>({...m}),toggleOption:(T,O)=>{const{option:A,clearOthers:B,forceSelect:b}=O.payload,{multi:W,selectedValues:V}=T;if(A){const w=!V.find(K=>K.value===A.value&&K.text===A.text);if(A.value===o.r2||!W||B)return w||b?T.selectedValues=[{...A,selected:!0}]:T.selectedValues=[],r(T,c,E,i);if(b||w)return T.selectedValues.push({...A,selected:!0}),r(T,c,E,i);T.selectedValues=V.filter(K=>K.value!==A.value&&K.text!==A.text)}else T.selectedValues=[];return r(T,c,E,i)},moveOptionsHighlight:(T,O)=>{let A=T.highlightIndex+O.payload;return A<0?A=-1:A>=T.options.length&&(A=T.options.length-1),{...T,highlightIndex:A}},toggleAllOptions:(T,O)=>{const A=T.selectedValues.find(b=>b.value===o.r2),B=T.options.find(b=>b.value===o.r2);return T.selectedValues.length>0&&B&&!A?(T.selectedValues=[],T.selectedValues.push({text:B.text??"All",value:B.value,selected:!0}),r(T,i)):A&&T.selectedValues.length===1?(T.selectedValues=p(T.options),r(T,i)):T.selectedValues.length>0&&!B?(T.selectedValues=[],r(T,i)):(T.selectedValues=p(T.options),r(T,i))},updateSearchQuery:(T,O)=>(T.queryValue=O.payload,T),updateOptionsAndFilter:(T,O)=>{const A=(0,a.trimStart)((T.queryValue??"").toLowerCase());return T.options=O.payload.filter(B=>{const b=B.text??"";return(Array.isArray(b)?b.toString():b).toLowerCase().indexOf(A)!==-1}),T.highlightIndex=0,r(T,c,i)},updateOptionsFromSearch:(T,O)=>(T.options=O.payload,T.highlightIndex=0,r(T,c,i)),cleanPickerState:()=>m}}),{toggleOption:y,showOptions:s,hideOptions:v,moveOptionsHighlight:C,toggleAllOptions:D,updateSearchQuery:M,updateOptionsAndFilter:P,updateOptionsFromSearch:x,cleanPickerState:S}=h.actions,I=h.reducer},84096:(J,R,e)=>{"use strict";e.d(R,{x:()=>n});const n=(r,o)=>r&&(o&&!Array.isArray(r.value)?{...r,value:l(r.value),text:l(r.text)}:!o&&Array.isArray(r.value)?{...r,value:a(r.value),text:a(r.text)}:r),a=r=>Array.isArray(r)?r.length>0?r[0]:"":r,l=r=>Array.isArray(r)?r:[r]},87863:(J,R,e)=>{"use strict";e.d(R,{wX:()=>ot,Z7:()=>ae,LX:()=>Qe,DU:()=>_e,Fz:()=>me,Ci:()=>Te,xs:()=>et,Rk:()=>lt,xQ:()=>he,MB:()=>ue});var n=e(86832),a=e(69084),l=e(10694),r=e(47635),o=e(13601),g=e(32688),m=e(97316),d=e(97125),u=e(6278),i=e(74600),f=e(90634),c=e(21308),E=e(20367),p=e(14211),h=e(52436),y=e(41182),s=e(16261),v=e(87842),C=e(331),D=e(92101),M=e(3415),P=e(74557),x=e(84096),S=e(68734),I=e(49955),T=e(41406),O=e(795),A=e(17174),B=e(6646);const b=(Be,Le=-1,le=!1,de=!1)=>{const X={};if(de){const se={...initialVariableModelState,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"A dashboard title",uid:"An dashboard UID",toString:()=>"A dashboard title"}}},re={...initialVariableModelState,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"An org name",id:1,toString:()=>"1"}}},pe={...initialVariableModelState,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{login:"admin",id:1,email:"admin@test",toString:()=>"1"}}};X[se.id]=se,X[re.id]=re,X[pe.id]=pe}for(let se=0;se<Be;se++)X[se]=createQueryVariable({id:se.toString(),name:`Name-${se}`,label:`Label-${se}`,index:se});return le&&(X[NEW_VARIABLE_ID]=createQueryVariable({id:NEW_VARIABLE_ID,name:`Name-${NEW_VARIABLE_ID}`,label:`Label-${NEW_VARIABLE_ID}`,index:Be})),X},W=(Be,Le={})=>{const le={id:"0",rootStateKey:"key",index:0,name:"0"};return{initialState:{0:{...{...Be.initialState,...le},...Le}}}},V=()=>combineReducers({dashboard:dashboardReducer,templating:keyedVariablesReducer}),w=()=>combineReducers({templating:keyedVariablesReducer});function K(Be,Le){return{templating:{lastKey:Be,keys:{[Be]:{...getInitialTemplatingState(),...Le}}}}}function z(Be,Le){return Be.find(de=>de.name===Le)}function G(Be){return(Be.type==="query"||Be.type==="datasource"||Be.type==="interval")&&Be.refresh===T.Bd.onTimeRangeChanged}var Q=e(45882),j=e(52471),F=e(33022),k=e(16234);const _=(Be,Le)=>(le,de)=>{let X=0;const se=Le.templating.list;for(let pe=0;pe<se.length;pe++){const be=Y(se[pe]);be.rootStateKey=Be,s.z.getIfExists(be.type)&&le((0,A.mb)(Be,(0,j.VN)((0,I.Y6)(be,{global:!1,index:X++,model:be}))))}(0,y.J)().updateTimeRange((0,u.$t)().timeRange());const re=(0,Q.gt)(Be,de());for(const pe of re)le((0,A.mb)(Be,(0,j.Mn)((0,I.Y6)(pe))))};function Y(Be){if(!(0,D.eL)(Be))return Be;let Le=!1;for(const le of Be.options)if(le.selected=!1,Array.isArray(Be.current.value))for(const de of Be.current.value)le.value===de&&(le.selected=Le=!0);else le.value===Be.current.value&&(le.selected=Le=!0);return!Le&&Be.options.length&&(Be.options[0].selected=!0),Be}const Z=(Be,Le)=>le=>{const de={...S.Eg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:S.bU.hideVariable,current:{value:{name:Le.title,uid:Le.uid,toString:()=>Le.title}}};le((0,A.mb)(Be,(0,j.VN)((0,I.Y6)(de,{global:de.global,index:de.index,model:de}))));const X={...S.Eg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:S.bU.hideVariable,current:{value:{name:d.contextSrv.user.orgName,id:d.contextSrv.user.orgId,toString:()=>d.contextSrv.user.orgId.toString()}}};le((0,A.mb)(Be,(0,j.VN)((0,I.Y6)(X,{global:X.global,index:X.index,model:X}))));const se={...S.Eg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:S.bU.hideVariable,current:{value:{login:d.contextSrv.user.login,id:d.contextSrv.user.id,email:d.contextSrv.user.email,toString:()=>d.contextSrv.user.id.toString()}}};le((0,A.mb)(Be,(0,j.VN)((0,I.Y6)(se,{global:se.global,index:se.index,model:se}))))},ae=(Be,Le)=>(le,de)=>{const{rootStateKey:X}=Be,se=(0,Q.E0)(Be,de());if(!(0,D.U4)(se)||(0,a.Q)(se.current))return;const re=(0,x.x)(se.current,Le);le((0,A.mb)(X,(0,j.Pl)((0,I.Y6)(Be,{propName:"multi",propValue:Le})))),le((0,A.mb)(X,(0,j.Pl)((0,I.Y6)(Be,{propName:"current",propValue:re}))))},ce=async(Be,Le)=>{if(!Be.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Be.id}`);if(q(Be,Le))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const le=De(Be,Le);oe(Be.rootStateKey,le,Le)&&await new Promise(de=>{const X=i.h.subscribe(()=>{if(!Be.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Be.id}`);oe(Be.rootStateKey,le,i.h.getState())||(X(),de())})})},q=(Be,Le,le=new Set)=>le.has(Be.id)?!0:(le=new Set([...le,Be.id]),De(Be,Le).some(de=>q(de,Le,le))),De=(Be,Le)=>{if(!Be.rootStateKey)return[];const le=[];for(const de of(0,Q.gt)(Be.rootStateKey,Le))Be!==de&&s.z.getIfExists(Be.type)&&s.z.get(Be.type).dependsOn(Be,de)&&le.push(de);return le},oe=(Be,Le,le)=>{if(Le.length===0)return!1;const de=(0,Q.gt)(Be,le);return Le.filter(se=>de.some(re=>re.id===se.id&&(re.state===l.Gu.NotStarted||re.state===l.Gu.Loading))).length>0},te=(Be,Le)=>async(le,de)=>{const X=(0,Q.E0)(Be,de());await ce(X,de());const se=Le[v.IG+X.name];if(se!==void 0){const re=(0,I.Hi)(se);await s.z.get(X.type).setValueFromUrl(X,re);return}if(X.hasOwnProperty("refresh")){const re=X;if(re.refresh===S.Bd.onDashboardLoad||re.refresh===S.Bd.onTimeRangeChanged){await le(lt((0,I.yQ)(re)));return}}if(X.type==="custom"){await le(lt((0,I.yQ)(X)));return}le(wt(Be))},fe=Be=>async(Le,le)=>{const de=o.E1.getSearchObject(),X=(0,Q.gt)(Be,le()).map(async se=>await Le(te((0,I.yQ)(se),de)));await Promise.all(X)},Te=(Be,Le)=>async(le,de)=>{const X=(0,I.Hi)(Le),se=(0,Q.E0)(Be,de());(0,I.iD)(se)!==S.Bd.never&&await le(lt((0,I.yQ)(se)));const re=(0,Q.E0)((0,I.yQ)(se),de());if(!(0,D.eL)(re))return;if(!re)throw new Error(`Couldn't find variable with name: ${se.name}`);let pe=re.options.find(be=>be.text===X||be.value===X);if(!pe&&(0,D.U4)(re)&&re.allValue&&X===re.allValue&&(pe={text:v.xk,value:v.r2,selected:!1}),!pe){let be=X;const xe=X;Array.isArray(X)&&(be=X.reduce((Pe,we)=>{const Fe=re.options.find(He=>He.value===we);return Fe?[].concat(Pe,[Fe.text]):[].concat(Pe,[we])},[])),pe={text:be,value:xe,selected:!1}}(0,D.U4)(re)&&(pe=(0,x.x)({text:(0,n.castArray)(pe.text),value:(0,n.castArray)(pe.value),selected:!1},re.multi)),await s.z.get(se.type).setValue(re,pe)},ge=Be=>{let Le,le,de,X;const se=[];for(Le=0;Le<Be.options.length;Le++)if(X={...Be.options[Le]},X.selected=!1,Array.isArray(Be.current.value))for(le=0;le<Be.current.value.length;le++)de=Be.current.value[le],X.value===de&&(X.selected=!0,se.push(X));else X.value===Be.current.value&&(X.selected=!0,se.push(X));return se},he=(Be,Le)=>(le,de)=>{const X=(0,Q.E0)(Be,de());if(!(0,D.eL)(X))return Promise.resolve();const se=X.current||{},re=s.z.get(X.type).setValue;if(Array.isArray(se.value)){const Pe=ge(X);if(Pe.length===0){const Fe=X.options[0];return re(X,Fe)}const we={value:Pe.map(Fe=>Fe.value),text:Pe.map(Fe=>Fe.text),selected:!0};return re(X,we)}let pe=null;const be=(0,I.Tt)(X),xe=(0,I.N9)(X);if(pe=X.options?.find(Pe=>Pe.text===be||Pe.value===xe),pe||Le&&(pe=X.options?.find(Pe=>Pe.text===Le||Pe.value===Le),pe))return re(X,pe);if(X.options){const Pe=X.options[0];if(Pe)return re(X,Pe)}return Promise.resolve()},me=(Be,Le,le)=>async de=>{const{rootStateKey:X}=Be;return de((0,A.mb)(X,(0,j.Q8)((0,I.Y6)(Be,{option:Le})))),await de(ue(Be,le))},ye=Be=>{const Le=new p.kJ;return Be.forEach(le=>{Le.createNode(le.name)}),Be.forEach(le=>{Be.forEach(de=>{le!==de&&s.z.get(le.type).dependsOn(le,de)&&Le.link(le.name,de.name)})}),Le},ue=(Be,Le,le=c.h$)=>async(de,X)=>{const se=X(),{rootStateKey:re}=Be,pe=(0,Q.E0)(Be,se);if((0,Q.AE)(re,se).transaction.status===S.LN.Fetching)return(0,I.iD)(pe)===S.Bd.never&&(await de(Lt((0,I.yQ)(pe))),de(wt(Be))),Promise.resolve();const be=(0,Q.gt)(re,se),xe=ye(be),Pe=se.dashboard?.getModel()?.panels??[],we=(0,M.dH)(Pe),Fe=(0,D.Kn)(pe)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,M.PQ)([pe.id],xe,we)),variable:(0,Q.E0)(Be,se)},He=xe.getNode(pe.name);let Xe=[];return He&&(Xe=He.getOptimizedInputEdges().map(dt=>{const ct=be.find(At=>At.name===dt.inputNode?.name);return ct?de(lt((0,I.yQ)(ct))):Promise.resolve()})),Promise.all(Xe).then(()=>{Le&&(le.publish(new S.x9(Fe)),o.E1.partial(je(re,X)))})},Oe=(Be,Le,le,de)=>(Le.includes(Be.name)||Le.push(Be.name),Be.outputEdges.forEach(X=>{const se=X.outputNode;if(se&&!Le.includes(se.name)){const re=le.find(pe=>pe.name===se.name);re&&re.refresh===S.Bd.onTimeRangeChanged&&de.indexOf(re)===-1?(de.push(re),Le.push(se.name)):Oe(se,Le,le,de)}}),de),Ue=(Be,Le)=>Be.outputEdges.every(le=>{const de=le.outputNode;if(de){const X=z(Le,de.name);if(X&&X.type==="query")return X.refresh!==S.Bd.onTimeRangeChanged}return!0}),at=(Be,Le)=>{const le=(0,Q.gt)(Be,Le),de=ye(le),X=[],se=[];return le.forEach(re=>{const pe=de.getNode(re.name);if(!X.includes(re.name)&&pe){const be=z(le,pe.name);if(!be)return;const xe=G(be);xe&&pe.outputEdges.length===0&&se.push(be),xe&&se.includes(be)&&pe.outputEdges.length>0&&(se.push(be),Oe(pe,X,le,se)),xe&&pe.outputEdges.length>0&&Ue(pe,le)&&(se.includes(be)||se.push(be)),!xe&&pe.outputEdges.length>0&&Oe(pe,X,le,se)}}),se},Ne=(Be,Le)=>(0,Q.gt)(Be,Le).filter(X=>X.hasOwnProperty("refresh")&&X.hasOwnProperty("options")?X.refresh===S.Bd.onTimeRangeChanged:!1),_e=(Be,Le,le={templateSrv:(0,y.J)(),events:c.h$})=>async(de,X)=>{le.templateSrv.updateTimeRange(Le);let se=[];g.config.featureToggles.refactorVariablesTimeRange?se=at(Be,X()):se=Ne(Be,X());const re=se.map(be=>be.id),pe=se.map(be=>de(Ke((0,I.yQ)(be))));try{await Promise.all(pe),le.events.publish(new S.eq({variableIds:re}))}catch(be){console.error(be),de((0,m.$l)(Ct("Template variable service failed",be)))}},Ke=Be=>async(Le,le)=>{const de=(0,Q.E0)(Be,le());if(!(0,D.eL)(de))return;const X=de.options.slice();await Le(lt((0,I.yQ)(de),!0));const se=(0,Q.E0)(Be,le());if(!(0,D.eL)(se))return;const re=se.options;JSON.stringify(X)!==JSON.stringify(re)&&le().dashboard.getModel()?.templateVariableValueUpdated()},et=(Be,Le,le=c.h$)=>async(de,X)=>{const se=[],re=X().dashboard.getModel(),pe=(0,Q.gt)(Be,X());for(const Fe of pe){const He=v.IG+Fe.name;if(!Le.hasOwnProperty(He)||!ze(Fe,Le[He].value))continue;let Xe=Le[He].value;if(Le[He].removed){const ct=re?.templating.list.find(At=>At.name===Fe.name);ct&&(0,D.Kr)(ct)&&(Xe=ct.current.value),ct&&(0,D.VC)(ct)&&(Xe=ct.query)}const dt=s.z.get(Fe.type).setValueFromUrl(Fe,Xe);se.push(dt)}const be=pe.filter(Fe=>{const He=v.IG+Fe.name;return Le.hasOwnProperty(He)&&ze(Fe,Le[He].value)&&!(0,D.Kn)(Fe)}),xe=ye(pe),Pe=(0,M.dH)(re?.panels??[]),we=(0,M.PQ)(be.map(Fe=>Fe.id),xe,Pe);se.length&&(await Promise.all(se),le.publish(new S.Wy({refreshAll:we.size===0,panelIds:Array.from(we)})))};function ze(Be,Le){const le=s.z.get(Be.type).getValueForUrl(Be);let de=(0,I.Hi)(Le);return Array.isArray(le)&&!Array.isArray(de)&&(de=[de]),!(0,n.isEqual)(le,de)}const je=(Be,Le)=>{const le=o.E1.getSearchObject(),de=Object.keys(le).filter(X=>X.indexOf(v.IG)===-1).reduce((X,se)=>(X[se]=le[se],X),{});for(const X of(0,Q.gt)(Be,Le())){if(X.skipUrlSync)continue;const se=s.z.get(X.type);de[v.IG+X.name]=se.getValueForUrl(X)}return de},Qe=(Be,Le)=>async(le,de)=>{try{const X=(0,I.mn)(Be),se=de(),re=(0,Q.cp)(se);re&&(0,Q.AE)(re,se).transaction.status===S.LN.Fetching&&le(ot(re)),le((0,A.mb)(X,(0,F.Z9)({uid:X}))),le(Z(X,Le)),le(_(X,Le)),le(We(X)),await le(fe(X)),le((0,A.mb)(X,(0,F.iv)({uid:X})))}catch(X){le((0,m.$l)(Ct("Templating init failed",X))),console.error(X)}};function We(Be,Le=h.ak){return(le,de)=>{const X=(0,Q.gt)(Be,de());for(const se of X){if(!(0,D.Kn)(se)&&!(0,D.Xh)(se))continue;const{datasource:re}=se;if((0,r.cv)(re))continue;const pe=Le().getInstanceSettings(re),be=pe?(0,r.iU)(pe):{uid:re};le((0,A.mb)(Be,(0,j.Pl)((0,I.Y6)(se,{propName:"datasource",propValue:be}))))}}}const ke=Be=>Le=>{Le((0,A.mb)(Be,(0,k.S)())),Le((0,A.mb)(Be,(0,C.QR)())),Le((0,A.mb)(Be,(0,P.XJ)())),Le((0,A.mb)(Be,(0,F.p3)()))},ot=(Be,Le={getBackendSrv:E.i})=>le=>{Le.getBackendSrv().cancelAllInFlightRequests(),le(ke(Be))},lt=(Be,Le=!1)=>async(le,de)=>{const{rootStateKey:X}=Be;try{if(!(0,I.A3)(X,de()))return;const se=(0,Q.E0)(Be,de());le((0,A.mb)(X,(0,j.$M)((0,I.Y6)(se)))),await le(Lt((0,I.yQ)(se))),await s.z.get(se.type).updateOptions(se),le(wt(Be))}catch(se){if(le((0,A.mb)(X,(0,j.Le)((0,I.Y6)(Be,{error:se})))),Le||(console.error(se),le((0,m.$l)(Ct("Error updating options:",se,Be)))),Le)throw se}},Ct=(Be,Le,le)=>(0,f.t_)(`${le?`Templating [${le.id}]`:"Templating"}`,`${Be} ${Le.message}`),wt=Be=>(Le,le)=>{const{rootStateKey:de}=Be;if(!(0,I.A3)(de,le()))return;const X=(0,Q.E0)(Be,le());X.state!==l.Gu.Done&&Le((0,A.mb)(Be.rootStateKey,(0,j.qQ)((0,I.Y6)(X))))};function Lt(Be,Le=h.ak){return async function(le,de){const{id:X,rootStateKey:se}=Be;if(!(0,I.A3)(se,de()))return;const re=(0,Q.E0)(Be,de());if(re.type==="query")try{const pe=await Le().get(re.datasource??"");if((0,D.R)(pe)||!(0,D.Ju)(pe)||Ye(re.query))return;const be={refId:`${pe.name}-${X}-Variable-Query`,query:re.query};le((0,A.mb)(se,(0,j.Pl)((0,I.Y6)(Be,{propName:"query",propValue:be}))))}catch(pe){le((0,m.$l)(Ct("Failed to upgrade legacy queries",pe))),console.error(pe)}}}function Ye(Be){return Be?Be.hasOwnProperty("refId")&&typeof Be.refId=="string":!1}},17174:(J,R,e)=>{"use strict";e.d(R,{ZP:()=>u,mb:()=>g,qM:()=>r});var n=e(49955),a=e(6646),l=e(33022);const r={keys:{}},o=i=>({type:`templating/keyed/${i.action.type.replace(/^templating\//,"")}`,payload:i});function g(i,f){const c=(0,n.mn)(i);return o({key:c,action:f})}const m=i=>typeof i.type=="string"&&i.type.startsWith("templating/keyed")&&"payload"in i&&typeof i.payload.key=="string";function d(i=r,f){if(m(f)){const{key:c,action:E}=f.payload,p=(0,n.mn)(c),h=l.Z9.match(E)?p:i.lastKey,y=(0,a.Q)(),s=i.keys[p],v=y(s,E);return{...i,lastKey:h,keys:{...i.keys,[p]:v}}}return i}const u={templating:d}},6646:(J,R,e)=>{"use strict";e.d(R,{L:()=>i,Q:()=>u});var n=e(44722),a=e(331),l=e(24568),r=e(74557),o=e(33022),g=e(18266),m=e(16234);let d;function u(){return d||(d=(0,n.combineReducers)({editor:a.gl,variables:m.L,optionsPicker:r.cv,transaction:o.vw,inspect:l.iV})),d}function i(){return{editor:a.PF,variables:g.s,optionsPicker:r.yy,transaction:o.xO,inspect:l.Kf}}},45882:(J,R,e)=>{"use strict";e.d(R,{AE:()=>m,E0:()=>o,Eo:()=>c,IV:()=>i,Q4:()=>s,QT:()=>E,S_:()=>y,_K:()=>C,cp:()=>h,gt:()=>d,ir:()=>D,ng:()=>v,xD:()=>f});var n=e(16360),a=e(74600),l=e(49955),r=e(6646);function o(M,P=(0,a.y0)(),x=!0){const{id:S,rootStateKey:I}=M,O=m(I,P).variables[S];if(!O){if(x)throw new Error(`Couldn't find variable with id:${S}`);return}return O}function g(M,P,x=(0,a.y0)()){return Object.values(m(P,x).variables).filter(M).sort((S,I)=>S.index-I.index)}function m(M,P=(0,a.y0)()){return P.templating.keys[(0,l.mn)(M)]??(0,r.L)()}function d(M,P=(0,a.y0)()){return g(u,M,P)}function u(M){return M.type!=="system"}const i=(0,n.Z)((M,P)=>d(M,(0,a.y0)())),f=(M,P)=>d(M,P);function c(M,P=(0,a.y0)()){return E(Object.values(m(M,P).variables))}function E(M){const P=M.filter(u).sort((x,S)=>x.index-S.index);return P.length>0?P[P.length-1].index+1:0}function p(M,P=getState()){return m(M,P).transaction.isDirty}function h(M=(0,a.y0)()){return M.templating?.lastKey}function y(M=(0,a.y0)()){if(!M.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return M.templating.lastKey}function s(M,P=(0,a.y0)()){const x=h(P);return x?g(M,x,P):[]}function v(M=(0,a.y0)()){const P=h(M);return P?d(P,M):[]}function C(M,P=(0,a.y0)()){const x=h(P);if(x)return o({id:M,rootStateKey:x,type:"query"},P,!1)}function D(M,P){return M[P]}},52471:(J,R,e)=>{"use strict";e.d(R,{$M:()=>M,Be:()=>C,Le:()=>x,Mn:()=>D,Pl:()=>h,Q8:()=>v,VN:()=>p,Y9:()=>s,b5:()=>c,gE:()=>y,mZ:()=>E,qQ:()=>P});var n=e(77960),a=e(86832),l=e.n(a),r=e(10694),o=e(16261),g=e(331),m=e(92101),d=e(49955),u=e(45882),i=e(18266);const f=(0,n.oM)({name:"templating/shared",initialState:i.s,reducers:{addVariable:(S,I)=>{const T=I.payload.id??I.payload.data.model.name,O=o.z.get(I.payload.type),A=(0,a.cloneDeep)(O.initialState),B=O.beforeAdding?O.beforeAdding(I.payload.data.model):(0,a.cloneDeep)(I.payload.data.model),b={...(0,a.defaults)({},B,A),id:T,index:I.payload.data.index,global:I.payload.data.global};S[T]=b},variableStateNotStarted:(S,I)=>{const T=(0,u.ir)(S,I.payload.id);T.state=r.Gu.NotStarted,T.error=null},variableStateFetching:(S,I)=>{const T=(0,u.ir)(S,I.payload.id);T.state=r.Gu.Loading,T.error=null},variableStateCompleted:(S,I)=>{const T=(0,u.ir)(S,I.payload.id);T&&(T.state=r.Gu.Done,T.error=null)},variableStateFailed:(S,I)=>{const T=(0,u.ir)(S,I.payload.id);T&&(T.state=r.Gu.Error,T.error=I.payload.data.error)},removeVariable:(S,I)=>{if(delete S[I.payload.id],!I.payload.data.reIndex)return;const T=Object.values(S).sort((O,A)=>O.index-A.index);for(let O=0;O<T.length;O++)T[O].index=O},duplicateVariable:(S,I)=>{function T(z){return z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const O=(0,a.cloneDeep)(S[I.payload.id]),A=new RegExp(`^copy_of_${T(O.name)}(_(\\d+))?$`),B=Object.values(S).map(({name:z})=>z.match(A)).filter(z=>z!=null),b=B.map(z=>z[2]).filter(z=>z!=null),W=(()=>B.length===0?null:b.length===0?1:b.map(z=>+z).sort((z,G)=>G-z)[0]+1)(),V=`copy_of_${O.name}${W?`_${W}`:""}`,w=I.payload.data?.newId??V,K=(0,u.QT)(Object.values(S));S[w]={...(0,a.cloneDeep)(o.z.get(I.payload.type).initialState),...O,id:w,name:V,index:K}},changeVariableOrder:(S,I)=>{const{toIndex:T,fromIndex:O}=I.payload.data,A=Object.values(S);for(let B=0;B<A.length;B++){const b=A[B];b.index===O?b.index=T:b.index>O&&b.index<=T?b.index--:b.index<O&&b.index>=T&&b.index++}},changeVariableType:(S,I)=>{const{id:T}=I.payload,{label:O,name:A,index:B,description:b,rootStateKey:W}=S[T];S[T]={...(0,a.cloneDeep)(o.z.get(I.payload.data.newType).initialState),id:T,rootStateKey:W,label:O,name:A,index:B,description:b}},setCurrentVariableValue:(S,I)=>{if(!I.payload.data.option)return;const T=(0,u.ir)(S,I.payload.id);if(!(0,m.eL)(T))return;const{option:O}=I.payload.data,A={...O,text:(0,d.Hi)(O?.text),value:(0,d.Hi)(O?.value)};T.current=A,T.options=T.options.map(B=>{B.value=(0,d.Hi)(B.value),B.text=(0,d.Hi)(B.text);let b=!1;if(Array.isArray(A.value))for(let W=0;W<A.value.length;W++){const V=A.value[W];if(B.value===V){b=!0;break}}else B.value===A.value&&(b=!0);return B.selected=b,B})},changeVariableProp:(S,I)=>{const T=(0,u.ir)(S,I.payload.id);T[I.payload.data.propName]=I.payload.data.propValue}},extraReducers:S=>S.addCase(g.Yo,(I,T)=>{const O=(0,u.ir)(I,T.payload.id);O.name=T.payload.data.newName})}),c=f.reducer,{removeVariable:E,addVariable:p,changeVariableProp:h,changeVariableOrder:y,duplicateVariable:s,setCurrentVariableValue:v,changeVariableType:C,variableStateNotStarted:D,variableStateFetching:M,variableStateCompleted:P,variableStateFailed:x}=f.actions},33022:(J,R,e)=>{"use strict";e.d(R,{Z9:()=>m,iv:()=>u,p3:()=>d,vw:()=>i,xO:()=>r});var n=e(77960),a=e(68734),l=e(52471);const r={uid:null,status:a.LN.NotStarted,isDirty:!1},o=(0,n.oM)({name:"templating/transaction",initialState:r,reducers:{variablesInitTransaction:(f,c)=>{f.uid=c.payload.uid,f.status=a.LN.Fetching},variablesCompleteTransaction:(f,c)=>{f.uid===c.payload.uid&&(f.status=a.LN.Completed)},variablesClearTransaction:(f,c)=>{f.uid=null,f.status=a.LN.NotStarted,f.isDirty=!1}},extraReducers:f=>f.addMatcher(g,(c,E)=>{c.status===a.LN.Completed&&(c.isDirty=!0)})});function g(f){return l.mZ.match(f)||l.VN.match(f)||l.Pl.match(f)||l.gE.match(f)||l.Y9.match(f)||l.Be.match(f)}const{variablesInitTransaction:m,variablesClearTransaction:d,variablesCompleteTransaction:u}=o.actions,i=o.reducer},18266:(J,R,e)=>{"use strict";e.d(R,{s:()=>n});const n={}},16234:(J,R,e)=>{"use strict";e.d(R,{L:()=>g,S:()=>o});var n=e(77960),a=e(16261),l=e(52471),r=e(18266);const o=(0,n.PH)("templating/cleanVariables"),g=(m=r.s,d)=>{if(o.match(d)){const u=Object.values(m).filter(f=>f.global);return u?u.reduce((f,c)=>(f[c.id]=c,f),{}):r.s}return d?.payload?.type&&a.z.getIfExists(d?.payload?.type)?a.z.get(d.payload.type).reducer((0,l.b5)(m,d),d):m}},68734:(J,R,e)=>{"use strict";e.d(R,{$U:()=>n.$U,Bd:()=>n.Bd,Eg:()=>g,LN:()=>o,Wy:()=>u,bU:()=>n.bU,eq:()=>d,x9:()=>m});var n=e(12699),a=e(10694),l=e(45276),r=e(87842),o=(i=>(i.NotStarted="Not started",i.Fetching="Fetching",i.Completed="Completed",i))(o||{});const g={id:r.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:n.bU.dontHide,skipUrlSync:!1,state:a.Gu.NotStarted,error:null,description:null};class m extends l.R{}m.type="variables-changed";class d extends l.R{}d.type="variables-time-range-process-done";class u extends l.R{}u.type="variables-changed-in-url"},49955:(J,R,e)=>{"use strict";e.d(R,{A3:()=>x,AQ:()=>s,HY:()=>E,Hi:()=>P,J7:()=>i,N9:()=>h,QI:()=>c,Tt:()=>p,Y6:()=>T,a9:()=>f,bi:()=>C,gR:()=>y,iD:()=>v,mn:()=>S,xT:()=>M,yQ:()=>I});var n=e(86832),a=e.n(n),l=e(79059),r=e(44951),o=e(74600),g=e(16261),m=e(87842),d=e(45882),u=e(68734);const i=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,f=O=>(i.lastIndex=0,i.exec(O));function c(...O){const A=O[O.length-1];O[0]=typeof O[0]=="string"?O[0]:(0,r.Xh)(O[0]);const b=O.slice(0,-1).join(" ").match(i);return!!(b!==null?b.find(V=>{const w=f(V);return w!==null&&w.indexOf(A)>-1}):!1)}const E=O=>{if(!O||!O.current)return!1;if(O.current.value){const A=Array.isArray(O.current.value);if(A&&O.current.value.length&&O.current.value[0]===m.r2||!A&&O.current.value===m.r2)return!0}if(O.current.text){const A=Array.isArray(O.current.text);if(A&&O.current.text.length&&O.current.text[0]===m.xk||!A&&O.current.text===m.xk)return!0}return!1},p=O=>!O||!O.current||!O.current.text?"":Array.isArray(O.current.text)?O.current.text.toString():typeof O.current.text!="string"?"":O.current.text,h=O=>!O||!O.current||O.current.value===void 0||O.current.value===null?null:Array.isArray(O.current.value)?O.current.value.toString():typeof O.current.value!="string"?null:O.current.value;function y(O,A=(0,l.J)()){return!O||!O.regex?"":A.replace(O.regex,{},"regex")}function s(O,A,B,b){const W={range:void 0,variable:O,searchFilter:A,scopedVars:b};return(O.refresh===u.Bd.onTimeRangeChanged||O.refresh===u.Bd.onDashboardLoad)&&(W.range=B.timeRange()),W}function v(O){if(!O||!O.hasOwnProperty("refresh"))return u.Bd.never;const A=O;return A.refresh!==u.Bd.onTimeRangeChanged&&A.refresh!==u.Bd.onDashboardLoad&&A.refresh!==u.Bd.never?u.Bd.never:A.refresh}function C(){return g.z.list().filter(O=>O.id!=="system").map(({id:O,name:A,description:B})=>({label:A,value:O,description:B}))}function D(O){return(0,n.isArray)(O)&&(O.length===0?O=void 0:O.length===1&&(O=O[0])),O}function M(O,A){let B=0;const b={};for(const W in O){if(!W.startsWith(m.IG))continue;let V=D(A[W]),w=D(O[W]);(0,n.isEqual)(w,V)||(b[W]={value:O[W]},B++)}for(const W in A){if(!W.startsWith(m.IG))continue;const V=A[W];(0,n.isArray)(V)&&V.length===0||O.hasOwnProperty(W)||(b[W]={value:"",removed:!0},B++)}return B?b:void 0}function P(O){return Array.isArray(O)?O.map(String):O==null?"":typeof O=="number"?O.toString(10):typeof O=="string"?O:typeof O=="boolean"?O.toString():""}function x(O,A=(0,o.y0)()){return(0,d.AE)(O,A).transaction.status!==u.LN.NotStarted}function S(O){return String(O)}const I=O=>{if(!O.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${O.id}`);return{type:O.type,id:O.id,rootStateKey:O.rootStateKey}};function T(O,A){return{type:O.type,id:O.id,data:A}}},80854:(J,R,e)=>{"use strict";e.d(R,{H:()=>i});var n=e(41407),a=e(39953),l=e(69330),r=e(83502),o=e(24571),g=e(34547),m=e(82803),d=e(66729),u=e(97791);const i=({data:c,rowIndex:E,columnIndex:p,sortOrder:h,mode:y,header:s=void 0})=>{const v=(0,m.wW)(f);if(!c||E==null)return null;const C=c.fields.map((T,O)=>({...T,hovered:O===p})),D=C.filter(T=>!T.config.custom?.hideFrom?.tooltip),M=D.find(T=>T.name==="traceID")||C[0],P=[];if(D.filter(T=>M===T).length>0&&P.push(M),P.push(...D.filter(T=>M!==T)),P.length===0)return null;const x=[],S=[],I=new Set;for(const T of P){if(y===g.f3.Single&&p!=null&&!T.hovered)continue;const O=T.values[E],A=T.display?T.display(O):{text:`${O}`,numeric:+O};T.getLinks&&T.getLinks({calculatedValue:A,valueRowIndex:E}).forEach(W=>{const V=`${W.title}/${W.href}`;I.has(V)||(S.push(W),I.add(V))});const{hovered:B,...b}=T;x.push({name:(0,l.CZ)(b,c),value:O,valueString:(0,r.zc)(A),highlight:T.hovered})}return h&&h!==g.As.None&&x.sort((T,O)=>o.sortValues(h)(T.value,O.value)),a.createElement("div",{className:v.wrapper},s&&a.createElement("div",{className:v.header},a.createElement("span",{className:v.title},s)),a.createElement("table",{className:v.infoWrap},a.createElement("tbody",null,x.map((T,O)=>a.createElement("tr",{key:`${O}/${E}`},a.createElement("th",null,T.name),a.createElement("td",null,(0,u.Q)(T.valueString)))),S.map((T,O)=>a.createElement("tr",{key:O},a.createElement("th",null,"Link"),a.createElement("td",{colSpan:2},a.createElement(d.h,{href:T.href,external:T.target==="_blank",weight:"medium",inline:!1},T.title)))))))},f=c=>({wrapper:(0,n.css)`
      background: ${c.components.tooltip.background};
      border-radius: ${c.shape.borderRadius(2)};
    `,header:(0,n.css)`
      background: ${c.colors.background.secondary};
      align-items: center;
      align-content: center;
      display: flex;
      padding-bottom: ${c.spacing(1)};
    `,title:(0,n.css)`
      font-weight: ${c.typography.fontWeightMedium};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,infoWrap:(0,n.css)`
      padding: ${c.spacing(1)};
      background: transparent;
      border: none;
      th {
        font-weight: ${c.typography.fontWeightMedium};
        padding: ${c.spacing(.25,2,.25,0)};
      }

      tr {
        border-bottom: 1px solid ${c.colors.border.weak};
        &:last-child {
          border-bottom: none;
        }
      }
    `,highlight:(0,n.css)``,link:(0,n.css)`
      color: ${c.colors.text.link};
    `})},15028:(J,R,e)=>{"use strict";var n=e(21712),a=e(81149),l=e(87983),r=e(71309),o=e(96183),g=e(22160),m=e(6033),d=e(52436),u=e(36861),i=e(97433),f=e(98140),c=e(47499),E=e(11353),p=e(6869),h=e(86832),y=e.n(h),s=e(39953),v=e(88942),C=e(92403),D=e(73),M=e(18985),P=e(34177),x=e(23619),S=e(57837),I=e(24275),T=e(4148),O=e(66134),A=e(13601),B=e(77014),b=e(14338),W=e(2292),V=e(26205),w=e(44076),K=e(30281),z=e(30639),G=e(51103),Q=e(3799),j=e(26825),F=e(50820),k=e(38906),_=e(32688),Y=e(89591),Z=e(36085),ae=e(86981),ce=e(69330),q=e(7959),De=e(31049),oe=e(86968),te=e(69171),fe=e(20454),Te=e(4919),ge=e(71974),he=e(74661),me=e(9558),ye=e(77663),ue=e(69733),Oe=e(79059),Ue=e(38637),at=e(78533),Ne=e(34484);function _e(L,N){switch(N.type){case Y.fS.boolean:return(0,h.isUndefined)(L)?!1:Ke(L);case Y.fS.number:return isNaN(L)?0:parseFloat(L);case Y.fS.string:return L?String(L):"";default:return L}}const Ke=L=>(0,h.isString)(L)?!(L[0]==="F"||L[0]==="f"||L[0]==="0"):!!L;function et(L){return function({options:H,onChange:ne,field:ve}){const{validator:Me,converter:Re=_e}=L,{value:$e}=H,[Ge,nt]=(0,s.useState)(!Me($e)),It=(0,Oe.J)().getVariables().map(gn=>({value:gn.name,label:gn.label||gn.name,origin:ue.L8.Template})),Vt=(0,s.useCallback)(gn=>{nt(!Me(gn.currentTarget.value))},[nt,Me]),Nt=(0,s.useCallback)(gn=>{if(Ge)return;const{value:Vn}=gn.currentTarget;ne({...H,value:Re(Vn,ve)})},[H,ne,Ge,ve,Re]),sn=(0,s.useCallback)(gn=>{nt(!Me(gn)),ne({...H,value:gn})},[nt,Me,ne,H]);return _.config.featureToggles.transformationsVariableSupport?s.createElement(at.X,{invalid:Ge,value:$e,error:"Value needs to be an integer or a variable",onChange:sn,placeholder:"Value or variable",suggestions:It}):s.createElement(Ue.I,{className:"flex-grow-1",invalid:Ge,defaultValue:String(H.value),placeholder:"Value",onChange:Vt,onBlur:Nt})}}const ze=()=>[{name:"Is greater",id:ae.mE.greater,component:et({validator:Ne.f6})},{name:"Is greater or equal",id:ae.mE.greaterOrEqual,component:et({validator:Ne.f6})},{name:"Is lower",id:ae.mE.lower,component:et({validator:Ne.f6})},{name:"Is lower or equal",id:ae.mE.lowerOrEqual,component:et({validator:Ne.f6})},{name:"Is equal",id:ae.mE.equal,component:et({validator:()=>!0})},{name:"Is not equal",id:ae.mE.notEqual,component:et({validator:()=>!0})}],je=()=>null,Qe=()=>[{name:"Is null",id:ae.mE.isNull,component:je},{name:"Is not null",id:ae.mE.isNotNull,component:je}];function We(L){return function({options:H,onChange:ne,field:ve}){const{validator:Me}=L,[Re,$e]=(0,s.useState)({from:!Me(H.from),to:!Me(H.to)}),nt=(0,Oe.J)().getVariables().map(Nt=>({value:Nt.name,label:Nt.label||Nt.name,origin:ue.L8.Template})),ht=(0,s.useCallback)((Nt,sn)=>{$e({...Re,[sn]:!Me(Nt.currentTarget.value)})},[$e,Me,Re]),It=(0,s.useCallback)((Nt,sn)=>{if(Re[sn])return;const{value:gn}=Nt.currentTarget;ne({...H,[sn]:_e(gn,ve)})},[H,ne,Re,ve]),Vt=(0,s.useCallback)((Nt,sn)=>{const gn=!Me(Nt);$e({...Re,[sn]:gn}),!gn&&ne({...H,[sn]:Nt})},[H,ne,Re,$e,Me]);return _.config.featureToggles.transformationsVariableSupport?s.createElement(s.Fragment,null,s.createElement(at.X,{value:String(H.from),invalid:Re.from,error:"Value needs to be an integer or a variable",placeholder:"From",onChange:Nt=>Vt(Nt,"from"),suggestions:nt}),s.createElement("div",{className:"gf-form-label"},"and"),s.createElement(at.X,{invalid:Re.to,error:"Value needs to be an integer or a variable",value:String(H.to),placeholder:"To",suggestions:nt,onChange:Nt=>Vt(Nt,"to")})):s.createElement(s.Fragment,null,s.createElement(Ue.I,{className:"flex-grow-1 gf-form-spacing",invalid:Re.from,defaultValue:String(H.from),placeholder:"From",onChange:Nt=>ht(Nt,"from"),onBlur:Nt=>It(Nt,"from")}),s.createElement("div",{className:"gf-form-label"},"and"),s.createElement(Ue.I,{className:"flex-grow-1",invalid:Re.to,defaultValue:String(H.to),placeholder:"To",onChange:Nt=>ht(Nt,"to"),onBlur:Nt=>It(Nt,"to")}))}}const ke=()=>[{name:"Is between",id:ae.mE.between,component:We({validator:Ne.f6})}];function ot(L){return function({options:H,onChange:ne,field:ve}){const{validator:Me,converter:Re=_e}=L,{value:$e}=H,[Ge,nt]=(0,s.useState)(!Me($e)),ht=(0,s.useCallback)(Vt=>{nt(!Me(Vt.currentTarget.value))},[nt,Me]),It=(0,s.useCallback)(Vt=>{if(Ge)return;const{value:Nt}=Vt.currentTarget;ne({...H,value:Re(Nt,ve)})},[H,ne,Ge,ve,Re]);return s.createElement(Ue.I,{className:"flex-grow-1",invalid:Ge,defaultValue:String(H.value),placeholder:"Value",onChange:ht,onBlur:It})}}const lt=()=>[{name:"Regex",id:ae.mE.regex,component:ot({validator:()=>!0,converter:L=>String(L)})}],Ct=new ye.B(()=>[...ze(),...Qe(),...ke(),...lt()]),wt=L=>{const{onDelete:N,onChange:H,filter:ne,fieldsInfo:ve}=L,{fieldsAsOptions:Me,fieldByDisplayName:Re}=ve,$e=Be(ne,Me)??"",Ge=Re[$e],nt=Ge?Lt(Ge):[],ht=Ye(ne,nt),It=Ct.getIfExists(ht),Vt=(0,s.useCallback)(gn=>{gn?.value&&H({...ne,fieldName:gn.value})},[H,ne]),Nt=(0,s.useCallback)(gn=>{if(!gn?.value)return;const Vn=gn.value,ja=Z.U8.get(Vn).getDefaultOptions(Ge);H({...ne,config:{id:Vn,options:ja}})},[H,ne,Ge]),sn=(0,s.useCallback)(gn=>{H({...ne,config:{...ne.config,options:gn}})},[H,ne]);return!Ge||!It||!It.component?null:s.createElement(he.Z,null,s.createElement(te._,{label:"Field",labelWidth:14},s.createElement(me.Ph,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:Me,value:ne.fieldName,onChange:Vt})),s.createElement(te._,{label:"Match"},s.createElement(me.Ph,{className:"width-12",placeholder:"Select test",options:nt,value:ht,onChange:Nt})),s.createElement(te._,{label:"Value",grow:!0},s.createElement(It.component,{field:Ge,options:ne.config.options??{},onChange:sn})),s.createElement(ge.x,{marginBottom:.5},s.createElement(Te.zx,{icon:"times",onClick:N,variant:"secondary"})))},Lt=L=>{const N=[];for(const H of Z.U8.list())!H.isApplicable(L)||!Ct.getIfExists(H.id)||N.push({value:H.id,label:H.name,description:H.description});return N},Ye=(L,N)=>{const H=N.find(ne=>ne.value===L.config.id);if(H&&H.value)return H.value;if(N[0]?.value)return N[0]?.value},Be=(L,N)=>{const H=N.find(ne=>ne.value===L.fieldName);if(H&&H.value)return H.value;if(N[0]?.value)return N[0]?.value},Le=[{label:"Include",value:oe.PQ.include},{label:"Exclude",value:oe.PQ.exclude}],le=[{label:"Match all",value:oe.ER.all},{label:"Match any",value:oe.ER.any}],de=L=>{const{input:N,options:H,onChange:ne}=L,ve=se(N),Me=(0,s.useCallback)(()=>{const ht=N[0],It=ht.fields.find(sn=>sn.type!==Y.fS.time);if(!It)return;const Vt=(0,h.cloneDeep)(H.filters),Nt=Z.U8.get(ae.mE.greater);Vt.push({fieldName:(0,ce.CZ)(It,ht,N),config:{id:Nt.id,options:Nt.getDefaultOptions(It)}}),ne({...H,filters:Vt})},[ne,H,N]),Re=(0,s.useCallback)(ht=>{let It=(0,h.cloneDeep)(H.filters);It.splice(ht,1),ne({...H,filters:It})},[H,ne]),$e=(0,s.useCallback)((ht,It)=>{let Vt=(0,h.cloneDeep)(H.filters);Vt[It]=ht,ne({...H,filters:Vt})},[H,ne]),Ge=(0,s.useCallback)(ht=>{ne({...H,type:ht??oe.PQ.include})},[H,ne]),nt=(0,s.useCallback)(ht=>{ne({...H,match:ht??oe.ER.all})},[H,ne]);return s.createElement("div",null,s.createElement(te._,{label:"Filter type",labelWidth:16},s.createElement("div",{className:"width-15"},s.createElement(fe.S,{options:Le,value:H.type,onChange:Ge,fullWidth:!0}))),s.createElement(te._,{label:"Conditions",labelWidth:16},s.createElement("div",{className:"width-15"},s.createElement(fe.S,{options:le,value:H.match,onChange:nt,fullWidth:!0}))),s.createElement(ge.x,{paddingLeft:2},H.filters.map((ht,It)=>s.createElement(wt,{key:It,filter:ht,fieldsInfo:ve,onChange:Vt=>$e(Vt,It),onDelete:()=>Re(It)})),s.createElement(Te.zx,{icon:"plus",size:"sm",onClick:Me,variant:"secondary"},"Add condition")))},X={id:q.W.filterByValue,editor:de,transformation:De.Y.filterByValueTransformer,name:De.Y.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source.",categories:new Set([P.w.Filter])},se=L=>(0,s.useMemo)(()=>{const N={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(L)?L.reduce((H,ne)=>ne.fields.reduce((ve,Me)=>{const Re=(0,ce.CZ)(Me,ne,L);return ve.fieldByDisplayName[Re]||(ve.fieldsAsOptions.push({label:Re,value:Re,type:Me.type}),ve.fieldByDisplayName[Re]=Me),ve},H),N):N},[L]);var re=e(30670),pe=e(98458),be=e(2148),xe=e(2978),Pe=e(82247);function we(L,N){const H={data:L.input,options:L.options},ne=new be.j({id:"root",title:"root"}),ve=Re=>{if(Re?.length){const $e=Re[0];let Ge=ne.categories.find(nt=>nt.props.id===$e);return Ge||(Ge=new be.j({id:$e,title:$e}),ne.categories.push(Ge)),Ge}return ne},Me={getValue:Re=>(0,h.get)(L.options,Re),onChange:(Re,$e)=>{L.onChange((0,Pe.hs)(L.options,Re,$e))}};return(0,xe.HZ)(N,Me,ve,H),ne}function Fe(L){const N={data:[],options:{}},H={},ne=new pe.rt;L(ne,N);for(const ve of ne.getItems())ve.defaultValue!=null&&(0,h.set)(H,ve.path,ve.defaultValue);return H}var He=e(78181),Xe=e(70394);const dt=(L,N)=>{const H=N.options??{};(0,He.J)("",L,H)},ct=L=>{(0,s.useEffect)(()=>{if(!L.options.xBuckets?.mode){const H=Fe(dt);L.onChange({...H,...L.options})}});const N=we(L,dt);return s.createElement("div",null,s.createElement("div",null,N.items.map(H=>H.render())))},At={id:Xe.Oy.id,editor:ct,transformation:Xe.Oy,name:Xe.Oy.name,description:Xe.Oy.description,state:re.BV.alpha,categories:new Set([P.w.CreateNewVisualization])};var Ie=e(41407),Ze=e(82803),ut=e(63064),rt=e(3181),St=e(54173),st=e(97898),tt=e(97253),ft=e(60695),$t=e(23955);function Ht(L,N,H){const ne={},ve={};for(const Me of L.fields){const Re=(0,ce.CZ)(Me,L),Ge=H.index[Re].handler;if(!Ge)continue;const nt=Me.values[N];if(nt==null)continue;const ht=Ge.processor(nt,ne,ve);ht!=null&&(ne[Ge.targetProperty??Ge.key]=ht)}return ve.mappingValues&&(ne.mappings=on(ve)),ne}var Zt=(L=>(L.Name="field.name",L.Value="field.value",L.Label="field.label",L.Ignore="__ignore",L))(Zt||{});const tn=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:Cn},{key:"min",processor:Cn},{key:"unit",processor:L=>L.toString()},{key:"decimals",processor:Cn},{key:"displayName",name:"Display name",processor:L=>L.toString()},{key:"color",processor:L=>({fixedColor:L,mode:st.S.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(L,N)=>{const H=(0,tt.I)(L);if(!isNaN(H))return N.thresholds||(N.thresholds={mode:ft.H.Absolute,steps:[{value:-1/0,color:"green"}]}),N.thresholds.steps.push({value:H,color:"red"}),N.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:rt.gz.allValues,processor:(L,N,H)=>{if((0,h.isArray)(L))return H.mappingValues=L,N.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:rt.gz.allValues,processor:(L,N,H)=>{if((0,h.isArray)(L))return H.mappingColors=L,N.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:rt.gz.allValues,processor:(L,N,H)=>{if((0,h.isArray)(L))return H.mappingTexts=L,N.mappings}}];function on(L){const N={type:$t.H.ValueToText,options:{}};if(!L.mappingValues)return[];for(let H=0;H<L.mappingValues.length;H++){const ne=L.mappingValues[H];ne!=null&&(N.options[ne.toString()]={color:L.mappingColors&&L.mappingColors[H],text:L.mappingTexts&&L.mappingTexts[H],index:H})}return[N]}let qt=null;function pn(){if(qt===null){qt={};for(const L of tn)qt[L.key]=L}return qt}function Cn(L){const N=(0,tt.I)(L);if(!isNaN(N))return N}function Rt(L,N){for(const H of N)if(L===H.fieldName)return H.handlerKey;return L.toLowerCase()}function mt(L){return L?pn()[L]:null}function xt(L,N,H){const ne={index:{}};let ve=N.find(Re=>Re.handlerKey==="field.name"),Me=N.find(Re=>Re.handlerKey==="field.value");for(const Re of L.fields){const $e=(0,ce.CZ)(Re,L),Ge=N.find(It=>It.fieldName===$e),nt=Ge?Ge.handlerKey:$e.toLowerCase();let ht=mt(nt);H&&(ht?(ht.key==="field.name"&&(ne.nameField=Re),ht.key==="field.value"&&(ne.valueField=Re)):Ge||(!ne.nameField&&!ve&&Re.type===Y.fS.string&&(ne.nameField=Re,ht=mt("field.name")),!ne.valueField&&!Me&&Re.type===Y.fS.number&&(ne.valueField=Re,ht=mt("field.value")))),!ht&&H&&(ht=mt("field.label")),ne.index[$e]={automatic:!Ge,handler:ht,reducerId:Ge?.reducerId??ht?.defaultReducer??rt.gz.lastNotNull}}return ne}function Ft({frame:L,mappings:N,onChange:H,withReducers:ne,withNameAndValue:ve}){const Me=(0,Ze.wW)(ln),Re=zt(L,N,ve),$e=tn.map(ht=>Jt(ht,!1)),Ge=(ht,It)=>{const Vt=N.findIndex(Nt=>Nt.fieldName===ht.fieldName);if(It)if(Vt!==-1){const Nt=[...N];Nt.splice(Vt,1,{...N[Vt],handlerKey:It.value}),H(Nt)}else H([...N,{fieldName:ht.fieldName,handlerKey:It.value}]);else H(Vt!==-1?N.filter((Nt,sn)=>sn!==Vt):[...N,{fieldName:ht.fieldName,handlerKey:"__ignore"}])},nt=(ht,It)=>{const Vt=N.findIndex(Nt=>Nt.fieldName===ht.fieldName);if(Vt!==-1){const Nt=[...N];Nt.splice(Vt,1,{...N[Vt],reducerId:It}),H(Nt)}else H([...N,{fieldName:ht.fieldName,handlerKey:ht.handlerKey,reducerId:It}])};return s.createElement("table",{className:Me.table},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"Field"),s.createElement("th",null,"Use as"),ne&&s.createElement("th",null,"Select"))),s.createElement("tbody",null,Re.map(ht=>s.createElement("tr",{key:ht.fieldName},s.createElement("td",{className:Me.labelCell},ht.fieldName),s.createElement("td",{className:Me.selectCell,"data-testid":`${ht.fieldName}-config-key`},s.createElement(me.Ph,{options:$e,value:ht.configOption,placeholder:ht.placeholder,isClearable:!0,onChange:It=>Ge(ht,It)})),ne&&s.createElement("td",{"data-testid":`${ht.fieldName}-reducer`,className:Me.selectCell},s.createElement(St.m,{stats:[ht.reducerId],defaultStat:ht.reducerId,onChange:It=>nt(ht,It[0])}))))))}function zt(L,N,H){const ne=[],ve=xt(L,N??[],H);for(const Me of L.fields){const Re=(0,ce.CZ)(Me,L),$e=ve.index[Re],Ge=Jt($e.handler,$e.automatic);ne.push({fieldName:Re,configOption:$e.automatic?null:Ge,placeholder:$e.automatic?Ge?.label:"Choose",handlerKey:$e.handler?.key??null,reducerId:$e.reducerId})}for(const Me of N)if(!ne.find(Re=>Re.fieldName===Me.fieldName)){const Re=mt(Me.handlerKey);ne.push({fieldName:Me.fieldName,handlerKey:Me.handlerKey,configOption:Jt(Re,!1),missingInFrame:!0,reducerId:Me.reducerId??rt.gz.lastNotNull})}return Object.values(ne)}function Jt(L,N){if(!L)return null;let H=L.name??(0,h.capitalize)(L.key);return N&&(H=`${H} (auto)`),{label:H,value:L.key}}const ln=L=>({table:(0,Ie.css)`
    margin-top: ${L.spacing(1)};

    td,
    th {
      border-right: 4px solid ${L.colors.background.primary};
      border-bottom: 4px solid ${L.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${L.typography.bodySmall.fontSize};
      line-height: ${L.spacing(4)};
      padding: ${L.spacing(0,1)};
    }
  `,labelCell:(0,Ie.css)`
    font-size: ${L.typography.bodySmall.fontSize};
    background: ${L.colors.background.secondary};
    padding: ${L.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:(0,Ie.css)`
    padding: 0;
    min-width: 161px;
  `});var Pt=e(71476);function Gt(L,N){let H=null;for(const $e of N)if($e.refId===L.configRefId){H=$e;break}if(!H)return N;const ne={fields:[],length:1},ve=xt(H,L.mappings??[],!1);for(const $e of H.fields){const Ge={...$e},nt=(0,ce.CZ)($e,H),ht=ve.index[nt],It=(0,rt.Kx)({field:$e,reducers:[ht.reducerId]});Ge.values=[It[ht.reducerId]],ne.fields.push(Ge)}const Me=[],Re=(0,Z.sq)(L.applyTo||{id:ae.mi.numeric});for(const $e of N){if($e===H&&N.length>1)continue;const Ge={fields:[],length:$e.length,refId:$e.refId};for(const nt of $e.fields)if(Re(nt,$e,N)){const ht=Ht(ne,0,ve);Ge.fields.push({...nt,config:{...nt.config,...ht}})}else Ge.fields.push(nt);Me.push(Ge)}return Me}const Kt={id:q.W.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data.",defaultOptions:{configRefId:"config",mappings:[]},operator:L=>N=>N.pipe((0,Pt.U)(H=>Gt(L,H)))};function kt({input:L,onChange:N,options:H}){const ne=(0,Ze.wW)(nn),ve=L.map(Nt=>Nt.refId).filter(Nt=>Nt!=null).map(Nt=>({label:Nt,value:Nt})),Me=H.configRefId||"config",Re=H.applyTo??{id:ae.mi.byType,options:"number"},$e=ut.i.get(Re.id),Ge=L.find(Nt=>Nt.refId===Me),nt=Nt=>{N({...H,configRefId:Nt.value||"config"})},ht=Nt=>{N({...H,applyTo:{id:Nt.value}})},It=Nt=>{N({...H,applyTo:{id:Re.id,options:Nt}})},Vt=ut.i.list().filter(Nt=>!Nt.excludeFromPicker).map(Nt=>({label:Nt.name,value:Nt.id,description:Nt.description}));return s.createElement(s.Fragment,null,s.createElement(he.Z,null,s.createElement(te._,{label:"Config query",labelWidth:20},s.createElement(me.Ph,{onChange:nt,options:ve,value:Me,width:30}))),s.createElement(he.Z,null,s.createElement(te._,{label:"Apply to",labelWidth:20},s.createElement(me.Ph,{onChange:ht,options:Vt,value:Re.id,width:30}))),s.createElement(he.Z,null,s.createElement(te._,{label:"Apply to options",labelWidth:20,className:ne.matcherOptions},s.createElement($e.component,{matcher:$e.matcher,data:L,options:Re.options,onChange:It}))),s.createElement(he.Z,null,Ge&&s.createElement(Ft,{frame:Ge,mappings:H.mappings,onChange:Nt=>N({...H,mappings:Nt}),withReducers:!0})))}const dn={id:Kt.id,editor:kt,transformation:Kt,name:Kt.name,description:Kt.description,state:re.BV.beta,categories:new Set([P.w.CalculateNewFields]),help:`
### Use cases

This transformation allows you select one query and from it extract standard options such as
**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.
This enables dynamic query driven visualization configuration.

### Options

- **Config query**: Selet the query that returns the data you want to use as configuration.
- **Apply to**: Select what fields or series to apply the configuration to.
- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.

### Field mapping table

Below the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.

## Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now also has a maximum
configuration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.
in the panel editor options pane.

## Value mappings

You can also transform a query result into value mappings. This is is a bit different because every
row in the configuration query result is used to define a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Ciolor | All values |

Grafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.
`},nn=L=>({matcherOptions:(0,Ie.css)`
    min-width: 404px;
  `});var mn=e(63302),Mn=e(93105),Gn=e(35648),$n=e(22637),Fn=e(79485),Yn=e(26286),ua=e(12223),wa=e(13868),ga=e(99491);const ca=[{value:Fn.ie.BinaryOperation,label:"Binary operation"},{value:Fn.ie.UnaryOperation,label:"Unary operation"},{value:Fn.ie.ReduceRow,label:"Reduce row"},{value:Fn.ie.Index,label:"Row index"}],Ra=new Set([Y.fS.time,Y.fS.number,Y.fS.string]),va=16;class Sa extends s.PureComponent{constructor(N){super(N),this.onToggleReplaceFields=H=>{const{options:ne}=this.props;this.props.onChange({...ne,replaceFields:H.currentTarget.checked})},this.onToggleRowIndexAsPercentile=H=>{const{options:ne}=this.props;this.props.onChange({...ne,index:{asPercentile:H.currentTarget.checked}})},this.onModeChanged=H=>{const{options:ne,onChange:ve}=this.props,Me=H.value??Fn.ie.BinaryOperation;ve({...ne,mode:Me})},this.onAliasChanged=H=>{const{options:ne}=this.props;this.props.onChange({...ne,alias:H.target.value})},this.updateReduceOptions=H=>{const{options:ne,onChange:ve}=this.props;ve({...ne,mode:Fn.ie.ReduceRow,reduce:H})},this.onFieldToggle=H=>{const{selected:ne}=this.state;ne.indexOf(H)>-1?this.onChange(ne.filter(ve=>ve!==H)):this.onChange([...ne,H])},this.onChange=H=>{this.setState({selected:H});const{reduce:ne}=this.props.options;this.updateReduceOptions({...ne,include:H})},this.onStatsChange=H=>{const ne=H.length?H[0]:rt.gz.sum,{reduce:ve}=this.props.options;this.updateReduceOptions({...ve,reducer:ne})},this.updateBinaryOptions=H=>{const{options:ne,onChange:ve}=this.props;ve({...ne,mode:Fn.ie.BinaryOperation,binary:H})},this.onBinaryLeftChanged=H=>{const{binary:ne}=this.props.options;this.updateBinaryOptions({...ne,left:H.value})},this.onBinaryRightChanged=H=>{const{binary:ne}=this.props.options;this.updateBinaryOptions({...ne,right:H.value})},this.onBinaryOperationChanged=H=>{const{binary:ne}=this.props.options;this.updateBinaryOptions({...ne,operator:H.value})},this.updateUnaryOptions=H=>{const{options:ne,onChange:ve}=this.props;ve({...ne,mode:Fn.ie.UnaryOperation,unary:H})},this.onUnaryOperationChanged=H=>{const{unary:ne}=this.props.options;this.updateUnaryOptions({...ne,operator:H.value})},this.onUnaryValueChanged=H=>{const{unary:ne}=this.props.options;this.updateUnaryOptions({...ne,fieldName:H.value})},this.state={include:N.options?.reduce?.include||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(N){this.props.input!==N.input&&this.initOptions()}initOptions(){const{options:N}=this.props,H=N?.reduce?.include||[],ne={interpolate:Me=>Me},ve=(0,mn.of)(this.props.input).pipe(De.Y.ensureColumnsTransformer.operator(null,ne),this.extractAllNames(),this.getVariableNames(),this.extractNamesAndSelected(H)).subscribe(({selected:Me,names:Re})=>{this.setState({names:Re,selected:Me},()=>ve.unsubscribe())})}getVariableNames(){if(!_.config.featureToggles.transformationsVariableSupport)return Mn.y;const N=(0,Oe.J)();return H=>H.pipe((0,Pt.U)(ne=>(ne.push(...N.getVariables().map(ve=>"$"+ve.name)),ne)))}extractAllNames(){return N=>N.pipe((0,Pt.U)(H=>{const ne=[],ve={};for(const Me of H)for(const Re of Me.fields){if(!Ra.has(Re.type))continue;const $e=(0,ce.CZ)(Re,Me,H);ve[$e]||(ve[$e]=!0,ne.push($e))}return ne}))}extractNamesAndSelected(N){return H=>H.pipe((0,Pt.U)(ne=>{if(!N.length)return{names:ne,selected:[]};const ve=[],Me=[];for(const Re of ne)N.includes(Re)&&Me.push(Re),ve.push(Re);return{names:ve,selected:Me}}))}renderRowIndex(N){return s.createElement(s.Fragment,null,s.createElement(te._,{labelWidth:va,label:"As percentile",tooltip:"Transform the row index as a percentile."},s.createElement(Yn.x,{value:!!N?.asPercentile,onChange:this.onToggleRowIndexAsPercentile})))}renderReduceRow(N){const{names:H,selected:ne}=this.state;return N=(0,h.defaults)(N,{reducer:rt.gz.sum}),s.createElement(s.Fragment,null,s.createElement(te._,{label:"Operation",labelWidth:va,grow:!0},s.createElement(ua.Lh,{spacing:"xs",align:"flex-start",wrap:!0},H.map((ve,Me)=>s.createElement(wa.B,{key:`${ve}/${Me}`,onClick:()=>{this.onFieldToggle(ve)},label:ve,selected:ne.indexOf(ve)>-1})))),s.createElement(te._,{label:"Calculation",labelWidth:va},s.createElement(St.m,{allowMultiple:!1,className:"width-18",stats:[N.reducer],onChange:this.onStatsChange,defaultStat:rt.gz.sum})))}renderBinaryOperation(N){N=(0,h.defaults)(N,{operator:Gn.L.Add});let H=!N?.left,ne=!N?.right;const ve=this.state.names.map(Ge=>(Ge===N?.left&&(H=!0),Ge===N?.right&&(ne=!0),{label:Ge,value:Ge})),Me=H?ve:[...ve,{label:N?.left,value:N?.left}],Re=ne?ve:[...ve,{label:N?.right,value:N?.right}],$e=Gn.n.list().map(Ge=>({label:Ge.binaryOperationID,value:Ge.binaryOperationID}));return s.createElement(s.Fragment,null,s.createElement(he.Z,null,s.createElement(te._,{label:"Operation",labelWidth:va},s.createElement(me.Ph,{allowCustomValue:!0,placeholder:"Field or number",options:Me,className:"min-width-18",value:N?.left,onChange:this.onBinaryLeftChanged})),s.createElement(te._,null,s.createElement(me.Ph,{className:"width-4",options:$e,value:N.operator??$e[0].value,onChange:this.onBinaryOperationChanged})),s.createElement(te._,null,s.createElement(me.Ph,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:Re,value:N?.right,onChange:this.onBinaryRightChanged}))))}renderUnaryOperation(N){N=(0,h.defaults)(N,{operator:$n.T.Abs});let H=!N?.fieldName;const ne=this.state.names.map(Re=>(Re===N?.fieldName&&(H=!0),{label:Re,value:Re})),ve=$n.m.list().map(Re=>({label:Re.unaryOperationID,value:Re.unaryOperationID})),Me=H?ne:[...ne,{label:N?.fieldName,value:N?.fieldName}];return s.createElement(s.Fragment,null,s.createElement(he.Z,null,s.createElement(te._,{label:"Operation",labelWidth:va},s.createElement(me.Ph,{options:ve,value:N.operator??ve[0].value,onChange:this.onUnaryOperationChanged})),s.createElement(te._,{label:"(",labelWidth:2},s.createElement(me.Ph,{placeholder:"Field",className:"min-width-11",options:Me,value:N?.fieldName,onChange:this.onUnaryValueChanged})),s.createElement(ga.W,{width:2},")")))}render(){const{options:N}=this.props,H=N.mode??Fn.ie.BinaryOperation;return s.createElement(s.Fragment,null,s.createElement(te._,{labelWidth:va,label:"Mode"},s.createElement(me.Ph,{className:"width-18",options:ca,value:ca.find(ne=>ne.value===H),onChange:this.onModeChanged})),H===Fn.ie.BinaryOperation&&this.renderBinaryOperation(N.binary),H===Fn.ie.UnaryOperation&&this.renderUnaryOperation(N.unary),H===Fn.ie.ReduceRow&&this.renderReduceRow(N.reduce),H===Fn.ie.Index&&this.renderRowIndex(N.index),s.createElement(te._,{labelWidth:va,label:"Alias"},s.createElement(Ue.I,{className:"width-18",value:N.alias??"",placeholder:(0,Fn.h)(N),onChange:this.onAliasChanged})),s.createElement(te._,{labelWidth:va,label:"Replace all fields"},s.createElement(Yn.x,{value:!!N.replaceFields,onChange:this.onToggleReplaceFields})))}}const es={id:q.W.calculateField,editor:Sa,transformation:De.Y.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field.",categories:new Set([P.w.CalculateNewFields])};var yt=e(93186);const bt=[{value:yt.HO.FieldName,label:"Copy frame name to field name"},{value:yt.HO.Label,label:"Add a label with the frame name"},{value:yt.HO.Drop,label:"Ignore the frame name"}];class Dt extends s.PureComponent{constructor(N){super(N),this.onModeChanged=H=>{const{options:ne,onChange:ve}=this.props,Me=H.value??yt.HO.FieldName;ve({...ne,frameNameMode:Me})},this.onLabelChanged=H=>{const{options:ne}=this.props;this.props.onChange({...ne,frameNameLabel:H.target.value})}}render(){const{options:N}=this.props,H=N.frameNameMode??yt.HO.FieldName;return s.createElement("div",null,s.createElement("div",{className:"gf-form-inline"},s.createElement("div",{className:"gf-form"},s.createElement("div",{className:"gf-form-label width-8"},"Name"),s.createElement(me.Ph,{className:"width-18",options:bt,value:bt.find(ne=>ne.value===H),onChange:this.onModeChanged}))),H===yt.HO.Label&&s.createElement("div",{className:"gf-form-inline"},s.createElement("div",{className:"gf-form"},s.createElement("div",{className:"gf-form-label width-8"},"Label"),s.createElement(Ue.I,{className:"width-18",value:N.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged}))))}}const Wt={id:q.W.concatenate,editor:Dt,transformation:De.Y.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",categories:new Set([P.w.Combine])};var cn=e(36602),en=e(57669),En=e(78002),Rn=e(85256);const Dn={settings:{width:24,isClearable:!1}},Tn=({input:L,options:N,onChange:H})=>{const ne=En.OL.filter(Vt=>Vt.value!==Y.fS.trace),ve=(0,Ne.rm)(!0),Me=(0,cn.ZV)();ve.push({label:"Browser",value:"browser"}),ve.push({label:"UTC",value:"utc"});for(const Vt of Me)ve.push({label:Vt,value:Vt});const Re=(0,s.useCallback)(Vt=>Nt=>{const sn=N.conversions;sn[Vt]={...sn[Vt],targetField:Nt??"",dateFormat:void 0},H({...N,conversions:sn})},[H,N]),$e=(0,s.useCallback)(Vt=>Nt=>{const sn=N.conversions;sn[Vt]={...sn[Vt],destinationType:Nt.value},H({...N,conversions:sn})},[H,N]),Ge=(0,s.useCallback)(Vt=>Nt=>{const sn=N.conversions;sn[Vt]={...sn[Vt],dateFormat:Nt.currentTarget.value},H({...N,conversions:sn})},[H,N]),nt=(0,s.useCallback)(()=>{H({...N,conversions:[...N.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[H,N]),ht=(0,s.useCallback)(Vt=>{const Nt=N.conversions;Nt.splice(Vt,1),H({...N,conversions:Nt})},[H,N]),It=(0,s.useCallback)(Vt=>Nt=>{const sn=N.conversions;sn[Vt]={...sn[Vt],timezone:Nt?.value},H({...N,conversions:sn})},[H,N]);return s.createElement(s.Fragment,null,N.conversions.map((Vt,Nt)=>s.createElement("div",{key:`${Vt.targetField}-${Nt}`},s.createElement(he.Z,null,s.createElement(te._,{label:"Field"},s.createElement(en.b,{context:{data:L},value:Vt.targetField??"",onChange:Re(Nt),item:Dn})),s.createElement(te._,{label:"as"},s.createElement(me.Ph,{options:ne,value:Vt.destinationType,placeholder:"Type",onChange:$e(Nt),width:18})),Vt.destinationType===Y.fS.time&&s.createElement(te._,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},s.createElement(Ue.I,{value:Vt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:Ge(Nt),width:24})),Vt.destinationType===Y.fS.string&&(Vt.dateFormat||(0,Rn.findField)(L?.[0],Vt.targetField)?.type===Y.fS.time)&&s.createElement(s.Fragment,null,s.createElement(te._,{label:"Date format",tooltip:"Specify the output format."},s.createElement(Ue.I,{value:Vt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:Ge(Nt),width:24})),s.createElement(te._,{label:"Set timezone",tooltip:"Set the timezone of the date manually"},s.createElement(me.Ph,{options:ve,value:Vt.timezone,onChange:It(Nt),isClearable:!0}))),s.createElement(Te.zx,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>ht(Nt),"aria-label":"Remove convert field type transformer"})),Vt.destinationType===Y.fS.enum&&F.Oh&&s.createElement(he.Z,null,s.createElement(te._,{label:"",labelWidth:6},s.createElement("div",null,"TODO... show options here (alpha panels enabled)"))))),s.createElement(Te.zx,{size:"sm",icon:"plus",onClick:nt,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},jn={id:q.W.convertFieldType,editor:Tn,transformation:De.Y.convertFieldTypeTransformer,name:De.Y.convertFieldTypeTransformer.name,description:De.Y.convertFieldTypeTransformer.description,categories:new Set([P.w.Reformat])};var ra=e(55705);class Jn extends s.PureComponent{constructor(N){super(N),this.onFieldToggle=H=>{const{selected:ne}=this.state;ne.indexOf(H)>-1?this.onChange(ne.filter(ve=>ve!==H)):this.onChange([...ne,H])},this.onChange=H=>{const{regex:ne,isRegexValid:ve}=this.state,Me={...this.props.options,include:{names:H}};ne&&ve&&(Me.include=Me.include??{},Me.include.pattern=ne),this.setState({selected:H},()=>{this.props.onChange(Me)})},this.onInputBlur=H=>{const{selected:ne,regex:ve}=this.state;let Me=!0;try{ve&&(0,ra.jO)(ve)}catch{Me=!1}Me?this.props.onChange({...this.props.options,include:{pattern:ve}}):this.props.onChange({...this.props.options,include:{names:ne}}),this.setState({isRegexValid:Me})},this.onVariableChange=H=>{this.props.onChange({...this.props.options,include:{variable:H.value}}),this.setState({variable:H.value})},this.onFromVariableChange=H=>{const ne=H.currentTarget.checked;this.props.onChange({...this.props.options,byVariable:ne}),this.setState({byVariable:ne})},this.state={include:N.options.include?.names||[],regex:N.options.include?.pattern,variable:N.options.include?.variable,byVariable:N.options.byVariable||!1,options:[],variables:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(N){this.props.input!==N.input&&this.initOptions()}initOptions(){const{input:N,options:H}=this.props,ne=Array.from(H.include?.names??[]),ve=(0,Oe.J)().getVariables().map($e=>({label:"$"+$e.name,value:"$"+$e.name})),Me=[],Re={};for(const $e of N)for(const Ge of $e.fields){const nt=(0,ce.CZ)(Ge,$e,N);let ht=Re[nt];ht||(ht=Re[nt]={name:nt,count:0},Me.push(ht)),ht.count++}if(H.include?.pattern)try{const $e=(0,ra.jO)(H.include.pattern);for(const Ge of Me)$e.test(Ge.name)&&ne.push(Ge.name)}catch($e){console.error($e)}if(ne.length){const $e=Me.filter(Ge=>ne.includes(Ge.name));this.setState({options:Me,selected:$e.map(Ge=>Ge.name),variables:ve,byVariable:H.byVariable||!1,variable:H.include?.variable,regex:H.include?.pattern})}else this.setState({options:Me,selected:Me.map($e=>$e.name),variables:ve,byVariable:H.byVariable||!1,variable:H.include?.variable,regex:H.include?.pattern})}render(){const{options:N,selected:H,isRegexValid:ne}=this.state;return s.createElement("div",null,s.createElement(he.Z,{label:"Use variable"},s.createElement(te._,{label:"From variable"},s.createElement(Yn.x,{value:this.state.byVariable,onChange:this.onFromVariableChange}))),this.state.byVariable?s.createElement(he.Z,null,s.createElement(te._,{label:"Variable"},s.createElement(me.Ph,{value:this.state.variable,onChange:this.onVariableChange,options:this.state.variables||[]}))):s.createElement(he.Z,{label:"Identifier"},s.createElement(te._,{label:"Identifier",invalid:!ne,error:ne?void 0:"Invalid pattern"},s.createElement(Ue.I,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:ve=>this.setState({regex:ve.currentTarget.value}),onBlur:this.onInputBlur,width:25})),N.map((ve,Me)=>{const Re=`${ve.name}${ve.count>1?" ("+ve.count+")":""}`,$e=H.indexOf(ve.name)>-1;return s.createElement(wa.B,{key:`${ve.name}/${Me}`,onClick:()=>{this.onFieldToggle(ve.name)},label:Re,selected:$e})})))}}const Xn={id:q.W.filterFieldsByName,editor:Jn,transformation:De.Y.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive.",categories:new Set([P.w.Filter])};var oa=e(43324);class Qn extends s.PureComponent{constructor(N){super(N),this.onFieldToggle=H=>{const{selected:ne}=this.state;ne.indexOf(H)>-1?this.onChange(ne.filter(ve=>ve!==H)):this.onChange([...ne,H])},this.onChange=H=>{this.setState({selected:H}),this.props.onChange({...this.props.options,include:H.join("|")})},this.state={include:N.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(N){this.props.input!==N.input&&this.initOptions()}initOptions(){const{input:N,options:H}=this.props,ne=H.include?H.include.split("|"):[],ve=[],Me={};for(const Re of N)if(Re.refId){let $e=Me[Re.refId];$e||($e=Me[Re.refId]={refId:Re.refId,count:0},ve.push($e)),$e.count++}if(ne.length){const Re=[],$e=[];for(const Ge of ve)ne.includes(Ge.refId)&&$e.push(Ge),Re.push(Ge);this.setState({options:Re,selected:$e.map(Ge=>Ge.refId)})}else this.setState({options:ve,selected:[]})}render(){const{options:N,selected:H}=this.state,{input:ne}=this.props;return s.createElement(s.Fragment,null,ne.length<=1&&s.createElement("div",null,s.createElement(oa.S,null,"Filter data by query expects multiple queries in the input.")),s.createElement("div",{className:"gf-form-inline"},s.createElement("div",{className:"gf-form gf-form--grow"},s.createElement("div",{className:"gf-form-label width-8"},"Series refId"),s.createElement(ua.Lh,{spacing:"xs",align:"flex-start",wrap:!0},N.map((ve,Me)=>{const Re=`${ve.refId}${ve.count>1?" ("+ve.count+")":""}`,$e=H.indexOf(ve.refId)>-1;return s.createElement(wa.B,{key:`${ve.refId}/${Me}`,onClick:()=>{this.onFieldToggle(ve.refId)},label:Re,selected:$e})})))))}}const ts={id:q.W.filterByRefId,editor:Qn,transformation:De.Y.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel.",categories:new Set([P.w.Filter])};var La=e(99804),Xa=e(30359);const bs={settings:{width:30,filter:L=>L.type===Y.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null};function ia({input:L,options:N,onChange:H}){const ne=(0,s.useCallback)(Ge=>{H({...N,stringField:Ge??""})},[H,N]),ve=(0,s.useCallback)(Ge=>{const nt=Ge.value??La.vh.UpperCase;H({...N,outputFormat:nt})},[H,N]),Me=(0,s.useCallback)(Ge=>{H({...N,substringStart:Ge??0})},[H,N]),Re=(0,s.useCallback)(Ge=>{H({...N,substringEnd:Ge??0})},[H,N]),$e=Object.values(La.vh).map(Ge=>({label:Ge,value:Ge}));return s.createElement(s.Fragment,null,s.createElement(he.Z,null,s.createElement(te._,{label:"Field",labelWidth:10},s.createElement(en.b,{context:{data:L},value:N.stringField??"",onChange:ne,item:bs})),s.createElement(te._,{label:"Format",labelWidth:10},s.createElement(me.Ph,{options:$e,value:N.outputFormat,onChange:ve,width:20}))),N.outputFormat===La.vh.Substring&&s.createElement(he.Z,null,s.createElement(te._,{label:"Substring range",labelWidth:15},s.createElement(Xa.Y,{min:0,value:N.substringStart??0,onChange:Me,width:7})),s.createElement(te._,null,s.createElement(Xa.Y,{min:0,value:N.substringEnd??0,onChange:Re,width:7}))))}const ls={id:q.W.formatString,editor:ia,transformation:De.Y.formatStringTransformer,name:De.Y.formatStringTransformer.name,state:re.BV.beta,description:De.Y.formatStringTransformer.description,categories:new Set([P.w.Reformat])};function As({input:L,options:N,onChange:H}){const ne=[],ve=(0,Ne.rm)(!0);for(const Ge of L)for(const nt of Ge.fields)if(nt.type==="time"){const ht=(0,ce.CZ)(nt,Ge,L);ne.push({label:ht,value:ht})}const Me=(0,s.useCallback)(Ge=>{const nt=Ge?.value!==void 0?Ge.value:"";H({...N,timeField:nt})},[H,N]),Re=(0,s.useCallback)(Ge=>{const nt=Ge.target.value;H({...N,outputFormat:nt})},[H,N]),$e=(0,s.useCallback)(Ge=>{const nt=Ge?.value!==void 0?Ge.value:"";H({...N,timezone:nt})},[H,N]);return s.createElement(s.Fragment,null,s.createElement(he.Z,null,s.createElement(te._,{label:"Time Field",labelWidth:15,grow:!0},s.createElement(me.Ph,{options:ne,value:N.timeField,onChange:Me,placeholder:"time",isClearable:!0})),s.createElement(te._,{label:"Format",labelWidth:10,tooltip:s.createElement(s.Fragment,null,"The output format for the field specified as a"," ",s.createElement("a",{href:"https://momentjs.com/docs/#/displaying/",target:"_blank",rel:"noopener noreferrer"},"Moment.js format string"),"."),interactive:!0},s.createElement(Ue.I,{onChange:Re,value:N.outputFormat})),s.createElement(te._,{label:"Set Timezone",tooltip:"Set the timezone of the date manually",labelWidth:20},s.createElement(me.Ph,{options:ve,value:N.timezone,onChange:$e,isClearable:!0}))))}const ss={id:q.W.formatTime,editor:As,transformation:De.Y.formatTimeTransformer,name:De.Y.formatTimeTransformer.name,state:re.BV.alpha,description:De.Y.formatTimeTransformer.description};var rs=e(20687),Ba=e(27366);const Aa=({input:L,options:N,onChange:H})=>{const ne=(0,Ne.Hg)(L),ve=(0,s.useCallback)(Me=>Re=>{H({...N,fields:{...N.fields,[Me]:Re}})},[H]);return s.createElement("div",null,ne.map(Me=>s.createElement(Wa,{onConfigChange:ve(Me),fieldName:Me,config:N.fields[Me],key:Me})))},Zs=[{label:"Group by",value:rs.x.groupBy},{label:"Calculate",value:rs.x.aggregate}],Wa=({fieldName:L,config:N,onConfigChange:H})=>{const ne=(0,Ze.l4)(),ve=qa(ne),Me=(0,s.useCallback)(Re=>{H({aggregations:N?.aggregations??[],operation:Re?.value??null})},[N,H]);return s.createElement(te._,{className:ve.label,label:L,grow:!0,shrink:!0},s.createElement(Ba.K,{gap:.5,direction:"row",wrap:!1},s.createElement("div",{className:ve.operation},s.createElement(me.Ph,{options:Zs,value:N?.operation,placeholder:"Ignored",onChange:Me,isClearable:!0})),N?.operation===rs.x.aggregate&&s.createElement(St.m,{className:ve.aggregations,placeholder:"Select Stats",allowMultiple:!0,stats:N.aggregations,onChange:Re=>{H({...N,aggregations:Re})}})))},qa=L=>({label:(0,Ie.css)`
      label {
        min-width: ${L.spacing(32)};
      }
    `,operation:(0,Ie.css)`
      flex-shrink: 0;
      height: 100%;
      width: ${L.spacing(24)};
    `,aggregations:(0,Ie.css)`
      flex-grow: 1;
    `}),zn={id:q.W.groupBy,editor:Aa,transformation:De.Y.groupByTransformer,name:De.Y.groupByTransformer.name,description:De.Y.groupByTransformer.description,categories:new Set([P.w.Combine,P.w.CalculateNewFields,P.w.Reformat])};var Bt=e(36604);const Qs=({input:L,options:N,onChange:H})=>{const ne=(0,Ne.Hg)(L).map(nt=>({label:nt,value:nt})),ve=(0,s.useCallback)(nt=>{H({...N,columnField:nt?.value})},[H,N]),Me=(0,s.useCallback)(nt=>{H({...N,rowField:nt?.value})},[H,N]),Re=(0,s.useCallback)(nt=>{H({...N,valueField:nt?.value})},[H,N]),$e=[{label:"Null",value:Bt.U.Null,description:"Null value"},{label:"True",value:Bt.U.True,description:"Boolean true value"},{label:"False",value:Bt.U.False,description:"Boolean false value"},{label:"Empty",value:Bt.U.Empty,description:"Empty string"}],Ge=(0,s.useCallback)(nt=>{H({...N,emptyValue:nt?.value})},[H,N]);return s.createElement(s.Fragment,null,s.createElement(he.Z,null,s.createElement(te._,{label:"Column",labelWidth:8},s.createElement(me.Ph,{options:ne,value:N.columnField,onChange:ve,isClearable:!0})),s.createElement(te._,{label:"Row",labelWidth:8},s.createElement(me.Ph,{options:ne,value:N.rowField,onChange:Me,isClearable:!0})),s.createElement(te._,{label:"Cell Value",labelWidth:10},s.createElement(me.Ph,{options:ne,value:N.valueField,onChange:Re,isClearable:!0})),s.createElement(te._,{label:"Empty Value"},s.createElement(me.Ph,{options:$e,value:N.emptyValue,onChange:Ge,isClearable:!0}))))},kn={id:q.W.groupingToMatrix,editor:Qs,transformation:De.Y.groupingToMatrixTransformer,name:"Grouping to matrix",description:"Takes a three fields combination and produces a Matrix.",categories:new Set([P.w.Combine,P.w.Reformat])};var ma=e(80742);const ha=({input:L,options:N,onChange:H})=>{const[ve,Me]=(0,s.useState)({bucketSize:!(0,Ne.f6)(N.bucketSize||""),bucketOffset:!(0,Ne.f6)(N.bucketOffset||"")}),Re=(0,s.useCallback)(Nt=>{H({...N,bucketSize:Nt})},[H,N]),$e=(0,s.useCallback)(Nt=>{H({...N,bucketOffset:Nt})},[H,N]),Ge=(0,s.useCallback)(Nt=>{Me({...ve,bucketSize:!(0,Ne.f6)(Nt)}),H({...N,bucketSize:Nt})},[H,N,ve,Me]),nt=(0,s.useCallback)(Nt=>{Me({...ve,bucketOffset:!(0,Ne.f6)(Nt)}),H({...N,bucketOffset:Nt})},[H,N,ve,Me]),ht=(0,s.useCallback)(()=>{H({...N,combine:!N.combine})},[H,N]),Vt=(0,Oe.J)().getVariables().map(Nt=>({value:Nt.name,label:Nt.label||Nt.name,origin:ue.L8.Template}));if(!_.config.featureToggles.transformationsVariableSupport){let Nt;typeof N.bucketSize=="string"?Nt=parseInt(N.bucketSize,10):Nt=N.bucketSize;let sn;return typeof N.bucketOffset=="string"?sn=parseInt(N.bucketOffset,10):sn=N.bucketOffset,s.createElement("div",null,s.createElement(he.Z,null,s.createElement(te._,{labelWidth:18,label:ma.py.bucketSize.name,tooltip:ma.py.bucketSize.description},s.createElement(Xa.Y,{value:Nt,placeholder:"auto",onChange:Re,min:0}))),s.createElement(he.Z,null,s.createElement(te._,{labelWidth:18,label:ma.py.bucketOffset.name,tooltip:ma.py.bucketOffset.description},s.createElement(Xa.Y,{value:sn,placeholder:"none",onChange:$e,min:0}))),s.createElement(he.Z,null,s.createElement(te._,{labelWidth:18,label:ma.py.combine.name,tooltip:ma.py.combine.description},s.createElement(Yn.x,{value:N.combine??!1,onChange:ht}))))}return s.createElement("div",null,s.createElement(he.Z,null,s.createElement(te._,{invalid:ve.bucketSize,error:"Value needs to be an integer or a variable",labelWidth:18,label:ma.py.bucketSize.name,tooltip:ma.py.bucketSize.description},s.createElement(at.X,{suggestions:Vt,value:N.bucketSize,placeholder:"auto",onChange:Ge}))),s.createElement(he.Z,null,s.createElement(te._,{labelWidth:18,label:ma.py.bucketOffset.name,tooltip:ma.py.bucketOffset.description,invalid:ve.bucketOffset,error:"Value needs to be an integer or a variable"},s.createElement(at.X,{suggestions:Vt,value:N.bucketOffset,placeholder:"none",onChange:nt}))),s.createElement(he.Z,null,s.createElement(te._,{labelWidth:18,label:ma.py.combine.name,tooltip:ma.py.combine.description},s.createElement(Yn.x,{value:N.combine??!1,onChange:ht}))))},Pa={id:q.W.histogram,editor:ha,transformation:De.Y.histogramTransformer,name:De.Y.histogramTransformer.name,description:De.Y.histogramTransformer.description,categories:new Set([P.w.CreateNewVisualization])};var $s=e(18605);const Js=[{value:$s.c.outer,label:"OUTER (TIME SERIES)",description:"Keep all rows from any table with a value. Join on distinct field values. Performant and best used for time series."},{value:$s.c.outerTabular,label:"OUTER (TABULAR)",description:"Join on a field value with duplicated values. Non performant outer join best used for tabular(SQL like) data."},{value:$s.c.inner,label:"INNER",description:"Drop rows that do not match a value in all tables."}];function ar({input:L,options:N,onChange:H}){const ne=(0,Ne.Hg)(L).map($e=>({label:$e,value:$e})),ve=(0,Oe.J)().getVariables().map($e=>({value:"$"+$e.name,label:"$"+$e.name})),Me=(0,s.useCallback)($e=>{H({...N,byField:$e?.value})},[H,N]),Re=(0,s.useCallback)($e=>{H({...N,mode:$e?.value})},[H,N]);return s.createElement(s.Fragment,null,s.createElement(he.Z,null,s.createElement(te._,{label:"Mode",labelWidth:8,grow:!0},s.createElement(me.Ph,{options:Js,value:N.mode??$s.c.outer,onChange:Re}))),s.createElement(he.Z,null,s.createElement(te._,{label:"Field",labelWidth:8,grow:!0},s.createElement(me.Ph,{options:[...ne,...ve],value:N.byField,onChange:Me,placeholder:"time",isClearable:!0}))))}const ws={id:q.W.joinByField,aliasIds:[q.W.seriesToColumns],editor:ar,transformation:De.Y.joinByFieldTransformer,name:De.Y.joinByFieldTransformer.name,description:De.Y.joinByFieldTransformer.description,categories:new Set([P.w.Combine])};var Qa=e(20788);const sr=[{value:Qa.k.Columns,label:"Columns"},{value:Qa.k.Rows,label:"Rows"}],Pr=({input:L,options:N,onChange:H})=>{const{labelNames:ve,selected:Me}=(0,s.useMemo)(()=>{let Ge=[],nt={};for(const It of L)for(const Vt of It.fields)if(Vt.labels)for(const Nt of Object.keys(Vt.labels))nt[Nt]||(Ge.push({value:Nt,label:Nt}),nt[Nt]=!0);const ht=new Set(N.keepLabels?.length?N.keepLabels:Object.keys(nt));return{labelNames:Ge,selected:ht}},[N.keepLabels,L]),Re=Ge=>{H({...N,valueLabel:Ge?.value})},$e=Ge=>{if(Me.has(Ge)?Me.delete(Ge):Me.add(Ge),Me.size===ve.length||!Me.size){const{keepLabels:nt,...ht}=N;H(ht)}else H({...N,keepLabels:[...Me]})};return s.createElement("div",null,s.createElement(he.Z,null,s.createElement(te._,{label:"Mode",labelWidth:20},s.createElement(fe.S,{options:sr,value:N.mode??Qa.k.Columns,onChange:Ge=>H({...N,mode:Ge})}))),s.createElement(he.Z,null,s.createElement(te._,{label:"Labels",labelWidth:20},s.createElement(Ba.K,{gap:1,wrap:!0},ve.map((Ge,nt)=>{const ht=Ge.label;return s.createElement(wa.B,{key:`${ht}/${nt}`,onClick:()=>$e(ht),label:ht,selected:Me.has(ht)})})))),N.mode!==Qa.k.Rows&&s.createElement(he.Z,null,s.createElement(te._,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},s.createElement(me.Ph,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:ve,value:N?.valueLabel,onChange:Re,className:"min-width-16"}))))},Xs={id:q.W.labelsToFields,editor:Pr,transformation:De.Y.labelsToFieldsTransformer,name:"Labels to fields",description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column.`,categories:new Set([P.w.Reformat])},_r=({options:L,onChange:N})=>{const[H,ne]=(0,s.useState)(!1),ve=(0,s.useCallback)(Ge=>{N({...L,limitField:Number(Ge.currentTarget.value)})},[N,L]),Me=(0,s.useCallback)(Ge=>{ne(!(0,Ne.f6)(Ge)),N({...L,limitField:Ge})},[N,L]),$e=(0,Oe.J)().getVariables().map(Ge=>({value:Ge.name,label:Ge.label||Ge.name,origin:ue.L8.Template}));return _.config.featureToggles.transformationsVariableSupport?s.createElement(s.Fragment,null,s.createElement(he.Z,null,s.createElement(at.X,{invalid:H,error:"Value needs to be an integer or a variable",value:String(L.limitField),onChange:Me,placeholder:"Value or variable",suggestions:$e}))):s.createElement(s.Fragment,null,s.createElement(he.Z,null,s.createElement(te._,{label:"Limit",labelWidth:8},s.createElement(Ue.I,{placeholder:"Limit count",pattern:"[0-9]*",value:L.limitField,onChange:ve,width:25}))))},eo={id:q.W.limit,editor:_r,transformation:De.Y.limitTransformer,name:"Limit",description:"Limit the number of items displayed.",categories:new Set([P.w.Filter])},zr=({input:L,options:N,onChange:H})=>L.length<=1?s.createElement(oa.S,null,"Merge has no effect when applied on a single frame."):null,Ws={id:q.W.merge,editor:zr,transformation:De.Y.mergeTransformer,name:"Merge",description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`,categories:new Set([P.w.Combine])};var rr=e(24058),Ar=e(16761),Ta=e(12190),vt=e(68497);const Et=({options:L,input:N,onChange:H})=>{const{indexByName:ne,excludeByName:ve,renameByName:Me}=L,Re=(0,Ne.Hg)(N),$e=(0,s.useMemo)(()=>fn(Re,ne),[Re,ne]),Ge=(0,s.useCallback)((It,Vt)=>{H({...L,excludeByName:{...ve,[It]:Vt}})},[H,L,ve]),nt=(0,s.useCallback)(It=>{if(!It||!It.destination)return;const Vt=It.source.index,Nt=It.destination.index;Vt!==Nt&&H({...L,indexByName:rn(Re,Vt,Nt)})},[H,L,Re]),ht=(0,s.useCallback)((It,Vt)=>{H({...L,renameByName:{...L.renameByName,[It]:Vt}})},[H,L]);return N.length>1?s.createElement(oa.S,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):s.createElement(rr.Z5,{onDragEnd:nt},s.createElement(rr.bK,{droppableId:"sortable-fields-transformer",direction:"vertical"},It=>s.createElement("div",{ref:It.innerRef,...It.droppableProps},$e.map((Vt,Nt)=>s.createElement(Qt,{fieldName:Vt,renamedFieldName:Me[Vt],index:Nt,onToggleVisibility:Ge,onRenameField:ht,visible:!ve[Vt],key:Vt})),It.placeholder)))};Et.displayName="OrganizeFieldsTransformerEditor";const Qt=({fieldName:L,renamedFieldName:N,index:H,visible:ne,onToggleVisibility:ve,onRenameField:Me})=>{const Re=(0,Ze.wW)(Yt);return s.createElement(rr._l,{draggableId:L,index:H},$e=>s.createElement("div",{className:"gf-form-inline",ref:$e.innerRef,...$e.draggableProps},s.createElement("div",{className:"gf-form gf-form--grow"},s.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},s.createElement(Ta.J,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:Re.draggable,...$e.dragHandleProps}),s.createElement(vt.h,{className:Re.toggle,size:"md",name:ne?"eye":"eye-slash",onClick:()=>ve(L,ne),tooltip:ne?"Disable":"Enable"}),s.createElement("span",{className:Re.name,title:L},L)),s.createElement(Ue.I,{className:"flex-grow-1",defaultValue:N||"",placeholder:`Rename ${L}`,onBlur:Ge=>Me(L,Ge.currentTarget.value)}))))};Qt.displayName="DraggableFieldName";const Yt=L=>({toggle:(0,Ie.css)`
    margin: 0 8px;
    color: ${L.colors.text.secondary};
  `,draggable:(0,Ie.css)`
    opacity: 0.4;
    &:hover {
      color: ${L.colors.text.maxContrast};
    }
  `,name:(0,Ie.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${L.typography.bodySmall.fontSize};
    font-weight: ${L.typography.fontWeightMedium};
  `}),rn=(L,N,H)=>{const ne=Array.from(L),[ve]=ne.splice(N,1);return ne.splice(H,0,ve),ne.reduce((Me,Re,$e)=>(Me[Re]=$e,Me),{})},fn=(L,N={})=>{if(!N||Object.keys(N).length===0)return L;const H=(0,Ar.$)(N);return L.sort(H)},xn={id:q.W.organize,editor:Et,transformation:De.Y.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data.",categories:new Set([P.w.ReorderAndRename])};var wn=e(15951),yn=e(28888);const Ea=({options:L,onChange:N})=>{const H=[{label:"Series to rows",value:wn.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:wn.AL.ReduceFields,description:"Collapse each field into a single value"}],ne=(0,s.useCallback)(Re=>{const $e=Re.value;N({...L,mode:$e,includeTimeField:$e===wn.AL.ReduceFields?!!L.includeTimeField:!1})},[N,L]),ve=(0,s.useCallback)(()=>{N({...L,includeTimeField:!L.includeTimeField})},[N,L]),Me=(0,s.useCallback)(()=>{N({...L,labelsToFields:!L.labelsToFields})},[N,L]);return s.createElement(s.Fragment,null,s.createElement(te._,{label:"Mode","aria-label":yn.wl.components.Transforms.Reduce.modeLabel,grow:!0,labelWidth:16},s.createElement(me.Ph,{options:H,value:H.find(Re=>Re.value===L.mode)||H[0],onChange:ne})),s.createElement(te._,{label:"Calculations","aria-label":yn.wl.components.Transforms.Reduce.calculationsLabel,grow:!0,labelWidth:16},s.createElement(St.m,{placeholder:"Choose Stat",allowMultiple:!0,stats:L.reducers||[],onChange:Re=>{N({...L,reducers:Re})}})),L.mode===wn.AL.ReduceFields&&s.createElement(te._,{htmlFor:"include-time-field",labelWidth:16,label:"Include time"},s.createElement(Yn.x,{id:"include-time-field",value:!!L.includeTimeField,onChange:ve})),L.mode!==wn.AL.ReduceFields&&s.createElement(te._,{htmlFor:"labels-to-fields",labelWidth:16,label:"Labels to fields"},s.createElement(Yn.x,{id:"labels-to-fields",value:!!L.labelsToFields,onChange:Me})))},sa={id:q.W.reduce,editor:Ea,transformation:De.Y.reduceTransformer,name:De.Y.reduceTransformer.name,description:De.Y.reduceTransformer.description,categories:new Set([P.w.CalculateNewFields])};var Un=e(96227);class ya extends s.PureComponent{constructor(N){super(N),this.handleRegexChange=H=>{const ne=H.currentTarget.value;let ve=!0;if(ne)try{ne&&(0,ra.jO)(ne)}catch{ve=!1}this.setState(Me=>({...Me,regex:ne,isRegexValid:ve}))},this.handleRenameChange=H=>{const ne=H.currentTarget.value;this.setState(ve=>({...ve,renamePattern:ne}))},this.handleRegexBlur=H=>{const ne=H.currentTarget.value;let ve=!0;try{ne&&(0,ra.jO)(ne)}catch{ve=!1}this.setState({isRegexValid:ve},()=>{ve&&this.props.onChange({...this.props.options,regex:ne})})},this.handleRenameBlur=H=>{const ne=H.currentTarget.value;this.setState({renamePattern:ne},()=>this.props.onChange({...this.props.options,renamePattern:ne}))},this.state={regex:N.options.regex,renamePattern:N.options.renamePattern,isRegexValid:!0}}render(){const{regex:N,renamePattern:H,isRegexValid:ne}=this.state;return s.createElement(s.Fragment,null,s.createElement("div",{className:"gf-form-inline"},s.createElement("div",{className:"gf-form gf-form--grow"},s.createElement("div",{className:"gf-form-label width-8"},"Match"),s.createElement(Un.g,{invalid:!ne,error:ne?void 0:"Invalid pattern",className:(0,Ie.css)`
                margin-bottom: 0;
              `},s.createElement(Ue.I,{placeholder:"Regular expression pattern",value:N||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})))),s.createElement("div",{className:"gf-form-inline"},s.createElement("div",{className:"gf-form gf-form--grow"},s.createElement("div",{className:"gf-form-label width-8"},"Replace"),s.createElement(Un.g,{className:(0,Ie.css)`
                margin-bottom: 0;
              `},s.createElement(Ue.I,{placeholder:"Replacement pattern",value:H||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))))}}const os={id:q.W.renameByRegex,editor:ya,transformation:De.Y.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders.",categories:new Set([P.w.ReorderAndRename])},ps=({input:L,options:N,onChange:H})=>null,Is={id:q.W.seriesToRows,editor:ps,transformation:De.Y.seriesToRowsTransformer,name:"Series to rows",description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`,categories:new Set([P.w.Combine,P.w.Reformat])},ur=({input:L,options:N,onChange:H})=>{const ne=(0,Ne.Hg)(L).map(Ge=>({label:Ge,value:Ge})),Me=(0,Oe.J)().getVariables().map(Ge=>({label:"$"+Ge.name,value:"$"+Ge.name})),Re=(0,s.useCallback)((Ge,nt)=>{H({...N,sort:[nt]})},[H,N]),$e=N.sort?.length?N.sort:[{}];return s.createElement("div",null,$e.map((Ge,nt)=>s.createElement(he.Z,{key:`${Ge.field}/${nt}`},s.createElement(te._,{label:"Field",labelWidth:10,grow:!0},s.createElement(me.Ph,{options:_.config.featureToggles.transformationsVariableSupport?[...ne,...Me]:ne,value:Ge.field,placeholder:"Select field",onChange:ht=>{Re(nt,{...Ge,field:ht.value})}})),s.createElement(te._,{label:"Reverse"},s.createElement(Yn.x,{value:!!Ge.desc,onChange:()=>{Re(nt,{...Ge,desc:!Ge.desc})}})))))},po={id:q.W.sortBy,editor:ur,transformation:De.Y.sortByTransformer,name:De.Y.sortByTransformer.name,description:De.Y.sortByTransformer.description,categories:new Set([P.w.ReorderAndRename])};function Hr({options:L,onChange:N}){const[H,ne]=(0,s.useState)(L),ve=to(),Me=no(),Re=()=>{H.push({path:""}),ne([...H]),nt()},$e=ht=>{H&&(H.splice(ht,1),ne([...H]),nt())},Ge=(ht,It,Vt)=>{H&&(Vt==="alias"?H[It].alias=ht.currentTarget.value??"":H[It].path=ht.currentTarget.value??"",ne([...H]))},nt=()=>{N(H)};return s.createElement("ol",{className:(0,Ie.cx)(Me.list)},H&&H.map((ht,It)=>s.createElement("li",{key:It},s.createElement(he.Z,null,s.createElement(te._,{label:"Field",tooltip:ve.field,grow:!0},s.createElement(Ue.I,{onBlur:nt,onChange:Vt=>Ge(Vt,It,"path"),value:ht.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),s.createElement(te._,{label:"Alias",tooltip:ve.alias},s.createElement(Ue.I,{width:12,value:ht.alias,onBlur:nt,onChange:Vt=>Ge(Vt,It,"alias")})),s.createElement(te._,{className:(0,Ie.cx)(Me.removeIcon)},s.createElement(vt.h,{onClick:()=>$e(It),name:"trash-alt",tooltip:"Remove path"}))))),s.createElement(te._,null,s.createElement(Te.zx,{icon:"plus",onClick:()=>Re(),variant:"secondary"},"Add path")))}const to=()=>{const L=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:s.createElement("div",null,"A valid path of an json object.",s.createElement("div",null,s.createElement("strong",null,"JSON Value:")),s.createElement("pre",null,s.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),s.createElement("strong",null,"Valid Paths:"),L.map((N,H)=>s.createElement("p",{key:H},s.createElement("code",null,N.path),s.createElement("i",null,N.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function no(){return{list:(0,Ie.css)`
      margin-left: 20px;
    `,removeIcon:(0,Ie.css)`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var Ma=e(53305),is=(L=>(L.JSON="json",L.KeyValues="kvp",L.Auto="auto",L))(is||{});const ao={id:is.JSON,name:"JSON",description:"Parse JSON string",parse:L=>JSON.parse(L)};function Fa(L){const N=[];let H="",ne="";const ve={};for(let Me=0;Me<L.length;Me++){let Re=L[Me];Re===H&&(H="",Re=L[++Me]);const $e=Re==="\\";if($e&&(Re=L[++Me]),$e||H.length){N.push(Re);continue}switch((Re==='"'||Re==="'")&&(H=Re),Re){case":":case"=":N.length&&(ne&&(ve[ne]=""),ne=N.join(""),N.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:N.length&&ne===""&&(ve[N.join("")]="",N.length=0);case",":case";":case"&":case"{":case"}":if(N.length){const Ge=N.join("");ne.length?(ve[ne]=Ge,ne=""):ne=Ge,N.length=0}break;default:N.push(Re),Me===L.length-1&&ne===""&&N.length&&(ve[N.join("")]="",N.length=0)}}return ne.length&&(ve[ne]=N.join("")),ve}const ho={id:is.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:Fa},kl=[ao,ho],Cr={id:is.Auto,name:"Auto",description:"parse new fields automatically",parse:L=>{for(const N of kl)try{const H=N.parse(L);if(H!=null)return H}catch{}}},Ii=new ye.B(()=>[...kl,Cr]),Gl={id:q.W.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(L,N)=>H=>H.pipe((0,Pt.U)(ne=>Gl.transformer(L,N)(ne))),transformer:L=>N=>N.map(H=>iu(H,L))};function iu(L,N){if(!N.source)return L;const H=(0,Rn.findField)(L,N.source);if(!H)return L;const ne=Ii.getIfExists(N.format??is.Auto);if(!ne)throw new Error("unkonwn extractor");const ve=L.length,Me=[],Re=new Map;for(let Ge=0;Ge<ve;Ge++){let nt=H.values[Ge];if((0,h.isString)(nt))try{nt=ne.parse(nt)}catch{nt={}}if(nt!=null){if(N.format===is.JSON&&N.jsonPaths&&N.jsonPaths?.length>0){const ht={},It=N.jsonPaths.filter(Vt=>Vt.path);It.length>0&&(It.forEach(Vt=>{const Nt=Vt.alias&&Vt.alias.length>0?Vt.alias:Vt.path;ht[Nt]=(0,h.get)(nt,Vt.path)??"Not Found"}),nt=ht)}for(const[ht,It]of Object.entries(nt)){let Vt=Re.get(ht);Vt==null&&(Vt=new Array(ve),Re.set(ht,Vt),Me.push(ht)),Vt[Ge]=It}}}const $e=Me.map(Ge=>{const nt=Re.get(Ge);return{name:Ge,values:nt,type:nt?(0,Ma.DP)(nt.find(ht=>ht!=null)):Y.fS.other,config:{}}});if(N.keepTime){const Ge=(0,Rn.findField)(L,"Time")||(0,Rn.findField)(L,"time");Ge&&$e.unshift(Ge)}return N.replace||$e.unshift(...L.fields),{...L,fields:$e}}const _o={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},lu=({input:L,options:N,onChange:H})=>{const ne=nt=>{H({...N,source:nt})},ve=nt=>{H({...N,format:nt?.value})},Me=nt=>{H({...N,jsonPaths:nt})},Re=()=>{N.replace&&(N.keepTime=!1),H({...N,replace:!N.replace})},$e=()=>{H({...N,keepTime:!N.keepTime})},Ge=Ii.selectOptions(N.format?[N.format]:void 0);return s.createElement("div",null,s.createElement(he.Z,null,s.createElement(te._,{label:"Source",labelWidth:16},s.createElement(en.b,{context:{data:L},value:N.source??"",onChange:ne,item:_o}))),s.createElement(he.Z,null,s.createElement(te._,{label:"Format",labelWidth:16},s.createElement(me.Ph,{value:Ge.current[0],options:Ge.options,onChange:ve,width:24,placeholder:"Auto"}))),N.format==="json"&&s.createElement(Hr,{options:N.jsonPaths??[],onChange:Me}),s.createElement(he.Z,null,s.createElement(te._,{label:"Replace all fields",labelWidth:16},s.createElement(Yn.x,{value:N.replace??!1,onChange:Re}))),N.replace&&s.createElement(he.Z,null,s.createElement(te._,{label:"Keep time",labelWidth:16},s.createElement(Yn.x,{value:N.keepTime??!1,onChange:$e}))))},jl={id:q.W.extractFields,editor:lu,transformation:Gl,name:"Extract fields",description:"Parse fields from content (JSON, labels, etc).",categories:new Set([P.w.Reformat])};var or=e(33155),zo=e(96428);const vo={id:q.W.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels.",defaultOptions:{},operator:(L,N)=>H=>H.pipe((0,Pt.U)(ne=>vo.transformer(L,N)(ne))),transformer:L=>N=>!N||!N.length?N:[cu(L,N)]};function cu(L,N){if(!L.value?.length)return br("No value labele configured");const H=(0,Ne.jY)(N);if(H.size<1)return br("No labels in result");if(!H.has(L.value))return br("Value label not found");let ne=L.join?.length?L.join:Array.from(H);ne=ne.filter(It=>It!==L.value);const ve=new Set,Me=new Map,Re={};for(const It of N)for(const Vt of It.fields)if(Vt.labels&&Vt.type!==Y.fS.time){const Nt=ne.map(za=>Vt.labels[za]),sn=Nt.join(",");let gn=Me.get(sn);gn||(gn={keys:Nt,values:{}},Me.set(sn,gn));const Vn=Vt.labels[L.value],ja=Vt.values,ba=gn.values[Vn];ba?gn.values[Vn]=ba.concat(ja):gn.values[Vn]=ja,Re[Vn]||(Re[Vn]=Vt),ve.add(Vn)}const $e=Array.from(ve),Ge=ne.map(()=>[]),nt=$e.map(()=>[]);for(const It of Me.values()){let Vt=-1,Nt=!1;for(;!Nt;){Vt++,Nt=!0;for(let sn=0;sn<ne.length;sn++)Ge[sn].push(It.keys[sn]);for(let sn=0;sn<$e.length;sn++){const gn=$e[sn],Vn=It.values[gn]??[];nt[sn].push(Vn[Vt]),Vn.length>Vt+1&&(Nt=!1)}}}const ht={fields:[],length:nt[0].length};for(let It=0;It<ne.length;It++)ht.fields.push({name:ne[It],config:{},type:Y.fS.string,values:Ge[It]});for(let It=0;It<$e.length;It++){const Vt=Re[$e[It]];ht.fields.push({name:$e[It],config:{},type:Vt.type??Y.fS.number,values:nt[It]})}return ht}function br(L){return{meta:{notices:[{severity:"error",text:L}]},fields:[{name:"Error",type:Y.fS.string,config:{},values:[L]}],length:0}}function Ho({input:L,options:N,onChange:H}){const ne=(0,s.useMemo)(()=>{let Ge;const nt=(0,Ne.jY)(L),ht=Array.from(nt).map(Vn=>({label:Vn,value:Vn}));let It=ht.find(Vn=>Vn.value===N.value);!It&&N.value&&(It={label:`${N.value} (not found)`,value:N.value},ht.push(It)),L.length?nt.size===0&&(Ge=s.createElement(or.b,{title:"No labels found"},"The input does not contain any labels")):Ge=s.createElement(or.b,{title:"No input found"},"No input (or labels) found"),nt.delete(N.value);const Vt=Array.from(nt).map(Vn=>({label:Vn,value:Vn}));let Nt=Vt;const sn=!!N.join?.length;let gn="Join";return sn?Nt=Vt.filter(Vn=>!N.join.includes(Vn.value)):gn=Vt.map(Vn=>Vn.value).join(", "),{warn:Ge,valueOptions:ht,valueOption:It,joinOptions:Vt,addOptions:Nt,addText:gn,hasJoin:sn,key:Date.now()}},[N,L]),ve=(Ge,nt)=>{if(!N.join)return;const ht=N.join.slice();if(nt)ht[Ge]=nt;else if(ht.splice(Ge,1),!ht.length){H({...N,join:void 0});return}const It=new Set(ht);N.value&&It.delete(N.value),H({...N,join:Array.from(It)})},Me=Ge=>{const nt=Ge?.value;if(!nt)return;const ht=N.join?N.join.slice():[];ht.push(nt),H({...N,join:ht})},Re=10,$e="No labels found";return s.createElement("div",null,ne.warn,s.createElement(he.Z,null,s.createElement(te._,{error:"required",invalid:!N.value?.length,label:"Value",labelWidth:Re,tooltip:"Select the label indicating the values name"},s.createElement(me.Ph,{options:ne.valueOptions,value:ne.valueOption,onChange:Ge=>H({...N,value:Ge.value}),noOptionsMessage:$e}))),ne.hasJoin?N.join.map((Ge,nt)=>s.createElement(he.Z,{key:Ge+nt},s.createElement(te._,{label:"Join",labelWidth:Re,error:"Unable to join by the value label",invalid:Ge===N.value},s.createElement(ua.Lh,null,s.createElement(me.Ph,{options:ne.joinOptions,value:ne.joinOptions.find(ht=>ht.value===Ge),isClearable:!0,onChange:ht=>ve(nt,ht?.value),noOptionsMessage:$e}),!!(ne.addOptions.length&&nt===N.join.length-1)&&s.createElement(zo.b,{icon:"plus",label:"",options:ne.addOptions,onChange:Me,variant:"secondary"}))))):s.createElement(s.Fragment,null,!!ne.addOptions.length&&s.createElement(he.Z,null,s.createElement(te._,{label:"Join",labelWidth:Re},s.createElement(me.Ph,{options:ne.addOptions,placeholder:ne.addText,onChange:Me,noOptionsMessage:$e})))))}const du={id:vo.id,editor:Ho,transformation:vo,name:vo.name,description:vo.description,state:re.BV.beta,categories:new Set([P.w.Combine])};var Ri=e(62198),Eo=e(84289),Da=e(22605),Ql=e(90348);const uu={id:q.W.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:L=>N=>N.pipe((0,Eo.z)(H=>(0,Da.D)(mu(H,L))))};async function mu(L,N){const H=Z.Ls.get(ae.mi.byName).get(N?.lookupField),ne=await(0,Ql.so)(N?.gazetteer??Ql.LI);return ne.frame?Yl(L,ne,H):Promise.reject("missing frame in gazetteer")}function Yl(L,N,H){const ne=N.frame()?.fields;return ne?L.map(ve=>{const Me=ve.length,Re=[];for(const $e of ve.fields)if(Re.push($e),H($e,ve,L)){const Ge=$e.values,nt=[];for(const ht of ne){const It=new Array(Me);nt.push(It),Re.push({...ht,values:It})}for(let ht=0;ht<N.count;ht++){const It=N.find(Ge[ht]);if(It?.index!=null)for(let Vt=0;Vt<ne.length;Vt++)nt[Vt][ht]=ne[Vt].values[It.index]}}return{...ve,fields:Re}}):L}const Ai={settings:{width:30,filter:L=>L.type===Y.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},fu={settings:{}},gu=({input:L,options:N,onChange:H})=>{const ne=(0,s.useCallback)(Me=>{H({...N,lookupField:Me})},[H,N]),ve=(0,s.useCallback)(Me=>{H({...N,gazetteer:Me})},[H,N]);return s.createElement("div",null,s.createElement(he.Z,null,s.createElement(te._,{label:"Field",labelWidth:12},s.createElement(en.b,{context:{data:L},value:N?.lookupField??"",onChange:ne,item:Ai}))),s.createElement(he.Z,null,s.createElement(te._,{label:"Lookup",labelWidth:12},s.createElement(Ri.Q,{value:N?.gazetteer??"",context:{data:L},item:fu,onChange:ve}))))},so={id:q.W.fieldLookup,editor:gu,transformation:uu,name:"Field lookup",description:"Use a field value to lookup additional fields from an external source. This currently supports spatial data, but will eventually support more formats.",state:re.BV.alpha,categories:new Set([P.w.PerformSpatialOperations])};var Zl=e(29711),pu=e(22439),Mr=e(21070);const ko=(L,N,H=[])=>(N===0?H.push(L):L.forEach(ne=>{ko(ne,N-1,H)}),H);function Li(L){const N=L[0].length,H=L.length,ne=new Map;for(let ve=0;ve<N;ve++){let Me=ne;for(let Re=0;Re<H;Re++){let $e=L[Re][ve],Ge=Me.get($e);Ge==null&&(Ge=Re===H-1?[]:new Map,Me.set($e,Ge)),Me=Ge}Me.push(ve)}return ko(ne,H)}const Go={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function hu(L,N,H){return N.map((ne,ve)=>L.withNames?`${ne}${L.separator1}${H[ve]}`:H[ve]).join(L.separator2)}function jo(L,N){const H={};return L.forEach((ne,ve)=>{H[ne]=String(N[ve])}),H}const ro={id:q.W.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{},operator:(L,N)=>H=>H.pipe((0,Pt.U)(ne=>ro.transformer(L,N)(ne))),transformer:(L,N)=>{const H=(0,pu.f)(N,{names:L.fields});if(!H)return Mr.d.transformer({},N);const ne=(0,Z.sq)(H);return ve=>ve.length?Bi(ve[0],ne,L):ve}};function Bi(L,N,H){const ne=L.fields.filter($e=>N($e,L,[L]));if(!ne.length)return[L];const ve=ne.map($e=>$e.values),Me=ne.map($e=>$e.name),Re={...Go,...H?.naming};return Li(ve).map($e=>{let Ge=L.name,nt={};if(Re.asLabels)nt=jo(Me,ne.map((It,Vt)=>ve[Vt][$e[0]]));else{let It=hu(Re,Me,ne.map((Vt,Nt)=>ve[Nt][$e[0]]));Re?.append&&L.name&&(It=`${L.name} ${It}`),Ge=It}let ht=L.fields;if(!H?.keepFields){const It=new Set(Me);ht=L.fields.filter(Vt=>!It.has(Vt.name))}return{name:Ge,meta:L.meta,length:$e.length,fields:ht.map(It=>{const Vt=It.values,Nt=Array($e.length);for(let sn=0;sn<$e.length;sn++)Nt[sn]=Vt[$e[sn]];return{name:It.name,type:It.type,config:It.config,labels:{...It.labels,...nt},values:Nt}})}})}function Jl({input:L,options:N,onChange:H}){const ne=(0,Zl.IX)(L),ve=(0,Zl.nw)(ne),Me=(0,s.useMemo)(()=>{const It=new Set(N.fields);return It.size<1?ve:ve.filter(Vt=>!It.has(Vt.value))},[ve,N]),Re=(0,s.useCallback)(It=>{if(!It.value)return;const Vt=new Set(N.fields);Vt.add(It.value),H({...N,fields:[...Vt]})},[H,N]);let $e;(It=>{It[It.asLabels=0]="asLabels",It[It.frameName=1]="frameName"})($e||($e={}));const Ge=[{label:"As label",value:0},{label:"As frame name",value:1}],nt=(0,s.useCallback)(It=>{if(!It)return;const Vt=new Set(N.fields);Vt.delete(It),H({...N,fields:[...Vt]})},[H,N]);if(L.length>1)return s.createElement(oa.S,null,"Partition by values only works with a single frame.");const ht=[...new Set(N.fields)];return s.createElement("div",null,s.createElement(he.Z,null,s.createElement(te._,{label:"Field",labelWidth:10,grow:!0},s.createElement(ua.Lh,null,ht.map(It=>s.createElement(Te.zx,{key:It,icon:"times",variant:"secondary",size:"md",onClick:()=>nt(It)},It)),Me.length&&s.createElement(zo.b,{variant:"secondary",size:"md",options:Me,onChange:Re,label:"Select field",icon:"plus"})))),s.createElement(he.Z,null,s.createElement(te._,{tooltip:"Sets how the names of the selected fields are displayed. As frame name is usually better for tabular data",label:"Naming",labelWidth:10},s.createElement(fe.S,{options:Ge,value:N.naming?.asLabels===void 0||N.naming.asLabels?0:1,onChange:It=>H({...N,naming:{...N.naming,asLabels:It===0}})}))))}const vu={id:q.W.partitionByValues,editor:Jl,transformation:ro,name:ro.name,description:ro.description,state:re.BV.alpha,categories:new Set([P.w.Reformat])};var oo=e(51226),Ls=e(7906),Eu=e(82837),io=(L=>(L.TimeSeriesWide="wide",L.TimeSeriesLong="long",L.TimeSeriesMulti="multi",L.TimeSeriesMany="many",L))(io||{});function yu(L){if(!Array.isArray(L)||L.length===0)return L;const N=[];for(const H of Xl(L)){const ne=H.fields[0];if(!ne||ne.type!==Y.fS.time)continue;const ve=[],Me=[];for(const Re of H.fields)switch(Re.type){case Y.fS.number:case Y.fS.boolean:ve.push(Re);break;case Y.fS.string:Me.push(Re);break}for(const Re of ve)if(Me.length){const $e=new Map;for(let Ge=0;Ge<H.length;Ge++){const nt=ne.values[Ge],ht=Re.values[Ge];if(ht===void 0||nt==null)continue;const It=Me.map(Nt=>Nt.values[Ge]).join("/");let Vt=$e.get(It);if(!Vt){Vt={key:It,time:[],value:[],labels:{}};for(const Nt of Me)Vt.labels[Nt.name]=Nt.values[Ge];$e.set(It,Vt)}Vt.time.push(nt),Vt.value.push(ht)}for(const Ge of $e.values())N.push({name:H.name,refId:H.refId,meta:{...H.meta,type:oo.P.TimeSeriesMulti},fields:[{...ne,values:Ge.time},{...Re,values:Ge.value,labels:Ge.labels}],length:Ge.time.length})}else N.push({name:H.name,refId:H.refId,meta:{...H.meta,type:oo.P.TimeSeriesMulti},fields:[ne,Re],length:H.length})}return N}function Xl(L){if(!Array.isArray(L)||L.length===0)return L;const N=[];for(const H of L){let ne;const ve=[],Me={},Re={},$e={},Ge={};for(let sn=0;sn<H.fields.length;sn++){const gn=H.fields[sn];switch(gn.type){case Y.fS.string:case Y.fS.boolean:gn.name in Ge||(Ge[gn.name]=sn,Re[gn.name]=!0);break;case Y.fS.time:if(!ne){ne=gn;break}default:if(gn.name in Me){const ba=Me[gn.name];if(gn.type!==ba)continue}else Me[gn.name]=gn.type,ve.push(gn.name);const Vn=JSON.stringify(gn.labels),ja=$e[Vn];if(ja!==void 0?ja.push(sn):$e[Vn]=[sn],gn.labels!=null)for(const ba in gn.labels)Re[ba]=!0}}if(!ne)continue;const nt=[],ht=[],It=[],Vt=[];for(let sn=0;sn<H.length;sn++)nt.push({time:ne.values[sn],wideRowIndex:sn});for(const sn in $e)ht.push(sn);for(const sn in Re)It.push(sn);for(const sn in Ge)Vt.push(sn);nt.sort((sn,gn)=>sn.time-gn.time),ht.sort(),It.sort(),ve.sort();const Nt=new Ls.v({...H,meta:{...H.meta,type:oo.P.TimeSeriesLong},fields:[{name:ne.name,type:ne.type}]});for(const sn of ve)Nt.addField({name:sn,type:Me[sn]});for(const sn of It)Nt.addField({name:sn,type:Y.fS.string});for(const sn of nt){const{time:gn,wideRowIndex:Vn}=sn;for(const ja of ht){const ba={};for(const Ns of Vt)ba[Ns]=H.fields[Ge[Ns]].values[Vn];let za=0;for(const Ns of $e[ja]){const Dr=H.fields[Ns];if(za++===0&&Dr.labels!=null)for(const Oi in Dr.labels)ba[Oi]=Dr.labels[Oi];ba[Dr.name]=Dr.values[Vn]}ba[ne.name]=gn,Nt.add(ba)}}N.push(Nt)}return N}function Ui(L){return Bi(L,H=>H.type===Y.fS.string).map(H=>(H.meta||(H.meta={}),H.meta.type=oo.P.TimeSeriesMulti,H))}const yo={id:q.W.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(L,N)=>H=>H.pipe((0,Pt.U)(ne=>yo.transformer(L,N)(ne))),transformer:L=>{const N=L?.format??"wide";if(N==="many"||N==="multi")return yu;if(N==="long")return Xl;const H=Z.Ls.get(ae.mi.firstTimeField).get({});return ne=>{if(!ne.length)return[];const ve=[];for(const Re of ne)Re.meta?.type===oo.P.TimeSeriesLong?Ui(Re).forEach($e=>ve.push($e)):ve.push(Re);const Me=(0,Eu._9)({frames:ve,joinBy:H,keepOriginIndices:!0});return Me?(Me.meta||(Me.meta={}),Me.meta.type=oo.P.TimeSeriesWide,[Me]):[]}}},Du={label:"Wide time series",value:io.TimeSeriesWide,description:"Creates a single frame joined by time",info:s.createElement("ul",null,s.createElement("li",null,"Single frame"),s.createElement("li",null,"1st field is shared time field"),s.createElement("li",null,"Time in ascending order"),s.createElement("li",null,"Multiple value fields of any type"))},Pu={label:"Multi-frame time series",value:io.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:s.createElement("ul",null,s.createElement("li",null,"Multiple frames"),s.createElement("li",null,"Each frame has two fields: time, value"),s.createElement("li",null,"Time in ascending order"),s.createElement("li",null,"String values are represented as labels"),s.createElement("li",null,"All values are numeric"))},Ni={label:"Long time series",value:io.TimeSeriesLong,description:"Convert each frame to long format",info:s.createElement("ul",null,s.createElement("li",null,"Single frame"),s.createElement("li",null,"1st field is time field"),s.createElement("li",null,"Time in ascending order, but may have duplictes"),s.createElement("li",null,"String values are represented as separate fields rather than as labels"),s.createElement("li",null,"Multiple value fields may exist"))},kr=[Du,Pu,Ni];function ql(L){const{options:N,onChange:H}=L,ne=(0,Ze.wW)(ec),ve=(0,s.useCallback)(Me=>{H({...N,format:Me.value})},[H,N]);return s.createElement(s.Fragment,null,s.createElement(he.Z,null,s.createElement(te._,{label:"Format",labelWidth:12},s.createElement(me.Ph,{width:35,options:kr,value:kr.find(Me=>Me.value===io.TimeSeriesMulti&&N.format===io.TimeSeriesMany?!0:Me.value===N.format)||kr[0],onChange:ve,className:"flex-grow-1"}))),s.createElement(he.Z,null,s.createElement(te._,{label:"Info",labelWidth:12},s.createElement("div",{className:ne.info},(kr.find(Me=>Me.value===N.format)||kr[0]).info))))}const ec=L=>({info:(0,Ie.css)`
    margin-left: 20px;
  `}),tc={id:yo.id,editor:ql,transformation:yo,name:yo.name,description:yo.description,help:`
  ### Use cases

  This takes query results and transforms them into a predictable timeseries format.
  This transformer may be especially useful when using old panels that only expect the
  many-frame timeseries format.
  `,categories:new Set([P.w.Reformat])},Do={id:q.W.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config.",defaultOptions:{},operator:L=>N=>N.pipe((0,Pt.U)(H=>H.map(ne=>wi(L,ne))))};function wi(L,N){const H=xt(N,L.mappings??[],!0),{nameField:ne,valueField:ve}=H;if(!ne||!ve)return N;const Me=[];for(let Re=0;Re<ne.values.length;Re++){const $e=ne.values[Re],Ge=ve.values[Re],nt=Ht(N,Re,H),ht=Lr(N,Re,H),It={name:`${$e}`,type:ve.type,values:[Ge],config:nt,labels:ht};Me.push(It)}return{fields:Me,length:1}}function Lr(L,N,H){const ne={...H.nameField.labels};for(let ve=0;ve<L.fields.length;ve++){const Me=L.fields[ve],Re=(0,ce.CZ)(Me,L),$e=H.index[Re];if($e.handler&&$e.handler.key!==Zt.Label)continue;const Ge=Me.values[N];Ge!=null&&(ne[Re]=Ge)}return ne}function Cu({input:L,options:N,onChange:H}){return L.length===0?null:s.createElement("div",null,s.createElement(Ft,{frame:L[0],mappings:N.mappings??[],onChange:ne=>H({...N,mappings:ne}),withNameAndValue:!0}))}const nc={id:Do.id,editor:Cu,transformation:Do,name:Do.name,description:Do.description,state:re.BV.beta,categories:new Set([P.w.Reformat]),help:`
### Use cases 

This transforms rows into separate fields. This can be useful as fields can be styled and configured 
individually, something rows cannot. It can also use additional fields as sources for dynamic field 
configuration or map them to field labels. The additional labels can then be used to define better 
display names for the resulting fields.

Useful when visualization data in:
- Gauge
- Stat
- Pie chart

## Example

Input:

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

Output:

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max 
config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field 
configuration and if set like this will be used by the visualization instead of any options manually 
configured in the panel editor options pane.

`};var ac=e(34547),Wi=e(54519),vs=e(2213),sc=e(82783),Po=e(46303),Qo=e(10154);const Fi={id:q.W.spatial,name:"Spatial operations",description:"Apply spatial operations to query results.",defaultOptions:{},operator:L=>N=>N.pipe((0,Eo.z)(H=>(0,Da.D)(oc(H,L))))};function rc(L){return L.action===vs.JJ.Modify&&L.modify?.op===vs.ac.LineBuilder}async function oc(L,N){const H=await(0,Po.cJ)(N.source);if(rc(N)){const ne=await(0,Po.cJ)(N.modify?.target);return L.map(ve=>{const Me=(0,Po.g6)(ve,H),Re=(0,Po.g6)(ve,ne);if(Me.field&&Re.field){const $e=[...ve.fields],Ge=(0,sc.Fh)(Me.field,Re.field),nt=$e[0];return nt.type===Y.fS.geo&&nt!==Me.field&&nt!==Re.field?$e[0]=(0,sc.EK)(nt,Ge):$e.unshift(Ge),{...ve,fields:$e}}return ve})}return L.map(ne=>{let ve=(0,Po.g6)(ne,H);if(ve.field){if(N.action===vs.JJ.Modify){switch(N.modify?.op){case vs.ac.AsLine:let Re=ve.field.name;return(!Re||Re==="Point")&&(Re="Line"),{...ne,length:1,fields:[{...ve.field,name:Re,type:Y.fS.geo,values:[(0,Qo.Lp)(ve.field)]}]}}return ne}const Me=ve.derived?[ve.field,...ne.fields]:ne.fields.slice(0);if(N.action===vs.JJ.Calculate&&(Me.push((0,Qo.N7)(ve.field,N.calculate??{})),ve.derived=!0),ve.derived)return{...ne,fields:Me}}return ne})}const Bs=(L,N)=>{const H=N.options??{};L.addSelect({path:"action",name:"Action",description:"",defaultValue:vs.JJ.Prepare,settings:{options:[{value:vs.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:vs.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:vs.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),H.action===vs.JJ.Calculate?L.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:vs.Ii.Heading,settings:{options:[{value:vs.Ii.Heading,label:"Heading"},{value:vs.Ii.Area,label:"Area"},{value:vs.Ii.Distance,label:"Distance"}]}}):H.action===vs.JJ.Modify&&L.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:vs.ac.AsLine,settings:{options:[{value:vs.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:vs.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),rc(H)?(L.addNestedOptions({category:["Source"],path:"source",build:(ne,ve)=>{const Me=H.source??{mode:ac.q1.Auto};(0,Wi.C)("Point","",ne,Me)}}),L.addNestedOptions({category:["Target"],path:"modify",build:(ne,ve)=>{const Me=H.modify?.target??{mode:ac.q1.Auto};(0,Wi.C)("Point","target.",ne,Me)}})):(0,Wi.C)("Location","source.",L,H.source)},ic=L=>{(0,s.useEffect)(()=>{if(!L.options.source?.mode){const ne=Fe(Bs);L.onChange({...ne,...L.options}),console.log("geometry useEffect",ne)}},[]);const N=Yo((0,Ze.l4)()),H=we(L,Bs);return s.createElement("div",null,s.createElement("div",null,H.items.map(ne=>ne.render())),s.createElement("div",null,H.categories.map(ne=>s.createElement("div",{key:ne.props.id,className:N.wrap},s.createElement("h5",null,ne.props.title),s.createElement("div",{className:N.item},ne.items.map(ve=>ve.render()))))))},Yo=L=>({wrap:(0,Ie.css)`
      margin-bottom: 20px;
    `,item:(0,Ie.css)`
      border-left: 4px solid ${L.colors.border.strong};
      padding-left: 10px;
    `}),bu={id:q.W.spatial,editor:ic,transformation:Fi,name:Fi.name,description:Fi.description,state:re.BV.alpha,categories:new Set([P.w.PerformSpatialOperations])};var lc=e(65038);const Zo={id:q.W.timeSeriesTable,name:"Time series to table transform",description:"Time series to table rows.",defaultOptions:{},operator:L=>N=>N.pipe((0,Pt.U)(H=>Mu(L,H)))};function Mu(L,N){const H=xu(N),ne={},ve=[];for(const Me of N){if(!(0,lc.pP)(Me)){ve.push(Me);continue}const Re=Me.refId??"",$e=H[Re]??{};let Ge=ne[Re];if(!Ge){Ge={name:"Trend"+(Re&&Object.keys(H).length>1?` #${Re}`:""),type:Y.fS.frame,config:{},values:[]},ne[Re]=Ge;const Nt=new Ls.v;for(const sn of Object.values($e))Nt.addField(sn);Nt.addField(Ge),Nt.refId=Re,ve.push(Nt)}const nt=Me.fields[1].labels;for(const Nt of Object.keys($e)){const sn=nt?.[Nt]??null;$e[Nt].values.push(sn)}const ht=L.refIdToStat?.[Re]??rt.gz.lastNotNull,It=Me.fields.find(Nt=>Nt.type===Y.fS.number),Vt=It&&(0,rt.Kx)({field:It,reducers:[ht]})[ht]||null;Ge.values.push({...Me,value:Vt})}return ve}function xu(L){const N={};for(const H of L){if(!(0,lc.pP)(H))continue;const ne=H.refId??"";N[ne]||(N[ne]={});for(const ve of H.fields)if(ve.labels)for(const Me of Object.keys(ve.labels))N[ne][Me]||(N[ne][Me]={name:Me,type:Y.fS.string,config:{},values:[]})}return N}function cc({input:L,options:N,onChange:H}){const ne=L.reduce((Me,Re)=>Re.refId&&!Me.includes(Re.refId)?[...Me,Re.refId]:Me,[]),ve=(0,s.useCallback)((Me,Re)=>{const $e=Re[0];$e&&(0,rt.CC)($e)&&H({refIdToStat:{...N.refIdToStat,[Me]:$e}})},[H,N]);return s.createElement(s.Fragment,null,ne.map(Me=>s.createElement("div",{key:Me},s.createElement(he.Z,null,s.createElement(te._,{label:`Trend ${ne.length>1?` #${Me}`:""} value`},s.createElement(St.m,{stats:[N.refIdToStat?.[Me]??rt.gz.lastNotNull],onChange:ve.bind(null,Me),filterOptions:Re=>Re.id!==rt.gz.allValues&&Re.id!==rt.gz.uniqueValues}))))))}const Su={id:Zo.id,editor:cc,transformation:Zo,name:Zo.name,description:Zo.description,state:re.BV.beta,help:""},Tu=()=>[sa,Xn,os,ts,X,xn,ws,Is,Wt,es,Xs,zn,po,Ws,Pa,nc,dn,tc,jn,bu,so,jl,At,kn,eo,du,vu,..._.config.featureToggles.formatString?[ls]:[],ss,Su];function Ou(){return new Promise(L=>require(["vs/language/kusto/monaco.contribution"],()=>L()))}function Co(){return[{id:"kusto",name:"kusto",init:Ou}]}var us=e(56425),ir=e(89772),Ms=e(53721),Ki=e(13196),lr=e(72639),dc=e(41393),bo=e(39106),Vi=e(89625),Iu=e(70393),Es=e(10694),Jo=e(20015),Ua=e(62679),Ru=e(14534),Au=e(76897),$i=e(2746),_i=e(77326),Lu=e(35664);const zi=()=>{const L=!!F.default.oauth;return{saml:{bgColor:"#464646",enabled:F.default.samlEnabled,name:F.default.samlName||Lu.bm,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:L&&!!F.default.oauth.google,name:F.default.oauth?.google?.name||"Google",icon:F.default.oauth?.google?.icon||"google"},azuread:{bgColor:"#2f2f2f",enabled:L&&!!F.default.oauth.azuread,name:F.default.oauth?.azuread?.name||"Microsoft",icon:F.default.oauth?.azuread?.icon||"microsoft"},github:{bgColor:"#464646",enabled:L&&!!F.default.oauth.github,name:F.default.oauth?.github?.name||"GitHub",icon:F.default.oauth?.github?.icon||"github"},gitlab:{bgColor:"#fc6d26",enabled:L&&!!F.default.oauth.gitlab,name:F.default.oauth?.gitlab?.name||"GitLab",icon:F.default.oauth?.gitlab?.icon||"gitlab"},grafanacom:{bgColor:"#262628",enabled:L&&!!F.default.oauth.grafana_com,name:F.default.oauth?.grafana_com?.name||"Grafana.com",icon:F.default.oauth?.grafana_com?.icon||"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:L&&!!F.default.oauth.okta,name:F.default.oauth?.okta?.name||"Okta",icon:F.default.oauth?.okta?.icon||"okta"},oauth:{bgColor:"#262628",enabled:L&&!!F.default.oauth.generic_oauth,name:F.default.oauth?.generic_oauth?.name||"OAuth",icon:F.default.oauth?.generic_oauth?.icon||"signin",hrefName:"generic_oauth"}}},Hi=L=>({button:(0,Ie.css)`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:(0,Ie.css)`
      position: absolute;
      left: ${L.spacing(1)};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:(0,Ie.css)`
        color: ${L.colors.text};
        display: flex;
        margin-bottom: ${L.spacing(1)};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:(0,Ie.css)`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${L.colors.text};
      `}}),_s=()=>{const L=(0,Ze.wW)(Hi);return s.createElement(s.Fragment,null,s.createElement("div",{className:L.divider.base},s.createElement("div",null,s.createElement("div",{className:L.divider.line})),s.createElement("div",null,s.createElement("span",null,!F.default.disableLoginForm&&s.createElement("span",null,"or"))),s.createElement("div",null,s.createElement("div",{className:L.divider.line}))),s.createElement("div",{className:"clearfix"}))};function Xo(L,N,H){return(0,Ie.cx)(N.button,(0,Ie.css)`
      background-color: ${L.bgColor};
      color: ${H.colors.getContrastText(L.bgColor)};

      &:hover {
        background-color: ${H.colors.emphasize(L.bgColor,.15)};
        box-shadow: ${H.shadows.z1};
      }
    `)}const Br=()=>{const L=(0,h.pickBy)(zi(),ve=>ve.enabled),N=Object.keys(L).length>0,H=(0,Ze.l4)(),ne=(0,Ze.wW)(Hi);return N?s.createElement(ua.wc,null,s.createElement(_s,null),Object.entries(L).map(([ve,Me])=>s.createElement(Te.Qj,{key:ve,className:Xo(Me,ne,H),href:`login/${Me.hrefName?Me.hrefName:ve}`,target:"_self",fullWidth:!0},s.createElement(Ta.J,{className:ne.buttonIcon,name:Me.icon}),"Sign in with ",Me.name))):null},ki=()=>{const L=(0,F.iE)().verifyEmailEnabled?`${(0,F.iE)().appSubUrl}/verify`:`${(0,F.iE)().appSubUrl}/signup`,N=(0,Ie.css)({paddingTop:"16px"});return s.createElement(ua.wc,null,s.createElement("div",{className:N},"New to Grafana?"),s.createElement(Te.Qj,{className:(0,Ie.css)`
          width: 100%;
          justify-content: center;
        `,href:L,variant:"secondary",fill:"outline"},"Sign up"))},$p=(0,Ie.css)`
  padding: 0;
  margin-top: 4px;
`,Gr=(0,Ie.css)({width:"100%"}),jr=()=>(document.title=Jo.c.AppTitle,s.createElement(Au.Z,null,({loginHint:L,passwordHint:N,disableLoginForm:H,disableUserSignUp:ne,login:ve,isLoggingIn:Me,changePassword:Re,skipPasswordChange:$e,isChangingPassword:Ge,showDefaultPasswordWarning:nt,loginErrorMessage:ht})=>s.createElement(_i.dd,{isChangingPassword:Ge},!Ge&&s.createElement(_i.$s,null,ht&&s.createElement(or.b,{className:Gr,severity:"error",title:(0,Ua.t)("login.error.title","Login failed")},ht),!H&&s.createElement($i.U,{onSubmit:ve,loginHint:L,passwordHint:N,isLoggingIn:Me},s.createElement(ua.Lh,{justify:"flex-end"},s.createElement(Te.Qj,{className:$p,fill:"text",href:`${F.default.appSubUrl}/user/password/send-reset-email`},"Forgot your password?"))),s.createElement(Br,null),!ne&&s.createElement(ki,null)),Ge&&s.createElement(_i.$s,null,s.createElement(Ru.G,{showDefaultPasswordWarning:nt,onSubmit:Re,onSkip:()=>$e()})))));var Fs=e(13253),Gi=e(83450),Mo=e(4236);function Bu({description:L,text:N,url:H}){const ne=(0,Ze.wW)(Uu);return s.createElement(Mo.Z,{className:ne.card,href:H},s.createElement(Mo.Z.Heading,null,N),s.createElement(Mo.Z.Description,{className:ne.description},L))}const Uu=L=>({card:(0,Ie.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,Ie.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function Ur({navId:L,header:N}){const{node:H}=(0,Gi.q)(L),ne=(0,Ze.wW)(Nu),ve=H.children?.filter(Me=>!Me.hideFromTabs);return s.createElement(Fs.T,{navId:H.id},s.createElement(Fs.T.Contents,null,s.createElement("div",{className:ne.content},N,ve&&ve.length>0&&s.createElement("section",{className:ne.grid},ve?.map(Me=>s.createElement(Bu,{key:Me.id,description:Me.subTitle,text:Me.text,url:Me.url??""}))))))}const Nu=L=>({content:(0,Ie.css)({display:"flex",flexDirection:"column",gap:L.spacing(2)}),grid:(0,Ie.css)({display:"grid",gap:L.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:L.spacing(2,0)})});var xo=e(15750),wu=e(18644);function Wu(){return s.createElement(Fs.T,{navId:"home",layout:xo.Q.Canvas,pageNav:{text:"Page not found"}},s.createElement(wu.j,{entity:"Page"}))}var Ha=e(97125),uc=e(13475),Na=e(21308),hn=e(57721),mc=e(48069);const Nr="dddd YYYY-MM-DD HH:mm zz",fc="/admin/authentication/ldap";class gc extends s.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:N,user:H}=this.props,ve=N&&N.nextSync?(0,mc.dq)(N.nextSync,{format:Nr}):"",Me=`${fc}?user=${H&&H.login}`,Re=Na.Vt.hasPermission(hn.AccessControlAction.LDAPUsersRead),$e=Na.Vt.hasPermission(hn.AccessControlAction.LDAPUsersSync);return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",null,"External sync"),s.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),s.createElement("td",null,s.createElement("span",{className:"label label-tag"},"LDAP"))),s.createElement("tr",null,N.enabled?s.createElement(s.Fragment,null,s.createElement("td",null,"Next scheduled synchronization"),s.createElement("td",{colSpan:2},ve)):s.createElement(s.Fragment,null,s.createElement("td",null,"Next scheduled synchronization"),s.createElement("td",{colSpan:2},"Not enabled")))))),s.createElement("div",{className:"gf-form-button-row"},$e&&s.createElement(Te.zx,{variant:"secondary",onClick:this.onUserSync},"Sync user"),Re&&s.createElement(Te.Qj,{variant:"secondary",href:Me},"Debug LDAP Mapping"))))}}var So=e(64084),To=e(85387),pc=e(73075),Qr=e(69865),hc=e(10639),ji=e(4171),xr=e(65489);function Fu({onSelected:L,className:N,inputId:H,autoFocus:ne,excludeOrgs:ve}){(0,s.useEffect)(()=>{ne&&H&&document.getElementById(H)?.focus()},[ne,H]);const[Me,Re]=(0,xr.Z)(async()=>{const Ge=(await(0,T.i)().get("/api/orgs")).map(nt=>({value:{id:nt.id,name:nt.name},label:nt.name}));if(ve){let nt=ve.map(It=>It.orgId);return Ge.filter(It=>!nt.includes(It.value.id))}else return Ge});return s.createElement(me.qb,{inputId:H,className:N,isLoading:Me.loading,defaultOptions:!0,isSearchable:!1,loadOptions:Re,onChange:L,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var Ys=e(65741);class Ya extends s.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=s.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:N,orgs:H,isExternalUser:ne,onOrgRoleChange:ve,onOrgRemove:Me,onOrgAdd:Re}=this.props,{showAddOrgModal:$e}=this.state,Ge=(0,Ie.css)`
      margin-top: 0.8rem;
    `,nt=Na.Vt.hasPermission(hn.AccessControlAction.OrgUsersAdd)&&!ne;return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"Organizations"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,H.map((ht,It)=>s.createElement(Vu,{key:`${ht.orgId}-${It}`,isExternalUser:ne,user:N,org:ht,onOrgRoleChange:ve,onOrgRemove:Me}))))),s.createElement("div",{className:Ge},nt&&s.createElement(Te.zx,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),s.createElement(ys,{user:N,userOrgs:H,isOpen:$e,onOrgAdd:Re,onDismiss:this.dismissOrgAddModal})))}}const _p=(0,So.B)(L=>({removeButton:(0,Ie.css)`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${L.v1.palette.blue95};
    `,label:(0,Ie.css)`
      font-weight: 500;
    `,disabledTooltip:(0,Ie.css)`
      display: flex;
    `,tooltipItem:(0,Ie.css)`
      margin-left: 5px;
    `,tooltipItemLink:(0,Ie.css)`
      color: ${L.v1.palette.blue95};
    `,rolePickerWrapper:(0,Ie.css)`
      display: flex;
    `,rolePicker:(0,Ie.css)`
      flex: auto;
      margin-right: ${L.spacing(1)};
    `}));class Ku extends s.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:N}=this.props;this.props.onOrgRemove(N.orgId)},this.onChangeRoleClick=()=>{const{org:N}=this.props;this.setState({isChangingRole:!0,currentRole:N.role})},this.onOrgRoleChange=N=>{this.setState({currentRole:N})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=N=>{this.props.onOrgRoleChange(this.props.org.orgId,N)}}componentDidMount(){Na.Vt.licensedAccessControlEnabled()&&Na.Vt.hasPermission(hn.AccessControlAction.ActionRolesList)&&(0,ji.ul)(this.props.org.orgId).then(N=>this.setState({roleOptions:N})).catch(N=>console.error(N))}render(){const{user:N,org:H,isExternalUser:ne,theme:ve}=this.props,Me=N?.authLabels?.length&&N?.authLabels[0],Re=Me?`Synced via ${Me}`:"",{currentRole:$e,isChangingRole:Ge}=this.state,nt=_p(ve),ht=(0,Ie.cx)("width-16",nt.label),It=Na.Vt.hasPermission(hn.AccessControlAction.OrgUsersWrite),Vt=Na.Vt.hasPermission(hn.AccessControlAction.OrgUsersRemove)&&!ne,Nt=ne||!It,sn=`${H.name}-input`;return s.createElement("tr",null,s.createElement("td",{className:ht},s.createElement("label",{htmlFor:sn},H.name)),Na.Vt.licensedAccessControlEnabled()?s.createElement("td",null,s.createElement("div",{className:nt.rolePickerWrapper},s.createElement("div",{className:nt.rolePicker},s.createElement(hc.R,{userId:N?.id||0,orgId:H.orgId,basicRole:H.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:Nt,basicRoleDisabledMessage:`This user's role is not editable because it is synchronized from your auth provider.
                    Refer to the Grafana authentication docs for details.`})),ne&&s.createElement(vc,{lockMessage:Re}))):s.createElement(s.Fragment,null,Ge?s.createElement("td",null,s.createElement(Ys.A,{inputId:sn,value:$e,onChange:this.onOrgRoleChange,autoFocus:!0})):s.createElement("td",{className:"width-25"},H.role),s.createElement("td",{colSpan:1},s.createElement("div",{className:"pull-right"},It&&s.createElement(_u,{lockMessage:Re,isExternalUser:ne,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),s.createElement("td",{colSpan:1},s.createElement("div",{className:"pull-right"},Vt&&s.createElement(To.p,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0},"Remove from organization"))))}}const Vu=(0,Ze.HE)(Ku),qo=(0,So.B)(()=>({modal:(0,Ie.css)`
    width: 500px;
  `,buttonRow:(0,Ie.css)`
    text-align: center;
  `,modalContent:(0,Ie.css)`
    overflow: visible;
  `}));class ys extends s.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:hn.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=N=>{const H=this.props.userOrgs.find(ne=>ne.orgId===N.value?.id);this.setState({selectedOrg:N.value,role:H?.role||hn.OrgRole.Viewer}),Na.Vt.licensedAccessControlEnabled()&&Na.Vt.hasPermission(hn.AccessControlAction.ActionRolesList)&&(0,ji.ul)(N.value?.id).then(ne=>this.setState({roleOptions:ne})).catch(ne=>console.error(ne))},this.onOrgRoleChange=N=>{this.setState({role:N})},this.onAddUserToOrg=async()=>{const{selectedOrg:N,role:H}=this.state;this.props.onOrgAdd(N.id,H),Na.Vt.licensedAccessControlEnabled()&&Na.Vt.hasPermission(hn.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,ji.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.setState({pendingOrgId:null,pendingRoles:[],pendingUserId:null}))},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(N,H,ne)=>{this.setState({pendingRoles:N,pendingOrgId:ne,pendingUserId:H})}}render(){const{isOpen:N,user:H,userOrgs:ne}=this.props,{role:ve,roleOptions:Me,selectedOrg:Re}=this.state,$e=qo();return s.createElement(pc.u,{className:$e.modal,contentClassName:$e.modalContent,title:"Add to an organization",isOpen:N,onDismiss:this.onCancel},s.createElement(Un.g,{label:"Organization"},s.createElement(Fu,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:ne,autoFocus:!0})),s.createElement(Un.g,{label:"Role",disabled:Re===null},s.createElement(hc.R,{userId:H?.id||0,orgId:Re?.id,basicRole:ve,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:Me,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles})),s.createElement(pc.u.ButtonRow,null,s.createElement(ua.Lh,{spacing:"md",justify:"center"},s.createElement(Te.zx,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),s.createElement(Te.zx,{variant:"primary",disabled:Re===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const $u=L=>({disabledTooltip:(0,Ie.css)`
    display: flex;
  `,tooltipItemLink:(0,Ie.css)`
    color: ${L.v1.palette.blue95};
  `,lockMessageClass:(0,Ie.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `,icon:(0,Ie.css)`
    line-height: 2;
  `});function _u({lockMessage:L,onChangeRoleClick:N,isExternalUser:H,onOrgRoleSave:ne,onCancelClick:ve}){const Me=(0,Ze.wW)($u);return s.createElement("div",{className:Me.disabledTooltip},H?s.createElement(s.Fragment,null,s.createElement("span",{className:Me.lockMessageClass},L),s.createElement(Qr.u,{placement:"right-end",interactive:!0,content:s.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",s.createElement("a",{className:Me.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},s.createElement("div",{className:Me.icon},s.createElement(Ta.J,{name:"question-circle"})))):s.createElement(To.p,{confirmText:"Save",onClick:N,onCancel:ve,onConfirm:ne,disabled:H},"Change role"))}const vc=({lockMessage:L})=>{const N=(0,Ze.wW)(zu);return s.createElement("div",{className:N.disabledTooltip},s.createElement("span",{className:N.lockMessageClass},L),s.createElement(Qr.u,{placement:"right-end",interactive:!0,content:s.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",s.createElement("a",{className:N.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},s.createElement(Ta.J,{name:"question-circle"})))},zu=L=>({disabledTooltip:(0,Ie.css)`
    display: flex;
  `,tooltipItemLink:(0,Ie.css)`
    color: ${L.v1.palette.blue95};
  `,lockMessageClass:(0,Ie.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `}),Hu=[{label:"Yes",value:!0},{label:"No",value:!1}];function ku({isGrafanaAdmin:L,isExternalUser:N,lockMessage:H,onGrafanaAdminChange:ne}){const[ve,Me]=(0,s.useState)(!1),[Re,$e]=(0,s.useState)(L),Ge=()=>Me(!0),nt=()=>{Me(!1),$e(L)},ht=()=>ne(Re),It=Na.Vt.hasPermission(hn.AccessControlAction.UsersPermissionsUpdate)&&!N,Vt=(0,Ze.wW)(Gu);return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"Permissions"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Grafana Admin"),ve?s.createElement("td",{colSpan:2},s.createElement(fe.S,{options:Hu,value:Re,onChange:$e,autoFocus:!0})):s.createElement("td",{colSpan:2},L?s.createElement(s.Fragment,null,s.createElement(Ta.J,{name:"shield"})," Yes"):s.createElement(s.Fragment,null,"No")),s.createElement("td",null,It&&s.createElement(To.p,{onClick:Ge,onConfirm:ht,onCancel:nt,confirmText:"Change"},"Change"),N&&s.createElement("div",{className:Vt.lockMessageClass},s.createElement(vc,{lockMessage:H})))))))))}const Gu=L=>({lockMessageClass:(0,Ie.css)`
    display: flex;
    justify-content: flex-end;
    font-style: italic;
    margin-right: ${L.spacing(.6)};
  `});var ei=e(32840),Ec=e(27325);function ju({user:L,onUserUpdate:N,onUserDelete:H,onUserDisable:ne,onUserEnable:ve,onPasswordChange:Me}){const[Re,$e]=(0,s.useState)(!1),[Ge,nt]=(0,s.useState)(!1),ht=(0,s.useRef)(null),It=Rr=>()=>{$e(Rr),!Rr&&ht.current&&ht.current.focus()},Vt=(0,s.useRef)(null),Nt=Rr=>()=>{nt(Rr),!Rr&&Vt.current&&Vt.current.focus()},sn=()=>H(L.id),gn=()=>ne(L.id),Vn=()=>ve(L.id),ja=Rr=>{N({...L,name:Rr})},ba=Rr=>{N({...L,email:Rr})},za=Rr=>{N({...L,login:Rr})},Ns=L.authLabels?.length&&L.authLabels[0],Dr=Ns?`Synced via ${Ns}`:"",Oi=L.isExternal||!Na.Vt.hasPermissionInMetadata(hn.AccessControlAction.UsersWrite,L),Hy=L.isExternal||!Na.Vt.hasPermissionInMetadata(hn.AccessControlAction.UsersPasswordUpdate,L),ky=Na.Vt.hasPermissionInMetadata(hn.AccessControlAction.UsersDelete,L),Gy=Na.Vt.hasPermissionInMetadata(hn.AccessControlAction.UsersDisable,L),jy=Na.Vt.hasPermissionInMetadata(hn.AccessControlAction.UsersEnable,L);return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"User information"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement(ns,{label:"Name",value:L.name,locked:Oi,lockMessage:Dr,onChange:ja}),s.createElement(ns,{label:"Email",value:L.email,locked:Oi,lockMessage:Dr,onChange:ba}),s.createElement(ns,{label:"Username",value:L.login,locked:Oi,lockMessage:Dr,onChange:za}),s.createElement(ns,{label:"Password",value:"********",inputType:"password",locked:Hy,lockMessage:Dr,onChange:Me})))),s.createElement("div",{className:ms.buttonRow},ky&&s.createElement(s.Fragment,null,s.createElement(Te.zx,{variant:"destructive",onClick:It(!0),ref:ht},"Delete user"),s.createElement(ei.s,{isOpen:Re,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:sn,onDismiss:It(!1)})),L.isDisabled&&jy&&s.createElement(Te.zx,{variant:"secondary",onClick:Vn},"Enable user"),!L.isDisabled&&Gy&&s.createElement(s.Fragment,null,s.createElement(Te.zx,{variant:"secondary",onClick:Nt(!0),ref:Vt},"Disable user"),s.createElement(ei.s,{isOpen:Ge,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:gn,onDismiss:Nt(!1)})))))}const ms={buttonRow:(0,Ie.css)`
    margin-top: 0.8rem;
    > * {
      margin-right: 16px;
    }
  `};class ns extends s.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=N=>{this.inputElem=N},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(N,H)=>{H!==Ec.G.Invalid&&this.setState({value:N.target.value})},this.onInputBlur=(N,H)=>{H!==Ec.G.Invalid&&this.setState({value:N.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}render(){const{label:N,locked:H,lockMessage:ne,inputType:ve}=this.props,{value:Me}=this.state,Re=(0,Ie.cx)("width-16",(0,Ie.css)`
        font-weight: 500;
      `);if(H)return s.createElement(Qu,{label:N,value:Me,lockMessage:ne});const $e=`${N}-input`;return s.createElement("tr",null,s.createElement("td",{className:Re},s.createElement("label",{htmlFor:$e},N)),s.createElement("td",{className:"width-25",colSpan:2},this.state.editing?s.createElement(Ue.I,{id:$e,type:ve,defaultValue:Me,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):s.createElement("span",null,this.props.value)),s.createElement("td",null,s.createElement(To.p,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}ns.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"};const Qu=({label:L,value:N,lockMessage:H})=>{const ne=(0,Ie.css)`
    font-style: italic;
    margin-right: 0.6rem;
  `,ve=(0,Ie.cx)("width-16",(0,Ie.css)`
      font-weight: 500;
    `);return s.createElement("tr",null,s.createElement("td",{className:ve},L),s.createElement("td",{className:"width-25",colSpan:2},N),s.createElement("td",null,s.createElement("span",{className:ne},H)))};class Yu extends s.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=s.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=N=>()=>{this.props.onSessionRevoke(N)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:N}=this.props,{showLogoutModal:H}=this.state,ne=(0,Ie.css)`
      margin-top: 0.8rem;
    `,ve=Na.Vt.hasPermission(hn.AccessControlAction.UsersLogout);return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"Sessions"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"Last seen"),s.createElement("th",null,"Logged on"),s.createElement("th",null,"IP address"),s.createElement("th",{colSpan:2},"Browser and OS"))),s.createElement("tbody",null,N&&N.map((Me,Re)=>s.createElement("tr",{key:`${Me.id}-${Re}`},s.createElement("td",null,Me.isActive?"Now":Me.seenAt),s.createElement("td",null,(0,Ua.$q)(Me.createdAt,{dateStyle:"long"})),s.createElement("td",null,Me.clientIp),s.createElement("td",null,`${Me.browser} on ${Me.os} ${Me.osVersion}`),s.createElement("td",null,s.createElement("div",{className:"pull-right"},ve&&s.createElement(To.p,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(Me.id),autoFocus:!0},"Force logout")))))))),s.createElement("div",{className:ne},ve&&N.length>0&&s.createElement(Te.zx,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),s.createElement(ei.s,{isOpen:H,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const yc=Yu;var xs=e(88480);class Zu extends s.PureComponent{constructor(){super(...arguments),this.onUserUpdate=N=>{this.props.updateUser(N)},this.onPasswordChange=N=>{const{user:H,setUserPassword:ne}=this.props;H&&ne(H.id,N)},this.onUserDelete=N=>{this.props.deleteUser(N)},this.onUserDisable=N=>{this.props.disableUser(N)},this.onUserEnable=N=>{this.props.enableUser(N)},this.onGrafanaAdminChange=N=>{const{user:H,updateUserPermissions:ne}=this.props;H&&ne(H.id,N)},this.onOrgRemove=N=>{const{user:H,deleteOrgUser:ne}=this.props;H&&ne(H.id,N)},this.onOrgRoleChange=(N,H)=>{const{user:ne,updateOrgUserRole:ve}=this.props;ne&&ve(ne.id,N,H)},this.onOrgAdd=(N,H)=>{const{user:ne,addOrgUser:ve}=this.props;ne&&ve(ne,N,H)},this.onSessionRevoke=N=>{const{user:H,revokeSession:ne}=this.props;H&&ne(N,H.id)},this.onAllSessionsRevoke=()=>{const{user:N,revokeAllSessions:H}=this.props;N&&H(N.id)},this.onUserSync=()=>{const{user:N,syncLdapUser:H}=this.props;N&&H(N.id)}}async componentDidMount(){const{match:N,loadAdminUserPage:H}=this.props;H(parseInt(N.params.id,10))}render(){const{user:N,orgs:H,sessions:ne,ldapSyncInfo:ve,isLoading:Me}=this.props,Re=N?.isExternal&&N?.authLabels?.includes("LDAP"),$e=Na.Vt.hasPermission(hn.AccessControlAction.UsersAuthTokenList),Ge=Na.Vt.hasPermission(hn.AccessControlAction.LDAPStatusRead),nt=N?.authLabels?.[0],ht=nt?`Synced via ${nt}`:"",It={text:N?.login??"",icon:"shield",subTitle:"Manage settings for an individual user."};return s.createElement(Fs.T,{navId:"global-users",pageNav:It},s.createElement(Fs.T.Contents,{isLoading:Me},N&&s.createElement(s.Fragment,null,s.createElement(ju,{user:N,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),Re&&N?.isExternallySynced&&(0,uc.v)("ldapsync")&&ve&&Ge&&s.createElement(gc,{ldapSyncInfo:ve,user:N,onUserSync:this.onUserSync}),s.createElement(ku,{isGrafanaAdmin:N.isGrafanaAdmin,isExternalUser:N?.isGrafanaAdminExternallySynced,lockMessage:ht,onGrafanaAdminChange:this.onGrafanaAdminChange})),H&&s.createElement(Ya,{user:N,orgs:H,isExternalUser:N?.isExternallySynced,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),ne&&$e&&s.createElement(yc,{sessions:ne,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})))}}const mr=L=>({user:L.userAdmin.user,sessions:L.userAdmin.sessions,orgs:L.userAdmin.orgs,ldapSyncInfo:L.ldap.syncInfo,isLoading:L.userAdmin.isLoading,error:L.userAdmin.error}),Dc={loadAdminUserPage:xs.PK,updateUser:xs.Nq,setUserPassword:xs.tQ,disableUser:xs.B9,enableUser:xs.Dx,deleteUser:xs.h8,updateUserPermissions:xs.Xx,addOrgUser:xs.bN,updateOrgUserRole:xs.Jk,deleteOrgUser:xs.uV,revokeSession:xs._1,revokeAllSessions:xs.Fm,syncLdapUser:xs.CP},ti=(0,ir.connect)(mr,Dc)(Zu);var Ju=e(85830);const Xu=({ldapConnectionInfo:L})=>s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"LDAP Connection"),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"Host"),s.createElement("th",{colSpan:2},"Port"))),s.createElement("tbody",null,L&&L.map((N,H)=>s.createElement("tr",{key:H},s.createElement("td",null,N.host),s.createElement("td",null,N.port),s.createElement("td",null,N.available?s.createElement(Ta.J,{name:"check",className:"pull-right"}):s.createElement(Ta.J,{name:"exclamation-triangle",className:"pull-right"}))))))),s.createElement("div",{className:"gf-form-group"},s.createElement(qu,{ldapConnectionInfo:L})))),qu=({ldapConnectionInfo:L})=>{if(!L.some(ve=>ve.error))return null;const H=[];L.forEach(ve=>{ve.error&&H.push(ve)});const ne=H.map((ve,Me)=>s.createElement("div",{key:Me},s.createElement("span",{style:{fontWeight:500}},ve.host,":",ve.port,s.createElement("br",null)),s.createElement("span",null,ve.error),Me!==H.length-1&&s.createElement(s.Fragment,null,s.createElement("br",null),s.createElement("br",null))));return s.createElement(or.b,{title:"Connection error",severity:hn.AppNotificationSeverity.Error},ne)};var Pc=e(28409);const em="dddd YYYY-MM-DD HH:mm zz";class Cc extends s.PureComponent{constructor(){super(...arguments),this.state={isSyncing:!1},this.handleSyncClick=()=>{this.setState({isSyncing:!this.state.isSyncing})}}render(){const{ldapSyncInfo:N}=this.props,{isSyncing:H}=this.state,ne=(0,mc.dq)(N.nextSync,{format:em});return s.createElement(s.Fragment,null,s.createElement("h3",{className:"page-heading"},"LDAP Synchronisation",s.createElement(Te.zx,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0},s.createElement("span",{className:"btn-title"},"Bulk-sync now"),H&&s.createElement(Pc.$,{inline:!0}))),s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",null,"Active synchronisation"),s.createElement("td",{colSpan:2},N.enabled?"Enabled":"Disabled")),s.createElement("tr",null,s.createElement("td",null,"Scheduled"),s.createElement("td",null,N.schedule)),s.createElement("tr",null,s.createElement("td",null,"Next scheduled synchronisation"),s.createElement("td",null,ne)))))))}}const Ds=({groups:L,showAttributeMapping:N})=>{const H=N?L:L.filter(ne=>ne.orgRole);return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,N&&s.createElement("th",null,"LDAP Group"),s.createElement("th",null,"Organization",s.createElement(Qr.u,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info"},s.createElement(Ta.J,{name:"info-circle"}))),s.createElement("th",null,"Role"))),s.createElement("tbody",null,H.map((ne,ve)=>s.createElement("tr",{key:`${ne.orgId}-${ve}`},N&&s.createElement("td",null,ne.groupDN),ne.orgName&&ne.orgRole?s.createElement("td",null,ne.orgName):s.createElement("td",null),ne.orgRole?s.createElement("td",null,ne.orgRole):s.createElement("td",null,s.createElement("span",{className:"text-warning"},"No match"),s.createElement(Qr.u,{placement:"top",content:"No matching groups found",theme:"info"},s.createElement(Ta.J,{name:"info-circle"})))))))))},tm=({info:L,showAttributeMapping:N})=>s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",{colSpan:2},"User information"),N&&s.createElement("th",null,"LDAP attribute"))),s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",{className:"width-16"},"First name"),s.createElement("td",null,L.name.ldapValue),N&&s.createElement("td",null,L.name.cfgAttrValue)),s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Surname"),s.createElement("td",null,L.surname.ldapValue),N&&s.createElement("td",null,L.surname.cfgAttrValue)),s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Username"),s.createElement("td",null,L.login.ldapValue),N&&s.createElement("td",null,L.login.cfgAttrValue)),s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Email"),s.createElement("td",null,L.email.ldapValue),N&&s.createElement("td",null,L.email.cfgAttrValue)))))),nm=({permissions:L})=>s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",{colSpan:1},"Permissions"))),s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",{className:"width-16"}," Grafana admin"),s.createElement("td",null,L.isGrafanaAdmin?s.createElement(s.Fragment,null,s.createElement(Ta.J,{name:"shield"})," Yes"):"No")),s.createElement("tr",null,s.createElement("td",{className:"width-16"},"Status"),s.createElement("td",null,L.isDisabled?s.createElement(s.Fragment,null,s.createElement(Ta.J,{name:"times"})," Inactive"):s.createElement(s.Fragment,null,s.createElement(Ta.J,{name:"check"})," Active"))))))),am=({teams:L,showAttributeMapping:N})=>{const H=N?L:L.filter(ne=>ne.teamName);return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("thead",null,s.createElement("tr",null,N&&s.createElement("th",null,"LDAP Group"),s.createElement("th",null,"Organisation"),s.createElement("th",null,"Team"))),s.createElement("tbody",null,H.map((ne,ve)=>s.createElement("tr",{key:`${ne.teamName}-${ve}`},N&&s.createElement(s.Fragment,null,s.createElement("td",null,ne.groupDN),!ne.orgName&&s.createElement(s.Fragment,null,s.createElement("td",null),s.createElement("td",null,s.createElement("span",{className:"text-warning"},"No match"),s.createElement(Qr.u,{placement:"top",content:"No matching teams found",theme:"info"},s.createElement(Ta.J,{name:"info-circle"}))))),ne.orgName&&s.createElement(s.Fragment,null,s.createElement("td",null,ne.orgName),s.createElement("td",null,ne.teamName))))))))},sm=({ldapUser:L,showAttributeMapping:N})=>s.createElement(s.Fragment,null,s.createElement(tm,{info:L.info,showAttributeMapping:N}),s.createElement(nm,{permissions:L.permissions}),L.roles&&L.roles.length>0&&s.createElement(Ds,{groups:L.roles,showAttributeMapping:N}),L.teams&&L.teams.length>0?s.createElement(am,{teams:L.teams,showAttributeMapping:N}):s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("table",{className:"filter-table form-inline"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",null,"No teams found via LDAP"))))))),rm={text:"LDAP",subTitle:"Verify your LDAP and user mapping configuration.",icon:"book",id:"LDAP"};class om extends s.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0},this.search=N=>{N&&this.fetchUserMapping(N)},this.onClearUserError=()=>{this.props.clearUserError()}}async componentDidMount(){const{clearUserMappingInfo:N,queryParams:H}=this.props;await N(),await this.fetchLDAPStatus(),H.username&&await this.fetchUserMapping(H.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:N,loadLdapSyncStatus:H}=this.props;return Promise.all([N(),H()])}async fetchUserMapping(N){const{loadUserMapping:H}=this.props;return await H(N)}render(){const{ldapUser:N,userError:H,ldapError:ne,ldapSyncInfo:ve,ldapConnectionInfo:Me,queryParams:Re}=this.props,{isLoading:$e}=this.state,Ge=Na.Vt.hasPermission(hn.AccessControlAction.LDAPUsersRead);return s.createElement(Fs.T,{navId:"authentication",pageNav:rm},s.createElement(Fs.T.Contents,{isLoading:$e},s.createElement(s.Fragment,null,ne&&ne.title&&s.createElement(or.b,{title:ne.title,severity:hn.AppNotificationSeverity.Error},ne.body),s.createElement(Xu,{ldapConnectionInfo:Me}),(0,uc.v)("ldapsync")&&ve&&s.createElement(Cc,{ldapSyncInfo:ve}),Ge&&s.createElement(s.Fragment,null,s.createElement("h3",null,"Test user mapping"),s.createElement(Ju.l,{onSubmit:nt=>this.search(nt.username)},({register:nt})=>s.createElement(ua.Lh,null,s.createElement(Un.g,{label:"Username"},s.createElement(Ue.I,{...nt("username",{required:!0}),id:"username",type:"text",defaultValue:Re.username})),s.createElement(Te.zx,{variant:"primary",type:"submit"},"Run"))),H&&H.title&&s.createElement(or.b,{title:H.title,severity:hn.AppNotificationSeverity.Error,onRemove:this.onClearUserError},H.body),N&&s.createElement(sm,{ldapUser:N,showAttributeMapping:!0})))))}}const bc=L=>({ldapConnectionInfo:L.ldap.connectionInfo,ldapUser:L.ldap.user,ldapSyncInfo:L.ldap.syncInfo,userError:L.ldap.userError,ldapError:L.ldap.ldapError}),im={loadLdapState:xs.Y3,loadLdapSyncStatus:xs.j4,loadUserMapping:xs.b_,clearUserError:xs.V0,clearUserMappingInfo:xs.IS},lm=(0,ir.connect)(bc,im)(om);var Pn=e(79684),Ss=e(60703);const Ks=[],Mc=[...Ks,{path:"/alerting",component:()=>s.createElement(Ur,{navId:"alerting-legacy"})},{path:"/alerting/list",component:(0,Pn.Q)(()=>Promise.all([e.e(5422),e.e(762),e.e(8532),e.e(860),e.e(2776),e.e(2461)]).then(e.bind(e,26090)))},{path:"/alerting/ng/list",component:(0,Pn.Q)(()=>e.e(4286).then(e.bind(e,26090)))},{path:"/alerting/notifications",roles:F.config.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(6618)]).then(e.bind(e,74198)))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(6618)]).then(e.bind(e,74198)))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(6618)]).then(e.bind(e,74198)))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(6618)]).then(e.bind(e,74198)))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(6618)]).then(e.bind(e,74198)))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(6618)]).then(e.bind(e,74198)))},{path:"/alerting/notification/new",component:(0,Pn.Q)(()=>e.e(476).then(e.bind(e,42683)))},{path:"/alerting/notification/:id/edit",component:(0,Pn.Q)(()=>e.e(7384).then(e.bind(e,61309)))}],xc=[...Ks,{path:"/alerting",component:(0,Pn.Q)(()=>e.e(6034).then(e.bind(e,25982)))},{path:"/alerting/home",exact:!1,component:(0,Pn.Q)(()=>e.e(6034).then(e.bind(e,25982)))},{path:"/alerting/list",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingRuleRead,hn.AccessControlAction.AlertingRuleExternalRead]),component:(0,Pn.Q)(()=>Promise.all([e.e(5422),e.e(762),e.e(8532),e.e(860),e.e(2776),e.e(2461)]).then(e.bind(e,94280)))},{path:"/alerting/routes",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingNotificationsRead,hn.AccessControlAction.AlertingNotificationsExternalRead]),component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(8532),e.e(6411),e.e(8648)]).then(e.bind(e,11337)))},{path:"/alerting/routes/mute-timing/new",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingNotificationsWrite,hn.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(9355)]).then(e.bind(e,49371)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingNotificationsWrite,hn.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(9355)]).then(e.bind(e,49371)))},{path:"/alerting/silences",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingInstanceRead,hn.AccessControlAction.AlertingInstancesExternalRead]),component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(1783)]).then(e.bind(e,40648)))},{path:"/alerting/silence/new",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingInstanceCreate,hn.AccessControlAction.AlertingInstancesExternalWrite]),component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(1783)]).then(e.bind(e,40648)))},{path:"/alerting/silence/:id/edit",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingInstanceUpdate,hn.AccessControlAction.AlertingInstancesExternalWrite]),component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(1783)]).then(e.bind(e,40648)))},{path:"/alerting/notifications",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingNotificationsRead,hn.AccessControlAction.AlertingNotificationsExternalRead]),component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(6618)]).then(e.bind(e,531)))},{path:"/alerting/notifications/:type/new",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingNotificationsWrite,hn.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(6618)]).then(e.bind(e,531)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingNotificationsWrite,hn.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(6618)]).then(e.bind(e,531)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingNotificationsWrite,hn.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(6618)]).then(e.bind(e,531)))},{path:"/alerting/notifications/:type",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingNotificationsWrite,hn.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(6618)]).then(e.bind(e,531)))},{path:"/alerting/groups/",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingInstanceRead,hn.AccessControlAction.AlertingInstancesExternalRead]),component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(2415)]).then(e.bind(e,96924)))},{path:"/alerting/new/:type?",pageClass:"page-alerting",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingRuleCreate,hn.AccessControlAction.AlertingRuleExternalWrite]),component:(0,Pn.Q)(()=>Promise.all([e.e(5422),e.e(762),e.e(3713),e.e(8532),e.e(8476),e.e(860),e.e(1301),e.e(5372)]).then(e.bind(e,9458)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingRuleUpdate,hn.AccessControlAction.AlertingRuleExternalWrite]),component:(0,Pn.Q)(()=>Promise.all([e.e(5422),e.e(762),e.e(3713),e.e(8532),e.e(8476),e.e(860),e.e(1301),e.e(5372)]).then(e.bind(e,9458)))},{path:"/alerting/:id/modify-export",pageClass:"page-alerting",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingRuleRead]),component:(0,Pn.Q)(()=>Promise.all([e.e(5422),e.e(762),e.e(3713),e.e(8532),e.e(8476),e.e(860),e.e(1301),e.e(5372)]).then(e.bind(e,34733)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingRuleRead,hn.AccessControlAction.AlertingRuleExternalRead]),component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(4679)]).then(e.bind(e,66494)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,Ss.ql)([hn.AccessControlAction.AlertingRuleRead,hn.AccessControlAction.AlertingRuleExternalRead]),component:(0,Pn.Q)(()=>e.e(7918).then(e.bind(e,46704)))},{path:"/alerting/admin",roles:()=>["Admin"],component:(0,Pn.Q)(()=>Promise.all([e.e(762),e.e(7680)]).then(e.bind(e,48288)))}];function cm(L=F.config){return L.unifiedAlertingEnabled?xc:L.alertingEnabled?Mc:(0,h.uniq)([...Mc,...xc].map(H=>H.path)).map(H=>({path:H,component:(0,Pn.Q)(()=>e.e(1333).then(e.bind(e,28263)))}))}var ni=e(23334),fs=e(91473);const dm=L=>({alertContent:(0,Ie.css)`
    display: flex;
    flex-direction: row;
    padding: 0;
    justify-content: space-between;
    align-items: center;
  `,alertParagraph:(0,Ie.css)`
    margin: 0 ${L.spacing(1)} 0 0;
    line-height: ${L.spacing(L.components.height.sm)};
  `});function um(){const L=(0,Ze.wW)(dm),[N,H]=(0,s.useState)(!0);return N?s.createElement(or.b,{severity:"info",title:"",onRemove:()=>H(!1)},s.createElement("div",{className:L.alertContent},s.createElement("p",{className:L.alertParagraph},"Data sources have a new home! You can discover new data sources or manage existing ones in the Connections page, accessible from the main menu."),s.createElement(Te.Qj,{"aria-label":"Link to Connections",icon:"arrow-right",href:fs.Z.DataSources,fill:"text"},"Go to connections"))):s.createElement(s.Fragment,null)}function Qi(){return[{path:`/${fs.D}`,exact:!1,component:(0,Pn.Q)(()=>Promise.all([e.e(5467),e.e(3076),e.e(5981)]).then(e.bind(e,77546)))}]}var ai=e(6697),lo=e(31931);const mm=[{path:"/plugins",navId:"plugins",roles:Yi([hn.AccessControlAction.PluginsInstall,hn.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:lo.cd.Home,component:(0,Pn.Q)(()=>e.e(94).then(e.bind(e,55006)))},{path:"/plugins/browse",navId:"plugins",roles:Yi([hn.AccessControlAction.PluginsInstall,hn.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:lo.cd.Browse,component:(0,Pn.Q)(()=>e.e(94).then(e.bind(e,55006)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:Yi([hn.AccessControlAction.PluginsInstall,hn.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:lo.cd.Details,component:(0,Pn.Q)(()=>Promise.all([e.e(5467),e.e(3076),e.e(2417)]).then(e.bind(e,95037)))}];function Yi(L,N){return()=>L.some(H=>Na.Vt.hasPermission(H))?[]:N}function fm(){return mm}var gm=e(45015),wr=e(77960),Sr=e(71519),Sc=e(13150),Wr=e(61205);function pm(L){return console.error(L),si("Exception thrown","See console for details")}function hm(){return si("Page not found","404 Error")}function si(L,N){const H={text:L,subTitle:N,icon:"exclamation-triangle"};return{node:H,main:H}}var ri=e(33558),Zi=e(56586),vm=e(82433),Ji=e(48474);const Tc={loading:!0,pluginNav:null,plugin:null};function Em({pluginId:L,pluginNavSection:N}){const H=(0,Ms.$B)(),ne=(0,Ms.TH)(),[ve,Me]=(0,s.useReducer)(Oo.reducer,Tc),Re=_.config.appSubUrl+ne.pathname+ne.search,{plugin:$e,loading:Ge,pluginNav:nt}=ve,ht=(0,vm.d)(N,nt,Re),It=(0,s.useMemo)(()=>(0,A.Ox)(ne.search),[ne.search]),Vt=(0,s.useMemo)(()=>(0,Ji.a)(ht),[ht]),Nt=(0,Wr.p)();(0,s.useEffect)(()=>{Oc(L,Me)},[L]);const sn=(0,s.useCallback)(ba=>Me(Oo.actions.changeNav(ba)),[]);if(!$e||L!==$e.meta.id){const ba=Nt.chrome.state.getValue().layout;return s.createElement(Fs.T,{navModel:ht,pageNav:{text:""},layout:ba},Ge&&s.createElement(Sc.Z,null))}if(!$e.root)return s.createElement(Fs.T,{navModel:ht??si("Plugin load error")},s.createElement("div",null,"No root app page component found"));const gn=$e.root&&s.createElement($e.root,{meta:$e.meta,basename:H.url,onNavChanged:sn,query:It,path:ne.pathname}),Vn=()=>{if(!$e.meta?.includes||Na.Vt.isGrafanaAdmin||Na.Vt.user.orgRole===I.B.Admin)return!0;const ba=$e.meta?.includes.find(Ns=>Ns.path===gn.props.path);if(!ba)return!0;const za=ba?.role||"";return!za||Na.Vt.isEditor&&za===I.B.Viewer?!0:Na.Vt.hasRole(za)},ja=()=>s.createElement(or.b,{severity:"warning",title:"Access denied"},"You do not have permission to see this page.");return Vn()?nt?s.createElement(s.Fragment,null,ht?s.createElement(Fs.T,{navModel:ht,pageNav:nt?.node},s.createElement(Fs.T.Contents,{isLoading:Ge},gn)):s.createElement(Fs.T,null,gn)):s.createElement(Ji.v.Provider,{value:Vt},gn):s.createElement(ja,null)}const Oo=(0,wr.oM)({name:"prom-builder-container",initialState:Tc,reducers:{setState:(L,N)=>{Object.assign(L,N.payload)},changeNav:(L,N)=>{let H=N.payload;H&&H.node.children&&(H={...H,node:{...H.main,hideFromBreadcrumbs:!0}}),L.pluginNav=H}}});async function Oc(L,N){try{const H=await(0,ri.a)(L).then(ne=>{const ve=ym(ne);return ve?(Na.h$.emit(Sr.SI.alertError,[ve]),N(Oo.actions.setState({pluginNav:si(ve)})),null):(0,Zi.Av)(ne)});N(Oo.actions.setState({plugin:H,loading:!1,pluginNav:null}))}catch{N(Oo.actions.setState({plugin:null,loading:!1,pluginNav:hm()}))}}function ym(L){return L?L.type!==re.zV.app?"Plugin must be an app":L.enabled?null:"Application Not Enabled":"Unknown Plugin"}const Xi=Em;var Ka=e(74600);function Ic(){const L=(0,Ka.y0)(),{navIndex:N}=L,H=Me=>Me.startsWith("standalone-plugin-page-/"),ne=Me=>"pluginId"in Me&&"id"in Me;return[...Object.values(N).filter(ne).map(Me=>{const Re=(0,gm.vw)(Me),$e=`/a/${Me.pluginId}`,Ge=H(Me.id)&&Me.url||$e,nt=H(Me.id)&&!Me.url?.startsWith("/a/");return{path:Ge,exact:!1,sensitive:nt,component:()=>s.createElement(Xi,{pluginId:Me.pluginId,pluginNavSection:Re})}}),{path:"/a/:pluginId",exact:!1,component:({match:Me})=>s.createElement(Xi,{pluginId:Me.params.pluginId,pluginNavSection:N.home})}]}const Rc=[{path:"/profile",component:(0,Pn.Q)(()=>e.e(7323).then(e.bind(e,12782)))},{path:"/profile/password",component:(0,Pn.Q)(()=>e.e(7834).then(e.bind(e,80986)))},{path:"/profile/select-org",component:(0,Pn.Q)(()=>e.e(1456).then(e.bind(e,71239)))},{path:"/profile/notifications",component:(0,Pn.Q)(()=>e.e(743).then(e.bind(e,99902)))}];function Dm(L=F.config){return L.profileEnabled?Rc:(0,h.uniq)(Rc.map(H=>H.path)).map(H=>({path:H,component:(0,Pn.Q)(()=>e.e(3395).then(e.bind(e,18639)))}))}const Pm=()=>F.config.featureToggles.publicDashboards?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:hn.DashboardRoutes.Public,component:(0,Pn.Q)(()=>e.e(1344).then(e.bind(e,3317)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:hn.DashboardRoutes.Public,chromeless:!0,component:(0,Pn.Q)(()=>Promise.all([e.e(3880),e.e(7751),e.e(560),e.e(4161),e.e(2613)]).then(e.bind(e,85399)))}]:[],Cm=()=>F.config.featureToggles.dashboardEmbed?[{path:"/d-embed",pageClass:"dashboard-embed",routeName:hn.DashboardRoutes.Embedded,component:(0,Pn.Q)(()=>Promise.all([e.e(3880),e.e(7751),e.e(560),e.e(4161),e.e(7454)]).then(e.bind(e,81776)))}]:[],zs=[];function Ac(){return[...Ic(),{path:"/",pageClass:"page-dashboard",routeName:hn.DashboardRoutes.Home,component:(0,Pn.Q)(()=>Promise.all([e.e(3880),e.e(7751),e.e(560),e.e(4161),e.e(9103),e.e(80),e.e(976),e.e(1026),e.e(2776),e.e(5296)]).then(e.bind(e,29243)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:hn.DashboardRoutes.Normal,component:(0,Pn.Q)(()=>Promise.all([e.e(3880),e.e(7751),e.e(560),e.e(4161),e.e(9103),e.e(80),e.e(976),e.e(1026),e.e(2776),e.e(5296)]).then(e.bind(e,29243)))},{path:"/dashboard/new",roles:()=>Ha.contextSrv.evaluatePermission([hn.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:hn.DashboardRoutes.New,component:(0,Pn.Q)(()=>Promise.all([e.e(3880),e.e(7751),e.e(560),e.e(4161),e.e(9103),e.e(80),e.e(976),e.e(1026),e.e(2776),e.e(5296)]).then(e.bind(e,29243)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>Ha.contextSrv.evaluatePermission([hn.AccessControlAction.DashboardsCreate]),component:(0,Pn.Q)(()=>Promise.all([e.e(3880),e.e(7751),e.e(560),e.e(4161),e.e(9103),e.e(80),e.e(976),e.e(1026),e.e(2776),e.e(5296)]).then(e.bind(e,74393)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:hn.DashboardRoutes.Normal,component:(0,Pn.Q)(()=>Promise.all([e.e(3880),e.e(7751),e.e(560),e.e(4161),e.e(9103),e.e(80),e.e(976),e.e(1026),e.e(2776),e.e(5296)]).then(e.bind(e,29243)))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:hn.DashboardRoutes.Normal,chromeless:!0,component:(0,Pn.Q)(()=>Promise.all([e.e(560),e.e(1034)]).then(e.bind(e,84739)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:hn.DashboardRoutes.Normal,chromeless:!0,component:(0,Pn.Q)(()=>Promise.all([e.e(560),e.e(1034)]).then(e.bind(e,84739)))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:hn.DashboardRoutes.Normal,chromeless:!0,component:(0,Pn.Q)(()=>Promise.all([e.e(560),e.e(1034)]).then(e.bind(e,84739)))},{path:"/dashboard/import",roles:()=>Ha.contextSrv.evaluatePermission([hn.AccessControlAction.DashboardsCreate]),component:(0,Pn.Q)(()=>e.e(8808).then(e.bind(e,70420)))},{path:ai.n.List,component:()=>s.createElement(Ms.l_,{to:fs.Z.DataSources})},{path:ai.n.Edit,component:L=>s.createElement(Ms.l_,{to:fs.Z.DataSourcesEdit.replace(":uid",L.match.params.uid)})},{path:ai.n.Dashboards,component:L=>s.createElement(Ms.l_,{to:fs.Z.DataSourcesDashboards.replace(":uid",L.match.params.uid)})},{path:ai.n.New,component:()=>s.createElement(Ms.l_,{to:fs.Z.DataSourcesNew})},{path:"/datasources/correlations",component:(0,Pn.Q)(()=>F.default.featureToggles.correlations?e.e(413).then(e.bind(e,27164)):e.e(2093).then(e.bind(e,57543)))},{path:"/dashboards",component:(0,Pn.Q)(()=>Promise.all([e.e(5467),e.e(4074)]).then(e.bind(e,77829)))},{path:"/dashboards/folder/new",roles:()=>Ha.contextSrv.evaluatePermission([hn.AccessControlAction.FoldersCreate]),component:(0,Pn.Q)(()=>e.e(8932).then(e.bind(e,41669)))},!(0,ni.v)()&&{path:"/dashboards/f/:uid/:slug/permissions",component:(0,Pn.Q)(()=>e.e(8431).then(e.bind(e,10767)))},!(0,ni.v)()&&{path:"/dashboards/f/:uid/:slug/settings",component:(0,Pn.Q)(()=>e.e(4827).then(e.bind(e,92324)))},{path:"/dashboards/f/:uid/:slug",component:(0,Pn.Q)(()=>Promise.all([e.e(5467),e.e(4074)]).then(e.bind(e,77829)))},{path:"/dashboards/f/:uid",component:(0,Pn.Q)(()=>Promise.all([e.e(5467),e.e(4074)]).then(e.bind(e,77829)))},{path:"/explore",pageClass:"page-explore",roles:()=>Ha.contextSrv.evaluatePermission([hn.AccessControlAction.DataSourcesExplore]),component:(0,Pn.Q)(()=>F.default.exploreEnabled?Promise.all([e.e(5422),e.e(9103),e.e(8476),e.e(976),e.e(9782)]).then(e.bind(e,88981)):e.e(172).then(e.bind(e,96438)))},{path:"/apps",component:()=>s.createElement(Ur,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>s.createElement(Ur,{navId:"alerts-and-incidents"})},{path:"/monitoring",component:()=>s.createElement(Ur,{navId:"monitoring"})},{path:"/admin/general",component:()=>s.createElement(Ur,{navId:"cfg/general"})},{path:"/admin/plugins",component:()=>s.createElement(Ur,{navId:"cfg/plugins"})},{path:"/admin/access",component:()=>s.createElement(Ur,{navId:"cfg/access"})},{path:"/org",component:(0,Pn.Q)(()=>e.e(529).then(e.bind(e,90940)))},{path:"/org/new",component:(0,Pn.Q)(()=>e.e(950).then(e.bind(e,10993)))},{path:"/org/users",component:(0,Pn.Q)(()=>e.e(8039).then(e.bind(e,45894)))},{path:"/org/users/invite",component:(0,Pn.Q)(()=>e.e(7707).then(e.bind(e,33057)))},{path:"/org/apikeys",roles:()=>Ha.contextSrv.evaluatePermission([hn.AccessControlAction.ActionAPIKeysRead]),component:(0,Pn.Q)(()=>e.e(3082).then(e.bind(e,48125)))},{path:"/org/serviceaccounts",roles:()=>Ha.contextSrv.evaluatePermission([hn.AccessControlAction.ServiceAccountsRead,hn.AccessControlAction.ServiceAccountsCreate]),component:(0,Pn.Q)(()=>e.e(1337).then(e.bind(e,19889)))},{path:"/org/serviceaccounts/create",component:(0,Pn.Q)(()=>e.e(9738).then(e.bind(e,32404)))},{path:"/org/serviceaccounts/:id",component:(0,Pn.Q)(()=>e.e(687).then(e.bind(e,88770)))},{path:"/org/teams",roles:()=>Ha.contextSrv.evaluatePermission([hn.AccessControlAction.ActionTeamsRead,hn.AccessControlAction.ActionTeamsCreate]),component:(0,Pn.Q)(()=>e.e(9671).then(e.bind(e,84381)))},{path:"/org/teams/new",roles:()=>Ha.contextSrv.evaluatePermission([hn.AccessControlAction.ActionTeamsCreate]),component:(0,Pn.Q)(()=>e.e(8715).then(e.bind(e,20713)))},{path:"/org/teams/edit/:id/:page?",roles:()=>Ha.contextSrv.evaluatePermission([hn.AccessControlAction.ActionTeamsRead,hn.AccessControlAction.ActionTeamsCreate]),component:(0,Pn.Q)(()=>e.e(8612).then(e.bind(e,53038)))},{path:"/admin",component:()=>s.createElement(Ur,{navId:"cfg",header:s.createElement(um,null)})},{path:"/admin/authentication",roles:()=>Ha.contextSrv.evaluatePermission([hn.AccessControlAction.SettingsWrite]),component:F.default.licenseInfo.enabledFeatures?.saml||F.default.ldapEnabled?(0,Pn.Q)(()=>e.e(8741).then(e.bind(e,4378))):()=>s.createElement(Ms.l_,{to:"/admin"})},{path:"/admin/settings",component:(0,Pn.Q)(()=>e.e(9603).then(e.bind(e,93941)))},{path:"/admin/upgrading",component:(0,Pn.Q)(()=>e.e(6940).then(e.bind(e,86940)))},{path:"/admin/users",component:(0,Pn.Q)(()=>e.e(7497).then(e.bind(e,8044)))},{path:"/admin/users/create",component:(0,Pn.Q)(()=>e.e(2508).then(e.bind(e,41232)))},{path:"/admin/users/edit/:id",component:ti},{path:"/admin/orgs",component:(0,Pn.Q)(()=>e.e(3798).then(e.bind(e,27738)))},{path:"/admin/orgs/edit/:id",component:(0,Pn.Q)(()=>e.e(2721).then(e.bind(e,23569)))},{path:"/admin/featuretoggles",component:F.default.featureToggles.featureToggleAdminPage?(0,Pn.Q)(()=>e.e(7129).then(e.bind(e,40473))):()=>s.createElement(Ms.l_,{to:"/admin"})},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:(0,Pn.Q)(()=>e.e(7675).then(e.bind(e,86064)))},{path:"/admin/stats",component:(0,Pn.Q)(()=>e.e(7641).then(e.bind(e,31584)))},{path:"/admin/authentication/ldap",component:lm},{path:"/login",component:jr,pageClass:"login-page",chromeless:!0},{path:"/invite/:code",component:(0,Pn.Q)(()=>e.e(7429).then(e.bind(e,16067))),chromeless:!0},{path:"/verify",component:F.default.verifyEmailEnabled?(0,Pn.Q)(()=>e.e(1391).then(e.bind(e,51391))):()=>s.createElement(Ms.l_,{to:"/signup"}),pageClass:"login-page",chromeless:!0},{path:"/signup",component:F.default.disableUserSignUp?()=>s.createElement(Ms.l_,{to:"/login"}):(0,Pn.Q)(()=>e.e(7720).then(e.bind(e,77720))),pageClass:"login-page",chromeless:!0},{path:"/user/password/send-reset-email",chromeless:!0,component:(0,Pn.Q)(()=>e.e(133).then(e.bind(e,76480)))},{path:"/user/password/reset",component:(0,Pn.Q)(()=>e.e(6848).then(e.bind(e,77142))),pageClass:"login-page",chromeless:!0},{path:"/dashboard/snapshots",component:(0,Pn.Q)(()=>e.e(5295).then(e.bind(e,17942)))},{path:"/playlists",component:(0,Pn.Q)(()=>e.e(9218).then(e.bind(e,49061)))},{path:"/playlists/play/:uid",component:(0,Pn.Q)(()=>e.e(3090).then(e.bind(e,43168)))},{path:"/playlists/new",component:(0,Pn.Q)(()=>e.e(9975).then(e.bind(e,96455)))},{path:"/playlists/edit/:uid",component:(0,Pn.Q)(()=>e.e(2341).then(e.bind(e,15171)))},{path:"/sandbox/benchmarks",component:(0,Pn.Q)(()=>e.e(4908).then(e.bind(e,99319)))},{path:"/sandbox/test",component:(0,Pn.Q)(()=>Promise.all([e.e(1026),e.e(8595)]).then(e.bind(e,88567)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:(0,Pn.Q)((0,ni.v)()?()=>Promise.all([e.e(3880),e.e(3778)]).then(e.bind(e,54446)):()=>Promise.all([e.e(3880),e.e(3778)]).then(e.bind(e,885)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>Ha.contextSrv.evaluatePermission([hn.AccessControlAction.AlertingRuleRead]),component:(0,Pn.Q)((0,ni.v)()?()=>e.e(1324).then(e.bind(e,49255)):()=>e.e(1324).then(e.bind(e,9473)))},{path:"/library-panels",component:(0,Pn.Q)(()=>Promise.all([e.e(3880),e.e(7878)]).then(e.bind(e,33505)))},{path:"/notifications",component:(0,Pn.Q)(()=>e.e(743).then(e.bind(e,99902)))},...Lc(),...fm(),...qi(),...cm(),...Dm(),...zs,...Pm(),...Qi(),...Cm(),{path:"/*",component:Wu}].filter(Es.fQ)}function qi(L=F.default){return L.supportBundlesEnabled?[{path:"/support-bundles",component:(0,Pn.Q)(()=>e.e(9939).then(e.bind(e,99222)))},{path:"/support-bundles/create",component:(0,Pn.Q)(()=>e.e(539).then(e.bind(e,90745)))}]:[]}function Lc(L=F.default){return L.featureToggles.scenes?[{path:"/scenes",component:(0,Pn.Q)(()=>Promise.all([e.e(9103),e.e(80),e.e(207)]).then(e.bind(e,4855)))},{path:"/scenes/dashboard/:uid",component:(0,Pn.Q)(()=>Promise.all([e.e(9103),e.e(80),e.e(207)]).then(e.bind(e,2864)))},{path:"/scenes/dashboard/:uid/panel-edit/:panelId",component:(0,Pn.Q)(()=>Promise.all([e.e(9103),e.e(80),e.e(207)]).then(e.bind(e,54671)))},{path:"/scenes/grafana-monitoring",exact:!1,component:(0,Pn.Q)(()=>Promise.all([e.e(9103),e.e(80),e.e(207)]).then(e.bind(e,82164)))},{path:"/scenes/:name",component:(0,Pn.Q)(()=>Promise.all([e.e(9103),e.e(80),e.e(207)]).then(e.bind(e,23230)))}]:[]}const el=s.forwardRef((L,N)=>s.createElement("div",{id:"ngRoot",ref:N,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));el.displayName="AngularRoot";var Tr=e(14255),Bc=e(52275),Uc=e(12384),Yr=e(6278),bm=e(17712),Mm=e(84278);async function oi(){if(_.config.angularSupportEnabled){const{AngularApp:L}=await Promise.all([e.e(8342),e.e(2231),e.e(9361),e.e(4704)]).then(e.bind(e,79361)),N=new L;N.init(),N.bootstrap()}else(0,Bc.W)({load:(L,N,H)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})}),(0,Uc.t)({get:L=>{switch(L){case"backendSrv":return(0,Tr.d)("getLegacyAngularInjector","backendSrv","use getBackendSrv() in @grafana/runtime"),(0,T.i)();case"contextSrv":return(0,Tr.d)("getLegacyAngularInjector","contextSrv"),Na.Vt;case"dashboardSrv":return(0,Tr.d)("getLegacyAngularInjector","getDashboardSrv"),(0,i.h4)();case"datasourceSrv":return(0,Tr.d)("getLegacyAngularInjector","datasourceSrv","use getDataSourceSrv() in @grafana/runtime"),(0,V.F)();case"linkSrv":return(0,Tr.d)("getLegacyAngularInjector","linkSrv"),(0,Mm.Bq)();case"validationSrv":return(0,Tr.d)("getLegacyAngularInjector","validationSrv"),bm.t;case"timeSrv":return(0,Tr.d)("getLegacyAngularInjector","timeSrv"),(0,Yr.$t)();case"templateSrv":return(0,Tr.d)("getLegacyAngularInjector","templateSrv","use getTemplateSrv() in @grafana/runtime"),(0,Oe.J)()}throw"Angular is disabled.  Unable to expose: "+L}})}var xm=e(77814),Hs=e.n(xm),Io=e(41056),ii=e(30064),Ro=e(17037),Nc=e(97140),Sm=e(18220);const Ao=0,wc=L=>{const N=s.useRef(null),H=s.useRef(null),ne=s.useRef(L.items);ne.current=L.items;const ve=(0,Sm.useVirtual)({size:ne.current.length,parentRef:H}),{query:Me,search:Re,currentRootActionId:$e,activeIndex:Ge,options:nt}=(0,us.useKBar)(Nt=>({search:Nt.searchQuery,currentRootActionId:Nt.currentRootActionId,activeIndex:Nt.activeIndex}));s.useEffect(()=>{const Nt=sn=>{sn.key==="ArrowUp"||sn.ctrlKey&&sn.key==="p"?(sn.preventDefault(),Me.setActiveIndex(gn=>{let Vn=gn>Ao?gn-1:gn;if(typeof ne.current[Vn]=="string"){if(Vn===0)return gn;Vn-=1}return Vn})):sn.key==="ArrowDown"||sn.ctrlKey&&sn.key==="n"?(sn.preventDefault(),Me.setActiveIndex(gn=>{let Vn=gn<ne.current.length-1?gn+1:gn;if(typeof ne.current[Vn]=="string"){if(Vn===ne.current.length-1)return gn;Vn+=1}return Vn})):sn.key==="Enter"&&(sn.preventDefault(),N.current?.click())};return window.addEventListener("keydown",Nt),()=>window.removeEventListener("keydown",Nt)},[Me]);const{scrollToIndex:ht}=ve;s.useEffect(()=>{ht(Ge,{align:Ge<=1?"end":"auto"})},[Ge,ht]),s.useEffect(()=>{Me.setActiveIndex(typeof L.items[Ao]=="string"?Ao+1:Ao)},[Re,$e,L.items,Me]);const It=s.useCallback((Nt,sn)=>{if(typeof sn=="string")return;const gn=sn.url;sn.command?(sn.command.perform(sn),Me.toggle()):gn?Nt.ctrlKey||Nt.metaKey||Nt.shiftKey||Me.toggle():(Me.setSearch(""),Me.setCurrentRootAction(sn.id)),nt.callbacks?.onSelectAction?.(sn)},[Me,nt]),Vt=(0,Nc.usePointerMovedSinceMount)();return s.createElement("div",{ref:H,style:{maxHeight:L.maxHeight||400,position:"relative",overflow:"auto"}},s.createElement("div",{role:"listbox",id:us.KBAR_LISTBOX,style:{height:`${ve.totalSize}px`,width:"100%"}},ve.virtualItems.map(Nt=>{const sn=ne.current[Nt.index],{target:gn,url:Vn}=sn,ja=typeof sn!="string"&&{onPointerMove:()=>Vt&&Ge!==Nt.index&&Me.setActiveIndex(Nt.index),onPointerDown:()=>Me.setActiveIndex(Nt.index),onClick:Dr=>It(Dr,sn)},ba=Nt.index===Ge,za={id:(0,us.getListboxItemId)(Nt.index),role:"option","aria-selected":ba,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${Nt.start}px)`},...ja},Ns=s.cloneElement(L.onRender({item:sn,active:ba}),{ref:Nt.measureRef});return Vn?s.createElement("a",{key:Nt.index,href:Vn,target:gn,ref:ba?N:null,...za},Ns):s.createElement("div",{key:Nt.index,ref:ba?N:null,...za},Ns)})))},li=s.forwardRef(({action:L,active:N,currentRootActionId:H},ne)=>{const ve=s.useMemo(()=>{if(!H)return L.ancestors;const Ge=L.ancestors.findIndex(nt=>nt.id===H);return L.ancestors.slice(Ge+1)},[L.ancestors,H]),Me=(0,Ze.wW)(Tm);let Re=L.name;const $e=Ge=>!!(Ge.command?.perform||Ge.url);return L.children.length&&!$e(L)&&!Re.endsWith("...")&&(Re+="..."),s.createElement("div",{ref:ne,className:(0,Ie.cx)(Me.row,N&&Me.activeRow)},s.createElement("div",{className:Me.actionContainer},L.icon,s.createElement("div",{className:Me.textContainer},ve.map(Ge=>s.createElement(s.Fragment,{key:Ge.id},!$e(Ge)&&s.createElement(s.Fragment,null,s.createElement("span",{className:Me.breadcrumbAncestor},Ge.name),s.createElement("span",{className:Me.breadcrumbSeparator},"\u203A")))),s.createElement("span",null,Re)),L.subtitle&&s.createElement("span",{className:Me.subtitleText},L.subtitle)))});li.displayName="ResultItem";const Tm=L=>({row:(0,Ie.css)({padding:L.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:L.shape.radius.default,margin:L.spacing(0,1)}),activeRow:(0,Ie.css)({color:L.colors.text.maxContrast,background:L.colors.emphasize(L.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:L.spacing(.5),borderRadius:L.shape.radius.default,backgroundImage:L.colors.gradients.brandVertical}}),actionContainer:(0,Ie.css)({display:"flex",gap:L.spacing(1),alignItems:"baseline",fontSize:L.typography.fontSize,width:"100%"}),textContainer:(0,Ie.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),breadcrumbAncestor:(0,Ie.css)({color:L.colors.text.secondary}),breadcrumbSeparator:(0,Ie.css)({color:L.colors.text.secondary,marginLeft:L.spacing(1),marginRight:L.spacing(1)}),subtitleText:(0,Ie.css)({...L.typography.bodySmall,color:L.colors.text.secondary,display:"block",flexBasis:"20%",flexGrow:1,flexShrink:0,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var tl=e(97368),Fr=e.n(tl),Om=e(81583),Lo=e(17231);const Bo=5,Uo=4,Wc=3,nl=2,Im=1,Rm=100,Fc=5,Kc=Fr()(Am,200);async function fr(){if(!Ha.contextSrv.user.isSignedIn)return[];const L=(await Om.Z.getDashboardOpened()).slice(0,Fc),H=(await(0,Lo.getGrafanaSearcher)().search({kind:["dashboard"],limit:Fc,uid:L})).view.toArray();return H.sort((ve,Me)=>{const Re=L.indexOf(ve.uid),$e=L.indexOf(Me.uid);return Re-$e}),H.map(ve=>{const{url:Me,name:Re}=ve;return{id:`recent-dashboards${Me}`,name:`${Re}`,section:(0,Ua.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:Bo,url:Me}})}async function Am(L){if(L.length===0||!Ha.contextSrv.user.isSignedIn&&!_.config.bootData.settings.anonymousEnabled)return[];const N=await(0,Lo.getGrafanaSearcher)().search({kind:["dashboard","folder"],query:L,limit:Rm});return N.view.map(ne=>{const{url:ve,name:Me,kind:Re,location:$e}=ne;return{id:`go/${Re}${ve}`,name:`${Me}`,section:Re==="dashboard"?(0,Ua.t)("command-palette.section.dashboard-search-results","Dashboards"):(0,Ua.t)("command-palette.section.folder-search-results","Folders"),priority:Im,url:ve,subtitle:N.view.dataFrame.meta?.custom?.locationInfo[$e]?.name}})}function Lm(L,N){const[H,ne]=(0,s.useState)([]),[ve,Me]=(0,s.useState)(!1),Re=(0,s.useRef)(0);return(0,s.useEffect)(()=>{const $e=Date.now();N&&L.length>0?(Me(!0),Kc(L).then(Ge=>{$e>Re.current&&(ne(Ge),Me(!1),Re.current=$e)})):(ne([]),Me(!1),Re.current=$e)},[N,L]),{searchResults:H,isFetchingSearchResults:ve}}var ks=e(73431),gs=e(28833),al=e(85806),Vc=e(65963);const $c=L=>{let N=L.children||[];if(L.id==="help"){const H=()=>{gs.Z.publish(new ks.Dn({component:Vc.B}))};L.children=[...N,...(0,al.dP)(),...Bm(),{id:"keyboard-shortcuts",text:(0,Ua.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:H}]}return L},sl=(L,N)=>{const H=L.onClick;return L.onClick=()=>{(0,lr.ff)("grafana_navigation_item_clicked",{path:L.url??L.id,state:N?"expanded":"collapsed"}),H?.()},L.children&&(L.children=L.children.map(ne=>sl(ne,N))),L},rl=(L,N)=>!!(L===N||ol(L,N)),ol=(L,N)=>!!L.children?.some(H=>H===N?!0:ol(H,N)),ci=L=>L?.split("?")[0]??"",_c=(L,N)=>{const H=ci(N?.url),ne=ci(L.url);return ne&&ne.length>H?.length},zc=(L,N,H)=>{const ne="/dashboards";for(const ve of L){const Me=ci(ve.url),Re=S.u.stripBaseFromUrl(Me);if(Re&&ve.id!=="starred")if(Re===N){H=ve;break}else if(Re!=="/"&&N.startsWith(Re))_c(ve,H)&&(H=ve);else if(Re==="/alerting/list"&&N.startsWith("/alerting/notification/")){H=ve;break}else Re===ne&&N.startsWith("/d/")&&_c(ve,H)&&(H=ve);if(ve.children&&(H=zc(ve.children,N,H)),ci(H?.url)===N)return H}return H};function Bm(){const{buildInfo:L,licenseInfo:N}=_.config,H=N.stateInfo?` (${N.stateInfo})`:"",ne=[];return ne.push({target:"_blank",id:"version",text:`${L.edition}${H}`,url:N.licenseUrl,icon:"external-link-alt"}),L.hasUpdate&&ne.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),ne}var No=e(54977);function Hc(L){return"navModel."+L.id}function kc(L,N=[]){const H=[];for(let ne of L){ne.id==="help"&&(ne=$c({...ne}),delete ne.url);const{url:ve,target:Me,text:Re,isCreateAction:$e,children:Ge,onClick:nt}=ne,ht=!!Ge?.length;if(!(ve||nt||ht))continue;const It=$e?(0,Ua.t)("command-palette.section.actions","Actions"):(0,Ua.t)("command-palette.section.pages","Pages"),Vt=$e?Uo:Wc,Nt=N.map(gn=>gn.text).join(" > "),sn={id:Hc(ne),name:Re,section:It,url:ve,target:Me,parent:N.length>0&&!$e?Hc(N[N.length-1]):void 0,perform:nt,priority:Vt,subtitle:$e?void 0:Nt};if(H.push(sn),Ge?.length){const gn=kc(Ge,[...N,ne]);H.push(...gn)}}return H}const Gc=L=>{const N=[{id:"preferences/theme",name:(0,Ua.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,Ua.t)("command-palette.section.preferences","Preferences"),priority:nl},{id:"preferences/dark-theme",name:(0,Ua.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>(0,No.L)("dark"),parent:"preferences/theme",priority:nl},{id:"preferences/light-theme",name:(0,Ua.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>(0,No.L)("light"),parent:"preferences/theme",priority:nl}],H=kc(L);return[...N,...H]};function Um(L){const[N,H]=(0,s.useState)([]),[ne,ve]=(0,s.useState)([]),{navBarTree:Me}=(0,hn.useSelector)(Re=>({navBarTree:Re.navBarTree}));return(0,s.useEffect)(()=>{const Re=Gc(Me);H(Re)},[Me]),(0,s.useEffect)(()=>{L||fr().then(Re=>ve(Re)).catch(Re=>{console.error("Error loading recent dashboard actions",Re)})},[L]),L?N:[...ne,...N]}var Nm=e(5135);const jc={name:"none",priority:us.Priority.NORMAL};function il(L,N){return N.priority-L.priority}function wm(){const{search:L,actions:N,rootActionId:H}=(0,us.useKBar)(ht=>({search:ht.searchQuery,actions:ht.actions,rootActionId:ht.currentRootActionId})),ne=s.useMemo(()=>Object.keys(N).reduce((ht,It)=>{const Vt=N[It];if(!Vt.parent&&!H&&ht.push(Vt),Vt.id===H)for(let Nt=0;Nt<Vt.children.length;Nt++)ht.push(Vt.children[Nt]);return ht},[]).sort(il),[N,H]),ve=s.useCallback(ht=>{let It=[];for(let Vt=0;Vt<ht.length;Vt++)It.push(ht[Vt]);return function Vt(Nt,sn=It){for(let gn=0;gn<Nt.length;gn++)if(Nt[gn].children.length>0){let Vn=Nt[gn].children;for(let ja=0;ja<Vn.length;ja++)sn.push(Vn[ja]);Vt(Nt[gn].children,sn)}return sn}(ht)},[]),Me=!L,Re=s.useMemo(()=>Me?ne:ve(ne),[ve,ne,Me]),$e=Wm(Re,L),Ge=s.useMemo(()=>{let ht={},It=[],Vt=[];for(let sn=0;sn<$e.length;sn++){const gn=$e[sn],Vn=gn.action,ja=gn.score||us.Priority.NORMAL,ba={name:typeof Vn.section=="string"?Vn.section:Vn.section?.name||jc.name,priority:typeof Vn.section=="string"?ja:Vn.section?.priority||0+ja};ht[ba.name]||(ht[ba.name]=[],It.push(ba)),ht[ba.name].push({priority:Vn.priority+ja,action:Vn})}Vt=It.sort(il).map(sn=>({name:sn.name,actions:ht[sn.name].sort(il).map(gn=>gn.action)}));let Nt=[];for(let sn=0;sn<Vt.length;sn++){let gn=Vt[sn];gn.name!==jc.name&&Nt.push(gn.name);for(let Vn=0;Vn<gn.actions.length;Vn++)Nt.push(gn.actions[Vn])}return Nt},[$e]),nt=s.useMemo(()=>H,[Ge]);return s.useMemo(()=>({results:Ge,rootActionId:nt}),[nt,Ge])}function Wm(L,N){const H=Fm(),ne=s.useMemo(()=>({filtered:L,search:N}),[L,N]),{filtered:ve,search:Me}=(0,Nc.useThrottledValue)(ne);return s.useMemo(()=>{if(Me.trim()==="")return ve.map(Ge=>({score:0,action:Ge}));const Re=ve.map(({name:Ge,keywords:nt})=>`${Ge} ${nt??""}`.toLowerCase()),$e=[];if(Me.length>ll){const Ge=Me.toLowerCase();for(let nt=0;nt<Re.length;nt++){const It=Re[nt].indexOf(Ge);if(It>-1){const Vt=It*-1,Nt=ve[nt];$e.push({score:Vt,action:Nt})}}}else{const Ge=H.split(Me).length,nt=1/0,ht=Ge<5,[,It,Vt]=H.search(Re,Me,ht,nt);if(It&&Vt)for(let Nt=0;Nt<Vt.length;Nt++){const sn=Vt[Nt],gn=Vt.length-Nt,Vn=ve[It.idx[sn]];$e.push({score:gn,action:Vn})}}return $e},[ve,Me,H])}const ll=25;function Fm(){const L=s.useRef();return L.current||(L.current=new Nm.Z({intraMode:0,intraIns:0})),L.current}function Km(){const L=(0,Ze.wW)(Qc),{query:N,showing:H,searchQuery:ne}=(0,us.useKBar)(ht=>({showing:ht.visualState===us.VisualState.showing,searchQuery:ht.searchQuery})),ve=Um(ne);(0,us.useRegisterActions)(ve,[ve]);const{searchResults:Me,isFetchingSearchResults:Re}=Lm(ne,H),$e=(0,s.useRef)(null),{overlayProps:Ge}=(0,Ro.Ir)({isOpen:H,onClose:()=>N.setVisualState(us.VisualState.animatingOut)},$e),{dialogProps:nt}=(0,Io.R)({},$e);return(0,s.useEffect)(()=>{H&&(0,lr.ff)("command_palette_opened")},[H]),ve.length>0?s.createElement(us.KBarPortal,null,s.createElement(us.KBarPositioner,{className:L.positioner},s.createElement(us.KBarAnimator,{className:L.animator},s.createElement(ii.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},s.createElement("div",{...Ge,...nt},s.createElement("div",{className:L.searchContainer},Re?s.createElement(Pc.$,{className:L.spinner}):s.createElement(Ta.J,{name:"search",size:"md"}),s.createElement(us.KBarSearch,{defaultPlaceholder:(0,Ua.t)("command-palette.search-box.placeholder","Search or jump to..."),className:L.search})),s.createElement("div",{className:L.resultsContainer},s.createElement(Vm,{searchResults:Me}))))))):null}const Vm=({searchResults:L})=>{const{results:N,rootActionId:H}=wm(),ne=(0,Ze.wW)(Qc),ve=(0,Ua.t)("command-palette.section.dashboard-search-results","Dashboards"),Me=(0,Ua.t)("command-palette.section.folder-search-results","Folders"),Re=(0,s.useMemo)(()=>L.filter(nt=>nt.id.startsWith("go/dashboard")).map(nt=>new us.ActionImpl(nt,{store:{}})),[L]),$e=(0,s.useMemo)(()=>L.filter(nt=>nt.id.startsWith("go/folder")).map(nt=>new us.ActionImpl(nt,{store:{}})),[L]),Ge=(0,s.useMemo)(()=>{const nt=[...N];return $e.length>0&&(nt.push(Me),nt.push(...$e)),Re.length>0&&(nt.push(ve),nt.push(...Re)),nt},[N,ve,Re,Me,$e]);return s.createElement(wc,{items:Ge,maxHeight:650,onRender:({item:nt,active:ht})=>{const It=Ge[0]===nt;return typeof nt=="string"?s.createElement("div",{className:(0,Ie.cx)(ne.sectionHeader,It&&ne.sectionHeaderFirst)},nt):s.createElement(li,{action:nt,active:ht,currentRootActionId:H})}})},Qc=L=>({positioner:(0,Ie.css)({zIndex:L.zIndex.portal,marginTop:"0px",paddingTop:"4px !important","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:L.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,Ie.css)({maxWidth:L.breakpoints.values.md,width:"100%",background:L.colors.background.primary,color:L.colors.text.primary,borderRadius:L.shape.radius.default,border:`1px solid ${L.colors.border.weak}`,overflow:"hidden",boxShadow:L.shadows.z3}),searchContainer:(0,Ie.css)({alignItems:"center",background:L.components.input.background,borderBottom:`1px solid ${L.colors.border.weak}`,display:"flex",gap:L.spacing(1),padding:L.spacing(1,2)}),search:(0,Ie.css)({fontSize:L.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:L.components.input.text}),spinner:(0,Ie.css)({height:"22px"}),resultsContainer:(0,Ie.css)({paddingBottom:L.spacing(1)}),sectionHeader:(0,Ie.css)({padding:L.spacing(1.5,2,2,2),fontSize:L.typography.bodySmall.fontSize,fontWeight:L.typography.fontWeightMedium,color:L.colors.text.secondary,borderTop:`1px solid ${L.colors.border.weak}`,marginTop:L.spacing(1)}),sectionHeaderFirst:(0,Ie.css)({paddingBottom:L.spacing(1),borderTop:"none",marginTop:0})});var di=e(17088),cl=e(64447),$m=e(37047),dl=e(973),_m=e(17393),ui=e(98632),zm=e(58869);const ul=({children:L})=>{const N=(0,Ze.wW)(Hm);return s.createElement("div",null,L,s.createElement("span",{className:N.highlight}))},Hm=L=>({highlight:(0,Ie.css)({backgroundColor:L.colors.success.main,borderRadius:L.shape.radius.circle,width:"6px",height:"6px",display:"inline-block;",position:"absolute",top:"50%",transform:"translateY(-50%)"})});var mi=e(18950);function Yc({children:L,isActive:N,onClick:H,target:ne,url:ve}){const Me=(0,Ze.l4)(),Re=km(Me,N),$e=s.createElement("div",{className:Re.linkContent},L,ne==="_blank"&&s.createElement(Ta.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:Re.externalLinkIcon}));let Ge=s.createElement("button",{"data-testid":yn.wl.components.NavMenu.item,className:(0,Ie.cx)(Re.button,Re.element),onClick:H},$e);return ve&&(Ge=!ne&&ve.startsWith("/")?s.createElement(mi.r,{"data-testid":yn.wl.components.NavMenu.item,className:Re.element,href:ve,target:ne,onClick:H},$e):s.createElement("a",{"data-testid":yn.wl.components.NavMenu.item,href:ve,target:ne,className:Re.element,onClick:H},$e)),s.createElement("div",{className:Re.wrapper},Ge)}Yc.displayName="MegaMenuItemText";const km=(L,N)=>({button:(0,Ie.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,Ie.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),externalLinkIcon:(0,Ie.css)({color:L.colors.text.secondary}),element:(0,Ie.css)({alignItems:"center",boxSizing:"border-box",position:"relative",color:N?L.colors.text.primary:L.colors.text.secondary,padding:L.spacing(1,1,1,0),width:"100%","&:hover, &:focus-visible":{textDecoration:"underline",color:L.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${L.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:N?"block":"none",content:'" "',height:L.spacing(3),position:"absolute",left:L.spacing(1),top:"50%",transform:"translateY(-50%)",width:L.spacing(.5),borderRadius:L.shape.radius.default,backgroundImage:L.colors.gradients.brandVertical}}),wrapper:(0,Ie.css)({boxSizing:"border-box",position:"relative",display:"flex",width:"100%"})}),kp=L=>{let N=L.children||[];if(L.id==="help"){const H=()=>{appEvents.publish(new ShowModalReactEvent({component:HelpModal}))};L.children=[...N,...getFooterLinks(),...Zc(),{id:"keyboard-shortcuts",text:t("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:H}]}return L},gr=(L,N)=>{const H={...L},ne=H.onClick;return H.onClick=()=>{(0,lr.ff)("grafana_navigation_item_clicked",{path:H.url??H.id,state:N?"expanded":"collapsed"}),ne?.()},H.children&&(H.children=H.children.map(ve=>gr(ve,N))),H},cr=(L,N)=>!!(L===N||pr(L,N)),pr=(L,N)=>!!L.children?.some(H=>H===N?!0:pr(H,N)),ml=L=>L?.split("?")[0]??"",Gm=(L,N)=>{const H=ml(N?.url),ne=ml(L.url);return ne&&ne.length>H?.length},fl=(L,N,H)=>{const ne="/dashboards";for(const ve of L){const Me=ml(ve.url),Re=S.u.stripBaseFromUrl(Me);if(Re&&ve.id!=="starred")if(Re===N){H=ve;break}else if(Re!=="/"&&N.startsWith(Re))Gm(ve,H)&&(H=ve);else if(Re==="/alerting/list"&&N.startsWith("/alerting/notification/")){H=ve;break}else Re===ne&&N.startsWith("/d/")&&Gm(ve,H)&&(H=ve);if(ve.children&&(H=fl(ve.children,N,H)),ml(H?.url)===N)return H}return H};function Zc(){const{buildInfo:L,licenseInfo:N}=config,H=N.stateInfo?` (${N.stateInfo})`:"",ne=[];return ne.push({target:"_blank",id:"version",text:`${L.edition}${H}`,url:N.licenseUrl,icon:"external-link-alt"}),L.hasUpdate&&ne.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),ne}const jm=2;function gl({link:L,activeItem:N,level:H=0,onClick:ne}){const ve=(0,Ze.wW)(Qm),Me=L.highlightText?ul:s.Fragment,Re=L===N,$e=pr(L,N),[Ge,nt]=(0,dl.Z)(`grafana.navigation.expanded[${L.text}]`,!1)??!!$e,ht=H<jm&&(Jc(L)||L.emptyMessage);return s.createElement("li",{className:ve.listItem},s.createElement("div",{className:ve.collapsibleSectionWrapper},s.createElement(Yc,{isActive:Re,onClick:()=>{L.onClick?.(),ne?.()},target:L.target,url:L.url},s.createElement("div",{className:(0,Ie.cx)(ve.labelWrapper,{[ve.isActive]:Re})},s.createElement(Me,null,s.createElement("div",{className:ve.iconWrapper},H===0&&L.icon&&s.createElement(Ta.J,{name:(0,_m.iJ)(L.icon)??"link",size:"xl"}))),s.createElement(zm.A,{level:Math.max(0,H-1),spacing:2}),s.createElement(ui.x,{truncate:!0},L.text))),ht&&s.createElement(Te.zx,{"aria-label":`${Ge?"Collapse":"Expand"} section ${L.text}`,variant:"secondary",fill:"text",className:ve.collapseButton,onClick:()=>nt(!Ge)},s.createElement(Ta.J,{name:Ge?"angle-up":"angle-down",size:"xl"}))),ht&&Ge&&s.createElement("ul",{className:ve.children},Jc(L)?L.children.filter(It=>!It.isCreateAction).map(It=>s.createElement(gl,{key:`${L.text}-${It.text}`,link:It,activeItem:N,onClick:ne,level:H+1})):s.createElement("div",{className:ve.emptyMessage},L.emptyMessage)))}const Qm=L=>({children:(0,Ie.css)({display:"flex",listStyleType:"none",flexDirection:"column"}),collapsibleSectionWrapper:(0,Ie.css)({alignItems:"center",display:"flex"}),collapseButton:(0,Ie.css)({color:L.colors.text.disabled,padding:L.spacing(0,.5),marginRight:L.spacing(1)}),emptyMessage:(0,Ie.css)({color:L.colors.text.secondary,fontStyle:"italic",padding:L.spacing(1,1.5,1,7)}),iconWrapper:(0,Ie.css)({display:"inline-flex",alignItems:"center",justifyContent:"center"}),labelWrapper:(0,Ie.css)({display:"grid",fontSize:L.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${L.spacing(7)} auto`,alignItems:"center",fontWeight:L.typography.fontWeightMedium}),listItem:(0,Ie.css)({flex:1}),isActive:(0,Ie.css)({color:L.colors.text.primary,"&::before":{display:"block",content:'" "',height:L.spacing(3),position:"absolute",left:L.spacing(1),top:"50%",transform:"translateY(-50%)",width:L.spacing(.5),borderRadius:L.shape.radius.default,backgroundImage:L.colors.gradients.brandVertical}})});function Jc(L){return!!(L.children&&L.children.length>0)}const pl="350px",hl=s.memo((0,s.forwardRef)(({onClose:L,...N},H)=>{const ne=(0,hn.useSelector)(It=>It.navBarTree),ve=(0,Ze.wW)(Ym),Me=(0,Ms.TH)(),{chrome:Re}=(0,Wr.p)(),$e=Re.useState(),Ge=ne.filter(It=>It.id!=="profile"&&It.id!=="help").map(It=>gr(It,!0)),nt=fl(Ge,Me.pathname),ht=()=>{Re.setMegaMenu($e.megaMenu==="docked"?"closed":"docked")};return s.createElement("div",{"data-testid":"navbarmenu",ref:H,...N},s.createElement("div",{className:ve.mobileHeader},s.createElement(Ta.J,{name:"bars",size:"xl"}),s.createElement(vt.h,{tooltip:(0,Ua.t)("navigation.megamenu.close","Close menu"),name:"times",onClick:L,size:"xl",variant:"secondary"})),s.createElement("nav",{className:ve.content},s.createElement(cl.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},s.createElement("ul",{className:ve.itemList},Ge.map((It,Vt)=>s.createElement($m.k,{key:It.text,direction:"row",alignItems:"center"},s.createElement(gl,{link:It,onClick:$e.megaMenu==="open"?L:void 0,activeItem:nt}),Vt===0&&s.createElement(vt.h,{className:ve.dockMenuButton,tooltip:$e.megaMenu==="docked"?(0,Ua.t)("navigation.megamenu.undock","Undock menu"):(0,Ua.t)("navigation.megamenu.dock","Dock menu"),name:"web-section-alt",onClick:ht,variant:"secondary"})))))))}));hl.displayName="MegaMenu";const Ym=L=>({content:(0,Ie.css)({display:"flex",flexDirection:"column",height:"100%",minHeight:0,position:"relative"}),mobileHeader:(0,Ie.css)({display:"flex",justifyContent:"space-between",padding:L.spacing(1,1,1,2),borderBottom:`1px solid ${L.colors.border.weak}`,[L.breakpoints.up("md")]:{display:"none"}}),itemList:(0,Ie.css)({display:"flex",flexDirection:"column",listStyleType:"none",minWidth:pl,[L.breakpoints.up("md")]:{width:pl}}),dockMenuButton:(0,Ie.css)({display:"none",marginRight:L.spacing(2),[L.breakpoints.up("md")]:{display:"inline-flex"}})});var vl=e(22453),Zr=e(3839),fi=e(12813);function Xc({href:L,isCurrent:N,text:H,index:ne,flexGrow:ve}){const Me=(0,Ze.wW)(El),Re=()=>{(0,lr.ff)("grafana_breadcrumb_clicked",{url:L})};return s.createElement("li",{className:Me.breadcrumbWrapper,style:{flexGrow:ve}},N?s.createElement("span",{"data-testid":vl.z.Breadcrumbs.breadcrumb(H),className:Me.breadcrumb,"aria-current":"page",title:H},H):s.createElement(s.Fragment,null,s.createElement("a",{onClick:Re,"data-testid":vl.z.Breadcrumbs.breadcrumb(H),className:(0,Ie.cx)(Me.breadcrumb,Me.breadcrumbLink),title:H,href:L},H),s.createElement("div",{className:Me.separator,"aria-hidden":!0},s.createElement(Ta.J,{name:"angle-right"}))))}const El=L=>({breadcrumb:(0,Ie.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:L.spacing(0,.5),whiteSpace:"nowrap",color:L.colors.text.secondary}),breadcrumbLink:(0,Ie.css)({color:L.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,Ie.css)({alignItems:"center",color:L.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[L.breakpoints.down("sm")]:{display:"none","&:nth-last-child(2)":{display:"flex",minWidth:"40px"},"&:last-child":{display:"flex"}}}),separator:(0,Ie.css)({color:L.colors.text.secondary})});function Zm({breadcrumbs:L,className:N}){const H=(0,Ze.wW)(Xm);return s.createElement("nav",{"aria-label":"Breadcrumbs",className:N},s.createElement("ol",{className:H.breadcrumbs},L.map((ne,ve)=>s.createElement(Xc,{...ne,isCurrent:ve===L.length-1,key:ve,index:ve,flexGrow:Jm(ve,L.length)}))))}function Jm(L,N){return N<5&&L>0&&L<N-2||N>6&&L>1&&L<N-3?4:10}const Xm=L=>({breadcrumbs:(0,Ie.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",overflow:"hidden"})});var qm=e(12258),qs=e(58434),qc=e(82618);const ed="mega-menu-toggle";function ef({actions:L,searchBarHidden:N,sectionNav:H,pageNav:ne,onToggleMegaMenu:ve,onToggleSearchBar:Me,onToggleKioskMode:Re}){const $e=(0,hn.useSelector)(ht=>ht.navIndex)[fi.Qz],Ge=(0,Ze.wW)(tf),nt=(0,qm.t)(H,ne,$e);return s.createElement("div",{"data-testid":vl.z.NavToolbar.container,className:Ge.pageToolbar},s.createElement("div",{className:Ge.menuButton},s.createElement(vt.h,{id:ed,name:"bars",tooltip:(0,Ua.t)("navigation.toolbar.toggle-menu","Toggle menu"),tooltipPlacement:"bottom",size:"xl",onClick:ve})),s.createElement(Zm,{breadcrumbs:nt,className:Ge.breadcrumbsWrapper}),s.createElement("div",{className:Ge.actions},L,L&&s.createElement(qc.M,null),N&&s.createElement(Zr.h,{onClick:Re,narrow:!0,title:(0,Ua.t)("navigation.toolbar.enable-kiosk","Enable kiosk mode"),icon:"monitor"}),s.createElement(Zr.h,{onClick:Me,narrow:!0,title:(0,Ua.t)("navigation.toolbar.toggle-search-bar","Toggle top search bar")},s.createElement(Ta.J,{name:N?"angle-down":"angle-up",size:"xl"}))))}const tf=L=>({breadcrumbsWrapper:(0,Ie.css)({display:"flex",overflow:"hidden",[L.breakpoints.down("sm")]:{minWidth:"50%"}}),pageToolbar:(0,Ie.css)({height:qs.$,display:"flex",padding:L.spacing(0,1,0,2),alignItems:"center"}),menuButton:(0,Ie.css)({display:"flex",alignItems:"center",marginRight:L.spacing(1)}),actions:(0,Ie.css)({label:"NavToolbar-actions",display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:L.spacing(1),flexGrow:1,gap:L.spacing(.5),minWidth:0,".body-drawer-open &":{display:"none"}})});function td({}){const L=(0,Ze.l4)(),{chrome:N}=(0,Wr.p)(),H=N.useState(),ne=H.searchBarHidden||H.kioskMode===hn.KioskMode.TV,ve=(0,s.useRef)(null),Me=(0,s.useRef)(null),Re=L.transitions.duration.shortest,$e=(0,Ze.wW)(ad,Re),Ge=H.megaMenu==="open",nt=()=>N.setMegaMenu("closed"),{overlayProps:ht,underlayProps:It}=(0,Ro.Ir)({isDismissable:!0,isOpen:!0,onClose:nt,shouldCloseOnInteractOutside:sn=>!document.getElementById(ed)?.contains(sn)},ve),{dialogProps:Vt}=(0,Io.R)({},ve),Nt=(0,Ze.wW)(nd,ne);return s.createElement("div",{className:Nt.wrapper},s.createElement(Ro.Xj,null,s.createElement(di.Z,{nodeRef:ve,in:Ge,unmountOnExit:!0,classNames:$e.overlay,timeout:{enter:Re,exit:0}},s.createElement(ii.MT,{contain:!0,autoFocus:!0},s.createElement(hl,{className:Nt.menu,onClose:nt,ref:ve,...ht,...Vt}))),s.createElement(di.Z,{nodeRef:Me,in:Ge,unmountOnExit:!0,classNames:$e.backdrop,timeout:{enter:Re,exit:0}},s.createElement("div",{ref:Me,className:Nt.backdrop,...It}))))}const nd=(L,N)=>{const H=(N?qs.$:qs.$*2)+1;return{backdrop:(0,Ie.css)({backdropFilter:"blur(1px)",backgroundColor:L.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:N?0:qs.$,zIndex:L.zIndex.modalBackdrop,[L.breakpoints.up("md")]:{top:H}}),menu:(0,Ie.css)({display:"flex",bottom:0,flexDirection:"column",left:0,right:0,zIndex:L.zIndex.modal,position:"fixed",top:N?0:qs.$,backgroundColor:L.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[L.breakpoints.up("md")]:{right:"unset",borderRight:`1px solid ${L.colors.border.weak}`,top:H}}),wrapper:(0,Ie.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:L.zIndex.sidemenu})}},ad=(L,N)=>{const H={transitionDuration:`${N}ms`,transitionTimingFunction:L.transitions.easing.easeInOut,[L.breakpoints.down("md")]:{overflow:"hidden"}},ne={...H,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},ve={...H,transitionProperty:"opacity"},Me={width:"100%",[L.breakpoints.up("md")]:{boxShadow:L.shadows.z3,width:pl}},Re={boxShadow:"none",width:0},$e={opacity:1},Ge={opacity:0};return{backdrop:{enter:(0,Ie.css)(Ge),enterActive:(0,Ie.css)(ve,$e),enterDone:(0,Ie.css)($e)},overlay:{enter:(0,Ie.css)(Re),enterActive:(0,Ie.css)(ne,Me),enterDone:(0,Ie.css)(Me)}}};function gi({children:L,icon:N,isActive:H,isChild:ne,onClick:ve,target:Me,url:Re}){const $e=(0,Ze.l4)(),Ge=pi($e,H,ne),nt=s.createElement("div",{className:Ge.linkContent},N&&s.createElement(Ta.J,{"data-testid":"dropdown-child-icon",name:N}),s.createElement("div",{className:Ge.linkText},L),Me==="_blank"&&s.createElement(Ta.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:Ge.externalLinkIcon}));let ht=s.createElement("button",{"data-testid":yn.wl.components.NavMenu.item,className:(0,Ie.cx)(Ge.button,Ge.element),onClick:ve},nt);return Re&&(ht=!Me&&Re.startsWith("/")?s.createElement(mi.r,{"data-testid":yn.wl.components.NavMenu.item,className:Ge.element,href:Re,target:Me,onClick:ve},nt):s.createElement("a",{"data-testid":yn.wl.components.NavMenu.item,href:Re,target:Me,className:Ge.element,onClick:ve},nt)),s.createElement("li",{className:Ge.listItem},ht)}gi.displayName="NavBarMenuItem";const pi=(L,N,H)=>({button:(0,Ie.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,Ie.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),linkText:(0,Ie.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,Ie.css)({color:L.colors.text.secondary}),element:(0,Ie.css)({alignItems:"center",boxSizing:"border-box",position:"relative",color:N?L.colors.text.primary:L.colors.text.secondary,padding:L.spacing(1,1,1,H?5:0),...H&&{borderRadius:L.shape.radius.default},width:"100%","&:hover, &:focus-visible":{...H&&{background:L.colors.emphasize(L.colors.background.primary,.03)},textDecoration:"underline",color:L.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${L.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:N?"block":"none",content:'" "',height:L.spacing(3),position:"absolute",left:L.spacing(1),top:"50%",transform:"translateY(-50%)",width:L.spacing(.5),borderRadius:L.shape.radius.default,backgroundImage:L.colors.gradients.brandVertical}}),listItem:(0,Ie.css)({boxSizing:"border-box",position:"relative",display:"flex",width:"100%",...H&&{padding:L.spacing(0,2)}})});var nf=e(41730);function sd({link:L}){const N=(0,Ze.l4)(),H=af(N);if(L.icon==="grafana")return s.createElement(Jo.c.MenuLogo,{className:H.img});if(L.icon){const ne=(0,nf.toIconName)(L.icon);return s.createElement(Ta.J,{name:ne??"link",size:"xl"})}else return s.createElement("img",{className:(0,Ie.cx)(H.img,L.roundIcon&&H.round),src:L.img,alt:""})}function af(L){return{img:(0,Ie.css)({height:L.spacing(3),width:L.spacing(3)}),round:(0,Ie.css)({borderRadius:L.shape.radius.circle})}}const hi=({children:L})=>{const N=(0,Ze.wW)(rd);return s.createElement("div",null,L,s.createElement("span",{className:N.highlight}))},rd=L=>({highlight:(0,Ie.css)`
      background-color: ${L.colors.success.main};
      border-radius: ${L.shape.radius.circle};
      width: 6px;
      height: 6px;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `});function od({link:L,activeItem:N,children:H,className:ne,onClose:ve}){const Me=(0,Ze.wW)(sf),Re=L.highlightText?hi:s.Fragment,$e=L===N,Ge=ol(L,N),[nt,ht]=(0,dl.Z)(`grafana.navigation.expanded[${L.text}]`,!1)??!!Ge;return s.createElement(s.Fragment,null,s.createElement("div",{className:(0,Ie.cx)(Me.collapsibleSectionWrapper,ne)},s.createElement(gi,{isActive:L===N,onClick:()=>{L.onClick?.(),ve?.()},target:L.target,url:L.url},s.createElement("div",{className:(0,Ie.cx)(Me.labelWrapper,{[Me.isActive]:$e,[Me.hasActiveChild]:Ge})},s.createElement(Re,null,s.createElement(sd,{link:L})),L.text)),H&&s.createElement(Te.zx,{"aria-label":`${nt?"Collapse":"Expand"} section ${L.text}`,variant:"secondary",fill:"text",className:Me.collapseButton,onClick:()=>ht(!nt)},s.createElement(Ta.J,{name:nt?"angle-up":"angle-down",size:"xl"}))),nt&&H)}const sf=L=>({collapsibleSectionWrapper:(0,Ie.css)({alignItems:"center",display:"flex"}),collapseButton:(0,Ie.css)({color:L.colors.text.disabled,padding:L.spacing(0,.5),marginRight:L.spacing(1)}),collapseWrapperActive:(0,Ie.css)({backgroundColor:L.colors.action.disabledBackground}),collapseContent:(0,Ie.css)({padding:0}),labelWrapper:(0,Ie.css)({display:"grid",fontSize:L.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${L.spacing(7)} auto`,placeItems:"center",fontWeight:L.typography.fontWeightMedium}),isActive:(0,Ie.css)({color:L.colors.text.primary,"&::before":{display:"block",content:'" "',height:L.spacing(3),position:"absolute",left:L.spacing(1),top:"50%",transform:"translateY(-50%)",width:L.spacing(.5),borderRadius:L.shape.radius.default,backgroundImage:L.colors.gradients.brandVertical}}),hasActiveChild:(0,Ie.css)({color:L.colors.text.primary})});function id({link:L,activeItem:N,onClose:H}){const ne=(0,Ze.wW)(ld);return L.emptyMessage&&!cd(L)?s.createElement(od,{onClose:H,link:L,activeItem:N},s.createElement("ul",{className:ne.children},s.createElement("div",{className:ne.emptyMessage},L.emptyMessage))):s.createElement(od,{onClose:H,link:L,activeItem:N},cd(L)&&s.createElement("ul",{className:ne.children},L.children.map(ve=>!ve.isCreateAction&&s.createElement(gi,{key:`${L.text}-${ve.text}`,isActive:rl(ve,N),isChild:!0,onClick:()=>{ve.onClick?.(),H()},target:ve.target,url:ve.url},ve.text))))}const ld=L=>({children:(0,Ie.css)({display:"flex",flexDirection:"column"}),flex:(0,Ie.css)({display:"flex"}),itemWithoutMenu:(0,Ie.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,Ie.css)({height:"100%",width:"100%"}),iconContainer:(0,Ie.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,Ie.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${L.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,Ie.css)({fontSize:L.typography.pxToRem(14),justifySelf:"start"}),emptyMessage:(0,Ie.css)({color:L.colors.text.secondary,fontStyle:"italic",padding:L.spacing(1,1.5,1,7)})});function cd(L){return!!(L.children&&L.children.length>0)}const dd="350px";function yl({activeItem:L,navItems:N,searchBarHidden:H,onClose:ne}){const ve=(0,Ze.l4)(),Me=rf(ve,H),Re=ve.transitions.duration.shortest,$e=of(ve,Re),{chrome:Ge}=(0,Wr.p)(),nt=Ge.useState(),ht=(0,s.useRef)(null),It=(0,s.useRef)(null),{dialogProps:Vt}=(0,Io.R)({},ht),[Nt,sn]=(0,s.useState)(!1),gn=()=>sn(!1),{overlayProps:Vn,underlayProps:ja}=(0,Ro.Ir)({isDismissable:!0,isOpen:!0,onClose:gn},ht);return(0,s.useEffect)(()=>{nt.megaMenu==="open"&&sn(!0)},[nt.megaMenu]),s.createElement(Ro.Xj,null,s.createElement(di.Z,{nodeRef:ht,in:Nt,unmountOnExit:!0,classNames:$e.overlay,timeout:{enter:Re,exit:0},onExited:ne},s.createElement(ii.MT,{contain:!0,autoFocus:!0},s.createElement("div",{"data-testid":"navbarmenu",ref:ht,...Vn,...Vt,className:Me.container},s.createElement("div",{className:Me.mobileHeader},s.createElement(Ta.J,{name:"bars",size:"xl"}),s.createElement(vt.h,{"aria-label":"Close navigation menu",tooltip:"Close menu",name:"times",onClick:gn,size:"xl",variant:"secondary"})),s.createElement("nav",{className:Me.content},s.createElement(cl.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},s.createElement("ul",{className:Me.itemList},N.map(ba=>s.createElement(id,{link:ba,onClose:gn,activeItem:L,key:ba.text})))))))),s.createElement(di.Z,{nodeRef:It,in:Nt,unmountOnExit:!0,classNames:$e.backdrop,timeout:{enter:Re,exit:0}},s.createElement("div",{ref:It,className:Me.backdrop,...ja})))}yl.displayName="NavBarMenu";const rf=(L,N)=>{const H=(N?qs.$:qs.$*2)+1;return{backdrop:(0,Ie.css)({backdropFilter:"blur(1px)",backgroundColor:L.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:N?0:qs.$,zIndex:L.zIndex.modalBackdrop,[L.breakpoints.up("md")]:{top:H}}),container:(0,Ie.css)({display:"flex",bottom:0,flexDirection:"column",left:0,marginRight:L.spacing(1.5),right:0,zIndex:L.zIndex.modal,position:"fixed",top:N?0:qs.$,backgroundColor:L.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[L.breakpoints.up("md")]:{borderRight:`1px solid ${L.colors.border.weak}`,right:"unset",top:H}}),content:(0,Ie.css)({display:"flex",flexDirection:"column",flexGrow:1,minHeight:0}),mobileHeader:(0,Ie.css)({display:"flex",justifyContent:"space-between",padding:L.spacing(1,1,1,2),borderBottom:`1px solid ${L.colors.border.weak}`,[L.breakpoints.up("md")]:{display:"none"}}),itemList:(0,Ie.css)({display:"grid",gridAutoRows:`minmax(${L.spacing(6)}, auto)`,gridTemplateColumns:`minmax(${dd}, auto)`,minWidth:dd})}},of=(L,N)=>{const H={transitionDuration:`${N}ms`,transitionTimingFunction:L.transitions.easing.easeInOut,[L.breakpoints.down("md")]:{overflow:"hidden"}},ne={...H,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},ve={...H,transitionProperty:"opacity"},Me={width:"100%",[L.breakpoints.up("md")]:{boxShadow:L.shadows.z3,width:dd}},Re={boxShadow:"none",width:0},$e={opacity:1},Ge={opacity:0};return{backdrop:{enter:(0,Ie.css)(Ge),enterActive:(0,Ie.css)(ve,$e),enterDone:(0,Ie.css)($e)},overlay:{enter:(0,Ie.css)(Re),enterActive:(0,Ie.css)(ne,Me),enterDone:(0,Ie.css)(Me)}}},ud=s.memo(({onClose:L,searchBarHidden:N})=>{const H=(0,hn.useSelector)(nt=>nt.navBarTree),ne=(0,Ze.l4)(),ve=wo(ne),Me=(0,Ms.TH)(),$e=(0,h.cloneDeep)(H).filter(nt=>nt.id!=="profile"&&nt.id!=="help").map(nt=>sl(nt,!0)),Ge=zc($e,Me.pathname);return s.createElement("div",{className:ve.menuWrapper},s.createElement(yl,{activeItem:Ge,navItems:$e,onClose:L,searchBarHidden:N}))});ud.displayName="MegaMenu";const wo=L=>({menuWrapper:(0,Ie.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:L.zIndex.sidemenu})}),md=2;function fd({item:L,isSectionRoot:N=!1,level:H=0}){const ne=(0,Ze.wW)(lf),ve=L.children?.filter(nt=>!nt.hideFromTabs),Me=N&&!!L.children[0].children?.length,Re=(0,Ie.cx)({[ne.link]:!0,[ne.activeStyle]:L.active,[ne.isSection]:H<md&&(!!ve?.length||L.isSection),[ne.isSectionRoot]:N,[ne.noRootMargin]:Me});let $e=null;L.img?$e=s.createElement("img",{"data-testid":"section-image",className:ne.sectionImg,src:L.img,alt:""}):L.icon&&($e=s.createElement(Ta.J,{"data-testid":"section-icon",className:ne.sectionImg,name:L.icon}));const Ge=()=>{(0,lr.ff)("grafana_navigation_item_clicked",{path:L.url??L.id,sectionNav:!0})};return s.createElement(s.Fragment,null,s.createElement("a",{onClick:Ge,href:L.url,className:Re,"aria-label":yn.wl.components.Tab.title(L.text),role:"tab","aria-selected":L.active},N&&$e,L.text,L.tabSuffix&&s.createElement(L.tabSuffix,{className:ne.suffix})),H<md&&ve?.map((nt,ht)=>s.createElement(fd,{item:nt,key:ht,level:H+1})))}const lf=L=>({link:(0,Ie.css)`
      padding: ${L.spacing(1,0,1,1.5)};
      display: flex;
      align-items: flex-start;
      border-radius: ${L.shape.radius.default};
      gap: ${L.spacing(1)};
      height: 100%;
      position: relative;
      color: ${L.colors.text.secondary};

      &:hover,
      &:focus {
        text-decoration: underline;
        z-index: 1;
      }
    `,activeStyle:(0,Ie.css)`
      label: activeTabStyle;
      color: ${L.colors.text.primary};
      font-weight: ${L.typography.fontWeightMedium};
      background: ${L.colors.emphasize(L.colors.background.canvas,.03)};

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: ${L.shape.radius.default};
        background-image: ${L.colors.gradients.brandVertical};
      }
    `,suffix:(0,Ie.css)`
      margin-left: ${L.spacing(1)};
    `,sectionImg:(0,Ie.css)({margin:"6px 0",width:L.spacing(2)}),isSectionRoot:(0,Ie.css)({fontSize:L.typography.h4.fontSize,marginTop:0,marginBottom:L.spacing(2),fontWeight:L.typography.fontWeightMedium}),isSection:(0,Ie.css)({color:L.colors.text.primary,fontSize:L.typography.h5.fontSize,marginTop:L.spacing(2),fontWeight:L.typography.fontWeightMedium}),noRootMargin:(0,Ie.css)({marginBottom:0})}),gd=({isExpanded:L,onClick:N})=>{const H=(0,Ze.l4)(),ne=cf(H);return s.createElement(Te.zx,{title:"Toggle section navigation","aria-label":L?"Close section navigation":"Open section navigation",icon:"arrow-to-right",className:Hs()(ne.icon,{[ne.iconExpanded]:L}),variant:"secondary",fill:"text",size:"md",onClick:N})};gd.displayName="SectionNavToggle";const cf=L=>({icon:(0,Ie.css)({alignSelf:"center",margin:L.spacing(1,0),transform:"rotate(90deg)",transition:L.transitions.create("opacity"),color:L.colors.text.secondary,zIndex:1,[L.breakpoints.up("md")]:{alignSelf:"flex-start",position:"relative",left:0,margin:L.spacing(0,0,0,1),top:L.spacing(2),transform:"none"},"div:hover > &, &:focus":{opacity:1}}),iconExpanded:(0,Ie.css)({rotate:"180deg",[L.breakpoints.up("md")]:{opacity:0,margin:0,position:"absolute",right:0,left:"initial"}})});function df({model:L}){const N=(0,Ze.wW)(mf),{isExpanded:H,onToggleSectionNav:ne}=uf();return L.main?.children?.length?s.createElement("div",{className:N.navContainer},s.createElement("nav",{className:(0,Ie.cx)(N.nav,{[N.navExpanded]:H})},s.createElement(cl.$,{showScrollIndicators:!0},s.createElement("div",{className:N.items,role:"tablist"},s.createElement(fd,{item:L.main,isSectionRoot:!0})))),s.createElement(gd,{isExpanded:H,onClick:ne})):null}function uf(){const L=(0,Ze.l4)(),N=window.matchMedia(`(max-width: ${L.breakpoints.values.lg}px)`).matches,[H,ne]=(0,dl.Z)("grafana.sectionNav.expanded",!N),[ve,Me]=(0,s.useState)(!N&&H);return(0,s.useEffect)(()=>{const $e=window.matchMedia(`(max-width: ${L.breakpoints.values.lg}px)`),Ge=nt=>Me(nt.matches?!1:H);return $e.addEventListener("change",Ge),()=>$e.removeEventListener("change",Ge)},[H,L.breakpoints.values.lg]),{isExpanded:ve,onToggleSectionNav:()=>{ne(!ve),Me(!ve)}}}const mf=L=>({navContainer:(0,Ie.css)({display:"flex",flexDirection:"column",position:"relative",[L.breakpoints.up("md")]:{flexDirection:"row"}}),nav:(0,Ie.css)({display:"flex",flexDirection:"column",background:L.colors.background.canvas,flexShrink:0,transition:L.transitions.create(["width","max-height"]),maxHeight:0,visibility:"hidden",[L.breakpoints.up("md")]:{width:0,maxHeight:"unset"}}),navExpanded:(0,Ie.css)({maxHeight:"50vh",visibility:"visible",[L.breakpoints.up("md")]:{width:"250px",maxHeight:"unset"}}),items:(0,Ie.css)({display:"flex",flexDirection:"column",padding:L.spacing(2,1,2,2),minWidth:"250px",[L.breakpoints.up("md")]:{padding:L.spacing(4.5,1,2,2)}})});var vi=e(28425),Dl=e(58047),ff=e(948),gf=e(87722),pf=e(57718),hf=e(13479),Pl=e(84766),pd=e(39599),vf=e(42335);function Ei({feedUrl:L}){const N=(0,Ze.wW)(Ef),{state:H,getNews:ne}=(0,vf.j)(L),[ve,Me]=(0,hf.Z)();return(0,s.useEffect)(()=>{ne()},[ne]),H.loading||H.error?s.createElement("div",{className:N.innerWrapper},H.loading&&s.createElement(Pl.u,{text:"Loading..."}),H.error&&H.error.message):H.value?s.createElement("div",{ref:ve},Me.width>0&&H.value.map((Re,$e)=>s.createElement(pd.S,{key:$e,index:$e,showImage:!0,width:Me.width,data:H.value})),s.createElement("div",{className:N.grot},s.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog"},s.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})))):null}const Ef=L=>({innerWrapper:(0,Ie.css)({width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),grot:(0,Ie.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:L.spacing(5,0),img:{width:"186px",height:"186px"}})});function yi({className:L}){const[N,H]=(0,ff.Z)(!1),ne=(0,Ze.wW)(hd);return s.createElement(s.Fragment,null,s.createElement(Zr.h,{className:L,onClick:H,iconOnly:!0,icon:"rss","aria-label":"News"}),N&&s.createElement(gf.d,{title:s.createElement("div",{className:ne.title},s.createElement(ui.x,{element:"h3"},(0,Ua.t)("news.title","Latest from the blog")),s.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog",className:ne.grot},s.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})),s.createElement("div",{className:ne.actions},s.createElement(Te.zx,{icon:"times",variant:"secondary",fill:"text",onClick:H,"aria-label":yn.wl.components.Drawer.General.close}))),onClose:H,size:"md"},s.createElement(Ei,{feedUrl:pf.k})))}const hd=L=>({title:(0,Ie.css)({display:"flex",alignItems:"center",justifyContent:"center",gap:L.spacing(2),borderBottom:`1px solid ${L.colors.border.weak}`}),grot:(0,Ie.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:L.spacing(2,0),img:{width:"75px",height:"75px"}}),actions:(0,Ie.css)({position:"absolute",right:L.spacing(1),top:L.spacing(2)})});function Wo({breakpoint:L,onChange:N}){(0,s.useEffect)(()=>{const H=window.matchMedia(`(min-width: ${L}px)`),ne=ve=>N(ve);return H.addEventListener("change",ne),()=>H.removeEventListener("change",ne)},[L,N])}var vd=e(72700);function yf({orgs:L,onSelectChange:N}){const H=(0,Ze.wW)(Df);return s.createElement(zo.b,{"aria-label":"Change organization",variant:"secondary",buttonCss:H.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:L.map(ne=>({label:ne.name,description:ne.role,value:ne})),onChange:N,icon:"building"})}const Df=L=>({buttonCss:(0,Ie.css)({color:L.colors.text.secondary,"&:hover":{color:L.colors.text.primary}})});function Us({orgs:L,onSelectChange:N}){const H=(0,Ze.wW)(Ed),{orgName:ne,orgId:ve,orgRole:Me}=Ha.contextSrv.user,[Re,$e]=(0,s.useState)(()=>({label:ne,value:{role:Me,orgId:ve,name:ne},description:Me})),Ge=nt=>{$e(nt),N(nt)};return s.createElement(me.Ph,{"aria-label":"Change organization",width:"auto",value:Re,prefix:s.createElement(Ta.J,{className:"prefix-icon",name:"building"}),className:H.select,options:L.map(nt=>({label:nt.name,description:nt.role,value:nt})),onChange:Ge})}const Ed=L=>({select:(0,Ie.css)({border:"none",background:"none",color:L.colors.text.secondary,"&:hover":{color:L.colors.text.primary,"& .prefix-icon":(0,Ie.css)({color:L.colors.text.primary})}})});function Gp(){const L=(0,Ze.l4)(),N=(0,hn.useDispatch)(),H=(0,hn.useSelector)(Ge=>Ge.organization.userOrgs),ne=Ge=>{Ge.value&&((0,vd.Q$)(Ge.value.orgId),A.E1.push(`/?orgId=${Ge.value.orgId}`),window.location.reload())};(0,s.useEffect)(()=>{Ha.contextSrv.isSignedIn&&N((0,vd.JE)())},[N]);const ve=L.breakpoints.values.sm,[Me,Re]=(0,s.useState)(!window.matchMedia(`(min-width: ${ve}px)`).matches);if(Wo({breakpoint:ve,onChange:Ge=>{Re(!Ge.matches)}}),H?.length<=1)return null;const $e=Me?yf:Us;return s.createElement($e,{orgs:H,onSelectChange:ne})}var Jr=e(13767);function Cl(L){const N=[];for(const H of L)H.isCreateAction&&N.push(H),H.children&&N.push(...Cl(H.children));return N}const Pf=({})=>{const L=(0,Ze.wW)(yd),N=(0,Ze.l4)(),H=(0,hn.useSelector)(ht=>ht.navBarTree),ne=N.breakpoints.values.sm,[ve,Me]=(0,s.useState)(!1),[Re,$e]=(0,s.useState)(!window.matchMedia(`(min-width: ${ne}px)`).matches),Ge=(0,s.useMemo)(()=>Cl(H),[H]);Wo({breakpoint:ne,onChange:ht=>{$e(!ht.matches)}});const nt=()=>s.createElement(Jr.v,null,Ge.map((ht,It)=>s.createElement(Jr.v.Item,{key:It,url:ht.url,label:ht.text,onClick:()=>(0,lr.ff)("grafana_menu_item_clicked",{url:ht.url,from:"quickadd"})})));return Ge.length>0?s.createElement(s.Fragment,null,s.createElement(Dl.L,{overlay:nt,placement:"bottom-end",onVisibleChange:Me},s.createElement(Zr.h,{iconOnly:!0,icon:Re?"plus-circle":"plus",isOpen:Re?void 0:ve,"aria-label":"New"})),s.createElement(qc.M,{className:L.separator})):null},yd=L=>({buttonContent:(0,Ie.css)({alignItems:"center",display:"flex"}),buttonText:(0,Ie.css)({[L.breakpoints.down("md")]:{display:"none"}}),separator:(0,Ie.css)({[L.breakpoints.down("sm")]:{display:"none"}})});function Cf(){const L=(0,Ms.TH)(),N=(0,Ze.wW)(bf),H=vi.QX.sanitizeUrl(S.u.getUrlForPartial(L,{forceLogin:"true"}));return s.createElement("a",{className:N.link,href:H,target:"_self"},"Sign in")}const bf=L=>({link:(0,Ie.css)({paddingRight:L.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var Dd=e(85001);function Pd({node:L}){const N=(0,Ze.wW)(Mf),H=sl((0,h.cloneDeep)(L),!1);return H?s.createElement(Jr.v,{header:s.createElement("div",{onClick:ne=>ne.stopPropagation(),className:N.header},s.createElement("div",null,H.text),H.subTitle&&s.createElement("div",{className:N.subTitle},H.subTitle))},H.children?.map(ne=>ne.url?s.createElement(Dd.s,{url:ne.url,label:ne.text,icon:ne.icon,target:ne.target,key:ne.id}):s.createElement(Dd.s,{icon:ne.icon,onClick:ne.onClick,label:ne.text,key:ne.id}))):null}const Mf=L=>({header:(0,Ie.css)({fontSize:L.typography.h5.fontSize,fontWeight:L.typography.h5.fontWeight,padding:L.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,Ie.css)({color:L.colors.text.secondary,fontSize:L.typography.bodySmall.fontSize})});var xf=e(53039),Sf=e(10178);function Tf(){const L=(0,Ze.l4)(),{query:N}=(0,us.useKBar)(Re=>({kbarSearchQuery:Re.searchQuery,kbarIsOpen:Re.visualState===us.VisualState.showing})),H=L.breakpoints.values.sm,[ne,ve]=(0,s.useState)(!window.matchMedia(`(min-width: ${H}px)`).matches);Wo({breakpoint:H,onChange:Re=>{ve(!Re.matches)}});const Me=()=>{N.toggle()};return ne?s.createElement(Zr.h,{iconOnly:!0,icon:"search","aria-label":(0,Ua.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:Me}):s.createElement(Cd,{onClick:Me})}function Cd({onClick:L}){const N=(0,Ze.wW)(Of),H=(0,s.useMemo)(()=>(0,Sf.vl)(),[]);return s.createElement("div",{className:N.wrapper},s.createElement("div",{className:N.inputWrapper},s.createElement("div",{className:N.prefix},s.createElement(Ta.J,{name:"search"})),s.createElement("button",{className:N.fakeInput,onClick:L},(0,Ua.t)("nav.search.placeholderCommandPalette","Search or jump to...")),s.createElement("div",{className:N.suffix},s.createElement(Ta.J,{name:"keyboard"}),s.createElement("span",{className:N.shortcut},H,"+k"))))}const Of=L=>{const N=(0,Ue.H)({theme:L});return{wrapper:N.wrapper,inputWrapper:N.inputWrapper,prefix:N.prefix,suffix:(0,Ie.css)([N.suffix,{display:"flex",gap:L.spacing(.5)}]),shortcut:(0,Ie.css)({fontSize:L.typography.bodySmall.fontSize}),fakeInput:(0,Ie.css)([N.input,{textAlign:"left",paddingLeft:28,color:L.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,Ie.css)`
          ${(0,xf.focusCss)(L)}
        `}]),button:(0,Ie.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};function bl({children:L,align:N="left"}){const H=(0,Ze.wW)(If),ve=(0,Ze.l4)().breakpoints.values.sm,[Me,Re]=(0,s.useState)(!window.matchMedia(`(min-width: ${ve}px)`).matches);return Wo({breakpoint:ve,onChange:$e=>{Re(!$e.matches)}}),Me?s.createElement(s.Fragment,null,L):s.createElement("div",{"data-testid":"wrapper",className:(0,Ie.cx)(H.wrapper,{[H[N]]:N==="right"})},L)}const If=L=>({wrapper:(0,Ie.css)({display:"flex",gap:L.spacing(.5),alignItems:"center"}),right:(0,Ie.css)({justifyContent:"flex-end"}),left:(0,Ie.css)({}),center:(0,Ie.css)({})}),Rf=s.memo(function(){const N=(0,Ze.wW)(Ml),H=(0,hn.useSelector)(Ge=>Ge.navIndex),ne=(0,Ms.TH)(),ve=(0,h.cloneDeep)(H.help),Me=ve?$c(ve):void 0,Re=H.profile;let $e=F.config.appSubUrl||"/";return!F.config.bootData.user.isSignedIn&&!F.config.anonymousEnabled&&($e=vi.QX.sanitizeUrl(S.u.getUrlForPartial(ne,{forceLogin:"true"}))),s.createElement("div",{className:N.layout},s.createElement(bl,null,s.createElement("a",{className:N.logo,href:$e,title:"Go to home"},s.createElement(Jo.c.MenuLogo,{className:N.img})),s.createElement(Gp,null)),s.createElement(bl,null,s.createElement(Tf,null)),s.createElement(bl,{align:"right"},s.createElement(Pf,null),Me&&s.createElement(Dl.L,{overlay:()=>s.createElement(Pd,{node:Me}),placement:"bottom-end"},s.createElement(Zr.h,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),F.config.newsFeedEnabled&&s.createElement(yi,null),!Na.Vt.user.isSignedIn&&s.createElement(Cf,null),Re&&s.createElement(Dl.L,{overlay:()=>s.createElement(Pd,{node:Re}),placement:"bottom-end"},s.createElement(Zr.h,{className:N.profileButton,imgSrc:Na.Vt.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}),Ml=L=>({layout:(0,Ie.css)({height:qs.$,display:"flex",gap:L.spacing(1),alignItems:"center",padding:L.spacing(0,1,0,2),borderBottom:`1px solid ${L.colors.border.weak}`,justifyContent:"space-between",[L.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,Ie.css)({height:L.spacing(3),width:L.spacing(3)}),logo:(0,Ie.css)({display:"flex"}),profileButton:(0,Ie.css)({padding:L.spacing(0,.25),img:{borderRadius:L.shape.radius.circle,height:"24px",marginRight:0,width:"24px"}})});function Af({children:L}){const{chrome:N}=(0,Wr.p)(),H=N.useState(),ne=H.searchBarHidden||H.kioskMode===hn.KioskMode.TV,ve=(0,Ze.l4)(),Me=(0,Ze.wW)(Lf),Re=(0,Ie.cx)({[Me.content]:!0,[Me.contentNoSearchBar]:ne,[Me.contentChromeless]:H.chromeless}),$e=()=>{switch(H.megaMenu){case"closed":N.setMegaMenu("open");break;case"open":N.setMegaMenu("closed");break;case"docked":window.innerWidth>ve.breakpoints.values.md?N.setMegaMenu("closed"):N.setMegaMenu("open");break}};return s.createElement("div",{className:Hs()("main-view",{"main-view--search-bar-hidden":ne&&!H.chromeless,"main-view--chrome-hidden":H.chromeless})},!H.chromeless&&s.createElement(s.Fragment,null,s.createElement(Te.Qj,{className:Me.skipLink,href:"#pageContent"},"Skip to main content"),s.createElement("div",{className:(0,Ie.cx)(Me.topNav)},!ne&&s.createElement(Rf,null),s.createElement(ef,{searchBarHidden:ne,sectionNav:H.sectionNav.node,pageNav:H.pageNav,actions:H.actions,onToggleSearchBar:N.onToggleSearchBar,onToggleMegaMenu:$e,onToggleKioskMode:N.onToggleKioskMode}))),s.createElement("main",{className:Re},s.createElement("div",{className:Me.panes},H.layout===xo.Q.Standard&&H.sectionNav&&!F.default.featureToggles.dockedMegaMenu&&s.createElement(df,{model:H.sectionNav}),F.default.featureToggles.dockedMegaMenu&&!H.chromeless&&H.megaMenu==="docked"&&s.createElement(hl,{className:Me.dockedMegaMenu,onClose:()=>N.setMegaMenu("closed")}),s.createElement("div",{className:Me.pageContainer,id:"pageContent"},L))),!H.chromeless&&s.createElement(s.Fragment,null,F.default.featureToggles.dockedMegaMenu?s.createElement(td,null):s.createElement(ud,{searchBarHidden:ne,onClose:()=>N.setMegaMenu("closed")}),s.createElement(Km,null)))}const Lf=L=>{const N=L.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 4px 8px rgb(0 0 0 / 4%)";return{content:(0,Ie.css)({display:"flex",flexDirection:"column",paddingTop:qs.$*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,Ie.css)({paddingTop:qs.$}),contentChromeless:(0,Ie.css)({paddingTop:0}),dockedMegaMenu:(0,Ie.css)({background:L.colors.background.primary,borderRight:`1px solid ${L.colors.border.weak}`,borderTop:`1px solid ${L.colors.border.weak}`,display:"none",zIndex:L.zIndex.navbarFixed,[L.breakpoints.up("md")]:{display:"block"}}),topNav:(0,Ie.css)({display:"flex",position:"fixed",zIndex:L.zIndex.navbarFixed,left:0,right:0,boxShadow:N,background:L.colors.background.primary,flexDirection:"column",borderBottom:`1px solid ${L.colors.border.weak}`}),panes:(0,Ie.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[L.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,Ie.css)({label:"page-container",flexGrow:1,minHeight:0,minWidth:0}),skipLink:(0,Ie.css)({position:"absolute",top:-1e3,":focus":{left:L.spacing(1),top:L.spacing(1),zIndex:L.zIndex.portal}})}};var Di=e(97316),bd=e(59138),xl=e(90634),Sl=e(45580);function Bf({appNotification:L,onClearNotification:N}){const H=(0,Ze.wW)(Uf);(0,Sl.Z)(()=>{setTimeout(()=>{N(L.id)},hn.timeoutMap[L.severity])});const ne=L.component||L.text||L.traceId;return s.createElement(or.b,{severity:L.severity,title:L.title,onRemove:()=>N(L.id),elevated:!0},ne&&s.createElement("div",{className:H.wrapper},s.createElement("span",null,L.component||L.text),L.traceId&&s.createElement("span",{className:H.trace},"Trace ID: ",L.traceId)))}function Uf(L){return{wrapper:(0,Ie.css)({display:"flex",flexDirection:"column"}),trace:(0,Ie.css)({fontSize:L.typography.pxToRem(10)})}}function Tl(){const L=(0,hn.useSelector)(ve=>(0,bd.vo)(ve.appNotifications)),N=(0,hn.useDispatch)(),H=(0,Ze.wW)(Md);(0,s.useEffect)(()=>{gs.Z.on(Sr.SI.alertWarning,ve=>N((0,Di.$l)((0,xl.ZR)(...ve)))),gs.Z.on(Sr.SI.alertSuccess,ve=>N((0,Di.$l)((0,xl.AT)(...ve)))),gs.Z.on(Sr.SI.alertError,ve=>N((0,Di.$l)((0,xl.t_)(...ve))))},[N]);const ne=ve=>{N((0,Di.ad)(ve))};return s.createElement("div",{className:H.wrapper},s.createElement(ua.wc,null,L.map((ve,Me)=>s.createElement(Bf,{key:`${ve.id}-${Me}`,appNotification:ve,onClearNotification:ne}))))}function Md(L){return{wrapper:(0,Ie.css)({label:"app-notifications-list",zIndex:L.zIndex.portal,minWidth:400,maxWidth:600,position:"fixed",right:6,top:88})}}var Nf=e(22344),Ol=e.n(Nf),xd=e(35521);function wf({error:L,errorInfo:N}){const H=(0,Ms.TH)(),ne=L?.name==="ChunkLoadError";return(0,s.useEffect)(()=>{ne&&H.search.indexOf("chunkNotFound")===-1&&(window.location.href=S.u.getUrlForPartial(H,{chunkNotFound:!0}))},[H,ne]),s.createElement(Fs.T,{navId:"error",layout:xo.Q.Canvas},s.createElement("div",{className:Sd()},ne&&s.createElement("div",null,s.createElement("h2",null,"Unable to find application file"),s.createElement("br",null),s.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),s.createElement("br",null),s.createElement("div",{className:"gf-form-group"},s.createElement(Te.zx,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload")),s.createElement(xd.X,{title:"Error details",error:L,errorInfo:N})),!ne&&s.createElement(xd.X,{title:"An unexpected error happened",error:L,errorInfo:N})))}const Sd=(0,So.B)(()=>(0,Ie.css)`
    width: 500px;
    margin: 64px auto;
  `);function Wf(){const L=(0,Ze.wW)(Ff);return s.createElement("div",{className:L.loadingPage},s.createElement(Pl.u,{text:"Loading..."}))}const Ff=()=>({loadingPage:(0,Ie.css)({height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function Kf(L){const{chrome:N,keybindings:H}=(0,Wr.p)();return N.setMatchedRoute(L.route),(0,s.useLayoutEffect)(()=>{H.clearAndInitGlobalBindings(L.route)},[H,L.route]),(0,s.useEffect)(()=>(Td(L.route),Od(),(0,A.GQ)("GrafanaRoute",!1,"Mounted",L.match),()=>{(0,A.GQ)("GrafanaRoute",!1,"Unmounted",L.route),Td(L.route,!0)}),[]),(0,s.useEffect)(()=>{Od(),(0,lr.sm)(),(0,A.GQ)("GrafanaRoute",!1,"Updated",L)}),(0,A.GQ)("GrafanaRoute",!1,"Rendered",L.route),s.createElement(dc.SV,null,({error:ne,errorInfo:ve})=>ne?s.createElement(wf,{error:ne,errorInfo:ve}):s.createElement(s.Suspense,{fallback:s.createElement(Wf,null)},s.createElement(L.route.component,{...L,queryParams:(0,A.Ox)(L.location.search)})))}function Vf(L){return L.pageClass?L.pageClass.split(" "):[]}function Td(L,N=!1){for(const H of Vf(L))N?document.body.classList.remove(H):document.body.classList.add(H)}function Od(){document.body.classList.remove("sidemenu-open--xs");const L=document.getElementById("tooltip");L?.parentElement?.removeChild(L);const N=document.querySelectorAll(".tooltip");for(let H=0;H<N.length;H++){const ne=N[H];ne.parentElement?.removeChild(ne)}for(const H of Ol().drops)H.destroy()}var Pi=e(3793),Id=e(16843);class $f extends s.PureComponent{constructor(){super(...arguments),this.styles=_f(_.config.theme2),this.state={},this.initListener=()=>{const N=(0,Id.gj)();N&&(this.subscription=N.getConnectionState().subscribe({next:H=>{this.setState({show:!H})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:N}=this.state;return N?!Ha.contextSrv.isSignedIn||!_.config.liveEnabled||Ha.contextSrv.user.orgRole===I.B.None?null:s.createElement("div",{className:this.styles.foot},s.createElement(or.b,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const _f=(0,So.B)(L=>({foot:(0,Ie.css)`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:(0,Ie.css)`
      max-width: 400px;
      margin: auto;
    `}));let Rd=[],Ad=[];function jp(L){Rd.push(L)}function Qp(L){Ad.push(L)}class zf extends s.Component{constructor(N){super(N),this.renderRoute=H=>{const ne=H.roles?H.roles():[];return s.createElement(Ki.CompatRoute,{exact:H.exact===void 0?!0:H.exact,sensitive:H.sensitive===void 0?!1:H.sensitive,path:H.path,key:H.path,render:ve=>ne?.length&&!ne.some(Me=>Ha.contextSrv.hasRole(Me))?s.createElement(Ms.l_,{to:"/"}):s.createElement(Kf,{...ve,route:H})})},this.state={}}async componentDidMount(){await oi(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return s.createElement(Ms.rs,null,Ac().map(N=>this.renderRoute(N)))}render(){const{app:N}=this.props,{ready:H}=this.state;(0,A.GQ)("AppWrapper",!1,"rendering");const ne=ve=>{(0,lr.ff)("command_palette_action_selected",{actionId:ve.id,actionName:ve.name})};return s.createElement(ir.Provider,{store:Ka.h},s.createElement(dc.z4,{style:"page"},s.createElement(Wr.h.Provider,{value:N.context},s.createElement(Pi.f,{value:_.config.theme2},s.createElement(us.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:ne}}},s.createElement(bo.$i,null,s.createElement(Vi.n,null),s.createElement("div",{className:"grafana-app"},s.createElement(Ms.F0,{history:A.E1.getHistory()},s.createElement(Ki.CompatRouter,null,s.createElement(Af,null,Ad.map((ve,Me)=>s.createElement(ve,{key:Me.toString()})),s.createElement(el,null),s.createElement(Tl,null),H&&this.renderRoutes(),Rd.map((ve,Me)=>s.createElement(ve,{key:Me.toString()})))))),s.createElement($f,null),s.createElement(bo.Y0,null),s.createElement(Iu.lO,null)))))))}}var Hf=e(67534),kf=e(86261),Ci=e(23062);function bi(L,N){if(L===N)return!0;if(!(L instanceof Object)||!(N instanceof Object))return!1;const H=Object.keys(L),ne=H.length;for(let ve=0;ve<ne;ve++)if(!(H[ve]in N))return!1;for(let ve=0;ve<ne;ve++)if(L[H[ve]]!==N[H[ve]])return!1;return ne===Object.keys(N).length}const Ld="grafana.navigation.docked";class Bd{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.routeChangeHandled=!0,this.state=new kf.X({chromeless:!0,sectionNav:{node:{text:(0,Ua.t)("nav.home.title","Home")},main:{text:""}},searchBarHidden:Ci.Z.getBool(this.searchBarStorageKey,!1),megaMenu:_.config.featureToggles.dockedMegaMenu&&Ci.Z.getBool(Ld,!1)?"docked":"closed",kioskMode:null,layout:xo.Q.Canvas}),this.setMegaMenu=N=>{_.config.featureToggles.dockedMegaMenu?(Ci.Z.set(Ld,N==="docked"),(0,lr.ff)("grafana_mega_menu_state",{state:N})):(0,lr.ff)("grafana_toggle_menu_clicked",{action:N==="open"?"open":"close"}),this.update({megaMenu:N})},this.onToggleSearchBar=()=>{const{searchBarHidden:N,kioskMode:H}=this.state.getValue(),ne=!N;Ci.Z.set(this.searchBarStorageKey,ne),H&&A.E1.partial({kiosk:null}),this.update({searchBarHidden:ne,kioskMode:null})},this.onToggleKioskMode=()=>{const N=this.getNextKioskMode();this.update({kioskMode:N}),A.E1.partial({kiosk:this.getKioskUrlValue(N)})}}setMatchedRoute(N){this.currentRoute!==N&&(this.currentRoute=N,this.routeChangeHandled=!1)}update(N){const H=this.state.getValue(),ne={...H};this.routeChangeHandled||(ne.actions=void 0,ne.pageNav=void 0,ne.sectionNav={node:{text:(0,Ua.t)("nav.home.title","Home")},main:{text:""}},ne.chromeless=this.currentRoute?.chromeless,ne.layout=xo.Q.Standard,this.routeChangeHandled=!0),Object.assign(ne,N),ne.chromeless=ne.kioskMode===hn.KioskMode.Full||this.currentRoute?.chromeless,this.ignoreStateUpdate(ne,H)||this.state.next(ne)}ignoreStateUpdate(N,H){return!!(bi(N,H)||(N.sectionNav!==H.sectionNav||N.pageNav!==H.pageNav)&&N.actions===H.actions&&N.layout===H.layout&&Il(N.sectionNav.node,H.sectionNav.node)&&Il(N.pageNav,H.pageNav))}useState(){return(0,Hf.Z)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),A.E1.partial({kiosk:null})}setKioskModeFromUrl(N){switch(N){case"tv":this.update({kioskMode:hn.KioskMode.TV});break;case"1":case!0:this.update({kioskMode:hn.KioskMode.Full})}}getKioskUrlValue(N){switch(N){case hn.KioskMode.TV:return"tv";case hn.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:N,searchBarHidden:H}=this.state.getValue();return H||N===hn.KioskMode.TV?(gs.Z.emit(Sr.SI.alertSuccess,[(0,Ua.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),hn.KioskMode.Full):N?null:hn.KioskMode.TV}}function Il(L,N){if(L===N)return!0;const H=L?.children?.find(ve=>ve.active),ne=N?.children?.find(ve=>ve.active);return L?.text===N?.text&&L?.url===N?.url&&H?.url===ne?.url&&Il(L?.parentItem,N?.parentItem)}var Ud=e(92756);function Gf({actions:L,children:N,info:H,pageNav:ne,layout:ve,renderTitle:Me,subTitle:Re}){const $e=(0,s.useContext)(Ji.v);return s.createElement(Fs.T,{navModel:$e.sectionNav,pageNav:ne,layout:ve,actions:L,renderTitle:Me,info:H,subTitle:Re},s.createElement(Fs.T.Contents,null,N))}var jf=e(66883),Nd=e(72707),Rl=e(32511),Or=e(25716),Yp=e(63918),Al=e(55728),Zp=e(14716),Qf=e(51575),Yf=e(53330),wd=e(84863),Zf=e(39126),Ll=e(46661),Jf=e(39138),Wd=e(63684),Fd=e(4392),Xf=e(64807),qf=e(20261),Kd=e(21969),eg=e(28308),tg=e(76895),Vd=e(63936),ng=e(939),ag=e(64058),$d=e(87805),sg=e(18095),rg=e(59983),Jp=e(84010),Xp=e(13147),qp=e(23629),eh=e(58258),th=e(23198),nh=e(72295),ah=e(99064),sh=e(1476),rh=e(60742),oh=e(96338),ih=e(86285),lh=e(45160),ch=e(12069),dh=e(88619),uh=e(3125),mh=e(24121),fh=e(84679),gh=e(87001),ph=e(40942),hh=e(85823),vh=e(99437),Eh=e(67401),yh=e(2692),Dh=e(26782),Ph=e(95687),Ch=e(35727),bh=e(94431),Mh=e(57692),og=e(60807),Bl=e(38273),ig=e(97982),lg=e(69326),cg=e(24653),dg=e(50579),ug=e(64282),mg=e(38839),fg=e(28760),gg=e(65572),_d=e(51210),pg=e(25281),hg=e(35873),vg=e(46026),Eg=e(93086),yg=e(6656),Dg=e(56962),Pg=e(36196),Cg=e(40665),bg=e(99834),Mg=e(72432),zd=e(40140),xh=e(91190),Sh=e(13214),Th=e(63180),Oh=e(75763),Ih=e(71306),Rh=e(70734),Ah=e(83916),Lh=e(11317),Bh=e(73603),xg=e(39222),Sg=e(20538),Tg=e(38811),Og=e(40599),Hd=e(95373),Ig=e(2094),Rg=e(83650),Ag=e(89368),Fo=e(73677),Lg=e(57573),Bg=e(46597),Ko=e(21102),Mi=e(77734),Vo=e(59263),Ug=e(92392),Ng=e(78747),wg=e(24548),Wg=e(88136),Fg=e(46978),Kg=e(10066),Ul=e(82585),Vg=e(53120),$g=e(54623),kd=e(93517),_g=e(43352),zg=e(28589),Hg=e(8808),Gd=e(45980),kg=e(3873),Kr=e(27704),jd=e(65418),Qd=e(20984),Gg=e(5663),Uh=e(17497),jg=e(61888),hr=e(21381),Nl=e(76755),Qg=e(49898),Yg=e(17642),wl=e(93141),Gs=e(19496),vr=e(37407),Yd=e(59403),Zg=e(47078),xi=e(27457),Jg=e(87899),Xg=e(4627),qg=e(3895),ep=e(89899),tp=e(82246),np=e(38814),ap=e(62639),sp=e(17762),rp=e(33324),Zd=e(13476),op=e(70774),ip=e(76248),co=e(44006),Jd=e(60706),lp=e(173),cp=e(11744),dp=e(45290),up=e(64223),mp=e(74662),fp=e(2293),er=e(51134),Nh=e(48937),gp=e(61746),Xd=e(61387),pp=e(59011),$o=e(34235),Wl=e(58690),qd=e(48764),hp=e(55563),vp=e(17486),Ep=e(18754),yp=e(20570),Xr=e(6887),Dp=e(1750),Pp=e(68843),Fl=e(67888),Cp=e(85592),bp=e(11863),U=e(49071),ee=e(49665),ie=e(37347),Ee=e(20863),Se=e(18747);let Ae=!1;function Ce(L,N){jf.cacheStore[N]={content:L,status:"loaded"}}function Ve(){let L="public/img/icons/";const N=typeof window<"u"&&window.__grafana_public_path__;return N&&(L=N+"img/icons/"),H=>L+H}function Je(){if(Ae)return;Ae=!0;const L=Ve();Ce(Nd,L("unicons/at.svg")),Ce(Rl,L("unicons/adjust-circle.svg")),Ce(Or,L("unicons/align-left.svg")),Ce(Yp,L("unicons/align-right.svg")),Ce(Al,L("unicons/angle-double-down.svg")),Ce(Zp,L("unicons/angle-double-right.svg")),Ce(Qf,L("unicons/angle-down.svg")),Ce(Yf,L("unicons/angle-left.svg")),Ce(wd,L("unicons/angle-right.svg")),Ce(Zf,L("unicons/angle-up.svg")),Ce(Ll,L("unicons/apps.svg")),Ce(Jf,L("unicons/arrow.svg")),Ce(Wd,L("unicons/arrow-down.svg")),Ce(Fd,L("unicons/arrow-from-right.svg")),Ce(Xf,L("unicons/arrow-left.svg")),Ce(qf,L("unicons/arrow-random.svg")),Ce(Kd,L("unicons/arrow-right.svg")),Ce(eg,L("unicons/arrow-to-right.svg")),Ce(tg,L("unicons/arrow-up.svg")),Ce(Vd,L("unicons/arrows-h.svg")),Ce(ng,L("unicons/backward.svg")),Ce(ag,L("unicons/bars.svg")),Ce($d,L("unicons/bell.svg")),Ce(sg,L("unicons/bell-slash.svg")),Ce(rg,L("unicons/bolt.svg")),Ce(Jp,L("unicons/book.svg")),Ce(Xp,L("unicons/book-open.svg")),Ce(qp,L("unicons/brackets-curly.svg")),Ce(eh,L("unicons/bug.svg")),Ce(th,L("unicons/building.svg")),Ce(nh,L("unicons/calculator-alt.svg")),Ce(ah,L("unicons/calendar-alt.svg")),Ce(sh,L("unicons/calendar-slash.svg")),Ce(rh,L("unicons/camera.svg")),Ce(oh,L("unicons/channel-add.svg")),Ce(ih,L("unicons/chart-line.svg")),Ce(lh,L("unicons/check.svg")),Ce(ch,L("unicons/check-circle.svg")),Ce(dh,L("unicons/circle.svg")),Ce(uh,L("unicons/clipboard-alt.svg")),Ce(mh,L("unicons/clock-nine.svg")),Ce(fh,L("unicons/cloud.svg")),Ce(gh,L("unicons/cloud-download.svg")),Ce(ph,L("unicons/code-branch.svg")),Ce(hh,L("unicons/cog.svg")),Ce(vh,L("unicons/columns.svg")),Ce(Eh,L("unicons/comment-alt.svg")),Ce(yh,L("unicons/comment-alt-share.svg")),Ce(Dh,L("unicons/comments-alt.svg")),Ce(Ph,L("unicons/compass.svg")),Ce(Ch,L("unicons/copy.svg")),Ce(bh,L("unicons/corner-down-right-alt.svg")),Ce(Mh,L("unicons/cube.svg")),Ce(og,L("unicons/dashboard.svg")),Ce(Bl,L("unicons/database.svg")),Ce(ig,L("unicons/document-info.svg")),Ce(lg,L("unicons/download-alt.svg")),Ce(cg,L("unicons/draggabledots.svg")),Ce(dg,L("unicons/edit.svg")),Ce(ug,L("unicons/ellipsis-v.svg")),Ce(mg,L("unicons/ellipsis-h.svg")),Ce(fg,L("unicons/envelope.svg")),Ce(gg,L("unicons/exchange-alt.svg")),Ce(_d,L("unicons/exclamation-circle.svg")),Ce(pg,L("unicons/exclamation-triangle.svg")),Ce(hg,L("unicons/external-link-alt.svg")),Ce(vg,L("unicons/eye.svg")),Ce(Eg,L("unicons/eye-slash.svg")),Ce(yg,L("unicons/file-alt.svg")),Ce(Dg,L("unicons/file-blank.svg")),Ce(Pg,L("unicons/filter.svg")),Ce(Cg,L("unicons/folder.svg")),Ce(bg,L("unicons/folder-open.svg")),Ce(Mg,L("unicons/folder-plus.svg")),Ce(zd,L("unicons/folder-upload.svg")),Ce(xh,L("unicons/forward.svg")),Ce(Sh,L("unicons/graph-bar.svg")),Ce(Th,L("unicons/history.svg")),Ce(Oh,L("unicons/history-alt.svg")),Ce(Ih,L("unicons/home-alt.svg")),Ce(Rh,L("unicons/import.svg")),Ce(Ah,L("unicons/info.svg")),Ce(Lh,L("unicons/info-circle.svg")),Ce(Bh,L("unicons/k6.svg")),Ce(xg,L("unicons/key-skeleton-alt.svg")),Ce(Sg,L("unicons/keyboard.svg")),Ce(Tg,L("unicons/link.svg")),Ce(Og,L("unicons/list-ul.svg")),Ce(Hd,L("unicons/lock.svg")),Ce(Ig,L("unicons/minus.svg")),Ce(Rg,L("unicons/minus-circle.svg")),Ce(Ag,L("unicons/mobile-android.svg")),Ce(Fo,L("unicons/monitor.svg")),Ce(Lg,L("unicons/pause.svg")),Ce(Bg,L("unicons/pen.svg")),Ce(Ko,L("unicons/play.svg")),Ce(Mi,L("unicons/plug.svg")),Ce(Vo,L("unicons/plus.svg")),Ce(Ug,L("unicons/plus-circle.svg")),Ce(Ng,L("unicons/power.svg")),Ce(wg,L("unicons/presentation-play.svg")),Ce(Wg,L("unicons/process.svg")),Ce(Fg,L("unicons/question-circle.svg")),Ce(Kg,L("unicons/repeat.svg")),Ce(Ul,L("unicons/rocket.svg")),Ce(Vg,L("unicons/rss.svg")),Ce($g,L("unicons/save.svg")),Ce(kd,L("unicons/search.svg")),Ce(_g,L("unicons/search-minus.svg")),Ce(zg,L("unicons/search-plus.svg")),Ce(Hg,L("unicons/share-alt.svg")),Ce(Gd,L("unicons/shield.svg")),Ce(kg,L("unicons/signal.svg")),Ce(Kr,L("unicons/signin.svg")),Ce(jd,L("unicons/signout.svg")),Ce(Qd,L("unicons/sitemap.svg")),Ce(Gg,L("unicons/slack.svg")),Ce(Uh,L("unicons/sliders-v-alt.svg")),Ce(jg,L("unicons/sort-amount-down.svg")),Ce(hr,L("unicons/sort-amount-up.svg")),Ce(Nl,L("unicons/square-shape.svg")),Ce(Qg,L("unicons/star.svg")),Ce(Yg,L("unicons/step-backward.svg")),Ce(wl,L("unicons/sync.svg")),Ce(Gs,L("unicons/stopwatch.svg")),Ce(vr,L("unicons/table.svg")),Ce(Yd,L("unicons/tag-alt.svg")),Ce(Zg,L("unicons/times.svg")),Ce(xi,L("unicons/trash-alt.svg")),Ce(Jg,L("unicons/unlock.svg")),Ce(Xg,L("unicons/upload.svg")),Ce(qg,L("unicons/user.svg")),Ce(ep,L("unicons/users-alt.svg")),Ce(tp,L("unicons/wrap-text.svg")),Ce(np,L("unicons/cloud-upload.svg")),Ce(ap,L("unicons/credit-card.svg")),Ce(sp,L("unicons/file-copy-alt.svg")),Ce(rp,L("unicons/fire.svg")),Ce(Zd,L("unicons/hourglass.svg")),Ce(op,L("unicons/layer-group.svg")),Ce(ip,L("unicons/layers-alt.svg")),Ce(co,L("unicons/line-alt.svg")),Ce(Jd,L("unicons/list-ui-alt.svg")),Ce(lp,L("unicons/message.svg")),Ce(cp,L("unicons/palette.svg")),Ce(dp,L("unicons/percentage.svg")),Ce(up,L("unicons/shield-exclamation.svg")),Ce(mp,L("unicons/plus-square.svg")),Ce(fp,L("unicons/x.svg")),Ce(er,L("unicons/capture.svg")),Ce(Nh,L("custom/gf-grid.svg")),Ce(gp,L("custom/gf-landscape.svg")),Ce(Xd,L("custom/gf-layout-simple.svg")),Ce(pp,L("custom/gf-portrait.svg")),Ce($o,L("custom/gf-show-context.svg")),Ce(Wl,L("custom/gf-bar-alignment-after.svg")),Ce(qd,L("custom/gf-bar-alignment-before.svg")),Ce(hp,L("custom/gf-bar-alignment-center.svg")),Ce(vp,L("custom/gf-interpolation-linear.svg")),Ce(Ep,L("custom/gf-interpolation-smooth.svg")),Ce(yp,L("custom/gf-interpolation-step-after.svg")),Ce(Xr,L("custom/gf-interpolation-step-before.svg")),Ce(Dp,L("custom/gf-logs.svg")),Ce(Pp,L("custom/gf-movepane-left.svg")),Ce(Fl,L("custom/gf-movepane-right.svg")),Ce(Cp,L("mono/favorite.svg")),Ce(bp,L("mono/grafana.svg")),Ce(U,L("mono/heart.svg")),Ce(ee,L("mono/heart-break.svg")),Ce(ie,L("mono/panel-add.svg")),Ce(Ee,L("mono/library-panel.svg")),Ce(Se,L("unicons/record-audio.svg"))}var qe=e(69307);function it(L){const N=L.target instanceof Element&&gt(L.target);if(!(L.ctrlKey||L.metaKey||L.defaultPrevented)&&N){let H=N.getAttribute("href");const ne=N.getAttribute("target");if(H&&!ne){const ve=qe.Cj.parseKeyValue(H.split("?")[1]),Me=ve.orgId&&Number(ve.orgId)!==F.config.bootData.user.orgId;if((0,A.GQ)("utils",!1,"intercepting link click",L),L.preventDefault(),H=S.u.stripBaseFromUrl(H),H[0]!=="/"||Me)if(H.indexOf("://")>0||H.indexOf("mailto:")===0||Me){window.location.href=H;return}else if(H.indexOf("#")===0){window.location.hash=H;return}else H=`/${H}`;A.E1.push(H)}}}function gt(L){for(;L!==null&&L.tagName;){if(L.tagName.toUpperCase()==="A")return L;L=L.parentElement}return null}var Ot=e(30093);function pt(L,...N){const H=(0,ir.connect)(...N)(L);return ne=>s.createElement(H,{...ne,store:Ka.h})}function Tt(L,...N){const H=(0,ir.connect)(...N)(L);return ne=>s.createElement(ir.Provider,{store:Ka.h},s.createElement(H,{...ne,store:Ka.h}))}const Ut=Tt(L=>s.createElement(s.Fragment,null,s.createElement(bo.$i,{...L},s.createElement(bo.Y0,null))));class Mt{constructor(){this.reactModalRoot=document.body,this.reactModalNode=document.createElement("div"),this.root=(0,v.s)(this.reactModalNode),this.onReactModalDismiss=()=>{this.root.render(null),this.reactModalRoot.removeChild(this.reactModalNode)}}init(){gs.Z.subscribe(ks.VJ,N=>this.showConfirmModal(N.payload)),gs.Z.subscribe(ks.Dn,N=>this.showModalReact(N.payload)),gs.Z.subscribe(B.EK,N=>(0,Ot.bY)(N.payload))}showModalReact(N){const{component:H,props:ne}=N,ve={component:H,props:{...ne,isOpen:!0,onDismiss:this.onReactModalDismiss}},Me=s.createElement((0,Pi.E)(Ut,_.config.theme2),ve);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(Me)}showConfirmModal(N){const{confirmText:H,onConfirm:ne=()=>{},onDismiss:ve,text2:Me,altActionText:Re,onAltAction:$e,noText:Ge,text:nt,text2htmlBind:ht,yesText:It="Yes",icon:Vt,title:Nt="Confirm",yesButtonVariant:sn}=N,gn={confirmText:It,confirmButtonVariant:sn,confirmationText:H,icon:Vt,title:Nt,body:nt,description:Me&&ht?vi.QX.sanitize(Me):Me,isOpen:!0,dismissText:Ge,onConfirm:()=>{ne(),this.onReactModalDismiss()},onDismiss:()=>{ve?.(),this.onReactModalDismiss()},onAlternative:$e?()=>{$e(),this.onReactModalDismiss()}:void 0,alternativeText:Re},Vn={component:ei.s,props:gn},ja=s.createElement((0,Pi.E)(Ut,_.config.theme2),Vn);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(ja)}}var _t=e(20367),an=e(42851),un=e(66841);function jt(L,N=!1){return new Promise(H=>{const ne=document.createElement("script");ne.onload=H,ne.src=L,ne.async=N,document.head.appendChild(ne)})}const bn=(0,an.h)("EchoSrv"),Xt=bn.logger;(0,un.x)("echo",void 0,bn);class vn{constructor(N){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const H of this.backends)H.flush()},this.addBackend=H=>{Xt("Adding backend",!1,H),this.backends.push(H)},this.addEvent=(H,ne)=>{const ve=this.getMeta(),Me={...H,meta:{...ve,...ne}};for(const Re of this.backends)(Re.supportedEvents.length===0||Re.supportedEvents.indexOf(Me.type)>-1)&&Re.addEvent(Me);Xt(`${H.type} event`,!1,{...H.payload,meta:Me.meta})},this.getMeta=()=>({sessionId:"",userId:Ha.contextSrv.user.id,userLogin:Ha.contextSrv.user.login,userSignedIn:Ha.contextSrv.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),path:window.location.pathname,url:window.location.href}),this.config={...this.config,...N},setInterval(this.flush,this.config.flushInterval)}}const An=(L,N)=>{(0,K.RP)().addEvent({type:K.ee.Performance,payload:{name:L,value:N}})},Nn=L=>faro?.api?.pushError(L);class In{constructor(N){this.options=N,this.buffer=[],this.supportedEvents=[K.ee.Performance],this.addEvent=H=>{this.buffer.push(H.payload)},this.flush=()=>{this.buffer.length!==0&&(_t.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var _n=e(4651);class Wn{constructor(N){this.options=N,this.supportedEvents=[K.ee.Pageview,K.ee.Interaction],this.addEvent=ve=>{window.applicationInsights&&((0,_n.Si)(ve)&&window.applicationInsights.trackPageView?.(),(0,_n.fV)(ve)&&window.applicationInsights.trackEvent?.({name:ve.payload.interactionName,properties:ve.payload.properties}))},this.flush=()=>{};const H={config:{connectionString:N.connectionString,endpointUrl:N.endpointUrl}};jt("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const ve=new window.Microsoft.ApplicationInsights.ApplicationInsights(H);window.applicationInsights=ve.loadAppInsights()})}}class la{constructor(N){this.options=N,this.supportedEvents=[K.ee.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=ve=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:ve.payload.page})},this.flush=()=>{};const H=`https://www.googletagmanager.com/gtag/js?id=${N.googleAnalyticsId}`;jt(H,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const ne={page_path:window.location.pathname};N.user&&(ne.user_id=N.user.analytics.identifier),this.googleAnalytics4SendManualPageViews=N.googleAnalytics4SendManualPageViews,window.gtag("config",N.googleAnalyticsId,ne)}}class Hn{constructor(N){this.options=N,this.supportedEvents=[K.ee.Pageview],this.trackedUserId=null,this.addEvent=ve=>{if(!window.ga)return;window.ga("set",{page:ve.payload.page}),window.ga("send","pageview");const{userSignedIn:Me,userId:Re}=ve.meta;Me&&Re!==this.trackedUserId&&(this.trackedUserId=Re,window.ga("set","userId",Re))},this.flush=()=>{};const H=`https://www.google-analytics.com/analytics${N.debug?"_debug":""}.js`;jt(H);const ne=window.ga=window.ga||function(){(ne.q=ne.q||[]).push(arguments)};ne.l=+new Date,ne("create",N.googleAnalyticsId,"auto"),ne("set","anonymizeIp",!0)}}class Sn{constructor(N){this.options=N,this.supportedEvents=[K.ee.Pageview,K.ee.Interaction,K.ee.ExperimentView],this.addEvent=Me=>{window.rudderanalytics&&((0,_n.Si)(Me)&&window.rudderanalytics.page?.(),(0,_n.fV)(Me)&&window.rudderanalytics.track?.(Me.payload.interactionName,Me.payload.properties),(0,_n.mR)(Me)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:Me.payload.experimentId,experiment_group:Me.payload.experimentGroup,experiment_variant:Me.payload.experimentVariant}))},this.flush=()=>{};const H=N.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";jt(H);const ne=window.rudderanalytics=[],ve=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let Me=0;Me<ve.length;Me++){const Re=ve[Me];ne[Re]=function($e){return function(){ne.push([$e].concat(Array.prototype.slice.call(arguments)))}}(Re)}if(window.rudderanalytics?.load?.(N.writeKey,N.dataPlaneUrl,{configUrl:N.configUrl}),N.user){const{identifier:Me,intercomIdentifier:Re}=N.user.analytics,$e={};Re&&($e.Intercom={user_hash:Re}),window.rudderanalytics?.identify?.(Me,{email:N.user.email,orgId:N.user.orgId,language:N.user.language,version:N.buildInfo.version,edition:N.buildInfo.edition},$e)}}}var na=e(2647),pa=e(19182),_a=e(30030),Za=e(73978),Va=e(55149),ka=e(9766),qn=e(91493);class Bn extends qn.d{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=_.config.buildInfo.version}send(N){(0,K.RP)().addEvent({type:K.ee.GrafanaJavascriptAgent,payload:N})}isBatched(){return!0}getIgnoreUrls(){return[]}}class Zn{constructor(N){this.options=N,this.supportedEvents=[K.ee.GrafanaJavascriptAgent],this.addEvent=ve=>{this.transports.forEach(Me=>Me.send(ve.payload))},this.flush=()=>{};const H=[];this.transports=[],N.customEndpoint&&this.transports.push(new na.V({url:N.customEndpoint,apiKey:N.apiKey})),N.errorInstrumentalizationEnabled&&H.push(new pa.w),N.consoleInstrumentalizationEnabled&&H.push(new _a.J),N.webVitalsInstrumentalizationEnabled&&H.push(new Za.P);const ne={globalObjectKey:N.globalObjectKey||"faro",preventGlobalExposure:N.preventGlobalExposure||!1,app:{version:N.buildInfo.version,environment:N.buildInfo.env},instrumentations:H,transports:[new Bn],ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],metas:[...Va.i,{session:{id:(Math.random()+1).toString(36).substring(2)}}]};this.faroInstance=(0,ka.p)(ne),N.user&&this.faroInstance.api.setUser({id:N.user.id,attributes:{orgId:String(N.user.orgId)||""}})}}var ea=e(67163),fa=e.n(ea),Oa=e(49738),Ja=e(91721),Ia=e(44951),On=e(99874),Ln=e(98928);function Kn(L){return()=>{const N=document.querySelectorAll(":hover");for(let H=N.length-1;H>0;H--){const ne=N[H];ne instanceof HTMLElement&&ne.dataset?.panelid&&L(parseInt(ne.dataset?.panelid,10))}}}class da{constructor(N,H){this.locationService=N,this.chromeService=H}clearAndInitGlobalBindings(N){fa().reset(),N.chromeless||(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g d",this.goToDashboards),this.bind("g e",this.goToExplore),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>(0,No.X)(!1)),this.bind("c r",()=>(0,No.X)(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const H=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(H&&H instanceof HTMLElement&&(H.nodeName==="INPUT"||H.nodeName==="TEXTAREA"||H.hasAttribute("data-slate-editor"))){H.blur();return}this.exit()}}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToDashboards(){this.locationService.push("/dashboards")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}showHelpModal(){gs.Z.publish(new ks.Dn({component:Vc.B}))}exit(){const N=this.locationService.getSearchObject();if(N.editview){this.locationService.partial({editview:null,editIndex:null});return}if(N.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(N.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(N.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:H}=this.chromeService.state.getValue();H&&this.chromeService.exitKioskMode(),N.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(N,H){fa().bind(N,ne=>{ne.preventDefault(),ne.stopPropagation(),ne.returnValue=!1,H.call(this)},"keydown")}bindGlobal(N,H){fa().bindGlobal(N,ne=>{ne.preventDefault(),ne.stopPropagation(),ne.returnValue=!1,H.call(this)},"keydown")}unbind(N,H){fa().unbind(N,H)}bindWithPanelId(N,H){this.bind(N,Kn(H))}setupTimeRangeBindings(N=!0){this.bind("t a",()=>{gs.Z.publish(new ks.QI({updateUrl:N}))}),this.bind("t z",()=>{gs.Z.publish(new ks.p8({scale:2,updateUrl:N}))}),this.bind("ctrl+z",()=>{gs.Z.publish(new ks.p8({scale:2,updateUrl:N}))}),this.bind("t left",()=>{gs.Z.publish(new ks.Qt({direction:ks.Im.Left,updateUrl:N}))}),this.bind("t right",()=>{gs.Z.publish(new ks.Qt({direction:ks.Im.Right,updateUrl:N}))})}setupDashboardBindings(N){this.bind("mod+o",()=>{N.graphTooltip=(N.graphTooltip+1)%3,N.events.publish(new Sr.oi),N.startRefresh()}),this.bind("mod+s",()=>{N.meta.canSave&&gs.Z.publish(new ks.Dn({component:On.d,props:{dashboard:N}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",H=>{if(N.canEditPanelById(H)){const ne=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:ne?null:H})}}),this.bindWithPanelId("v",H=>{const ne=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:ne?null:H})}),this.bindWithPanelId("p l",H=>{const ne=N.getPanelById(H),ve={...ne.options};ve.legend.showLegend?ve.legend.showLegend=!1:ve.legend.showLegend=!0,ne.updateOptions(ve)}),this.bindWithPanelId("i",H=>{this.locationService.partial({inspect:H})}),Na.Vt.hasAccessToExplore()&&this.bindWithPanelId("p x",async H=>{const ne=N.getPanelById(H),ve=await(0,Ia.H6)({queries:ne.targets,dsRef:ne.datasource,scopedVars:ne.scopedVars,timeRange:(0,Yr.$t)().timeRange()});if(ve){const Me=S.u.stripBaseFromUrl(ve);Me&&this.locationService.push(Me)}}),this.bindWithPanelId("p r",H=>{N.canEditPanelById(H)&&!(N.panelInView||N.panelInEdit)&&gs.Z.publish(new ks.Eb(H))}),this.bindWithPanelId("p d",H=>{if(N.canEditPanelById(H)){const ne=N.getPanelInfoById(H).index;N.duplicatePanel(N.panels[ne])}}),this.bindWithPanelId("p s",H=>{const ne=N.getPanelInfoById(H);gs.Z.publish(new ks.Dn({component:Ln.ShareModal,props:{dashboard:N,panel:ne?.panel}}))}),this.bind("d l",()=>{N.toggleLegendsForAll()}),this.bind("d x",()=>{N.toggleExemplarsForAll()}),this.bind("d shift+c",()=>{N.collapseRows()}),this.bind("d shift+e",()=>{N.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{N.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const ne=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+ne})}}function aa(L){if(performance)try{performance.mark(`${L}_started`)}catch(N){console.error(`[Metrics] Failed to startMeasure ${L}`,N)}}function Ca(L){if(performance)try{const N=`${L}_started`,H=`${L}_completed`,ne=`${L}_measured`;performance.mark(H);const ve=performance.measure(ne,N,H);An(`${L}_ms`,ve.duration),performance.clearMarks(N),performance.clearMarks(H),performance.clearMeasures(ne)}catch(N){console.error(`[Metrics] Failed to stopMeasure ${L}`,N)}}async function xa(){if(window.location.search.indexOf("why-render")!==-1){const{default:L}=await e.e(9093).then(e.t.bind(e,39093,23));L(React,{trackAllPureComponents:!0})}}var hs=e(35045),cs=e(74482),dr=e(69617),Ts=e(69109),Vr=e(31457),tr=e(6222),uo=e(80215),js=e(68735),nr=e(84474);const Rs=()=>new nr.q(new URL(e.p+e.u(3454),e.b));var as=e(36497),Er=e(61782);const yr=L=>new as.y(N=>{const H=L.subscribe(tr.sj(ne=>{N.next(ne)}),tr.sj(ne=>{N.error(ne)}),tr.sj(()=>{N.complete()}));return{unsubscribe:()=>{H.then(ne=>ne.unsubscribe())}}}),mo=L=>(0,Da.D)(L).pipe((0,Er.w)(N=>yr(N)));class Si{constructor(N){this.getConnectionState=()=>mo(this.centrifugeWorker.getConnectionState()),this.getDataStream=H=>mo(this.centrifugeWorker.getDataStream(H)).pipe((0,uo.Q)(js.z)),this.getQueryData=async H=>{const ne=JSON.parse(JSON.stringify(H));return this.centrifugeWorker.getQueryData(ne)},this.getPresence=H=>this.centrifugeWorker.getPresence(H),this.getStream=H=>mo(this.centrifugeWorker.getStream(H)),this.centrifugeWorker=tr.Ud(Rs()),this.centrifugeWorker.initialize(N,tr.sj(N.dataStreamSubscriberReadiness))}}var wh=e(26058),D0=e(48614),P0=e(4649),Wh=e(92743),eu=e(14191);class C0{constructor(N){this.deps=N,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=H=>{let ne;const ve=Me=>{const Re=Me.data[0];if(!ne&&!(0,eu.A1)(Re,eu.g0.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${Re?.type}`);return}switch(Re.type){case eu.g0.FullFrame:{ne=wh.Av.deserialize(Re.frame);return}case eu.g0.NewValuesSameSchema:{ne.pushNewValues(Re.values);return}}};return this.deps.centrifugeSrv.getDataStream(H).pipe((0,Pt.U)(Me=>(ve(Me),{...Me,data:[ne??wh.Av.empty()]})))},this.getStream=H=>this.deps.centrifugeSrv.getStream(H),this.getQueryData=H=>(0,Da.D)(this.deps.centrifugeSrv.getQueryData(H)).pipe((0,Er.w)(ne=>{const ve=(0,P0.z1)(ne,H.request.targets);return ve.data?.length&&ve.data.find(Re=>Re.meta?.channel)?(0,Wh.B9)(ve,H.request,Wh.PI):(0,mn.of)(ve)})),this.publish=async(H,ne)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,D0.Aj)(H),data:ne}),this.getPresence=H=>this.deps.centrifugeSrv.getPresence(H)}}function b0(){const L={appUrl:`${window.location.origin}${_.config.appSubUrl}`,orgId:Ha.contextSrv.user.orgId,orgRole:Ha.contextSrv.user.orgRole,liveEnabled:_.config.liveEnabled,dataStreamSubscriberReadiness:cs.A.ok.asObservable(),grafanaAuthToken:(0,dr.v)()},N=_.config.featureToggles["live-service-web-worker"]?new Si(L):new Ts.R(L);(0,Id.cA)(new C0({centrifugeSrv:N,backendSrv:(0,T.i)()}))}function Qy(){return getGrafanaLiveSrv()}var M0=e(56584),x0=e(95430),Os=e(72137);function Yy(L,N="extension is not a link extension"){if(!isPluginExtensionLink(L))throw new Error(N)}function Zy(L,N="extension is not a command extension config"){if(!isPluginExtensionLinkConfig(L))throw new Error(N)}function Fh(L,N){if(!I0(L,N))throw new Error(`Invalid link extension. The "path" is required and should start with "/a/${L}/" (currently: "${N}"). Skipping the extension.`)}function Kh(L){if(!U0(L))throw new Error('Invalid component extension, the "component" property needs to be a valid React component.')}function S0(L){if(!R0(L))throw new Error(`Invalid extension "${L.title}". The extensionPointId should start with either "grafana/" or "plugins/" (currently: "${L.extensionPointId}"). Skipping the extension.`)}function T0(L){if(!A0(L))throw new Error(`Invalid extension "${L.title}". The "configure" property must be a function. Skipping the extension.`)}function Vh(L,N){for(const H of N)if(!L0(L[H]))throw new Error(`Invalid extension "${L.title}". Property "${H}" must be a string and cannot be empty. Skipping the extension.`)}function O0(L,N="The provided value is a Promise."){if($h(L))throw new Error(N)}function I0(L,N){return!!(typeof N=="string"&&N.length>0&&N.startsWith(`/a/${L}/`))}function R0(L){return!!(L.extensionPointId?.startsWith("grafana/")||L.extensionPointId?.startsWith("plugins/"))}function A0(L){return L.configure?typeof L.configure=="function":!0}function L0(L){return typeof L=="string"&&L.length>0}function B0(L,N){try{if(Vh(N,["title","description","extensionPointId"]),S0(N),(0,Os.IX)(N)){if(T0(N),!N.path&&!N.onClick)return(0,Os.KE)(`Invalid extension "${N.title}". Either "path" or "onClick" is required.`),!1;N.path&&Fh(L,N.path)}return(0,Os.eP)(N)&&Kh(N.component),!0}catch(H){return H instanceof Error&&(0,Os.KE)(H.message),!1}}function $h(L){return L instanceof Promise||typeof L=="object"&&L!==null&&"then"in L&&"catch"in L}function U0(L){const N=ne=>typeof ne=="object"&&ne!==null&&"$$typeof"in ne;return typeof L=="function"||(ne=>N(ne)&&ne.$$typeof===Symbol.for("react.memo"))(L)}function N0(L){const N={};for(const{pluginId:H,extensionConfigs:ne,error:ve}of L){if(ve){(0,Os.KE)(`"${H}" plugin failed to load, skip registering its extensions.`);continue}for(const Me of ne){const{extensionPointId:Re}=Me;if(!Me||!B0(H,Me))continue;let $e={config:Me,pluginId:H};Array.isArray(N[Re])?N[Re].push($e):N[Re]=[$e]}}return(0,Os._A)(N)}var tu=e(41175),_h=e(60930),w0=e(43759),W0=e(53779),F0=e(71475);function K0(){try{return[(0,Os.CR)({title:"Add to dashboard",description:"Use the query and panel from explore and create/add it to a dashboard",extensionPointId:tu.y.ExploreToolbarAction,icon:"apps",category:"Dashboards",configure:()=>{if(Na.Vt.hasPermission(hn.AccessControlAction.DashboardsCreate)||Na.Vt.hasPermission(hn.AccessControlAction.DashboardsWrite))return{}},onClick:(L,{context:N,openModal:H})=>{H({title:(0,F0.k)(),body:({onDismiss:ne})=>s.createElement(W0.U,{onClose:ne,exploreId:N?.exploreId})})}}),(0,Os.CR)({title:"Add correlation",description:"Create a correlation from this query",extensionPointId:tu.y.ExploreToolbarAction,icon:"link",configure:L=>L?.shouldShowAddCorrelation?{}:void 0,onClick:(L,{context:N})=>{(0,Ka.WI)((0,_h.Hg)({editorMode:!0})),(0,Ka.WI)((0,w0.aA)({exploreId:N.exploreId}))}})]}catch(L){return(0,Os.KE)(`Could not configure extensions for Explore due to: "${L}"`),[]}}function V0(){return[...K0()]}const $0=({context:L,extensionPointId:N,limitPerPlugin:H,registry:ne})=>{const ve=L?(0,Os.fD)(L):{},Me=ne[N]??[],Re=[],$e={};for(const Ge of Me)try{const nt=Ge.config,{pluginId:ht}=Ge;if(H&&$e[ht]>=H)continue;if($e[ht]===void 0&&($e[ht]=0),(0,Os.IX)(nt)){const It=_0(ht,nt,ve);if(nt.configure&&It===void 0)continue;const Vt=It?.path||nt.path,Nt={id:(0,Os.lu)(ht,nt),type:tu.D.link,pluginId:ht,onClick:z0(ht,nt,ve),icon:It?.icon||nt.icon,title:It?.title||nt.title,description:It?.description||nt.description,path:(0,h.isString)(Vt)?H0(ht,Vt,nt):void 0,category:It?.category||nt.category};Re.push(Nt),$e[ht]+=1}if((0,Os.eP)(nt)){Kh(nt.component);const It={id:(0,Os.lu)(Ge.pluginId,nt),type:tu.D.component,pluginId:Ge.pluginId,title:nt.title,description:nt.description,component:nt.component};Re.push(It),$e[ht]+=1}}catch(nt){nt instanceof Error&&(0,Os.KE)(nt.message)}return{extensions:Re}};function _0(L,N,H){try{const ne=N.configure?.(H);if(ne===void 0)return;let{title:ve=N.title,description:Me=N.description,path:Re=N.path,icon:$e=N.icon,category:Ge=N.category,...nt}=ne;return O0(ne,`The configure() function for "${N.title}" returned a promise, skipping updates.`),Re&&Fh(L,Re),Vh({title:ve,description:Me},["title","description"]),Object.keys(nt).length>0&&(0,Os.KE)(`Extension "${N.title}", is trying to override restricted properties: ${Object.keys(nt).join(", ")} which will be ignored.`),{title:ve,description:Me,path:Re,icon:$e,category:Ge}}catch(ne){ne instanceof Error&&(0,Os.KE)(ne.message);return}}function z0(L,N,H){const{onClick:ne}=N;if(ne)return function(Me){try{(0,lr.ff)("ui_extension_link_clicked",{pluginId:L,extensionPointId:N.extensionPointId,title:N.title,category:N.category});const Re=ne(Me,(0,Os.Ch)(H));$h(Re)&&Re.catch($e=>{$e instanceof Error&&(0,Os.KE)($e.message)})}catch(Re){Re instanceof Error&&(0,Os.KE)(Re.message)}}}function H0(L,N,H){return qe.Cj.appendQueryToUrl(N,qe.Cj.toUrlParams({uel_pid:L,uel_epid:H.extensionPointId}))}var zh=e(13090);async function k0(L={}){aa("frontend_plugins_preload");const N=Object.values(L).filter(ne=>ne.preload),H=await Promise.all(N.map(G0));return Ca("frontend_plugins_preload"),H}async function G0(L){const{path:N,version:H,id:ne}=L;try{aa(`frontend_plugin_preload_${ne}`);const{plugin:ve}=await Zi.N$({path:N,version:H,isAngular:L.angularDetected,pluginId:ne}),{extensionConfigs:Me=[]}=ve;return{pluginId:ne,extensionConfigs:Me}}catch(ve){return console.error(`[Plugins] Failed to preload plugin: ${N} (version: ${H})`,ve),{pluginId:ne,extensionConfigs:[],error:ve}}finally{Ca(`frontend_plugin_preload_${ne}`)}}var j0=e(56989),Q0=e(5632),Hh=e(96083),kh=e(81626),Y0=e(74277),Z0=e(21853),Mp=e(34110);class J0{constructor(){this.subject=new j0.t(1)}get(){return this.subject.asObservable()}run(N){const{queries:H,timezone:ne,datasource:ve,panelId:Me,app:Re,dashboardUID:$e,timeRange:Ge,timeInfo:nt,cacheTimeout:ht,queryCachingTTL:It,maxDataPoints:Vt,scopedVars:Nt,minInterval:sn}=N;this.subscription&&this.subscription.unsubscribe();const gn={app:Re??Hh.zj.Unknown,requestId:(0,Y0.t)(),timezone:ne,panelId:Me,dashboardUID:$e,range:Ge,timeInfo:nt,interval:"",intervalMs:0,targets:(0,h.cloneDeep)(H),maxDataPoints:Vt,scopedVars:Nt||{},cacheTimeout:ht,queryCachingTTL:It,startTime:Date.now()};gn.rangeRaw=Ge.raw,(0,Da.D)(X0(ve,gn.scopedVars)).pipe((0,Q0.P)()).subscribe({next:Vn=>{gn.targets=gn.targets.map(za=>(za.datasource||(za.datasource=Vn.getRef()),za));const ja=sn?(0,Oe.J)().replace(sn,gn.scopedVars):Vn.interval,ba=kh.calculateInterval(Ge,Vt,ja);gn.scopedVars=Object.assign({},gn.scopedVars,{__interval:{text:ba.interval,value:ba.interval},__interval_ms:{text:ba.intervalMs.toString(),value:ba.intervalMs}}),gn.interval=ba.interval,gn.intervalMs=ba.intervalMs,this.subscription=(0,Mp.v7)(Vn,gn).subscribe({next:za=>{const Ns=(0,Ma.zR)(za,this.lastResult);this.lastResult=(0,Z0.C)(Ns,this.lastResult),this.subject.next(this.lastResult)}})},error:Vn=>console.error("PanelQueryRunner Error",Vn)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===Es.Gu.Loading&&this.subject.next({...this.lastResult,state:Es.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function X0(L,N){return L&&"query"in L?L:(0,d.ak)().get(L,N)}function q0(){window.grafanaRuntime={getDashboardSaveModel:()=>{const L=(0,i.h4)().getCurrent();if(L)return L.getSaveModelCloneOld()},getDashboardTimeRange:()=>{const L=(0,Yr.$t)().timeRange();return{from:L.from.valueOf(),to:L.to.valueOf(),raw:L.raw}},getPanelData:()=>{const L=(0,i.h4)().getCurrent();if(L)return L.panels.reduce((N,H)=>(N[H.id]=H.getQueryRunner().getLastResult(),N),{})}}}var ev=e(91344),Kl=e(16261),ta=e(49955),Gh=e(47635),jh=e(92811),$r=e(4778),qr=e(331);function Qh(L){return L.extended&&"infoText"in L.extended?L.extended:null}function Yh(L){return L.extended&&"dataSourceTypes"in L.extended?L.extended:null}function xp(L){return L.extended&&"dataSource"in L.extended?L.extended:null}var $a=e(45882),Vl=e(12741);const tv=(L,N)=>{const{rootStateKey:H}=N.variable;if(!H)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:Qh(qr.PF)};const{editor:ne}=(0,$a.AE)(H,L);return{extended:Qh(ne)}},nv={changeVariableDatasource:Vl.Z$},av=(0,ir.connect)(tv,nv);class sv extends s.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=N=>{this.props.changeVariableDatasource((0,ta.yQ)(this.props.variable),(0,Gh.iU)(N))}}componentDidMount(){const{rootStateKey:N}=this.props.variable;if(!N){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:N,extended:H}=this.props,ne=H?.infoText??null;return s.createElement(s.Fragment,null,s.createElement($r.e,null,"Ad-hoc options"),s.createElement(Un.g,{label:"Data source",htmlFor:"data-source-picker"},s.createElement(jh.q,{current:N.datasource,onChange:this.onDatasourceChanged,width:30,variables:!0,noDefault:!0})),ne?s.createElement(or.b,{title:ne,severity:"info"}):null)}}const rv=av(sv);var ov=e(24524);const iv={addFilter:Vl.KJ,removeFilter:Vl.ku,changeFilter:Vl.M6},lv=(0,ir.connect)(null,iv);class cv extends s.PureComponent{constructor(){super(...arguments),this.addFilter=N=>{this.props.addFilter((0,ta.yQ)(this.props.variable),N)},this.removeFilter=N=>{this.props.removeFilter((0,ta.yQ)(this.props.variable),N)},this.changeFilter=(N,H)=>{this.props.changeFilter((0,ta.yQ)(this.props.variable),{index:N,filter:H})}}render(){const{filters:N,datasource:H,baseFilters:ne}=this.props.variable;return s.createElement(ov.F,{datasource:H,filters:N,baseFilters:ne,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const Zh=lv(cv);Zh.displayName="AdHocPicker";var Jh=e(10171);const dv=L=>L.map(N=>gv(N).map(mv).join("|")),uv=L=>{if((0,h.isArray)(L))return L.map(Xh).filter(pv);const N=Xh(L);return N===null?[]:[N]};function mv(L){return L==null?"":/\|/g[Symbol.replace](L,"__gfp__")}function fv(L){return L==null?"":/__gfp__/g[Symbol.replace](L,"|")}function gv(L){return[L.key,L.operator,L.value]}function Xh(L){if(!(0,h.isString)(L)||L.length===0)return null;const N=L.split("|").map(fv);return{key:N[0],operator:N[1],value:N[2]}}function pv(L){return L!==null&&(0,h.isString)(L.value)}const qh=async()=>{},hv=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:Jh.Js,reducer:Jh.jo,picker:Zh,editor:rv,dependsOn:()=>!1,setValue:qh,setValueFromUrl:async(L,N)=>{const H=uv(N);await(0,Ka.WI)((0,Vl.Ue)((0,ta.yQ)(L),H))},updateOptions:qh,getSaveModel:L=>{const{index:N,id:H,state:ne,global:ve,rootStateKey:Me,...Re}=(0,h.cloneDeep)(L);return Re},getValueForUrl:L=>{const N=L?.filters??[];return dv(N)}});var e0=e(44722),vv=e(846),Vs=e(87842),ds=e(92101),Sp=e(23997),t0=e(8894),Ev=e(3195),nu=e(81595),yv=e(76751),Dv=e(79947),Pv=e(10752),Cv=e(81698),bv=e(34032),n0=e(54554),Ps=e(68734),Cs=e(87863),Ga=e(17174),$l=e(18266);const Mv={...Ps.Eg,type:"query",datasource:null,query:"",regex:"",sort:Ps.$U.disabled,refresh:Ps.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},xv=(L,N)=>{if(N===Ps.$U.disabled)return L;const H=Math.ceil(N/2),ne=N%2===0;return H===1?L=(0,h.sortBy)(L,"text"):H===2?L=(0,h.sortBy)(L,ve=>{if(!ve.text)return-1;const Me=ve.text.match(/.*?(\d+).*/);return!Me||Me.length<2?-1:parseInt(Me[1],10)}):H===3&&(L=(0,h.sortBy)(L,ve=>(0,h.toLower)(ve.text))),ne&&(L=L.reverse()),L},Sv=(L,N)=>{const H=[];let ne=null;N.lastIndex=0;do ne=N.exec(L),ne&&H.push(ne);while(N.global&&ne&&ne[0]!==""&&ne[0]!==void 0);return H},Tv=(L,N,H)=>{let ne,ve=[];L&&(ne=(0,ra.jO)(L));for(let Me=0;Me<H.length;Me++){const Re=H[Me];let $e=Re.text===void 0||Re.text===null?Re.value:Re.text,Ge=Re.value===void 0||Re.value===null?Re.text:Re.value;if((0,h.isNumber)(Ge)&&(Ge=Ge.toString()),(0,h.isNumber)($e)&&($e=$e.toString()),ne){const nt=Sv(Ge,ne);if(!nt.length)continue;const ht=nt.find(sn=>sn.groups&&sn.groups.value),It=nt.find(sn=>sn.groups&&sn.groups.text),Vt=nt.find(sn=>sn.length>1),Nt=nt.length>1&&Vt;if(ht||It)Ge=ht?.groups?.value??It?.groups?.text,$e=It?.groups?.text??ht?.groups?.value;else if(Nt){for(let sn=0;sn<nt.length;sn++){const gn=nt[sn];ve.push({text:gn[1],value:gn[1],selected:!1})}continue}else Vt&&($e=Vt[1],Ge=Vt[1])}ve.push({text:$e,value:Ge,selected:!1})}return ve=(0,h.uniqBy)(ve,"value"),xv(ve,N)},a0=(0,wr.oM)({name:"templating/query",initialState:$l.s,reducers:{updateVariableOptions:(L,N)=>{const{results:H,templatedRegex:ne}=N.payload.data,ve=(0,$a.ir)(L,N.payload.id);if(ve.type!=="query")return;const{includeAll:Me,sort:Re}=ve,$e=Tv(ne,Re,H);Me&&$e.unshift({text:Vs.xk,value:Vs.r2,selected:!1}),$e.length||$e.push({text:Vs.BH,value:Vs.QX,isNone:!0,selected:!1}),ve.options=$e}}}),Ov=a0.reducer,{updateVariableOptions:Iv}=a0.actions;function Rv(){return L=>L.pipe((0,Pt.U)(Av))}function Av(L){const N=L.series;if(!N||!N.length)return[];if(Uv(N))return N;const H=(0,Ma.F9)(N),ne=[];let ve=-1,Me=-1,Re=-1,$e=-1;for(const Ge of H)for(let nt=0;nt<Ge.fields.length;nt++){const ht=Ge.fields[nt],It=(0,ce.CZ)(ht,Ge,N).toLowerCase();ht.type===Y.fS.string&&Re===-1&&(Re=nt),It==="text"&&ht.type===Y.fS.string&&Me===-1&&(Me=nt),It==="value"&&ht.type===Y.fS.string&&ve===-1&&(ve=nt),It==="expandable"&&(ht.type===Y.fS.boolean||ht.type===Y.fS.number)&&$e===-1&&($e=nt)}if(Re===-1)throw new Error("Couldn't find any field of type string in the results.");for(const Ge of H)for(let nt=0;nt<Ge.length;nt++){const ht=$e!==-1?Ge.fields[$e].values[nt]:void 0,It=Ge.fields[Re].values[nt],Vt=Me!==-1?Ge.fields[Me].values[nt]:null,Nt=ve!==-1?Ge.fields[ve].values[nt]:null;if(ve===-1&&Me===-1){ne.push({text:It,value:It,expandable:ht});continue}if(ve===-1&&Me!==-1){ne.push({text:Vt,value:Vt,expandable:ht});continue}if(ve!==-1&&Me===-1){ne.push({text:Nt,value:Nt,expandable:ht});continue}ne.push({text:Vt,value:Nt,expandable:ht})}return ne}function Lv(L){return N=>N.pipe((0,Pt.U)(H=>{const{variable:ne,dispatch:ve,getTemplatedRegexFunc:Me}=L;if(!ne.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const Re=Me(ne),$e=(0,ta.Y6)(ne,{results:H,templatedRegex:Re});ve((0,Ga.mb)(ne.rootStateKey,Iv($e)))}))}function Bv(L){return N=>N.pipe((0,Eo.z)(()=>{const{dispatch:H,variable:ne,searchFilter:ve}=L;return ve?(0,mn.of)():(0,Da.D)(H((0,Cs.xQ)((0,ta.yQ)(ne))))}))}function Uv(L){if(!L)return!1;if(!L.length)return!0;const N=L[0];if((0,Ma.aY)(N))return!1;for(const H in N){if(!N.hasOwnProperty(H)||N[H]!==null&&typeof N[H]!="string"&&typeof N[H]!="number")continue;const ne=H.toLowerCase();if(ne==="text"||ne==="value")return!0}return!1}var au=e(95405);class Nv{constructor(){this.runners=[new wv,new Wv,new Fv,new Vv]}getRunnerForDatasource(N){const H=this.runners.find(ne=>ne.canRun(N));if(H)return H;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class wv{constructor(){this.type=au.j2.Legacy}canRun(N){return(0,ds.R)(N)}getTarget({datasource:N,variable:H}){if((0,ds.R)(N))return H.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:N,variable:H,searchFilter:ne,timeSrv:ve},Me){if(!(0,ds.R)(N))return _l();const Re=(0,ta.AQ)(H,ne,ve,Me.scopedVars);return(0,Da.D)(N.metricFindQuery(H.query,Re)).pipe((0,Eo.z)($e=>{if(!$e||!$e.length)return _l();const Ge=$e;return(0,mn.of)({series:Ge,state:Es.Gu.Done,timeRange:Re.range})}))}}class Wv{constructor(){this.type=au.j2.Standard}canRun(N){return(0,ds.Ju)(N)}getTarget({datasource:N,variable:H}){if((0,ds.Ju)(N))return N.variables.toDataQuery(H.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:N,runRequest:H},ne){return(0,ds.Ju)(N)?N.variables.query?H(N,ne,N.variables.query.bind(N.variables)):H(N,ne):_l()}}class Fv{constructor(){this.type=au.j2.Custom}canRun(N){return(0,ds.d7)(N)}getTarget({datasource:N,variable:H}){if((0,ds.d7)(N))return H.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:N,runRequest:H},ne){return(0,ds.d7)(N)?H(N,ne,N.variables.query.bind(N.variables)):_l()}}const Kv="variable-query";class Vv{constructor(){this.type=au.j2.Datasource}canRun(N){return(0,ds.X7)(N)}getTarget({datasource:N,variable:H}){if((0,ds.X7)(N))return{...H.query,refId:H.query.refId??Kv};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:N,runRequest:H},ne){return(0,ds.X7)(N)?H(N,ne):_l()}}function _l(){return(0,mn.of)({state:Es.Gu.Done,series:[],timeRange:(0,n0.JK)()})}class $v{constructor(N={dispatch:Ka.WI,getState:Ka.y0,getVariable:$a.E0,getTemplatedRegex:ta.gR,getTimeSrv:Yr.$t,queryRunners:new Nv,runRequest:Mp.v7}){this.dependencies=N,this.updateOptionsRequests=new Sp.x,this.updateOptionsResults=new Sp.x,this.cancelRequests=new Sp.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(N){this.updateOptionsRequests.next(N)}getResponse(N){return this.updateOptionsResults.asObservable().pipe((0,nu.h)(H=>H.identifier===N))}cancelRequest(N){this.cancelRequests.next({identifier:N})}destroy(){this.subscription.unsubscribe()}onNewRequest(N){const{datasource:H,identifier:ne,searchFilter:ve}=N;try{const{dispatch:Me,runRequest:Re,getTemplatedRegex:$e,getVariable:Ge,queryRunners:nt,getTimeSrv:ht,getState:It}=this.dependencies,Vt=(0,$a.S_)(It());this.updateOptionsResults.next({identifier:ne,state:Es.Gu.Loading});const Nt=Ge(ne,It());if(Nt.type!=="query")return;const sn=ht(),gn={variable:Nt,datasource:H,searchFilter:ve,timeSrv:sn,runRequest:Re},Vn=nt.getRunnerForDatasource(H),ja=Vn.getTarget({datasource:H,variable:Nt}),ba=this.getRequest(Nt,N,ja);Vn.runRequest(gn,ba).pipe((0,nu.h)(()=>{const za=(0,$a.S_)(It());return Vt===za}),(0,nu.h)(za=>za.state===Es.Gu.Done||za.state===Es.Gu.Error),(0,yv.q)(1),(0,Eo.z)(za=>za.state===Es.Gu.Error?(0,t0._)(()=>za.error):(0,mn.of)(za)),Rv(),Lv({variable:Nt,dispatch:Me,getTemplatedRegexFunc:$e}),Bv({variable:Nt,dispatch:Me,searchFilter:ve}),(0,Dv.R)((0,Ev.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,nu.h)(za=>{let Ns=!1;return za.identifier.id===ne.id&&(Ns=!0,this.updateOptionsResults.next({identifier:ne,state:Es.Gu.Loading,cancelled:Ns})),Ns}))),(0,Pv.K)(za=>za.cancelled?(0,mn.of)({}):(this.updateOptionsResults.next({identifier:ne,state:Es.Gu.Error,error:za}),(0,t0._)(()=>za))),(0,Cv.x)(()=>{this.updateOptionsResults.next({identifier:ne,state:Es.Gu.Done})})).subscribe()}catch(Me){this.updateOptionsResults.next({identifier:ne,state:Es.Gu.Error,error:Me})}}getRequest(N,H,ne){const{searchFilter:ve}=H,Me={variable:{text:N.current.text,value:N.current.value}},Ge={...ve?{searchFilter:{text:ve,value:ve}}:{},...Me},nt=N.refresh===Ps.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,n0.JK)();return{app:Hh.zj.Dashboard,requestId:(0,bv.Z)(),timezone:"",range:nt,interval:"",intervalMs:0,targets:[ne],scopedVars:Ge,startTime:Date.now()}}}let s0;function _v(L){s0=L}function Tp(){return s0}const zv=L=>{if(!Hv(L))return L.name;const{current:N}=L;return Array.isArray(N.text)?N.text.join(" + "):N.text},Hv=L=>Array.isArray(L?.options)||typeof L?.current=="object";var fo=(L=>(L[L.moveUp=38]="moveUp",L[L.moveDown=40]="moveDown",L[L.select=32]="select",L[L.cancel=27]="cancel",L[L.selectAndClose=13]="selectAndClose",L))(fo||{});class kv extends s.PureComponent{constructor(){super(...arguments),this.onKeyDown=N=>{if(fo[N.keyCode]&&N.keyCode!==fo.select){const H=N.ctrlKey||N.metaKey||N.shiftKey;this.props.onNavigate(N.keyCode,H),N.preventDefault()}},this.onChange=N=>{this.props.onChange(N.target.value)}}render(){const{value:N,id:H,onNavigate:ne,...ve}=this.props;return s.createElement("input",{...ve,ref:Me=>{Me&&(Me.focus(),Me.setAttribute("style",`width:${Math.max(Me.width,150)}px`))},type:"text",className:"gf-form-input",value:N??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,Ua.t)("variable.dropdown.placeholder","Enter variable value")})}}const Gv=({loading:L,disabled:N,onClick:H,text:ne,onCancel:ve,id:Me})=>{const Re=(0,Ze.wW)(o0),$e=(0,s.useCallback)(Ge=>{Ge.stopPropagation(),Ge.preventDefault(),H()},[H]);return L?s.createElement("div",{className:Re.container,"data-testid":yn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${ne}`),title:ne,id:Me},s.createElement(r0,{text:ne}),s.createElement(jv,{onCancel:ve})):s.createElement("button",{onClick:$e,className:Re.container,"data-testid":yn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${ne}`),"aria-expanded":!1,"aria-controls":`options-${Me}`,id:Me,title:ne,disabled:N},s.createElement(r0,{text:ne}),s.createElement(Ta.J,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},r0=({text:L})=>{const N=(0,Ze.wW)(o0);return s.createElement("span",{className:N.textAndTags},L===Vs.xk?(0,Ua.t)("variable.picker.link-all","All"):L)},jv=({onCancel:L})=>{const N=(0,s.useCallback)(H=>{H.preventDefault(),L()},[L]);return s.createElement(Qr.u,{content:"Cancel query"},s.createElement(Ta.J,{className:"spin-clockwise",name:"sync",size:"sm",onClick:N,"aria-label":yn.wl.components.LoadingIndicator.icon}))},o0=L=>({container:(0,Ie.css)`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${L.spacing(1)};
    background-color: ${L.components.input.background};
    border: 1px solid ${L.components.input.borderColor};
    border-radius: ${L.shape.radius.default};
    display: flex;
    align-items: center;
    color: ${L.colors.text};
    height: ${L.spacing(L.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${L.colors.action.disabledBackground};
      color: ${L.colors.action.disabledText};
      border: 1px solid ${L.colors.action.disabledBackground};
    }
  `,textAndTags:(0,Ie.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${L.spacing(.25)};
    user-select: none;
  `});class Qv extends s.PureComponent{constructor(){super(...arguments),this.onToggle=N=>H=>{const ne=H.shiftKey||H.ctrlKey||H.metaKey;this.handleEvent(H),this.props.onToggle(N,ne)},this.onToggleAll=N=>{this.handleEvent(N),this.props.onToggleAll()}}handleEvent(N){N.preventDefault(),N.stopPropagation()}render(){const{multi:N,values:H,highlightIndex:ne,selectedValues:ve,onToggle:Me,onToggleAll:Re,theme:$e,...Ge}=this.props,nt=Op($e);return s.createElement("div",{className:nt.variableValueDropdown},s.createElement("div",{className:nt.variableOptionsWrapper},s.createElement("ul",{className:nt.variableOptionsColumn,"aria-label":yn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...Ge},this.renderMultiToggle(),H.map((ht,It)=>this.renderOption(ht,It)))))}renderOption(N,H){const{highlightIndex:ne,multi:ve,theme:Me}=this.props,Re=Op(Me),$e=N.value===Vs.r2;return s.createElement("li",{key:`${N.value}`},s.createElement("button",{"data-testid":yn.wl.components.Variables.variableOption,role:"checkbox",type:"button","aria-checked":N.selected,className:(0,Ie.cx)((0,Te.gN)(Me),Re.variableOption,{[Re.highlighted]:H===ne,[Re.variableAllOption]:$e},Re.noStyledButton),onClick:this.onToggle(N)},s.createElement("span",{className:(0,Ie.cx)(Re.variableOptionIcon,{[Re.variableOptionIconSelected]:N.selected,[Re.hideVariableOptionIcon]:!ve})}),s.createElement("span",{"data-testid":yn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${N.text}`)},$e?(0,Ua.t)("variable.picker.option-all","All"):N.text)))}renderMultiToggle(){const{multi:N,selectedValues:H,theme:ne,values:ve}=this.props,Me=Op(ne),Re=ve.some(Ge=>Ge.value===Vs.r2);if(!N)return null;const $e=()=>s.createElement(Ua.cC,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return s.createElement(Qr.u,{content:$e,placement:"top"},s.createElement("button",{className:(0,Ie.cx)((0,Te.gN)(ne),Me.variableOption,Me.variableOptionColumnHeader,Me.noStyledButton,{[Me.noPaddingBotton]:Re}),role:"checkbox","aria-checked":H.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},s.createElement("span",{className:(0,Ie.cx)(Me.variableOptionIcon,{[Me.variableOptionIconManySelected]:H.length>1})}),s.createElement(Ua.cC,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",H.length,")"))}}const Op=(0,So.B)(L=>{const N=L.isDark?"public/img/checkbox.png":"public/img/checkbox_white.png";return{hideVariableOptionIcon:(0,Ie.css)({display:"none"}),highlighted:(0,Ie.css)({backgroundColor:L.colors.action.hover}),noStyledButton:(0,Ie.css)({width:"100%",textAlign:"left"}),variableOption:(0,Ie.css)({display:"block",padding:"2px 27px 0 8px",position:"relative",whiteSpace:"nowrap",minWidth:"115px",["&:hover"]:{backgroundColor:L.colors.action.hover}}),variableOptionColumnHeader:(0,Ie.css)({paddingTop:"5px",paddingBottom:"5px",marginBottom:"5px"}),variableOptionIcon:(0,Ie.css)({display:"inline-block",width:"24px",height:"18px",position:"relative",top:"4px",background:`url(${N}) left top no-repeat`}),variableOptionIconManySelected:(0,Ie.css)({background:`url(${N}) 0px -36px no-repeat`}),variableOptionIconSelected:(0,Ie.css)({background:`url(${N}) 0px -18px no-repeat`}),variableValueDropdown:(0,Ie.css)({backgroundColor:L.colors.background.primary,border:`1px solid ${L.colors.border.weak}`,borderRadius:L.shape.borderRadius(2),boxShadow:L.shadows.z2,position:"absolute",top:L.spacing(L.components.height.md),maxHeight:"400px",minHeight:"150px",minWidth:"150px",overflowY:"auto",overflowX:"hidden",zIndex:L.zIndex.typeahead}),variableOptionsColumn:(0,Ie.css)({maxHeight:"350px",display:"table-cell",lineHeight:"26px",listStyleType:"none"}),variableOptionsWrapper:(0,Ie.css)({display:"table",width:"100%"}),variableAllOption:(0,Ie.css)({borderBottom:`1px solid ${L.colors.border.weak}`,paddingBottom:L.spacing(1)}),noPaddingBotton:(0,Ie.css)({paddingBottom:0})}}),Yv=(0,Ze.HE)(Qv);var Zv=e(40729),i0=e(69084),go=e(52471),Ir=e(74557);const Jv=(L,N,H)=>async(ne,ve)=>{if(N===fo.cancel)return await ne(su(L));if(N===fo.select)return ne(Ip(L,H));if(N===fo.selectAndClose)return(0,$a.AE)(L,ve()).optionsPicker.multi?ne(Ip(L,H)):(ne(Ip(L,H,!0)),ne(su(L)));if(N===fo.moveDown)return ne((0,Ga.mb)(L,(0,Ir.Ew)(1)));if(N===fo.moveUp)return ne((0,Ga.mb)(L,(0,Ir.Ew)(-1)))},Xv=(L,N="")=>async(H,ne)=>{const{rootStateKey:ve}=L,{id:Me,queryValue:Re}=(0,$a.AE)(ve,ne()).optionsPicker,$e={id:Me,rootStateKey:ve,type:"query"},Ge=(0,$a.E0)($e,ne());if(!("options"in Ge)||(H((0,Ga.mb)(ve,(0,Ir.Ug)(N))),(0,h.trim)(Re)===(0,h.trim)(N)))return;const{query:nt,options:ht}=Ge,It=typeof nt=="string"?nt:nt.target;return(0,Zv.b)(It)?nE(H,ne,N,ve):H((0,Ga.mb)(ve,(0,Ir.ss)(ht)))},qv=async L=>{if((0,i0.Q)(L.current))return;await Kl.z.get(L.type).setValue(L,L.current,!0)},su=(L,N)=>async(H,ne)=>{const ve=(0,$a.AE)(L,ne()).optionsPicker,Me={id:ve.id,rootStateKey:L,type:"query"},Re=(0,$a.E0)(Me,ne());if(!(0,ds.eL)(Re))return;const $e={option:aE(ve)},Ge={propName:"queryValue",propValue:ve.queryValue};H((0,Ga.mb)(L,(0,go.Q8)((0,ta.Y6)(Re,$e)))),H((0,Ga.mb)(L,(0,go.Pl)((0,ta.Y6)(Re,Ge))));const nt=(0,$a.E0)(Me,ne());if((0,ds.eL)(nt)&&(H((0,Ga.mb)(L,(0,Ir.nn)())),(0,ta.N9)(Re)!==(0,ta.N9)(nt)))return N?N(nt):await qv(nt)},eE=(L,N)=>async(H,ne)=>{const{id:ve,rootStateKey:Me}=L,Re=(0,$a.AE)(Me,ne()).optionsPicker;Re.id&&Re.id!==ve&&await H(su(Me,N));const $e=(0,$a.E0)(L,ne());(0,ds.eL)($e)&&H((0,Ga.mb)(Me,(0,Ir.aN)($e)))},Ip=(L,N,H=!1)=>(ne,ve)=>{const{highlightIndex:Me,options:Re}=(0,$a.AE)(L,ve()).optionsPicker,$e=Re[Me];ne((0,Ga.mb)(L,(0,Ir._M)({option:$e,forceSelect:H,clearOthers:N})))},tE=async(L,N,H,ne)=>{try{const{id:ve}=(0,$a.AE)(ne,N()).optionsPicker,Me={id:ve,rootStateKey:ne,type:"query"},Re=(0,$a.E0)(Me,N());if(!(0,ds.eL)(Re))return;await Kl.z.get(Re.type).updateOptions(Re,H);const Ge=(0,$a.E0)(Me,N());if(!(0,ds.eL)(Ge))return;L((0,Ga.mb)(ne,(0,Ir.wF)(Ge.options)))}catch(ve){console.error(ve)}},nE=(0,h.debounce)(tE,500);function aE(L){const{options:N,selectedValues:H,queryValue:ne,multi:ve}=L;if(N.length===0&&ne&&ne.length>0)return{text:ne,value:ne,selected:!1};if(!ve)return H.find($e=>$e.selected);const Me=[],Re=[];for(const $e of H)$e.selected&&(Me.push($e.text.toString()),Re.push($e.value.toString()));return{value:Re,text:Me,selected:!0}}const zl=()=>{const L=Me=>({...(0,e0.bindActionCreators)({openOptions:eE,commitChangesToVariable:su,navigateOptions:Jv},Me),filterOrSearchOptions:(Re,$e="")=>{Me(Xv(Re,$e))},toggleAllOptions:Re=>Me((0,Ga.mb)(Re.rootStateKey,(0,Ir.iQ)())),toggleOption:(Re,$e,Ge,nt)=>Me((0,Ga.mb)(Re.rootStateKey,(0,Ir._M)({option:$e,clearOthers:Ge,forceSelect:nt})))}),N=(Me,Re)=>{const{rootStateKey:$e}=Re.variable;return $e?{picker:(0,$a.AE)($e,Me).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:Ir.yy})},H=(0,ir.connect)(N,L);class ne extends s.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,ta.yQ)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(Re,$e)=>{((0,ds.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(Re,$e)},this.onToggleSingleValueVariable=(Re,$e)=>{this.props.toggleOption((0,ta.yQ)(this.props.variable),Re,$e,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(Re,$e)=>{this.props.toggleOption((0,ta.yQ)(this.props.variable),Re,$e,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,ta.yQ)(this.props.variable))},this.onFilterOrSearchOptions=Re=>{this.props.filterOrSearchOptions((0,ta.yQ)(this.props.variable),Re)},this.onNavigate=(Re,$e)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,Re,$e)},this.onCancel=()=>{Tp().cancelRequest((0,ta.yQ)(this.props.variable))}}render(){const{variable:Re,picker:$e}=this.props,Ge=$e.id===Re.id;return s.createElement("div",{className:"variable-link-wrapper"},Ge?this.renderOptions($e):this.renderLink(Re))}renderLink(Re){const $e=zv(Re),Ge=Re.state===Es.Gu.Loading;return s.createElement(Gv,{id:Vs.IG+Re.id,text:$e,onClick:this.onShowOptions,loading:Ge,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(Re){const{id:$e}=this.props.variable;return s.createElement(vv.L,{onClick:this.onHideOptions},s.createElement(kv,{id:Vs.IG+$e,value:Re.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${$e}`}),s.createElement(Yv,{values:Re.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:Re.highlightIndex,multi:Re.multi,selectedValues:Re.selectedValues,id:`options-${$e}`}))}}const ve=H(ne);return ve.displayName="OptionsPicker",ve};var Ti=e(72396);class sE extends s.PureComponent{constructor(){super(...arguments),this.onChange=N=>{this.props.onPropChange({propName:"query",propValue:N.currentTarget.value})},this.onBlur=N=>{this.props.onPropChange({propName:"query",propValue:N.currentTarget.value,updateOptions:!0})}}render(){return s.createElement(s.Fragment,null,s.createElement($r.e,null,"Constant options"),s.createElement(Ti.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,testId:yn.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}}const rE={...Ps.Eg,type:"constant",hide:Ps.bU.hideVariable,query:"",current:{},options:[]},l0=(0,wr.oM)({name:"templating/constant",initialState:$l.s,reducers:{createConstantOptionsFromQuery:(L,N)=>{const H=(0,$a.ir)(L,N.payload.id);H.type==="constant"&&(H.options=[{text:H.query.trim(),value:H.query.trim(),selected:!1}])}}}),oE=l0.reducer,{createConstantOptionsFromQuery:iE}=l0.actions,lE=L=>async N=>{const{rootStateKey:H}=L;await N((0,Ga.mb)(H,iE((0,ta.Y6)(L)))),await N((0,Cs.xQ)(L))},cE=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:rE,reducer:oE,picker:zl(),editor:sE,dependsOn:()=>!1,setValue:async(L,N,H=!1)=>{await(0,Ka.WI)((0,Cs.Fz)((0,ta.yQ)(L),N,H))},setValueFromUrl:async(L,N)=>{await(0,Ka.WI)((0,Cs.Ci)((0,ta.yQ)(L),N))},updateOptions:async L=>{await(0,Ka.WI)(lE((0,ta.yQ)(L)))},getSaveModel:L=>{const{index:N,id:H,state:ne,global:ve,current:Me,options:Re,rootStateKey:$e,...Ge}=(0,h.cloneDeep)(L);return Ge},getValueForUrl:L=>L.current.value,beforeAdding:L=>{const{current:N,options:H,query:ne,...ve}=(0,h.cloneDeep)(L),Me={selected:!0,text:ne,value:ne};return{...ve,current:Me,options:[Me],query:ne}}});var dE=e(53461),uE=e(13026);function Rp({value:L,name:N,description:H,onChange:ne,ariaLabel:ve}){const Me=(0,dE.Me)();return s.createElement(uE.X,{id:Me,label:N,description:H,value:L,onChange:ne,"aria-label":ve})}const ru=({onMultiChanged:L,onPropChange:N,variable:H})=>{const ne=(0,s.useCallback)(Re=>{L((0,ta.yQ)(H),Re.target.checked)},[L,H]),ve=(0,s.useCallback)(Re=>{N({propName:"includeAll",propValue:Re.target.checked})},[N]),Me=(0,s.useCallback)(Re=>{N({propName:"allValue",propValue:Re.currentTarget.value})},[N]);return s.createElement(ua.wc,{spacing:"md",height:"inherit"},s.createElement(Rp,{value:H.multi,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:ne}),s.createElement(Rp,{value:H.includeAll,name:"Include All option",description:"Enables an option to include all variables",onChange:ve}),H.includeAll&&s.createElement(Ti.V,{value:H.allValue??"",onChange:Me,name:"Custom all value",placeholder:"blank = auto",testId:yn.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2}))};ru.displayName="SelectionOptionsEditor";var c0=e(54014);class mE extends s.PureComponent{constructor(){super(...arguments),this.onChange=N=>{this.props.onPropChange({propName:"query",propValue:N.currentTarget.value})},this.onSelectionOptionsChange=async({propName:N,propValue:H})=>{this.props.onPropChange({propName:N,propValue:H,updateOptions:!0})},this.onBlur=N=>{this.props.onPropChange({propName:"query",propValue:N.currentTarget.value,updateOptions:!0})}}render(){return s.createElement(s.Fragment,null,s.createElement($r.e,null,"Custom options"),s.createElement(c0.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:52,testId:yn.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),s.createElement($r.e,null,"Selection options"),s.createElement(ru,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const fE=(L,N)=>({}),gE={changeVariableMultiValue:Cs.Z7},pE=pt(mE,fE,gE),hE={...Ps.Eg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},d0=(0,wr.oM)({name:"templating/custom",initialState:$l.s,reducers:{createCustomOptionsFromQuery:(L,N)=>{const H=(0,$a.ir)(L,N.payload.id);if(H.type!=="custom")return;const{includeAll:ne,query:ve}=H,Re=(ve.match(/(?:\\,|[^,])+/g)??[]).map($e=>{$e=$e.replace(/\\,/g,",");const Ge=/^(.+)\s:\s(.+)$/g.exec($e)??[];if(Ge.length===3){const[,nt,ht]=Ge;return{text:nt.trim(),value:ht.trim(),selected:!1}}else return{text:$e.trim(),value:$e.trim(),selected:!1}});ne&&Re.unshift({text:Vs.xk,value:Vs.r2,selected:!1}),H.options=Re}}}),vE=d0.reducer,{createCustomOptionsFromQuery:EE}=d0.actions,yE=L=>async N=>{const{rootStateKey:H}=L;await N((0,Ga.mb)(H,EE((0,ta.Y6)(L)))),await N((0,Cs.xQ)(L))},DE=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:hE,reducer:vE,picker:zl(),editor:pE,dependsOn:()=>!1,setValue:async(L,N,H=!1)=>{await(0,Ka.WI)((0,Cs.Fz)((0,ta.yQ)(L),N,H))},setValueFromUrl:async(L,N)=>{await(0,Ka.WI)((0,Cs.Ci)((0,ta.yQ)(L),N))},updateOptions:async L=>{await(0,Ka.WI)(yE((0,ta.yQ)(L)))},getSaveModel:L=>{const{index:N,id:H,state:ne,global:ve,rootStateKey:Me,...Re}=(0,h.cloneDeep)(L);return Re},getValueForUrl:L=>(0,ta.HY)(L)?Vs.xk:L.current.value});var Ap=e(96134);const PE={...Ps.Eg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:Ps.Bd.onDashboardLoad},u0=(0,wr.oM)({name:"templating/datasource",initialState:$l.s,reducers:{createDataSourceOptions:(L,N)=>{const{sources:H,regex:ne}=N.payload.data,ve=[],Me=(0,$a.ir)(L,N.payload.id);if(Me.type==="datasource"){for(let Re=0;Re<H.length;Re++){const $e=H[Re];$e.meta.id===Me.query&&(CE($e,ne)&&ve.push({text:$e.name,value:$e.uid,selected:!1}),bE($e,ne)&&ve.push({text:"default",value:"default",selected:!1}))}ve.length===0&&ve.push({text:"No data sources found",value:"",selected:!1}),Me.includeAll&&ve.unshift({text:Vs.xk,value:Vs.r2,selected:!1}),Me.options=ve}}}});function CE(L,N){return N?N.exec(L.name):!0}function bE(L,N){return L.isDefault?N?N.exec("default"):!0:!1}const ME=u0.reducer,{createDataSourceOptions:xE}=u0.actions,SE=(L,N={getDatasourceSrv:d.ak})=>async(H,ne)=>{const{rootStateKey:ve}=L,Me=N.getDatasourceSrv().getList({metrics:!0,variables:!1}),Re=(0,$a.E0)(L,ne());if(Re.type!=="datasource")return;let $e;Re.regex&&($e=(0,Oe.J)().replace(Re.regex,void 0,"regex"),$e=(0,ra.jO)($e)),H((0,Ga.mb)(ve,xE((0,ta.Y6)(L,{sources:Me,regex:$e})))),await H((0,Cs.xQ)(L))},TE=(L,N={getDatasourceSrv:d.ak})=>H=>{const ne=N.getDatasourceSrv().getList({metrics:!0,variables:!0}),ve=(0,h.chain)(ne).uniqBy("meta.id").map(Me=>({text:Me.meta.name,value:Me.meta.id})).value();ve.unshift({text:"",value:""}),H((0,Ga.mb)(L,(0,qr.z7)({dataSourceTypes:ve})))},OE=(L,N)=>{const{variable:{rootStateKey:H}}=N;if(!H)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:Yh(qr.PF)};const{editor:ne}=(0,$a.AE)(H,L);return{extended:Yh(ne)}},IE={initDataSourceVariableEditor:TE,changeVariableMultiValue:Cs.Z7},RE=(0,ir.connect)(OE,IE);class AE extends s.PureComponent{constructor(){super(...arguments),this.onRegExChange=N=>{this.props.onPropChange({propName:"regex",propValue:N.currentTarget.value})},this.onRegExBlur=N=>{this.props.onPropChange({propName:"regex",propValue:N.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:N,propName:H})=>{this.props.onPropChange({propName:H,propValue:N,updateOptions:!0})},this.getSelectedDataSourceTypeValue=()=>{const{extended:N}=this.props;if(!N?.dataSourceTypes.length)return"";const H=N.dataSourceTypes.find(ve=>ve.value===this.props.variable.query);return(H?H.value:N.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=N=>{this.props.onPropChange({propName:"query",propValue:N.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:N}=this.props.variable;if(!N){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(N)}render(){const{variable:N,extended:H,changeVariableMultiValue:ne}=this.props,ve=H?.dataSourceTypes?.length?H.dataSourceTypes?.map(Re=>({value:Re.value??"",label:Re.text})):[],Me=ve.find(Re=>Re.value===N.query)??ve[0];return s.createElement(s.Fragment,null,s.createElement($r.e,null,"Data source options"),s.createElement(Ap.u,{name:"Type",value:Me,options:ve,onChange:this.onDataSourceTypeChanged,testId:yn.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),s.createElement(Ti.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,description:s.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",s.createElement("br",null),s.createElement("br",null),"Example: ",s.createElement("code",null,"/^prod/"))}),s.createElement($r.e,null,"Selection options"),s.createElement(ru,{variable:N,onPropChange:this.onSelectionOptionsChange,onMultiChanged:ne}))}}const LE=RE(AE),BE=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:PE,reducer:ME,picker:zl(),editor:LE,dependsOn:(L,N)=>L.regex?(0,ta.QI)(L.regex,N.name):!1,setValue:async(L,N,H=!1)=>{await(0,Ka.WI)((0,Cs.Fz)((0,ta.yQ)(L),N,H))},setValueFromUrl:async(L,N)=>{await(0,Ka.WI)((0,Cs.Ci)((0,ta.yQ)(L),N))},updateOptions:async L=>{await(0,Ka.WI)(SE((0,ta.yQ)(L)))},getSaveModel:L=>{const{index:N,id:H,state:ne,global:ve,rootStateKey:Me,...Re}=(0,h.cloneDeep)(L);return{...Re,options:[]}},getValueForUrl:L=>(0,ta.HY)(L)?Vs.xk:L.current.value});var UE=e(38361);const Lp=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(L=>({label:`${L}`,value:L})),m0=s.memo(({onPropChange:L,variable:N})=>{const H=nt=>{L({propName:"auto",propValue:nt.target.checked,updateOptions:!0})},ne=nt=>{L({propName:"query",propValue:nt.currentTarget.value})},ve=nt=>{L({propName:"query",propValue:nt.currentTarget.value,updateOptions:!0})},Me=nt=>{L({propName:"auto_count",propValue:nt.value,updateOptions:!0})},Re=nt=>{L({propName:"auto_min",propValue:nt.currentTarget.value,updateOptions:!0})},$e=Lp.find(nt=>nt.value===N.auto_count)??Lp[0],Ge=(0,Ze.wW)(NE);return s.createElement(s.Fragment,null,s.createElement($r.e,null,"Interval options"),s.createElement(Ti.V,{value:N.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:ne,onBlur:ve,testId:yn.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),s.createElement(Rp,{value:N.auto,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:H}),N.auto&&s.createElement("div",{className:Ge.autoFields},s.createElement(Ap.u,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:$e,options:Lp,onChange:Me,width:9}),s.createElement(Ti.V,{value:N.auto_min,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:Re,width:11})))});m0.displayName="IntervalVariableEditor";function NE(L){return{autoFields:(0,Ie.css)({marginTop:L.spacing(2),display:"flex",flexDirection:"column"})}}var wE=e(41182),Bp=e(91482);const WE=L=>async N=>{const{rootStateKey:H}=L;await N((0,Ga.mb)(H,(0,Bp.kv)((0,ta.Y6)(L)))),await N(Up(L)),await N((0,Cs.xQ)(L))},Up=(L,N={calculateInterval:kh.calculateInterval,getTimeSrv:Yr.$t,templateSrv:(0,wE.J)()})=>(H,ne)=>{const ve=(0,$a.E0)(L,ne());if(ve.type==="interval"&&ve.auto){const Me=N.calculateInterval(N.getTimeSrv().timeRange(),ve.auto_count,ve.auto_min);N.templateSrv.setGrafanaVariable("$__auto_interval_"+ve.name,Me.interval),N.templateSrv.setGrafanaVariable("$__auto_interval",Me.interval)}},FE=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:Bp.T6,reducer:Bp.vH,picker:zl(),editor:m0,dependsOn:()=>!1,setValue:async(L,N,H=!1)=>{await(0,Ka.WI)(Up((0,ta.yQ)(L))),await(0,Ka.WI)((0,Cs.Fz)((0,ta.yQ)(L),N,H))},setValueFromUrl:async(L,N)=>{await(0,Ka.WI)(Up((0,ta.yQ)(L))),await(0,Ka.WI)((0,Cs.Ci)((0,ta.yQ)(L),N))},updateOptions:async L=>{await(0,Ka.WI)(WE((0,ta.yQ)(L)))},getSaveModel:L=>{const{index:N,id:H,state:ne,global:ve,rootStateKey:Me,...Re}=(0,h.cloneDeep)(L);return Re},getValueForUrl:L=>L.current.value});var f0=e(12699);const Np=[{label:"On dashboard load",value:f0.Bd.onDashboardLoad},{label:"On time range change",value:f0.Bd.onTimeRangeChanged}];function KE({onChange:L,refresh:N}){const H=(0,Ze.l4)(),[ne,ve]=(0,s.useState)(!1);Wo({breakpoint:H.breakpoints.values.sm,onChange:Re=>{ve(!Re.matches)}});const Me=(0,s.useMemo)(()=>Np.find(Re=>Re.value===N)?.value??Np[0].value,[N]);return s.createElement(Un.g,{label:"Refresh",description:"When to update the values of this variable"},s.createElement(fe.S,{options:Np,onChange:L,value:Me,size:ne?"sm":"md"}))}const wp=[{label:"Disabled",value:Ps.$U.disabled},{label:"Alphabetical (asc)",value:Ps.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:Ps.$U.alphabeticalDesc},{label:"Numerical (asc)",value:Ps.$U.numericalAsc},{label:"Numerical (desc)",value:Ps.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:Ps.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:Ps.$U.alphabeticalCaseInsensitiveDesc}];function VE({onChange:L,sort:N}){const H=(0,s.useMemo)(()=>wp.find(ne=>ne.value===N)??wp[0],[N]);return s.createElement(Ap.u,{name:"Sort",description:"How to sort the values of this variable",value:H,options:wp,onChange:L,testId:yn.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,width:25})}var $E=e(31544),_E=e(43882),g0=e(49812);async function zE(L,N=Zi.nL){if((0,ds.d7)(L))return L.variables.editor;if((0,ds.X7)(L)){const H=await N(L.meta);if(!H.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return H.components.QueryEditor??null}return(0,ds.Ju)(L)?HE:(0,ds.R)(L)?(await N(L.meta)).components.VariableQueryEditor??g0.R:null}function HE({datasource:L,query:N,onChange:H}){const ne=(0,s.useCallback)(ve=>{H({refId:"StandardVariableQuery",query:ve})},[H]);return s.createElement(g0.R,{query:N.query,onChange:ne,datasource:L,templateSrv:(0,Oe.J)()})}function kE(L,N,H){return{next:ve=>{if(ve.state===Es.Gu.Error){H.unsubscribe(),N(ve.error);return}if(ve.state===Es.Gu.Done){H.unsubscribe(),L();return}},error:ve=>{H.unsubscribe(),N(ve)},complete:()=>{H.unsubscribe(),L()}}}const GE=(L,N)=>async(H,ne)=>{try{const{rootStateKey:ve}=L;if(!(0,ta.A3)(ve,ne()))return;const Me=(0,$a.E0)(L,ne());if(Me.type!=="query")return;(0,$a.AE)(ve,ne()).editor.id===Me.id&&H((0,Ga.mb)(ve,(0,qr.PV)({errorProp:"update"})));const Re=await(0,V.F)().get(Me.datasource??"");await new Promise(($e,Ge)=>{const nt=new $E.w0,ht=kE($e,Ge,nt),It=Tp().getResponse(L).subscribe(ht);nt.add(It),Tp().queueRequest({identifier:L,datasource:Re,searchFilter:N})})}catch(ve){if(ve instanceof Error){const Me=(0,_E.P)(ve),{rootStateKey:Re}=L;throw(0,$a.AE)(Re,ne()).editor.id===L.id&&H((0,Ga.mb)(Re,(0,qr.Sg)({errorProp:"update",errorText:Me.message}))),Me}}},jE=L=>async(N,H)=>{const ne=(0,$a.E0)(L,H());ne.type==="query"&&await N(p0((0,ta.yQ)(ne),ne.datasource))},p0=(L,N)=>async(H,ne)=>{try{const{rootStateKey:ve}=L,{editor:Me}=(0,$a.AE)(ve,ne()),$e=xp(Me)?.dataSource,Ge=await(0,V.F)().get(N??"");$e&&$e.type!==Ge?.type&&H((0,Ga.mb)(ve,(0,go.Pl)((0,ta.Y6)(L,{propName:"query",propValue:""}))));const nt=await zE(Ge);H((0,Ga.mb)(ve,(0,qr.z7)({dataSource:Ge,VariableQueryEditor:nt})))}catch(ve){console.error(ve)}},QE=(L,N,H)=>async(ne,ve)=>{const{rootStateKey:Me}=L,Re=(0,$a.E0)(L,ve());if(Re.type==="query"){if(YE(Re.name,N)){const $e="Query cannot contain a reference to itself. Variable: $"+Re.name;ne((0,Ga.mb)(Me,(0,qr.Sg)({errorProp:"query",errorText:$e})));return}ne((0,Ga.mb)(Me,(0,qr.PV)({errorProp:"query"}))),ne((0,Ga.mb)(Me,(0,go.Pl)((0,ta.Y6)(L,{propName:"query",propValue:N})))),H!==void 0?ne((0,Ga.mb)(Me,(0,go.Pl)((0,ta.Y6)(L,{propName:"definition",propValue:H})))):typeof N=="string"&&ne((0,Ga.mb)(Me,(0,go.Pl)((0,ta.Y6)(L,{propName:"definition",propValue:N})))),await ne((0,Cs.Rk)(L))}};function YE(L,N){if(typeof N=="string"&&N.match(new RegExp("\\$"+L+"(/| |$)")))return!0;const H=h0(N);for(let ne in H)if(H.hasOwnProperty(ne)){const ve=H[ne];if(typeof ve=="string"&&ve.match(new RegExp("\\$"+L+"(/| |$)")))return!0}return!1}function h0(L){return typeof L!="object"||L===null?{query:L}:Object.keys(L).reduce((ne,ve)=>{const Me=L[ve];if(typeof Me!="object"||Me===null)return ne[ve]=Me,ne;const Re=h0(Me);for(let $e in Re)Re.hasOwnProperty($e)&&(ne[`${ve}_${$e}`]=Re[$e]);return ne},{})}const ZE=(L,N)=>{const{rootStateKey:H}=N.variable;if(!H)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:xp(qr.PF)};const{editor:ne}=(0,$a.AE)(H,L);return{extended:xp(ne)}},JE={initQueryVariableEditor:jE,changeQueryVariableDataSource:p0,changeQueryVariableQuery:QE,changeVariableMultiValue:Cs.Z7},XE=(0,ir.connect)(ZE,JE);class qE extends s.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=N=>{this.props.onPropChange({propName:"datasource",propValue:N.isDefault?null:(0,Gh.iU)(N)})},this.onLegacyQueryChange=async(N,H)=>{this.props.variable.query!==N&&this.props.changeQueryVariableQuery((0,ta.yQ)(this.props.variable),N,H)},this.onQueryChange=async N=>{if(this.props.variable.query!==N){let H="";N&&N.hasOwnProperty("query")&&typeof N.query=="string"&&(H=N.query),this.props.changeQueryVariableQuery((0,ta.yQ)(this.props.variable),N,H)}},this.onRegExChange=N=>{this.setState({regex:N.currentTarget.value})},this.onRegExBlur=async N=>{const H=N.currentTarget.value;this.props.variable.regex!==H&&this.props.onPropChange({propName:"regex",propValue:H,updateOptions:!0})},this.onRefreshChange=N=>{this.props.onPropChange({propName:"refresh",propValue:N})},this.onSortChange=async N=>{this.props.onPropChange({propName:"sort",propValue:N.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:N,propName:H})=>{this.props.onPropChange({propName:H,propValue:N,updateOptions:!0})},this.renderQueryEditor=()=>{const{extended:N,variable:H}=this.props;if(!N||!N.dataSource||!N.VariableQueryEditor)return null;const ne=N.dataSource,ve=N.VariableQueryEditor;let Me=H.query;if(typeof Me=="string"?Me=Me||(ne.variables?.getDefaultQuery?.()??""):Me={...ne.variables?.getDefaultQuery?.(),...H.query},(0,ds.NX)(ve,ne))return s.createElement(ge.x,{marginBottom:2},s.createElement(ui.x,{element:"h4"},"Query"),s.createElement(ge.x,{marginTop:1},s.createElement(ve,{key:ne.uid,datasource:ne,query:Me,templateSrv:(0,Oe.J)(),onChange:this.onLegacyQueryChange})));const Re=(0,Yr.$t)().timeRange();return(0,ds.$7)(ve,ne)?s.createElement(ge.x,{marginBottom:2},s.createElement(ui.x,{element:"h4"},"Query"),s.createElement(ge.x,{marginTop:1},s.createElement(ve,{key:ne.uid,datasource:ne,query:Me,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:Es.Gu.Done,timeRange:Re},range:Re,onBlur:()=>{},history:[]}))):null}}async componentDidMount(){await this.props.initQueryVariableEditor((0,ta.yQ)(this.props.variable))}componentDidUpdate(N){N.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,ta.yQ)(this.props.variable),this.props.variable.datasource)}render(){return s.createElement(s.Fragment,null,s.createElement($r.e,null,"Query options"),s.createElement(Un.g,{label:"Data source",htmlFor:"data-source-picker"},s.createElement(jh.q,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0,width:30})),this.renderQueryEditor(),s.createElement(c0.W,{value:this.state.regex??this.props.variable.regex,name:"Regex",description:s.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",s.createElement("br",null),"Named capture groups can be used to separate the display text and value (",s.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,testId:yn.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),s.createElement(VE,{onChange:this.onSortChange,sort:this.props.variable.sort}),s.createElement(KE,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh}),s.createElement($r.e,null,"Selection options"),s.createElement(ru,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const ey=XE(qE),ty=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:Mv,reducer:Ov,picker:zl(),editor:ey,dependsOn:(L,N)=>(0,ta.QI)(L.query,L.datasource?.uid,L.regex,N.name),setValue:async(L,N,H=!1)=>{await(0,Ka.WI)((0,Cs.Fz)((0,ta.yQ)(L),N,H))},setValueFromUrl:async(L,N)=>{await(0,Ka.WI)((0,Cs.Ci)((0,ta.yQ)(L),N))},updateOptions:async(L,N)=>{await(0,Ka.WI)(GE((0,ta.yQ)(L),N))},getSaveModel:L=>{const{index:N,id:H,state:ne,global:ve,queryValue:Me,rootStateKey:Re,...$e}=(0,h.cloneDeep)(L);return L.refresh!==Ps.Bd.never?{...$e,options:[]}:$e},getValueForUrl:L=>(0,ta.HY)(L)?Vs.xk:L.current.value}),ny=()=>({id:"system",description:"",name:"system",initialState:{...Ps.Eg,type:"system",hide:Ps.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:Es.Gu.Done},reducer:(L,N)=>L,picker:null,editor:null,dependsOn:()=>!1,setValue:async(L,N,H=!1)=>{},setValueFromUrl:async(L,N)=>{},updateOptions:async L=>{},getSaveModel:L=>({}),getValueForUrl:L=>""});function ay({onPropChange:L,variable:{query:N}}){const H=(0,s.useCallback)((Me,Re)=>{Me.preventDefault(),L({propName:"originalQuery",propValue:Me.currentTarget.value,updateOptions:!1}),L({propName:"query",propValue:Me.currentTarget.value,updateOptions:Re})},[L]),ne=(0,s.useCallback)(Me=>H(Me,!1),[H]),ve=(0,s.useCallback)(Me=>H(Me,!0),[H]);return s.createElement(s.Fragment,null,s.createElement($r.e,null,"Text options"),s.createElement(Ti.V,{value:N,name:"Default value",placeholder:"default value, if any",onChange:ne,onBlur:ve,width:30,testId:yn.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function sy({variable:L,onVariableChange:N,readOnly:H}){const ne=(0,hn.useDispatch)(),[ve,Me]=(0,s.useState)(L.current.value);(0,s.useEffect)(()=>{Me(L.current.value)},[L]);const Re=(0,s.useCallback)(()=>{if(!L.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(L.current.value!==ve){if(ne((0,Ga.mb)(L.rootStateKey,(0,go.Pl)((0,ta.Y6)({id:L.id,type:L.type},{propName:"query",propValue:ve})))),N){N({...L,current:(0,i0.Q)(L.current)?{}:{...L.current,value:ve}});return}Kl.z.get(L.type).updateOptions(L)}},[L,ve,ne,N]),$e=(0,s.useCallback)(ht=>Me(ht.target.value),[Me]),Ge=ht=>Re(),nt=ht=>{ht.keyCode===13&&(ht.preventDefault(),Re())};return s.createElement(Ue.I,{type:"text",value:ve,onChange:$e,onBlur:Ge,disabled:H,onKeyDown:nt,placeholder:(0,Ua.t)("variable.textbox.placeholder","Enter variable value"),id:Vs.IG+L.id})}const ry={...Ps.Eg,type:"textbox",query:"",current:{},options:[],originalQuery:null},v0=(0,wr.oM)({name:"templating/textbox",initialState:$l.s,reducers:{createTextBoxOptions:(L,N)=>{const H=(0,$a.ir)(L,N.payload.id);if(H.type!=="textbox")return;const ne={text:H.query.trim(),value:H.query.trim(),selected:!1};H.options=[ne],H.current=ne}}}),oy=v0.reducer,{createTextBoxOptions:iy}=v0.actions,ly=L=>async(N,H)=>{const{rootStateKey:ne,type:ve}=L;N((0,Ga.mb)(ne,iy((0,ta.Y6)(L))));const Me=(0,$a.E0)(L,H());Me.type==="textbox"&&await Kl.z.get(ve).setValue(Me,Me.options[0],!0)},cy=(L,N)=>async(H,ne)=>{const{rootStateKey:ve}=L,Me=(0,$a.E0)(L,ne());if(Me.type!=="textbox")return;const Re=(0,ta.Hi)(N);H((0,Ga.mb)(ve,(0,go.Pl)((0,ta.Y6)(Me,{propName:"query",propValue:Re})))),await H((0,Cs.Ci)((0,ta.yQ)(Me),Re))},dy=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:ry,reducer:oy,picker:sy,editor:ay,dependsOn:(L,N)=>!1,setValue:async(L,N,H=!1)=>{await(0,Ka.WI)((0,Cs.Fz)((0,ta.yQ)(L),N,H))},setValueFromUrl:async(L,N)=>{await(0,Ka.WI)(cy((0,ta.yQ)(L),N))},updateOptions:async L=>{await(0,Ka.WI)(ly((0,ta.yQ)(L)))},getSaveModel:(L,N)=>{const{index:H,id:ne,state:ve,global:Me,originalQuery:Re,rootStateKey:$e,...Ge}=(0,h.cloneDeep)(L);if(L.query!==Re&&!N){const nt=Re??"",ht={selected:!1,text:nt,value:nt};return{...Ge,query:nt,current:ht,options:[ht]}}return Ge},getValueForUrl:L=>L.current.value,beforeAdding:L=>({...(0,h.cloneDeep)(L),originalQuery:L.query})});var uy=e(60952),Wp=e(79779),Fp=e(46347),Kp=e(27587),my=e(71707);const fy={navBarTree:my.V4,navIndex:fi.G4,appNotifications:bd.VW};var gy=e(3818),py=e(71854),hy=e(80358),vy=e(26071),Ey=e(65158),yy=e(91507),Dy=e(795),Py=e(96483),Cy=e(347),by=e(91969),My=e(81813),xy=e(25430),Sy=e(33567),Ty=e(2263),Oy=e(16920),Iy=e(2322),Ry=e(92258),Ay=e(98557),Ly=e(74311),Vp=e(20584),By=e(43686);const Uy={...fy,...py.ZP,...Ay.ZP,...hy.ZP,...Cy.ZP,...Dy.ZP,..._h.ZP,...Py.ZP,...Ly.ZP,...Iy.ZP,...Oy.ZP,...by.ZP,...xy.ZP,...Ey.ZP,...gy.ZP,...My.ZP,...yy.ZP,...Sy.ZP,...Ga.ZP,...Ry.ZP,...vy.ZP,plugins:Ty.I6,[Vp.C.reducerPath]:Vp.C.reducer,[Kp.Rh.reducerPath]:Kp.Rh.reducer,[Fp.Zi.reducerPath]:Fp.Zi.reducer,[Wp.ep.reducerPath]:Wp.ep.reducer},E0={},Jy=L=>{Object.assign(E0,L)},Ny=()=>{const L=(0,e0.combineReducers)({...Uy,...E0});return(N,H)=>{if(H.type!==By.e.type)return L(N,H);const{cleanupAction:ne}=H.payload;return ne(N),L(N,H)}};function Xy(L){addReducer(L)}const wy=(0,wr.e)();function Wy(L){const N=(0,wr.xC)({reducer:Ny(),middleware:H=>H({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(wy.middleware,Vp.C.middleware,Kp.Rh.middleware,Fp.Zi.middleware,Wp.ep.middleware),devTools:!1,preloadedState:{navIndex:(0,fi.Cu)(),...L}});return(0,uy.sj)(N.dispatch),(0,Ka.PQ)(N),N}y().move=k.R;const y0=e(72866),ou=y0.keys().map(L=>y0(L));class Fy{async init(){try{parent.postMessage("GrafanaAppInit","*");const N=(0,Ua.uC)(F.default.bootData.user.language);(0,T.jW)(_t.ae),$y(),Je(),aa("frontend_app_init"),_y(),(0,C.i_)(F.default.bootData.user.locale),(0,C.Ls)(F.default.bootData.user.weekStart),(0,G.L)(x0.$),(0,Q.t)(Gf),(0,z.$)(M0.Z),(0,O.x)(A.E1),(0,D.K)(()=>F.default.bootData.user.timezone),b0(),(0,hs.initAuthConfig)(),(0,B.Xw)(gs.Z),await N,Ky(),Wy(),Vy(),M.S.setInit(Ud.u),M.N.setInit(Ud.l),P.Z.setInit(Tu),Kl.z.setInit(()=>[ty(),DE(),dy(),cE(),BE(),FE(),hv(),ny()]),x.F.setInit(Co),(0,b.pD)(()=>new J0),_v(new $v),(0,b.Iw)(Mp.v7),(0,W.Qf)({importPanelPlugin:zh.Ub,getPanelPluginFromCache:zh.q1}),S.u.initialize({config:F.default,getTimeRangeForUrl:(0,Yr.$t)().timeRangeForUrl,getVariablesUrlParams:UE.c}),document.addEventListener("click",it);const H=new d.ND;H.init(F.default.datasources,F.default.defaultDatasource),(0,V.w)(H),q0(),new Mt().init();const ve=await k0(F.default.apps),Me=N0([{pluginId:"grafana",extensionConfigs:V0()},...ve]),Re=It=>$0({...It,registry:Me});(0,w.oI)(Re);const $e=A.E1.getSearchObject(),Ge=new Bd,nt=new da(A.E1,Ge);Ge.setKioskModeFromUrl($e.kiosk);try{(0,ev.rb)()}catch(It){console.warn("Failed to clean up old expanded folders",It)}this.context={backend:_t.ae,location:A.E1,chrome:Ge,keybindings:nt,config:F.default},(0,v.s)(document.getElementById("reactRoot")).render(s.createElement(zf,{app:this}))}catch(N){console.error("Failed to start Grafana",N),window.__grafana_load_failed()}finally{Ca("frontend_app_init")}}}function Ky(){ou.length>0&&ou[0].addExtensionReducers()}function Vy(){ou.length>0&&ou[0].init()}function $y(){(0,K.tz)(new vn({debug:!1})),window.addEventListener("load",L=>{const N="frontend_boot_load_time_seconds",H="frontend_boot_js_done_time_seconds",ne="frontend_boot_css_time_seconds";performance&&(performance.mark(N),Hl("first-paint","frontend_boot_","_time_seconds"),Hl("first-contentful-paint","frontend_boot_","_time_seconds"),Hl(N),Hl(H),Hl(ne))}),Ha.contextSrv.user.orgRole!==I.B.None&&(0,K.e6)(new In({})),F.default.grafanaJavascriptAgent.enabled&&(0,K.e6)(new Zn({...F.default.grafanaJavascriptAgent,app:{version:F.default.buildInfo.version,environment:F.default.buildInfo.env},buildInfo:F.default.buildInfo,user:{id:String(F.default.bootData.user?.id),email:F.default.bootData.user?.email}})),F.default.googleAnalyticsId&&(0,K.e6)(new Hn({googleAnalyticsId:F.default.googleAnalyticsId})),F.default.googleAnalytics4Id&&(0,K.e6)(new la({googleAnalyticsId:F.default.googleAnalytics4Id,googleAnalytics4SendManualPageViews:F.default.googleAnalytics4SendManualPageViews})),F.default.rudderstackWriteKey&&F.default.rudderstackDataPlaneUrl&&(0,K.e6)(new Sn({writeKey:F.default.rudderstackWriteKey,dataPlaneUrl:F.default.rudderstackDataPlaneUrl,user:F.default.bootData.user,sdkUrl:F.default.rudderstackSdkUrl,configUrl:F.default.rudderstackConfigUrl,buildInfo:F.default.buildInfo})),F.default.applicationInsightsConnectionString&&(0,K.e6)(new Wn({connectionString:F.default.applicationInsightsConnectionString,endpointUrl:F.default.applicationInsightsEndpointUrl}))}function _y(){(0,j.n)()>0&&document.body.classList.add("no-overlay-scrollbar")}function Hl(L,N="",H=""){const ne=y().first(performance.getEntriesByName(L));if(ne){const ve=ne.name.replace(/-/g,"_");An(`${N}${ve}${H}`,Math.round(ne.startTime)/1e3)}}const zy=new Fy;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,zy.init()},47858:(J,R,e)=>{"use strict";e.d(R,{As:()=>n,TE:()=>r,Z9:()=>a,_M:()=>l,sK:()=>o});var n=(g=>(g.Active="active",g.Expired="expired",g.Pending="pending",g))(n||{}),a=(g=>(g.Unprocessed="unprocessed",g.Active="active",g.Suppressed="suppressed",g))(a||{}),l=(g=>(g.equal="=",g.notEqual="!=",g.regex="=~",g.notRegex="!~",g))(l||{}),r=(g=>(g.Internal="internal",g.External="external",g.All="all",g))(r||{}),o=(g=>(g.cortex="cortex",g.mimir="mimir",g.prometheus="prometheus",g))(o||{})},73799:(J,R,e)=>{"use strict";e.d(R,{$5:()=>a,MQ:()=>l,Rv:()=>g,az:()=>o});const n={statistics:[]};var a=(d=>(d[d.Query=1]="Query",d[d.Search=0]="Search",d))(a||{}),l=(d=>(d[d.Builder=0]="Builder",d[d.Code=1]="Code",d))(l||{});const r={parameters:[]};var o=(d=>(d.And="and",d.Function="function",d.FunctionParameter="functionParameter",d.GroupBy="groupBy",d.Operator="operator",d.Or="or",d.Property="property",d))(o||{}),g=(d=>(d.String="string",d))(g||{});const m={logGroupNames:[],logGroups:[],statsGroups:[]}},8130:(J,R,e)=>{"use strict";e.d(R,{$5:()=>n.$5,KB:()=>a,MQ:()=>n.MQ,wf:()=>l});var n=e(73799),a=(r=>(r.Scheduled="Scheduled",r.Running="Running",r.Complete="Complete",r.Failed="Failed",r.Cancelled="Cancelled",r.Timeout="Timeout",r))(a||{}),l=(r=>(r.Regions="regions",r.Namespaces="namespaces",r.Metrics="metrics",r.DimensionKeys="dimensionKeys",r.DimensionValues="dimensionValues",r.EBSVolumeIDs="ebsVolumeIDs",r.EC2InstanceAttributes="ec2InstanceAttributes",r.ResourceArns="resourceARNs",r.Statistics="statistics",r.LogGroups="logGroups",r.Accounts="accounts",r))(l||{})},70451:(J,R,e)=>{"use strict";e.d(R,{hD:()=>b,oe:()=>g.o,yl:()=>m,AK:()=>d});var n=e(36497),a=e(30976),l=e(10694),r=e(54554),o=e(97433),g=e(38967);function m(V){return V?typeof V=="string"?V===g.o:"meta"in V&&V.meta.name===g.o||V.uid===g.o:!1}function d(V,w){return new n.y(K=>{const z=(0,o.h4)().getCurrent(),G=u(V.queries);if(!G){K.next(i("Missing panel reference ID"));return}const Q=z?.getPanelById(G);if(!Q){K.next(i("Unknown Panel: "+G));return}const j=Q.getQueryRunner(),F=j.getData({withTransforms:!!w?.withTransforms,withFieldConfig:!1}).subscribe({next:k=>{w?.topic===a.w5.Annotations&&(k={...k,series:k.annotations??[],annotations:void 0}),K.next(k)}});if(!Q.isInView&&Q.refreshWhenInView||z?.otherPanelInFullscreen(Q)){const{datasource:k,targets:_}=Q,Y={...V,datasource:k,panelId:G,queries:_};Q.refreshWhenInView=!1,j.run(Y)}return()=>{F.unsubscribe()}})}function u(V){if(!(!V||!V.length))return V[0].panelId}function i(V){return{state:l.Gu.Error,series:[],request:{},error:{message:V},timeRange:(0,r.JK)()}}var f=e(41407),c=e(53461),E=e(71757),p=e.n(E),h=e(39953),y=e(20653),s=e(82803),v=e(96227),C=e(9558),D=e(12223),M=e(20454),P=e(26286),x=e(28409),S=e(4236),I=e(50820),T=e(52436),O=e(29581);function A(V){return JSON.stringify(V)}const B=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function b({panelData:V,queries:w,onChange:K,onRunQueries:z}){const{value:G}=(0,y.Z)(()=>(0,T.ak)().get()),Q=w[0],j=(0,h.useMemo)(()=>(0,o.h4)().getCurrent()?.getPanelById(Q.panelId??-124134),[Q.panelId]),{value:F,loading:k}=(0,y.Z)(async()=>{if(!j)return[];const ge=await(0,T.ak)().get(j.datasource);return Promise.all(j.targets.map(async he=>{const me=he.datasource?await(0,T.ak)().get(he.datasource):ge,ye=me.getQueryDisplayText||A,ue=(0,O.t)(V,he.refId)??V;return{refId:he.refId,query:ye(he),name:me.name,img:me.meta.info.logos.small,data:ue.series,error:ue.error}}))},[V,j]),_=(0,h.useCallback)(ge=>{K([ge]),z()},[K,z]),Y=(0,h.useCallback)(ge=>{_({...Q,panelId:ge})},[Q,_]),Z=(0,h.useCallback)(()=>{_({...Q,withTransforms:!Q.withTransforms})},[Q,_]),ae=(0,h.useCallback)(ge=>{_({...Q,topic:ge?a.w5.Annotations:void 0})},[Q,_]),ce=(0,h.useCallback)(ge=>{const he=ge.datasource??G,me=(0,T.ak)().getInstanceSettings(he)?.name,ye=ge.targets.length;return`${ye} ${p()("query",ye)} to ${me}`},[G]),q=(0,o.h4)().getCurrent(),De=!!(Q.withTransforms||j?.transformations?.length),oe=(0,h.useMemo)(()=>q?.panels.filter(ge=>I.default.panels[ge.type]&&ge.targets&&ge.id!==q.panelInEdit?.id&&ge.datasource?.uid!==g.o).map(ge=>({value:ge.id,label:ge.title??"Panel "+ge.id,description:ce(ge),imgUrl:I.default.panels[ge.type].info.logos.small}))??[],[q,ce]),te=(0,s.wW)(W),fe=(0,c.Me)();if(!q)return null;if(oe.length<1)return h.createElement("p",{className:te.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const Te=oe.find(ge=>ge.value===Q.panelId);return h.createElement(h.Fragment,null,h.createElement(v.g,{label:"Source",description:"Use the same results as panel"},h.createElement(C.Ph,{inputId:fe,placeholder:"Choose panel",isSearchable:!0,options:oe,value:Te,onChange:ge=>Y(ge.value)})),h.createElement(D.Lh,{height:"auto",wrap:!0,align:"flex-start"},h.createElement(v.g,{label:"Data Source",description:"Use data or annotations from the panel",className:te.horizontalField},h.createElement(M.S,{options:B,value:Q.topic===a.w5.Annotations,onChange:ae})),De&&h.createElement(v.g,{label:"Transform",description:"Apply panel transformations from the source panel"},h.createElement(P.r,{value:!!Q.withTransforms,onChange:Z}))),k?h.createElement(x.$,null):h.createElement(h.Fragment,null,F&&!!F.length&&h.createElement(v.g,{label:"Queries from panel"},h.createElement(D.wc,{spacing:"sm"},F.map((ge,he)=>h.createElement(S.Z,{key:`DashboardQueryRow-${he}`},h.createElement(S.Z.Heading,null,ge.refId),h.createElement(S.Z.Figure,null,h.createElement("img",{src:ge.img,alt:ge.name,title:ge.name,width:40})),h.createElement(S.Z.Meta,null,ge.query)))))))}function W(V){return{horizontalField:(0,f.css)({marginRight:V.spacing(2)}),noQueriesText:(0,f.css)({padding:V.spacing(1.25)})}}},38967:(J,R,e)=>{"use strict";e.d(R,{o:()=>n});const n="-- Dashboard --",a="dashboard"},55623:(J,R,e)=>{"use strict";e.d(R,{k:()=>at,e:()=>Ne});var n=e(86832),a=e(22605),l=e(63302),r=e(3195),o=e(71476),g=e(93313),m=e(10694),d=e(48614),u=e(7906),i=e(98579),f=e(53305),c=e(92743),E=e(79059),p=e(16843),h=e(4148),y=e(26205),s=e(39724),v=e(97433),C=e(41407),D=e(39953),M=e(82803),P=e(2827),x=e(96227),S=e(9558),I=e(26286),T=e(40835),O=e(7376),A=e(39064),B=e(52291),b=e.n(B),W=e(36602),V=e(87783),w=e(4919),K=e(12223),z=e(54332),G=e(64333),Q=e(43374),j=e(12190),F=e(15530),k=e(53039);const _="time-of-day-picker-panel",Y=({minuteStep:_e=1,showHour:Ke=!0,showSeconds:et=!1,onChange:ze,value:je,size:Qe="auto",disabled:We,disabledHours:ke,disabledMinutes:ot,disabledSeconds:lt,placeholder:Ct,format:wt="HH:mm",defaultValue:Lt=void 0,allowEmpty:Ye=!1,width:Be})=>{const Le=(0,M.wW)(ae),le=()=>Be?(0,C.css)`
        width: ${Be}px;
      `:(0,F.ht)()[Qe];return D.createElement(Q.Z,{value:je,defaultValue:Lt,onChange:de=>ze(de),showHour:Ke,showSecond:et,format:wt,allowEmpty:Ye,className:(0,C.cx)(le(),Le.input),popupClassName:(0,C.cx)(Le.picker,_),minuteStep:_e,inputIcon:D.createElement(Z,{wrapperStyle:Le.caretWrapper}),disabled:We,disabledHours:ke,disabledMinutes:ot,disabledSeconds:lt,placeholder:Ct})},Z=({wrapperStyle:_e=""})=>D.createElement("div",{className:_e},D.createElement(j.J,{name:"angle-down"})),ae=_e=>{const Ke=_e.components.input.background,et=_e.v1.palette.black,ze=_e.colors.background.secondary,je=_e.shape.radius.default,Qe=_e.components.input.borderColor;return{caretWrapper:(0,C.css)`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${_e.colors.text.secondary};
    `,picker:(0,C.css)`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${Ke};
        border-color: ${Qe};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${_e.v1.palette.orange};
            border-radius: ${je};
          }

          &:hover {
            background: ${ze};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${_e.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${et};
        background-color: ${Ke};
        border-color: ${Qe};
        border-radius: ${je};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${Ke};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:(0,C.css)`
      .rc-time-picker-input {
        background-color: ${Ke};
        border-radius: ${je};
        border-color: ${Qe};
        height: ${_e.spacing(4)};

        &:focus {
          ${(0,k.focusCss)(_e)}
        }

        &:disabled {
          background-color: ${_e.colors.action.disabledBackground};
          color: ${_e.colors.action.disabledText};
          border: 1px solid ${_e.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }

      .rc-time-picker-clear {
        position: absolute;
        right: 20px;
        top: 50%;
        cursor: pointer;
        overflow: hidden;
        transform: translateY(-50%);
        color: ${_e.colors.text.secondary};
      }
    `}},ce=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((_e,Ke)=>({label:_e,value:Ke+1})),q=({value:_e,onChange:Ke})=>{const et=(0,M.wW)(De),ze=Date.now(),je=(0,W.Pr)(_e.timezone??"utc",ze),Qe=(0,v.h4)().getCurrent()?.getTimezone()===_e.timezone,[We,ke]=(0,D.useState)(!1),ot=()=>{ke(!We)},lt=de=>{if(!de)return;const X=b()();if(de){const se=de.split(":");X.set("hour",parseInt(se[0],10)),X.set("minute",parseInt(se[1],10))}return X},Ct=()=>{let de="Everyday";return _e.fromDayOfWeek&&!_e.toDayOfWeek&&(de=ce[_e.fromDayOfWeek-1].label),de},wt=()=>{const de=D.createElement(D.Fragment,null,D.createElement(G.d,{title:je?.name}),D.createElement(z.v,{timeZone:_e.timezone,timestamp:ze}));return Qe?D.createElement(D.Fragment,null,"Dashboard timezone (",de,")"):de},Lt=(de,X)=>{const se=de?de.format("HH:mm"):void 0;Ke(X==="from"?{..._e,from:se}:{..._e,to:se})},Ye=de=>{Ke({..._e,timezone:de})},Be=de=>{const X=de?de.value:void 0,se=de?_e.toDayOfWeek:void 0;Ke({..._e,fromDayOfWeek:X,toDayOfWeek:se})},Le=de=>{Ke({..._e,toDayOfWeek:de?de.value:void 0})},le=()=>We?D.createElement(V.O,{value:_e.timezone,includeInternal:!0,onChange:de=>Ye(de),onBlur:()=>ke(!1),openMenuOnFocus:!1,width:100,autoFocus:!0}):D.createElement("div",{className:et.timezoneContainer},D.createElement("div",{className:et.timezone},wt()),D.createElement(w.zx,{variant:"secondary",onClick:ot,size:"sm"},"Change timezone"));return D.createElement(P.C,{className:et.wrapper},D.createElement(x.g,{label:"From"},D.createElement(K.Lh,{spacing:"xs"},D.createElement(S.Ph,{options:ce,isClearable:!0,placeholder:"Everyday",value:_e.fromDayOfWeek??null,onChange:de=>Be(de),width:20}),D.createElement(Y,{value:lt(_e.from),onChange:de=>Lt(de,"from"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),D.createElement(x.g,{label:"To"},D.createElement(K.Lh,{spacing:"xs"},(_e.fromDayOfWeek||_e.toDayOfWeek)&&D.createElement(S.Ph,{options:ce,isClearable:!0,placeholder:Ct(),value:_e.toDayOfWeek??null,onChange:de=>Le(de),width:20}),D.createElement(Y,{value:lt(_e.to),onChange:de=>Lt(de,"to"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),D.createElement(x.g,{label:"Timezone"},le()))},De=_e=>({wrapper:(0,C.css)({maxWidth:_e.spacing(60),marginBottom:_e.spacing(2)}),timezoneContainer:(0,C.css)`
      padding: 5px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    `,timezone:(0,C.css)`
      margin-right: 5px;
    `}),oe="Enabling this returns annotations that match any of the tags specified below",te=D.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),fe=[{label:"Dashboard",value:A._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:A._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],Te=[{label:"Annotations & Alerts",value:A.hR.Annotations,description:"Show annotations or alerts managed by grafana"},{label:"Time regions",value:A.hR.TimeRegions,description:"Configure a repeating time region"}],ge=[10,50,100,200,300,500,1e3,2e3].map(_e=>({label:String(_e),value:_e}));function he({query:_e,onChange:Ke}){const et=_e,{limit:ze,matchAny:je,tags:Qe,type:We,queryType:ke}=et;let ot=ke??A.hR.Annotations;const lt=(0,D.useMemo)(()=>(0,v.h4)().dashboard?.getTimezone(),[]),Ct=(0,M.wW)(me),wt=de=>Ke({...et,type:de.value}),Lt=de=>Ke({...et,limit:de.value}),Ye=de=>Ke({...et,matchAny:de.target.checked}),Be=de=>Ke({...et,tags:de}),Le=de=>{const X={...et,queryType:de.value};X.queryType===A.hR.TimeRegions?X.timeRegion||(X.timeRegion={timezone:lt}):delete X.timeRegion,Ke(X)},le=de=>{Ke({...et,timeRegion:de})};return D.createElement(P.C,{className:Ct.container},D.createElement(x.g,{label:"Query type"},D.createElement(S.Ph,{inputId:"grafana-annotations__query-type",options:Te,value:ot,onChange:Le})),ot===A.hR.Annotations&&D.createElement(D.Fragment,null,D.createElement(x.g,{label:"Filter by"},D.createElement(S.Ph,{inputId:"grafana-annotations__filter-by",options:fe,value:We,onChange:wt})),D.createElement(x.g,{label:"Max limit"},D.createElement(S.Ph,{inputId:"grafana-annotations__limit",width:16,options:ge,value:ze,onChange:Lt})),We===A._$.Tags&&D.createElement(D.Fragment,null,D.createElement(x.g,{label:"Match any",description:oe},D.createElement(I.r,{id:"grafana-annotations__match-any",value:je,onChange:Ye})),D.createElement(x.g,{label:"Tags",description:te},D.createElement(T.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:Be,tagOptions:O.lK,tags:Qe??[]})))),ot===A.hR.TimeRegions&&et.timeRegion&&D.createElement(q,{value:et.timeRegion,onChange:le}))}const me=_e=>({container:(0,C.css)({maxWidth:_e.spacing(60),marginBottom:_e.spacing(2)})});var ye=e(89591),ue=e(85926);function Oe(_e,Ke,et,ze){if(!Ke)return;const je=(0,ue.q7)(Ke,et);if(!je.length)return;const Qe=[],We=[],ke=[],ot=Ke.timezone??ze;for(const lt of je){let Ct=lt.from,wt=lt.to;const Lt=(0,W.Pr)(ot,Ct);if(Lt){const Ye=Lt.offsetInMins*60*1e3;Ct+=Ye,wt+=Ye}Qe.push(Ct),We.push(wt),ke.push(_e)}return{fields:[{name:"time",type:ye.fS.time,values:Qe,config:{}},{name:"timeEnd",type:ye.fS.time,values:We,config:{}},{name:"text",type:ye.fS.string,values:ke,config:{}}],length:Qe.length}}let Ue=100;class at extends c.CK{constructor(Ke){super(Ke),this.annotations={QueryEditor:he,prepareAnnotation(et){return et.target=et.target??{type:et.type??A._$.Dashboard,limit:et.limit??100,tags:et.tags??[],matchAny:et.matchAny??!1},et},prepareQuery(et){let ze;if((0,n.isString)(et.datasource)){const We=(0,s.p)(et.datasource,{returnDefaultAsNull:!1});We&&(ze=We)}else ze=et.datasource;const{filter:je,...Qe}=et;return{...Qe,refId:et.name,queryType:A.hR.Annotations,datasource:ze}}}}getDefaultQuery(){return{queryType:A.hR.RandomWalk}}query(Ke){const et=[],ze=[],je=(0,E.J)();for(const Qe of Ke.targets){if(Qe.queryType===A.hR.Annotations)return(0,a.D)(this.getAnnotations({range:Ke.range,rangeRaw:Ke.range.raw,annotation:Qe,dashboard:(0,v.h4)().getCurrent()}));if(!Qe.hide){if(Qe.queryType===A.hR.Snapshot){et.push((0,l.of)({data:(Qe.snapshot??[]).map(We=>(0,g.vP)(We)),state:m.Gu.Done}));continue}if(Qe.queryType===A.hR.TimeRegions){const We=Oe("",Qe.timeRegion,Ke.range,Ke.timezone);et.push((0,l.of)({data:We?[We]:[],state:m.Gu.Done}));continue}if(Qe.queryType===A.hR.LiveMeasurements){let We=je.replace(Qe.channel,Ke.scopedVars);const{filter:ke}=Qe,ot=(0,d.H7)(We);if(!(0,d.nU)(ot))continue;const lt={maxLength:Ke.maxDataPoints??500};Qe.buffer?(lt.maxDelta=Qe.buffer,lt.maxLength=lt.maxLength*2):Ke.rangeRaw?.to==="now"&&(lt.maxDelta=Ke.range.to.valueOf()-Ke.range.from.valueOf()),et.push((0,p.gj)().getDataStream({key:`${Ke.requestId}.${Ue++}`,addr:ot,filter:ke,buffer:lt}))}else Qe.queryType||(Qe.queryType=A.hR.RandomWalk),ze.push(Qe)}}return ze.length&&et.push(super.query({...Ke,targets:ze})),et.length?et.length===1?et[0]:(0,r.T)(...et):(0,l.of)()}listFiles(Ke){return this.query({targets:[{refId:"A",queryType:A.hR.List,path:Ke}]}).pipe((0,o.U)(et=>{const ze=et.data[0]??new u.v;return new i.U(ze)}))}metricFindQuery(Ke){return Promise.resolve([])}async getAnnotations(Ke){const et=Ke.annotation.target;if(et?.queryType===A.hR.TimeRegions){const ke=Oe(Ke.annotation.name,et.timeRegion,Ke.range,(0,v.h4)().getCurrent()?.timezone);return Promise.resolve({data:ke?[ke]:[]})}const ze=Ke.annotation,je=ze.target,Qe={from:Ke.range.from.valueOf(),to:Ke.range.to.valueOf(),limit:je.limit,tags:je.tags,matchAny:je.matchAny};if(je.type===A._$.Dashboard){if(!Ke.dashboard.uid)return Promise.resolve({data:[]});Qe.dashboardUID=Ke.dashboard.uid,delete Qe.tags}else{if(!Array.isArray(je.tags)||je.tags.length===0)return Promise.resolve({data:[]});const ke=(0,E.J)(),ot="__delimiter__",lt=[];for(const Ct of Qe.tags){const wt=ke.replace(Ct,{},Lt=>typeof Lt=="string"?Lt:Lt.join(ot));for(const Lt of wt.split(ot))lt.push(Lt)}Qe.tags=lt}const We=await(0,h.i)().get("/api/annotations",Qe,`grafana-data-source-annotations-${ze.name}-${Ke.dashboard?.uid}`);return{data:[(0,f.g0)(We)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}async function Ne(){return await(0,y.F)().get("-- Grafana --")}},39064:(J,R,e)=>{"use strict";e.d(R,{_$:()=>r,hR:()=>n,ip:()=>l,wi:()=>a});var n=(o=>(o.LiveMeasurements="measurements",o.Annotations="annotations",o.Snapshot="snapshot",o.TimeRegions="timeRegions",o.RandomWalk="randomWalk",o.List="list",o.Read="read",o.Search="search",o))(n||{});const a={refId:"A",queryType:"randomWalk"},l={refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:"snapshot",snapshot:[]};var r=(o=>(o.Dashboard="dashboard",o.Tags="tags",o))(r||{})},65355:(J,R,e)=>{"use strict";e.d(R,{F:()=>m,k:()=>u});var n=e(93313),a=e(28833),l=e(95712),r=e(7635),o=e(73431),g=e(39064);function m(i,f){return new Promise(c=>{if(i.datasource?.uid===l.JY){d(f,i),c(!0);return}a.Z.publish(new o.VJ({title:"Change to panel embedded data",text:"If you want to change the data shown in this panel Grafana will need to remove the panels current query and replace it with a snapshot of the current data. This enables you to edit the data.",yesText:"Continue",icon:"pen",onConfirm:()=>{d(f,i),c(!0)},onDismiss:()=>{c(!1)}}))})}function d(i,f){const c=i.map(p=>(0,n.Y)(p)),E={refId:"A",queryType:g.hR.Snapshot,snapshot:c,datasource:{uid:l.JY}};f.updateQueries({dataSource:{uid:l.JY},queries:[E]}),f.refresh()}function u(i){return(f,c,E)=>{r.eM(f).subscribe(async p=>{const h=[];p.dataFrames.forEach(y=>{const s=(0,n.Y)(y);h.push(s)}),i({...g.ip,snapshot:h,file:p.file},c)})}}},26923:(J,R,e)=>{"use strict";e.d(R,{Wp:()=>g,c6:()=>d,xM:()=>r});var n=e(7906),a=e(89591),l=e(84598);function r(u){const i=u.spans.map(c=>o(c,u.processes)),f=new n.v({fields:[{name:"traceID",type:a.fS.string},{name:"spanID",type:a.fS.string},{name:"parentSpanID",type:a.fS.string},{name:"operationName",type:a.fS.string},{name:"serviceName",type:a.fS.string},{name:"serviceTags",type:a.fS.other},{name:"startTime",type:a.fS.number},{name:"duration",type:a.fS.number},{name:"logs",type:a.fS.other},{name:"tags",type:a.fS.other},{name:"warnings",type:a.fS.other},{name:"stackTraces",type:a.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const c of i)f.add(c);return f}function o(u,i){return{spanID:u.spanID,traceID:u.traceID,parentSpanID:u.references?.find(f=>f.refType==="CHILD_OF")?.spanID,operationName:u.operationName,startTime:u.startTime/1e3,duration:u.duration/1e3,logs:u.logs.map(f=>({...f,timestamp:f.timestamp/1e3})),tags:u.tags,warnings:u.warnings??void 0,stackTraces:u.stackTraces,serviceName:i[u.processID].serviceName,serviceTags:i[u.processID].tags}}function g(u,i){const f=new n.v({fields:[{name:"traceID",type:a.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:i.uid,datasourceName:i.name,query:{query:"${__value.raw}"}}}]}},{name:"traceName",type:a.fS.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:a.fS.time,config:{displayNameFromDS:"Start time"}},{name:"duration",type:a.fS.number,config:{displayNameFromDS:"Duration",unit:"\xB5s"}}],meta:{preferredVisualisationType:"table"}}),c=u.map(m).sort((E,p)=>p?.startTime-E?.startTime);for(const E of c)f.add(E);return f}function m(u){const i=(0,l.transformTraceData)(u);if(i)return{traceID:i.traceID,startTime:i.startTime/1e3,duration:i.duration,traceName:i.traceName}}function d(u){let i={traceID:"",spans:[],processes:{},warnings:null},f=[];for(let c=0;c<u.length;c++){const E=u.get(c);i.traceID||(i.traceID=E.traceID),f.find(p=>p===E.serviceName)||(f.push(E.serviceName),i.processes[`p${f.length}`]={serviceName:E.serviceName,tags:E.serviceTags}),i.spans.push({traceID:E.traceID,spanID:E.spanID,duration:E.duration*1e3,references:E.parentSpanID?[{refType:"CHILD_OF",spanID:E.parentSpanID,traceID:E.traceID}]:[],flags:0,logs:E.logs.map(p=>({...p,timestamp:p.timestamp*1e3})),operationName:E.operationName,processID:Object.keys(i.processes).find(p=>i.processes[p].serviceName===E.serviceName)||"",startTime:E.startTime*1e3,tags:E.tags,warnings:E.warnings?E.warnings:null})}return{data:[i],total:0,limit:0,offset:0,errors:null}}},88553:(J,R,e)=>{"use strict";e.d(R,{$5:()=>n,EH:()=>r,Rd:()=>l,ZP:()=>u,md:()=>o,r8:()=>g,uR:()=>a,xY:()=>d});const n=[{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"}],a=[{label:"json",insertText:"json",documentation:"Extracting labels from the log line using json parser."},{label:"regexp",insertText:'regexp ""',documentation:"Extracting labels from the log line using regexp parser.",move:-1},{label:"logfmt",insertText:"logfmt",documentation:"Extracting labels from the log line using logfmt parser."},{label:"pattern",insertText:"pattern",documentation:"Extracting labels from the log line using pattern parser. Only available in Loki 2.3+."},{label:"unpack",insertText:"unpack",detail:"unpack identifier",documentation:'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property "_entry" will also be used to replace the original log line. Only available in Loki 2.2+.'}],l=[{label:"unwrap",insertText:"unwrap",detail:"unwrap identifier",documentation:"Take labels and use the values as sample data for metric aggregations."},{label:"label_format",insertText:"label_format",documentation:"Use to rename, modify or add labels. For example, | label_format foo=bar ."},{label:"line_format",insertText:"line_format",documentation:'Rewrites log line content. For example, | line_format "{{.query}} {{.duration}}" .'}],r=[{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average of all values in the specified interval."},{insertText:"bytes_over_time",label:"bytes_over_time",detail:"bytes_over_time(range-vector)",documentation:"Counts the amount of bytes used by each log stream for a given range"},{insertText:"bytes_rate",label:"bytes_rate",detail:"bytes_rate(range-vector)",documentation:"Calculates the number of bytes per second for each stream."},{insertText:"first_over_time",label:"first_over_time",detail:"first_over_time(range-vector)",documentation:"The first of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The last of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum of all values in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the number of entries per second."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}],o=[{insertText:"vector",label:"vector",detail:"vector(scalar)",documentation:"Returns the scalar as a vector with no labels."}],g=[...n,...r,...o],m=[...g,...l,...a].map(i=>i.label),d={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((without|by)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},"context-pipe":{pattern:/\s\|[^=~]\s?\w*/i,inside:{"pipe-operator":{pattern:/\|/i,alias:"operator"},"pipe-operations":{pattern:new RegExp(`${[...a,...l].map(i=>i.label).join("|")}`,"i"),alias:"keyword"}}},function:new RegExp(`\\b(?:${g.map(i=>i.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=\])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],quote:{pattern:/"(?:\\.|[^\\"])*"/,alias:"string",greedy:!0},backticks:{pattern:/`(?:\\.|[^\\`])*`/,alias:"string",greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:/\s?(\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\s?/i,punctuation:/[{}(),.]/},u=d},24677:(J,R,e)=>{"use strict";e.d(R,{D:()=>y,w:()=>s});var n=e(86832),a=e.n(n),l=e(63302),r=e(22605),o=e(74539),g=e(84289),m=e(71476),d=e(41311),u=e(10752),i=e(53143),f=e(41858),c=e(54721),E=e(10694),p=e(26205),h=e(43882);const y="-- Mixed --";class s extends c.MF{constructor(D){super(D)}query(D){const M=D.targets.filter(S=>S.datasource?.uid!==y);if(!M.length)return(0,l.of)({data:[]});const P=(0,n.groupBy)(M,"datasource.uid"),x=[];for(const S in P){const I=P[S];x.push({datasource:(0,p.F)().get(I[0].datasource,D.scopedVars),targets:I})}return x.length?this.batchQueries(x,D):(0,l.of)({data:[]})}batchQueries(D,M){const P=D.filter(this.isQueryable).map((x,S)=>(0,r.D)(x.datasource).pipe((0,g.z)(I=>{const T=(0,n.cloneDeep)(M);return T.requestId=`mixed-${S}-${T.requestId||""}`,T.targets=x.targets,(0,r.D)(I.query(T)).pipe((0,m.U)(O=>({...O,data:O.data||[],state:E.Gu.Loading,key:`mixed-${S}-${O.key||""}`})),(0,d.q)(),(0,u.K)(O=>(O=(0,h.P)(O),O.message=`${I.name}: ${O.message}`,(0,l.of)([{data:[],state:E.Gu.Error,error:O,key:`mixed-${S}-${T.requestId||""}`}]))))})));return(0,o.D)(P).pipe(v(),(0,m.U)(this.finalizeResponses),(0,i.J)())}testDatasource(){return Promise.resolve({message:"",status:""})}isQueryable(D){return D&&Array.isArray(D.targets)&&D.targets.length>0}finalizeResponses(D){const{length:M}=D;if(M===0)return D;const P=D.find(x=>x.state===E.Gu.Error);return P?D.push(P):D[M-1].state=E.Gu.Done,D}}function v(){return(0,f.u)((C,D)=>D.reduce((M,P)=>(M.push.apply(M,P),M),C),[])}},74149:(J,R,e)=>{"use strict";e.d(R,{F:()=>r});var n=e(50590),a=e(89527),l=e(95522);function r(u,i,f,c="="){if(!i||!f)throw new Error("Need label to add to query.");const E=o(u);if(!E.length)return u;const p=g(i,f,c);return m(u,E,p)}function o(u){const i=n.E2.parse(u),f=[];return i.iterate({enter:({to:c,from:E,type:p})=>{if(p.id===n.m6){const h=(0,l._)(u.substring(E,c));return f.push({query:h.query,from:E,to:c}),!1}}}),f}function g(u,i,f){const c=i===1/0?"+Inf":i.toString();return{label:u,op:f,value:c}}function m(u,i,f){const c=new a.K;let E="",p=0;for(let h=0;h<i.length;h++){const y=i[h],s=h===i.length-1,v=u.substring(p,y.from),C=s?u.substring(y.to):"";d(y.query.labels,f)||y.query.labels.push(f);const D=c.renderQuery(y.query);E+=v+D+C,p=y.to}return E}function d(u,i){return u.find(f=>f.label===i.label&&f.value===i.value)}},63594:(J,R,e)=>{"use strict";e.d(R,{ZP:()=>j});var n=e(41407),a=e(10963),l=e(39953),r=e(53305),o=e(72639),g=e(97697),m=e(59608),d=e(12190),u=e(4919),i=e(82803),f=e(1188);function c(F){return typeof F=="object"&&F!==null&&"isCanceled"in F}const E=F=>{let k=!1;return{promise:new Promise((Y,Z)=>{const ae={isCanceled:!0};F.then(ce=>k?Z(ae):Y(ce)),F.catch(ce=>Z(k?ae:ce))}),cancel(){k=!0}}};var p=e(63163),h=e(68084),y=e(64084),s=e(84766),v=e(12223),C=e(36495),D=e(38637),M=e(52499);const P="{}",x="__name__",S=25;function I(F){let k="";const _=[];for(const Y of F)if((Y.name===x||Y.selected)&&Y.values&&Y.values.length>0){const Z=Y.values.filter(ae=>ae.selected).map(ae=>ae.name);Z.length>1?_.push(`${Y.name}=~"${Z.map(p.tU).join("|")}"`):Z.length===1&&(Y.name===x?k=Z[0]:_.push(`${Y.name}="${(0,p.U9)(Z[0])}"`))}return[k,"{",_.join(","),"}"].join("")}function T(F,k,_){return F.map(Y=>{const Z=k[Y.name];if(Z){let ae;if(Y.name===_&&Y.values)ae=Y.values;else{const ce=new Set(Y.values?.filter(q=>q.selected).map(q=>q.name)||[]);ae=Z.map(q=>({name:q,selected:ce.has(q)}))}return{...Y,loading:!1,values:ae,hidden:!Z,facets:ae.length}}return{...Y,loading:!1,hidden:!Z,values:void 0,facets:0}})}const O=(0,y.B)(F=>({wrapper:(0,n.css)`
    background-color: ${F.colors.background.secondary};
    padding: ${F.spacing(1)};
    width: 100%;
  `,list:(0,n.css)`
    margin-top: ${F.spacing(1)};
    display: flex;
    flex-wrap: wrap;
    max-height: 200px;
    overflow: auto;
    align-content: flex-start;
  `,section:(0,n.css)`
    & + & {
      margin: ${F.spacing(2)} 0;
    }
    position: relative;
  `,selector:(0,n.css)`
    font-family: ${F.typography.fontFamilyMonospace};
    margin-bottom: ${F.spacing(1)};
  `,status:(0,n.css)`
    padding: ${F.spacing(.5)};
    color: ${F.colors.text.secondary};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    /* using absolute positioning because flex interferes with ellipsis */
    position: absolute;
    width: 50%;
    right: 0;
    text-align: right;
    transition: opacity 100ms linear;
    opacity: 0;
  `,statusShowing:(0,n.css)`
    opacity: 1;
  `,error:(0,n.css)`
    color: ${F.colors.error.main};
  `,valueList:(0,n.css)`
    margin-right: ${F.spacing(1)};
    resize: horizontal;
  `,valueListWrapper:(0,n.css)`
    border-left: 1px solid ${F.colors.border.medium};
    margin: ${F.spacing(1)} 0;
    padding: ${F.spacing(1)} 0 ${F.spacing(1)} ${F.spacing(1)};
  `,valueListArea:(0,n.css)`
    display: flex;
    flex-wrap: wrap;
    margin-top: ${F.spacing(1)};
  `,valueTitle:(0,n.css)`
    margin-left: -${F.spacing(.5)};
    margin-bottom: ${F.spacing(1)};
  `,validationStatus:(0,n.css)`
    padding: ${F.spacing(.5)};
    margin-bottom: ${F.spacing(1)};
    color: ${F.colors.text.maxContrast};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `}));class A extends l.Component{constructor(){super(...arguments),this.valueListsRef=l.createRef(),this.state={labels:[],labelSearchTerm:"",metricSearchTerm:"",status:"Ready",error:"",validationStatus:"",valueSearchTerm:""},this.onChangeLabelSearch=k=>{this.setState({labelSearchTerm:k.target.value})},this.onChangeMetricSearch=k=>{this.setState({metricSearchTerm:k.target.value})},this.onChangeValueSearch=k=>{this.setState({valueSearchTerm:k.target.value})},this.onClickRunQuery=()=>{const k=I(this.state.labels);this.props.onChange(k)},this.onClickRunRateQuery=()=>{const _=`rate(${I(this.state.labels)}[$__rate_interval])`;this.props.onChange(_)},this.onClickClear=()=>{this.setState(k=>({labels:k.labels.map(Y=>({...Y,values:void 0,selected:!1,loading:!1,hidden:!1,facets:void 0})),labelSearchTerm:"",metricSearchTerm:"",status:"",error:"",validationStatus:"",valueSearchTerm:""})),this.props.deleteLastUsedLabels(),this.fetchValues(x,P)},this.onClickLabel=(k,_,Y)=>{const Z=this.state.labels.find(q=>q.name===k);if(!Z)return;const ae=!Z.selected;let ce={selected:ae};if(Z.values&&!ae){const q=Z.values.map(De=>({...De,selected:!1}));ce={...ce,facets:0,values:q}}this.setState({labelSearchTerm:""}),this.updateLabelState(k,ce,"",()=>this.doFacettingForLabel(k))},this.onClickValue=(k,_,Y)=>{const Z=this.state.labels.find(ce=>ce.name===k);if(!Z||!Z.values)return;this.setState({labelSearchTerm:""});const ae=Z.values.map(ce=>({...ce,selected:ce.name===_?!ce.selected:ce.selected}));this.updateLabelState(k,{values:ae},"",()=>this.doFacetting(k))},this.onClickMetric=(k,_,Y)=>{const Z=this.state.labels.find(q=>q.name===k);if(!Z||!Z.values)return;this.setState({metricSearchTerm:""});const ae=Z.values.map(q=>({...q,selected:q.name===_||q.selected?!q.selected:q.selected})),ce=ae.some(q=>q.selected);this.updateLabelState(k,{selected:ce,values:ae},"",()=>this.doFacetting(k))},this.onClickValidate=()=>{const k=I(this.state.labels);this.validateSelector(k)},this.doFacetting=k=>{const _=I(this.state.labels);if(_===P){const Y=this.state.labels.map(Z=>({...Z,facets:0,values:void 0,hidden:!1}));this.setState({labels:Y},()=>{this.state.labels.forEach(Z=>(Z.selected||Z.name===x)&&this.fetchValues(Z.name,_))})}else this.fetchSeries(_,k)}}updateLabelState(k,_,Y="",Z){this.setState(ae=>{const ce=ae.labels.map(De=>De.name===k?{...De,..._}:De),q=Y?"":ae.error;return{labels:ce,status:Y,error:q,validationStatus:""}},Z)}componentDidMount(){const{languageProvider:k,lastUsedLabels:_}=this.props;if(k){const Y=_;k.start().then(()=>{let Z=k.getLabelKeys();this.fetchValues(x,P);const ae=Z.map((ce,q,De)=>({name:ce,selected:Y.includes(ce),loading:!1}));this.setState({labels:ae},()=>{this.state.labels.forEach(ce=>{ce.selected&&this.fetchValues(ce.name,P)})})})}}doFacettingForLabel(k){const _=this.state.labels.find(Z=>Z.name===k);if(!_)return;const Y=this.state.labels.filter(Z=>Z.selected).map(Z=>Z.name);this.props.storeLastUsedLabels(Y),_.selected?_.values||this.fetchValues(k,I(this.state.labels)):this.doFacetting()}async fetchValues(k,_){const{languageProvider:Y}=this.props;this.updateLabelState(k,{loading:!0},`Fetching values for ${k}`);try{let Z=await Y.getLabelValues(k);if(_!==I(this.state.labels)){this.updateLabelState(k,{loading:!1});return}const ae=[],{metricsMetadata:ce}=Y;for(const q of Z){const De={name:q};if(k===x&&ce){const oe=ce[q];oe&&(De.details=`(${oe.type}) ${oe.help}`)}ae.push(De)}this.updateLabelState(k,{values:ae,loading:!1})}catch(Z){console.error(Z)}}async fetchSeries(k,_){const{languageProvider:Y}=this.props;_&&this.updateLabelState(_,{loading:!0},`Facetting labels for ${k}`);try{const Z=await Y.fetchSeriesLabels(k,!0);if(k!==I(this.state.labels)){_&&this.updateLabelState(_,{loading:!1});return}if(Object.keys(Z).length===0){this.setState({error:`Empty results, no matching label for ${k}`});return}const ae=T(this.state.labels,Z,_);this.setState({labels:ae,error:""}),_&&this.updateLabelState(_,{loading:!1})}catch(Z){console.error(Z)}}async validateSelector(k){const{languageProvider:_}=this.props;this.setState({validationStatus:`Validating selector ${k}`,error:""});const Y=await _.fetchSeries(k);this.setState({validationStatus:`Selector is valid (${Y.length} series found)`})}render(){const{theme:k}=this.props,{labels:_,labelSearchTerm:Y,metricSearchTerm:Z,status:ae,error:ce,validationStatus:q,valueSearchTerm:De}=this.state,oe=O(k);if(_.length===0)return l.createElement("div",{className:oe.wrapper},l.createElement(s.u,{text:"Loading labels..."}));let te=_.find(ye=>ye.name===x);te&&Z&&(te={...te,values:te.values?.filter(ye=>ye.selected||ye.name.includes(Z))});let fe=_.filter(ye=>!ye.hidden&&ye.name!==x);Y&&(fe=fe.filter(ye=>ye.selected||ye.name.includes(Y)));let Te=fe.filter(ye=>ye.selected&&ye.values);De&&(Te=Te.map(ye=>({...ye,values:ye.values?.filter(ue=>ue.selected||ue.name.includes(De))})));const ge=I(this.state.labels),he=ge===P,me=te?.values?.length||0;return l.createElement("div",{className:oe.wrapper},l.createElement(v.Lh,{align:"flex-start",spacing:"lg"},l.createElement("div",null,l.createElement("div",{className:oe.section},l.createElement(C._,{description:"Once a metric is selected only possible labels are shown."},"1. Select a metric"),l.createElement("div",null,l.createElement(D.I,{onChange:this.onChangeMetricSearch,"aria-label":"Filter expression for metric",value:Z})),l.createElement("div",{role:"list",className:oe.valueListWrapper},l.createElement(h.t7,{height:Math.min(450,me*S),itemCount:me,itemSize:S,itemKey:ye=>te.values[ye].name,width:300,className:oe.valueList},({index:ye,style:ue})=>{const Oe=te?.values?.[ye];return Oe?l.createElement("div",{style:ue},l.createElement(M._,{name:te.name,value:Oe?.name,title:Oe.details,active:Oe?.selected,onClick:this.onClickMetric,searchTerm:Z})):null})))),l.createElement("div",null,l.createElement("div",{className:oe.section},l.createElement(C._,{description:"Once label values are selected, only possible label combinations are shown."},"2. Select labels to search in"),l.createElement("div",null,l.createElement(D.I,{onChange:this.onChangeLabelSearch,"aria-label":"Filter expression for label",value:Y})),l.createElement("div",{className:oe.list,style:{height:120}},fe.map(ye=>l.createElement(M._,{key:ye.name,name:ye.name,loading:ye.loading,active:ye.selected,hidden:ye.hidden,facets:ye.facets,onClick:this.onClickLabel,searchTerm:Y})))),l.createElement("div",{className:oe.section},l.createElement(C._,{description:"Use the search field to find values across selected labels."},"3. Select (multiple) values for your labels"),l.createElement("div",null,l.createElement(D.I,{onChange:this.onChangeValueSearch,"aria-label":"Filter expression for label values",value:De})),l.createElement("div",{className:oe.valueListArea,ref:this.valueListsRef},Te.map(ye=>l.createElement("div",{role:"list",key:ye.name,"aria-label":`Values for ${ye.name}`,className:oe.valueListWrapper},l.createElement("div",{className:oe.valueTitle},l.createElement(M._,{name:ye.name,loading:ye.loading,active:ye.selected,hidden:ye.hidden,facets:ye.facets||ye.values?.length,onClick:this.onClickLabel})),l.createElement(h.t7,{height:Math.min(200,S*(ye.values?.length||0)),itemCount:ye.values?.length||0,itemSize:28,itemKey:ue=>ye.values[ue].name,width:200,className:oe.valueList},({index:ue,style:Oe})=>{const Ue=ye.values?.[ue];return Ue?l.createElement("div",{style:Oe},l.createElement(M._,{name:ye.name,value:Ue?.name,active:Ue?.selected,onClick:this.onClickValue,searchTerm:De})):null}))))))),l.createElement("div",{className:oe.section},l.createElement(C._,null,"4. Resulting selector"),l.createElement("div",{"aria-label":"selector",className:oe.selector},ge),q&&l.createElement("div",{className:oe.validationStatus},q),l.createElement(v.Lh,null,l.createElement(u.zx,{"aria-label":"Use selector for query button",disabled:he,onClick:this.onClickRunQuery},"Use query"),l.createElement(u.zx,{"aria-label":"Use selector as metrics button",variant:"secondary",disabled:he,onClick:this.onClickRunRateQuery},"Use as rate query"),l.createElement(u.zx,{"aria-label":"Validate submit button",variant:"secondary",disabled:he,onClick:this.onClickValidate},"Validate selector"),l.createElement(u.zx,{"aria-label":"Selector clear button",variant:"secondary",onClick:this.onClickClear},"Clear"),l.createElement("div",{className:(0,n.cx)(oe.status,(ae||ce)&&oe.statusShowing)},l.createElement("span",{className:ce?oe.error:""},ce||ae)))))}}const B=(0,i.HE)(A),b=l.lazy(()=>e.e(6031).then(e.bind(e,48203))),W=F=>l.createElement(l.Suspense,{fallback:null},l.createElement(b,{...F})),V=F=>{const k=(0,l.useRef)(null),{onRunQuery:_,onChange:Y,...Z}=F,ae=De=>{k.current=De,Y(De),_()},ce=De=>{Y(De)},q=De=>{Y(De)};return l.createElement(W,{onChange:q,onRunQuery:ae,onBlur:ce,...Z})},w="__recording_rules__",K="grafana.datasources.prometheus.browser.labels";function z(F,k,_){return F?"(Disabled)":k?_?"Metrics browser":"(No metrics found)":"Loading metrics..."}function G(F,{typeaheadContext:k,typeaheadText:_}){switch(k){case"context-labels":{const Y=DOMUtil.getNextCharacter();(!Y||Y==="}"||Y===",")&&(F+="=");break}case"context-label-values":{_.match(/^(!?=~?"|")/)||(F=`"${F}`),DOMUtil.getNextCharacter()!=='"'&&(F=`${F}"`);break}default:}return F}class Q extends l.PureComponent{constructor(k,_){super(k,_),this.refreshHint=()=>{const{datasource:Y,query:Z,data:ae}=this.props,ce=Y.getInitHints(),q=ce.length>0?ce[0]:null;if(!ae||ae.series.length===0){this.setState({hint:q});return}const De=(0,r.aY)(ae.series[0])?ae.series.map(r.Zr):ae.series,oe=Y.getQueryHints(Z,De);let te=oe.length>0?oe[0]:null;this.setState({hint:te??q})},this.refreshMetrics=async()=>{const{datasource:{languageProvider:Y}}=this.props;this.languageProviderInitializationPromise=E(Y.start());try{const Z=await this.languageProviderInitializationPromise.promise;await Promise.all(Z),this.onUpdateLanguage()}catch(Z){if(!(c(Z)&&Z.isCanceled))throw Z}},this.onChangeLabelBrowser=Y=>{this.onChangeQuery(Y,!0),this.setState({labelBrowserVisible:!1})},this.onChangeQuery=(Y,Z)=>{const{query:ae,onChange:ce,onRunQuery:q}=this.props;if(ce){const De={...ae,expr:Y};ce(De),Z&&q&&q()}},this.onClickChooserButton=()=>{this.setState(Y=>({labelBrowserVisible:!Y.labelBrowserVisible})),(0,o.ff)("user_grafana_prometheus_metrics_browser_clicked",{editorMode:this.state.labelBrowserVisible?"metricViewClosed":"metricViewOpen",app:this.props?.app??""})},this.onClickHintFix=()=>{const{datasource:Y,query:Z,onChange:ae,onRunQuery:ce}=this.props,{hint:q}=this.state;q?.fix?.action&&ae(Y.modifyQuery(Z,q.fix.action)),ce()},this.onUpdateLanguage=()=>{const{datasource:{languageProvider:Y}}=this.props,{metrics:Z}=Y;Z&&this.setState({syntaxLoaded:!0})},this.onTypeahead=async Y=>{const{datasource:{languageProvider:Z}}=this.props;if(!Z)return{suggestions:[]};const{history:ae}=this.props,{prefix:ce,text:q,value:De,wrapperClasses:oe,labelKey:te}=Y;return await Z.provideCompletionItems({text:q,value:De,prefix:ce,wrapperClasses:oe,labelKey:te},{history:ae})},this.plugins=[(0,g.h)(),(0,m.Z)({onlyIn:Y=>"type"in Y&&Y.type==="code_block",getSyntax:Y=>"promql"},{...a.languages,promql:this.props.datasource.languageProvider.syntax})],this.state={labelBrowserVisible:!1,syntaxLoaded:!1,hint:null}}componentDidMount(){this.props.datasource.languageProvider&&this.refreshMetrics(),this.refreshHint()}componentWillUnmount(){this.languageProviderInitializationPromise&&this.languageProviderInitializationPromise.cancel()}componentDidUpdate(k){const{data:_,datasource:{languageProvider:Y},range:Z}=this.props;Y!==k.datasource.languageProvider&&this.setState({syntaxLoaded:!1});const ae=this.rangeChangedToRefresh(Z,k.range);(Y!==k.datasource.languageProvider||ae)&&this.refreshMetrics(),_&&k.data&&k.data.series!==_.series&&this.refreshHint()}rangeChangedToRefresh(k,_){if(k&&_){const Y=(0,p.o8)(k.from.valueOf())===(0,p.o8)(_.from.valueOf()),Z=(0,p.o8)(k.to.valueOf())===(0,p.o8)(_.to.valueOf());return!(Y&&Z)}return!1}render(){const{datasource:k,datasource:{languageProvider:_},query:Y,ExtraFieldElement:Z,history:ae=[],theme:ce}=this.props,{labelBrowserVisible:q,syntaxLoaded:De,hint:oe}=this.state,te=_.metrics.length>0,fe=z(k.lookupsDisabled,De,te),Te=!(De&&te);return l.createElement(f.G,{storageKey:K,defaultValue:[]},(ge,he,me)=>l.createElement(l.Fragment,null,l.createElement("div",{className:"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1","data-testid":this.props["data-testid"]},l.createElement("button",{className:"gf-form-label query-keyword pointer",onClick:this.onClickChooserButton,disabled:Te,type:"button"},fe,l.createElement(d.J,{name:q?"angle-down":"angle-right"})),l.createElement("div",{className:"gf-form gf-form--grow flex-shrink-1 min-width-15"},l.createElement(V,{languageProvider:_,history:ae,onChange:this.onChangeQuery,onRunQuery:this.props.onRunQuery,initialValue:Y.expr??"",placeholder:"Enter a PromQL query\u2026"}))),q&&l.createElement("div",{className:"gf-form"},l.createElement(B,{languageProvider:_,onChange:this.onChangeLabelBrowser,lastUsedLabels:ge||[],storeLastUsedLabels:he,deleteLastUsedLabels:me})),Z,oe?l.createElement("div",{className:"query-row-break"},l.createElement("div",{className:"prom-query-field-info text-warning"},oe.label," ",oe.fix?l.createElement("button",{type:"button",className:(0,n.cx)((0,u.gN)(ce),"text-link","muted"),onClick:this.onClickHintFix},oe.fix.label):null)):null))}}const j=(0,i.HE)(Q)},54913:(J,R,e)=>{"use strict";e.d(R,{Z5:()=>Ye,Fu:()=>Lt,Zg:()=>Be,lj:()=>le,b0:()=>Le});var n=e(41407),a=e(39953),l=e(30559),r=e(17613),o=e(27770),g=e(82803),m=e(33155),d=e(3782),u=e(43324),i=e(50820),f=e(99242),c=e(32688),E=e(69171),p=e(26286);function h({options:de,onOptionsChange:X}){const se=(0,g.l4)(),re=le(se),pe=c.config.featureToggles.prometheusConfigOverhaulAuth;return a.createElement(f._,{title:"Alerting",className:(0,n.cx)(re.container,{[re.alertingTop]:pe})},a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(E._,{labelWidth:30,label:"Manage alerts via Alerting UI",disabled:de.readOnly,tooltip:a.createElement(a.Fragment,null,"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source. ",Be()),interactive:!0,className:re.switchField},a.createElement(p.r,{value:de.jsonData.manageAlerts!==!1,onChange:be=>X({...de,jsonData:{...de.jsonData,manageAlerts:be.currentTarget.checked}})}))))))}var y=e(74661),s=e(38637),v=(de=>(de.Public="AzureCloud",de.China="AzureChinaCloud",de.USGovernment="AzureUSGovernment",de.None="",de))(v||{});const C=[{value:"AzureCloud",label:"Azure"},{value:"AzureChinaCloud",label:"Azure China"},{value:"AzureUSGovernment",label:"Azure US Government"}];function D(de){switch(de.authType){case"msi":case"workloadidentity":return!0;case"clientsecret":return!!(de.azureCloud&&de.tenantId&&de.clientId&&de.clientSecret)}}const M=Symbol("Concealed client secret");function P(){return c.config.azure.cloud||v.Public}function x(de){if(de.secureJsonFields.azureClientSecret)return M;{const X=de.secureJsonData?.azureClientSecret;return typeof X=="string"&&X.length>0?X:void 0}}function S(de){return!!de.jsonData.azureCredentials}function I(){return c.config.azure.managedIdentityEnabled?{authType:"msi"}:{authType:"clientsecret",azureCloud:P()}}function T(de){const X=de.jsonData.azureCredentials;if(!X)return I();switch(X.authType){case"msi":case"workloadidentity":return X.authType==="msi"&&c.config.azure.managedIdentityEnabled||X.authType==="workloadidentity"&&c.config.azure.workloadIdentityEnabled?{authType:X.authType}:{authType:"clientsecret",azureCloud:P()};case"clientsecret":return{authType:"clientsecret",azureCloud:X.azureCloud||P(),tenantId:X.tenantId,clientId:X.clientId,clientSecret:x(de)}}}function O(de,X){switch(X.authType){case"msi":case"workloadidentity":if(X.authType==="msi"&&!c.config.azure.managedIdentityEnabled)throw new Error("Managed Identity authentication is not enabled in Grafana config.");if(X.authType==="workloadidentity"&&!c.config.azure.workloadIdentityEnabled)throw new Error("Workload Identity authentication is not enabled in Grafana config.");return de={...de,jsonData:{...de.jsonData,azureAuthType:X.authType,azureCredentials:{authType:X.authType}}},de;case"clientsecret":return de={...de,jsonData:{...de.jsonData,azureCredentials:{authType:"clientsecret",azureCloud:X.azureCloud||P(),tenantId:X.tenantId,clientId:X.clientId}},secureJsonData:{...de.secureJsonData,azureClientSecret:typeof X.clientSecret=="string"&&X.clientSecret.length>0?X.clientSecret:void 0},secureJsonFields:{...de.secureJsonFields,azureClientSecret:typeof X.clientSecret=="symbol"}},de}}function A(de){return{jsonData:{...de.jsonData,azureCredentials:I()}}}function B(de){return{jsonData:{...de.jsonData,azureAuth:void 0,azureCredentials:void 0,azureEndpointResourceId:void 0}}}var b=e(56921),W=e(4919),V=e(27325),w=e(81425);const K=de=>{const{credentials:X,azureCloudOptions:se,onCredentialsChange:re,getSubscriptions:pe,disabled:be,managedIdentityEnabled:xe,workloadIdentityEnabled:Pe}=de,we=D(X),[Fe,He]=(0,a.useState)([]),[Xe,dt]=(0,a.useReducer)($t=>$t+1,0),ct=(0,a.useMemo)(()=>{let $t=[{value:"clientsecret",label:"App Registration"}];return xe&&$t.push({value:"msi",label:"Managed Identity"}),Pe&&$t.push({value:"workloadidentity",label:"Workload Identity"}),$t},[xe,Pe]);(0,a.useEffect)(()=>{if(!pe||!we){At([]);return}let $t=!1;return pe().then(Ht=>{$t||At(Ht,Xe)}),()=>{$t=!0}},[Xe]);const At=($t,Ht=!1)=>{He($t),pe&&(Ht&&!X.defaultSubscriptionId&&$t.length>0?tt($t[0]):X.defaultSubscriptionId&&($t.find(tn=>tn.value===X.defaultSubscriptionId)||tt(void 0)))},Ie=$t=>{He([]);const Ht=xe?"msi":Pe?"workloadidentity":"clientsecret",Zt={...X,authType:$t.value||Ht,defaultSubscriptionId:void 0};re(Zt)},Ze=$t=>{if(X.authType==="clientsecret"){He([]);const Ht={...X,azureCloud:$t.value,defaultSubscriptionId:void 0};re(Ht)}},ut=$t=>{if(X.authType==="clientsecret"){He([]);const Ht={...X,tenantId:$t.target.value,defaultSubscriptionId:void 0};re(Ht)}},rt=$t=>{if(X.authType==="clientsecret"){He([]);const Ht={...X,clientId:$t.target.value,defaultSubscriptionId:void 0};re(Ht)}},St=$t=>{if(X.authType==="clientsecret"){He([]);const Ht={...X,clientSecret:$t.target.value,defaultSubscriptionId:void 0};re(Ht)}},st=()=>{if(X.authType==="clientsecret"){He([]);const $t={...X,clientSecret:"",defaultSubscriptionId:void 0};re($t)}},tt=$t=>{const Ht={...X,defaultSubscriptionId:$t?.value};re(Ht)},ft=c.config.featureToggles.prometheusConfigOverhaulAuth;return a.createElement("div",{className:"gf-form-group"},ct.length>1&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(b.c,{className:"width-12",tooltip:"Choose the type of authentication to Azure services"},"Authentication"),a.createElement(w.Ph,{className:"width-15",value:ct.find($t=>$t.value===X.authType),options:ct,onChange:Ie,isDisabled:be}))),X.authType==="clientsecret"&&a.createElement(a.Fragment,null,se&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(b.c,{className:"width-12",tooltip:"Choose an Azure Cloud"},"Azure Cloud"),a.createElement(w.Ph,{className:"width-15",value:se.find($t=>$t.value===X.azureCloud),options:se,onChange:Ze,isDisabled:be}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(b.c,{className:"width-12"},"Directory (tenant) ID"),a.createElement("div",{className:"width-15"},a.createElement(V.I,{className:(0,n.cx)(ft?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:X.tenantId||"",onChange:ut,disabled:be})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(b.c,{className:"width-12"},"Application (client) ID"),a.createElement("div",{className:"width-15"},a.createElement(V.I,{className:(0,n.cx)(ft?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:X.clientId||"",onChange:rt,disabled:be})))),typeof X.clientSecret=="symbol"?a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(b.c,{htmlFor:"azure-client-secret",className:"width-12"},"Client Secret"),a.createElement(V.I,{id:"azure-client-secret",className:(0,n.cx)(ft?"width-20":"width-25"),placeholder:"configured",disabled:!0})),!be&&a.createElement("div",{className:"gf-form"},a.createElement("div",{className:(0,n.cx)(ft?"max-width-20 gf-form-inline":"max-width-30 gf-form-inline")},a.createElement(W.zx,{variant:"secondary",type:"button",onClick:st},"reset")))):a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(b.c,{className:"width-12"},"Client Secret"),a.createElement("div",{className:"width-15"},a.createElement(V.I,{className:(0,n.cx)(ft?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:X.clientSecret||"",onChange:St,disabled:be}))))),pe&&a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(b.c,{className:"width-12"},"Default Subscription"),a.createElement("div",{className:(0,n.cx)(ft?"width-20":"width-25")},a.createElement(w.Ph,{value:X.defaultSubscriptionId?Fe.find($t=>$t.value===X.defaultSubscriptionId):void 0,options:Fe,onChange:tt,isDisabled:be})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"max-width-30 gf-form-inline"},a.createElement(W.zx,{variant:"secondary",size:"sm",type:"button",onClick:dt,disabled:!we},"Load Subscriptions"))))))},z=null,G=de=>{const{dataSourceConfig:X,onChange:se}=de,[re,pe]=(0,a.useState)(!!X.jsonData.azureEndpointResourceId),be=(0,a.useMemo)(()=>T(X),[X]),xe=Xe=>{se(O(X,Xe))},Pe=Xe=>{pe(Xe.currentTarget.checked),Xe.currentTarget.checked||se({...X,jsonData:{...X.jsonData,azureEndpointResourceId:void 0}})},we=Xe=>{re&&se({...X,jsonData:{...X.jsonData,azureEndpointResourceId:Xe.currentTarget.value}})},Fe=c.config.featureToggles.prometheusConfigOverhaulAuth,He=Fe?24:26;return a.createElement(a.Fragment,null,a.createElement("h6",null,"Azure authentication"),a.createElement(K,{managedIdentityEnabled:c.config.azure.managedIdentityEnabled,workloadIdentityEnabled:c.config.azure.workloadIdentityEnabled,credentials:be,azureCloudOptions:C,onCredentialsChange:xe,disabled:X.readOnly}),a.createElement("h6",null,"Azure configuration"),a.createElement("div",{className:"gf-form-group"},a.createElement(y.Z,null,a.createElement(E._,{labelWidth:He,label:"Override AAD audience",disabled:X.readOnly},a.createElement(p.x,{value:re,onChange:Pe}))),re&&a.createElement(y.Z,null,a.createElement(E._,{labelWidth:He,label:"Resource ID",disabled:X.readOnly},a.createElement(s.I,{className:(0,n.cx)(Fe?"width-20":"width-30"),value:X.jsonData.azureEndpointResourceId||"",onChange:we})))))},Q=null;var j=e(28789),F=e(66211),k=e(84461),_=e(37962),Y=e(47169);const Z=de=>{const{options:X,onOptionsChange:se,azureAuthSettings:re,sigV4AuthToggleEnabled:pe,renderSigV4Editor:be,secureSocksDSProxyEnabled:xe}=de,Pe=(0,j.T2)({config:X,onChange:se}),we=(0,g.l4)(),Fe=le(we);let He=[];const[Xe,dt]=(0,a.useState)(X.jsonData.sigV4Auth||!1),ct="custom-sigV4Id",At={id:ct,label:"SigV4 auth",description:"This is SigV4 auth description",component:a.createElement(a.Fragment,null,be)};pe&&He.push(At);const Ie=re?.azureAuthSupported&&re.getAzureAuthEnabled(X)||!1,[Ze,ut]=(0,a.useState)(Ie),rt="custom-azureAuthId",St={id:rt,label:"Azure auth",description:"This is Azure auth description",component:a.createElement(a.Fragment,null,re.azureSettingsUI&&a.createElement(re.azureSettingsUI,{dataSourceConfig:X,onChange:se}))};re?.azureAuthSupported&&He.push(St);function st(){return Xe?ct:Ze?rt:Pe.selectedMethod}let tt;switch(X.access){case"direct":tt=a.createElement(a.Fragment,null,"Your access method is ",a.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",Be());break;case"proxy":tt=a.createElement(a.Fragment,null,"Your access method is ",a.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",Be());break;default:tt=a.createElement(a.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",Be())}return a.createElement(a.Fragment,null,a.createElement(F.f,{urlPlaceholder:"http://localhost:9090",config:X,onChange:se,urlLabel:"Prometheus server URL",urlTooltip:tt}),a.createElement("hr",{className:`${Fe.hrTopSpace} ${Fe.hrBottomSpace}`}),a.createElement(k.g,{...Pe,customMethods:He,onAuthMethodSelect:ft=>{pe&&dt(ft===ct),re?.azureAuthSupported&&(ut(ft===rt),re.setAzureAuthEnabled(X,ft===rt)),se({...X,basicAuth:ft===_.H.BasicAuth,withCredentials:ft===_.H.CrossSiteCredentials,jsonData:{...X.jsonData,sigV4Auth:ft===ct,oauthPassThru:ft===_.H.OAuthForward}})},selectedMethod:st()}),a.createElement("div",{className:Fe.sectionBottomPadding}),xe&&a.createElement(a.Fragment,null,a.createElement(Y.i,{options:X,onOptionsChange:se}),a.createElement("div",{className:Fe.sectionBottomPadding})))};var ae=e(28830),ce=e.n(ae),q=e(47635),De=e(4148),oe=e(9558),te=e(60998),fe=e(83065),Te=e(3395),ge=e(64304),he=e(28888),me=e(92811);function ye({value:de,onChange:X,onDelete:se,disabled:re}){const[pe,be]=(0,a.useState)(!!de.datasourceUid),xe=(0,g.l4)(),Pe=le(xe);return a.createElement("div",{className:"gf-form-group"},a.createElement(E._,{label:"Internal link",labelWidth:Lt,disabled:re,tooltip:a.createElement(a.Fragment,null,"Enable this option if you have an internal link. When enabled, this reveals the data source selector. Select the backend tracing data store for your exemplar data. ",Be()),interactive:!0,className:Pe.switchField},a.createElement(a.Fragment,null,a.createElement(p.r,{value:pe,"aria-label":he.wl.components.DataSource.Prometheus.configPage.internalLinkSwitch,onChange:we=>be(we.currentTarget.checked)}))),pe?a.createElement(E._,{label:"Data source",labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"The data source the exemplar is going to navigate to. ",Be()),disabled:re,interactive:!0},a.createElement(me.q,{tracing:!0,current:de.datasourceUid,noDefault:!0,width:40,onChange:we=>X({...de,datasourceUid:we.uid,url:void 0})})):a.createElement(E._,{label:"URL",labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"The URL of the trace backend the user would go to see its trace. ",Be()),disabled:re,interactive:!0},a.createElement(s.I,{placeholder:"https://example.com/${__value.raw}",spellCheck:!1,width:40,value:de.url,onChange:we=>X({...de,datasourceUid:void 0,url:we.currentTarget.value})})),a.createElement(E._,{label:"URL Label",labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"Use to override the button label on the exemplar traceID field. ",Be()),disabled:re,interactive:!0},a.createElement(s.I,{placeholder:"Go to example.com",spellCheck:!1,width:40,value:de.urlDisplayLabel,onChange:we=>X({...de,urlDisplayLabel:we.currentTarget.value})})),a.createElement(E._,{label:"Label name",labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"The name of the field in the labels object that should be used to get the traceID. ",Be()),disabled:re,interactive:!0},a.createElement(s.I,{placeholder:"traceID",spellCheck:!1,width:40,value:de.name,onChange:we=>X({...de,name:we.currentTarget.value})})),!re&&a.createElement(E._,{label:"Remove exemplar link",labelWidth:Lt,disabled:re},a.createElement(W.zx,{variant:"destructive",title:"Remove exemplar link",icon:"times",onClick:we=>{we.preventDefault(),se()}})))}function ue({options:de,onChange:X,disabled:se}){const re=(0,g.l4)(),pe=le(re);return a.createElement("div",{className:pe.sectionBottomPadding},a.createElement(f._,{title:"Exemplars",className:pe.container},de&&de.map((be,xe)=>a.createElement(ye,{key:xe,value:be,onChange:Pe=>{const we=[...de];we.splice(xe,1,Pe),X(we)},onDelete:()=>{const Pe=[...de];Pe.splice(xe,1),X(Pe)},disabled:se})),!se&&a.createElement(W.zx,{variant:"secondary","aria-label":he.wl.components.DataSource.Prometheus.configPage.exemplarsAddButton,className:(0,n.css)`
              margin-bottom: 10px;
            `,icon:"plus",onClick:be=>{be.preventDefault();const xe=[...de||[],{name:"traceID"}];X(xe)}},"Add"),se&&!de&&a.createElement("i",null,"No exemplars configurations")))}const Oe={Prometheus:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"< 2.14.x"},{value:"2.14.0",label:"2.14.x"},{value:"2.15.0",label:"2.15.x"},{value:"2.16.0",label:"2.16.x"},{value:"2.17.0",label:"2.17.x"},{value:"2.18.0",label:"2.18.x"},{value:"2.19.0",label:"2.19.x"},{value:"2.20.0",label:"2.20.x"},{value:"2.21.0",label:"2.21.x"},{value:"2.22.0",label:"2.22.x"},{value:"2.23.0",label:"2.23.x"},{value:"2.24.0",label:"2.24.x"},{value:"2.25.0",label:"2.25.x"},{value:"2.26.0",label:"2.26.x"},{value:"2.27.0",label:"2.27.x"},{value:"2.28.0",label:"2.28.x"},{value:"2.29.0",label:"2.29.x"},{value:"2.30.0",label:"2.30.x"},{value:"2.31.0",label:"2.31.x"},{value:"2.32.0",label:"2.32.x"},{value:"2.33.0",label:"2.33.x"},{value:"2.34.0",label:"2.34.x"},{value:"2.35.0",label:"2.35.x"},{value:"2.36.0",label:"2.36.x"},{value:"2.37.0",label:"2.37.x"},{value:"2.38.0",label:"2.38.x"},{value:"2.39.0",label:"2.39.x"},{value:"2.40.0",label:"2.40.x"},{value:"2.41.0",label:"2.41.x"},{value:"2.42.0",label:"2.42.x"},{value:"2.43.0",label:"2.43.x"},{value:"2.44.0",label:"2.44.x"},{value:"2.45.0",label:"2.45.x"},{value:"2.46.0",label:"2.46.x"},{value:"2.47.0",label:"2.47.x"},{value:"2.48.0",label:"2.48.x"},{value:"2.49.0",label:"2.49.x"},{value:"2.50.0",label:"2.50.x"},{value:"2.50.1",label:"> 2.50.x"}],Mimir:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"2.0.x"},{value:"2.1.0",label:"2.1.x"},{value:"2.2.0",label:"2.2.x"},{value:"2.3.0",label:"2.3.x"},{value:"2.4.0",label:"2.4.x"},{value:"2.5.0",label:"2.5.x"},{value:"2.6.0",label:"2.6.x"},{value:"2.7.0",label:"2.7.x"},{value:"2.8.0",label:"2.8.x"},{value:"2.9.0",label:"2.9.x"},{value:"2.9.1",label:"> 2.9.x"}],Thanos:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 0.16.x"},{value:"0.16.0",label:"0.16.x"},{value:"0.17.0",label:"0.17.x"},{value:"0.18.0",label:"0.18.x"},{value:"0.19.0",label:"0.19.x"},{value:"0.20.0",label:"0.20.x"},{value:"0.21.0",label:"0.21.x"},{value:"0.22.0",label:"0.22.x"},{value:"0.23.0",label:"0.23.x"},{value:"0.24.0",label:"0.24.x"},{value:"0.25.0",label:"0.25.x"},{value:"0.26.0",label:"0.26.x"},{value:"0.27.0",label:"0.27.x"},{value:"0.28.0",label:"0.28.x"},{value:"0.29.0",label:"0.29.x"},{value:"0.30.0",label:"0.30.x"},{value:"0.31.0",label:"0.31.x"},{value:"0.31.1",label:"> 0.31.x"}],Cortex:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 1.0.0"},{value:"1.0.0",label:"1.0.0"},{value:"1.1.0",label:"1.1.x"},{value:"1.2.0",label:"1.2.x"},{value:"1.3.0",label:"1.3.x"},{value:"1.4.0",label:"1.4.x"},{value:"1.5.0",label:"1.5.x"},{value:"1.6.0",label:"1.6.x"},{value:"1.7.0",label:"1.7.x"},{value:"1.8.0",label:"1.8.x"},{value:"1.9.0",label:"1.9.x"},{value:"1.10.0",label:"1.10.x"},{value:"1.11.0",label:"1.11.x"},{value:"1.13.0",label:"1.13.x"},{value:"1.14.0",label:"> 1.13.x"}]},Ue=[{value:"POST",label:"POST"},{value:"GET",label:"GET"}],at=[{value:fe.c.Builder,label:"Builder"},{value:fe.c.Code,label:"Code"}],Ne=[{value:ge.x3.Low,label:"Low"},{value:ge.x3.Medium,label:"Medium"},{value:ge.x3.High,label:"High"},{value:ge.x3.None,label:"None"}],_e=[{value:ge.T8.Prometheus,label:ge.T8.Prometheus},{value:ge.T8.Cortex,label:ge.T8.Cortex},{value:ge.T8.Mimir,label:ge.T8.Mimir},{value:ge.T8.Thanos,label:ge.T8.Thanos}],Ke=/^$|^\d+(ms|[Mwdhmsy])$/,et=/(\d+)(.+)/,ze="Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s",je=(de,X)=>{if(!X||!Oe[X])return;const re=Oe[X]?.filter(be=>!!be.value&&ce().lte(be.value,de)).map(be=>be.value),pe=re[re.length-1];if(pe){const be=ce().diff(pe,de);if(["patch","prepatch","prerelease",null].includes(be))return pe}},Qe=de=>{console.warn("Error fetching version from buildinfo API, must manually select version!",de)},We=(de,X,se)=>{se(de).then(re=>{(0,De.i)().get(`/api/datasources/uid/${re.uid}/resources/version-detect`).then(pe=>{const be=pe.data?.version??"";if(be&&ce().valid(be)){const xe=je(be,re.jsonData.prometheusType);xe&&se({...re,jsonData:{...re.jsonData,prometheusVersion:xe}}).then(Pe=>{X(Pe)})}else Qe()})}).catch(re=>{Qe(re)})},ke=de=>{const{options:X,onOptionsChange:se}=de,re=(0,te.qj)();X.jsonData.httpMethod||(X.jsonData.httpMethod="POST");const pe=(0,g.l4)(),be=le(pe),[xe,Pe]=(0,a.useState)({timeInterval:"",queryTimeout:"",incrementalQueryOverlapWindow:""});return a.createElement(a.Fragment,null,a.createElement(f._,{title:"Interval behaviour",className:be.container},a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(E._,{label:"Scrape interval",labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"This interval is how frequently Prometheus scrapes targets. Set this to the typical scrape and evaluation interval configured in your Prometheus config file. If you set this to a greater value than your Prometheus config file interval, Grafana will evaluate the data according to this interval and you will see less data points. Defaults to 15s. ",Be()),interactive:!0,disabled:X.readOnly},a.createElement(a.Fragment,null,a.createElement(s.I,{className:"width-20",value:X.jsonData.timeInterval,spellCheck:!1,placeholder:"15s",onChange:lt("timeInterval",X,se),onBlur:we=>Pe({...xe,timeInterval:we.currentTarget.value})}),Le(xe.timeInterval,Ke,ze))))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(E._,{label:"Query timeout",labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"Set the Prometheus query timeout. ",Be()),interactive:!0,disabled:X.readOnly},a.createElement(a.Fragment,null,a.createElement(s.I,{className:"width-20",value:X.jsonData.queryTimeout,onChange:lt("queryTimeout",X,se),spellCheck:!1,placeholder:"60s",onBlur:we=>Pe({...xe,queryTimeout:we.currentTarget.value})}),Le(xe.queryTimeout,Ke,ze))))))),a.createElement(f._,{title:"Query editor",className:be.container},a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement(E._,{label:"Default editor",labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"Set default editor option for all users of this data source. ",Be()),interactive:!0,disabled:X.readOnly},a.createElement(oe.Ph,{"aria-label":"Default Editor (Code or Builder)",options:at,value:at.find(we=>we.value===X.jsonData.defaultEditor)??at.find(we=>we.value===fe.c.Builder),onChange:lt("defaultEditor",X,se),width:40}))),a.createElement("div",{className:"gf-form"},a.createElement(E._,{labelWidth:Lt,label:"Disable metrics lookup",tooltip:a.createElement(a.Fragment,null,"Checking this option will disable the metrics chooser and metric/label support in the query field's autocomplete. This helps if you have performance issues with bigger Prometheus instances."," ",Be()),interactive:!0,disabled:X.readOnly,className:be.switchField},a.createElement(p.r,{value:X.jsonData.disableMetricsLookup??!1,onChange:(0,q.hz)(de,"disableMetricsLookup")}))))),a.createElement(f._,{title:"Performance",className:be.container},!X.jsonData.prometheusType&&!X.jsonData.prometheusVersion&&X.readOnly&&a.createElement("div",{className:be.versionMargin},"For more information on configuring prometheus type and version in data sources, see the"," ",a.createElement("a",{className:be.textUnderline,href:"https://grafana.com/docs/grafana/latest/administration/provisioning/"},"provisioning documentation"),"."),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(E._,{label:"Prometheus type",labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"Set this to the type of your prometheus database, e.g. Prometheus, Cortex, Mimir or Thanos. Changing this field will save your current settings, and attempt to detect the version. Certain types of Prometheus support or do not support various APIs. For example, some types support regex matching for label queries to improve performance. Some types have an API for metadata. If you set this incorrectly you may experience odd behavior when querying metrics and labels. Please check your Prometheus documentation to ensure you enter the correct type. ",Be()),interactive:!0,disabled:X.readOnly},a.createElement(oe.Ph,{"aria-label":"Prometheus type",options:_e,value:_e.find(we=>we.value===X.jsonData.prometheusType),onChange:lt("prometheusType",{...X,jsonData:{...X.jsonData,prometheusVersion:void 0}},we=>(We(we,se,re),se({...we,jsonData:{...we.jsonData,prometheusVersion:void 0}}))),width:40})))),a.createElement("div",{className:"gf-form-inline"},X.jsonData.prometheusType&&a.createElement("div",{className:"gf-form"},a.createElement(E._,{label:`${X.jsonData.prometheusType} version`,labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"Use this to set the version of your ",X.jsonData.prometheusType," instance if it is not automatically configured. ",Be()),interactive:!0,disabled:X.readOnly},a.createElement(oe.Ph,{"aria-label":`${X.jsonData.prometheusType} type`,options:Oe[X.jsonData.prometheusType],value:Oe[X.jsonData.prometheusType]?.find(we=>we.value===X.jsonData.prometheusVersion),onChange:lt("prometheusVersion",X,se),width:40})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form max-width-30"},a.createElement(E._,{label:"Cache level",labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"Sets the browser caching level for editor queries. Higher cache settings are recommended for high cardinality data sources."),interactive:!0,disabled:X.readOnly},a.createElement(oe.Ph,{width:40,onChange:lt("cacheLevel",X,se),options:Ne,value:Ne.find(we=>we.value===X.jsonData.cacheLevel)??ge.x3.Low})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form max-width-30"},a.createElement(E._,{label:"Incremental querying (beta)",labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"This feature will change the default behavior of relative queries to always request fresh data from the prometheus instance, instead query results will be cached, and only new records are requested. Turn this on to decrease database and network load."),interactive:!0,className:be.switchField,disabled:X.readOnly},a.createElement(p.r,{value:X.jsonData.incrementalQuerying??!1,onChange:(0,q.hz)(de,"incrementalQuerying")})))),a.createElement("div",{className:"gf-form-inline"},X.jsonData.incrementalQuerying&&a.createElement(E._,{label:"Query overlap window",labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"Set a duration like 10m or 120s or 0s. Default of 10 minutes. This duration will be added to the duration of each incremental request."),interactive:!0,disabled:X.readOnly},a.createElement(a.Fragment,null,a.createElement(s.I,{onBlur:we=>Pe({...xe,incrementalQueryOverlapWindow:we.currentTarget.value}),className:"width-20",value:X.jsonData.incrementalQueryOverlapWindow??Te.Ji,onChange:lt("incrementalQueryOverlapWindow",X,se),spellCheck:!1}),Le(xe.incrementalQueryOverlapWindow,et,ze)))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form max-width-30"},a.createElement(E._,{label:"Disable recording rules (beta)",labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"This feature will disable recording rules Turn this on to improve dashboard performance"),interactive:!0,className:be.switchField,disabled:X.readOnly},a.createElement(p.r,{value:X.jsonData.disableRecordingRules??!1,onChange:(0,q.hz)(de,"disableRecordingRules")})))))),a.createElement(f._,{title:"Other",className:be.container},a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form max-width-30"},a.createElement(E._,{label:"Custom query parameters",labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"Add custom parameters to the Prometheus query URL. For example timeout, partial_response, dedup, or max_source_resolution. Multiple parameters should be concatenated together with an \u2018&\u2019. ",Be()),interactive:!0,disabled:X.readOnly},a.createElement(s.I,{className:"width-20",value:X.jsonData.customQueryParameters,onChange:lt("customQueryParameters",X,se),spellCheck:!1,placeholder:"Example: max_source_resolution=5m&timeout=10"})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(E._,{labelWidth:Lt,tooltip:a.createElement(a.Fragment,null,"You can use either POST or GET HTTP method to query your Prometheus data source. POST is the recommended method as it allows bigger queries. Change this to GET if you have a Prometheus version older than 2.1 or if POST requests are restricted in your network. ",Be()),interactive:!0,label:"HTTP method",disabled:X.readOnly},a.createElement(oe.Ph,{width:40,"aria-label":"Select HTTP method",options:Ue,value:Ue.find(we=>we.value===X.jsonData.httpMethod),onChange:lt("httpMethod",X,se)})))))),a.createElement(ue,{options:X.jsonData.exemplarTraceIdDestinations,onChange:we=>(0,q.tp)({onOptionsChange:se,options:X},"exemplarTraceIdDestinations",we),disabled:X.readOnly}))},ot=de=>de?de.hasOwnProperty("currentTarget")?de.currentTarget.value:de.value:"",lt=(de,X,se)=>re=>{se({...X,jsonData:{...X.jsonData,[de]:ot(re)}})};var Ct=e(97250);const wt=({config:de,onChange:X,className:se})=>{const re=xe=>{X({...de,jsonData:{...de.jsonData,keepCookies:xe}})},pe=xe=>{X({...de,jsonData:{...de.jsonData,timeout:parseInt(xe.currentTarget.value,10)}})},be={container:(0,n.css)({maxWidth:578})};return a.createElement(a.Fragment,null,a.createElement(f._,{title:"Advanced HTTP settings",className:(0,n.cx)(be.container,se)},a.createElement(E._,{htmlFor:"advanced-http-cookies",label:"Allowed cookies",labelWidth:Lt,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",disabled:de.readOnly,grow:!0},a.createElement(Ct.B,{className:"width-20",id:"advanced-http-cookies",placeholder:"New cookie (hit enter to add)",tags:de.jsonData.keepCookies,onChange:re})),a.createElement(E._,{htmlFor:"advanced-http-timeout",label:"Timeout",labelWidth:Lt,tooltip:"HTTP request timeout in seconds",disabled:de.readOnly,grow:!0},a.createElement(s.I,{className:"width-20",id:"advanced-http-timeout",type:"number",min:0,placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:de.jsonData.timeout,onChange:pe}))))},Lt=30,Ye=de=>{const{options:X,onOptionsChange:se}=de,re=i.config.featureToggles.prometheusConfigOverhaulAuth,pe=(0,a.useRef)(de.options.access==="direct"),be={azureAuthSupported:i.config.azureAuthEnabled,getAzureAuthEnabled:we=>S(we),setAzureAuthEnabled:(we,Fe)=>Fe?A(we):B(we),azureSettingsUI:G},xe=(0,g.l4)(),Pe=le(xe);return a.createElement(a.Fragment,null,X.access==="direct"&&a.createElement(m.b,{title:"Error",severity:"error"},"Browser access mode in the Prometheus data source is no longer available. Switch to server access mode."),re?a.createElement(a.Fragment,null,a.createElement(r.j,{dataSourceName:"Prometheus",docsLink:"https://grafana.com/docs/grafana/latest/datasources/prometheus/configure-prometheus-data-source/"}),a.createElement("hr",{className:`${Pe.hrTopSpace} ${Pe.hrBottomSpace}`}),a.createElement(Z,{options:X,onOptionsChange:se,azureAuthSettings:be,sigV4AuthToggleEnabled:i.config.sigV4AuthEnabled,renderSigV4Editor:a.createElement(l.IW,{inExperimentalAuthComponent:!0,...de}),secureSocksDSProxyEnabled:i.config.secureSocksDSProxyEnabled})):a.createElement(d.E,{defaultUrl:"http://localhost:9090",dataSourceConfig:X,showAccessOptions:pe.current,onChange:se,sigV4AuthToggleEnabled:i.config.sigV4AuthEnabled,azureAuthSettings:be,renderSigV4Editor:a.createElement(l.IW,{...de}),secureSocksDSProxyEnabled:i.config.secureSocksDSProxyEnabled,urlLabel:"Prometheus server URL",urlDocs:Be()}),re?a.createElement(a.Fragment,null,a.createElement("hr",null),a.createElement(o.K,{className:Pe.advancedSettings,title:"Advanced settings",description:"Additional settings are optional settings that can be configured for more control over your data source."},a.createElement(wt,{className:Pe.advancedHTTPSettingsMargin,config:X,onChange:se}),a.createElement(h,{options:X,onOptionsChange:se}),a.createElement(ke,{options:X,onOptionsChange:se}))):a.createElement(a.Fragment,null,a.createElement("hr",{className:Pe.hrTopSpace}),a.createElement("h3",{className:Pe.sectionHeaderPadding},"Additional settings"),a.createElement("p",{className:`${Pe.secondaryGrey} ${Pe.subsectionText}`},"Additional settings are optional settings that can be configured for more control over your data source."),a.createElement(h,{options:X,onOptionsChange:se}),a.createElement(ke,{options:X,onOptionsChange:se})))};function Be(de){const X="https://grafana.com/docs/grafana/latest/datasources/prometheus/#configure-the-data-source";return a.createElement("a",{href:de||X,target:"_blank",rel:"noopener noreferrer"},"Visit docs for more details here.")}const Le=(de,X,se)=>{const re="Value is not valid";return de&&!de.match(X)?a.createElement(u.S,null,se||re):!0};function le(de){return{additionalSettings:(0,n.css)`
      margin-bottom: 25px;
    `,secondaryGrey:(0,n.css)`
      color: ${de.colors.secondary.text};
      opacity: 65%;
    `,inlineError:(0,n.css)`
      margin: 0px 0px 4px 245px;
    `,switchField:(0,n.css)`
      align-items: center;
    `,sectionHeaderPadding:(0,n.css)`
      padding-top: 32px;
    `,sectionBottomPadding:(0,n.css)`
      padding-bottom: 28px;
    `,subsectionText:(0,n.css)`
      font-size: 12px;
    `,hrBottomSpace:(0,n.css)`
      margin-bottom: 56px;
    `,hrTopSpace:(0,n.css)`
      margin-top: 50px;
    `,textUnderline:(0,n.css)`
      text-decoration: underline;
    `,versionMargin:(0,n.css)`
      margin-bottom: 12px;
    `,advancedHTTPSettingsMargin:(0,n.css)`
      margin: 24px 0 8px 0;
    `,advancedSettings:(0,n.css)`
      padding-top: 32px;
    `,alertingTop:(0,n.css)`
      margin-top: 40px !important;
    `,overhaulPageHeading:(0,n.css)`
      font-weight: 400;
    `,container:(0,n.css)`
      maxwidth: 578;
    `}}},52583:(J,R,e)=>{"use strict";e.d(R,{QG:()=>Lt,vQ:()=>Ye});var n=e(86832),a=e(8894),l=e(31312),r=e(63302),o=e(15056),g=e(3195),m=e(74539),d=e(71476),u=e(82696),i=e(81595),f=e(10752),c=e(28830),E=e.n(c),p=e(96083),h=e(81626),y=e(72964),s=e(10694),v=e(92403),C=e(92743),D=e(4649),M=e(4148),P=e(44951),x=e(6278),S=e(41182),I=e(74149),T=e(39953),O=e(91386),A=e(87355),B=e(46101),b=e(30623),W=e(55629),V=e(28448),w=e(38637),K=e(94180);function z(X){const se=X.annotation,re=X.onAnnotationChange,pe={expr:se.expr,refId:se.name,interval:se.step};return T.createElement(T.Fragment,null,T.createElement(O._,null,T.createElement(K.j,{...X,query:pe,showExplain:!1,onChange:be=>{re({...se,expr:be.expr})}}),T.createElement(A.p,null,T.createElement(B.S,{label:"Min step",tooltip:T.createElement(T.Fragment,null,"An additional lower limit for the step parameter of the Prometheus query and for the"," ",T.createElement("code",null,"$__interval")," and ",T.createElement("code",null,"$__rate_interval")," variables.")},T.createElement(V.H,{type:"text","aria-label":"Set lower limit for the step parameter",placeholder:"auto",minWidth:10,onCommitChange:be=>{re({...se,step:be.currentTarget.value})},defaultValue:pe.interval})))),T.createElement(b.T,{v:.5}),T.createElement(A.p,null,T.createElement(B.S,{label:"Title",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},T.createElement(w.I,{type:"text",placeholder:"{{alertname}}",value:se.titleFormat,onChange:be=>{re({...se,titleFormat:be.currentTarget.value})}})),T.createElement(B.S,{label:"Tags"},T.createElement(w.I,{type:"text",placeholder:"label1,label2",value:se.tagKeys,onChange:be=>{re({...se,tagKeys:be.currentTarget.value})}})),T.createElement(B.S,{label:"Text",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},T.createElement(w.I,{type:"text",placeholder:"{{instance}}",value:se.textFormat,onChange:be=>{re({...se,textFormat:be.currentTarget.value})}})),T.createElement(B.S,{label:"Series value as timestamp",tooltip:"The unit of timestamp is milliseconds. If the unit of the series value is seconds, multiply its range vector by 1000."},T.createElement(W.r,{value:se.useValueForTime,onChange:be=>{re({...se,useValueForTime:be.currentTarget.value})}}))))}var G=e(47810),Q=e(63163),j=e(89527),F=e(95522),k=e(64304);const _=/^label_names\(\)\s*$/,Y=/^label_values\((?:(.+),\s*)?([a-zA-Z_$][a-zA-Z0-9_]*)\)\s*$/,Z=/^metrics\((.+)\)\s*$/,ae=/^query_result\((.+)\)\s*$/,ce=/^label_names\((.+)\)\s*$/;function q(X){if(typeof X!="string")return X;const se={refId:"PrometheusDatasource-VariableQuery",qryType:k.jo.LabelNames},re=X.match(ce);if(re)return{...se,qryType:k.jo.LabelNames,match:re[1]};const pe=X.match(_);if(pe)return{...se,qryType:k.jo.LabelNames};const be=X.match(/^label_values\(/);if(be){const we=X.match(Y),Fe=we?we[2]:"",He=we?we[1]:"";if(He){const Xe=(0,F._)(He);return{...se,qryType:k.jo.LabelValues,label:Fe,metric:Xe.query.metric,labelFilters:Xe.query.labels}}else return{...se,qryType:k.jo.LabelValues,label:Fe}}const xe=X.match(/^metrics\(/);if(xe){const we=X.match(Z),Fe=we?we[1]:"";return{...se,qryType:k.jo.MetricNames,metric:Fe}}const Pe=X.match(/^query_result\(/);if(Pe){const we=X.match(ae),Fe=we?we[1]:"";return{...se,qryType:k.jo.VarQueryResult,varQuery:Fe}}return!pe&&!be&&!xe&&!Pe?{...se,qryType:k.jo.SeriesQuery,seriesQuery:X}:se}function De(X){switch(X.qryType){case k.jo.LabelNames:return X.match?`label_names(${X.match})`:"label_names()";case k.jo.LabelValues:if(X.metric||X.labelFilters&&X.labelFilters.length!==0){const re={metric:X.metric,labels:X.labelFilters??[],operations:[]};return`label_values(${j.Z.renderQuery(re)},${X.label})`}else return`label_values(${X.label})`;case k.jo.MetricNames:return`metrics(${X.metric})`;case k.jo.VarQueryResult:return`query_result(${oe(X.varQuery)})`;case k.jo.SeriesQuery:return X.seriesQuery??"";case k.jo.ClassicQuery:return X.classicQuery??""}return""}function oe(X){return X?X.replace(/[\r\n]+/gm,""):""}class te{constructor(se,re){this.datasource=se,this.query=re,this.datasource=se,this.query=re,this.range=(0,x.$t)().timeRange()}process(){const se=_,re=ce,pe=/^label_values\((?:(.+),\s*)?([a-zA-Z_][a-zA-Z0-9_]*)\)\s*$/,be=Z,xe=ae,Pe=this.query.match(se),we=this.query.match(re);if(we){const ct=`{__name__=~".*${we[1]}.*"}`;return this.datasource.languageProvider.getSeriesLabels(ct,[]).then(At=>At.map(Ie=>({text:Ie})))}if(Pe)return this.datasource.getTagKeys({filters:[]});const Fe=this.query.match(pe);if(Fe)return Fe[1]?this.labelValuesQuery(Fe[2],Fe[1]):this.labelValuesQuery(Fe[2]);const He=this.query.match(be);if(He)return this.metricNameQuery(He[1]);const Xe=this.query.match(xe);return Xe?(0,l.n)(this.queryResultQuery(Xe[1])):["label_values()","metrics()","query_result()"].includes(this.query)?Promise.resolve([]):this.metricNameAndLabelsQuery(this.query)}labelValuesQuery(se,re){const pe=(0,Q.jj)(this.range.from,!1),be=(0,Q.jj)(this.range.to,!0),xe={...re&&{"match[]":re},start:pe.toString(),end:be.toString()};if(!re||this.datasource.hasLabelsMatchAPISupport()){const Pe=`/api/v1/label/${se}/values`;return this.datasource.metadataRequest(Pe,xe).then(we=>(0,n.map)(we.data.data,Fe=>({text:Fe})))}else{const Pe="/api/v1/series";return this.datasource.metadataRequest(Pe,xe).then(we=>{const Fe=(0,n.map)(we.data.data,He=>He[se]||"").filter(He=>He!=="");return(0,n.uniq)(Fe).map(He=>({text:He,expandable:!0}))})}}metricNameQuery(se){const re=(0,Q.jj)(this.range.from,!1),pe=(0,Q.jj)(this.range.to,!0),be={start:re.toString(),end:pe.toString()},xe="/api/v1/label/__name__/values";return this.datasource.metadataRequest(xe,be).then(Pe=>(0,n.chain)(Pe.data.data).filter(we=>new RegExp(se).test(we)).map(we=>({text:we,expandable:!0})).value())}queryResultQuery(se){const re=(0,Q.jj)(this.range.to,!0),pe={expr:se};return this.datasource.performInstantQuery(pe,re).pipe((0,d.U)(be=>{switch(be.data.data.resultType){case"scalar":case"string":return[{text:be.data.data.result[1]||"",expandable:!1}];case"vector":return(0,n.map)(be.data.data.result,xe=>{let Pe=xe.metric.__name__||"";return delete xe.metric.__name__,Pe+="{"+(0,n.map)(xe.metric,(we,Fe)=>Fe+'="'+we+'"').join(",")+"}",Pe+=" "+xe.value[1]+" "+xe.value[0]*1e3,{text:Pe,expandable:!0}});default:throw Error(`Unknown/Unhandled result type: [${be.data.data.resultType}]`)}}))}metricNameAndLabelsQuery(se){const re=(0,Q.jj)(this.range.from,!1),pe=(0,Q.jj)(this.range.to,!0),be={"match[]":se,start:re.toString(),end:pe.toString()},xe="/api/v1/series",Pe=this;return this.datasource.metadataRequest(xe,be).then(we=>(0,n.map)(we.data.data,Fe=>({text:Pe.datasource.getOriginalMetricName(Fe),expandable:!0})))}}const fe=20;function Te(X,se,re){const pe=[];if(X.trim().match(/^\w+_bucket$|^\w+_bucket{.*}$/)){const xe="Selected metric has buckets.";pe.push({type:"HISTOGRAM_QUANTILE",label:xe,fix:{label:"Consider calculating aggregated quantile by adding histogram_quantile().",action:{type:"ADD_HISTOGRAM_QUANTILE",query:X}}})}if(X.indexOf("rate(")===-1&&X.indexOf("increase(")===-1){const xe=X.match(/\b(\w+_(total|sum|count))\b/);let Pe=xe?xe[1]:"";const we=re?.languageProvider?.metricsMetadata;let Fe=!1;if(we&&(Pe=Array.from(X.matchAll(/\$?[a-zA-Z_:][a-zA-Z0-9_:]*/g)).map(([Xe])=>Xe).filter(Xe=>!Xe.startsWith("$")).flatMap(Xe=>Xe.split(":")).find(Xe=>{const dt=we[Xe];return dt&&dt.type.toLowerCase()==="counter"?(Fe=!0,!0):!1})??""),Pe){const He=X.trim().match(/^\w+$|^\w+{.*}$/);let dt=`Selected metric ${Fe?"is":"looks like"} a counter.`,ct;He?ct={label:"Consider calculating rate of counter by adding rate().",action:{type:"ADD_RATE",query:X}}:dt=`${dt} Consider calculating rate of counter by adding rate().`,pe.push({type:"APPLY_RATE",label:dt,fix:ct})}}if(re&&re.ruleMappings){const xe=re.ruleMappings,Pe=Object.keys(xe).reduce((we,Fe)=>X.search(Fe)>-1?{...we,[Fe]:xe[Fe]}:we,{});if((0,n.size)(Pe)>0){const we="Query contains recording rules.";pe.push({type:"EXPAND_RULES",label:we,fix:{label:"Expand rules",action:{type:"EXPAND_RULES",query:X,options:Pe}}})}}return se&&se.length>=fe&&X.trim().match(/^\w+$/)&&pe.push({type:"ADD_SUM",label:"Many time series results returned.",fix:{label:"Consider aggregating with sum().",action:{type:"ADD_SUM",query:X,preventSubmit:!0}}}),pe}function ge(X){const se=[];return X.directUrl.includes("/loki")&&!X.languageProvider.metrics.length&&se.push({label:"Using Loki as a Prometheus data source is no longer supported. You must use the Loki data source for your Loki instance.",type:"INFO"}),X.lookupsDisabled&&se.push({label:"Labels and metrics lookup was disabled in data source settings.",type:"INFO"}),se}var he=e(3395),me=e(52226),ye=e(72639),ue=e(32688);function Oe(X,se,re){const{app:pe,targets:be}=se;if(!(pe===p.zj.Dashboard||pe===p.zj.PanelViewer))for(const xe of be)(0,ye.ff)("grafana_prometheus_query_executed",{app:pe,grafana_version:ue.config.buildInfo.version,has_data:X.data.some(Pe=>Pe.length>0),has_error:X.error!==void 0,expr:xe.expr,format:xe.format,instant:xe.instant,range:xe.range,exemplar:xe.exemplar,hinting:xe.hinting,interval:xe.interval,intervalFactor:xe.intervalFactor,utcOffsetSec:xe.utcOffsetSec,legend:xe.legendFormat,valueWithRefId:xe.valueWithRefId,requestId:se.requestId,showingGraph:xe.showingGraph,showingTable:xe.showingTable,editor_mode:xe.editorMode,simultaneously_sent_query_count:be.length,time_range_from:se?.range?.from?.toISOString(),time_range_to:se?.range?.to?.toISOString(),time_taken:Date.now()-re.getTime()})}var Ue=e(22605),at=e(95405),Ne=e(79059),_e=e(74661),Ke=e(69171),et=e(9558),ze=e(68421),je=e(85308);const Qe=[{label:"Label names",value:k.jo.LabelNames},{label:"Label values",value:k.jo.LabelValues},{label:"Metrics",value:k.jo.MetricNames},{label:"Query result",value:k.jo.VarQueryResult},{label:"Series query",value:k.jo.SeriesQuery},{label:"Classic query",value:k.jo.ClassicQuery}],We="PrometheusVariableQueryEditor-VariableQuery",ke=({onChange:X,query:se,datasource:re})=>{const[pe,be]=(0,T.useState)(void 0),[xe,Pe]=(0,T.useState)(""),[we,Fe]=(0,T.useState)(""),[He,Xe]=(0,T.useState)(""),[dt,ct]=(0,T.useState)(""),[At,Ie]=(0,T.useState)(""),[Ze,ut]=(0,T.useState)(""),[rt,St]=(0,T.useState)([]),[st,tt]=(0,T.useState)([]);(0,T.useEffect)(()=>{if(se)if(se.qryType===k.jo.ClassicQuery)be(se.qryType),ut(se.query??"");else{const mt=ot(se);Fe(mt.match??""),be(mt.qryType),Pe(mt.label??""),Xe(mt.metric??""),tt(mt.labelFilters??[]),ct(mt.varQuery??""),Ie(mt.seriesQuery??""),ut(mt.classicQuery??"")}},[se]),(0,T.useEffect)(()=>{if(pe!==k.jo.LabelValues)return;const mt=re.getVariables().map(xt=>({label:xt,value:xt}));if(!He)re.getTagKeys({filters:[]}).then(xt=>{const Ft=xt.map(({text:zt})=>({label:zt,value:zt}));St([...mt,...Ft])});else{const xt=[{label:"__name__",op:"=",value:He}],Ft=j.Z.renderLabels(xt);re.hasLabelsMatchAPISupport()?re.languageProvider.fetchSeriesLabelsMatch(Ft).then(zt=>{const ln=Object.keys(zt).map(Pt=>({label:Pt,value:Pt}));St([...mt,...ln])}):re.languageProvider.fetchSeriesLabels(Ft).then(zt=>{const ln=Object.keys(zt).map(Pt=>({label:Pt,value:Pt}));St([...mt,...ln])})}},[re,pe,He]);const ft=(mt,xt)=>{const Jt={...{qryType:pe,label:xe,metric:He,match:we,varQuery:dt,seriesQuery:At,classicQuery:Ze,refId:"PrometheusVariableQueryEditor-VariableQuery"},...mt,...xt?{labelFilters:xt}:{labelFilters:st}},ln=De(Jt);X({query:ln,qryType:Jt.qryType,refId:We})},$t=mt=>{be(mt.value),mt.value!==k.jo.SeriesQuery&&ft({qryType:mt.value??0})},Ht=mt=>{const xt=mt&&mt.value?mt.value:"";Pe(xt),pe===k.jo.LabelValues&&xt&&ft({label:xt})},Zt=mt=>{Xe(mt.metric),tt(mt.labels);const xt=mt.metric,Ft=mt.labels??[];pe===k.jo.LabelValues&&xe&&(xt||Ft)&&ft({qryType:pe,metric:xt},Ft)},tn=mt=>{pe===k.jo.LabelNames&&ft({qryType:pe,match:mt})},on=mt=>{pe===k.jo.MetricNames&&mt&&ft({metric:mt})},qt=mt=>{ct(mt.currentTarget.value)},pn=mt=>{Ie(mt.currentTarget.value)},Cn=mt=>{ut(mt.currentTarget.value)},Rt=(0,T.useCallback)(()=>({metric:He,labels:st,operations:[]}),[He,st]);return T.createElement(T.Fragment,null,T.createElement(_e.Z,null,T.createElement(Ke._,{label:"Query type",labelWidth:20,tooltip:T.createElement("div",null,"The Prometheus data source plugin provides the following query types for template variables.")},T.createElement(et.Ph,{placeholder:"Select query type","aria-label":"Query type",onChange:$t,value:pe,options:Qe,width:25}))),pe===k.jo.LabelValues&&T.createElement(T.Fragment,null,T.createElement(_e.Z,null,T.createElement(Ke._,{label:"Label",labelWidth:20,required:!0,"aria-labelledby":"label-select",tooltip:T.createElement("div",null,"Returns a list of label values for the label name in all metrics unless the metric is specified.")},T.createElement(et.Ph,{"aria-label":"label-select",onChange:Ht,value:xe,options:rt,width:25,allowCustomValue:!0,isClearable:!0}))),T.createElement(je.U,{query:Rt(),datasource:re,onChange:Zt,variableEditor:!0})),pe===k.jo.LabelNames&&T.createElement(_e.Z,null,T.createElement(Ke._,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric regex",tooltip:T.createElement("div",null,"Returns a list of label names, optionally filtering by specified metric regex.")},T.createElement(w.I,{type:"text","aria-label":"Metric regex",placeholder:"Metric regex",value:we,onBlur:mt=>{Fe(mt.currentTarget.value),tn(mt.currentTarget.value)},onChange:mt=>{Fe(mt.currentTarget.value)},width:25}))),pe===k.jo.MetricNames&&T.createElement(_e.Z,null,T.createElement(Ke._,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric selector",tooltip:T.createElement("div",null,"Returns a list of metrics matching the specified metric regex.")},T.createElement(w.I,{type:"text","aria-label":"Metric selector",placeholder:"Metric regex",value:He,onChange:mt=>{Xe(mt.currentTarget.value)},onBlur:mt=>{Xe(mt.currentTarget.value),on(mt.currentTarget.value)},width:25}))),pe===k.jo.VarQueryResult&&T.createElement(_e.Z,null,T.createElement(Ke._,{label:"Query",labelWidth:20,tooltip:T.createElement("div",null,"Returns a list of Prometheus query results for the query. This can include Prometheus functions, i.e. sum(go_goroutines).")},T.createElement(ze.K,{type:"text","aria-label":"Prometheus Query",placeholder:"Prometheus Query",value:dt,onChange:qt,onBlur:()=>{pe===k.jo.VarQueryResult&&dt&&ft({qryType:pe})},cols:100}))),pe===k.jo.SeriesQuery&&T.createElement(_e.Z,null,T.createElement(Ke._,{label:"Series Query",labelWidth:20,tooltip:T.createElement("div",null,'Enter enter a metric with labels, only a metric or only labels, i.e. go_goroutines{instance="localhost:9090"}, go_goroutines, or {instance="localhost:9090"}. Returns a list of time series associated with the entered data.')},T.createElement(w.I,{type:"text","aria-label":"Series Query",placeholder:"Series Query",value:At,onChange:pn,onBlur:()=>{pe===k.jo.SeriesQuery&&At&&ft({qryType:pe})},width:100}))),pe===k.jo.ClassicQuery&&T.createElement(_e.Z,null,T.createElement(Ke._,{label:"Classic Query",labelWidth:20,tooltip:T.createElement("div",null,"The original implemetation of the Prometheus variable query editor. Enter a string with the correct query type and parameters as described in these docs. For example, label_values(label, metric).")},T.createElement(w.I,{type:"text","aria-label":"Classic Query",placeholder:"Classic Query",value:Ze,onChange:Cn,onBlur:()=>{pe===k.jo.ClassicQuery&&Ze&&ft({qryType:pe})},width:100}))))};function ot(X){return typeof X=="string"?q(X):X.query?q(X.query):X}class lt extends at.Mg{constructor(se,re=(0,Ne.J)(),pe=(0,x.$t)()){super(),this.datasource=se,this.templateSrv=re,this.timeSrv=pe,this.editor=ke}query(se){let re;if(typeof se.targets[0]=="string"?re=se.targets[0]:re=se.targets[0].query,!re)return(0,r.of)({data:[]});const pe={...se.scopedVars,__interval:{text:this.datasource.interval,value:this.datasource.interval},__interval_ms:{text:h.intervalToMs(this.datasource.interval),value:h.intervalToMs(this.datasource.interval)},...this.datasource.getRangeScopedVars(this.timeSrv.timeRange())},be=this.templateSrv.replace(re,pe,this.datasource.interpolateQueryExpr),xe=new te(this.datasource,be);return(0,Ue.D)(xe.process()).pipe((0,d.U)(we=>({data:we})))}}const Ct="60s",wt=["api/v1/query","api/v1/query_range","api/v1/series","api/v1/labels"],Lt="-Instant";class Ye extends C.CK{constructor(se,re=(0,S.J)(),pe=(0,x.$t)(),be){super(se),this.templateSrv=re,this.timeSrv=pe,this.init=async()=>{this.disableRecordingRules||this.loadRules(),this.exemplarsAvailable=await this.areExemplarsAvailable()},this.prepareTargets=(xe,Pe,we)=>{const Fe=[],He=[],Xe=(0,n.cloneDeep)(xe.targets);for(const dt of Xe){if(!dt.expr||dt.hide)continue;const ct=this.languageProvider.histogramMetrics.find(At=>dt.expr.includes(At));if(xe.app===p.zj.Explore&&dt.range===dt.instant){const At=(0,n.cloneDeep)(dt);At.format="table",At.instant=!0,At.range=!1,At.valueWithRefId=!0,delete At.maxDataPoints;const Ie=(0,n.cloneDeep)(dt);if(Ie.format="time_series",Ie.instant=!1,At.range=!0,dt.exemplar){if(!ct||ct&&!He.some(Ze=>Ze.expr.includes(ct))){const Ze=(0,n.cloneDeep)(dt);Ze.instant=!1,Fe.push(this.createQuery(Ze,xe,Pe,we)),He.push(Ze)}At.exemplar=!1,Ie.exemplar=!1}He.push(At,Ie),Fe.push(this.createQuery(At,xe,Pe,we),this.createQuery(Ie,xe,Pe,we))}else if(dt.instant&&xe.app===p.zj.Explore){const At=(0,n.cloneDeep)(dt);At.format="table",Fe.push(this.createQuery(At,xe,Pe,we)),He.push(At)}else{if(dt.exemplar&&!dt.instant){if(!ct||ct&&!He.some(At=>At.expr.includes(ct))){const At=(0,n.cloneDeep)(dt);Fe.push(this.createQuery(At,xe,Pe,we)),He.push(At)}dt.exemplar=!1}Fe.push(this.createQuery(dt,xe,Pe,we)),He.push(dt)}}return{queries:Fe,activeTargets:He}},this.handleErrors=(xe,Pe)=>{const we={message:xe&&xe.statusText||"Unknown error during query transaction. Please check JS console logs.",refId:Pe.refId};return xe.data?typeof xe.data=="string"?we.message=xe.data:xe.data.error&&(we.message=(0,P.Xh)(xe.data.error)):xe.message?we.message=xe.message:typeof xe=="string"&&(we.message=xe),we.status=xe.status,we.statusText=xe.statusText,we},this.processAnnotationResponse=(xe,Pe)=>{const we=(0,D.z1)({data:Pe}).data;if(!we||!we.length)return[];const Fe=xe.annotation,{tagKeys:He="",titleFormat:Xe="",textFormat:dt=""}=Fe,ct=h.intervalToSeconds(Fe.step||Ct)*1e3,At=He.split(","),Ie=[];for(const Ze of we){if(Ze.fields.length===0)continue;const ut=Ze.fields[0],rt=Ze.fields[1],St=rt?.labels||{},st=Object.keys(St).filter(tn=>At.includes(tn)).map(tn=>St[tn]),tt=[];let ft=0;rt.values.forEach(tn=>{let on,qt;const pn=ut.values[ft];xe.annotation.useValueForTime?(on=Math.floor(parseFloat(tn)),qt=1):(on=Math.floor(parseFloat(pn)),qt=parseFloat(tn)),ft++,tt.push([on,qt])});const Ht=tt.filter(tn=>tn[1]>0).map(tn=>tn[0]);let Zt=null;for(const tn of Ht){if(Zt&&(Zt.timeEnd??0)+ct>=tn){Zt.timeEnd=tn;continue}Zt&&Ie.push(Zt),Zt={time:tn,timeEnd:tn,annotation:Fe,title:(0,y.W)(Xe,St),tags:st,text:(0,y.W)(dt,St)}}Zt&&(Zt.timeEnd=Ht[Ht.length-1],Ie.push(Zt))}return Ie},this.type="prometheus",this.id=se.id,this.url=se.url,this.access=se.access,this.basicAuth=se.basicAuth,this.withCredentials=se.withCredentials,this.interval=se.jsonData.timeInterval||"15s",this.queryTimeout=se.jsonData.queryTimeout,this.httpMethod=se.jsonData.httpMethod||"GET",this.directUrl=se.jsonData.directUrl??this.url,this.exemplarTraceIdDestinations=se.jsonData.exemplarTraceIdDestinations,this.hasIncrementalQuery=se.jsonData.incrementalQuerying??!1,this.ruleMappings={},this.languageProvider=be??new G.ZP(this),this.lookupsDisabled=se.jsonData.disableMetricsLookup??!1,this.customQueryParameters=new URLSearchParams(se.jsonData.customQueryParameters),this.datasourceConfigurationPrometheusFlavor=se.jsonData.prometheusType,this.datasourceConfigurationPrometheusVersion=se.jsonData.prometheusVersion,this.defaultEditor=se.jsonData.defaultEditor,this.disableRecordingRules=se.jsonData.disableRecordingRules??!1,this.variables=new lt(this,this.templateSrv,this.timeSrv),this.exemplarsAvailable=!0,this.cacheLevel=se.jsonData.cacheLevel??k.x3.Low,this.cache=new he.tQ({getTargetSignature:this.getPrometheusTargetSignature.bind(this),overlapString:se.jsonData.incrementalQueryOverlapWindow??he.Ji,profileFunction:this.getPrometheusProfileData.bind(this)}),this.annotations={QueryEditor:z}}getQueryDisplayText(se){return se.expr}getPrometheusProfileData(se,re){return{interval:re.interval??se.interval,expr:this.interpolateString(re.expr),datasource:"Prometheus"}}getPrometheusTargetSignature(se,re){return`${this.interpolateString(re.expr)}|${re.interval??se.interval}|${JSON.stringify(se.rangeRaw??"")}|${re.exemplar}`}hasLabelsMatchAPISupport(){return this._isDatasourceVersionGreaterOrEqualTo("2.24.0",k.T8.Prometheus)||this._isDatasourceVersionGreaterOrEqualTo("2.0.0",k.T8.Mimir)||this._isDatasourceVersionGreaterOrEqualTo("1.11.0",k.T8.Cortex)||this._isDatasourceVersionGreaterOrEqualTo("0.18.0",k.T8.Thanos)}_isDatasourceVersionGreaterOrEqualTo(se,re){return!this.datasourceConfigurationPrometheusVersion||!this.datasourceConfigurationPrometheusFlavor||re!==this.datasourceConfigurationPrometheusFlavor?!1:E().gte(this.datasourceConfigurationPrometheusVersion,se)}_addTracingHeaders(se,re){se.headers={},this.access==="proxy"&&(se.headers["X-Dashboard-UID"]=re.dashboardUID,se.headers["X-Panel-Id"]=re.panelId)}_request(se,re,pe={}){if(this.access==="direct"){const Pe=new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.");return(0,a._)(()=>Pe)}re=re||{};for(const[Pe,we]of this.customQueryParameters)re[Pe]==null&&(re[Pe]=we);let be=this.url+se;se.startsWith(`/api/datasources/uid/${this.uid}`)&&(be=se);const xe=(0,n.defaults)(pe,{url:be,method:this.httpMethod,headers:{}});return xe.method==="GET"?re&&Object.keys(re).length&&(xe.url=xe.url+(xe.url.search(/\?/)>=0?"&":"?")+Object.entries(re).map(([Pe,we])=>`${encodeURIComponent(Pe)}=${encodeURIComponent(we)}`).join("&")):(xe.headers["Content-Type"]="application/x-www-form-urlencoded",xe.data=re),(this.basicAuth||this.withCredentials)&&(xe.withCredentials=!0),this.basicAuth&&(xe.headers.Authorization=this.basicAuth),(0,M.i)().fetch(xe)}async importFromAbstractQueries(se){return se.map(re=>this.languageProvider.importFromAbstractQuery(re))}async exportToAbstractQueries(se){return se.map(re=>this.languageProvider.exportToAbstractQuery(re))}async metadataRequest(se,re={},pe){if(wt.some(be=>se.includes(be)))try{return await(0,l.n)(this._request(`/api/datasources/uid/${this.uid}/resources${se}`,re,{method:this.httpMethod,hideFromInspector:!0,showErrorAlert:!1,...pe}))}catch(be){if(this.httpMethod==="POST"&&(0,M.kW)(be)&&(be.status===405||be.status===400))console.warn("Couldn't use configured POST HTTP method for this request. Trying to use GET method instead.");else throw be}return await(0,l.n)(this._request(`/api/datasources/uid/${this.uid}/resources${se}`,re,{method:"GET",hideFromInspector:!0,...pe}))}interpolateQueryExpr(se=[],re){if(!re.multi&&!re.includeAll)return le(se);if(typeof se=="string")return de(se);const pe=se.map(be=>de(be));return pe.length===1?pe[0]:"("+pe.join("|")+")"}targetContainsTemplate(se){return this.templateSrv.containsTemplate(se.expr)}shouldRunExemplarQuery(se,re){if(se.exemplar){const pe=this.languageProvider.histogramMetrics.find(Pe=>se.expr.includes(Pe)),be=re.targets.findIndex(Pe=>Pe.refId===se.refId),xe=re.targets.slice(0,be).filter(Pe=>!Pe.hide);return!!(!pe||pe&&!xe.some(Pe=>Pe.expr.includes(pe)))}return!1}processTargetV2(se,re){const pe=[],be={...se,exemplar:this.shouldRunExemplarQuery(se,re),requestId:re.panelId+se.refId,utcOffsetSec:this.timeSrv.timeRange().to.utcOffset()*60};return se.instant&&se.range?pe.push({...be,refId:be.refId,instant:!1},{...be,refId:be.refId+Lt,range:!1}):pe.push(be),pe}query(se){if(this.access==="proxy"){let re,pe;const be=se.targets.some(we=>we.instant);this.hasIncrementalQuery&&!be?(pe=this.cache.requestInfo(se),re=pe.requests[0]):re=se;const xe=re.targets.map(we=>this.processTargetV2(we,re)),Pe=new Date;return super.query({...re,targets:xe.flat()}).pipe((0,d.U)(we=>{const Fe={...we,data:this.cache.procFrames(se,pe,we.data)};return(0,me.n)(Fe,se,{exemplarTraceIdDestinations:this.exemplarTraceIdDestinations})}),(0,u.b)(we=>{Oe(we,se,Pe)}))}else{const re=(0,Q.jj)(se.range.from,!1),pe=(0,Q.jj)(se.range.to,!0),{queries:be,activeTargets:xe}=this.prepareTargets(se,re,pe);return!be||!be.length?(0,r.of)({data:[],state:s.Gu.Done}):se.app===p.zj.Explore?this.exploreQuery(be,xe,pe):this.panelsQuery(be,xe,pe,se.requestId,se.scopedVars)}}exploreQuery(se,re,pe){let be=se.length;const xe=se.map((Pe,we)=>{const Fe=re[we],He=(0,o.z)((0,u.b)(()=>be--),(0,i.h)(Xe=>!Xe.cancelled),(0,d.U)(Xe=>({data:(0,me.vs)(Xe,{query:Pe,target:Fe,responseListLength:se.length,exemplarTraceIdDestinations:this.exemplarTraceIdDestinations}),key:Pe.requestId,state:be===0?s.Gu.Done:s.Gu.Loading})));return this.runQuery(Pe,pe,He)});return(0,g.T)(...xe)}panelsQuery(se,re,pe,be,xe){const Pe=se.map((we,Fe)=>{const He=re[Fe],Xe=(0,o.z)((0,i.h)(dt=>!dt.cancelled),(0,d.U)(dt=>(0,me.vs)(dt,{query:we,target:He,responseListLength:se.length,scopedVars:xe,exemplarTraceIdDestinations:this.exemplarTraceIdDestinations})));return this.runQuery(we,pe,Xe)});return(0,m.D)(Pe).pipe((0,d.U)(we=>({data:we.reduce((He,Xe)=>[...He,...Xe],[]),key:be,state:s.Gu.Done})))}runQuery(se,re,pe){return se.instant?this.performInstantQuery(se,re).pipe(pe):se.exemplar?this.getExemplars(se).pipe((0,f.K)(()=>(0,r.of)({data:[],state:s.Gu.Done})),pe):this.performTimeSeriesQuery(se,se.start,se.end).pipe(pe)}createQuery(se,re,pe,be){const xe={hinting:se.hinting,instant:se.instant,exemplar:se.exemplar,step:0,expr:"",refId:se.refId,start:0,end:0},Pe=Math.ceil(be-pe);let we=h.intervalToSeconds(re.interval);const Fe=h.intervalToSeconds(this.templateSrv.replace(se.interval||re.interval,re.scopedVars)),He=se.interval?h.intervalToSeconds(this.templateSrv.replace(se.interval,re.scopedVars)):h.intervalToSeconds(this.interval),Xe=se.intervalFactor||1,dt=this.adjustInterval(we,Fe,Pe,Xe);let ct={...re.scopedVars,...this.getRangeScopedVars(re.range),...this.getRateIntervalScopedVariable(dt,He)};we!==dt&&(we=dt,ct=Object.assign({},re.scopedVars,{__interval:{text:we+"s",value:we+"s"},__interval_ms:{text:we*1e3,value:we*1e3},...this.getRateIntervalScopedVariable(we,He),...this.getRangeScopedVars(re.range)})),xe.step=we;let At=se.expr;At=this.enhanceExprWithAdHocFilters(re.filters,At),xe.expr=this.templateSrv.replace(At,ct,this.interpolateQueryExpr);const Ie=Be(pe,be,xe.step,this.timeSrv.timeRange().to.utcOffset()*60);return xe.start=Ie.start,xe.end=Ie.end,this._addTracingHeaders(xe,re),xe}getRateIntervalScopedVariable(se,re){re===0&&(re=15);const pe=Math.max(se+re,4*re);return{__rate_interval:{text:pe+"s",value:pe+"s"}}}adjustInterval(se,re,pe,be){let xe=pe/11e3;return xe>1&&(xe=Math.ceil(xe)),Math.max(se*be,re,xe)}performTimeSeriesQuery(se,re,pe){if(re>pe)throw{message:"Invalid time range"};const be="/api/v1/query_range",xe={query:se.expr,start:re,end:pe,step:se.step};return this.queryTimeout&&(xe.timeout=this.queryTimeout),this._request(be,xe,{requestId:se.requestId,headers:se.headers}).pipe((0,f.K)(Pe=>Pe.cancelled?(0,r.of)(Pe):(0,a._)(this.handleErrors(Pe,se))))}performInstantQuery(se,re){const pe="/api/v1/query",be={query:se.expr,time:re};return this.queryTimeout&&(be.timeout=this.queryTimeout),this._request(`/api/datasources/uid/${this.uid}/resources${pe}`,be,{requestId:se.requestId,headers:se.headers}).pipe((0,f.K)(xe=>xe.cancelled?(0,r.of)(xe):(0,a._)(this.handleErrors(xe,se))))}metricFindQuery(se){if(!se)return Promise.resolve([]);const re={__interval:{text:this.interval,value:this.interval},__interval_ms:{text:h.intervalToMs(this.interval),value:h.intervalToMs(this.interval)},...this.getRangeScopedVars(this.timeSrv.timeRange())},pe=this.templateSrv.replace(se,re,this.interpolateQueryExpr);return new te(this,pe).process()}getRangeScopedVars(se=this.timeSrv.timeRange()){const re=se.to.diff(se.from),pe=Math.round(re/1e3);return{__range_ms:{text:re,value:re},__range_s:{text:pe,value:pe},__range:{text:pe+"s",value:pe+"s"}}}async annotationQuery(se){if(this.access==="direct"){const Pe=new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.");return Promise.reject(Pe)}const re=se.annotation,{expr:pe=""}=re;if(!pe)return Promise.resolve([]);const be=se.annotation.step||Ct,xe={expr:pe,range:!0,instant:!1,exemplar:!1,interval:be,refId:"X",datasource:this.getRef()};return await(0,l.n)((0,M.i)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:((0,Q.jj)(se.range.from,!1)*1e3).toString(),to:((0,Q.jj)(se.range.to,!0)*1e3).toString(),queries:[this.applyTemplateVariables(xe,{})]},requestId:`prom-query-${re.name}`}).pipe((0,d.U)(Pe=>this.processAnnotationResponse(se,Pe.data))))}getExemplars(se){const re="/api/v1/query_exemplars";return this._request(re,{query:se.expr,start:se.start.toString(),end:se.end.toString()},{requestId:se.requestId,headers:se.headers})}async getTagKeys(se){if(!se||se.filters.length===0)return await this.languageProvider.fetchLabels(),this.languageProvider.getLabelKeys().map(xe=>({value:xe,text:xe}));const re=se.filters.map(xe=>({label:xe.key,value:xe.value,op:xe.operator})),pe=j.Z.renderLabels(re);let be;return this.hasLabelsMatchAPISupport()?be=await this.languageProvider.fetchSeriesLabelsMatch(pe):be=await this.languageProvider.fetchSeriesLabels(pe),Object.keys(be).filter(xe=>!se.filters.find(Pe=>Pe.key===xe)).map(xe=>({value:xe,text:xe}))}async getTagValues(se){const re=se.filters.map(Pe=>({label:Pe.key,value:Pe.value,op:Pe.operator})),pe=j.Z.renderLabels(re);if(this.hasLabelsMatchAPISupport())return(await this.languageProvider.fetchSeriesValuesWithMatch(se.key,pe)).map(Pe=>({value:Pe,text:Pe}));const be=this.getTimeRangeParams();return(await this.metadataRequest(`/api/v1/label/${se.key}/values`,be))?.data?.data?.map(Pe=>({text:Pe}))??[]}interpolateVariablesInQueries(se,re,pe){let be=se;return se&&se.length&&(be=se.map(xe=>{const Pe=this.templateSrv.replace(xe.expr,re,this.interpolateQueryExpr),we=this.enhanceExprWithAdHocFilters(pe,Pe);return{...xe,datasource:this.getRef(),expr:we,interval:this.templateSrv.replace(xe.interval,re)}})),be}getQueryHints(se,re){return Te(se.expr??"",re,this)}getInitHints(){return ge(this)}async loadRules(){try{const re=(await this.metadataRequest("/api/v1/rules",{},{showErrorAlert:!1})).data?.data?.groups;re&&(this.ruleMappings=Le(re))}catch(se){console.log("Rules API is experimental. Ignore next error."),console.error(se)}}async areExemplarsAvailable(){try{return(await this.metadataRequest("/api/v1/query_exemplars",{query:"test",start:(0,v.CQ)().subtract(30,"minutes").valueOf().toString(),end:(0,v.CQ)().valueOf().toString()},{showErrorAlert:!1})).data.status==="success"}catch{return!1}}modifyQuery(se,re){let pe=se.expr??"";switch(re.type){case"ADD_FILTER":{const{key:be,value:xe}=re.options??{};be&&xe&&(pe=(0,I.F)(pe,be,xe));break}case"ADD_FILTER_OUT":{const{key:be,value:xe}=re.options??{};be&&xe&&(pe=(0,I.F)(pe,be,xe,"!="));break}case"ADD_HISTOGRAM_QUANTILE":{pe=`histogram_quantile(0.95, sum(rate(${pe}[$__rate_interval])) by (le))`;break}case"ADD_RATE":{pe=`rate(${pe}[$__rate_interval])`;break}case"ADD_SUM":{pe=`sum(${pe.trim()}) by ($1)`;break}case"EXPAND_RULES":{re.options&&(pe=(0,Q.ll)(pe,re.options));break}default:break}return{...se,expr:pe}}getAdjustedInterval(){const se=this.timeSrv.timeRange();return(0,Q.wY)(this.cacheLevel,se)}getTimeRangeParams(){const se=this.timeSrv.timeRange();return{start:(0,Q.jj)(se.from,!1).toString(),end:(0,Q.jj)(se.to,!0).toString()}}getOriginalMetricName(se){return(0,me.nM)(se)}enhanceExprWithAdHocFilters(se,re){return!se||se.length===0?re:se.reduce((be,xe)=>{const{key:Pe,operator:we}=xe;let{value:Fe}=xe;return(we==="=~"||we==="!~")&&(Fe=le(Fe)),(0,I.F)(be,Pe,Fe,we)},re)}filterQuery(se){return!(se.hide||!se.expr)}applyTemplateVariables(se,re,pe){const be=(0,n.cloneDeep)(re);delete be.__interval,delete be.__interval_ms;const xe=this.templateSrv.replace(se.expr,be,this.interpolateQueryExpr),Pe=this.enhanceExprWithAdHocFilters(pe,xe);return{...se,expr:Pe,interval:this.templateSrv.replace(se.interval,be),legendFormat:this.templateSrv.replace(se.legendFormat,be)}}getVariables(){return this.templateSrv.getVariables().map(se=>`$${se.name}`)}interpolateString(se){return this.templateSrv.replace(se,void 0,this.interpolateQueryExpr)}getDebounceTimeInMilliseconds(){switch(this.cacheLevel){case k.x3.Medium:return 600;case k.x3.High:return 1200;default:return 350}}getDaysToCacheMetadata(){switch(this.cacheLevel){case k.x3.Medium:return 7;case k.x3.High:return 30;default:return 1}}getCacheDurationInMinutes(){return(0,Q.l3)(this.cacheLevel)}getDefaultQuery(se){const re={refId:"A",expr:"",range:!0,instant:!1};return se===p.zj.UnifiedAlerting?{...re,instant:!0,range:!1}:se===p.zj.Explore?{...re,instant:!0,range:!0}:re}}function Be(X,se,re,pe){const be=Math.floor((se+pe)/re)*re-pe,xe=Math.floor((X+pe)/re)*re-pe;return{end:be,start:xe}}function Le(X){return X.reduce((se,re)=>re.rules.filter(pe=>pe.type==="recording").reduce((pe,be)=>({...pe,[be.name]:be.query}),se),{})}function le(X){return typeof X=="string"?X.replace(/\\/g,"\\\\").replace(/'/g,"\\\\'"):X}function de(X){return typeof X=="string"?X.replace(/\\/g,"\\\\\\\\").replace(/[$^*{}\[\]\'+?.()|]/g,"\\\\$&"):X}},47810:(J,R,e)=>{"use strict";e.d(R,{UQ:()=>P,ZK:()=>y,ZP:()=>O,nW:()=>S,ws:()=>x});var n=e(86832),a=e.n(n),l=e(10963),r=e.n(l),o=e(92403),g=e(54721),m=e(30976),d=e(66445),u=e(63163),i=e(49403),f=e(64304);const c=["job","instance"],E="{}",p=5,h=1e3*60*60*24,y=1e4,s=B=>({label:B}),v=B=>(B.kind="function",B),C=B=>({headers:{"X-Grafana-Cache":`private, max-age=${B}`}});function D(B,b){const W=Date.now()-h,V=b.filter(G=>G.ts>W&&G.query===B.label),w=V.length,K=V[0];let z=`Queried ${w} times in the last 24h.`;if(K){const G=(0,o.CQ)(K.ts).fromNow();z=`${z} Last queried ${G}.`}return{...B,documentation:z}}function M(B,b){const W={label:B};return b&&b[B]&&(W.documentation=P(B,b)),W}function P(B,b){if(!b[B])return;const{type:W,help:V}=b[B];return`${W.toUpperCase()}: ${V}`}function x(B,b){if(b[B])return b[B].help}function S(B,b){if(b[B])return b[B].type}const I=/(="|!="|=~"|!~"|\{|\[|\(|\+|-|\/|\*|%|\^|\band\b|\bor\b|\bunless\b|==|>=|!=|<=|>|<|=|~|,)/,T=86400;class O extends g.iL{constructor(b,W){super(),this.labelKeys=[],this.request=async(V,w,K={},z)=>{try{return(await this.datasource.metadataRequest(V,K,z)).data.data}catch(G){console.error(G)}return w},this.start=async()=>this.datasource.lookupsDisabled?[]:(this.metrics=await this.fetchLabelValues("__name__")||[],this.histogramMetrics=(0,u.NO)(this.metrics).sort(),Promise.all([this.loadMetricsMetadata(),this.fetchLabels()])),this.provideCompletionItems=async({prefix:V,text:w,value:K,labelKey:z,wrapperClasses:G},Q={})=>{const j={suggestions:[]};if(!K)return j;const F=K.document.text.length===0,k=K.document.getTextsAtRange(K.selection),_=k.size===1?k.first().getText():null,Y=_?_[K.selection.anchor.offset]:null,Z=G.length>3,ae=V&&!Z,ce=!Y||Y===")",q=V&&!w.match(/^[\]})\s]+$/)&&ce,De=/[+\-*/^%]/,oe=w.match(De);return G.includes("context-range")?this.getRangeCompletionItems():G.includes("context-labels")?this.getLabelCompletionItems({prefix:V,text:w,value:K,labelKey:z,wrapperClasses:G}):G.includes("context-aggregation")?this.getAggregationCompletionItems(K):F?this.getEmptyCompletionItems(Q):ae&&ce&&!oe?this.getBeginningCompletionItems(Q):ae&&q?this.getTermCompletionItems():j},this.getBeginningCompletionItems=V=>({suggestions:[...this.getEmptyCompletionItems(V).suggestions,...this.getTermCompletionItems().suggestions]}),this.getEmptyCompletionItems=V=>{const{history:w}=V,K=[];if(w&&w.length){const z=(0,n.chain)(w).map(G=>G.query.expr).filter().uniq().take(p).map(s).map(G=>D(G,w)).value();K.push({searchFunctionType:d.Z.Prefix,skipSort:!0,label:"History",items:z})}return{suggestions:K}},this.getTermCompletionItems=()=>{const{metrics:V,metricsMetadata:w}=this,K=[];return K.push({searchFunctionType:d.Z.Prefix,label:"Functions",items:i.r8.map(v)}),V&&V.length&&K.push({label:"Metrics",items:V.map(z=>M(z,w)),searchFunctionType:d.Z.Fuzzy}),{suggestions:K}},this.getAggregationCompletionItems=async V=>{const w=[];let K;const z=V.document.getBlocks().reduce((ae,ce)=>{if(ae===void 0)return"";if(!ce)return ae;const q=ce?.getText();return V.anchorBlock.key===ce.key&&(K=V.selection.anchor.offset+ae.length),ae+q},""),G=z.lastIndexOf("(",K);let Q=z.lastIndexOf("(",G-1),j=z.indexOf(")",Q);if(Q===-1){const ae=z.indexOf(")",K);j=z.indexOf(")",ae+1),Q=z.lastIndexOf("(",j)}const F={suggestions:w,context:"context-aggregation"};if(Q===-1)return F;const k=z.slice(Q+1,j).replace(/\[[^\]]+\]$/,""),_=(0,u.rV)(k,k.length-2).selector,Y=await this.getSeries(_),Z=Object.keys(Y);if(Z.length>0){const ae=(0,u.ZO)(Z);w.push({label:`Labels${ae}`,items:Z.map(s),searchFunctionType:d.Z.Fuzzy})}return F},this.getLabelCompletionItems=async({text:V,wrapperClasses:w,labelKey:K,value:z})=>{if(!z)return{suggestions:[]};const G=[],Q=z.anchorBlock.getText(),j=z.selection.anchor.offset,F=Q.substr(j),k=Q.substr(0,j),_=V.match(/^(=|=~|!=|!~)/),Y=F.match(/^"?[,}]|$/),Z=k.match(/(=|=~|!=|!~)$/)&&F.match(/^"/);if(!(_&&Y)&&!(Y&&!_)||Z)return{suggestions:G};let q,De;try{De=(0,u.rV)(Q,j),q=De.selector}catch{q=E}const oe=q.includes("__name__="),te=De?De.labelKeys:[];let fe={};if(q&&(fe=await this.getSeries(q,!oe)),Object.keys(fe).length===0)return console.warn(`Server did not return any values for selector = ${q}`),{suggestions:G};let Te;if(V&&_||w.includes("attr-value")){if(K&&fe[K]){Te="context-label-values";const ge=(0,u.ZO)(fe[K]);G.push({label:`Label values for "${K}"${ge}`,items:fe[K].map(s),searchFunctionType:d.Z.Fuzzy})}}else{const ge=fe?Object.keys(fe):oe?null:c;if(ge){const he=(0,n.difference)(ge,te);if(he.length){Te="context-labels";const me=he.map(Oe=>({label:Oe})),ue={label:`Labels${(0,u.ZO)(me)}`,items:me,searchFunctionType:d.Z.Fuzzy};G.push(ue)}}}return{context:Te,suggestions:G}},this.fetchLabelValues=async V=>{const w=this.datasource.getAdjustedInterval(),z=`/api/v1/label/${this.datasource.interpolateString(V)}/values`;return await this.request(z,[],w,this.getDefaultCacheHeaders())??[]},this.getSeriesValues=async(V,w)=>this.datasource.hasLabelsMatchAPISupport()?await this.fetchSeriesValuesWithMatch(V,w):(await this.getSeries(w))[V]??[],this.fetchSeriesValuesWithMatch=async(V,w)=>{const K=V?this.datasource.interpolateString(V):null,z=w?this.datasource.interpolateString(w):null,Q={...this.datasource.getAdjustedInterval(),...z&&{"match[]":z}};return await this.request(`/api/v1/label/${K}/values`,[],Q,this.getDefaultCacheHeaders())??[]},this.getSeriesLabels=async(V,w)=>{let K,z;this.datasource.hasLabelsMatchAPISupport()?(w.push({name:"__name__",value:"",op:"!="}),z=await this.fetchSeriesLabelsMatch(V),K=Object.keys(z)):(z=await this.getSeries(V),K=Object.keys(z));const G=new Set(w.map(Q=>Q.name));return K.filter(Q=>!G.has(Q))},this.fetchSeriesLabels=async(V,w)=>{const K=this.datasource.interpolateString(V),G={...this.datasource.getAdjustedInterval(),"match[]":K},Q="/api/v1/series",j=await this.request(Q,[],G,this.getDefaultCacheHeaders()),{values:F}=(0,u.DY)(j,w);return F},this.fetchSeriesLabelsMatch=async(V,w)=>{const K=this.datasource.interpolateString(V),G={...this.datasource.getAdjustedInterval(),"match[]":K},Q="/api/v1/labels";return(await this.request(Q,[],G,this.getDefaultCacheHeaders())).reduce((F,k)=>({...F,[k]:""}),{})},this.fetchSeries=async V=>{const w="/api/v1/series",z={...this.datasource.getTimeRangeParams(),"match[]":V};return await this.request(w,{},z,this.getDefaultCacheHeaders())},this.fetchDefaultSeries=(0,n.once)(async()=>{const V=await Promise.all(c.map(w=>this.fetchLabelValues(w)));return c.reduce((w,K,z)=>({...w,[K]:V[z]}),{})}),this.datasource=b,this.histogramMetrics=[],this.timeRange={start:0,end:0},this.metrics=[],Object.assign(this,W)}getDefaultCacheHeaders(){if(this.datasource.cacheLevel!==f.x3.None)return C(this.datasource.getCacheDurationInMinutes()*60)}cleanText(b){return b.split(I).pop().trimLeft().replace(/"$/,"").replace(/^"/,"")}get syntax(){return i.ZP}async loadMetricsMetadata(){const b=C(this.datasource.getDaysToCacheMetadata()*T);this.metricsMetadata=(0,u.I4)(await this.request("/api/v1/metadata",{},{},{showErrorAlert:!1,...b}))}getLabelKeys(){return this.labelKeys}getRangeCompletionItems(){return{context:"context-range",suggestions:[{label:"Range vector",items:[...i.Ty]}]}}importFromAbstractQuery(b){return(0,u.e5)(b)}exportToAbstractQuery(b){const W=b.expr;if(!W||W.length===0)return{refId:b.refId,labelMatchers:[]};const V=r().tokenize(W,i.ZP),w=(0,u.UO)(V),K=A(W,V);return K&&K.length>0&&w.push({name:"__name__",operator:m.K2.Equal,value:K}),{refId:b.refId,labelMatchers:w}}async getSeries(b,W){if(this.datasource.lookupsDisabled)return{};try{return b===E?await this.fetchDefaultSeries():await this.fetchSeriesLabels(b,W)}catch(V){return console.error(V),{}}}async getLabelValues(b){return await this.fetchLabelValues(b)}async fetchLabels(){const b="/api/v1/labels",W=this.datasource.getAdjustedInterval();this.labelFetchTs=Date.now().valueOf();const V=await this.request(b,[],W,this.getDefaultCacheHeaders());return Array.isArray(V)&&(this.labelKeys=V.slice().sort()),[]}}function A(B,b){let W="";for(let V in b)if(typeof b[V]=="string"){W=b[V];break}return W}},63163:(J,R,e)=>{"use strict";e.d(R,{DY:()=>E,I4:()=>C,My:()=>Q,NO:()=>c,PL:()=>W,U9:()=>O,UO:()=>w,ZO:()=>S,e5:()=>V,jj:()=>G,l3:()=>z,ll:()=>s,o8:()=>D,rV:()=>y,tU:()=>A,wY:()=>K});var n=e(86832),a=e.n(n),l=e(10963),r=e.n(l),o=e(30976),g=e(80742),m=e(77877),d=e(74149),u=e(47810),i=e(53430),f=e(64304);const c=j=>{const F=new Set,k=new RegExp("_bucket($|:)");for(let _=0;_<j.length;_++){const Y=j[_];k.test(Y)&&F.add(Y)}return[...F]};function E(j,F=!1){const k={};j.forEach(Y=>{const{__name__:Z,...ae}=Y;F&&(k.__name__=k.__name__||new Set,k.__name__.has(Z)||k.__name__.add(Z)),Object.keys(ae).forEach(ce=>{k[ce]||(k[ce]=new Set),k[ce].has(ae[ce])||k[ce].add(ae[ce])})});const _={};return x(Object.keys(k)).forEach(Y=>{_[Y]=x(Array.from(k[Y]))}),{values:_,keys:Object.keys(_)}}const p=/\{[^}]*?(\}|$)/,h=/\b(\w+)(!?=~?)("[^"\n]*?")/g;function y(j,F=1){if(!j.match(p)){if(j.match(/^[A-Za-z:][\w:]*$/))return{selector:`{__name__="${j}"}`,labelKeys:["__name__"]};throw new Error("Query must contain a selector: "+j)}const k=j.slice(0,F),_=k.lastIndexOf("{"),Y=k.lastIndexOf("}");if(_===-1)throw new Error("Not inside selector, missing open brace: "+k);if(Y>-1&&Y>_)throw new Error("Not inside selector, previous selector already closed: "+k);const Z=j.slice(F),ce=Z.indexOf("}")+F,q=Z.indexOf("{"),De=q+F;if(ce===-1)throw new Error("Not inside selector, missing closing brace in suffix: "+Z);if(q>-1&&De<ce)throw new Error("Not inside selector, next selector opens before this one closed: "+Z);const oe=j.slice(_,ce),te={};oe.replace(h,(ye,ue,Oe,Ue)=>{const at=j.indexOf(ye),Ne=at+ue.length+Oe.length+1,_e=at+ue.length+Oe.length+Ue.length-1;return(F<Ne||F>_e)&&(te[ue]={value:Ue,operator:Oe}),""});const Te=j.slice(0,_).match(/[A-Za-z:][\w:]*$/);Te&&(te.__name__={value:`"${Te[0]}"`,operator:"="});const ge=Object.keys(te).sort(),me=["{",ge.map(ye=>`${ye}${te[ye].operator}${te[ye].value}`).join(","),"}"].join("");return{labelKeys:ge,selector:me}}function s(j,F){const k=Object.keys(F),_=new RegExp(`(\\s|^)(${k.join("|")})(\\s|$|\\(|\\[|\\{)`,"ig"),Z=j.replace(_,(q,De,oe,te)=>`${De}${F[oe]}${te}`).split(/(\+|\-|\*|\/|\%|\^)/),ae=/(\)\{|\}\{|\]\{)/;return Z.map(q=>v(q,ae)).join("")}function v(j,F){const k=j.match(F);if(!k)return j;const _=k.index??0,Y=j.slice(0,_+1),Z=j.slice(_+1),ae=[];Z.replace(h,(q,De,oe,te)=>(ae.push({key:De,operator:oe,value:te}),""));let ce=Y;return ae.filter(Boolean).forEach(q=>{const De=q.value.slice(1,-1);ce=(0,d.F)(ce,q.key,De,q.operator)}),ce}function C(j){if(!j)return j;const F={},k={};for(const Y in j){const Z=j[Y][0];F[Y]=Z,Z.type==="histogram"&&(k[`${Y}_bucket`]={type:"counter",help:`Cumulative counters for the observation buckets (${Z.help})`},k[`${Y}_count`]={type:"counter",help:`Count of events that have been observed for the histogram metric (${Z.help})`},k[`${Y}_sum`]={type:"counter",help:`Total sum of all observed values for the histogram metric (${Z.help})`}),Z.type==="summary"&&(k[`${Y}_count`]={type:"counter",help:`Count of events that have been observed for the base metric (${Z.help})`},k[`${Y}_sum`]={type:"counter",help:`Total sum of all observed values for the base metric (${Z.help})`})}const _={};return _.ALERTS={type:"counter",help:"Time series showing pending and firing alerts. The sample value is set to 1 as long as the alert is in the indicated active (pending or firing) state."},{...F,...k,..._}}function D(j){return M(j/1e3)}function M(j){return Math.floor(j/60)}function P(j,F=1){return Math.ceil(j/60)-Math.ceil(j/60)%F}function x(j){return j.slice(0,u.ZK)}function S(j){return j&&j.length>=u.ZK?`, limited to the first ${u.ZK} received items`:""}const I=/[*+?()|\\.\[\]{}^$]/g;function T(j){return j.replace(I,"\\$&")}function O(j){return j.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function A(j){return O(T(j))}const B={"=":o.K2.Equal,"!=":o.K2.NotEqual,"=~":o.K2.EqualRegEx,"!~":o.K2.NotEqualRegEx},b=(0,n.invert)(B);function W(j){const F=j.labelMatchers.map(k=>{const _=b[k.operator];return _?`${k.name}${_}"${k.value}"`:""}).filter(k=>k!=="").join(", ");return F?`{${F}}`:""}function V(j){return{refId:j.refId,expr:W(j),range:!0}}function w(j){const F=[];for(let k in j)if(j[k]instanceof l.Token){let _=j[k];if(_.type==="context-labels"){let Y="",Z="",ae="",ce=_.content;for(let q in ce)if(typeof ce[q]=="string"){let De;De=ce[q],(De==="="||De==="!="||De==="=~"||De==="!~")&&(ae=De)}else if(ce[q]instanceof l.Token)switch(ce[q].type){case"label-key":Y=ce[q].content;break;case"label-value":Z=ce[q].content,Z=Z.substring(1,Z.length-1);const De=B[ae];De&&F.push({name:Y,operator:De,value:Z});break}}}return F}function K(j,F){if(j===f.x3.None)return{start:G(F.from,!1).toString(),end:G(F.to,!0).toString()};const k=G(F.from,!1),_=(0,g.mB)(k,z(j)*60),Y=G(F.to,!0),Z=P(Y,z(j))*60;if(_===Z){const q=Z+z(j)*60;return{start:_.toString(),end:q.toString()}}const ae=_.toString(),ce=Z.toString();return{start:ae,end:ce}}function z(j){switch(j){case f.x3.Medium:return 10;case f.x3.High:return 60;default:return 1}}function G(j,F){return typeof j=="string"&&(j=m.parse(j,F)),Math.ceil(j.valueOf()/1e3)}function Q(j,F){return F===void 0&&(F=i.A5),j.length=Math.min(j.length,F),j}},49403:(J,R,e)=>{"use strict";e.d(R,{Ty:()=>n,ZP:()=>u,r8:()=>g});const n=[{label:"$__interval",sortValue:"$__interval"},{label:"$__rate_interval",sortValue:"$__rate_interval"},{label:"$__range",sortValue:"$__range"},{label:"1m",sortValue:"00:01:00"},{label:"5m",sortValue:"00:05:00"},{label:"10m",sortValue:"00:10:00"},{label:"30m",sortValue:"00:30:00"},{label:"1h",sortValue:"01:00:00"},{label:"1d",sortValue:"24:00:00"}],a=["by","group_left","group_right","ignoring","on","offset","without"],l=null,r=[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],g=[...[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions"}],...r,{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"day_of_year",label:"day_of_year",detail:"day_of_year(v=vector(time()) instant-vector)",documentation:"Returns the day of the year for each of the given times in UTC. Returned values are from 1 to 365 for non-leap years, and 1 to 366 in leap years."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:"Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."},{insertText:"present_over_time",label:"present_over_time",detail:"present_over_time(range-vector)",documentation:"The value 1 for any series in the specified interval."}],m=g.map(i=>i.label),u={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${g.map(i=>i.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${a.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},89527:(J,R,e)=>{"use strict";e.d(R,{K:()=>C,Z:()=>D});var n=e(49403),a=e(96543),l=e(14091),r=e(82473),o=e(18533);function g(){return[{id:o.G3.HistogramQuantile,name:"Histogram quantile",params:[{name:"Quantile",type:"number",options:[.99,.95,.9,.75,.5,.25]}],defaultParams:[.9],category:o.CM.Functions,renderer:r.pS,addOperationHandler:r.PP},{id:o.G3.LabelReplace,name:"Label replace",params:[{name:"Destination label",type:"string"},{name:"Replacement",type:"string"},{name:"Source label",type:"string"},{name:"Regex",type:"string"}],category:o.CM.Functions,defaultParams:["","$1","","(.*)"],renderer:r.zJ,addOperationHandler:r.PP},{id:o.G3.Ln,name:"Ln",params:[],defaultParams:[],category:o.CM.Functions,renderer:r.pS,addOperationHandler:r.PP},d(o.G3.Changes),d(o.G3.Rate,!0),d(o.G3.Irate),d(o.G3.Increase,!0),d(o.G3.Idelta),d(o.G3.Delta),m({id:o.G3.HoltWinters,params:[(0,r.kq)(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["$__interval",.5,.5],alternativesKey:"range function",category:o.CM.RangeFunctions,renderer:r.e8,addOperationHandler:f,changeTypeHandler:u}),m({id:o.G3.PredictLinear,params:[(0,r.kq)(),{name:"Seconds from now",type:"number"}],defaultParams:["$__interval",60],alternativesKey:"range function",category:o.CM.RangeFunctions,renderer:r.e8,addOperationHandler:f,changeTypeHandler:u}),m({id:o.G3.QuantileOverTime,params:[(0,r.kq)(),{name:"Quantile",type:"number"}],defaultParams:["$__interval",.5],alternativesKey:"overtime function",category:o.CM.RangeFunctions,renderer:r.NZ,addOperationHandler:f,changeTypeHandler:u}),...a.EX,{id:o.G3.NestedQuery,name:"Binary operation with query",params:[],defaultParams:[],category:o.CM.BinaryOps,renderer:(P,x,S)=>S,addOperationHandler:c},m({id:o.G3.Abs}),m({id:o.G3.Absent}),m({id:o.G3.Acos,category:o.CM.Trigonometric}),m({id:o.G3.Acosh,category:o.CM.Trigonometric}),m({id:o.G3.Asin,category:o.CM.Trigonometric}),m({id:o.G3.Asinh,category:o.CM.Trigonometric}),m({id:o.G3.Atan,category:o.CM.Trigonometric}),m({id:o.G3.Atanh,category:o.CM.Trigonometric}),m({id:o.G3.Ceil}),m({id:o.G3.Clamp,name:"Clamp",params:[{name:"Minimum Scalar",type:"number"},{name:"Maximum Scalar",type:"number"}],defaultParams:[1,1]}),m({id:o.G3.ClampMax,params:[{name:"Maximum Scalar",type:"number"}],defaultParams:[1]}),m({id:o.G3.ClampMin,params:[{name:"Minimum Scalar",type:"number"}],defaultParams:[1]}),m({id:o.G3.Cos,category:o.CM.Trigonometric}),m({id:o.G3.Cosh,category:o.CM.Trigonometric}),m({id:o.G3.DayOfMonth,category:o.CM.Time}),m({id:o.G3.DayOfWeek,category:o.CM.Time}),m({id:o.G3.DayOfYear,category:o.CM.Time}),m({id:o.G3.DaysInMonth,category:o.CM.Time}),m({id:o.G3.Deg}),d(o.G3.Deriv),m({id:o.G3.Exp}),m({id:o.G3.Floor}),m({id:o.G3.Group}),m({id:o.G3.Hour}),m({id:o.G3.LabelJoin,params:[{name:"Destination Label",type:"string",editor:l.g},{name:"Separator",type:"string"},{name:"Source Label",type:"string",restParam:!0,optional:!0,editor:l.g}],defaultParams:["",",",""],renderer:E,addOperationHandler:p}),m({id:o.G3.Log10}),m({id:o.G3.Log2}),m({id:o.G3.Minute}),m({id:o.G3.Month}),m({id:o.G3.Pi,renderer:P=>`${P.id}()`}),m({id:o.G3.Quantile,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:r.pS}),m({id:o.G3.Rad}),d(o.G3.Resets),m({id:o.G3.Round,category:o.CM.Functions,params:[{name:"To Nearest",type:"number"}],defaultParams:[1]}),m({id:o.G3.Scalar}),m({id:o.G3.Sgn}),m({id:o.G3.Sin,category:o.CM.Trigonometric}),m({id:o.G3.Sinh,category:o.CM.Trigonometric}),m({id:o.G3.Sort}),m({id:o.G3.SortDesc}),m({id:o.G3.Sqrt}),m({id:o.G3.Stddev}),m({id:o.G3.Tan,category:o.CM.Trigonometric}),m({id:o.G3.Tanh,category:o.CM.Trigonometric}),m({id:o.G3.Time,renderer:P=>`${P.id}()`}),m({id:o.G3.Timestamp}),m({id:o.G3.Vector,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:P=>`${P.id}(${P.params[0]})`}),m({id:o.G3.Year})]}function m(M){return{...M,id:M.id,name:M.name??(0,r.t7)(M.id),params:M.params??[],defaultParams:M.defaultParams??[],category:M.category??o.CM.Functions,renderer:M.renderer??(M.params?r.zJ:r.pS),addOperationHandler:M.addOperationHandler??r.PP}}function d(M,P=!1){return{id:M,name:(0,r.t7)(M),params:[(0,r.kq)(P)],defaultParams:[P?"$__rate_interval":"$__interval"],alternativesKey:"range function",category:o.CM.RangeFunctions,renderer:i,addOperationHandler:f,changeTypeHandler:u}}function u(M,P){return(M.params[0]==="$__rate_interval"&&P.defaultParams[0]!=="$__rate_interval"||M.params[0]==="$__interval"&&P.defaultParams[0]!=="$__interval")&&(M.params=P.defaultParams),M}function i(M,P,x){let S=(M.params??[])[0]??"5m";return`${P.id}(${x}[${S}])`}function f(M,P,x){const S={id:M.id,params:M.defaultParams};return P.operations.length>0&&x.getOperationDef(P.operations[0].id).addOperationHandler===f?{...P,operations:[S,...P.operations.slice(1)]}:{...P,operations:[S,...P.operations]}}function c(M,P){return{...P,binaryQueries:[...P.binaryQueries??[],{operator:"/",query:P}]}}function E(M,P,x){if(typeof M.params[1]!="string")throw"The separator must be a string";const S=`"${M.params[1]}"`;return`${M.id}(${x}, "${M.params[0]}", ${S}, "${M.params.slice(2).join(S)}")`}function p(M,P){const x={id:M.id,params:M.defaultParams};return{...P,operations:[...P.operations,x]}}function h(){return[...(0,r.IT)(o.G3.Sum),...(0,r.IT)(o.G3.Avg),...(0,r.IT)(o.G3.Min),...(0,r.IT)(o.G3.Max),...(0,r.IT)(o.G3.Count),...(0,r.Z3)(o.G3.TopK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,r.Z3)(o.G3.BottomK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,r.Z3)(o.G3.CountValues,{params:[{name:"Identifier",type:"string"}],defaultParams:["count"]}),y(o.G3.SumOverTime),y(o.G3.AvgOverTime),y(o.G3.MinOverTime),y(o.G3.MaxOverTime),y(o.G3.CountOverTime),y(o.G3.LastOverTime),y(o.G3.PresentOverTime),y(o.G3.AbsentOverTime),y(o.G3.StddevOverTime)]}function y(M){return{id:M,name:(0,r.t7)(M),params:[(0,r.kq)()],defaultParams:["$__interval"],alternativesKey:"overtime function",category:o.CM.RangeFunctions,renderer:s,addOperationHandler:f}}function s(M,P,x){let S=(M.params??[])[0]??"$__interval";return`${P.id}(${x}[${S}])`}var v=e(32449);class C extends v.x{constructor(){super(()=>{const P=[...g(),...h()];for(const x of P){const S=n.r8.find(I=>I.insertText===x.id);S&&(x.documentation=S.documentation)}return P}),this.setOperationCategories([o.CM.Aggregations,o.CM.RangeFunctions,o.CM.Functions,o.CM.BinaryOps,o.CM.Trigonometric,o.CM.Time])}getQueryPatterns(){return[{name:"Rate then sum",type:o.Fz.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]},{name:"Rate then sum by(label) then avg",type:o.Fz.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:[""]},{id:"avg",params:[]}]},{name:"Histogram quantile on rate",type:o.Fz.Histogram,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Histogram quantile on increase",type:o.Fz.Histogram,operations:[{id:"increase",params:["$__rate_interval"]},{id:"__max_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Binary Query",type:o.Fz.Binary,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}],binaryQueries:[{operator:"/",query:{metric:"",labels:[],operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]}}]}]}}const D=new C},96543:(J,R,e)=>{"use strict";e.d(R,{EX:()=>o,PX:()=>r,iQ:()=>l});var n=e(82473),a=e(18533);const l=[{id:a.G3.Addition,name:"Add scalar",sign:"+"},{id:a.G3.Subtraction,name:"Subtract scalar",sign:"-"},{id:a.G3.MultiplyBy,name:"Multiply by scalar",sign:"*"},{id:a.G3.DivideBy,name:"Divide by scalar",sign:"/"},{id:a.G3.Modulo,name:"Modulo by scalar",sign:"%"},{id:a.G3.Exponent,name:"Exponent",sign:"^"},{id:a.G3.EqualTo,name:"Equal to",sign:"==",comparison:!0},{id:a.G3.NotEqualTo,name:"Not equal to",sign:"!=",comparison:!0},{id:a.G3.GreaterThan,name:"Greater than",sign:">",comparison:!0},{id:a.G3.LessThan,name:"Less than",sign:"<",comparison:!0},{id:a.G3.GreaterOrEqual,name:"Greater or equal to",sign:">=",comparison:!0},{id:a.G3.LessOrEqual,name:"Less or equal to",sign:"<=",comparison:!0}],r=l.reduce((m,d)=>(m[d.sign]={id:d.id,comparison:d.comparison},m),{}),o=l.map(m=>{const d=[{name:"Value",type:"number"}],u=[2];return m.comparison&&(d.push({name:"Bool",type:"boolean",description:"If checked comparison will return 0 or 1 for the value rather than filtering."}),u.push(!1)),{id:m.id,name:m.name,params:d,defaultParams:u,alternativesKey:"binary scalar operations",category:a.CM.BinaryOps,renderer:g(m.sign),addOperationHandler:n.PP}});function g(m){return function(u,i,f){let c=u.params[0],E="";return u.params.length===2&&(E=u.params[1]?" bool":""),`${f} ${m}${E} ${c}`}}},14091:(J,R,e)=>{"use strict";e.d(R,{g:()=>g});var n=e(39953),a=e(99456),l=e(9558),r=e(89527),o=e(82473);function g({onChange:d,index:u,operationId:i,value:f,query:c,datasource:E}){const[p,h]=(0,n.useState)({});return n.createElement(l.Ph,{inputId:(0,o.i1)(i,u),autoFocus:f===""?!0:void 0,openMenuOnFocus:!0,onOpenMenu:async()=>{h({isLoading:!0});const y=await m(c,E);h({options:y,isLoading:void 0})},isLoading:p.isLoading,allowCustomValue:!0,noOptionsMessage:"No labels found",loadingMessage:"Loading labels",options:p.options,value:(0,a.E)(f),onChange:y=>d(u,y.value)})}async function m(d,u){let i=d.labels;u.type==="prometheus"&&(i=[{label:"__name__",op:"=",value:d.metric},...d.labels]);const f=r.Z.renderLabels(i),c=await u.languageProvider.fetchSeriesLabels(f);return Object.keys(c).map(E=>({label:E,value:E}))}},53430:(J,R,e)=>{"use strict";e.d(R,{kU:()=>le,A5:()=>Le});var n=e(41407),a=e(97368),l=e.n(a),r=e(39953),o=e(90135),g=e.n(o),m=e(99456),d=e(60481),u=e(46101),i=e(32688),f=e(82803),c=e(4919),E=e(12190),p=e(15246),h=e(64447),y=e(9558),s=e(74661),v=e(69171),C=e(56127),D=e(63163),M=e(65234),P=e(73075),x=e(38637),S=e(28409),I=e(36884),T=e(48824),O=e(39017),A=e(26286),B=e(69865),b=e(72639),W=e(47810),V=e(93938);const{setFilteredMetricCount:w}=V.stateSlice.actions;async function K(re,pe,be){let xe=!0;const Pe=re.languageProvider.metricsMetadata;Pe&&Object.keys(Pe).length===0&&(xe=!1);let we={},Fe={},He;return He=be?.map(Xe=>{const dt=z(Xe,re),ct=`${Xe}\xA6${dt.description}`;return we[Xe]=dt,Fe[ct]=dt,dt}),{isLoading:!1,hasMetadata:xe,metrics:He??[],metaHaystackDictionary:Fe,nameHaystackDictionary:we,totalMetricCount:He?.length??0,filteredMetricCount:He?.length??0}}function z(re,pe){let be=(0,W.nW)(re,pe.languageProvider.metricsMetadata);const xe=(0,W.ws)(re,pe.languageProvider.metricsMetadata);return["histogram","summary"].forEach(we=>{xe?.toLowerCase().includes(we)&&be!==we&&(be+=` (${we})`)}),{value:re,type:be,description:xe}}function G(re,pe){const be=Q(re);return!re.isLoading&&re.filteredMetricCount!==be.length&&pe(w(be.length)),F(be,re.pageNum,re.resultsPerPage)}function Q(re){let pe=re.metrics;return re.fuzzySearchQuery&&!re.useBackend&&(re.fullMetaSearch?pe=re.metaHaystackOrder.map(be=>re.metaHaystackDictionary[be]):pe=re.nameHaystackOrder.map(be=>re.nameHaystackDictionary[be])),re.selectedTypes.length>0&&(pe=pe.filter((be,xe)=>re.selectedTypes.some(we=>be.type&&we.value?be.type.includes(we.value):!be.type&&we.value==="no type"))),re.includeNullMetadata||(pe=pe.filter(be=>be.type!==void 0&&be.description!==void 0)),pe}function j(re){if(!re.metrics.length)return[];const pe=re.resultsPerPage===0?1:re.resultsPerPage,be=Math.floor(Q(re).length/pe)+1;return[...Array(be).keys()].map(xe=>xe+1)}function F(re,pe,be){const xe=be===0?1:be,Pe=pe===1?0:(pe-1)*xe,we=Pe+xe;return re.slice(Pe,we)}const k=(re,pe,be)=>re<1?1:re>be?be:re??pe;async function _(re,pe,be){const xe=(0,M.Vl)(re),Pe=pe.map(He=>`,${He.label}="${He.value}"`),we=`label_values({__name__=~".*${xe}"${pe?Pe.join():""}},__name__)`;return await be.metricFindQuery(we).then(He=>He.map(Xe=>z(Xe.text,be)))}function Y(re,pe,be,xe){switch(re){case"grafana_prom_metric_encycopedia_tracking":(0,b.ff)(re,{metric:be,hasMetadata:pe?.hasMetadata,totalMetricCount:pe?.totalMetricCount,fuzzySearchQuery:pe?.fuzzySearchQuery,fullMetaSearch:pe?.fullMetaSearch,selectedTypes:pe?.selectedTypes,useRegexSearch:pe?.useBackend,includeResultsWithoutMetadata:pe?.includeNullMetadata});case"grafana_prom_metric_encycopedia_disable_text_wrap_interaction":(0,b.ff)(re,{disableTextWrap:pe?.disableTextWrap});case"grafana_prometheus_metric_encyclopedia_open":(0,b.ff)(re,{query:xe})}}const Z=[{value:"counter",description:"A cumulative metric that represents a single monotonically increasing counter whose value can only increase or be reset to zero on restart."},{value:"gauge",description:"A metric that represents a single numerical value that can arbitrarily go up and down."},{value:"histogram",description:"A histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets."},{value:"summary",description:"A summary samples observations (usually things like request durations and response sizes) and can calculate configurable quantiles over a sliding time window."},{value:"unknown",description:"These metrics have been given the type unknown in the metadata."},{value:"no type",description:"These metrics have no defined type in the metadata."}],ae={browse:"Search metrics by name",metadataSearchSwitch:"Include description in search",type:"Filter by type",includeNullMetadata:"Include results with no metadata",setUseBackend:"Enable regex search"};function ce(re){const{state:pe,onChangeFullMetaSearch:be,onChangeIncludeNullMetadata:xe,onChangeDisableTextWrap:Pe,onChangeUseBackend:we}=re,Fe=(0,f.l4)(),He=q(Fe);return r.createElement(r.Fragment,null,r.createElement("div",{className:He.selectItem},r.createElement(A.r,{"data-testid":Ye.searchWithMetadata,value:pe.fullMetaSearch,disabled:pe.useBackend||!pe.hasMetadata,onChange:()=>be()}),r.createElement("div",{className:He.selectItemLabel},ae.metadataSearchSwitch)),r.createElement("div",{className:He.selectItem},r.createElement(A.r,{value:pe.includeNullMetadata,disabled:!pe.hasMetadata,onChange:()=>xe()}),r.createElement("div",{className:He.selectItemLabel},ae.includeNullMetadata)),r.createElement("div",{className:He.selectItem},r.createElement(A.r,{value:pe.disableTextWrap,onChange:()=>Pe()}),r.createElement("div",{className:He.selectItemLabel},"Disable text wrap")),r.createElement("div",{className:He.selectItem},r.createElement(A.r,{"data-testid":Ye.setUseBackend,value:pe.useBackend,onChange:()=>we()}),r.createElement("div",{className:He.selectItemLabel},ae.setUseBackend,"\xA0"),r.createElement(B.u,{content:"Filter metric names by regex search, using an additional call on the Prometheus API.",placement:"bottom-end"},r.createElement(E.J,{name:"info-circle",size:"xs",className:He.settingsIcon}))))}function q(re){return{settingsIcon:(0,n.css)`
      color: ${re.colors.text.secondary};
    `,selectItem:(0,n.css)`
      display: flex;
      flex-direction: row;
      align-items: center;
      padding: 4px 0;
    `,selectItemLabel:(0,n.css)`
      margin: 0 0 0 ${re.spacing(1)};
      align-self: center;
      color: ${re.colors.text.secondary};
      font-size: 12px;
    `}}var De=e(27366);function oe({feedbackUrl:re}){const pe=(0,f.wW)(te);return r.createElement(De.K,null,r.createElement("a",{href:re,className:pe.link,title:"The metrics explorer is new, please let us know how we can improve it",target:"_blank",rel:"noreferrer noopener"},r.createElement(E.J,{name:"comment-alt-message"})," Give feedback"))}function te(re){return{link:(0,n.css)({color:re.colors.text.secondary,fontSize:re.typography.bodySmall.fontSize,":hover":{color:re.colors.text.link},margin:"-25px 0 30px 0"})}}var fe=e(54913);function Te(re){const{metrics:pe,onChange:be,onClose:xe,query:Pe,state:we,disableTextWrap:Fe}=re,He=(0,f.l4)(),Xe=ge(He,Fe);function dt(rt){rt.value&&(be({...Pe,metric:rt.value}),Y("grafana_prom_metric_encycopedia_tracking",we,rt.value),xe())}function ct(rt){return we.fullMetaSearch&&rt?r.createElement(r.Fragment,null,r.createElement("td",null,Ie(rt.type??"")),r.createElement("td",null,r.createElement(g(),{textToHighlight:rt.description??"",searchWords:we.metaHaystackMatches,autoEscape:!0,highlightClassName:Xe.matchHighLight}))):r.createElement(r.Fragment,null,r.createElement("td",null,Ie(rt.type??"")),r.createElement("td",null,rt.description??""))}function At(rt,St,st){return r.createElement(r.Fragment,null,rt,r.createElement("span",{className:Xe.tooltipSpace},r.createElement(B.u,{content:r.createElement(r.Fragment,null,"When creating a ",St,", Prometheus exposes multiple series with the type counter."," ",(0,fe.Zg)(st)),placement:"bottom-start",interactive:!0},r.createElement(E.J,{name:"info-circle",size:"xs"}))))}function Ie(rt){return rt?rt.includes("(summary)")?At(rt,"summary","https://prometheus.io/docs/concepts/metric_types/#summary"):rt.includes("(histogram)")?At(rt,"histogram","https://prometheus.io/docs/concepts/metric_types/#histogram"):rt:""}function Ze(){let rt;return we.fuzzySearchQuery||(rt="There are no metrics found in the data source."),Pe.labels.length>0&&(rt="There are no metrics found. Try to expand your label filters."),(we.fuzzySearchQuery||we.selectedTypes.length>0)&&(rt="There are no metrics found. Try to expand your search and filters."),r.createElement("tr",{className:Xe.noResults},r.createElement("td",{colSpan:3},rt))}function ut(rt){return rt.useBackend?[rt.fuzzySearchQuery]:rt.fullMetaSearch?rt.metaHaystackMatches:rt.nameHaystackMatches}return r.createElement("table",{className:Xe.table},r.createElement("thead",{className:Xe.stickyHeader},r.createElement("tr",null,r.createElement("th",{className:`${Xe.nameWidth} ${Xe.tableHeaderPadding}`},"Name"),we.hasMetadata&&r.createElement(r.Fragment,null,r.createElement("th",{className:`${Xe.typeWidth} ${Xe.tableHeaderPadding}`},"Type"),r.createElement("th",{className:`${Xe.descriptionWidth} ${Xe.tableHeaderPadding}`},"Description")),r.createElement("th",{className:Xe.selectButtonWidth}," "))),r.createElement("tbody",null,r.createElement(r.Fragment,null,pe.length>0&&pe.map((rt,St)=>r.createElement("tr",{key:rt?.value??St,className:Xe.row},r.createElement("td",{className:Xe.nameOverflow},r.createElement(g(),{textToHighlight:rt?.value??"",searchWords:ut(we),autoEscape:!0,highlightClassName:Xe.matchHighLight})),we.hasMetadata&&ct(rt),r.createElement("td",null,r.createElement(c.zx,{size:"md",variant:"secondary",onClick:()=>dt(rt),className:Xe.centerButton},"Select")))),pe.length===0&&!we.isLoading&&Ze())))}const ge=(re,pe)=>({table:(0,n.css)`
      ${pe?"":"table-layout: fixed;"}
      border-radius: ${re.shape.radius.default};
      width: 100%;
      white-space: ${pe?"nowrap":"normal"};
      td {
        padding: ${re.spacing(1)};
      }

      td,
      th {
        min-width: ${re.spacing(3)};
        border-bottom: 1px solid ${re.colors.border.weak};
      }
    `,row:(0,n.css)`
      label: row;
      border-bottom: 1px solid ${re.colors.border.weak}
      &:last-child {
        border-bottom: 0;
      }
    `,tableHeaderPadding:(0,n.css)`
      padding: 8px;
    `,matchHighLight:(0,n.css)`
      background: inherit;
      color: ${re.components.textHighlight.text};
      background-color: ${re.components.textHighlight.background};
    `,nameWidth:(0,n.css)`
      ${pe?"":"width: 37.5%;"}
    `,nameOverflow:(0,n.css)`
      ${pe?"":"overflow-wrap: anywhere;"}
    `,typeWidth:(0,n.css)`
      ${pe?"":"width: 15%;"}
    `,descriptionWidth:(0,n.css)`
      ${pe?"":"width: 35%;"}
    `,selectButtonWidth:(0,n.css)`
      ${pe?"":"width: 12.5%;"}
    `,stickyHeader:(0,n.css)`
      position: sticky;
      top: 0;
      background-color: ${re.colors.background.primary};
    `,noResults:(0,n.css)`
      text-align: center;
      color: ${re.colors.text.secondary};
    `,tooltipSpace:(0,n.css)`
      margin-left: 4px;
    `,centerButton:(0,n.css)`
      display: block;
      margin: auto;
      border: none;
    `}),he=(re,pe)=>({modal:(0,n.css)`
      width: 85vw;
      ${re.breakpoints.down("md")} {
        width: 100%;
      }
      ${re.breakpoints.up("xl")} {
        width: 60%;
      }
    `,inputWrapper:(0,n.css)`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
    `,inputItemFirst:(0,n.css)`
      flex-basis: 40%;
      padding-right: 16px;
      ${re.breakpoints.down("md")} {
        padding-right: 0px;
        padding-bottom: 16px;
      }
    `,inputItem:(0,n.css)`
      flex-grow: 1;
      flex-basis: 20%;
      ${re.breakpoints.down("md")} {
        min-width: 100%;
      }
    `,selectWrapper:(0,n.css)`
      margin-bottom: ${re.spacing(1)};
    `,resultsAmount:(0,n.css)`
      color: ${re.colors.text.secondary};
      font-size: 0.85rem;
      padding: 0 0 4px 0;
    `,resultsData:(0,n.css)`
      margin: 4px 0 ${re.spacing(2)} 0;
    `,resultsDataCount:(0,n.css)`
      margin: 0;
    `,resultsDataFiltered:(0,n.css)`
      color: ${re.colors.text.secondary};
      text-align: center;
      border: solid 1px rgba(204, 204, 220, 0.25);
      padding: 7px;
    `,resultsDataFilteredText:(0,n.css)`
      display: inline;
      vertical-align: text-top;
    `,results:(0,n.css)`
      height: calc(80vh - 310px);
      overflow-y: scroll;
    `,resultsFooter:(0,n.css)`
      margin-top: 24px;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      position: sticky;
    `,currentlySelected:(0,n.css)`
      color: grey;
      opacity: 75%;
      font-size: 0.75rem;
    `,loadingSpinner:(0,n.css)`
      visibility: hidden;
    `,visible:(0,n.css)`
      visibility: visible;
    `,settingsBtn:(0,n.css)`
      float: right;
    `,noBorder:(0,n.css)`
      border: none;
    `,resultsPerPageLabel:(0,n.css)`
      color: ${re.colors.text.secondary};
      opacity: 75%;
      padding-top: 5px;
      font-size: 0.85rem;
      margin-right: 8px;
    `,resultsPerPageWrapper:(0,n.css)`
      display: flex;
    `});var me=e(5135),ye=e(86832);const ue=new me.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1});function Oe(re,pe,be){const[xe,Pe,we]=ue.search(re,pe,!1,1e5);let Fe=[],He=new Set;if(xe&&we){const Xe=(dt,ct)=>{ct&&He.add(dt)};for(let dt=0;dt<we.length;dt++){let ct=we[dt];me.Z.highlight(re[Pe.idx[ct]],Pe.ranges[ct],Xe),Fe.push(re[Pe.idx[ct]])}be([Fe,[...He]])}else pe||be([[],[]])}const Ue=(0,ye.debounce)(Oe,300),{setIsLoading:at,buildMetrics:Ne,filterMetricsBackend:_e,setResultsPerPage:Ke,setPageNum:et,setFuzzySearchQuery:ze,setNameHaystack:je,setMetaHaystack:Qe,setFullMetaSearch:We,setIncludeNullMetadata:ke,setSelectedTypes:ot,setUseBackend:lt,setDisableTextWrap:Ct,showAdditionalSettings:wt}=V.stateSlice.actions,Lt=re=>{const{datasource:pe,isOpen:be,onClose:xe,onChange:Pe,query:we,initialMetrics:Fe}=re,[He,Xe]=(0,r.useReducer)(V.stateSlice.reducer,(0,V.E3)(we)),dt=(0,f.l4)(),ct=he(dt,He.disableTextWrap),At=(0,r.useCallback)(async()=>{Xe(at(!0));const tt=await K(pe,we,Fe);Xe(Ne({isLoading:!1,hasMetadata:tt.hasMetadata,metrics:tt.metrics,metaHaystackDictionary:tt.metaHaystackDictionary,nameHaystackDictionary:tt.nameHaystackDictionary,totalMetricCount:tt.metrics.length,filteredMetricCount:tt.metrics.length}))},[we,pe,Fe]);(0,r.useEffect)(()=>{At()},[At]);const Ie=Z.map(tt=>({value:tt.value,label:tt.value,description:tt.description})),Ze=(0,r.useMemo)(()=>l()(async tt=>{Xe(at(!0));const ft=await _(tt,we.labels,pe);Xe(_e({metrics:ft,filteredMetricCount:ft.length,isLoading:!1}))},pe.getDebounceTimeInMilliseconds()),[pe,we]);function ut(tt){Xe(je(tt))}function rt(tt){Xe(Qe(tt))}function St(tt,ft){He.useBackend&&tt===""?At():He.useBackend?Ze(tt):ft?Ue(Object.keys(He.metaHaystackDictionary),tt,rt):Ue(Object.keys(He.nameHaystackDictionary),tt,ut)}const st=r.createElement(ce,{state:He,onChangeFullMetaSearch:()=>{const tt=!He.fullMetaSearch;Xe(We(tt)),Pe({...we,fullMetaSearch:tt}),St(He.fuzzySearchQuery,tt)},onChangeIncludeNullMetadata:()=>{Xe(ke(!He.includeNullMetadata)),Pe({...we,includeNullMetadata:!He.includeNullMetadata})},onChangeDisableTextWrap:()=>{Xe(Ct()),Pe({...we,disableTextWrap:!He.disableTextWrap}),Y("grafana_prom_metric_encycopedia_disable_text_wrap_interaction",He,"")},onChangeUseBackend:()=>{const tt=!He.useBackend;Xe(lt(tt)),Pe({...we,useBackend:tt}),tt===!1?At():He.fuzzySearchQuery!==""&&Ze(He.fuzzySearchQuery)}});return r.createElement(P.u,{"data-testid":Ye.metricModal,isOpen:be,title:"Metrics explorer",onDismiss:xe,"aria-label":"Browse metrics",className:ct.modal},r.createElement(oe,{feedbackUrl:"https://forms.gle/DEMAJHoAMpe3e54CA"}),r.createElement("div",{className:ct.inputWrapper},r.createElement("div",{className:(0,n.cx)(ct.inputItem,ct.inputItemFirst)},r.createElement(x.I,{autoFocus:!0,"data-testid":Ye.searchMetric,placeholder:ae.browse,value:He.fuzzySearchQuery,onInput:tt=>{const ft=tt.currentTarget.value??"";Xe(ze(ft)),St(ft,He.fullMetaSearch)}})),He.hasMetadata&&r.createElement("div",{className:ct.inputItem},r.createElement(y.NU,{"data-testid":Ye.selectType,inputId:"my-select",options:Ie,value:He.selectedTypes,placeholder:ae.type,onChange:tt=>Xe(ot(tt))})),r.createElement("div",null,r.createElement(S.$,{className:`${ct.loadingSpinner} ${He.isLoading?ct.visible:""}`})),r.createElement("div",{className:ct.inputItem},r.createElement(I.P,{"aria-label":"Additional settings",content:st,placement:"bottom-end",closeButton:!1},r.createElement(T.h,{className:ct.settingsBtn},r.createElement(c.zx,{variant:"secondary",size:"md",onClick:()=>Xe(wt()),"data-testid":Ye.showAdditionalSettings,className:ct.noBorder},"Additional Settings"),r.createElement(c.zx,{className:ct.noBorder,variant:"secondary",icon:He.showAdditionalSettings?"angle-up":"angle-down"}))))),r.createElement("div",{className:ct.resultsData},we.metric&&r.createElement("i",{className:ct.currentlySelected},"Currently selected: ",we.metric),we.labels.length>0&&r.createElement("div",{className:ct.resultsDataFiltered},r.createElement(E.J,{name:"info-circle",size:"sm"}),r.createElement("div",{className:ct.resultsDataFilteredText},"\xA0These metrics have been pre-filtered by labels chosen in the label filters."))),r.createElement("div",{className:ct.results},He.metrics&&r.createElement(Te,{metrics:G(He,Xe),onChange:Pe,onClose:xe,query:we,state:He,disableTextWrap:He.disableTextWrap})),r.createElement("div",{className:ct.resultsFooter},r.createElement("div",{className:ct.resultsAmount},"Showing ",He.filteredMetricCount," of ",He.totalMetricCount," results"),r.createElement(O.t,{currentPage:He.pageNum??1,numberOfPages:j(He).length,onNavigate:tt=>{Xe(et(tt??1))}}),r.createElement("div",{className:ct.resultsPerPageWrapper},r.createElement("p",{className:ct.resultsPerPageLabel},"# Results per page\xA0"),r.createElement(x.I,{"data-testid":Ye.resultsPerPage,value:k(He.resultsPerPage,V.Xc,V.s6),placeholder:"results per page",width:10,title:"The maximum results per page is "+V.s6,type:"number",onInput:tt=>{const ft=+tt.currentTarget.value;isNaN(ft)||ft>=V.s6||Xe(Ke(ft))}}))))},Ye={metricModal:"metric-modal",searchMetric:"search-metric",searchWithMetadata:"search-with-metadata",selectType:"select-type",metricCard:"metric-card",useMetric:"use-metric",searchPage:"search-page",resultsPerPage:"results-per-page",setUseBackend:"set-use-backend",showAdditionalSettings:"show-additional-settings"},Be=" ",Le=1e3;function le({datasource:re,query:pe,onChange:be,onGetMetrics:xe,labelsFilters:Pe,metricLookupDisabled:we,onBlur:Fe,variableEditor:He}){const Xe=(0,f.wW)(de),[dt,ct]=(0,r.useState)({}),At=i.config.featureToggles.prometheusMetricEncyclopedia,Ie=[{value:"BrowseMetrics",label:"Metrics explorer",description:"Browse and filter all metrics and metadata with a fuzzy search"}],Ze=(0,r.useCallback)((Zt,tn)=>{const on=Zt.label??Zt.value;return on?on.toLowerCase?tn.split(Be).reduce((pn,Cn)=>{const Rt=on.toLowerCase().includes(Cn.toLowerCase());let mt=!1;return At&&(mt=on==="Metrics explorer"),pn&&(Rt||mt)},!0):!0:!1},[At]),ut=(0,r.useCallback)((Zt,tn)=>Zt.__isNew__?Zt.label:r.createElement(g(),{searchWords:tn.inputValue.split(Be),textToHighlight:Zt.label??"",highlightClassName:Xe.highlight}),[Xe.highlight]),rt=(Zt,tn)=>{const on=(0,M.Vl)(Zt);return X(on,tn)},St=Zt=>re.metricFindQuery(rt(Zt,Pe)).then(on=>{const qt=on.length;(0,D.My)(on),qt>on.length?ct({...dt,resultsTruncated:!0}):ct({...dt,resultsTruncated:!1});const pn=on.map(Cn=>({label:Cn.text,value:Cn.text}));return At?[...Ie,...pn]:pn}),st=()=>Promise.resolve([]),tt=l()(Zt=>St(Zt),re.getDebounceTimeInMilliseconds()),ft=Zt=>{const tn=Zt.data;if(tn.value==="BrowseMetrics"){const on=Zt.isFocused?Xe.focus:"";return r.createElement("div",{...Zt.innerProps,ref:Zt.innerRef,className:`${Xe.customOptionWidth} metric-encyclopedia-open`,onKeyDown:qt=>{qt.code==="Enter"&&ct({...dt,metricsModalOpen:!0})}},r.createElement("div",{className:`${Xe.customOption} ${on} metric-encyclopedia-open`},r.createElement("div",null,r.createElement("div",{className:"metric-encyclopedia-open"},tn.label),r.createElement("div",{className:`${Xe.customOptionDesc} metric-encyclopedia-open`},tn.description)),r.createElement(c.zx,{fill:"text",size:"sm",variant:"secondary",onClick:()=>ct({...dt,metricsModalOpen:!0}),className:"metric-encyclopedia-open"},"Open",r.createElement(E.J,{name:"arrow-right"}))))}return(0,C.Qn)(Zt)},$t=({children:Zt,maxHeight:tn,innerRef:on,innerProps:qt})=>{const pn=(0,f.l4)(),Cn=(0,p.D)(pn),Rt=!r.isValidElement(Zt)&&dt.resultsTruncated;return r.createElement("div",{...qt,className:`${Cn.menu} ${Xe.customMenuContainer}`,style:{maxHeight:tn},"aria-label":"Select options menu"},r.createElement(h.$,{scrollRefCallback:on,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},Zt),Rt&&r.createElement("div",{className:Xe.customMenuFooter},r.createElement("div",null,"Only the top 1000 metrics are displayed in the metric select. Use the metrics explorer to view all metrics.")))},Ht=()=>r.createElement(y.qb,{isClearable:!!He,inputId:"prometheus-metric-select",className:Xe.select,value:pe.metric?(0,m.E)(pe.metric):void 0,placeholder:"Select metric",allowCustomValue:!0,formatOptionLabel:ut,filterOption:Ze,onOpenMenu:async()=>{if(we)return;ct({isLoading:!0});const Zt=await xe(),tn=Zt.map(qt=>qt.value),on=Zt.length;Zt.length>Le&&(0,D.My)(Zt),ct(At?{metrics:[...Ie,...Zt],isLoading:void 0,initialMetrics:tn,resultsTruncated:on>Zt.length}:{metrics:Zt,isLoading:void 0,resultsTruncated:on>Zt.length})},loadOptions:we?st:tt,isLoading:dt.isLoading,defaultOptions:dt.metrics,onChange:Zt=>{const tn=Zt?.value;tn?At&&tn==="BrowseMetrics"?(Y("grafana_prometheus_metric_encyclopedia_open",null,"",pe),ct({...dt,metricsModalOpen:!0})):be({...pe,metric:tn}):be({...pe,metric:""})},components:At?{Option:ft,MenuList:$t}:{MenuList:$t},onBlur:Fe||(()=>{})});return r.createElement(r.Fragment,null,At&&!re.lookupsDisabled&&dt.metricsModalOpen&&r.createElement(Lt,{datasource:re,isOpen:dt.metricsModalOpen,onClose:()=>ct({...dt,metricsModalOpen:!1}),query:pe,onChange:be,initialMetrics:dt.initialMetrics??[]}),He?r.createElement(s.Z,null,r.createElement(v._,{label:"Metric",labelWidth:20,tooltip:r.createElement("div",null,"Optional: returns a list of label values for the label name in the specified metric.")},Ht())):r.createElement(d.s,null,r.createElement(u.S,{label:"Metric"},Ht())))}const de=re=>({select:(0,n.css)`
    min-width: 125px;
  `,highlight:(0,n.css)`
    label: select__match-highlight;
    background: inherit;
    padding: inherit;
    color: ${re.colors.warning.contrastText};
    background-color: ${re.colors.warning.main};
  `,customOption:(0,n.css)`
    padding: 8px;
    display: flex;
    justify-content: space-between;
    cursor: pointer;
    :hover {
      background-color: ${re.colors.emphasize(re.colors.background.primary,.1)};
    }
  `,customOptionlabel:(0,n.css)`
    color: ${re.colors.text.primary};
  `,customOptionDesc:(0,n.css)`
    color: ${re.colors.text.secondary};
    font-size: ${re.typography.size.xs};
    opacity: 50%;
  `,focus:(0,n.css)`
    background-color: ${re.colors.emphasize(re.colors.background.primary,.1)};
  `,customOptionWidth:(0,n.css)`
    min-width: 400px;
  `,customMenuFooter:(0,n.css)`
    flex: 0;
    display: flex;
    justify-content: space-between;
    padding: ${re.spacing(1.5)};
    border-top: 1px solid ${re.colors.border.weak};
    color: ${re.colors.text.secondary};
  `,customMenuContainer:(0,n.css)`
    display: flex;
    flex-direction: column;
    background: ${re.colors.background.primary};
    box-shadow: ${re.shadows.z3};
  `}),X=(re,pe)=>{const be=pe?se(pe):[];return`label_values({__name__=~".*${re}"${be?be.join(""):""}},__name__)`},se=re=>re.map(pe=>`,${pe.label}="${pe.value}"`)},85308:(J,R,e)=>{"use strict";e.d(R,{U:()=>I});var n=e(39953),a=e(47810),l=e(63163),r=e(89527),o=e(65234),g=e(41407),m=e(86832),d=e(46298),u=e(60481),i=e(46101),f=e(74661),c=e(99491),E=e(97368),p=e.n(E),h=e(99456),y=e(28888),s=e(34964),v=e(81803),C=e(9558);function D({item:O,defaultOp:A,onChange:B,onDelete:b,onGetLabelNames:W,onGetLabelValues:V,invalidLabel:w,invalidValue:K,getLabelValuesAutofillSuggestions:z,debounceDuration:G}){const[Q,j]=(0,n.useState)({}),[F,k]=(0,n.useState)(!1),[_,Y]=(0,n.useState)(!1),Z=(q=O.op)=>M.find(De=>De.label===q)?.isMultiValue,ae=q=>q?q.indexOf("|")>0?q.split("|"):[q]:[],ce=p()(q=>z(q,O.label),G);return n.createElement("div",{"data-testid":"prometheus-dimensions-filter-item"},n.createElement(s.B,null,n.createElement(C.Ph,{placeholder:"Select label","aria-label":y.wl.components.QueryBuilder.labelSelect,inputId:"prometheus-dimensions-filter-item-key",width:"auto",value:O.label?(0,h.E)(O.label):null,allowCustomValue:!0,onOpenMenu:async()=>{j({isLoadingLabelNames:!0});const q=await W(O);k(!0),j({labelNames:q,isLoadingLabelNames:void 0})},onCloseMenu:()=>{k(!1)},isOpen:F,isLoading:Q.isLoadingLabelNames??!1,options:Q.labelNames,onChange:q=>{q.label&&B({...O,op:O.op??A,label:q.label})},invalid:w}),n.createElement(C.Ph,{"aria-label":y.wl.components.QueryBuilder.matchOperatorSelect,className:"query-segment-operator",value:(0,h.E)(O.op??A),options:M,width:"auto",onChange:q=>{q.value!=null&&B({...O,op:q.value,value:Z(q.value)?O.value:ae(O?.value)[0]})}}),n.createElement(C.qb,{placeholder:"Select value","aria-label":y.wl.components.QueryBuilder.valueSelect,inputId:"prometheus-dimensions-filter-item-value",width:"auto",value:Z()?ae(O?.value).map(h.E):ae(O?.value).map(h.E)[0],allowCustomValue:!0,onOpenMenu:async()=>{j({isLoadingLabelValues:!0});const q=await V(O);(0,l.My)(q),Y(!0),j({...Q,labelValues:q,isLoadingLabelValues:void 0})},onCloseMenu:()=>{Y(!1)},isOpen:_,defaultOptions:Q.labelValues,isMulti:Z(),isLoading:Q.isLoadingLabelValues,loadOptions:ce,onChange:q=>{if(q.value)B({...O,value:q.value,op:O.op??A});else{const De=q.map(oe=>oe.label).join("|");B({...O,value:De,op:O.op??A})}},invalid:K}),n.createElement(v._,{"aria-label":"remove",icon:"times",variant:"secondary",onClick:b})))}const M=[{label:"=",value:"=",isMultiValue:!1},{label:"!=",value:"!=",isMultiValue:!1},{label:"<",value:"<",isMultiValue:!1},{label:">",value:">",isMultiValue:!1},{label:"=~",value:"=~",isMultiValue:!0},{label:"!~",value:"!~",isMultiValue:!0}],P="Select at least 1 label filter (label and value)";function x({labelsFilters:O,onChange:A,onGetLabelNames:B,onGetLabelValues:b,labelFilterRequired:W,getLabelValuesAutofillSuggestions:V,debounceDuration:w,variableEditor:K}){const z="=",[G,Q]=(0,n.useState)([{op:z}]);(0,n.useEffect)(()=>{O.length>0?Q(O):Q([{op:z}])},[O]);const j=_=>{Q(_);const Y=_.filter(Z=>Z.label!=null&&Z.value!=null);(0,m.isEqual)(Y,O)||A(Y)},F=G.some(_=>_.label&&_.value),k=()=>n.createElement(d.k,{items:G,onChange:j,renderItem:(_,Y,Z)=>n.createElement(D,{debounceDuration:w,item:_,defaultOp:z,onChange:Y,onDelete:Z,onGetLabelNames:B,onGetLabelValues:b,invalidLabel:W&&!_.label,invalidValue:W&&!_.value,getLabelValuesAutofillSuggestions:V})});return n.createElement(n.Fragment,null,K?n.createElement(f.Z,null,n.createElement("div",{className:(0,g.cx)((0,g.css)`
              display: flex;
            `)},n.createElement(c.W,{width:20,tooltip:n.createElement("div",null,"Optional: used to filter the metric select for this query type.")},"Label filters"),k())):n.createElement(u.s,null,n.createElement(i.S,{label:"Label filters",error:P,invalid:W&&!F},k())))}var S=e(53430);function I({datasource:O,query:A,onChange:B,onBlur:b,variableEditor:W}){const V=k=>{B({...A,labels:k})},w=(0,n.useCallback)(async k=>{const _=O.getVariables(),Y=await k;return[..._.map(Z=>({label:Z,value:Z})),...Y.map(Z=>({label:Z.value,value:Z.value,title:Z.description}))]},[O]),K=async k=>{if(!A.metric)return await O.languageProvider.fetchLabels(),O.languageProvider.getLabelKeys().map(ae=>({value:ae}));const _=A.labels.filter(ae=>ae!==k);_.push({label:"__name__",op:"=",value:A.metric});const Y=r.Z.renderLabels(_);let Z;return O.hasLabelsMatchAPISupport()?Z=await O.languageProvider.fetchSeriesLabelsMatch(Y):Z=await O.languageProvider.fetchSeriesLabels(Y),Object.keys(Z).filter(ae=>!_.find(ce=>ce.label===ae)).map(ae=>({value:ae}))},z=(k,_)=>{const Y={label:_??"__name__",op:"=~",value:(0,o.Vl)(`.*${k}`)},Z=A.labels.filter(De=>De.label!==Y.label);Z.push(Y),A.metric&&Z.push({label:"__name__",op:"=",value:A.metric});const ae=Z.map(De=>({...De,label:O.interpolateString(De.label),value:O.interpolateString(De.value)})),ce=r.Z.renderLabels(ae);let q;return O.hasLabelsMatchAPISupport()?q=Q(Y,ce):q=G(Y,ce),q.then(De=>((0,l.My)(De),De))},G=(k,_)=>{if(!k.label)return Promise.resolve([]);const Y=O.languageProvider.fetchSeries(_),Z=O.interpolateString(k.label);return Y.then(ae=>{const ce=new Set;return ae.forEach(q=>{const De=q[Z];ce.add(De)}),Array.from(ce).map(q=>({label:q,value:q}))})},Q=(k,_)=>k.label?O.languageProvider.fetchSeriesValuesWithMatch(k.label,_).then(Y=>Y.map(Z=>({value:Z,label:Z}))):Promise.resolve([]),j=async k=>{if(!k.label)return[];if(!A.metric)return(await O.languageProvider.getLabelValues(k.label)).map(ae=>({value:ae}));const _=A.labels.filter(ae=>ae!==k);_.push({label:"__name__",op:"=",value:A.metric});const Y=_.map(ae=>({...ae,label:O.interpolateString(ae.label),value:O.interpolateString(ae.value)})),Z=r.Z.renderLabels(Y);return O.hasLabelsMatchAPISupport()?Q(k,Z):G(k,Z)},F=(0,n.useCallback)(()=>w(T(O,A)),[O,A,w]);return n.createElement(n.Fragment,null,n.createElement(S.kU,{query:A,onChange:B,onGetMetrics:F,datasource:O,labelsFilters:A.labels,metricLookupDisabled:O.lookupsDisabled,onBlur:b||(()=>{}),variableEditor:W}),n.createElement(x,{debounceDuration:O.getDebounceTimeInMilliseconds(),getLabelValuesAutofillSuggestions:z,labelsFilters:A.labels,onChange:V,onGetLabelNames:k=>w(K(k)),onGetLabelValues:k=>w(j(k)),variableEditor:W}))}async function T(O,A){O.languageProvider.metricsMetadata||await O.languageProvider.loadMetricsMetadata(),O.languageProvider.metricsMetadata||(O.languageProvider.metricsMetadata={});let B;if(A.labels.length>0){const b=r.Z.renderLabels(A.labels);B=(await O.languageProvider.getSeries(b,!0)).__name__??[]}else B=await O.languageProvider.getLabelValues("__name__")??[];return B.map(b=>({value:b,description:(0,a.UQ)(b,O.languageProvider.metricsMetadata)}))}},55751:(J,R,e)=>{"use strict";e.d(R,{A:()=>u,n:()=>i});var n=e(39953),a=e(27366),l=e(49403),r=e(89527),o=e(95522),g=e(47433),m=e(23070),d=e(6155);const u="Fetch all series matching metric name and label filters.",i=n.memo(({query:f})=>{const c=(0,o._)(f||"").query,E={grammar:l.ZP,name:"promql"};return n.createElement(a.K,{gap:.5,direction:"column"},n.createElement(g.B,{stepNumber:1,title:n.createElement(d.U,{query:`${c.metric} ${r.Z.renderLabels(c.labels)}`,lang:E})},u),n.createElement(m.V,{stepNumber:2,queryModeller:r.Z,query:c,lang:E}))});i.displayName="PromQueryBuilderExplained"},94180:(J,R,e)=>{"use strict";e.d(R,{j:()=>g});var n=e(41407),a=e(39953),l=e(82803),r=e(63594),o=e(55751);function g(d){const{query:u,datasource:i,range:f,onRunQuery:c,onChange:E,data:p,app:h,showExplain:y}=d,s=(0,l.wW)(m);return a.createElement("div",{className:s.wrapper},a.createElement(r.ZP,{datasource:i,query:u,range:f,onRunQuery:c,onChange:E,history:[],data:p,app:h}),y&&a.createElement(o.n,{query:u.expr}))}const m=d=>({wrapper:(0,n.css)`
      .gf-form {
        margin-bottom: 0;
      }
    `})},93938:(J,R,e)=>{"use strict";e.d(R,{E3:()=>o,Gw:()=>g,Xc:()=>a,s6:()=>l,stateSlice:()=>r});var n=e(77960);const a=100,l=1e3,r=(0,n.oM)({name:"metrics-modal-state",initialState:o(),reducers:{filterMetricsBackend:(m,d)=>{m.metrics=d.payload.metrics,m.filteredMetricCount=d.payload.filteredMetricCount,m.isLoading=d.payload.isLoading},buildMetrics:(m,d)=>{m.isLoading=d.payload.isLoading,m.metrics=d.payload.metrics,m.hasMetadata=d.payload.hasMetadata,m.metaHaystackDictionary=d.payload.metaHaystackDictionary,m.nameHaystackDictionary=d.payload.nameHaystackDictionary,m.totalMetricCount=d.payload.totalMetricCount,m.filteredMetricCount=d.payload.filteredMetricCount},setIsLoading:(m,d)=>{m.isLoading=d.payload},setFilteredMetricCount:(m,d)=>{m.filteredMetricCount=d.payload},setResultsPerPage:(m,d)=>{m.resultsPerPage=d.payload},setPageNum:(m,d)=>{m.pageNum=d.payload},setFuzzySearchQuery:(m,d)=>{m.fuzzySearchQuery=d.payload,m.pageNum=1},setNameHaystack:(m,d)=>{m.nameHaystackOrder=d.payload[0],m.nameHaystackMatches=d.payload[1]},setMetaHaystack:(m,d)=>{m.metaHaystackOrder=d.payload[0],m.metaHaystackMatches=d.payload[1]},setFullMetaSearch:(m,d)=>{m.fullMetaSearch=d.payload,m.pageNum=1},setIncludeNullMetadata:(m,d)=>{m.includeNullMetadata=d.payload,m.pageNum=1},setSelectedTypes:(m,d)=>{m.selectedTypes=d.payload,m.pageNum=1},setUseBackend:(m,d)=>{m.useBackend=d.payload,m.fullMetaSearch=!1,m.pageNum=1},setDisableTextWrap:m=>{m.disableTextWrap=!m.disableTextWrap},showAdditionalSettings:m=>{m.showAdditionalSettings=!m.showAdditionalSettings}}});function o(m){return{isLoading:!0,metrics:[],hasMetadata:!0,metaHaystackDictionary:{},metaHaystackMatches:[],metaHaystackOrder:[],nameHaystackDictionary:{},nameHaystackOrder:[],nameHaystackMatches:[],totalMetricCount:0,filteredMetricCount:null,resultsPerPage:a,pageNum:1,fuzzySearchQuery:"",fullMetaSearch:m?.fullMetaSearch??!1,includeNullMetadata:m?.includeNullMetadata??!0,selectedTypes:[],useBackend:m?.useBackend??!1,disableTextWrap:m?.disableTextWrap??!1,showAdditionalSettings:!1}}function g(m){return{useBackend:m?.useBackend??!1,disableTextWrap:m?.disableTextWrap??!1,fullMetaSearch:m?.fullMetaSearch??!1,includeNullMetadata:m.includeNullMetadata??!1}}},95522:(J,R,e)=>{"use strict";e.d(R,{_:()=>r});var n=e(50590),a=e(96543),l=e(65234);function r(y){const s=(0,l.bU)(y),C=n.E2.parse(s).topNode,M={query:{metric:"",labels:[],operations:[]},errors:[]};try{g(s,C,M)}catch(P){console.error(P),P instanceof Error&&M.errors.push({text:P.message})}return h(M.query)&&(M.errors=[]),o(y)&&(M.errors=[]),M}function o(y){const s={query:{metric:"",labels:[],operations:[]},errors:[]};y=y.replace(/\$__interval/g,"1s"),y=y.replace(/\$__interval_ms/g,"1000"),y=y.replace(/\$__rate_interval/g,"1s"),y=y.replace(/\$__range_ms/g,"1000"),y=y.replace(/\$__range_s/g,"1"),y=y.replace(/\$__range/g,"1s");const C=n.E2.parse(y).topNode;try{g(y,C,s)}catch{return!1}return s.errors.length===0}function g(y,s,v){const C=v.query;switch(s.type.id){case n.tz:{C.metric=(0,l.KF)(y,s);break}case n.Zm:{C.labels.push(d(y,s));const D=s.getChild(l._A);D&&v.errors.push((0,l.wf)(y,D));break}case n.lX:{i(y,s,v);break}case n.aZ:{f(y,s,v);break}case n.vU:{E(y,s,v);break}case l._A:{if(m(s))break;v.errors.push((0,l.wf)(y,s));break}default:{s.type.id===n.Om&&v.errors.push((0,l.wf)(y,s));let D=s.firstChild;for(;D;)g(y,D,v),D=D.nextSibling}}}function m(y){return y.prevSibling?.type.id===n.wi&&y.prevSibling?.firstChild?.type.id===n.m6}function d(y,s){const v=(0,l.KF)(y,s.getChild(n.m0)),C=(0,l.KF)(y,s.getChild(n.e8)),D=(0,l.KF)(y,s.getChild(n.nv)).replace(/"/g,"");return{label:v,op:C,value:D}}const u=["changes","rate","irate","increase","delta"];function i(y,s,v){const C=v.query,D=s.getChild(n.hT),M=(0,l.KF)(y,D),x=s.getChild(n.yY).getChild(n.mW),S=[];let I="";if(u.includes(M)||M.endsWith("_over_time")){let O=(0,l.KF)(y,s).match(/\[(.+)\]/);O?.[1]&&(I=O[1],S.push(O[1]))}const T={id:M,params:S};if(C.operations.unshift(T),x){if((0,l.KF)(y,x)===I+"]")return;c(y,x,v,T)}}function f(y,s,v){const C=v.query,D=s.getChild(n.Ki);let M=(0,l.KF)(y,D);const P=s.getChild(n.Ip),x=[];P&&(P.getChild("By")&&M&&(M=`__${M}_by`),P.getChild(n.yN)&&(M=`__${M}_without`),x.push(...(0,l.ff)(y,P,n.Tm)));const I=s.getChild(n.yY).getChild(n.mW),O=I?.getChild(n.wi)?.getChild(n.vU);O&&v.errors.push({text:"Query parsing is ambiguous.",from:O.from,to:O.to});const A={id:M,params:[]};C.operations.unshift(A),c(y,I,v,A),A.params.push(...x)}function c(y,s,v,C){if(s)switch(s.type.id){case n.wi:case n.mW:{let D=s.firstChild;for(;D;){const P=D.getChild(n.wi)?.getChild(n.vU);P&&v.errors.push({text:"Query parsing is ambiguous.",from:P.from,to:P.to}),c(y,D,v,C),D=D.nextSibling}break}case n.iy:{C.params.push(parseFloat((0,l.KF)(y,s)));break}case n.nv:{C.params.push((0,l.KF)(y,s).replace(/"/g,""));break}default:g(y,s,v)}}function E(y,s,v){const C=v.query,D=s.firstChild,M=(0,l.KF)(y,D.nextSibling),P=p(y,s.getChild(n.v3)),x=s.lastChild,S=a.PX[M],I=D.getChild(n.iy),T=x.getChild(n.iy),O=x.getChild(n.vU);if(I||g(y,D,v),T)C.operations.push((0,l.Es)(S,y,x,!!P?.isBool));else if(O){const A=(0,l.ge)(x);A?.type.id===n.iy&&C.operations.push((0,l.Es)(S,y,A,!!P?.isBool)),g(y,x,v)}else{C.binaryQueries=C.binaryQueries||[];const A={operator:M,query:{metric:"",labels:[],operations:[]}};P?.isMatcher&&(A.vectorMatchesType=P.matchType,A.vectorMatches=P.matches),C.binaryQueries.push(A),g(y,x,{query:A.query,errors:v.errors})}}function p(y,s){if(s){if(s.getChild("Bool"))return{isBool:!0,isMatcher:!1};{const v=s.getChild(n.Wc);return v?{isMatcher:!0,isBool:!1,matches:(0,l.KF)(y,v.getChild(n.XT)?.getChild(n.pQ)),matchType:v.getChild(n.On)?"on":"ignoring"}:void 0}}}function h(y){return y.labels.length===0&&y.operations.length===0&&!y.metric}},32449:(J,R,e)=>{"use strict";e.d(R,{x:()=>l});var n=e(77663),a=e(18533);class l{constructor(o){this.categories=[],this.operationsRegistry=new n.B(o)}setOperationCategories(o){this.categories=o}getOperationsForCategory(o){return this.operationsRegistry.list().filter(g=>g.category===o&&!g.hideFromList)}getAlternativeOperations(o){return this.operationsRegistry.list().filter(g=>g.alternativesKey&&g.alternativesKey===o)}getCategories(){return this.categories}getOperationDef(o){return this.operationsRegistry.getIfExists(o)}renderOperations(o,g){for(const m of g){const d=this.operationsRegistry.getIfExists(m.id);if(!d)throw new Error(`Could not find operation ${m.id} in the registry`);o=d.renderer(m,d,o)}return o}renderBinaryQueries(o,g){if(g)for(const m of g)o=`${this.renderBinaryQuery(o,m)}`;return o}renderBinaryQuery(o,g){let m=o+` ${g.operator} `;return g.vectorMatches&&(m+=`${g.vectorMatchesType}(${g.vectorMatches}) `),m+this.renderQuery(g.query,!0)}renderLabels(o){if(o.length===0)return"";let g="{";for(const m of o)g!=="{"&&(g+=", "),g+=`${m.label}${m.op}"${m.value}"`;return g+"}"}renderQuery(o,g){let m=`${o.metric??""}${this.renderLabels(o.labels)}`;return m=this.renderOperations(m,o.operations),!g&&this.hasBinaryOp(o)&&o.binaryQueries?.length&&(m=`(${m})`),m=this.renderBinaryQueries(m,o.binaryQueries),g&&(this.hasBinaryOp(o)||o.binaryQueries?.length)&&(m=`(${m})`),m}hasBinaryOp(o){return o.operations.find(g=>this.getOperationDef(g.id)?.category===a.CM.BinaryOps)!==void 0}}},47433:(J,R,e)=>{"use strict";e.d(R,{B:()=>o});var n=e(41407),a=e(39953),l=e(52807),r=e(82803);function o({title:m,stepNumber:d,markdown:u,children:i}){const f=(0,r.wW)(g);return a.createElement("div",{className:f.box},d!==void 0&&a.createElement("div",{className:f.stepNumber},d),a.createElement("div",{className:f.boxInner},m&&a.createElement("div",{className:f.header},a.createElement("span",null,m)),a.createElement("div",{className:f.body},u&&a.createElement("div",{dangerouslySetInnerHTML:{__html:(0,l.a)(u)}}),i)))}const g=m=>({box:(0,n.css)({background:m.colors.background.secondary,padding:m.spacing(1),borderRadius:m.shape.radius.default,position:"relative"}),boxInner:(0,n.css)({marginLeft:m.spacing(4)}),stepNumber:(0,n.css)({fontWeight:m.typography.fontWeightMedium,background:m.colors.secondary.main,width:"20px",height:"20px",borderRadius:m.shape.radius.circle,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"10px",left:"11px",fontSize:m.typography.bodySmall.fontSize}),header:(0,n.css)({paddingBottom:m.spacing(.5),display:"flex",alignItems:"center",fontFamily:m.typography.fontFamilyMonospace}),body:(0,n.css)({color:m.colors.text.secondary,"p:last-child":{margin:0},a:{color:m.colors.text.link,textDecoration:"underline"}})})},23070:(J,R,e)=>{"use strict";e.d(R,{V:()=>r});var n=e(39953),a=e(47433),l=e(6155);function r({query:o,queryModeller:g,stepNumber:m,lang:d,onMouseEnter:u,onMouseLeave:i}){return n.createElement(n.Fragment,null,o.operations.map((f,c)=>{const E=g.getOperationDef(f.id);if(!E)return`Operation ${f.id} not found`;const p=E.renderer(f,E,"<expr>"),h=E.explainHandler?E.explainHandler(f,E):E.documentation??"no docs";return n.createElement("div",{key:c,onMouseEnter:()=>u?.(f,c),onMouseLeave:()=>i?.(f,c)},n.createElement(a.B,{stepNumber:c+m,title:n.createElement(l.U,{query:p,lang:d}),markdown:h}))}))}},6155:(J,R,e)=>{"use strict";e.d(R,{U:()=>g});var n=e(41407),a=e(10963),l=e.n(a),r=e(39953),o=e(82803);function g({query:d,lang:u,className:i}){const f=(0,o.l4)(),c=m(f),E=l().highlight(d,u.grammar,u.name);return r.createElement("div",{className:(0,n.cx)(c.editorField,"prism-syntax-highlight",i),"aria-label":"selector",dangerouslySetInnerHTML:{__html:E}})}const m=d=>({editorField:(0,n.css)({fontFamily:d.typography.fontFamilyMonospace,fontSize:d.typography.bodySmall.fontSize})})},82473:(J,R,e)=>{"use strict";e.d(R,{IT:()=>s,NZ:()=>f,PP:()=>E,Sp:()=>M,Z3:()=>v,ZI:()=>S,Zc:()=>I,e8:()=>i,i1:()=>h,j8:()=>x,kq:()=>y,pS:()=>m,t7:()=>p,zJ:()=>d});var n=e(86832),a=e.n(n),l=e(71757),r=e.n(l),o=e(14091),g=e(18533);function m(T,O,A){const B=c(T,O,A),b=T.id+"(";return A&&B.push(A),b+B.join(", ")+")"}function d(T,O,A){const B=c(T,O,A),b=T.id+"(";return A&&B.unshift(A),b+B.join(", ")+")"}function u(T,O,A,B){if(O.params.length<2)throw`Cannot render a function with params of length [${O.params.length}]`;let b=(T.params??[])[0]??"5m";const W=c({...T,params:T.params.slice(1)},{...O,params:O.params.slice(1),defaultParams:O.defaultParams.slice(1)},A),V=T.id+"(";return A&&(B?W.push(`${A}[${b}]`):W.unshift(`${A}[${b}]`)),V+W.join(", ")+")"}function i(T,O,A){return u(T,O,A,!1)}function f(T,O,A){return u(T,O,A,!0)}function c(T,O,A){return(T.params??[]).map((B,b)=>O.params[b].type==="string"?'"'+B+'"':B)}function E(T,O){const A={id:T.id,params:T.defaultParams};return{...O,operations:[...O.operations,A]}}function p(T){return(0,n.capitalize)(T.replace(/_/g," "))}function h(T,O){return`operations.${T}.param.${O}`}function y(T=!1){const O={name:"Range",type:"string",options:[{label:"$__interval",value:"$__interval"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}]};return T&&O.options.unshift({label:"$__rate_interval",value:"$__rate_interval"}),O}function s(T,O={}){return[{id:T,name:p(T),params:[{name:"By label",type:"string",restParam:!0,optional:!0}],defaultParams:[],alternativesKey:"plain aggregations",category:g.CM.Aggregations,renderer:m,paramChangedHandler:S(`__${T}_by`),explainHandler:M(T,""),addOperationHandler:E,...O},{id:`__${T}_by`,name:`${p(T)} by`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:o.g}],defaultParams:[""],alternativesKey:"aggregations by",category:g.CM.Aggregations,renderer:C(T),paramChangedHandler:x(T),explainHandler:M(T,"by"),addOperationHandler:E,hideFromList:!0,...O},{id:`__${T}_without`,name:`${p(T)} without`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:o.g}],defaultParams:[""],alternativesKey:"aggregations by",category:g.CM.Aggregations,renderer:D(T),paramChangedHandler:x(T),explainHandler:M(T,"without"),addOperationHandler:E,hideFromList:!0,...O}]}function v(T,O,A={}){const B=s(T,A);return B[0].params.unshift(...O.params),B[1].params.unshift(...O.params),B[2].params.unshift(...O.params),B[0].defaultParams=O.defaultParams,B[1].defaultParams=[...O.defaultParams,""],B[2].defaultParams=[...O.defaultParams,""],B[1].renderer=P(T),B[2].renderer=P(T),B}function C(T){return function(A,B,b){return`${T} by(${A.params.join(", ")}) (${b})`}}function D(T){return function(A,B,b){return`${T} without(${A.params.join(", ")}) (${b})`}}function M(T,O){return function(B){const b=B.params.map(V=>`\`${V}\``).join(" and "),W=r()("label",B.params.length);switch(O){case"by":return`Calculates ${T} over dimensions while preserving ${W} ${b}.`;case"without":return`Calculates ${T} over the dimensions ${b}. All other labels are preserved.`;default:return`Calculates ${T} over the dimensions.`}}}function P(T){return function(A,B,b){const W=B.params.findIndex(K=>K.restParam),V=A.params.slice(0,W),w=A.params.slice(W);return`${T} by(${w.join(", ")}) (${V.map((K,z)=>B.params[z].type==="string"?`"${K}"`:K).join(", ")}, ${b})`}}function x(T){return function(A,B,b){return B.params.length<b.params.length?{...B,id:T}:B}}function S(T){return function(A,B,b){return B.params.length===b.params.length?{...B,id:T}:B}}function I(T,O){if(!T.label||!T.op||!T.value||O.length<2)return!1;const A=T.op.toString().startsWith("!");return O.filter(W=>W.label===T.label&&W.value===T.value&&W.op!==T.op).some(W=>!!(A&&W?.op?.toString().startsWith("!")===!1||A===!1&&W?.op?.toString().startsWith("!")))}},65234:(J,R,e)=>{"use strict";e.d(R,{Es:()=>u,KF:()=>d,Tt:()=>m,Vl:()=>h,_A:()=>n,bU:()=>o,ff:()=>i,ge:()=>a,wf:()=>l});const n=0;function a(y){return y.firstChild?a(y.firstChild):y}function l(y,s){return{text:d(y,s),from:s.from,to:s.to,parentType:s.parent?.name}}const r=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function o(y){return y.replace(r,(s,v,C,D,M,P,x)=>{const S=D||x;let I=v,T="0";return C&&(I=C,T="1"),M&&(I=M,T="2"),`__V_${T}__`+I+"__V__"+(S?"__F__"+S+"__F__":"")})}const g=[(y,s)=>`$${y}`,(y,s)=>`[[${y}${s?`:${s}`:""}]]`,(y,s)=>`\${${y}${s?`:${s}`:""}}`];function m(y){return y.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,(s,v,C,D)=>g[parseInt(v,10)](C,D))}function d(y,s){return s?m(y.substring(s.from,s.to)):""}function u(y,s,v,C){const D=[parseFloat(d(s,v))];return y.comparison&&D.push(C),{id:y.id,params:D}}function i(y,s,v){if(s.type.id===v||s.name===v)return[d(y,s)];const C=[];let D=0,M=s.childAfter(D);for(;M;)C.push(...i(y,M,v)),D=M.to,M=s.childAfter(D);return C}function f(y,s){if(!s){console.log("<empty>");return}const v=c(y,s),C=E(v);if(!C){console.log("<empty>");return}console.log(C)}function c(y,s){const v={},C=p(y,s),D=[];let M=0,P=s.childAfter(M);for(;P;)D.push(c(y,P)),M=P.to,P=s.childAfter(M);return v.name=C,v.children=D,v}function E(y,s={lastChild:!0,indent:""}){const v=y.name,{lastChild:C,indent:D}=s;let P=(D!==""?D+(C?"\u2514\u2500":"\u251C\u2500"):"")+v;const x=y.children;return x.forEach((S,I)=>{const T=I===x.length-1;P+=`
`+E(S,{lastChild:T,indent:D+(C?"  ":"\u2502 ")})}),P}function p(y,s){return s.name+": "+d(y,s)}const h=y=>y.split(" ").map(v=>`${v}.*`).join("")},83065:(J,R,e)=>{"use strict";e.d(R,{c:()=>n});var n=(a=>(a.Code="code",a.Builder="builder",a))(n||{})},18533:(J,R,e)=>{"use strict";e.d(R,{CM:()=>n,Fz:()=>l,G3:()=>a});var n=(r=>(r.Aggregations="Aggregations",r.RangeFunctions="Range functions",r.Functions="Functions",r.BinaryOps="Binary operations",r.Trigonometric="Trigonometric",r.Time="Time Functions",r))(n||{}),a=(r=>(r.Abs="abs",r.Absent="absent",r.AbsentOverTime="absent_over_time",r.Acos="acos",r.Acosh="acosh",r.Asin="asin",r.Asinh="asinh",r.Atan="atan",r.Atanh="atanh",r.Avg="avg",r.AvgOverTime="avg_over_time",r.BottomK="bottomk",r.Ceil="ceil",r.Changes="changes",r.Clamp="clamp",r.ClampMax="clamp_max",r.ClampMin="clamp_min",r.Cos="cos",r.Cosh="cosh",r.Count="count",r.CountOverTime="count_over_time",r.CountScalar="count_scalar",r.CountValues="count_values",r.DayOfMonth="day_of_month",r.DayOfWeek="day_of_week",r.DayOfYear="day_of_year",r.DaysInMonth="days_in_month",r.Deg="deg",r.Delta="delta",r.Deriv="deriv",r.DropCommonLabels="drop_common_labels",r.Exp="exp",r.Floor="floor",r.Group="group",r.HistogramQuantile="histogram_quantile",r.HoltWinters="holt_winters",r.Hour="hour",r.Idelta="idelta",r.Increase="increase",r.Irate="irate",r.LabelJoin="label_join",r.LabelReplace="label_replace",r.Last="last",r.LastOverTime="last_over_time",r.Ln="ln",r.Log10="log10",r.Log2="log2",r.Max="max",r.MaxOverTime="max_over_time",r.Min="min",r.MinOverTime="min_over_time",r.Minute="minute",r.Month="month",r.Pi="pi",r.PredictLinear="predict_linear",r.Present="present",r.PresentOverTime="present_over_time",r.Quantile="quantile",r.QuantileOverTime="quantile_over_time",r.Rad="rad",r.Rate="rate",r.Resets="resets",r.Round="round",r.Scalar="scalar",r.Sgn="sgn",r.Sin="sin",r.Sinh="sinh",r.Sort="sort",r.SortDesc="sort_desc",r.Sqrt="sqrt",r.Stddev="stddev",r.StddevOverTime="stddev_over_time",r.Sum="sum",r.SumOverTime="sum_over_time",r.Tan="tan",r.Tanh="tanh",r.Time="time",r.Timestamp="timestamp",r.TopK="topk",r.Vector="vector",r.Year="year",r.Addition="__addition",r.Subtraction="__subtraction",r.MultiplyBy="__multiply_by",r.DivideBy="__divide_by",r.Modulo="__modulo",r.Exponent="__exponent",r.NestedQuery="__nested_query",r.EqualTo="__equal_to",r.NotEqualTo="__not_equal_to",r.GreaterThan="__greater_than",r.LessThan="__less_than",r.GreaterOrEqual="__greater_or_equal",r.LessOrEqual="__less_or_equal",r))(a||{}),l=(r=>(r.Rate="rate",r.Histogram="histogram",r.Binary="binary",r))(l||{})},3395:(J,R,e)=>{"use strict";e.d(R,{tQ:()=>E,Ji:()=>f});var n=e(5195),a=e(92403),l=e(80742),r=e(60862),o=e(32688),g=e(72639),m=e(26058);function d(p,h){let[y]=p,[s]=h,v=y.length,C=y[0],D=y[v-1],M=s.length,P=s[0],x=s[M-1],S;if(v)if(M){if(P>D)S=p.map((I,T)=>p[T].concat(h[T]));else if(x<C)S=h.map((I,T)=>h[T].concat(p[T]));else if(P<=C&&x>=D)S=h;else if(!(P>C&&x<D)){if(P>=C){let I=(0,m.Ko)(P,y);I=y[I]<P?I-1:I,S=p.map((T,O)=>p[O].slice(0,I).concat(h[O]))}else if(x>=C){let I=(0,m.Ko)(x,y);I=y[I]<x?I:I+1,S=h.map((T,O)=>h[O].concat(p[O].slice(I)))}}}else S=p;else M?S=h:S=[[]];return S}function u(p,h,y){let[s,...v]=p,C,D;return s[0]<h&&(C=(0,m.Ko)(h,s),s[C]<h&&C++),s[s.length-1]>y&&(D=(0,m.Ko)(y,s),s[D]>y&&D--),(C!=null||D!=null)&&(s=s.slice(C??0,D),v=v.map(M=>M.slice(C??0,D))),[s,...v]}var i=e(6278);const f="10m",c=p=>`${p.type}|${p.name}|${JSON.stringify(p.labels??"")}`;class E{constructor(h){this.sendEventsInterval=6e4*10,this.pendingRequestIdsToTargSigs=new Map,this.pendingAccumulatedEvents=new Map,this.cache=new Map,this.sendPendingTrackingEvents=()=>{const s=this.pendingAccumulatedEvents.entries();for(let[v,C]of s)if(!C.sent){const D={datasource:C.datasource.toString(),requestCount:C.requestCount.toString(),savedBytesTotal:C.savedBytesTotal.toString(),initialRequestSize:C.initialRequestSize.toString(),lastRequestSize:C.lastRequestSize.toString(),panelId:C.panelId.toString(),dashId:C.dashId.toString(),expr:C.expr.toString(),refreshIntervalMs:C.refreshIntervalMs.toString(),from:C.from.toString(),queryRangeSeconds:C.queryRangeSeconds.toString()};o.config.featureToggles.prometheusIncrementalQueryInstrumentation?(0,g.ff)("grafana_incremental_queries_profile",D):r.s.api.pushEvent&&r.s.api.pushEvent("incremental query response size",D,"no-interaction",{skipDedupe:!0}),this.pendingAccumulatedEvents.set(v,{...C,sent:!0,requestCount:0,savedBytesTotal:0,initialRequestSize:0,lastRequestSize:0})}};const y=h.overlapString;if((0,n.jO)(y)){const s=(0,n.RA)(y);this.overlapWindowMs=(0,n.iX)(s)}else{const s=(0,n.RA)(f);this.overlapWindowMs=(0,n.iX)(s)}(o.config.grafanaJavascriptAgent.enabled||o.config.featureToggles?.prometheusIncrementalQueryInstrumentation)&&h.profileFunction!==void 0?(this.profile(),this.shouldProfile=!0):this.shouldProfile=!1,this.getProfileData=h.profileFunction,this.getTargetSignature=h.getTargetSignature}profile(){typeof PerformanceObserver=="function"&&(this.perfObeserver=new PerformanceObserver(h=>{h.getEntries().forEach(y=>{const s=y,v=typeof s?.transferSize=="number";if(s?.initiatorType==="fetch"&&v){let C=s.name;if(C.includes("/api/ds/query")){let D=C.match(/requestId=([a-z\d]+)/i);if(D){let M=D[1];const P=Math.round(s.transferSize),x=this.pendingRequestIdsToTargSigs.get(M);if(x){const S=this.pendingRequestIdsToTargSigs.entries();for(let[,I]of S)if(I.identity===x.identity&&I.bytes!==null){const T=this.pendingAccumulatedEvents.get(I.identity),O=I.bytes-P;this.pendingAccumulatedEvents.set(I.identity,{datasource:I.datasource??"N/A",requestCount:(T?.requestCount??0)+1,savedBytesTotal:(T?.savedBytesTotal??0)+O,initialRequestSize:I.bytes,lastRequestSize:P,panelId:x.panelId?.toString()??"",dashId:x.dashboardUID??"",expr:x.expr??"",refreshIntervalMs:x.refreshIntervalMs??0,sent:!1,from:x.from??"",queryRangeSeconds:x.queryRangeSeconds??0}),this.pendingRequestIdsToTargSigs.delete(M);return}this.pendingRequestIdsToTargSigs.set(M,{...x,bytes:P})}}}}})}),this.perfObeserver.observe({type:"resource",buffered:!1}),setInterval(this.sendPendingTrackingEvents,this.sendEventsInterval),window.addEventListener("beforeunload",this.sendPendingTrackingEvents))}requestInfo(h){const y=h.range.from.valueOf(),s=h.range.to.valueOf(),v=h.rangeRaw?.to?.toString()==="now";let C=v,D;const M=(0,i.$t)().refreshMS,P=new Map;h.targets.forEach(x=>{let S=`${h.dashboardUID}|${h.panelId}|${x.refId}`,I=this.getTargetSignature(h,x);this.shouldProfile&&this.getProfileData&&this.pendingRequestIdsToTargSigs.set(h.requestId,{...this.getProfileData(h,x),identity:S+"|"+I,bytes:null,panelId:h.panelId,dashboardUID:h.dashboardUID??"",from:h.rangeRaw?.from.toString()??"",queryRangeSeconds:h.range.to.diff(h.range.from,"seconds")??"",refreshIntervalMs:M??0}),P.set(S,I)});for(const[x,S]of P){let I=this.cache.get(x);if(I?.sig!==S?C=!1:(D=I?.prevTo??1/0,C=s>D&&y<=D),!C)break}if(C&&D){let x=Math.max(D-this.overlapWindowMs,y);const S=(0,a.CQ)(s),I=(0,a.CQ)((0,l.mB)(x,h.intervalMs));h={...h,range:{...h.range,from:I,to:S}}}else P.forEach((x,S)=>{this.cache.delete(S)});return{requests:[h],targSigs:P,shouldCache:v}}procFrames(h,y,s){if(y?.shouldCache){const v=h.range.from.valueOf(),C=h.range.to.valueOf(),D=new Map;s.forEach(P=>{let x=`${h.dashboardUID}|${h.panelId}|${P.refId}`,S=D.get(x);S||(S=[],D.set(x,S)),S.push(P)});let M=[];D.forEach((P,x)=>{let S=(x?this.cache.get(x)?.frames:null)??[];P.forEach(T=>{if(T.length===0||T.fields.length===0)return;let O=c(T.fields[1]),A=S.find(B=>c(B.fields[1])===O);if(!A)S.push(T);else{let B=A.fields.map(V=>V.values),b=T.fields.map(V=>V.values),W=d(B,b);if(W){for(let V=0;V<W.length;V++)A.fields[V].values=W[V];A.length=A.fields[0].values.length}}});let I=[];S.forEach(T=>{let O=T.fields.map(B=>B.values),A=u(O,v,C);if(A[0].length>0){for(let B=0;B<A.length;B++)T.fields[B].values=A[B];I.push(T)}}),this.cache.set(x,{sig:y.targSigs.get(x),frames:I,prevTo:C}),M.push(...I)}),s=M.map(P=>({...P,fields:P.fields.map(x=>({...x,config:{...x.config},values:x.values.slice()}))}))}return s}}},52226:(J,R,e)=>{"use strict";e.d(R,{Ky:()=>Q,n:()=>D,nM:()=>w,nf:()=>G,vs:()=>S});var n=e(39228),a=e(86832),l=e.n(a),r=e(96083),o=e(89591),g=e(69330),m=e(30976),d=e(33975),u=e(94123),i=e(72964),f=e(36822),c=e(51226),E=e(32688),p=e(26205),h=e(79059),y=e(64304);const s=/^[+-]?inf(?:inity)?$/i,v=(j,F)=>F.app===r.zj.Explore&&(j.meta?.custom?.resultType==="vector"||j.meta?.custom?.resultType==="scalar")?!0:F.targets.find(_=>_.refId===j.refId)?.format==="table",C=(j,F)=>F.targets.find(_=>_.refId===j.refId)?.format==="heatmap";function D(j,F,k){E.config.featureToggles.prometheusDataplane&&j.data.forEach(me=>{const ye=F.targets.find(ue=>ue.refId===me.refId);ye&&ye.legendFormat==="__auto"&&me.fields.forEach(ue=>{if(ue.labels?.__name__&&ue.labels?.__name__===ue.name){const Oe={...ue,name:o.M5};ue.config.displayNameFromDS=(0,g.CZ)(Oe,me,j.data)}})});const[_,Y]=(0,a.partition)(j.data,me=>v(me,F)),Z=P(_),[ae,ce]=(0,a.partition)(Y,me=>me.meta?.custom?.resultType==="exemplar"),{exemplarTraceIdDestinations:q}=k,De=ae.map(me=>{if(q?.length)for(const ye of q){const ue=me.fields.find(Oe=>Oe.name===ye.name);if(ue){const Oe=I(ye);ue.config.links=ue.config.links?.length?[...ue.config.links,...Oe]:Oe}}return{...me,meta:{...me.meta,dataTopic:m.w5.Annotations}}}),[oe,te]=(0,a.partition)(ce,me=>C(me,F));oe.forEach(me=>{if(me.name==null){let ye=me.fields.find(ue=>ue.type===o.fS.number);if(ye){let ue=ye.labels?.le;ue&&(me.name=ue,ye.config.displayNameFromDS=ue)}}});const fe=(0,a.groupBy)(oe,me=>me.refId);let Te=[];for(const me in fe){const ye=fe[me],ue=(0,a.groupBy)(ye,Oe=>{const Ue=Oe.fields.find(at=>at.type===o.fS.number);if(Ue?.labels&&M in Ue.labels){const{le:at,...Ne}=Ue?.labels;return Object.values(Ne).join()}return Object.values(Ue?.labels??[]).join()});(0,a.forOwn)(ue,(Oe,Ue)=>{const at=Oe.sort(G);Te.push(K(z(at)))})}const ge=te.map(me=>({...me,meta:{...me.meta,preferredVisualisationType:"graph"}})),he=(0,a.flatten)(Te);return{...j,data:[...ge,...Z,...he,...De]}}const M="le";function P(j){if(j.length===0||j.length===1&&j[0].length===0)return j;const F=(0,a.groupBy)(j,"refId"),k=Object.keys(F);return k.map(Y=>{const Z=x(k.length,Y),ae=W({data:[],valueName:Z}),ce=b([]),q=[];F[Y].forEach(oe=>{const fe=oe.fields[1]?.labels??{};Object.keys(fe).sort().forEach(Te=>{if(!q.some(ge=>ge.name===Te)){const ge=Te===M;q.push({name:Te,config:{filterable:!0},type:ge?o.fS.number:o.fS.string,values:[]})}})}),F[Y].forEach(oe=>{const te=oe.fields[0]?.values??[],fe=oe.fields[1]?.values??[];te.forEach(Te=>ce.values.push(Te)),fe.forEach(Te=>{ae.values.push(Q(Te));const ge=oe.fields[1].labels??{};q.forEach(he=>he.values.push(B(ge,he.name)))})});const De=[ce,...q,ae];return{refId:Y,fields:De,meta:{...F[Y][0].meta,preferredVisualisationType:"rawPrometheus"},length:ce.values.length}})}function x(j,F=""){return j>1?`Value #${F}`:"Value"}function S(j,F){const k={format:F.target.format,step:F.query.step,legendFormat:F.target.legendFormat,start:F.query.start,end:F.query.end,query:F.query.expr,responseListLength:F.responseListLength,scopedVars:F.scopedVars,refId:F.target.refId,valueWithRefId:F.target.valueWithRefId,meta:{preferredVisualisationType:F.query.instant?"rawPrometheus":"graph"}},_=j.data.data;if((0,y.WS)(_)){const Z=[];_.forEach(q=>{const De=q.exemplars.map(oe=>({[o.Ls]:oe.timestamp*1e3,[o.M5]:oe.value,...oe.labels,...q.seriesLabels}));Z.push(...De)});const ae=T(Z,k),ce=new d.i(ae);if(ce.meta={dataTopic:m.w5.Annotations},F.exemplarTraceIdDestinations?.length)for(const q of F.exemplarTraceIdDestinations){const De=ce.fields.find(oe=>oe.name===q.name);if(De){const oe=I(q);De.config.links=De.config.links?.length?[...De.config.links,...oe]:oe}}return[ce]}if(!_?.result)return[];if(_.resultType==="scalar")return[{meta:k.meta,refId:k.refId,length:1,fields:[b([_.result]),W({data:[_.result]})]}];if(k.format==="table")return[A(_.result,k)];const Y=[];return _.result.forEach(Z=>Y.push(O(Z,k))),k.format==="heatmap"?K(z(Y.sort(G))):Y}function I(j){const F=[];if(j.datasourceUid){const _=(0,p.F)().getInstanceSettings(j.datasourceUid);_&&F.push({title:j.urlDisplayLabel||`Query with ${_?.name}`,url:"",internal:{query:{query:"${__value.raw}",queryType:"traceql"},datasourceUid:j.datasourceUid,datasourceName:_?.name??"Data source not found"}})}return j.url&&F.push({title:j.urlDisplayLabel||`Go to ${j.url}`,url:j.url,targetBlank:!0}),F}function T(j,F){const k=F.step||15,_={},Y=[];for(const q of j){const De=String(Math.floor(q[o.Ls]/1e3/k)*k*1e3);_[De]||(_[De]=[]),_[De].push(q),Y.push(q[o.M5])}const Z=(0,n.deviation)(Y),ae=Object.keys(_).sort(),ce=[];for(const q of ae){const De=_[q];if(De.length===1)ce.push(De[0]);else{const te=De.map(fe=>fe[o.M5]).sort(n.descending).reduce((fe,Te)=>{if(fe.length===0)fe.push(Te);else{const ge=fe[fe.length-1];Z&&ge-Te>=2*Z&&fe.push(Te)}return fe},[]);ce.push(...te.map(fe=>De.find(Te=>Te[o.M5]===fe)))}}return ce}function O(j,F){const{name:k,labels:_}=V(j.metric,F),Y=[];if((0,y.el)(j)){const Z=F.step?F.step*1e3:NaN;let ae=F.start*1e3;const ce=[];for(const De of j.values){let oe=Q(De[1]);isNaN(oe)&&(oe=null);const te=De[0]*1e3;for(let fe=ae;fe<te;fe+=Z)ce.push([fe,null]);ae=te+Z,ce.push([te,oe])}const q=F.end*1e3;for(let De=ae;De<=q;De+=Z)ce.push([De,null]);Y.push(b(ce,!0)),Y.push(W({data:ce,parseValue:!1,labels:_,displayNameFromDS:k}))}else Y.push(b([j.value])),Y.push(W({data:[j.value],labels:_,displayNameFromDS:k}));return{meta:F.meta,refId:F.refId,length:Y[0].values.length,fields:Y,name:k}}function A(j,F){if(!j||j.length===0)return{meta:F.meta,refId:F.refId,length:0,fields:[]};const k=F.responseListLength>1||F.valueWithRefId?`Value #${F.refId}`:"Value",_=b([]),Y=Object.keys(j.reduce((ae,ce)=>({...ae,...ce.metric}),{})).sort().map(ae=>({name:ae,config:{filterable:!0},type:ae===M?o.fS.number:o.fS.string,values:[]})),Z=W({data:[],valueName:k});return j.forEach(ae=>{(0,y.el)(ae)?ae.values.forEach(ce=>{_.values.push(ce[0]*1e3),Y.forEach(q=>q.values.push(B(ae.metric,q.name))),Z.values.push(Q(ce[1]))}):(_.values.push(ae.value[0]*1e3),Y.forEach(ce=>ce.values.push(B(ae.metric,ce.name))),Z.values.push(Q(ae.value[1])))}),{meta:F.meta,refId:F.refId,length:_.values.length,fields:[_,...Y,Z]}}function B(j,F){return j.hasOwnProperty(F)?F===M?Q(j[F]):j[F]:""}function b(j,F=!1){return{name:o.Ls,type:o.fS.time,config:{},values:j.map(k=>F?k[0]:k[0]*1e3)}}function W({data:j,valueName:F=o.M5,parseValue:k=!0,labels:_,displayNameFromDS:Y}){return{name:F,type:o.fS.number,display:(0,u.U)(),config:{displayNameFromDS:Y},labels:_,values:j.map(Z=>k?Q(Z[1]):Z[1])}}function V(j,F){if(F?.legendFormat)return{name:(0,i.W)((0,h.J)().replace(F.legendFormat,F?.scopedVars),j),labels:j};const{__name__:k,..._}=j,Y=(0,f.aA)(_);let Z=`${k??""}${Y}`;return Z||(Z=F.query),{name:Z,labels:_}}function w(j){const F=j.__name__||"";delete j.__name__;const k=Object.entries(j).map(_=>`${_[0]}="${_[1]}"`).join(",");return`${F}{${k}}`}function K(j){if(j.length===0||j.length===1&&j[0].length===0)return[];const F=j[0].fields.find(_=>_.type===o.fS.time),k=j.map(_=>{let Y=_.fields.find(Z=>Z.type===o.fS.number);return{...Y,name:Y.config.displayNameFromDS}});return[{...j[0],meta:{...j[0].meta,type:c.P.HeatmapRows},fields:[F,...k]}]}function z(j){for(let F=j.length-1;F>0;F--){const k=j[F].fields.find(Y=>Y.type===o.fS.number),_=j[F-1].fields.find(Y=>Y.type===o.fS.number);if(!k||!_)throw new Error("Prometheus heatmap transform error: data should be a time series");for(let Y=0;Y<k.values.length;Y++){const Z=_.values[Y]||[0];k.values[Y]-=Z}}return j}function G(j,F){let k,_;try{k=Q(j.fields[1].state?.displayName??j.name??j.fields[1].name),_=Q(F.fields[1].state?.displayName??F.name??F.fields[1].name)}catch(Y){return console.error(Y),0}return k>_?1:k<_?-1:0}function Q(j){return s.test(j)?j[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:parseFloat(j)}},64304:(J,R,e)=>{"use strict";e.d(R,{T8:()=>a,WS:()=>r,el:()=>l,jo:()=>g,pD:()=>o,x3:()=>n});var n=(m=>(m.Low="Low",m.Medium="Medium",m.High="High",m.None="None",m))(n||{}),a=(m=>(m.Cortex="Cortex",m.Mimir="Mimir",m.Prometheus="Prometheus",m.Thanos="Thanos",m))(a||{});function l(m){return"values"in m}function r(m){return m==null||!Array.isArray(m)?!1:m.length?"exemplars"in m[0]:!1}var o=(m=>(m.Auto="__auto",m.Verbose="__verbose",m.Custom="__custom",m))(o||{}),g=(m=>(m[m.LabelNames=0]="LabelNames",m[m.LabelValues=1]="LabelValues",m[m.MetricNames=2]="MetricNames",m[m.VarQueryResult=3]="VarQueryResult",m[m.SeriesQuery=4]="SeriesQuery",m[m.ClassicQuery=5]="ClassicQuery",m))(g||{})},1838:(J,R,e)=>{"use strict";e.d(R,{Mt:()=>l,NM:()=>r,sY:()=>a});const n={filters:[],groupBy:[]};var a=(o=>(o.Done="done",o.Error="error",o.Pending="pending",o.Streaming="streaming",o))(a||{}),l=(o=>(o.Spans="spans",o.Traces="traces",o))(l||{}),r=(o=>(o.Intrinsic="intrinsic",o.Resource="resource",o.Span="span",o.Unscoped="unscoped",o))(r||{})},1497:(J,R,e)=>{"use strict";e.d(R,{$C:()=>y,BC:()=>D,M7:()=>d,NZ:()=>p,T1:()=>v,Yt:()=>c,rB:()=>h,t3:()=>C,vO:()=>s,yf:()=>E});var n=e(98579),a=e(2221),l=e(7906),r=e(89591),o=e(97898),g=e(53305),m=e(68586);function d(T){const{nodes:O,edges:A}=u(T),[B,b]=(0,m.np)();for(const W of O)B.add(W);for(const W of A)b.add(W);return[B,b]}function u(T){const O=[],A=[],B=new n.U(T),b=i(B),W=(0,m.nO)(V=>{if(V>=T.length)return;const w=B.get(V);return{span:{...w},id:w.spanID,parentIds:w.parentSpanID?[w.parentSpanID]:[]}});for(let V=0;V<B.length;V++){const w=B.get(V),K=W[w.spanID].children.map(j=>{const F=W[j].span;return[F.startTime,F.startTime+F.duration]}),z=(0,m.et)(K),G=w.duration-z,Q=(0,m.fy)(w.duration,b,G);O.push({[a.z.id]:w.spanID,[a.z.title]:w.serviceName??"",[a.z.subTitle]:w.operationName,[a.z.mainStat]:Q.main,[a.z.secondaryStat]:Q.secondary,[a.z.color]:G/b}),w.parentSpanID&&W[w.parentSpanID].span&&A.push({[a.z.id]:w.parentSpanID+"--"+w.spanID,[a.z.target]:w.spanID,[a.z.source]:w.parentSpanID})}return{nodes:O,edges:A}}function i(T){let O=0,A=1/0;for(let B=0;B<T.length;B++){const b=T.get(B);b.startTime<A&&(A=b.startTime),b.startTime+b.duration>O&&(O=b.startTime+b.duration)}return O-A}const f="traces_service_graph_request_server_seconds_sum",c="traces_service_graph_request_total",E="traces_service_graph_request_failed_total",p="traces_service_graph_request_server_seconds_bucket",h={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:[]},y={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:['status_code="STATUS_CODE_ERROR"']},s={expr:"histogram_quantile(.9, sum(rate(traces_spanmetrics_latency_bucket{}[$__range])) by (le))",params:[]},v='span_kind="SPAN_KIND_SERVER"',C=[f,c,E,p];function D(T,O){const A=P(T),B={},b={};return S(A[c],"total",c,B,b),S(A[f],"seconds",f,B,b),S(A[E],"failed",E,B,b),I(B,b,O)}function M(){function T(B,b){return new l.v({name:B,fields:b,meta:{preferredVisualisationType:"nodeGraph"}})}const O=T("Nodes",[{name:a.z.id,type:r.fS.string,values:[]},{name:a.z.title,type:r.fS.string,config:{displayName:"Service name"},values:[]},{name:a.z.subTitle,type:r.fS.string,config:{displayName:"Service namespace"},values:[]},{name:a.z.mainStat,type:r.fS.number,config:{unit:"ms/r",displayName:"Average response time"},values:[]},{name:a.z.secondaryStat,type:r.fS.number,config:{unit:"r/sec",displayName:"Requests per second"},values:[]},{name:a.z.arc+"success",type:r.fS.number,config:{displayName:"Success",color:{fixedColor:"green",mode:o.S.Fixed}},values:[]},{name:a.z.arc+"failed",type:r.fS.number,config:{displayName:"Failed",color:{fixedColor:"red",mode:o.S.Fixed}},values:[]}]),A=T("Edges",[{name:a.z.id,type:r.fS.string,values:[]},{name:a.z.source,type:r.fS.string,values:[]},{name:"sourceName",type:r.fS.string,values:[]},{name:"sourceNamespace",type:r.fS.string,values:[]},{name:a.z.target,type:r.fS.string,values:[]},{name:"targetName",type:r.fS.string,values:[]},{name:"targetNamespace",type:r.fS.string,values:[]},{name:a.z.mainStat,type:r.fS.number,config:{unit:"ms/r",displayName:"Average response time"},values:[]},{name:a.z.secondaryStat,type:r.fS.number,config:{unit:"r/sec",displayName:"Requests per second"},values:[]}]);return[O,A]}function P(T){return T[0].data.reduce((O,A)=>{const B=(0,g.g0)(A);return O[B.refId??"A"]=new n.U(B),O},{})}var x=(T=>(T.sourceName="sourceName",T.sourceNamespace="sourceNamespace",T.targetName="targetName",T.targetNamespace="targetNamespace",T))(x||{});function S(T,O,A,B,b){if(!T)return;const W=`Value #${A}`;for(let V=0;V<T.length;V++){const w=T.get(V),K=w.server_service_namespace?`${w.server_service_namespace}/${w.server}`:w.server,z=w.client_service_namespace?`${w.client_service_namespace}/${w.client}`:w.client,G=`${z}_${K}`;b[G]?b[G][O]=(b[G][O]||0)+w[W]:b[G]={target:K,targetName:w.server,targetNamespace:w.server_service_namespace,source:z,sourceName:w.client,sourceNamespace:w.client_service_namespace,[O]:w[W]},B[K]?B[K][O]=(B[K][O]||0)+w[W]:B[K]={name:w.server,namespace:w.server_service_namespace,[O]:w[W]},B[z]||(B[z]={name:w.client,namespace:w.client_service_namespace,[O]:0})}}function I(T,O,A){const[B,b]=M();for(const W of Object.keys(T)){const V=T[W];B.add({[a.z.id]:W,[a.z.title]:V.name,[a.z.subTitle]:V.namespace,[a.z.mainStat]:V.total?V.seconds/V.total*1e3:Number.NaN,[a.z.secondaryStat]:V.total?Math.round(V.total*100)/100:Number.NaN,[a.z.arc+"success"]:V.total?(V.total-Math.min(V.failed||0,V.total))/V.total:1,[a.z.arc+"failed"]:V.total?Math.min(V.failed||0,V.total)/V.total:0})}for(const W of Object.keys(O)){const V=O[W];b.add({[a.z.id]:W,[a.z.source]:V.source,sourceName:V.sourceName,sourceNamespace:V.sourceNamespace,[a.z.target]:V.target,targetName:V.targetName,targetNamespace:V.targetNamespace,[a.z.mainStat]:V.total?V.seconds/V.total*1e3:Number.NaN,[a.z.secondaryStat]:V.total?Math.round(V.total*100)/100:Number.NaN})}return{nodes:B,edges:b}}},94776:(J,R,e)=>{"use strict";e.d(R,{IM:()=>s,Jk:()=>I,KZ:()=>A,RY:()=>i,g9:()=>v,n4:()=>T});var n=e(24368),a=e(7906),l=e(89591),r=e(53305),o=e(48706),g=e(94123),m=e(1838),d=e(1497);function u(K,z,G,Q){const j=new a.v({fields:[{name:"Time",type:l.fS.time,config:{custom:{width:200}},values:[]},{name:"traceID",type:l.fS.string,config:{displayNameFromDS:"Trace ID",custom:{width:180},links:[{title:"Click to open trace ${__value.raw}",url:"",internal:{datasourceUid:z,datasourceName:G,query:{query:"${__value.raw}"}}}]},values:[]},{name:"Message",type:l.fS.string,values:[]}],meta:{preferredVisualisationType:"table"}});if(!K||Q.length===0)return j;const F=K.fields.find(k=>k.type===l.fS.time);for(let k of K.fields){let _=!1;if(k.type===l.fS.string){const Y=k.values;for(let Z=0;Z<Y.length;Z++){const ae=Y[Z];if(ae)for(let ce of Q){const q=ae.match(ce);if(q){const De=q[1],oe=F?F.values[Z]:null;j.fields[0].values.push(oe),j.fields[1].values.push(De),j.fields[2].values.push(ae),_=!0}}}}if(_)break}return j}function i(K,z,G,Q){return K.data.forEach((j,F)=>{const k=u(j,z,G,Q);K.data[F]=k}),K}function f(K){if(K.stringValue)return K.stringValue;if(K.boolValue!==void 0)return!!K.boolValue;if(K.intValue!==void 0)return Number.parseInt(K.intValue,10);if(K.doubleValue)return Number.parseFloat(K.doubleValue);if(K.arrayValue){const z=[];for(const G of K.arrayValue.values)z.push(f(G));return z}return""}function c(K){const z=[];let G="OTLPResourceNoServiceName";if(!K)return{serviceName:G,serviceTags:z};for(const Q of K.attributes)Q.key===n.R9.SERVICE_NAME&&(G=Q.value.stringValue||G),z.push({key:Q.key,value:f(Q.value)});return{serviceName:G,serviceTags:z}}function E(K){const z=[];if(K.attributes)for(const G of K.attributes)z.push({key:G.key,value:f(G.value)});return z}function p(K){let z;if(K.kind){const G=K.kind.toString().toLowerCase().split("_");z=G.length?G[G.length-1]:K.kind.toString()}return z}function h(K){const z=[];if(K.links)for(const G of K.links){const{traceId:Q,spanId:j}=G,F=[];if(G.attributes)for(const k of G.attributes)F.push({key:k.key,value:f(k.value)});z.push({traceID:Q,spanID:j,tags:F})}return z}function y(K){const z=[];if(K.events)for(const G of K.events){const Q=[];if(G.attributes)for(const j of G.attributes)Q.push({key:j.key,value:f(j.value)});z.push({fields:Q,timestamp:G.timeUnixNano/1e6})}return z}function s(K,z=!1){const G=new a.v({fields:[{name:"traceID",type:l.fS.string,values:[]},{name:"spanID",type:l.fS.string,values:[]},{name:"parentSpanID",type:l.fS.string,values:[]},{name:"operationName",type:l.fS.string,values:[]},{name:"serviceName",type:l.fS.string,values:[]},{name:"kind",type:l.fS.string,values:[]},{name:"statusCode",type:l.fS.number,values:[]},{name:"statusMessage",type:l.fS.string,values:[]},{name:"instrumentationLibraryName",type:l.fS.string,values:[]},{name:"instrumentationLibraryVersion",type:l.fS.string,values:[]},{name:"traceState",type:l.fS.string,values:[]},{name:"serviceTags",type:l.fS.other,values:[]},{name:"startTime",type:l.fS.number,values:[]},{name:"duration",type:l.fS.number,values:[]},{name:"logs",type:l.fS.other,values:[]},{name:"references",type:l.fS.other,values:[]},{name:"tags",type:l.fS.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}});try{for(const j of K){const{serviceName:F,serviceTags:k}=c(j.resource);for(const _ of j.instrumentationLibrarySpans)for(const Y of _.spans)G.add({traceID:Y.traceId.length>16?Y.traceId.slice(16):Y.traceId,spanID:Y.spanId,parentSpanID:Y.parentSpanId||"",operationName:Y.name||"",serviceName:F,kind:p(Y),statusCode:Y.status?.code,statusMessage:Y.status?.message,instrumentationLibraryName:_.instrumentationLibrary?.name,instrumentationLibraryVersion:_.instrumentationLibrary?.version,traceState:Y.traceState,serviceTags:k,startTime:Y.startTimeUnixNano/1e6,duration:(Y.endTimeUnixNano-Y.startTimeUnixNano)/1e6,tags:E(Y),logs:y(Y),references:h(Y)})}}catch(j){return console.error(j),{error:{message:"JSON is not valid OpenTelemetry format: "+j},data:[]}}let Q=[G];return z&&Q.push(...(0,d.M7)(G)),{data:Q}}function v(K){let z={batches:[]},G={};for(let Q=0;Q<K.length;Q++){const j=K.get(Q);G[j.serviceName]||(G[j.serviceName]=z.batches.length,z.batches.push({resource:{attributes:[],droppedAttributesCount:0},instrumentationLibrarySpans:[{spans:[]}]}));let F=G[j.serviceName];z.batches[F].resource.attributes.length===0&&(z.batches[F].resource.attributes=D(j.serviceTags)),z.batches[F].instrumentationLibrarySpans[0].instrumentationLibrary||j.instrumentationLibraryName&&(z.batches[F].instrumentationLibrarySpans[0].instrumentationLibrary={name:j.instrumentationLibraryName,version:j.instrumentationLibraryVersion?j.instrumentationLibraryVersion:""}),z.batches[F].instrumentationLibrarySpans[0].spans.push({traceId:j.traceID.padStart(32,"0"),spanId:j.spanID,parentSpanId:j.parentSpanID||"",traceState:j.traceState||"",name:j.operationName,kind:C(j.kind),startTimeUnixNano:j.startTime*1e6,endTimeUnixNano:(j.startTime+j.duration)*1e6,attributes:j.tags?D(j.tags):[],droppedAttributesCount:0,droppedEventsCount:0,droppedLinksCount:0,status:P(j),events:x(j.logs),links:S(j.references)})}return z}function C(K){let z;if(K)switch(K){case"server":z="SPAN_KIND_SERVER";break;case"client":z="SPAN_KIND_CLIENT";break;case"producer":z="SPAN_KIND_PRODUCER";break;case"consumer":z="SPAN_KIND_CONSUMER";break;case"internal":z="SPAN_KIND_INTERNAL";break}return z}function D(K){return K.reduce((z,G)=>[...z,{key:G.key,value:M(G)}],[])}function M(K){if(typeof K.value=="string")return{stringValue:K.value};if(typeof K.value=="boolean")return{boolValue:K.value};if(typeof K.value=="number")return K.value%1===0?{intValue:K.value}:{doubleValue:K.value};if(typeof K.value=="object"&&Array.isArray(K.value)){const z=[];for(const G of K.value)z.push(M(G));return{arrayValue:{values:z}}}return{stringValue:K.value}}function P(K){let z;return K.statusCode!==void 0&&(z={code:K.statusCode,message:K.statusMessage?K.statusMessage:""}),z}function x(K){if(!K||!K.length)return;let z=[];for(const G of K){let Q={timeUnixNano:G.timestamp*1e6,attributes:[],droppedAttributesCount:0,name:""};for(const j of G.fields)Q.attributes.push({key:j.key,value:M(j)});z.push(Q)}return z}function S(K){if(!K||!K.length)return;let z=[];for(const G of K){let Q={traceId:G.traceID,spanId:G.spanID,attributes:[],droppedAttributesCount:0};if(G.tags?.length)for(const j of G.tags)Q.attributes?.push({key:j.key,value:M(j)});z.push(Q)}return z}function I(K,z=!1){const G=K.data[0];if(!G)return w;let Q=[...K.data];return z&&Q.push(...(0,d.M7)((0,r.g0)(G))),{...K,data:Q}}function T(K,z){const G=new a.v({name:"Traces",refId:"traces",fields:[{name:"traceID",type:l.fS.string,values:[],config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:z.uid,datasourceName:z.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"traceService",type:l.fS.string,config:{displayNameFromDS:"Trace service"},values:[]},{name:"traceName",type:l.fS.string,config:{displayNameFromDS:"Trace name"},values:[]},{name:"startTime",type:l.fS.time,config:{displayNameFromDS:"Start time"},values:[]},{name:"traceDuration",type:l.fS.number,config:{displayNameFromDS:"Duration",unit:"ms"},values:[]}],meta:{preferredVisualisationType:"table"}});if(!K?.length)return G;const Q=K.sort((j,F)=>parseInt(F?.startTimeUnixNano,10)/1e6-parseInt(j?.startTimeUnixNano,10)/1e6).map(O);for(const j of Q)G.add(j);return G}function O(K){return{traceID:K.traceID,startTime:parseInt(K.startTimeUnixNano,10)/1e6,traceDuration:K.durationMs,traceService:K.rootServiceName||"",traceName:K.rootTraceName||""}}function A(K,z,G){return G===m.Mt.Spans?b(K,z):B(K,z)}function B(K,z){const G=(0,r.at)({name:"Traces",refId:"traces",fields:[{name:"traceID",type:l.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",custom:{width:200},links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:z.uid,datasourceName:z.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"startTime",type:l.fS.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"traceService",type:l.fS.string,config:{displayNameFromDS:"Service"}},{name:"traceName",type:l.fS.string,config:{displayNameFromDS:"Name"}},{name:"traceDuration",type:l.fS.number,config:{displayNameFromDS:"Duration",unit:"ms",custom:{width:120}}},{name:"nested",type:l.fS.nestedFrames}],meta:{preferredVisualisationType:"table"}});return K?.length?(G.length=K.length,K.sort((Q,j)=>parseInt(j?.startTimeUnixNano,10)/1e6-parseInt(Q?.startTimeUnixNano,10)/1e6).forEach(Q=>{const j=O(Q);G.fields[0].values.push(j.traceID),G.fields[1].values.push(j.startTime),G.fields[2].values.push(j.traceService),G.fields[3].values.push(j.traceName),G.fields[4].values.push(j.traceDuration),Q.spanSets?G.fields[5].values.push(Q.spanSets.map(F=>W(Q,F,z))):Q.spanSet&&G.fields[5].values.push([W(Q,Q.spanSet,z)])}),[G]):[G]}function b(K,z){const G={};let Q=!1;K.forEach(F=>F.spanSets?.forEach(k=>{k.attributes?.forEach(_=>{G[_.key]={name:_.key,type:l.fS.string,config:{displayNameFromDS:_.key}}}),k.spans.forEach(_=>{_.name&&(Q=!0),_.attributes?.forEach(Y=>{G[Y.key]={name:Y.key,type:l.fS.string,config:{displayNameFromDS:Y.key}}})})}));const j=new a.v({name:"Spans",refId:"traces",fields:[{name:"traceIdHidden",type:l.fS.string,config:{custom:{hidden:!0}}},{name:"traceService",type:l.fS.string,config:{displayNameFromDS:"Trace Service",custom:{width:200}}},{name:"traceName",type:l.fS.string,config:{displayNameFromDS:"Trace Name",custom:{width:200}}},{name:"spanID",type:l.fS.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:z.uid,datasourceName:z.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:l.fS.time,config:{displayNameFromDS:"Start time"}},{name:"name",type:l.fS.string,config:{displayNameFromDS:"Name",custom:{hidden:!Q}}},...Object.values(G).sort((F,k)=>F.name.localeCompare(k.name)),{name:"duration",type:l.fS.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}});return K?.length?(K.sort((F,k)=>parseInt(k?.startTimeUnixNano,10)/1e6-parseInt(F?.startTimeUnixNano,10)/1e6).forEach(F=>{F.spanSets?.forEach(k=>{k.spans.forEach(_=>{j.add(V(_,k,F))})})}),[j]):[j]}const W=(K,z,G)=>{const Q={};let j=!1;z.attributes?.map(_=>{Q[_.key]={name:_.key,type:l.fS.string,config:{displayNameFromDS:_.key},values:[]}}),z.spans.forEach(_=>{_.name&&(j=!0),_.attributes?.forEach(Y=>{Q[Y.key]={name:Y.key,type:l.fS.string,config:{displayNameFromDS:Y.key},values:[]}})});const F=new a.v({fields:[{name:"traceIdHidden",type:l.fS.string,config:{custom:{hidden:!0}},values:[]},{name:"spanID",type:l.fS.string,values:[],config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:G.uid,datasourceName:G.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:l.fS.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"name",type:l.fS.string,values:[],config:{displayNameFromDS:"Name",custom:{hidden:!j}}},...Object.values(Q).sort((_,Y)=>_.name.localeCompare(Y.name)),{name:"duration",type:l.fS.number,values:[],config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}}),k=(0,o.j)();for(const _ of F.fields)_.display=(0,g.U)({field:_,theme:k});return z.spans.forEach(_=>{F.add(V(_,z,K))}),F};function V(K,z,G){const Q=parseInt(K.startTimeUnixNano,10)/1e6,j={traceIdHidden:G.traceID,traceService:G.rootServiceName||"",traceName:G.rootTraceName||"",spanID:K.spanID,time:Q,duration:parseInt(K.durationNanos,10),name:K.name};let F=[];return z.attributes&&(F=F.concat(z.attributes)),K.attributes&&(F=F.concat(K.attributes)),F.forEach(k=>{(k.value.boolValue||k.value.Value?.bool_value)&&(j[k.key]=k.value.boolValue||k.value.Value?.bool_value),(k.value.doubleValue||k.value.Value?.double_value)&&(j[k.key]=k.value.doubleValue||k.value.Value?.double_value),(k.value.intValue||k.value.Value?.int_value)&&(j[k.key]=k.value.intValue||k.value.Value?.int_value),(k.value.stringValue||k.value.Value?.string_value)&&(j[k.key]=k.value.stringValue||k.value.Value?.string_value)}),j}const w={data:[new a.v({fields:[{name:"trace",type:l.fS.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}})]}},66820:(J,R,e)=>{"use strict";e.d(R,{H:()=>d,m:()=>l});var n=e(7906),a=e(89591);function l(i){const f=i.map(r),c=new n.v({fields:[{name:"traceID",type:a.fS.string,values:[]},{name:"spanID",type:a.fS.string,values:[]},{name:"parentSpanID",type:a.fS.string,values:[]},{name:"operationName",type:a.fS.string,values:[]},{name:"serviceName",type:a.fS.string,values:[]},{name:"serviceTags",type:a.fS.other,values:[]},{name:"startTime",type:a.fS.number,values:[]},{name:"duration",type:a.fS.number,values:[]},{name:"logs",type:a.fS.other,values:[]},{name:"tags",type:a.fS.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const E of f)c.add(E);return c}function r(i){const f={traceID:i.traceId,spanID:i.id,parentSpanID:i.parentId,operationName:i.name,serviceName:i.localEndpoint?.serviceName||i.remoteEndpoint?.serviceName||"unknown",serviceTags:g(i),startTime:i.timestamp/1e3,duration:i.duration/1e3,logs:i.annotations?.map(o)??[],tags:Object.keys(i.tags||{}).reduce((c,E)=>E==="error"?(c.push({key:"error",value:!0}),c.push({key:"errorValue",value:i.tags.error}),c):(c.push({key:E,value:i.tags[E]}),c),[])};return i.kind&&(f.tags=[{key:"kind",value:i.kind},...f.tags??[]]),i.shared&&(f.tags=[{key:"shared",value:i.shared},...f.tags??[]]),f}function o(i){return{timestamp:i.timestamp,fields:[{key:"annotation",value:i.value}]}}function g(i){const f=i.localEndpoint||i.remoteEndpoint;return f?[m("ipv4",f.ipv4),m("ipv6",f.ipv6),m("port",f.port),m("endpointType",i.localEndpoint?"local":"remote")].filter(c=>!!c):[]}function m(i,f){if(f)return{key:i,value:f}}const d=i=>{let f=[];for(let c=0;c<i.length;c++){const E=i.get(c);f.push({traceId:E.traceID,parentId:E.parentSpanID,name:E.operationName,id:E.spanID,timestamp:E.startTime*1e3,duration:E.duration*1e3,...u(E),annotations:E.logs.length?E.logs.map(p=>({timestamp:p.timestamp,value:p.fields[0].value})):void 0,tags:E.tags.length?E.tags.filter(p=>p.key!=="kind"&&p.key!=="endpointType"&&p.key!=="shared").reduce((p,h)=>h.key==="error"?{...p,[h.key]:E.tags.find(y=>y.key==="errorValue").value||""}:{...p,[h.key]:h.value},{}):void 0,kind:E.tags.find(p=>p.key==="kind")?.value,shared:E.tags.find(p=>p.key==="shared")?.value})}return f},u=i=>{const f=i.serviceTags.find(c=>c.key==="endpointType")?.value==="local"?"localEndpoint":"remoteEndpoint";return i.serviceName!=="unknown"?{[f]:{serviceName:i.serviceName,ipv4:i.serviceTags.find(c=>c.key==="ipv4")?.value,ipv6:i.serviceTags.find(c=>c.key==="ipv6")?.value,port:i.serviceTags.find(c=>c.key==="port")?.value}}:void 0}},3:(J,R,e)=>{"use strict";e.d(R,{As:()=>n,LM:()=>l,kx:()=>a,wO:()=>r});var n=(o=>(o[o.AlphaAsc=1]="AlphaAsc",o[o.AlphaDesc=2]="AlphaDesc",o[o.Importance=3]="Importance",o[o.TimeAsc=4]="TimeAsc",o[o.TimeDesc=5]="TimeDesc",o))(n||{}),a=(o=>(o.Current="current",o.RecentChanges="changes",o))(a||{}),l=(o=>(o.Default="default",o.Custom="custom",o))(l||{}),r=(o=>(o.List="list",o.Stat="stat",o))(r||{})},50342:(J,R,e)=>{"use strict";e.d(R,{Gj:()=>a,Qm:()=>g});var n=e(99331);const a=1,l=2,r=3,o=(m,d,u,i)=>(0,n.O)(d+m*(u+i),6);function g(m,d,u,i,f){let c=1-d,E=u===a?c/(m-1):u===l?c/m:u===r?c/(m+1):0;(isNaN(E)||E===1/0)&&(E=0);let p=u===a?0:u===l?E/2:u===r?E:0,h=d/m,y=(0,n.O)(h,6);if(i==null)for(let s=0;s<m;s++)f(s,o(s,p,h,E),y);else f(i,o(i,p,h,E),y)}},14197:(J,R,e)=>{"use strict";e.d(R,{Pn:()=>l,kK:()=>o,lW:()=>g,zZ:()=>r});const n=10,a=4;function l(m,d,u,i,f,c){return m>=u&&m<=f&&d>=i&&d<=c}function r(m,d,u){let i;if(m.o.length&&(i=m.o.find(f=>f.sidx===d&&f.didx===u)),i==null&&m.q)for(let f=0;f<m.q.length&&(i=r(m.q[f],d,u),!i);f++);return i}function o(m,d){return m.x<=d.x+d.w&&m.x+m.w>=d.x&&m.y+m.h>=d.y&&m.y<=d.y+d.h}class g{constructor(d,u,i,f,c=0){this.x=d,this.y=u,this.w=i,this.h=f,this.l=c,this.o=[],this.q=null}split(){let d=this,u=d.x,i=d.y,f=d.w/2,c=d.h/2,E=d.l+1;d.q=[new g(u+f,i,f,c,E),new g(u,i,f,c,E),new g(u,i+c,f,c,E),new g(u+f,i+c,f,c,E)]}quads(d,u,i,f,c){let E=this,p=E.q,h=E.x+E.w/2,y=E.y+E.h/2,s=u<y,v=d<h,C=d+i>h,D=u+f>y;s&&C&&c(p[0]),v&&s&&c(p[1]),v&&D&&c(p[2]),C&&D&&c(p[3])}add(d){let u=this;if(u.q!=null)u.quads(d.x,d.y,d.w,d.h,i=>{i.add(d)});else{let i=u.o;if(i.push(d),i.length>n&&u.l<a){u.split();for(let f=0;f<i.length;f++){let c=i[f];u.quads(c.x,c.y,c.w,c.h,E=>{E.add(c)})}u.o.length=0}}}get(d,u,i,f,c){let E=this,p=E.o;for(let h=0;h<p.length;h++)c(p[h]);E.q!=null&&E.quads(d,u,i,f,h=>{h.get(d,u,i,f,c)})}clear(){this.o.length=0,this.q=null}}},2104:(J,R,e)=>{"use strict";e.d(R,{M:()=>i,l:()=>f});var n=e(86832),a=e.n(n),l=e(39953),r=e(64943),o=e(52366),g=e(24300),m=e(22785),d=e(4367),u=e(50820);class i extends l.PureComponent{constructor(){super(...arguments),this.renderComponent=(E,p)=>{const{options:h,fieldConfig:y}=this.props,{value:s,alignmentFactors:v,orientation:C,width:D,height:M,count:P}=E,{field:x,display:S,view:I,colIndex:T}=s,{openMenu:O,targetClassName:A}=p;let B;return I&&(0,n.isNumber)(T)&&(B=I.getFieldDisplayProcessor(T)),l.createElement(g.xf,{value:f(P,y.defaults,S),width:D,height:M,orientation:C,field:x,text:h.text,display:B,theme:u.config.theme2,itemSpacing:this.getItemSpacing(),displayMode:h.displayMode,onClick:O,className:A,alignmentFactors:P>1?v:void 0,showUnfilled:h.showUnfilled,valueDisplayMode:h.valueMode,namePlacement:h.namePlacement})},this.renderValue=E=>{const{value:p,orientation:h}=E,{hasLinks:y,getLinks:s}=p;return y&&s?l.createElement("div",{style:{width:"100%",display:h===r.wm.Vertical?"flex":"initial"}},l.createElement(m.V,{style:{height:"100%"},links:s},v=>this.renderComponent(E,v))):this.renderComponent(E,{})},this.getValues=()=>{const{data:E,options:p,replaceVariables:h,fieldConfig:y,timeZone:s}=this.props;return(0,o.nG)({fieldConfig:y,reduceOptions:p.reduceOptions,replaceVariables:h,theme:u.config.theme2,data:E.series,timeZone:s})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}render(){const{height:E,width:p,options:h,data:y,renderCounter:s}=this.props;return l.createElement(d.Q,{source:y,getAlignmentFactors:o.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:s,width:p,height:E,minVizWidth:h.minVizWidth,minVizHeight:h.minVizHeight,itemSpacing:this.getItemSpacing(),orientation:h.orientation})}}function f(c,E,p){return c===1&&!E.displayName?{...p,title:void 0}:p}},45587:(J,R,e)=>{"use strict";e.r(R),e.d(R,{plugin:()=>M});var n=e(40530),a=e(34547),l=e(40723),r=e(86085),o=e(86609);const g=P=>(0,o.rD)(P),m=(P,x,S)=>{const I=(0,o.ZH)(P,x,S);if(x==="singlestat"&&S.angular){const T=S.angular.gauge;T&&(I.showThresholdMarkers=T.thresholdMarkers,I.showThresholdLabels=T.thresholdLabels)}return I};var d=e(39953),u=e(94123),i=e(52366),f=e(78031),c=e(22785),E=e(4367),p=e(50820),h=e(2104);class y extends d.PureComponent{constructor(){super(...arguments),this.renderComponent=(x,S)=>{const{options:I,fieldConfig:T}=this.props,{width:O,height:A,count:B,value:b}=x,{field:W,display:V}=b,{openMenu:w,targetClassName:K}=S;return d.createElement(f.a,{value:(0,h.l)(B,T.defaults,V),width:O,height:A,field:W,text:I.text,showThresholdLabels:I.showThresholdLabels,showThresholdMarkers:I.showThresholdMarkers,theme:p.config.theme2,onClick:w,className:K,orientation:I.orientation})},this.renderValue=x=>{const{value:S}=x,{getLinks:I,hasLinks:T}=S;return T&&I?d.createElement(c.V,{links:I,style:{flexGrow:1}},O=>this.renderComponent(x,O)):this.renderComponent(x,{})},this.getValues=()=>{const{data:x,options:S,replaceVariables:I,fieldConfig:T,timeZone:O}=this.props;for(let A of x.series)for(let B of A.fields)if(B.config.unit==="percent"||B.config.unit==="percentunit"){const b=B.config.min??0,W=B.config.max??(B.config.unit==="percent"?100:1);B.state=B.state??{},B.state.range={min:b,max:W,delta:W-b},B.display=(0,u.U)({field:B,theme:p.config.theme2})}return(0,i.nG)({fieldConfig:T,reduceOptions:S.reduceOptions,replaceVariables:I,theme:p.config.theme2,data:x.series,timeZone:O})}}render(){const{height:x,width:S,data:I,renderCounter:T,options:O}=this.props;return d.createElement(E.Q,{getValues:this.getValues,renderValue:this.renderValue,width:S,height:x,source:I,autoGrid:!0,renderCounter:T,orientation:O.orientation,minVizHeight:O.minVizHeight,minVizWidth:O.minVizWidth})}}const s={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0};var v=e(60695),C=e(43419);class D{getSuggestionsForData(x){const{dataSummary:S}=x;if(!S.hasData||!S.hasNumberField||S.numberFieldCount>=50)return;const I=x.getListAppender({name:C.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:v.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:T=>{T.options.reduceOptions.values&&(T.options.reduceOptions.limit=2)}}});S.hasStringField&&S.frameCount===1&&S.rowCountTotal<10?(I.append({name:C.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),I.append({name:C.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(I.append({name:C.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),I.append({name:C.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const M=new n.c(y).useFieldConfig({useCustomConfig:P=>{P.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(P=>{(0,r.j)(P),(0,r.h)(P),P.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:s.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:s.showThresholdMarkers}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:s.minVizWidth,showIf:x=>x.orientation===a.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:s.minVizHeight,showIf:x=>x.orientation===a.wm.Horizontal}),l.Z(P)}).setPanelChangeHandler(m).setSuggestionsSupplier(new D).setMigrationHandler(g)},98950:(J,R,e)=>{"use strict";e.d(R,{Cg:()=>l,EQ:()=>o,Er:()=>d,H:()=>r,Kq:()=>g,bD:()=>a,g$:()=>m});var n=e(34547),a=(u=>(u.Point="point",u.Line="line",u.Polygon="polygon",u.Any="*any*",u))(a||{});const l=5;var r=(u=>(u.Left="left",u.Center="center",u.Right="right",u))(r||{}),o=(u=>(u.Top="top",u.Middle="middle",u.Bottom="bottom",u))(o||{}),g=(u=>(u.Left="left",u.Center="center",u.Right="right",u))(g||{}),m=(u=>(u.Top="top",u.Center="center",u.Bottom="bottom",u))(m||{});const d=Object.freeze({size:{fixed:l,min:2,max:15},color:{fixed:"dark-green"},opacity:.4,symbol:{mode:n.Q8.Fixed,fixed:"img/icons/marker/circle.svg"},symbolAlign:{horizontal:"center",vertical:"center"},textConfig:{fontSize:12,textAlign:"center",textBaseline:"middle",offsetX:0,offsetY:0},rotation:{fixed:0,mode:n.eK.Mod,min:-360,max:360}})},97791:(J,R,e)=>{"use strict";e.d(R,{Q:()=>r});var n=e(41407),a=e(39953),l=e(68303);const r=o=>(0,l.CB)(o)?a.createElement("a",{href:o,target:"_blank",className:(0,n.cx)("external-link"),rel:"noreferrer"},o):o},68303:(J,R,e)=>{"use strict";e.d(R,{B1:()=>d,CB:()=>h,FB:()=>E,gE:()=>c,n_:()=>i,sA:()=>f,uH:()=>p,vV:()=>g});var n=e(10693),a=e(4218),l=e(85256),r=e(55623),o=e(98950);function g(y,s,v,C){const D={};return C&&Object.keys(C).length?(D.color=(0,l.getColorDimension)(y,C.color??o.Er.color,v),D.size=(0,l.getScaledDimension)(y,C.size??o.Er.size),D.rotation=(0,l.getScalarDimension)(y,C.rotation??o.Er.rotation),C.text&&(C.text.field||C.text.fixed)&&(D.text=(0,l.getTextDimension)(y,C.text))):s.fields&&(s.fields.color&&(D.color=(0,l.getColorDimension)(y,s.config.color??o.Er.color,v)),s.fields.size&&(D.size=(0,l.getScaledDimension)(y,s.config.size??o.Er.size)),s.fields.text&&(D.text=(0,l.getTextDimension)(y,s.config.text)),s.fields.rotation&&(D.rotation=(0,l.getScalarDimension)(y,s.config.rotation??o.Er.rotation))),D}let m;function d(){return m||(m=[],u()),m}async function u(){const y=await(0,r.e)();for(let s of["maps","gazetteer"])y.listFiles(s).subscribe({next:v=>{v.forEach(C=>{if(C.name.endsWith(".geojson")){const D=`public/${s}/${C.name}`;m.push({value:D,label:D})}})}})}const i=(y,s,v)=>{const[C]=y.initMapView(s.view,void 0);return y.map=new n.Z({view:C,pixelRatio:1,layers:[],controls:[],target:v,interactions:(0,a.c)({mouseWheelZoom:!1})})},f=(y,s)=>{y.initControls(s.controls),y.forceUpdate()},c=(y,s,v)=>{y.panelContext&&y.panelContext.onInstanceStateChange&&y.panelContext.onInstanceStateChange({map:y.map,layers:s,selected:v,actions:y.actions})},E=y=>{let s=y.layers.length;for(;s<100;){const v=`Layer ${s++}`;if(!y.byName.has(v))return v}return`Layer ${Date.now()}`};function p(y,s,v,C){const D=y.getPixelFromCoordinate(v),M=y.getPixelFromCoordinate(C),P=Math.abs(D[0]-M[0]),x=Math.abs(D[1]-M[1]);return P>s||x>s}const h=y=>{try{return new URL(y).protocol.includes("http")}catch{return!1}}},61068:(J,R,e)=>{"use strict";e.d(R,{o:()=>l});var n=e(39953),a=e(80583);function l(r){return n.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingBottom:"6px"}},n.createElement(a.P,{onClick:r.onClick,style:{position:"relative",top:"auto",right:"auto",marginRight:0}}))}},39599:(J,R,e)=>{"use strict";e.d(R,{S:()=>g});var n=e(41407),a=e(39953),l=e(28425),r=e(48069),o=e(82803);function g({width:d,showImage:u,data:i,index:f}){const c=(0,o.wW)(m),E=d>600,p=i.get(f);return a.createElement("article",{className:(0,n.cx)(c.item,E&&c.itemWide)},u&&p.ogImage&&a.createElement("a",{tabIndex:-1,href:l.QX.sanitizeUrl(p.link),target:"_blank",rel:"noopener noreferrer",className:(0,n.cx)(c.socialImage,E&&c.socialImageWide),"aria-hidden":!0},a.createElement("img",{src:p.ogImage,alt:p.title})),a.createElement("div",{className:c.body},a.createElement("time",{className:c.date,dateTime:(0,r.dq)(p.date,{format:"MMM DD"})},(0,r.dq)(p.date,{format:"MMM DD"})," "),a.createElement("a",{className:c.link,href:l.QX.sanitizeUrl(p.link),target:"_blank",rel:"noopener noreferrer"},a.createElement("h3",{className:c.title},p.title)),a.createElement("div",{className:c.content,dangerouslySetInnerHTML:{__html:l.QX.sanitize(p.content)}})))}const m=d=>({container:(0,n.css)`
    height: 100%;
  `,item:(0,n.css)`
    display: flex;
    padding: ${d.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${d.spacing(1)};
    border-bottom: 2px solid ${d.colors.border.weak};
    background: ${d.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:(0,n.css)`
    flex-direction: row;
  `,body:(0,n.css)`
    display: flex;
    flex-direction: column;
  `,socialImage:(0,n.css)`
    display: flex;
    align-items: center;
    margin-bottom: ${d.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${d.shape.radius.default} ${d.shape.radius.default} 0 0;
    }
  `,socialImageWide:(0,n.css)`
    margin-right: ${d.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${d.shape.radius.default};
    }
  `,link:(0,n.css)`
    color: ${d.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${d.colors.text.link};
      text-decoration: underline;
    }
  `,title:(0,n.css)`
    font-size: 16px;
    margin-bottom: ${d.spacing(.5)};
  `,content:(0,n.css)`
    p {
      margin-bottom: 4px;
      color: ${d.colors.text};
    }
  `,date:(0,n.css)`
    margin-bottom: ${d.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 ${d.shape.radius.default};
    color: ${d.colors.text.secondary};
  `})},57718:(J,R,e)=>{"use strict";e.d(R,{k:()=>n});const n="https://grafana.com/blog/news.xml"},42335:(J,R,e)=>{"use strict";e.d(R,{j:()=>c});var n=e(65489),a=e(98579);function l(E){const h=new DOMParser().parseFromString(E,"text/xml");return{items:Array.from(h.querySelectorAll("entry")).map(s=>({title:m(s,"title"),link:s.querySelector("link")?.getAttribute("href")??"",content:m(s,"content"),pubDate:m(s,"published"),ogImage:s.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function r(E){const h=new DOMParser().parseFromString(E,"text/xml");return{items:Array.from(h.querySelectorAll("item")).map(s=>({title:m(s,"title"),link:m(s,"link"),content:m(s,"description"),pubDate:m(s,"pubDate"),ogImage:s.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function o(E){return await(await fetch(E)).text()}function g(E){return new DOMParser().parseFromString(E,"text/xml").querySelector("feed")!==null}function m(E,p){return E.querySelector(p)?.textContent??""}async function d(E){const p=await o(E);return g(p)?l(p):r(p)}var u=e(92403),i=e(89591);function f(E){const p=[],h=[],y=[],s=[],v=[];for(const C of E.items){const D=(0,u.CQ)(C.pubDate);try{if(p.push(D.valueOf()),h.push(C.title),y.push(C.link),v.push(C.ogImage),C.content){const M=C.content.replace(/<\/?[^>]+(>|$)/g,"");s.push(M)}}catch(M){console.warn("Error reading news item:",M,C)}}return{fields:[{name:"date",type:i.fS.time,config:{displayName:"Date"},values:p},{name:"title",type:i.fS.string,config:{},values:h},{name:"link",type:i.fS.string,config:{},values:y},{name:"content",type:i.fS.string,config:{},values:s},{name:"ogImage",type:i.fS.string,config:{},values:v}],length:p.length}}function c(E){const[p,h]=(0,n.Z)(async()=>{const y=await d(E),s=f(y);return new a.U(s)},[E],{loading:!0});return{state:p,getNews:h}}},85136:(J,R,e)=>{"use strict";e.d(R,{N:()=>c,U:()=>i});var n=e(41407),a=e(77814),l=e.n(a),r=e(39953),o=e(63374),g=e(73254),m=e(82803),d=e(12190),u=e(30697);const i=40,f=(s,v)=>({mainGroup:(0,n.css)`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${v==="inactive"?.5:1};
  `,mainCircle:(0,n.css)`
    fill: ${s.components.panel.background};
  `,hoverCircle:(0,n.css)`
    opacity: 0.5;
    fill: transparent;
    stroke: ${s.colors.primary.text};
  `,text:(0,n.css)`
    fill: ${s.colors.text.primary};
    pointer-events: none;
  `,titleText:(0,n.css)`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${(0,o.Z)(s.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 140px;
  `,statsText:(0,n.css)`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:(0,n.css)`
    width: 200px;
    & span {
      background-color: ${(0,o.Z)(s.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `,clickTarget:(0,n.css)`
    fill: none;
    stroke: none;
    pointer-events: fill;
  `}),c=(0,r.memo)(function(v){const{node:C,onMouseEnter:D,onMouseLeave:M,onClick:P,hovering:x}=v,S=(0,m.l4)(),I=f(S,x),T=x==="active",O=C.nodeRadius?.values[C.dataFrameRowIndex]||i;return C.x!==void 0&&C.y!==void 0?r.createElement("g",{"data-node-id":C.id,className:I.mainGroup,"aria-label":`Node: ${C.title}`},r.createElement("circle",{"data-testid":`node-circle-${C.id}`,className:I.mainCircle,r:O,cx:C.x,cy:C.y}),T&&r.createElement("circle",{className:I.hoverCircle,r:O-3,cx:C.x,cy:C.y,strokeWidth:2}),r.createElement(p,{node:C}),r.createElement("g",{className:I.text,style:{pointerEvents:"none"}},r.createElement(E,{node:C,hovering:x}),r.createElement("foreignObject",{x:C.x-(T?100:70),y:C.y+O+5,width:T?"200":"140",height:"40"},r.createElement("div",{className:l()(I.titleText,T&&I.textHovering)},r.createElement("span",null,C.title),r.createElement("br",null),r.createElement("span",null,C.subTitle)))),r.createElement("rect",{"data-testid":`node-click-rect-${C.id}`,onMouseEnter:()=>{D(C.id)},onMouseLeave:()=>{M(C.id)},onClick:A=>{P(A,C)},className:I.clickTarget,x:C.x-O-5,y:C.y-O-5,width:O*2+10,height:O*2+50})):null});function E({node:s,hovering:v}){const C=(0,m.l4)(),D=f(C,v),M=v==="active";return s.x!==void 0&&s.y!==void 0?s.icon?r.createElement("foreignObject",{x:s.x-35,y:s.y-20,width:"70",height:"40"},r.createElement("div",{style:{width:70,overflow:"hidden",display:"flex",justifyContent:"center",marginTop:-4}},r.createElement(d.J,{"data-testid":`node-icon-${s.icon}`,name:s.icon,size:"xxxl"}))):r.createElement("foreignObject",{x:s.x-(M?100:35),y:s.y-15,width:M?"200":"70",height:"40"},r.createElement("div",{className:l()(D.statsText,M&&D.textHovering)},r.createElement("span",null,s.mainStat&&(0,u.Ew)(s.mainStat.config,s.mainStat.values[s.dataFrameRowIndex])),r.createElement("br",null),r.createElement("span",null,s.secondaryStat&&(0,u.Ew)(s.secondaryStat.config,s.secondaryStat.values[s.dataFrameRowIndex])))):null}function p(s){const{node:v}=s,C=v.arcSections.find(S=>S.values[v.dataFrameRowIndex]>=1),D=(0,m.l4)(),M=v.nodeRadius?.values[v.dataFrameRowIndex]||i;if(C)return r.createElement("circle",{fill:"none",stroke:D.visualization.getColorByName(C.config.color?.fixedColor||""),strokeWidth:2,r:M,cx:v.x,cy:v.y});const P=v.arcSections.filter(S=>S.values[v.dataFrameRowIndex]!==0);if(P.length===0)return r.createElement("circle",{fill:"none",stroke:v.color?y(v.color,v.dataFrameRowIndex,D):"gray",strokeWidth:2,r:M,cx:v.x,cy:v.y});const{elements:x}=P.reduce((S,I,T)=>{const O=I.config.color?.fixedColor||"",A=I.values[v.dataFrameRowIndex],B=r.createElement(h,{key:T,r:M,x:v.x,y:v.y,startPercent:S.percent,percent:A+S.percent>1?1-S.percent:A,color:D.visualization.getColorByName(O),strokeWidth:2});return S.elements.push(B),S.percent=S.percent+A,S},{elements:[],percent:0});return r.createElement(r.Fragment,null,x)}function h({r:s,x:v,y:C,startPercent:D,percent:M,color:P,strokeWidth:x=2}){const S=D+M,I=v+Math.sin(2*Math.PI*D)*s,T=C-Math.cos(2*Math.PI*D)*s,O=v+Math.sin(2*Math.PI*S)*s,A=C-Math.cos(2*Math.PI*S)*s,B=M>.5?"1":"0";return r.createElement("path",{fill:"none",d:`M ${I} ${T} A ${s} ${s} 0 ${B} 1 ${O} ${A}`,stroke:P,strokeWidth:x})}function y(s,v,C){return s.config.color?(0,g.fD)(s).getCalculator(s,C)(0,s.values[v]):s.values[v]}},9272:(J,R,e)=>{"use strict";e.d(R,{E:()=>We});var n=e(41407),a=e(77814),l=e.n(a),r=e(39953),o=e(15262),g=e(82803),m=e(28409),d=e(12190),u=e(85136),i=e(30697);const f=(0,r.memo)(function(Be){const{edge:Le,onClick:le,onMouseEnter:de,onMouseLeave:X,hovering:se}=Be,{source:re,target:pe,sourceNodeRadius:be,targetNodeRadius:xe}=Le,Pe=(0,i.dM)({x1:re.x,y1:re.y,x2:pe.x,y2:pe.y},be||u.U,xe||u.U);return r.createElement("g",{onClick:we=>le(we,Le),style:{cursor:"pointer"},"aria-label":`Edge from: ${re.id} to: ${pe.id}`},r.createElement("line",{strokeWidth:se?2:1,stroke:"#999",x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,markerEnd:"url(#triangle)"}),r.createElement("line",{stroke:"transparent",x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,strokeWidth:20,onMouseEnter:()=>{de(Le.id)},onMouseLeave:()=>{X(Le.id)}}))});function c(){return r.createElement("defs",null,r.createElement("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto"},r.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})))}const E=Ye=>({mainGroup:(0,n.css)`
      pointer-events: none;
      font-size: 8px;
    `,background:(0,n.css)`
      fill: ${Ye.components.tooltip.background};
    `,text:(0,n.css)`
      fill: ${Ye.components.tooltip.text};
    `}),p=(0,r.memo)(function(Be){const{edge:Le}=Be,{source:le,target:de,sourceNodeRadius:X,targetNodeRadius:se}=Le,re=(0,i.dM)({x1:le.x,y1:le.y,x2:de.x,y2:de.y},X||u.U,se||u.U),pe={x:re.x1+(re.x2-re.x1)/2,y:re.y1+(re.y2-re.y1)/2},be=(0,g.wW)(E),xe=[Le.mainStat,Le.secondaryStat].filter(Xe=>Xe),Pe=xe.length>1?"30":"15",we=xe.length>1?15:7.5;let Fe=xe.length>1?-5:2.5;const He=[];return xe.forEach((Xe,dt)=>{He.push(r.createElement("text",{key:dt,className:be.text,x:pe.x,y:pe.y+Fe,textAnchor:"middle"},Xe)),Fe+=15}),r.createElement("g",{className:be.mainGroup},r.createElement("rect",{className:be.background,x:pe.x-40,y:pe.y-we,width:"80",height:Pe,rx:"5"}),He)});var h=e(97898),y=e(34547),s=e(78832),v=e(98095);function C(){return{item:(0,n.css)`
      label: LegendItem;
      flex-grow: 0;
    `,legend:(0,n.css)`
      label: Legend;
      pointer-events: all;
    `}}const D=function(Be){const{nodes:Le,onSort:le,sort:de,sortable:X}=Be,se=(0,g.l4)(),re=(0,g.wW)(C),pe=M(Le,se),be=(0,r.useCallback)(xe=>{le({field:xe.data.field,ascending:xe.data.field===de?.field?!de?.ascending:!1})},[de,le]);return r.createElement(s.l,{className:re.legend,displayMode:y.jK.List,placement:"bottom",items:pe,itemRenderer:xe=>r.createElement(r.Fragment,null,r.createElement(v.e,{item:xe,className:re.item,onLabelClick:X?be:void 0}),X&&(de?.field===xe.data.field?r.createElement(d.J,{name:de.ascending?"arrow-up":"arrow-down"}):""))})};function M(Ye,Be){if(!Ye.length)return[];const Le=[Ye[0].mainStat,Ye[0].secondaryStat].filter(de=>!!de),le=Ye.find(de=>de.arcSections.length>0);return le&&le.arcSections[0].config?.color?.mode===h.S.Fixed&&Le.push(...new Set(Ye.map(de=>de.arcSections).flat())),Ye[0].color&&Le.push(Ye[0].color),Le.map(de=>{const X={label:de.config.displayName||de.name,yAxis:0,data:{field:de}};return de.config.color?.mode===h.S.Fixed&&de.config.color?.fixedColor?X.color=Be.visualization.getColorByName(de.config.color?.fixedColor||""):de.config.color?.mode&&(X.gradient=de.config.color?.mode),X.color||X.gradient||(X.color=Be.visualization.getColorByName("")),X})}const P=40,x=Ye=>({mainGroup:(0,n.css)`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:(0,n.css)`
    fill: ${Ye.components.panel.background};
    stroke: ${Ye.colors.border.strong};
  `,text:(0,n.css)`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),S=(0,r.memo)(function(Be){const{marker:Le,onClick:le}=Be,{node:de}=Le,X=(0,g.wW)(x);return de.x!==void 0&&de.y!==void 0?r.createElement("g",{"data-node-id":de.id,className:X.mainGroup,onClick:se=>{le?.(se,Le)},"aria-label":`Hidden nodes marker: ${de.id}`},r.createElement("circle",{className:X.mainCircle,r:P,cx:de.x,cy:de.y}),r.createElement("g",null,r.createElement("foreignObject",{x:de.x-25,y:de.y-25,width:"50",height:"50"},r.createElement("div",{className:X.text},r.createElement("span",null,Le.count>100?">100":Le.count," nodes"))))):null});var I=e(12223),T=e(4919);function O(){return{wrapper:(0,n.css)`
      label: wrapper;
      pointer-events: all;
    `}}function A(Ye){const{config:Be,onConfigChange:Le,onPlus:le,onMinus:de,disableZoomOut:X,disableZoomIn:se}=Ye,[re,pe]=(0,r.useState)(!1),be=!1,xe=(0,g.wW)(O);return r.createElement("div",{className:xe.wrapper},r.createElement(I.wc,{spacing:"sm"},r.createElement(I.Lh,{spacing:"xs"},r.createElement(T.zx,{icon:"plus-circle",onClick:le,size:"md",title:"Zoom in",variant:"secondary",disabled:se}),r.createElement(T.zx,{icon:"minus-circle",onClick:de,size:"md",title:"Zoom out",variant:"secondary",disabled:X})),r.createElement(I.Lh,{spacing:"xs"},r.createElement(T.zx,{icon:"code-branch",onClick:()=>Le({...Be,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!Be.gridLayout}),r.createElement(T.zx,{icon:"apps",onClick:()=>Le({...Be,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:Be.gridLayout}))),be&&r.createElement(T.zx,{size:"xs",fill:"text",onClick:()=>pe(Pe=>!Pe)},re?"Hide config":"Show config"),be&&re&&Object.keys(Be).filter(Pe=>Pe!=="show").map(Pe=>r.createElement("div",{key:Pe},Pe,r.createElement("input",{style:{width:50},type:"number",value:Be[Pe],onChange:we=>{Le({...Be,[Pe]:parseFloat(we.target.value)})}}))))}var B=e(17548),b=e(50334),W=e(84474);const V=()=>new W.q(new URL(e.p+e.u(2509),e.b));var w=e(86832);function K(Ye,Be,Le,le,de){const[X,se]=(0,r.useMemo)(()=>{if(!(Ye.length&&Be.length))return[{},{}];const re=Be.reduce((be,xe)=>(be[xe.source.id]=[...be[xe.source.id]??[],xe],be[xe.target.id]=[...be[xe.target.id]??[],xe],be),{}),pe=Ye.reduce((be,xe)=>(be[xe.id]=xe,be),{});return[re,pe]},[Be,Ye]);return(0,r.useMemo)(()=>Ye.length<=Le?{nodes:Ye,edges:Be}:le.gridLayout?G(Ye,Le,de):z(Ye,Be,se,X,Le,de),[Be,X,Le,Ye,se,de,le.gridLayout])}function z(Ye,Be,Le,le,de,X){let se;X?se=[Le[X]]:(se=Ye.filter(we=>we.incoming===0),se.length||(se=[Ye[0]]));const{visibleNodes:re,markers:pe}=Q(de,se,Le,le),be=j(pe,re,Le,le),xe=(0,w.fromPairs)(be.map(we=>[we.node.id,we]));for(const we of be)we.count===1&&(delete xe[we.node.id],re[we.node.id]=we.node);const Pe=Be.filter(we=>(re[we.source.id]||xe[we.source.id])&&(re[we.target.id]||xe[we.target.id]));return{nodes:Object.values(re),edges:Pe,markers:Object.values(xe)}}function G(Ye,Be,Le){let le=0,de=Be,X=[];if(Le){const se=Ye.findIndex(be=>be.id===Le),re=Math.floor(Be/2);let pe=re;le=se-re,le<0&&(pe+=Math.abs(le),le=0),de=se+pe+1,de>Ye.length&&(le>0&&(le=Math.max(0,le-(de-Ye.length))),de=Ye.length),le>1&&X.push({node:Ye[le-1],count:le}),Ye.length-de>1&&X.push({node:Ye[de],count:Ye.length-de})}else Ye.length-Be>1&&(X=[{node:Ye[Be],count:Ye.length-Be}]);return{nodes:Ye.slice(le,de),edges:[],markers:X}}function Q(Ye,Be,Le,le){const de={};let X=[...Be];for(;Object.keys(de).length<Ye&&X.length>0;){let re=X.shift();if(de[re.id])continue;de[re.id]=re;const be=(le[re.id]||[]).map(xe=>{const Pe=xe.source.id===re.id?xe.target.id:xe.source.id;return Le[Pe]});X=X.concat(be)}const se=(0,w.uniq)(X.filter(re=>!de[re.id]));return{visibleNodes:de,markers:se}}function j(Ye,Be,Le,le){return Ye.map(de=>{const X={};let se=0,re=[de];for(;re.length>0&&se<=101;){let pe=re.shift();if(Be[pe.id]||X[pe.id])continue;X[pe.id]||se++,X[pe.id]=pe;const xe=(le[pe.id]||[]).map(Pe=>{const we=Pe.source.id===pe.id?Pe.target.id:Pe.source.id;return Le[we]});re=re.concat(xe)}return{node:de,count:se}})}const F={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function k(Ye,Be,Le=F,le,de,X){const[se,re]=(0,r.useState)([]),[pe,be]=(0,r.useState)([]),[xe,Pe]=(0,r.useState)(!1),we=(0,b.default)(),Fe=(0,r.useRef)();(0,B.Z)(()=>{Fe.current&&Fe.current()}),(0,r.useEffect)(()=>{if(Ye.length===0){re([]),be([]),Pe(!1);return}Pe(!0);const Ze=_(Ye,Be,({nodes:ut,edges:rt})=>{we()&&(re(ut),be(rt),Pe(!1))});return Fe.current=Ze,Ze},[Ye,Be,we]);const[He,Xe]=(0,r.useMemo)(()=>{if(Ye.length===0)return[[],[]];const Ze=Ye.map(rt=>({...rt})),ut=Be.map(rt=>({...rt}));return Y(Ze,de,Le.sort),[Ze,ut]},[Le.sort,Ye,Be,de]),{nodes:dt,edges:ct,markers:At}=K(Le.gridLayout?He:se,Le.gridLayout?Xe:pe,le,Le,X),Ie=(0,r.useMemo)(()=>(0,i.Tz)([...dt,...(At||[]).map(Ze=>Ze.node)]),[dt,At]);return{nodes:dt,edges:ct,markers:At,bounds:Ie,hiddenNodesCount:Ye.length-dt.length,loading:xe}}function _(Ye,Be,Le){const le=V();return le.onmessage=de=>{for(let X=0;X<Ye.length;X++)de.data.nodes[X]={...Ye[X],...de.data.nodes[X]};Le(de.data)},le.postMessage({nodes:Ye.map(de=>({id:de.id,incoming:de.incoming})),edges:Be,config:F}),()=>{le.terminate()}}function Y(Ye,Be,Le){const se=Math.min(Math.floor((Be-120)/140),Ye.length),re=Math.floor((se-1)*120/2);Le&&Ye.sort((pe,be)=>{const xe=Le.field.values[pe.dataFrameRowIndex],Pe=Le.field.values[be.dataFrameRowIndex];return Le.ascending?xe-Pe:Pe-xe});for(const[pe,be]of Ye.entries()){const xe=Math.floor(pe/se),Pe=pe%se;be.x=Pe*120-re,be.y=-60+xe*140}}var Z=e(47280),ae=e(53790),ce=e(43078),q=e(85001);function De(Ye,Be,Le,le,de,X){const[se,re]=(0,r.useState)(void 0),pe=(0,r.useCallback)((xe,Pe)=>{const[we,Fe]=le.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],He=[{label:we,onClick:ct=>{X(ct.id),de({...le,gridLayout:Fe}),re(void 0)}}],Xe=Be?Ye(Be,Pe.dataFrameRowIndex):[],dt=te(Xe,Pe,He);re(oe(r.createElement(me,{node:Pe,nodes:Be}),xe,re,dt))},[le,Be,Ye,re,de,X]);return{onEdgeOpen:(0,r.useCallback)((xe,Pe)=>{if(!Le)return;const we=Ye(Le,Pe.dataFrameRowIndex),Fe=te(we,Pe);re(oe(r.createElement(ye,{edge:Pe,edges:Le}),xe,re,Fe))},[Le,Ye,re]),onNodeOpen:pe,MenuComponent:se}}function oe(Ye,Be,Le,le){return r.createElement(ae.x,{renderHeader:()=>Ye,renderMenuItems:le,onClose:()=>Le(void 0),x:Be.pageX,y:Be.pageY})}function te(Ye,Be,Le){if(!(Ye.length||Le?.length))return;const le=Te(Ye);return()=>{let de=le?.map((X,se)=>r.createElement(ce.k,{key:`${X.label}${se}`,label:X.label},(X.items||[]).map(fe(Be))));return Le&&(de=[...Le.map(fe(Be)),...de]),de}}function fe(Ye){return function(Le){return r.createElement(q.s,{key:Le.label,url:Le.url,label:Le.label,ariaLabel:Le.ariaLabel,onClick:Le.onClick?le=>{le?.ctrlKey||le?.metaKey||le?.shiftKey||(le?.preventDefault(),le?.stopPropagation(),Le.onClick?.(Ye))}:void 0,target:"_self"})}}function Te(Ye){const Be="Open in Explore",Le=Ye.reduce((le,de)=>{let X,se;return de.title.indexOf("/")!==-1?(X=de.title.split("/")[0],se=de.title.split("/")[1],le[X]=le[X]||[],le[X].push({l:de,newTitle:se})):(le[Be]=le[Be]||[],le[Be].push({l:de})),le},{});return Object.keys(Le).map(le=>({label:le,ariaLabel:le,items:Le[le].map(de=>({label:de.newTitle||de.l.title,ariaLabel:de.newTitle||de.l.title,url:de.l.href,onClick:de.l.onClick}))}))}function ge({field:Ye,index:Be}){return r.createElement(he,{label:Ye.config?.displayName||Ye.name,value:(0,i.Ew)(Ye.config,Ye.values[Be]||"")})}function he({label:Ye,value:Be}){const Le=(0,g.wW)(ue);return r.createElement("tr",null,r.createElement("td",{className:Le.label},Ye,": "),r.createElement("td",{className:Le.value},Be))}function me({node:Ye,nodes:Be}){const Le=[];if(Be){const le=(0,i.F)(Be);for(const de of[le.title,le.subTitle,le.mainStat,le.secondaryStat,...le.details])de&&de.values[Ye.dataFrameRowIndex]&&Le.push(r.createElement(ge,{key:de.name,field:de,index:Ye.dataFrameRowIndex}))}else Ye.title&&Le.push(r.createElement(he,{key:"title",label:"Title",value:Ye.title})),Ye.subTitle&&Le.push(r.createElement(he,{key:"subtitle",label:"Subtitle",value:Ye.subTitle}));return r.createElement("table",{style:{width:"100%"}},r.createElement("tbody",null,Le))}function ye(Ye){const Be=Ye.edge.dataFrameRowIndex,Le=(0,i.lr)(Ye.edges),le=Le.source?.values[Be]||"",de=Le.target?.values[Be]||"",X=[];le&&de&&X.push(r.createElement(he,{key:"header-row",label:"Source \u2192 Target",value:`${le} \u2192 ${de}`}));for(const se of[Le.mainStat,Le.secondaryStat,...Le.details])se&&se.values[Be]&&X.push(r.createElement(ge,{key:`field-row-${Be}`,field:se,index:Be}));return r.createElement("table",{style:{width:"100%"}},r.createElement("tbody",null,X))}const ue=Ye=>({label:(0,n.css)`
      label: Label;
      line-height: 1.25;
      color: ${Ye.colors.text.disabled};
      font-size: ${Ye.typography.size.sm};
      font-weight: ${Ye.typography.fontWeightMedium};
      padding-right: ${Ye.spacing(1)};
    `,value:(0,n.css)`
      label: Value;
      font-size: ${Ye.typography.size.sm};
      font-weight: ${Ye.typography.fontWeightMedium};
      color: ${Ye.colors.text.primary};
    `});var Oe=e(92418);function Ue(Ye,Be,Le){const le=(0,Oe.Z)(Ye.gridLayout);let de;if(le===!0&&!Ye.gridLayout&&Le){const X=Be.find(se=>se.id===Le);X&&(de={x:-X.x,y:-X.y})}return de}function at(Ye){const[Be,Le]=(0,r.useState)(),le=(0,b.default)();return(0,r.useEffect)(()=>{Ye&&(Le(Ye),setTimeout(()=>{le()&&Le(void 0)},500))},[Ye,le]),Be}function Ne({scale:Ye=1,bounds:Be,focus:Le}={}){const le=(0,b.default)(),de=(0,r.useRef)(!1),X=(0,r.useRef)(0),se=(0,r.useRef)(null),re={x:0,y:0},pe=(0,r.useMemo)(()=>({right:Be?-Be.left:1/0,left:Be?-Be.right:-1/0,bottom:Be?-Be.top:-1/0,top:Be?-Be.bottom:1/0}),[Be]),be=(0,r.useRef)(re),xe=(0,r.useRef)(re),Pe=(0,r.useRef)(re),[we,Fe]=(0,r.useState)({isPanning:!1,position:re});(0,r.useEffect)(()=>{const dt=St=>{!de.current&&le()&&(de.current=!0,be.current=Ke(St),xe.current={...Pe.current},Fe(st=>({...st,isPanning:!0})),Ie())},ct=()=>{de.current&&le()&&(de.current=!1,Fe(St=>({...St,isPanning:!1})),Ze())},At=St=>{dt(St),ut(St)},Ie=()=>{document.addEventListener("mousemove",ut),document.addEventListener("mouseup",ct),document.addEventListener("touchmove",ut),document.addEventListener("touchend",ct)},Ze=()=>{document.removeEventListener("mousemove",ut),document.removeEventListener("mouseup",ct),document.removeEventListener("touchmove",ut),document.removeEventListener("touchend",ct)},ut=St=>{cancelAnimationFrame(X.current);const st=Ke(St);X.current=requestAnimationFrame(()=>{if(le()&&se.current){let tt=st.x-be.current.x,ft=st.y-be.current.y;Pe.current={x:_e(xe.current.x+tt/Ye,pe.left,pe.right),y:_e(xe.current.y+ft/Ye,pe.top,pe.bottom)},Fe($t=>({...$t,position:{...Pe.current}}))}})},rt=se.current;return rt&&(rt.addEventListener("mousedown",At),rt.addEventListener("touchstart",At)),()=>{rt&&(rt.removeEventListener("mousedown",At),rt.removeEventListener("touchstart",At))}},[Ye,pe,le]);const He=(0,Oe.Z)(Le);(0,r.useEffect)(()=>{if(Le&&He?.x!==Le.x&&He?.y!==Le.y){const dt={x:_e(Le.x,pe.left,pe.right),y:_e(Le.y,pe.top,pe.bottom)};Fe({position:dt,isPanning:!1}),Pe.current=dt,xe.current=dt}},[Le,He,pe,Pe,xe]);let Xe=we.position;return Le&&He?.x!==Le.x&&He?.y!==Le.y&&(Xe=Le),{state:{...we,position:{x:_e(Xe.x,pe.left,pe.right),y:_e(Xe.y,pe.top,pe.bottom)}},ref:se}}function _e(Ye,Be,Le){return Math.min(Math.max(Ye,Be??-1/0),Le??1/0)}function Ke(Ye){return Ye instanceof TouchEvent?{x:Ye.changedTouches[0].clientX,y:Ye.changedTouches[0].clientY}:Ye instanceof MouseEvent?{x:Ye.clientX,y:Ye.clientY}:{x:0,y:0}}const et={stepDown:Ye=>Ye/1.5,stepUp:Ye=>Ye*1.5,min:.13,max:2.25};function ze({stepUp:Ye,stepDown:Be,min:Le,max:le}=et){const de=(0,r.useRef)(null),[X,se]=(0,r.useState)(1),re=(0,r.useCallback)(()=>{X<(le??1/0)&&se(Ye(X))},[X,Ye,le]),pe=(0,r.useCallback)(()=>{X>(Le??-1/0)&&se(Be(X))},[X,Be,Le]),be=(0,r.useCallback)(function(xe){if(xe.ctrlKey||xe.metaKey){if(xe.preventDefault(),se(Math.min(Math.max(Le??-1/0,X+Math.min(xe.deltaY,2)*-.01),le??1/0)),xe.deltaY<0){const Pe=X+Math.max(xe.deltaY,-4)*-.015;se(Math.max(Le??-1/0,Pe))}else if(xe.deltaY>0){const Pe=X+Math.min(xe.deltaY,4)*-.015;se(Math.min(le??1/0,Pe))}}},[Le,le,X]);return(0,r.useEffect)(()=>{if(!de.current)return;const xe=de.current;return xe.addEventListener("wheel",be,{passive:!1}),()=>{xe&&xe.removeEventListener("wheel",be)}},[be]),{onStepUp:re,onStepDown:pe,scale:Math.max(Math.min(X,le??1/0),Le??-1/0),isMax:X>=(le??1/0),isMin:X<=(Le??-1/0),ref:de}}const je=Ye=>({wrapper:(0,n.css)`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:(0,n.css)`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:(0,n.css)`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:(0,n.css)`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${Ye.typography.h4.fontSize};
    color: ${Ye.colors.text.secondary};
  `,mainGroup:(0,n.css)`
    label: mainGroup;
    will-change: transform;
  `,viewControls:(0,n.css)`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:(0,n.css)`
    label: legend;
    background: ${Ye.colors.background.secondary};
    box-shadow: ${Ye.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:(0,n.css)`
    margin-left: auto;
  `,alert:(0,n.css)`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${Ye.shape.radius.default};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${Ye.colors.warning.main};
    color: ${Ye.colors.warning.contrastText};
  `,loadingWrapper:(0,n.css)`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),Qe=200;function We({getLinks:Ye,dataFrames:Be,nodeLimit:Le}){const le=Le||Qe,{edges:de,nodes:X}=(0,Z.Y)(Be),[se,{width:re,height:pe}]=(0,o.Z)(),[be,xe]=(0,r.useState)(F),Pe=X[0],we=de[0],Fe=(0,r.useMemo)(()=>(0,i.HB)(Pe,we),[we,Pe]),{nodeHover:He,setNodeHover:Xe,clearNodeHover:dt,edgeHover:ct,setEdgeHover:At,clearEdgeHover:Ie}=Lt(),[Ze,ut]=(0,r.useState)([]);(0,r.useEffect)(()=>{let nn=[];He?nn=(0,i.uX)(Fe.nodes,Fe.edges,He):ct&&(nn=(0,i.MP)(Fe.nodes,Fe.edges,ct)),ut(nn)},[He,ct,Fe]);const[rt,St]=(0,r.useState)(),st=(0,r.useCallback)((nn,mn)=>St(mn.node.id),[St]),{nodes:tt,edges:ft,markers:$t,bounds:Ht,hiddenNodesCount:Zt,loading:tn}=k(Fe.nodes,Fe.edges,be,le,re,rt),on=Ue(be,tt,rt),{panRef:qt,zoomRef:pn,onStepUp:Cn,onStepDown:Rt,isPanning:mt,position:xt,scale:Ft,isMaxZoom:zt,isMinZoom:Jt}=wt(Ht,on),{onEdgeOpen:ln,onNodeOpen:Pt,MenuComponent:Gt}=De(Ye,Pe,we,be,xe,St),Kt=(0,g.wW)(je),kt=(0,r.useCallback)(nn=>{se(nn),pn.current=nn},[se,pn]),dn=at(rt);return r.createElement("div",{ref:kt,className:Kt.wrapper},tn?r.createElement("div",{className:Kt.loadingWrapper},"Computing layout\xA0",r.createElement(m.$,null)):null,Be.length&&Fe.nodes.length?r.createElement("svg",{ref:qt,viewBox:`${-(re/2)} ${-(pe/2)} ${re} ${pe}`,className:l()(Kt.svg,mt&&Kt.svgPanning)},r.createElement("g",{className:Kt.mainGroup,style:{transform:`scale(${Ft}) translate(${Math.floor(xt.x)}px, ${Math.floor(xt.y)}px)`}},r.createElement(c,null),!be.gridLayout&&r.createElement(lt,{edges:ft,nodeHoveringId:He,edgeHoveringId:ct,onClick:ln,onMouseEnter:At,onMouseLeave:Ie}),r.createElement(ke,{nodes:tt,onMouseEnter:Xe,onMouseLeave:dt,onClick:Pt,hoveringIds:Ze||[dn]}),r.createElement(ot,{markers:$t||[],onClick:st}),!be.gridLayout&&r.createElement(Ct,{edges:ft,nodeHoveringId:He,edgeHoveringId:ct}))):r.createElement("div",{className:Kt.noDataMsg},"No data"),r.createElement("div",{className:Kt.viewControls},tt.length?r.createElement("div",{className:Kt.legend},r.createElement(D,{sortable:be.gridLayout,nodes:tt,sort:be.sort,onSort:nn=>{xe({...be,sort:nn})}})):null,r.createElement("div",{className:Kt.viewControlsWrapper},r.createElement(A,{config:be,onConfigChange:nn=>{nn.gridLayout!==be.gridLayout&&St(void 0),xe(nn)},onMinus:Rt,onPlus:Cn,scale:Ft,disableZoomIn:zt,disableZoomOut:Jt}))),Zt>0&&r.createElement("div",{className:Kt.alert,"aria-label":"Nodes hidden warning"},r.createElement(d.J,{size:"sm",name:"info-circle"})," ",Zt," nodes are hidden for performance reasons."),Gt)}const ke=(0,r.memo)(function(Be){return r.createElement(r.Fragment,null,Be.nodes.map(Le=>r.createElement(u.N,{key:Le.id,node:Le,onMouseEnter:Be.onMouseEnter,onMouseLeave:Be.onMouseLeave,onClick:Be.onClick,hovering:!Be.hoveringIds||Be.hoveringIds.length===0?"default":Be.hoveringIds?.includes(Le.id)?"active":"inactive"})))}),ot=(0,r.memo)(function(Be){return r.createElement(r.Fragment,null,Be.markers.map(Le=>r.createElement(S,{key:"marker-"+Le.node.id,marker:Le,onClick:Be.onClick})))}),lt=(0,r.memo)(function(Be){return r.createElement(r.Fragment,null,Be.edges.map(Le=>r.createElement(f,{key:Le.id,edge:Le,hovering:Le.source.id===Be.nodeHoveringId||Le.target.id===Be.nodeHoveringId||Be.edgeHoveringId===Le.id,onClick:Be.onClick,onMouseEnter:Be.onMouseEnter,onMouseLeave:Be.onMouseLeave})))}),Ct=(0,r.memo)(function(Be){return r.createElement(r.Fragment,null,Be.edges.map((Le,le)=>{const de=Le.source.id===Be.nodeHoveringId||Le.target.id===Be.nodeHoveringId||Be.edgeHoveringId===Le.id,X=Le.mainStat||Le.secondaryStat;return de&&X&&r.createElement(p,{key:Le.id,edge:Le})}))});function wt(Ye,Be){const{scale:Le,onStepDown:le,onStepUp:de,ref:X,isMax:se,isMin:re}=ze(),{state:pe,ref:be}=Ne({scale:Le,bounds:Ye,focus:Be}),{position:xe,isPanning:Pe}=pe;return{zoomRef:X,panRef:be,position:xe,isPanning:Pe,scale:Le,onStepDown:le,onStepUp:de,isMaxZoom:se,isMinZoom:re}}function Lt(){const[Ye,Be]=(0,r.useState)(void 0),Le=(0,r.useCallback)(()=>Be(void 0),[Be]),[le,de]=(0,r.useState)(void 0),X=(0,r.useCallback)(()=>de(void 0),[de]);return{nodeHover:Ye,setNodeHover:Be,clearNodeHover:Le,edgeHover:le,setEdgeHover:de,clearEdgeHover:X}}},47280:(J,R,e)=>{"use strict";e.d(R,{Y:()=>l});var n=e(39953),a=e(30697);function l(r){return(0,n.useMemo)(()=>(0,a.E_)(r),[r])}},30697:(J,R,e)=>{"use strict";e.d(R,{E_:()=>A,Ee:()=>S,Ew:()=>s,F:()=>m,HB:()=>i,MP:()=>T,Tz:()=>x,dM:()=>g,lr:()=>d,uX:()=>O});var n=e(76892),a=e(2221),l=e(89591),r=e(97898),o=e(85136);function g(B,b,W){const V=B.x2-B.x1,w=B.y2-B.y1,K=Math.sqrt(V*V+w*w),z=(B.x2-B.x1)/K,G=(B.y2-B.y1)/K;return{x1:B.x1+z*(b+5),y1:B.y1+G*(b+5),x2:B.x2-z*(W+5),y2:B.y2-G*(W+5)}}function m(B){const b={...B,fields:B.fields.map(V=>({...V,name:V.name.toLowerCase()}))},W=new n.N(b);return{id:W.getFieldByName(a.z.id.toLowerCase()),title:W.getFieldByName(a.z.title.toLowerCase()),subTitle:W.getFieldByName(a.z.subTitle.toLowerCase()),mainStat:W.getFieldByName(a.z.mainStat.toLowerCase()),secondaryStat:W.getFieldByName(a.z.secondaryStat.toLowerCase()),arc:u(B,a.z.arc),details:u(B,a.z.detail),color:W.getFieldByName(a.z.color),icon:W.getFieldByName(a.z.icon),nodeRadius:W.getFieldByName(a.z.nodeRadius.toLowerCase())}}function d(B){const b={...B,fields:B.fields.map(V=>({...V,name:V.name.toLowerCase()}))},W=new n.N(b);return{id:W.getFieldByName(a.z.id.toLowerCase()),source:W.getFieldByName(a.z.source.toLowerCase()),target:W.getFieldByName(a.z.target.toLowerCase()),mainStat:W.getFieldByName(a.z.mainStat.toLowerCase()),secondaryStat:W.getFieldByName(a.z.secondaryStat.toLowerCase()),details:u(B,a.z.detail.toLowerCase())}}function u(B,b){return B.fields.filter(W=>W.name.match(new RegExp("^"+b)))}function i(B,b){if(!(b||B))return{nodes:[],edges:[]};if(B){const W=m(B);if(!W.id)throw new Error("id field is required for nodes data frame.");const V={};for(let K=0;K<W.id.values.length;K++){const z=W.id.values[K];V[z]=y(z,W,K)}let w=b?f(b,d(b),V):[];for(const K of w)V[K.target].incoming++;return{nodes:Object.values(V),edges:w,legend:W.arc.map(K=>({color:K.config.color?.fixedColor??"",name:K.config.displayName||K.name}))}}else{b=b;const W={},V=d(b);for(let z=0;z<b.length;z++){const{source:G,target:Q}=p(V,z);W[Q.id]=W[Q.id]||Q,W[G.id]=W[G.id]||G,c(V.mainStat)&&(W[Q.id].mainStatNumeric=(W[Q.id].mainStatNumeric??0)+V.mainStat.values[z]),c(V.secondaryStat)&&(W[Q.id].secondaryStatNumeric=(W[Q.id].secondaryStatNumeric??0)+V.secondaryStat.values[z]),W[Q.id].incoming++}let w=f(b,V,W);return{nodes:E(W,V),edges:w}}}function f(B,b,W){if(!b.id)throw new Error("id field is required for edges data frame.");return b.id.values.map((V,w)=>{const K=b.target?.values[w],z=b.source?.values[w],G=W[z],Q=W[K];return{id:V,dataFrameRowIndex:w,source:z,target:K,sourceNodeRadius:G.nodeRadius?G.nodeRadius.values[G.dataFrameRowIndex]:o.U,targetNodeRadius:Q.nodeRadius?Q.nodeRadius.values[Q.dataFrameRowIndex]:o.U,mainStat:b.mainStat?s(b.mainStat.config,b.mainStat.values[w]):"",secondaryStat:b.secondaryStat?s(b.secondaryStat.config,b.secondaryStat.values[w]):""}})}function c(B){return B&&B.type===l.fS.number}function E(B,b){const W=[],V=[],w=c(b.secondaryStat)?{...b.secondaryStat,values:W}:void 0,K=c(b.mainStat)?{...b.mainStat,values:V}:void 0;return Object.values(B).map((z,G)=>{if(K||w){const Q={...z};return K&&(Q.mainStat=K,V.push(z.mainStatNumeric),Q.dataFrameRowIndex=G),w&&(Q.secondaryStat=w,W.push(z.secondaryStatNumeric),Q.dataFrameRowIndex=G),Q}return z})}function p(B,b){const W=B.target?.values[b],V=B.source?.values[b];return{target:h(W,b),source:h(V,b)}}function h(B,b){return{id:B,title:B,subTitle:"",dataFrameRowIndex:b,incoming:0,arcSections:[]}}function y(B,b,W){return{id:B,title:b.title?.values[W]||"",subTitle:b.subTitle?.values[W]||"",dataFrameRowIndex:W,incoming:0,mainStat:b.mainStat,secondaryStat:b.secondaryStat,arcSections:b.arc,color:b.color,icon:b.icon?.values[W]||"",nodeRadius:b.nodeRadius}}function s(B,b){if(typeof b=="string")return b;{const W=B.decimals||2;return Number.isFinite(b)?b.toFixed(W)+(B.unit?" "+B.unit:""):""}}function v(B){const b=D();for(let W=0;W<B;W++)b.add(C(W));return b}function C(B){return{id:B.toString(),title:`service:${B}`,subtitle:"service",arc__success:.5,arc__errors:.5,mainstat:.1,secondarystat:2,color:.5,icon:"database",noderadius:40}}function D(){const B={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.title]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.subTitle]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.arc+"success"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"green"}}},[NodeGraphDataFrameFieldNames.arc+"errors"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"red"}}},[NodeGraphDataFrameFieldNames.color]:{values:[],type:FieldType.number,config:{color:{mode:"continuous-GrYlRd"}}},[NodeGraphDataFrameFieldNames.icon]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.nodeRadius]:{values:[],type:FieldType.number}};return new MutableDataFrame({name:"nodes",fields:Object.keys(B).map(b=>({...B[b],name:b}))})}function M(B){const b=P();for(const W of B)b.add({id:W.source+"--"+W.target,...W});return b}function P(){const B={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.source]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.target]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number}};return new MutableDataFrame({name:"edges",fields:Object.keys(B).map(b=>({...B[b],name:b}))})}function x(B){if(B.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const b=B.reduce((w,K)=>(K.x>w.right&&(w.right=K.x),K.x<w.left&&(w.left=K.x),K.y>w.bottom&&(w.bottom=K.y),K.y<w.top&&(w.top=K.y),w),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),W=b.top+(b.bottom-b.top)/2,V=b.left+(b.right-b.left)/2;return{...b,center:{x:V,y:W}}}function S(B,b){let W=B.filter(V=>!!(V.meta?.preferredVisualisationType==="nodeGraph"||V.name==="nodes"||V.name==="edges"||V.refId==="nodes"||V.refId==="edges"||new n.N(V).getFieldByName(a.z.id)));return b&&(W=I(W,b)),W}const I=(B,b)=>B.map(W=>{if(new n.N(W).getFieldByName(a.z.source.toLowerCase())){if(b?.edges?.mainStatUnit){const w=W.fields.find(K=>K.name.toLowerCase()===a.z.mainStat);w&&(w.config={...w.config,unit:b.edges.mainStatUnit})}if(b?.edges?.secondaryStatUnit){const w=W.fields.find(K=>K.name.toLowerCase()===a.z.secondaryStat);w&&(w.config={...w.config,unit:b.edges.secondaryStatUnit})}}else{if(b?.nodes?.mainStatUnit){const w=W.fields.find(K=>K.name.toLowerCase()===a.z.mainStat);w&&(w.config={...w.config,unit:b.nodes.mainStatUnit})}if(b?.nodes?.secondaryStatUnit){const w=W.fields.find(K=>K.name.toLowerCase()===a.z.secondaryStat);w&&(w.config={...w.config,unit:b.nodes.secondaryStatUnit})}if(b?.nodes?.arcs?.length)for(const w of b.nodes.arcs){const K=W.fields.find(z=>z.name.toLowerCase()===w.field);K&&w.color&&(K.config={...K.config,color:{fixedColor:w.color,mode:r.S.Fixed}})}}return W}),T=(B,b,W)=>{const V=b.find(w=>w.id===W);return V?[...new Set(B.filter(w=>V.source===w.id||V.target===w.id).map(w=>w.id))]:[]},O=(B,b,W)=>{const V=B.find(w=>w.id===W);if(V){const w=b.filter(K=>K.source===V.id||K.target===V.id);return[...new Set(w.flatMap(K=>B.filter(z=>K.source===z.id||K.target===z.id).map(z=>z.id)))]}return[]},A=B=>B.reduce((b,W)=>(W.fields.filter(w=>w.name==="source").length?b.edges.push(W):b.nodes.push(W),b),{edges:[],nodes:[]})},86085:(J,R,e)=>{"use strict";e.d(R,{h:()=>m,j:()=>g});var n=e(18985),a=e(3181),l=e(69330),r=e(55705),o=e(34547);function g(d,u=!0){const i=["Value options"];d.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:i,defaultValue:!1}),d.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:i,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:f=>f.reduceOptions.values===!0}),d.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:i,editor:n.S.get("stats-picker").editor,defaultValue:[a.gz.lastNotNull],showIf:f=>f.reduceOptions.values===!1}),u&&d.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:i,settings:{allowCustomValue:!0,options:[],getOptions:async f=>{const c=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(f&&f.data)for(const E of f.data)for(const p of E.fields){const h=(0,l.CZ)(p,E,f.data),y=`/^${(0,r.GE)(h)}$/`;c.push({value:y,label:h})}return Promise.resolve(c)}},defaultValue:""})}function m(d,u){d.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:u,settings:{options:[{value:o.wm.Auto,label:"Auto"},{value:o.wm.Horizontal,label:"Horizontal"},{value:o.wm.Vertical,label:"Vertical"}]},defaultValue:o.wm.Auto})}},88294:(J,R,e)=>{"use strict";e.r(R),e.d(R,{plugin:()=>M});var n=e(40530),a=e(34547),l=e(40723),r=e(86609),o=e(97898);const g=(P,x,S)=>{const I=(0,r.ZH)(P,x,S);if(S.angular&&(x==="singlestat"||x==="grafana-singlestat-panel")){const T=S.angular;if(I.graphMode=a.IG.None,T.sparkline&&T.sparkline.show&&(I.graphMode=a.IG.Area),T.colorBackground)I.colorMode=a.pc.Background;else if(T.colorValue)I.colorMode=a.pc.Value;else if(I.colorMode=a.pc.None,T.sparkline?.lineColor&&I.graphMode===a.IG.Area){const O=P.fieldConfig??{};O.defaults.color={mode:o.S.Fixed,fixedColor:T.sparkline.lineColor},P.fieldConfig=O}T.valueName==="name"&&(I.textMode=a.jG.Name)}return I};var m=e(86832),d=e(39953),u=e(89591),i=e(52366),f=e(52716),c=e(26753),E=e(22785),p=e(4367),h=e(50820);class y extends d.PureComponent{constructor(){super(...arguments),this.renderComponent=(x,S)=>{const{timeRange:I,options:T}=this.props,{value:O,alignmentFactors:A,width:B,height:b,count:W,orientation:V}=x,{openMenu:w,targetClassName:K}=S;let z=O.sparkline;return z&&(z.timeRange=I),d.createElement(c.w6,{value:O.display,count:W,sparkline:z,colorMode:T.colorMode,graphMode:T.graphMode,justifyMode:T.justifyMode,textMode:this.getTextMode(),alignmentFactors:A,parentOrientation:V,text:T.text,width:B,height:b,theme:h.config.theme2,onClick:w,className:K,disableWideLayout:!T.wideLayout})},this.renderValue=x=>{const{value:S}=x,{getLinks:I,hasLinks:T}=S;return T&&I?d.createElement(E.V,{links:I},O=>this.renderComponent(x,O)):this.renderComponent(x,{})},this.getValues=()=>{const{data:x,options:S,replaceVariables:I,fieldConfig:T,timeZone:O}=this.props;let A;for(let B of x.series)for(let b of B.fields){let{config:W}=b;if(b.type===u.fS.number){if(b.state?.range)continue;!A&&(!(0,m.isNumber)(W.min)||!(0,m.isNumber)(W.max))&&(A=(0,f.Xu)(x.series));const V=W.min??A.min,w=W.max??A.max;b.state=b.state??{},b.state.range={min:V,max:w,delta:w-V}}}return(0,i.nG)({fieldConfig:T,reduceOptions:S.reduceOptions,replaceVariables:I,theme:h.config.theme2,data:x.series,sparkline:S.graphMode!==a.IG.None,timeZone:O})}}getTextMode(){const{options:x,fieldConfig:S,title:I}=this.props;return x.textMode===a.jG.Auto&&(S.defaults.displayName||!I)?a.jG.ValueAndName:x.textMode}render(){const{height:x,options:S,width:I,data:T,renderCounter:O}=this.props;return d.createElement(p.Q,{getValues:this.getValues,getAlignmentFactors:i.sg,renderValue:this.renderValue,width:I,height:x,source:T,itemSpacing:3,renderCounter:O,autoGrid:!0,orientation:S.orientation})}}var s=e(86085);const v={colorMode:a.pc.Value,graphMode:a.IG.Area,justifyMode:a.ap.Auto,textMode:a.jG.Auto,wideLayout:!0};var C=e(43419);class D{getSuggestionsForData(x){const{dataSummary:S}=x;if(!S.hasData)return;const I=x.getListAppender({name:C.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:T=>{T.options.reduceOptions.values&&(T.options.reduceOptions.limit=1)}}});S.hasStringField&&S.hasNumberField&&S.frameCount===1&&S.rowCountTotal<10&&(I.append({name:C.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),I.append({name:C.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:a.pc.Background}})),S.stringFieldCount===1&&S.frameCount===1&&S.rowCountTotal<10&&S.fieldCount===1&&I.append({name:C.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:a.pc.None}}),S.hasNumberField&&S.hasTimeField&&(I.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),I.append({name:C.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:a.IG.None,colorMode:a.pc.Background}}))}}const M=new n.c(y).useFieldConfig().setPanelOptions(P=>{const x=["Stat styles"];(0,s.j)(P),(0,s.h)(P,x),l.Z(P),P.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:x,settings:{options:[{value:a.jG.Auto,label:"Auto"},{value:a.jG.Value,label:"Value"},{value:a.jG.ValueAndName,label:"Value and name"},{value:a.jG.Name,label:"Name"},{value:a.jG.None,label:"None"}]},defaultValue:v.textMode}).addRadio({path:"wideLayout",name:"Wide layout",category:x,settings:{options:[{value:!0,label:"On"},{value:!1,label:"Off"}]},defaultValue:v.wideLayout,showIf:S=>S.textMode===a.jG.ValueAndName}),P.addSelect({path:"colorMode",name:"Color mode",defaultValue:a.pc.Value,category:x,settings:{options:[{value:a.pc.None,label:"None"},{value:a.pc.Value,label:"Value"},{value:a.pc.Background,label:"Background Gradient"},{value:a.pc.BackgroundSolid,label:"Background Solid"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:x,defaultValue:v.graphMode,settings:{options:[{value:a.IG.None,label:"None"},{value:a.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:v.justifyMode,category:x,settings:{options:[{value:a.ap.Auto,label:"Auto"},{value:a.ap.Center,label:"Center"}]}})}).setNoPadding().setPanelChangeHandler(g).setSuggestionsSupplier(new D).setMigrationHandler(r.rD)},80977:(J,R,e)=>{"use strict";e.d(R,{Bc:()=>y,I0:()=>p,OF:()=>g,yR:()=>s});var n=e(86832),a=e.n(n),l=e(86981),r=e(60695),o=e(89591);const g=v=>(!v.pluginVersion&&"columns"in v&&console.log("Was angular table",v),v.options),m={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},d={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},u={cell:"color-background",row:"color-background",value:"color-text"},i=(v,C)=>[-1/0,...v].map((D,M)=>({color:C[M],value:(0,n.isNumber)(D)?D:parseInt(D,10)})),f=(v,C)=>{const D=v.transformations??[];if(Object.keys(m).includes(C.transform)){const M={reducers:[]};C.transform==="timeseries_aggregations"&&(M.includeTimeField=!1,M.reducers=C.columns.map(P=>d[P.value])),D.push({id:m[C.transform],options:M})}return D},c=v=>{const D={matcher:{id:/^\/.*\/$/.test(v.pattern)?l.mi.byRegexp:l.mi.byName,options:v.pattern},properties:[]};return v.alias&&D.properties.push({id:"displayName",value:v.alias}),v.unit&&D.properties.push({id:"unit",value:v.unit}),v.decimals&&D.properties.push({id:"decimals",value:v.decimals}),v.type==="date"&&D.properties.push({id:"unit",value:`time: ${v.dateFormat}`}),v.link&&D.properties.push({id:"links",value:[{title:(0,n.defaultTo)(v.linkTooltip,""),url:(0,n.defaultTo)(v.linkUrl,""),targetBlank:(0,n.defaultTo)(v.linkTargetBlank,!1)}]}),v.colorMode&&D.properties.push({id:"custom.cellOptions",value:{type:u[v.colorMode]}}),v.align&&D.properties.push({id:"custom.align",value:v.align==="auto"?null:v.align}),v.thresholds?.length&&D.properties.push({id:"thresholds",value:{mode:r.H.Absolute,steps:i(v.thresholds,v.colors)}}),D},E=v=>{let C={custom:{}};if(v){if(C=(0,n.omitBy)({unit:v.unit,decimals:v.decimals,displayName:v.alias,custom:{align:v.align==="auto"?null:v.align}},n.isNil),v.thresholds.length){const D={mode:r.H.Absolute,steps:i(v.thresholds,v.colors)};C.thresholds=D}v.colorMode&&(C.custom.cellOptions={type:u[v.colorMode]})}return C},p=(v,C,D)=>{if(C==="table-old"&&D.angular){const M=D.angular,P=f(v,M),x=M.styles.find(T=>T.pattern==="/.*/"),S=E(x),I=M.styles.filter(T=>T.pattern!=="/.*/").map(c);v.transformations=P,v.fieldConfig={defaults:S,overrides:I}}return{}},h=v=>v?.filter(C=>C.meta?.custom?.parentRowIndex===void 0)||[v?.[0]],y=v=>{const C=[];return h(v).filter(M=>!!M&&M.length!==0)?.forEach(M=>{const P=v?.filter(T=>M.refId===T.refId&&T.meta?.custom?.parentRowIndex!==void 0),x=(0,n.groupBy)(P,T=>T.meta?.custom?.parentRowIndex),S=Object.keys(x).map(T=>x[T]),I={...M};P&&P.length>0&&I.fields.push({name:"nested",type:o.fS.nestedFrames,config:{},values:S}),C.push(I)}),C},s=v=>v?.some(C=>C.meta?.custom?.parentRowIndex!==void 0)},70450:(J,R,e)=>{"use strict";e.d(R,{M:()=>g});var n=e(39953),a=e(12223),l=e(20454),r=e(61796);const o=[{label:"Never",value:!1},{label:"Threshold",value:36e5}],g=({value:m,onChange:d,item:u})=>{const i=typeof m=="number";return o[1].value=i?m:36e5,n.createElement(a.Lh,null,n.createElement(l.S,{value:m,options:o,onChange:d}),i&&n.createElement(r.C,{value:m,onChange:d,inputPrefix:r.Z.GreaterThan,isTime:u.settings.isTime}))}},73310:(J,R,e)=>{"use strict";e.d(R,{j:()=>u});var n=e(39953),a=e(12223),l=e(20454),r=e(9558),o=e(68497);const g=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],m=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(f=>({label:f,value:f})),d=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(f=>({label:f,value:f})),u=({value:f,onChange:c})=>{const E=(0,n.useMemo)(()=>f?.fill==="dash"?m:d,[f]),p=(0,n.useMemo)(()=>{if(!f?.dash?.length)return E[0];const h=f.dash?.join(", "),y=E.find(s=>s.value===h);return y||{label:h,value:h}},[f,E]);return n.createElement(a.Lh,null,n.createElement(l.S,{value:f?.fill||"solid",options:g,onChange:h=>{let y;h==="dot"?y=i(d[0].value):h==="dash"&&(y=i(m[0].value)),c({...f,fill:h,dash:y})}}),f?.fill&&f?.fill!=="solid"&&n.createElement(n.Fragment,null,n.createElement(r.Ph,{allowCustomValue:!0,options:E,value:p,width:20,onChange:h=>{c({...f,dash:i(h.value??"")})},formatCreateLabel:h=>`Segments: ${i(h).join(", ")}`}),n.createElement("div",null,"\xA0",n.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},n.createElement(o.h,{name:"question-circle",tooltip:"Help"})))))};function i(f){const c=[];for(const E of f.split(/(?:,| )+/)){const p=Number.parseInt(E,10);isNaN(p)||c.push(p)}return c}},61796:(J,R,e)=>{"use strict";e.d(R,{C:()=>o,Z:()=>r});var n=e(39953),a=e(81626),l=e(38637),r=(g=>(g.LessThan="lessthan",g.GreaterThan="greaterthan",g))(r||{});const o=({value:g,onChange:m,inputPrefix:d,isTime:u})=>{let i=a.secondsToHms(g/1e3);u||(i="10");const f=h=>{let y=!1;if(h)try{u&&a.isValidTimeSpan(h)?y=a.intervalToMs(h):y=Number(h)}catch(s){console.warn("ERROR",s)}m(y)},c=h=>{h.key==="Enter"&&f(h.currentTarget.value)},E=h=>{f(h.currentTarget.value)},p=d==="greaterthan"?n.createElement("div",null,">"):d==="lessthan"?n.createElement("div",null,"<"):null;return n.createElement(l.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:i,onKeyDown:c,onBlur:E,prefix:p,spellCheck:!1})}},64555:(J,R,e)=>{"use strict";e.d(R,{c:()=>g});var n=e(39953),a=e(12223),l=e(20454),r=e(61796);const o=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],g=({value:m,onChange:d,item:u})=>{const i=typeof m=="number";return o[2].value=i?m:36e5,n.createElement(a.Lh,null,n.createElement(l.S,{value:m,options:o,onChange:d}),i&&n.createElement(r.C,{value:m,onChange:d,inputPrefix:r.Z.LessThan,isTime:u.settings.isTime}))}},58650:(J,R,e)=>{"use strict";e.d(R,{F:()=>l});var n=e(39953),a=e(9558);const l=({item:r,value:o,onChange:g,id:m})=>{const d=(0,n.useCallback)(u=>{g({mode:u.value})},[g]);return n.createElement(a.Ph,{inputId:m,value:o.mode,options:r.settings.options,onChange:d})}},71237:(J,R,e)=>{"use strict";e.d(R,{F:()=>y,r:()=>p});var n=e(82909),a=e(97898),l=e(89591),r=e(63671),o=e(34547),g=e(39480),m=e(69107),d=e(41456),u=e(86246),i=e(70450),f=e(73310),c=e(64555),E=e(58650);const p={drawStyle:o.l8.Line,lineInterpolation:o.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:o.FI.None,barAlignment:o.pu.Center,stacking:{mode:o.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1,axisBorderShow:!1},h=["Graph styles"];function y(s,v=!0){return{standardOptions:{[n.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:a.S.PaletteClassic}}},useCustomConfig:C=>{C.addRadio({path:"drawStyle",name:"Style",category:h,defaultValue:s.drawStyle,settings:{options:g.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:h,defaultValue:s.lineInterpolation,settings:{options:g.q.lineInterpolation},showIf:D=>D.drawStyle===o.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:h,defaultValue:s.barAlignment,settings:{options:g.q.barAlignment},showIf:D=>D.drawStyle===o.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:h,defaultValue:s.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:D=>D.drawStyle!==o.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:h,defaultValue:s.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:D=>D.drawStyle!==o.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:h,defaultValue:g.q.fillGradient[0].value,settings:{options:g.q.fillGradient},showIf:D=>D.drawStyle!==o.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:h,hideFromDefaults:!0,settings:{filter:D=>D.type===l.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:h,showIf:D=>D.drawStyle===o.l8.Line,editor:f.j,override:f.j,process:r.kG,shouldApply:D=>D.type===l.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:h,defaultValue:!1,editor:c.c,override:c.c,showIf:D=>D.drawStyle===o.l8.Line,shouldApply:D=>D.type!==l.fS.time,process:r.kG,settings:{isTime:v}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",category:h,defaultValue:!1,editor:i.M,override:i.M,showIf:D=>D.drawStyle===o.l8.Line,shouldApply:D=>D.type!==l.fS.time,process:r.kG,settings:{isTime:v}}).addRadio({path:"showPoints",name:"Show points",category:h,defaultValue:g.q.showPoints[0].value,settings:{options:g.q.showPoints},showIf:D=>D.drawStyle!==o.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:h,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:D=>D.showPoints!==o.Jp.Never||D.drawStyle===o.l8.Points}),m.V(C,s.stacking,h),C.addSelect({category:h,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:o.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:o.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),d.r(C,s),u.B(C),C.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:o.i3.Off},settings:{options:g.q.thresholdsDisplayModes},editor:E.F,override:E.F,process:r.kG,shouldApply:()=>!0})}}}},74600:(J,R,e)=>{"use strict";e.d(R,{PQ:()=>l,WI:()=>o,h:()=>a,y0:()=>r});var n=e(17174);let a;function l(g){a=g}function r(){return!a||!a.getState?{templating:{...n.qM,lastKey:"key"}}:a.getState()}function o(g){if(!(!a||!a.getState))return a.dispatch(g)}},64944:(J,R,e)=>{"use strict";e.d(R,{B5:()=>n.B,bf:()=>r,hw:()=>a,n8:()=>o});var n=e(24275),a=(c=>(c[c.Admin=4]="Admin",c[c.Editor=2]="Editor",c[c.Member=0]="Member",c[c.Viewer=1]="Viewer",c))(a||{}),l=(c=>(c[c.View=1]="View",c[c.Edit=2]="Edit",c[c.Admin=4]="Admin",c))(l||{}),r=(c=>(c.View="View",c.Edit="Edit",c.Admin="Admin",c))(r||{}),o=(c=>(c.Folder="dash-folder",c.Dashboard="dash-db",c.AlertFolder="dash-folder-alerting",c))(o||{}),g=(c=>(c[c.Query=1]="Query",c[c.Admin=2]="Admin",c))(g||{}),m=(c=>(c.Team="Team",c.User="User",c.ServiceAccount="ServiceAccount",c.Viewer="Viewer",c.Editor="Editor",c))(m||{});const d=[{value:1,label:"Query",description:"Can query data source."}],u=[{value:"Team",label:"Team"},{value:"User",label:"User"},{value:"Viewer",label:"Everyone With Viewer Role"},{value:"Editor",label:"Everyone With Editor Role"}],i=[{value:1,label:"View",description:"Can view dashboards."},{value:2,label:"Edit",description:"Can add, edit and delete dashboards."},{value:4,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}],f=[{value:0,label:"Member",description:"Is team member"},{value:4,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},41516:()=>{"use strict"},70148:()=>{"use strict"},47041:()=>{"use strict"},89037:()=>{"use strict"},73431:(J,R,e)=>{"use strict";e.d(R,{Dn:()=>P,Eb:()=>C,GL:()=>m,GT:()=>E,Im:()=>y,Jd:()=>S,OW:()=>x,QI:()=>v,Qt:()=>s,RB:()=>T,VJ:()=>M,Wj:()=>i,Xw:()=>u,Yr:()=>A,_B:()=>f,_z:()=>p,hS:()=>c,le:()=>D,nq:()=>o,p8:()=>h,pO:()=>d,xF:()=>O,xt:()=>g,z:()=>I});var n=e(71054),a=e(45276);const l=(0,n.X)("ds-request-response"),r=(0,n.X)("ds-request-error"),o=(0,n.X)("template-variable-value-updated"),g=(0,n.X)("graph-click"),m=(0,n.X)("threshold-changed");class d extends a.m{}d.type="panel-queries-changed";class u extends a.m{}u.type="panel-transformations-changed";class i extends a.m{}i.type="panels-options-changed";class f extends a.m{}f.type="dashboard-panels-changed";class c extends a.m{}c.type="dashboard-meta-changed";class E extends a.m{}E.type="panel-directive-ready";class p extends a.m{}p.type="render";class h extends a.R{}h.type="zoom-out";var y=(B=>(B[B.Left=-1]="Left",B[B.Right=1]="Right",B))(y||{});class s extends a.R{}s.type="shift-time";class v extends a.R{}v.type="absolute-time";class C extends a.R{}C.type="remove-panel";class D extends a.R{}D.type="show-modal";class M extends a.R{}M.type="show-confirm-modal";class P extends a.R{}P.type="show-react-modal";class x extends a.m{}x.type="hide-modal";class S extends a.m{}S.type="dashboard-saved";class I extends a.R{}I.type="annotation-query-started";class T extends a.R{}T.type="annotation-query-finished";class O extends a.R{}O.type="panel-edit-started";class A extends a.R{}A.type="panel-edit-finished"},69873:(J,R,e)=>{"use strict";e.d(R,{f0:()=>a,iJ:()=>n,zN:()=>r,zQ:()=>l});var n=(o=>(o[o.CLOSE_PANE=0]="CLOSE_PANE",o[o.CHANGE_DATASOURCE=1]="CHANGE_DATASOURCE",o))(n||{});const a=["lines","bars","points","stacked_lines","stacked_bars"];var l=(o=>(o.table="table",o.raw="raw",o))(l||{});const r=["table","raw"]},65235:()=>{"use strict"},57721:(J,R,e)=>{"use strict";e.d(R,{AccessControlAction:()=>P,AppNotificationSeverity:()=>p,AppNotificationTimeout:()=>h,CORRELATION_EDITOR_POST_CONFIRM_ACTION:()=>s.iJ,CoreEvents:()=>x,DashboardInitPhase:()=>o,DashboardRoutes:()=>r,EXPLORE_GRAPH_STYLES:()=>s.f0,KioskMode:()=>g,OrgRole:()=>m.B5,PermissionLevelString:()=>m.bf,SearchQueryType:()=>m.n8,ServiceAccountStateFilter:()=>i,TABLE_RESULTS_STYLE:()=>s.zQ,TeamPermissionLevel:()=>m.hw,addListener:()=>v.NH,createAsyncThunk:()=>v.hg,timeoutMap:()=>y,useDispatch:()=>v.I0,useSelector:()=>v.v9});var n=e(41516),a=e(11239),l=e(65235),r=(S=>(S.Home="home-dashboard",S.New="new-dashboard",S.Normal="normal-dashboard",S.Path="path-dashboard",S.Scripted="scripted-dashboard",S.Public="public-dashboard",S.Embedded="embedded-dashboard",S))(r||{}),o=(S=>(S.NotStarted="Not started",S.Fetching="Fetching",S.Services="Services",S.Failed="Failed",S.Completed="Completed",S))(o||{}),g=(S=>(S.TV="tv",S.Full="full",S))(g||{}),m=e(64944),d=e(70148),u=e(69471),i=(S=>(S.All="All",S.WithExpiredTokens="WithExpiredTokens",S.Disabled="Disabled",S))(i||{}),f=e(89037),c=e(61985),E=e(67190),p=(S=>(S.Success="success",S.Warning="warning",S.Error="error",S.Info="info",S))(p||{}),h=(S=>(S[S.Success=3e3]="Success",S[S.Warning=5e3]="Warning",S[S.Error=7e3]="Error",S))(h||{});const y={success:3e3,warning:5e3,error:7e3,info:3e3};var s=e(69873),v=e(28804),C=e(89103),D=e(47041),M=e(91779),P=(S=>(S.UsersRead="users:read",S.UsersWrite="users:write",S.UsersAuthTokenList="users.authtoken:read",S.UsersAuthTokenUpdate="users.authtoken:write",S.UsersPasswordUpdate="users.password:write",S.UsersDelete="users:delete",S.UsersCreate="users:create",S.UsersEnable="users:enable",S.UsersDisable="users:disable",S.UsersPermissionsUpdate="users.permissions:write",S.UsersLogout="users:logout",S.UsersQuotasList="users.quotas:read",S.UsersQuotasUpdate="users.quotas:write",S.ServiceAccountsRead="serviceaccounts:read",S.ServiceAccountsCreate="serviceaccounts:create",S.ServiceAccountsWrite="serviceaccounts:write",S.ServiceAccountsDelete="serviceaccounts:delete",S.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",S.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",S.OrgsRead="orgs:read",S.OrgsPreferencesRead="orgs.preferences:read",S.OrgsWrite="orgs:write",S.OrgsPreferencesWrite="orgs.preferences:write",S.OrgsCreate="orgs:create",S.OrgsDelete="orgs:delete",S.OrgUsersRead="org.users:read",S.OrgUsersAdd="org.users:add",S.OrgUsersRemove="org.users:remove",S.OrgUsersWrite="org.users:write",S.LDAPUsersRead="ldap.user:read",S.LDAPUsersSync="ldap.user:sync",S.LDAPStatusRead="ldap.status:read",S.DataSourcesExplore="datasources:explore",S.DataSourcesRead="datasources:read",S.DataSourcesCreate="datasources:create",S.DataSourcesWrite="datasources:write",S.DataSourcesDelete="datasources:delete",S.DataSourcesPermissionsRead="datasources.permissions:read",S.DataSourcesCachingRead="datasources.caching:read",S.DataSourcesInsightsRead="datasources.insights:read",S.ActionServerStatsRead="server.stats:read",S.ActionTeamsCreate="teams:create",S.ActionTeamsDelete="teams:delete",S.ActionTeamsRead="teams:read",S.ActionTeamsWrite="teams:write",S.ActionTeamsPermissionsRead="teams.permissions:read",S.ActionTeamsPermissionsWrite="teams.permissions:write",S.ActionRolesList="roles:read",S.ActionTeamsRolesList="teams.roles:read",S.ActionTeamsRolesAdd="teams.roles:add",S.ActionTeamsRolesRemove="teams.roles:remove",S.ActionUserRolesList="users.roles:read",S.ActionUserRolesAdd="users.roles:add",S.ActionUserRolesRemove="users.roles:remove",S.DashboardsRead="dashboards:read",S.DashboardsWrite="dashboards:write",S.DashboardsDelete="dashboards:delete",S.DashboardsCreate="dashboards:create",S.DashboardsPermissionsRead="dashboards.permissions:read",S.DashboardsPermissionsWrite="dashboards.permissions:write",S.DashboardsPublicWrite="dashboards.public:write",S.FoldersRead="folders:read",S.FoldersWrite="folders:write",S.FoldersDelete="folders:delete",S.FoldersCreate="folders:create",S.FoldersPermissionsRead="folders.permissions:read",S.FoldersPermissionsWrite="folders.permissions:write",S.ActionSupportBundlesCreate="support.bundles:create",S.ActionSupportBundlesRead="support.bundles:read",S.ActionSupportBundlesDelete="support.bundles:delete",S.AlertingRuleCreate="alert.rules:create",S.AlertingRuleRead="alert.rules:read",S.AlertingRuleUpdate="alert.rules:write",S.AlertingRuleDelete="alert.rules:delete",S.AlertingInstanceCreate="alert.instances:create",S.AlertingInstanceUpdate="alert.instances:write",S.AlertingInstanceRead="alert.instances:read",S.AlertingNotificationsRead="alert.notifications:read",S.AlertingNotificationsWrite="alert.notifications:write",S.AlertingRuleExternalWrite="alert.rules.external:write",S.AlertingRuleExternalRead="alert.rules.external:read",S.AlertingInstancesExternalWrite="alert.instances.external:write",S.AlertingInstancesExternalRead="alert.instances.external:read",S.AlertingNotificationsExternalWrite="alert.notifications.external:write",S.AlertingNotificationsExternalRead="alert.notifications.external:read",S.AlertingProvisioningReadSecrets="alert.provisioning.secrets:read",S.AlertingProvisioningRead="alert.provisioning:read",S.AlertingProvisioningWrite="alert.provisioning:write",S.ActionAPIKeysRead="apikeys:read",S.ActionAPIKeysCreate="apikeys:create",S.ActionAPIKeysDelete="apikeys:delete",S.PluginsInstall="plugins:install",S.PluginsWrite="plugins:write",S.SettingsRead="settings:read",S.SettingsWrite="settings:write",S))(P||{}),x=e(73431)},89103:()=>{"use strict"},11239:()=>{"use strict"},67190:()=>{"use strict"},61985:()=>{"use strict"},91779:()=>{"use strict"},28804:(J,R,e)=>{"use strict";e.d(R,{I0:()=>l,NH:()=>g,hg:()=>o,v9:()=>r});var n=e(77960),a=e(89772);const l=a.useDispatch,r=a.useSelector,o=(m,d,u)=>(0,n.hg)(m,d,u),g=n.NH},43419:(J,R,e)=>{"use strict";e.d(R,{y:()=>n});var n=(a=>(a.LineChart="Line chart",a.LineChartSmooth="Line chart smooth",a.LineChartGradientColorScheme="Line chart with gradient color scheme",a.AreaChart="Area chart",a.AreaChartStacked="Area chart stacked",a.AreaChartStackedPercent="Area chart 100% stacked",a.BarChart="Bar chart",a.BarChartGradientColorScheme="Bar chart with gradient color scheme",a.BarChartStacked="Bar chart stacked",a.BarChartStackedPercent="Bar chart 100% stacked",a.BarChartHorizontal="Bar chart horizontal",a.BarChartHorizontalStacked="Bar chart horizontal stacked",a.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",a.Candlestick="Candlestick",a.PieChart="Pie chart",a.PieChartDonut="Pie chart donut",a.Stat="Stat",a.StatColoredBackground="Stat colored background",a.Gauge="Gauge",a.GaugeNoThresholds="Gauge no thresholds",a.BarGaugeBasic="Bar gauge basic",a.BarGaugeLCD="Bar gauge LCD",a.Table="Table",a.StateTimeline="State timeline",a.StatusHistory="Status history",a.TextPanel="Text",a.DashboardList="Dashboard list",a.Logs="Logs",a.FlameGraph="Flame graph",a))(n||{})},17330:(J,R,e)=>{"use strict";e.d(R,{ED:()=>g,I9:()=>l,T8:()=>d,Yb:()=>r,bj:()=>a,g0:()=>u,pz:()=>m,x_:()=>n});var n=(i=>(i.Firing="firing",i.Inactive="inactive",i.Pending="pending",i))(n||{}),a=(i=>(i.Normal="Normal",i.Alerting="Alerting",i.Pending="Pending",i.NoData="NoData",i.Error="Error",i))(a||{});function l(i){return Object.values(n).includes(i)}function r(i){return Object.values(a).some(f=>f===i)}function o(i){return i!==null&&typeof i<"u"&&!Object.values(n).includes(i)}function g(i){return o(i)?i.split(" ")[0]:i}var m=(i=>(i.Alerting="alerting",i.Recording="recording",i))(m||{}),d=(i=>(i.Cortex="Cortex",i.Mimir="Mimir",i.Prometheus="Prometheus",i.Thanos="Thanos",i))(d||{}),u=(i=>(i.Alerting="Alerting",i.NoData="NoData",i.KeepLastState="KeepLastState",i.OK="OK",i.Error="Error",i))(u||{})},70751:(J,R,e)=>{"use strict";e.d(R,{P:()=>r,j:()=>a});var n=e(17330);function a(o,g){return(0,n.ED)(o.state)===g}var l=(o=>(o.Firing="firing",o))(l||{}),r=(o=>(o.Alerting="alerting",o.Pending="pending",o.Normal="inactive",o.NoData="nodata",o.Error="error",o))(r||{})},69471:()=>{"use strict"},23932:J=>{const R="    ";function e(r){let o="";return r&&Object.keys(r).forEach(function(g){o+=g+":"+r[g]+";"}),o}function n(r){function o(m){return'class="'+m+'"'}function g(m){return'style="'+e(r["."+m])+'"'}return r?g:o}function a(r){return r===null?"null":Array.isArray(r)?"array":typeof r=="string"&&/^https?:/.test(r)?"link":typeof r=="object"&&typeof r.toISOString=="function"?"date":typeof r}function l(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}J.exports=function(r,o){let g="";const m=n(o);let d=function(i,f,c,E){if(!i.length)return f+" "+c;let p=f+`
`;return g+=R,i.forEach(function(h,y){p+=g+E(h)+(y<i.length-1?",":"")+`
`}),g=g.slice(0,-R.length),p+g+c};function u(i){if(i===void 0)return"";switch(a(i)){case"boolean":return"<span "+m("json-markup-bool")+">"+i+"</span>";case"number":return"<span "+m("json-markup-number")+">"+i+"</span>";case"date":return'<span class="json-markup-string">"'+l(i.toISOString())+'"</span>';case"null":return"<span "+m("json-markup-null")+">null</span>";case"string":return"<span "+m("json-markup-string")+'>"'+l(i.replace(/\n/g,`
`+g))+'"</span>';case"link":return"<span "+m("json-markup-string")+'>"<a href="'+encodeURI(i)+'">'+l(i)+'</a>"</span>';case"array":return d(i,"[","]",u);case"object":const f=Object.keys(i).filter(function(c){return i[c]!==void 0});return d(f,"{","}",function(c){return"<span "+m("json-markup-key")+'>"'+l(c)+'":</span> '+u(i[c])})}return""}return"<div "+m("json-markup")+">"+u(r)+"</div>"}},26189:()=>{(function(J){var R={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(n){var a={x:-1,y:-1,locked:!1};n.setCrosshair=function(g){if(!g)a.x=-1;else{var m=n.p2c(g);a.x=Math.max(0,Math.min(m.left,n.width())),a.y=Math.max(0,Math.min(m.top,n.height()))}n.triggerRedrawOverlay()},n.clearCrosshair=n.setCrosshair,n.lockCrosshair=function(g){g&&n.setCrosshair(g),a.locked=!0},n.unlockCrosshair=function(){a.locked=!1};function l(o){a.locked||a.x!=-1&&(a.x=-1,n.triggerRedrawOverlay())}function r(o){if(!a.locked){if(n.getSelection&&n.getSelection()){a.x=-1;return}var g=n.offset();a.x=Math.max(0,Math.min(o.pageX-g.left,n.width())),a.y=Math.max(0,Math.min(o.pageY-g.top,n.height())),n.triggerRedrawOverlay()}}n.hooks.bindEvents.push(function(o,g){o.getOptions().crosshair.mode&&(g.mouseout(l),g.mousemove(r))}),n.hooks.drawOverlay.push(function(o,g){var m=o.getOptions().crosshair;if(m.mode){var d=o.getPlotOffset();if(g.save(),g.translate(d.left,d.top),a.x!=-1){var u=o.getOptions().crosshair.lineWidth%2?.5:0;if(g.strokeStyle=m.color,g.lineWidth=m.lineWidth,g.lineJoin="round",g.beginPath(),m.mode.indexOf("x")!=-1){var i=Math.floor(a.x)+u;g.moveTo(i,0),g.lineTo(i,o.height())}if(m.mode.indexOf("y")!=-1){var f=Math.floor(a.y)+u;g.moveTo(0,f),g.lineTo(o.width(),f)}g.stroke()}g.restore()}}),n.hooks.shutdown.push(function(o,g){g.unbind("mouseout",l),g.unbind("mousemove",r)})}J.plot.plugins.push({init:e,options:R,name:"crosshair",version:"1.0"})})(jQuery)},47825:()=>{(function(J){function R(e){e.hooks.processDatapoints.push(function(n,a,l){a.dashes.show&&n.hooks.draw.push(function(r,o){var g=r.getPlotOffset(),m=a.xaxis,d=a.yaxis;function u(E,p){var h=l.points,y=l.pointsize,s=null,v=null,C=0,D=!0,M,P;a.dashes.dashLength[0]?(M=a.dashes.dashLength[0],a.dashes.dashLength[1]?P=a.dashes.dashLength[1]:P=M):P=M=a.dashes.dashLength,o.beginPath();for(var x=y;x<h.length;x+=y){let K=function(z){var G=Math.sqrt(Math.pow(b-A,2)+Math.pow(W-B,2));if(G<=z)return{deltaX:b-A,deltaY:W-B,distance:G,remainder:z-G};var Q=b>A?1:-1,j=W>B?1:-1;return{deltaX:Q*Math.sqrt(Math.pow(z,2)/(1+Math.pow((W-B)/(b-A),2))),deltaY:j*Math.sqrt(Math.pow(z,2)-Math.pow(z,2)/(1+Math.pow((W-B)/(b-A),2))),distance:z,remainder:0}};var w=K,S=h[x-y],I=h[x-y+1],T=h[x],O=h[x+1];if(!(S==null||T==null)){if(I<=O&&I<d.min){if(O<d.min)continue;S=(d.min-I)/(O-I)*(T-S)+S,I=d.min}else if(O<=I&&O<d.min){if(I<d.min)continue;T=(d.min-I)/(O-I)*(T-S)+S,O=d.min}if(I>=O&&I>d.max){if(O>d.max)continue;S=(d.max-I)/(O-I)*(T-S)+S,I=d.max}else if(O>=I&&O>d.max){if(I>d.max)continue;T=(d.max-I)/(O-I)*(T-S)+S,O=d.max}if(S<=T&&S<m.min){if(T<m.min)continue;I=(m.min-S)/(T-S)*(O-I)+I,S=m.min}else if(T<=S&&T<m.min){if(S<m.min)continue;O=(m.min-S)/(T-S)*(O-I)+I,T=m.min}if(S>=T&&S>m.max){if(T>m.max)continue;I=(m.max-S)/(T-S)*(O-I)+I,S=m.max}else if(T>=S&&T>m.max){if(S>m.max)continue;O=(m.max-S)/(T-S)*(O-I)+I,T=m.max}(S!=s||I!=v)&&o.moveTo(m.p2c(S)+E,d.p2c(I)+p);var A=m.p2c(S)+E,B=d.p2c(I)+p,b=m.p2c(T)+E,W=d.p2c(O)+p,V;do V=K(C>0?C:D?M:P),(V.deltaX!=0||V.deltaY!=0)&&(D?o.lineTo(A+V.deltaX,B+V.deltaY):o.moveTo(A+V.deltaX,B+V.deltaY)),D=!D,C=V.remainder,A+=V.deltaX,B+=V.deltaY;while(V.distance>0);s=T,v=O}}o.stroke()}o.save(),o.translate(g.left,g.top),o.lineJoin="round";var i=a.dashes.lineWidth,f=a.shadowSize;if(i>0&&f>0){o.lineWidth=f,o.strokeStyle="rgba(0,0,0,0.1)";var c=Math.PI/18;u(Math.sin(c)*(i/2+f/2),Math.cos(c)*(i/2+f/2)),o.lineWidth=f/2,u(Math.sin(c)*(i/2+f/4),Math.cos(c)*(i/2+f/4))}o.lineWidth=i,o.strokeStyle=a.color,i>0&&u(0,0),o.restore()})})}J.plot.plugins.push({init:R,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},28844:()=>{(function(J){"use strict";var R={series:{fillBelowTo:null}};function e(n){function a(o,g){var m;for(m=0;m<g.length;++m)if(g[m].id===o.fillBelowTo)return g[m];return null}function l(o,g,m,d,u,i,f,c){var E,p,h,y,s,v;return E=m-o,p=d-g,h=f-u,y=c-i,s=(-p*(o-u)+E*(g-i))/(-h*p+E*y),v=(h*(g-i)-y*(o-u))/(-h*p+E*y),s>=0&&s<=1&&v>=0&&v<=1?[o+v*E,g+v*p]:null}function r(o,g,m){if(m.fillBelowTo===null)return;var d,u,i,f,c,E,p;function h(P,x){g.beginPath(),g.moveTo(m.xaxis.p2c(P)+E.left,m.yaxis.p2c(x)+E.top)}function y(){g.closePath(),g.fill()}function s(){if(i.length/u!==c.length/f)return console.error("Refusing to graph inconsistent number of points"),!1;var P;for(P=0;P<i.length/u;P++)if(i[P*u]!==null&&c[P*f]!==null&&i[P*u]!==c[P*f])return console.error("Refusing to graph points without matching value"),!1;return!0}function v(P,x){console.assert(x>P,"expects the end index to be greater than the start index");var S=P===0||i[P-1]===null||c[P-1]===null,I=!1,T,O;for(T=P;T<x;T++)if(i[T*u+1]===null||c[T*u+1]===null)I=!1,S=!0;else if(i[T*u+1]===c[T*f+1])I=!0,S=!1;else if(i[T*u+1]>c[T*f+1]){S?h(i[T*u],i[T*u+1]):I?h(i[(T-1)*u],i[(T-1)*u+1]):(O=C(T),h(O[0],O[1])),M(T,x);return}else S=!1,I=!1}function C(P){console.assert(P>0,"expects the second point in the series line segment");var x,S;for(x=1;x<c.length/f;x++)if(S=l(i[(P-1)*u],i[(P-1)*u+1],i[P*u],i[P*u+1],c[(x-1)*f],c[(x-1)*f+1],c[x*f],c[x*f+1]),S!==null)return S;console.error("intersectionPoint() should only be called when an intersection happens")}function D(P,x){console.assert(P>=x,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var S;for(S=P;S>=x;S--)g.lineTo(d.xaxis.p2c(c[S*f])+E.left,d.yaxis.p2c(c[S*f+1])+E.top);y()}function M(P,x){console.assert(P<=x,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var S,I;for(S=P;S<x;S++)if(i[S*u+1]===null&&S>P){D(S-1,P),v(S,x);return}else if(i[S*u+1]===c[S*f+1]){D(S,P),v(S,x);return}else if(i[S*u+1]<c[S*f+1]){I=C(S),g.lineTo(m.xaxis.p2c(I[0])+E.left,m.yaxis.p2c(I[1])+E.top),D(S,P),v(S,x);return}else g.lineTo(m.xaxis.p2c(i[S*u])+E.left,m.yaxis.p2c(i[S*u+1])+E.top);D(x,P)}d=a(m,o.getData()),d&&(u=m.datapoints.pointsize,i=m.datapoints.points,f=d.datapoints.pointsize,c=d.datapoints.points,E=o.getPlotOffset(),s()&&(p=J.color.parse(m.color),p.a=.4,p.normalize(),g.fillStyle=p.toString(),v(0,i.length/u)))}n.hooks.drawSeries.push(r)}J.plot.plugins.push({init:e,options:R,name:"fillbelow",version:"0.1.0"})})(jQuery)},7540:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(J){var R=function(){var m,d,u,i,f,c,E=function(P,x){m=x,d=P.getPlaceholder(),u=P.getOptions(),i=u.series.gauges,f=P.getData(),c=e(i.debug)};E.prototype.calculateLayout=function(){var P=d.width(),x=d.height(),S=Math.min(f.length,i.layout.columns),I=Math.ceil(f.length/S),T=i.layout.margin,O=i.layout.hMargin,A=i.layout.vMargin,B=(P-T*2-O*(S-1))/S,b=(x-T*2-A*(I-1))/I;if(i.layout.square){var W=Math.min(B,b);B=W,b=W}p(i,B);var V=i.cell.margin,w=0,K=0;i.label.show&&(w=i.label.margin,K=i.label.font.size);var z=0,G=0;i.value.show&&(z=i.value.margin,G=i.value.font.size);var Q=0;i.threshold.show&&(Q=i.threshold.width);var j=0,F=0;i.threshold.label.show&&(j=i.threshold.label.margin,F=i.threshold.label.font.size);for(var k=B/2-V-Q-j*2-F,_=i.gauge.startAngle,Y=i.gauge.endAngle,Z=(Y-_)/100,ae=-1,ce=_;ce<Y;ce+=Z)ae=Math.max(ae,Math.sin(l(ce)));ae=Math.max(ae,Math.sin(l(Y)));var q=(b-V*2-w*2-K)/(1+ae);q*ae<z+G/2&&(q=b-V*2-w*2-K-z-G/2);var De=q-j*2-F-Q,oe=Math.min(k,De),te=i.gauge.width;te>=oe&&(te=Math.max(3,oe/3));var fe=j*2+F+Q+oe,Te=Math.max(fe*(1+ae),fe+z+G/2);return{canvasWidth:P,canvasHeight:x,margin:T,hMargin:O,vMargin:A,columns:S,rows:I,cellWidth:B,cellHeight:b,cellMargin:V,labelMargin:w,labelFontSize:K,valueMargin:z,valueFontSize:G,width:te,radius:oe,thresholdWidth:Q,thresholdLabelMargin:j,thresholdLabelFontSize:F,gaugeOuterHeight:Te}};function p(P,x){P.gauge.width==="auto"&&(P.gauge.width=Math.max(5,x/8)),P.label.margin==="auto"&&(P.label.margin=Math.max(1,x/20)),P.label.font.size==="auto"&&(P.label.font.size=Math.max(5,x/8)),P.value.margin==="auto"&&(P.value.margin=Math.max(1,x/30)),P.value.font.size==="auto"&&(P.value.font.size=Math.max(5,x/9)),P.threshold.width==="auto"&&(P.threshold.width=Math.max(3,x/100)),P.threshold.label.margin==="auto"&&(P.threshold.label.margin=Math.max(3,x/40)),P.threshold.label.font.size==="auto"&&(P.threshold.label.font.size=Math.max(5,x/15))}E.prototype.calculateAutoValues=p,E.prototype.calculateCellLayout=function(P,x,S){var I=n(x.columns,S),T=a(x.columns,S),O=x.margin+(x.cellWidth+x.hMargin)*I,A=x.margin+(x.cellHeight+x.vMargin)*T,B=O+x.cellWidth/2,b=A+x.cellMargin+x.labelMargin*2+x.labelFontSize+x.thresholdWidth+x.thresholdLabelFontSize+x.thresholdLabelMargin*2+x.radius,W=x.cellHeight-x.cellMargin*2-x.labelMargin*2-x.labelFontSize-x.gaugeOuterHeight,V=0;return P.cell.vAlign==="middle"?V=W/2:P.cell.vAlign==="bottom"&&(V=W),b+=V,{col:I,row:T,x:O,y:A,offsetY:V,cellWidth:x.cellWidth,cellHeight:x.cellHeight,cellMargin:x.cellMargin,cx:B,cy:b}},E.prototype.drawBackground=function(P){i.frame.show&&(m.save(),m.strokeStyle=u.grid.borderColor,m.lineWidth=u.grid.borderWidth,m.strokeRect(0,0,P.canvasWidth,P.canvasHeight),u.grid.backgroundColor&&(m.fillStyle=u.grid.backgroundColor,m.fillRect(0,0,P.canvasWidth,P.canvasHeight)),m.restore())},E.prototype.drawCellBackground=function(P,x){m.save(),P.cell.border&&P.cell.border.show&&P.cell.border.color&&P.cell.border.width&&(m.strokeStyle=P.cell.border.color,m.lineWidth=P.cell.border.width,m.strokeRect(x.x,x.y,x.cellWidth,x.cellHeight)),P.cell.background&&P.cell.background.color&&(m.fillStyle=P.cell.background.color,m.fillRect(x.x,x.y,x.cellWidth,x.cellHeight)),m.restore()},E.prototype.drawGauge=function(P,x,S,I,T){var O=P.gauge.shadow.show?P.gauge.shadow.blur:0,A=s(P,T),B=h(P,x,T);C(S.cx,S.cy,x.radius,x.width,l(P.gauge.startAngle),l(P.gauge.endAngle),P.gauge.border.color,P.gauge.border.width,P.gauge.background.color,O),C(S.cx,S.cy,x.radius-1,x.width-2,l(B.a1),l(B.a2),A,1,A,O),P.gauge.neutralValue!=null&&y(P,x,S,A)};function h(P,x,S){let I={};var T=P.gauge.neutralValue;return T!=null?S<T?(I.a1=v(P,x,S),I.a2=v(P,x,T)):(I.a1=v(P,x,T),I.a2=v(P,x,S)):(I.a1=P.gauge.startAngle,I.a2=v(P,x,S)),I}function y(P,x,S,I){var T=(P.gauge.max-P.gauge.min)/600;r(m,S.cx,S.cy,x.radius-2,x.width-4,l(v(P,x,P.gauge.neutralValue-T)),l(v(P,x,P.gauge.neutralValue+T)),I,2,P.gauge.background.color)}function s(P,x){for(var S,I=0;I<P.threshold.values.length;I++){var T=P.threshold.values[I];if(S=T.color,x<T.value)break}return S}function v(P,x,S){var I=P.gauge.startAngle+(P.gauge.endAngle-P.gauge.startAngle)*((S-P.gauge.min)/(P.gauge.max-P.gauge.min));return I<P.gauge.startAngle?I=P.gauge.startAngle:I>P.gauge.endAngle&&(I=P.gauge.endAngle),I}E.prototype.drawThreshold=function(P,x,S){for(var I=P.gauge.startAngle,T=0;T<P.threshold.values.length;T++){var O=P.threshold.values[T];c1=O.color,a2=v(P,x,O.value),r(m,S.cx,S.cy,x.radius+x.thresholdWidth,x.thresholdWidth-2,l(I),l(a2),c1,1,c1),I=a2}};function C(P,x,S,I,T,O,A,B,b,W){T!==O&&(m.save(),r(m,P,x,S,I,T,O,A,B,b),W&&(r(m,P,x,S,I,T,O),m.clip(),m.shadowOffsetX=0,m.shadowOffsetY=0,m.shadowBlur=10,m.shadowColor="gray",r(m,P,x,S+1,I+2,T,O,A,1)),m.restore())}E.prototype.drawLable=function(P,x,S,I,T){M(S.cx,S.y+S.cellMargin+x.labelMargin+S.offsetY,"flotGaugeLabel"+I,P.label.formatter?P.label.formatter(T.label,T.data[0][1]):text,P.label)},E.prototype.drawValue=function(P,x,S,I,T){M(S.cx,S.cy-P.value.font.size/2,"flotGaugeValue"+I,P.value.formatter?P.value.formatter(T.label,T.data[0][1]):text,P.value)},E.prototype.drawThresholdValues=function(P,x,S,I){D(P,x,S,"Min"+I,P.gauge.min,P.gauge.startAngle),D(P,x,S,"Max"+I,P.gauge.max,P.gauge.endAngle);for(var T=0;T<P.threshold.values.length;T++){var O=P.threshold.values[T];if(O.value>P.gauge.min&&O.value<P.gauge.max){var A=v(P,x,O.value);D(P,x,S,I+"_"+T,O.value,A)}}var B=P.gauge.neutralValue;B!=null&&B>P.gauge.min&&B<P.gauge.max&&D(P,x,S,"Neutral"+I,B,v(P,x,B))};function D(P,x,S,I,T,O){M(S.cx+(x.thresholdLabelMargin+x.thresholdLabelFontSize/2+x.radius)*Math.cos(l(O)),S.cy+(x.thresholdLabelMargin+x.thresholdLabelFontSize/2+x.radius)*Math.sin(l(O)),"flotGaugeThresholdValue"+I,P.threshold.label.formatter?P.threshold.label.formatter(T):T,P.threshold.label,O)}function M(P,x,S,I,T,O){var A=J(d).find("#"+S),B=A.length;B||(A=J("<span></span>"),A.attr("id",S),A.attr("class","flot-temp-elem"),d.append(A)),A.css("position","absolute"),A.css("top",x+"px"),A.css("white-space","nowrap"),T.font.size&&A.css("font-size",T.font.size+"px"),T.font.family&&A.css("font-family",T.font.family),T.color&&A.css("color",T.color),T.background.color&&A.css("background-color",T.background.color),T.background.opacity&&A.css("opacity",T.background.opacity),A.text(I),A.css("left",P+"px"),A.css("left",parseInt(A.css("left"))-A.width()/2+"px"),!B&&O&&(A.css("top",parseInt(A.css("top"))-A.height()/2+"px"),A.css("transform","rotate("+(180*O+90)+"deg)"))}return E}();function e(m){return typeof Logger<"u"?new Logger(m):null}function n(m,d){return d%m}function a(m,d){return Math.floor(d/m)}function l(m){return m*Math.PI}function r(m,d,u,i,f,c,E,p,h,y){if(c!==E){var s=!1;m.save(),m.beginPath(),m.arc(d,u,i,c,E,s),m.lineTo(d+(i-f)*Math.cos(E),u+(i-f)*Math.sin(E)),m.arc(d,u,i-f,E,c,!s),m.closePath(),h&&(m.lineWidth=h),p&&(m.strokeStyle=p,m.stroke()),y&&(m.fillStyle=y,m.fill()),m.restore()}}function o(m){m.hooks.processOptions.push(function(d,u){var i=e(u.series.gauges.debug);u.series.gauges.show&&(u.grid.show=!1,u.legend.show=!1);var f=u.series.gauges.threshold.values;f.sort(function(c,E){return c.value<E.value?-1:c.value>E.value?1:0})}),m.hooks.draw.push(function(d,u){var i=d.getOptions(),f=i.series.gauges,c=e(f.debug);if(f.show){var E=d.getData();if(!(!E||!E.length)){var p=new R(d,u),h=p.calculateLayout();f.debug.layout,p.drawBackground(h);for(var y=0;y<E.length;y++){var s=E[y],v=J.extend({},f,s.gauges);s.gauges&&p.calculateAutoValues(v,h.cellWidth);var C=p.calculateCellLayout(v,h,y);p.drawCellBackground(v,C),v.debug.layout,v.label.show&&p.drawLable(v,h,C,y,s),p.drawGauge(v,h,C,s.label,s.data[0][1]),v.threshold.show&&p.drawThreshold(v,h,C),v.threshold.label.show&&p.drawThresholdValues(v,h,C,y),v.value.show&&p.drawValue(v,h,C,y,s)}}}})}var g={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(m,d){return m}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(m,d){return parseInt(d)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(m){return m}},values:[]}}}};J.plot.plugins.push({init:o,options:g,name:"gauge",version:"1.1.0"})})(jQuery)},89377:()=>{(function(J){J.color={},J.color.make=function(e,n,a,l){var r={};return r.r=e||0,r.g=n||0,r.b=a||0,r.a=l??1,r.add=function(o,g){for(var m=0;m<o.length;++m)r[o.charAt(m)]+=g;return r.normalize()},r.scale=function(o,g){for(var m=0;m<o.length;++m)r[o.charAt(m)]*=g;return r.normalize()},r.toString=function(){return r.a>=1?"rgb("+[r.r,r.g,r.b].join(",")+")":"rgba("+[r.r,r.g,r.b,r.a].join(",")+")"},r.normalize=function(){function o(g,m,d){return m<g?g:m>d?d:m}return r.r=o(0,parseInt(r.r),255),r.g=o(0,parseInt(r.g),255),r.b=o(0,parseInt(r.b),255),r.a=o(0,r.a,1),r},r.clone=function(){return J.color.make(r.r,r.b,r.g,r.a)},r.normalize()},J.color.extract=function(e,n){var a;do{if(a=e.css(n).toLowerCase(),a!=""&&a!="transparent")break;e=e.parent()}while(e.length&&!J.nodeName(e.get(0),"body"));return a=="rgba(0, 0, 0, 0)"&&(a="transparent"),J.color.parse(a)},J.color.parse=function(e){var n,a=J.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return a(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return a(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return a(parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55);if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return a(parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55,parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return a(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return a(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var l=J.trim(e).toLowerCase();return l=="transparent"?a(255,255,255,0):(n=R[l]||[0,0,0],a(n[0],n[1],n[2]))};var R={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(J){var R=Object.prototype.hasOwnProperty;J.fn.detach||(J.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(l,r){var o=r.children("."+l)[0];if(o==null&&(o=document.createElement("canvas"),o.className=l,J(o).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(r),!o.getContext))if(window.G_vmlCanvasManager)o=window.G_vmlCanvasManager.initElement(o);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=o;var g=this.context=o.getContext("2d"),m=window.devicePixelRatio||1,d=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;this.pixelRatio=m/d,this.resize(r.width(),r.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(l,r){if(l<=0||r<=0)throw new Error("Invalid dimensions for plot, width = "+l+", height = "+r);var o=this.element,g=this.context,m=this.pixelRatio;this.width!=l&&(o.width=l*m,o.style.width=l+"px",this.width=l),this.height!=r&&(o.height=r*m,o.style.height=r+"px",this.height=r),g.restore(),g.save(),g.scale(m,m)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var l=this._textCache;for(var r in l)if(R.call(l,r)){var o=this.getTextLayer(r),g=l[r];o.hide();for(var m in g)if(R.call(g,m)){var d=g[m];for(var u in d)if(R.call(d,u)){for(var i=d[u].positions,f=0,c;c=i[f];f++)c.active?c.rendered||(o.append(c.element),c.rendered=!0):(i.splice(f--,1),c.rendered&&c.element.detach());i.length==0&&delete d[u]}}o.show()}},e.prototype.getTextLayer=function(l){var r=this.text[l];return r==null&&(this.textContainer==null&&(this.textContainer=J("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),r=this.text[l]=J("<div></div>").addClass(l).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),r},e.prototype.getTextInfo=function(l,r,o,g,m){var d,u,i,f;if(r=""+r,typeof o=="object"?d=o.style+" "+o.variant+" "+o.weight+" "+o.size+"px/"+o.lineHeight+"px "+o.family:d=o,u=this._textCache[l],u==null&&(u=this._textCache[l]={}),i=u[d],i==null&&(i=u[d]={}),f=i[r],f==null){var c=J("<div></div>").html(r).css({position:"absolute","max-width":m,top:-9999}).appendTo(this.getTextLayer(l));typeof o=="object"?c.css({font:d,color:o.color}):typeof o=="string"&&c.addClass(o),f=i[r]={element:c,positions:[]};var E=this._textSizeCache[r];E?(f.width=E.width,f.height=E.height):(f.width=c.outerWidth(!0),f.height=c.outerHeight(!0),this._textSizeCache[r]={width:f.width,height:f.height}),c.detach()}return f},e.prototype.addText=function(l,r,o,g,m,d,u,i,f){var c=this.getTextInfo(l,g,m,d,u),E=c.positions;i=="center"?r-=c.width/2:i=="right"&&(r-=c.width),f=="middle"?o-=c.height/2:f=="bottom"&&(o-=c.height);for(var p=0,h;h=E[p];p++)if(h.x==r&&h.y==o){h.active=!0;return}h={active:!0,rendered:!1,element:E.length?c.element.clone():c.element,x:r,y:o},E.push(h),h.element.css({top:Math.round(o),left:Math.round(r),"text-align":i})},e.prototype.removeText=function(l,r,o,g,m,d){if(g==null){var u=this._textCache[l];if(u!=null){for(var i in u)if(R.call(u,i)){var f=u[i];for(var c in f)if(R.call(f,c))for(var E=f[c].positions,p=0,h;h=E[p];p++)h.active=!1}}}else for(var E=this.getTextInfo(l,g,m,d).positions,p=0,h;h=E[p];p++)h.x==r&&h.y==o&&(h.active=!1)};function n(l,r,o,g){var m=[],d={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},u=null,i=null,f=null,c=null,E=null,p=[],h=[],y={left:0,right:0,top:0,bottom:0},s=0,v=0,C={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},D=this;D.setData=S,D.setupGrid=_,D.draw=De,D.getPlaceholder=function(){return l},D.getCanvas=function(){return u.element},D.getPlotOffset=function(){return y},D.width=function(){return s},D.height=function(){return v},D.offset=function(){var le=f.offset();return le.left+=y.left,le.top+=y.top,le},D.getData=function(){return m},D.getAxes=function(){var le={},de;return J.each(p.concat(h),function(X,se){se&&(le[se.direction+(se.n!=1?se.n:"")+"axis"]=se)}),le},D.getXAxes=function(){return p},D.getYAxes=function(){return h},D.c2p=A,D.p2c=B,D.getOptions=function(){return d},D.highlight=Ct,D.unhighlight=wt,D.triggerRedrawOverlay=ot,D.pointOffset=function(le){return{left:parseInt(p[T(le,"x")-1].p2c(+le.x)+y.left,10),top:parseInt(h[T(le,"y")-1].p2c(+le.y)+y.top,10)}},D.shutdown=z,D.destroy=function(){z(),l.removeData("plot").empty(),m=[],d=null,u=null,i=null,f=null,c=null,E=null,p=[],h=[],C=null,Ne=[],D=null},D.resize=function(){var le=l.width(),de=l.height();u.resize(le,de),i.resize(le,de)},D.hooks=C,P(D),x(o),w(),S(r),_(),De(),K();function M(le,de){de=[D].concat(de);for(var X=0;X<le.length;++X)le[X].apply(this,de)}function P(){for(var le={Canvas:e},de=0;de<g.length;++de){var X=g[de];X.init(D,le),X.options&&J.extend(!0,d,X.options)}}function x(le){J.extend(!0,d,le),le&&le.colors&&(d.colors=le.colors),d.xaxis.color==null&&(d.xaxis.color=J.color.parse(d.grid.color).scale("a",.22).toString()),d.yaxis.color==null&&(d.yaxis.color=J.color.parse(d.grid.color).scale("a",.22).toString()),d.xaxis.tickColor==null&&(d.xaxis.tickColor=d.grid.tickColor||d.xaxis.color),d.yaxis.tickColor==null&&(d.yaxis.tickColor=d.grid.tickColor||d.yaxis.color),d.grid.borderColor==null&&(d.grid.borderColor=d.grid.color),d.grid.tickColor==null&&(d.grid.tickColor=J.color.parse(d.grid.color).scale("a",.22).toString());var de,X,se,re=l.css("font-size"),pe=re?+re.replace("px",""):13,be={style:l.css("font-style"),size:Math.round(.8*pe),variant:l.css("font-variant"),weight:l.css("font-weight"),family:l.css("font-family")};for(se=d.xaxes.length||1,de=0;de<se;++de)X=d.xaxes[de],X&&!X.tickColor&&(X.tickColor=X.color),X=J.extend(!0,{},d.xaxis,X),d.xaxes[de]=X,X.font&&(X.font=J.extend({},be,X.font),X.font.color||(X.font.color=X.color),X.font.lineHeight||(X.font.lineHeight=Math.round(X.font.size*1.15)));for(se=d.yaxes.length||1,de=0;de<se;++de)X=d.yaxes[de],X&&!X.tickColor&&(X.tickColor=X.color),X=J.extend(!0,{},d.yaxis,X),d.yaxes[de]=X,X.font&&(X.font=J.extend({},be,X.font),X.font.color||(X.font.color=X.color),X.font.lineHeight||(X.font.lineHeight=Math.round(X.font.size*1.15)));for(d.xaxis.noTicks&&d.xaxis.ticks==null&&(d.xaxis.ticks=d.xaxis.noTicks),d.yaxis.noTicks&&d.yaxis.ticks==null&&(d.yaxis.ticks=d.yaxis.noTicks),d.x2axis&&(d.xaxes[1]=J.extend(!0,{},d.xaxis,d.x2axis),d.xaxes[1].position="top",d.x2axis.min==null&&(d.xaxes[1].min=null),d.x2axis.max==null&&(d.xaxes[1].max=null)),d.y2axis&&(d.yaxes[1]=J.extend(!0,{},d.yaxis,d.y2axis),d.yaxes[1].position="right",d.y2axis.min==null&&(d.yaxes[1].min=null),d.y2axis.max==null&&(d.yaxes[1].max=null)),d.grid.coloredAreas&&(d.grid.markings=d.grid.coloredAreas),d.grid.coloredAreasColor&&(d.grid.markingsColor=d.grid.coloredAreasColor),d.lines&&J.extend(!0,d.series.lines,d.lines),d.points&&J.extend(!0,d.series.points,d.points),d.bars&&J.extend(!0,d.series.bars,d.bars),d.shadowSize!=null&&(d.series.shadowSize=d.shadowSize),d.highlightColor!=null&&(d.series.highlightColor=d.highlightColor),de=0;de<d.xaxes.length;++de)b(p,de+1).options=d.xaxes[de];for(de=0;de<d.yaxes.length;++de)b(h,de+1).options=d.yaxes[de];for(var xe in C)d.hooks[xe]&&d.hooks[xe].length&&(C[xe]=C[xe].concat(d.hooks[xe]));M(C.processOptions,[d])}function S(le){m=I(le),W(),V()}function I(le){for(var de=[],X=0;X<le.length;++X){var se=J.extend(!0,{},d.series);le[X].data!=null?(se.data=le[X].data,delete le[X].data,J.extend(!0,se,le[X]),le[X].data=se.data):se.data=le[X],de.push(se)}return de}function T(le,de){var X=le[de+"axis"];return typeof X=="object"&&(X=X.n),typeof X!="number"&&(X=1),X}function O(){return J.grep(p.concat(h),function(le){return le})}function A(le){var de={},X,se;for(X=0;X<p.length;++X)se=p[X],se&&(de["x"+se.n]=se.c2p(le.left));for(X=0;X<h.length;++X)se=h[X],se&&(de["y"+se.n]=se.c2p(le.top));return de.x1!==void 0&&(de.x=de.x1),de.y1!==void 0&&(de.y=de.y1),de}function B(le){var de={},X,se,re;for(X=0;X<p.length;++X)if(se=p[X],se&&se.used&&(re="x"+se.n,le[re]==null&&se.n==1&&(re="x"),le[re]!=null)){de.left=se.p2c(le[re]);break}for(X=0;X<h.length;++X)if(se=h[X],se&&se.used&&(re="y"+se.n,le[re]==null&&se.n==1&&(re="y"),le[re]!=null)){de.top=se.p2c(le[re]);break}return de}function b(le,de){return le[de-1]||(le[de-1]={n:de,direction:le==p?"x":"y",options:J.extend(!0,{},le==p?d.xaxis:d.yaxis)}),le[de-1]}function W(){var le=m.length,de=-1,X;for(X=0;X<m.length;++X){var se=m[X].color;se!=null&&(le--,typeof se=="number"&&se>de&&(de=se))}le<=de&&(le=de+1);var re,pe=[],be=d.colors,xe=be.length,Pe=0;for(X=0;X<le;X++)re=J.color.parse(be[X%xe]||"#666"),X%xe==0&&X&&(Pe>=0?Pe<.5?Pe=-Pe-.2:Pe=0:Pe=-Pe),pe[X]=re.scale("rgb",1+Pe);var we=0,Fe;for(X=0;X<m.length;++X){if(Fe=m[X],Fe.color==null?(Fe.color=pe[we].toString(),++we):typeof Fe.color=="number"&&(Fe.color=pe[Fe.color].toString()),Fe.lines.show==null){var He,Xe=!0;for(He in Fe)if(Fe[He]&&Fe[He].show){Xe=!1;break}Xe&&(Fe.lines.show=!0)}Fe.lines.zero==null&&(Fe.lines.zero=!!Fe.lines.fill),Fe.xaxis=b(p,T(Fe,"x")),Fe.yaxis=b(h,T(Fe,"y"))}}function V(){var le=Number.POSITIVE_INFINITY,de=Number.NEGATIVE_INFINITY,X=Number.MAX_VALUE,se,re,pe,be,xe,Pe,we,Fe,He,Xe,dt,ct,At,Ie,Ze,ut;function rt(on,qt,pn){qt<on.datamin&&qt!=-X&&(on.datamin=qt),pn>on.datamax&&pn!=X&&(on.datamax=pn)}for(J.each(O(),function(on,qt){qt.datamin=le,qt.datamax=de,qt.used=!1}),se=0;se<m.length;++se)Pe=m[se],Pe.datapoints={points:[]},M(C.processRawData,[Pe,Pe.data,Pe.datapoints]);for(se=0;se<m.length;++se){if(Pe=m[se],Ze=Pe.data,ut=Pe.datapoints.format,!ut){if(ut=[],ut.push({x:!0,number:!0,required:!0}),ut.push({y:!0,number:!0,required:!0}),Pe.stack||Pe.bars.show||Pe.lines.show&&Pe.lines.fill){var St=!!(Pe.bars.show&&Pe.bars.zero||Pe.lines.show&&Pe.lines.zero);ut.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:St}),Pe.bars.horizontal&&(delete ut[ut.length-1].y,ut[ut.length-1].x=!0)}Pe.datapoints.format=ut}if(Pe.datapoints.pointsize==null){Pe.datapoints.pointsize=ut.length,Fe=Pe.datapoints.pointsize,we=Pe.datapoints.points;var st=Pe.lines.show&&Pe.lines.steps;for(Pe.xaxis.used=Pe.yaxis.used=!0,re=pe=0;re<Ze.length;++re,pe+=Fe){Ie=Ze[re];var tt=Ie==null;if(!tt)for(be=0;be<Fe;++be)ct=Ie[be],At=ut[be],At&&(At.number&&ct!=null&&(ct=+ct,isNaN(ct)?ct=null:ct==1/0?ct=X:ct==-1/0&&(ct=-X)),ct==null&&(At.required&&(tt=!0),At.defaultValue!=null&&(ct=At.defaultValue))),we[pe+be]=ct;if(tt)for(be=0;be<Fe;++be)ct=we[pe+be],ct!=null&&(At=ut[be],At.autoscale!==!1&&(At.x&&rt(Pe.xaxis,ct,ct),At.y&&rt(Pe.yaxis,ct,ct))),we[pe+be]=null;if(st&&pe>0&&(!tt||we[pe-Fe]!=null)){for(be=0;be<Fe;++be)we[pe+Fe+be]=we[pe+be];we[pe+1]=we[pe-Fe+1]||0,tt&&(we[pe]=Ie[0]),pe+=Fe}}}}for(se=0;se<m.length;++se){if(Pe=m[se],we=Pe.datapoints.points,Fe=Pe.datapoints.pointsize,Pe.transform==="negative-Y")for(re=0;re<we.length;re+=Fe)we[re]!=null&&(ct=we[re+1],we[re+1]=-ct);M(C.processDatapoints,[Pe,Pe.datapoints])}for(se=0;se<m.length;++se){Pe=m[se],we=Pe.datapoints.points,Fe=Pe.datapoints.pointsize,ut=Pe.datapoints.format;var ft=le,$t=le,Ht=de,Zt=de;for(re=0;re<we.length;re+=Fe)if(we[re]!=null)for(be=0;be<Fe;++be)ct=we[re+be],At=ut[be],!(!At||At.autoscale===!1||ct==X||ct==-X)&&(At.x&&(ct<ft&&(ft=ct),ct>Ht&&(Ht=ct)),At.y&&(ct<$t&&($t=ct),ct>Zt&&(Zt=ct)));if(Pe.bars.show){var tn;switch(Pe.bars.align){case"left":tn=0;break;case"right":tn=-Pe.bars.barWidth;break;default:tn=-Pe.bars.barWidth/2}Pe.bars.horizontal?($t+=tn,Zt+=tn+Pe.bars.barWidth):(ft+=tn,Ht+=tn+Pe.bars.barWidth)}rt(Pe.xaxis,ft,Ht),rt(Pe.yaxis,$t,Zt)}J.each(O(),function(on,qt){qt.datamin==le&&(qt.datamin=null),qt.datamax==de&&(qt.datamax=null)})}function w(){l.find(".flot-temp-elem").remove(),l.css("position")=="static"&&l.css("position","relative"),u=new e("flot-base",l),i=new e("flot-overlay",l),c=u.context,E=i.context,f=J(i.element).unbind();var le=l.data("plot");le&&(le.shutdown(),i.clear()),l.data("plot",D)}function K(){d.grid.hoverable&&(f.mousemove(et),f.bind("mouseleave",ze),J(document).bind("touchend",Qe)),d.grid.clickable&&f.click(je),M(C.bindEvents,[f])}function z(){_e&&clearTimeout(_e),f.unbind("mousemove",et),f.unbind("mouseleave",ze),f.unbind("click",je),J(document).unbind("touchend",Qe),M(C.shutdown,[f])}function G(le){function de(be){return be}var X,se,re=le.options.transform||de,pe=le.options.inverseTransform;le.direction=="x"?(X=le.scale=s/Math.abs(re(le.max)-re(le.min)),se=Math.min(re(le.max),re(le.min))):(X=le.scale=v/Math.abs(re(le.max)-re(le.min)),X=-X,se=Math.max(re(le.max),re(le.min))),re==de?le.p2c=function(be){return(be-se)*X}:le.p2c=function(be){return(re(be)-se)*X},pe?le.c2p=function(be){return pe(se+be/X)}:le.c2p=function(be){return se+be/X}}function Q(le){for(var de=le.options,X=le.ticks||[],se=de.labelWidth||0,re=de.labelHeight||0,pe=se||(le.direction=="x"?Math.floor(u.width/(X.length||1)):null),be=le.direction+"Axis "+le.direction+le.n+"Axis",xe="flot-"+le.direction+"-axis flot-"+le.direction+le.n+"-axis "+be,Pe=de.font||"flot-tick-label tickLabel",we=0;we<X.length;++we){var Fe=X[we];if(Fe.label){var He=u.getTextInfo(xe,Fe.label,Pe,null,pe);se=Math.max(se,He.width+1),re=Math.max(re,He.height)}}le.labelWidth=de.labelWidth||se,le.labelHeight=de.labelHeight||re}function j(le){var de=le.labelWidth,X=le.labelHeight,se=le.options.position,re=le.direction==="x",pe=le.options.tickLength,be=d.grid.axisMargin,xe=d.grid.labelMargin,Pe=d.grid.eventSectionHeight,we=!0,Fe=!0,He=!0,Xe=!1;J.each(re?p:h,function(dt,ct){ct&&(ct.show||ct.reserveSpace)&&(ct===le?Xe=!0:ct.options.position===se&&(Xe?Fe=!1:we=!1),Xe||(He=!1))}),Fe&&(be=0),pe==null&&(pe=He?"full":5),isNaN(+pe)||(xe+=+pe),re?(X+=xe,X+=Pe,se=="bottom"?(y.bottom+=X+be,le.box={top:u.height-y.bottom,height:X}):(le.box={top:y.top+be,height:X},y.top+=X+be)):(de+=xe,se=="left"?(le.box={left:y.left+be,width:de},y.left+=de+be):(y.right+=de+be,le.box={left:u.width-y.right,width:de})),le.position=se,le.tickLength=pe,le.box.padding=xe,le.box.eventSectionPadding=Pe,le.innermost=we}function F(le){le.direction=="x"?(le.box.left=y.left-le.labelWidth/2,le.box.width=u.width-y.left-y.right+le.labelWidth):(le.box.top=y.top-le.labelHeight/2,le.box.height=u.height-y.bottom-y.top+le.labelHeight)}function k(){var le=d.grid.minBorderMargin,de,X;if(le==null)for(le=0,X=0;X<m.length;++X)le=Math.max(le,2*(m[X].points.radius+m[X].points.lineWidth/2));var se={left:le,right:le,top:le,bottom:le};J.each(O(),function(re,pe){pe.reserveSpace&&pe.ticks&&pe.ticks.length&&(pe.direction==="x"?(se.left=Math.max(se.left,pe.labelWidth/2),se.right=Math.max(se.right,pe.labelWidth/2)):(se.bottom=Math.max(se.bottom,pe.labelHeight/2),se.top=Math.max(se.top,pe.labelHeight/2)))}),y.left=Math.ceil(Math.max(se.left,y.left)),y.right=Math.ceil(Math.max(se.right,y.right)),y.top=Math.ceil(Math.max(se.top,y.top)),y.bottom=Math.ceil(Math.max(se.bottom,y.bottom))}function _(){var le,de=O(),X=d.grid.show;for(var se in y){var re=d.grid.margin||0;y[se]=typeof re=="number"?re:re[se]||0}M(C.processOffset,[y]);for(var se in y)typeof d.grid.borderWidth=="object"?y[se]+=X?d.grid.borderWidth[se]:0:y[se]+=X?d.grid.borderWidth:0;if(J.each(de,function(xe,Pe){var we=Pe.options;Pe.show=we.show==null?Pe.used:we.show,Pe.reserveSpace=we.reserveSpace==null?Pe.show:we.reserveSpace,Y(Pe)}),M(C.processRange,[]),X){for(var pe=J.grep(de,function(xe){return xe.show||xe.reserveSpace}),be=!1,le=0;le<2&&(J.each(pe,function(Pe,we){ae(we),ce(we),be=q(we,we.ticks)||be,Q(we)}),be&&C.processRange.length>0);le++)M(C.processRange,[]),be=!1;for(le=pe.length-1;le>=0;--le)j(pe[le]);k(),J.each(pe,function(xe,Pe){F(Pe)})}s=u.width-y.left-y.right,v=u.height-y.bottom-y.top,J.each(de,function(xe,Pe){G(Pe)}),X&&Te(),at()}function Y(le){var de=le.options,X=+(de.min!=null?de.min:le.datamin),se=+(de.max!=null?de.max:le.datamax),re=se-X;if(re==0){var pe=.25,be=Math.abs(se==0?1:se*pe);de.min==null&&(X-=be),(de.max==null||de.min!=null)&&(se+=be)}else{var xe=de.autoscaleMargin;xe!=null&&(de.min==null&&(X-=re*xe,X<0&&le.datamin!=null&&le.datamin>=0&&(X=0)),de.max==null&&(se+=re*xe,se>0&&le.datamax!=null&&le.datamax<=0&&(se=0)))}le.min=X,le.max=se}function Z(le){if(le=Math.abs(String(le).replace(".","")),le==0)return 0;for(;le!=0&&le%10==0;)le/=10;return Math.floor(Math.log(le)/Math.LN10)+1}function ae(le){var de=le.options,X;typeof de.ticks=="number"&&de.ticks>0?X=de.ticks:X=.3*Math.sqrt(le.direction=="x"?u.width:u.height);var se=(le.max-le.min)/X,re=-Math.floor(Math.log(se)/Math.LN10),pe=de.tickDecimals;pe!=null&&re>pe&&(re=pe);var be=Math.pow(10,-re),xe=se/be,Pe;if(xe<1.5?Pe=1:xe<3?(Pe=2,xe>2.25&&(pe==null||re+1<=pe)&&(Pe=2.5,++re)):xe<7.5?Pe=5:Pe=10,Pe*=be,de.minTickSize!=null&&Pe<de.minTickSize&&(Pe=de.minTickSize),le.delta=se,le.tickDecimals=Math.max(0,pe??re),le.tickSize=de.tickSize||Pe,de.mode=="time"&&!le.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(le.tickGenerator||(le.tickGenerator=function(dt){var ct=[],At=a(dt.min,dt.tickSize),Ie=0,Ze=Number.NaN,ut;do ut=Ze,Ze=At+Ie*dt.tickSize,ct.push(Ze),++Ie;while(Ze<dt.max&&Ze!=ut);return ct},le.tickFormatter=function(dt,ct){var At=ct.tickDecimals?Math.pow(10,ct.tickDecimals):1,Ie=""+Math.round(dt*At)/At;if(ct.tickDecimals!=null){var Ze=Ie.indexOf("."),ut=Ze==-1?0:Ie.length-Ze-1;if(ut<ct.tickDecimals)return(ut?Ie:Ie+".")+(""+At).substr(1,ct.tickDecimals-ut)}return Ie}),J.isFunction(de.tickFormatter)&&(le.tickFormatter=function(dt,ct){return""+de.tickFormatter(dt,ct)}),de.alignTicksWithAxis!=null){var we=(le.direction=="x"?p:h)[de.alignTicksWithAxis-1];if(we&&we.used&&we!=le){var Fe=le.tickGenerator(le);if(Fe.length>0&&(de.min==null&&(le.min=Math.min(le.min,Fe[0])),de.max==null&&Fe.length>1&&(le.max=Math.max(le.max,Fe[Fe.length-1]))),le.tickGenerator=function(dt){var ct=[],At,Ie;for(Ie=0;Ie<we.ticks.length;++Ie)At=(we.ticks[Ie].v-we.min)/(we.max-we.min),At=dt.min+At*(dt.max-dt.min),ct.push(At);return ct},!le.mode&&de.tickDecimals==null){var He=Math.max(0,-Math.floor(Math.log(le.delta)/Math.LN10)+1),Xe=le.tickGenerator(le);Xe.length>1&&/\..*0$/.test((Xe[1]-Xe[0]).toFixed(He))||(le.tickDecimals=He)}}}}function ce(le){var de=le.options.ticks,X=[];de==null||typeof de=="number"&&de>0?X=le.tickGenerator(le):de&&(J.isFunction(de)?X=de(le):X=de);var se,re;for(le.ticks=[],se=0;se<X.length;++se){var pe=null,be=X[se];typeof be=="object"?(re=+be[0],be.length>1&&(pe=be[1])):re=+be,pe==null&&(pe=le.tickFormatter(re,le)),isNaN(re)||le.ticks.push({v:re,label:pe})}}function q(le,de){var X=!1;return le.options.autoscaleMargin&&de.length>0&&(le.options.min==null&&(le.min=Math.min(le.min,de[0].v),X=!0),le.options.max==null&&de.length>1&&(le.max=Math.max(le.max,de[de.length-1].v),X=!0)),X}function De(){u.clear(),M(C.drawBackground,[c]);var le=d.grid;le.show&&le.backgroundColor&&te(),le.show&&!le.aboveData&&fe();for(var de=0;de<m.length;++de)M(C.drawSeries,[c,m[de]]),he(m[de]);M(C.draw,[c]),le.show&&le.aboveData&&fe(),u.render(),ot()}function oe(le,de){for(var X,se,re,pe,be=O(),xe=0;xe<be.length;++xe)if(X=be[xe],X.direction==de&&(pe=de+X.n+"axis",!le[pe]&&X.n==1&&(pe=de+"axis"),le[pe])){se=le[pe].from,re=le[pe].to;break}if(le[pe]||(X=de=="x"?p[0]:h[0],se=le[de+"1"],re=le[de+"2"]),se!=null&&re!=null&&se>re){var Pe=se;se=re,re=Pe}return{from:se,to:re,axis:X}}function te(){c.save(),c.translate(y.left,y.top),c.fillStyle=Le(d.grid.backgroundColor,v,0,"rgba(255, 255, 255, 0)"),c.fillRect(0,0,s,v),c.restore()}function fe(){var le,de,X,se;c.save(),c.translate(y.left,y.top);var re=d.grid.markings;if(re)for(J.isFunction(re)&&(de=D.getAxes(),de.xmin=de.xaxis.min,de.xmax=de.xaxis.max,de.ymin=de.yaxis.min,de.ymax=de.yaxis.max,re=re(de)),le=0;le<re.length;++le){var pe=re[le],be=oe(pe,"x"),xe=oe(pe,"y");if(be.from==null&&(be.from=be.axis.min),be.to==null&&(be.to=be.axis.max),xe.from==null&&(xe.from=xe.axis.min),xe.to==null&&(xe.to=xe.axis.max),!(be.to<be.axis.min||be.from>be.axis.max||xe.to<xe.axis.min||xe.from>xe.axis.max)){be.from=Math.max(be.from,be.axis.min),be.to=Math.min(be.to,be.axis.max),xe.from=Math.max(xe.from,xe.axis.min),xe.to=Math.min(xe.to,xe.axis.max);var Pe=be.from===be.to,we=xe.from===xe.to;if(!(Pe&&we))if(be.from=Math.floor(be.axis.p2c(be.from)),be.to=Math.floor(be.axis.p2c(be.to)),xe.from=Math.floor(xe.axis.p2c(xe.from)),xe.to=Math.floor(xe.axis.p2c(xe.to)),Pe||we){var Fe=pe.lineWidth||d.grid.markingsLineWidth,He=Fe%2?.5:0;c.beginPath(),c.strokeStyle=pe.color||d.grid.markingsColor,c.lineWidth=Fe,Pe?(c.moveTo(be.to+He,xe.from),c.lineTo(be.to+He,xe.to)):(c.moveTo(be.from,xe.to+He),c.lineTo(be.to,xe.to+He)),c.stroke()}else c.fillStyle=pe.color||d.grid.markingsColor,c.fillRect(be.from,xe.to,be.to-be.from,xe.from-xe.to)}}de=O(),X=d.grid.borderWidth;for(var Xe=0;Xe<de.length;++Xe){var dt=de[Xe],ct=dt.box,At=dt.tickLength,Ie,Ze,ut,rt;if(!(!dt.show||dt.ticks.length==0)){for(c.lineWidth=1,dt.direction=="x"?(Ie=0,At=="full"?Ze=dt.position=="top"?0:v:Ze=ct.top-y.top+(dt.position=="top"?ct.height:0)):(Ze=0,At=="full"?Ie=dt.position=="left"?0:s:Ie=ct.left-y.left+(dt.position=="left"?ct.width:0)),dt.innermost||(c.strokeStyle=dt.options.color,c.beginPath(),ut=rt=0,dt.direction=="x"?ut=s+1:rt=v+1,c.lineWidth==1&&(dt.direction=="x"?Ze=Math.floor(Ze)+.5:Ie=Math.floor(Ie)+.5),c.moveTo(Ie,Ze),c.lineTo(Ie+ut,Ze+rt),c.stroke()),c.strokeStyle=dt.options.tickColor,c.beginPath(),le=0;le<dt.ticks.length;++le){var St=dt.ticks[le].v;ut=rt=0,!(isNaN(St)||St<dt.min||St>dt.max||At=="full"&&(typeof X=="object"&&X[dt.position]>0||X>0)&&(St==dt.min||St==dt.max))&&(dt.direction=="x"?(Ie=dt.p2c(St),rt=At=="full"?-v:At,dt.position=="top"&&(rt=-rt)):(Ze=dt.p2c(St),ut=At=="full"?-s:At,dt.position=="left"&&(ut=-ut)),c.lineWidth==1&&(dt.direction=="x"?Ie=Math.floor(Ie)+.5:Ze=Math.floor(Ze)+.5),c.moveTo(Ie,Ze),c.lineTo(Ie+ut,Ze+rt))}c.stroke()}}X&&(se=d.grid.borderColor,typeof X=="object"||typeof se=="object"?(typeof X!="object"&&(X={top:X,right:X,bottom:X,left:X}),typeof se!="object"&&(se={top:se,right:se,bottom:se,left:se}),X.top>0&&(c.strokeStyle=se.top,c.lineWidth=X.top,c.beginPath(),c.moveTo(0-X.left,0-X.top/2),c.lineTo(s,0-X.top/2),c.stroke()),X.right>0&&(c.strokeStyle=se.right,c.lineWidth=X.right,c.beginPath(),c.moveTo(s+X.right/2,0-X.top),c.lineTo(s+X.right/2,v),c.stroke()),X.bottom>0&&(c.strokeStyle=se.bottom,c.lineWidth=X.bottom,c.beginPath(),c.moveTo(s+X.right,v+X.bottom/2),c.lineTo(0,v+X.bottom/2),c.stroke()),X.left>0&&(c.strokeStyle=se.left,c.lineWidth=X.left,c.beginPath(),c.moveTo(0-X.left/2,v+X.bottom),c.lineTo(0-X.left/2,0),c.stroke())):(c.lineWidth=X,c.strokeStyle=d.grid.borderColor,c.strokeRect(-X/2,-X/2,s+X,v+X))),c.restore()}function Te(){J.each(O(),function(le,de){var X=de.box,se=de.direction+"Axis "+de.direction+de.n+"Axis",re="flot-"+de.direction+"-axis flot-"+de.direction+de.n+"-axis "+se,pe=de.options.font||"flot-tick-label tickLabel",be,xe,Pe,we,Fe;if(u.removeText(re),!(!de.show||de.ticks.length==0))for(var He=0;He<de.ticks.length;++He)be=de.ticks[He],!(!be.label||be.v<de.min||be.v>de.max)&&(de.direction=="x"?(we="center",xe=y.left+de.p2c(be.v),de.position=="bottom"?Pe=X.top+X.padding+X.eventSectionPadding:(Pe=X.top+X.height-X.padding,Fe="bottom")):(Fe="middle",Pe=y.top+de.p2c(be.v),de.position=="left"?(xe=X.left+X.width-X.padding,we="right"):xe=X.left+X.padding),u.addText(re,xe,Pe,be.label,pe,null,null,we,Fe))})}function ge(le){for(var de=[],X=null,se=null,re=le.datapoints,pe=[],be=0;be<re.pointsize-2;be++)pe.push(0);for(var xe=0;xe<re.points.length;xe+=re.pointsize){var Pe=re.points[xe],we=re.points[xe+1];xe===re.points.length-re.pointsize?se=null:se=re.points[xe+re.pointsize],Pe!==null&&we!==null&&X===null&&se===null&&(de.push(Pe),de.push(we),de.push.apply(de,pe)),X=Pe}var Fe=re.points;re.points=de,le.points.radius=le.lines.lineWidth/2,ye(le),re.points=Fe}function he(le){le.lines.show&&(me(le),!le.points.show&&!le.bars.show&&ge(le)),le.bars.show&&Oe(le),le.points.show&&ye(le)}function me(le){function de(xe,Pe,we,Fe,He){var Xe=xe.points,dt=xe.pointsize,ct=null,At=null;c.beginPath();for(var Ie=dt;Ie<Xe.length;Ie+=dt){var Ze=Xe[Ie-dt],ut=Xe[Ie-dt+1],rt=Xe[Ie],St=Xe[Ie+1];if(!(Ze==null||rt==null)){if(ut<=St&&ut<He.min){if(St<He.min)continue;Ze=(He.min-ut)/(St-ut)*(rt-Ze)+Ze,ut=He.min}else if(St<=ut&&St<He.min){if(ut<He.min)continue;rt=(He.min-ut)/(St-ut)*(rt-Ze)+Ze,St=He.min}if(ut>=St&&ut>He.max){if(St>He.max)continue;Ze=(He.max-ut)/(St-ut)*(rt-Ze)+Ze,ut=He.max}else if(St>=ut&&St>He.max){if(ut>He.max)continue;rt=(He.max-ut)/(St-ut)*(rt-Ze)+Ze,St=He.max}if(Ze<=rt&&Ze<Fe.min){if(rt<Fe.min)continue;ut=(Fe.min-Ze)/(rt-Ze)*(St-ut)+ut,Ze=Fe.min}else if(rt<=Ze&&rt<Fe.min){if(Ze<Fe.min)continue;St=(Fe.min-Ze)/(rt-Ze)*(St-ut)+ut,rt=Fe.min}if(Ze>=rt&&Ze>Fe.max){if(rt>Fe.max)continue;ut=(Fe.max-Ze)/(rt-Ze)*(St-ut)+ut,Ze=Fe.max}else if(rt>=Ze&&rt>Fe.max){if(Ze>Fe.max)continue;St=(Fe.max-Ze)/(rt-Ze)*(St-ut)+ut,rt=Fe.max}(Ze!=ct||ut!=At)&&c.moveTo(Fe.p2c(Ze)+Pe,He.p2c(ut)+we),ct=rt,At=St,c.lineTo(Fe.p2c(rt)+Pe,He.p2c(St)+we)}}c.stroke()}function X(xe,Pe,we){for(var Fe=xe.points,He=xe.pointsize,Xe=Math.min(Math.max(0,we.min),we.max),dt=0,ct,At=!1,Ie=1,Ze=0,ut=0;!(He>0&&dt>Fe.length+He);){dt+=He;var rt=Fe[dt-He],St=Fe[dt-He+Ie],st=Fe[dt],tt=Fe[dt+Ie];if(At){if(He>0&&rt!=null&&st==null){ut=dt,He=-He,Ie=2;continue}if(He<0&&dt==Ze+He){c.fill(),At=!1,He=-He,Ie=1,dt=Ze=ut+He;continue}}if(!(rt==null||st==null)){if(rt<=st&&rt<Pe.min){if(st<Pe.min)continue;St=(Pe.min-rt)/(st-rt)*(tt-St)+St,rt=Pe.min}else if(st<=rt&&st<Pe.min){if(rt<Pe.min)continue;tt=(Pe.min-rt)/(st-rt)*(tt-St)+St,st=Pe.min}if(rt>=st&&rt>Pe.max){if(st>Pe.max)continue;St=(Pe.max-rt)/(st-rt)*(tt-St)+St,rt=Pe.max}else if(st>=rt&&st>Pe.max){if(rt>Pe.max)continue;tt=(Pe.max-rt)/(st-rt)*(tt-St)+St,st=Pe.max}if(At||(c.beginPath(),c.moveTo(Pe.p2c(rt),we.p2c(Xe)),At=!0),St>=we.max&&tt>=we.max){c.lineTo(Pe.p2c(rt),we.p2c(we.max)),c.lineTo(Pe.p2c(st),we.p2c(we.max));continue}else if(St<=we.min&&tt<=we.min){c.lineTo(Pe.p2c(rt),we.p2c(we.min)),c.lineTo(Pe.p2c(st),we.p2c(we.min));continue}var ft=rt,$t=st;St<=tt&&St<we.min&&tt>=we.min?(rt=(we.min-St)/(tt-St)*(st-rt)+rt,St=we.min):tt<=St&&tt<we.min&&St>=we.min&&(st=(we.min-St)/(tt-St)*(st-rt)+rt,tt=we.min),St>=tt&&St>we.max&&tt<=we.max?(rt=(we.max-St)/(tt-St)*(st-rt)+rt,St=we.max):tt>=St&&tt>we.max&&St<=we.max&&(st=(we.max-St)/(tt-St)*(st-rt)+rt,tt=we.max),rt!=ft&&c.lineTo(Pe.p2c(ft),we.p2c(St)),c.lineTo(Pe.p2c(rt),we.p2c(St)),c.lineTo(Pe.p2c(st),we.p2c(tt)),st!=$t&&(c.lineTo(Pe.p2c(st),we.p2c(tt)),c.lineTo(Pe.p2c($t),we.p2c(tt)))}}}c.save(),c.translate(y.left,y.top),c.lineJoin="round";var se=le.lines.lineWidth,re=le.shadowSize;if(se>0&&re>0){c.lineWidth=re,c.strokeStyle="rgba(0,0,0,0.1)";var pe=Math.PI/18;de(le.datapoints,Math.sin(pe)*(se/2+re/2),Math.cos(pe)*(se/2+re/2),le.xaxis,le.yaxis),c.lineWidth=re/2,de(le.datapoints,Math.sin(pe)*(se/2+re/4),Math.cos(pe)*(se/2+re/4),le.xaxis,le.yaxis)}c.lineWidth=se,c.strokeStyle=le.color;var be=Ue(le.lines,le.color,0,v);be&&(c.fillStyle=be,X(le.datapoints,le.xaxis,le.yaxis)),se>0&&de(le.datapoints,0,0,le.xaxis,le.yaxis),c.restore()}function ye(le){function de(xe,Pe,we,Fe,He,Xe,dt,ct){for(var At=xe.points,Ie=xe.pointsize,Ze=0;Ze<At.length;Ze+=Ie){var ut=At[Ze],rt=At[Ze+1];ut==null||ut<Xe.min||ut>Xe.max||rt<dt.min||rt>dt.max||(c.beginPath(),ut=Xe.p2c(ut),rt=dt.p2c(rt)+Fe,ct=="circle"?c.arc(ut,rt,Pe,0,He?Math.PI:Math.PI*2,!1):ct(c,ut,rt,Pe,He),c.closePath(),we&&(c.fillStyle=we,c.fill()),c.stroke())}}c.save(),c.translate(y.left,y.top);var X=le.points.lineWidth,se=le.shadowSize,re=le.points.radius,pe=le.points.symbol;if(X==0&&(X=1e-4),X>0&&se>0){var be=se/2;c.lineWidth=be,c.strokeStyle="rgba(0,0,0,0.1)",de(le.datapoints,re,null,be+be/2,!0,le.xaxis,le.yaxis,pe),c.strokeStyle="rgba(0,0,0,0.2)",de(le.datapoints,re,null,be/2,!0,le.xaxis,le.yaxis,pe)}c.lineWidth=X,c.strokeStyle=le.color,de(le.datapoints,re,Ue(le.points,le.color),0,!1,le.xaxis,le.yaxis,pe),c.restore()}function ue(le,de,X,se,re,pe,be,xe,Pe,we,Fe){var He,Xe,dt,ct,At,Ie,Ze,ut,rt;we?(ut=Ie=Ze=!0,At=!1,He=X,Xe=le,ct=de+se,dt=de+re,Xe<He&&(rt=Xe,Xe=He,He=rt,At=!0,Ie=!1)):(At=Ie=Ze=!0,ut=!1,He=le+se,Xe=le+re,dt=X,ct=de,ct<dt&&(rt=ct,ct=dt,dt=rt,ut=!0,Ze=!1)),!(Xe<be.min||He>be.max||ct<xe.min||dt>xe.max)&&(He<be.min&&(He=be.min,At=!1),Xe>be.max&&(Xe=be.max,Ie=!1),dt<xe.min&&(dt=xe.min,ut=!1),ct>xe.max&&(ct=xe.max,Ze=!1),He=be.p2c(He),dt=xe.p2c(dt),Xe=be.p2c(Xe),ct=xe.p2c(ct),pe&&(Pe.fillStyle=pe(dt,ct),Pe.fillRect(He,ct,Xe-He,dt-ct)),Fe>0&&(At||Ie||Ze||ut)&&(Pe.beginPath(),Pe.moveTo(He,dt),At?Pe.lineTo(He,ct):Pe.moveTo(He,ct),Ze?Pe.lineTo(Xe,ct):Pe.moveTo(Xe,ct),Ie?Pe.lineTo(Xe,dt):Pe.moveTo(Xe,dt),ut?Pe.lineTo(He,dt):Pe.moveTo(He,dt),Pe.stroke()))}function Oe(le){function de(re,pe,be,xe,Pe,we){for(var Fe=re.points,He=re.pointsize,Xe=0;Xe<Fe.length;Xe+=He)Fe[Xe]!=null&&ue(Fe[Xe],Fe[Xe+1],Fe[Xe+2],pe,be,xe,Pe,we,c,le.bars.horizontal,le.bars.lineWidth)}c.save(),c.translate(y.left,y.top),c.lineWidth=le.bars.lineWidth,c.strokeStyle=le.color;var X;switch(le.bars.align){case"left":X=0;break;case"right":X=-le.bars.barWidth;break;default:X=-le.bars.barWidth/2}var se=le.bars.fill?function(re,pe){return Ue(le.bars,le.color,re,pe)}:null;de(le.datapoints,X,X+le.bars.barWidth,se,le.xaxis,le.yaxis),c.restore()}function Ue(le,de,X,se){var re=le.fill;if(!re)return null;if(le.fillColor)return Le(le.fillColor,X,se,de);var pe=J.color.parse(de);return pe.a=typeof re=="number"?re:.4,pe.normalize(),pe.toString()}function at(){if(d.legend.container!=null?J.find(d.legend.container).html(""):l.find(".legend").remove(),!!d.legend.show){for(var le=[],de=[],X=!1,se=d.legend.labelFormatter,re,pe,be=0;be<m.length;++be)re=m[be],re.label&&(pe=se?se(re.label,re):re.label,pe&&de.push({label:pe,color:re.color}));if(d.legend.sorted)if(J.isFunction(d.legend.sorted))de.sort(d.legend.sorted);else if(d.legend.sorted=="reverse")de.reverse();else{var xe=d.legend.sorted!="descending";de.sort(function(Ie,Ze){return Ie.label==Ze.label?0:Ie.label<Ze.label!=xe?1:-1})}for(var be=0;be<de.length;++be){var Pe=de[be];be%d.legend.noColumns==0&&(X&&le.push("</tr>"),le.push("<tr>"),X=!0),le.push('<td class="legendColorBox"><div style="border:1px solid '+d.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+Pe.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+Pe.label+"</td>")}if(X&&le.push("</tr>"),le.length!=0){var we='<table style="font-size:smaller;color:'+d.grid.color+'">'+le.join("")+"</table>";if(d.legend.container!=null)J(d.legend.container).html(we);else{var Fe="",He=d.legend.position,Xe=d.legend.margin;Xe[0]==null&&(Xe=[Xe,Xe]),He.charAt(0)=="n"?Fe+="top:"+(Xe[1]+y.top)+"px;":He.charAt(0)=="s"&&(Fe+="bottom:"+(Xe[1]+y.bottom)+"px;"),He.charAt(1)=="e"?Fe+="right:"+(Xe[0]+y.right)+"px;":He.charAt(1)=="w"&&(Fe+="left:"+(Xe[0]+y.left)+"px;");var dt=J('<div class="legend">'+we.replace('style="','style="position:absolute;'+Fe+";")+"</div>").appendTo(l);if(d.legend.backgroundOpacity!=0){var ct=d.legend.backgroundColor;ct==null&&(ct=d.grid.backgroundColor,ct&&typeof ct=="string"?ct=J.color.parse(ct):ct=J.color.extract(dt,"background-color"),ct.a=1,ct=ct.toString());var At=dt.children();J('<div style="position:absolute;width:'+At.width()+"px;height:"+At.height()+"px;"+Fe+"background-color:"+ct+';"> </div>').prependTo(dt).css("opacity",d.legend.backgroundOpacity)}}}}}var Ne=[],_e=null;function Ke(le,de,X){var se=d.grid.mouseActiveRadius,re=se*se+1,pe=null,be=!1,xe,Pe,we;for(xe=m.length-1;xe>=0;--xe)if(X(m[xe])){var Fe=m[xe],He=Fe.xaxis,Xe=Fe.yaxis,dt=Fe.datapoints.points,ct=He.c2p(le),At=Xe.c2p(de),Ie=se/He.scale,Ze=se/Xe.scale;if(we=Fe.datapoints.pointsize,He.options.inverseTransform&&(Ie=Number.MAX_VALUE),Xe.options.inverseTransform&&(Ze=Number.MAX_VALUE),Fe.lines.show||Fe.points.show)for(Pe=0;Pe<dt.length;Pe+=we){var ut=dt[Pe],rt=dt[Pe+1];if(ut!=null&&!(ut-ct>Ie||ut-ct<-Ie||rt-At>Ze||rt-At<-Ze)){var St=Math.abs(He.p2c(ut)-le),st=Math.abs(Xe.p2c(rt)-de),tt=St*St+st*st;tt<re&&(re=tt,pe=[xe,Pe/we])}}if(Fe.bars.show&&!pe){var ft,$t;switch(Fe.bars.align){case"left":ft=0;break;case"right":ft=-Fe.bars.barWidth;break;default:ft=-Fe.bars.barWidth/2}for($t=ft+Fe.bars.barWidth,Pe=0;Pe<dt.length;Pe+=we){var ut=dt[Pe],rt=dt[Pe+1],Ht=dt[Pe+2];ut!=null&&(m[xe].bars.horizontal?ct<=Math.max(Ht,ut)&&ct>=Math.min(Ht,ut)&&At>=rt+ft&&At<=rt+$t:ct>=ut+ft&&ct<=ut+$t&&At>=Math.min(Ht,rt)&&At<=Math.max(Ht,rt))&&(pe=[xe,Pe/we])}}}return pe?(xe=pe[0],Pe=pe[1],we=m[xe].datapoints.pointsize,{datapoint:m[xe].datapoints.points.slice(Pe*we,(Pe+1)*we),dataIndex:Pe,series:m[xe],seriesIndex:xe}):null}function et(le){d.grid.hoverable&&ke("plothover",le,function(de){return de.hoverable!=!1})}function ze(le){d.grid.hoverable&&ke("plothover",le,function(de){return!1})}function je(le){D.isSelecting||ke("plotclick",le,function(de){return de.clickable!=!1})}function Qe(le){if(le.cancelable){if(!f.is(le.target)&&f.has(le.target).length===0){ke("plotleave",le,function(de){});return}et(We(le)),le.preventDefault()}}function We(le){if(!le||!le.originalEvent||le.pageX&&le.pageY)return le;var de=le.originalEvent;if(de.changedTouches.length===0)return le;var X=de.changedTouches[0];return le.pageX=X.pageX,le.pageY=X.pageY,le}function ke(le,de,X){var se=f.offset(),re=de.pageX-se.left-y.left,pe=de.pageY-se.top-y.top,be=A({left:re,top:pe});be.pageX=de.pageX,be.pageY=de.pageY,be.ctrlKey=de.ctrlKey,be.metaKey=de.metaKey;var xe=Ke(re,pe,X);if(xe&&(xe.pageX=parseInt(xe.series.xaxis.p2c(xe.datapoint[0])+se.left+y.left,10),xe.pageY=parseInt(xe.series.yaxis.p2c(xe.datapoint[1])+se.top+y.top,10)),d.grid.autoHighlight){for(var Pe=0;Pe<Ne.length;++Pe){var we=Ne[Pe];we.auto==le&&!(xe&&we.series==xe.series&&we.point[0]==xe.datapoint[0]&&we.point[1]==xe.datapoint[1])&&wt(we.series,we.point)}xe&&Ct(xe.series,xe.datapoint,le)}l.trigger(le,[be,xe])}function ot(){var le=d.interaction.redrawOverlayInterval;if(le==-1){lt();return}_e||(_e=setTimeout(lt,le))}function lt(){_e=null,E.save(),i.clear(),E.translate(y.left,y.top);var le,de;for(le=0;le<Ne.length;++le)de=Ne[le],de.series.bars.show?Be(de.series,de.point):Ye(de.series,de.point);E.restore(),M(C.drawOverlay,[E])}function Ct(le,de,X){if(typeof le=="number"&&(le=m[le]),typeof de=="number"){var se=le.datapoints.pointsize;de=le.datapoints.points.slice(se*de,se*(de+1))}var re=Lt(le,de);re==-1?(Ne.push({series:le,point:de,auto:X}),ot()):X||(Ne[re].auto=!1)}function wt(le,de){if(le==null&&de==null){Ne=[],ot();return}if(typeof le=="number"&&(le=m[le]),typeof de=="number"){var X=le.datapoints.pointsize;de=le.datapoints.points.slice(X*de,X*(de+1))}var se=Lt(le,de);se!=-1&&(Ne.splice(se,1),ot())}function Lt(le,de){for(var X=0;X<Ne.length;++X){var se=Ne[X];if(se.series==le&&se.point[0]==de[0]&&se.point[1]==de[1])return X}return-1}function Ye(le,de){var X=de[0],se=de[1],re=le.xaxis,pe=le.yaxis,be=typeof le.highlightColor=="string"?le.highlightColor:J.color.parse(le.color).scale("a",.5).toString();if(!(X<re.min||X>re.max||se<pe.min||se>pe.max)){var xe=le.points.radius+le.points.lineWidth/2;E.lineWidth=xe,E.strokeStyle=be;var Pe=1.5*xe;X=re.p2c(X),se=pe.p2c(se),E.beginPath(),le.points.symbol=="circle"?E.arc(X,se,Pe,0,2*Math.PI,!1):le.points.symbol(E,X,se,Pe,!1),E.closePath(),E.stroke()}}function Be(le,de){var X=typeof le.highlightColor=="string"?le.highlightColor:J.color.parse(le.color).scale("a",.5).toString(),se=X,re;switch(le.bars.align){case"left":re=0;break;case"right":re=-le.bars.barWidth;break;default:re=-le.bars.barWidth/2}E.lineWidth=le.bars.lineWidth,E.strokeStyle=X,ue(de[0],de[1],de[2]||0,re,re+le.bars.barWidth,function(){return se},le.xaxis,le.yaxis,E,le.bars.horizontal,le.bars.lineWidth)}function Le(le,de,X,se){if(typeof le=="string")return le;for(var re=c.createLinearGradient(0,X,0,de),pe=0,be=le.colors.length;pe<be;++pe){var xe=le.colors[pe];if(typeof xe!="string"){var Pe=J.color.parse(se);xe.brightness!=null&&(Pe=Pe.scale("rgb",xe.brightness)),xe.opacity!=null&&(Pe.a*=xe.opacity),xe=Pe.toString()}re.addColorStop(pe/(be-1),xe)}return re}}J.plot=function(l,r,o){var g=new n(J(l),r,o,J.plot.plugins);return g},J.plot.version="0.8.3",J.plot.plugins=[],J.fn.plot=function(l,r){return this.each(function(){J.plot(this,l,r)})};function a(l,r){return r*Math.floor(l/r)}}(jQuery)},4027:()=>{(function(J){function R(e){var n={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},a={},l=null;function r(y){n.active&&(f(y),e.getPlaceholder().trigger("plotselecting",[m()]))}function o(y){y.which==1&&(document.body.focus(),document.onselectstart!==void 0&&a.onselectstart==null&&(a.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&a.ondrag==null&&(a.ondrag=document.ondrag,document.ondrag=function(){return!1}),i(n.first,y),n.active=!0,l=function(s){g(s)},J(document).one("mouseup",l))}function g(y){return l=null,document.onselectstart!==void 0&&(document.onselectstart=a.onselectstart),document.ondrag!==void 0&&(document.ondrag=a.ondrag),n.active=!1,f(y),h()?d(y):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function m(){if(!h()||!n.show)return null;var y={},s=n.first,v=n.second,C=e.getAxes(),D=!0;return J.each(C,function(M,P){P.used&&(anyUsed=!1)}),J.each(C,function(M,P){if(P.used||D){var x=P.c2p(s[P.direction]),S=P.c2p(v[P.direction]);y[M]={from:Math.min(x,S),to:Math.max(x,S)}}}),y}function d(y){var s=m();s.ctrlKey=y.ctrlKey,s.metaKey=y.metaKey,e.getPlaceholder().trigger("plotselected",[s]),s.xaxis&&s.yaxis&&e.getPlaceholder().trigger("selected",[{x1:s.xaxis.from,y1:s.yaxis.from,x2:s.xaxis.to,y2:s.yaxis.to}])}function u(y,s,v){return s<y?y:s>v?v:s}function i(y,s){var v=e.getOptions(),C=e.getPlaceholder().offset(),D=e.getPlotOffset();y.x=u(0,s.pageX-C.left-D.left,e.width()),y.y=u(0,s.pageY-C.top-D.top,e.height()),v.selection.mode=="y"&&(y.x=y==n.first?0:e.width()),v.selection.mode=="x"&&(y.y=y==n.first?0:e.height())}function f(y){y.pageX!=null&&(i(n.second,y),h()?(e.isSelecting=!0,n.show=!0,e.triggerRedrawOverlay()):c(!0))}function c(y){n.show&&(n.show=!1,e.triggerRedrawOverlay(),y||e.getPlaceholder().trigger("plotunselected",[]))}function E(y,s){var v,C,D,M,P=e.getAxes();for(var x in P)if(v=P[x],v.direction==s&&(M=s+v.n+"axis",!y[M]&&v.n==1&&(M=s+"axis"),y[M])){C=y[M].from,D=y[M].to;break}if(y[M]||(v=s=="x"?e.getXAxes()[0]:e.getYAxes()[0],C=y[s+"1"],D=y[s+"2"]),C!=null&&D!=null&&C>D){var S=C;C=D,D=S}return{from:C,to:D,axis:v}}function p(y,s){var v,C,D=e.getOptions();D.selection.mode=="y"?(n.first.x=0,n.second.x=e.width()):(C=E(y,"x"),n.first.x=C.axis.p2c(C.from),n.second.x=C.axis.p2c(C.to)),D.selection.mode=="x"?(n.first.y=0,n.second.y=e.height()):(C=E(y,"y"),n.first.y=C.axis.p2c(C.from),n.second.y=C.axis.p2c(C.to)),n.show=!0,e.triggerRedrawOverlay(),!s&&h()&&d()}function h(){var y=e.getOptions().selection.minSize;return Math.abs(n.second.x-n.first.x)>=y&&Math.abs(n.second.y-n.first.y)>=y}e.clearSelection=c,e.setSelection=p,e.getSelection=m,e.hooks.bindEvents.push(function(y,s){var v=y.getOptions();v.selection.mode!=null&&(s.mousemove(r),s.mousedown(o))}),e.hooks.drawOverlay.push(function(y,s){if(n.show&&h()){var v=y.getPlotOffset(),C=y.getOptions();s.save(),s.translate(v.left,v.top);var D=J.color.parse(C.selection.color);s.strokeStyle=D.scale("a",.8).toString(),s.lineWidth=1,s.lineJoin=C.selection.shape,s.fillStyle=D.scale("a",.4).toString();var M=Math.min(n.first.x,n.second.x)+.5,P=Math.min(n.first.y,n.second.y)+.5,x=Math.abs(n.second.x-n.first.x)-1,S=Math.abs(n.second.y-n.first.y)-1;s.fillRect(M,P,x,S),s.strokeRect(M,P,x,S),s.restore()}}),e.hooks.shutdown.push(function(y,s){s.unbind("mousemove",r),s.unbind("mousedown",o),l&&(J(document).unbind("mouseup",l),document.onselectstart!==void 0&&(document.onselectstart=a.onselectstart),document.ondrag!==void 0&&(document.ondrag=a.ondrag))})}J.plot.plugins.push({init:R,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},65103:()=>{(function(J){var R={series:{stack:null}};function e(n){function a(r,o){for(var g=null,m=0;m<o.length&&r!=o[m];++m)o[m].stack==r.stack&&(g=o[m]);return g}function l(r,o,g){if(!(o.stack==null||o.stack===!1)){var m=a(o,r.getData());if(m){for(var d=g.pointsize,u=g.points,i=m.datapoints.pointsize,f=m.datapoints.points,c=[],E,p,h,y,s,v,C=o.lines.show,D=o.bars.horizontal,M=d>2&&(D?g.format[2].x:g.format[2].y),P=C&&o.lines.steps,x=D?1:0,S=D?0:1,I=0,T=0,O,A;!(I>=u.length&&T>=f.length);){if(O=c.length,I<u.length&&u[I]==null){for(A=0;A<d;++A)c.push(u[I+A]);I+=d}else if(I>=u.length){for(A=0;A<d;++A)c.push(f[T+A]);M&&(c[O+2]=f[T+S]),T+=i}else if(T>=f.length){for(A=0;A<d;++A)c.push(u[I+A]);I+=d}else if(T<f.length&&f[T]==null)T+=i;else{if(E=u[I+x],p=u[I+S],y=f[T+x],s=f[T+S],v=0,E==y){for(A=0;A<d;++A)c.push(u[I+A]);c[O+S]+=s,v=s,I+=d,T+=i}else if(E>y){if(I==0){for(A=0;A<d;++A)c.push(f[T+A]);v=s}if(I>0&&u[I-d]!=null){for(h=0,c.push(y),c.push(h+s),A=2;A<d;++A)c.push(u[I+A]);v=s}T+=i}else{for(A=0;A<d;++A)c.push(u[I+A]);T>0&&f[T-i]!=null&&(v=0),c[O+S]+=v,I+=d}fromgap=!1,O!=c.length&&M&&(c[O+2]=v)}if(P&&O!=c.length&&O>0&&c[O]!=null&&c[O]!=c[O-d]&&c[O+1]!=c[O-d+1]){for(A=0;A<d;++A)c[O+d+A]=c[O+A];c[O+1]=c[O-d+1]}}g.points=c}}}n.hooks.processDatapoints.push(l)}J.plot.plugins.push({init:e,options:R,name:"stack",version:"1.2"})})(jQuery)},85095:()=>{(function(J){var R={series:{stackpercent:null}};function e(n){var a={},l=!1,r={};function o(d,u,i,f){if(l||(l=!0,r=g(d.getData())),u.stackpercent==!0){var c=i.length;u.percents=[];var E=0,p=1;u.bars&&u.bars.horizontal&&u.bars.horizontal===!0&&(E=1,p=0);for(var h=0;h<c;h++){var y=r[i[h][E]+""];y>0?u.percents.push(i[h][p]*100/y):u.percents.push(0)}}}function g(d){var u=d.length,i={};if(u>0){for(var f=0;f<u;f++)if(d[f].stackpercent){var c=0,E=1;d[f].bars&&d[f].bars.horizontal&&d[f].bars.horizontal===!0&&(c=1,E=0);for(var p=d[f].data.length,h=0;h<p;h++){var y=0;d[f].data[h][1]!=null&&(y=d[f].data[h][E]),i[d[f].data[h][c]+""]?i[d[f].data[h][c]+""]+=y:i[d[f].data[h][c]+""]=y}}}return i}function m(d,u,i){if(u.stackpercent){l||(r=g(d.getData()));var f=[],c=0,E=1;u.bars&&u.bars.horizontal&&u.bars.horizontal===!0&&(c=1,E=0);for(var p=0;p<i.points.length;p+=3)a[i.points[p+c]]||(a[i.points[p+c]]=0),f[p+c]=i.points[p+c],f[p+E]=i.points[p+E]+a[i.points[p+c]],f[p+2]=a[i.points[p+c]],a[i.points[p+c]]+=i.points[p+E],r[f[p+c]+""]>0?(f[p+E]=f[p+E]*100/r[f[p+c]+""],f[p+2]=f[p+2]*100/r[f[p+c]+""]):(f[p+E]=0,f[p+2]=0);i.points=f}}n.hooks.processRawData.push(o),n.hooks.processDatapoints.push(m)}J.plot.plugins.push({init:e,options:R,name:"stackpercent",version:"0.1"})})(jQuery)},59554:()=>{(function(J){var R={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(u,i){return i*Math.floor(u/i)}function n(u,i,f,c){if(typeof u.strftime=="function")return u.strftime(i);var E=function(M,P){return M=""+M,P=""+(P??"0"),M.length==1?P+M:M},p=[],h=!1,y=u.getHours(),s=y<12;f==null&&(f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),c==null&&(c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var v;y>12?v=y-12:y==0?v=12:v=y;for(var C=0;C<i.length;++C){var D=i.charAt(C);if(h){switch(D){case"a":D=""+c[u.getDay()];break;case"b":D=""+f[u.getMonth()];break;case"d":D=E(u.getDate(),"");break;case"e":D=E(u.getDate()," ");break;case"h":case"H":D=E(y);break;case"I":D=E(v);break;case"l":D=E(v," ");break;case"m":D=E(u.getMonth()+1,"");break;case"M":D=E(u.getMinutes());break;case"q":D=""+(Math.floor(u.getMonth()/3)+1);break;case"S":D=E(u.getSeconds());break;case"y":D=E(u.getFullYear()%100);break;case"Y":D=""+u.getFullYear();break;case"p":D=s?"am":"pm";break;case"P":D=s?"AM":"PM";break;case"w":D=""+u.getDay();break}p.push(D),h=!1}else D=="%"?h=!0:p.push(D)}return p.join("")}function a(u){function i(p,h,y,s){p[h]=function(){return y[s].apply(y,arguments)}}var f={date:u};u.strftime!=null&&i(f,"strftime",u,"strftime"),i(f,"getTime",u,"getTime"),i(f,"setTime",u,"setTime");for(var c=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],E=0;E<c.length;E++)i(f,"get"+c[E],u,"getUTC"+c[E]),i(f,"set"+c[E],u,"setUTC"+c[E]);return f}function l(u,i){if(i.timezone=="browser")return new Date(u);if(!i.timezone||i.timezone=="utc")return a(new Date(u));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var f=new timezoneJS.Date;return f.setTimezone(i.timezone),f.setTime(u),f}else return a(new Date(u))}var r={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},o=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],g=o.concat([[3,"month"],[6,"month"],[1,"year"]]),m=o.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function d(u){u.hooks.processOptions.push(function(i,f){J.each(i.getAxes(),function(c,E){var p=E.options;p.mode=="time"&&(E.tickGenerator=function(h){var y=[],s=l(h.min,p),v=0,C=p.tickSize&&p.tickSize[1]==="quarter"||p.minTickSize&&p.minTickSize[1]==="quarter"?m:g;p.minTickSize!=null&&(typeof p.tickSize=="number"?v=p.tickSize:v=p.minTickSize[0]*r[p.minTickSize[1]]);for(var D=0;D<C.length-1&&!(h.delta<(C[D][0]*r[C[D][1]]+C[D+1][0]*r[C[D+1][1]])/2&&C[D][0]*r[C[D][1]]>=v);++D);var M=C[D][0],P=C[D][1];if(P=="year"){if(p.minTickSize!=null&&p.minTickSize[1]=="year")M=Math.floor(p.minTickSize[0]);else{var x=Math.pow(10,Math.floor(Math.log(h.delta/r.year)/Math.LN10)),S=h.delta/r.year/x;S<1.5?M=1:S<3?M=2:S<7.5?M=5:M=10,M*=x}M<1&&(M=1)}h.tickSize=p.tickSize||[M,P];var I=h.tickSize[0];P=h.tickSize[1];var T=I*r[P];P=="second"?s.setSeconds(e(s.getSeconds(),I)):P=="minute"?s.setMinutes(e(s.getMinutes(),I)):P=="hour"?s.setHours(e(s.getHours(),I)):P=="month"?s.setMonth(e(s.getMonth(),I)):P=="quarter"?s.setMonth(3*e(s.getMonth()/3,I)):P=="year"&&s.setFullYear(e(s.getFullYear(),I)),s.setMilliseconds(0),T>=r.minute&&s.setSeconds(0),T>=r.hour&&s.setMinutes(0),T>=r.day&&s.setHours(0),T>=r.day*4&&s.setDate(1),T>=r.month*2&&s.setMonth(e(s.getMonth(),3)),T>=r.quarter*2&&s.setMonth(e(s.getMonth(),6)),T>=r.year&&s.setMonth(0);var O=0,A=Number.NaN,B;do if(B=A,A=s.getTime(),y.push(A),P=="month"||P=="quarter")if(I<1){s.setDate(1);var b=s.getTime();s.setMonth(s.getMonth()+(P=="quarter"?3:1));var W=s.getTime();s.setTime(A+O*r.hour+(W-b)*I),O=s.getHours(),s.setHours(0)}else s.setMonth(s.getMonth()+I*(P=="quarter"?3:1));else P=="year"?s.setFullYear(s.getFullYear()+I):s.setTime(A+T);while(A<h.max&&A!=B);return y},E.tickFormatter=function(h,y){var s=l(h,y.options);if(p.timeformat!=null)return n(s,p.timeformat,p.monthNames,p.dayNames);var v=y.options.tickSize&&y.options.tickSize[1]=="quarter"||y.options.minTickSize&&y.options.minTickSize[1]=="quarter",C=y.tickSize[0]*r[y.tickSize[1]],D=y.max-y.min,M=p.twelveHourClock?" %p":"",P=p.twelveHourClock?"%I":"%H",x;C<r.minute?x=P+":%M:%S"+M:C<r.day?D<2*r.day?x=P+":%M"+M:x="%b %d "+P+":%M"+M:C<r.month?x="%b %d":v&&C<r.quarter||!v&&C<r.year?D<r.year?x="%b":x="%b %Y":v&&C<r.year?D<r.year?x="Q%q":x="Q%q %Y":x="%Y";var S=n(s,x,p.monthNames,p.dayNames);return S})})})}J.plot.plugins.push({init:d,options:R,name:"time",version:"1.0"}),J.plot.formatDate=n})(jQuery)}}]);

//# sourceMappingURL=3498.459f06305d9a12c06a68.js.map