"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3330],{8807:(Lu,yn,F)=>{F.d(yn,{f:()=>ve});var Ea=F(39953),ba=F(96428);const ve=({onChange:y,options:ot,label:st})=>Ea.createElement(ba.b,{icon:"plus",label:st,variant:"secondary",options:ot,onChange:y,isFullWidth:!0})},98008:(Lu,yn,F)=>{F.r(yn),F.d(yn,{addStandardCanvasEditorOptions:()=>Mo,plugin:()=>z0});var Ea=F(40530),ba=F(82909),ve=F(86832),y=F(39953),ot=(t=>(t.Center="center",t.Left="left",t.LeftRight="leftright",t.Right="right",t.Scale="scale",t))(ot||{}),st=(t=>(t.Bottom="bottom",t.Center="center",t.Scale="scale",t.Top="top",t.TopBottom="topbottom",t))(st||{}),te=(t=>(t.Contain="contain",t.Cover="cover",t.Fill="fill",t.Original="original",t.Tile="tile",t))(te||{}),se=(t=>(t.GET="GET",t.POST="POST",t))(se||{}),Au=(t=>(t.Straight="straight",t))(Au||{});const H0={connections:[]},V0={inlineEditing:!0,showAdvancedTypes:!0};var ee=(t=>(t.Top="top",t.Bottom="bottom",t.Left="left",t.Right="right",t.HorizontalCenter="hcenter",t.VerticalCenter="vcenter",t))(ee||{}),ht=(t=>(t.Left="left",t.Center="center",t.Right="right",t))(ht||{}),xt=(t=>(t.Top="top",t.Middle="middle",t.Bottom="bottom",t))(xt||{}),He=F(50820),Oo=(t=>(t.Straight="straight",t))(Oo||{});const zt="#D9D9D9",Ca="#000000",Nu="#F0F4FD",Iu=He.config.theme2.colors.text.primary;var Bu=F(77663),U=F(41407),Po=F(30670),Pr=F(34547),Dt=F(82803),Lr=F(4919),_u=F(28409),It=F(473),Ar=F(19226),zu=F(19649),fr=F(74661),pr=F(69171),Lo=F(20454),En=F(9558),Nr=F(96227),Ao=F(40866),Se=F(12223),Ir=F(38637),le=F(68497);const No=({value:t,onChange:e})=>{const[n,r]=(0,y.useState)(""),[a,i]=(0,y.useState)(""),s=({currentTarget:d})=>{i(d.value)},o=({currentTarget:d})=>{r(d.value)},l=d=>()=>{const f=t.filter(p=>p[0]!==d);e(f)},c=()=>{const d=n;let f;t?f=t.filter(p=>p[0]!==d):f=[],f.push([d,a]),f.sort((p,v)=>p[0].localeCompare(v[0])),r(""),i(""),e(f)},u=!n&&!a;return y.createElement("div",null,y.createElement(Se.Lh,null,y.createElement(Ir.I,{placeholder:"Key",value:n,onChange:o}),y.createElement(Ir.I,{placeholder:"Value",value:a,onChange:s}),y.createElement(le.h,{"aria-label":"add",name:"plus-circle",onClick:c,disabled:u})),y.createElement(Se.wc,null,Array.from(t||[]).map(d=>y.createElement(Se.Lh,{key:d[0]},y.createElement(Ir.I,{disabled:!0,value:d[0]}),y.createElement(Ir.I,{disabled:!0,value:d[1]}),y.createElement(le.h,{"aria-label":"delete",onClick:l(d[0]),name:"trash-alt"})))))};var Br=F(71519),Fu=F(4148),Gu=F(79059),xa=F(21308),Ku=F(97433);const Io=(t,e)=>{if(t&&t.endpoint){if(Hu(t.endpoint)){xa.h$.emit(Br.SI.alertError,["Cannot call API at Grafana origin."]),e&&e(!1);return}const n=Wu(t);(0,Fu.i)().fetch(n).subscribe({error:r=>{xa.h$.emit(Br.SI.alertError,["An error has occurred: ",JSON.stringify(r)]),e&&e(!1)},complete:()=>{xa.h$.emit(Br.SI.alertSuccess,["API call was successful"]),e&&e(!1)}})}},Ve=t=>{const e=(0,Ku.h4)().getCurrent()?.panelInEdit;return(0,Gu.J)().replace(t,e?.scopedVars)},Wu=t=>{const e=[],n=new URL(Ve(t.endpoint));let r={url:n.toString(),method:t.method,data:$u(t),headers:e};return t.headerParams&&t.headerParams.forEach(a=>{e.push([Ve(a[0]),Ve(a[1])])}),t.queryParams&&(t.queryParams?.forEach(a=>{n.searchParams.append(Ve(a[0]),Ve(a[1]))}),r.url=n.toString()),t.method===se.POST&&e.push(["Content-Type",t.contentType]),r.headers=e,r},$u=t=>{let e=t.data?Ve(t.data):"{}";return t.method===se.GET&&(e=void 0),e},Hu=t=>{const e=new URL(t),n=new URL(window.location.origin);return e.origin===n.origin},Bo={settings:{}},Vu=[{label:se.GET,value:se.GET},{label:se.POST,value:se.POST}],Yu=[{label:"JSON",value:"application/json"},{label:"Text",value:"text/plain"},{label:"JavaScript",value:"application/javascript"},{label:"HTML",value:"text/html"},{label:"XML",value:"application/XML"},{label:"x-www-form-urlencoded",value:"application/x-www-form-urlencoded"}];function Xu({value:t,context:e,onChange:n}){t||(t=_r);const a=(0,y.useCallback)((p="")=>{n({...t,endpoint:p})},[n,t]),i=(0,y.useCallback)(p=>{n({...t,data:p})},[n,t]),s=(0,y.useCallback)(p=>{n({...t,method:p})},[n,t]),o=(0,y.useCallback)(p=>{n({...t,contentType:p?.value})},[n,t]),l=p=>p,c=(0,y.useCallback)(p=>{n({...t,queryParams:p})},[n,t]),u=(0,y.useCallback)(p=>{n({...t,headerParams:p})},[n,t]),d=p=>{try{const v=JSON.parse(Ve(p));return y.createElement(zu.g,{json:v})}catch(v){return v instanceof Error?`Invalid JSON provided: ${v.message}`:"Invalid JSON provided"}},f=p=>{if(p&&p.endpoint)return y.createElement(Lr.zx,{onClick:()=>Io(p),title:"Test API"},"Test API")};return y.createElement(y.Fragment,null,y.createElement(fr.Z,null,y.createElement(pr._,{label:"Endpoint",labelWidth:13,grow:!0},y.createElement(Ao.A,{context:e,value:t?.endpoint,onChange:a,item:Bo}))),y.createElement(fr.Z,null,y.createElement(pr._,{label:"Method",labelWidth:13,grow:!0},y.createElement(Lo.S,{value:t?.method,options:Vu,onChange:s,fullWidth:!0}))),t?.method===se.POST&&y.createElement(fr.Z,null,y.createElement(pr._,{label:"Content-Type",labelWidth:13,grow:!0},y.createElement(En.Ph,{options:Yu,allowCustomValue:!0,formatCreateLabel:l,value:t?.contentType,onChange:o}))),y.createElement("br",null),y.createElement(Nr.g,{label:"Query parameters"},y.createElement(No,{value:t?.queryParams??[],onChange:c})),y.createElement(Nr.g,{label:"Header parameters"},y.createElement(No,{value:t?.headerParams??[],onChange:u})),t?.method===se.POST&&t?.contentType&&y.createElement(Nr.g,{label:"Payload"},y.createElement(Ao.A,{context:e,value:t?.data??"{}",onChange:i,item:{...Bo,settings:{useTextarea:!0}}})),f(t),y.createElement("br",null),t?.method===se.POST&&t?.contentType===_r.contentType&&d(t?.data??"{}"))}const Zu=[{label:"primary",value:"primary"},{label:"secondary",value:"secondary"},{label:"success",value:"success"},{label:"destructive",value:"destructive"}],Uu=({value:t,onChange:e})=>{t||(t=bn);const n=(0,y.useCallback)(r=>{e({...t,variant:r?.value??bn.variant})},[e,t]);return y.createElement(y.Fragment,null,y.createElement(fr.Z,null,y.createElement(pr._,{label:"Variant",grow:!0},y.createElement(En.Ph,{options:Zu,value:t?.variant,onChange:n}))))},_r={endpoint:"",method:se.POST,data:"{}",contentType:"application/json",queryParams:[],headerParams:[]},bn={variant:"primary"},ju=({data:t})=>{const e=(0,Dt.wW)(Qu,t),[n,r]=y.useState(!1),a=s=>{r(s)},i=()=>{t?.api&&t?.api?.endpoint&&(r(!0),Io(t.api,a))};return y.createElement(Lr.zx,{type:"submit",variant:t?.style?.variant,onClick:i,className:e.button},y.createElement("span",null,n&&y.createElement(_u.$,{inline:!0,className:e.buttonSpinner}),t?.text))},Qu=(t,e)=>({button:(0,U.css)({height:"100%",width:"100%",display:"grid","> span":{display:"inline-grid",gridAutoFlow:"column",textAlign:e?.align,fontSize:`${e?.size}px`,color:e?.color}}),buttonSpinner:(0,U.css)({marginRight:t.spacing(.5)})}),qu={id:"button",name:"Button",description:"Button",state:Po.BV.beta,standardEditorConfig:{background:!1},display:ju,defaultSize:{width:150,height:45},getNewOptions:t=>({...t,config:{text:{mode:Pr.xy.Fixed,fixed:"Button"},align:ht.Center,color:{fixed:Nu},size:14,api:_r,style:bn},background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??32,height:t?.placement?.height??78,top:t?.placement?.top??100,left:t?.placement?.left??100}}),prepareData:(t,e)=>{const n=()=>{if(e?.api)return e.api={...e.api,method:e.api.method??_r.method,contentType:e.api.contentType??_r.contentType},e.api},r={text:e?.text?t.getText(e.text).value():"",align:e.align??ht.Center,size:e.size??14,api:n(),style:e?.style??bn};return e.color&&(r.color=t.getColor(e.color).value()),r},registerOptionsUI:t=>{const e=["Button"];t.addCustomEditor({category:e,id:"styleSelector",path:"config.style",name:"Style",editor:Uu}).addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Ar.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:It.Lm,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:ht.Left,label:"Left"},{value:ht.Center,label:"Center"},{value:ht.Right,label:"Right"}]},defaultValue:ht.Left}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}}).addCustomEditor({category:e,id:"apiSelector",path:"config.api",name:"API",editor:Xu})}},Ju={id:"droneFront",name:"Drone Front",description:"Drone front",display:({data:t})=>{const e=(0,Dt.wW)(td),n=`rotate(${t?.rollAngle?t.rollAngle:0}deg)`;return y.createElement("svg",{className:e.droneFront,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1300 290",style:{transform:n,stroke:zt}},y.createElement("g",{className:"arms",stroke:zt,strokeWidth:"28px"},y.createElement("line",{x1:"510",x2:"320",y1:"100",y2:"150"}),y.createElement("line",{x1:"510",x2:"320",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"100",y2:"150"})),y.createElement("g",{className:"body",stroke:zt,strokeWidth:"28px"},y.createElement("path",{fill:"none",d:" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z "}),y.createElement("circle",{cx:"650",cy:"160",r:"40",fill:"none"})),y.createElement("g",{className:"motors",stroke:zt,strokeWidth:"28px"},y.createElement("path",{className:"motor",fill:"none",d:" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z "}),y.createElement("path",{className:"motor",fill:"none",d:" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z "})),y.createElement("g",{className:"propellers",fill:zt},y.createElement("path",{className:"prop",d:" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z "}),y.createElement("path",{className:"prop",d:" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z "})))},defaultSize:{width:100,height:26},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??26,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>({rollAngle:e?.rollAngle?t.getScalar(e.rollAngle).value():0}),registerOptionsUI:t=>{const e=["Drone Front"];t.addCustomEditor({category:e,id:"rollAngle",path:"config.rollAngle",name:"Roll Angle",editor:It.k9})}},td=t=>({droneFront:(0,U.css)`
    transition: transform 0.4s;
  `}),ed={id:"droneSide",name:"Drone Side",description:"Drone Side",display:({data:t})=>{const e=(0,Dt.wW)(rd),n=`rotate(${t?.pitchAngle?t.pitchAngle:0}deg)`;return y.createElement("svg",{className:e.droneSide,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1300 290",style:{transform:n,stroke:zt}},y.createElement("g",{className:"arms",stroke:zt,strokeWidth:"28px"},y.createElement("line",{x1:"510",x2:"320",y1:"100",y2:"150"}),y.createElement("line",{x1:"510",x2:"320",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"100",y2:"150"})),y.createElement("g",{className:"body",stroke:zt,strokeWidth:"28px"},y.createElement("path",{fill:"none",d:" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z "})),y.createElement("g",{className:"motors",stroke:zt,strokeWidth:"28px"},y.createElement("path",{className:"motor",fill:"none",d:" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z "}),y.createElement("path",{className:"motor",fill:"none",d:" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z "})),y.createElement("g",{className:"propellers",fill:zt},y.createElement("path",{className:"prop",d:" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z "}),y.createElement("path",{className:"prop",d:" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z "})))},defaultSize:{width:100,height:26},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??26,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>({pitchAngle:e?.pitchAngle?t.getScalar(e.pitchAngle).value():0}),registerOptionsUI:t=>{const e=["Drone Side"];t.addCustomEditor({category:e,id:"pitchAngle",path:"config.pitchAngle",name:"Pitch Angle",editor:It.k9})}},rd=t=>({droneSide:(0,U.css)`
    transition: transform 0.4s;
  `}),nd={id:"droneTop",name:"Drone Top",description:"Drone top",display:({data:t})=>{const e=(0,Dt.wW)(ad),n=`spin ${t?.fRightRotorRPM?60/Math.abs(t.fRightRotorRPM):0}s linear infinite`,r=`spin ${t?.fLeftRotorRPM?60/Math.abs(t.fLeftRotorRPM):0}s linear infinite`,a=`spin ${t?.bRightRotorRPM?60/Math.abs(t.bRightRotorRPM):0}s linear infinite`,i=`spin ${t?.bLeftRotorRPM?60/Math.abs(t.bLeftRotorRPM):0}s linear infinite`,s=`rotate(${t?.yawAngle?t.yawAngle:0}deg)`;return y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"-43 -43 640 640",xmlSpace:"preserve",style:{transform:s,fill:zt}},y.createElement("path",{fillRule:"evenodd",d:" M 137.95 127.967 C 137.14 127.157 136.189 126.58 135.178 126.218 C 138.173 121.545 139.967 116.036 140.125 110.123 L 217.64 151.862 C 214.049 157.411 211.8 163.922 211.386 170.95 L 209.694 199.712 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 Z  M 134.268 426.981 C 130.211 421.314 124.328 417.045 117.482 415.041 L 201.999 330.523 L 201.385 340.955 C 200.67 353.107 202.829 364.914 207.563 375.673 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 Z  M 324.765 373.673 L 228.527 373.673 Q 215.374 358.611 216.361 341.835 L 226.361 171.832 C 226.825 163.94 231.012 157.096 237.146 152.957 L 316.146 152.957 C 322.28 157.096 326.466 163.94 326.931 171.832 L 336.931 341.835 Q 337.918 358.611 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 Z  M 435.81 415.041 C 428.964 417.045 423.081 421.314 419.024 426.981 L 345.727 375.673 C 350.461 364.914 352.62 353.107 351.905 340.955 L 351.291 330.523 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 Z  M 343.596 199.713 L 341.904 170.951 C 341.49 163.923 339.242 157.411 335.651 151.863 L 413.167 110.124 C 413.325 116.037 415.119 121.546 418.114 126.219 C 417.103 126.581 416.152 127.158 415.342 127.968 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 Z  M 444.646 92.771 C 453.744 92.771 461.146 100.172 461.146 109.271 C 461.146 118.369 453.744 125.771 444.646 125.771 C 435.548 125.771 428.146 118.369 428.146 109.271 C 428.146 100.172 435.548 92.771 444.646 92.771 L 444.646 92.771 L 444.646 92.771 L 444.646 92.771 Z  M 108.647 92.771 C 117.745 92.771 125.147 100.172 125.147 109.271 C 125.147 118.369 117.745 125.771 108.647 125.771 C 99.549 125.771 92.147 118.369 92.147 109.271 C 92.147 100.172 99.549 92.771 108.647 92.771 L 108.647 92.771 L 108.647 92.771 Z  M 108.647 461.771 C 99.549 461.771 92.147 454.369 92.147 445.271 C 92.147 436.172 99.549 428.771 108.647 428.771 C 117.745 428.771 125.147 436.172 125.147 445.271 C 125.147 454.369 117.745 461.771 108.647 461.771 L 108.647 461.771 Z  M 92.322 136.202 C 97.086 139.1 102.675 140.771 108.647 140.771 C 114.883 140.771 120.697 138.941 125.594 135.802 C 125.956 136.813 126.534 137.764 127.343 138.573 L 207.342 218.573 C 207.711 218.942 208.109 219.264 208.528 219.54 L 203.212 309.908 C 201.794 310.182 200.44 310.869 199.342 311.967 L 95.343 415.967 C 94.954 416.356 94.62 416.779 94.335 417.224 C 93.651 417.575 92.976 417.942 92.322 418.34 Q 84.615 424.182 81.716 428.946 C 78.817 433.71 77.147 439.299 77.147 445.271 C 77.147 462.64 91.278 476.771 108.647 476.771 C 114.619 476.771 120.208 475.1 124.972 472.202 C 129.736 469.304 132.678 466.36 135.577 461.596 C 138.476 456.832 140.147 451.243 140.147 445.271 C 140.147 443.943 140.055 442.637 139.895 441.352 L 214.997 388.78 C 217.05 391.677 336.242 391.678 338.295 388.78 L 413.398 441.352 C 413.238 442.637 413.146 443.943 413.146 445.271 C 413.146 451.243 414.817 456.832 417.715 461.596 C 420.613 466.36 423.557 469.304 428.321 472.202 C 433.085 475.1 438.674 476.771 444.646 476.771 C 462.015 476.771 476.146 462.64 476.146 445.271 C 476.146 439.299 474.475 433.71 471.577 428.946 C 468.679 424.182 459.642 417.575 458.958 417.224 C 458.672 416.779 458.339 416.356 457.95 415.967 L 353.95 311.967 C 352.852 310.869 351.498 310.182 350.08 309.908 L 344.764 219.54 C 345.183 219.264 345.581 218.942 345.95 218.573 L 425.95 138.573 C 426.76 137.763 427.337 136.812 427.699 135.802 C 432.596 138.941 438.409 140.771 444.646 140.771 C 450.618 140.771 456.207 139.1 460.971 136.202 C 465.735 133.304 468.679 130.36 471.577 125.596 C 474.475 120.832 476.146 115.243 476.146 109.271 C 476.146 91.903 462.015 77.772 444.646 77.772 C 438.674 77.772 433.085 79.442 428.321 82.34 L 416.215 91.446 L 324.765 140.688 C 318.402 136.324 310.718 133.771 302.473 133.771 L 250.819 133.771 C 242.574 133.771 234.89 136.324 228.527 140.688 L 137.078 91.446 L 124.972 82.34 C 120.208 79.442 114.619 77.772 108.647 77.772 C 91.278 77.772 77.147 91.903 77.147 109.271 C 77.147 115.243 78.818 120.832 81.716 125.595 C 84.614 130.358 87.558 133.304 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 Z  M 444.646 461.771 C 435.548 461.771 428.146 454.369 428.146 445.271 C 428.146 436.172 435.548 428.771 444.646 428.771 C 453.744 428.771 461.146 436.172 461.146 445.271 C 461.146 454.369 453.744 461.771 444.646 461.771 Z "}),y.createElement("path",{fillRule:"evenodd",d:" M 259.458 334.235 L 259.458 337.211 L 254.514 337.211 L 254.514 350.795 L 250.842 350.795 L 250.842 337.211 L 245.898 337.211 L 245.898 334.235 L 259.458 334.235 Z  M 266.226 347.939 L 272.586 347.939 L 272.754 350.627 L 272.754 350.627 Q 270.498 350.867 265.074 350.867 L 265.074 350.867 L 265.074 350.867 Q 263.418 350.867 262.434 349.967 L 262.434 349.967 L 262.434 349.967 Q 261.45 349.067 261.426 347.531 L 261.426 347.531 L 261.426 337.499 L 261.426 337.499 Q 261.45 335.963 262.434 335.063 L 262.434 335.063 L 262.434 335.063 Q 263.418 334.163 265.074 334.163 L 265.074 334.163 L 265.074 334.163 Q 270.498 334.163 272.754 334.403 L 272.754 334.403 L 272.586 337.115 L 266.226 337.115 L 266.226 337.115 Q 265.626 337.115 265.362 337.403 L 265.362 337.403 L 265.362 337.403 Q 265.098 337.691 265.098 338.339 L 265.098 338.339 L 265.098 340.859 L 271.698 340.859 L 271.698 343.499 L 265.098 343.499 L 265.098 346.691 L 265.098 346.691 Q 265.098 347.363 265.362 347.651 L 265.362 347.651 L 265.362 347.651 Q 265.626 347.939 266.226 347.939 L 266.226 347.939 Z  M 275.202 333.995 L 278.73 333.995 L 278.73 346.931 L 278.73 346.931 Q 278.73 348.131 280.074 348.131 L 280.074 348.131 L 281.034 348.131 L 281.442 350.603 L 281.442 350.603 Q 280.53 351.083 278.61 351.083 L 278.61 351.083 L 278.61 351.083 Q 277.026 351.083 276.114 350.231 L 276.114 350.231 L 276.114 350.231 Q 275.202 349.379 275.202 347.819 L 275.202 347.819 L 275.202 333.995 Z  M 283.05 333.995 L 286.578 333.995 L 286.578 346.931 L 286.578 346.931 Q 286.578 348.131 287.922 348.131 L 287.922 348.131 L 288.882 348.131 L 289.29 350.603 L 289.29 350.603 Q 288.378 351.083 286.458 351.083 L 286.458 351.083 L 286.458 351.083 Q 284.874 351.083 283.962 350.231 L 283.962 350.231 L 283.962 350.231 Q 283.05 349.379 283.05 347.819 L 283.05 347.819 L 283.05 333.995 Z  M 292.086 335.759 L 292.086 335.759 L 292.086 335.759 Q 293.634 333.923 297.618 333.923 L 297.618 333.923 L 297.618 333.923 Q 301.602 333.923 303.162 335.759 L 303.162 335.759 L 303.162 335.759 Q 304.722 337.595 304.722 342.515 L 304.722 342.515 L 304.722 342.515 Q 304.722 347.435 303.162 349.271 L 303.162 349.271 L 303.162 349.271 Q 301.602 351.107 297.618 351.107 L 297.618 351.107 L 297.618 351.107 Q 293.634 351.107 292.086 349.271 L 292.086 349.271 L 292.086 349.271 Q 290.538 347.435 290.538 342.515 L 290.538 342.515 L 290.538 342.515 Q 290.538 337.595 292.086 335.759 Z  M 300.174 338.051 L 300.174 338.051 L 300.174 338.051 Q 299.49 336.875 297.618 336.875 L 297.618 336.875 L 297.618 336.875 Q 295.746 336.875 295.062 338.051 L 295.062 338.051 L 295.062 338.051 Q 294.378 339.227 294.378 342.515 L 294.378 342.515 L 294.378 342.515 Q 294.378 345.803 295.062 346.979 L 295.062 346.979 L 295.062 346.979 Q 295.746 348.155 297.618 348.155 L 297.618 348.155 L 297.618 348.155 Q 299.49 348.155 300.174 346.979 L 300.174 346.979 L 300.174 346.979 Q 300.858 345.803 300.858 342.515 L 300.858 342.515 L 300.858 342.515 Q 300.858 339.227 300.174 338.051 Z "}),y.createElement("g",{className:"propeller-group"},y.createElement("path",{className:`${e.propeller} ${e.propellerCW}`,style:{animation:a},d:" M 461.563 418.77 L 463.992 416.34 Q 465.495 407.116 466.461 400.395 C 467.426 393.675 469.363 388.087 474.731 383.284 Q 533.862 341.514 538.196 338.859 C 542.529 336.203 548.345 334.299 551.492 338.29 C 554.639 342.282 553.481 346.02 549.419 350.082 L 471.147 428.354 L 461.563 418.77 Z  M 427.729 471.772 L 425.299 474.202 Q 423.797 483.426 422.831 490.146 C 421.866 496.867 419.929 502.454 414.561 507.257 Q 355.43 549.028 351.096 551.683 C 346.763 554.338 340.947 556.243 337.8 552.251 C 334.653 548.26 335.811 544.522 339.873 540.46 L 418.145 462.187 L 427.729 471.772 Z "}),y.createElement("path",{className:`${e.propeller} ${e.propellerCCW}`,style:{animation:n},d:" M 461.563 135.773 L 463.992 138.203 Q 465.495 147.426 466.461 154.147 C 467.426 160.868 469.363 166.455 474.731 171.258 Q 533.862 213.028 538.196 215.684 C 542.529 218.339 548.345 220.244 551.492 216.252 C 554.639 212.26 553.481 208.523 549.419 204.46 L 471.147 126.188 L 461.563 135.773 Z  M 427.729 82.77 L 425.299 80.34 Q 423.797 71.117 422.831 64.396 C 421.866 57.675 419.929 52.088 414.561 47.285 Q 355.43 5.515 351.096 2.859 C 346.763 0.204 340.947 -1.701 337.8 2.291 C 334.653 6.282 335.811 10.02 339.873 14.082 L 418.145 92.355 L 427.729 82.77 Z "}),y.createElement("path",{className:`${e.propeller} ${e.propellerCCW}`,style:{animation:i},d:" M 125.563 471.772 L 127.993 474.202 Q 129.496 483.426 130.461 490.146 C 131.427 496.867 133.363 502.454 138.731 507.257 Q 197.863 549.028 202.196 551.683 C 206.53 554.338 212.345 556.243 215.492 552.251 C 218.639 548.26 217.482 544.522 213.419 540.46 L 135.148 462.187 L 125.563 471.772 Z  M 91.73 418.77 L 89.3 416.34 Q 87.797 407.116 86.832 400.395 C 85.866 393.675 83.93 388.087 78.562 383.284 Q 19.431 341.514 15.097 338.859 C 10.763 336.203 4.948 334.299 1.801 338.29 C -1.346 342.282 -0.189 346.02 3.874 350.082 L 82.146 428.354 L 91.73 418.77 Z "}),y.createElement("path",{className:`${e.propeller} ${e.propellerCW}`,style:{animation:r},d:" M 125.563 82.77 L 127.993 80.34 Q 129.496 71.117 130.461 64.396 C 131.427 57.675 133.363 52.088 138.731 47.285 Q 197.863 5.515 202.196 2.859 C 206.53 0.204 212.345 -1.701 215.492 2.291 C 218.639 6.282 217.482 10.02 213.419 14.083 L 135.147 92.355 L 125.563 82.77 Z  M 91.73 135.773 L 89.3 138.203 Q 87.797 147.426 86.832 154.147 C 85.866 160.868 83.93 166.455 78.562 171.258 Q 19.431 213.028 15.097 215.684 C 10.763 218.339 4.948 220.243 1.801 216.252 C -1.346 212.26 -0.189 208.523 3.874 204.46 L 82.146 126.188 L 91.73 135.773 Z "})))},defaultSize:{width:100,height:100},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}}}),prepareData:(t,e)=>({bRightRotorRPM:e?.bRightRotorRPM?t.getScalar(e.bRightRotorRPM).value():0,bLeftRotorRPM:e?.bLeftRotorRPM?t.getScalar(e.bLeftRotorRPM).value():0,fRightRotorRPM:e?.fRightRotorRPM?t.getScalar(e.fRightRotorRPM).value():0,fLeftRotorRPM:e?.fLeftRotorRPM?t.getScalar(e.fLeftRotorRPM).value():0,yawAngle:e?.yawAngle?t.getScalar(e.yawAngle).value():0}),registerOptionsUI:t=>{const e=["Drone Top"];t.addCustomEditor({category:e,id:"yawAngle",path:"config.yawAngle",name:"Yaw Angle",editor:It.k9}).addCustomEditor({category:e,id:"fRightRotorRPM",path:"config.fRightRotorRPM",name:"Front Right Rotor RPM",editor:It.k9}).addCustomEditor({category:e,id:"fLeftRotorRPM",path:"config.fLeftRotorRPM",name:"Front Left Rotor RPM",editor:It.k9}).addCustomEditor({category:e,id:"bRightRotorRPM",path:"config.bRightRotorRPM",name:"Back Right Rotor RPM",editor:It.k9}).addCustomEditor({category:e,id:"bLeftRotorRPM",path:"config.bLeftRotorRPM",name:"Back Left Rotor RPM",editor:It.k9})}},ad=t=>({propeller:(0,U.css)`
    transform-origin: 50% 50%;
    transform-box: fill-box;
    display: block;
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }
  `,propellerCW:(0,U.css)`
    animation-direction: normal;
  `,propellerCCW:(0,U.css)`
    animation-direction: reverse;
  `});var Sa=F(64084),vr=F(29080);class id extends y.PureComponent{render(){const{data:e}=this.props,n=od(He.config.theme2,e);return y.createElement("div",{className:n.container},y.createElement("span",{className:n.span},e?.text))}}const od=(0,Sa.B)((t,e)=>({container:(0,U.css)`
    display: table;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 100%;
    height: 100%;
    background-color: ${e?.backgroundColor};
    border: ${e?.width}px solid ${e?.borderColor};
    border-radius: 50%;
  `,span:(0,U.css)`
    display: table-cell;
    vertical-align: ${e?.valign};
    text-align: ${e?.align};
    font-size: ${e?.size}px;
    color: ${e?.color};
  `})),sd={id:"ellipse",name:"Ellipse",description:"Ellipse",display:id,defaultSize:{width:160,height:160},getNewOptions:t=>({...t,config:{backgroundColor:{fixed:zt},borderColor:{fixed:"transparent"},width:1,align:ht.Center,valign:xt.Middle,color:{fixed:Ca}},background:{color:{fixed:"transparent"}}}),prepareData:(t,e)=>{const n={width:e.width,text:e.text?t.getText(e.text).value():"",align:e.align??ht.Center,valign:e.valign??xt.Middle,size:e.size};return e.backgroundColor&&(n.backgroundColor=t.getColor(e.backgroundColor).value()),e.borderColor&&(n.borderColor=t.getColor(e.borderColor).value()),e.color&&(n.color=t.getColor(e.color).value()),n},registerOptionsUI:t=>{const e=["Ellipse"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Ar.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:vr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:ht.Left,label:"Left"},{value:ht.Center,label:"Center"},{value:ht.Right,label:"Right"}]},defaultValue:ht.Left}).addCustomEditor({category:e,id:"config.borderColor",path:"config.borderColor",name:"Ellipse border color",editor:vr.L,settings:{},defaultValue:{}}).addNumberInput({category:e,path:"config.width",name:"Ellipse border width",settings:{placeholder:"Auto"}}).addCustomEditor({category:e,id:"config.backgroundColor",path:"config.backgroundColor",name:"Ellipse background color",editor:vr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:xt.Top,label:"Top"},{value:xt.Middle,label:"Middle"},{value:xt.Bottom,label:"Bottom"}]},defaultValue:xt.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}};var ld=F(65132),Da=F(85256);const cd=(0,U.css)`
  path {
    vector-effect: non-scaling-stroke;
  }
`;function ud(t){const{data:e}=t;if(!e?.path)return null;const n={fill:e?.fill,stroke:e?.strokeColor,strokeWidth:e?.stroke,height:"100%",width:"100%"};return y.createElement(ld.V,{src:e.path,style:n,className:n.strokeWidth?cd:void 0})}const dd={id:"icon",name:"Icon",description:"SVG Icon display",display:ud,getNewOptions:t=>({...t,config:{path:{mode:Pr.Q8.Fixed,fixed:"img/icons/unicons/question-circle.svg"},fill:{fixed:zt}},background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top??100,left:t?.placement?.left??100}}),prepareData:(t,e)=>{let n;e.path&&(n=t.getResource(e.path).value()),(!n||!(0,ve.isString)(n))&&(n=(0,Da.getPublicOrAbsoluteUrl)("img/icons/unicons/question-circle.svg"));const r={path:n,fill:e.fill?t.getColor(e.fill).value():zt};return e.stroke?.width&&e.stroke.color&&e.stroke.width>0&&(r.stroke=e.stroke?.width,r.strokeColor=t.getColor(e.stroke.color).value()),r},registerOptionsUI:t=>{const e=["Icon"];t.addCustomEditor({category:e,id:"iconSelector",path:"config.path",name:"SVG Path",editor:It.Lv,settings:{resourceType:"icon"}}).addCustomEditor({category:e,id:"config.fill",path:"config.fill",name:"Fill color",editor:It.Lm,settings:{},defaultValue:{fixed:"grey"}})}};var Cn=F(67534),_o=F(63302),zr=F(31276),fd=F(57669),zo=F(29711),Fo=F(69330),Go=F(28833);class pd extends y.PureComponent{render(){const{config:e}=this.props;return y.createElement("div",null,y.createElement("h3",null,"NOT FOUND:"),y.createElement("pre",null,JSON.stringify(e,null,2)))}}const wa={id:"not-found",name:"Not found",description:"Display when element type is not found in the registry",display:pd,defaultSize:{width:100,height:100},getNewOptions:()=>({config:{}})};let vd=0;class xn{constructor(e,n,r){this.item=e,this.options=n,this.parent=r,this.UID=vd++,this.revId=0,this.sizeStyle={},this.dataStyle={},this.initElement=s=>{this.div=s,this.applyLayoutStylesToDiv()},this.applyDrag=s=>{const o=this.options.constraint?.horizontal===ot.Center,l=this.options.constraint?.vertical===st.Center;if((o||l)&&!((this.getScene()?.selecto?.getSelectedTargets().length??0)>1)){const f=this.div?.getBoundingClientRect()?.height??100,p=l?f/4:0;s.target.style.transform=`translate(${s.translate[0]}px, ${s.translate[1]-p}px)`;return}s.target.style.transform=s.transform},this.applyResize=s=>{const o=this.options.placement,l=s.target.style,c=s.delta[0],u=s.delta[1],d=s.direction[0],f=s.direction[1];d===1?(o.width=s.width,l.width=`${o.width}px`):d===-1&&(o.left-=c,o.width=s.width,l.left=`${o.left}px`,l.width=`${o.width}px`),f===-1?(o.top-=u,o.height=s.height,l.top=`${o.top}px`,l.height=`${o.height}px`):f===1&&(o.height=s.height,l.height=`${o.height}px`)},this.handleMouseEnter=(s,o)=>{const l=this.getScene();l?.isEditingEnabled?o||l?.connections.handleMouseEnter(s):this.handleTooltip(s)},this.handleTooltip=s=>{const o=this.getScene();if(o?.tooltipCallback){const l=this.div?.getBoundingClientRect();o.tooltipCallback({anchorPoint:{x:l?.right??s.pageX,y:l?.top??s.pageY},element:this,isOpen:!1})}},this.handleMouseLeave=s=>{const o=this.getScene();o?.tooltipCallback&&!o?.tooltip?.isOpen&&o.tooltipCallback(void 0)},this.onElementClick=s=>{this.onTooltipCallback()},this.onElementKeyDown=s=>{s.key==="Enter"&&(s.currentTarget instanceof HTMLElement||s.currentTarget instanceof SVGElement)&&this.getScene()?.select({targets:[s.currentTarget]})},this.onTooltipCallback=()=>{const s=this.getScene();s?.tooltipCallback&&s.tooltip?.anchorPoint&&s.tooltipCallback({anchorPoint:{x:s.tooltip.anchorPoint.x,y:s.tooltip.anchorPoint.y},element:this,isOpen:!0})};const a=`Element ${Date.now()}`;n||(this.options={type:e.id,name:a}),n.constraint=n.constraint??{vertical:st.Top,horizontal:ot.Left},n.placement=n.placement??{width:100,height:100,top:0,left:0},n.background=n.background??{color:{fixed:"transparent"}},n.border=n.border??{color:{fixed:"dark-green"}};const i=this.getScene();if(!n.name){const s=i?.getNextElementName();n.name=s??a}i?.byName.set(n.name,this)}getScene(){let e=this.parent;for(;e;){if(e.isRoot())return e.scene;e=e.parent}}getName(){return this.options.name}applyLayoutStylesToDiv(e){if(this.isRoot())return;const{constraint:n}=this.options,{vertical:r,horizontal:a}=n??{},i=this.options.placement??{},o={cursor:this.getScene()?.isEditingEnabled?"grab":"auto",pointerEvents:e?"none":"auto",position:"absolute",minWidth:"10px",minHeight:"10px"},l=["0px","0px"];switch(r){case st.Top:i.top=i.top??0,i.height=i.height??100,o.top=`${i.top}px`,o.height=`${i.height}px`,delete i.bottom;break;case st.Bottom:i.bottom=i.bottom??0,i.height=i.height??100,o.bottom=`${i.bottom}px`,o.height=`${i.height}px`,delete i.top;break;case st.TopBottom:i.top=i.top??0,i.bottom=i.bottom??0,o.top=`${i.top}px`,o.bottom=`${i.bottom}px`,delete i.height,o.height="";break;case st.Center:i.top=i.top??0,i.height=i.height??100,l[1]="-50%",o.top=`calc(50% - ${i.top}px)`,o.height=`${i.height}px`,delete i.bottom;break;case st.Scale:i.top=i.top??0,i.bottom=i.bottom??0,o.top=`${i.top}%`,o.bottom=`${i.bottom}%`,delete i.height,o.height="";break}switch(a){case ot.Left:i.left=i.left??0,i.width=i.width??100,o.left=`${i.left}px`,o.width=`${i.width}px`,delete i.right;break;case ot.Right:i.right=i.right??0,i.width=i.width??100,o.right=`${i.right}px`,o.width=`${i.width}px`,delete i.left;break;case ot.LeftRight:i.left=i.left??0,i.right=i.right??0,o.left=`${i.left}px`,o.right=`${i.right}px`,delete i.width,o.width="";break;case ot.Center:i.left=i.left??0,i.width=i.width??100,l[0]="-50%",o.left=`calc(50% - ${i.left}px)`,o.width=`${i.width}px`,delete i.right;break;case ot.Scale:i.left=i.left??0,i.right=i.right??0,o.left=`${i.left}%`,o.right=`${i.right}%`,delete i.width,o.width="";break}if(o.transform=`translate(${l[0]}, ${l[1]})`,this.options.placement=i,this.sizeStyle=o,this.div){for(const c in this.sizeStyle)this.div.style[c]=this.sizeStyle[c];for(const c in this.dataStyle)this.div.style[c]=this.dataStyle[c]}}setPlacementFromConstraint(e,n){const{constraint:r}=this.options,{vertical:a,horizontal:i}=r??{};e||(e=this.div&&this.div.getBoundingClientRect());let s=0;n||(n=this.div&&this.div.parentElement?.getBoundingClientRect(),s=this.parent?.isRoot()?0:parseFloat(getComputedStyle(this.div?.parentElement).borderWidth));const o=e&&n?Math.round(e.top-n.top-s):0,l=e&&n?Math.round(n.bottom-s-e.bottom):0,c=e&&n?Math.round(e.left-n.left-s):0,u=e&&n?Math.round(n.right-s-e.right):0,d={},f=e?.width??100,p=e?.height??100;switch(a){case st.Top:d.top=o,d.height=p;break;case st.Bottom:d.bottom=l,d.height=p;break;case st.TopBottom:d.top=o,d.bottom=l;break;case st.Center:const v=e?o+p/2:0,m=(n?n.height/2:0)-v;d.top=m,d.height=p;break;case st.Scale:d.top=o/(n?.height??p)*100,d.bottom=l/(n?.height??p)*100;break}switch(i){case ot.Left:d.left=c,d.width=f;break;case ot.Right:d.right=u,d.width=f;break;case ot.LeftRight:d.left=c,d.right=u;break;case ot.Center:const v=e?c+f/2:0,m=(n?n.width/2:0)-v;d.left=m,d.width=f;break;case ot.Scale:d.left=c/(n?.width??f)*100,d.right=u/(n?.width??f)*100;break}this.options.placement=d,this.applyLayoutStylesToDiv(),this.revId++,this.getScene()?.save()}updateData(e){this.item.prepareData&&(this.data=this.item.prepareData(e,this.options.config),this.revId++);const{background:n,border:r}=this.options,a={};if(n){if(n.color){const i=e.getColor(n.color);a.backgroundColor=i.value()}if(n.image){const i=e.getResource(n.image);if(i){const s=i.value();if(s)switch(a.backgroundImage=`url("${s}")`,n.size??te.Contain){case te.Contain:a.backgroundSize="contain",a.backgroundRepeat="no-repeat";break;case te.Cover:a.backgroundSize="cover",a.backgroundRepeat="no-repeat";break;case te.Original:a.backgroundRepeat="no-repeat";break;case te.Tile:a.backgroundRepeat="repeat";break;case te.Fill:a.backgroundSize="100% 100%";break}else a.backgroundImage=""}}}if(r&&r.color&&r.width!==void 0){const i=e.getColor(r.color);a.borderWidth=`${r.width}px`,a.borderStyle="solid",a.borderColor=i.value(),a.backgroundImage&&(a.backgroundOrigin="padding-box")}this.dataStyle=a,this.applyLayoutStylesToDiv()}isRoot(){return!1}visit(e){e(this)}onChange(e){this.item.id!==e.type&&(this.item=Gr.getIfExists(e.type)??wa);const n=this.options.name,r=e.name;this.revId++,this.options={...e};let a=this.parent;for(;a;){if(a.isRoot()){a.scene.save();break}a.revId++,a=a.parent}const i=this.getScene();n!==r&&i&&(Ho(this,i.byName)&&Yo(this,i).forEach(s=>{s.info.targetName=r}),i.byName.delete(n),i.byName.set(r,this))}getSaveModel(){return{...this.options}}render(){const{item:e,div:n}=this,r=this.getScene(),a=n&&r&&r.selecto&&r.selecto.getSelectedTargets().includes(n);return y.createElement("div",{key:this.UID,ref:this.initElement,onMouseEnter:i=>this.handleMouseEnter(i,a),onMouseLeave:r?.isEditingEnabled?void 0:this.handleMouseLeave,onClick:r?.isEditingEnabled?void 0:this.onElementClick,onKeyDown:r?.isEditingEnabled?void 0:this.onElementKeyDown,role:"button",tabIndex:0},y.createElement(e.display,{key:`${this.UID}/${this.revId}`,config:this.options.config,data:this.data,isSelected:a}))}}function Ko(t,e){try{let n={targets:[]};if(e instanceof jt){const r=[];r.push(e?.div),n.targets=r,n.frame=e,t.select(n)}else t.currentLayer=e.parent,n.targets=[e?.div],t.select(n)}catch{Go.Z.emit(Br.SI.alertError,["Unable to select element, try selecting element in panel instead"])}}function Sn(t,e){return Wo(t?[...wn,...jo]:[...wn],e)}function Wo(t,e){const n={options:[],current:[]},r=[];for(const a of t){const i={label:a.name,value:a.id,description:a.description};if(a.state===Po.BV.alpha){if(!He.Oh)continue;i.label=`${a.name} (Alpha)`,r.push(i)}else n.options.push(i);a.id===e&&n.current.push(i)}for(const a of r)n.options.push(a);return n}function Ma(t,e,n){const r=Gr.getIfExists(t.value)??wa,a={...r.getNewOptions(),type:r.id,name:""};if(n&&(a.placement={...a.placement,top:n.y,left:n.x}),r.defaultSize&&(a.placement={...a.placement,...r.defaultSize}),e){const i=new xn(r,a,e);i.updateData(e.scene.context),e.elements.push(i),e.scene.save(),e.reinitializeMoveable(),setTimeout(()=>Ko(e.scene,i))}}function $o(t,e,n){const a=t.getPanelData()?.series,i=[],s=new Set;return a?.forEach(o=>{const l=o.fields.filter(c=>!c.config.custom?.hideFrom?.tooltip);if(e.text?.field&&l.some(c=>(0,Fo.CZ)(c,o)===e.text?.field)){const c=l.filter(u=>(0,Fo.CZ)(u,o)===e.text?.field)[0];if(c?.getLinks){const u=c.display?c.display(n):{text:`${n}`,numeric:+n};c.getLinks({calculatedValue:u}).forEach(d=>{const f=`${d.title}/${d.href}`;s.has(f)||(i.push(d),s.add(f))})}}}),i}function hd(t){return t.options.connections&&t.options.connections.length>0}function Ho(t,e){return Vo(e).some(r=>r.target===t)}function Vo(t){const e=[];for(let n of t.values())n.options.connections&&n.options.connections.forEach((r,a)=>{(0,ve.isString)(r.color)&&(r.color={fixed:r.color}),(0,ve.isNumber)(r.size)&&(r.size={fixed:2,min:1,max:10});const i=r.targetName?t.get(r.targetName):n.parent;i&&e.push({index:a,source:n,target:i,info:r})});return e}function Yo(t,e){return e.connections.state.filter(n=>n.target===t)}function gd(t,e){Yo(t,e).forEach(r=>{const i=(r.source.options.connections?.splice(0)??[]).filter(s=>s.targetName!==t.getName());r.source.onChange({...r.source.options,connections:i})})}const md={settings:{}},yd=t=>{const{data:e,isSelected:n,config:r}=t,a=(0,Dt.wW)(Xo(e)),i=(0,zr.R9)(),s=i.instanceState?.scene;let o;o=i.instanceState?.scene?.data.series;const l=(0,Cn.Z)(s?.editModeEnabled??(0,_o.of)(!1)),c=()=>o&&r.text?.field&&u()?"Field not found":o&&r.text?.field&&!e?.text?"No data":e?.text?e.text:"Double click to set field",u=()=>{const d=(0,zo.g2)(o);return!(0,zo.w3)(r.text?.field,d)};return l&&n?y.createElement(Ed,{...t}):y.createElement("div",{className:a.container},y.createElement("span",{className:a.span},c()))},Ed=t=>{let{data:e,config:n}=t;const r=(0,zr.R9)();let a;a=r.instanceState?.scene?.data.series;const i=(0,y.useCallback)(o=>{let l;if(l=r.instanceState?.selected[0],l){const c=l.options;l.onChange({...c,config:{...c.config,text:{fixed:"",field:o,mode:Pr.xy.Field}},background:{color:{field:o,fixed:c.background?.color?.fixed??""}}});const u=r.instanceState?.scene;u&&(u.editModeEnabled.next(!1),u.updateData(u.data))}},[r.instanceState?.scene,r.instanceState?.selected]),s=(0,Dt.wW)(Xo(e));return y.createElement("div",{className:s.inlineEditorContainer},a&&y.createElement(fd.b,{context:{data:a},value:n.text?.field??"",onChange:i,item:md}))},Xo=t=>e=>({container:(0,U.css)`
    position: absolute;
    height: 100%;
    width: 100%;
    display: table;
  `,inlineEditorContainer:(0,U.css)`
    height: 100%;
    width: 100%;
    display: flex;
    align-items: center;
    padding: 10px;
  `,span:(0,U.css)`
    display: table-cell;
    vertical-align: ${t?.valign};
    text-align: ${t?.align};
    font-size: ${t?.size}px;
    color: ${t?.color};
  `}),Fr={id:"metric-value",name:"Metric Value",description:"Display a field value",display:yd,hasEditMode:!0,defaultSize:{width:260,height:50},getNewOptions:t=>({...t,config:{align:ht.Center,valign:xt.Middle,color:{fixed:Ca},text:{mode:Pr.xy.Field,fixed:"",field:""},size:20},background:{color:{fixed:zt}},placement:{width:t?.placement?.width,height:t?.placement?.height,top:t?.placement?.top??100,left:t?.placement?.left??100}}),prepareData:(t,e)=>{const n={text:e.text?t.getText(e.text).value():"",align:e.align??ht.Center,valign:e.valign??xt.Middle,size:e.size};return e.color&&(n.color=t.getColor(e.color).value()),n.links=$o(t,e,n.text),n},registerOptionsUI:t=>{const e=["Metric value"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Ar.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:vr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:ht.Left,label:"Left"},{value:ht.Center,label:"Center"},{value:ht.Right,label:"Right"}]},defaultValue:ht.Left}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:xt.Top,label:"Top"},{value:xt.Middle,label:"Middle"},{value:xt.Bottom,label:"Bottom"}]},defaultValue:xt.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}};class bd extends y.PureComponent{render(){const{data:e}=this.props,n=Cd(He.config.theme2,e);return y.createElement("div",{className:n.container},y.createElement("span",{className:n.span},e?.text))}}const Cd=(0,Sa.B)((t,e)=>({container:(0,U.css)({position:"absolute",height:"100%",width:"100%",display:"table"}),span:(0,U.css)({display:"table-cell",verticalAlign:e?.valign,textAlign:e?.align,fontSize:`${e?.size}px`,color:e?.color})})),xd={id:"rectangle",name:"Rectangle",description:"Rectangle",display:bd,defaultSize:{width:240,height:160},getNewOptions:t=>({...t,config:{align:ht.Center,valign:xt.Middle,color:{fixed:Ca}},background:{color:{fixed:zt}}}),prepareData:(t,e)=>{const n={text:e.text?t.getText(e.text).value():"",align:e.align??ht.Center,valign:e.valign??xt.Middle,size:e.size};return e.color&&(n.color=t.getColor(e.color).value()),n},registerOptionsUI:t=>{const e=["Rectangle"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Ar.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:vr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:ht.Left,label:"Left"},{value:ht.Center,label:"Center"},{value:ht.Right,label:"Right"}]},defaultValue:ht.Left}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:xt.Top,label:"Top"},{value:xt.Middle,label:"Middle"},{value:xt.Bottom,label:"Bottom"}]},defaultValue:xt.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}},Sd=t=>{const e=(0,Dt.wW)(Dn(t));return y.createElement("g",{className:e.outline},y.createElement("g",{className:e.server},y.createElement("path",{d:"m2.6953 37.5v20.883c0 7.6725 15.592 13.922 34.805 13.922s34.805-6.2493 34.805-13.922v-20.883"}),y.createElement("path",{d:"m2.6953 16.617v20.883c0 7.7035 15.592 13.922 34.805 13.922s34.805-6.2184 34.805-13.922v-20.883"}),y.createElement("path",{d:"m37.5 30.539c19.212 0 34.805-6.2185 34.805-13.922 0-7.7034-15.592-13.922-34.805-13.922s-34.805 6.2184-34.805 13.922c0 7.7035 15.592 13.922 34.805 13.922z"})),y.createElement("g",{className:e.circleBack},y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -132.86 -110.58)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -122.04 -111.7)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.21 -114.77)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})),y.createElement("g",{className:e.circle},y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -52.337 -30.65)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -41.518 -31.769)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.688 -34.842)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})))},Dd=t=>{const e=(0,Dt.wW)(Dn(t));return y.createElement("g",null,y.createElement("g",{className:e.outline,transform:"matrix(1.01 0 0 1.01 -.375 -.375)"},y.createElement("g",{className:e.server},y.createElement("path",{d:"m3.2812 55.659 9.125-52.377h50.188l9.125 52.377"}),y.createElement("path",{d:"m3.2812 56.328c0-2.5246 2.0379-4.5625 4.5625-4.5625h59.313c2.5245 0 4.5625 2.0379 4.5625 4.5625v10.828c0 2.5245-2.038 4.5625-4.5625 4.5625h-59.313c-2.5246 0-4.5625-2.038-4.5625-4.5625z"})),y.createElement("path",{d:"m12.406 61.742h30.69"}),y.createElement("path",{d:"m52.8 51.765v19.953"}),y.createElement("path",{className:e.circleBack,transform:"matrix(2.7592 0 0 2.7592 -109.42 -108.61)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{className:e.circle,transform:"matrix(1.4775 0 0 1.4775 -29.697 -29.479)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})))},wd=t=>{const e=(0,Dt.wW)(Dn(t));return y.createElement("g",{className:e.outline,transform:"translate(.5 .49865)"},y.createElement("g",{className:e.server},y.createElement("path",{d:"m3.4834 21.768 8.0783-19.456h50.875l8.0784 19.456"}),y.createElement("path",{d:"m2.3125 24.852c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"}),y.createElement("path",{d:"m2.3125 42.031c0-2.5592 2.0658-4.6251 4.625-4.6251h60.125c2.5592 0 4.625 2.0659 4.625 4.6251v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"}),y.createElement("path",{d:"m2.3125 59.172c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"})),y.createElement("path",{d:"m11.562 28.797h31.111"}),y.createElement("path",{d:"m52.508 20.227v17.143"}),y.createElement("path",{d:"m11.562 63.117h31.111"}),y.createElement("path",{d:"m52.508 54.547v17.143"}),y.createElement("path",{d:"m11.562 45.977h31.111"}),y.createElement("path",{d:"m52.508 37.406v17.143"}),y.createElement("g",{className:e.circleBack},y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -143.2)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -126.14)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -108.86)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})),y.createElement("g",{className:e.circle},y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -63.277)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -46.209)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -28.93)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})))},Md=t=>{const e=(0,Dt.wW)(Dn(t));return y.createElement("g",{className:e.outline},y.createElement("g",{className:e.server},y.createElement("path",{d:"m5.3125 9.6562c0-3.5621 2.8754-6.4375 6.4375-6.4375h51.5c3.5621 0 6.4375 2.8754 6.4375 6.4375v28.625c0 3.5621-2.8754 6.4375-6.4375 6.4375h-51.5c-3.5621 0-6.4375-2.8754-6.4375-6.4375z"}),y.createElement("path",{d:"m2.8125 59.859c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"})),y.createElement("path",{d:"m37.5 46.719v2.875"}),y.createElement("path",{d:"m24.625 51.343h25.75"}),y.createElement("path",{d:"m12.062 63.804h31.111"}),y.createElement("path",{d:"m53.008 55.234v17.143"}),y.createElement("path",{className:e.circleBack,transform:"matrix(2.7868 0 0 2.7868 -110.81 -108.2)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{className:e.circle,transform:"matrix(1.4922 0 0 1.4922 -30.294 -28.27)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}))};var kd=(t=>(t.Single="Single",t.Stack="Stack",t.Database="Database",t.Terminal="Terminal",t))(kd||{});const Zo=He.default.theme2.colors.text.primary,Td={id:"server",name:"Server",description:"Basic server with status",display:({data:t})=>t?y.createElement("svg",{viewBox:"0 0 75 75"},t.type==="Single"?y.createElement(Dd,{...t}):t.type==="Stack"?y.createElement(wd,{...t}):t.type==="Database"?y.createElement(Sd,{...t}):t.type==="Terminal"?y.createElement(Md,{...t}):null):null,defaultSize:{width:100,height:100},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top,left:t?.placement?.left},config:{type:"Single"}}),prepareData:(t,e)=>({blinkRate:e?.blinkRate?t.getScalar(e.blinkRate).value():0,statusColor:e?.statusColor?t.getColor(e.statusColor).value():"transparent",bulbColor:e?.bulbColor?t.getColor(e.bulbColor).value():"green",type:e.type}),registerOptionsUI:t=>{const e=["Server"];t.addSelect({category:e,path:"config.type",name:"Type",settings:{options:[{value:"Single",label:"Single"},{value:"Stack",label:"Stack"},{value:"Database",label:"Database"},{value:"Terminal",label:"Terminal"}]},defaultValue:"Single"}).addCustomEditor({category:e,id:"statusColor",path:"config.statusColor",name:"Status color",editor:It.Lm,settings:{},defaultValue:{fixed:"transparent"}}).addCustomEditor({category:e,id:"bulbColor",path:"config.bulbColor",name:"Bulb color",editor:It.Lm,settings:{},defaultValue:{fixed:"green"}}).addCustomEditor({category:e,id:"blinkRate",path:"config.blinkRate",name:"Blink rate [hz] (0 = off)",editor:It.k9,settings:{min:0,max:100}})}},Dn=t=>e=>({bulb:(0,U.css)`
    @keyframes blink {
      0% {
        fill-opacity: 0;
      }
      50% {
        fill-opacity: 1;
      }
      100% {
        fill-opacity: 0;
      }
    }
  `,server:(0,U.css)`
    fill: ${t?.statusColor??"transparent"};
  `,circle:(0,U.css)`
    animation: blink ${t?.blinkRate?1/t.blinkRate:0}s infinite step-end;
    fill: ${t?.bulbColor};
    stroke: none;
  `,circleBack:(0,U.css)`
    fill: ${Zo};
    stroke: none;
    opacity: 1;
  `,outline:(0,U.css)`
    stroke: ${Zo};
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-width: 4px;
  `}),Rd=t=>{const{data:e,isSelected:n}=t,r=(0,Dt.wW)(Uo(e)),i=(0,zr.R9)().instanceState?.scene;return(0,Cn.Z)(i?.editModeEnabled??(0,_o.of)(!1))&&n?y.createElement(Od,{...t}):y.createElement("div",{className:r.container},y.createElement("span",{className:r.span},e?.text?e.text:"Double click to set text"))},Od=t=>{let{data:e,config:n}=t;const r=(0,zr.R9)();let a;a=r.instanceState?.scene?.data.series;const i=(0,y.useRef)(n.text?.fixed??"");(0,y.useEffect)(()=>()=>{l(i.current)});const s=u=>{if(u.key==="Enter"){u.preventDefault();const d=r.instanceState?.scene;d&&d.editModeEnabled.next(!1)}},o=u=>{i.current=u.currentTarget.value},l=(0,y.useCallback)(u=>{let d;if(d=r.instanceState?.selected[0],d){const f=d.options;d.onChange({...f,config:{...f.config,text:{...d.options.config.text,fixed:u}}});const p=r.instanceState?.scene;p&&p.updateData(p.data)}},[r.instanceState?.scene,r.instanceState?.selected]),c=(0,Dt.wW)(Uo(e));return y.createElement("div",{className:c.inlineEditorContainer},a&&y.createElement(Ir.I,{defaultValue:n.text?.fixed??"",onKeyDown:s,onKeyUp:o,autoFocus:!0}))},Uo=t=>e=>({container:(0,U.css)`
    position: absolute;
    height: 100%;
    width: 100%;
    display: table;
  `,inlineEditorContainer:(0,U.css)`
    height: 100%;
    width: 100%;
    display: flex;
    align-items: center;
    padding: 10px;
  `,span:(0,U.css)`
    display: table-cell;
    vertical-align: ${t?.valign};
    text-align: ${t?.align};
    font-size: ${t?.size}px;
    color: ${t?.color};
  `}),Pd={id:"text",name:"Text",description:"Display text",display:Rd,hasEditMode:!0,defaultSize:{width:100,height:50},getNewOptions:t=>({...t,config:{align:ht.Center,valign:xt.Middle,color:{fixed:Iu},size:16},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>{const n={text:e.text?t.getText(e.text).value():"",align:e.align??ht.Center,valign:e.valign??xt.Middle,size:e.size};return e.color&&(n.color=t.getColor(e.color).value()),n.links=$o(t,e,n.text),n},registerOptionsUI:t=>{const e=["Text"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:Ar.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:vr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:ht.Left,label:"Left"},{value:ht.Center,label:"Center"},{value:ht.Right,label:"Right"}]},defaultValue:ht.Left}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:xt.Top,label:"Top"},{value:xt.Middle,label:"Middle"},{value:xt.Bottom,label:"Bottom"}]},defaultValue:xt.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}},Ld={id:"windTurbine",name:"Wind Turbine",description:"Spinny spinny",display:({data:t})=>{const e=(0,Dt.wW)(Ad),n=`spin ${t?.rpm?60/Math.abs(t.rpm):0}s linear infinite`;return y.createElement("svg",{viewBox:"0 0 189.326 283.989",preserveAspectRatio:"xMidYMid meet",style:{fill:zt}},y.createElement("symbol",{id:"blade"},y.createElement("path",{fill:"#e6e6e6",id:"blade-front",d:"M14.6491879,1.85011601 C14.2684455,-0.0535962877 10.7150812,-0.815081206 9.06473318,3.37308585 L0.434338747,70.7658933 L8.93805104,91.9607889 L15.4106729,90.437819 L17.5684455,78.3807425 L14.5218097,1.97679814 L14.6491879,1.85011601 Z"}),y.createElement("path",{fill:"#d0d6d7",id:"blade-side",d:"M11.0951276,0.581206497 C10.3336427,0.961948956 9.57215777,1.85011601 8.93735499,3.24640371 L0.306960557,70.6392111 L8.81067285,91.8341067 L3.35359629,70.0044084 L11.0951276,0.581206497 Z"})),y.createElement("g",null,y.createElement("g",{id:"structure",transform:"translate(58.123, 82.664)",fillRule:"nonzero"},y.createElement("polygon",{id:"tower",fill:"#e6e6e6",points:"33.111,10.984 39.965,10.984 44.28,196.176 28.796,196.176"}),y.createElement("path",{id:"yaw",fill:"rgba(0,0,0,0.25)",d:"M40.3454756,23.2948956 L40.7262181,34.8445476 C38.8225058,35.0986079 35.7765661,35.0986079 32.349884,34.337123 L32.7306265,23.2955916 L40.3454756,23.2955916 L40.3454756,23.2948956 Z"}),y.createElement("path",{id:"base",fill:"#d0d6d7",transform:"translate(0 42)",d:"M26.3846868,150.591647 L46.5640371,150.591647 C48.8484919,150.591647 50.7522042,152.49536 50.7522042,154.779814 L50.7522042,158.967981 L22.0691415,158.967981 L22.0691415,154.779814 C22.0691415,152.49536 23.9728538,150.591647 26.2573086,150.591647 L26.3846868,150.591647 Z"}),y.createElement("circle",{id:"nacelle",fill:"#e6e6e6",cx:"36.54",cy:"12",r:"11.93"}),y.createElement("circle",{id:"gearbox",fill:"none",stroke:"#d0d6d7",strokeWidth:"2.75",cx:"36.538",cy:"11.999",r:"5.8"})),y.createElement("g",{className:e.blade,style:{animation:n}},y.createElement("use",{id:"blade1",href:"#blade",x:"83.24",y:"0"}),y.createElement("use",{id:"blade2",href:"#blade",x:"83.24",y:"0",transform:"rotate(120 94.663 94.663)"}),y.createElement("use",{id:"blade3",href:"#blade",x:"83.24",y:"0",transform:"rotate(-120 94.663 94.663)"}))))},defaultSize:{width:100,height:155},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??155,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>({rpm:e?.rpm?t.getScalar(e.rpm).value():0}),registerOptionsUI:t=>{const e=["Wind Turbine"];t.addCustomEditor({category:e,id:"rpm",path:"config.rpm",name:"RPM",editor:It.k9})}},Ad=t=>({blade:(0,U.css)`
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }

    transform-origin: 94.663px 94.663px;
    transform: rotate(15deg);
  `}),ka={...Fr.getNewOptions(),placement:{...Fr.getNewOptions().placement,...Fr.defaultSize},type:Fr.id,name:"Element 1"},wn=[Fr,Pd,sd,xd,dd,Td],jo=[qu,Ld,nd,Ju,ed],Gr=new Bu.B(()=>[...wn,...jo]);var Wt=(t=>(t.Delete="delete",t.Duplicate="duplicate",t.MoveTop="move-top",t.MoveBottom="move-bottom",t))(Wt||{}),Oe=(t=>(t.ElementManagement="element-management",t.SelectedElement="selected-element",t.SelectedConnection="selected-connection",t))(Oe||{});const he=10,Mn=50,Nd={id:"frame",name:"Frame",description:"Frame",getNewOptions:()=>({config:{}}),display:()=>y.createElement("div",null,"FRAME!")};class jt extends xn{constructor(e,n,r){super(Nd,e,r),this.options=e,this.parent=r,this.elements=[],this.doAction=(i,s,o=!0,l=!0)=>{switch(i){case Wt.Delete:this.elements=this.elements.filter(d=>d!==s),gd(s,this.scene),this.scene.byName.delete(s.options.name),this.scene.save(),this.reinitializeMoveable();break;case Wt.Duplicate:if(s.item.id==="frame"){console.log("Can not duplicate frames (yet)",i,s);return}const c=(0,ve.cloneDeep)(s.options);if(l){const{constraint:d,placement:f}=s.options,{vertical:p,horizontal:v}=d??{},h={...f};switch(p){case st.Top:h.top==null?h.top=25:h.top+=he;break;case st.Bottom:h.bottom==null?h.bottom=100:h.bottom-=he;break;case st.TopBottom:h.top==null?h.top=25:h.top+=he,h.bottom==null?h.bottom=100:h.bottom-=he;break;case st.Center:h.top!=null&&(h.top-=he);break}switch(v){case ot.Left:h.left==null?h.left=Mn:h.left+=he;break;case ot.Right:h.right==null?h.right=Mn:h.right-=he;break;case ot.LeftRight:h.left==null?h.left=Mn:h.left+=he,h.right==null?h.right=Mn:h.right-=he;break;case ot.Center:h.left!=null&&(h.left-=he);break}c.placement=h}c.connections=void 0;const u=new xn(s.item,c,this);u.updateData(this.scene.context),o&&(u.options.name=this.scene.getNextElementName()),this.elements.push(u),this.scene.byName.set(u.options.name,u),this.scene.byName.set(s.options.name,s),this.scene.save(),this.reinitializeMoveable(),setTimeout(()=>{this.scene.targetsToSelect.add(u.div)});break;case Wt.MoveTop:case Wt.MoveBottom:s.parent?.doMove(s,i);break;default:console.log("DO action",i,s);return}},this.scene=n;let{elements:a}=this.options;a||(this.options.elements=a=[]);for(const i of a)if(i.type==="frame")this.elements.push(new jt(i,n,this));else{const s=Gr.getIfExists(i.type)??wa;this.elements.push(new xn(s,i,this))}}isRoot(){return!1}updateData(e){super.updateData(e);for(const n of this.elements)n.updateData(e)}reorder(e,n){const r=Array.from(this.elements),[a]=r.splice(e,1);r.splice(n,0,a),this.elements=r,this.reinitializeMoveable()}reorderTree(e,n,r=!1){const a=Array.from(this.elements),i=this.elements.indexOf(e),s=r?this.elements.length-1:this.elements.indexOf(n),[o]=a.splice(i,1);a.splice(s,0,o),this.elements=a,this.reinitializeMoveable()}doMove(e,n){const r=this.elements.filter(a=>a!==e);n===Wt.MoveBottom?r.unshift(e):r.push(e),this.elements=r,this.scene.save(),this.reinitializeMoveable()}reinitializeMoveable(){this.scene.clearCurrentSelection(),setTimeout(()=>this.scene.initMoveable(!0,this.scene.isEditingEnabled))}render(){return y.createElement("div",{key:this.UID,ref:this.initElement},this.elements.map(e=>e.render()))}visit(e){super.visit(e);for(const n of this.elements)e(n)}getSaveModel(){return{...this.options,elements:this.elements.map(e=>e.getSaveModel())}}}var Qo=F(56989),Id=F(31544),qo=F(13601);function Bd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(a){return a?""+t+a:""}).join(" ")}).join(" ")}function _d(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function ge(t,e){return function(n){n&&(t[e]=n)}}function Jo(t,e,n){return function(r){r&&(t[e][n]=r)}}function Ta(t,e){return function(n){var r=n.prototype;t.forEach(function(a){e(r,a)})}}function zd(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(a){var i=e[a]||a;i in n||(n[i]=function(){for(var s,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var c=(s=this[r])[a].apply(s,o);return c===this[r]?this:c})})}}var Fd=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var a=this.keys,i=this.values,s=a.indexOf(n),o=s===-1?a.length:s;a[o]=n,i[o]=r},t}(),Gd=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t}(),Kd=typeof Map=="function",Wd=function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t}();function $d(t,e){var n=[],r=[];return t.forEach(function(a){var i=a[0],s=a[1],o=new Wd;n[i]=o,r[s]=o}),n.forEach(function(a,i){a.connect(n[i-1])}),t.filter(function(a,i){return!e[i]}).map(function(a,i){var s=a[0],o=a[1];if(s===o)return[0,0];var l=n[s],c=r[o-1],u=l.getIndex();l.disconnect(),c?l.connect(c,c.next):l.connect(void 0,n[0]);var d=l.getIndex();return[u,d]})}var Hd=function(){function t(n,r,a,i,s,o,l,c){this.prevList=n,this.list=r,this.added=a,this.removed=i,this.changed=s,this.maintained=o,this.changedBeforeAdded=l,this.fixed=c}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=$d(this.changedBeforeAdded,this.fixed),r=this.changed,a=[];this.cacheOrdered=n.filter(function(i,s){var o=i[0],l=i[1],c=r[s],u=c[0],d=c[1];if(o!==l)return a.push([u,d]),!0}),this.cachePureChanged=a},t}();function Kr(t,e,n){var r=Kd?Map:n?Gd:Fd,a=n||function(E){return E},i=[],s=[],o=[],l=t.map(a),c=e.map(a),u=new r,d=new r,f=[],p=[],v={},h=[],m=0,g=0;return l.forEach(function(E,b){u.set(E,b)}),c.forEach(function(E,b){d.set(E,b)}),l.forEach(function(E,b){var C=d.get(E);typeof C>"u"?(++g,s.push(b)):v[C]=g}),c.forEach(function(E,b){var C=u.get(E);typeof C>"u"?(i.push(b),++m):(o.push([C,b]),g=v[b]||0,f.push([C-g,b-m]),p.push(b===C),C!==b&&h.push([C,b]))}),s.reverse(),new Hd(t,e,i,s,h,o,f,p)}var Vd=function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),a=Kr(this.list,r,this.findKeyCallback);return this.list=r,a},t}();const Yd=Vd;var ts="rgb",es="rgba",rs="hsl",ns="hsla",Q0=[ts,es,rs,ns],Xd="function",q0="property",J0="array",Zd="object",Ud="string",jd="number",Wr="undefined",as=typeof window!==Wr,Ye=typeof document!==Wr&&document,is=null,t1=function(t){if(!Ye)return"";var e=(Ye.body||Ye.documentElement).style,n=is.length;if(typeof e[t]!==Wr)return t;for(var r=0;r<n;++r){var a="-"+is[r]+"-"+t;if(typeof e[a]!==Wr)return a}return""},e1=null,r1=null,n1=null,a1=null,Qd=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Ot=1e-7,i1=1/Ot,kn={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function qd(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function Xe(t,e,n,r){return(t*r+e*n)/(n+r)}function Tn(t){return typeof t===Wr}function Qt(t){return t&&typeof t===Zd}function Mt(t){return Array.isArray(t)}function $t(t){return typeof t===Ud}function Ra(t){return typeof t===jd}function Rn(t){return typeof t===Xd}function Jd(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function os(t,e,n,r,a){var i=Oa(t,e,n);return i?n:tf(t,e,n+1,r,a)}function Oa(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function tf(t,e,n,r,a){for(var i=function(c){var u=e[c].trim();if(u===t.close&&!Oa(t,e,c))return{value:c};var d=c,f=we(a,function(p){var v=p.open;return v===u});if(f&&(d=os(f,e,c,r,a)),d===-1)return s=c,"break";c=d,s=c},s,o=n;o<r;++o){var l=i(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function Pa(t,e){var n=$t(e)?{separator:e}:e,r=n.separator,a=r===void 0?",":r,i=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,c=n.openCloseCharacters,u=c===void 0?Qd:c,d=u.map(function(S){var k=S.open,w=S.close;return k===w?k:k+"|"+w}).join("|"),f="(\\s*"+a+"\\s*|"+d+"|\\s+)",p=new RegExp(f,"g"),v=t.split(p).filter(function(S){return S&&S!=="undefined"}),h=v.length,m=[],g=[];function E(){return g.length?(m.push(g.join("")),g=[],!0):!1}for(var b=function(S){var k=v[S].trim(),w=S,T=we(u,function(P){var L=P.open;return L===k}),R=we(u,function(P){var L=P.close;return L===k});if(T){if(w=os(T,v,S,h,u),w!==-1&&l)return E()&&i||(m.push(v.slice(S,w+1).join("")),S=w,i)?(C=S,"break"):(C=S,"continue")}else if(R&&!Oa(R,v,S)){var M=qd(u);return M.splice(u.indexOf(R),1),{value:Pa(t,{separator:a,isSeparateFirst:i,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:M})}}else if(Jd(k,a)&&!s)return E(),i?(C=S,"break"):(C=S,"continue");w===-1&&(w=h-1),g.push(v.slice(S,w+1).join("")),S=w,C=S},C,D=0;D<h;++D){var x=b(D);if(D=C,typeof x=="object")return x.value;if(x==="break")break}return g.length&&m.push(g.join("")),m}function Pe(t){return Pa(t,"")}function Le(t){return Pa(t,",")}function La(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Ze(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],a=e[3];return{prefix:n,unit:a,value:parseFloat(r)}}function Aa(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function On(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,a){return""+r+e+a.toLowerCase()})}function o1(t){return[].slice.call(t)}function $r(){return Date.now?Date.now():new Date().getTime()}function De(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=0;a<r;++a)if(e(t[a],a,t))return a;return n}function ef(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=r-1;a>=0;--a)if(e(t[a],a,t))return a;return n}function s1(t,e,n){var r=ef(t,e);return r>-1?t[r]:n}function we(t,e,n){var r=De(t,e);return r>-1?t[r]:n}var ss=function(){var t=$r(),e=as&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=$r(),a=setTimeout(function(){n(r-t)},1e3/60);return a}}(),rf=function(){var t=as&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function Ae(t){return Object.keys(t)}function l1(t){var e=Ae(t);return e.map(function(n){return t[n]})}function c1(t){var e=Ae(t);return e.map(function(n){return[n,t[n]]})}function u1(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var a=e.indexOf(n),i=e.indexOf(r);return i===-1&&a===-1?0:a===-1?1:i===-1?-1:a-i})}function bt(t,e){var n=Ze(t),r=n.value,a=n.unit;if(Qt(e)){var i=e[a];if(i){if(Rn(i))return i(r);if(kn[a])return kn[a](r,i)}}else if(a==="%")return r*e/100;return kn[a]?kn[a](r):r}function Pn(t,e,n){return Math.max(e,Math.min(t,n))}function ls(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[rt(e[0],Ot),rt(e[0]/r,Ot)],[rt(e[1]*r,Ot),rt(e[1],Ot)]].filter(function(a){return a.every(function(i,s){var o=e[s],l=rt(o,Ot);return n?i<=o||i<=l:i>=o||i>=l})})[0]||t}function cs(t,e,n,r){if(!r)return t.map(function(p,v){return Pn(p,e[v],n[v])});var a=t[0],i=t[1],s=r===!0?a/i:r,o=ls(t,e,!1,s),l=o[0],c=o[1],u=ls(t,n,!0,s),d=u[0],f=u[1];return a<l||i<c?(a=l,i=c):(a>d||i>f)&&(a=d,i=f),[a,i]}function nf(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Na(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function kt(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=Math.atan2(r,n);return a>=0?a:a+Math.PI*2}function af(t){return[0,1].map(function(e){return Na(t.map(function(n){return n[e]}))})}function Ia(t){var e=af(t),n=kt(e,t[0]),r=kt(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function ne(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function rt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function us(t,e){return t.forEach(function(n,r){t[r]=rt(t[r],e)}),t}function d1(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function f1(t,e,n){var r=!1;return t.replace(e,function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return r?a[0]:(r=!0,$t(n)?n:n.apply(void 0,a))})}function p1(t){return t.reduce(function(e,n){return e.concat(n)},[])}function of(t){return t.reduce(function(e,n){return Mt(n)?e.push.apply(e,of(n)):e.push(n),e},[])}function v1(t,e){t.indexOf(e)===-1&&t.push(e)}function sf(t){return t.replace("#","")}function ds(t){var e=sf(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;return isNaN(i)&&(i=1),[n,r,a,i]}function lf(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),a=t.charAt(4),i=["#",e,e,n,n,r,r,a,a];return i.join("")}function cf(t){var e,n=t[0],r=t[1],a=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var i=(1-Math.abs(2*a-1))*r,s=i*(1-Math.abs(n/60%2-1)),o=a-i/2,l;return n<60?l=[i,s,0]:n<120?l=[s,i,0]:n<180?l=[0,i,s]:n<240?l=[0,s,i]:n<300?l=[s,0,i]:n<360?l=[i,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function h1(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?ds(lf(t)):ds(t);if(t.indexOf("(")!==-1){var e=La(t),n=e.prefix,r=e.value;if(!n||!r)return;var a=Le(r),i=[0,0,0,1],s=a.length;switch(n){case ts:case es:for(var o=0;o<s;++o)i[o]=parseFloat(a[o]);return i;case rs:case ns:for(var o=0;o<s;++o)a[o].indexOf("%")!==-1?i[o]=parseFloat(a[o])/100:i[o]=parseFloat(a[o]);return cf(i)}}}function g1(t,e){return Ye?e?Ye.querySelectorAll(t):Ye.querySelector(t):e?[]:null}function Lt(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Ba(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function fs(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function m1(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},a=Ne(n).getComputedStyle(n),i=e.length,s=0;s<i;++s)r[e[s]]=a[e[s]];return r}function Ft(t,e,n,r){t.addEventListener(e,n,r)}function _t(t,e,n,r){t.removeEventListener(e,n,r)}function ce(t){return t?.ownerDocument||Ye}function y1(t){return ce(t).documentElement}function E1(t){return ce(t).body}function Ne(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function uf(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function ps(t){return Qt(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var _a=function(t,e){return _a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},_a(t,e)};function Ue(t,e){_a(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ie=function(){return Ie=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ie.apply(this,arguments)};function vs(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function df(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function za(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function Fa(t,e){var n=Object.keys(t),r=Object.keys(e),a=Kr(n,r,function(l){return l}),i={},s={},o={};return a.added.forEach(function(l){var c=r[l];i[c]=e[c]}),a.removed.forEach(function(l){var c=n[l];s[c]=t[c]}),a.maintained.forEach(function(l){var c=l[0],u=n[c],d=[t[u],e[u]];t[u]!==e[u]&&(o[u]=d)}),{added:i,removed:s,changed:o}}function hs(t){t.forEach(function(e){e()})}function gs(t){var e=0;return t.map(function(n){return n==null?"$compat"+ ++e:""+n})}function ms(t,e,n,r){if($t(t)||Ra(t))return new hf("text_"+t,e,n,r,null,{});var a=typeof t.type=="string"?gf:t.type.prototype.render?yf:mf;return new a(t.type,e,n,r,t.ref,t.props)}function ys(t){var e=[];return t.forEach(function(n){e=e.concat(Mt(n)?ys(n):n)}),e}function Es(t){var e=t.className,n=vs(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function Ga(t,e){if(!e)return t;for(var n in e)Tn(t[n])&&(t[n]=e[n]);return t}function ae(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=e||{},i=a.key,s=a.ref,o=vs(a,["key","ref"]);return{type:t,key:i,ref:s,props:Ie(Ie({},o),{children:ys(n).filter(function(l){return l!=null&&l!==!1})})}}var Hr=function(){function t(n,r,a,i,s,o){o===void 0&&(o={}),this.type=n,this.key=r,this.index=a,this.container=i,this.ref=s,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(n,r){return!0},e._update=function(n,r,a,i){if(this.base&&!$t(r)&&!i&&!this._should(r.props,a))return!1;this.original=r,this._setState(a);var s=this.props;return $t(r)||(this.props=r.props,this.ref=r.ref),this._render(n,this.base?s:{},a),!0},e._mounted=function(){var n=this.ref;n&&n(this.base)},e._setState=function(n){},e._updated=function(){var n=this.ref;n&&n(this.base)},e._destroy=function(){var n=this.ref;n&&n(null)},t}();function ff(t,e,n){var r=Fa(t,e),a=r.added,i=r.removed,s=r.changed;for(var o in a)n.setAttribute(o,a[o]);for(var o in s)n.setAttribute(o,s[o][1]);for(var o in i)n.removeAttribute(o)}function pf(t,e,n){var r=Fa(t,e),a=r.added,i=r.removed,s=r.changed;for(var o in i)n.removeEventListener(o);for(var o in a)n.addEventListener(o,a[o]);for(var o in s)n.removeEventListener(o),n.addEventListener(o,s[o][1]);for(var o in i)n.removeEventListener(o)}function vf(t,e,n){var r=n.style,a=Fa(t,e),i=a.added,s=a.removed,o=a.changed;for(var l in i){var c=On(l,"-");r.setProperty?r.setProperty(c,i[l]):r[c]=i[l]}for(var l in o){var c=On(l,"-");r.setProperty?r.setProperty(c,o[l][1]):r[c]=o[l][1]}for(var l in s){var c=On(l,"-");r.removeProperty?r.removeProperty(c):r[c]=""}}function bs(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var hf=function(t){Ue(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n._render=function(r){var a=this,i=!this.base;return i&&(this.base=document.createTextNode(this.type.replace("text_",""))),r.push(function(){i?a._mounted():a._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(Hr),gf=function(t){Ue(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.events={},r._isSVG=!1,r}var n=e.prototype;return n.addEventListener=function(r,a){var i=this.events;i[r]=function(s){s.nativeEvent=s,a(s)},this.base.addEventListener(r,i[r])},n.removeEventListener=function(r){var a=this.events;this.base.removeEventListener(r,a[r]),delete a[r]},n._should=function(r){return za(this.props,r)},n._render=function(r,a){var i=this,s=!this.base;if(s){var o=this._hasSVG();this._isSVG=o;var l=this.props.portalContainer;if(!l){var c=this.type;o?l=document.createElementNS("http://www.w3.org/2000/svg",c):l=document.createElement(c)}this.base=l}Yr(this,this._providers,this.props.children,r,null);var u=this.base,d=bs(a),f=d.attributes,p=d.events,v=bs(this.props),h=v.attributes,m=v.events;return ff(Es(f),Es(h),u),pf(p,m,this),vf(a.style||{},this.props.style||{},u),r.push(function(){s?i._mounted():i._updated()}),!0},n._unmount=function(){var r=this.events,a=this.base;for(var i in r)a.removeEventListener(i,r[i]);this._providers.forEach(function(s){s._unmount()}),this.events={},this.props.portalContainer||a.parentNode.removeChild(a)},n._hasSVG=function(){if(this._isSVG||this.type==="svg")return!0;var r=Ka(this.container);return r&&"ownerSVGElement"in r},e}(Hr);function Ka(t){if(!t)return null;var e=t.base;return e instanceof Node?e:Ka(t.container)}function Vr(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?Vr(e[0].base):null}var mf=function(t){Ue(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n._render=function(r){var a=this.type(this.props);return Yr(this,this._providers,a?[a]:[],r),!0},n._unmount=function(){this._providers.forEach(function(r){r._unmount()})},e}(Hr),Cs=function(t){Ue(e,t);function e(r){var a=t.call(this,"container","container",0,null)||this;return a.base=r,a}var n=e.prototype;return n._render=function(){return!0},n._unmount=function(){},e}(Hr),yf=function(t){Ue(e,t);function e(r,a,i,s,o,l){return l===void 0&&(l={}),t.call(this,r,a,i,s,o,Ga(l,r.defaultProps))||this}var n=e.prototype;return n._should=function(r,a){return this.base.shouldComponentUpdate(Ga(r,this.type.defaultProps),a||this.base.state)},n._render=function(r,a){var i=this;this.props=Ga(this.props,this.type.defaultProps);var s=!this.base;s?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var o=this.base,l=o.state,c=o.render();c&&c.props&&!c.props.children.length&&(c.props.children=this.props.children),Yr(this,this._providers,c?[c]:[],r),r.push(function(){s?(i._mounted(),o.componentDidMount()):(i._updated(),o.componentDidUpdate(a,l))})},n._setState=function(r){var a=this.base;!a||!r||(a.state=r)},n._unmount=function(){this._providers.forEach(function(r){r._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},e}(Hr),Wa=function(){function t(n){n===void 0&&(n={}),this.props=n,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(n,r){return!0},e.render=function(){return null},e.setState=function(n,r,a){var i=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=Ie(Ie({},this.$_state),n),a?this.$_setState(r,a):this.$_timer=setTimeout(function(){i.$_timer=0,i.$_setState(r,a)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var a=[],i=this.$_provider,s=Yr(i.container,[i],[i.original],a,Ie(Ie({},this.state),this.$_state),r);s&&(n&&a.push(n),hs(a))},t}(),$a=function(t){Ue(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,a){return za(this.props,r)||za(this.state,a)},e}(Wa),Ef=function(t){Ue(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.componentDidMount=function(){var r=this.props,a=r.element,i=r.container;this._portalProvider=new Cs(i),Ln(a,i,this._portalProvider)},n.componentDidUpdate=function(){var r=this.props,a=r.element,i=r.container;Ln(a,i,this._portalProvider)},n.componentWillUnmount=function(){var r=this.props.container;Ln(null,r,this._portalProvider),this._portalProvider=null},e}($a);function bf(t,e,n){var r=[];Yr(t,t._providers,e,r,n),hs(r)}function Cf(t,e){for(var n=t._providers,r=n.length,a=e.index+1;a<r;++a){var i=Vr(n[a].base);if(i)return i}return null}function xf(t,e,n){var r=n.map(function(l){return $t(l)?null:l.key}),a=gs(e.map(function(l){return l.key})),i=gs(r),s=Kr(a,i,function(l){return l});s.removed.forEach(function(l){e.splice(l,1)[0]._unmount()}),s.ordered.forEach(function(l){var c=l[0],u=l[1],d=e.splice(c,1)[0];e.splice(u,0,d);var f=Vr(d.base),p=Vr(e[u+1]&&e[u+1].base);f&&f.parentNode.insertBefore(f,p)}),s.added.forEach(function(l){e.splice(l,0,ms(n[l],r[l],l,t))});var o=s.maintained.filter(function(l){var c=l[0],u=l[1],d=n[u],f=e[u],p=$t(d)?"text_"+d:d.type;return p!==f.type?(f._unmount(),e.splice(u,1,ms(d,r[u],u,t)),!0):(f.index=u,!1)});return df(s.added,o.map(function(l){var c=l[0],u=l[1];return u}))}function Yr(t,e,n,r,a,i){var s=xf(t,e,n),o=e.filter(function(c,u){return c._update(r,n[u],a,i)}),l=Ka(t);return l&&s.reverse().forEach(function(c){var u=e[c],d=Vr(u.base);if(d&&l!==d&&!d.parentNode){var f=Cf(t,u);l.insertBefore(d,f)}}),o.length>0}function Ln(t,e,n){n===void 0&&(n=e.__REACT_COMPAT__);var r=!!n;return n||(n=new Cs(e)),bf(n,t?[t]:[]),r||(e.__REACT_COMPAT__=n),n}function xs(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),Ln(t,e,r),n&&n()}function Sf(t,e){return ae(Ef,{element:t,container:e})}var Df="simple-1.1.0";function Ha(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function Ss(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function wf(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function Va(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Ds(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function Mf(t,e){var n=Va("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function Ya(t){return t.replace(/_/g,".")}function Xr(t,e){var n=null,r="-1";return Ha(t,function(a){var i=Va("("+a.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!i||a.brand?!1:(n=a,r=i[3]||"-1",a.versionAlias?r=a.versionAlias:a.versionTest&&(r=Mf(a.versionTest.toLowerCase(),e)||r),r=Ya(r),!0)}),{preset:n,version:r}}function An(t,e){var n={brand:"",version:"-1"};return Ha(t,function(r){var a=ws(e,r);return a?(n.brand=r.id,n.version=r.versionAlias||a.version,n.version!=="-1"):!1}),n}function ws(t,e){return Ss(t,function(n){var r=n.brand;return Va(""+e.test,r.toLowerCase())})}var Ms=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],ks=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Xa=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Ts=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Rs=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Os(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,a=n[0],i={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!An(Ts,n).brand},s={name:"unknown",version:"-1",majorVersion:-1};i.webkit=!i.chromium&&Ha(Xa,function(f){return ws(n,f)});var o=An(ks,n);if(i.chromium=!!o.brand,i.chromiumVersion=o.version,!i.chromium){var l=An(Xa,n);i.webkit=!!l.brand,i.webkitVersion=l.version}if(t){var c=t.platform.toLowerCase(),u=Ss(Rs,function(f){return new RegExp(""+f.test,"g").exec(c)});s.name=u?u.id:c,s.version=t.platformVersion}var d=An(Ms,n);return d.brand&&(i.name=d.brand,i.version=t?t.uaFullVersion:d.version),navigator.platform==="Linux armv8l"?s.name="android":i.webkit&&(s.name=r?"ios":"mac"),s.name==="ios"&&i.webview&&(i.version="-1"),s.version=Ya(s.version),i.version=Ya(i.version),s.majorVersion=parseInt(s.version,10),i.majorVersion=parseInt(i.version,10),{browser:i,os:s,isMobile:r,isHints:!0}}function kf(t){var e=wf(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:!!Xr(Ts,e).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},a={name:"unknown",version:"-1",majorVersion:-1},i=Xr(Ms,e),s=i.preset,o=i.version,l=Xr(Rs,e),c=l.preset,u=l.version,d=Xr(ks,e);if(r.chromium=!!d.preset,r.chromiumVersion=d.version,!r.chromium){var f=Xr(Xa,e);r.webkit=!!f.preset,r.webkitVersion=f.version}return c&&(a.name=c.id,a.version=u,a.majorVersion=parseInt(u,10)),s&&(r.name=s.id,r.version=o,r.webview&&a.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:a,isMobile:n,isHints:!1}}function b1(t){return Ds()?navigator.userAgentData.getHighEntropyValues(["architecture","model","platform","platformVersion","uaFullVersion"]).then(function(e){var n=Os(e);return t&&t(n),n}):(t&&t(Za()),typeof Promise>"u"||!Promise?null:Promise.resolve(Za()))}function Za(t){return typeof t>"u"&&Ds()?Os():kf(t)}const Tf=Za;function Rf(t,e,n,r,a,i){for(var s=0;s<a;++s){var o=n+s*a,l=r+s*a;t[o]+=t[l]*i,e[o]+=e[l]*i}}function Of(t,e,n,r,a){for(var i=0;i<a;++i){var s=n+i*a,o=r+i*a,l=t[s],c=e[s];t[s]=t[o],t[o]=l,e[s]=e[o],e[o]=c}}function Pf(t,e,n,r,a){for(var i=0;i<r;++i){var s=n+i*r;t[s]/=a,e[s]/=a}}function Ps(t,e,n){n===void 0&&(n=Math.sqrt(t.length));for(var r=t.slice(),a=0;a<n;++a)r[a*n+e-1]=0,r[(e-1)*n+a]=0;return r[(e-1)*(n+1)]=1,r}function ue(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=wt(e),a=0;a<e;++a){var i=e*a+a;if(!rt(n[i],Ot)){for(var s=a+1;s<e;++s)if(n[e*a+s]){Of(n,r,a,s,e);break}}if(!rt(n[i],Ot))return[];Pf(n,r,a,e,n[i]);for(var s=0;s<e;++s){var o=s,l=s+a*e,c=n[l];!rt(c,Ot)||a===s||Rf(n,r,o,a,e,-c)}}return r}function Lf(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var a=0;a<e;++a)n[a*e+r]=t[e*r+a];return n}function Ls(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],a=0;a<e-1;++a)n[a]=t[e*(e-1)+a]/r;return n[e-1]=0,n}function Af(t,e){for(var n=wt(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function je(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function me(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=wt(n),a=Math.min(e,n),i=0;i<a-1;++i){for(var s=0;s<a-1;++s)r[i*n+s]=t[i*e+s];r[(i+1)*n-1]=t[(i+1)*e-1],r[(n-1)*n+i]=t[(e-1)*e+i]}return r[n*n-1]=t[e*e-1],r}function Ua(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=wt(t);return e.forEach(function(a){r=yt(r,a,t)}),r}function yt(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],a=t.length/n,i=e.length/a;if(a){if(!i)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<i;++o){r[o*n+s]=0;for(var l=0;l<a;++l)r[o*n+s]+=t[l*n+s]*e[o*a+l]}return r}function ct(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),a=0;a<n;++a)r[a]=r[a]+e[a];return r}function j(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),a=0;a<n;++a)r[a]=r[a]-e[a];return r}function Nf(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function As(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Gt(t,e,n){n===void 0&&(n=e.length);var r=yt(t,e,n),a=r[n-1];return r.map(function(i){return i/a})}function If(t,e){return yt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Bf(t,e){return yt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function _f(t,e){return yt(t,hr(e,4))}function Nn(t,e){var n=e[0],r=n===void 0?1:n,a=e[1],i=a===void 0?1:a,s=e[2],o=s===void 0?1:s;return yt(t,[r,0,0,0,0,i,0,0,0,0,o,0,0,0,0,1],4)}function Zr(t,e){return Gt(hr(e,3),je(t,3))}function ja(t,e){var n=e[0],r=n===void 0?0:n,a=e[1],i=a===void 0?0:a,s=e[2],o=s===void 0?0:s;return yt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,i,o,1],4)}function Qa(t,e){return yt(t,e,4)}function hr(t,e){var n=Math.cos(t),r=Math.sin(t),a=wt(e);return a[0]=n,a[1]=r,a[e]=-r,a[e+1]=n,a}function wt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function qa(t,e){for(var n=wt(e),r=Math.min(t.length,e-1),a=0;a<r;++a)n[(e+1)*a]=t[a];return n}function Ur(t,e){for(var n=wt(e),r=Math.min(t.length,e-1),a=0;a<r;++a)n[e*(e-1)+a]=t[a];return n}function Ja(t,e,n,r,a,i,s,o){var l=t[0],c=t[1],u=e[0],d=e[1],f=n[0],p=n[1],v=r[0],h=r[1],m=a[0],g=a[1],E=i[0],b=i[1],C=s[0],D=s[1],x=o[0],S=o[1],k=[l,0,u,0,f,0,v,0,c,0,d,0,p,0,h,0,1,0,1,0,1,0,1,0,0,l,0,u,0,f,0,v,0,c,0,d,0,p,0,h,0,1,0,1,0,1,0,1,-m*l,-g*l,-E*u,-b*u,-C*f,-D*f,-x*v,-S*v,-m*c,-g*c,-E*d,-b*d,-C*p,-D*p,-x*h,-S*h],w=ue(k,8);if(!w.length)return[];var T=yt(w,[m,g,E,b,C,D,x,S],8);return T[8]=1,me(Lf(T),3,4)}function C1(t){return[0,1].map(function(e){return average(t.map(function(n){return n[e]}))})}var jr=function(){return jr=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},jr.apply(this,arguments)};function ti(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Qr(t,e){return e===void 0&&(e=0),gr(Qe(t,e))}function x1(t){return Qr(getComputedStyle(t).transform)}function In(t,e){var n=Gt(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function zf(t,e){e===void 0&&(e=document.body);for(var n=t,r=ti();n;){var a=getComputedStyle(n).transform;if(r=Qa(Qr(a),r),n===e)break;n=n.parentElement}return r=ue(r,4),r[12]=0,r[13]=0,r[14]=0,r}function gr(t){var e=ti();return t.forEach(function(n){var r=n.matrixFunction,a=n.functionValue;r&&(e=r(e,a))}),e}function Qe(t,e){e===void 0&&(e=0);var n=Mt(t)?t:Pe(t);return n.map(function(r){var a=La(r),i=a.prefix,s=a.value,o=null,l=i,c="";if(i==="translate"||i==="translateX"||i==="translate3d"){var u=Qt(e)?jr(jr({},e),{"o%":e["%"]}):{"%":e,"o%":e},d=Le(s).map(function(P,L){return L===0&&"x%"in u?u["%"]=e["x%"]:L===1&&"y%"in u?u["%"]=e["y%"]:u["%"]=e["o%"],bt(P,u)}),f=d[0],p=d[1],v=p===void 0?0:p,h=d[2],m=h===void 0?0:h;o=ja,c=[f,v,m]}else if(i==="translateY"){var g=Qt(e)?jr({"%":e["y%"]},e):{"%":e},v=bt(s,g);o=ja,c=[0,v,0]}else if(i==="translateZ"){var m=parseFloat(s);o=ja,c=[0,0,m]}else if(i==="scale"||i==="scale3d"){var E=Le(s).map(function(P){return parseFloat(P)}),b=E[0],C=E[1],D=C===void 0?b:C,x=E[2],S=x===void 0?1:x;o=Nn,c=[b,D,S]}else if(i==="scaleX"){var b=parseFloat(s);o=Nn,c=[b,1,1]}else if(i==="scaleY"){var D=parseFloat(s);o=Nn,c=[1,D,1]}else if(i==="scaleZ"){var S=parseFloat(s);o=Nn,c=[1,1,S]}else if(i==="rotate"||i==="rotateZ"||i==="rotateX"||i==="rotateY"){var k=Ze(s),w=k.unit,T=k.value,R=w==="rad"?T:T*Math.PI/180;i==="rotate"||i==="rotateZ"?(l="rotateZ",o=_f):i==="rotateX"?o=If:i==="rotateY"&&(o=Bf),c=R}else if(i==="matrix3d")o=Qa,c=Le(s).map(function(P){return parseFloat(P)});else if(i==="matrix"){var M=Le(s).map(function(P){return parseFloat(P)});o=Qa,c=[M[0],M[1],0,0,M[2],M[3],0,0,0,0,1,0,M[4],M[5],0,1]}else l="";return{name:i,functionName:l,value:s,matrixFunction:o,functionValue:c}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ei=function(t,e){return ei=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},ei(t,e)};function Ff(t,e){ei(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ns=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),Gf=function(t){Ff(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,Ns)||this}return e}(Yd);function mr(t,e){return Kr(t,e,Ns)}const Is=Gf;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function qe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function Ht(t){return rt(t,Ot)}function Kf(t,e){return t.every(function(n,r){return Ht(n-e[r])===0})}function Wf(t,e){return!Ht(t[0]-e[0])&&!Ht(t[1]-e[1])}function $f(t){return t.reduce(function(e,n){return e.push.apply(e,n),e},[])}function qr(t){return t.length<3?0:Math.abs(nf(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function ri(t,e){var n=e.width,r=e.height,a=e.left,i=e.top,s=Be(t),o=s.minX,l=s.minY,c=s.maxX,u=s.maxY,d=n/(c-o),f=r/(u-l);return t.map(function(p){return[a+(p[0]-o)*d,i+(p[1]-l)*f]})}function Be(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Bn(t,e,n){var r=t[0],a=t[1],i=Be(e),s=i.minX,o=i.maxX,l=[[s,a],[o,a]],c=Je(l[0],l[1]),u=ai(e),d=[];if(u.forEach(function(v){var h=Je(v[0],v[1]),m=v[0];if(Kf(c,h))d.push({pos:t,line:v,type:"line"});else{var g=ni(_n(c,h),[l,v]);g.forEach(function(E){v.some(function(b){return Wf(b,E)})?d.push({pos:E,line:v,type:"point"}):Ht(m[1]-a)!==0&&d.push({pos:E,line:v,type:"intersection"})})}}),!n&&we(d,function(v){return v[0]===r}))return!0;var f=0,p={};return d.forEach(function(v){var h=v.pos,m=v.type,g=v.line;if(!(h[0]>r))if(m==="intersection")++f;else{if(m==="line")return;if(m==="point"){var E=we(g,function(D){return D[1]!==a}),b=p[h[0]],C=E[1]>a?1:-1;b?b!==C&&++f:p[h[0]]=C}}}),f%2===1}function Hf(t,e){var n=t[0],r=t[1],a=t[2];return(n*e[0]+r*e[1]+a)/(n*n+r*r)}function Je(t,e){var n=t[0],r=t[1],a=e[0],i=e[1],s=a-n,o=i-r;Math.abs(s)<Ot&&(s=0),Math.abs(o)<Ot&&(o=0);var l=0,c=0,u=0;return s?o?(l=-o/s,c=1,u=-l*n-r):(c=1,u=-r):o&&(l=-1,u=n),[l,c,u]}function _n(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],s=e[1],o=e[2],l=n===0&&i===0,c=r===0&&s===0,u=[];if(l&&c)return[];if(l){var d=-a/r,f=-o/s;return d!==f?[]:[[-1/0,d],[1/0,d]]}else if(c){var p=-a/n,v=-o/i;return p!==v?[]:[[p,-1/0],[p,1/0]]}else if(n===0){var h=-a/r,m=-(s*h+o)/i;u=[[m,h]]}else if(i===0){var h=-o/s,m=-(r*h+a)/n;u=[[m,h]]}else if(r===0){var m=-a/n,h=-(i*m+o)/s;u=[[m,h]]}else if(s===0){var m=-o/i,h=-(n*m+a)/r;u=[[m,h]]}else{var m=(r*o-s*a)/(s*n-r*i),h=-(n*m+a)/r;u=[[m,h]]}return u.map(function(g){return[g[0],g[1]]})}function S1(t,e,n){var r=_n(Je(t[0],t[1]),Je(e[0],e[1]));return n?ni(r,[t,e]):r}function Vf(t,e){var n=Je(e[0],e[1]);return Ht(Hf(n,t))===0}function ni(t,e){var n=e.map(function(d){return[0,1].map(function(f){return[Math.min(d[0][f],d[1][f]),Math.max(d[0][f],d[1][f])]})}),r=[];if(t.length===2){var a=t[0],i=a[0],s=a[1];if(Ht(i-t[1][0])){if(!Ht(s-t[1][1])){var c=Math.max.apply(Math,n.map(function(d){return d[0][0]})),u=Math.min.apply(Math,n.map(function(d){return d[0][1]}));if(Ht(c-u)>0)return[];r=[[c,s],[u,s]]}}else{var o=Math.max.apply(Math,n.map(function(d){return d[1][0]})),l=Math.min.apply(Math,n.map(function(d){return d[1][1]}));if(Ht(o-l)>0)return[];r=[[i,o],[i,l]]}}return r.length||(r=t.filter(function(d){var f=d[0],p=d[1];return n.every(function(v){return 0<=Ht(f-v[0][0])&&0<=Ht(v[0][1]-f)&&0<=Ht(p-v[1][0])&&0<=Ht(v[1][1]-p)})})),r.map(function(d){return[Ht(d[0]),Ht(d[1])]})}function ai(t){return qe(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function ii(t,e){var n=t.slice(),r=e.slice();Ia(n)===-1&&n.reverse(),Ia(r)===-1&&r.reverse();var a=ai(n),i=ai(r),s=a.map(function(u){return Je(u[0],u[1])}),o=i.map(function(u){return Je(u[0],u[1])}),l=[];s.forEach(function(u,d){var f=a[d],p=[];o.forEach(function(v,h){var m=_n(u,v),g=ni(m,[f,i[h]]);p.push.apply(p,g.map(function(E){return{index1:d,index2:h,pos:E,type:"intersection"}}))}),p.sort(function(v,h){return ne(f[0],v.pos)-ne(f[0],h.pos)}),l.push.apply(l,p),Bn(f[1],r)&&l.push({index1:d,index2:-1,pos:f[1],type:"inside"})}),i.forEach(function(u,d){if(Bn(u[1],n)){var f=!1,p=De(l,function(v){var h=v.index2;return h===d?(f=!0,!1):!!f});p===-1&&(f=!1,p=De(l,function(v){var h=v.index1,m=v.index2;return h===-1&&m+1===d?(f=!0,!1):!!f})),p===-1?l.push({index1:-1,index2:d,pos:u[1],type:"inside"}):l.splice(p,0,{index1:-1,index2:d,pos:u[1],type:"inside"})}});var c={};return l.filter(function(u){var d=u.pos,f=d[0]+"x"+d[1];return c[f]?!1:(c[f]=!0,!0)})}function oi(t,e){var n=ii(t,e);return n.map(function(r){var a=r.pos;return a})}function Yf(t){var e=t[0],n=e.index1,r=e.index2,a=t[1],i=a.index1,s=a.index2;return n!==-1&&(n===i||n+1===i)||r!==-1&&(r===s||r+1===s)}function Xf(t,e){var n=ii(t,e),r=[],a;return ii(t,e).forEach(function(i,s,o){s===0||!Yf([o[s-1],i])?(a=[i],r.push(a)):a.push(i)}),r.map(function(i){return i.map(function(s){var o=s.pos;return o})})}function zn(t,e,n,r){n===void 0&&(n=0),r===void 0&&(r=[]);for(var a=r.length===0,i=t.length,s=t[n]?n:0,o=qe(t.slice(s),t.slice(0,s)),l=function(d){var f=o[d];if(find(e,function(g){return g[0]===f[0]&&g[1]===f[1]}))return"continue";if(r.some(function(g){return find(g,function(E){return E[0]===f[0]&&E[1]===f[1]})}))return a?"continue":"break";var p=void 0;a?(p=[],r.push(p)):p=r[r.length-1],p.push(f);var v=[f,t[n+1]||t[0]],h=e.filter(function(g){return Vf(g,v)}).sort(function(g,E){return getDist(f,g)-getDist(f,E)})[0];if(h){var m=e.indexOf(h);if(zn(e,t,m,r),!a)return"break"}else return zn(o,e,d+1,r),"break"},c=0;c<i;++c){var u=l(c);if(u==="break")break}return r}function D1(t,e){return zn(t,qe(e).reverse())}function w1(t,e){if(!e.length)return[qe(t)];var n=Xf(t,e),r=[t];return n.forEach(function(a){var i=qe(a).reverse();r=$f(r.map(function(s){var o=zn(s,i),l=o[0];if(o.length===1&&i.every(function(f){return l.indexOf(f)===-1})){var c=l[l.length-1],u=qe(i).sort(function(f,p){return getDist(c,f)-getDist(c,p)})[0],d=i.indexOf(u);l.push.apply(l,qe(i.slice(d),i.slice(0,d),[i[d],c]))}return o}))}),r}function Zf(t,e){var n=oi(t,e);return qr(n)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var si=function(){return si=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},si.apply(this,arguments)};function Uf(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}var jf=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Qt(n))for(var a in n)this.on(a,n[a]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Qt(n))for(var a in n)this.off(a);else if(!r)this._events[n]=[];else{var i=this._events[n];if(i){var s=De(i,function(o){return o.listener===r});s>-1&&i.splice(s,1)}}return this},e.once=function(n,r){var a=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(i){a._addEvent(n,i,{once:!0})})},e.emit=function(n,r){var a=this;r===void 0&&(r={});var i=this._events[n];if(!n||!i)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,Uf(i).forEach(function(o){o.listener(r),o.once&&a.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,a){var i=this._events;i[n]=i[n]||[];var s=i[n];s.push(si({listener:r},a))},t}();const Jr=jf;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var li=function(t,e){return li=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},li(t,e)};function Qf(t,e){li(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var yr=function(){return yr=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},yr.apply(this,arguments)};function qf(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function Bs(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function Fn(t){if(t){if($t(t))return document.querySelector(t)}else return null;if(Rn(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var Jf=function(t){Qf(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var a=r._currentOptions;r._lock||!a||r.emit("scrollDrag",{next:function(i){r.checkScroll({container:a.container,inputEvent:i})}})},r}var n=e.prototype;return n.dragStart=function(r,a){var i=Fn(a.container);if(!i){this._flag=!1;return}var s=0,o=0,l=0,c=0;if(i===document.body)l=window.innerWidth,c=window.innerHeight;else{var u=i.getBoundingClientRect();s=u.top,o=u.left,l=u.width,c=u.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:l,height:c},this._prevScrollPos=this._getScrollPosition([0,0],a),this._currentOptions=a,this._registerScrollEvent(a)},n.drag=function(r,a){if(clearTimeout(this._timer),!!this._flag){var i=r.clientX,s=r.clientY,o=a.threshold,l=o===void 0?0:o,c=this,u=c._startRect,d=c._startPos;this._currentOptions=a;var f=[0,0];return u.top>s-l?(d[1]>u.top||s<d[1])&&(f[1]=-1):u.top+u.height<s+l&&(d[1]<u.top+u.height||s>d[1])&&(f[1]=1),u.left>i-l?(d[0]>u.left||i<d[0])&&(f[0]=-1):u.left+u.width<i+l&&(d[0]<u.left+u.width||i>d[0])&&(f[0]=1),!f[0]&&!f[1]?!1:this._continueDrag(yr(yr({},a),{direction:f,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var a=this;if(this._isWait)return!1;var i=r.prevScrollPos,s=i===void 0?this._prevScrollPos:i,o=r.direction,l=r.throttleTime,c=l===void 0?0:l,u=r.inputEvent,d=r.isDrag,f=this._getScrollPosition(o||[0,0],r),p=f[0]-s[0],v=f[1]-s[1],h=o||[p?Math.abs(p)/p:0,v?Math.abs(v)/v:0];return this._prevScrollPos=f,this._lock=!1,!p&&!v?!1:(this.emit("move",{offsetX:h[0]?p:0,offsetY:h[1]?v:0,inputEvent:u}),c&&d&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(r)},c)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,a){var i=a.container,s=a.getScrollPosition,o=s===void 0?qf:s;return o({container:Fn(i),direction:r})},n._continueDrag=function(r){var a=this,i,s=r.container,o=r.direction,l=r.throttleTime,c=r.useScroll,u=r.isDrag,d=r.inputEvent;if(!(!this._flag||u&&this._isWait)){var f=$r(),p=Math.max(l+this._prevTime-f,0);if(p>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(r)},p),!1;this._prevTime=f;var v=this._getScrollPosition(o,r);this._prevScrollPos=v,u&&(this._isWait=!0),c||(this._lock=!0);var h={container:Fn(s),direction:o,inputEvent:d};return(i=r.requestScroll)===null||i===void 0||i.call(r,h),this.emit("scroll",h),this._isWait=!1,c||this.checkScroll(yr(yr({},r),{prevScrollPos:v,direction:o,inputEvent:d}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var a=r.checkScrollEvent;if(a){var i=a===!0?Bs:a,s=Fn(r.container);a===!0&&(s===document.body||s===document.documentElement)?this._unregister=Bs(window,this._onScroll):this._unregister=i(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e}(Jr);const _s=Jf;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ci=function(t,e){return ci=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},ci(t,e)};function tp(t,e){ci(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var At=function(){return At=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},At.apply(this,arguments)};function ep(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=Math.atan2(r,n);return a>=0?a:a+Math.PI*2}function ui(t){return ep([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function rp(t){return t.touches&&t.touches.length>=2}function Gn(t){return t?t.touches?ap(t.touches):[Fs(t)]:[]}function np(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function zs(t,e,n){var r=n.length,a=tn(t,r),i=a.clientX,s=a.clientY,o=a.originalClientX,l=a.originalClientY,c=tn(e,r),u=c.clientX,d=c.clientY,f=tn(n,r),p=f.clientX,v=f.clientY,h=i-u,m=s-d,g=i-p,E=s-v;return{clientX:o,clientY:l,deltaX:h,deltaY:m,distX:g,distY:E}}function di(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function ap(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(Fs(t[r]));return n}function Fs(t){return{clientX:t.clientX,clientY:t.clientY}}function tn(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var a=t[r];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var fi=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),ui(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),ui(e)-ui(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=zs(e||this.prevClients,this.prevClients,this.startClients),a=r.deltaX,i=r.deltaY;return this.movement+=Math.sqrt(a*a+i*i),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);var n=this.prevClients;return this.startClients.map(function(r,a){return zs([e[a]],[n[a]],[r])})},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=tn(e,this.length),a=tn(this.prevClients,this.length),i=r.clientX-a.clientX,s=r.clientY-a.clientY;return Math.sqrt(i*i+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),di(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),di(e)/di(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t}(),Gs=["textarea","input"],Ks=function(t){tp(e,t);function e(n,r){r===void 0&&(r={});var a=t.call(this)||this;a.options={},a.flag=!1,a.pinchFlag=!1,a.data={},a.isDrag=!1,a.isPinch=!1,a.clientStores=[],a.targets=[],a.prevTime=0,a.doubleFlag=!1,a._useMouse=!1,a._useTouch=!1,a._useDrag=!1,a._dragFlag=!1,a._isTrusted=!1,a._isMouseEvent=!1,a._isSecondaryButton=!1,a._preventMouseEvent=!1,a._prevInputEvent=null,a._isDragAPI=!1,a._isIdle=!0,a._window=window,a.onDragStart=function(f,p){if(p===void 0&&(p=!0),!(!a.flag&&f.cancelable===!1)){var v=f.type.indexOf("drag")>=-1;if(!(a.flag&&v)){a._isDragAPI=!0;var h=a.options,m=h.container,g=h.pinchOutside,E=h.preventWheelClick,b=h.preventRightClick,C=h.preventDefault,D=h.checkInput,x=h.dragFocusedInput,S=h.preventClickEventOnDragStart,k=h.preventClickEventOnDrag,w=h.preventClickEventByCondition,T=a._useTouch,R=!a.flag;if(a._isSecondaryButton=f.which===3||f.button===2,E&&(f.which===2||f.button===1)||b&&(f.which===3||f.button===2))return a.stop(),!1;if(R){var M=a._window.document.activeElement,P=f.target;if(P){var L=P.tagName.toLowerCase(),A=Gs.indexOf(L)>-1,I=P.isContentEditable;if(A||I){if(D||!x&&M===P)return!1;if(M&&(M===P||I&&M.isContentEditable&&M.contains(P)))if(x)P.blur();else return!1}else if((C||f.type==="touchstart")&&M){var _=M.tagName.toLowerCase();(M.isContentEditable||Gs.indexOf(_)>-1)&&M.blur()}(S||k||w)&&Ft(a._window,"click",a._onClick,!0)}a.clientStores=[new fi(Gn(f))],a._isIdle=!1,a.flag=!0,a.isDrag=!1,a._isTrusted=p,a._dragFlag=!0,a._prevInputEvent=f,a.data={},a.doubleFlag=$r()-a.prevTime<200,a._isMouseEvent=np(f),!a._isMouseEvent&&a._preventMouseEvent&&(a._preventMouseEvent=!1);var B=a._preventMouseEvent||a.emit("dragStart",At(At({data:a.data,datas:a.data,inputEvent:f,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,isTrusted:p,isDouble:a.doubleFlag},a.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){a._dragFlag=!1}}));B===!1&&a.stop(),a._isMouseEvent&&a.flag&&C&&f.preventDefault()}if(!a.flag)return!1;var z=0;if(R?(a._attchDragEvent(),T&&g&&(z=setTimeout(function(){Ft(m,"touchstart",a.onDragStart,{passive:!1})}))):T&&g&&_t(m,"touchstart",a.onDragStart),a.flag&&rp(f)){if(clearTimeout(z),R&&f.touches.length!==f.changedTouches.length)return;a.pinchFlag||a.onPinchStart(f)}}}},a.onDrag=function(f,p){if(a.flag){var v=a.options.preventDefault;!a._isMouseEvent&&v&&f.preventDefault(),a._prevInputEvent=f;var h=Gn(f),m=a.moveClients(h,f,!1);if(a._dragFlag){if(a.pinchFlag||m.deltaX||m.deltaY){var g=a._preventMouseEvent||a.emit("drag",At(At({},m),{isScroll:!!p,inputEvent:f}));if(g===!1){a.stop();return}}a.pinchFlag&&a.onPinch(f,h)}a.getCurrentStore().getPosition(h,!0)}},a.onDragEnd=function(f){if(a.flag){var p=a.options,v=p.pinchOutside,h=p.container,m=p.preventClickEventOnDrag,g=p.preventClickEventOnDragStart,E=p.preventClickEventByCondition,b=a.isDrag;(m||g||E)&&requestAnimationFrame(function(){a._allowClickEvent()}),!E&&!g&&m&&!b&&a._allowClickEvent(),a._useTouch&&v&&_t(h,"touchstart",a.onDragStart),a.pinchFlag&&a.onPinchEnd(f);var C=f?.touches?Gn(f):[],D=C.length;D===0||!a.options.keepDragging?a.flag=!1:a._addStore(new fi(C));var x=a._getPosition(),S=$r(),k=!b&&a.doubleFlag;a._prevInputEvent=null,a.prevTime=b||k?0:S,a.flag||(a._dettachDragEvent(),a._preventMouseEvent||a.emit("dragEnd",At({data:a.data,datas:a.data,isDouble:k,isDrag:b,isClick:!b,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,inputEvent:f,isTrusted:a._isTrusted},x)),a.clientStores=[],a._isMouseEvent||(a._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){a._preventMouseEvent=!1})})),a._isIdle=!0)}},a.onBlur=function(){a.onDragEnd()},a._allowClickEvent=function(){_t(a._window,"click",a._onClick,!0)},a._onClick=function(f){a._allowClickEvent(),a._preventMouseEvent=!1;var p=a.options.preventClickEventByCondition;p?.(f)||(f.stopPropagation(),f.preventDefault())},a._onContextMenu=function(f){var p=a.options;p.preventRightClick?a.onDragEnd(f):f.preventDefault()},a._passCallback=function(){};var i=[].concat(n),s=i[0];a._window=uf(s)?s:Ne(s),a.options=At({checkInput:!1,container:s&&!("document"in s)?Ne(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=a.options,l=o.container,c=o.events,u=o.checkWindowBlur;if(a._useDrag=c.indexOf("drag")>-1,a._useTouch=c.indexOf("touch")>-1,a._useMouse=c.indexOf("mouse")>-1,a.targets=i,a._useDrag&&i.forEach(function(f){Ft(f,"dragstart",a.onDragStart)}),a._useMouse&&(i.forEach(function(f){Ft(f,"mousedown",a.onDragStart),Ft(f,"mousemove",a._passCallback)}),Ft(l,"contextmenu",a._onContextMenu)),u&&Ft(Ne(),"blur",a.onBlur),a._useTouch){var d={passive:!1};i.forEach(function(f){Ft(f,"touchstart",a.onDragStart,d),Ft(f,"touchmove",a._passCallback,d)})}return a}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,a){return r+a.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,a,i){i===void 0&&(i=!0),this.flag&&(this.clientStores[0].move(n,r),i&&this.onDrag(a,!0))},e.prototype.move=function(n,r){var a=n[0],i=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(l){var c=l.clientX,u=l.clientY;return{clientX:c+a,clientY:u+i,originalClientX:c,originalClientY:u}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var a in n)r[a]=n[a];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),At(At({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,a=this.options.container;this.off(),_t(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(i){_t(i,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(i){_t(i,"mousedown",n.onDragStart)}),_t(a,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(i){_t(i,"touchstart",n.onDragStart)}),_t(a,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,a=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>a)){var i=new fi(Gn(n));this.pinchFlag=!0,this._addStore(i);var s=this.emit("pinchStart",At(At({data:this.data,datas:this.data,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var a=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",At(At({data:this.data,datas:this.data,movement:this.getMovement(r),angle:a.getAngle(r),rotation:a.getRotation(r),touches:a.getPositions(r),scale:a.getScale(r),distance:a.getDistance(r)},a.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var a=this.getCurrentStore();this.emit("pinchEnd",At(At({data:this.data,datas:this.data,isPinch:r,touches:a.getPositions()},a.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,a){var i=this._getPosition(n,a),s=this.isDrag;(i.deltaX||i.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),At(At({data:this.data,datas:this.data},i),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var a=this.getCurrentStore(),i=a.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(c,u){var d=u.getPosition();return c.distX+=d.distX,c.distY+=d.distY,c},i),o=s.distX,l=s.distY;return At(At({},i),{distX:o,distY:l})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,a={passive:!1};this._isDragAPI&&(Ft(r,"dragover",this.onDrag,a),Ft(n,"dragend",this.onDragEnd)),this._useMouse&&(Ft(r,"mousemove",this.onDrag),Ft(n,"mouseup",this.onDragEnd)),this._useTouch&&(Ft(r,"touchmove",this.onDrag,a),Ft(n,"touchend",this.onDragEnd,a),Ft(n,"touchcancel",this.onDragEnd,a))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(_t(r,"dragover",this.onDrag),_t(n,"dragend",this.onDragEnd)),this._useMouse&&(_t(r,"mousemove",this.onDrag),_t(n,"mouseup",this.onDragEnd)),this._useTouch&&(_t(r,"touchstart",this.onDragStart),_t(r,"touchmove",this.onDrag),_t(n,"touchend",this.onDragEnd),_t(n,"touchcancel",this.onDragEnd))},e}(Jr);function ip(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var op=ip;function sp(t){return op(t).toString(36)}function lp(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function cp(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,a){var i=a.trim();return(i?Le(i):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function up(t,e,n,r,a){var i=ce(r),s=i.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=cp(t,e,n),(a||i.head||i.body).appendChild(s),s}function dp(t){var e="rCS"+sp(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var a=lp(n),i=(a||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!i)i=up(e,t,r,n,a);else{var s=parseFloat(i.getAttribute("data-styled-count"))||0;i.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,l=parseFloat(i.getAttribute("data-styled-count"))||0;l<=1?(i.remove?i.remove():(o=i.parentNode)===null||o===void 0||o.removeChild(i),i=null):i.setAttribute("data-styled-count","".concat(l-1))}}}}}const Ws=dp;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var pi=function(t,e){return pi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},pi(t,e)};function $s(t,e){pi(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var vi=function(){return vi=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vi.apply(this,arguments)};function fp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}var pp=function(t){$s(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.injectResult=null,r.tag="div",r}var n=e.prototype;return n.render=function(){var r=this.props,a=r.className,i=a===void 0?"":a,s=r.cspNonce,o=r.portalContainer,l=fp(r,["className","cspNonce","portalContainer"]),c=this.injector.className,u=this.tag,d={};return(Df||"").indexOf("simple")>-1&&o&&(d={portalContainer:o}),ae(u,vi({ref:ge(this,"element"),"data-styled-id":c,className:i+" "+c},d,l))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},e}(Wa);function vp(t,e){var n=Ws(e);return function(r){$s(a,r);function a(){var i=r!==null&&r.apply(this,arguments)||this;return i.injector=n,i.tag=t,i}return a}(pp)}const Hs=vp;var hi=function(t,e){return hi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},hi(t,e)};function Er(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hi(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var O=function(){return O=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},O.apply(this,arguments)};function hp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function gp(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}function J(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function en(t,e){var n;return O({events:{},props:(n={},n[t]=Boolean,n),name:t},e)}function mp(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function yp(t){var e=mp(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Kn=Tf(),Vs=Kn.browser.webkit,Ys=Vs&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),Ep=Kn.browser.name==="firefox",bp=parseInt(Kn.browser.webkitVersion,10)>=612||parseInt(Kn.browser.version,10)>=15,gi="moveable-",Cp=`
{
	position: absolute;
	width: 1px;
	height: 1px;
	left: 0;
	top: 0;
    z-index: 3000;
    --moveable-color: #4af;
    --zoom: 1;
    --zoompx: 1px;
    will-change: transform;
    outline: 1px solid transparent;
}
.control-box {
    z-index: 0;
}
.line, .control {
    position: absolute;
	left: 0;
    top: 0;
    will-change: transform;
}
.control {
	width: 14px;
	height: 14px;
	border-radius: 50%;
	border: 2px solid #fff;
	box-sizing: border-box;
    background: #4af;
    background: var(--moveable-color);
	margin-top: -7px;
    margin-left: -7px;
    border: 2px solid #fff;
    z-index: 10;
}
.padding {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100px;
    height: 100px;
    transform-origin: 0 0;
}
.line {
	width: 1px;
    height: 1px;
    background: #4af;
    background: var(--moveable-color);
	transform-origin: 0px 50%;
}
.line.edge {
    z-index: 1;
    background: transparent;
}
.line.dashed {
    box-sizing: border-box;
    background: transparent;
}
.line.dashed.horizontal {
    border-top: 1px dashed #4af;
    border-top-color: #4af;
    border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
    border-left: 1px dashed #4af;
    border-left-color: #4af;
    border-left-color: var(--moveable-color);
}
.line.vertical {
    transform: translateX(-50%);
}
.line.horizontal {
    transform: translateY(-50%);
}
.line.vertical.bold {
    width: 2px;
}
.line.horizontal.bold {
    height: 2px;
}

.control.origin {
	border-color: #f55;
	background: #fff;
	width: 12px;
	height: 12px;
	margin-top: -6px;
    margin-left: -6px;
	pointer-events: none;
}
`.concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
	`).concat(yp(t),`
}
`)}).join(`
`),`

.line.direction:before {
    content: "";
    position: absolute;
    width: 100%;
    height: calc(var(--moveable-line-padding, 0) * 1px);
    bottom: 0;
    left: 0;
}
.group {
    z-index: -1;
}
.area {
    position: absolute;
}
.area-pieces {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}
.area.avoid, .area.pass {
    pointer-events: none;
}
.area.avoid+.area-pieces {
    display: block;
}
.area-piece {
    position: absolute;
}

`).concat(Ys?`:global svg *:before {
	content:"";
	transform-origin: inherit;
}`:"",`
`),xp=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],mi=1e-4,Vt=1e-7,Wn=1e-9,yi=Math.pow(10,10),Xs=-yi,Sp=["n","w","s","e"],Ei=["n","w","s","e","nw","ne","sw","se"],Dp={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},bi={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Zs={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Us=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag"];function rn(t,e,n,r,a,i){var s,o;i===void 0&&(i="draggable");var l=(o=(s=e.gestos[i])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},c=l.originalDatas||l.datas,u=c[i]||(c[i]={});return O(O({},a?El(e,l):l),{isPinch:!!r,parentEvent:!0,datas:u,originalDatas:t.originalDatas})}var br=function(){function t(n){var r;n===void 0&&(n="draggable"),this.ableName=n,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[n]={},r)}var e=t.prototype;return e.dragStart=function(n,r){this.isDrag=!1,this.isFlag=!1;var a=r.originalDatas;return this.datas=a,a[this.ableName]||(a[this.ableName]={}),O(O({},this.move(n,r.inputEvent)),{type:"dragstart"})},e.drag=function(n,r){return this.move([n[0]-this.prevX,n[1]-this.prevY],r)},e.move=function(n,r){var a,i,s=!1;if(!this.isFlag)this.prevX=n[0],this.prevY=n[1],this.startX=n[0],this.startY=n[1],a=n[0],i=n[1],this.isFlag=!0;else{var o=this.isDrag;a=this.prevX+n[0],i=this.prevY+n[1],(n[0]||n[1])&&(this.isDrag=!0),!o&&this.isDrag&&(s=!0)}return this.prevX=a,this.prevY=i,{type:"drag",clientX:a,clientY:i,inputEvent:r,isFirstDrag:s,isDrag:this.isDrag,distX:a-this.startX,distY:i-this.startY,deltaX:n[0],deltaY:n[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function js(t,e){var n=e.clientX,r=e.clientY,a=e.datas,i=t.state,s=i.moveableClientRect,o=i.rootMatrix,l=i.is3d,c=i.pos1,u=s.left,d=s.top,f=l?4:3,p=j(rr(o,[n-u,r-d],f),c),v=p[0],h=p[1],m=ye({datas:a,distX:v,distY:h}),g=m[0],E=m[1];return[g,E]}function tr(t,e){var n=e.datas,r=t.state,a=r.allMatrix,i=r.beforeMatrix,s=r.is3d,o=r.left,l=r.top,c=r.origin,u=r.offsetMatrix,d=r.targetMatrix,f=r.transformOrigin,p=s?4:3;n.is3d=s,n.matrix=a,n.targetMatrix=d,n.beforeMatrix=i,n.offsetMatrix=u,n.transformOrigin=f,n.inverseMatrix=ue(a,p),n.inverseBeforeMatrix=ue(i,p),n.absoluteOrigin=je(ct([o,l],c),p),n.startDragBeforeDist=Gt(n.inverseBeforeMatrix,n.absoluteOrigin,p),n.startDragDist=Gt(n.inverseMatrix,n.absoluteOrigin,p)}function wp(t){return xr(t.datas.beforeTransform,[50,50],100,100).direction}function $n(t,e){var n=t.datas,r=t.originalDatas.beforeRenderable,a=n.transformIndex,i=r.nextTransforms,s=i.length,o=r.nextTransformAppendedIndexes,l=0;a===-1?(e==="translate"?l=0:e==="rotate"&&(l=De(i,function(f){return f.match(/scale\(/g)})),l===-1&&(l=i.length),n.transformIndex=l):we(o,function(f){return f.index===a&&f.functionName===e})?l=a:l=a+o.filter(function(f){return f.index<a}).length;var c=Qp(i,l),u=c.targetFunction,d=e==="rotate"?"rotateZ":e;n.beforeFunctionTexts=c.beforeFunctionTexts,n.afterFunctionTexts=c.afterFunctionTexts,n.beforeTransform=c.beforeFunctionMatrix,n.beforeTransform2=c.beforeFunctionMatrix2,n.targetTansform=c.targetFunctionMatrix,n.afterTransform=c.afterFunctionMatrix,n.afterTransform2=c.afterFunctionMatrix2,n.targetAllTransform=c.allFunctionMatrix,u.functionName===d?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>l&&(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=J(J([],o,!0),[{functionName:e,index:l,isAppend:!0}],!1))}function Hn(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function Mp(t){var e=t.datas,n=t.distX,r=t.distY,a=qs({datas:e,distX:n,distY:r}),i=a[0],s=a[1],o=Qs(e,Af([i,s],4));return Gt(o,je([0,0,0],4),4)}function Qs(t,e,n){var r=t.beforeTransform,a=t.afterTransform,i=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,l=n?yt(o,e,4):yt(e,o,4),c=yt(ue(n?i:r,4),l,4),u=yt(c,ue(n?s:a,4),4);return u}function qs(t){var e=t.datas,n=t.distX,r=t.distY,a=e.inverseBeforeMatrix,i=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,l=i?4:3;return j(Gt(a,ct(o,[n,r]),l),s)}function ye(t,e){var n=t.datas,r=t.distX,a=t.distY,i=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,u=n.absoluteOrigin,d=o?4:3;return j(Gt(e?i:s,ct(u,[r,a]),d),e?l:c)}function kp(t,e){var n=t.datas,r=t.distX,a=t.distY,i=n.beforeMatrix,s=n.matrix,o=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,u=n.absoluteOrigin,d=o?4:3;return j(Gt(e?i:s,ct(e?l:c,[r,a]),d),u)}function Tp(t,e,n,r,a,i){return r===void 0&&(r=e),a===void 0&&(a=n),i===void 0&&(i=[0,0]),t?t.map(function(s,o){var l=Ze(s),c=l.value,u=l.unit,d=o?a:r,f=o?n:e;if(s==="%"||isNaN(c)){var p=d?i[o]/d:0;return f*p}else if(u!=="%")return c;return f*c/100}):i}function Js(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Rp(t,e){return Js(e).map(function(n){return t[n]})}function Tt(t,e){var n=(e[0]+1)/2,r=(e[1]+1)/2,a=[Xe(t[0][0],t[1][0],n,1-n),Xe(t[0][1],t[1][1],n,1-n)],i=[Xe(t[2][0],t[3][0],n,1-n),Xe(t[2][1],t[3][1],n,1-n)];return[Xe(a[0],i[0],r,1-r),Xe(a[1],i[1],r,1-r)]}function Op(t,e,n,r,a,i){var s=_e(e,n,r,a),o=Tt(s,i),l=t[0]-o[0],c=t[1]-o[1];return[l,c]}function nn(t,e,n,r){return yt(t,Un(e,r,n),r)}function Pp(t,e,n){var r=t.transformOrigin,a=t.offsetMatrix,i=t.is3d,s=e.beforeTransform,o=e.afterTransform,l=i?4:3,c=Qr([n]);return nn(a,me(yt(yt(s,c,4),o,4),4,l),r,l)}function Lp(t,e){var n=t.transformOrigin,r=t.offsetMatrix,a=t.is3d,i=t.targetMatrix,s=a?4:3;return nn(r,yt(i,qa(e,s),s),n,s)}function Vn(t){var e=Cr(t);return{setTransform:function(n,r){r===void 0&&(r=-1),e.startTransforms=Mt(n)?n:Pe(n),Ci(t,r)},setTransformIndex:function(n){Ci(t,n)}}}function Yn(t,e){var n=Cr(t),r=n.startTransforms;Ci(t,De(r,function(a){return a.indexOf("".concat(e,"("))===0}))}function Ci(t,e){var n=Cr(t),r=t.datas;if(r.transformIndex=e,e!==-1){var a=n.startTransforms[e];if(a){var i=Qe([a]);r.startValue=i[0].functionValue}}}function xi(t,e){var n=Cr(t);n.nextTransforms=Pe(e)}function Cr(t){return t.originalDatas.beforeRenderable}function tl(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Xn(t){return tl(t).join(" ")}function Zn(t){return Cr(t).nextStyle}function el(t,e,n,r,a){xi(a,e);var i=Xt.drag(t,rn(a,t.state,n,r,!1)),s=i?i.transform:e;return O(O({transform:e,drag:i},Yt({transform:s},a)),{afterTransform:s})}function rl(t,e,n,r,a){var i=t.state,s=i.left,o=i.top,l=t.props.groupable,c=Pp(t.state,a,e),u=l?s:0,d=l?o:0,f=al(t,n,c),p=j(r,f);return j(p,[u,d])}function Ap(t,e,n,r,a){var i=rl(t,"scale(".concat(e.join(", "),")"),n,r,a);return i}function nl(t,e,n){return[-1+t[0]/(e/2),-1+t[1]/(n/2)]}function al(t,e,n){n===void 0&&(n=t.state.allMatrix);var r=t.state,a=r.width,i=r.height,s=r.is3d,o=s?4:3,l=[a/2*(1+e[0]),i/2*(1+e[1])];return Bt(n,l,o)}function Np(t,e,n){var r=n.fixedDirection,a=n.fixedPosition;return rl(t,"rotate(".concat(e,"deg)"),r,a,n)}function Ip(t,e,n,r,a,i){var s=t.props.groupable,o=t.state,l=o.transformOrigin,c=o.offsetMatrix,u=o.is3d,d=o.width,f=o.height,p=o.left,v=o.top,h=i.fixedDirection,m=i.nextTargetMatrix||o.targetMatrix,g=u?4:3,E=Tp(a,e,n,d,f,l),b=s?p:0,C=s?v:0,D=nn(c,m,E,g),x=Op(r,D,e,n,g,h);return j(x,[b,C])}function il(t,e){return Tt(qt(t.state),e)}function Bp(t,e){var n=t.targetGesto,r=t.controlGesto,a;return n?.isFlag()&&(a=n.getEventData()[e]),!a&&r?.isFlag()&&(a=r.getEventData()[e]),a||{}}function _p(t,e){return[t[0]*e[0],t[1]*e[1]]}function Q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Bd.apply(void 0,J([gi],t,!1))}function ol(t){t()}function zp(t){return!t||t==="none"?[1,0,0,1,0,0]:Qt(t)?t:Qr(t)}function Un(t,e,n){return Ua(e,Ur(n,e),t,Ur(n.map(function(r){return-r}),e))}function Fp(t,e,n){if(e==="%"){var r=Di(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function Gp(t){var e=jn(Me(t,":before"));return e.map(function(n,r){var a=Ze(n),i=a.value,s=a.unit;return i*Fp(t,s,r===0)})}function jn(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function sl(t,e){e===void 0&&(e=Me(t));var n=e.transform;if(n&&n!=="none")return e.transform;if("transform"in t){var r=t.transform,a=r.baseVal;if(!a)return"";var i=a.length;if(!i)return"";for(var s=[],o=function(c){var u=a[c].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(d){return u[d]}).join(", "),")"))},l=0;l<i;++l)o(l);return s.join(" ")}return""}function an(t,e,n,r,a){var i,s,o,l=t&&t.ownerDocument?t.ownerDocument:document,c=l.documentElement||l.body,u=!1,d,f;if(!t||n)d=t;else{var p=(i=t?.assignedSlot)===null||i===void 0?void 0:i.parentElement,v=t.parentElement;p?(u=!0,f=v,d=p):d=v}for(var h=!1,m=t===e||d===e,g="relative",E=1,b=parseFloat((s=a)===null||s===void 0?void 0:s.zoom)||1,C=a?.position;d&&d!==c;){e===d&&(m=!0);var D=Me(d),x=d.tagName.toLowerCase(),S=sl(d,D),k=D.willChange,w=parseFloat(D.zoom)||1;if(g=D.position,r&&w!==1){E=w;break}if(!n&&r&&b!==1&&C&&C!=="absolute"||x==="svg"||g!=="static"||S&&S!=="none"||k==="transform")break;var T=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,R=d.parentNode;T&&(u=!0,f=R);var M=T||R;if(M&&M.nodeType===11){d=M.host,h=!0;break}d=M,g="relative"}return{offsetZoom:E,hasSlot:u,parentSlotElement:f,isCustomElement:h,isStatic:g==="static",isEnd:m||!d||d===c,offsetParent:d||c}}function Kp(t,e,n){var r,a=t.tagName.toLowerCase(),i=t.offsetLeft,s=t.offsetTop,o=Tn(i),l=!o,c,u;return!l&&a!=="svg"?(c=Ys?Gp(t):jn(n).map(function(d){return parseFloat(d)}),u=c.slice(),l=!0,r=Hp(t,c,t===e&&e.tagName.toLowerCase()==="g"),i=r[0],s=r[1],c[0]=r[2],c[1]=r[3]):(c=jn(n).map(function(d){return parseFloat(d)}),u=c.slice()),{tagName:a,isSVG:o,hasOffset:l,offset:[i||0,s||0],origin:c,targetOrigin:u}}function ll(t,e,n){n===void 0&&(n=Me(t));var r=Me(document.body),a=r.position;if(!e&&(!a||a==="static"))return[0,0];var i=parseInt(r.marginLeft,10),s=parseInt(r.marginTop,10);return n.position==="absolute"&&((n.top!=="auto"||n.bottom!=="auto")&&(s=0),(n.left!=="auto"||n.right!=="auto")&&(i=0)),[i,s]}function Si(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=me(n,3,4))})}function Wp(t){for(var e=t.parentElement,n=!1;e;){var r=Me(e).transform;if(r&&r!=="none"){n=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:n}}function Qn(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(As(t,!e).join(","),")")}function Di(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,a=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||e,height:a.height||n,clientWidth:e,clientHeight:n}}function $p(t,e){var n=Di(t),r=n.width,a=n.height,i=n.clientWidth,s=n.clientHeight,o=i/r,l=s/a,c=t.preserveAspectRatio.baseVal,u=c.align,d=c.meetOrSlice,f=[0,0],p=[o,l],v=[0,0];if(u!==1){var h=(u-2)%3,m=Math.floor((u-2)/3);f[0]=r*h/2,f[1]=a*m/2;var g=d===2?Math.max(l,o):Math.min(o,l);p[0]=g,p[1]=g,v[0]=(i-r)/2*h,v[1]=(s-a)/2*m}var E=qa(p,e);return E[e*(e-1)]=v[0],E[e*(e-1)+1]=v[1],Un(E,e,f)}function Hp(t,e,n){if(!t.getBBox||!n&&t.tagName.toLowerCase()==="g")return[0,0,0,0];var r=t.getBBox(),a=Di(t.ownerSVGElement),i=r.x-a.x,s=r.y-a.y;return[i,s,e[0]-i,e[1]-s]}function Bt(t,e,n){return Gt(t,je(e,n),n)}function _e(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(a){return Bt(t,a,r)})}function ie(t){var e=t.map(function(c){return c[0]}),n=t.map(function(c){return c[1]}),r=Math.min.apply(Math,e),a=Math.min.apply(Math,n),i=Math.max.apply(Math,e),s=Math.max.apply(Math,n),o=i-r,l=s-a;return{left:r,top:a,right:i,bottom:s,width:o,height:l}}function cl(t,e,n,r){var a=_e(t,e,n,r);return ie(a)}function Vp(t,e,n,r,a){var i,s=t.target,o=t.origin,l=e.matrix,c=dl(s),u=c.offsetWidth,d=c.offsetHeight,f=n.getBoundingClientRect(),p=[0,0];n===document.body&&(p=ll(s,!0));for(var v=s.getBoundingClientRect(),h=v.left-f.left+n.scrollLeft-(n.clientLeft||0)+p[0],m=v.top-f.top+n.scrollTop-(n.clientTop||0)+p[1],g=v.width,E=v.height,b=Ua(r,a,l),C=cl(b,u,d,r),D=C.left,x=C.top,S=C.width,k=C.height,w=Bt(b,o,r),T=j(w,[D,x]),R=[h+T[0]*g/S,m+T[1]*E/k],M=[0,0],P=0;++P<10;){var L=ue(a,r);i=j(Bt(L,R,r),Bt(L,w,r)),M[0]=i[0],M[1]=i[1];var A=Ua(r,a,Ur(M,r),l),I=cl(A,u,d,r),_=I.left,B=I.top,z=_-h,N=B-m;if(Math.abs(z)<2&&Math.abs(N)<2)break;R[0]-=z,R[1]-=N}return M.map(function(G){return Math.round(G)})}function Yp(t,e,n){var r=t.length===16,a=r?4:3,i=e.map(function(l){return Bt(t,l,a)}),s=n.left,o=n.top;return i.map(function(l){return[l[0]+s,l[1]+o]})}function xr(t,e,n,r){var a=t.length===16,i=a?4:3,s=_e(t,n,r,i),o=s[0],l=o[0],c=o[1],u=s[1],d=u[0],f=u[1],p=s[2],v=p[0],h=p[1],m=s[3],g=m[0],E=m[1],b=Bt(t,e,i),C=b[0],D=b[1],x=Math.min(l,d,v,g),S=Math.min(c,f,h,E),k=Math.max(l,d,v,g),w=Math.max(c,f,h,E);l=l-x||0,d=d-x||0,v=v-x||0,g=g-x||0,c=c-S||0,f=f-S||0,h=h-S||0,E=E-S||0,C=C-x||0,D=D-S||0;var T=Ia(_e(t,100,100,i));return{left:x,top:S,right:k,bottom:w,origin:[C,D],pos1:[l,c],pos2:[d,f],pos3:[v,h],pos4:[g,E],direction:T}}function de(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ul(t,e){return de([e[0]-t[0],e[1]-t[1]])}function on(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=kt(t,e));var a=ul(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(a,"px")}}function wi(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n.length,i=n.reduce(function(o,l){return o+l[0]},0)/a,s=n.reduce(function(o,l){return o+l[1]},0)/a;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function er(t,e){var n=t[e];return Qt(n)?O(O({},t),n):t}function dl(t,e){e===void 0&&(e=t?Me(t):null);var n=t&&!Tn(t.offsetWidth),r=0,a=0,i=0,s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0,v=0,h=1/0,m=1/0,g=1/0,E=1/0,b=0,C=0,D=!1;if(t)if(!n&&t.tagName.toLowerCase()!=="svg"){var x=t.getBBox();D=!0,r=x.width,a=x.height,o=r,l=a,c=r,u=a,i=r,s=a}else{var S=t.style,k=e.boxSizing==="border-box",w=parseFloat(e.borderLeftWidth)||0,T=parseFloat(e.borderRightWidth)||0,R=parseFloat(e.borderTopWidth)||0,M=parseFloat(e.borderBottomWidth)||0,P=parseFloat(e.paddingLeft)||0,L=parseFloat(e.paddingRight)||0,A=parseFloat(e.paddingTop)||0,I=parseFloat(e.paddingBottom)||0,_=P+L,B=A+I,z=w+T,N=R+M,G=_+z,K=B+N,H=e.position,$=0,W=0;if("clientLeft"in t){var X=null;if(H==="absolute"){var q=an(t,document.body);X=q.offsetParent}else X=t.parentElement;if(X){var tt=Me(X);$=parseFloat(tt.width),W=parseFloat(tt.height)}}d=Math.max(_,bt(e.minWidth,$)||0),f=Math.max(B,bt(e.minHeight,W)||0),h=bt(e.maxWidth,$),m=bt(e.maxHeight,W),isNaN(h)&&(h=1/0),isNaN(m)&&(m=1/0),b=bt(S.width,0)||0,C=bt(S.height,0)||0,o=parseFloat(e.width)||0,l=parseFloat(e.height)||0,c=Math.abs(o-b)<1?Pn(d,b||o,h):o,u=Math.abs(l-C)<1?Pn(f,C||l,m):l,r=c,a=u,i=c,s=u,k?(g=h,E=m,p=d,v=f,c=r-G,u=a-K):(g=h+G,E=m+K,p=d+G,v=f+K,r=c+G,a=u+K),i=c+_,s=u+B}return{svg:D,offsetWidth:r,offsetHeight:a,clientWidth:i,clientHeight:s,contentWidth:c,contentHeight:u,inlineCSSWidth:b,inlineCSSHeight:C,cssWidth:o,cssHeight:l,minWidth:d,minHeight:f,maxWidth:h,maxHeight:m,minOffsetWidth:p,minOffsetHeight:v,maxOffsetWidth:g,maxOffsetHeight:E}}function fl(t,e){return kt(e>0?t[0]:t[1],e>0?t[1]:t[0])}function qn(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function pl(t,e){var n=t===document.body||t===document.documentElement,r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Me(t).overflow!=="visible",O(O({},e),r)}function Mi(t,e,n,r){var a=t.left,i=t.right,s=t.top,o=t.bottom,l=e.top,c=e.left,u={left:c+a,top:l+s,right:c+i,bottom:l+o,width:i-a,height:o-s};return n&&r?pl(n,u):u}function sn(t,e){var n=0,r=0,a=0,i=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,a=s.width,i=s.height}var o={left:n,top:r,width:a,height:i,right:n+a,bottom:r+i};return t&&e?pl(t,o):o}function vl(t,e,n,r){var a;if(t)a=t;else if(e)a=[0,0];else{var i=n.target;a=hl(i,r)}return a}function hl(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var a=[0,0];return r.indexOf("w")>-1&&(a[0]=-1),r.indexOf("e")>-1&&(a[0]=1),r.indexOf("n")>-1&&(a[1]=-1),r.indexOf("s")>-1&&(a[1]=1),a}}}function ki(t,e){return[ct(e,t[0]),ct(e,t[1]),ct(e,t[2]),ct(e,t[3])]}function qt(t){var e=t.left,n=t.top,r=t.pos1,a=t.pos2,i=t.pos3,s=t.pos4;return ki([r,a,i,s],[e,n])}function Xp(t){return Math.round(t%1===-.5?t-1:t)}function Sr(t,e){var n;(n=t[e])===null||n===void 0||n.unset(),t[e]=null}function Yt(t,e){if(e){var n=Cr(e);n.nextStyle=O(O({},n.nextStyle),t)}return{style:t,cssText:Ae(t).map(function(r){return"".concat(On(r,"-"),": ").concat(t[r],";")}).join("")}}function gl(t,e,n){var r=e.afterTransform||e.transform;return O(O({},Yt(O(O(O({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function nt(t,e,n,r){var a=e.datas;a.datas||(a.datas={});var i=O(O({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:a.datas,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){a.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return a.isStartEvent?r||(a.lastEvent=i):a.isStartEvent=!0,i}function re(t,e,n){var r=e.datas,a="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),O(O({isDrag:a},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function Jn(t,e,n){t._emitter.on(e,n)}function Y(t,e,n,r){return t.triggerEvent(e,n,r)}function Me(t,e){return window.getComputedStyle(t,e)}function ta(t,e,n){var r={},a={};return t.filter(function(i){var s=i.name;if(r[s]||!e.some(function(o){return i[o]}))return!1;if(!n&&i.ableGroup){if(a[i.ableGroup])return!1;a[i.ableGroup]=!0}return r[s]=!0,!0})}function Ti(t,e){return t===e||t==null&&e==null}function Zp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var a=t[r];if(!Tn(a))return a}return t[n]}function ml(t,e){var n=[],r=[];return t.forEach(function(a,i){var s=e(a,i,t),o=r.indexOf(s),l=n[o]||[];o===-1&&(r.push(s),n.push(l)),l.push(a)}),n}function Up(t,e){var n=[],r={};return t.forEach(function(a,i){var s=e(a,i,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(a)}),n}function yl(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Dr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Math.abs(r)-Math.abs(n)}),t[0]}function rr(t,e,n){return Gt(ue(t,n),je(e,n),n)}function El(t,e){var n,r=t.is3d,a=t.rootMatrix,i=r?4:3;return n=rr(a,[e.distX,e.distY],i),e.distX=n[0],e.distY=n[1],e}function ea(t,e,n,r,a){return j(Bt(t,ct(n,e),a),r)}function fe(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function ra(t){return Math.abs(t)<=Vt?0:t}function Ri(t){return function(e){if(!e.isDragging(t))return"";var n=Bp(e,t),r=n.deg;return r?Q("view-control-rotation".concat(r)):""}}function Oi(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(i){return r.requestAble===i})?r.parentDirection:!1;var a=r.inputEvent.target;return Lt(a,Q("direction"))&&(!t||Lt(a,Q(t)))}}function jp(t){var e={};for(var n in t)e[t[n]]=n;return e}function Qp(t,e){var n=t.slice(0,e<0?void 0:e),r=t.slice(0,e<0?void 0:e+1),a=t[e]||"",i=e<0?[]:t.slice(e),s=e<0?[]:t.slice(e+1),o=Qe(n),l=Qe(r),c=Qe([a]),u=Qe(i),d=Qe(s),f=gr(o),p=gr(l),v=gr(u),h=gr(d),m=yt(f,v,4);return{transforms:t,beforeFunctionMatrix:f,beforeFunctionMatrix2:p,targetFunctionMatrix:gr(c),afterFunctionMatrix:v,afterFunctionMatrix2:h,allFunctionMatrix:m,beforeFunctions:o,beforeFunctions2:l,targetFunction:c[0],afterFunctions:u,afterFunctions2:d,beforeFunctionTexts:n,beforeFunctionTexts2:r,targetFunctionText:a,afterFunctionTexts:i,afterFunctionTexts2:s}}function qp(t){return!t||!Qt(t)||t instanceof Element?!1:Mt(t)||"length"in t}function nr(t,e){return t?t instanceof Element?t:$t(t)?e?document.querySelector(t):t:Rn(t)?t():"current"in t?t.current:t:null}function Pi(t,e){if(!t)return[];var n=qp(t)?[].slice.call(t):[t];return n.reduce(function(r,a){return $t(a)&&e?J(J([],r,!0),[].slice.call(document.querySelectorAll(a)),!0):(Mt(a)?r.push(Pi(a,e)):r.push(nr(a,e)),r)},[])}function Jp(t,e,n){var r=kt(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function bl(t,e){var n=t.rootMatrix,r=t.is3d,a=r?4:3,i=ue(n,a);return r||(i=me(i,3,4)),i[12]=0,i[13]=0,i[14]=0,In(i,e)}function Cl(t,e,n,r,a){var i=t[0],s=t[1],o=0,l=0;if(a&&i&&s){var c=kt([0,0],e),u=kt([0,0],r),d=de(e),f=Math.cos(c-u)*d;if(!r[0])l=f,o=l*n;else if(!r[1])o=f,l=o/n;else{var p=r[0]*2*i,v=r[1]*2*s,h=de([p+e[0],v+e[1]])-de([p,v]),m=kt([0,0],[n,1]);o=Math.cos(m)*h,l=Math.sin(m)*h}}else o=r[0]*e[0],l=r[1]*e[1];return[o,l]}function xl(t,e,n,r){var a,i=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,l=0,c=0,u=r.distX,d=r.distY,f=r.parentDistance,p=r.parentDist,v=r.parentScale,h=n.fixedDirection,m=[0,1].map(function(x){return Math.abs(t[x]-h[x])}),g=[0,1].map(function(x){var S=m[x];return S!==0&&(S=2/S),S});if(p)l=p[0],c=p[1],e&&(l?c||(c=l/i):l=c*i);else if(v)l=(v[0]-1)*s,c=(v[1]-1)*o;else if(f){var E=s*m[0],b=o*m[1],C=de([E,b]);l=f/C*E*g[0],c=f/C*b*g[1]}else{var D=ye({datas:n,distX:u,distY:d});D=g.map(function(x,S){return D[S]*x}),a=Cl([s,o],D,i,t,e),l=a[0],c=a[1]}return{distWidth:l,distHeight:c}}function Li(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=t.split(" "),r=n[0],a=n[1],i=Li(r||""),s=Li(a||""),o=O(O({},i),s),l={x:"50%",y:"50%"};return o.x&&(l.x=o.x),o.y&&(l.y=o.y),o.value&&(o.x&&!o.y&&(l.y=o.value),!o.x&&o.y&&(l.x=o.value)),l}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function tv(t,e,n){var r=Li(t,!0),a=r.x,i=r.y;return[bt(a,e)||0,bt(i,n)||0]}function ev(t,e,n){var r=t.map(function(i){return j(i,e)}),a=r.map(function(i){return Zr(i,n)});return{prev:r,next:a,result:a.map(function(i){return ct(i,e)})}}function Sl(t,e){return t.length===e.length&&t.every(function(n,r){var a=e[r],i=Mt(n),s=Mt(a);return i&&s?Sl(n,a):!i&&!s?n===a:!1})}var rv=en("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,a=e.angle,i=e.originalDatas,s=t.props,o=s.pinchable,l=s.ables;if(!o)return!1;var c="onPinch".concat(r?"Group":"","Start"),u="drag".concat(r?"Group":"","ControlStart"),d=(o===!0?t.controlAbles:l.filter(function(h){return o.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[u]}),f=nt(t,e,{});r&&(f.targets=r);var p=Y(t,c,f);n.isPinch=p!==!1,n.ables=d;var v=n.isPinch;return v?(d.forEach(function(h){if(i[h.name]=i[h.name]||{},!!h[u]){var m=O(O({},e),{datas:i[h.name],parentRotate:a,isPinch:!0});h[u](t,m)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},v):!1},pinch:function(t,e){var n=e.datas,r=e.scale,a=e.distance,i=e.originalDatas,s=e.inputEvent,o=e.targets,l=e.angle;if(n.isPinch){var c=a*(1-1/r),u=nt(t,e,{});o&&(u.targets=o);var d="onPinch".concat(o?"Group":"");Y(t,d,u);var f=n.ables,p="drag".concat(o?"Group":"","Control");return f.forEach(function(v){v[p]&&v[p](t,O(O({},e),{datas:i[v.name],inputEvent:s,parentDistance:c,parentRotate:l,isPinch:!0}))}),u}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,a=e.inputEvent,i=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(i?"Group":"","End"),l=re(t,e,{isDrag:r});i&&(l.targets=i),Y(t,o,l);var c=n.ables,u="drag".concat(i?"Group":"","ControlEnd");return c.forEach(function(d){d[u]&&d[u](t,O(O({},e),{isDrag:r,datas:s[d.name],inputEvent:a,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,O(O({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,O(O({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,O(O({},e),{targets:t.props.targets}))}});function pe(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var a=r.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas;return t.moveables.map(function(s,o){return i[o]=i[o]||{},i[o][e]=i[o][e]||{},O(O({},n),{datas:i[o][e],originalDatas:i[o]})})}function Ai(t,e,n,r,a,i,s){var o=!!n.match(/Start$/g),l=!!n.match(/End$/g),c=a.isPinch,u=a.datas,d=pe(t,e.name,a),f=t.moveables,p=d.map(function(v,h){var m=f[h],g=m.state,E=g.gestos,b=v;if(o)b=new br(s).dragStart(r,v);else{if(E[s]||(E[s]=u.childGestos[h]),!E[s])return;b=rn(v,g,r,c,i,s)}var C=e[n](m,O(O({},b),{parentFlag:!0}));return l&&(E[s]=null),C});return o&&(u.childGestos=f.map(function(v){return v.state.gestos[s]})),p}function ke(t,e,n,r,a,i){a===void 0&&(a=function(u,d){return d});var s=!!n.match(/End$/g),o=pe(t,e.name,r),l=t.moveables,c=o.map(function(u,d){var f=l[d],p=u;p=a(f,u);var v=e[n](f,O(O({},p),{parentFlag:!0}));return v&&i&&i(f,u,v,d),s&&(f.state.gestos={}),v});return c}var nv=["left","right","center"],av=["top","bottom","middle"],ze={start:"left",end:"right",center:"center"},Fe={start:"top",end:"bottom",center:"middle"};function wr(t,e){var n=t.props,r=n.snappable,a=n.bounds,i=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,l=n.snapGridWidth,c=n.snapGridHeight,u=t.state,d=u.guidelines,f=u.enableSnap;return!r||!f||e&&r!==!0&&r.indexOf(e)<0?!1:!!(l||c||a||i||d&&d.length||s&&s.length||o&&o.length)}function Ni(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function iv(t,e){var n=Ni(t),r={};for(var a in n)a in e&&n[a]&&(r[a]=e[a]);return r}function Ii(t,e){var n=iv(t,e),r=av.filter(function(i){return i in n}),a=nv.filter(function(i){return i in n});return{horizontal:r.map(function(i){return n[i]}),vertical:a.map(function(i){return n[i]})}}function ov(t,e,n){var r=Bt(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function sv(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];Math.abs(r)<Ot&&(r=0),Math.abs(a)<Ot&&(a=0);var i=0,s=0,o=0;return r?a?(i=-a/r,s=1,o=i*e[0]-e[1]):(s=1,o=-e[1]):(i=-1,o=e[0]),[i,s,o].map(function(l){return rt(l,Ot)})}function na(t,e,n,r){var a=t.props,i=Zp(r,a.snapThreshold,5);return Dl(t.state.guidelines,e,n,i)}function Dl(t,e,n,r){return{vertical:Ml(t,"vertical",e,r),horizontal:Ml(t,"horizontal",n,r)}}function lv(t,e,n){var r=n[0],a=n[1],i=e[0],s=e[1],o=j(n,e),l=o[0],c=o[1],u=c>0,d=l>0;l=ra(l),c=ra(c);var f={isSnap:!1,offset:0,pos:0},p={isSnap:!1,offset:0,pos:0};if(l===0&&c===0)return{vertical:f,horizontal:p};var v=na(t,l?[r]:[],c?[a]:[]),h=v.vertical,m=v.horizontal;h.posInfos.filter(function(L){var A=L.pos;return d?A>=i:A<=i}),m.posInfos.filter(function(L){var A=L.pos;return u?A>=s:A<=s}),h.isSnap=h.posInfos.length>0,m.isSnap=m.posInfos.length>0;var g=Bi(h),E=g.isSnap,b=g.guideline,C=Bi(m),D=C.isSnap,x=C.guideline,S=D?x.pos[1]:0,k=E?b.pos[0]:0;if(l===0)D&&(p.isSnap=!0,p.pos=x.pos[1],p.offset=a-p.pos);else if(c===0)E&&(f.isSnap=!0,f.pos=k,f.offset=r-k);else{var w=c/l,T=n[1]-w*r,R=0,M=0,P=!1;E?(M=k,R=w*M+T,P=!0):D&&(R=S,M=(R-T)/w,P=!0),P&&(f.isSnap=!0,f.pos=M,f.offset=r-M,p.isSnap=!0,p.pos=R,p.offset=a-R)}return{vertical:f,horizontal:p}}function wl(t,e,n){var r=Ii(t.props.snapDirections,e);return na(t,r.vertical,r.horizontal,n)}function Bi(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],a=r.offset,i=r.dist,s=r.guideline;return{isSnap:e,offset:a,dist:i,pos:n.pos,guideline:s}}function Ml(t,e,n,r){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var a=e==="vertical",i=a?0:1,s=n.map(function(l,c){var u=t.map(function(d){var f=d.pos,p=l-f[i];return{offset:p,dist:Math.abs(p),guideline:d}}).filter(function(d){var f=d.guideline,p=d.dist,v=f.type;return!(v!==e||p>r)}).sort(function(d,f){return d.dist-f.dist});return{pos:l,index:c,guidelineInfos:u}}).filter(function(l){return l.guidelineInfos.length>0}).sort(function(l,c){return l.guidelineInfos[0].dist-c.guidelineInfos[0].dist}),o=s.length>0;return{isSnap:o,index:o?s[0].index:-1,posInfos:s}}function cv(t,e,n,r){r===void 0&&(r=1);var a=[];if(n[0]&&n[1])a=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(o){return Tt(e,o)});else if(!n[0]&&!n[1])for(var i=[e[0],e[1],e[3],e[2],e[0]],s=0;s<4;++s)a.push(i[s]),a.push([(i[s][0]+i[s+1][0])/2,(i[s][1]+i[s+1][1])/2]);else t.props.keepRatio?a=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(o){return Tt(e,o)}):(a=Rp(e,n),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));return na(t,a.map(function(o){return o[0]}),a.map(function(o){return o[1]}),r)}function kl(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Vt?1:r<Vt?-1:n-r}function aa(t,e){return t.slice().sort(function(n,r){var a=n.sign[e],i=r.sign[e],s=n.offset[e],o=r.offset[e];if(a){if(!i)return-1}else return 1;return kl({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function uv(t,e,n){var r=[];if(n)Math.abs(e[0])!==1||Math.abs(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var a=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var l=[s*a[0],o*a[1]];e[0]===l[0]&&e[1]===l[1]||r.push([e,l])})})}else if(t[0]){var i=Math.abs(e[0])===1?[1]:[1,-1];i.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var i=Math.abs(e[1])===1?[1]:[1,-1];i.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function Tl(t,e){var n=Na([e[0][0],e[1][0]]),r=Na([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function _i(t,e){var n=e[0],r=e[1],a=r[0]-n[0],i=r[1]-n[1];Math.abs(a)<Vt&&(a=0),Math.abs(i)<Vt&&(i=0);var s,o;if(!a)s=n[0],o=t[0];else if(!i)s=n[1],o=t[1];else{var l=i/a;s=l*(t[0]-n[0])+n[1],o=t[1]}return s-o}function Rl(t,e,n,r){return r===void 0&&(r=Vt),t.every(function(a){var i=_i(a,e),s=i<=0;return s===n||Math.abs(i)<=r})}function Ol(t,e,n,r,a){return a===void 0&&(a=0),r&&e-a<=t||!r&&t<=n+a?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function dv(t,e){var n=e.line,r=e.centerSign,a=e.verticalSign,i=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=o.left,c=o.top,u=o.width,d=o.height,f=[[l,c],[l,c+d]],p=[[l,c],[l+u,c]],v=[[l+u,c],[l+u,c+d]],h=[[l,c+d],[l+u,c+d]];if(Rl([[l,c],[l+u,c],[l,c+d],[l+u,c+d]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var m=Ge(n,s,p,a),g=Ge(n,s,h,a),E=Ge(n,s,f,i),b=Ge(n,s,v,i),C=m.isBound&&g.isBound,D=m.isBound||g.isBound,x=E.isBound&&b.isBound,S=E.isBound||b.isBound,k=Dr(m.offset,g.offset),w=Dr(E.offset,b.offset),T=[0,0],R=!1,M=!1;return Math.abs(w)<Math.abs(k)?(T=[k,0],R=D,M=C):(T=[0,w],R=S,M=x),{isAllBound:M,isVerticalBound:D,isHorizontalBound:S,isBound:R,offset:T}}function Ge(t,e,n,r,a,i){var s=e[0],o=e[1],l=t[0],c=n[0],u=n[1],d=ra(u[1]-c[1]),f=ra(u[0]-c[0]),p=o,v=s,h=-s/o;if(f){if(!d){if(i&&!p)return{isBound:!1,offset:0};if(v){var b=(c[1]-l[1])/h+l[0];return Ol(b,c[0],u[0],r,a)}else{var g=c[1]-l[1],E=Math.abs(g)<=(a||0);return{isBound:E,offset:E?g:0}}}}else{if(i&&!v)return{isBound:!1,offset:0};if(p){var m=h*(c[0]-l[0])+l[1];return Ol(m,c[1],u[1],r,a)}else{var g=c[0]-l[0],E=Math.abs(g)<=(a||0);return{isBound:E,offset:E?g:0}}}return{isBound:!1,offset:0}}function Pl(t,e,n){return e.map(function(r){var a=dv(t,r),i=a.isBound,s=a.offset,o=a.isVerticalBound,l=a.isHorizontalBound,c=r.multiple,u=ye({datas:n,distX:s[0],distY:s[1]}).map(function(d,f){return d*(c[f]?2/c[f]:0)});return{sign:c,isBound:i,isVerticalBound:o,isHorizontalBound:l,isSnap:!1,offset:u}})}function fv(t,e,n){var r,a=zi(t,e,[0,0],!1).map(function(f){return O(O({},f),{multiple:f.multiple.map(function(p){return Math.abs(p)*2})})}),i=Pl(t,a,n),s=aa(i,0),o=aa(i,1),l=0,c=0,u=s.isVerticalBound||o.isVerticalBound,d=s.isHorizontalBound||o.isHorizontalBound;return(u||d)&&(r=kp({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),l=r[0],c=r[1]),{vertical:{isBound:u,offset:l},horizontal:{isBound:d,offset:c}}}function pv(t,e){var n=[],r=t[0],a=t[1];return r&&a?n.push([[0,a*2],t,[-r,a]],[[r*2,0],t,[r,-a]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):a?(n.push([[0,a*2],[1,a],[-1,a]]),e&&n.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function zi(t,e,n,r){var a=t.state,i=a.allMatrix,s=a.is3d,o=_e(i,100,100,s?4:3),l=Tt(o,[0,0]);return pv(n,r).map(function(c){var u=c[0],d=c[1],f=c[2],p=[Tt(o,d),Tt(o,f)],v=sv(p),h=Tl(l,p),m=h.vertical,g=h.horizontal,E=_i(l,p)<=0;return{multiple:u,centerSign:E,verticalSign:m,horizontalSign:g,lineConstants:v,line:[Tt(e,d),Tt(e,f)]}})}function Ll(t,e,n,r){var a=r?t.map(function(i){return Zr(i,r)}):t;return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(i){var s=_i(n,i)<=0;return!Rl(e,i,s)})}function vv(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!a)return Math.abs(e[1]);var i=a/r;return Math.abs((-i*e[0]+e[1])/Math.sqrt(Math.pow(i,2)+1))}function hv(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];if(!r)return[e[0],0];if(!a)return[0,e[1]];var i=a/r,s=-i*e[0]+e[1];return[-s/(i+1/i),s/(i*i+1)]}function gv(t,e,n,r,a){var i=t.props.innerBounds,s=a*Math.PI/180;if(!i)return[];var o=i.left,l=i.top,c=i.width,u=i.height,d=o-r[0],f=o+c-r[0],p=l-r[1],v=l+u-r[1],h=[[d,p],[f,p],[d,v],[f,v]],m=Tt(n,[0,0]);if(!Ll(n,h,m,0))return[];var g=[],E=h.map(function(b){return[de(b),kt([0,0],b)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(b){var C=kt([0,0],hv(b)),D=vv(b);g.push.apply(g,E.filter(function(x){var S=x[0];return S&&D<=S}).map(function(x){var S=x[0],k=x[1],w=Math.acos(S?D/S:0),T=k+w,R=k-w;return[s+T-C,s+R-C]}).reduce(function(x,S){return x.push.apply(x,S),x},[]).filter(function(x){return!Ll(e,h,m,x)}).map(function(x){return rt(x*180/Math.PI,Vt)}))}),g}function mv(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,a=n.pos2,i=n.pos3,s=n.pos4,o=[r,a,i,s],l=Tt(o,[0,0]),c=e.left,u=e.top,d=e.width,f=e.height,p=[[c,u],[c,u+f]],v=[[c,u],[c+d,u]],h=[[c+d,u],[c+d,u+f]],m=[[c,u+f],[c+d,u+f]],g=zi(t,o,[0,0],!1),E=[],b=[],C={top:!1,bottom:!1,left:!1,right:!1};return g.forEach(function(D){var x=D.line,S=D.lineConstants,k=Tl(l,x),w=k.horizontal,T=k.vertical,R=Ge(x,S,v,T,1,!0),M=Ge(x,S,m,T,1,!0),P=Ge(x,S,p,w,1,!0),L=Ge(x,S,h,w,1,!0);R.isBound&&!C.top&&(E.push(u),C.top=!0),M.isBound&&!C.bottom&&(E.push(u+f),C.bottom=!0),P.isBound&&!C.left&&(b.push(c),C.left=!0),L.isBound&&!C.right&&(b.push(c+d),C.right=!0)}),{horizontal:E,vertical:b}}function Fi(t,e,n){var r=t||{},a=r.position,i=a===void 0?"client":a,s=r.left,o=s===void 0?-1/0:s,l=r.top,c=l===void 0?-1/0:l,u=r.right,d=u===void 0?1/0:u,f=r.bottom,p=f===void 0?1/0:f,v={position:i,left:o,top:c,right:d,bottom:p};return{vertical:Al(v,e,!0),horizontal:Al(v,n,!1)}}function ia(t,e){var n=t.state,r=n.containerClientRect,a=r.clientHeight,i=r.clientWidth,s=r.clientLeft,o=r.clientTop,l=n.snapOffset,c=l.left,u=l.top,d=l.right,f=l.bottom,p=e||t.props.bounds||{},v=p.position||"client",h=v==="css",m=p.left,g=m===void 0?-1/0:m,E=p.top,b=E===void 0?-1/0:E,C=p.right,D=C===void 0?h?-1/0:1/0:C,x=p.bottom,S=x===void 0?h?-1/0:1/0:x;return h&&(D=i+d-c-D,S=a+f-u-S),{left:g+c-s,right:D+c-s,top:b+u-o,bottom:S+u-o}}function yv(t,e,n){var r=ia(t),a=r.left,i=r.top,s=r.right,o=r.bottom,l=n[0],c=n[1],u=j(n,e),d=u[0],f=u[1];Math.abs(d)<Vt&&(d=0),Math.abs(f)<Vt&&(f=0);var p=f>0,v=d>0,h={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(d===0&&f===0)return{vertical:h,horizontal:m};if(d===0)p?o<c&&(m.pos=o,m.offset=c-o):i>c&&(m.pos=i,m.offset=c-i);else if(f===0)v?s<l&&(h.pos=s,h.offset=l-s):a>l&&(h.pos=a,h.offset=l-a);else{var g=f/d,E=n[1]-g*l,b=0,C=0,D=!1;v&&s<=l?(b=g*s+E,C=s,D=!0):!v&&l<=a&&(b=g*a+E,C=a,D=!0),D&&(b<i||b>o)&&(D=!1),D||(p&&o<=c?(b=o,C=(b-E)/g,D=!0):!p&&c<=i&&(b=i,C=(b-E)/g,D=!0)),D&&(h.isBound=!0,h.pos=C,h.offset=l-C,m.isBound=!0,m.pos=b,m.offset=c-b)}return{vertical:h,horizontal:m}}function Al(t,e,n){var r=t[n?"left":"top"],a=t[n?"right":"bottom"],i=Math.min.apply(Math,e),s=Math.max.apply(Math,e),o=[];return r+1>i&&o.push({isBound:!0,offset:i-r,pos:r}),a-1<s&&o.push({isBound:!0,offset:s-a,pos:a}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(l,c){return Math.abs(c.offset)-Math.abs(l.offset)})}function Nl(t,e,n){var r=n?t.map(function(a){return Zr(a,n)}):t;return r.some(function(a){return a[0]<e.left&&Math.abs(a[0]-e.left)>.1||a[0]>e.right&&Math.abs(a[0]-e.right)>.1||a[1]<e.top&&Math.abs(a[1]-e.top)>.1||a[1]>e.bottom&&Math.abs(a[1]-e.bottom)>.1})}function Ev(t,e,n){var r=de(t),a=Math.sqrt(r*r-e*e)||0;return[a,-a].sort(function(i,s){return Math.abs(i-t[n?0:1])-Math.abs(s-t[n?0:1])}).map(function(i){return kt([0,0],n?[i,e]:[e,i])})}function bv(t,e,n,r,a){if(!t.props.bounds)return[];var i=a*Math.PI/180,s=ia(t),o=s.left,l=s.top,c=s.right,u=s.bottom,d=o-r[0],f=c-r[0],p=l-r[1],v=u-r[1],h={left:d,top:p,right:f,bottom:v};if(!Nl(n,h,0))return[];var m=[];return[[d,0],[f,0],[p,1],[v,1]].forEach(function(g){var E=g[0],b=g[1];n.forEach(function(C){var D=kt([0,0],C);m.push.apply(m,Ev(C,E,b).map(function(x){return i+x-D}).filter(function(x){return!Nl(e,h,x)}).map(function(x){return rt(x*180/Math.PI,Vt)}))})}),m}function Cv(t,e){var n,r=t.direction,a=t.classNames,i=t.size,s=t.pos,o=t.zoom,l=t.key,c=r==="horizontal",u=c?"Y":"X";return e.createElement("div",{key:l,className:a.join(" "),style:(n={},n[c?"width":"height"]="".concat(i),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(u,"(-50%) scale").concat(u,"(").concat(o,")"),n)})}function Gi(t,e){return Cv(O(O({},t),{classNames:J([Q("line","guideline",t.direction)],t.classNames,!0).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(rt(n,.1),"px")})}),e)}function Il(t,e,n,r,a,i,s,o){var l=t.props.zoom;return n.map(function(c,u){var d=c.type,f=c.pos,p=[0,0];return p[s]=r,p[s?0:1]=-a+f,Gi({key:"".concat(e,"TargetGuideline").concat(u),classNames:[Q("target","bold",d)],posValue:p,sizeValue:i,zoom:l,direction:e},o)})}function Bl(t,e,n,r,a,i){var s=t.props,o=s.zoom,l=s.isDisplayInnerSnapDigit,c=e==="horizontal"?ze:Fe,u=a[c.start],d=a[c.end];return n.filter(function(f){var p=f.hide,v=f.elementRect;if(p)return!1;if(l&&v){var h=v.rect;if(h[c.start]<=u&&d<=h[c.end])return!1}return!0}).map(function(f,p){var v=f.pos,h=f.size,m=f.element,g=f.className,E=[-r[0]+v[0],-r[1]+v[1]];return Gi({key:"".concat(e,"-default-guideline-").concat(p),classNames:m?[Q("bold"),g]:[Q("normal"),g],direction:e,posValue:E,sizeValue:h,zoom:o},i)})}function ln(t,e,n,r,a,i,s,o){var l,c=t.props,u=c.snapDigit,d=u===void 0?0:u,f=c.isDisplaySnapDigit,p=f===void 0?!0:f,v=c.snapDistFormat,h=v===void 0?function(D,x){return D}:v,m=c.zoom,g=e==="horizontal"?"X":"Y",E=e==="vertical"?"height":"width",b=Math.abs(a),C=p?parseFloat(b.toFixed(d)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Q("guideline-group",e),style:(l={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},l[E]="".concat(b,"px"),l)},Gi({direction:e,classNames:[Q(n),s],size:"100%",posValue:[0,0],sizeValue:b,zoom:m},o),o.createElement("div",{className:Q("size-value","gap"),style:{transform:"translate".concat(g,"(-50%) scale(").concat(m,")")}},C>0?h(C,e):""))}function xv(t,e,n,r){var a=t==="vertical"?0:1,i=t==="vertical"?1:0,s=a?ze:Fe,o=n[s.start],l=n[s.end];return ml(e,function(c){return c.pos[a]}).map(function(c){var u=[],d=[],f=[];return c.forEach(function(p){var v,h,m=p.element,g=p.elementRect.rect;if(g[s.end]<o)u.push(p);else if(l<g[s.start])d.push(p);else if(g[s.start]<=o&&l<=g[s.end]&&r){var E=p.pos,b={element:m,rect:O(O({},g),(v={},v[s.end]=g[s.start],v))},C={element:m,rect:O(O({},g),(h={},h[s.start]=g[s.end],h))},D=[0,0],x=[0,0];D[a]=E[a],D[i]=E[i],x[a]=E[a],x[i]=E[i]+p.size,u.push({type:t,pos:D,size:0,elementRect:b}),d.push({type:t,pos:x,size:0,elementRect:C})}}),u.sort(function(p,v){return v.pos[i]-p.pos[i]}),d.sort(function(p,v){return p.pos[i]-v.pos[i]}),{total:c,start:u,end:d,inner:f}})}function Sv(t,e,n,r,a){var i=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var l=e.filter(function(m){return m.type===o}),c=o==="vertical"?1:0,u=c?0:1,d=xv(o,l,r,i),f=c?Fe:ze,p=c?ze:Fe,v=r[f.start],h=r[f.end];d.forEach(function(m){var g=m.total,E=m.start,b=m.end,C=m.inner,D=n[u]+g[0].pos[u]-r[p.start],x=r;E.forEach(function(S){var k=S.elementRect.rect,w=x[f.start]-k[f.end];if(w>0){var T=[0,0];T[c]=n[c]+x[f.start]-v-w,T[u]=D,s.push(ln(t,o,"dashed",s.length,w,T,S.className,a))}x=k}),x=r,b.forEach(function(S){var k=S.elementRect.rect,w=k[f.start]-x[f.end];if(w>0){var T=[0,0];T[c]=n[c]+x[f.end]-v,T[u]=D,s.push(ln(t,o,"dashed",s.length,w,T,S.className,a))}x=k}),C.forEach(function(S){var k=S.elementRect.rect,w=v-k[f.start],T=k[f.end]-h,R=[0,0],M=[0,0];R[c]=n[c]-w,R[u]=D,M[c]=n[c]+h-v,M[u]=D,s.push(ln(t,o,"dashed",s.length,w,R,S.className,a)),s.push(ln(t,o,"dashed",s.length,T,M,S.className,a))})})}),s}function Dv(t,e,n,r,a){var i=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(m){return m.type===s}).slice(0,1),l=s==="vertical"?0:1,c=l?0:1,u=l?Fe:ze,d=l?ze:Fe,f=r[u.start],p=r[u.end],v=r[d.start],h=r[d.end];o.forEach(function(m){var g=m.gap,E=m.gapRects,b=Math.max.apply(Math,J([v],E.map(function(x){var S=x.rect;return S[d.start]}),!1)),C=Math.min.apply(Math,J([h],E.map(function(x){var S=x.rect;return S[d.end]}),!1)),D=(b+C)/2;b===C||D===(v+h)/2||E.forEach(function(x){var S=x.rect,k=x.className,w=[n[0],n[1]];if(S[u.end]<f)w[l]+=S[u.end]-f;else if(p<S[u.start])w[l]+=S[u.start]-f-g;else return;w[c]+=D-v,i.push(ln(t,l?"vertical":"horizontal","gap",i.length,g,w,k,a))})})}),i}function wv(t,e,n,r){var a=e[0]-t[0],i=e[1]-t[1];if(Math.abs(a)<Ot&&(a=0),Math.abs(i)<Ot&&(i=0),!a)return r?[0,0]:[0,n];if(!i)return r?[n,0]:[0,0];var s=i/a,o=t[1]-s*t[0];if(r){var l=s*(e[0]+n)+o;return[n,l-e[1]]}else{var c=(e[1]+n-o)/s;return[c-e[0],n]}}function Ki(t,e,n,r,a){var i=wv(t,e,n,r);if(!i)return{isOutside:!1,offset:[0,0]};var s=ne(t,e),o=ne(i,t),l=ne(i,e),c=o>s||l>s,u=ye({datas:a,distX:i[0],distY:i[1]}),d=u[0],f=u[1];return{offset:[d,f],isOutside:c}}function oa(t,e){return t.isBound?t.offset:e.isSnap?Bi(e).offset:0}function Mv(t,e,n,r,a){var i=e[0],s=e[1],o=n[0],l=n[1],c=r[0],u=r[1],d=a[0],f=a[1],p=-d,v=-f;if(t&&i&&s){p=0,v=0;var h=[];if(o&&l?h.push([0,f],[d,0]):o?h.push([d,0]):l?h.push([0,f]):c&&u?h.push([0,f],[d,0]):c?h.push([d,0]):u&&h.push([0,f]),h.length){h.sort(function(b,C){return de(j([i,s],b))-de(j([i,s],C))});var m=h[0];if(m[0]&&Math.abs(i)>Ot)p=-m[0],v=s*Math.abs(i+p)/Math.abs(i)-s;else if(m[1]&&Math.abs(s)>Ot){var g=s;v=-m[1],p=i*Math.abs(s+v)/Math.abs(g)-i}if(t&&l&&o)if(Math.abs(p)>Ot&&Math.abs(p)<Math.abs(d)){var E=Math.abs(d)/Math.abs(p);p*=E,v*=E}else if(Math.abs(v)>Ot&&Math.abs(v)<Math.abs(f)){var E=Math.abs(f)/Math.abs(v);p*=E,v*=E}else p=Dr(-d,p),v=Dr(-f,v)}}else p=i||o?-d:0,v=s||l?-f:0;return[p,v]}function kv(t,e,n,r,a,i){if(!wr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=ki(i.absolutePoses,[e,n]),o=ie(s),l=o.left,c=o.right,u=o.top,d=o.bottom,f={horizontal:s.map(function(L){return L[1]}),vertical:s.map(function(L){return L[0]})},p=Ni(t.props.snapDirections),v=Ii(p,{left:l,right:c,top:u,bottom:d,center:(l+c)/2,middle:(u+d)/2}),h=sa(t,a,v,f),m=h.vertical,g=h.horizontal,E=fv(t,s,i),b=E.vertical,C=E.horizontal,D=m.isSnap,x=g.isSnap,S=m.isBound||b.isBound,k=g.isBound||C.isBound,w=Dr(m.offset,b.offset),T=Dr(g.offset,C.offset),R=Mv(r,[e,n],[S,k],[D,x],[w,T]),M=R[0],P=R[1];return[{isBound:S,isSnap:D,offset:M},{isBound:k,isSnap:x,offset:P}]}function sa(t,e,n,r){r===void 0&&(r=n);var a=Fi(ia(t),r.vertical,r.horizontal),i=a.horizontal,s=a.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:na(t,n.vertical,n.horizontal),l=o.horizontal,c=o.vertical,u=oa(i[0],l),d=oa(s[0],c),f=Math.abs(u),p=Math.abs(d);return{horizontal:{isBound:i[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:u,dist:f,bounds:i,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:p,bounds:s,snap:c}}}function _l(t,e,n,r,a){var i=Fi(e,n,r),s=i.horizontal,o=i.vertical,l=Dl(t,n,r,a),c=l.horizontal,u=l.vertical,d=oa(s[0],c),f=oa(o[0],u),p=Math.abs(d),v=Math.abs(f);return{horizontal:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:p,bounds:s,snap:c},vertical:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:v,bounds:o,snap:u}}}function Tv(t,e,n,r){var a=kt(t,e)/Math.PI*180,i=n.vertical,s=i.isBound,o=i.isSnap,l=i.dist,c=n.horizontal,u=c.isBound,d=c.isSnap,f=c.dist,p=a%180,v=p<3||p>177,h=p>87&&p<93;return f<l&&(s||o&&!h&&(!r||!v))?"vertical":u||d&&!v&&(!r||!h)?"horizontal":""}function Rv(t,e,n,r,a,i){return n.map(function(s){var o=s[0],l=s[1],c=Tt(e,o),u=Tt(e,l),d=r?Ov(t,c,u,a):sa(t,a,{vertical:[u[0]],horizontal:[u[1]]}),f=d.horizontal,p=f.offset,v=f.isBound,h=f.isSnap,m=d.vertical,g=m.offset,E=m.isBound,b=m.isSnap,C=j(l,o);if(!g&&!p)return{isBound:E||v,isSnap:b||h,sign:C,offset:[0,0]};var D=Tv(c,u,d,r);if(!D)return{sign:C,isBound:!1,isSnap:!1,offset:[0,0]};var x=D==="vertical",S=[0,0];return!r&&Math.abs(l[0])===1&&Math.abs(l[1])===1&&o[0]!==l[0]&&o[1]!==l[1]?S=ye({datas:i,distX:-g,distY:-p}):S=Ki(c,u,-(x?g:p),x,i).offset,S=S.map(function(k,w){return k*(C[w]?2/C[w]:0)}),{sign:C,isBound:x?E:v,isSnap:x?b:h,offset:S}})}function zl(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Ov(t,e,n,r){var a=yv(t,e,n),i=a.horizontal,s=a.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:lv(t,e,n),l=o.horizontal,c=o.vertical,u=zl(i,l),d=zl(s,c),f=Math.abs(u),p=Math.abs(d);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:u,dist:f},vertical:{isBound:s.isBound,isSnap:c.isSnap,offset:d,dist:p}}}function Pv(t,e,n,r,a){var i=[-n[0],-n[1]],s=t.state,o=s.width,l=s.height,c=t.props.bounds,u=1/0,d=1/0;if(c){var f=[[n[0],-n[1]],[-n[0],n[1]]],p=c.left,v=p===void 0?-1/0:p,h=c.top,m=h===void 0?-1/0:h,g=c.right,E=g===void 0?1/0:g,b=c.bottom,C=b===void 0?1/0:b;f.forEach(function(D){var x=D[0]!==i[0],S=D[1]!==i[1],k=Tt(e,D),w=kt(r,k)*360/Math.PI;if(S){var T=k.slice();(Math.abs(w-360)<2||Math.abs(w-180)<2)&&(T[1]=r[1]);var R=Ki(r,T,(r[1]<k[1]?C:m)-k[1],!1,a),M=R.offset,P=M[1],L=R.isOutside;isNaN(P)||(d=l+(L?1:-1)*Math.abs(P))}if(x){var T=k.slice();(Math.abs(w-90)<2||Math.abs(w-270)<2)&&(T[0]=r[0]);var A=Ki(r,T,(r[0]<k[0]?E:v)-k[0],!0,a),I=A.offset[0],_=A.isOutside;isNaN(I)||(u=o+(_?1:-1)*Math.abs(I))}})}return{maxWidth:u,maxHeight:d}}function Wi(t){var e=t.state,n=e.containerClientRect,r=e.hasFixed,a=n.overflow,i=n.scrollHeight,s=n.scrollWidth,o=n.clientHeight,l=n.clientWidth,c=n.clientLeft,u=n.clientTop,d=t.props,f=d.snapGap,p=f===void 0?!0:f,v=d.verticalGuidelines,h=d.horizontalGuidelines,m=d.snapThreshold,g=m===void 0?5:m,E=d.snapGridWidth,b=E===void 0?0:E,C=d.snapGridHeight,D=C===void 0?0:C,x=d.maxSnapElementGuidelineDistance,S=x===void 0?1/0:x,k=ie(qt(t.state)),w=k.top,T=k.left,R=k.bottom,M=k.right,P={top:w,left:T,bottom:R,right:M,center:(T+M)/2,middle:(w+R)/2},L=Nv(t),A=J([],L,!0);p&&A.push.apply(A,Lv(t,P,g)),A.push.apply(A,Av(b,D,a?s:l,a?i:o,c,u));var I=O({},e.snapOffset||{left:0,top:0,bottom:0,right:0});if(r){var _=n.left,B=n.top;I.left+=_,I.top+=B,I.right+=_,I.bottom+=B}return A.push.apply(A,Gl(h||!1,v||!1,a?s:l,a?i:o,c,u,I)),A=A.filter(function(z){var N=z.element,G=z.elementRect,K=z.type;if(!N||!G)return!0;var H=G.rect;return Fl(P,H,K,S)}),A}function Lv(t,e,n){var r=t.props,a=r.maxSnapElementGuidelineDistance,i=a===void 0?1/0:a,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,l=t.state.elementRects,c=[];return[["vertical",ze,Fe],["horizontal",Fe,ze]].forEach(function(u){var d=u[0],f=u[1],p=u[2],v=e[f.start],h=e[f.end],m=e[f.center],g=e[p.start],E=e[p.end];function b(x){var S=x.rect;return S[f.end]<v+n?v-S[f.end]:h-n<S[f.start]?S[f.start]-h:-1}var C=l.filter(function(x){var S=x.rect;return S[p.start]>E||S[p.end]<g?!1:b(x)>0}).sort(function(x,S){return b(x)-b(S)}),D=[];C.forEach(function(x){C.forEach(function(S){if(x!==S){var k=x.rect,w=S.rect,T=k[p.start],R=k[p.end],M=w[p.start],P=w[p.end];T>P||M>R||D.push([x,S])}})}),D.forEach(function(x){var S=x[0],k=x[1],w=S.rect,T=k.rect,R=w[f.start],M=w[f.end],P=T[f.start],L=T[f.end],A=0,I=0,_=!1,B=!1,z=!1;if(M<=v&&h<=P){if(B=!0,A=(P-M-(h-v))/2,I=M+A+(h-v)/2,Math.abs(I-m)>n)return}else if(M<P&&L<v+n){if(_=!0,A=P-M,I=L+A,Math.abs(I-v)>n)return}else if(M<P&&h-n<R){if(z=!0,A=P-M,I=R-A,Math.abs(I-h)>n)return}else return;A&&Fl(e,T,d,i)&&(A>o||c.push({type:d,pos:d==="vertical"?[I,0]:[0,I],element:k.element,size:0,className:k.className,isStart:_,isCenter:B,isEnd:z,gap:A,hide:!0,gapRects:[S,k]}))})}),c}function Av(t,e,n,r,a,i){a===void 0&&(a=0),i===void 0&&(i=0);var s=[];if(e)for(var o=0;o<=r;o+=e)s.push({type:"horizontal",pos:[0,rt(o-i,.1)],size:n,hide:!0});if(t)for(var o=0;o<=n;o+=t)s.push({type:"vertical",pos:[rt(o-a,.1),0],size:r,hide:!0});return s}function Fl(t,e,n,r){return n==="horizontal"?Math.abs(t.right-e.left)<=r||Math.abs(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Math.abs(t.bottom-e.top)<=r||Math.abs(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function Nv(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var a=(e.elementRects||[]).filter(function(f){return!f.refresh}),i=r.map(function(f){return Qt(f)&&"element"in f?O(O({},f),{element:nr(f.element,!0)}):{element:nr(f,!0)}}).filter(function(f){return f.element}),s=mr(a.map(function(f){return f.element}),i.map(function(f){return f.element})),o=s.maintained,l=s.added,c=[];o.forEach(function(f){var p=f[0],v=f[1];c[v]=a[p]}),Iv(t,l.map(function(f){return i[f]})).map(function(f,p){c[l[p]]=f}),e.elementRects=c;var u=Ni(t.props.elementSnapDirections),d=[];return c.forEach(function(f){var p=f.element,v=f.top,h=v===void 0?u.top:v,m=f.left,g=m===void 0?u.left:m,E=f.right,b=E===void 0?u.right:E,C=f.bottom,D=C===void 0?u.bottom:C,x=f.center,S=x===void 0?u.center:x,k=f.middle,w=k===void 0?u.middle:k,T=f.className,R=f.rect,M=Ii({top:h,right:b,left:g,bottom:D,center:S,middle:w},R),P=M.horizontal,L=M.vertical,A=R.top,I=R.left,_=R.right-I,B=R.bottom-A,z=[_,B];L.forEach(function(N){d.push({type:"vertical",element:p,pos:[rt(N,.1),A],size:B,sizes:z,className:T,elementRect:f})}),P.forEach(function(N){d.push({type:"horizontal",element:p,pos:[I,rt(N,.1)],size:_,sizes:z,className:T,elementRect:f})})}),d}function Gl(t,e,n,r,a,i,s){a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],l=s.left,c=s.top,u=s.bottom,d=s.right,f=n+d-l,p=r+u-c;return t&&t.forEach(function(v){var h=Qt(v)?v:{pos:v};o.push({type:"horizontal",pos:[l,rt(h.pos-i+c,.1)],size:f,className:h.className})}),e&&e.forEach(function(v){var h=Qt(v)?v:{pos:v};o.push({type:"vertical",pos:[rt(h.pos-a+l,.1),c],size:p,className:h.className})}),o}function Iv(t,e){if(!e.length)return[];var n=t.state,r=n.containerClientRect,a=n.targetClientRect,i=a.top,s=a.left,o=n.rootMatrix,l=n.is3d,c=l?4:3,u=ov(o,r,c),d=u[0],f=u[1],p=qt(n),v=Be(p),h=v.minX,m=v.minY,g=j([h,m],rr(o,[s-d,i-f],c)).map(function(C){return Xp(C)}),E=g[0],b=g[1];return e.map(function(C){var D=C.element.getBoundingClientRect(),x=D.left-d,S=D.top-f,k=S+D.height,w=x+D.width,T=rr(o,[x,S],c),R=T[0],M=T[1],P=rr(o,[w,k],c),L=P[0],A=P[1];return O(O({},C),{rect:{left:R+E,right:L+E,top:M+b,bottom:A+b,center:(R+L)/2+E,middle:(M+A)/2+b}})})}function la(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var a=e.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(n!==r){var s=nr(r,!0);if(s){var o=sn(s),l=bl(e,[o.left-a.left,o.top-a.top]),c=bl(e,[o.right-a.right,o.bottom-a.bottom]);i.left=rt(l[0],1e-5),i.top=rt(l[1],1e-5),i.right=rt(c[0],1e-5),i.bottom=rt(c[1],1e-5)}}return e.snapContainer=r,e.snapOffset=i,e.guidelines=Wi(t),e.enableSnap=!0,!0}function Kl(t,e,n,r,a,i){var s=_e(t,e,n,i?4:3),o=Tt(s,r);return ki(s,j(a,o))}function Bv(t,e,n,r,a,i){var s=i.fixedDirection,o=uv(n,s,r),l=zi(t,e,n,r),c=J(J([],Rv(t,e,o,r,a,i),!0),Pl(t,l,i),!0),u=aa(c,0),d=aa(c,1);return{width:{isBound:u.isBound,offset:u.offset[0]},height:{isBound:d.isBound,offset:d.offset[1]}}}function _v(t,e,n,r,a,i,s,o,l){var c=Tt(e,s),u=sa(t,o,{vertical:[c[0]],horizontal:[c[1]]}),d=u.horizontal.offset,f=u.vertical.offset;if(rt(f,mi)||rt(d,mi)){var p=ye({datas:l,distX:-f,distY:-d}),v=p[0],h=p[1],m=Math.min(a||1/0,n+s[0]*v),g=Math.min(i||1/0,r+s[1]*h);return[m-n,g-r]}return[0,0]}function Wl(t,e,n,r,a,i,s,o){for(var l=qt(t.state),c=t.props.keepRatio,u=0,d=0,f=0;f<2;++f){var p=e(u,d),v=Bv(t,p,a,c,s,o),h=v.width,m=v.height,g=h.isBound,E=m.isBound,b=h.offset,C=m.offset;if(f===1&&(g||(b=0),E||(C=0)),f===0&&s&&!g&&!E)return[0,0];if(c){var D=Math.abs(b)*(n?1/n:1),x=Math.abs(C)*(r?1/r:1),S=g&&E?D<x:E||!g&&D<x;S?b=n*C/r:C=r*b/n}u+=b,d+=C}if(a[0]&&a[1]){var k=Pv(t,l,a,i,o),w=k.maxWidth,T=k.maxHeight,R=_v(t,e(u,d).map(function(L){return L.map(function(A){return rt(A,mi)})}),n+u,r+d,w,T,a,s,o),b=R[0],C=R[1];u+=b,d+=C}return[u,d]}function zv(t,e,n){if(!wr(t,"rotatable"))return{isSnap:!1,rotation:n};var r=e.pos1,a=e.pos2,i=e.pos3,s=e.pos4,o=e.origin,l=n*Math.PI/180,c=[r,a,i,s].map(function(p){return j(p,o)}),u=c.map(function(p){return Zr(p,l)}),d=J(J([],bv(t,c,u,o,n),!0),gv(t,c,u,o,n),!0);d.sort(function(p,v){return Math.abs(p-n)-Math.abs(v-n)});var f=d.length>0;return{isSnap:f,rotation:f?d[0]:n}}function Fv(t,e,n,r,a,i,s){if(!wr(t,"resizable"))return[0,0];var o=s.fixedDirection,l=s.nextAllMatrix,c=t.state,u=c.allMatrix,d=c.is3d;return Wl(t,function(f,p){return Kl(l||u,e+f,n+p,o,a,d)},e,n,r,a,i,s)}function Gv(t,e,n,r,a){if(!wr(t,"scalable"))return[0,0];var i=a.startOffsetWidth,s=a.startOffsetHeight,o=a.fixedPosition,l=a.fixedDirection,c=a.is3d,u=Wl(t,function(d,f){return Kl(Lp(a,ct(e,[d/i,f/s])),i,s,l,o,c)},i,s,n,o,r,a);return[u[0]/i,u[1]/s]}function Kv(t,e){e.absolutePoses=qt(t.state)}function $l(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var a=r.guideline;e.indexOf(a)>-1||e.push(a)})}),e}function Hl(t,e,n,r,a,i){var s=Fi(ia(t,i),e,n),o=s.vertical,l=s.horizontal;o.forEach(function(f){f.isBound&&r.push({type:"bounds",pos:f.pos})}),l.forEach(function(f){f.isBound&&a.push({type:"bounds",pos:f.pos})});var c=mv(t),u=c.vertical,d=c.horizontal;u.forEach(function(f){De(r,function(p){var v=p.type,h=p.pos;return v==="bounds"&&h===f})>=0||r.push({type:"bounds",pos:f})}),d.forEach(function(f){De(a,function(p){var v=p.type,h=p.pos;return v==="bounds"&&h===f})>=0||a.push({type:"bounds",pos:f})})}var Wv=Oi("",["resizable","scalable"]),$v={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,snapRenderThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[`:host {
    --bounds-color: #d66;
}
.guideline {
    pointer-events: none;
    z-index: 2;
}
.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}
.guideline-group {
    position: absolute;
    top: 0;
    left: 0;
}
.guideline-group .size-value {
    position: absolute;
    color: #f55;
    font-size: 12px;
    font-weight: bold;
}
.guideline-group.horizontal .size-value {
    transform-origin: 50% 100%;
    transform: translateX(-50%);
    left: 50%;
    bottom: 5px;
}
.guideline-group.vertical .size-value {
    transform-origin: 0% 50%;
    top: 50%;
    transform: translateY(-50%);
    left: 5px;
}
.guideline.gap {
    background: #f55;
}
.size-value.gap {
    color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,a=n.left,i=n.pos1,s=n.pos2,o=n.pos3,l=n.pos4,c=n.snapRenderInfo,u=t.props.snapRenderThreshold,d=u===void 0?1:u;if(!c||!c.render||!wr(t,""))return[];n.guidelines=Wi(t);var f=Math.min(i[0],s[0],o[0],l[0]),p=Math.min(i[1],s[1],o[1],l[1]),v=c.externalPoses||[],h=qt(t.state),m=[],g=[],E=[],b=[],C=[],D=ie(h),x=D.width,S=D.height,k=D.top,w=D.left,T=D.bottom,R=D.right,M={left:w,right:R,top:k,bottom:T,center:(w+R)/2,middle:(k+T)/2},P=v.length>0,L=P?ie(v):{};if(!c.request){if(c.direction&&C.push(cv(t,h,c.direction,d)),c.snap){var A=ie(h);c.center&&(A.middle=(A.top+A.bottom)/2,A.center=(A.left+A.right)/2),C.push(wl(t,A,d))}P&&(c.center&&(L.middle=(L.top+L.bottom)/2,L.center=(L.left+L.right)/2),C.push(wl(t,L,d))),C.forEach(function(z){var N=z.vertical.posInfos,G=z.horizontal.posInfos;m.push.apply(m,N.filter(function(K){var H=K.guidelineInfos;return H.some(function($){var W=$.guideline;return!W.hide})}).map(function(K){return{type:"snap",pos:K.pos}})),g.push.apply(g,G.filter(function(K){var H=K.guidelineInfos;return H.some(function($){var W=$.guideline;return!W.hide})}).map(function(K){return{type:"snap",pos:K.pos}})),E.push.apply(E,$l(N)),b.push.apply(b,$l(G))})}Hl(t,[w,R],[k,T],m,g),P&&Hl(t,[L.left,L.right],[L.top,L.bottom],m,g,c.externalBounds);var I=J(J([],E,!0),b,!0),_=I.filter(function(z){return z.element&&!z.gapRects}),B=I.filter(function(z){return z.gapRects}).sort(function(z,N){return z.gap-N.gap});return Y(t,"onSnap",{guidelines:I.filter(function(z){var N=z.element;return!N}),elements:_,gaps:B},!0),J(J(J(J(J(J([],Sv(t,_,[f,p],M,e),!0),Dv(t,B,[f,p],M,e),!0),Bl(t,"horizontal",b,[a,r],M,e),!0),Bl(t,"vertical",E,[a,r],M,e),!0),Il(t,"horizontal",g,f,r,x,0,e),!0),Il(t,"vertical",m,p,a,S,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},la(t)},drag:function(t){var e=t.state;la(t)||(e.guidelines=Wi(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(Wv(t,e)||Xi(t,e))return!0;if(!e.isRequest&&e.inputEvent)return Lt(e.inputEvent.target,Q("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,la(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,la(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function Vl(t,e,n,r){var a=t.getState(),i=a.renderPoses,s=a.rotation,o=a.direction,l=er(t.props,e).zoom,c=o>0?1:-1,u=s/Math.PI*180,d={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var p=f.renderDirectionMap;return n.forEach(function(v){var h=v.dir;d[h]=!0}),n.map(function(v){var h=v.data,m=v.classNames,g=v.dir,E=bi[g];if(!E||!d[g])return null;p[g]=!0;var b=(rt(u,15)+c*Zs[g]+720)%180,C={};return Ae(h).forEach(function(D){C["data-".concat(D)]=h[D]}),r.createElement("div",O({className:Q.apply(void 0,J(["control","direction",g,e],m,!1)),"data-rotation":b,"data-direction":g},C,{key:"direction-".concat(g),style:wi.apply(void 0,J([s,l],E.map(function(D){return i[D]}),!1))}))})}function Yl(t,e,n,r){var a=er(t.props,n).renderDirections,i=a===void 0?e:a;if(!i)return[];var s=i===!0?Ei:i;return Vl(t,n,s.map(function(o){return{data:{},classNames:[],dir:o}}),r)}function Hv(t,e){var n=t.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var r=t.getState(),a=r.renderPoses,i=r.rotation,s=r.direction,o=n.renderDirectionMap,l=t.props.zoom,c=s>0?1:-1,u=i/Math.PI*180;return Ae(o).map(function(d){var f=bi[d];if(!f)return null;var p=(rt(u,15)+c*Zs[d]+720)%180;return e.createElement("div",{className:Q("around-control"),"data-rotation":p,"data-direction":d,key:"direction-around-".concat(d),style:wi.apply(void 0,J([i,l],f.map(function(v){return a[v]}),!1))})})}function cn(t,e,n,r,a,i){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var l=kt(n,r),c=e?rt(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(i),className:Q.apply(void 0,J(["line","direction",e?"edge":"",e],s,!1)),"data-rotation":c,"data-line-key":i,"data-direction":e,style:on(n,r,a,l)})}function Xl(t,e,n,r,a){var i=n===!0?Sp:n;return i.map(function(s,o){var l=bi[s],c=l[0],u=l[1];if(u!=null)return cn(t,s,r[c],r[u],a,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function Zl(t){return function(e,n){var r=er(e.props,t).edge;return r&&(r===!0||r.length)?J(J([],Xl(n,t,r,e.getState().renderPoses,e.props.zoom),!0),Vv(e,t,n),!0):Ul(e,t,n)}}function Ul(t,e,n){return Yl(t,Ei,e,n)}function Vv(t,e,n){return Yl(t,["nw","ne","sw","se"],e,n)}var Xt={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},requestStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.throttleDragRotate,a=n.zoom,i=t.getState(),s=i.dragInfo,o=i.beforeOrigin;if(!r||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var c=de(l),u=kt(l,[0,0]);return[e.createElement("div",{className:Q("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(o[0],"px, ").concat(o[1],"px) rotate(").concat(u,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,a=e.parentGesto,i=t.state,s=i.gestos,o=i.style;if(s.draggable)return!1;s.draggable=a||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],tr(t,e),Yn(e,"translate"),Kv(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var l=nt(t,e,O({set:function(u){n.startValue=u}},Vn(e))),c=r||Y(t,"onDragStart",l);return c!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?l:!1},drag:function(t,e){if(e){$n(e,"translate");var n=e.datas,r=e.parentEvent,a=e.parentFlag,i=e.isPinch,s=e.isRequest,o=e.deltaOffset,l=e.distX,c=e.distY,u=n.isDrag,d=n.prevDist,f=n.prevBeforeDist,p=n.startValue;if(u){o&&(l+=o[0],c+=o[1]);var v=t.props,h=v.parentMoveable,m=r?0:v.throttleDrag||0,g=r?0:v.throttleDragRotate||0,E=0,b=!1,C=!1,D=!1,x=!1;if(!r&&g>0&&(l||c)){var S=v.startDragRotate||0,k=rt(S+kt([0,0],[l,c])*180/Math.PI,g)-S,w=c*Math.abs(Math.cos((k-90)/180*Math.PI)),T=l*Math.abs(Math.cos(k/180*Math.PI)),R=de([T,w]);E=k*Math.PI/180,l=R*Math.cos(E),c=R*Math.sin(E)}if(!i&&!r&&!a){var M=kv(t,l,c,g,s||o,n),P=M[0],L=M[1];b=P.isSnap,C=P.isBound,D=L.isSnap,x=L.isBound;var A=P.offset,I=L.offset;l+=A,c+=I}var _=ct(qs({datas:n,distX:l,distY:c}),p),B=ct(Mp({datas:n,distX:l,distY:c}),p);us(B,Vt),us(_,Vt),g||(!b&&!C&&(B[0]=rt(B[0],m),_[0]=rt(_[0],m)),!D&&!x&&(B[1]=rt(B[1],m),_[1]=rt(_[1],m)));var z=j(_,p),N=j(B,p),G=j(N,d),K=j(z,f);n.prevDist=N,n.prevBeforeDist=z,n.passDelta=G,n.passDist=N;var H=n.left+z[0],$=n.top+z[1],W=n.right-z[0],X=n.bottom-z[1],q=Hn(n,"translate(".concat(B[0],"px, ").concat(B[1],"px)"),"translate(".concat(N[0],"px, ").concat(N[1],"px)"));if(xi(e,q),t.state.dragInfo.dist=r?[0,0]:N,!(!r&&!h&&G.every(function(ut){return!ut})&&K.some(function(ut){return!ut}))){var tt=t.state,et=tt.width,V=tt.height,Z=nt(t,e,O({transform:q,dist:N,delta:G,translate:B,beforeDist:z,beforeDelta:K,beforeTranslate:_,left:H,top:$,right:W,bottom:X,width:et,height:V,isPinch:i},Yt({transform:q},e)));return!r&&Y(t,"onDrag",Z),Z}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,O(O({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var a=re(t,e,{});return!n&&Y(t,"onDragEnd",a),a}},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=this.dragStart(t,e);if(!i)return!1;var s=Ai(t,this,"dragStart",[r||0,a||0],e,!1,"draggable"),o=O(O({},i),{targets:t.props.targets,events:s}),l=Y(t,"onDragGroupStart",o);return n.isDrag=l!==!1,n.isDrag?i:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,e),a=e.datas.passDelta,i=Ai(t,this,"drag",a,e,!1,"draggable");if(r){var s=O({targets:t.props.targets,events:i},r);return Y(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var a=Ai(t,this,"dragEnd",[0,0],e,!1,"draggable");return Y(t,"onDragGroupEnd",re(t,e,{targets:t.props.targets,events:a})),n}},request:function(t){var e={},n=t.getRect(),r=0,a=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(i){return"x"in i?r=i.x-n.left:"deltaX"in i&&(r+=i.deltaX),"y"in i?a=i.y-n.top:"deltaY"in i&&(a+=i.deltaY),{datas:e,distX:r,distY:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},jl=Oi("resizable"),$i={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean,checkResizableError:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:Zl("resizable"),dragControlCondition:jl,viewClassName:Ri("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,a=e.isPinch,i=e.isGroup,s=e.parentDirection,o=e.parentGesto,l=e.datas,c=e.parentFixedDirection,u=e.parentEvent,d=vl(s,a,r,l),f=t.state,p=f.target,v=f.width,h=f.height,m=f.gestos;if(!d||!p||m.resizable)return!1;m.resizable=o||t.controlGesto,!a&&tr(t,e),l.datas={},l.direction=d,l.startOffsetWidth=v,l.startOffsetHeight=h,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=f.inlineCSSWidth||f.cssWidth,l.startHeight=f.inlineCSSHeight||f.cssHeight,l.maxSize=[1/0,1/0],i||(l.minSize=[f.minOffsetWidth,f.minOffsetHeight],l.maxSize=[f.maxOffsetWidth,f.maxOffsetHeight]);var g=t.props.transformOrigin||"% %";l.transformOrigin=g&&$t(g)?g.split(" "):g,l.startOffsetMatrix=f.offsetMatrix,l.startTransformOrigin=f.transformOrigin,l.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!d[0]&&!d[1]||d[0]||!d[1];function E(w){l.ratio=w&&isFinite(w)?w:0}l.startPositions=qt(t.state);function b(w){l.fixedDirection=w,l.fixedPosition=Tt(l.startPositions,w)}function C(w){var T=t.state,R=T.width,M=T.height;l.fixedPosition=w,l.fixedDirection=nl(w,R,M)}function D(w){l.minSize=[bt("".concat(w[0]),0)||0,bt("".concat(w[1]),0)||0]}function x(w){var T=[w[0]||1/0,w[1]||1/0];(!Ra(T[0])||isFinite(T[0]))&&(T[0]=bt("".concat(T[0]),0)||1/0),(!Ra(T[1])||isFinite(T[1]))&&(T[1]=bt("".concat(T[1]),0)||1/0),l.maxSize=T}E(v/h),b(c||[-d[0],-d[1]]),l.setFixedDirection=b,l.setFixedPosition=C,l.setMin=D,l.setMax=x;var S=nt(t,e,{direction:d,startRatio:l.ratio,set:function(w){var T=w[0],R=w[1];l.startWidth=T,l.startHeight=R},setMin:D,setMax:x,setRatio:E,setFixedDirection:b,setFixedPosition:C,setOrigin:function(w){l.transformOrigin=w},dragStart:Xt.dragStart(t,new br().dragStart([0,0],e))}),k=u||Y(t,"onResizeStart",S);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,k!==!1&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:d}),l.isResize?S:!1},dragControl:function(t,e){var n,r=e.datas,a=e.parentFlag,i=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,l=e.parentDist,c=e.isRequest,u=e.isGroup,d=e.parentEvent,f=e.resolveMatrix,p=r.isResize,v=r.transformOrigin,h=r.startWidth,m=r.startHeight,g=r.prevWidth,E=r.prevHeight,b=r.minSize,C=r.maxSize,D=r.ratio,x=r.startOffsetWidth,S=r.startOffsetHeight,k=r.isWidth;if(!p)return;if(f){var w=t.state.is3d,T=r.startOffsetMatrix,R=r.startTransformOrigin,M=w?4:3,P=Qr(tl(e)),L=Math.sqrt(P.length);M!==L&&(P=me(P,L,M));var A=nn(T,P,R,M),I=_e(A,x,S,M);r.startPositions=I,r.nextTargetMatrix=P,r.nextAllMatrix=A}var _=er(t.props,"resizable"),B=_.resizeFormat,z=_.throttleResize,N=z===void 0?a?0:1:z,G=_.parentMoveable,K=_.keepRatioFinally,H=r.direction,$=H,W=0,X=0;!H[0]&&!H[1]&&($=[1,1]);var q=D&&(s??_.keepRatio)||!1;function tt(){var Et=r.fixedDirection,St=xl($,q,r,e);W=St.distWidth,X=St.distHeight;var Zt=$[0]-Et[0]||q?Math.max(x+W,Vt):x,Jt=$[1]-Et[1]||q?Math.max(S+X,Vt):S;return q&&x&&S&&(k?Jt=Zt/D:Zt=Jt*D),[Zt,Jt]}var et=tt(),V=et[0],Z=et[1];d||(r.setFixedDirection(r.fixedDirection),Y(t,"onBeforeResize",nt(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(Et){var St;return r.setFixedDirection(Et),St=tt(),V=St[0],Z=St[1],[V,Z]},setFixedPosition:function(Et){var St;return r.setFixedPosition(Et),St=tt(),V=St[0],Z=St[1],[V,Z]},boundingWidth:V,boundingHeight:Z,setSize:function(Et){V=Et[0],Z=Et[1]}},!0)));var ut=o;o||(!a&&i?ut=il(t,[0,0]):ut=r.fixedPosition);var at=[0,0];i||(at=Fv(t,V,Z,H,ut,c,r)),l&&(!l[0]&&(at[0]=0),!l[1]&&(at[1]=0));function Pt(){var Et;B&&(Et=B([V,Z]),V=Et[0],Z=Et[1]),V=rt(V,N),Z=rt(Z,N)}if(q){$[0]&&$[1]&&at[0]&&at[1]&&(Math.abs(at[0])>Math.abs(at[1])?at[1]=0:at[0]=0);var pt=!at[0]&&!at[1];pt&&Pt(),$[0]&&!$[1]||at[0]&&!at[1]||pt&&k?(V+=at[0],Z=V/D):(!$[0]&&$[1]||!at[0]&&at[1]||pt&&!k)&&(Z+=at[1],V=Z*D)}else V+=at[0],Z+=at[1],V=Math.max(0,V),Z=Math.max(0,Z);n=cs([V,Z],b,C,q?D:!1),V=n[0],Z=n[1],Pt(),q&&(u||K)&&(k?Z=V/D:V=Z*D),W=V-x,X=Z-S;var dt=[W-g,X-E];r.prevWidth=W,r.prevHeight=X;var mt=Ip(t,V,Z,ut,v,r);if(!(!G&&dt.every(function(Et){return!Et})&&mt.every(function(Et){return!Et}))){var it=Xt.drag(t,rn(e,t.state,mt,!!i,!1,"draggable")),lt=it.transform,ft=h+W,Kt=m+X,gt=nt(t,e,O({width:ft,height:Kt,offsetWidth:Math.round(V),offsetHeight:Math.round(Z),startRatio:D,boundingWidth:V,boundingHeight:Z,direction:H,dist:[W,X],delta:dt,isPinch:!!i,drag:it},gl({style:{width:"".concat(ft,"px"),height:"".concat(Kt,"px")},transform:lt},it,e)));return!d&&Y(t,"onResize",gt),gt}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,a=n.startOffsetWidth,i=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var l=t.state,c=l.width,u=l.height,d=c-(a+s),f=u-(i+o),p=Math.abs(d)>3,v=Math.abs(f)>3;if(p&&(n.startWidth+=d,n.startOffsetWidth+=d,n.prevWidth+=d),v&&(n.startHeight+=f,n.startOffsetHeight+=f,n.prevHeight+=f),p||v)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var a=re(t,e,{});return!r&&Y(t,"onResizeEnd",a),a}},dragGroupControlCondition:jl,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,O(O({},e),{isGroup:!0}));if(!r)return!1;var a=pe(t,"resizable",e);function i(v,h){var m=n.fixedDirection,g=n.fixedPosition,E=h.datas.startPositions||qt(v.state),b=Tt(E,m),C=Gt(hr(-t.rotation/180*Math.PI,3),[b[0]-g[0],b[1]-g[1],1],3),D=C[0],x=C[1];return h.datas.originalX=D,h.datas.originalY=x,h}var s=n.startOffsetWidth,o=n.startOffsetHeight;function l(){var v=n.minSize;a.forEach(function(h){var m=h.datas,g=m.minSize,E=m.startOffsetWidth,b=m.startOffsetHeight,C=s*(E?g[0]/E:0),D=o*(b?g[1]/b:0);v[0]=Math.max(v[0],C),v[1]=Math.max(v[1],D)})}function c(){var v=n.maxSize;a.forEach(function(h){var m=h.datas,g=m.maxSize,E=m.startOffsetWidth,b=m.startOffsetHeight,C=s*(E?g[0]/E:0),D=o*(b?g[1]/b:0);v[0]=Math.min(v[0],C),v[1]=Math.min(v[1],D)})}var u=ke(t,this,"dragControlStart",e,function(v,h){return i(v,h)});l(),c();var d=function(v){r.setFixedDirection(v),u.forEach(function(h,m){h.setFixedDirection(v),i(h.moveable,a[m])})};n.setFixedDirection=d;var f=O(O({},r),{targets:t.props.targets,events:u.map(function(v){return O(O({},v),{setMin:function(h){v.setMin(h),l()},setMax:function(h){v.setMax(h),c()}})}),setFixedDirection:d,setMin:function(v){r.setMin(v),l()},setMax:function(v){r.setMax(v),c()}}),p=Y(t,"onResizeGroupStart",f);return n.isResize=p!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=er(t.props,"resizable");Jn(t,"onBeforeResize",function(p){Y(t,"onBeforeResizeGroup",nt(t,e,O(O({},p),{targets:r.targets}),!0))});var a=this.dragControl(t,O(O({},e),{isGroup:!0}));if(a){var i=a.boundingWidth,s=a.boundingHeight,o=a.dist,l=r.keepRatio,c=[i/(i-o[0]),s/(s-o[1])],u=n.fixedPosition,d=ke(t,this,"dragControl",e,function(p,v){var h=Gt(hr(t.rotation/180*Math.PI,3),[v.datas.originalX*c[0],v.datas.originalY*c[1],1],3),m=h[0],g=h[1];return O(O({},v),{parentDist:null,parentScale:c,dragClient:ct(u,[m,g]),parentKeepRatio:l})}),f=O({targets:r.targets,events:d},a);return Y(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var a=ke(t,this,"dragControlEnd",e),i=re(t,e,{targets:t.props.targets,events:a});return Y(t,"onResizeGroupEnd",i),n}},request:function(t){var e={},n=0,r=0,a=t.getRect();return{isControl:!0,requestStart:function(i){var s;return{datas:e,parentDirection:i.direction||[1,1],parentIsWidth:(s=i?.horizontal)!==null&&s!==void 0?s:!0}},request:function(i){return"offsetWidth"in i?n=i.offsetWidth-a.offsetWidth:"deltaWidth"in i&&(n+=i.deltaWidth),"offsetHeight"in i?r=i.offsetHeight-a.offsetHeight:"deltaHeight"in i&&(r+=i.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:i.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function Hi(t,e,n,r,a){var i=t.props.groupable,s=t.state,o=s.is3d?4:3,l=e.origin,c=Bt(t.state.rootMatrix,j([l[0],l[1]],i?[0,0]:[s.left,s.top]),o),u=ct([a.left,a.top],c);e.startAbsoluteOrigin=u,e.prevDeg=kt(u,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=ne(u,[n,r])}function ca(t,e,n){var r=n.defaultDeg,a=n.prevDeg,i=a%360,s=Math.floor(a/360);i<0&&(i+=360),i>t&&i>270&&t<90?++s:i<t&&i<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function Vi(t,e,n,r){return ca(kt(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function Yi(t,e,n,r,a,i){var s=t.props.throttleRotate,o=s===void 0?0:s,l=n.prevSnapDeg,c=0,u=!1;if(i){var d=zv(t,e,r);u=d.isSnap,c=a+d.rotation}u||(c=rt(a+r,o));var f=c-a;return n.prevSnapDeg=f,[f-l,f,c]}function Ql(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3];if(t==="none")return[];if(Mt(t))return t.map(function(h){return Ql(h,[r,a,i,s],n)[0]});var o=(t||"top").split("-"),l=o[0],c=o[1],u=[r,a];l==="left"?u=[i,r]:l==="right"?u=[a,s]:l==="bottom"&&(u=[s,i]);var d=[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2],f=fl(u,n);if(c){var p=c==="top"||c==="left",v=l==="bottom"||l==="left";d=u[p&&!v||!p&&v?0:1]}return[[d,f]]}function Xi(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(Lt(n,Q("rotation-control"))||Lt(n,Q("around-control"))||Lt(n,Q("control"))&&Lt(n,Q("rotatable")))return!0;var r=t.props.rotationTarget;return r?Pi(r,!0).some(function(a){return a?n===a||n.contains(a):!1}):!1}var Yv=Ei.map(function(t){var e="",n="",r="center",a="center";return t.indexOf("n")>-1&&(e="top: -20px;",a="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",a="top"),t.indexOf("w")>-1&&(n="left: -20px;",r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(a,`;
    }`)}).join(`
`),Xv=`.rotation {
    position: absolute;
    height: 40px;
    width: 1px;
    transform-origin: 50% 100%;
    height: calc(40px * var(--zoom));
    top: auto;
    left: 0;
    bottom: 100%;
    will-change: transform;
}
.rotation .rotation-line {
    display: block;
    width: 100%;
    height: 100%;
    transform-origin: 50% 50%;
}
.rotation .rotation-control {
    border-color: #4af;
    border-color: var(--moveable-color);
    background:#fff;
    cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
    cursor: alias;
}
.around-control {
    position: absolute;
    will-change: transform;
    width: 20px;
    height: 20px;
    left: -10px;
    top: -10px;
    box-sizing: border-box;
    background: transparent;
    z-index: 8;
    cursor: alias;
    transform-origin: center center;
}
.rotatable.direction.control.move {
    cursor: move;
}
`.concat(Yv,`
`),Zv={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[Xv],viewClassName:function(t){return t.isDragging("rotatable")?Q("view-rotation-dragging"):""},render:function(t,e){var n=er(t.props,"rotatable"),r=n.rotatable,a=n.rotationPosition,i=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,l=n.resolveAblesWithRotatable,c=t.getState(),u=c.renderPoses,d=c.direction;if(!r)return null;var f=Ql(a,u,d),p=[];if(f.forEach(function(g,E){var b=g[0],C=g[1];p.push(e.createElement("div",{key:"rotation".concat(E),className:Q("rotation"),style:{transform:"translate(-50%) translate(".concat(b[0],"px, ").concat(b[1],"px) rotate(").concat(C,"rad)")}},e.createElement("div",{className:Q("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),e.createElement("div",{className:Q("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}),s){var v=Ae(l||{}),h={};v.forEach(function(g){l[g].forEach(function(E){h[E]=g})});var m=[];Mt(s)&&(m=s.map(function(g){var E=h[g];return{data:E?{resolve:E}:{},classNames:E?["move"]:[],dir:g}})),p.push.apply(p,Vl(t,"rotatable",m,e))}return o&&p.push.apply(p,Hv(t,e)),p},dragControlCondition:Xi,dragControlStart:function(t,e){var n,r,a=e.datas,i=e.clientX,s=e.clientY,o=e.parentRotate,l=e.parentFlag,c=e.isPinch,u=e.isRequest,d=t.state,f=d.target,p=d.left,v=d.top,h=d.direction,m=d.beforeDirection,g=d.targetTransform,E=d.moveableClientRect,b=d.offsetMatrix,C=d.targetMatrix,D=d.allMatrix,x=d.width,S=d.height;if(!u&&!f)return!1;var k=t.getRect();a.rect=k,a.transform=g,a.left=p,a.top=v;var w=function(W){var X=t.state,q=X.allMatrix,tt=X.is3d,et=X.width,V=X.height,Z=nl(W,et,V);a.fixedDirection=Z,a.fixedPosition=Bt(q,W,tt?4:3),G&&G.setFixedPosition(W)},T=function(W){a.fixedDirection=W,a.fixedPosition=al(t,W),G&&G.setFixedDirection(W)},R=i,M=s;if(u||c||l){var P=o||0;a.beforeInfo={origin:k.beforeOrigin,prevDeg:P,defaultDeg:P,prevSnapDeg:0,startDist:0},a.afterInfo=O(O({},a.beforeInfo),{origin:k.origin}),a.absoluteInfo=O(O({},a.beforeInfo),{origin:k.origin,startValue:P})}else{var L=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(L){var A=L.getAttribute("data-direction")||"",I=Dp[A];if(I){a.isControl=!0,a.isAroundControl=Lt(L,Q("around-control")),a.controlDirection=I;var _=L.getAttribute("data-resolve");_&&(a.resolveAble=_);var B=Yp(d.rootMatrix,d.renderPoses,E);n=Tt(B,I),R=n[0],M=n[1]}}a.beforeInfo={origin:k.beforeOrigin},a.afterInfo={origin:k.origin},a.absoluteInfo={origin:k.origin,startValue:k.rotation};var z=w;w=function(W){var X=d.is3d?4:3,q=ct(Ls(C,X),W),tt=q[0],et=q[1],V=Gt(b,je([tt,et],X)),Z=Gt(D,je([W[0],W[1]],X));z(W);var ut=d.posDelta;a.beforeInfo.origin=j(V,ut),a.afterInfo.origin=j(Z,ut),a.absoluteInfo.origin=j(Z,ut),Hi(t,a.beforeInfo,R,M,E),Hi(t,a.afterInfo,R,M,E),Hi(t,a.absoluteInfo,R,M,E)},T=function(W){var X=Tt([[0,0],[x,0],[0,S],[x,S]],W);w(X)}}a.startClientX=R,a.startClientY=M,a.direction=h,a.beforeDirection=m,a.startValue=0,a.datas={},Yn(e,"rotate");var N=!1,G=!1;if(a.isControl&&a.resolveAble){var K=a.resolveAble;K==="resizable"&&(G=$i.dragControlStart(t,O(O({},new br("resizable").dragStart([0,0],e)),{parentPosition:a.controlPosition,parentFixedPosition:a.fixedPosition})))}G||(N=Xt.dragStart(t,new br().dragStart([0,0],e))),w(d.transformOrigin);var H=nt(t,e,O(O({set:function(W){a.startValue=W*Math.PI/180},setFixedDirection:T,setFixedPosition:w},Vn(e)),{dragStart:N,resizeStart:G})),$=Y(t,"onRotateStart",H);return a.isRotate=$!==!1,d.snapRenderInfo={request:e.isRequest},a.isRotate?H:!1},dragControl:function(t,e){var n,r,a,i=e.datas,s=e.clientDistX,o=e.clientDistY,l=e.parentRotate,c=e.parentFlag,u=e.isPinch,d=e.groupDelta,f=i.beforeDirection,p=i.beforeInfo,v=i.afterInfo,h=i.absoluteInfo,m=i.isRotate,g=i.startValue,E=i.rect,b=i.startClientX,C=i.startClientY;if(m){$n(e,"rotate");var D=wp(e),x=f*D,S=t.props.parentMoveable,k=0,w,T,R=0,M,P,L=0,A,I,_=180/Math.PI*g,B=h.startValue,z=!1,N=b+s,G=C+o;if(!c&&"parentDist"in e){var K=e.parentDist;w=K,M=K,A=K}else u||c?(w=ca(l,f,p),M=ca(l,x,v),A=ca(l,x,h)):(w=Vi(N,G,f,p),M=Vi(N,G,x,v),A=Vi(N,G,x,h),z=!0);if(T=_+w,P=_+M,I=B+A,Y(t,"onBeforeRotate",nt(t,e,{beforeRotation:T,rotation:P,absoluteRotation:I,setRotation:function(ut){M=ut-_,w=M,A=M}},!0)),n=Yi(t,E,p,w,_,z),k=n[0],w=n[1],T=n[2],r=Yi(t,E,v,M,_,z),R=r[0],M=r[1],P=r[2],a=Yi(t,E,h,A,B,z),L=a[0],A=a[1],I=a[2],!(!L&&!R&&!k&&!S)){var H=Hn(i,"rotate(".concat(P,"deg)"),"rotate(".concat(M,"deg)")),$=Np(t,M,i),W=j(ct(d||[0,0],$),i.prevInverseDist||[0,0]);i.prevInverseDist=$,i.requestValue=null;var X=el(t,H,W,u,e),q=X,tt=ne([N,G],h.startAbsoluteOrigin)-h.startDist,et=void 0;if(i.resolveAble==="resizable"){var V=$i.dragControl(t,O(O({},rn(e,t.state,[e.deltaX,e.deltaY],!!u,!1,"resizable")),{resolveMatrix:!0,parentDistance:tt}));V&&(et=V,q=gl(q,V,e))}var Z=nt(t,e,O(O({delta:R,dist:M,rotate:P,rotation:P,beforeDist:w,beforeDelta:k,beforeRotate:T,beforeRotation:T,absoluteDist:A,absoluteDelta:L,absoluteRotate:I,absoluteRotation:I,isPinch:!!u,resize:et},X),q));return Y(t,"onRotate",Z),Z}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=re(t,e,{});return Y(t,"onRotateEnd",r),r}},dragGroupControlCondition:Xi,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,a=r.left,i=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var l=ke(t,this,"dragControlStart",e,function(d,f){var p=d.state,v=p.left,h=p.top,m=p.beforeOrigin,g=ct(j([v,h],[a,i]),j(m,s));return f.datas.startGroupClient=g,f.datas.groupClient=g,O(O({},f),{parentRotate:0})}),c=O(O({},o),{targets:t.props.targets,events:l}),u=Y(t,"onRotateGroupStart",c);return n.isRotate=u!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){Jn(t,"onBeforeRotate",function(c){Y(t,"onBeforeRotateGroup",nt(t,e,O(O({},c),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var a=n.beforeDirection,i=r.beforeDist,s=i/180*Math.PI,o=ke(t,this,"dragControl",e,function(c,u){var d=u.datas.startGroupClient,f=u.datas.groupClient,p=f[0],v=f[1],h=Zr(d,s*a),m=h[0],g=h[1],E=[m-p,g-v];return u.datas.groupClient=[m,g],O(O({},u),{parentRotate:i,groupDelta:E})});t.rotation=a*r.beforeRotation;var l=O({targets:t.props.targets,events:o,set:function(c){t.rotation=c},setGroupRotation:function(c){t.rotation=c}},r);return Y(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var a=ke(t,this,"dragControlEnd",e),i=re(t,e,{targets:t.props.targets,events:a});return Y(t,"onRotateGroupEnd",i),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(a){return"deltaRotate"in a?n+=a.deltaRotate:"rotate"in a&&(n=a.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},ql=Oi("scalable"),Uv={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:Zl("scalable"),dragControlCondition:ql,viewClassName:Ri("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,a=e.inputEvent,i=e.parentDirection,s=vl(i,r,a,n),o=t.state,l=o.width,c=o.height,u=o.targetTransform,d=o.target,f=o.pos1,p=o.pos2,v=o.pos4;if(!s||!d)return!1;r||tr(t,e),n.datas={},n.transform=u,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=l,n.startOffsetHeight=c,n.startValue=[1,1];var h=ne(f,p),m=ne(p,v),g=!s[0]&&!s[1]||s[0]||!s[1];n.scaleWidth=h,n.scaleHeight=m,n.scaleXRatio=h/l,n.scaleYRatio=m/c,Yn(e,"scale"),n.isWidth=g;function E(x){n.ratio=x&&isFinite(x)?x:0}n.startPositions=qt(t.state);function b(x){n.fixedDirection=x,n.fixedPosition=Tt(n.startPositions,x)}n.setFixedDirection=b,E(ne(f,p)/ne(p,v)),b([-s[0],-s[1]]);var C=nt(t,e,O(O({direction:s,set:function(x){n.startValue=x},setRatio:E,setFixedDirection:b},Vn(e)),{dragStart:Xt.dragStart(t,new br().dragStart([0,0],e))})),D=Y(t,"onScaleStart",C);return n.startFixedDirection=n.fixedDirection,D!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?C:!1},dragControl:function(t,e){$n(e,"scale");var n=e.datas,r=e.parentKeepRatio,a=e.parentFlag,i=e.isPinch,s=e.dragClient,o=e.isRequest,l=n.prevDist,c=n.direction,u=n.startOffsetWidth,d=n.startOffsetHeight,f=n.isScale,p=n.startValue,v=n.isWidth,h=n.ratio;if(!f)return!1;var m=t.props,g=m.throttleScale,E=m.parentMoveable,b=c;!c[0]&&!c[1]&&(b=[1,1]);var C=h&&(r??m.keepRatio)||!1,D=t.state;function x(){var G=xl(b,C,n,e),K=G.distWidth,H=G.distHeight,$=u?(u+K)/u:1,W=d?(d+H)/d:1;return $=b[0]||C?$*p[0]:p[0],W=b[1]||C?W*p[1]:p[1],$===0&&($=(l[0]>0?1:-1)*Wn),W===0&&(W=(l[1]>0?1:-1)*Wn),[$,W]}var S=x();if(!i&&t.props.groupable){var k=D.snapRenderInfo||{},w=k.direction;Mt(w)&&(w[0]||w[1])&&(D.snapRenderInfo={direction:c,request:e.isRequest})}Y(t,"onBeforeScale",nt(t,e,{scale:S,setFixedDirection:function(G){return n.setFixedDirection(G),S=x(),S},startFixedDirection:n.startFixedDirection,setScale:function(G){S=G}},!0));var T=[S[0]/p[0],S[1]/p[1]],R=s,M=[0,0];if(s||(!a&&i?R=il(t,[0,0]):R=n.fixedPosition),i||(M=Gv(t,T,c,o,n)),C){b[0]&&b[1]&&M[0]&&M[1]&&(Math.abs(M[0]*u)>Math.abs(M[1]*d)?M[1]=0:M[0]=0);var P=!M[0]&&!M[1];if(P&&(v?T[0]=rt(T[0]*p[0],g)/p[0]:T[1]=rt(T[1]*p[1],g)/p[1]),b[0]&&!b[1]||M[0]&&!M[1]||P&&v){T[0]+=M[0];var L=u*T[0]*p[0]/h;T[1]=L/d/p[1]}else if(!b[0]&&b[1]||!M[0]&&M[1]||P&&!v){T[1]+=M[1];var A=d*T[1]*p[1]*h;T[0]=A/u/p[0]}}else T[0]+=M[0],T[1]+=M[1],M[0]||(T[0]=rt(T[0]*p[0],g)/p[0]),M[1]||(T[1]=rt(T[1]*p[1],g)/p[1]);T[0]===0&&(T[0]=(l[0]>0?1:-1)*Wn),T[1]===0&&(T[1]=(l[1]>0?1:-1)*Wn);var I=[T[0]/l[0],T[1]/l[1]];S=_p(T,p);var _=Ap(t,T,n.fixedDirection,R,n),B=j(_,n.prevInverseDist||[0,0]);if(n.prevDist=T,n.prevInverseDist=_,S[0]===l[0]&&S[1]===l[1]&&B.every(function(G){return!G})&&!E)return!1;var z=Hn(n,"scale(".concat(S.join(", "),")"),"scale(".concat(T.join(", "),")")),N=nt(t,e,O({offsetWidth:u,offsetHeight:d,direction:c,scale:S,dist:T,delta:I,isPinch:!!i},el(t,z,B,i,e)));return Y(t,"onScale",N),N},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=re(t,e,{});return Y(t,"onScaleEnd",r),r},dragGroupControlCondition:ql,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var a=pe(t,"resizable",e);function i(u,d){var f=n.fixedDirection,p=n.fixedPosition,v=d.datas.startPositions||qt(u.state),h=Tt(v,f),m=Gt(hr(-t.rotation/180*Math.PI,3),[h[0]-p[0],h[1]-p[1],1],3),g=m[0],E=m[1];return d.datas.originalX=g,d.datas.originalY=E,d}n.moveableScale=t.scale;var s=ke(t,this,"dragControlStart",e,function(u,d){return i(u,d)}),o=function(u){r.setFixedDirection(u),s.forEach(function(d,f){d.setFixedDirection(u),i(d.moveable,a[f])})};n.setFixedDirection=o;var l=O(O({},r),{targets:t.props.targets,events:s,setFixedDirection:o}),c=Y(t,"onScaleGroupStart",l);return n.isScale=c!==!1,n.isScale?l:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){Jn(t,"onBeforeScale",function(d){Y(t,"onBeforeScaleGroup",nt(t,e,O(O({},d),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var a=n.moveableScale;t.scale=[r.scale[0]*a[0],r.scale[1]*a[1]];var i=t.props.keepRatio,s=r.dist,o=r.scale,l=n.fixedPosition,c=ke(t,this,"dragControl",e,function(d,f){var p=Gt(hr(t.rotation/180*Math.PI,3),[f.datas.originalX*s[0],f.datas.originalY*s[1],1],3),v=p[0],h=p[1];return O(O({},f),{parentDist:null,parentScale:o,parentKeepRatio:i,dragClient:ct(l,[v,h])})}),u=O({targets:t.props.targets,events:c},r);return Y(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var a=ke(t,this,"dragControlEnd",e),i=re(t,e,{targets:t.props.targets,events:a});return Y(t,"onScaleGroupEnd",i),n}},request:function(){var t={},e=0,n=0;return{isControl:!0,requestStart:function(r){return{datas:t,parentDirection:r.direction||[1,1]}},request:function(r){return e+=r.deltaWidth,n+=r.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:r.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Ke(t,e){return t.map(function(n,r){return Xe(n,e[r],1,2)})}function Jl(t,e,n){var r=kt(t,e),a=kt(t,n),i=a-r;return i>=0?i:i+2*Math.PI}function jv(t,e){var n=Jl(t[0],t[1],t[2]),r=Jl(e[0],e[1],e[2]),a=Math.PI;return!(n>=a&&r<=a||n<=a&&r>=a)}var Qv={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},viewClassName:Ri("warpable"),render:function(t,e){var n=t.props,r=n.resizable,a=n.scalable,i=n.warpable,s=n.zoom;if(r||a||!i)return[];var o=t.state,l=o.pos1,c=o.pos2,u=o.pos3,d=o.pos4,f=Ke(l,c),p=Ke(c,l),v=Ke(l,u),h=Ke(u,l),m=Ke(u,d),g=Ke(d,u),E=Ke(c,d),b=Ke(d,c);return J([e.createElement("div",{className:Q("line"),key:"middeLine1",style:on(f,m,s)}),e.createElement("div",{className:Q("line"),key:"middeLine2",style:on(p,g,s)}),e.createElement("div",{className:Q("line"),key:"middeLine3",style:on(v,E,s)}),e.createElement("div",{className:Q("line"),key:"middeLine4",style:on(h,b,s)})],Ul(t,"warpable",e),!0)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return Lt(n,Q("direction"))&&Lt(n,Q("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,a=t.props.target,i=r.target,s=hl(i,n);if(!s||!a)return!1;var o=t.state,l=o.transformOrigin,c=o.is3d,u=o.targetTransform,d=o.targetMatrix,f=o.width,p=o.height,v=o.left,h=o.top;n.datas={},n.targetTransform=u,n.warpTargetMatrix=c?d:me(d,3,4),n.targetInverseMatrix=Ps(ue(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=v,n.top=h,n.poses=[[0,0],[f,0],[0,p],[f,p]].map(function(E){return j(E,l)}),n.nextPoses=n.poses.map(function(E){var b=E[0],C=E[1];return Gt(n.warpTargetMatrix,[b,C,0,1],4)}),n.startValue=wt(4),n.prevMatrix=wt(4),n.absolutePoses=qt(o),n.posIndexes=Js(s),tr(t,e),Yn(e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var m=nt(t,e,O({set:function(E){n.startValue=E}},Vn(e))),g=Y(t,"onWarpStart",m);return g!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,a=e.distX,i=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,l=n.isWarp,c=n.startValue,u=n.poses,d=n.posIndexes,f=n.absolutePoses;if(!l)return!1;if($n(e,"matrix3d"),wr(t,"warpable")){var p=d.map(function(w){return f[w]});p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var v=sa(t,r,{horizontal:p.map(function(w){return w[1]+i}),vertical:p.map(function(w){return w[0]+a})}),h=v.horizontal,m=v.vertical;i-=h.offset,a-=m.offset}var g=ye({datas:n,distX:a,distY:i},!0),E=n.nextPoses.slice();if(d.forEach(function(w){E[w]=ct(E[w],g)}),!xp.every(function(w){return jv(w.map(function(T){return u[T]}),w.map(function(T){return E[T]}))}))return!1;var b=Ja(u[0],u[2],u[1],u[3],E[0],E[2],E[1],E[3]);if(!b.length)return!1;var C=yt(s,b,4),D=Qs(n,C,!0),x=yt(ue(o,4),D,4);n.prevMatrix=D;var S=yt(c,D,4),k=Hn(n,"matrix3d(".concat(S.join(", "),")"),"matrix3d(".concat(D.join(", "),")"));return xi(e,k),Y(t,"onWarp",nt(t,e,O({delta:x,matrix:S,dist:D,multiply:yt,transform:k},Yt({transform:k},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Y(t,"onWarpEnd",re(t,e,{})),r):!1}},qv=Q("area-pieces"),ua=Q("area-piece"),tc=Q("avoid"),Jv=Q("view-dragging");function Zi(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,a=n.height;fs(e,tc),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(a,"px")}}function ec(t){return t.createElement("div",{key:"area_pieces",className:qv},t.createElement("div",{className:ua}),t.createElement("div",{className:ua}),t.createElement("div",{className:ua}),t.createElement("div",{className:ua}))}var rc={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,a=n.dragArea,i=n.groupable,s=n.passDragArea,o=t.getState(),l=o.width,c=o.height,u=o.renderPoses,d=s?Q("area","pass"):Q("area");if(i)return[e.createElement("div",{key:"area",ref:ge(t,"areaElement"),className:d}),ec(e)];if(!r||!a)return[];var f=Ja([0,0],[l,0],[0,c],[l,c],u[0],u[1],u[2],u[3]),p=f.length?Qn(f,!0):"none";return[e.createElement("div",{key:"area",ref:ge(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(c,"px"),transformOrigin:"0 0",transform:p}}),ec(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=e.inputEvent;if(!i)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,l=o.moveableClientRect,c=o.renderPoses,u=o.rootMatrix,d=o.is3d,f=l.left,p=l.top,v=ie(c),h=v.left,m=v.top,g=v.width,E=v.height,b=d?4:3,C=rr(u,[r-f,a-p],b),D=C[0],x=C[1];D-=h,x-=m;var S=[{left:h,top:m,width:g,height:x-10},{left:h,top:m,width:D-10,height:E},{left:h,top:m+x+10,width:g,height:E-x-10},{left:h+D+10,top:m,width:g-D-10,height:E}],k=[].slice.call(s.nextElementSibling.children);S.forEach(function(w,T){k[T].style.cssText="left: ".concat(w.left,"px;top: ").concat(w.top,"px; width: ").concat(w.width,"px; height: ").concat(w.height,"px;")}),Ba(s,tc),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,Zi(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||Zi(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Zi(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&ss(function(){e.disableNativeEvent=!1})}},th=en("origin",{render:function(t,e){var n=t.props.zoom,r=t.getState(),a=r.beforeOrigin,i=r.rotation;return[e.createElement("div",{className:Q("control","origin"),style:wi(i,n,a),key:"beforeOrigin"})]}});function eh(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var rh={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,scrollThrottleTime:Number,getScrollPosition:Function,scrollOptions:Object},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,a=r===void 0?t.getContainer():r,i=n.scrollOptions,s=new _s,o=nr(a,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var l=e.isControl?"controlGesto":"targetGesto",c=e.targets;s.on("scroll",function(u){var d=u.container,f=u.direction,p=nt(t,e,{scrollContainer:d,direction:f}),v=c?"onScrollGroup":"onScroll";c&&(p.targets=c),Y(t,v,p)}).on("move",function(u){var d=u.offsetX,f=u.offsetY,p=u.inputEvent;t[l].scrollBy(d,f,p.inputEvent,!0)}).on("scrollDrag",function(u){var d=u.next;d(t[l].getCurrentEvent())}),s.dragStart(e,O({container:o},i))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,a=r.scrollContainer,i=a===void 0?t.getContainer():a,s=r.scrollThreshold,o=s===void 0?0:s,l=r.scrollThrottleTime,c=l===void 0?0:l,u=r.getScrollPosition,d=u===void 0?eh:u,f=r.scrollOptions;return n.drag(e,O({container:i,threshold:o,throttleTime:c,getScrollPosition:function(p){return d({scrollContainer:p.container,direction:p.direction})}},f)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,O(O({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,O(O({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,O(O({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,O(O({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,O(O({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,O(O({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,O(O({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},nc={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean,viewContainer:Object,persistData:Object,useAccuratePosition:Boolean,firstRenderState:Object,linePadding:Boolean},events:{onChangeTargets:"changeTargets"}},nh=en("padding",{render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},a=r.left,i=a===void 0?0:a,s=r.top,o=s===void 0?0:s,l=r.right,c=l===void 0?0:l,u=r.bottom,d=u===void 0?0:u,f=t.getState(),p=f.renderPoses,v=f.pos1,h=f.pos2,m=f.pos3,g=f.pos4,E=[v,h,m,g],b=[];return i>0&&b.push([0,2]),o>0&&b.push([0,1]),c>0&&b.push([1,3]),d>0&&b.push([2,3]),b.map(function(C,D){var x=C[0],S=C[1],k=E[x],w=E[S],T=p[x],R=p[S],M=Ja([0,0],[100,0],[0,100],[100,100],k,w,T,R);if(M.length)return e.createElement("div",{key:"padding".concat(D),className:Q("padding"),style:{transform:Qn(M,!0)}})})}}),ac=["nw","ne","se","sw"];function da(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var ah=[1,2,5,6],ih=[0,3,4,7],ar=[1,-1,-1,1],ir=[1,1,-1,-1];function Ui(t,e,n,r,a,i,s,o){a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=n),o===void 0&&(o=r);var l=[],c=!1,u=t.filter(function(f){return!f.virtual}),d=u.map(function(f){var p=f.horizontal,v=f.vertical,h=f.pos;if(v&&!c&&(c=!0,l.push("/")),c){var m=Math.max(0,v===1?h[1]-i:o-h[1]);return l.push(fe(m,r,e)),m}else{var m=Math.max(0,p===1?h[0]-a:s-h[0]);return l.push(fe(m,n,e)),m}});return{radiusPoses:u,styles:l,raws:d}}function ic(t){for(var e=[0,0],n=[0,0],r=t.length,a=0;a<r;++a){var i=t[a];i.sub&&(i.horizontal&&(e[1]===0&&(e[0]=a),e[1]=a-e[0]+1,n[0]=a+1),i.vertical&&(n[1]===0&&(n[0]=a),n[1]=a-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function oc(t,e,n,r,a,i,s){var o,l,c,u;i===void 0&&(i=[0,0]),s===void 0&&(s=!1);var d=t.indexOf("/"),f=(d>-1?t.slice(0,d):t).length,p=t.slice(0,f),v=t.slice(f+1),h=p.length,m=v.length,g=m>0,E=p[0],b=E===void 0?"0px":E,C=p[1],D=C===void 0?b:C,x=p[2],S=x===void 0?b:x,k=p[3],w=k===void 0?D:k,T=v[0],R=T===void 0?b:T,M=v[1],P=M===void 0?g?R:D:M,L=v[2],A=L===void 0?g?R:S:L,I=v[3],_=I===void 0?g?P:w:I,B=[b,D,S,w].map(function($){return bt($,e)}),z=[R,P,A,_].map(function($){return bt($,n)}),N=B.slice(),G=z.slice();o=da([N[0],N[1]],e),N[0]=o[0],N[1]=o[1],l=da([N[3],N[2]],e),N[3]=l[0],N[2]=l[1],c=da([G[0],G[3]],n),G[0]=c[0],G[3]=c[1],u=da([G[1],G[2]],n),G[1]=u[0],G[2]=u[1];var K=s?N:N.slice(0,Math.max(i[0],h)),H=s?G:G.slice(0,Math.max(i[1],m));return J(J([],K.map(function($,W){var X=ac[W];return{virtual:W>=h,horizontal:ar[W],vertical:0,pos:[r+$,a+(ir[W]===-1?n:0)],sub:!0,raw:B[W],direction:X}}),!0),H.map(function($,W){var X=ac[W];return{virtual:W>=m,horizontal:0,vertical:ir[W],pos:[r+(ar[W]===-1?e:0),a+$],sub:!0,raw:z[W],direction:X}}),!0)}function oh(t,e,n,r,a){a===void 0&&(a=e.length);var i=ic(t.slice(r)),s=i.horizontalRange,o=i.verticalRange,l=n-r,c=0;if(l===0)c=a;else if(l>0&&l<s[1])c=s[1]-l;else if(l>=o[0])c=o[0]+o[1]-l;else return;t.splice(n,c),e.splice(n,c)}function sh(t,e,n,r,a,i,s,o,l,c,u){c===void 0&&(c=0),u===void 0&&(u=0);var d=ic(t.slice(n)),f=d.horizontalRange,p=d.verticalRange;if(r>-1)for(var v=ar[r]===1?i-c:o-i,h=f[1];h<=r;++h){var m=ir[h]===1?u:l,g=0;if(r===h?g=i:h===0?g=c+v:ar[h]===-1&&(g=o-(e[n][0]-c)),t.splice(n+h,0,{horizontal:ar[h],vertical:0,pos:[g,m]}),e.splice(n+h,0,[g,m]),h===0)break}else if(a>-1){var E=ir[a]===1?s-u:l-s;if(f[1]===0&&p[1]===0){var b=[c+E,u];t.push({horizontal:ar[0],vertical:0,pos:b}),e.push(b)}for(var C=p[0],h=p[1];h<=a;++h){var g=ar[h]===1?c:o,m=0;if(a===h?m=s:h===0?m=u+E:ir[h]===1?m=e[n+C][1]:ir[h]===-1&&(m=l-(e[n+C][1]-u)),t.push({horizontal:0,vertical:ir[h],pos:[g,m]}),e.push([g,m]),h===0)break}}}function lh(t,e){e===void 0&&(e=t.map(function(a){return a.raw}));var n=t.map(function(a,i){return a.horizontal?e[i]:null}).filter(function(a){return a!=null}),r=t.map(function(a,i){return a.vertical?e[i]:null}).filter(function(a){return a!=null});return{horizontals:n,verticals:r}}var ch=[[0,-1,"n"],[1,0,"e"]],uh=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function ji(t,e,n){var r=t.props.clipRelative,a=t.state,i=a.width,s=a.height,o=e,l=o.type,c=o.poses,u=l==="rect",d=l==="circle";if(l==="polygon")return n.map(function(x){return"".concat(fe(x[0],i,r)," ").concat(fe(x[1],s,r))});if(u||l==="inset"){var f=n[1][1],p=n[3][0],v=n[7][0],h=n[5][1];if(u)return[f,p,h,v].map(function(x){return"".concat(x,"px")});var m=[f,i-p,s-h,v].map(function(x,S){return fe(x,S%2?i:s,r)});if(n.length>8){var g=j(n[4],n[0]),E=g[0],b=g[1];m.push.apply(m,J(["round"],Ui(c.slice(8).map(function(x,S){return O(O({},x),{pos:n[S]})}),r,E,b,v,f,p,h).styles,!1))}return m}else if(d||l==="ellipse"){var C=n[0],D=fe(Math.abs(n[1][1]-C[1]),d?Math.sqrt((i*i+s*s)/2):s,r),m=d?[D]:[fe(Math.abs(n[2][0]-C[0]),i,r),D];return m.push("at",fe(C[0],i,r),fe(C[1],s,r)),m}}function fa(t,e,n,r){var a=[r,(r+e)/2,e],i=[t,(t+n)/2,n];return uh.map(function(s){var o=s[0],l=s[1],c=s[2],u=a[o+1],d=i[l+1];return{vertical:Math.abs(l),horizontal:Math.abs(o),direction:c,pos:[u,d]}})}function sc(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var a=r.pos;e[0]=Math.min(e[0],a[0]),e[1]=Math.max(e[1],a[0]),n[0]=Math.min(n[0],a[1]),n[1]=Math.max(n[1],a[1])}),[Math.abs(e[1]-e[0]),Math.abs(n[1]-n[0])]}function lc(t,e,n,r,a){var i,s,o,l,c,u,d;if(t){var f=a;if(!f){var p=getComputedStyle(t),v=p.clipPath;f=v!=="none"?v:p.clip}if(!((!f||f==="none"||f==="auto")&&(f=r,!f))){var h=La(f),m=h.prefix,g=m===void 0?f:m,E=h.value,b=E===void 0?"":E,C=g==="circle",D=" ";if(g==="polygon"){var x=Le(b||"0% 0%, 100% 0%, 100% 100%, 0% 100%");D=",";var S=x.map(function(it){var lt=it.split(" "),ft=lt[0],Kt=lt[1];return{vertical:1,horizontal:1,pos:[bt(ft,e),bt(Kt,n)]}}),k=Be(S.map(function(it){return it.pos}));return{type:g,clipText:f,poses:S,splitter:D,left:k.minX,right:k.maxX,top:k.minY,bottom:k.maxY}}else if(C||g==="ellipse"){var w="",T="",R=0,M=0,x=Pe(b);if(C){var P="";i=x[0],P=i===void 0?"50%":i,s=x[2],w=s===void 0?"50%":s,o=x[3],T=o===void 0?"50%":o,R=bt(P,Math.sqrt((e*e+n*n)/2)),M=R}else{var L="",A="";l=x[0],L=l===void 0?"50%":l,c=x[1],A=c===void 0?"50%":c,u=x[3],w=u===void 0?"50%":u,d=x[4],T=d===void 0?"50%":d,R=bt(L,e),M=bt(A,n)}var I=[bt(w,e),bt(T,n)],S=J([{vertical:1,horizontal:1,pos:I,direction:"nesw"}],ch.slice(0,C?1:2).map(function(ft){return{vertical:Math.abs(ft[1]),horizontal:ft[0],direction:ft[2],sub:!0,pos:[I[0]+ft[0]*R,I[1]+ft[1]*M]}}),!0);return{type:g,clipText:f,radiusX:R,radiusY:M,left:I[0]-R,top:I[1]-M,right:I[0]+R,bottom:I[1]+M,poses:S,splitter:D}}else if(g==="inset"){var x=Pe(b||"0 0 0 0"),_=x.indexOf("round"),B=(_>-1?x.slice(0,_):x).length,z=x.slice(B+1),N=x.slice(0,B),G=N[0],K=N[1],H=K===void 0?G:K,$=N[2],W=$===void 0?G:$,X=N[3],q=X===void 0?H:X,tt=[G,W].map(function(ft){return bt(ft,n)}),et=tt[0],V=tt[1],Z=[q,H].map(function(ft){return bt(ft,e)}),ut=Z[0],at=Z[1],Pt=e-at,pt=n-V,dt=oc(z,Pt-ut,pt-et,ut,et),S=J(J([],fa(et,Pt,pt,ut),!0),dt,!0);return{type:"inset",clipText:f,poses:S,top:et,left:ut,right:Pt,bottom:pt,radius:z,splitter:D}}else if(g==="rect"){var x=Le(b||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));D=",";var mt=x.map(function(St){var Zt=Ze(St).value;return Zt}),et=mt[0],at=mt[1],V=mt[2],ut=mt[3],S=fa(et,at,V,ut);return{type:"rect",clipText:f,poses:S,top:et,right:at,bottom:V,left:ut,values:x,splitter:D}}}}}function dh(t,e,n,r,a){var i=t[e],s=i.direction,o=i.sub,l=t.map(function(){return[0,0]}),c=s?s.split(""):[];if(r&&e<8){var u=c.filter(function(P){return P==="w"||P==="e"}),d=c.filter(function(P){return P==="n"||P==="s"}),f=u[0],p=d[0];l[e]=n;var v=sc(t),h=v[0],m=v[1],g=h&&m?h/m:0;if(g&&a){var E=(e+4)%8,b=t[E].pos,C=[0,0];s.indexOf("w")>-1?C[0]=-1:s.indexOf("e")>-1&&(C[0]=1),s.indexOf("n")>-1?C[1]=-1:s.indexOf("s")>-1&&(C[1]=1);var D=Cl([h,m],n,g,C,!0),x=h+D[0],S=m+D[1],k=b[1],w=b[1],T=b[0],R=b[0];C[0]===-1?T=R-x:C[0]===1?R=T+x:(T=T-x/2,R=R+x/2),C[1]===-1?k=w-S:(C[1]===1||(k=w-S/2),w=k+S);var M=fa(k,R,w,T);t.forEach(function(P,L){l[L][0]=M[L].pos[0]-P.pos[0],l[L][1]=M[L].pos[1]-P.pos[1]})}else t.forEach(function(P,L){var A=P.direction;A&&(A.indexOf(f)>-1&&(l[L][0]=n[0]),A.indexOf(p)>-1&&(l[L][1]=n[1]))}),f&&(l[1][0]=n[0]/2,l[5][0]=n[0]/2),p&&(l[3][1]=n[1]/2,l[7][1]=n[1]/2)}else s&&!o?c.forEach(function(P){var L=P==="n"||P==="s";t.forEach(function(A,I){var _=A.direction,B=A.horizontal,z=A.vertical;!_||_.indexOf(P)===-1||(l[I]=[L||!B?0:n[0],!L||!z?0:n[1]])})}):l[e]=n;return l}function fh(t,e){var n=js(t,e),r=n[0],a=n[1],i=e.datas,s=i.clipPath,o=i.clipIndex,l=s,c=l.type,u=l.poses,d=l.splitter,f=u.map(function(E){return E.pos});if(c==="polygon")f.splice(o,0,[r,a]);else if(c==="inset"){var p=ah.indexOf(o),v=ih.indexOf(o),h=u.length;if(sh(u,f,8,p,v,r,a,f[4][0],f[4][1],f[0][0],f[0][1]),h===u.length)return}else return;var m=ji(t,s,f),g="".concat(c,"(").concat(m.join(d),")");Y(t,"onClip",nt(t,e,O({clipEventType:"added",clipType:c,poses:f,clipStyles:m,clipStyle:g,distX:0,distY:0},Yt({clipPath:g},e))))}function ph(t,e){var n=e.datas,r=n.clipPath,a=n.clipIndex,i=r,s=i.type,o=i.poses,l=i.splitter,c=o.map(function(p){return p.pos}),u=c.length;if(s==="polygon")o.splice(a,1),c.splice(a,1);else if(s==="inset"){if(a<8||(oh(o,c,a,8,u),u===o.length))return}else return;var d=ji(t,r,c),f="".concat(s,"(").concat(d.join(l),")");Y(t,"onClip",nt(t,e,O({clipEventType:"removed",clipType:s,poses:c,clipStyles:d,clipStyle:f,distX:0,distY:0},Yt({clipPath:f},e))))}var vh={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[`.control.clip-control {
    background: #6d6;
    cursor: pointer;
}
.control.clip-control.clip-radius {
    background: #d66;
}
.line.clip-line {
    background: #6e6;
    cursor: move;
    z-index: 1;
}
.clip-area {
    position: absolute;
    top: 0;
    left: 0;
}
.clip-ellipse {
    position: absolute;
    cursor: move;
    border: 1px solid #6d6;
    border: var(--zoompx) solid #6d6;
    border-radius: 50%;
    transform-origin: 0px 0px;
}`,`:host {
    --bounds-color: #d66;
}`,`.guideline {
    pointer-events: none;
    z-index: 2;
}`,`.line.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,a=n.defaultClipPath,i=n.clipArea,s=n.zoom,o=n.groupable,l=t.getState(),c=l.target,u=l.width,d=l.height,f=l.allMatrix,p=l.is3d,v=l.left,h=l.top,m=l.pos1,g=l.pos2,E=l.pos3,b=l.pos4,C=l.clipPathState,D=l.snapBoundInfos,x=l.rotation;if(!c||o)return[];var S=lc(c,u,d,a||"inset",C||r);if(!S)return[];var k=p?4:3,w=S.type,T=S.poses,R=T.map(function(pt){var dt=Bt(f,pt.pos,k);return[dt[0]-v,dt[1]-h]}),M=[],P=[],L=w==="rect",A=w==="inset",I=w==="polygon";if(L||A||I){var _=A?R.slice(0,8):R;P=_.map(function(pt,dt){var mt=dt===0?_[_.length-1]:_[dt-1],it=kt(mt,pt),lt=ul(mt,pt);return e.createElement("div",{key:"clipLine".concat(dt),className:Q("line","clip-line","snap-control"),"data-clip-index":dt,style:{width:"".concat(lt,"px"),transform:"translate(".concat(mt[0],"px, ").concat(mt[1],"px) rotate(").concat(it,"rad) scaleY(").concat(s,")")}})})}if(M=R.map(function(pt,dt){return e.createElement("div",{key:"clipControl".concat(dt),className:Q("control","clip-control","snap-control"),"data-clip-index":dt,style:{transform:"translate(".concat(pt[0],"px, ").concat(pt[1],"px) rotate(").concat(x,"rad) scale(").concat(s,")")}})}),A&&M.push.apply(M,R.slice(8).map(function(pt,dt){return e.createElement("div",{key:"clipRadiusControl".concat(dt),className:Q("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+dt,style:{transform:"translate(".concat(pt[0],"px, ").concat(pt[1],"px) rotate(").concat(x,"rad) scale(").concat(s,")")}})})),w==="circle"||w==="ellipse"){var B=S.left,z=S.top,N=S.radiusX,G=S.radiusY,K=j(Bt(f,[B,z],k),Bt(f,[0,0],k)),H=K[0],$=K[1],W="none";if(!i){for(var X=Math.max(10,N/5,G/5),q=[],tt=0;tt<=X;++tt){var et=Math.PI*2/X*tt;q.push([N+(N-s)*Math.cos(et),G+(G-s)*Math.sin(et)])}q.push([N,-2]),q.push([-2,-2]),q.push([-2,G*2+2]),q.push([N*2+2,G*2+2]),q.push([N*2+2,-2]),q.push([N,-2]),W="polygon(".concat(q.map(function(pt){return"".concat(pt[0],"px ").concat(pt[1],"px")}).join(", "),")")}M.push(e.createElement("div",{key:"clipEllipse",className:Q("clip-ellipse","snap-control"),style:{width:"".concat(N*2,"px"),height:"".concat(G*2,"px"),clipPath:W,transform:"translate(".concat(-v+H,"px, ").concat(-h+$,"px) ").concat(Qn(f))}}))}if(i){var V=ie(J([m,g,E,b],R,!0)),Z=V.width,ut=V.height,at=V.left,Pt=V.top;if(I||L||A){var q=A?R.slice(0,8):R;M.push(e.createElement("div",{key:"clipArea",className:Q("clip-area","snap-control"),style:{width:"".concat(Z,"px"),height:"".concat(ut,"px"),transform:"translate(".concat(at,"px, ").concat(Pt,"px)"),clipPath:"polygon(".concat(q.map(function(dt){return"".concat(dt[0]-at,"px ").concat(dt[1]-Pt,"px")}).join(", "),")")}}))}}return D&&["vertical","horizontal"].forEach(function(pt){var dt=D[pt],mt=pt==="horizontal";dt.isSnap&&P.push.apply(P,dt.snap.posInfos.map(function(it,lt){var ft=it.pos,Kt=j(Bt(f,mt?[0,ft]:[ft,0],k),[v,h]),gt=j(Bt(f,mt?[u,ft]:[ft,d],k),[v,h]);return cn(e,"",Kt,gt,s,"clip".concat(pt,"snap").concat(lt),"guideline")})),dt.isBound&&P.push.apply(P,dt.bounds.map(function(it,lt){var ft=it.pos,Kt=j(Bt(f,mt?[0,ft]:[ft,0],k),[v,h]),gt=j(Bt(f,mt?[u,ft]:[ft,d],k),[v,h]);return cn(e,"",Kt,gt,s,"clip".concat(pt,"bounds").concat(lt),"guideline","bounds","bold")}))}),J(J([],M,!0),P,!0)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,a=r===void 0?!0:r;return a?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,O(O({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,a=r.defaultClipPath,i=r.customClipPath,s=n.target,o=n.width,l=n.height,c=e.inputEvent?e.inputEvent.target:null,u=c&&c.getAttribute("class")||"",d=e.datas,f=lc(s,o,l,a||"inset",i);if(!f)return!1;var p=f.clipText,v=f.type,h=f.poses,m=Y(t,"onClipStart",nt(t,e,{clipType:v,clipStyle:p,poses:h.map(function(g){return g.pos})}));return m===!1?(d.isClipStart=!1,!1):(d.isControl=u&&u.indexOf("clip-control")>-1,d.isLine=u.indexOf("clip-line")>-1,d.isArea=u.indexOf("clip-area")>-1||u.indexOf("clip-ellipse")>-1,d.clipIndex=c?parseInt(c.getAttribute("data-clip-index"),10):-1,d.clipPath=f,d.isClipStart=!0,n.clipPathState=p,tr(t,e),!0)},dragControl:function(t,e){var n,r,a=e.datas,i=e.originalDatas,s=e.isDragTarget;if(!a.isClipStart)return!1;var o=a,l=o.isControl,c=o.isLine,u=o.isArea,d=o.clipIndex,f=o.clipPath;if(!f)return!1;var p=er(t.props,"clippable"),v=p.keepRatio,h=0,m=0,g=i.draggable,E=ye(e);s&&g?(n=g.prevBeforeDist,h=n[0],m=n[1]):(h=E[0],m=E[1]);var b=[h,m],C=t.state,D=C.width,x=C.height,S=!u&&!l&&!c,k=f.type,w=f.poses,T=f.splitter,R=w.map(function(Ct){return Ct.pos});S&&(h=-h,m=-m);var M=!l||w[d].direction==="nesw",P=k==="inset"||k==="rect",L=w.map(function(){return[0,0]});if(l&&!M){var A=w[d],I=A.horizontal,_=A.vertical,B=[h*Math.abs(I),m*Math.abs(_)];L=dh(w,d,B,P,v)}else M&&(L=R.map(function(){return[h,m]}));var z=R.map(function(Ct,Ut){return ct(Ct,L[Ut])}),N=J([],z,!0);C.snapBoundInfos=null;var G=f.type==="circle",K=f.type==="ellipse";if(G||K){var H=ie(z),$=Math.abs(H.bottom-H.top),W=Math.abs(K?H.right-H.left:$),X=z[0][1]+$,q=z[0][0]-W,tt=z[0][0]+W;G&&(N.push([tt,H.bottom]),L.push([1,0])),N.push([H.left,X]),L.push([0,1]),N.push([q,H.bottom]),L.push([1,0])}var et=Gl((p.clipHorizontalGuidelines||[]).map(function(Ct){return bt("".concat(Ct),x)}),(p.clipVerticalGuidelines||[]).map(function(Ct){return bt("".concat(Ct),D)}),D,x),V=[],Z=[];if(G||K)V=[N[4][0],N[2][0]],Z=[N[1][1],N[3][1]];else if(P){var ut=[N[0],N[2],N[4],N[6]],at=[L[0],L[2],L[4],L[6]];V=ut.filter(function(Ct,Ut){return at[Ut][0]}).map(function(Ct){return Ct[0]}),Z=ut.filter(function(Ct,Ut){return at[Ut][1]}).map(function(Ct){return Ct[1]})}else V=N.filter(function(Ct,Ut){return L[Ut][0]}).map(function(Ct){return Ct[0]}),Z=N.filter(function(Ct,Ut){return L[Ut][1]}).map(function(Ct){return Ct[1]});var Pt=[0,0],pt=_l(et,p.clipTargetBounds&&{left:0,top:0,right:D,bottom:x},V,Z,5),dt=pt.horizontal,mt=pt.vertical,it=dt.offset,lt=mt.offset;if(dt.isBound&&(Pt[1]+=it),mt.isBound&&(Pt[0]+=lt),(K||G)&&L[0][0]===0&&L[0][1]===0){var H=ie(z),ft=H.bottom-H.top,Kt=K?H.right-H.left:ft,gt=mt.isBound?Math.abs(lt):mt.snapIndex===0?-lt:lt,Et=dt.isBound?Math.abs(it):dt.snapIndex===0?-it:it;Kt-=gt,ft-=Et,G&&(ft=kl(mt,dt)>0?ft:Kt,Kt=ft);var St=N[0];N[1][1]=St[1]-ft,N[2][0]=St[0]+Kt,N[3][1]=St[1]+ft,N[4][0]=St[0]-Kt}else if(P&&v&&l){var Zt=sc(w),Jt=Zt[0],Ce=Zt[1],ur=Jt&&Ce?Jt/Ce:0,dr=w[d],xe=dr.direction||"",ya=N[1][1],X=N[5][1],q=N[7][0],tt=N[3][0];it<=lt?it=lt/ur:lt=it*ur,xe.indexOf("w")>-1?q-=lt:xe.indexOf("e")>-1?tt-=lt:(q+=lt/2,tt-=lt/2),xe.indexOf("n")>-1?ya-=it:xe.indexOf("s")>-1?X-=it:(ya+=it/2,X-=it/2);var F0=fa(ya,tt,X,q);N.forEach(function(Pu,$0){var Ro;Ro=F0[$0].pos,Pu[0]=Ro[0],Pu[1]=Ro[1]})}else N.forEach(function(Ct,Ut){var Ou=L[Ut];Ou[0]&&(Ct[0]-=lt),Ou[1]&&(Ct[1]-=it)});var Ru=ji(t,f,z),ko="".concat(k,"(").concat(Ru.join(T),")");if(C.clipPathState=ko,G||K)V=[N[4][0],N[2][0]],Z=[N[1][1],N[3][1]];else if(P){var ut=[N[0],N[2],N[4],N[6]];V=ut.map(function(Ut){return Ut[0]}),Z=ut.map(function(Ut){return Ut[1]})}else V=N.map(function(Ct){return Ct[0]}),Z=N.map(function(Ct){return Ct[1]});if(C.snapBoundInfos=_l(et,p.clipTargetBounds&&{left:0,top:0,right:D,bottom:x},V,Z,1),g){var G0=C.is3d,K0=C.allMatrix,W0=G0?4:3,To=Pt;s&&(To=[b[0]+Pt[0]-E[0],b[1]+Pt[1]-E[1]]),g.deltaOffset=yt(K0,[To[0],To[1],0,0],W0)}return Y(t,"onClip",nt(t,e,O({clipEventType:"changed",clipType:k,poses:z,clipStyle:ko,clipStyles:Ru,distX:h,distY:m},Yt((r={},r[k==="rect"?"clip":"clipPath"]=ko,r),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,a=e.isDouble,i=r.isLine,s=r.isClipStart,o=r.isControl;return s?(Y(t,"onClipEnd",re(t,e,{})),a&&(o?ph(t,e):i&&fh(t,e)),a||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},hh={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[`:host[data-able-origindraggable] .control.origin {
    pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":Lt(e.inputEvent.target,Q("origin"))},dragControlStart:function(t,e){var n=e.datas;tr(t,e);var r=nt(t,e,{dragStart:Xt.dragStart(t,new br().dragStart([0,0],e))}),a=Y(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,a===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,a=e.isRequest;if(!n.isDragOrigin)return!1;var i=ye(e),s=i[0],o=i[1],l=t.state,c=l.width,u=l.height,d=l.offsetMatrix,f=l.targetMatrix,p=l.is3d,v=t.props.originRelative,h=v===void 0?!0:v,m=p?4:3,g=[s,o];if(a){var E=e.distOrigin;(E[0]||E[1])&&(g=E)}var b=ct(n.startOrigin,g),C=ct(n.startTargetOrigin,g),D=j(g,n.prevOrigin),x=nn(d,f,b,m),S=t.getRect(),k=ie(_e(x,c,u,m)),w=[S.left-k.left,S.top-k.top];n.prevOrigin=g;var T=[fe(C[0],c,h),fe(C[1],u,h)].join(" "),R=Xt.drag(t,rn(e,t.state,w,!!r,!1)),M=nt(t,e,O(O({width:c,height:u,origin:b,dist:g,delta:D,transformOrigin:T,drag:R},Yt({transformOrigin:T,transform:R.transform},e)),{afterTransform:R.transform}));return Y(t,"onDragOrigin",M),M},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Y(t,"onDragOriginEnd",re(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,a=0,i=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-i[0],s[1]=o.origin[1]-i[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?a=o.y-n.top:"deltaY"in o&&(a+=o.deltaY)),{datas:e,distX:r,distY:a,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function gh(t,e,n,r){var a=t.filter(function(l){var c=l.virtual,u=l.horizontal;return u&&!c}).length,i=t.filter(function(l){var c=l.virtual,u=l.vertical;return u&&!c}).length,s=-1;if(e===0&&(a===0?s=0:a===1&&(s=1)),e===2&&(a<=2?s=2:a<=3&&(s=3)),e===3&&(i===0?s=4:i<4&&(s=7)),e===1&&(i<=1?s=5:i<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];mh(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function mh(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function yh(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function cc(t,e,n,r,a){r===void 0&&(r=[0,0]);var i=[];return!t||t==="0px"?i=[]:i=Pe(t),oc(i,e,n,0,0,r,a)}function uc(t,e,n,r,a){var i=t.state,s=i.width,o=i.height,l=Ui(a,t.props.roundRelative,s,o),c=l.raws,u=l.styles,d=l.radiusPoses,f=lh(d,c),p=f.horizontals,v=f.verticals,h=u.join(" ");i.borderRadiusState=h;var m=nt(t,e,O({horizontals:p,verticals:v,borderRadius:h,width:s,height:o,delta:r,dist:n},Yt({borderRadius:h},e)));return Y(t,"onRound",m),m}function dc(t){var e=t.getState().style,n=e.borderRadius||"";if(!n&&t.props.groupable){var r=t.getTargets()[0];r&&(n=getComputedStyle(r).borderRadius,e.borderRadius=n)}return n}var Eh={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean,roundPadding:Number,isDisplayShadowRoundControls:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd",onRoundGroupStart:"roundGroupStart",onRoundGroup:"roundGroup",onRoundGroupEnd:"roundGroupEnd"},css:[`.control.border-radius {
    background: #d66;
    cursor: pointer;
    z-index: 3;
}`,`.control.border-radius.vertical {
    background: #d6d;
    z-index: 2;
}`,`.control.border-radius.virtual {
    opacity: 0.5;
    z-index: 1;
}`,`:host.round-line-clickable .line.direction {
    cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Q("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,a=n.width,i=n.height,s=n.allMatrix,o=n.is3d,l=n.left,c=n.top,u=n.borderRadiusState,d=t.props,f=d.minRoundControls,p=f===void 0?[0,0]:f,v=d.maxRoundControls,h=v===void 0?[4,4]:v,m=d.zoom,g=d.roundPadding,E=g===void 0?0:g,b=d.isDisplayShadowRoundControls,C=d.groupable;if(!r)return null;var D=u||dc(t),x=o?4:3,S=cc(D,a,i,p,!0);if(!S)return null;var k=0,w=0,T=C?[0,0]:[l,c];return S.map(function(R,M){var P=R.horizontal,L=R.vertical,A=R.direction||"",I=J([],R.pos,!0);w+=Math.abs(P),k+=Math.abs(L),P&&A.indexOf("n")>-1&&(I[1]-=E),L&&A.indexOf("w")>-1&&(I[0]-=E),P&&A.indexOf("s")>-1&&(I[1]+=E),L&&A.indexOf("e")>-1&&(I[0]+=E);var _=j(Bt(s,I,x),T),B=R.vertical?k<=h[1]&&(b||!R.virtual):w<=h[0]&&(b||!R.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(M),className:Q("control","border-radius",R.vertical?"vertical":"",R.virtual?"virtual":""),"data-radius-index":M,style:{display:B?"block":"none",transform:"translate(".concat(_[0],"px, ").concat(_[1],"px) scale(").concat(m,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,a=n.target,i=a.getAttribute("class")||"",s=i.indexOf("border-radius")>-1,o=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,l=s?parseInt(a.getAttribute("data-radius-index"),10):-1,c=-1;if(o){var u=a.getAttribute("data-line-key")||"";u&&(c=parseInt(u.replace(/render-line-/g,""),10),isNaN(c)&&(c=-1))}if(!s&&!o)return!1;var d=nt(t,e,{}),f=Y(t,"onRoundStart",d);if(f===!1)return!1;r.lineIndex=c,r.controlIndex=l,r.isControl=s,r.isLine=o,tr(t,e);var p=t.props,v=p.roundRelative,h=p.minRoundControls,m=h===void 0?[0,0]:h,g=t.state,E=g.width,b=g.height;r.isRound=!0,r.prevDist=[0,0];var C=dc(t),D=cc(C||"",E,b,m,!0)||[];return r.controlPoses=D,g.borderRadiusState=Ui(D,v,E,b).styles.join(" "),d},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var a=n.controlIndex,i=ye(e),s=i[0],o=i[1],l=[s,o],c=j(l,n.prevDist),u=t.props.maxRoundControls,d=u===void 0?[4,4]:u,f=t.state,p=f.width,v=f.height,h=r[a],m=h.vertical,g=h.horizontal,E=r.map(function(C){var D=C.horizontal,x=C.vertical,S=[D*g*l[0],x*m*l[1]];if(D){if(d[0]===1)return S;if(d[0]<4&&D!==g)return S}else{if(d[1]===0)return S[1]=x*g*l[0]/p*v,S;if(m){if(d[1]===1)return S;if(d[1]<4&&x!==m)return S}}return[0,0]});E[a]=l;var b=r.map(function(C,D){return O(O({},C),{pos:ct(C.pos,E[D])})});return a<4?b.slice(0,a+1).forEach(function(C){C.virtual=!1}):b.slice(4,a+1).forEach(function(C){C.virtual=!1}),n.prevDist=[s,o],uc(t,e,l,c,b)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,a=e.isDouble;if(!r.isRound)return!1;var i=r.isControl,s=r.controlIndex,o=r.isLine,l=r.lineIndex,c=r.controlPoses,u=c.filter(function(g){var E=g.virtual;return E}).length,d=t.props.roundClickable,f=d===void 0?!0:d;if(a&&f){if(i&&(f===!0||f==="control"))yh(c,s);else if(o&&(f===!0||f==="line")){var p=js(t,e),v=p[0],h=p[1];gh(c,l,v,h)}u!==c.filter(function(g){var E=g.virtual;return E}).length&&uc(t,e,[0,0],[0,0],c)}var m=re(t,e,{});return Y(t,"onRoundEnd",m),n.borderRadiusState="",m},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,a=t.props.targets,i=pe(t,"roundable",e),s=O({targets:t.props.targets,events:i.map(function(o,l){return O(O({},o),{target:a[l],moveable:r[l],currentTarget:r[l]})})},n);return Y(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,a=t.props.targets,i=pe(t,"roundable",e),s=O({targets:t.props.targets,events:i.map(function(o,l){return O(O(O({},o),{target:a[l],moveable:r[l],currentTarget:r[l]}),Yt({borderRadius:n.borderRadius},o))})},n);return Y(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,a=pe(t,"roundable",e);Jn(t,"onRound",function(o){var l=O({targets:t.props.targets,events:a.map(function(c,u){return O(O(O({},c),{target:r[u],moveable:n[u],currentTarget:n[u]}),Yt({borderRadius:o.borderRadius},c))})},o);Y(t,"onRoundGroup",l)});var i=this.dragControlEnd(t,e);if(!i)return!1;var s=O({targets:t.props.targets,events:a.map(function(o,l){var c;return O(O({},o),{target:r[l],moveable:n[l],currentTarget:n[l],lastEvent:(c=o.datas)===null||c===void 0?void 0:c.lastEvent})})},i);return Y(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function bh(t,e){var n=e?4:3,r=wt(n),a="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===a||t==="matrix(1,0,0,1,0,0)"}var fc={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,a=n.target,i=n.targetMatrix,s=a?.style.transform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(As(i,!0),")"),l=!s||s==="none"?o:s;e.datas.startTransforms=bh(l,r)?[]:Pe(l)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return nt(t,e,{setTransform:function(n){e.datas.startTransforms=Mt(n)?n:Pe(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return nt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Y(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetStyle(e),Y(t,"onBeforeRender",nt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){Y(t,"onBeforeRenderEnd",nt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=pe(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.setTransform(l,s),n.resetStyle(s),n.fillDragStartParams(l,s)});Y(t,"onBeforeRenderGroupStart",nt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=pe(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.resetStyle(s),n.fillDragParams(l,s)});Y(t,"onBeforeRenderGroup",nt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Y(t,"onBeforeRenderGroupEnd",nt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},pc={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){Y(t,"onRenderStart",nt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Y(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){Y(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Y(t,"onRenderGroupStart",nt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=pe(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.fillDragParams(l,s)});Y(t,"onRenderGroup",nt(t,e,O(O({isPinch:!!e.isPinch,targets:t.props.targets,transform:Xn(e)},Yt(Zn(e))),{events:i})))},dragGroupEnd:function(t,e){var n=this,r=pe(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.fillDragEndParams(l,s)});Y(t,"onRenderGroupEnd",nt(t,e,O({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:i,transform:Xn(e)},Yt(Zn(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return nt(t,e,O({isPinch:!!e.isPinch,transform:Xn(e)},Yt(Zn(e))))},fillDragEndParams:function(t,e){return nt(t,e,O({isPinch:!!e.isPinch,isDrag:e.isDrag,transform:Xn(e)},Yt(Zn(e))))}};function un(t,e,n,r,a,i,s){var o=a==="Start",l=t.state.target,c=i.isRequest;if(!l||o&&r.indexOf("Control")>-1&&!c&&t.areaElement===i.inputEvent.target)return!1;var u="".concat(n).concat(r).concat(a),d="".concat(n).concat(r,"Condition"),f=a==="End",p=a==="After",v=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());v&&t.updateRect(a,!0,!1),i.clientDistX=i.distX,i.clientDistY=i.distY,a===""&&!c&&El(t.state,i);var h=J([],t[e],!0);if(c){var m=i.requestAble;h.some(function(M){return M.name===m})||h.push.apply(h,t.props.ables.filter(function(M){return M.name===m}))}if(!h.length||h.every(function(M){return M.dragRelation}))return!1;var g=J(J([fc],h,!0),[pc],!1).filter(function(M){return M[u]}),E=i.datas;v&&g.forEach(function(M){M.unset&&M.unset(t)});var b=i.inputEvent,C;f&&b&&(C=document.elementFromPoint(i.clientX,i.clientY)||b.target);var D=0,x=!1,S=function(){var M;x=!0,(M=i.stop)===null||M===void 0||M.call(i)},k=g.filter(function(M){var P=M.name,L=E[P]||(E[P]={});if(o&&(L.isEventStart=!M[d]||M[d](t,i)),L.isEventStart){var A=M[u](t,O(O({},i),{stop:S,resultCount:D,datas:L,originalDatas:E,inputTarget:C}));return t._emitter.off(),o&&A===!1&&(L.isEventStart=!1),D+=A||L.isEventStart?1:0,A}return!1}),w=k.length,T=!1;if(x&&(T=!0),!T&&o&&g.length&&!w&&(T=g.filter(function(M){var P=M.name,L=E[P];return L.isEventStart?M.dragRelation!=="strong":!1}).length),(f||T)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(M){M.state.gestos={}}),g.forEach(function(M){M.unset&&M.unset(t)})),o&&!T&&!c&&w&&i?.preventDefault(),t.isUnmounted||T)return!1;if(!o&&w&&!s||f){var R=t.props.flushSync||ol;R(function(){t.updateRect(f?a:"",!0,!1),t.forceUpdate()})}return!o&&!f&&!p&&w&&!s&&un(t,e,n,r,a+"After",i),!0}function Qi(t){return function(e){var n=t.props.dragTarget,r=e.inputEvent.target,a=t.areaElement;return n&&(r===n||n.contains(r))||r===a||!t.isMoveableElement(r)&&!t.controlBox.getElement().contains(r)||Lt(r,"moveable-area")||Lt(r,"moveable-padding")||Lt(r,"moveable-edgeDraggable")}}function vc(t,e,n){var r=t.controlBox.getElement(),a=[],i=t.props.dragTarget;return a.push(r),(!t.props.dragArea||i)&&a.push(e),qi(t,a,"targetAbles",n,{dragStart:Qi(t),pinchStart:Qi(t)})}function qi(t,e,n,r,a){a===void 0&&(a={});var i=n==="targetAbles",s=t.props,o=s.pinchOutside,l=s.pinchThreshold,c=s.preventClickEventOnDrag,u=s.preventClickDefault,d=s.checkInput,f={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:l,pinchOutside:o,preventClickEventOnDrag:i?c:!1,preventClickEventOnDragStart:i?u:!1,preventClickEventByCondition:i?null:function(h){return t.controlBox.getElement().contains(h.target)},checkInput:i?d:!1},p=new Ks(e,f),v=r==="Control";return["drag","pinch"].forEach(function(h){["Start","","End"].forEach(function(m){p.on("".concat(h).concat(m),function(g){var E,b=g.eventType;if(a[b]&&!a[b](g)){g.stop();return}var C=un(t,n,h,r,m,g);C?(t.props.stopPropagation||m==="Start"&&v)&&((E=g?.inputEvent)===null||E===void 0||E.stopPropagation()):g.stop()})})}),p}var Ch=function(){function t(n,r,a){var i=this;this.target=n,this.moveable=r,this.eventName=a,this.ables=[],this._onEvent=function(s){var o=i.eventName,l=i.moveable;l.state.disableNativeEvent||i.ables.forEach(function(c){c[o](l,{inputEvent:s})})},n.addEventListener(a.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(n){this.ables=n},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function xh(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function hc(t,e,n){for(var r=t,a=[],i=document.documentElement||document.body,s=!n&&t===e||t===i,o=s,l=!1,c=3,u,d,f,p=!1,v=an(e,e,!0).offsetParent,h=1;r&&!o;){o=s;var m=getComputedStyle(r),g=m.position,E=sl(r,m),b=Nf(zp(E)),C=g==="fixed",D={hasTransform:!1,fixedContainer:null};C&&(p=!0,D=Wp(r),v=D.fixedContainer);var x=b.length;!l&&x===16&&(l=!0,c=4,Si(a),f&&(f=me(f,3,4))),l&&x===9&&(b=me(b,3,4));var S=Kp(r,t,m),k=S.tagName,w=S.hasOffset,T=S.isSVG,R=S.origin,M=S.targetOrigin,P=S.offset,L=P[0],A=P[1];k==="svg"&&f&&(a.push({type:"target",target:r,matrix:$p(r,c)}),a.push({type:"offset",target:r,matrix:wt(c)}));var I=void 0,_=!1,B=!1,z=parseFloat(m.zoom)||1;if(C)I=D.fixedContainer,_=!0;else{var N=an(r,e,!1,!0,m),G=N.offsetZoom;if(I=N.offsetParent,_=N.isEnd,B=N.isStatic,h*=G,G!==1&&B)L-=I.offsetLeft,A-=I.offsetTop;else if(Ep){var K=N.parentSlotElement;if(K){for(var H=I,$=0,W=0;H&&xh(H);)$+=H.offsetLeft,W+=H.offsetTop,H=H.offsetParent;L-=$,A-=W}}}Vs&&!bp&&w&&!T&&B&&(g==="relative"||g==="static")&&(L-=I.offsetLeft,A-=I.offsetTop,s=s||_);var X=0,q=0,tt=0,et=0;if(C)w&&D.hasTransform&&(tt=I.clientLeft,et=I.clientTop);else if(w&&v!==I&&(X=I.clientLeft,q=I.clientTop),w&&I===i){var V=ll(r,!1,m);L+=V[0],A+=V[1]}if(a.push({type:"target",target:r,matrix:Un(b,c,R)}),w){var Z=r===t,ut=Z?0:r.scrollLeft,at=Z?0:r.scrollTop;a.push({type:"offset",target:r,matrix:Ur([L-ut+X-tt,A-at+q-et],c)})}else a.push({type:"offset",target:r,origin:R});if(z!==1&&a.push({type:"zoom",target:r,matrix:Un(qa([z,z],c),c,[0,0])}),f||(f=b),u||(u=R),d||(d=M),o||C)break;r=I,s=_,(!n||r===i)&&(o=s)}return f||(f=wt(c)),u||(u=[0,0]),d||(d=[0,0]),{zoom:h,offsetContainer:v,matrixes:a,targetMatrix:f,transformOrigin:u,targetOrigin:d,is3d:l,hasFixed:p}}function Sh(t,e,n,r){var a;n===void 0&&(n=e);var i=hc(t,e),s=i.matrixes,o=i.is3d,l=i.targetMatrix,c=i.transformOrigin,u=i.targetOrigin,d=i.offsetContainer,f=i.hasFixed,p=i.zoom,v=hc(d,n,!0),h=v.matrixes,m=v.is3d,g=v.offsetContainer,E=v.zoom,b=r||m||o,C=b?4:3,D=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,x=l,S=wt(C),k=wt(C),w=wt(C),T=wt(C),R=s.length;h.reverse(),s.reverse(),!o&&b&&(x=me(x,3,4),Si(s)),!m&&b&&Si(h),h.forEach(function(B){k=yt(k,B.matrix,C)});var M=n||document.body,P=((a=h[0])===null||a===void 0?void 0:a.target)||an(M,M,!0).offsetParent,L=h.slice(1).reduce(function(B,z){return yt(B,z.matrix,C)},wt(C));s.forEach(function(B,z){if(R-2===z&&(w=S.slice()),R-1===z&&(T=S.slice()),!B.matrix){var N=s[z+1],G=Vp(B,N,P,C,yt(L,S,C));B.matrix=Ur(G,C)}S=yt(S,B.matrix,C)});var A=!D&&o;x||(x=wt(A?4:3));var I=Qn(D&&x.length===16?me(x,4,3):x,A),_=k;return k=Ps(k,C,C),{hasZoom:p!==1||E!==1,hasFixed:f,rootMatrix:k,originalRootMatrix:_,beforeMatrix:w,offsetMatrix:T,allMatrix:S,targetMatrix:x,targetTransform:I,transformOrigin:c,targetOrigin:u,is3d:b,offsetContainer:d,offsetRootContainer:g}}function gc(t,e,n,r){n===void 0&&(n=e);var a=0,i=0,s=0,o={},l=dl(t);if(t&&(a=l.offsetWidth,i=l.offsetHeight),t){var c=Sh(t,e,n,r),u=xr(c.allMatrix,c.transformOrigin,a,i);o=O(O({},c),u);var d=xr(c.allMatrix,[50,50],100,100);s=fl([d.pos1,d.pos2],d.direction)}var f=r?4:3;return O(O(O({hasZoom:!1,width:a,height:i,rotation:s},l),{originalRootMatrix:wt(f),rootMatrix:wt(f),beforeMatrix:wt(f),offsetMatrix:wt(f),allMatrix:wt(f),targetMatrix:wt(f),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),o)}function M1(t,e,n){return n===void 0&&(n=e),gc(t,e,n,!0)}function Ji(t,e,n,r,a,i){i===void 0&&(i=[]);var s=1,o=[0,0],l=qn(),c=qn(),u=qn(),d=qn(),f=[0,0],p={},v=gc(e,n,a,!0);if(e){var h=getComputedStyle(e);i.forEach(function(M){p[M]=h[M]});var m=v.is3d?4:3,g=xr(v.offsetMatrix,ct(v.transformOrigin,Ls(v.targetMatrix,m)),v.width,v.height);s=g.direction,o=ct(g.origin,[g.left-v.left,g.top-v.top]),d=sn(v.offsetRootContainer);var E=an(r,r,!0).offsetParent||v.offsetRootContainer;if(v.hasZoom){var b=xr(yt(v.originalRootMatrix,v.allMatrix),v.transformOrigin,v.width,v.height),C=xr(v.originalRootMatrix,jn(getComputedStyle(E)).map(function(M){return parseFloat(M)}),E.offsetWidth,E.offsetHeight);if(l=Mi(b,d),u=Mi(C,d,E,!0),t){var D=b.left,x=b.top;c=Mi({left:D,top:x,bottom:x,right:x},d)}}else{l=sn(e),u=sn(E,!0),t&&(c=sn(t));var S=u.left,k=u.top,w=u.clientLeft,T=u.clientTop,R=[l.left-S,l.top-k];f=j(rr(v.rootMatrix,R,4),[w+v.left,T+v.top])}}return O({targetClientRect:l,containerClientRect:u,moveableClientRect:c,rootContainerClientRect:d,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:p,offsetDelta:f},v)}function mc(t){var e=t.pos1,n=t.pos2,r=t.pos3,a=t.pos4;if(!e||!n||!r||!a)return null;var i=Be([e,n,r,a]),s=[i.minX,i.minY],o=j(t.origin,s);return e=j(e,s),n=j(n,s),r=j(r,s),a=j(a,s),O(O({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:a,origin:o,beforeOrigin:o,isPersisted:!0})}var Mr=function(t){Er(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state=O({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Ji(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new Jr,r._prevTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._observer=null,r._observerId=0,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r.checkUpdateRect=function(){if(!r.isDragging()){var a=r.props.parentMoveable;if(a){a.checkUpdateRect();return}rf(r._observerId),r._observerId=ss(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(a){a.stopPropagation(),a.preventDefault()},r}var n=e.prototype;return n.render=function(){var r=this.props,a=this.getState(),i=r.parentPosition,s=r.className,o=r.target,l=r.zoom,c=r.cspNonce,u=r.translateZ,d=r.cssStyled,f=r.portalContainer,p=r.groupable,v=r.linePadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var h=i||[0,0],m=h[0],g=h[1],E=a.left,b=a.top,C=a.target,D=a.direction,x=a.hasFixed,S=a.offsetDelta,k=r.targets,w=this.isDragging(),T={};this.getEnabledAbles().forEach(function(I){T["data-able-".concat(I.name.toLowerCase())]=!0});var R=this._getAbleClassName(),M=k&&k.length&&(C||p)||o||!this._hasFirstTarget&&this.state.isPersisted,P=this.controlBox||this.props.firstRenderState||this.props.persistData,L=[E-m,b-g];!p&&r.useAccuratePosition&&(L[0]+=S[0],L[1]+=S[1]);var A={position:x?"fixed":"absolute",display:M?"block":"none",visibility:P?"visible":"hidden",transform:"translate3d(".concat(L[0],"px, ").concat(L[1],"px, ").concat(u,")"),"--zoom":l,"--zoompx":"".concat(l,"px")};return v&&(A["--moveable-line-padding"]=v),ae(d,O({cspNonce:c,ref:ge(this,"controlBox"),className:"".concat(Q("control-box",D===-1?"reverse":"",w?"dragging":"")," ").concat(R," ").concat(s)},T,{onClick:this._onPreventClick,portalContainer:f,style:A}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1,this.controlBox.getElement();var r=this.props,a=r.parentMoveable,i=r.container,s=r.wrapperMoveable;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!a&&!s&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},n.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(r)},n.componentWillUnmount=function(){this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off();var r=this._viewContainer;r&&this._changeAbleViewClassNames([]),Sr(this,"targetGesto"),Sr(this,"controlGesto");var a=this.events;for(var i in a){var s=a[i];s&&s.destroy()}},n.getTargets=function(){var r=this.props.target;return r?[r]:[]},n.getAble=function(r){var a=this.props.ables||[];return we(a,function(i){return i.name===r})},n.getContainer=function(){var r=this.props,a=r.parentMoveable,i=r.wrapperMoveable,s=r.container;return s||i&&i.getContainer()||a&&a.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(r){var a;return r&&(((a=r.getAttribute)===null||a===void 0?void 0:a.call(r,"class"))||"").indexOf(gi)>-1},n.dragStart=function(r){var a=this.targetGesto,i=this.controlGesto;return a&&Qi(this)({inputEvent:r})?a.isFlag()||a.triggerDragStart(r):i&&this.isMoveableElement(r.target)&&(i.isFlag()||i.triggerDragStart(r)),this},n.hitTest=function(r){var a=this.state,i=a.target,s=a.pos1,o=a.pos2,l=a.pos3,c=a.pos4,u=a.targetClientRect;if(!i)return 0;var d;if(r instanceof Element){var f=r.getBoundingClientRect();d={left:f.left,top:f.top,width:f.width,height:f.height}}else d=O({width:0,height:0},r);var p=d.left,v=d.top,h=d.width,m=d.height,g=ri([s,o,c,l],u),E=Zf(g,[[p,v],[p+h,v],[p+h,v+m],[p,v+m]]),b=qr(g);return!E||!b?0:Math.min(100,E/b*100)},n.isInside=function(r,a){var i=this.state,s=i.target,o=i.pos1,l=i.pos2,c=i.pos3,u=i.pos4,d=i.targetClientRect;return s?Bn([r,a],ri([o,l,u,c],d)):!1},n.updateRect=function(r,a,i){i===void 0&&(i=!0);var s=this.props,o=s.parentMoveable,l=this.state,c=l.target||this.props.target,u=this.getContainer(),d=o?o._rootContainer:this._rootContainer,f=Ji(this.controlBox&&this.controlBox.getElement(),c,u,u,d||u,this._getRequestStyles());if(!c&&this._hasFirstTarget&&s.persistData){var p=mc(s.persistData);for(var v in p)f[v]=p[v]}this.updateState(f,o?!1:i)},n.isDragging=function(r){var a,i,s=this.targetGesto,o=this.controlGesto;if(s?.isFlag()){if(!r)return!0;var l=s.getEventData();return!!(!((a=l[r])===null||a===void 0)&&a.isEventStart)}if(o?.isFlag()){if(!r)return!0;var l=o.getEventData();return!!(!((i=l[r])===null||i===void 0)&&i.isEventStart)}return!1},n.updateTarget=function(r){this.updateRect(r,!0)},n.getRect=function(){var r=this.state,a=qt(this.state),i=a[0],s=a[1],o=a[2],l=a[3],c=ie(a),u=r.width,d=r.height,f=c.width,p=c.height,v=c.left,h=c.top,m=[r.left,r.top],g=ct(m,r.origin),E=ct(m,r.beforeOrigin),b=r.transformOrigin;return{width:f,height:p,left:v,top:h,pos1:i,pos2:s,pos3:o,pos4:l,offsetWidth:u,offsetHeight:d,beforeOrigin:E,origin:g,transformOrigin:b,rotation:this.getRotation()}},n.getManager=function(){return this},n.stopDrag=function(r){var a,i;(!r||r==="target")&&((a=this.targetGesto)===null||a===void 0||a.stop()),(!r||r==="control")&&((i=this.controlGesto)===null||i===void 0||i.stop())},n.getRotation=function(){var r=this.state,a=r.pos1,i=r.pos2,s=r.direction;return Jp(a,i,s)},n.request=function(r,a,i){a===void 0&&(a={});var s=this.props,o=s.ables,l=s.groupable,c=o.filter(function(m){return m.name===r})[0];if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var u=this,d=c.request(this),f=i||a.isInstant,p=d.isControl?"controlAbles":"targetAbles",v="".concat(l?"Group":"").concat(d.isControl?"Control":""),h={request:function(m){return un(u,p,"drag",v,"",O(O({},d.request(m)),{requestAble:r,isRequest:!0}),f),this},requestEnd:function(){return un(u,p,"drag",v,"End",O(O({},d.requestEnd()),{requestAble:r,isRequest:!0}),f),this}};return un(u,p,"drag",v,"Start",O(O({},d.requestStart(a)),{requestAble:r,isRequest:!0}),f),f?h.request(a).requestEnd():h},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var r=this.getState(),a=this.props,i=r.originalBeforeOrigin,s=r.transformOrigin,o=r.allMatrix,l=r.is3d,c=r.pos1,u=r.pos2,d=r.pos3,f=r.pos4,p=r.left,v=r.top,h=r.isPersisted,m=a.padding||{},g=m.left,E=g===void 0?0:g,b=m.top,C=b===void 0?0:b,D=m.bottom,x=D===void 0?0:D,S=m.right,k=S===void 0?0:S,w=l?4:3,T=[];h?T=s:this.controlBox&&a.groupable?T=i:T=ct(i,[p,v]),r.renderPoses=[ct(c,ea(o,[-E,-C],s,T,w)),ct(u,ea(o,[k,-C],s,T,w)),ct(d,ea(o,[-E,x],s,T,w)),ct(f,ea(o,[k,x],s,T,w))]},n.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,a=r.target,i=r.container,s=r.parentMoveable,o=this.state,l=o.target,c=o.container;if(!(!l&&!a)){this.updateAbles();var u=!Ti(l,a),d=u||!Ti(c,i);if(d){var f=i||this.controlBox;f&&this.unsetAbles(),this.updateState({target:a,container:i}),!s&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},n.waitToChangeTarget=function(){return new Promise(function(){})},n.triggerEvent=function(r,a){this._emitter.trigger(r,a);var i=this.props[r];return i&&i(a)},n.useCSS=function(r,a){var i=this.props.customStyledMap,s=r+a;return i[s]||(i[s]=Hs(r,a)),i[s]},n.getState=function(){var r,a=this.props;(a.target||!((r=a.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,s=a.persistData,o=a.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&s){var l=mc(s);if(l)return this.updateState(l,!1),this.state}return this.state.isPersisted=!1,this.state},n.updateSelectors=function(){},n.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(a){a.unset&&a.unset(r)})},n.updateAbles=function(r,a){r===void 0&&(r=this.props.ables),a===void 0&&(a="");var i=this.props,s=i.triggerAblesSimultaneously,o=this.getEnabledAbles(r),l="drag".concat(a,"Start"),c="pinch".concat(a,"Start"),u="drag".concat(a,"ControlStart"),d=ta(o,[l,c],s),f=ta(o,[u],s);this.enabledAbles=o,this.targetAbles=d,this.controlAbles=f},n.updateState=function(r,a){if(a){if(this.isUnmounted)return;this.setState(r)}else{var i=this.state;for(var s in r)i[s]=r[s]}},n.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var a=this.props;return r.filter(function(i){return i&&(i.always&&a[i.name]!==!1||a[i.name])})},n.renderAbles=function(){var r=this,a=this.props,i=a.triggerAblesSimultaneously,s={createElement:ae};return this.renderState={},Up(yl(ta(this.getEnabledAbles(),["render"],i).map(function(o){var l=o.render;return l(r,s)||[]})).filter(function(o){return o}),function(o){var l=o.key;return l}).map(function(o){return o[0]})},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(a,i){var s,o,l=(o=(s=i.requestStyle)===null||s===void 0?void 0:s.call(i))!==null&&o!==void 0?o:[];return J(J([],a,!0),l,!0)},[]);return r},n._updateObserver=function(r){var a,i=this.props,s=i.target;if(!window.ResizeObserver||!s||!i.useResizeObserver){(a=this._observer)===null||a===void 0||a.disconnect();return}if(!(r.target===s&&this._observer)){var o=new ResizeObserver(this.checkUpdateRect);o.observe(s,{box:"border-box"}),this._observer=o}},n._updateEvents=function(){var r=this.controlBox.getElement(),a=this.targetAbles.length,i=this.controlAbles.length,s=this.props,o=s.dragTarget||s.target,l=!a&&this.targetGesto||this._isTargetChanged(!0);l&&(Sr(this,"targetGesto"),this.updateState({gesto:null})),i||Sr(this,"controlGesto"),o&&a&&!this.targetGesto&&(this.targetGesto=vc(this,o,"")),!this.controlGesto&&i&&(this.controlGesto=qi(this,r,"controlAbles","Control"))},n._updateTargets=function(){var r=this.props;this._prevTarget=r.dragTarget||r.target,this._prevDragArea=r.dragArea},n._renderLines=function(){var r=this.props,a=r,i=a.zoom,s=a.hideDefaultLines,o=a.hideChildMoveableDefaultLines,l=a.parentMoveable;if(s||l&&o)return[];var c=this.getState().renderPoses,u={createElement:ae};return[[0,1],[1,3],[3,2],[2,0]].map(function(d,f){var p=d[0],v=d[1];return cn(u,"",c[p],c[v],i,"render-line-".concat(f))})},n._isTargetChanged=function(r){var a=this.props,i=a.dragTarget||a.target,s=this._prevTarget,o=this._prevDragArea,l=a.dragArea,c=!l&&s!==i,u=(r||l)&&o!==l;return c||u},n._updateNativeEvents=function(){var r=this,a=this.props,i=a.dragArea?this.areaElement:this.state.target,s=this.events,o=Ae(s);if(this._isTargetChanged())for(var l in s){var c=s[l];c&&c.destroy(),s[l]=null}if(i){var u=this.enabledAbles;o.forEach(function(d){var f=ta(u,[d]),p=f.length>0,v=s[d];if(!p){v&&(v.destroy(),s[d]=null);return}v||(v=new Ch(i,r,d),s[d]=v),v.setAbles(f)})}},n._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=nr(r,!0))},n._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=nr(r,!0));var a=this._viewContainer;a&&this._changeAbleViewClassNames(J(J([],this._getAbleViewClassNames(),!0),[this.isDragging()?Jv:""],!1))},n._changeAbleViewClassNames=function(r){var a=this._viewContainer,i=ml(r.filter(Boolean),function(u){return u}).map(function(u){var d=u[0];return d}),s=this._viewClassNames,o=Kr(s,i),l=o.removed,c=o.added;l.forEach(function(u){fs(a,s[u])}),c.forEach(function(u){Ba(a,i[u])}),this._viewClassNames=i},n._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(a){var i;return((i=a.viewClassName)===null||i===void 0?void 0:i.call(a,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},n._getAbleClassName=function(r){var a=this;r===void 0&&(r="");var i=this.getEnabledAbles(),s=this.targetGesto,o=this.controlGesto,l=s?.isFlag()?s.getEventData():{},c=o?.isFlag()?o.getEventData():{};return i.map(function(u){var d,f,p,v=u.name,h=((d=u.className)===null||d===void 0?void 0:d.call(u,a))||"";return(!((f=l[v])===null||f===void 0)&&f.isEventStart||!((p=c[v])===null||p===void 0)&&p.isEventStart)&&(h+=" ".concat(Q("".concat(v).concat(r,"-dragging")))),h.trim()}).filter(Boolean).join(" ")},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,portalContainer:null,useResizeObserver:!1,linePadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:ol,firstRenderState:null,persistData:null,viewContainer:null,useAccuratePosition:!1},e}($a),to={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,groupableProps:Object,targetGroups:Object,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,e){var n,r=t.props,a=r.targets||[];t.moveables=[];var i=t.getState(),s=i.left,o=i.top,l=i.isPersisted,c=[s,o],u=r.zoom||1,d=t.renderGroupRects,f=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];return l?a=f.map(function(){return null}):f=[],J(J([],a.map(function(p,v){return e.createElement(Mr,{key:"moveable"+v,ref:Jo(t,"moveables",v),target:p,origin:!1,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:c,persistData:f[v],zoom:u})}),!0),yl(d.map(function(p,v){var h=p.pos1,m=p.pos2,g=p.pos3,E=p.pos4,b=[h,m,g,E];return[[0,1],[1,3],[3,2],[2,0]].map(function(C,D){var x=C[0],S=C[1];return cn(e,"",j(b[x],c),j(b[S],c),u,"group-rect-".concat(v,"-").concat(D))})})),!0)}},Dh=en("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,a=e.inputTarget,i=t.isMoveableElement(a),s=!i&&t.controlBox.getElement().contains(a);if(!(!r||!a||e.isDrag||t.isMoveableElement(a)||s)){var o=n.contains(a);Y(t,"onClick",nt(t,e,{isDouble:e.isDouble,inputTarget:a,isTarget:n===a,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var a=t.props.targets,i=a.indexOf(r),s=i>-1,o=!1;i===-1&&(i=De(a,function(l){return l.contains(r)}),o=i>-1),Y(t,"onClickGroup",nt(t,e,{isDouble:e.isDouble,targets:a,inputTarget:r,targetIndex:i,isTarget:s,containsTarget:o,moveableTarget:a[i]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function kr(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),O(O({},t),{datas:e})}var wh=en("edgeDraggable",{css:[`.edge.edgeDraggable.line {
    cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?Xl(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,a=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!a?!1:!r.draggable&&Lt(a,Q("direction"))&&Lt(a,Q("edge"))&&Lt(a,Q("edgeDraggable"))},dragStart:function(t,e){return Xt.dragStart(t,kr(e))},drag:function(t,e){return Xt.drag(t,kr(e))},dragEnd:function(t,e){return Xt.dragEnd(t,kr(e))},dragGroupCondition:function(t,e){var n,r=t.props,a=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!a?!1:!r.draggable&&Lt(a,Q("direction"))&&Lt(a,Q("line"))},dragGroupStart:function(t,e){return Xt.dragGroupStart(t,kr(e))},dragGroup:function(t,e){return Xt.dragGroup(t,kr(e))},dragGroupEnd:function(t,e){return Xt.dragGroupEnd(t,kr(e))},unset:function(t){return Xt.unset(t)}}),yc={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},eo=[fc,nc,$v,rv,Xt,wh,$i,Uv,Qv,Zv,rh,nh,th,hh,vh,Eh,to,yc,Dh,rc,pc],Mh=eo.reduce(function(t,e){return O(O({},t),"events"in e?e.events:{})},{}),kh=eo.reduce(function(t,e){return O(O({},t),e.props)},{}),Th=jp(Mh),Rh=Object.keys(Th),Oh=Object.keys(kh);function Ec(t,e){var n=t[0],r=t[1],a=t[2];return(n*e[0]+r*e[1]+a)/Math.sqrt(n*n+r*r)}function pa(t,e){var n=t[0],r=t[1];return-n*e[0]-r*e[1]}function bc(t,e){return Math.max.apply(Math,t.map(function(n){var r=n[0],a=n[1],i=n[2],s=n[3];return Math.max(r[e],a[e],i[e],s[e])}))}function Cc(t,e){return Math.min.apply(Math,t.map(function(n){var r=n[0],a=n[1],i=n[2],s=n[3];return Math.min(r[e],a[e],i[e],s[e])}))}function Ph(t,e){var n,r=[0,0],a=[0,0],i=[0,0],s=[0,0],o=0,l=0;if(!t.length)return{pos1:r,pos2:a,pos3:i,pos4:s,minX:0,minY:0,maxX:0,maxY:0,width:o,height:l,rotation:e};var c=rt(e,Vt);if(c%90){var u=c/180*Math.PI,d=Math.tan(u),f=-1/d,p=[yi,Xs],v=[[0,0],[0,0]],h=[yi,Xs],m=[[0,0],[0,0]];t.forEach(function(z){z.forEach(function(N){var G=Ec([-d,1,0],N),K=Ec([-f,1,0],N);p[0]>G&&(v[0]=N,p[0]=G),p[1]<G&&(v[1]=N,p[1]=G),h[0]>K&&(m[0]=N,h[0]=K),h[1]<K&&(m[1]=N,h[1]=K)})});var g=v[0],E=v[1],b=m[0],C=m[1],D=[-d,1,pa([-d,1],g)],x=[-d,1,pa([-d,1],E)],S=[-f,1,pa([-f,1],b)],k=[-f,1,pa([-f,1],C)];n=[[D,S],[D,k],[x,S],[x,k]].map(function(z){var N=z[0],G=z[1];return _n(N,G)[0]}),r=n[0],a=n[1],i=n[2],s=n[3],o=h[1]-h[0],l=p[1]-p[0]}else{var w=Cc(t,0),T=Cc(t,1),R=bc(t,0),M=bc(t,1);if(r=[w,T],a=[R,T],i=[w,M],s=[R,M],o=R-w,l=M-T,c%180){var P=[i,r,s,a];r=P[0],a=P[1],i=P[2],s=P[3],o=M-T,l=R-w}}if(c%360>180){var P=[s,i,a,r];r=P[0],a=P[1],i=P[2],s=P[3]}var L=Be([r,a,i,s]),A=L.minX,I=L.minY,_=L.maxX,B=L.maxY;return{pos1:r,pos2:a,pos3:i,pos4:s,width:o,height:l,minX:A,minY:I,maxX:_,maxY:B,rotation:e}}function xc(t,e){var n=e.map(function(r){if(Mt(r)){var a=xc(t,r),i=a.length;return i>1?a:i===1?a[0]:null}else{var s=we(t,function(o){var l=o.manager;return l.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&Mt(n[0])?n[0]:n}var Lh=function(t){Er(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.differ=new Is,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}var n=e.prototype;return n.componentDidMount=function(){t.prototype.componentDidMount.call(this)},n.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},n.getTargets=function(){return this.props.targets},n.updateRect=function(r,a,i){var s;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;this.moveables.forEach(function(tt){tt.updateRect(r,!1,!1)});var l=this.props,c=this.moveables,u=o.target||l.target,d=c.map(function(tt){return{finded:!1,manager:tt}}),f=this.props.targetGroups||[],p=xc(d,f);p.push.apply(p,d.filter(function(tt){var et=tt.finded;return!et}).map(function(tt){var et=tt.manager;return et}));var v=[],h=!a||r!==""&&l.updateGroup,m=l.defaultGroupRotate||0;if(!this._hasFirstTargets){var g=(s=this.props.persistData)===null||s===void 0?void 0:s.rotation;g!=null&&(m=g)}function E(tt,et,V){var Z=tt.map(function(it){if(Mt(it)){var lt=E(it,et),ft=[lt.pos1,lt.pos2,lt.pos3,lt.pos4];return v.push(lt),{poses:ft,rotation:lt.rotation}}else return{poses:qt(it.state),rotation:it.getRotation()}}),ut=Z.map(function(it){var lt=it.rotation;return lt}),at=0,Pt=ut[0],pt=ut.every(function(it){return Math.abs(Pt-it)<.1});h?at=pt?Pt:m:at=!V&&pt?Pt:et;var dt=Z.map(function(it){var lt=it.poses;return lt}),mt=Ph(dt,at);return mt}var b=E(p,this.rotation,!0);h&&(this.rotation=b.rotation,this.transformOrigin=l.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=f,this.renderGroupRects=v;var C=this.transformOrigin,D=this.rotation,x=this.scale,S=b.width,k=b.height,w=b.minX,T=b.minY,R=ev([[0,0],[S,0],[0,k],[S,k]],tv(C,S,k),this.rotation/180*Math.PI),M=Be(R.result),P=M.minX,L=M.minY,A=" rotate(".concat(D,"deg)")+" scale(".concat(x[0]>=0?1:-1,", ").concat(x[1]>=0?1:-1,")"),I="translate(".concat(-P,"px, ").concat(-L,"px)").concat(A);this.controlBox.getElement().style.transform="translate3d(".concat(w,"px, ").concat(T,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(C,";")+"width:".concat(S,"px;height:").concat(k,"px;")+"transform: ".concat(I),o.width=S,o.height=k;var _=this.getContainer(),B=Ji(this.controlBox.getElement(),u,this.controlBox.getElement(),this.getContainer(),this._rootContainer||_,[]),z=[B.left,B.top],N=qt(B),G=N[0],K=N[1],H=N[2],$=N[3],W=Be([G,K,H,$]),X=[W.minX,W.minY],q=x[0]*x[1]>0?1:-1;B.pos1=j(G,X),B.pos2=j(K,X),B.pos3=j(H,X),B.pos4=j($,X),B.left=w-B.left+X[0],B.top=T-B.top+X[1],B.origin=j(ct(z,B.origin),X),B.beforeOrigin=j(ct(z,B.beforeOrigin),X),B.originalBeforeOrigin=ct(z,B.originalBeforeOrigin),B.transformOrigin=j(ct(z,B.transformOrigin),X),u.style.transform="translate(".concat(-P-X[0],"px, ").concat(-L-X[1],"px)")+A,this.updateState(O(O({},B),{posDelta:X,direction:q,beforeDirection:q}),i)},n.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},n.triggerEvent=function(r,a,i){if(i||r.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,r,a);this._emitter.trigger(r,a)},n.updateAbles=function(){t.prototype.updateAbles.call(this,J(J([],this.props.ables,!0),[to],!1),"Group")},n._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},n._updateEvents=function(){var r=this.state,a=this.props,i=this._prevTarget,s=a.dragTarget||this.areaElement;i!==s&&(Sr(this,"targetGesto"),Sr(this,"controlGesto"),r.target=null),r.target||(r.target=this.areaElement,this.controlBox.getElement().style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=vc(this,s,"Group")),this.controlGesto||(this.controlGesto=qi(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var o=!Ti(r.container,a.container);o&&(r.container=a.container);var l=a.targets,c=this.differ.update(l),u=c.added,d=c.changed,f=c.removed,p=u.length||f.length;(o||p||this.transformOrigin!==(a.defaultGroupOrigin||"50% 50%")||d.length||l.length&&!Sl(this._targetGroups,a.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!p},n._updateObserver=function(){},e.defaultProps=O(O({},Mr.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Mr),Ah=function(t){Er(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.moveables=[],r}var n=e.prototype;return n.render=function(){var r=this,a,i=this.props,s=i.cspNonce,o=i.cssStyled,l=i.persistData,c=i.targets||[],u=c.length,d=this.isUnmounted||!u,f=(a=l?.children)!==null&&a!==void 0?a:[];return d&&!u&&f.length?c=f.map(function(){return null}):d||(f=[]),ae(o,{cspNonce:s,ref:ge(this,"controlBox"),className:Q("control-box")},c.map(function(p,v){return ae(Mr,O({key:"moveable"+v,ref:Jo(r,"moveables",v)},r.props,{target:p,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:f[v]}))}))},n.componentDidUpdate=function(){},n.getTargets=function(){return this.props.targets},n.updateRect=function(r,a,i){i===void 0&&(i=!0),this.moveables.forEach(function(s){s.updateRect(r,a,i)})},n.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},n.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},n.dragStart=function(){return this},n.hitTest=function(){return 0},n.isInside=function(){return!1},n.isDragging=function(){return!1},n.updateRenderPoses=function(){},n.checkUpdate=function(){},n.triggerEvent=function(){},n.updateAbles=function(){},n._updateEvents=function(){},n._updateObserver=function(){},e}(Mr);function Sc(t,e){var n=[];return t.forEach(function(r){if(r){if($t(r)){e[r]&&n.push.apply(n,e[r]);return}Mt(r)?n.push.apply(n,Sc(r,e)):n.push(r)}}),n}function Dc(t,e){var n=[];return t.forEach(function(r){if(r){if($t(r)){e[r]&&n.push.apply(n,e[r]);return}Mt(r)?n.push(Dc(r,e)):n.push(r)}}),n}function wc(t,e){return t.length!==e.length||t.some(function(n,r){var a=e[r];return!n&&!a?!1:n!=a?Mt(n)&&Mt(a)?wc(n,a):!0:!1})}var Mc=function(t){Er(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new Is,r._elementTargets=[],r._onChangeTargets=null,r}var n=e.prototype;return e.makeStyled=function(){var r={},a=this.getTotalAbles();a.forEach(function(s){var o=s.css;o&&o.forEach(function(l){r[l]=!0})});var i=Ae(r).join(`
`);this.defaultStyled=Hs("div",_d(gi,Cp+i))},e.getTotalAbles=function(){return J([nc,to,yc,rc],this.defaultAbles,!0)},n.render=function(){var r,a=this.constructor;a.defaultStyled||a.makeStyled();var i=this.props,s=i.ables,o=i.props,l=hp(i,["ables","props"]),c=this._updateRefs(!0),u=Sc(c,this.selectorMap),d=u.length>1,f=a.getTotalAbles(),p=J(J([],f,!0),s||[],!0),v=O(O(O({},l),o||{}),{ables:p,cssStyled:a.defaultStyled,customStyledMap:a.customStyledMap});this._elementTargets=u;var h=null,m=this.moveable,g=l.persistData;if(g?.children&&(d=!0),d){if(l.individualGroupable)return ae(Ah,O({key:"individual-group",ref:ge(this,"moveable")},v,{target:null,targets:u}));var E=Dc(c,this.selectorMap);if(m&&!m.props.groupable&&!m.props.individualGroupable){var b=m.props.target;b&&u.indexOf(b)>-1&&(h=O({},m.state))}return ae(Lh,O({key:"group",ref:ge(this,"moveable")},v,(r=l.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:u,targetGroups:E,firstRenderState:h}))}else{var C=u[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var D=m.moveables||[],x=we(D,function(S){return S.props.target===C});x&&(h=O({},x.state))}return ae(Mr,O({key:"single",ref:ge(this,"moveable")},v,{target:C,firstRenderState:h}))}},n.componentDidMount=function(){this._checkChangeTargets(),this._updateRefs()},n.componentDidUpdate=function(){this._checkChangeTargets()},n.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},n.getTargets=function(){var r,a;return(a=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&a!==void 0?a:[]},n.updateSelectors=function(){this.selectorMap={},this._updateRefs()},n.waitToChangeTarget=function(){var r=this,a;return this._onChangeTargets=function(){r._onChangeTargets=null,a()},new Promise(function(i){a=i})},n.waitToChangeTargets=function(){return this.waitToChangeTarget()},n.getManager=function(){return this.moveable},n._updateRefs=function(r){var a=this.refTargets,i=Pi(this.props.target||this.props.targets),s=typeof document<"u",o=wc(a,i),l=this.selectorMap,c={};return this.refTargets.forEach(function u(d){if($t(d)){var f=l[d];f?c[d]=l[d]:s&&(o=!0,c[d]=[].slice.call(document.querySelectorAll(d)))}else Mt(d)&&d.forEach(u)}),this.refTargets=i,this.selectorMap=c,!r&&o&&this.forceUpdate(),i},n._checkChangeTargets=function(){var r,a,i,s=this._differ.update(this._elementTargets),o=s.added,l=s.removed,c=o.length||l.length;c&&((a=(r=this.props).onChangeTargets)===null||a===void 0||a.call(r,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this)),this._updateRefs()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,gp([zd(Us)],e.prototype,"moveable",void 0),e}($a),Nh=function(t){Er(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=eo,e}(Mc);function k1(t){var e;return e=function(n){Er(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(Mc),e.defaultAbles=t,e}var Ih=Nh;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ro=function(t,e){return ro=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},ro(t,e)};function no(t,e){ro(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var dn=function(){return dn=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},dn.apply(this,arguments)};function Bh(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}var _h=function(t){no(e,t);function e(r){var a=t.call(this,r)||this;return a.state={},a.state=a.props,a}var n=e.prototype;return n.render=function(){return Sf(ae(Ih,dn({ref:ge(this,"moveable")},this.state)),this.state.parentElement)},e}(Wa),zh=Oh,Fh=Us,Gh=Rh,T1=null,Kh=function(t){no(e,t);function e(r,a){a===void 0&&(a={});var i=t.call(this)||this;i.tempElement=document.createElement("div");var s=dn({},a),o={};Gh.forEach(function(c){o[Aa("on ".concat(c))]=function(u){return i.trigger(c,u)}}),xs(ae(_h,dn({ref:ge(i,"innerMoveable"),parentElement:r},s,o)),i.tempElement);var l=s.target;return Mt(l)&&l.length>1&&i.updateRect(),i}var n=e.prototype;return n.setState=function(r,a){this.innerMoveable.setState(r,a)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r){var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r)},n.destroy=function(){xs(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=Bh([Ta(Fh,function(r,a){r[a]||(r[a]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[a]))return o[a].apply(o,i)})}),Ta(zh,function(r,a){Object.defineProperty(r,a,{get:function(){return this.getMoveable().props[a]},set:function(i){var s;this.setState((s={},s[a]=i,s))},enumerable:!0,configurable:!0})})],e),e}(Jr),Wh=function(t){no(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Kh);function R1(t,e,n){return getElementInfo$1(t,e,n)}function O1(t,e){return makeAble$1(t,e)}var kc=F(23997),Tc=F(86261),Rc=F(5632),ao=function(t,e){return ao=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},ao(t,e)};function $h(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ao(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Hh="object",Vh="string";function Oc(t){return t&&typeof t===Hh}function Pc(t){return Array.isArray(t)}function Lc(t){return typeof t===Vh}function Yh(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=0;a<r;++a)if(e(t[a],a,t))return a;return n}function io(t,e,n,r){t.addEventListener(e,n,r)}function oo(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var so=function(){return so=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},so.apply(this,arguments)};function Xh(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}var Zh=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Oc(n))for(var a in n)this.on(a,n[a]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Oc(n))for(var a in n)this.off(a);else if(!r)this._events[n]=[];else{var i=this._events[n];if(i){var s=Yh(i,function(o){return o.listener===r});s>-1&&i.splice(s,1)}}return this},e.once=function(n,r){var a=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(i){a._addEvent(n,i,{once:!0})})},e.emit=function(n,r){var a=this;r===void 0&&(r={});var i=this._events[n];if(!n||!i)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,Xh(i).forEach(function(o){o.listener(r),o.once&&a.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,a){var i=this._events;i[n]=i[n]||[];var s=i[n];s.push(so({listener:r},a))},t}();function Uh(t,e){return e={exports:{}},t(e,e.exports),e.exports}var fn=Uh(function(t,e){function n(l){if(l&&typeof l=="object"){var c=l.which||l.keyCode||l.charCode;c&&(l=c)}if(typeof l=="number")return s[l];var u=String(l),d=r[u.toLowerCase()];if(d)return d;var d=a[u.toLowerCase()];if(d)return d;if(u.length===1)return u.charCodeAt(0)}n.isEventKey=function(c,u){if(c&&typeof c=="object"){var d=c.which||c.keyCode||c.charCode;if(d==null)return!1;if(typeof u=="string"){var f=r[u.toLowerCase()];if(f)return f===d;var f=a[u.toLowerCase()];if(f)return f===d}else if(typeof u=="number")return u===d;return!1}},e=t.exports=n;var r=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=e.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(i=97;i<123;i++)r[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)r[i-48]=i;for(i=1;i<13;i++)r["f"+i]=i+111;for(i=0;i<10;i++)r["numpad "+i]=i+96;var s=e.names=e.title={};for(i in r)s[r[i]]=i;for(var o in a)r[o]=a[o]}),P1=fn.code,L1=fn.codes,A1=fn.aliases,jh=fn.names,N1=fn.title,Ac={"+":"plus","left command":"meta","right command":"meta"},Nc={shift:1,ctrl:2,alt:3,meta:4};function Ic(t,e){var n=(jh[t]||e||"").toLowerCase();for(var r in Ac)n=n.replace(r,Ac[r]);return n.replace(/\s/g,"")}function Bc(t,e){e===void 0&&(e=Ic(t.keyCode,t.key));var n=Qh(t);return n.indexOf(e)===-1&&n.push(e),n.filter(Boolean)}function Qh(t){var e=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return e.filter(Boolean)}function _c(t){var e=t.slice();return e.sort(function(n,r){var a=Nc[n]||5,i=Nc[r]||5;return a-i}),e}var zc,qh=function(t){$h(e,t);function e(r){r===void 0&&(r=window);var a=t.call(this)||this;return a.container=r,a.ctrlKey=!1,a.altKey=!1,a.shiftKey=!1,a.metaKey=!1,a.clear=function(){return a.ctrlKey=!1,a.altKey=!1,a.shiftKey=!1,a.metaKey=!1,a},a.keydownEvent=function(i){a.triggerEvent("keydown",i)},a.keyupEvent=function(i){a.triggerEvent("keyup",i)},a.blur=function(){a.clear(),a.trigger("blur")},io(r,"blur",a.blur),io(r,"keydown",a.keydownEvent),io(r,"keyup",a.keyupEvent),a}var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return zc||(zc=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var r=this.container;this.clear(),this.off(),oo(r,"blur",this.blur),oo(r,"keydown",this.keydownEvent),oo(r,"keyup",this.keyupEvent)},n.keydown=function(r,a){return this.addEvent("keydown",r,a)},n.offKeydown=function(r,a){return this.removeEvent("keydown",r,a)},n.offKeyup=function(r,a){return this.removeEvent("keyup",r,a)},n.keyup=function(r,a){return this.addEvent("keyup",r,a)},n.addEvent=function(r,a,i){return Pc(a)?this.on(r+"."+_c(a).join("."),i):Lc(a)?this.on(r+"."+a,i):this.on(r,a),this},n.removeEvent=function(r,a,i){return Pc(a)?this.off(r+"."+_c(a).join("."),i):Lc(a)?this.off(r+"."+a,i):this.off(r,a),this},n.triggerEvent=function(r,a){this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.altKey=a.altKey,this.metaKey=a.metaKey;var i=Ic(a.keyCode,a.key),s=i==="ctrl"||i==="shift"||i==="meta"||i==="alt",o={key:i,isToggle:s,inputEvent:a,keyCode:a.keyCode,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey};this.trigger(r,o),this.trigger(r+"."+i,o);var l=Bc(a,i);l.length>1&&this.trigger(r+"."+l.join("."),o)},e}(Zh);const Jh=qh;var lo=function(t,e){return lo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},lo(t,e)};function Fc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");lo(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Nt=function(){return Nt=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Nt.apply(this,arguments)};function tg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function eg(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}function pn(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function rg(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}else return{clientX:t.clientX,clientY:t.clientY}}function ng(t){if(typeof Map>"u")return t.filter(function(n,r){return t.indexOf(n)===r});var e=new Map;return t.filter(function(n){return e.has(n)?!1:(e.set(n,!0),!0)})}function ag(t,e,n){var r=ce(t);return r.elementFromPoint&&r.elementFromPoint(e,n)||null}function Gc(t,e,n){var r=t.tag,a=t.children,i=t.attributes,s=t.className,o=t.style,l=e||ce(n).createElement(r);for(var c in i)l.setAttribute(c,i[c]);var u=l.children;if(a.forEach(function(f,p){Gc(f,u[p],l)}),s&&s.split(/\s+/g).forEach(function(f){f&&!Lt(l,f)&&Ba(l,f)}),o){var d=l.style;for(var c in o)d[c]=o[c]}return!e&&n&&n.appendChild(l),l}function ig(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=e||{},i=a.className,s=i===void 0?"":i,o=a.style,l=o===void 0?{}:o,c=tg(a,["className","style"]);return{tag:t,className:s,style:l,attributes:c,children:n}}function co(t,e,n){t!==e&&n(t,e)}function Kc(t,e,n){var r;n===void 0&&(n=t.data.boundArea);var a=t.distX,i=a===void 0?0:a,s=t.distY,o=s===void 0?0:s,l=t.data,c=l.startX,u=l.startY;if(e>0){var d=Math.sqrt((i*i+o*o)/(1+e*e)),f=e*d;i=(i>=0?1:-1)*f,o=(o>=0?1:-1)*d}var p=Math.abs(i),v=Math.abs(o),h=i<0?c-n.left:n.right-c,m=o<0?u-n.top:n.bottom-u;r=cs([p,v],[0,0],[h,m],!!e),p=r[0],v=r[1],i=(i>=0?1:-1)*p,o=(o>=0?1:-1)*v;var g=Math.min(0,i),E=Math.min(0,o),b=c+g,C=u+E;return{left:b,top:C,right:b+p,bottom:C+v,width:p,height:v}}function va(t){var e=t.getBoundingClientRect(),n=e.left,r=e.top,a=e.width,i=e.height;return{pos1:[n,r],pos2:[n+a,r],pos3:[n,r+i],pos4:[n+a,r+i]}}function Wc(t,e,n){var r=mr(t,e),a=r.list,i=r.prevList,s=r.added,o=r.removed,l=r.maintained;return pn(pn(pn([],s.map(function(c){return a[c]}),!0),o.map(function(c){return i[c]}),!0),n?l.map(function(c){var u=c[1];return a[u]}):[],!0)}function $c(t){for(var e=0,n=t.length,r=1;r<n;++r)e=Math.max(ne(t[r],t[r-1]),e);return e}var Hc=Ws(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`),Vc="selecto-selection ".concat(Hc.className),Yc=["className","boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"],I1=pn(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],Yc,!0),B1={className:String,boundContainer:null,portalContainer:null,container:null,dragContainer:null,selectableTargets:Array,selectByClick:Boolean,selectFromInside:Boolean,continueSelect:Boolean,toggleContinueSelect:Array,toggleContinueSelectWithoutDeselect:Array,keyContainer:null,hitRate:Number,scrollOptions:Object,checkInput:Boolean,preventDefault:Boolean,cspNonce:String,ratio:Number,getElementRect:Function,preventDragFromInside:Boolean,rootContainer:Object,dragCondition:Function,clickBySelectEnd:Boolean,continueSelectWithoutDeselect:Boolean,preventClickEventOnDragStart:Boolean,preventClickEventOnDrag:Boolean,checkOverflow:Boolean,innerScrollOptions:Object},_1=null,z1=null,og=function(t){Fc(e,t);function e(r){r===void 0&&(r={});var a=t.call(this)||this;a.selectedTargets=[],a.dragScroll=new _s,a._onDragStart=function(o,l){var c=o.data,u=o.clientX,d=o.clientY,f=o.inputEvent,p=a.options,v=p.selectFromInside,h=p.selectByClick,m=p.rootContainer,g=p.boundContainer,E=p.preventDragFromInside,b=E===void 0?!0:E,C=p.clickBySelectEnd,D=p.dragCondition;if(D&&!D(o)){o.stop();return}c.data={};var x=Ne(a.container);c.innerWidth=x.innerWidth,c.innerHeight=x.innerHeight,a.findSelectableTargets(c),c.startSelectedTargets=a.selectedTargets,c.scaleMatrix=ti(),c.containerX=0,c.containerY=0;var S=a.container,k={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(m){var w=a.container.getBoundingClientRect();c.containerX=w.left,c.containerY=w.top,c.scaleMatrix=zf(a.container,m)}if(g){var T=Qt(g)&&"element"in g?Nt({left:!0,top:!0,bottom:!0,right:!0},g):{element:g,left:!0,top:!0,bottom:!0,right:!0},R=T.element,M=void 0;if(R){$t(R)?M=ce(S).querySelector(R):R===!0?M=a.container:M=R;var P=M.getBoundingClientRect();T.left&&(k.left=P.left),T.top&&(k.top=P.top),T.right&&(k.right=P.right),T.bottom&&(k.bottom=P.bottom)}}c.boundArea=k;var L={left:u,top:d,right:u,bottom:d,width:0,height:0},A=[];if(!v||h&&!C){var I=a._findElement(l||f.target,c.selectableTargets);A=I?[I]:[]}var _=A.length>0,B=!v&&_;if(B&&!h)return o.stop(),!1;var z=f.type,N=z==="mousedown"||z==="touchstart",G=!o.isClick&&N?a.emit("dragStart",Nt(Nt({},o),{data:c.data})):!0;if(!G)return o.stop(),!1;if(a.continueSelect?(A=Wc(a.selectedTargets,A,a.continueSelectWithoutDeselect),c.startPassedTargets=a.selectedTargets):c.startPassedTargets=[],a._select(A,L,o,!0,B&&h&&!C&&b),c.startX=u,c.startY=d,c.selectFlag=!1,c.preventDragFromInside=!1,f.target){var K=In(c.scaleMatrix,[u-c.containerX,d-c.containerY]);a.target.style.cssText+="position: ".concat(m?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(K[0],"px, ").concat(K[1],"px)")}if(B&&h&&!C)f.preventDefault(),b&&(a._selectEnd(c.startSelectedTargets,c.startPassedTargets,L,o,!0),c.preventDragFromInside=!0);else{c.selectFlag=!0;var H=a.options,$=H.scrollOptions,W=H.innerScrollOptions,X=!1;if(W){for(var q=o.inputEvent,tt=q.target,et=null,V=tt;V&&V!==ce(S).body;){var Z=getComputedStyle(V).overflow!=="visible";if(Z){et=V;break}V=V.parentElement}et&&(c.innerScrollOptions=Nt({container:et,checkScrollEvent:!0},W===!0?{}:W),a.dragScroll.dragStart(o,c.innerScrollOptions),X=!0)}!X&&$&&$.container&&a.dragScroll.dragStart(o,$),C&&(c.selectFlag=!1,o.preventDrag())}return!0},a._onDrag=function(o){if(o.data.selectFlag){var l=a.scrollOptions,c=o.data.innerScrollOptions,u=c||l?.container;if(u&&!o.isScroll&&a.dragScroll.drag(o,c||l))return}a._checkSelected(o)},a._onDragEnd=function(o){var l=o.data,c=o.inputEvent,u=Kc(o,a.options.ratio),d=l.selectFlag,f=a.container;if(c&&a.emit("dragEnd",Nt(Nt({isDouble:!!o.isDouble,isClick:!!o.isClick,isDrag:!1,isSelect:d},o),{data:l.data,rect:u})),a.target.style.cssText+="display: none;",d)l.selectFlag=!1,a.dragScroll.dragEnd();else if(a.selectByClick&&a.clickBySelectEnd){var p=a._findElement(c?.target||ag(f,o.clientX,o.clientY),l.selectableTargets);a._select(p?[p]:[],u,o)}l.preventDragFromInside||a._selectEnd(l.startSelectedTargets,l.startPassedTargets,u,o)},a._onKeyDown=function(o){var l=a.options,c=!1;if(!a._keydownContinueSelect){var u=a._sameCombiKey(o,l.toggleContinueSelect);a._keydownContinueSelect=u,c||(c=u)}if(!a._keydownContinueSelectWithoutDeselection){var u=a._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect);a._keydownContinueSelectWithoutDeselection=u,c||(c=u)}c&&a.emit("keydown",{keydownContinueSelect:a._keydownContinueSelect,keydownContinueSelectWithoutDeselection:a._keydownContinueSelectWithoutDeselection})},a._onKeyUp=function(o){var l=a.options,c=!1;if(a._keydownContinueSelect){var u=a._sameCombiKey(o,l.toggleContinueSelect,!0);a._keydownContinueSelect=!u,c||(c=u)}if(a._keydownContinueSelectWithoutDeselection){var u=a._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect,!0);a._keydownContinueSelectWithoutDeselection=!u,c||(c=u)}c&&a.emit("keyup",{keydownContinueSelect:a._keydownContinueSelect,keydownContinueSelectWithoutDeselection:a._keydownContinueSelectWithoutDeselection})},a._onBlur=function(){(a._keydownContinueSelect||a._keydownContinueSelectWithoutDeselection)&&(a._keydownContinueSelect=!1,a._keydownContinueSelectWithoutDeselection=!1,a.emit("keyup",{keydownContinueSelect:a._keydownContinueSelect,keydownContinueSelectWithoutDeselection:a._keydownContinueSelectWithoutDeselection}))},a._onDocumentSelectStart=function(o){var l=ce(a.container);if(a.gesto.isFlag()){var c=a.dragContainer;c===Ne(a.container)&&(c=l.documentElement);var u=ps(c)?[c]:[].slice.call(c),d=o.target;u.some(function(f){if(f===d||f.contains(d))return o.preventDefault(),!0})}},a.target=r.portalContainer;var i=r.container;a.options=Nt({className:"",portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:va,cspNonce:"",ratio:0},r);var s=a.options.portalContainer;return s&&(i=s.parentElement),a.container=i||document.body,a.initElement(),a.initDragScroll(),a.setKeyController(),a}var n=e.prototype;return n.setSelectedTargets=function(r){var a=this.selectedTargets,i=mr(a,r),s=i.added,o=i.removed,l=i.prevList,c=i.list;return this.selectedTargets=r,{added:s.map(function(u){return c[u]}),removed:o.map(function(u){return l[u]}),beforeSelected:a,selected:r}},n.setSelectedTargetsByPoints=function(r,a){var i=Math.min(r[0],a[0]),s=Math.min(r[1],a[1]),o=Math.max(r[0],a[0]),l=Math.max(r[1],a[1]),c={left:i,top:s,right:o,bottom:l,width:o-i,height:l-s},u={ignoreClick:!0};this.findSelectableTargets(u);var d=this.hitTest(c,u),f=this.setSelectedTargets(d);return Nt(Nt({},f),{rect:c})},n.selectTargetsByPoints=function(r,a){var i=new MouseEvent("mousedown",{clientX:r[0],clientY:r[1],cancelable:!0,bubbles:!0}),s=new MouseEvent("mousemove",{clientX:a[0],clientY:a[1],cancelable:!0,bubbles:!0}),o=new MouseEvent("mousemove",{clientX:a[0],clientY:a[1],cancelable:!0,bubbles:!0}),l=this.gesto,c=l.onDragStart(i);c!==!1&&(l.onDrag(s),l.onDragEnd(o))},n.getSelectedTargets=function(){return this.selectedTargets},n.triggerDragStart=function(r){return this.gesto.triggerDragStart(r),this},n.destroy=function(){var r;this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),_t(document,"selectstart",this._onDocumentSelectStart),this.options.portalContainer||(r=this.target.parentElement)===null||r===void 0||r.removeChild(this.target),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(r){var a=this.getElementRect||va,i=a(r),s=[i.pos1,i.pos2,i.pos4,i.pos3];if(a!==va){var o=r.getBoundingClientRect();return ri(s,o)}return s},n.getSelectableElements=function(){var r=this.container,a=[];return this.options.selectableTargets.forEach(function(i){if(Rn(i)){var s=i();s&&a.push.apply(a,[].slice.call(s))}else if(ps(i))a.push(i);else if(Qt(i))a.push(i.value||i.current);else{var o=[].slice.call(ce(r).querySelectorAll(i));a.push.apply(a,o)}}),a},n.checkScroll=function(){if(this.gesto.isFlag()){var r=this.scrollOptions,a=this.gesto.getEventData().innerScrollOptions,i=a||r?.container;i&&this.dragScroll.checkScroll(Nt({inputEvent:this.gesto.getCurrentEvent()},a||r))}},n.findSelectableTargets=function(r){var a=this;r===void 0&&(r=this.gesto.getEventData());var i=this.getSelectableElements(),s=i.map(function(d){return a.getElementPoints(d)});r.selectableTargets=i,r.selectablePoints=s,r.selectableParentMap=null;var o=this.options,l=o.checkOverflow||o.innerScrollOptions,c=ce(this.container);if(l){var u=new Map;r.selectableInnerScrollParentMap=u,r.selectableInnerScrollPathsList=i.map(function(d,f){for(var p=d.parentElement,v=[],h=[],m=function(){var g=u.get(p);if(!g){var E=getComputedStyle(p).overflow!=="visible";if(E){var b=va(p);g={parentElement:p,indexes:[],points:[b.pos1,b.pos2,b.pos4,b.pos3],paths:pn([],h,!0)},v.push(p),v.forEach(function(C){u.set(C,g)}),v=[]}}g?(p=g.parentElement,u.get(p).indexes.push(f),h.push(p)):v.push(p),p=p.parentElement};p&&p!==c.body;)m();return h})}return o.checkOverflow||(r.selectableInners=i.map(function(){return!0})),this._refreshGroups(r),i},n.clickTarget=function(r,a){var i=rg(r),s=i.clientX,o=i.clientY,l={data:{selectFlag:!1},clientX:s,clientY:o,inputEvent:r,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(l,a)&&this._onDragEnd(l),this},n.setKeyController=function(){var r=this.options,a=r.keyContainer,i=r.toggleContinueSelect,s=r.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(i||s)&&(this.keycon=new Jh(a||Ne(this.container)),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setClassName=function(r){this.options.className=r,this.target.setAttribute("class","".concat(Vc," ").concat(r||""))},n.setKeyEvent=function(){var r=this.options,a=r.toggleContinueSelect,i=r.toggleContinueSelectWithoutDeselect;!a&&!i||this.keycon||this.setKeyController()},n.setKeyContainer=function(r){var a=this,i=this.options;co(i.keyContainer,r,function(){i.keyContainer=r,a.setKeyController()})},n.getContinueSelect=function(){var r=this.options,a=r.continueSelect,i=r.toggleContinueSelect;return!i||!this._keydownContinueSelect?a:!a},n.getContinueSelectWithoutDeselect=function(){var r=this.options,a=r.continueSelectWithoutDeselect,i=r.toggleContinueSelectWithoutDeselect;return!i||!this._keydownContinueSelectWithoutDeselection?a:!a},n.setToggleContinueSelect=function(r){var a=this,i=this.options;co(i.toggleContinueSelect,r,function(){i.toggleContinueSelect=r,a.setKeyEvent()})},n.setToggleContinueSelectWithoutDeselect=function(r){var a=this,i=this.options;co(i.toggleContinueSelectWithoutDeselect,r,function(){i.toggleContinueSelectWithoutDeselect=r,a.setKeyEvent()})},n.setPreventDefault=function(r){this.gesto.options.preventDefault=r},n.setCheckInput=function(r){this.gesto.options.checkInput=r},n.initElement=function(){var r=this.options,a=r.dragContainer,i=r.checkInput,s=r.preventDefault,o=r.preventClickEventOnDragStart,l=r.preventClickEventOnDrag,c=r.preventClickEventByCondition,u=r.preventRightClick,d=u===void 0?!0:u,f=r.className,p=this.container;this.target=Gc(ig("div",{className:"".concat(Vc," ").concat(f||"")}),this.target,p);var v=this.target;this.dragContainer=typeof a=="string"?[].slice.call(ce(p).querySelectorAll(a)):a||this.target.parentNode,this.gesto=new Ks(this.dragContainer,{checkWindowBlur:!0,container:Ne(p),checkInput:i,preventDefault:s,preventClickEventOnDragStart:o,preventClickEventOnDrag:l,preventClickEventByCondition:c,preventRightClick:d}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),Ft(document,"selectstart",this._onDocumentSelectStart),this.injectResult=Hc.inject(v,{nonce:this.options.cspNonce})},n.hitTest=function(r,a,i){var s=this.options,o=s.hitRate,l=s.selectByClick,c=r.left,u=r.top,d=r.right,f=r.bottom,p=a.innerGroups,v=a.innerWidth,h=a.innerHeight,m=i?.clientX,g=i?.clientY,E=a.ignoreClick,b=[[c,u],[d,u],[d,f],[c,f]],C=function(_,B){var z=Ze(typeof o=="function"?"".concat(o(B)):"".concat(o)),N=E?!1:Bn([m,g],_);if(l&&N)return!0;var G=oi(b,_);if(!G.length)return!1;var K=qr(G),H=0;if(K===0&&qr(_)===0?(H=$c(_),K=$c(G)):H=qr(_),z.unit==="px")return K>=z.value;var $=Pn(Math.round(K/H*100),0,100);return $>=Math.min(100,z.value)},D=a.selectableTargets,x=a.selectablePoints,S=a.selectableInners;if(!p)return D.filter(function(_,B){return S[B]?C(x[B],D[B]):!1});for(var k=[],w=Math.floor(c/v),T=Math.floor(d/v),R=Math.floor(u/h),M=Math.floor(f/h),P=w;P<=T;++P){var L=p[P];if(L)for(var A=R;A<=M;++A){var I=L[A];I&&I.forEach(function(_){var B=x[_],z=S[_],N=D[_];z&&C(B,N)&&k.push(N)})}}return ng(k)},n.initDragScroll=function(){var r=this;this.dragScroll.on("scrollDrag",function(a){var i=a.next;i(r.gesto.getCurrentEvent())}).on("scroll",function(a){var i=a.container,s=a.direction,o=r.gesto.getEventData().innerScrollOptions;o?r.emit("innerScroll",{container:i,direction:s}):r.emit("scroll",{container:i,direction:s})}).on("move",function(a){var i=a.offsetX,s=a.offsetY,o=a.inputEvent,l=r.gesto;if(!(!l||!l.isFlag())){var c=r.gesto.getEventData(),u=c.boundArea;c.startX-=i,c.startY-=s;var d=r.gesto.getEventData().innerScrollOptions,f=d?.container,p=!1;if(f){var v=c.selectableInnerScrollParentMap,h=v.get(f);h&&(h.paths.forEach(function(m){var g=v.get(m);g.points.forEach(function(E){E[0]-=i,E[1]-=s})}),h.indexes.forEach(function(m){c.selectablePoints[m].forEach(function(g){g[0]-=i,g[1]-=s})}),p=!0)}p||c.selectablePoints.forEach(function(m){m.forEach(function(g){g[0]-=i,g[1]-=s})}),r._refreshGroups(c),u.left-=i,u.right-=i,u.top-=s,u.bottom-=s,r.gesto.scrollBy(i,s,o.inputEvent),r._checkSelected(r.gesto.getCurrentEvent())}})},n._select=function(r,a,i,s,o){o===void 0&&(o=!1);var l=i.inputEvent,c=i.data,u=this.setSelectedTargets(r),d=mr(c.startSelectedTargets,r),f=d.added,p=d.removed,v=d.prevList,h=d.list,m={startSelected:v,startAdded:f.map(function(g){return h[g]}),startRemoved:p.map(function(g){return v[g]})};s&&this.emit("selectStart",Nt(Nt(Nt({},u),m),{rect:a,inputEvent:l,data:c.data,isTrusted:i.isTrusted,isDragStartEnd:o})),(u.added.length||u.removed.length)&&this.emit("select",Nt(Nt(Nt({},u),m),{rect:a,inputEvent:l,data:c.data,isTrusted:i.isTrusted,isDragStartEnd:o}))},n._selectEnd=function(r,a,i,s,o){o===void 0&&(o=!1);var l=s.inputEvent,c=s.isDouble,u=s.data,d=l&&l.type,f=d==="mousedown"||d==="touchstart",p=mr(r,this.selectedTargets),v=p.added,h=p.removed,m=p.prevList,g=p.list,E=mr(a,this.selectedTargets),b=E.added,C=E.removed,D=E.prevList,x=E.list;this.emit("selectEnd",{startSelected:r,beforeSelected:a,selected:this.selectedTargets,added:v.map(function(S){return g[S]}),removed:h.map(function(S){return m[S]}),afterAdded:b.map(function(S){return x[S]}),afterRemoved:C.map(function(S){return D[S]}),isDragStart:f&&o,isDragStartEnd:f&&o,isClick:!!s.isClick,isDouble:!!c,rect:i,inputEvent:l,data:u.data,isTrusted:s.isTrusted})},n._checkSelected=function(r,a){a===void 0&&(a=Kc(r,this.options.ratio));var i=r.data,s=a.top,o=a.left,l=a.width,c=a.height,u=i.selectFlag,d=i.containerX,f=i.containerY,p=i.scaleMatrix,v=In(p,[o-d,s-f]),h=In(p,[l,c]),m=[];if(u){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(v[0],"px, ").concat(v[1],"px);")+"width:".concat(h[0],"px;height:").concat(h[1],"px;");var g=this.hitTest(a,i,r);m=Wc(i.startPassedTargets,g,this.continueSelect&&this.continueSelectWithoutDeselect)}var E=this.emit("drag",Nt(Nt({},r),{data:i.data,isSelect:u,rect:a}));if(E===!1){this.target.style.cssText+="display: none;",r.stop();return}u&&this._select(m,a,r)},n._sameCombiKey=function(r,a,i){if(!a)return!1;var s=Bc(r.inputEvent,r.key),o=[].concat(a),l=Mt(o[0])?o:[o];if(i){var c=r.key;return l.some(function(u){return u.some(function(d){return d===c})})}return l.some(function(u){return u.every(function(d){return s.indexOf(d)>-1})})},n._findElement=function(r,a){for(var i=r;i&&!(a.indexOf(i)>-1);)i=i.parentElement;return i},n._refreshGroups=function(r){var a,i=r.innerWidth,s=r.innerHeight,o=r.selectablePoints;if(this.options.checkOverflow){var l=(a=this.gesto.getEventData().innerScrollOptions)===null||a===void 0?void 0:a.container,c=r.selectableInnerScrollParentMap,u=r.selectableInnerScrollPathsList;r.selectableInners=u.map(function(p,v){var h=!1;return p.every(function(m){if(h)return!0;if(m===l)return h=!0,!0;var g=c.get(m);if(g){var E=o[v],b=g.points,C=oi(E,b);if(!C.length)return!1}return!0})})}if(!i||!s)r.innerGroups=null;else{var d=r.selectablePoints,f={};d.forEach(function(p,v){var h=1/0,m=-1/0,g=1/0,E=-1/0;p.forEach(function(D){var x=Math.floor(D[0]/i),S=Math.floor(D[1]/s);h=Math.min(x,h),m=Math.max(x,m),g=Math.min(S,g),E=Math.max(S,E)});for(var b=h;b<=m;++b)for(var C=g;C<=E;++C)f[b]=f[b]||{},f[b][C]=f[b][C]||[],f[b][C].push(v)}),r.innerGroups=f}},e=eg([Ta(Yc,function(r,a){var i={enumerable:!0,configurable:!0,get:function(){return this.options[a]}},s=Aa("get ".concat(a));r[s]?i.get=function(){return this[s]()}:i.get=function(){return this.options[a]};var o=Aa("set ".concat(a));r[o]?i.set=function(c){this[o](c)}:i.set=function(c){this.options[a]=c},Object.defineProperty(r,a,i)})],e),e}(Jr),sg=function(t){Fc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(og);const lg=sg;var vn=F(70393),hn=F(56501),Te=F(85001),cg=F(53790);const ug=({scene:t,panel:e})=>{const n=e.state.openInlineEdit,[r,a]=(0,y.useState)(!1),[i,s]=(0,y.useState)({x:0,y:0}),o=dg(),l=t.selecto?.getSelectedTargets(),c=e.context?.instanceState?.layer,u=(0,y.useCallback)(v=>{if(!(v instanceof MouseEvent))return;v.preventDefault(),e.setActivePanel(),v.currentTarget!==t.div&&(v.currentTarget instanceof HTMLElement||v.currentTarget instanceof SVGElement)&&t.select({targets:[v.currentTarget]}),s({x:v.pageX,y:v.pageY}),a(!0)},[t,e]);(0,y.useEffect)(()=>{t.selecto&&t.selecto.getSelectableElements().forEach(v=>{v.addEventListener("contextmenu",u)})},[u,t.selecto]),(0,y.useEffect)(()=>{t.div&&t.div.addEventListener("contextmenu",u)},[u,t.div]);const d=()=>{a(!1)},f=()=>{const v=!t.isPanelEditing&&y.createElement(Te.s,{label:n?"Close Editor":"Open Editor",onClick:()=>{t.inlineEditingCallback&&(n?e.closeInlineEdit():t.inlineEditingCallback()),d()},className:o.menuItem}),h=()=>{if(l?.length===1){const C=()=>{t.editModeEnabled.next(!0),d()},D=t.findElementByTarget(l[0]);return D&&D.item.hasEditMode&&y.createElement(Te.s,{label:"Edit",onClick:C,className:o.menuItem})}return null},m=Sn(t.shouldShowAdvancedTypes).options,g=()=>{const C=[],D=x=>{let S=i.y,k=i.x;if(t.div){const w=t.div.getBoundingClientRect();S=S-w.top,k=k-w.left}Ma(x,c,{...i,y:S,x:k})};return m.map(x=>{C.push(y.createElement(Te.s,{key:x.value,label:x.label??"Canvas item",onClick:()=>D(x)}))}),C},E=!t.isPanelEditing&&y.createElement(Te.s,{label:"Add item",className:o.menuItem,childItems:g(),customSubMenuContainerStyles:{maxHeight:"150px",overflowY:"auto"}}),b=!t.isPanelEditing&&y.createElement(Te.s,{label:"Set background",onClick:()=>{t.setBackgroundCallback&&t.setBackgroundCallback(i),d()},className:o.menuItem});return l&&l.length>=1?y.createElement(y.Fragment,null,h(),y.createElement(Te.s,{label:"Delete",onClick:()=>{p(Wt.Delete),d()},className:o.menuItem}),y.createElement(Te.s,{label:"Duplicate",onClick:()=>{p(Wt.Duplicate),d()},className:o.menuItem}),y.createElement(Te.s,{label:"Bring to front",onClick:()=>{p(Wt.MoveTop),d()},className:o.menuItem}),y.createElement(Te.s,{label:"Send to back",onClick:()=>{p(Wt.MoveBottom),d()},className:o.menuItem}),v):y.createElement(y.Fragment,null,v,b,E)},p=v=>{t.selection.pipe((0,Rc.P)()).subscribe(h=>{const m=h[0].parent;h.forEach(g=>{m.doAction(v,g)})}),setTimeout(()=>{t.addToSelection(),t.targetsToSelect.clear()})};return r?y.createElement("div",{onContextMenu:v=>{v.preventDefault(),d()}},y.createElement(cg.x,{x:i.x,y:i.y,onClose:d,renderMenuItems:f,focusOnOpen:!1})):y.createElement(y.Fragment,null)},dg=()=>({menuItem:(0,U.css)`
    max-width: 200px;
  `});var fg=F(41056),pg=F(17037),vg=F(41013),hg=F(80583);const gg=({scene:t})=>{const e=(0,Dt.wW)(mg),n=()=>{t?.tooltipCallback&&t.tooltip&&t.tooltipCallback(void 0)},r=(0,y.createRef)(),{overlayProps:a}=(0,pg.Ir)({onClose:n,isDismissable:!0},r),{dialogProps:i}=(0,fg.R)({},r),s=t.tooltip?.element;if(!s)return y.createElement(y.Fragment,null);const o=()=>s.data?.links&&s.data?.links.length>0&&y.createElement("div",null,y.createElement(Se.wc,null,s.data?.links?.map((l,c)=>y.createElement(Lr.Qj,{key:c,icon:"external-link-alt",target:l.target,href:l.href,onClick:l.onClick,fill:"text",style:{width:"100%"}},l.title))));return y.createElement(y.Fragment,null,t.tooltip?.element&&t.tooltip.anchorPoint&&y.createElement(vn.h_,null,y.createElement(vg.S,{position:{x:t.tooltip.anchorPoint.x,y:t.tooltip.anchorPoint.y},offset:{x:5,y:0},allowPointerEvents:t.tooltip.isOpen},y.createElement("section",{ref:r,...a,...i},t.tooltip.isOpen&&y.createElement(hg.P,{style:{zIndex:1},onClick:n}),y.createElement("div",{className:e.wrapper},o())))))},mg=t=>({wrapper:(0,U.css)`
    margin-top: 20px;
    background: ${t.colors.background.primary};
  `}),Xc="connectionControl",Zc="connection anchor",uo=8,or=3,yg=({setRef:t,handleMouseLeave:e})=>{const n=(0,y.useRef)(null),r=(0,Dt.wW)(Eg),a=2.5,i=5.5,s="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1cHgiIGhlaWdodD0iNXB4IiB2ZXJzaW9uPSIxLjEiPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2Utd2lkdGg9IjIiIHN0eWxlPSJzdHJva2Utb3BhY2l0eTowLjQiIHN0cm9rZT0iI2ZmZmZmZiIvPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2U9IiMyOWI2ZjIiLz48L3N2Zz4=",o=f=>{f.target instanceof HTMLImageElement&&n.current&&f.target.style&&(n.current.style.display="block",n.current.style.top=`calc(${f.target.style.top} - ${i}px + ${or}px)`,n.current.style.left=`calc(${f.target.style.left} - ${i}px + ${or}px)`)},l=()=>{n.current&&(n.current.style.display="none")},c=f=>{e(f)&&l()},u=[{x:-1,y:1},{x:-.5,y:1},{x:0,y:1},{x:.5,y:1},{x:1,y:1},{x:1,y:.5},{x:1,y:0},{x:1,y:-.5},{x:1,y:-1},{x:.5,y:-1},{x:0,y:-1},{x:-.5,y:-1},{x:-1,y:-1},{x:-1,y:-.5},{x:-1,y:0},{x:-1,y:.5}],d=(f=u)=>f.map(p=>{const v=`${p.x},${p.y}`,h={top:`calc(${-p.y*50+50}% - ${a}px - ${or}px)`,left:`calc(${p.x*50+50}% - ${a}px - ${or}px)`};return y.createElement("img",{id:v,key:v,alt:Zc,className:r.anchor,style:h,src:s,onMouseEnter:o})});return y.createElement("div",{className:r.root,ref:t},y.createElement("div",{className:r.mouseoutDiv,onMouseOut:c,onBlur:c}),y.createElement("div",{id:Xc,ref:n,className:r.highlightElement,onMouseLeave:l}),d())},Eg=t=>({root:(0,U.css)`
    position: absolute;
    display: none;
  `,mouseoutDiv:(0,U.css)`
    position: absolute;
    margin: -30px;
    width: calc(100% + 60px);
    height: calc(100% + 60px);
  `,anchor:(0,U.css)`
    padding: ${or}px;
    position: absolute;
    cursor: cursor;
    width: calc(5px + 2 * ${or}px);
    height: calc(5px + 2 * ${or}px);
    z-index: 100;
    pointer-events: auto !important;
  `,highlightElement:(0,U.css)`
    background-color: #00ff00;
    opacity: 0.3;
    position: absolute;
    cursor: cursor;
    position: absolute;
    pointer-events: auto;
    width: 16px;
    height: 16px;
    border-radius: ${t.shape.radius.circle};
    display: none;
    z-index: 110;
  `});var Uc=F(32688);let bg=0;const Cg=["input","textarea"],xg=({setSVGRef:t,setLineRef:e,scene:n})=>{const r=(0,Dt.wW)(Sg),a=Date.now()+"_"+bg++,i=(0,y.useMemo)(()=>`connectionLineId-${a}`,[a]),s=(0,y.useMemo)(()=>`editorHead-${a}`,[a]),o=He.config.theme2.colors.text.primary,l=2,[c,u]=(0,y.useState)(void 0),d=(0,y.useRef)(c);(0,y.useEffect)(()=>{d.current=c}),(0,y.useEffect)(()=>{n.panel.context.instanceState?.selectedConnection&&u(n.panel.context.instanceState?.selectedConnection)},[n.panel.context.instanceState?.selectedConnection]);const f=g=>{const E=g.target;if(E instanceof HTMLElement&&!(Cg.indexOf(E.nodeName.toLowerCase())>-1)){if(g.keyCode===8||g.keyCode===46)d.current&&d.current.source&&(d.current.source.options.connections=d.current.source.options.connections?.filter(b=>b!==d.current?.info),d.current.source.onChange(d.current.source.options),u(void 0),n.connections.select(void 0),n.connections.updateState(),n.save());else return;document.removeEventListener("keyup",f),n.selecto.rootContainer.removeEventListener("click",p)}},p=g=>{const E=g.target;!(E instanceof SVGLineElement&&E.id===i)&&(u(void 0),n.connections.select(void 0))},v=g=>{n.isEditingEnabled&&(u(g),n.connections.select(g),document.addEventListener("keyup",f),n.selecto.rootContainer.addEventListener("click",p))},h=g=>{if(g){const C=n.context.getPanelData()?.series[0]?.fields.find(D=>D.name=g)?.values;return C?C.length-1:0}return 0},m=()=>n.connections.state.map((g,E)=>{const{source:b,target:C,info:D}=g,x=b.div?.getBoundingClientRect(),S=b.div?.parentElement,k=S?.getBoundingClientRect();if(!x||!S||!k)return;const w=x.left-k.left+x.width/2,T=x.top-k.top+x.height/2,R=w+D.source.x*x.width/2,M=T-D.source.y*x.height/2;let P,L;if(D.targetName){const K=C.div?.getBoundingClientRect(),H=K.left-k.left+K.width/2,$=K.top-k.top+K.height/2;P=H+D.target.x*K.width/2,L=$-D.target.y*K.height/2}else{const K=k.width/2,H=k.height/2;P=K+D.target.x*k.width/2,L=H-D.target.y*k.height/2}const A=c===g&&n.panel.context.instanceState.selectedConnection,I=D.color?n.context.getColor(D.color).value():o,_=h(D.size?.field),B=D.size?n.context.getScale(D.size).get(_):l,z=n.isEditingEnabled?"grab":"",N={stroke:"#44aaff",strokeOpacity:.6,strokeWidth:B+5},G=`connectionHead-${a+Math.random()}`;return y.createElement("svg",{className:r.connection,key:E},y.createElement("g",{onClick:()=>v(g)},y.createElement("defs",null,y.createElement("marker",{id:G,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:I},y.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:I}))),y.createElement("line",{id:`${i}_transparent`,cursor:z,pointerEvents:"auto",stroke:"transparent",strokeWidth:15,style:A?N:{},x1:R,y1:M,x2:P,y2:L}),y.createElement("line",{id:i,stroke:I,pointerEvents:"auto",strokeWidth:B,markerEnd:`url(#${G})`,x1:R,y1:M,x2:P,y2:L,cursor:z})))});return y.createElement(y.Fragment,null,y.createElement("svg",{ref:t,className:r.editorSVG},y.createElement("defs",null,y.createElement("marker",{id:s,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:o},y.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:o}))),y.createElement("line",{ref:e,stroke:o,strokeWidth:2,markerEnd:`url(#${s})`})),m())},Sg=t=>({editorSVG:(0,U.css)`
    position: absolute;
    pointer-events: none;
    width: 100%;
    height: 100%;
    z-index: 1000;
    display: none;
  `,connection:(0,U.css)`
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 1000;
    pointer-events: none;
  `});class Dg{constructor(e){this.state=[],this.selection=new Tc.X(void 0),this.select=n=>{n!==this.selection.value&&this.selection.next(n)},this.updateState=()=>{const n=this.selection.value;if(this.state=Vo(this.scene.byName),n){for(let r of this.state)if(r.source===n.source&&r.index===n.index){this.selection.next(r);break}}},this.setConnectionAnchorRef=n=>{this.connectionAnchorDiv=n},this.setConnectionSVGRef=n=>{this.connectionSVG=n},this.setConnectionLineRef=n=>{this.connectionLine=n},this.findElementTarget=n=>{let r;if(n!==this.scene.div)return r=this.scene.findElementByTarget(n),!r&&n.parentElement&&(r=this.findElementTarget(n.parentElement)),r},this.handleMouseEnter=n=>{if(!(n.target instanceof Element)||!this.scene.isEditingEnabled)return;let r=this.findElementTarget(n.target);if(!r){console.log("no element");return}if(this.isDrawingConnection)this.connectionTarget=r;else if(this.connectionSource=r,!this.connectionSource){console.log("no connection source");return}const a=r.div.getBoundingClientRect(),i=this.scene.div?.getBoundingClientRect(),s=a.top-(i?.top??0),o=a.left-(i?.left??0);this.connectionAnchorDiv&&(this.connectionAnchorDiv.style.display="none",this.connectionAnchorDiv.style.display="block",this.connectionAnchorDiv.style.top=`${s}px`,this.connectionAnchorDiv.style.left=`${o}px`,this.connectionAnchorDiv.style.height=`${a.height}px`,this.connectionAnchorDiv.style.width=`${a.width}px`)},this.handleMouseLeave=n=>n.relatedTarget instanceof HTMLImageElement&&n.relatedTarget.getAttribute("alt")===Zc?!1:(this.connectionTarget=void 0,this.connectionAnchorDiv.style.display="none",!0),this.connectionListener=n=>{if(n.preventDefault(),!(this.connectionLine&&this.scene.div&&this.scene.div.parentElement))return;const r=this.scene.div.parentElement.getBoundingClientRect(),a=n.pageX-r.x,i=n.pageY-r.y;this.connectionLine.setAttribute("x2",`${a}`),this.connectionLine.setAttribute("y2",`${i}`);const s=this.connectionLine.x1.baseVal.value,o=this.connectionLine.y1.baseVal.value;if(this.didConnectionLeaveHighlight||Math.hypot(a-s,i-o)>uo&&this.connectionSVG&&(this.didConnectionLeaveHighlight=!0,this.connectionSVG.style.display="block",this.isDrawingConnection=!0),!n.buttons){if(this.connectionSource&&this.connectionSource.div&&this.connectionSource.div.parentElement){const l=this.connectionSource.div.getBoundingClientRect(),c=this.connectionSource.div.parentElement.getBoundingClientRect(),u=l.top-c.top+l.height/2,d=l.left-c.left+l.width/2,f=(s-d)/(l.width/2),p=(u-o)/(l.height/2);let v,h,m;if(this.connectionTarget&&this.connectionTarget.div){const b=this.connectionTarget.div.getBoundingClientRect(),C=b.top-c.top+b.height/2,D=b.left-c.left+b.width/2;v=(a-D)/(b.width/2),h=(C-i)/(b.height/2),m=this.connectionTarget.options.name}else{const b=c.height/2,C=c.width/2;v=(a-C)/(c.width/2),h=(b-i)/(c.height/2)}const g={source:{x:f,y:p},target:{x:v,y:h},targetName:m,color:{fixed:Uc.config.theme2.colors.text.primary},size:{fixed:2,min:1,max:10},path:Oo.Straight},{options:E}=this.connectionSource;E.connections||(E.connections=[]),this.didConnectionLeaveHighlight&&(this.connectionSource.options.connections=[...E.connections,g],this.connectionSource.onChange(this.connectionSource.options))}this.connectionSVG&&(this.connectionSVG.style.display="none"),this.scene.selecto&&this.scene.selecto.rootContainer&&(this.scene.selecto.rootContainer.style.cursor="default",this.scene.selecto.rootContainer.removeEventListener("mousemove",this.connectionListener)),this.isDrawingConnection=!1,this.updateState(),this.scene.save()}},this.handleConnectionDragStart=(n,r,a)=>{if(this.scene.selecto.rootContainer.style.cursor="crosshair",this.connectionSVG&&this.connectionLine&&this.scene.div&&this.scene.div.parentElement){const i=n.getBoundingClientRect(),s=this.scene.div.parentElement.getBoundingClientRect(),o=i.x-s.x+uo,l=i.y-s.y+uo,c=r-s.x,u=a-s.y;this.connectionLine.setAttribute("x1",`${o}`),this.connectionLine.setAttribute("y1",`${l}`),this.connectionLine.setAttribute("x2",`${c}`),this.connectionLine.setAttribute("y2",`${u}`),this.didConnectionLeaveHighlight=!1}this.scene.selecto?.rootContainer?.addEventListener("mousemove",this.connectionListener)},this.onChange=(n,r)=>{const a=n.source.options.connections?.splice(0)??[];a[n.index]=r,n.source.onChange({...n.source.options,connections:a}),this.updateState()},this.connectionsNeedUpdate=n=>hd(n)||Ho(n,this.scene.byName),this.scene=e,this.updateState()}render(){return y.createElement(y.Fragment,null,y.createElement(yg,{setRef:this.setConnectionAnchorRef,handleMouseLeave:this.handleMouseLeave}),y.createElement(xg,{setSVGRef:this.setConnectionSVGRef,setLineRef:this.setConnectionLineRef,scene:this.scene}))}}const wg=t=>({name:"settingsViewable",props:{},events:{},render(e,n){if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;const r=(o,l)=>{const c=e.getContainer(),u=new PointerEvent("contextmenu",{clientX:o,clientY:l});c.dispatchEvent(u)},a=o=>{r(o.clientX,o.clientY)},i=o=>{if(o.key==="Enter"){const l=o.currentTarget.getBoundingClientRect();r(l.x,l.y)}},s=e.getRect();return n.createElement("div",{key:"settings-viewable",className:"moveable-settings",style:{position:"absolute",left:`${s.width+18}px`,top:"0px",color:"white",fontSize:"18px",cursor:"pointer",userSelect:"none",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100},onClick:a,onKeyDown:i,role:"button",tabIndex:0},"","\u2699\uFE0F","")}}),Mg={name:"dimensionViewable",props:{},events:{},render(t,e){const n=t.getRect();return e.createElement("div",{key:"dimension-viewable",className:"moveable-dimension",style:{position:"absolute",left:`${n.width/2}px`,top:`${n.height+20}px`,background:"#4af",borderRadius:"2px",padding:"2px 4px",color:"white",fontSize:"13px",whiteSpace:"nowrap",fontWeight:"bold",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100}},Math.round(n.offsetWidth)," x ",Math.round(n.offsetHeight))}},kg=t=>({name:"constraintViewable",props:{},events:{},render(e,n){const r=e.getRect(),a=t.findElementByTarget(e.state.target);if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;let i=null,s=null;const o=a?.tempConstraint??a?.options.constraint??{},l="1px dashed #4af",c=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(45deg)"}}),u=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(-45deg)"}}),d=n.createElement("div",{},[c,u]),f=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,bottom:"0px",borderLeft:l,height:"100vh"}}),p=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height}px`,borderLeft:l,height:"100vh"}}),v=n.createElement("div",{},[f,p]),h=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/4}px`,borderLeft:l,height:`${r.height/2}px`}}),m=n.createElement("div",{},[h,d]);switch(o.vertical){case st.Top:i=f;break;case st.Bottom:i=p;break;case st.TopBottom:i=v;break;case st.Center:i=m;break}const g=n.createElement("div",{style:{position:"absolute",right:"0px",top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),E=n.createElement("div",{style:{position:"absolute",left:`${r.width}px`,top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),b=n.createElement("div",{},[g,E]),C=n.createElement("div",{style:{position:"absolute",left:`${r.width/4}px`,top:`${r.height/2}px`,borderTop:l,width:`${r.width/2}px`}}),D=n.createElement("div",{},[C,d]);switch(o.horizontal){case ot.Left:s=g;break;case ot.Right:s=E;break;case ot.LeftRight:s=b;break;case ot.Center:s=D;break}return n.createElement("div",{},[i,s])}});class Tg extends jt{constructor(e,n,r){super(e,n),this.options=e,this.scene=n,this.changeCallback=r,this.setRootRef=a=>{this.div=a},this.sizeStyle={height:"100%",width:"100%"}}isRoot(){return!0}onChange(e){this.revId++,this.options={...e},this.changeCallback()}getSaveModel(){const{placement:e,constraint:n,...r}=this.options;return{...r,elements:this.elements.map(a=>a.getSaveModel())}}render(){return y.createElement("div",{onContextMenu:e=>e.preventDefault(),key:this.UID,ref:this.setRootRef,style:{...this.sizeStyle,...this.dataStyle}},this.elements.map(e=>e.render()))}}class Rg{constructor(e,n,r,a,i){this.onSave=a,this.styles=Og(He.config.theme2),this.selection=new Qo.t(1),this.moved=new kc.x,this.byName=new Map,this.revId=0,this.width=0,this.height=0,this.style={},this.skipNextSelectionBroadcast=!1,this.ignoreDataUpdate=!1,this.isPanelEditing=qo.E1.getSearchObject().editPanel!==void 0,this.editModeEnabled=new Tc.X(!1),this.targetsToSelect=new Set,this.getNextElementName=(s=!1)=>{const o=s?"Frame":"Element";let l=this.byName.size+1;const c=l+100;for(;l<c;){const u=`${o} ${l++}`;if(!this.byName.has(u))return u}return`${o} ${Date.now()}`},this.canRename=s=>!this.byName.has(s),this.context={getColor:s=>(0,hn.FP)(this.data,s),getScale:s=>(0,hn.pb)(this.data,s),getScalar:s=>(0,hn.z2)(this.data,s),getText:s=>(0,hn.WO)(this.data,s),getResource:s=>(0,hn.Qz)(this.data,s),getPanelData:()=>this.data},this.generateFrameContainer=s=>{let o=1/0,l=1/0,c=0,u=0;return s.forEach(d=>{const f=d.div?.getBoundingClientRect();f&&(o>f.top&&(o=f.top),l>f.left&&(l=f.left),c<f.right&&(c=f.right),u<f.bottom&&(u=f.bottom))}),{top:o,left:l,width:c-l,height:u-o}},this.save=(s=!1)=>{this.onSave(this.root.getSaveModel()),s&&setTimeout(()=>{this.div&&this.initMoveable(!0,this.isEditingEnabled)})},this.findElementByTarget=s=>{const o=[...this.root.elements];for(;o.length>0;){const l=o.shift();if(l&&l.div&&l.div===s)return l;const c=l instanceof jt?l.elements:[];for(const u of c)o.unshift(u)}},this.setNonTargetPointerEvents=(s,o)=>{const l=[...this.root.elements];for(;l.length>0;){const c=l.shift();c&&c.div&&c.div!==s&&c.applyLayoutStylesToDiv(o);const u=c instanceof jt?c.elements:[];for(const d of u)l.unshift(d)}},this.setRef=s=>{this.div=s},this.select=s=>{this.selecto&&(this.selecto.setSelectedTargets(s.targets),this.updateSelection(s),this.editModeEnabled.next(!1),this.connections.connectionAnchorDiv&&(this.connections.connectionAnchorDiv.style.display="none"))},this.updateSelection=s=>{if(this.moveable.target=s.targets,this.skipNextSelectionBroadcast){this.skipNextSelectionBroadcast=!1;return}if(s.frame)this.selection.next([s.frame]);else{const o=s.targets.map(l=>this.findElementByTarget(l));this.selection.next(o)}},this.generateTargetElements=s=>{let o=[];const l=[...s];for(;l.length>0;){const c=l.shift();c&&c.div&&o.push(c.div);const u=c instanceof jt?c.elements:[];for(const d of u)l.unshift(d)}return o},this.initMoveable=(s=!1,o=!0)=>{const l=this.generateTargetElements(this.root.elements);s&&this.selecto&&this.selecto.destroy(),this.selecto=new lg({container:this.div,rootContainer:this.div,selectableTargets:l,toggleContinueSelect:"shift",selectFromInside:!1,hitRate:0}),this.moveable=new Wh(this.div,{draggable:o&&!this.editModeEnabled.getValue(),resizable:o,ables:[Mg,kg(this),wg(this)],props:{dimensionViewable:o,constraintViewable:o,settingsViewable:o},origin:!1,className:this.styles.selected}).on("click",u=>{const d=this.findElementByTarget(u.target);let f=!1;d&&(f=d.item.hasEditMode??!1),u.isDouble&&o&&!this.editModeEnabled.getValue()&&f&&this.editModeEnabled.next(!0)}).on("clickGroup",u=>{this.selecto.clickTarget(u.inputEvent,u.inputTarget)}).on("dragStart",u=>{this.ignoreDataUpdate=!0,this.setNonTargetPointerEvents(u.target,!0)}).on("dragGroupStart",u=>{this.ignoreDataUpdate=!0}).on("drag",u=>{const d=this.findElementByTarget(u.target);d&&(d.applyDrag(u),this.connections.connectionsNeedUpdate(d)&&this.moveableActionCallback&&this.moveableActionCallback(!0))}).on("dragGroup",u=>{let d=!1;for(let f of u.events){const p=this.findElementByTarget(f.target);p&&(p.applyDrag(f),d||(d=this.connections.connectionsNeedUpdate(p)))}d&&this.moveableActionCallback&&this.moveableActionCallback(!0)}).on("dragGroupEnd",u=>{u.events.forEach(d=>{const f=this.findElementByTarget(d.target);f&&f.setPlacementFromConstraint()}),this.moved.next(Date.now()),this.ignoreDataUpdate=!1}).on("dragEnd",u=>{const d=this.findElementByTarget(u.target);d&&d.setPlacementFromConstraint(),this.moved.next(Date.now()),this.ignoreDataUpdate=!1,this.setNonTargetPointerEvents(u.target,!1)}).on("resizeStart",u=>{const d=this.findElementByTarget(u.target);d&&(d.tempConstraint={...d.options.constraint},d.options.constraint={vertical:st.Top,horizontal:ot.Left},d.setPlacementFromConstraint())}).on("resize",u=>{const d=this.findElementByTarget(u.target);d&&(d.applyResize(u),this.connections.connectionsNeedUpdate(d)&&this.moveableActionCallback&&this.moveableActionCallback(!0)),this.moved.next(Date.now())}).on("resizeGroup",u=>{let d=!1;for(let f of u.events){const p=this.findElementByTarget(f.target);p&&(p.applyResize(f),d||(d=this.connections.connectionsNeedUpdate(p)))}d&&this.moveableActionCallback&&this.moveableActionCallback(!0),this.moved.next(Date.now())}).on("resizeEnd",u=>{const d=this.findElementByTarget(u.target);d&&(d.tempConstraint&&(d.options.constraint=d.tempConstraint,d.tempConstraint=void 0),d.setPlacementFromConstraint())});let c=[];this.selecto.on("dragStart",u=>{const d=u.inputEvent.target;if(d.id===Xc){this.connections.handleConnectionDragStart(d,u.inputEvent.clientX,u.inputEvent.clientY),u.stop();return}const f=this.moveable.isMoveableElement(d)||c.some(v=>v===d||v.contains(d)),p=this.selecto?.getSelectedTargets().includes(d.parentElement.parentElement);this.isEditingEnabled&&!this.editModeEnabled.getValue()&&f&&this.selecto?.getSelectedTargets().length&&(this.selecto.getSelectedTargets()[0].style.cursor="grabbing"),(f||p||!this.isEditingEnabled)&&u.stop()}).on("select",()=>{this.editModeEnabled.next(!1),this.connections.connectionAnchorDiv&&(this.connections.connectionAnchorDiv.style.display="none")}).on("selectEnd",u=>{c=u.selected,this.updateSelection({targets:c}),u.isDragStart&&(this.isEditingEnabled&&!this.editModeEnabled.getValue()&&this.selecto?.getSelectedTargets().length&&(this.selecto.getSelectedTargets()[0].style.cursor="grabbing"),u.inputEvent.preventDefault(),u.data.timer=setTimeout(()=>{this.moveable.dragStart(u.inputEvent)}))}).on("dragEnd",u=>{clearTimeout(u.data.timer)})},this.reorderElements=(s,o,l,c)=>{switch(l){case!0:switch(c){case-1:s.parent instanceof jt?o.parent&&(this.updateElements(s,o.parent,o.parent.elements.length),s.updateData(o.parent.scene.context)):o.parent?.reorderTree(s,o,!0);break;default:o.parent&&(this.updateElements(s,o.parent,o.parent.elements.indexOf(o)),s.updateData(o.parent.scene.context));break}break;case!1:o instanceof jt?s.parent===o?s.parent?.reorderTree(s,o,!0):(this.updateElements(s,o),s.updateData(o.scene.context)):s.parent===o.parent?s.parent?.reorderTree(s,o):o.parent&&(this.updateElements(s,o.parent),s.updateData(o.parent.scene.context));break}},this.updateElements=(s,o,l=null)=>{s.parent?.doAction(Wt.Delete,s),s.parent=o;const c=s.div?.getBoundingClientRect();s.setPlacementFromConstraint(c,o.div?.getBoundingClientRect());const u=l??o.elements.length-1;o.elements.splice(u,0,s),o.scene.save(),o.reinitializeMoveable()},this.addToSelection=()=>{try{let s={targets:[]};s.targets=[...this.targetsToSelect],this.select(s)}catch{Go.Z.emit(Br.SI.alertError,["Unable to add to selection"])}},this.root=this.load(e,n,r),this.subscription=this.editModeEnabled.subscribe(s=>{!this.moveable||!this.isEditingEnabled||(this.moveable.draggable=!s)}),this.panel=i,this.connections=new Dg(this)}load(e,n,r){return this.root=new Tg(e??{type:"frame",elements:[ka]},this,this.save),this.isEditingEnabled=n,this.shouldShowAdvancedTypes=r,setTimeout(()=>{if(this.div){const a=n;this.initMoveable(a,n),this.currentLayer=this.root,this.selection.next([]),this.connections.select(void 0),this.connections.updateState()}}),this.root}updateData(e){this.data=e,this.root.updateData(this.context)}updateSize(e,n){this.width=e,this.height=n,this.style={width:e,height:n},this.selecto?.getSelectedTargets().length&&this.clearCurrentSelection()}frameSelection(){this.selection.pipe((0,Rc.P)()).subscribe(e=>{const n=e[0].parent,r=new jt({type:"frame",name:this.getNextElementName(!0),elements:[]},this,e[0].parent),a=this.generateFrameContainer(e);r.options.placement=a,e.forEach(i=>{const s=i.div?.getBoundingClientRect();i.setPlacementFromConstraint(s,a),n.doAction(Wt.Delete,i),r.doAction(Wt.Duplicate,i,!1,!1)}),r.setPlacementFromConstraint(a,n.div?.getBoundingClientRect()),n.elements.push(r),this.byName.set(r.getName(),r),this.save()})}clearCurrentSelection(e=!1){this.skipNextSelectionBroadcast=e;let n=new MouseEvent("click");this.selecto?.clickTarget(n,this.div)}updateCurrentLayer(e){this.currentLayer=e,this.clearCurrentSelection(),this.save()}render(){const e=this.isPanelEditing||!this.isPanelEditing&&this.isEditingEnabled,n=(this.tooltip?.element?.data?.links?.length??0)>0,r=!this.isEditingEnabled&&n;return y.createElement("div",{key:this.revId,className:this.styles.wrap,style:this.style,ref:this.setRef},this.connections.render(),this.root.render(),e&&y.createElement(vn.h_,null,y.createElement(ug,{scene:this,panel:this.panel})),r&&y.createElement(vn.h_,null,y.createElement(gg,{scene:this})))}}const Og=(0,Sa.B)(t=>({wrap:(0,U.css)`
    overflow: hidden;
    position: relative;
  `,selected:(0,U.css)`
    z-index: 999 !important;
  `}));var jc=F(73431),Pg=F(44207);function Lg({onClose:t,scene:e,anchorPoint:n}){const r=e.root.options.background?.image?.fixed??"",[a,i]=(0,y.useState)(r),s=(0,Dt.l4)(),o=Ag(s,n),l=c=>{c&&(i(c),e.root&&(e.root.options.background={...e.root.options.background,image:{mode:Pr.Q8.Fixed,fixed:c}},e.revId++,e.save(),e.root.reinitializeMoveable()),e&&e.updateData(e.data)),t()};return y.createElement(vn.h_,{className:o.portalWrapper},y.createElement(Pg.Y,{onChange:l,value:a,mediaType:Da.MediaType.Image,folderName:Da.ResourceFolderName.IOT}))}const Ag=(t,e)=>({portalWrapper:(0,U.css)`
    width: 315px;
    height: 445px;
    transform: translate(${e.x}px, ${e.y-200}px);
  `});var Ng=F(28118),Ig=F.n(Ng),Bg=F(17751),Qc=F(23062),qc=F(8807),_g=F(8376),fo=F(2148),zg=F(2978),ha=F(82247);const Fg=[{value:te.Original,label:"Original"},{value:te.Contain,label:"Contain"},{value:te.Cover,label:"Cover"},{value:te.Fill,label:"Fill"},{value:te.Tile,label:"Tile"}],Gg=({value:t,onChange:e})=>{const n=t??te.Cover,r=(0,y.useCallback)(a=>{e(a)},[e]);return y.createElement(fr.Z,null,y.createElement(pr._,{grow:!0},y.createElement(Lo.S,{value:n,options:Fg,onChange:r,fullWidth:!0})))},Jc=(t,e)=>e!=="frame"&&e!==void 0?[t+` (${e})`]:[t],Tr={addBackground:(t,e)=>{const n=Jc("Background",e.options?.type);t.addCustomEditor({category:n,id:"background.color",path:"background.color",name:"Color",editor:It.Lm,settings:{},defaultValue:{fixed:""}}).addCustomEditor({category:n,id:"background.image",path:"background.image",name:"Image",editor:It.Lv,settings:{resourceType:"image"}}).addCustomEditor({category:n,id:"background.size",path:"background.size",name:"Image size",editor:Gg,settings:{resourceType:"image"}})},addBorder:(t,e)=>{const n=Jc("Border",e.options?.type);t.addSliderInput({category:n,path:"border.width",name:"Width",defaultValue:2,settings:{min:0,max:20}}),e.options?.border?.width&&t.addCustomEditor({category:n,id:"border.color",path:"border.color",name:"Color",editor:It.Lm,settings:{},defaultValue:{fixed:""}})},addColor:(t,e)=>{const n=["Color"];t.addCustomEditor({category:n,id:"color",path:"color",name:"Color",editor:It.Lm,settings:{},defaultValue:{fixed:""}})},addSize:(t,e)=>{const n=["Size"];t.addCustomEditor({category:n,id:"size",path:"size",name:"Size",editor:It.cL,settings:{min:1,max:10},defaultValue:{fixed:2,min:1,max:10}})}};var po=F(12190),Kg=F(30359);const Wg=({onVerticalConstraintChange:t,onHorizontalConstraintChange:e,currentConstraints:n})=>{const r=(0,Dt.wW)($g(n)),a=()=>{t(st.Top)},i=()=>{t(st.Bottom)},s=()=>{t(st.Center)},o=()=>{e(ot.Left)},l=()=>{e(ot.Right)},c=()=>{e(ot.Center)};return y.createElement("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"75.000000pt",height:"75.000000pt",viewBox:"0 0 228.000000 228.000000",preserveAspectRatio:"xMidYMid meet",style:{marginBottom:"4.8px"}},y.createElement("g",{transform:"translate(0.000000,228.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},y.createElement("path",{fill:"#e5e5e5",d:`M198 2028 l-28 -32 0 -912 0 -912 31 -31 31 -31 915 0 915 0 29 29
29 29 0 917 0 917 -27 29 -28 29 -920 0 -920 0 -27 -32z m1876 -17 c15 -16 16
-98 16 -927 0 -860 -1 -909 -18 -926 -17 -17 -66 -18 -927 -18 -862 0 -910 1
-927 18 -17 17 -18 65 -18 926 0 832 1 911 16 927 16 18 45 19 468 21 248 2
659 2 912 0 431 -2 462 -4 478 -21z`}),y.createElement("rect",{className:r.topConstraint,height:"228",width:"46",y:"1735",x:"1123"}),y.createElement("rect",{className:r.constraintHover,onClick:a,height:"350",width:"300",y:"1680",x:"995",fill:"transparent"}),y.createElement("rect",{className:r.bottomConstraint,height:"228",width:"46",y:"210",x:"1123"}),y.createElement("rect",{className:r.constraintHover,onClick:i,height:"350",width:"300",y:"135",x:"995",fill:"transparent"}),y.createElement("rect",{className:r.leftConstraint,height:"46",width:"228",y:"1060",x:"265"}),y.createElement("rect",{className:r.constraintHover,onClick:o,height:"300",width:"350",y:"925",x:"200",fill:"transparent"}),y.createElement("rect",{className:r.rightConstraint,height:"46",width:"228",y:"1060",x:"1795"}),y.createElement("rect",{className:r.constraintHover,onClick:l,height:"300",width:"350",y:"925",x:"1730",fill:"transparent"}),y.createElement("path",{className:r.box,d:`M568 1669 c-17 -9 -18 -48 -18 -584 0 -558 1 -575 19 -585 27 -14
1125 -14 1152 0 18 10 19 27 19 580 0 504 -2 570 -16 584 -14 14 -80 16 -577
16 -363 -1 -568 -4 -579 -11z m1119 -42 c4 -5 4 -1079 0 -1084 -5 -4 -1079 -4
-1084 0 -5 6 -4 1077 1 1085 4 7 1076 6 1083 -1z`}),y.createElement("rect",{className:r.verticalCenterConstraint,height:"456",width:"46",y:"855",x:"1123"}),y.createElement("rect",{className:r.constraintHover,onClick:s,height:"660",width:"300",y:"750",x:"995",fill:"transparent"}),y.createElement("rect",{className:r.horizontalCenterConstraint,height:"46",width:"456",y:"1060",x:"918"}),y.createElement("rect",{className:r.constraintHover,onClick:c,height:"300",width:"660",y:"925",x:"815",fill:"transparent"})))},$g=t=>e=>{const n="#daebf7",r="0.6",a="#0d99ff",i=e.isDark?"#ffffff":"#000000";return{constraintHover:(0,U.css)`
      &:hover {
        fill: ${n};
        fill-opacity: ${r};
      }
    `,topConstraint:(0,U.css)`
      ${t.vertical===st.Top||t.vertical===st.TopBottom?`width: 92pt; x: 1085; fill: ${a};`:`fill: ${i};`}
    `,bottomConstraint:(0,U.css)`
      ${t.vertical===st.Bottom||t.vertical===st.TopBottom?`width: 92pt; x: 1085; fill: ${a};`:`fill: ${i};`}
    `,leftConstraint:(0,U.css)`
      ${t.horizontal===ot.Left||t.horizontal===ot.LeftRight?`height: 92pt; y: 1014; fill: ${a};`:`fill: ${i};`}
    `,rightConstraint:(0,U.css)`
      ${t.horizontal===ot.Right||t.horizontal===ot.LeftRight?`height: 92pt; y: 1014; fill: ${a};`:`fill: ${i};`}
    `,horizontalCenterConstraint:(0,U.css)`
      ${t.horizontal===ot.Center?`height: 92pt; y: 1014; fill: ${a};`:`fill: ${i};`}
    `,verticalCenterConstraint:(0,U.css)`
      ${t.vertical===st.Center?`width: 92pt; x: 1085; fill: ${a};`:`fill: ${i};`}
    `,box:(0,U.css)`
      fill: ${i};
    `}},Hg=({onPositionChange:t,element:e,settings:n})=>{const r=(0,Dt.wW)(Vg),a=o=>{const l={vertical:st.Top,horizontal:ot.Left},c={...e.options.constraint};switch(e.options.constraint=l,e.setPlacementFromConstraint(),o){case ee.Top:t(0,"top");break;case ee.Bottom:t(s(e.options.placement?.height??0,"bottom"),"top");break;case ee.VerticalCenter:t(i(e.options.placement?.height??0,"v"),"top");break;case ee.Left:t(0,"left");break;case ee.Right:t(s(e.options.placement?.width??0,"right"),"left");break;case ee.HorizontalCenter:t(i(e.options.placement?.width??0,"h"),"left");break}e.options.constraint=c,e.setPlacementFromConstraint()},i=(o,l)=>((l==="h"?n.scene.width:n.scene.height)-o)/2,s=(o,l)=>(l==="right"?n.scene.width:n.scene.height)-o;return y.createElement("div",{className:r.buttonGroup},y.createElement(le.h,{name:"horizontal-align-left",onClick:()=>a(ee.Left),className:r.button,size:"lg",tooltip:"Align left"}),y.createElement(le.h,{name:"horizontal-align-center",onClick:()=>a(ee.HorizontalCenter),className:r.button,size:"lg",tooltip:"Align horizontal centers"}),y.createElement(le.h,{name:"horizontal-align-right",onClick:()=>a(ee.Right),className:r.button,size:"lg",tooltip:"Align right"}),y.createElement(le.h,{name:"vertical-align-top",onClick:()=>a(ee.Top),size:"lg",tooltip:"Align top"}),y.createElement(le.h,{name:"vertical-align-center",onClick:()=>a(ee.VerticalCenter),className:r.button,size:"lg",tooltip:"Align vertical centers"}),y.createElement(le.h,{name:"vertical-align-bottom",onClick:()=>a(ee.Bottom),className:r.button,size:"lg",tooltip:"Align bottom"}))},Vg=t=>({buttonGroup:(0,U.css)`
    display: flex;
    flex-wrap: wrap;
    padding: 12px 0 12px 0;
  `,button:(0,U.css)`
    margin-left: 5px;
    margin-right: 5px;
  `}),Yg=["top","left","bottom","right","width","height"],Xg=[{label:"Left",value:ot.Left},{label:"Right",value:ot.Right},{label:"Left & right",value:ot.LeftRight},{label:"Center",value:ot.Center},{label:"Scale",value:ot.Scale}],Zg=[{label:"Top",value:st.Top},{label:"Bottom",value:st.Bottom},{label:"Top & bottom",value:st.TopBottom},{label:"Center",value:st.Center},{label:"Scale",value:st.Scale}];function tu({item:t}){const e=t.settings;if((0,Cn.Z)(e?.scene?e.scene.moved:new kc.x),!e)return y.createElement("div",null,"Loading...");const n=e.element;if(!n)return y.createElement("div",null,"???");const{options:r}=n,{placement:a,constraint:i}=r,s=()=>{setTimeout(()=>{e.scene.select({targets:[n.div]})})},o=p=>{l(p.value)},l=p=>{n.options.constraint.horizontal=p,n.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),s()},c=p=>{u(p.value)},u=p=>{n.options.constraint.vertical=p,n.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),s()},d=(p,v)=>{n.options.placement[v]=p??n.options.placement[v],n.applyLayoutStylesToDiv(),e.scene.clearCurrentSelection(!0),s()},f=n.tempConstraint??i??{};return y.createElement("div",null,y.createElement(Hg,{onPositionChange:d,settings:e,element:n}),y.createElement("br",null),y.createElement(Nr.g,{label:"Constraints"},y.createElement(Se.Lh,null,y.createElement(Wg,{onVerticalConstraintChange:u,onHorizontalConstraintChange:l,currentConstraints:f}),y.createElement(Se.wc,null,y.createElement(Se.Lh,null,y.createElement(po.J,{name:"arrows-h"}),y.createElement(En.Ph,{options:Xg,onChange:o,value:f.horizontal})),y.createElement(Se.Lh,null,y.createElement(po.J,{name:"arrows-v"}),y.createElement(En.Ph,{options:Zg,onChange:c,value:f.vertical}))))),y.createElement("br",null),y.createElement(Nr.g,{label:"Position"},y.createElement(y.Fragment,null,Yg.map(p=>{const v=a[p];return v==null?null:y.createElement(fr.Z,{key:p},y.createElement(pr._,{label:p,labelWidth:8,grow:!0},y.createElement(Kg.Y,{value:v,onChange:h=>d(h,p)})))}))))}function eu(t){return{category:t.category,path:"--",values:e=>({getValue:n=>(0,ve.get)(t.element.options,n),onChange:(n,r)=>{let a=t.element.options;if(n==="type"&&r){const i=Gr.getIfExists(r);if(!i){console.warn("layer does not exist",r);return}a={...a,...i.getNewOptions(a),type:i.id}}else a=(0,ha.hs)(a,n,r);t.element.onChange(a),t.element.updateData(t.scene.context)}}),build:(e,n)=>{const{options:r}=t.element,a=r?.type?r.type:ka.type,i=Sn(t.scene.shouldShowAdvancedTypes,a).options,s=!t.scene.shouldShowAdvancedTypes&&!wn.filter(p=>p.id===r?.type).length;e.addSelect({path:"type",name:void 0,settings:{options:i},description:s?"Selected element type is not supported by current settings. Please enable advanced element types.":""});const o=Gr.getIfExists(r?.type??ka.type);let l=r;l||(l={...o.getNewOptions(r),type:o.id,name:`Element ${Date.now()}.${Math.floor(Math.random()*100)}`});const c={...n,options:l};o?.registerOptionsUI&&o.registerOptionsUI(e,c),(t.element.item.standardEditorConfig?.layout??!0)&&e.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Quick placement",editor:tu,settings:t}),(t.element.item.standardEditorConfig?.background??!0)&&Tr.addBackground(e,c),(t.element.item.standardEditorConfig?.border??!0)&&Tr.addBorder(e,c)}}}var ru=F(93986),Ee=F(19349),Rt=F(48427),nu=F(21337),oe=F(84667),vo=F(53497),au=F(29350),iu=F(20918),We=F(2857),ou=F(5197),su=F(58261),Rr=F(95184),gn=F(31848),lu=F(45409),Ug=F(77814),be=F.n(Ug),ho=y.createContext(null),go=F(42965),jg=function(e){for(var n=e.prefixCls,r=e.level,a=e.isStart,i=e.isEnd,s="".concat(n,"-indent-unit"),o=[],l=0;l<r;l+=1){var c;o.push(y.createElement("span",{key:l,className:be()(s,(c={},(0,Rt.Z)(c,"".concat(s,"-start"),a[l]),(0,Rt.Z)(c,"".concat(s,"-end"),i[l]),c))}))}return y.createElement("span",{"aria-hidden":"true",className:"".concat(n,"-indent")},o)};const Qg=y.memo(jg);var vt=F(65144),qg=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],cu="open",uu="close",Jg="---",t0=function(t){(0,ou.Z)(n,t);var e=(0,su.Z)(n);function n(){var r;(0,au.Z)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i)),r.state={dragNodeHighlight:!1},r.selectHandle=void 0,r.cacheIndent=void 0,r.onSelectorClick=function(o){var l=r.props.context.onNodeClick;l(o,(0,vt.F)(r.props)),r.isSelectable()?r.onSelect(o):r.onCheck(o)},r.onSelectorDoubleClick=function(o){var l=r.props.context.onNodeDoubleClick;l(o,(0,vt.F)(r.props))},r.onSelect=function(o){if(!r.isDisabled()){var l=r.props.context.onNodeSelect;o.preventDefault(),l(o,(0,vt.F)(r.props))}},r.onCheck=function(o){if(!r.isDisabled()){var l=r.props,c=l.disableCheckbox,u=l.checked,d=r.props.context.onNodeCheck;if(!(!r.isCheckable()||c)){o.preventDefault();var f=!u;d(o,(0,vt.F)(r.props),f)}}},r.onMouseEnter=function(o){var l=r.props.context.onNodeMouseEnter;l(o,(0,vt.F)(r.props))},r.onMouseLeave=function(o){var l=r.props.context.onNodeMouseLeave;l(o,(0,vt.F)(r.props))},r.onContextMenu=function(o){var l=r.props.context.onNodeContextMenu;l(o,(0,vt.F)(r.props))},r.onDragStart=function(o){var l=r.props.context.onNodeDragStart;o.stopPropagation(),r.setState({dragNodeHighlight:!0}),l(o,(0,We.Z)(r));try{o.dataTransfer.setData("text/plain","")}catch{}},r.onDragEnter=function(o){var l=r.props.context.onNodeDragEnter;o.preventDefault(),o.stopPropagation(),l(o,(0,We.Z)(r))},r.onDragOver=function(o){var l=r.props.context.onNodeDragOver;o.preventDefault(),o.stopPropagation(),l(o,(0,We.Z)(r))},r.onDragLeave=function(o){var l=r.props.context.onNodeDragLeave;o.stopPropagation(),l(o,(0,We.Z)(r))},r.onDragEnd=function(o){var l=r.props.context.onNodeDragEnd;o.stopPropagation(),r.setState({dragNodeHighlight:!1}),l(o,(0,We.Z)(r))},r.onDrop=function(o){var l=r.props.context.onNodeDrop;o.preventDefault(),o.stopPropagation(),r.setState({dragNodeHighlight:!1}),l(o,(0,We.Z)(r))},r.onExpand=function(o){var l=r.props,c=l.loading,u=l.context.onNodeExpand;c||u(o,(0,vt.F)(r.props))},r.setSelectHandle=function(o){r.selectHandle=o},r.getNodeState=function(){var o=r.props.expanded;return r.isLeaf()?null:o?cu:uu},r.hasChildren=function(){var o=r.props.eventKey,l=r.props.context.keyEntities,c=l[o]||{},u=c.children;return!!(u||[]).length},r.isLeaf=function(){var o=r.props,l=o.isLeaf,c=o.loaded,u=r.props.context.loadData,d=r.hasChildren();return l===!1?!1:l||!u&&!d||u&&c&&!d},r.isDisabled=function(){var o=r.props.disabled,l=r.props.context.disabled;return!!(l||o)},r.isCheckable=function(){var o=r.props.checkable,l=r.props.context.checkable;return!l||o===!1?!1:l},r.syncLoadData=function(o){var l=o.expanded,c=o.loading,u=o.loaded,d=r.props.context,f=d.loadData,p=d.onNodeLoad;c||f&&l&&!r.isLeaf()&&!r.hasChildren()&&!u&&p((0,vt.F)(r.props))},r.isDraggable=function(){var o=r.props,l=o.data,c=o.context.draggable;return!!(c&&(!c.nodeDraggable||c.nodeDraggable(l)))},r.renderDragHandler=function(){var o=r.props.context,l=o.draggable,c=o.prefixCls;return l?.icon?y.createElement("span",{className:"".concat(c,"-draggable-icon")},l.icon):null},r.renderSwitcherIconDom=function(o){var l=r.props.switcherIcon,c=r.props.context.switcherIcon,u=l||c;return typeof u=="function"?u((0,oe.Z)((0,oe.Z)({},r.props),{},{isLeaf:o})):u},r.renderSwitcher=function(){var o=r.props.expanded,l=r.props.context.prefixCls;if(r.isLeaf()){var c=r.renderSwitcherIconDom(!0);return c!==!1?y.createElement("span",{className:be()("".concat(l,"-switcher"),"".concat(l,"-switcher-noop"))},c):null}var u=be()("".concat(l,"-switcher"),"".concat(l,"-switcher_").concat(o?cu:uu)),d=r.renderSwitcherIconDom(!1);return d!==!1?y.createElement("span",{onClick:r.onExpand,className:u},d):null},r.renderCheckbox=function(){var o=r.props,l=o.checked,c=o.halfChecked,u=o.disableCheckbox,d=r.props.context.prefixCls,f=r.isDisabled(),p=r.isCheckable();if(!p)return null;var v=typeof p!="boolean"?p:null;return y.createElement("span",{className:be()("".concat(d,"-checkbox"),l&&"".concat(d,"-checkbox-checked"),!l&&c&&"".concat(d,"-checkbox-indeterminate"),(f||u)&&"".concat(d,"-checkbox-disabled")),onClick:r.onCheck},v)},r.renderIcon=function(){var o=r.props.loading,l=r.props.context.prefixCls;return y.createElement("span",{className:be()("".concat(l,"-iconEle"),"".concat(l,"-icon__").concat(r.getNodeState()||"docu"),o&&"".concat(l,"-icon_loading"))})},r.renderSelector=function(){var o=r.state.dragNodeHighlight,l=r.props,c=l.title,u=c===void 0?Jg:c,d=l.selected,f=l.icon,p=l.loading,v=l.data,h=r.props.context,m=h.prefixCls,g=h.showIcon,E=h.icon,b=h.loadData,C=h.titleRender,D=r.isDisabled(),x="".concat(m,"-node-content-wrapper"),S;if(g){var k=f||E;S=k?y.createElement("span",{className:be()("".concat(m,"-iconEle"),"".concat(m,"-icon__customize"))},typeof k=="function"?k(r.props):k):r.renderIcon()}else b&&p&&(S=r.renderIcon());var w;typeof u=="function"?w=u(v):C?w=C(v):w=u;var T=y.createElement("span",{className:"".concat(m,"-title")},w);return y.createElement("span",{ref:r.setSelectHandle,title:typeof u=="string"?u:"",className:be()("".concat(x),"".concat(x,"-").concat(r.getNodeState()||"normal"),!D&&(d||o)&&"".concat(m,"-node-selected")),onMouseEnter:r.onMouseEnter,onMouseLeave:r.onMouseLeave,onContextMenu:r.onContextMenu,onClick:r.onSelectorClick,onDoubleClick:r.onSelectorDoubleClick},S,T,r.renderDropIndicator())},r.renderDropIndicator=function(){var o=r.props,l=o.disabled,c=o.eventKey,u=r.props.context,d=u.draggable,f=u.dropLevelOffset,p=u.dropPosition,v=u.prefixCls,h=u.indent,m=u.dropIndicatorRender,g=u.dragOverNodeKey,E=u.direction,b=!!d,C=!l&&b&&g===c,D=h??r.cacheIndent;return r.cacheIndent=h,C?m({dropPosition:p,dropLevelOffset:f,indent:D,prefixCls:v,direction:E}):null},r}return(0,iu.Z)(n,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var a=this.props.selectable,i=this.props.context.selectable;return typeof a=="boolean"?a:i}},{key:"render",value:function(){var a,i=this.props,s=i.eventKey,o=i.className,l=i.style,c=i.dragOver,u=i.dragOverGapTop,d=i.dragOverGapBottom,f=i.isLeaf,p=i.isStart,v=i.isEnd,h=i.expanded,m=i.selected,g=i.checked,E=i.halfChecked,b=i.loading,C=i.domRef,D=i.active,x=i.data,S=i.onMouseMove,k=i.selectable,w=(0,go.Z)(i,qg),T=this.props.context,R=T.prefixCls,M=T.filterTreeNode,P=T.keyEntities,L=T.dropContainerKey,A=T.dropTargetKey,I=T.draggingNodeKey,_=this.isDisabled(),B=(0,lu.Z)(w,{aria:!0,data:!0}),z=P[s]||{},N=z.level,G=v[v.length-1],K=this.isDraggable(),H=!_&&K,$=I===s,W=k!==void 0?{"aria-selected":!!k}:void 0;return y.createElement("div",(0,Ee.Z)({ref:C,className:be()(o,"".concat(R,"-treenode"),(a={},(0,Rt.Z)(a,"".concat(R,"-treenode-disabled"),_),(0,Rt.Z)(a,"".concat(R,"-treenode-switcher-").concat(h?"open":"close"),!f),(0,Rt.Z)(a,"".concat(R,"-treenode-checkbox-checked"),g),(0,Rt.Z)(a,"".concat(R,"-treenode-checkbox-indeterminate"),E),(0,Rt.Z)(a,"".concat(R,"-treenode-selected"),m),(0,Rt.Z)(a,"".concat(R,"-treenode-loading"),b),(0,Rt.Z)(a,"".concat(R,"-treenode-active"),D),(0,Rt.Z)(a,"".concat(R,"-treenode-leaf-last"),G),(0,Rt.Z)(a,"".concat(R,"-treenode-draggable"),K),(0,Rt.Z)(a,"dragging",$),(0,Rt.Z)(a,"drop-target",A===s),(0,Rt.Z)(a,"drop-container",L===s),(0,Rt.Z)(a,"drag-over",!_&&c),(0,Rt.Z)(a,"drag-over-gap-top",!_&&u),(0,Rt.Z)(a,"drag-over-gap-bottom",!_&&d),(0,Rt.Z)(a,"filter-node",M&&M((0,vt.F)(this.props))),a)),style:l,draggable:H,"aria-grabbed":$,onDragStart:H?this.onDragStart:void 0,onDragEnter:K?this.onDragEnter:void 0,onDragOver:K?this.onDragOver:void 0,onDragLeave:K?this.onDragLeave:void 0,onDrop:K?this.onDrop:void 0,onDragEnd:K?this.onDragEnd:void 0,onMouseMove:S},W,B),y.createElement(Qg,{prefixCls:R,level:N,isStart:p,isEnd:v}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),n}(y.Component),mo=function(e){return y.createElement(ho.Consumer,null,function(n){return y.createElement(t0,(0,Ee.Z)({},e,{context:n}))})};mo.displayName="TreeNode",mo.isTreeNode=1;const yo=mo;var e0=null;function Re(t,e){if(!t)return[];var n=t.slice(),r=n.indexOf(e);return r>=0&&n.splice(r,1),n}function $e(t,e){var n=(t||[]).slice();return n.indexOf(e)===-1&&n.push(e),n}function Eo(t){return t.split("-")}function r0(t,e){var n=[],r=e[t];function a(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];i.forEach(function(s){var o=s.key,l=s.children;n.push(o),a(l)})}return a(r.children),n}function n0(t){if(t.parent){var e=Eo(t.pos);return Number(e[e.length-1])===t.parent.children.length-1}return!1}function a0(t){var e=Eo(t.pos);return Number(e[e.length-1])===0}function du(t,e,n,r,a,i,s,o,l,c){var u,d=t.clientX,f=t.clientY,p=t.target.getBoundingClientRect(),v=p.top,h=p.height,m=(c==="rtl"?-1:1)*((a?.x||0)-d),g=(m-12)/r,E=o[n.props.eventKey];if(f<v+h/2){var b=s.findIndex(function(A){return A.key===E.key}),C=b<=0?0:b-1,D=s[C].key;E=o[D]}var x=E.key,S=E,k=E.key,w=0,T=0;if(!l.includes(x))for(var R=0;R<g&&n0(E);R+=1)E=E.parent,T+=1;var M=e.props.data,P=E.node,L=!0;return a0(E)&&E.level===0&&f<v+h/2&&i({dragNode:M,dropNode:P,dropPosition:-1})&&E.key===n.props.eventKey?w=-1:(S.children||[]).length&&l.includes(k)?i({dragNode:M,dropNode:P,dropPosition:0})?w=0:L=!1:T===0?g>-1.5?i({dragNode:M,dropNode:P,dropPosition:1})?w=1:L=!1:i({dragNode:M,dropNode:P,dropPosition:0})?w=0:i({dragNode:M,dropNode:P,dropPosition:1})?w=1:L=!1:i({dragNode:M,dropNode:P,dropPosition:1})?w=1:L=!1,{dropPosition:w,dropLevelOffset:T,dropTargetKey:E.key,dropTargetPos:E.pos,dragOverNodeKey:k,dropContainerKey:w===0?null:((u=E.parent)===null||u===void 0?void 0:u.key)||null,dropAllowed:L}}function fu(t,e){if(t){var n=e.multiple;return n?t.slice():t.length?[t[0]]:t}}var i0=function(e){return e};function o0(t,e){if(!t)return[];var n=e||{},r=n.processProps,a=r===void 0?i0:r,i=Array.isArray(t)?t:[t];return i.map(function(s){var o=s.children,l=_objectWithoutProperties(s,e0),c=o0(o,e);return React.createElement(TreeNode,_extends({key:l.key},a(l)),c)})}function bo(t){if(!t)return null;var e;if(Array.isArray(t))e={checkedKeys:t,halfCheckedKeys:void 0};else if((0,nu.Z)(t)==="object")e={checkedKeys:t.checked||void 0,halfCheckedKeys:t.halfChecked||void 0};else return(0,gn.ZP)(!1,"`checkedKeys` is not an array or an object"),null;return e}function pu(t,e){var n=new Set;function r(a){if(!n.has(a)){var i=e[a];if(i){n.add(a);var s=i.parent,o=i.node;o.disabled||s&&r(s.key)}}}return(t||[]).forEach(function(a){r(a)}),(0,vo.Z)(n)}function vu(t){if(t==null)throw new TypeError("Cannot destructure "+t)}var sr=F(23376),hu=F(22335),s0=F(98231),l0=F(61343);function c0(t,e){var n=y.useState(!1),r=(0,sr.Z)(n,2),a=r[0],i=r[1];y.useLayoutEffect(function(){if(a)return t(),function(){e()}},[a]),y.useLayoutEffect(function(){return i(!0),function(){i(!1)}},[])}var u0=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],gu=function(e,n){var r=e.className,a=e.style,i=e.motion,s=e.motionNodes,o=e.motionType,l=e.onMotionStart,c=e.onMotionEnd,u=e.active,d=e.treeNodeRequiredProps,f=(0,go.Z)(e,u0),p=y.useState(!0),v=(0,sr.Z)(p,2),h=v[0],m=v[1],g=y.useContext(ho),E=g.prefixCls,b=s&&o!=="hide";(0,hu.Z)(function(){s&&b!==h&&m(b)},[s]);var C=function(){s&&l()},D=y.useRef(!1),x=function(){s&&!D.current&&(D.current=!0,c())};c0(C,x);var S=function(w){b===w&&x()};return s?y.createElement(l0.Z,(0,Ee.Z)({ref:n,visible:h},i,{motionAppear:o==="show",onVisibleChanged:S}),function(k,w){var T=k.className,R=k.style;return y.createElement("div",{ref:w,className:be()("".concat(E,"-treenode-motion"),T),style:R},s.map(function(M){var P=(0,Ee.Z)({},(vu(M.data),M.data)),L=M.title,A=M.key,I=M.isStart,_=M.isEnd;delete P.children;var B=(0,vt.H8)(A,d);return y.createElement(yo,(0,Ee.Z)({},P,B,{title:L,active:u,data:M.data,key:A,isStart:I,isEnd:_}))}))}):y.createElement(yo,(0,Ee.Z)({domRef:n,className:r,style:a},f,{active:u}))};gu.displayName="MotionTreeNode";var d0=y.forwardRef(gu);const f0=d0;function p0(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=t.length,r=e.length;if(Math.abs(n-r)!==1)return{add:!1,key:null};function a(i,s){var o=new Map;i.forEach(function(c){o.set(c,!0)});var l=s.filter(function(c){return!o.has(c)});return l.length===1?l[0]:null}return n<r?{add:!0,key:a(t,e)}:{add:!1,key:a(e,t)}}function mu(t,e,n){var r=t.findIndex(function(o){return o.key===n}),a=t[r+1],i=e.findIndex(function(o){return o.key===n});if(a){var s=e.findIndex(function(o){return o.key===a.key});return e.slice(i+1,s)}return e.slice(i+1)}var v0=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],yu={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},h0=function(){},lr="RC_TREE_MOTION_".concat(Math.random()),Co={key:lr},Eu={key:lr,level:0,index:0,pos:"0",node:Co,nodes:[Co]},bu={parent:null,children:[],pos:Eu.pos,data:Co,title:null,key:lr,isStart:[],isEnd:[]};function Cu(t,e,n,r){return e===!1||!n?t:t.slice(0,Math.ceil(n/r)+1)}function xu(t){var e=t.key,n=t.pos;return(0,vt.km)(e,n)}function g0(t){for(var e=String(t.data.key),n=t;n.parent;)n=n.parent,e="".concat(n.data.key," > ").concat(e);return e}var Su=y.forwardRef(function(t,e){var n=t.prefixCls,r=t.data,a=t.selectable,i=t.checkable,s=t.expandedKeys,o=t.selectedKeys,l=t.checkedKeys,c=t.loadedKeys,u=t.loadingKeys,d=t.halfCheckedKeys,f=t.keyEntities,p=t.disabled,v=t.dragging,h=t.dragOverNodeKey,m=t.dropPosition,g=t.motion,E=t.height,b=t.itemHeight,C=t.virtual,D=t.focusable,x=t.activeItem,S=t.focused,k=t.tabIndex,w=t.onKeyDown,T=t.onFocus,R=t.onBlur,M=t.onActiveChange,P=t.onListChangeStart,L=t.onListChangeEnd,A=(0,go.Z)(t,v0),I=y.useRef(null),_=y.useRef(null);y.useImperativeHandle(e,function(){return{scrollTo:function(Et){I.current.scrollTo(Et)},getIndentWidth:function(){return _.current.offsetWidth}}});var B=y.useState(s),z=(0,sr.Z)(B,2),N=z[0],G=z[1],K=y.useState(r),H=(0,sr.Z)(K,2),$=H[0],W=H[1],X=y.useState(r),q=(0,sr.Z)(X,2),tt=q[0],et=q[1],V=y.useState([]),Z=(0,sr.Z)(V,2),ut=Z[0],at=Z[1],Pt=y.useState(null),pt=(0,sr.Z)(Pt,2),dt=pt[0],mt=pt[1],it=y.useRef(r);it.current=r;function lt(){var gt=it.current;W(gt),et(gt),at([]),mt(null),L()}(0,hu.Z)(function(){G(s);var gt=p0(N,s);if(gt.key!==null)if(gt.add){var Et=$.findIndex(function(dr){var xe=dr.key;return xe===gt.key}),St=Cu(mu($,r,gt.key),C,E,b),Zt=$.slice();Zt.splice(Et+1,0,bu),et(Zt),at(St),mt("show")}else{var Jt=r.findIndex(function(dr){var xe=dr.key;return xe===gt.key}),Ce=Cu(mu(r,$,gt.key),C,E,b),ur=r.slice();ur.splice(Jt+1,0,bu),et(ur),at(Ce),mt("hide")}else $!==r&&(W(r),et(r))},[s,r]),y.useEffect(function(){v||lt()},[v]);var ft=g?tt:r,Kt={expandedKeys:s,selectedKeys:o,loadedKeys:c,loadingKeys:u,checkedKeys:l,halfCheckedKeys:d,dragOverNodeKey:h,dropPosition:m,keyEntities:f};return y.createElement(y.Fragment,null,S&&x&&y.createElement("span",{style:yu,"aria-live":"assertive"},g0(x)),y.createElement("div",null,y.createElement("input",{style:yu,disabled:D===!1||p,tabIndex:D!==!1?k:null,onKeyDown:w,onFocus:T,onBlur:R,value:"",onChange:h0,"aria-label":"for screen reader"})),y.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},y.createElement("div",{className:"".concat(n,"-indent")},y.createElement("div",{ref:_,className:"".concat(n,"-indent-unit")}))),y.createElement(s0.Z,(0,Ee.Z)({},A,{data:ft,itemKey:xu,height:E,fullHeight:!1,virtual:C,itemHeight:b,prefixCls:"".concat(n,"-list"),ref:I,onVisibleChange:function(Et,St){var Zt=new Set(Et),Jt=St.filter(function(Ce){return!Zt.has(Ce)});Jt.some(function(Ce){return xu(Ce)===lr})&&lt()}}),function(gt){var Et=gt.pos,St=(0,Ee.Z)({},(vu(gt.data),gt.data)),Zt=gt.title,Jt=gt.key,Ce=gt.isStart,ur=gt.isEnd,dr=(0,vt.km)(Jt,Et);delete St.key,delete St.children;var xe=(0,vt.H8)(dr,Kt);return y.createElement(f0,(0,Ee.Z)({},St,xe,{title:Zt,active:!!x&&Jt===x.key,pos:Et,data:gt.data,isStart:Ce,isEnd:ur,motion:g,motionNodes:Jt===lr?ut:null,motionType:dt,onMotionStart:P,onMotionEnd:lt,treeNodeRequiredProps:Kt,onMouseMove:function(){M(null)}}))}))});Su.displayName="NodeList";const m0=Su;var xo=F(18293);function y0(t){var e=t.dropPosition,n=t.dropLevelOffset,r=t.indent,a={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(e){case-1:a.top=0,a.left=-n*r;break;case 1:a.bottom=0,a.left=-n*r;break;case 0:a.bottom=0,a.left=r;break}return y.createElement("div",{style:a})}var E0=10,So=function(t){(0,ou.Z)(n,t);var e=(0,su.Z)(n);function n(){var r;(0,au.Z)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i)),r.destroyed=!1,r.delayedDragEnterLogic=void 0,r.loadingRetryTimes={},r.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:(0,vt.w$)()},r.dragStartMousePosition=null,r.dragNode=void 0,r.currentMouseOverDroppableNodeKey=null,r.listRef=y.createRef(),r.onNodeDragStart=function(o,l){var c=r.state,u=c.expandedKeys,d=c.keyEntities,f=r.props.onDragStart,p=l.props.eventKey;r.dragNode=l,r.dragStartMousePosition={x:o.clientX,y:o.clientY};var v=Re(u,p);r.setState({draggingNodeKey:p,dragChildrenKeys:r0(p,d),indent:r.listRef.current.getIndentWidth()}),r.setExpandedKeys(v),window.addEventListener("dragend",r.onWindowDragEnd),f?.({event:o,node:(0,vt.F)(l.props)})},r.onNodeDragEnter=function(o,l){var c=r.state,u=c.expandedKeys,d=c.keyEntities,f=c.dragChildrenKeys,p=c.flattenNodes,v=c.indent,h=r.props,m=h.onDragEnter,g=h.onExpand,E=h.allowDrop,b=h.direction,C=l.props,D=C.pos,x=C.eventKey,S=(0,We.Z)(r),k=S.dragNode;if(r.currentMouseOverDroppableNodeKey!==x&&(r.currentMouseOverDroppableNodeKey=x),!k){r.resetDragState();return}var w=du(o,k,l,v,r.dragStartMousePosition,E,p,d,u,b),T=w.dropPosition,R=w.dropLevelOffset,M=w.dropTargetKey,P=w.dropContainerKey,L=w.dropTargetPos,A=w.dropAllowed,I=w.dragOverNodeKey;if(f.indexOf(M)!==-1||!A){r.resetDragState();return}if(r.delayedDragEnterLogic||(r.delayedDragEnterLogic={}),Object.keys(r.delayedDragEnterLogic).forEach(function(_){clearTimeout(r.delayedDragEnterLogic[_])}),k.props.eventKey!==l.props.eventKey&&(o.persist(),r.delayedDragEnterLogic[D]=window.setTimeout(function(){if(r.state.draggingNodeKey!==null){var _=(0,vo.Z)(u),B=d[l.props.eventKey];B&&(B.children||[]).length&&(_=$e(u,l.props.eventKey)),"expandedKeys"in r.props||r.setExpandedKeys(_),g?.(_,{node:(0,vt.F)(l.props),expanded:!0,nativeEvent:o.nativeEvent})}},800)),k.props.eventKey===M&&R===0){r.resetDragState();return}r.setState({dragOverNodeKey:I,dropPosition:T,dropLevelOffset:R,dropTargetKey:M,dropContainerKey:P,dropTargetPos:L,dropAllowed:A}),m?.({event:o,node:(0,vt.F)(l.props),expandedKeys:u})},r.onNodeDragOver=function(o,l){var c=r.state,u=c.dragChildrenKeys,d=c.flattenNodes,f=c.keyEntities,p=c.expandedKeys,v=c.indent,h=r.props,m=h.onDragOver,g=h.allowDrop,E=h.direction,b=(0,We.Z)(r),C=b.dragNode;if(C){var D=du(o,C,l,v,r.dragStartMousePosition,g,d,f,p,E),x=D.dropPosition,S=D.dropLevelOffset,k=D.dropTargetKey,w=D.dropContainerKey,T=D.dropAllowed,R=D.dropTargetPos,M=D.dragOverNodeKey;u.indexOf(k)!==-1||!T||(C.props.eventKey===k&&S===0?r.state.dropPosition===null&&r.state.dropLevelOffset===null&&r.state.dropTargetKey===null&&r.state.dropContainerKey===null&&r.state.dropTargetPos===null&&r.state.dropAllowed===!1&&r.state.dragOverNodeKey===null||r.resetDragState():x===r.state.dropPosition&&S===r.state.dropLevelOffset&&k===r.state.dropTargetKey&&w===r.state.dropContainerKey&&R===r.state.dropTargetPos&&T===r.state.dropAllowed&&M===r.state.dragOverNodeKey||r.setState({dropPosition:x,dropLevelOffset:S,dropTargetKey:k,dropContainerKey:w,dropTargetPos:R,dropAllowed:T,dragOverNodeKey:M}),m?.({event:o,node:(0,vt.F)(l.props)}))}},r.onNodeDragLeave=function(o,l){r.currentMouseOverDroppableNodeKey===l.props.eventKey&&!o.currentTarget.contains(o.relatedTarget)&&(r.resetDragState(),r.currentMouseOverDroppableNodeKey=null);var c=r.props.onDragLeave;c?.({event:o,node:(0,vt.F)(l.props)})},r.onWindowDragEnd=function(o){r.onNodeDragEnd(o,null,!0),window.removeEventListener("dragend",r.onWindowDragEnd)},r.onNodeDragEnd=function(o,l){var c=r.props.onDragEnd;r.setState({dragOverNodeKey:null}),r.cleanDragState(),c?.({event:o,node:(0,vt.F)(l.props)}),r.dragNode=null,window.removeEventListener("dragend",r.onWindowDragEnd)},r.onNodeDrop=function(o,l){var c,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=r.state,f=d.dragChildrenKeys,p=d.dropPosition,v=d.dropTargetKey,h=d.dropTargetPos,m=d.dropAllowed;if(m){var g=r.props.onDrop;if(r.setState({dragOverNodeKey:null}),r.cleanDragState(),v!==null){var E=(0,oe.Z)((0,oe.Z)({},(0,vt.H8)(v,r.getTreeNodeRequiredProps())),{},{active:((c=r.getActiveItem())===null||c===void 0?void 0:c.key)===v,data:r.state.keyEntities[v].node}),b=f.indexOf(v)!==-1;(0,gn.ZP)(!b,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var C=Eo(h),D={event:o,node:(0,vt.F)(E),dragNode:r.dragNode?(0,vt.F)(r.dragNode.props):null,dragNodesKeys:[r.dragNode.props.eventKey].concat(f),dropToGap:p!==0,dropPosition:p+Number(C[C.length-1])};u||g?.(D),r.dragNode=null}}},r.cleanDragState=function(){var o=r.state.draggingNodeKey;o!==null&&r.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),r.dragStartMousePosition=null,r.currentMouseOverDroppableNodeKey=null},r.triggerExpandActionExpand=function(o,l){var c=r.state,u=c.expandedKeys,d=c.flattenNodes,f=l.expanded,p=l.key,v=l.isLeaf;if(!(v||o.shiftKey||o.metaKey||o.ctrlKey)){var h=d.filter(function(g){return g.key===p})[0],m=(0,vt.F)((0,oe.Z)((0,oe.Z)({},(0,vt.H8)(p,r.getTreeNodeRequiredProps())),{},{data:h.data}));r.setExpandedKeys(f?Re(u,p):$e(u,p)),r.onNodeExpand(o,m)}},r.onNodeClick=function(o,l){var c=r.props,u=c.onClick,d=c.expandAction;d==="click"&&r.triggerExpandActionExpand(o,l),u?.(o,l)},r.onNodeDoubleClick=function(o,l){var c=r.props,u=c.onDoubleClick,d=c.expandAction;d==="doubleClick"&&r.triggerExpandActionExpand(o,l),u?.(o,l)},r.onNodeSelect=function(o,l){var c=r.state.selectedKeys,u=r.state,d=u.keyEntities,f=u.fieldNames,p=r.props,v=p.onSelect,h=p.multiple,m=l.selected,g=l[f.key],E=!m;E?h?c=$e(c,g):c=[g]:c=Re(c,g);var b=c.map(function(C){var D=d[C];return D?D.node:null}).filter(function(C){return C});r.setUncontrolledState({selectedKeys:c}),v?.(c,{event:"select",selected:E,node:l,selectedNodes:b,nativeEvent:o.nativeEvent})},r.onNodeCheck=function(o,l,c){var u=r.state,d=u.keyEntities,f=u.checkedKeys,p=u.halfCheckedKeys,v=r.props,h=v.checkStrictly,m=v.onCheck,g=l.key,E,b={event:"check",node:l,checked:c,nativeEvent:o.nativeEvent};if(h){var C=c?$e(f,g):Re(f,g),D=Re(p,g);E={checked:C,halfChecked:D},b.checkedNodes=C.map(function(R){return d[R]}).filter(function(R){return R}).map(function(R){return R.node}),r.setUncontrolledState({checkedKeys:C})}else{var x=(0,xo.S)([].concat((0,vo.Z)(f),[g]),!0,d),S=x.checkedKeys,k=x.halfCheckedKeys;if(!c){var w=new Set(S);w.delete(g);var T=(0,xo.S)(Array.from(w),{checked:!1,halfCheckedKeys:k},d);S=T.checkedKeys,k=T.halfCheckedKeys}E=S,b.checkedNodes=[],b.checkedNodesPositions=[],b.halfCheckedKeys=k,S.forEach(function(R){var M=d[R];if(M){var P=M.node,L=M.pos;b.checkedNodes.push(P),b.checkedNodesPositions.push({node:P,pos:L})}}),r.setUncontrolledState({checkedKeys:S},!1,{halfCheckedKeys:k})}m?.(E,b)},r.onNodeLoad=function(o){var l=o.key,c=new Promise(function(u,d){r.setState(function(f){var p=f.loadedKeys,v=p===void 0?[]:p,h=f.loadingKeys,m=h===void 0?[]:h,g=r.props,E=g.loadData,b=g.onLoad;if(!E||v.indexOf(l)!==-1||m.indexOf(l)!==-1)return null;var C=E(o);return C.then(function(){var D=r.state.loadedKeys,x=$e(D,l);b?.(x,{event:"load",node:o}),r.setUncontrolledState({loadedKeys:x}),r.setState(function(S){return{loadingKeys:Re(S.loadingKeys,l)}}),u()}).catch(function(D){if(r.setState(function(S){return{loadingKeys:Re(S.loadingKeys,l)}}),r.loadingRetryTimes[l]=(r.loadingRetryTimes[l]||0)+1,r.loadingRetryTimes[l]>=E0){var x=r.state.loadedKeys;(0,gn.ZP)(!1,"Retry for `loadData` many times but still failed. No more retry."),r.setUncontrolledState({loadedKeys:$e(x,l)}),u()}d(D)}),{loadingKeys:$e(m,l)}})});return c.catch(function(){}),c},r.onNodeMouseEnter=function(o,l){var c=r.props.onMouseEnter;c?.({event:o,node:l})},r.onNodeMouseLeave=function(o,l){var c=r.props.onMouseLeave;c?.({event:o,node:l})},r.onNodeContextMenu=function(o,l){var c=r.props.onRightClick;c&&(o.preventDefault(),c({event:o,node:l}))},r.onFocus=function(){var o=r.props.onFocus;r.setState({focused:!0});for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];o?.apply(void 0,c)},r.onBlur=function(){var o=r.props.onBlur;r.setState({focused:!1}),r.onActiveChange(null);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];o?.apply(void 0,c)},r.getTreeNodeRequiredProps=function(){var o=r.state,l=o.expandedKeys,c=o.selectedKeys,u=o.loadedKeys,d=o.loadingKeys,f=o.checkedKeys,p=o.halfCheckedKeys,v=o.dragOverNodeKey,h=o.dropPosition,m=o.keyEntities;return{expandedKeys:l||[],selectedKeys:c||[],loadedKeys:u||[],loadingKeys:d||[],checkedKeys:f||[],halfCheckedKeys:p||[],dragOverNodeKey:v,dropPosition:h,keyEntities:m}},r.setExpandedKeys=function(o){var l=r.state,c=l.treeData,u=l.fieldNames,d=(0,vt.oH)(c,o,u);r.setUncontrolledState({expandedKeys:o,flattenNodes:d},!0)},r.onNodeExpand=function(o,l){var c=r.state.expandedKeys,u=r.state,d=u.listChanging,f=u.fieldNames,p=r.props,v=p.onExpand,h=p.loadData,m=l.expanded,g=l[f.key];if(!d){var E=c.indexOf(g),b=!m;if((0,gn.ZP)(m&&E!==-1||!m&&E===-1,"Expand state not sync with index check"),b?c=$e(c,g):c=Re(c,g),r.setExpandedKeys(c),v?.(c,{node:l,expanded:b,nativeEvent:o.nativeEvent}),b&&h){var C=r.onNodeLoad(l);C&&C.then(function(){var D=(0,vt.oH)(r.state.treeData,c,f);r.setUncontrolledState({flattenNodes:D})}).catch(function(){var D=r.state.expandedKeys,x=Re(D,g);r.setExpandedKeys(x)})}}},r.onListChangeStart=function(){r.setUncontrolledState({listChanging:!0})},r.onListChangeEnd=function(){setTimeout(function(){r.setUncontrolledState({listChanging:!1})})},r.onActiveChange=function(o){var l=r.state.activeKey,c=r.props.onActiveChange;l!==o&&(r.setState({activeKey:o}),o!==null&&r.scrollTo({key:o}),c?.(o))},r.getActiveItem=function(){var o=r.state,l=o.activeKey,c=o.flattenNodes;return l===null?null:c.find(function(u){var d=u.key;return d===l})||null},r.offsetActiveKey=function(o){var l=r.state,c=l.flattenNodes,u=l.activeKey,d=c.findIndex(function(v){var h=v.key;return h===u});d===-1&&o<0&&(d=c.length),d=(d+o+c.length)%c.length;var f=c[d];if(f){var p=f.key;r.onActiveChange(p)}else r.onActiveChange(null)},r.onKeyDown=function(o){var l=r.state,c=l.activeKey,u=l.expandedKeys,d=l.checkedKeys,f=l.fieldNames,p=r.props,v=p.onKeyDown,h=p.checkable,m=p.selectable;switch(o.which){case Rr.Z.UP:{r.offsetActiveKey(-1),o.preventDefault();break}case Rr.Z.DOWN:{r.offsetActiveKey(1),o.preventDefault();break}}var g=r.getActiveItem();if(g&&g.data){var E=r.getTreeNodeRequiredProps(),b=g.data.isLeaf===!1||!!(g.data[f.children]||[]).length,C=(0,vt.F)((0,oe.Z)((0,oe.Z)({},(0,vt.H8)(c,E)),{},{data:g.data,active:!0}));switch(o.which){case Rr.Z.LEFT:{b&&u.includes(c)?r.onNodeExpand({},C):g.parent&&r.onActiveChange(g.parent.key),o.preventDefault();break}case Rr.Z.RIGHT:{b&&!u.includes(c)?r.onNodeExpand({},C):g.children&&g.children.length&&r.onActiveChange(g.children[0].key),o.preventDefault();break}case Rr.Z.ENTER:case Rr.Z.SPACE:{h&&!C.disabled&&C.checkable!==!1&&!C.disableCheckbox?r.onNodeCheck({},C,!d.includes(c)):!h&&m&&!C.disabled&&C.selectable!==!1&&r.onNodeSelect({},C);break}}}v?.(o)},r.setUncontrolledState=function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!r.destroyed){var u=!1,d=!0,f={};Object.keys(o).forEach(function(p){if(p in r.props){d=!1;return}u=!0,f[p]=o[p]}),u&&(!l||d)&&r.setState((0,oe.Z)((0,oe.Z)({},f),c))}},r.scrollTo=function(o){r.listRef.current.scrollTo(o)},r}return(0,iu.Z)(n,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var a=this.props.activeKey;a!==void 0&&a!==this.state.activeKey&&(this.setState({activeKey:a}),a!==null&&this.scrollTo({key:a}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var a,i=this.state,s=i.focused,o=i.flattenNodes,l=i.keyEntities,c=i.draggingNodeKey,u=i.activeKey,d=i.dropLevelOffset,f=i.dropContainerKey,p=i.dropTargetKey,v=i.dropPosition,h=i.dragOverNodeKey,m=i.indent,g=this.props,E=g.prefixCls,b=g.className,C=g.style,D=g.showLine,x=g.focusable,S=g.tabIndex,k=S===void 0?0:S,w=g.selectable,T=g.showIcon,R=g.icon,M=g.switcherIcon,P=g.draggable,L=g.checkable,A=g.checkStrictly,I=g.disabled,_=g.motion,B=g.loadData,z=g.filterTreeNode,N=g.height,G=g.itemHeight,K=g.virtual,H=g.titleRender,$=g.dropIndicatorRender,W=g.onContextMenu,X=g.onScroll,q=g.direction,tt=g.rootClassName,et=g.rootStyle,V=(0,lu.Z)(this.props,{aria:!0,data:!0}),Z;return P&&((0,nu.Z)(P)==="object"?Z=P:typeof P=="function"?Z={nodeDraggable:P}:Z={}),y.createElement(ho.Provider,{value:{prefixCls:E,selectable:w,showIcon:T,icon:R,switcherIcon:M,draggable:Z,draggingNodeKey:c,checkable:L,checkStrictly:A,disabled:I,keyEntities:l,dropLevelOffset:d,dropContainerKey:f,dropTargetKey:p,dropPosition:v,dragOverNodeKey:h,indent:m,direction:q,dropIndicatorRender:$,loadData:B,filterTreeNode:z,titleRender:H,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},y.createElement("div",{role:"tree",className:be()(E,b,tt,(a={},(0,Rt.Z)(a,"".concat(E,"-show-line"),D),(0,Rt.Z)(a,"".concat(E,"-focused"),s),(0,Rt.Z)(a,"".concat(E,"-active-focused"),u!==null),a)),style:et},y.createElement(m0,(0,Ee.Z)({ref:this.listRef,prefixCls:E,style:C,data:o,disabled:I,selectable:w,checkable:!!L,motion:_,dragging:c!==null,height:N,itemHeight:G,virtual:K,focusable:x,focused:s,tabIndex:k,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:W,onScroll:X},this.getTreeNodeRequiredProps(),V))))}}],[{key:"getDerivedStateFromProps",value:function(a,i){var s=i.prevProps,o={prevProps:a};function l(x){return!s&&x in a||s&&s[x]!==a[x]}var c,u=i.fieldNames;if(l("fieldNames")&&(u=(0,vt.w$)(a.fieldNames),o.fieldNames=u),l("treeData")?c=a.treeData:l("children")&&((0,gn.ZP)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),c=(0,vt.zn)(a.children)),c){o.treeData=c;var d=(0,vt.I8)(c,{fieldNames:u});o.keyEntities=(0,oe.Z)((0,Rt.Z)({},lr,Eu),d.keyEntities)}var f=o.keyEntities||i.keyEntities;if(l("expandedKeys")||s&&l("autoExpandParent"))o.expandedKeys=a.autoExpandParent||!s&&a.defaultExpandParent?pu(a.expandedKeys,f):a.expandedKeys;else if(!s&&a.defaultExpandAll){var p=(0,oe.Z)({},f);delete p[lr],o.expandedKeys=Object.keys(p).map(function(x){return p[x].key})}else!s&&a.defaultExpandedKeys&&(o.expandedKeys=a.autoExpandParent||a.defaultExpandParent?pu(a.defaultExpandedKeys,f):a.defaultExpandedKeys);if(o.expandedKeys||delete o.expandedKeys,c||o.expandedKeys){var v=(0,vt.oH)(c||i.treeData,o.expandedKeys||i.expandedKeys,u);o.flattenNodes=v}if(a.selectable&&(l("selectedKeys")?o.selectedKeys=fu(a.selectedKeys,a):!s&&a.defaultSelectedKeys&&(o.selectedKeys=fu(a.defaultSelectedKeys,a))),a.checkable){var h;if(l("checkedKeys")?h=bo(a.checkedKeys)||{}:!s&&a.defaultCheckedKeys?h=bo(a.defaultCheckedKeys)||{}:c&&(h=bo(a.checkedKeys)||{checkedKeys:i.checkedKeys,halfCheckedKeys:i.halfCheckedKeys}),h){var m=h,g=m.checkedKeys,E=g===void 0?[]:g,b=m.halfCheckedKeys,C=b===void 0?[]:b;if(!a.checkStrictly){var D=(0,xo.S)(E,!0,f);E=D.checkedKeys,C=D.halfCheckedKeys}o.checkedKeys=E,o.halfCheckedKeys=C}}return l("loadedKeys")&&(o.loadedKeys=a.loadedKeys),o}}]),n}(y.Component);So.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:y0,allowDrop:function(){return!0},expandAction:!1},So.TreeNode=yo;const b0=So;function C0(t){return(0,ru.css)`
    .moveable-control-box {
      z-index: 999;
    }
    ,
    .rc-tree {
      margin: 0;
      margin-bottom: 15px;
      border: 1px solid transparent;

      &-focused:not(&-active-focused) {
        border-color: cyan;
      }

      .rc-tree-title {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
      }

      .rc-tree-treenode {
        margin: 0;
        padding: 1px;
        line-height: 24px;
        white-space: nowrap;
        list-style: none;
        outline: 0;

        display: flex;
        margin-bottom: 3px;
        cursor: pointer;

        .draggable {
          color: #333;
          -moz-user-select: none;
          -khtml-user-select: none;
          -webkit-user-select: none;
          user-select: none;
          /* Required to make elements draggable in old WebKit */
          // -khtml-user-drag: element;
          // -webkit-user-drag: element;
        }

        &.drop-container {
          > .draggable::after {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            box-shadow: inset 0 0 0 2px blue;
            content: '';
          }
          & ~ .rc-tree-treenode {
            border-left: 2px solid ${t.components.input.borderColor};
          }
        }
        &.drop-target {
          & ~ .rc-tree-treenode {
            border-left: none;
          }
        }
        &.filter-node {
          > .rc-tree-node-content-wrapper {
            color: #a60000 !important;
            font-weight: bold !important;
          }
        }
        ul {
          margin: 0;
          padding: 0 0 0 18px;
        }
        .rc-tree-node-content-wrapper {
          position: relative;
          display: inline-block;
          height: 24px;
          margin: 0;
          padding: 0;
          text-decoration: none;
          vertical-align: top;
          cursor: grab;
          flex-grow: 1;
          display: flex;

          border: 1px solid ${t.components.input.borderColor};
          border-radius: ${t.shape.radius.default};
          background: ${t.colors.background.secondary};
          min-height: ${t.spacing.gridSize*4}px;

          &:hover {
            border: 1px solid ${t.components.input.borderHover};
          }

          &.rc-tree-node-selected {
            border: 1px solid ${t.colors.primary.border};
            opacity: 1;
          }
        }

        span {
          &.rc-tree-checkbox,
          &.rc-tree-iconEle {
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-right: 2px;
            line-height: 16px;
            vertical-align: -0.125em;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-switcher {
            display: flex;
            align-items: center;
            width: 16px;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-icon_loading {
            margin-right: 2px;
            vertical-align: top;
            background: url('data:image/gif;base64,R0lGODlhEAAQAKIGAMLY8YSx5HOm4Mjc88/g9Ofw+v///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAGACwAAAAAEAAQAAADMGi6RbUwGjKIXCAA016PgRBElAVlG/RdLOO0X9nK61W39qvqiwz5Ls/rRqrggsdkAgAh+QQFCgAGACwCAAAABwAFAAADD2hqELAmiFBIYY4MAutdCQAh+QQFCgAGACwGAAAABwAFAAADD1hU1kaDOKMYCGAGEeYFCQAh+QQFCgAGACwKAAIABQAHAAADEFhUZjSkKdZqBQG0IELDQAIAIfkEBQoABgAsCgAGAAUABwAAAxBoVlRKgyjmlAIBqCDCzUoCACH5BAUKAAYALAYACgAHAAUAAAMPaGpFtYYMAgJgLogA610JACH5BAUKAAYALAIACgAHAAUAAAMPCAHWFiI4o1ghZZJB5i0JACH5BAUKAAYALAAABgAFAAcAAAMQCAFmIaEp1motpDQySMNFAgA7')
              no-repeat scroll 0 0 transparent;
          }
          &.rc-tree-switcher {
            &.rc-tree-switcher-noop {
              cursor: auto;
            }
            &.rc-tree-switcher_open {
              background-position: -93px -56px;
            }
            &.rc-tree-switcher_close {
              background-position: -75px -56px;
            }
          }
          &.rc-tree-checkbox {
            width: 13px;
            height: 13px;
            margin: 0 3px;
            background-position: 0 0;
            &-checked {
              background-position: -14px 0;
            }
            &-indeterminate {
              background-position: -14px -28px;
            }
            &-disabled {
              background-position: 0 -56px;
            }
            &.rc-tree-checkbox-checked.rc-tree-checkbox-disabled {
              background-position: -14px -56px;
            }
            &.rc-tree-checkbox-indeterminate.rc-tree-checkbox-disabled {
              position: relative;
              background: #ccc;
              border-radius: 3px;
              &::after {
                position: absolute;
                top: 5px;
                left: 3px;
                width: 5px;
                height: 0;
                border: 2px solid #fff;
                border-top: 0;
                border-left: 0;
                -webkit-transform: scale(1);
                transform: scale(1);
                content: ' ';
              }
            }
          }
        }
      }
      &:not(.rc-tree-show-line) {
        .rc-tree-treenode {
          .rc-tree-switcher-noop {
            background: none;
          }
        }
      }
      &.rc-tree-show-line {
        .rc-tree-treenode:not(:last-child) {
          > ul {
            background: url('data:image/gif;base64,R0lGODlhCQACAIAAAMzMzP///yH5BAEAAAEALAAAAAAJAAIAAAIEjI9pUAA7') 0 0
              repeat-y;
          }
          > .rc-tree-switcher-noop {
            background-position: -56px -18px;
          }
        }
        .rc-tree-treenode:last-child {
          > .rc-tree-switcher-noop {
            background-position: -56px -36px;
          }
        }
      }
      &-child-tree {
        display: none;
        &-open {
          display: block;
        }
      }
      &-treenode-disabled {
        > span:not(.rc-tree-switcher),
        > a,
        > a span {
          color: #767676;
          cursor: not-allowed;
        }
      }
      &-treenode-active {
        background: rgba(0, 0, 0, 0.1);
      }
      &-node-selected {
        opacity: 0.8;
      }
      &-icon__open {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -16px;
      }
      &-icon__close {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px 0;
      }
      &-icon__docu {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -32px;
      }
      &-icon__customize {
        margin-right: 2px;
        vertical-align: top;
      }
      &-title {
        display: inline-block;
      }
      &-indent {
        display: inline-block;
        height: 0;
        vertical-align: bottom;
      }
      &-indent-unit {
        display: inline-block;
        width: 16px;
      }

      &-draggable-icon {
        display: inline-flex;
        justify-content: center;
        width: 16px;
      }
    }
  `}var x0=F(93114);const S0=({settings:t,nodeData:e,setAllowSelection:n})=>{const r=e.dataRef,a=e.dataRef.getName(),i=(0,Dt.wW)(D0),s=t.layer,o=()=>{if(t?.layer)return t.layer.scene},l=p=>{(p.parent??s).doAction(Wt.Delete,p),n(!1)},c=p=>{(p.parent??s).doAction(Wt.Duplicate,p),n(!1)},u=(p,v)=>{p.onChange({...p.options,name:v})},d=p=>!!o()?.canRename(p),f=p=>p.options.type;return y.createElement(y.Fragment,null,y.createElement(x0.X,{name:a,onChange:p=>u(r,p),verifyLayerNameUniqueness:d??void 0}),y.createElement("div",{className:i.textWrapper},"\xA0 ",f(r)),!e.children&&y.createElement("div",{className:i.actionButtonsWrapper},y.createElement(le.h,{name:"copy",title:"Duplicate",className:i.actionIcon,onClick:()=>c(r),tooltip:"Duplicate"}),y.createElement(le.h,{name:"trash-alt",title:"remove",className:i.actionIcon,onClick:()=>l(r),tooltip:"Remove"})))},D0=t=>({actionButtonsWrapper:(0,U.css)`
    display: flex;
    align-items: flex-end;
  `,actionIcon:(0,U.css)`
    color: ${t.colors.text.secondary};
    cursor: pointer;
    &:hover {
      color: ${t.colors.text.primary};
    }
  `,textWrapper:(0,U.css)`
    display: flex;
    align-items: center;
    flex-grow: 1;
    overflow: hidden;
    margin-right: ${t.spacing(1)};
  `,layerName:(0,U.css)`
    font-weight: ${t.typography.fontWeightMedium};
    color: ${t.colors.primary.text};
    cursor: pointer;
    overflow: hidden;
    margin-left: ${t.spacing(.5)};
  `});function Do(t,e,n){let r=[];if(t)for(let a=t.elements.length;a--;a>=0){const i=t.elements[a],s={key:i.UID,title:i.getName(),selectable:!0,dataRef:i};i instanceof jt&&(s.children=Do(i,e,n)),r.push(s)}return r}function w0(t,e){const n=t.node.key,r=t.dragNode.key,a=t.node.pos.split("-"),i=t.dropPosition-Number(a[a.length-1]),s=(c,u,d)=>{c.forEach((f,p,v)=>{if(f.key===u){d(f,p,v);return}f.children&&s(f.children,u,d)})},o=[...e];let l;if(s(o,r,(c,u,d)=>{d.splice(u,1),l=c}),i===0)s(o,n,c=>{c.children=c.children||[],c.children.unshift(l)});else{let c=[],u=0;s(o,n,(d,f,p)=>{c=p,u=f}),i===-1?c.splice(u,0,l):c.splice(u+1,0,l)}return o}let Du=!0;const M0=({item:t})=>{const[e,n]=(0,y.useState)(Do(t?.settings?.scene.root)),[r,a]=(0,y.useState)(!0),[i,s]=(0,y.useState)([]),[o,l]=(0,y.useState)([]),c=(0,Dt.l4)(),u=C0(c),d=(0,Dt.wW)(k0),f=c.colors.primary.border,{settings:p}=t,v=(0,y.useMemo)(()=>p?.selected?p.selected.map(R=>R?.getName()):[],[p?.selected]),h=(0,y.useMemo)(()=>p?.selected?p.selected.map(R=>R?.UID):[],[p?.selected]);if((0,y.useEffect)(()=>{n(Do(t?.settings?.scene.root,v,f)),l(h),x()},[t?.settings?.scene.root,f,v,h]),!p)return y.createElement("div",null,"No settings");const m=p.layer;if(!m)return y.createElement("div",null,"Missing layer?");const g=(R,M)=>{Du&&t.settings?.scene&&Ko(t.settings.scene,M.node.dataRef)},E=()=>!0,b=R=>{const M=R.node.pos.split("-"),P=R.dropPosition-Number(M[M.length-1]),L=R.dragNode.dataRef,A=R.node.dataRef,I=w0(R,e);n(I),A.parent?.scene.reorderElements(L,A,R.dropToGap,P)},C=R=>{s(R),a(!1)},D=R=>R.isLeaf?y.createElement(y.Fragment,null):y.createElement(po.J,{name:"angle-right",title:"Node Icon",style:{transform:`rotate(${R.expanded?90:0}deg)`,fill:c.colors.text.primary}}),x=(R=!0)=>{Du=R},S=()=>{m.scene.clearCurrentSelection()},k=R=>y.createElement(S0,{nodeData:R,setAllowSelection:x,settings:p}),w=()=>{m.scene?m.scene.frameSelection():console.warn("no scene!")},T=Sn(p.scene.shouldShowAdvancedTypes).options;return y.createElement(y.Fragment,null,y.createElement(ru.Global,{styles:u}),y.createElement(b0,{selectable:!0,onSelect:g,draggable:!0,defaultExpandAll:!0,autoExpandParent:r,showIcon:!1,allowDrop:E,onDrop:b,expandedKeys:i,onExpand:C,treeData:e,titleRender:k,switcherIcon:D,selectedKeys:o,multiple:!0}),y.createElement(Se.Lh,{justify:"space-between"},y.createElement("div",{className:d.addLayerButton},y.createElement(qc.f,{onChange:R=>Ma(R,m),options:T,label:"Add item"})),v.length>0&&y.createElement(Lr.zx,{size:"sm",variant:"secondary",onClick:S},"Clear selection"),v.length>1&&Uc.config.featureToggles.canvasPanelNesting&&y.createElement(Lr.zx,{size:"sm",variant:"secondary",onClick:w},"Frame selection")))},k0=t=>({addLayerButton:(0,U.css)`
    margin-left: 18px;
    min-width: 150px;
  `});function wu(t){const{selected:e,scene:n}=t;if(n.currentLayer||(n.currentLayer=n.root),e)for(const a of e){if(a instanceof jt){n.currentLayer=a;break}if(a&&a.parent){n.currentLayer=a.parent;break}}const r=n.currentLayer.options||{elements:[]};return{category:["Layer"],path:"--",values:a=>({getValue:i=>(0,ve.get)(r,i),onChange:(i,s)=>{if(i==="type"&&s){console.warn("unable to change layer type");return}const o=(0,ha.hs)(r,i,s);n.currentLayer?.onChange(o),n.currentLayer?.updateData(n.context)}}),build:(a,i)=>{const s=n.currentLayer;s&&s.isRoot(),a.addCustomEditor({id:"content",path:"root",name:"Elements",editor:M0,settings:{scene:n,layer:n.currentLayer,selected:e}});const o={...i,options:r};Tr.addBackground(a,o),Tr.addBorder(a,o),s&&!s.isRoot()&&a.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Constraints",editor:tu,settings:{scene:t.scene,element:s}})}}}var T0=F(22784),R0=F(77804);const O0=({onTabChange:t})=>{const[e,n]=(0,y.useState)(Oe.SelectedElement),r=[{label:"Selected Element",value:Oe.SelectedElement},{label:"Element Management",value:Oe.ElementManagement}],a=i=>{t(i),n(i)};return y.createElement(y.Fragment,null,y.createElement(T0.J,null,r.map((i,s)=>y.createElement(R0.O,{key:`${i.value}-${s}`,label:i.label,active:i.value===e,onChangeTab:()=>a(i.value)}))))};function P0(){const t=(0,Cn.Z)(Or),e=t?.panel.context?.instanceState,n=(0,Dt.wW)(A0),[r,a]=(0,y.useState)(Oe.SelectedElement),i=(0,y.useMemo)(()=>{const d=t?.panel,f=e;if(!f||!d)return new fo.j({id:"root",title:"root"});const p=v=>{r===Oe.ElementManagement&&v.addNestedOptions(wu(e));const h=f.selected;if(h?.length===1&&r===Oe.SelectedElement){const m=h[0];m&&!(m instanceof jt)&&v.addNestedOptions(eu({category:[`Selected element (${m.options.name})`],element:m,scene:f.scene}))}Mo(v)};return L0({options:d.props.options,onChange:d.props.onOptionsChange,data:d.props.data?.series},p)},[e,t,r]),s={marginLeft:15,marginTop:10},o=d=>{a(d)},l=Sn(e?.scene.shouldShowAdvancedTypes).options,c=e?.layer,u=e&&r===Oe.SelectedElement&&e.selected.length===0;return y.createElement(y.Fragment,null,y.createElement("div",{style:s},i.items.map(d=>d.render())),y.createElement("div",{style:s},y.createElement(qc.f,{onChange:d=>Ma(d,c),options:l,label:"Add item"})),y.createElement("div",{style:s},y.createElement(O0,{onTabChange:o}),i.categories.map(d=>Mu(d)),u&&y.createElement("div",{className:n.selectElement},"Please select an element")))}function Mu(t){return y.createElement(_g.u,{...t.props,key:t.props.id},y.createElement("div",null,t.items.map(e=>e.render())),t.categories.map(e=>Mu(e)))}function L0(t,e){const n={data:t.data??[],options:t.options},r=new fo.j({id:"root",title:"root"}),a=s=>{if(s?.length){const o=s[0];let l=r.categories.find(c=>c.props.id===o);return l||(l=new fo.j({id:o,title:o}),r.categories.push(l)),l}return r},i={getValue:s=>(0,ve.get)(t.options,s),onChange:(s,o)=>{t.onChange((0,ha.hs)(t.options,s,o))}};return(0,zg.HZ)(e,i,a,n),r}const A0=t=>({selectElement:(0,U.css)`
    color: ${t.colors.text.secondary};
    padding: ${t.spacing(2)};
  `}),wo=10,ku=32;function N0({onClose:t,id:e,scene:n}){const r=n.root.div?.getBoundingClientRect(),a=window.innerHeight,i=window.innerWidth,s=(0,y.useRef)(null),o=(0,Dt.wW)(I0),l="inlineEditPanel"+e.toString(),c={width:400,height:400},u=r?.width??c.width+wo*2,d=r?.x??0+u-c.width-wo,f=r?.y??0+ku,p=Qc.Z.getObject(l,{x:d,y:f,w:c.width,h:c.height}),[v,h]=(0,y.useState)({width:p.w,height:p.h}),[m,g]=(0,y.useState)({x:p.x,y:p.y});(0,y.useEffect)(()=>{const D=i-v.width-wo,x=a-v.height-ku;D<m.x&&D>0&&g({...m,x:D}),x<m.y&&x>0&&g({...m,y:x})},[a,i,m,v]);const E=(D,x)=>{let S=x.x<0?0:x.x,k=x.y<0?0:x.y;g({x:S,y:k}),C(S,k,v.width,v.height)},b=(D,x)=>{const{size:S}=x;h({width:S.width,height:S.height}),C(m.x,m.y,S.width,S.height)},C=(D,x,S,k)=>{Qc.Z.setObject(l,{x:D,y:x,w:S,h:k})};return y.createElement(vn.h_,null,y.createElement("div",{className:o.draggableWrapper},y.createElement(Ig(),{handle:"strong",onStop:E,position:{x:m.x,y:m.y}},y.createElement(Bg.Resizable,{height:v.height,width:v.width,onResize:b},y.createElement("div",{className:o.inlineEditorContainer,style:{height:`${v.height}px`,width:`${v.width}px`},ref:s},y.createElement("strong",{className:o.inlineEditorHeader},y.createElement("div",{className:o.placeholder}),y.createElement("div",null,"Canvas Inline Editor"),y.createElement(le.h,{name:"times",size:"xl",className:o.inlineEditorClose,onClick:t,tooltip:"Close inline editor"})),y.createElement("div",{className:o.inlineEditorContentWrapper},y.createElement("div",{className:o.inlineEditorContent},y.createElement(P0,null))))))))}const I0=t=>({inlineEditorContainer:(0,U.css)`
    display: flex;
    flex-direction: column;
    background: ${t.components.panel.background};
    border: 1px solid ${t.colors.border.weak};
    box-shadow: ${t.shadows.z3};
    z-index: 1000;
    opacity: 1;
    min-width: 400px;
  `,draggableWrapper:(0,U.css)`
    width: 0;
    height: 0;
  `,inlineEditorHeader:(0,U.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    background: ${t.colors.background.canvas};
    border-bottom: 1px solid ${t.colors.border.weak};
    height: 40px;
    cursor: move;
  `,inlineEditorContent:(0,U.css)`
    white-space: pre-wrap;
    padding: 10px;
  `,inlineEditorClose:(0,U.css)`
    margin-left: auto;
  `,placeholder:(0,U.css)`
    width: 24px;
    height: 24px;
    visibility: hidden;
    margin-right: auto;
  `,inlineEditorContentWrapper:(0,U.css)`
    overflow: scroll;
  `});let mn=[],cr,ga=!1,ma=!1;const Or=new Qo.t(1);class Tu extends y.Component{constructor(e){super(e),this.subs=new Id.w0,this.needsReload=!1,this.isEditing=qo.E1.getSearchObject().editPanel!==void 0,this.onUpdateScene=n=>{const{onOptionsChange:r,options:a}=this.props;r({...a,root:n}),this.setState({refresh:this.state.refresh+1}),Or.next({panel:this})},this.openInlineEdit=()=>{if(ga){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openInlineEdit:!0}),ga=!0},this.openSetBackground=n=>{if(ma){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openSetBackground:!0}),this.setState({contextMenuAnchorPoint:n}),ma=!0},this.tooltipCallback=n=>{this.scene.tooltip=n,this.forceUpdate()},this.moveableActionCallback=n=>{this.setState({moveableAction:n}),this.forceUpdate()},this.closeInlineEdit=()=>{this.setState({openInlineEdit:!1}),ga=!1},this.closeSetBackground=()=>{this.setState({openSetBackground:!1}),ma=!1},this.setActivePanel=()=>{cr=this,Or.next({panel:this})},this.renderInlineEdit=()=>y.createElement(N0,{onClose:()=>this.closeInlineEdit(),id:this.props.id,scene:this.scene}),this.renderSetBackground=()=>y.createElement(Lg,{onClose:()=>this.closeSetBackground(),scene:this.scene,anchorPoint:this.state.contextMenuAnchorPoint}),this.state={refresh:0,openInlineEdit:!1,openSetBackground:!1,contextMenuAnchorPoint:{x:0,y:0},moveableAction:!1},this.scene=new Rg(this.props.options.root,this.props.options.inlineEditing,this.props.options.showAdvancedTypes,this.onUpdateScene,this),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),this.scene.inlineEditingCallback=this.openInlineEdit,this.scene.setBackgroundCallback=this.openSetBackground,this.scene.tooltipCallback=this.tooltipCallback,this.scene.moveableActionCallback=this.moveableActionCallback,this.subs.add(this.props.eventBus.subscribe(jc.xF,n=>{this.scene.clearCurrentSelection(),this.closeInlineEdit()})),this.subs.add(this.props.eventBus.subscribe(jc.Yr,n=>{this.props.id===n.payload&&(this.needsReload=!0,this.scene.clearCurrentSelection())}))}componentDidMount(){cr=this,Or.next({panel:this}),this.panelContext=this.context,this.panelContext.onInstanceStateChange&&(this.panelContext.onInstanceStateChange({scene:this.scene,layer:this.scene.root}),this.subs.add(this.scene.selection.subscribe({next:e=>{e.length&&(cr=this,Or.next({panel:this})),mn.forEach(n=>{n!==cr&&(n.scene.clearCurrentSelection(!0),n.scene.connections.select(void 0))}),this.panelContext?.onInstanceStateChange({scene:this.scene,selected:e,layer:this.scene.root})}})),this.subs.add(this.scene.connections.selection.subscribe({next:e=>{this.context.instanceState&&(this.panelContext?.onInstanceStateChange({scene:this.scene,selected:this.context.instanceState.selected,selectedConnection:e,layer:this.scene.root}),e&&(cr=this,Or.next({panel:this})),mn.forEach(n=>{n!==cr&&(n.scene.clearCurrentSelection(!0),n.scene.connections.select(void 0))}),setTimeout(()=>{this.forceUpdate()}))}}))),mn.push(this)}componentWillUnmount(){this.scene.subscription.unsubscribe(),this.subs.unsubscribe(),ga=!1,ma=!1,mn=mn.filter(e=>e.props.id!==cr?.props.id)}shouldComponentUpdate(e,n){const{width:r,height:a,data:i,options:s}=this.props;let o=!1;(r!==e.width||a!==e.height)&&(this.scene.updateSize(e.width,e.height),o=!0),i!==e.data&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),o=!0),s!==e.options&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),o=!0),this.state.refresh!==n.refresh&&(o=!0),this.state.openInlineEdit!==n.openInlineEdit&&(o=!0),this.state.openSetBackground!==n.openSetBackground&&(o=!0),this.state.moveableAction!==n.moveableAction&&(o=!0);const l=this.props.options.inlineEditing!==e.options.inlineEditing,c=this.props.options.showAdvancedTypes!==e.options.showAdvancedTypes;return(this.needsReload||l||c)&&(l&&this.scene.revId++,this.needsReload=!1,this.scene.load(e.options.root,e.options.inlineEditing,e.options.showAdvancedTypes),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),o=!0),o}render(){return y.createElement(y.Fragment,null,this.scene.render(),this.state.openInlineEdit&&this.renderInlineEdit(),this.state.openSetBackground&&this.renderSetBackground())}}Tu.contextType=zr.bb;function B0(t){return{category:t.category,path:"--",values:e=>({getValue:n=>(0,ve.get)(t.connection.info,n),onChange:(n,r)=>{console.log(r,typeof r);let a=t.connection.info;a=(0,ha.hs)(a,n,r),t.scene.connections.onChange(t.connection,a)}}),build:(e,n)=>{const r={...n,options:t.connection.info};Tr.addColor(e,r),Tr.addSize(e,r)}}}const _0=t=>{if((t?.pluginVersion??"")===""){const n=t.options?.root;if(n?.elements)for(const r of n.elements)r.type==="text-box"&&(r.type="rectangle")}return t.options},Mo=t=>{t.addBooleanSwitch({path:"inlineEditing",name:"Inline editing",description:"Enable editing the panel directly",defaultValue:!0}),t.addBooleanSwitch({path:"showAdvancedTypes",name:"Experimental element types",description:"Enable selection of experimental element types",defaultValue:!0})},z0=new Ea.c(Tu).setNoPadding().useFieldConfig({standardOptions:{[ba.qb.Mappings]:{settings:{icon:!0}}}}).setMigrationHandler(_0).setPanelOptions((t,e)=>{const n=e.instanceState;if(Mo(t),n){t.addNestedOptions(wu(n));const r=n.selected,a=n.selectedConnection;if(r?.length===1){const i=r[0];i instanceof jt||t.addNestedOptions(eu({category:[`Selected element (${i.options.name})`],element:i,scene:n.scene}))}a&&t.addNestedOptions(B0({category:["Selected connection"],connection:a,scene:n.scene}))}})}}]);

//# sourceMappingURL=canvasPanel.5f64f73aeae3531e0477.js.map